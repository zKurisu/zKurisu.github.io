

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="ArchWiki参考博客 一些知识点Arch Linux 现在只支持 x86_64(即 amd64) 架构. Arch Linux 的发布版本只是安装和修复环境，包含 base 元软件包和一些辅助软件，一般每月上旬发布一次。 使用 pacman -Syu 命令升级系统。 新功能通过 pacman -Syu 即可拥有。 pacman -Qs 可用于查找包. 提高系统稳定性 Arch Linux 安装">
<meta property="og:type" content="article">
<meta property="og:title" content="ArchWiki 中 archlinux 的安装">
<meta property="og:url" content="http://example.com/2022/08/30/Archlinux%20%E7%9A%84%E5%AE%89%E8%A3%85/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="ArchWiki参考博客 一些知识点Arch Linux 现在只支持 x86_64(即 amd64) 架构. Arch Linux 的发布版本只是安装和修复环境，包含 base 元软件包和一些辅助软件，一般每月上旬发布一次。 使用 pacman -Syu 命令升级系统。 新功能通过 pacman -Syu 即可拥有。 pacman -Qs 可用于查找包. 提高系统稳定性 Arch Linux 安装">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-30T07:58:03.000Z">
<meta property="article:modified_time" content="2022-10-01T11:31:48.004Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>ArchWiki 中 archlinux 的安装 - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Jie</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/SteinsGate_all.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="ArchWiki 中 archlinux 的安装"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-08-30 15:58" pubdate>
          2022年8月30日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          8.1k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          68 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">ArchWiki 中 archlinux 的安装</h1>
            
            
              <div class="markdown-body">
                
                <p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Installation_guide">ArchWiki</a><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv15713480">参考博客</a></p>
<h1 id="一些知识点"><a href="#一些知识点" class="headerlink" title="一些知识点"></a>一些知识点</h1><p>Arch Linux 现在只支持 x86_64(即 amd64) 架构.</p>
<p>Arch Linux 的发布版本只是安装和修复环境，包含 base 元软件包和一些辅助软件，一般每月上旬发布一次。</p>
<p>使用 <code>pacman -Syu</code> 命令升级系统。</p>
<p>新功能通过 <code>pacman -Syu</code> 即可拥有。</p>
<p><code>pacman -Qs</code> 可用于查找包.</p>
<p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/System_maintenance">提高系统稳定性</a></p>
<p>Arch Linux 安装镜像不支持安全启动 (Secure Boot).</p>
<p>虚拟控制台默认的 Shell 是 Zsh.</p>
<p>如果要清除原来的分区信息, 通过创建一个新的分区表, 利用 <code>fdisk</code>.</p>
<p>BIOS with MBR.</p>
<p>UEFI with GPT.</p>
<p>如果要启动的磁盘已经有一个 EFI 系统分区，不要新建 EFI 分区。</p>
<p>如果要创建一个 EFI 系统分区，使用 <code>mkfs.fat)8</code> 将其格式化为 Fat32.</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># mkfs.fat -F <span class="hljs-number">32</span> <span class="hljs-regexp">/dev/</span>efi_system_partition<br></code></pre></td></tr></table></figure>
<p>挂载分区一定要遵循顺序，先挂载 (root) 分区到 (&#x2F;mnt), 再挂载引导 (boot) 分区到 (&#x2F;mnt&#x2F;boot 或 &#x2F;mnt&#x2F;efi), 最后再挂载其他分区。</p>
<p>如果创建了交换空间卷，使用 <code>swapon</code> 启动它:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># swapon <span class="hljs-regexp">/dev/</span>swap_partition<br></code></pre></td></tr></table></figure>
<p>文件 <code>/etc/pacman.d/mirrorlist</code> 定义了软件包会从哪个镜像下载.<br>安装必需得软件包:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">pacstrap /mnt base linux linux-firmware</span><br></code></pre></td></tr></table></figure>
<p>在虚拟机或容器中安装时，可以不安装固件软件包 (即 linux-firmware).</p>
<p>这里安装 <code>base-devel</code> 可能更好。</p>
<p>要生成文件系统表，用于在系统启动时自动挂载分区。</p>
<p>注意b站那个教程装 kde 桌面时，软件包是 <code>kde-applications-meta</code>.</p>
<h1 id="自己安装的全过程-综合多个安装教程-并在虚拟机上实验"><a href="#自己安装的全过程-综合多个安装教程-并在虚拟机上实验" class="headerlink" title="自己安装的全过程 (综合多个安装教程, 并在虚拟机上实验)"></a>自己安装的全过程 (综合多个安装教程, 并在虚拟机上实验)</h1><h2 id="修改命令行字体"><a href="#修改命令行字体" class="headerlink" title="修改命令行字体"></a>修改命令行字体</h2><p>修改命令行的字体，其字体文件存放在 <code>/usr/share/kbd/consolefonts</code> 下:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># setfont <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/kbd/</span>consolefonts/LatGrkCyr-<span class="hljs-number">12</span>x22.psfu.gz<br></code></pre></td></tr></table></figure>
<p>这个字体较大.</p>
<h2 id="修改键盘布局"><a href="#修改键盘布局" class="headerlink" title="修改键盘布局"></a>修改键盘布局</h2><p>使用 <code>loadkeys</code> 命令，如:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># loadkeys colemak</span><br></code></pre></td></tr></table></figure>
<h2 id="修改键位"><a href="#修改键位" class="headerlink" title="修改键位"></a>修改键位</h2><p>查看所有的 keycode, 使用 <code>dumpkeys</code> 命令:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">dumpkeys -l</span><br></code></pre></td></tr></table></figure>
<p>文件名任意，如 <code>keys.conf</code>，其目的是写一个键盘的配置文件:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># keys.conf</span><br><span class="hljs-attribute">keycode</span> <span class="hljs-number">1</span> = Caps_Lock # <span class="hljs-number">1</span> 原本是 Escape 键的 keycode<br><span class="hljs-attribute">keycode</span> <span class="hljs-number">58</span> = Escape<br></code></pre></td></tr></table></figure>
<p>然后用 <code>loadkeys</code> 加载一下配置文件.</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"># loadkeys <span class="hljs-built_in">keys</span>.<span class="hljs-keyword">conf</span><br></code></pre></td></tr></table></figure>
<h2 id="查看启动方式"><a href="#查看启动方式" class="headerlink" title="查看启动方式"></a>查看启动方式</h2><p>如果不是 UEFI 启动方式则装不了 arch.</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ls <span class="hljs-regexp">/sys/</span>firmware<span class="hljs-regexp">/efi/</span>efivars<br></code></pre></td></tr></table></figure>
<h2 id="连接网络设备"><a href="#连接网络设备" class="headerlink" title="连接网络设备"></a>连接网络设备</h2><p>先通过 <code>ip link</code> 查看网络设备, 然后用 <code>ip link set &lt;name&gt; up</code> 连接</p>
<p>这里可能会有 <code>RTNETLINK answers: Operation not possible due to RF-kill</code> , 原因是网卡被警用，解决方法:</p>
<p>使用 <code>rfkill</code> 命令, 先查看当前状态:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">rfkill list</span> <br></code></pre></td></tr></table></figure>
<p>unblock 硬件:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rfkill</span> unblock 设备号或名<br></code></pre></td></tr></table></figure>
<h3 id="使用-wpa-supplicant"><a href="#使用-wpa-supplicant" class="headerlink" title="使用 wpa_supplicant"></a>使用 wpa_supplicant</h3><h4 id="扫描当前-wifi"><a href="#扫描当前-wifi" class="headerlink" title="扫描当前 wifi"></a>扫描当前 wifi</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># iwlist wlan0 scan</span><br></code></pre></td></tr></table></figure>
<p>这里的 <code>wlan0</code> 是设备.</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># iwlist wlan0 scan | grep ESSID </span><br></code></pre></td></tr></table></figure>
<p>可以列出 wifi 名列表. 这里 <code>ESSID</code> 的含义就是 wifi 名.</p>
<h4 id="连接-wifi"><a href="#连接-wifi" class="headerlink" title="连接 wifi"></a>连接 wifi</h4><p>使用 <code>wpa_passphrase</code>.</p>
<p>格式:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"># wpa_passphrase <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">passwd</span>&gt;</span> &gt; <span class="hljs-tag">&lt;<span class="hljs-name">filename</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>如:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># wpa_passphrase CW_WIFI 12345678 &gt; internet.conf</span><br></code></pre></td></tr></table></figure>
<p>用 <code>wpa_supplicant</code> 利用配置文件连接网络:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># wpa_supplicant -c internet.conf -i wlan0 &amp;</span><br></code></pre></td></tr></table></figure>
<p><code>-c</code> 选项指定配置文件，<code>-i</code> 选项指定设备. 这里的 <code>&amp;</code> 是放在后台运行.</p>
<p>连接之后需动态获取一个 IP 地址。</p>
<h3 id="使用-iwctl"><a href="#使用-iwctl" class="headerlink" title="使用 iwctl"></a>使用 iwctl</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">iwctl</span> <br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">device</span> <span class="hljs-string">list</span><br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">station</span> &lt;<span class="hljs-string">device</span>&gt; <span class="hljs-string">scan</span><br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">station</span> &lt;<span class="hljs-string">device</span>&gt; <span class="hljs-built_in">get-networks</span><br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">station</span> &lt;<span class="hljs-string">device</span>&gt; <span class="hljs-string">connect</span> &lt;<span class="hljs-string">wifi</span> <span class="hljs-string">name</span>&gt;<br>[<span class="hljs-string">iwd</span>] <span class="hljs-string">quit</span><br></code></pre></td></tr></table></figure>
<h3 id="动态获取-IP-地址"><a href="#动态获取-IP-地址" class="headerlink" title="动态获取 IP 地址"></a>动态获取 IP 地址</h3><p>使用 <code>dhcpcd</code>:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># dhcpcd &amp;</span><br></code></pre></td></tr></table></figure>
<p>还是放在后台运行.</p>
<h3 id="若无法连接网络"><a href="#若无法连接网络" class="headerlink" title="若无法连接网络"></a>若无法连接网络</h3><p>具体情况为 <code>wlan0</code> 这个设备消失了，听 LUG 群里面说是没有安装网卡驱动。</p>
<p>暂时解决方法为，使用启动盘，然后 <code>arch-chroot</code> 上去后操作.</p>
<p>另一个方法就是插网线.</p>
<p>在已经安装好的系统中，<code>iwlist</code> 这个命令用不了，因为没有安装，因此需要:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pancman -S wireless_tools</span><br></code></pre></td></tr></table></figure>
<h4 id="查看网卡型号"><a href="#查看网卡型号" class="headerlink" title="查看网卡型号"></a>查看网卡型号</h4><p>利用 lspci:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">lspci <span class="hljs-string">| grep -i ethernet</span><br></code></pre></td></tr></table></figure>
<p>比如我的输出为:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">07</span>:<span class="hljs-number">00</span>.<span class="hljs-number">0</span> Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/<span class="hljs-number">8168</span>/<span class="hljs-number">8411</span> PCI Express Gigabit Ethernet Controller (rev <span class="hljs-number">15</span>)<br></code></pre></td></tr></table></figure>
<p>这里 Realtek Semiconductor 是公司名. <code>RTL8111/8168/8411</code> 就是网卡型号.</p>
<p>看无线网卡应该为 <code>Network controller</code>. <a target="_blank" rel="noopener" href="https://www.intel.ca/">intel</a></p>
<h4 id="查看网卡驱动以及版本号"><a href="#查看网卡驱动以及版本号" class="headerlink" title="查看网卡驱动以及版本号"></a>查看网卡驱动以及版本号</h4><p>要使 NIC 硬件正常运行，必须给电脑的 NCI 硬件设备安装对应的网卡驱动程序.</p>
<h5 id="使用-dmesg-和-modinfo"><a href="#使用-dmesg-和-modinfo" class="headerlink" title="使用 dmesg 和 modinfo"></a>使用 dmesg 和 modinfo</h5><p>使用 dmesg (display message) 命令查看, 这个命令用于显示开机信息，开机的信息也保存在 <code>/var/log</code> 中. 内核在引导期间会加载必要的硬件驱动程序，因此 dmesg 命令的输出中会存在是否安装了以太网卡驱动程序的信息.</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">dmesg <span class="hljs-string">|grep NIC </span><br></code></pre></td></tr></table></figure>
<p>使用 <code>modinfo</code> 命令查看版本号, 格式为:</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sqf">modinfo &lt;<span class="hljs-built_in">driver</span> <span class="hljs-built_in">name</span>&gt;<br></code></pre></td></tr></table></figure>
<h5 id="使用-ethtool-查看"><a href="#使用-ethtool-查看" class="headerlink" title="使用 ethtool 查看"></a>使用 ethtool 查看</h5><p>可能需要先安装，在 Ubuntu 中:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install ethtool<br></code></pre></td></tr></table></figure>

<p>使用 ethtool (ethernet tool) 来查看网卡名对应的网卡驱动名以及网卡驱动版本号, 格式为:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">ethtool -i <span class="hljs-tag">&lt;<span class="hljs-name">NIC</span> <span class="hljs-attr">name</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h5 id="使用-lshw-命令查看"><a href="#使用-lshw-命令查看" class="headerlink" title="使用 lshw 命令查看"></a>使用 lshw 命令查看</h5><p>lshw (list hardware) 可以查询到网卡对应的网卡驱动信息以及网卡驱动版本号:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">sudo lshw -<span class="hljs-keyword">class</span> <span class="hljs-symbol">network</span>  <br></code></pre></td></tr></table></figure>
<h4 id="查看网卡生产商"><a href="#查看网卡生产商" class="headerlink" title="查看网卡生产商"></a>查看网卡生产商</h4><p>先下载一些网络诊断工具:</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">pacman -S <span class="hljs-built_in">net</span>-tools<br></code></pre></td></tr></table></figure>
<p>先查看网卡信息:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ifconfig</span><br></code></pre></td></tr></table></figure>
<p>里面一串格式类似为: <code>00-00-00-AA-BB-CC</code> 的就是 MAC 地址.</p>
<p>得到一个网卡的 MAC 地址后，打开一个查询工具 (<a target="_blank" rel="noopener" href="https://itool.co/mac">工具</a>) 输入 MAC 地址就可以查到网卡生产商的信息.</p>
<p>这里提一下 MAC 地址的结构，如 <code>A1-B2-C3-D4-E5-F6</code>, 前三个为厂商唯一，后三个为厂商分配的.</p>
<h2 id="更新系统时间"><a href="#更新系统时间" class="headerlink" title="更新系统时间"></a>更新系统时间</h2><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">timedatectl</span> <span class="hljs-built_in">set-ntp</span> <span class="hljs-string">true</span> <br><span class="hljs-string">timedatettl</span> <span class="hljs-string">status</span><br></code></pre></td></tr></table></figure>
<h2 id="配置-pacman"><a href="#配置-pacman" class="headerlink" title="配置 pacman"></a>配置 pacman</h2><p><code>pacman -S</code> 中 <code>S</code> 的含义是 “Synchronism”<br>配置文件为 <code>/etc/pacman.conf</code>, 其中，去除 <code>#Color</code> 前面的 <code>#</code> 注释符，<code>Color</code> 的意思是在安装软件包时，会给出彩色的提示，而不是黑白.</p>
<p>文件中:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[core]<br><span class="hljs-keyword">Include</span> = <span class="hljs-regexp">/etc/</span>pacman.d/mirrorlist<br>[extra]<br><span class="hljs-keyword">Include</span> = <span class="hljs-regexp">/etc/</span>pacman.d/mirrorlist<br>[community]<br><span class="hljs-keyword">Include</span> = <span class="hljs-regexp">/etc/</span>pacman.d/mirrorlist<br></code></pre></td></tr></table></figure>
<p>这些都代表 arch 的软件源. 这个 <code>mirrorlist</code> 里面记录的是 arch 软件源服务器的地址.</p>
<p>进入文件后把 China 的放在最顶上，因为 pacman 是从上往下读取.</p>
<p>利用 vim 的宏录制可以干很多重复的工作.</p>
<p>在 vim 中寻找空行为 <code>/^\n</code></p>
<p>archlinuxcn 中的源很多不是官方编译。</p>
<h2 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h2><p>先备份:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cp -a <span class="hljs-regexp">/etc/</span>pacman.d<span class="hljs-regexp">/mirrorlist /</span>etc<span class="hljs-regexp">/pacman.d/mi</span>rrorlist.bak <br></code></pre></td></tr></table></figure>
<p>添加华为的源和阿里云的源:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">Server = https:<span class="hljs-regexp">//</span>repo.huaweicloud.com<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure>
<p>更新:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -Syy</span><br></code></pre></td></tr></table></figure>
<h2 id="使用-ssh-连接"><a href="#使用-ssh-连接" class="headerlink" title="使用 ssh 连接"></a>使用 ssh 连接</h2><p>使用 <code>ssh</code> 连接后安装比较方便, 因此先:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># pacman -Syy openssh</span><br></code></pre></td></tr></table></figure>
<p>启动 <code>sshd</code>:</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl enable sshd<br><span class="hljs-params">system</span>ctl start sshd<br><span class="hljs-params">system</span>ctl status sshd<br></code></pre></td></tr></table></figure>
<p>先修改一下 root 密码，方便连接:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd root</span> <br></code></pre></td></tr></table></figure>
<p>然后回到自己的终端进行 ssh 连接:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>ssh root<span class="hljs-variable">@ip</span><br></code></pre></td></tr></table></figure>
<p>这个 ip 后面没有端口号.</p>
<h2 id="磁盘分区及格式化"><a href="#磁盘分区及格式化" class="headerlink" title="磁盘分区及格式化"></a>磁盘分区及格式化</h2><p>先用 <code>fdisk -l</code> 命令查看磁盘位置, 然后用 <code>fdisk</code> 命令直接分区。如 <code>fdisk /dev/vda</code></p>
<p>之后格式化磁盘, <code>boot</code> 分区格式化为 <code>fat32</code>，如 <code>mkfs.fat -F 32 /dev/vda2</code></p>
<p><code>/</code> 根目录分区格式化为 <code>ext4</code>, 如 <code>mkfs.ext4 /dev/vda1</code></p>
<p>将分区挂载，先挂载 <code>/</code> 根分区到 <code>/mnt</code> 目录:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">mount /dev/vda2 /mnt</span><br></code></pre></td></tr></table></figure>
<p>然后将 <code>boot</code> 分区挂载到 <code>/mnt/boot</code>, 先得创建一个目录:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># mkdir <span class="hljs-regexp">/mnt/</span>boot<br># mount <span class="hljs-regexp">/dev/</span>vda1 <span class="hljs-regexp">/mnt/</span>boot<br></code></pre></td></tr></table></figure>
<h2 id="安装系统"><a href="#安装系统" class="headerlink" title="安装系统"></a>安装系统</h2><p>安装几个工具:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># pacstrap /mnt base bae-devel linux linux-firmware dhcpcd e2fsprogs iwd</span><br></code></pre></td></tr></table></figure>
<p><code>base</code> 包包含 20 来个基础的软件.</p>
<p><code>linux</code> 是 linux 内核。</p>
<p><code>linux-firmware</code> 是 linux 的框架.</p>
<p><code>base-devel</code> 中也同样有重要的 packages, 比如 GCC 和 make.</p>
<p>这里 <code>dhcpcd</code> 是用来动态获取 ip 的。</p>
<p><code>e2fsprogs</code> 是一个 Ext2 (及 Ext3&#x2F;4) 文件系统工具，它包含了诸如创建、修复、配置、调试 ext2 文件系统等的标准工具.</p>
<p><code>iwd</code> 是 iNet Wireless Daemon 项目，旨在基于 Linux 设备提供全面的 Wi-Fi 连接解决方案。<br>pacstrap 是一个脚本，它会往一个文件夹里面安装你想要的软件，当前未将根目录挂载到 <code>/mnt</code> 时，其所在环境为启动盘所在的位置而不是系统盘. 因此需要把根目录挂载. </p>
<h3 id="生成文件系统表"><a href="#生成文件系统表" class="headerlink" title="生成文件系统表"></a>生成文件系统表</h3><p>用于自动挂载分区，不然系统无法正常启动.</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># genfstab -U <span class="hljs-regexp">/mnt &gt;&gt; /m</span>nt<span class="hljs-regexp">/etc/</span>fstab<br># cat <span class="hljs-regexp">/mnt/</span>etc/fstab<br></code></pre></td></tr></table></figure>
<p>执行以下命令进入到我们安装的系统，对系统进行配置:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">arch-chroot /mnt</span><br></code></pre></td></tr></table></figure>
<h3 id="设置时区"><a href="#设置时区" class="headerlink" title="设置时区"></a>设置时区</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">ln -sf <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/zoneinfo/</span>Asia<span class="hljs-regexp">/Shanghai /</span>etc/localtime<br><span class="hljs-comment"># 同步硬件时钟</span><br>hwclock --systohc<br></code></pre></td></tr></table></figure>
<h3 id="本地化"><a href="#本地化" class="headerlink" title="本地化"></a>本地化</h3><p>Local 明确规定了地域、货币、时区日期的格式、字符排列方式和其他本地化标准.</p>
<p>生成 Local 信息</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/^#en_US.UTF-8/en_US.UTF-8/&#x27;</span> <span class="hljs-regexp">/etc/</span>locale.gen<br>sed -i <span class="hljs-string">&#x27;s/^#zh_CN.UTF-8/zh_CN.UTF-8/&#x27;</span> <span class="hljs-regexp">/etc/</span>locale.gen<br>locale-gen<br></code></pre></td></tr></table></figure>
<p>创建 locale.conf 文件，并编辑设定 LANG 变量:</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;LANG=en_US.UTF-8&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>locale.conf<br></code></pre></td></tr></table></figure>
<p>主机名配置:</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;ArchLinux&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hostname<br></code></pre></td></tr></table></figure>
<p>生成对应 hosts, 将 <code>hostname</code> 换成自己设置的:</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo -e <span class="hljs-string">&quot;127.0.0.1 localhost\n::1 localhost\n127.0.1.1 hostname.localdomain hostname&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts<br></code></pre></td></tr></table></figure>
<p>设置 root 密码:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd root</span><br></code></pre></td></tr></table></figure>
<h3 id="安装引导程序"><a href="#安装引导程序" class="headerlink" title="安装引导程序"></a>安装引导程序</h3><p>安装 Linux 引导加载程序，才能在安装后启动系统.</p>
<h4 id="安装徽码"><a href="#安装徽码" class="headerlink" title="安装徽码"></a>安装徽码</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># amd 电脑安装</span><br><span class="hljs-attribute">pacman</span> -S amd-ucode<br><span class="hljs-comment"># intel 电脑安装</span><br>pacman -S intel-ucode<br></code></pre></td></tr></table></figure>
<p>其中 <code>intel-ucode</code> 是厂家或程序提供商来为你的电脑 cpu 更新一些驱动.</p>
<h4 id="配置-grub"><a href="#配置-grub" class="headerlink" title="配置 grub"></a>配置 grub</h4><p>Arch 使用 grub2 管理引导，安装相关程序:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -S grub efibootmgr efivar os-prober</span><br></code></pre></td></tr></table></figure>
<h4 id="安装引导"><a href="#安装引导" class="headerlink" title="安装引导"></a>安装引导</h4><p>在安装 <code>grub</code> 之前，需要先确认系统架构是什么.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">uname</span> -m</span><br></code></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">grub-install <span class="hljs-attribute">--target</span>=x86_64-efi <span class="hljs-attribute">--efi-directory</span>=/boot <span class="hljs-attribute">--bootloader-id</span>=Arch --recheck<br><span class="hljs-comment"># --bootloader-id=name 中的name可改</span><br></code></pre></td></tr></table></figure>
<p>grub2 默认禁用了 os-prober, 如果是选择双系统或多系统安装，需手动开启该选项。</p>
<p>os-prober 可以检查其他硬盘上的其他系统引导, 如果不开启，可能无法识别其他系统.</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">echo <span class="hljs-string">&quot;GRUB_DISABLE_OS_PROBER=false&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span><span class="hljs-keyword">default</span>/grub <br></code></pre></td></tr></table></figure>
<h4 id="生成引导配置文件"><a href="#生成引导配置文件" class="headerlink" title="生成引导配置文件"></a>生成引导配置文件</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">grub-mkconfig -o <span class="hljs-regexp">/boot/g</span>rub/grub.cfg<br></code></pre></td></tr></table></figure>
<h3 id="配置开机启动项"><a href="#配置开机启动项" class="headerlink" title="配置开机启动项"></a>配置开机启动项</h3><p>开机后自动连接网络, 需下载联网程序并设置开机自启动:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 下载 wifi 管理</span><br>pacman -S dhcpcd iwd networkmanager<br><span class="hljs-comment"># 设置启动项</span><br>systemctl <span class="hljs-built_in">enable</span> dhcpcd<br>systemctl <span class="hljs-built_in">enable</span> iwd<br>systemctl <span class="hljs-built_in">enable</span> NetworkManager<br></code></pre></td></tr></table></figure>
<h3 id="ARU-添加-ArchlinuxCN"><a href="#ARU-添加-ArchlinuxCN" class="headerlink" title="ARU 添加 ArchlinuxCN"></a>ARU 添加 ArchlinuxCN</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># /etc/pacman.conf</span><br>[archlinux]<br>Server = http:<span class="hljs-regexp">//mi</span>rror.lzu.edu.cn<span class="hljs-regexp">/archlinuxcn/</span><span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure>
<p>去掉 <code># Color</code> 前的注释符.</p>
<p>然后更新一下:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -Syy</span> <br></code></pre></td></tr></table></figure>
<p>若报错则需获取 gpg 密钥:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">rm -rf <span class="hljs-regexp">/etc/</span>pacman.d<span class="hljs-regexp">/gnupg/</span><br>pacman-key --init<br>pacman-key --populate archlinux archlinuxcn<br>pacman -Syy<br></code></pre></td></tr></table></figure>
<h3 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 退出 arch root 安装环境</span><br><span class="hljs-keyword">exit</span> <br><span class="hljs-comment"># 取消挂载</span><br>umount -R /mnt<br><span class="hljs-comment"># 重启</span><br>reboot<br></code></pre></td></tr></table></figure>
<h3 id="若-win-和-Ubuntu-的引导记录在-grub-中消失"><a href="#若-win-和-Ubuntu-的引导记录在-grub-中消失" class="headerlink" title="若 win 和 Ubuntu 的引导记录在 grub 中消失"></a>若 win 和 Ubuntu 的引导记录在 grub 中消失</h3><p>实际上的引导记录还是存在的，可以通过 <code>/etc/efi</code> 目录下查看.</p>
<p>要找到启动 Ubuntu 和 Win 的方法，可以在 BIOS 中进行顺序的切换.</p>
<h3 id="新建用户"><a href="#新建用户" class="headerlink" title="新建用户"></a>新建用户</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">useradd -m -G wheel -s <span class="hljs-regexp">/bin/</span>bash &lt;username&gt;<br></code></pre></td></tr></table></figure>
<p>设置用户密码:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">passwd <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>赋予用户 sudo 权限, 修改 <code>/etc/sudoers</code> 文件, 去掉 <code>%wheel</code> 行之前的注释. 需要先修改文件权限。</p>
<h3 id="安装-dwm-窗口管理器"><a href="#安装-dwm-窗口管理器" class="headerlink" title="安装 dwm 窗口管理器"></a>安装 dwm 窗口管理器</h3><p><a target="_blank" rel="noopener" href="https://www.cnblog.com/language/p/154415">参考博客</a><br><a target="_blank" rel="noopener" href="https://b23.tv/F1W9Gmm">参考b站</a><br>先说一个误会，自己在参考一个视频后拉取了别人的 pwm 仓库，然后安装后不知道如何使用，重新安装原始包即可.</p>
<h4 id="桌面环境与窗口管理器概述"><a href="#桌面环境与窗口管理器概述" class="headerlink" title="桌面环境与窗口管理器概述"></a>桌面环境与窗口管理器概述</h4><p>桌面环境会提供很多工具。大多数桌面环境包括一整套整合应用程序和使用工.</p>
<p>窗口管理器仅仅用于管理窗口，安装了窗口管理器之后就可以不用安装桌面环境.</p>
<h4 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h4><p>有些可能在前面以经安装好了:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -S acpi usbutils pciutils</span><br></code></pre></td></tr></table></figure>
<ul>
<li><p><code>acpi</code> 是用来查看电池电量的工具。</p>
</li>
<li><p><code>usbutils</code> 是用来查看系统 USB 设备.</p>
</li>
<li><p><code>pciutils</code> 用来查看系统 PCI 设备。</p>
</li>
</ul>
<p>安装驱动:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">pacman -S xf86-vedio-<span class="hljs-built_in">int</span>el mesa xf86-input-libinput<br></code></pre></td></tr></table></figure>
<p>这三个好像本就安装好了的，因为我在下载的时候显示的是 <code>reinstall</code>.</p>
<ul>
<li><p><code>xf86-vedio-intel</code> 是显核的驱动.</p>
</li>
<li><p><code>mesa</code> 是用来配合显卡的另一种上层驱动.</p>
</li>
<li><p><code>xf86-input-libinput</code> 是笔记本触摸板的驱动.</p>
</li>
</ul>
<p>安装X窗口系统的相关服务:</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">pacman -S <span class="hljs-keyword">xorg </span><span class="hljs-keyword">xorg-xinit </span><span class="hljs-keyword">xorg-server </span>xwallpaper picom<br></code></pre></td></tr></table></figure>
<ul>
<li><code>xorg</code> 是 X 服务，用来显示图形界面</li>
<li><code>xorg-xinit</code> 是 X 服务的启动程序</li>
<li><code>xwallpaper</code> 用于更换壁纸</li>
<li><code>picom</code> 窗口渲染，后面做半透明渲染</li>
</ul>
<h4 id="安装窗口管理器"><a href="#安装窗口管理器" class="headerlink" title="安装窗口管理器"></a>安装窗口管理器</h4><p>安装 suckless 全家桶:</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://git.suckless.org/dwm --<span class="hljs-attr">depth=</span><span class="hljs-number">1</span> <br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://git.suckless.org/st --<span class="hljs-attr">depth=</span><span class="hljs-number">1</span> <br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://git.suckless.org/dmenu --<span class="hljs-attr">depth=</span><span class="hljs-number">1</span> <br></code></pre></td></tr></table></figure>
<p>分别进入这几个下载下来的目录，并执行 <code>sudo make clean install</code>.</p>
<p>在家目录下创建 <code>.xinitrc</code> 文件并添加 <code>exec dwm</code>.</p>
<h4 id="安装亮度控制和-Night-Mode"><a href="#安装亮度控制和-Night-Mode" class="headerlink" title="安装亮度控制和 Night Mode"></a>安装亮度控制和 Night Mode</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo pacman -S brightnessctl redshift</span><br></code></pre></td></tr></table></figure>
<p>在 <code>.xinitrc</code> 文件中添加 <code>brightnessctl set 20% &amp;</code> 和 <code>redshift -P -O 4800 &amp;</code></p>
<p>同样在 <code>.xinitrc</code> 中添加 <code>picom &amp;</code></p>
<h3 id="安装-lightdm-服务"><a href="#安装-lightdm-服务" class="headerlink" title="安装 lightdm 服务"></a>安装 lightdm 服务</h3><p><code>lightdm</code> 是一个 display manager，也就是提供一个登录界面.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">sudo pacman -S lightdm lightdm-webkit2-greeter lightdm-webkit-theme-litarvan<br></code></pre></td></tr></table></figure>
<p>其配置文件位置为 <code>/etc/lightdm/lightdm.conf</code> 修改该配置文件，修改 <code>greeter-session</code> 的为 <code>greeter-session=lightdm-webkit2-greeter</code>.</p>
<p>接着修改 <code>/etc/lightdm/lightdm-webkit2-greeter.conf</code> 将 <code>detect_theme_errors</code> 的值改为 <code>false</code>. <code>webkit_theme</code> 的值改为 <code>litarvan</code>.</p>
<h3 id="安装-kde-桌面环境"><a href="#安装-kde-桌面环境" class="headerlink" title="安装 kde 桌面环境"></a>安装 kde 桌面环境</h3><p>先安装依赖的 xorg 包.</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">sudo pacman -S <span class="hljs-keyword">xorg </span><span class="hljs-keyword">xorg-server </span><span class="hljs-keyword">xorg-xinit</span><br></code></pre></td></tr></table></figure>
<p>最小安装 kde 和 plasma 桌面:</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">sudo pacman -S plasma-<span class="hljs-keyword">meta</span> sddm<br></code></pre></td></tr></table></figure>
<p>之前装的 <code>kde-applications-meta</code> 里面是应用，不是桌面环境. 详情见<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/KDE">ArchWiki</a></p>
<p>sddm 是 kde 使用的登录管理器.</p>
<p>设置 sddm 的开机启动:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo systemctl <span class="hljs-built_in">enable</span> sddm<br></code></pre></td></tr></table></figure>
<p>下载一些应用:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nginx">  <span class="hljs-attribute">sudo</span> pacman -S konsole alacritty dolphin ark gwenview lolcat sl neofetch<br><span class="hljs-comment"># konsole 和 alacritty 都是终端</span><br><span class="hljs-comment"># dolphin 是文件管理器</span><br><span class="hljs-comment"># ark 是归档管理器，就是解压缩的</span><br><span class="hljs-comment"># gwenview 是看图片的</span><br><span class="hljs-comment"># lolcat neofetch 和 sl 是防止你打开终端没事干</span><br></code></pre></td></tr></table></figure>
<h3 id="国内开发的桌面环境有-deepin"><a href="#国内开发的桌面环境有-deepin" class="headerlink" title="国内开发的桌面环境有 deepin"></a>国内开发的桌面环境有 deepin</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pscman -S deepin deepin-extra</span><br></code></pre></td></tr></table></figure>
<p>这是一个已经配置好的皮肤，附带很多软件.</p>
<p>将 <code>/etc/lightdm/k=lightdm.conf</code> 中 <code>greeter-session</code> 改为:</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">greeter-session</span><span class="hljs-operator">=</span>lightdm-deepin-greeter<br></code></pre></td></tr></table></figure>
<h3 id="TLP"><a href="#TLP" class="headerlink" title="TLP"></a>TLP</h3><p>用于管理电池.</p>
<h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><p>进入一个 b 站 up 的 github 页面– <a target="_blank" rel="noopener" href="https://github.com/theniceboy">主页</a></p>
<h3 id="网易云"><a href="#网易云" class="headerlink" title="网易云"></a>网易云</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yay -S netease-cloud-music</span><br></code></pre></td></tr></table></figure>
<h3 id="百度网盘"><a href="#百度网盘" class="headerlink" title="百度网盘"></a>百度网盘</h3>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Arch/" class="category-chain-item">Arch</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>ArchWiki 中 archlinux 的安装</div>
      <div>http://example.com/2022/08/30/Archlinux 的安装/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年8月30日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/08/30/ArchWiki-%E4%B8%AD%E5%85%B3%E4%BA%8E-GnuPG/" title="ArchWiki 中关于 GnuPG">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ArchWiki 中关于 GnuPG</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/08/30/ArchWiki-%E4%B8%AD-pacman-%E9%83%A8%E5%88%86/" title="ArchWiki 中 pacman 部分">
                        <span class="hidden-mobile">ArchWiki 中 pacman 部分</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script>
        Fluid.utils.loadComments('#disqus_thread', function() {
          Fluid.utils.createCssLink('https://lib.baomitu.com/disqusjs/1.3.0/disqusjs.css');
          Fluid.utils.createScript('https://lib.baomitu.com/disqusjs/1.3.0/disqus.js', function() {
            new DisqusJS({
              shortname: 'fluid',
              apikey: ''
            });
          });
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
