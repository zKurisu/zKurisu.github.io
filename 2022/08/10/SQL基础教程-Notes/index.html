

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="第0章 绪论 搭建SQL的学习环境0-1 PostgreSQL的安装和连接设置在命令行使用postgreSQL需要登录 postgres 账户: 1sudo su postgres 进入 sql 命令行执行: 1$ psql postgres 账户的目录在 &#x2F;var&#x2F;lib&#x2F;postgresql. 官方Ubuntu上使用postgresql教程reference 配置">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL基础教程 Notes">
<meta property="og:url" content="http://example.com/2022/08/10/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-Notes/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="第0章 绪论 搭建SQL的学习环境0-1 PostgreSQL的安装和连接设置在命令行使用postgreSQL需要登录 postgres 账户: 1sudo su postgres 进入 sql 命令行执行: 1$ psql postgres 账户的目录在 &#x2F;var&#x2F;lib&#x2F;postgresql. 官方Ubuntu上使用postgresql教程reference 配置">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-10T07:21:12.000Z">
<meta property="article:modified_time" content="2022-09-04T09:19:36.036Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>SQL基础教程 Notes - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Jie</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/SteinsGate_all.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="SQL基础教程 Notes"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-08-10 15:21" pubdate>
          2022年8月10日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          18k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          147 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">SQL基础教程 Notes</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="第0章-绪论-搭建SQL的学习环境"><a href="#第0章-绪论-搭建SQL的学习环境" class="headerlink" title="第0章 绪论 搭建SQL的学习环境"></a>第0章 绪论 搭建SQL的学习环境</h1><h2 id="0-1-PostgreSQL的安装和连接设置"><a href="#0-1-PostgreSQL的安装和连接设置" class="headerlink" title="0-1 PostgreSQL的安装和连接设置"></a>0-1 PostgreSQL的安装和连接设置</h2><p>在命令行使用postgreSQL需要登录 postgres 账户:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo su postgres</span><br></code></pre></td></tr></table></figure>
<p>进入 sql 命令行执行:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>psql<br></code></pre></td></tr></table></figure>
<p>postgres 账户的目录在 &#x2F;var&#x2F;lib&#x2F;postgresql.</p>
<h2 id="官方Ubuntu上使用postgresql教程"><a href="#官方Ubuntu上使用postgresql教程" class="headerlink" title="官方Ubuntu上使用postgresql教程"></a>官方Ubuntu上使用postgresql教程</h2><p><a target="_blank" rel="noopener" href="https://ubuntu.com/server/docs/databases-postgresql">reference</a></p>
<p>配置文件所在位置: &#x2F;etc&#x2F;postgresql&#x2F;<version>&#x2F;main, 目录中. 我的在: &#x2F;etc&#x2F;postgresql&#x2F;14&#x2F;main.</p>
<p>连接 default PostgreSQL template database:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">sudo</span> -u postgres psql template1<br></code></pre></td></tr></table></figure>

<p>To configure the password for the user postgres:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> postgres <span class="hljs-keyword">with</span> <span class="hljs-keyword">encrypted</span> <span class="hljs-keyword">password</span> <span class="hljs-string">&#x27;your_password&#x27;</span>;<br></code></pre></td></tr></table></figure>
<p>Restarting the PostgreSQL service to initialize the new configuration:</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">sudo systemctl <span class="hljs-built_in">restart</span> postgresql.service<br></code></pre></td></tr></table></figure>
<h2 id="0-1"><a href="#0-1" class="headerlink" title="0-1"></a>0-1</h2><p><code>listen_addresses = &#39;*&#39;</code> 意味着允许所有远程主机进行连接。<br><code>listen_addresses = &#39;localhost&#39;</code> 意味着只允许本地机器进行连接。</p>
<h2 id="0-2-通过PostgreSQL执行SQL语句"><a href="#0-2-通过PostgreSQL执行SQL语句" class="headerlink" title="0-2 通过PostgreSQL执行SQL语句"></a>0-2 通过PostgreSQL执行SQL语句</h2><p><code>psql</code> 是 PostpreSQL 提供的通过命令行执行 SQL 语句的工具。</p>
<p><code>psql</code> 会把 SQL 语句发送给 PostgreSQL, 然后再将接收到的执行结果显示出来。</p>
<p>“;” 是 SQL 的结束符， 如果没有输入的话，即使按下回车键，SQL语句也不会执行。</p>
<p>数据库的名称只能是小写字母.</p>
<h3 id="创建学习用的数据库"><a href="#创建学习用的数据库" class="headerlink" title="创建学习用的数据库"></a>创建学习用的数据库</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> shop;<br></code></pre></td></tr></table></figure>

<p><code>postgres</code> 是安装 PostgreSQL 时自动创建的示例数据库。</p>
<h3 id="连接学习用的数据库-登录"><a href="#连接学习用的数据库-登录" class="headerlink" title="连接学习用的数据库(登录)"></a>连接学习用的数据库(登录)</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">psql -U postgres -d shop</span><br></code></pre></td></tr></table></figure>
<p>“-d shop” 是指定 “数据库shop” 的意思。</p>
<p>“-U username” 是 connect to the database as the user <code>username</code> instead of the default. </p>
<h1 id="第1章-数据库和SQL"><a href="#第1章-数据库和SQL" class="headerlink" title="第1章 数据库和SQL"></a>第1章 数据库和SQL</h1><h2 id="1-1-数据库是什么"><a href="#1-1-数据库是什么" class="headerlink" title="1-1 数据库是什么"></a>1-1 数据库是什么</h2><p>数据库(Database, DB)是将大量数据保存起来，通过计算机加工而成的可以进行高效访问的数据集合。</p>
<p>用来管理数据库的计算机系统称为<mark>Database Management System, DBMS</mark>.</p>
<p>系统使用者通常无法直接接触到数据库。</p>
<h3 id="DSMS的种类"><a href="#DSMS的种类" class="headerlink" title="DSMS的种类"></a>DSMS的种类</h3><p>通过数据的保存格式(数据库的种类)来分类，现阶段主要有以下5种类型:</p>
<ul>
<li>Hierarchical Database, HDB</li>
<li>Relational Database, RDB</li>
<li>Object Oriented Database, OODB</li>
<li>XML Database, XMLDB</li>
<li>Key-Value Store, KVS<br>使用SQL语言的数据库管理系统，也就是关系数据库管理系统(RDBMS).</li>
</ul>
<h2 id="1-2-数据库的结构"><a href="#1-2-数据库的结构" class="headerlink" title="1-2 数据库的结构"></a>1-2 数据库的结构</h2><h3 id="RDBMS-的常见系统结构"><a href="#RDBMS-的常见系统结构" class="headerlink" title="RDBMS 的常见系统结构"></a>RDBMS 的常见系统结构</h3><p>最常见的是客户端&#x2F;服务器类型(C&#x2F;S类型).</p>
<p>RDBMS 既可以和其客户端安装在同一台计算机上，也可以分别安装在不同的计算机上。</p>
<h3 id="表的结构"><a href="#表的结构" class="headerlink" title="表的结构"></a>表的结构</h3><p>用来管理数据的二维表在关系数据库中简称为<mark>表</mark>.</p>
<p>表存储在由 RDBMS 管理的数据库中， 一个数据库中可以存储多个表。</p>
<p>根据 SQL 语句的内容返回的数据同样必须是二维表的形式。</p>
<p>表的列（垂直方向）称为字段，它代表了保存在表中的数据项目。</p>
<p>表的行（水平方向）称为记录，它相当于一条数据。</p>
<p><mark>关系数据库必须以行为单位进行数据读写。</mark></p>
<p>行和列交汇的方格称为单元格。一个单元格中只<br>能输入一个数据。单元格只是这本书特有的表述方式.</p>
<h2 id="1-3-SQL-概要"><a href="#1-3-SQL-概要" class="headerlink" title="1-3 SQL 概要"></a>1-3 SQL 概要</h2><h3 id="标准-SQL"><a href="#标准-SQL" class="headerlink" title="标准 SQL"></a>标准 SQL</h3><h3 id="SQL-语句及其种类"><a href="#SQL-语句及其种类" class="headerlink" title="SQL 语句及其种类"></a>SQL 语句及其种类</h3><p>SQL 用关键字、表名、列名等组合而成的一条语句（SQL 语句）来描述操作的内容。</p>
<p>SQL 语句可以分为以下三类:</p>
<ul>
<li>DDL, Data Definition Language, 数据定义语言。其包含: create, drop, alter.</li>
<li>DML, Data Manipulation Language, 数据操纵语言. 包含: select, insert, update, delete.</li>
<li>DCL, Data Control Language, 数据控制语言。包含: commit, rollback, grant, revoke.</li>
</ul>
<h3 id="SQL-的基本书写规则"><a href="#SQL-的基本书写规则" class="headerlink" title="SQL 的基本书写规则"></a>SQL 的基本书写规则</h3><ul>
<li>以分号”;”结尾</li>
<li>SQL 语句不区分大小写, 表中的数据区分大小写</li>
<li>常数的书写方式是固定的，在SQL语句中直接书写的字符串、日期或者数字等称为常数, 字符串和日期用单引号”‘“标识。</li>
<li>单词需要用半角空格或者换行符来分隔</li>
</ul>
<h2 id="1-4-表的创建"><a href="#1-4-表的创建" class="headerlink" title="1-4 表的创建"></a>1-4 表的创建</h2><h3 id="表的内容的创建"><a href="#表的内容的创建" class="headerlink" title="表的内容的创建"></a>表的内容的创建</h3><h3 id="数据库的创建-create-database语句"><a href="#数据库的创建-create-database语句" class="headerlink" title="数据库的创建(create database语句)"></a>数据库的创建(create database语句)</h3><p>语法:</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> &lt;数据库名称&gt;;<br></code></pre></td></tr></table></figure>
<h3 id="表的创建-create-table语句"><a href="#表的创建-create-table语句" class="headerlink" title="表的创建(create table语句)"></a>表的创建(create table语句)</h3><p>语法:</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pf">create <span class="hljs-built_in">table</span> <span class="hljs-variable">&lt;表名&gt;</span><br>(<span class="hljs-variable">&lt;列名1&gt;</span> <span class="hljs-variable">&lt;数据类型&gt;</span> <span class="hljs-variable">&lt;该列所需约束&gt;</span>,<br> <span class="hljs-variable">&lt;列名2&gt;</span> <span class="hljs-variable">&lt;数据类型&gt;</span> <span class="hljs-variable">&lt;该列所需约束&gt;</span>,<br> <span class="hljs-variable">&lt;列名3&gt;</span> <span class="hljs-variable">&lt;数据类型&gt;</span> <span class="hljs-variable">&lt;该列所需约束&gt;</span>,<br> <span class="hljs-variable">&lt;列名4&gt;</span> <span class="hljs-variable">&lt;数据类型&gt;</span> <span class="hljs-variable">&lt;该列所需约束&gt;</span>,<br>            .<br>            .<br>            .<br> <span class="hljs-variable">&lt;该表的约束1&gt;</span>, <span class="hljs-variable">&lt;该表的约束2&gt;</span>, ......);<br></code></pre></td></tr></table></figure>
<p><code>NOT NULL</code> 约束只能以列为单位进行设置。</p>
<h3 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h3><p>只能使用半角英文字母、数字、下划线作为数据库、表和列的名称。</p>
<p>名称必须以半角英文字母开头。</p>
<p>在同一个数据库中不能创建两个相同名称的列。</p>
<h3 id="数据类型的指定"><a href="#数据类型的指定" class="headerlink" title="数据类型的指定"></a>数据类型的指定</h3><p>所有列都必须指定数据类型。</p>
<p>数据类型包括:</p>
<ul>
<li>integer, 数字型, 不能存储小数</li>
<li>char, 字符型, char(10), 指定长度, 其为定长字符串</li>
<li>date, 日期型</li>
<li>varchar, 可变长字符串, 即使未达到最大长度，也不会用半角空格补足<br>每一列都不能存储与该列数据类型不符的数据。</li>
</ul>
<h3 id="约束的设置"><a href="#约束的设置" class="headerlink" title="约束的设置"></a>约束的设置</h3><p>约束是除了数据类型之外，对列中存储的数据进行限制或者追加条件的功能。</p>
<p><code>NULL</code> 代表可以输入空白。</p>
<p><code>NOT NULL</code> 代表不能输入空白.</p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span> (product_id)<br></code></pre></td></tr></table></figure>
<p>给<code>product_id</code>列设置主键约束。</p>
<p>主键约束 &#x3D; 非空约束 + 唯一约束</p>
<h2 id="1-5-表的删除和更新"><a href="#1-5-表的删除和更新" class="headerlink" title="1-5 表的删除和更新"></a>1-5 表的删除和更新</h2><h3 id="表的删除-drop-table"><a href="#表的删除-drop-table" class="headerlink" title="表的删除(drop table)"></a>表的删除(drop table)</h3><p>语法:</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">drop</span> <span class="hljs-built_in">table</span> <span class="hljs-variable">&lt;表名&gt;</span>;<br></code></pre></td></tr></table></figure>
<p>删除的表无法恢复。</p>
<h3 id="表定义的更新-alter-table"><a href="#表定义的更新-alter-table" class="headerlink" title="表定义的更新(alter table)"></a>表定义的更新(alter table)</h3><p>语法:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">&lt;</span>表名<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">add</span> <span class="hljs-keyword">column</span> <span class="hljs-operator">&lt;</span>列的定义<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure>
<p>删除列的<code>alter table</code> 语句:</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">alter <span class="hljs-built_in">table</span> <span class="hljs-variable">&lt;表名&gt;</span> <span class="hljs-keyword">drop</span> column <span class="hljs-variable">&lt;列名&gt;</span>;<br></code></pre></td></tr></table></figure>
<p><code>alter table</code> 执行后也无法恢复。</p>
<h3 id="向Product表中插入数据"><a href="#向Product表中插入数据" class="headerlink" title="向Product表中插入数据"></a>向Product表中插入数据</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">begin</span> <span class="hljs-keyword">transaction</span>;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> &lt;表名&gt; <span class="hljs-keyword">values</span> ();<br><br><span class="hljs-keyword">commit</span>;<br></code></pre></td></tr></table></figure>
<h3 id="表的修改"><a href="#表的修改" class="headerlink" title="表的修改"></a>表的修改</h3><p>修改表名，不同数据库指令不同:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> &lt;originalname&gt; <span class="hljs-keyword">rename</span> <span class="hljs-keyword">to</span> &lt;<span class="hljs-type">name</span>&gt;<br></code></pre></td></tr></table></figure>
<h1 id="第2章-查询基础"><a href="#第2章-查询基础" class="headerlink" title="第2章 查询基础"></a>第2章 查询基础</h1><p>查询时可以指定一个或多个查询条件。</p>
<h2 id="2-1-select-语句基础"><a href="#2-1-select-语句基础" class="headerlink" title="2-1 select 语句基础"></a>2-1 select 语句基础</h2><h3 id="列的查询"><a href="#列的查询" class="headerlink" title="列的查询"></a>列的查询</h3><p>通过 select 语句查询并选取出必要数据的过程称为<mark>匹配查询</mark>或查询(query).</p>
<p>基本语法:</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sqf"><span class="hljs-built_in">select</span> &lt;column <span class="hljs-built_in">name</span>&gt;, ...<br>  <span class="hljs-keyword">from</span> &lt;table <span class="hljs-built_in">name</span>&gt;;<br></code></pre></td></tr></table></figure>
<p>如:</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_id, product_name, purchase_price<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure>
<p>查询多列时，需要逗号分隔。</p>
<h3 id="查询出表中所有列"><a href="#查询出表中所有列" class="headerlink" title="查询出表中所有列"></a>查询出表中所有列</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> *<br>  <span class="hljs-keyword">from</span> &lt;tablename&gt;;<br></code></pre></td></tr></table></figure>
<p>使用 <code>*</code> 无法设定列的显示顺序。</p>
<p>SQL 语句可以随意使用换行符。</p>
<h3 id="为列设定别名"><a href="#为列设定别名" class="headerlink" title="为列设定别名"></a>为列设定别名</h3><p>使用<code>as</code>关键词。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select product_id <span class="hljs-keyword">as</span> <span class="hljs-built_in">id</span><br>  <span class="hljs-keyword">from</span> Product<br></code></pre></td></tr></table></figure>
<p>别名若要使用中文需要用双引号(“)括起来。</p>
<h3 id="常数的查询"><a href="#常数的查询" class="headerlink" title="常数的查询"></a>常数的查询</h3><h3 id="从结果中删除重复行"><a href="#从结果中删除重复行" class="headerlink" title="从结果中删除重复行"></a>从结果中删除重复行</h3><p>通过 select 子句中使用 distinct:</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> product_type<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure>
<p>使用 distinct 时，null 也被视为一类数据。</p>
<h3 id="根据-where-语句来选择记录"><a href="#根据-where-语句来选择记录" class="headerlink" title="根据 where 语句来选择记录"></a>根据 where 语句来选择记录</h3><p>select 语句通过 where 子句来指定查询数据的条件。</p>
<p>语法:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name<span class="hljs-operator">&gt;</span>, ...<br> <span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span> name<span class="hljs-operator">&gt;</span> <br> <span class="hljs-keyword">where</span> <span class="hljs-operator">&lt;</span>expr<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure>
<p>首先通过 where 子句查询出符合指定条件的记录，然后再选取出 select 语句指定的列。</p>
<p>SQL 中子句的书写顺序是固定的，where 子句必须紧跟在 from 子句之后。</p>
<h3 id="注释的书写方法"><a href="#注释的书写方法" class="headerlink" title="注释的书写方法"></a>注释的书写方法</h3><p>两种:</p>
<ul>
<li>1行注释，用<code>--</code></li>
<li>多行注释，用<code>/*</code> 和 <code>*/</code></li>
</ul>
<h2 id="2-2-算术运算符和比较运算符"><a href="#2-2-算术运算符和比较运算符" class="headerlink" title="2-2 算术运算符和比较运算符"></a>2-2 算术运算符和比较运算符</h2><h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><p>如:</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_name, sale_price,<br>       sale_price * <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> <span class="hljs-string">&quot;sale_price_x2&quot;</span><br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure>
<p>四则运算符号:</p>
<ul>
<li><ul>
<li></li>
</ul>
</li>
<li><ul>
<li></li>
</ul>
</li>
<li><ul>
<li></li>
</ul>
</li>
<li>&#x2F;</li>
</ul>
<h3 id="需要注意NULL"><a href="#需要注意NULL" class="headerlink" title="需要注意NULL"></a>需要注意NULL</h3><p>所有包含 null 的计算，结果肯定是 null.</p>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p>使用 <code>=</code> .</p>
<p>“不等于”比较运算符<code>&lt;&gt;</code>.</p>
<p>其他比较运算符:</p>
<ul>
<li><blockquote>
<p>&#x3D;</p>
</blockquote>
</li>
<li><blockquote>
</blockquote>
</li>
<li>&lt;&#x3D;</li>
<li>&lt;</li>
</ul>
<h3 id="对字符串使用不等号时的注意事项"><a href="#对字符串使用不等号时的注意事项" class="headerlink" title="对字符串使用不等号时的注意事项"></a>对字符串使用不等号时的注意事项</h3><p>在对字符串类型的数据进行大小比较时，使用的是和数字比较不同的规则。</p>
<p>按照字典顺序进行比较。以相同字符开头的单词比不同字符开头的单词更接近。</p>
<h3 id="不能对null使用比较运算符"><a href="#不能对null使用比较运算符" class="headerlink" title="不能对null使用比较运算符"></a>不能对null使用比较运算符</h3><p>SQL 提供了专门用来判断是否为 null 的 <code>is null</code> 运算符。</p>
<p>如:</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_name, purchase_price<br>    <span class="hljs-keyword">from</span> Product<br>  <span class="hljs-keyword">where</span> purchase_price <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure>
<p>若不是 null, 用 <code>is not null</code> 运算符。</p>
<h2 id="2-3-逻辑运算符"><a href="#2-3-逻辑运算符" class="headerlink" title="2-3 逻辑运算符"></a>2-3 逻辑运算符</h2><h3 id="not-运算符"><a href="#not-运算符" class="headerlink" title="not 运算符"></a>not 运算符</h3><p>需要和其他查询条件组合使用。</p>
<h3 id="and-运算符和-or-运算符"><a href="#and-运算符和-or-运算符" class="headerlink" title="and 运算符和 or 运算符"></a>and 运算符和 or 运算符</h3><p><code>and</code> 运算符是“与”运算。</p>
<p><code>or</code> 运算符是”或”运算。</p>
<h3 id="通过括号强化处理"><a href="#通过括号强化处理" class="headerlink" title="通过括号强化处理"></a>通过括号强化处理</h3><p><code>and</code> 运算符优先于 <code>or</code> 运算符。</p>
<p>日期的一种格式 <code>2009-09-11</code>.</p>
<h3 id="逻辑运算符和真值"><a href="#逻辑运算符和真值" class="headerlink" title="逻辑运算符和真值"></a>逻辑运算符和真值</h3><p>比较运算符会把运算结果以真值的形式返回。</p>
<p>使用 <code>and</code> 运算符进行的逻辑运算称为<mark>逻辑积</mark>.</p>
<p>使用 <code>or</code> 运算符进行的逻辑运算称为<mark>逻辑和</mark>.</p>
<p>不能对 null 使用比较运算符。</p>
<h3 id="含有-null-时的真值"><a href="#含有-null-时的真值" class="headerlink" title="含有 null 时的真值"></a>含有 null 时的真值</h3><p>真值中除真假之外的第三种值–不确定(unknown).</p>
<p>与通常的逻辑运算被称为<mark>二值逻辑</mark>. </p>
<p>SQL 中的逻辑运算被称为<mark>三值逻辑</mark>.</p>
<p>级别: 假 &gt; 不确定 &gt; 真.</p>
<p>尽量不使用 null, 其会使真值表更复杂。</p>
<h1 id="第3章-聚合与排序"><a href="#第3章-聚合与排序" class="headerlink" title="第3章 聚合与排序"></a>第3章 聚合与排序</h1><h2 id="3-1-对表进行聚合查询"><a href="#3-1-对表进行聚合查询" class="headerlink" title="3-1 对表进行聚合查询"></a>3-1 对表进行聚合查询</h2><h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>SQL中用于汇总的函数:</p>
<ul>
<li>count: 计算行数</li>
<li>sum: 列数据的合计值</li>
<li>avg: 列数据的平均值</li>
<li>max: 列数据的最大值</li>
<li>min: 列数据的最小值<br>用于汇总的函数称为<mark>聚合函数</mark>或者<mark>聚集函数</mark>.</li>
</ul>
<p>所谓<mark>聚合</mark>, 就是将多行汇总于一行.</p>
<h3 id="计算表中数据的行数"><a href="#计算表中数据的行数" class="headerlink" title="计算表中数据的行数"></a>计算表中数据的行数</h3><p>计算全部数据的行数:</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(*)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure>
<h3 id="计算-null-之外的数据的行数"><a href="#计算-null-之外的数据的行数" class="headerlink" title="计算 null 之外的数据的行数"></a>计算 null 之外的数据的行数</h3><p>将对象列设定为参数而不是 <code>*</code>.</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(purchase_price)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure>
<p>使用星号是<code>count</code>函数特有的，其他函数不能将其作为参数。</p>
<h3 id="计算合计值"><a href="#计算合计值" class="headerlink" title="计算合计值"></a>计算合计值</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> <span class="hljs-keyword">sum</span>(sale_price)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure>
<p>所有的聚合函数，如果以列名为参数，那么在计算之前就已经把 null 排除在外了，因此无论有多少个 null 都会被无视。</p>
<h3 id="计算平均值"><a href="#计算平均值" class="headerlink" title="计算平均值"></a>计算平均值</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> <span class="hljs-keyword">avg</span>(sale_price)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure>
<h3 id="计算最大值和最小值"><a href="#计算最大值和最小值" class="headerlink" title="计算最大值和最小值"></a>计算最大值和最小值</h3><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(sale_price), <span class="hljs-built_in">min</span>(purchase_price)<br>  from <span class="hljs-built_in">Product</span>;<br></code></pre></td></tr></table></figure>
<p>max&#x2F;min 函数原则上可以适用于任何数据类型的列。</p>
<p>sum&#x2F;avg 函数只适用于数值类型。</p>
<h3 id="使用聚合函数删除重复值-关键字distinct"><a href="#使用聚合函数删除重复值-关键字distinct" class="headerlink" title="使用聚合函数删除重复值(关键字distinct)"></a>使用聚合函数删除重复值(关键字distinct)</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-keyword">distinct</span> product_type)<br>  <span class="hljs-keyword">from</span> Product;<br></code></pre></td></tr></table></figure>
<p>在参数中使用 distinct. 所有的聚合函数都可以使用。</p>
<h2 id="3-2-对表进行分组"><a href="#3-2-对表进行分组" class="headerlink" title="3-2 对表进行分组"></a>3-2 对表进行分组</h2><p>语法结构:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name3<span class="hljs-operator">&gt;</span>, ......<br>    <span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span> name<span class="hljs-operator">&gt;</span><br>  <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name3<span class="hljs-operator">&gt;</span>, ......;<br></code></pre></td></tr></table></figure>
<p><code>group by</code> 子句中指定的列称为 <mark>聚合键</mark>或者<mark>分组列</mark>.</p>
<p><code>group by</code> 子句应写在 <code>from</code> 语句之后，有 <code>where</code> 语句也应该在 <code>where</code> 语句之后.</p>
<h3 id="聚合键中包含-null-的情况"><a href="#聚合键中包含-null-的情况" class="headerlink" title="聚合键中包含 null 的情况"></a>聚合键中包含 null 的情况</h3><p>在结果中以空行的形式表现出来。</p>
<h3 id="使用-where-子句时-group-by-的执行结果"><a href="#使用-where-子句时-group-by-的执行结果" class="headerlink" title="使用 where 子句时 group by 的执行结果"></a>使用 where 子句时 group by 的执行结果</h3><h3 id="与聚合函数和-group-by-子句有关的常见错误"><a href="#与聚合函数和-group-by-子句有关的常见错误" class="headerlink" title="与聚合函数和 group by 子句有关的常见错误"></a>与聚合函数和 group by 子句有关的常见错误</h3><p>使用聚合函数时，select 子句中只能存在以下三种元素:</p>
<ul>
<li>常数</li>
<li>聚合函数</li>
<li>group by 子句中指定的列名<br>使用 group by 子句时，select 子句中不能出现聚合键之外的别名.</li>
</ul>
<p><code>group by</code> 子句也不能使用别名。</p>
<p><code>group by</code> 子句结果的显示是无序的。</p>
<p>在 <code>where</code> 子句中不能使用聚合函数。只有 <code>select</code> 子句和 <code>having</code> 子句(以及order by子句) 中能够使用聚合函数。 </p>
<p><code>distinct</code> 和 <code>group by</code> 都能够删除重复数据。</p>
<h2 id="3-3-为聚合结果指定条件"><a href="#3-3-为聚合结果指定条件" class="headerlink" title="3-3 为聚合结果指定条件"></a>3-3 为聚合结果指定条件</h2><h3 id="having-子句"><a href="#having-子句" class="headerlink" title="having 子句"></a>having 子句</h3><p><code>where</code> 只能指定记录(行)的条件，而不能用来指定组的条件.</p>
<p><code>having</code> 子句用于指定集合的条件。</p>
<p>语法:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name3<span class="hljs-operator">&gt;</span>, ......<br>  <span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span> name<span class="hljs-operator">&gt;</span><br>  <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name3<span class="hljs-operator">&gt;</span>, ......<br>  <span class="hljs-keyword">having</span> <span class="hljs-operator">&lt;</span>expr<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure>
<p>顺序: select -&gt; from -&gt; where -&gt; group by -&gt; having</p>
<p>如:</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">select</span> product_type, count<span class="hljs-comment">(*)</span><br><span class="hljs-comment">  from Product</span><br><span class="hljs-comment">  group by procuct_type</span><br><span class="hljs-comment">  having count(*)</span> = <span class="hljs-number">2</span><span class="hljs-punctuation">;</span><br></code></pre></td></tr></table></figure>
<h3 id="having-子句的构成要素"><a href="#having-子句的构成要素" class="headerlink" title="having 子句的构成要素"></a>having 子句的构成要素</h3><p>和包含 group by 子句时的 select 子句一样:</p>
<ul>
<li>常数</li>
<li>聚合函数</li>
<li>group by 子句中指定的列名</li>
</ul>
<h3 id="相对于-having-子句，更适合写在-where-子句中的条件"><a href="#相对于-having-子句，更适合写在-where-子句中的条件" class="headerlink" title="相对于 having 子句，更适合写在 where 子句中的条件"></a>相对于 having 子句，更适合写在 where 子句中的条件</h3><p>where 子句 &#x3D; 指定行所对应的条件<br>having 子句 &#x3D; 指定组所对应的条件</p>
<h3 id="where-子句和-having-子句的执行速度"><a href="#where-子句和-having-子句的执行速度" class="headerlink" title="where 子句和 having 子句的执行速度"></a>where 子句和 having 子句的执行速度</h3><p>通常情况下，将条件写在 where 子句中要比写在 having 子句中的处理速度快。</p>
<p>通过 WHERE 子句指定条件时，由于排序之前就对数据进行了过滤，因此能够减少排序的数据量。但 HAVING 子句是在排序之后才对数据进行分组的.</p>
<h2 id="3-4-对查询结果进行排序"><a href="#3-4-对查询结果进行排序" class="headerlink" title="3-4 对查询结果进行排序"></a>3-4 对查询结果进行排序</h2><h3 id="order-by-子句"><a href="#order-by-子句" class="headerlink" title="order by 子句"></a>order by 子句</h3><p>通常，从表中抽取数据，如果没有指定顺序，则为随机。</p>
<p>在 select 语句末尾添加 order by 子句来指定排列顺序:</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">select</span> &lt;column name1&gt;, &lt;column name2&gt;, &lt;column name3&gt;, <span class="hljs-params">...</span><span class="hljs-params">...</span><br>  from &lt;table name&gt;<br>  <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> &lt;排序基准列<span class="hljs-number">1</span>&gt;, &lt;排序基准列<span class="hljs-number">2</span>&gt;, <span class="hljs-params">...</span><span class="hljs-params">...</span>;<br></code></pre></td></tr></table></figure>
<p>书写顺序: select -&gt; from -&gt; where -&gt; group by -&gt; having -&gt; order by</p>
<h3 id="指定升序或降序"><a href="#指定升序或降序" class="headerlink" title="指定升序或降序"></a>指定升序或降序</h3><p>降序，在列名之后使用 <code>desc</code>(descendent) 关键词:</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_id, product_name, sale_price, purchase_price<br>  <span class="hljs-keyword">from</span> Product<br>  <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> sale_price <span class="hljs-keyword">desc</span>;<br></code></pre></td></tr></table></figure>
<p>升序，使用 <code>asc</code>(ascendent) 关键词。</p>
<p>未指定时默认升序排序。</p>
<h3 id="指定多个排序键"><a href="#指定多个排序键" class="headerlink" title="指定多个排序键"></a>指定多个排序键</h3><p>规则是优先使用左侧的键，如果该列存在相同值的话，再接着参考右侧的键.</p>
<h3 id="null-的顺序"><a href="#null-的顺序" class="headerlink" title="null 的顺序"></a>null 的顺序</h3><p>使用含有 null 的列作为排序键时，null 会在结果的开头或末尾汇总显示。</p>
<h3 id="在排序键中使用显示用的别名"><a href="#在排序键中使用显示用的别名" class="headerlink" title="在排序键中使用显示用的别名"></a>在排序键中使用显示用的别名</h3><p>order by 子句中允许使用别名。</p>
<p>如:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select product_id <span class="hljs-keyword">as</span> <span class="hljs-built_in">id</span>, product_name, sale_price <span class="hljs-keyword">as</span> sp, purchase_price<br>  <span class="hljs-keyword">from</span> Product<br>  order <span class="hljs-keyword">by</span> sp, <span class="hljs-built_in">id</span>;<br></code></pre></td></tr></table></figure>
<p>使用 having 子句时 select 语句的顺序:</p>
<p>from -&gt; where -&gt; group by -&gt; having -&gt; select -&gt; order by</p>
<h3 id="order-by-子句中可以使用的列"><a href="#order-by-子句中可以使用的列" class="headerlink" title="order by 子句中可以使用的列"></a>order by 子句中可以使用的列</h3><p>可以使用在 select 子句中未使用的列和聚合函数。</p>
<h3 id="不要使用列编号"><a href="#不要使用列编号" class="headerlink" title="不要使用列编号"></a>不要使用列编号</h3><p><mark>列编号</mark>是指 select 子句中的列按照从左到右的顺序进行排序时所对应的编号(1, 2, 3,…).</p>
<h1 id="第4章-数据更新"><a href="#第4章-数据更新" class="headerlink" title="第4章 数据更新"></a>第4章 数据更新</h1><h2 id="4-1-数据的插入-insert语句的使用方法"><a href="#4-1-数据的插入-insert语句的使用方法" class="headerlink" title="4-1 数据的插入(insert语句的使用方法)"></a>4-1 数据的插入(insert语句的使用方法)</h2><h3 id="什么是-insert"><a href="#什么是-insert" class="headerlink" title="什么是 insert"></a>什么是 insert</h3><p><code>create table</code> 语句只负责创建表，但创建出的表中并没有数据。</p>
<h3 id="insert-语句的基本语法"><a href="#insert-语句的基本语法" class="headerlink" title="insert 语句的基本语法"></a>insert 语句的基本语法</h3><p>语法:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span> name<span class="hljs-operator">&gt;</span> (column1, column2, ...) <span class="hljs-keyword">values</span> (value1, value2, ...);<br></code></pre></td></tr></table></figure>
<p>将列名和值用逗号分开，分别括在()内，这种形式称为<mark>清单</mark>.</p>
<p>表名后面的列清单和 value 子句中的值清单的列数必须保持一致。</p>
<p>原则上，执行一次 insert 语句会插入一行数据。</p>
<h3 id="列清单的省略"><a href="#列清单的省略" class="headerlink" title="列清单的省略"></a>列清单的省略</h3><p>对表进行全列 insert 时，可以省略表名后的列清单。</p>
<h3 id="插入-null"><a href="#插入-null" class="headerlink" title="插入 null"></a>插入 null</h3><p>直接在 values 子句的值清单中写入 null.</p>
<p>想要插入 null 的列一定不能设置 not null 约束.</p>
<h3 id="插入默认值"><a href="#插入默认值" class="headerlink" title="插入默认值"></a>插入默认值</h3><p>在 create table 语句中设置 <code>default</code> 约束。</p>
<p>默认值的使用方法通常有显式和隐式两种.</p>
<ul>
<li>显式，在 <code>values</code> 子句中指定 <code>default</code> 关键字。 <code>values (&#39;0007&#39;, default, ...)</code></li>
<li>隐式，省略设定了默认值的列，列和值都要忽略<br>一般使用显式。</li>
</ul>
<h3 id="从其他表复制数据"><a href="#从其他表复制数据" class="headerlink" title="从其他表复制数据"></a>从其他表复制数据</h3><p>执行 <code>insert ... select</code> 语句。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function">insert <span class="hljs-keyword">into</span> <span class="hljs-title">Productcopy</span> (<span class="hljs-params">product_id, product_name, product_type, sale_price</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">select</span> product_id, product_name, product_type, sale_price</span><br><span class="hljs-function"><span class="hljs-keyword">from</span> Product</span>;<br></code></pre></td></tr></table></figure>
<p>insert 语句的 select 语句中，可以使用 where 子句或者 group by 子句等人和语法(使用 order by 子句并不会产生任何效果).</p>
<h2 id="4-2-数据的删除-delete语句的使用方法"><a href="#4-2-数据的删除-delete语句的使用方法" class="headerlink" title="4-2 数据的删除(delete语句的使用方法)"></a>4-2 数据的删除(delete语句的使用方法)</h2><h3 id="drop-table-语句和-delete-语句"><a href="#drop-table-语句和-delete-语句" class="headerlink" title="drop table 语句和 delete 语句"></a>drop table 语句和 delete 语句</h3><ul>
<li>drop table 语句可以将表完全删除</li>
<li>delete 语句会留下表(容器), 而删除表中的全部数据</li>
</ul>
<h3 id="delete-语句的基本语法"><a href="#delete-语句的基本语法" class="headerlink" title="delete 语句的基本语法"></a>delete 语句的基本语法</h3><p>语法:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br></code></pre></td></tr></table></figure>
<h3 id="指定删除对象的-delete-语句-搜索型delete"><a href="#指定删除对象的-delete-语句-搜索型delete" class="headerlink" title="指定删除对象的 delete 语句(搜索型delete)"></a>指定删除对象的 delete 语句(搜索型delete)</h3><p>语法:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br>  <span class="hljs-keyword">where</span> &lt;expr&gt;;<br></code></pre></td></tr></table></figure>
<p>delete 语句中不能使用 <code>group by</code>、<code>having</code>和 <code>order by</code>.</p>
<h2 id="4-3-数据的更新-update语句的使用方法"><a href="#4-3-数据的更新-update语句的使用方法" class="headerlink" title="4-3 数据的更新(update语句的使用方法)"></a>4-3 数据的更新(update语句的使用方法)</h2><h3 id="update-语句的基本语法"><a href="#update-语句的基本语法" class="headerlink" title="update 语句的基本语法"></a>update 语句的基本语法</h3><p>用于更改数据.</p>
<p>语法:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">update</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br>  <span class="hljs-keyword">set</span> &lt;<span class="hljs-keyword">column</span> <span class="hljs-type">name</span>&gt; = &lt;expr&gt;;<br></code></pre></td></tr></table></figure>
<p>将更新对象的列和更新后的值都记述在<code>set</code>子句中。</p>
<p>设置一整列.</p>
<h3 id="指定条件的-uupdate-语句-搜索型update"><a href="#指定条件的-uupdate-语句-搜索型update" class="headerlink" title="指定条件的 uupdate 语句(搜索型update)"></a>指定条件的 uupdate 语句(搜索型update)</h3><p>使用 <code>where</code> 子句:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">update</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br>  <span class="hljs-keyword">set</span> &lt;<span class="hljs-keyword">column</span> <span class="hljs-type">name</span>&gt; = &lt;expr&gt;<br>  <span class="hljs-keyword">where</span> &lt;expr&gt;;<br></code></pre></td></tr></table></figure>
<h3 id="使用-null-进行更新"><a href="#使用-null-进行更新" class="headerlink" title="使用 null 进行更新"></a>使用 null 进行更新</h3><p>将赋值表达式右边的值直接写为 null。</p>
<p>使用 update 语句可以将值清空为 null(但只限于未设置 not null 约束的列).</p>
<h3 id="多列更新"><a href="#多列更新" class="headerlink" title="多列更新"></a>多列更新</h3><p>两种写法:</p>
<p>第一种:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">update</span> &lt;<span class="hljs-keyword">table</span> <span class="hljs-type">name</span>&gt;<br>  <span class="hljs-keyword">set</span> &lt;<span class="hljs-keyword">column</span> <span class="hljs-type">name</span>&gt; = &lt;<span class="hljs-keyword">value</span>&gt;<br>  <span class="hljs-keyword">set</span> &lt;<span class="hljs-keyword">column</span> <span class="hljs-type">name</span>&gt; = &lt;<span class="hljs-keyword">value</span>&gt;<br>              .<br>              .<br>              .<br>  <span class="hljs-keyword">where</span> &lt;expr&gt;<br></code></pre></td></tr></table></figure>
<p>第二种:</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pf">update <span class="hljs-variable">&lt;table name&gt;</span><br>  <span class="hljs-built_in">set</span> (<span class="hljs-variable">&lt;column name&gt;</span>, <span class="hljs-variable">&lt;column name&gt;</span>, ...) = (<span class="hljs-variable">&lt;value&gt;</span>, <span class="hljs-variable">&lt;value&gt;</span>, ...)<br>  where <span class="hljs-variable">&lt;expr&gt;</span><br></code></pre></td></tr></table></figure>
<p>通常使用第一种方法。</p>
<h2 id="4-4-事务"><a href="#4-4-事务" class="headerlink" title="4-4 事务"></a>4-4 事务</h2><h3 id="什么是事务-transaction"><a href="#什么是事务-transaction" class="headerlink" title="什么是事务(transaction)"></a>什么是事务(transaction)</h3><p>事务是需要在同一个处理单元中执行的一系列更新处理的集合。</p>
<p>一个处理单元就是表之类的，一系列更新处理就是修改操作。</p>
<h3 id="创建事务"><a href="#创建事务" class="headerlink" title="创建事务"></a>创建事务</h3><p>语法:</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs abnf">事务开始语句 <span class="hljs-comment">;</span><br>  DML 语句① <span class="hljs-comment">;</span><br>  DML 语句② <span class="hljs-comment">;</span><br>  DML 语句③ <span class="hljs-comment">;</span><br>      .<br>      .<br>      .<br>事务结束语句（COMMIT 或者 ROLLBACK）<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>
<p>各个 DBMD 都定义有事务的开始语句:</p>
<ul>
<li>PostgreSQL: <code>begin transaction</code></li>
</ul>
<p>事务结束语句只有两种且通用:</p>
<ul>
<li>commit</li>
<li>rollback<br>事务开始有默认开始的时间点.</li>
</ul>
<h4 id="commit-提交处理"><a href="#commit-提交处理" class="headerlink" title="commit 提交处理"></a>commit 提交处理</h4><p>相当于文件处理中的覆盖处理。</p>
<h4 id="rollback-取消处理"><a href="#rollback-取消处理" class="headerlink" title="rollback 取消处理"></a>rollback 取消处理</h4><p>相当于文件处理中的放弃保存。</p>
<h4 id="事务处理何时开始"><a href="#事务处理何时开始" class="headerlink" title="事务处理何时开始"></a>事务处理何时开始</h4><p>实际上，几乎所有的数据库产品的事务都无需开始指令.</p>
<p>区分事务:</p>
<ul>
<li>每条SQL语句就是一个事务(自动提交模式)</li>
<li>直到用户执行commit或者rollback为止算作一个事务</li>
</ul>
<p>默认使用自动提交模式的 DBMS 有 SQL Server、PostgreSQL和MySQL等.</p>
<h3 id="ACID-特性"><a href="#ACID-特性" class="headerlink" title="ACID 特性"></a>ACID 特性</h3><p>DBMS 的事务都遵循四种特性，将这四种特性的首字母结合起来统称为 ACID 特性。</p>
<h4 id="原子性-Atomicity"><a href="#原子性-Atomicity" class="headerlink" title="原子性 Atomicity"></a>原子性 Atomicity</h4><p>指事务结束时，其中包含的更新要么全部执行，要么完全不执行。</p>
<h4 id="一致性-Consistency"><a href="#一致性-Consistency" class="headerlink" title="一致性 Consistency"></a>一致性 Consistency</h4><p>指事务中包含的处理，要满足数据库提前设置的约束, 如主键约束或者 not null 约束等。</p>
<h4 id="隔离性-Isolation"><a href="#隔离性-Isolation" class="headerlink" title="隔离性 Isolation"></a>隔离性 Isolation</h4><p>指的是保证不同事务之间互不干扰的特性。</p>
<h4 id="持久性-Durability"><a href="#持久性-Durability" class="headerlink" title="持久性 Durability"></a>持久性 Durability</h4><p>指在事务结束后，DBMS 能够保证该时间点的数据状态会被保存的特性。</p>
<p>常见为将执行记录(日志)保存在存储介质.</p>
<h1 id="第5章-复杂查询"><a href="#第5章-复杂查询" class="headerlink" title="第5章 复杂查询"></a>第5章 复杂查询</h1><h2 id="5-1-视图"><a href="#5-1-视图" class="headerlink" title="5-1 视图"></a>5-1 视图</h2><h3 id="视图和表"><a href="#视图和表" class="headerlink" title="视图和表"></a>视图和表</h3><p>视图和表的区别: 是否保存了实际数据。</p>
<p>使用视图时并不会将数据保存到存储设备中, 而且也不会将数据保存到其他任何地方.</p>
<p> 视图保存的是从表中取出数据所使用的 select 语句.</p>
<h4 id="视图的优点"><a href="#视图的优点" class="headerlink" title="视图的优点"></a>视图的优点</h4><ul>
<li>无需保存数据</li>
<li>将频繁使用的 select 语句保存成视图，就不用重新书写</li>
</ul>
<h3 id="创建视图的方法"><a href="#创建视图的方法" class="headerlink" title="创建视图的方法"></a>创建视图的方法</h3><p>使用 <code>create view</code> 语句:</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> 视图名称(&lt;视图列名<span class="hljs-number">1</span>&gt;, &lt;视图列名<span class="hljs-number">2</span>&gt;, ......) <br><span class="hljs-keyword">as</span><br>&lt;<span class="hljs-keyword">select</span>语句&gt;<br></code></pre></td></tr></table></figure>
<p>select 语句中列的排列顺序和视图中列的排列顺序相同.</p>
<p>视图可以写在 select 语句的 from 中.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name1<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> name2<span class="hljs-operator">&gt;</span>, ...<br>  <span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">view</span> name<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure>
<h4 id="使用视图的查询"><a href="#使用视图的查询" class="headerlink" title="使用视图的查询"></a>使用视图的查询</h4><p>通常为两个步骤:</p>
<ol>
<li>执行定义视图的 select 语句</li>
<li>根据得到的结果，执行在 from 子句中使用的视图的 select 语句</li>
</ol>
<p>也就是说使用视图就是把视图放在 from 之后。</p>
<p>多重视图会降低 SQL 的性能.</p>
<h3 id="视图的限制1-–-定义视图时不能使用-order-by-子句"><a href="#视图的限制1-–-定义视图时不能使用-order-by-子句" class="headerlink" title="视图的限制1 – 定义视图时不能使用 order by 子句"></a>视图的限制1 – 定义视图时不能使用 order by 子句</h3><h3 id="视图的限制2-–-对视图进行更新"><a href="#视图的限制2-–-对视图进行更新" class="headerlink" title="视图的限制2 – 对视图进行更新"></a>视图的限制2 – 对视图进行更新</h3><p>定义视图的 select 语句满足某些条件，视图就可以被更新(即对视图使用 insert、delete、update等), 几个具有代表性的条件:</p>
<ol>
<li>select 子句中未使用 distinct</li>
<li>from 子句中只有一张表</li>
<li>未使用 group by 子句</li>
<li>未使用 having 子句<br>视图和表需要同时进行更新，因此通过汇总得到的视图无法进行更新.</li>
</ol>
<p>PostgreSQL 中的视图会被初始设定为只读, 若要允许更新:</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">replace</span> rule insert_rule<br><span class="hljs-keyword">as</span> <span class="hljs-keyword">on</span> <span class="hljs-keyword">insert</span><br><span class="hljs-keyword">to</span> &lt;<span class="hljs-keyword">view</span> name&gt; <span class="hljs-keyword">do</span> instead<br><span class="hljs-keyword">insert</span>  <span class="hljs-keyword">into</span> ...<br></code></pre></td></tr></table></figure>
<h3 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h3><p>使用 drop view 语句:</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-built_in">drop</span> <span class="hljs-built_in">view</span> &lt;<span class="hljs-built_in">view</span> name&gt;(&lt;视图列名<span class="hljs-number">1</span>&gt;, ...)<br></code></pre></td></tr></table></figure>
<p>删除多重视图，即存在关联的视图:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">view</span> &lt;<span class="hljs-keyword">view</span> <span class="hljs-type">name</span>&gt; <span class="hljs-keyword">cascade</span>;<br></code></pre></td></tr></table></figure>
<p><code>cascade</code> 是重叠的意思。</p>
<h2 id="5-2-子查询"><a href="#5-2-子查询" class="headerlink" title="5-2 子查询"></a>5-2 子查询</h2><p>子查询就是一次性视图。</p>
<p>子查询将用来定义视图的 select 语句直接用于 from 子句中.</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_type, cnt_product<br>  <span class="hljs-keyword">from</span> (<br>    <span class="hljs-keyword">select</span> product_type, <span class="hljs-keyword">count</span>(*) <span class="hljs-keyword">as</span> cnt_product<br>        <span class="hljs-keyword">from</span> Product<br>        <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> product_type<br>      ) <span class="hljs-keyword">as</span> ProductSum;<br></code></pre></td></tr></table></figure>
<p>这里的 <code>Productsum</code> 也是一次性名称.</p>
<p>select 语句的执行顺序，先执行 from 子句中的 select 语句，然后才执行外层的 select 语句。</p>
<h4 id="增加子查询的层数"><a href="#增加子查询的层数" class="headerlink" title="增加子查询的层数"></a>增加子查询的层数</h4><p>子查询的层数原则上没有限制.</p>
<p>尽量避免嵌套，其会使可读性和性能变差。</p>
<h3 id="子查询的名称"><a href="#子查询的名称" class="headerlink" title="子查询的名称"></a>子查询的名称</h3><p>原则上子查询必须设定名称, 需使用 as 关键词.</p>
<h3 id="标量子查询-scalar-subquery"><a href="#标量子查询-scalar-subquery" class="headerlink" title="标量子查询 scalar subquery"></a>标量子查询 scalar subquery</h3><h4 id="什么是标量"><a href="#什么是标量" class="headerlink" title="什么是标量"></a>什么是标量</h4><p>标量就是单一的意思.</p>
<p>标量子查询的特殊限制为: 必须而且只能返回1行1列的结果。</p>
<p>也就是返回表中某一行的某一列的值。</p>
<p>标量子查询的返回值可以用在 &#x3D; 或者 &lt;&gt; 这样需要单一值的比较运算符中.</p>
<h4 id="在-where-子句中使用标量子查询"><a href="#在-where-子句中使用标量子查询" class="headerlink" title="在 where 子句中使用标量子查询"></a>在 where 子句中使用标量子查询</h4><p>解决在 where 子句中不能使用聚合函数的问题.</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_id, product_name, sale_price<br>  <span class="hljs-keyword">from</span> Product<br>  <span class="hljs-keyword">where</span> sale_price &gt; (<span class="hljs-keyword">select</span> <span class="hljs-keyword">avg</span>(sale_price)<br>                        <span class="hljs-keyword">from</span> Product);<br></code></pre></td></tr></table></figure>
<p>执行顺序，首先执行内层的子查询，然后执行外层的查询。</p>
<h3 id="标量子查询的书写位置"><a href="#标量子查询的书写位置" class="headerlink" title="标量子查询的书写位置"></a>标量子查询的书写位置</h3><p>通常任何可以使用单一值的位置都可以使用。几乎所有的地方都可以使用.</p>
<h3 id="使用标量子查询时的注意事项"><a href="#使用标量子查询时的注意事项" class="headerlink" title="使用标量子查询时的注意事项"></a>使用标量子查询时的注意事项</h3><p>即该子查询不能返回多行结果。</p>
<h2 id="5-3-关联子查询"><a href="#5-3-关联子查询" class="headerlink" title="5-3 关联子查询"></a>5-3 关联子查询</h2><h3 id="普通子查询和关联子查询的区别"><a href="#普通子查询和关联子查询的区别" class="headerlink" title="普通子查询和关联子查询的区别"></a>普通子查询和关联子查询的区别</h3><h4 id="使用关联子查询的解决方案"><a href="#使用关联子查询的解决方案" class="headerlink" title="使用关联子查询的解决方案"></a>使用关联子查询的解决方案</h4><p>在子查询中添加的 where 子句的条件.</p>
<h3 id="关联子查询也是用来对集合进行切分的"><a href="#关联子查询也是用来对集合进行切分的" class="headerlink" title="关联子查询也是用来对集合进行切分的"></a>关联子查询也是用来对集合进行切分的</h3><h3 id="结合条件一定要写在子查询中"><a href="#结合条件一定要写在子查询中" class="headerlink" title="结合条件一定要写在子查询中"></a>结合条件一定要写在子查询中</h3><p>关联子查询就是有一个关联条件。</p>
<p>关联名称存在作用域.</p>
<h1 id="第6章-函数、谓词、CASE表达式"><a href="#第6章-函数、谓词、CASE表达式" class="headerlink" title="第6章 函数、谓词、CASE表达式"></a>第6章 函数、谓词、CASE表达式</h1><h2 id="6-1-各种各样的函数"><a href="#6-1-各种各样的函数" class="headerlink" title="6-1 各种各样的函数"></a>6-1 各种各样的函数</h2><h3 id="函数的种类"><a href="#函数的种类" class="headerlink" title="函数的种类"></a>函数的种类</h3><p>大致可以分为:</p>
<ul>
<li>算数函数</li>
<li>字符串函数</li>
<li>日期函数</li>
<li>转换函数</li>
<li>聚合函数</li>
</ul>
<h3 id="算数函数"><a href="#算数函数" class="headerlink" title="算数函数"></a>算数函数</h3><ul>
<li><ul>
<li></li>
</ul>
</li>
<li><ul>
<li></li>
</ul>
</li>
<li><ul>
<li></li>
</ul>
</li>
<li>&#x2F;<br><code>numeric</code>数据类型, 格式为(全体位数，小数位数).</li>
</ul>
<h4 id="ABS-–-绝对值"><a href="#ABS-–-绝对值" class="headerlink" title="ABS – 绝对值"></a>ABS – 绝对值</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">ABS</span><span class="hljs-params">(数值)</span></span><br></code></pre></td></tr></table></figure>

<p><code>abs</code> 是计算绝对值(absolute value)的函数.</p>
<p><code>abs</code> 计算出某一列的绝对值。</p>
<p>绝大多数函数对于 null 都返回null.</p>
<h4 id="MOD-–-求余"><a href="#MOD-–-求余" class="headerlink" title="MOD – 求余"></a>MOD – 求余</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">MOD</span><span class="hljs-params">(被除数，除数)</span></span><br></code></pre></td></tr></table></figure>
<p>只能对整数类型的列使用 <code>MOD</code> 函数。</p>
<h4 id="ROUND-–-四舍五入"><a href="#ROUND-–-四舍五入" class="headerlink" title="ROUND – 四舍五入"></a>ROUND – 四舍五入</h4><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title"><span class="hljs-built_in">ROUND</span></span>(对象数值，保留小数的位数)</span><br></code></pre></td></tr></table></figure>
<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><h4 id="–-拼接"><a href="#–-拼接" class="headerlink" title="|| – 拼接"></a>|| – 拼接</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">字符串<span class="hljs-number">1</span> <span class="hljs-string">|| 字符串2</span><br></code></pre></td></tr></table></figure>
<h4 id="LENGTH-–-字符串长度"><a href="#LENGTH-–-字符串长度" class="headerlink" title="LENGTH – 字符串长度"></a>LENGTH – 字符串长度</h4><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title"><span class="hljs-built_in">LENGTH</span></span>(字符串)</span><br></code></pre></td></tr></table></figure>
<p><code>LENGTH</code> 是以字节为单位.</p>
<h4 id="LOWER-–-小写转换"><a href="#LOWER-–-小写转换" class="headerlink" title="LOWER – 小写转换"></a>LOWER – 小写转换</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">LOWER</span><span class="hljs-params">(字符串)</span></span><br></code></pre></td></tr></table></figure>
<h4 id="UPPER-–-大写转换"><a href="#UPPER-–-大写转换" class="headerlink" title="UPPER – 大写转换"></a>UPPER – 大写转换</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">UPPER</span><span class="hljs-params">(字符串)</span></span><br></code></pre></td></tr></table></figure>
<h4 id="REPLACE-–-字符串替换"><a href="#REPLACE-–-字符串替换" class="headerlink" title="REPLACE – 字符串替换"></a>REPLACE – 字符串替换</h4><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title"><span class="hljs-built_in">REPLACE</span></span>(对象字符串，替换前字符串，替换后字符串)</span><br></code></pre></td></tr></table></figure>
<h4 id="SUBSTRING-–-字符串截取"><a href="#SUBSTRING-–-字符串截取" class="headerlink" title="SUBSTRING – 字符串截取"></a>SUBSTRING – 字符串截取</h4><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title"><span class="hljs-built_in">SUBSTRING</span></span>(对象字符串 <span class="hljs-variable">from</span> 截取的起始位置 <span class="hljs-variable">for</span> 截取的字符数)</span><br></code></pre></td></tr></table></figure>
<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><h4 id="CURRENT-DATE-–-当前日期"><a href="#CURRENT-DATE-–-当前日期" class="headerlink" title="CURRENT_DATE – 当前日期"></a>CURRENT_DATE – 当前日期</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">current_date</span><br></code></pre></td></tr></table></figure>
<h4 id="CURRENT-TIME-–-当前时间"><a href="#CURRENT-TIME-–-当前时间" class="headerlink" title="CURRENT_TIME – 当前时间"></a>CURRENT_TIME – 当前时间</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">current_time</span><br></code></pre></td></tr></table></figure>
<h4 id="CURRENT-TIMESTAMP-–-当前日期和时间"><a href="#CURRENT-TIMESTAMP-–-当前日期和时间" class="headerlink" title="CURRENT_TIMESTAMP – 当前日期和时间"></a>CURRENT_TIMESTAMP – 当前日期和时间</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">current_timestamp</span><br></code></pre></td></tr></table></figure>
<h4 id="EXTRACT-–-截取日期元素"><a href="#EXTRACT-–-截取日期元素" class="headerlink" title="EXTRACT – 截取日期元素"></a>EXTRACT – 截取日期元素</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">EXTRACT</span><span class="hljs-params">(日期元素 from 日期)</span></span><br></code></pre></td></tr></table></figure>
<p>year, month, day, hour, minute, second.</p>
<h3 id="转换函数"><a href="#转换函数" class="headerlink" title="转换函数"></a>转换函数</h3><p>转换在 SQL 中主要有两层意思:</p>
<ol>
<li>数据类型的转换，即 cast</li>
<li>值的转换<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">cast</span><span class="hljs-params">(转换前的值 as 想要转换的数据类型)</span></span><br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="COALESCE-–-将-null-转换为其他值"><a href="#COALESCE-–-将-null-转换为其他值" class="headerlink" title="COALESCE – 将 null 转换为其他值"></a>COALESCE – 将 null 转换为其他值</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">coalesce</span><span class="hljs-params">(数据<span class="hljs-number">1</span>，数据<span class="hljs-number">2</span>，...)</span></span><br></code></pre></td></tr></table></figure>
<p>返回可变参数中左侧开始第一个不是 null 的值。</p>
<p>感觉不是转换。</p>
<h2 id="6-2-谓词"><a href="#6-2-谓词" class="headerlink" title="6-2 谓词"></a>6-2 谓词</h2><h3 id="什么是谓词-predicate"><a href="#什么是谓词-predicate" class="headerlink" title="什么是谓词(predicate)"></a>什么是谓词(predicate)</h3><p>谓词是函数的一种，是需要满足特定条件的函数，该条件就是返回值是真值(true)。</p>
<p>&#x3D;, &lt;, &gt;, &lt;&gt; 等比较运算符，其正式名称就是比较谓词.</p>
<h3 id="LIKE-谓词-–-字符串的部分一致查询"><a href="#LIKE-谓词-–-字符串的部分一致查询" class="headerlink" title="LIKE 谓词 – 字符串的部分一致查询"></a>LIKE 谓词 – 字符串的部分一致查询</h3><p>部分一致大体可以分为:</p>
<ul>
<li>前方一致</li>
<li>中间一致</li>
<li>后方一致<br>部分一致，即字符串中的一部分相同。</li>
</ul>
<h4 id="前方一致查询"><a href="#前方一致查询" class="headerlink" title="前方一致查询"></a>前方一致查询</h4><p>用来查询的字符串，与查询对象的起始部分相同。</p>
<h4 id="中间一致"><a href="#中间一致" class="headerlink" title="中间一致"></a>中间一致</h4><p>用来查询的字符串，与查询对象的部分相同。</p>
<h4 id="后方一致"><a href="#后方一致" class="headerlink" title="后方一致"></a>后方一致</h4><p>用来查询的字符串，与查询对象的末尾部分相同。</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <br>  <span class="hljs-keyword">from</span> SampleLike<br>  <span class="hljs-keyword">where</span> strcol <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;ddd%&#x27;</span><br></code></pre></td></tr></table></figure>
<p><code>%</code> 代表”0字符以上的任意字符串”.</p>
<p><code>_</code> 代表”任意一个字符”.</p>
<h3 id="BETWEEN-谓词-–-范围查询"><a href="#BETWEEN-谓词-–-范围查询" class="headerlink" title="BETWEEN 谓词 – 范围查询"></a>BETWEEN 谓词 – 范围查询</h3><p>使用3个参数:</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_name, sale_price<br>  <span class="hljs-keyword">from</span> Product<br> <span class="hljs-keyword">where</span> sale_price <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">1000</span>;<br></code></pre></td></tr></table></figure>
<h3 id="IS-NULL、IS-NOT-NULL-–-判断是否为-NULL"><a href="#IS-NULL、IS-NOT-NULL-–-判断是否为-NULL" class="headerlink" title="IS NULL、IS NOT NULL – 判断是否为 NULL"></a>IS NULL、IS NOT NULL – 判断是否为 NULL</h3><h3 id="IN-谓词-–-OR-的简便用法"><a href="#IN-谓词-–-OR-的简便用法" class="headerlink" title="IN 谓词 – OR 的简便用法"></a>IN 谓词 – OR 的简便用法</h3><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">select</span> product_name, purchase_price<br>  <span class="hljs-keyword">from</span> Product<br> <span class="hljs-keyword">where</span> purchase_price I<span class="hljs-meta">N</span>(320, 500, 5000)<br></code></pre></td></tr></table></figure>
<p>其否定形式为 <code>NOT IN</code>.</p>
<p>IN 和 NOT IN 无法取出 NULL 数据。</p>
<h3 id="使用子查询作为-IN-谓词的参数"><a href="#使用子查询作为-IN-谓词的参数" class="headerlink" title="使用子查询作为 IN 谓词的参数"></a>使用子查询作为 IN 谓词的参数</h3><h4 id="IN-和子查询"><a href="#IN-和子查询" class="headerlink" title="IN 和子查询"></a>IN 和子查询</h4><p>IN(NOT IN)谓词，可以使用子查询作为其参数。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span> product_name, <span class="hljs-function">sale_price</span><br><span class="hljs-function">  <span class="hljs-keyword">from</span> Product</span><br><span class="hljs-function"> <span class="hljs-keyword">where</span> product_id <span class="hljs-title">IN</span> (<span class="hljs-params"><span class="hljs-keyword">select</span> product_id </span></span><br><span class="hljs-params"><span class="hljs-function">                        <span class="hljs-keyword">from</span> ShopProduct</span></span><br><span class="hljs-params"><span class="hljs-function">                       <span class="hljs-keyword">where</span> shop_id = <span class="hljs-string">&#x27;000C&#x27;</span></span>)</span>;<br></code></pre></td></tr></table></figure>
<h4 id="NOT-IN-和子查询"><a href="#NOT-IN-和子查询" class="headerlink" title="NOT IN 和子查询"></a>NOT IN 和子查询</h4><p>语法和 IN 一致。</p>
<h3 id="EXIST-谓词"><a href="#EXIST-谓词" class="headerlink" title="EXIST 谓词"></a>EXIST 谓词</h3><h4 id="EXISTS谓词的使用方法"><a href="#EXISTS谓词的使用方法" class="headerlink" title="EXISTS谓词的使用方法"></a>EXISTS谓词的使用方法</h4><p>谓词的作用就是 “判断是否存在满足某种条件的记录”</p>
<h5 id="EXIST-的参数"><a href="#EXIST-的参数" class="headerlink" title="EXIST 的参数"></a>EXIST 的参数</h5><p>EXIST 左侧并没有参数.</p>
<p>EXIST 是只有1个参数的谓词，右侧参数通常为一个子查询。</p>
<h5 id="子查询中的-select"><a href="#子查询中的-select" class="headerlink" title="子查询中的 select *"></a>子查询中的 select *</h5><p>EXIST 只关心记录是否存在。</p>
<p>在 EXIST 的子查询中，常常书写 <code>select *</code>.</p>
<h5 id="NOT-EXIST"><a href="#NOT-EXIST" class="headerlink" title="NOT EXIST"></a>NOT EXIST</h5><p>与 EXIST 相反，当”不存在”满足子查询中指定条件的记录时返回真。</p>
<h2 id="6-3-CASE-表达式"><a href="#6-3-CASE-表达式" class="headerlink" title="6-3 CASE 表达式"></a>6-3 CASE 表达式</h2><h3 id="什么是-CASE-表达式"><a href="#什么是-CASE-表达式" class="headerlink" title="什么是 CASE 表达式"></a>什么是 CASE 表达式</h3><p>case 作为条件分支。</p>
<h3 id="CASE-表达式的语法"><a href="#CASE-表达式的语法" class="headerlink" title="CASE 表达式的语法"></a>CASE 表达式的语法</h3><p>CASE 表达式的语法分为:</p>
<ul>
<li>简单 case 表达式</li>
<li>搜索 case 表达式<br>搜索表达式包含了简单 case 表达式的全部功能。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml">case when <span class="hljs-tag">&lt;<span class="hljs-name">求值表达式</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">求值表达式</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">求值表达式</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span><br>                .<br>                . <br>                . <br>     else <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span><br>end<br></code></pre></td></tr></table></figure>
<code>when</code> 子句中的”&lt;求值表达式&gt;”就是类似”列 &#x3D; 值”</li>
</ul>
<p>直到返回为真为止.</p>
<h3 id="CASE-表达式的使用方法"><a href="#CASE-表达式的使用方法" class="headerlink" title="CASE 表达式的使用方法"></a>CASE 表达式的使用方法</h3><p><code>else</code>子句省略不写时会默认为<code>else null</code>.</p>
<h4 id="CASE-表达式的书写位置"><a href="#CASE-表达式的书写位置" class="headerlink" title="CASE 表达式的书写位置"></a>CASE 表达式的书写位置</h4><p><code>CASE</code> 是一个表达式，可以写在任意位置。</p>
<h3 id="简单-CASE-表达式"><a href="#简单-CASE-表达式" class="headerlink" title="简单 CASE 表达式"></a>简单 CASE 表达式</h3><p>会受条件的约束.</p>
<p>语法:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml">case <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span><br>     when <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span> then <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span><br>                .<br>                . <br>                . <br>     else <span class="hljs-tag">&lt;<span class="hljs-name">表达式</span>&gt;</span><br>end<br></code></pre></td></tr></table></figure>
<p>和搜索 case 表达式的不同之处在于，求值表达式变成了 case 后的表达式和 when 后面的表达式.</p>
<h3 id="特定的-case-表达式"><a href="#特定的-case-表达式" class="headerlink" title="特定的 case 表达式"></a>特定的 case 表达式</h3><h1 id="第7章-集合运算"><a href="#第7章-集合运算" class="headerlink" title="第7章 集合运算"></a>第7章 集合运算</h1><h2 id="7-1-表的加减法"><a href="#7-1-表的加减法" class="headerlink" title="7-1 表的加减法"></a>7-1 表的加减法</h2><h3 id="什么是集合运算"><a href="#什么是集合运算" class="headerlink" title="什么是集合运算"></a>什么是集合运算</h3><p>集合在数据库中表示 <mark>记录的集合</mark>.</p>
<p>集合运算就是对满足同一规则的记录进行的加减等四则运算。</p>
<p>通过集合运算，可以得到两张表中记录的集合或者公共记录的集合。</p>
<p>用于集合运算的运算符称为 <mark>集合运算符</mark>.</p>
<h3 id="表的加法-–-UNION"><a href="#表的加法-–-UNION" class="headerlink" title="表的加法 – UNION"></a>表的加法 – UNION</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product<br><span class="hljs-keyword">UNION</span><br><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product2<br></code></pre></td></tr></table></figure>
<p>结果会包含两张表的全部内容。也就是并集.</p>
<p>集合运算符也会除去重复的记录。</p>
<h3 id="集合运算的注意事项"><a href="#集合运算的注意事项" class="headerlink" title="集合运算的注意事项"></a>集合运算的注意事项</h3><h4 id="1-作为运算对象的记录的列数必须相同"><a href="#1-作为运算对象的记录的列数必须相同" class="headerlink" title="1 作为运算对象的记录的列数必须相同"></a>1 作为运算对象的记录的列数必须相同</h4><p>也就是 select 后的列数。</p>
<h4 id="2-作为运算对象的记录中列的类型必须一致"><a href="#2-作为运算对象的记录中列的类型必须一致" class="headerlink" title="2 作为运算对象的记录中列的类型必须一致"></a>2 作为运算对象的记录中列的类型必须一致</h4><p>相同位置上的列必须是同一数据类型。</p>
<h4 id="3-可以使用任何-select-语句，但-order-by-子句只能在最后使用一次。"><a href="#3-可以使用任何-select-语句，但-order-by-子句只能在最后使用一次。" class="headerlink" title="3 可以使用任何 select 语句，但 order by 子句只能在最后使用一次。"></a>3 可以使用任何 select 语句，但 order by 子句只能在最后使用一次。</h4><h3 id="包含重复行的集合运算-–-ALL-选项"><a href="#包含重复行的集合运算-–-ALL-选项" class="headerlink" title="包含重复行的集合运算 – ALL 选项"></a>包含重复行的集合运算 – ALL 选项</h3><p>在 UNION 后 加 ALL 就会保留重复行.</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product<br><span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><br><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product2;<br></code></pre></td></tr></table></figure>
<h3 id="选取表中公共部分-–-INTERSECT"><a href="#选取表中公共部分-–-INTERSECT" class="headerlink" title="选取表中公共部分 – INTERSECT"></a>选取表中公共部分 – INTERSECT</h3><p>选取两个记录集合中公共部分的交集(INTERSECT).</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product<br><span class="hljs-keyword">INTERSECT</span><br><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product2<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> product_id;<br></code></pre></td></tr></table></figure>
<p>保留重复项同样可以使用 <code>INTERSECT ALL</code>.</p>
<h3 id="记录的减法-–-EXCEPT"><a href="#记录的减法-–-EXCEPT" class="headerlink" title="记录的减法 – EXCEPT"></a>记录的减法 – EXCEPT</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product<br><span class="hljs-keyword">EXCEPT</span><br><span class="hljs-keyword">select</span> product_id, product_name<br>  <span class="hljs-keyword">from</span> Product2<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> product_id;<br></code></pre></td></tr></table></figure>
<p>结果只包含Product表中记录除去Product2表中记录之后的剩余部分。</p>
<h2 id="7-2-联结-以列为单位对表进行联结"><a href="#7-2-联结-以列为单位对表进行联结" class="headerlink" title="7-2 联结(以列为单位对表进行联结)"></a>7-2 联结(以列为单位对表进行联结)</h2><h3 id="什么是联结"><a href="#什么是联结" class="headerlink" title="什么是联结"></a>什么是联结</h3><p>UNION 和 INTERSECT 等会导致记录行数的增减。</p>
<p>联结(join)运算就是将其他表中的列添加过来。</p>
<h3 id="内联结-–-INNER-JOIN"><a href="#内联结-–-INNER-JOIN" class="headerlink" title="内联结 – INNER JOIN"></a>内联结 – INNER JOIN</h3><h4 id="内联结要点1-–-from-子句"><a href="#内联结要点1-–-from-子句" class="headerlink" title="内联结要点1 – from 子句"></a>内联结要点1 – from 子句</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">from</span> ShopProduct <span class="hljs-keyword">AS</span> SP <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Product <span class="hljs-keyword">AS</span> P<br></code></pre></td></tr></table></figure>
<h4 id="内联结要点2-–-on-子句"><a href="#内联结要点2-–-on-子句" class="headerlink" title="内联结要点2 – on 子句"></a>内联结要点2 – on 子句</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ON <span class="hljs-keyword">SP</span>.product_id <span class="hljs-operator">=</span> P.product_id<br></code></pre></td></tr></table></figure>
<p>起到 where 的作用.</p>
<p>ON 子句需书写到 from 和 where 之间。</p>
<h4 id="内联结要点3-–-select-子句"><a href="#内联结要点3-–-select-子句" class="headerlink" title="内联结要点3 – select 子句"></a>内联结要点3 – select 子句</h4><p>由于多表联结时容易发生混乱, 因此采用 “&lt;表的别名&gt;.&lt;列名&gt;” 的形式来指定列。</p>
<p>其实只有同时存在于两张表中的列必须使用这种形式。</p>
<h4 id="内联结和-where-子句结合使用"><a href="#内联结和-where-子句结合使用" class="headerlink" title="内联结和 where 子句结合使用"></a>内联结和 where 子句结合使用</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">select <span class="hljs-built_in">SP</span>.<span class="hljs-keyword">shop_id, </span><span class="hljs-built_in">SP</span>.<span class="hljs-keyword">shop_name, </span><span class="hljs-built_in">SP</span>.product_id, P.product_name, P.sale_price<br>  from <span class="hljs-keyword">ShopProduct </span>AS <span class="hljs-built_in">SP</span> INNER <span class="hljs-keyword">JOIN </span>Product AS P<br>    ON <span class="hljs-built_in">SP</span>.product_id = P.product_id<br>  where <span class="hljs-built_in">SP</span>.<span class="hljs-keyword">shop_id </span>= <span class="hljs-string">&#x27;000A&#x27;</span>;<br></code></pre></td></tr></table></figure>
<p>使用联结运算将满足相同规则的表联结起来，WHERE、GROUP BY、HAVING、ORDER BY等工具都可以正常使用。</p>
<p>这张表只在 select 语句执行期间存在，select 语句执行之后就会消失。如果希望继续使用这张表，需将其创建为视图.</p>
<h3 id="外联结-–-OUTER-JOIN"><a href="#外联结-–-OUTER-JOIN" class="headerlink" title="外联结 – OUTER JOIN"></a>外联结 – OUTER JOIN</h3><p>实现”从两张表中取出”的就是联结功能。</p>
<p>外联结也是通过 ON 子句的联结键将两张表进行联结，并从两张表中同时选取相应的列。</p>
<h4 id="外联结要点1-–-选取出单张表中全部的信息"><a href="#外联结要点1-–-选取出单张表中全部的信息" class="headerlink" title="外联结要点1 – 选取出单张表中全部的信息"></a>外联结要点1 – 选取出单张表中全部的信息</h4><p>内联结只能选取同时存在于两张表中的数据。</p>
<p>对于外联结，只要数据存在于某一张表中，就能够读取出来。</p>
<p>外联结名称的又来也跟 null 有关，即”结果中包含原表中不存在的信息”.</p>
<h4 id="外联结要点2-–-每张表都是主表吗"><a href="#外联结要点2-–-每张表都是主表吗" class="headerlink" title="外联结要点2 – 每张表都是主表吗?"></a>外联结要点2 – 每张表都是主表吗?</h4><p>最终的结果中会包含主表的所有数据。</p>
<p>指定主表的关键词是 <code>left</code> 和 <code>right</code>.</p>
<h4 id="3张以上的表的联结"><a href="#3张以上的表的联结" class="headerlink" title="3张以上的表的联结"></a>3张以上的表的联结</h4><p>原则上联结表的数量并没有限制。</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">from</span> ShopProduct <span class="hljs-keyword">as</span> SP <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Product <span class="hljs-keyword">as</span> P<br>  <span class="hljs-keyword">ON</span> SP.product_id = P.product_id<br>      <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> InventoryProduct <span class="hljs-keyword">as</span> IP<br>          <span class="hljs-keyword">ON</span> SP.product_id = IP.product_id<br></code></pre></td></tr></table></figure>
<h3 id="交叉联结-–-CROSS-JOIN-笛卡尔积"><a href="#交叉联结-–-CROSS-JOIN-笛卡尔积" class="headerlink" title="交叉联结 – CROSS JOIN(笛卡尔积)"></a>交叉联结 – CROSS JOIN(笛卡尔积)</h3><p>交叉联结是所有联结的基础.</p>
<p>交叉联结时无法使用内联结和外联结中所有的 ON 子句，这是因为交叉联结是对两张表中的全部记录进行交叉组合。</p>
<p>结果中的记录数通常是两张表中行数的乘积。</p>
<h3 id="联结的特定语法和过时语法"><a href="#联结的特定语法和过时语法" class="headerlink" title="联结的特定语法和过时语法"></a>联结的特定语法和过时语法</h3><h3 id="关系除法"><a href="#关系除法" class="headerlink" title="关系除法"></a>关系除法</h3><p>集合运算中的除法通常称为<mark>关系除法</mark>.</p>
<h1 id="第8章-SQL高级处理"><a href="#第8章-SQL高级处理" class="headerlink" title="第8章 SQL高级处理"></a>第8章 SQL高级处理</h1><h2 id="8-1-窗口函数"><a href="#8-1-窗口函数" class="headerlink" title="8-1 窗口函数"></a>8-1 窗口函数</h2><h3 id="什么是窗口函数"><a href="#什么是窗口函数" class="headerlink" title="什么是窗口函数"></a>什么是窗口函数</h3><p>窗口函数也称为OLAP函数(Online Analytical Processing).</p>
<h3 id="窗口函数的语法"><a href="#窗口函数的语法" class="headerlink" title="窗口函数的语法"></a>窗口函数的语法</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;窗口函数&gt; <span class="hljs-keyword">OVER</span> ([<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> &lt;列清单&gt;]<br>                        <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> &lt;排序用列清单&gt;)<br></code></pre></td></tr></table></figure>
<p>其中，<code>[]</code>中的内容可以省略。</p>
<h4 id="能够作为窗口函数使用的函数"><a href="#能够作为窗口函数使用的函数" class="headerlink" title="能够作为窗口函数使用的函数"></a>能够作为窗口函数使用的函数</h4><p>窗口函数大体分为两种:</p>
<ul>
<li>能够作为窗口函数的聚合函数(SUM、AVG、COUNT、MAX、MIN)</li>
<li>RANK、DENSE_RANK、ROW_NUMBER等专用窗口函数</li>
</ul>
<h3 id="语法的基本使用方法-–-使用-RANK-函数"><a href="#语法的基本使用方法-–-使用-RANK-函数" class="headerlink" title="语法的基本使用方法 – 使用 RANK 函数"></a>语法的基本使用方法 – 使用 RANK 函数</h3><p><mark>PARTITION BY</mark> 设定排序的对象范围。用于在横向上对表进行分组。</p>
<p><mark>ORDER BY</mark> 指定按照哪一列、何种顺序进行排序. 与 select 语句末尾的 order by 一样，可以通过关键词 ASC&#x2F;DESC 来指定升序和降序。决定纵向排序的规则。</p>
<p>通过 PARTITION BY 分组后的记录的集合可以称为窗口。窗口的意思为范围。</p>
<p>窗口函数兼具分组和排序两种功能。</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> product_name, product_type, sale_price,<br>       RANK() <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> product_type<br>                         <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> sale_price) <span class="hljs-keyword">AS</span> ranking<br>  <span class="hljs-keyword">FROM</span> Product;<br></code></pre></td></tr></table></figure>
<h3 id="无需指定-PARTITION-BY"><a href="#无需指定-PARTITION-BY" class="headerlink" title="无需指定 PARTITION BY"></a>无需指定 PARTITION BY</h3><p>不指定时将整个表作为一个大的窗口使用.</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> product_name, product_type, sale_price,<br>       RANK() <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> sale_price) <span class="hljs-keyword">AS</span> ranking <span class="hljs-keyword">FROM</span> Product;<br></code></pre></td></tr></table></figure>
<p>将表中数据分为多个部分时使用 PARTITION BY.</p>
<h3 id="专用窗口函数的种类"><a href="#专用窗口函数的种类" class="headerlink" title="专用窗口函数的种类"></a>专用窗口函数的种类</h3><p>代表性的专用窗口函数:</p>
<ul>
<li>RANK函数, 计算排序时，如果存在相同位次的记录，则会跳过之后的位次。如: 1位, 1位, 1位, 4位</li>
<li>DENDE_RANK, 不会跳过位次.如:1位, 1位, 1位, 2位</li>
<li>ROW_NUMBER函数，赋予唯一的连续位次. 如: 1位, 2位, 3位</li>
</ul>
<p>专用窗口函数无需参数，因此通常括号中都是空的。</p>
<h3 id="窗口函数的适用范围"><a href="#窗口函数的适用范围" class="headerlink" title="窗口函数的适用范围"></a>窗口函数的适用范围</h3><p>原则上窗口函数只能在 select 子句中使用。</p>
<p>在 select 子句之外”使用窗口函数是没有意义的”.</p>
<h3 id="作为窗口函数使用的聚合函数"><a href="#作为窗口函数使用的聚合函数" class="headerlink" title="作为窗口函数使用的聚合函数"></a>作为窗口函数使用的聚合函数</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span> product_id, product_name, sale_price, <br>      <span class="hljs-built_in">SUM</span> (sale_price) <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> product_id) <span class="hljs-keyword">AS</span> current_sum <span class="hljs-keyword">FROM</span> Product;<br></code></pre></td></tr></table></figure>
<p>形成 <mark>累计</mark> 的统计方法。</p>
<p>以”自身记录(当前记录)”作为基准进行统计，就是将聚合函数作为窗口函数使用的最大特征。</p>
<h3 id="计算移动平均"><a href="#计算移动平均" class="headerlink" title="计算移动平均"></a>计算移动平均</h3><p>在窗口中指定更加详细的汇总范围的备选功能，即<mark>框架</mark>.</p>
<p>也就是可以指定那几行进行汇总。</p>
<h4 id="指定框架"><a href="#指定框架" class="headerlink" title="指定框架"></a>指定框架</h4><p>使用 ROW 和 PRECEDING 两个关键词，将框架指定为 “截止到之前~行”.</p>
<p>如”ROW 2 PRECEDING”:</p>
<ul>
<li>自身(当前记录)</li>
<li>之前1行的记录</li>
<li>之前2行的记录<br>这样的统计方法称为<mark>移动平均</mark>(moving average).</li>
</ul>
<p>关键词FOLLOWING指”截止到之后~行”.</p>
<p>主要是要找到当前行。</p>
<h4 id="将当前记录的前后行作为汇总对象"><a href="#将当前记录的前后行作为汇总对象" class="headerlink" title="将当前记录的前后行作为汇总对象"></a>将当前记录的前后行作为汇总对象</h4><p>同时使用 PRECEDING 和 FOLLOWING.</p>
<h3 id="两个-ORDER-BY"><a href="#两个-ORDER-BY" class="headerlink" title="两个 ORDER BY"></a>两个 ORDER BY</h3><p>使用窗口函数时必须要在 OVER 子句中使用 ORDER BY. 但其只是用来决定窗口函数按照什么样的顺序进行计算。</p>
<p>在 select 语句的最后使用 order by 子句保证排序记录。</p>
<h2 id="8-2-GROUPING-运算符"><a href="#8-2-GROUPING-运算符" class="headerlink" title="8-2 GROUPING 运算符"></a>8-2 GROUPING 运算符</h2><h3 id="同时得到合计行"><a href="#同时得到合计行" class="headerlink" title="同时得到合计行"></a>同时得到合计行</h3><h3 id="ROLLUP-–-同时得出合计和小计"><a href="#ROLLUP-–-同时得出合计和小计" class="headerlink" title="ROLLUP – 同时得出合计和小计"></a>ROLLUP – 同时得出合计和小计</h3><p>GROUPING 运算符包含以下3种:</p>
<ul>
<li>ROLLUP</li>
<li>CUBE</li>
<li>GROUPING SETS</li>
</ul>
<h4 id="ROLLUP-的使用方法"><a href="#ROLLUP-的使用方法" class="headerlink" title="ROLLUP 的使用方法"></a>ROLLUP 的使用方法</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> product_type, SUM(sale_price) <span class="hljs-keyword">AS</span> sum_price<br>    <span class="hljs-keyword">FROM</span> Product<br>  <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">ROLLUP</span>(product_type);<br></code></pre></td></tr></table></figure>

<p>GROUP BY() 被称为<mark>超级分组记录(super group row)</mark>.</p>
<p>超级分组记录默认使用 NULL 作为聚合键。</p>
<h4 id="将”登记日期”添加到聚合键中"><a href="#将”登记日期”添加到聚合键中" class="headerlink" title="将”登记日期”添加到聚合键中"></a>将”登记日期”添加到聚合键中</h4><h3 id="GROUPING函数-–-让NULL更加容易分辨"><a href="#GROUPING函数-–-让NULL更加容易分辨" class="headerlink" title="GROUPING函数 – 让NULL更加容易分辨"></a>GROUPING函数 – 让NULL更加容易分辨</h3><p><code>GROUPING</code>函数 – 用来判断超级分组记录的 NULL 的特定函数。</p>
<p>在其参数列的值为超级分组记录所产生的 NULL 时返回1，其他情况返回0.</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> GROUOING(product_type) <span class="hljs-keyword">AS</span> product_type<br>        GROUPING(regist_date) <span class="hljs-keyword">AS</span> regist_date, SUM(sale_price) <span class="hljs-keyword">AS</span> sum_price<br>        <span class="hljs-keyword">FROM</span> Product<br>      <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">ROLLUP</span>(product_type, regist_date);<br></code></pre></td></tr></table></figure>
<h3 id="CUBE-–-用数据来搭积木"><a href="#CUBE-–-用数据来搭积木" class="headerlink" title="CUBE – 用数据来搭积木"></a>CUBE – 用数据来搭积木</h3><h1 id="第9章-通过应用程序连接数据库"><a href="#第9章-通过应用程序连接数据库" class="headerlink" title="第9章 通过应用程序连接数据库"></a>第9章 通过应用程序连接数据库</h1><h2 id="9-1-数据库世界和应用程序世界的连接"><a href="#9-1-数据库世界和应用程序世界的连接" class="headerlink" title="9-1 数据库世界和应用程序世界的连接"></a>9-1 数据库世界和应用程序世界的连接</h2><h3 id="数据库和应用程序之间的关系"><a href="#数据库和应用程序之间的关系" class="headerlink" title="数据库和应用程序之间的关系"></a>数据库和应用程序之间的关系</h3><p>系统 &#x3D; 应用 + 数据库</p>
<h3 id="驱动-–-两个世界之间的桥梁"><a href="#驱动-–-两个世界之间的桥梁" class="headerlink" title="驱动 – 两个世界之间的桥梁"></a>驱动 – 两个世界之间的桥梁</h3><p>驱动，实际上就是连接的意思。</p>
<p>驱动，用于解决更换编程语言或者DBMS而导致从头开始修改应用和SQL语句。</p>
<p>驱动是用来连接应用和数据库的非常小的特殊程序。</p>
<h3 id="驱动的种类"><a href="#驱动的种类" class="headerlink" title="驱动的种类"></a>驱动的种类</h3><p>DBMS 和编程语言的不同，使用的驱动程序也不一样。</p>
<p>现在广泛使用的驱动标准主要有 ODBC(Open DataBase Connectivity) 和 JDBC(Java Data Base Connectivity).</p>
<p><a target="_blank" rel="noopener" href="https://jdbc.postgresql.org/download.html">下载 Driver 的网站</a></p>
<p><code>.jar</code> 扩展名是 Java 的可执行文件的扩展名。</p>
<h2 id="9-2-Java-基础知识"><a href="#9-2-Java-基础知识" class="headerlink" title="9-2  Java 基础知识"></a>9-2  Java 基础知识</h2><p><code>src</code> 是 <code>源代码</code>(source) 的简称。</p>
<p>SQL 中的字符串是使用单引号(‘)括起来的。</p>
<h3 id="编译和程序执行"><a href="#编译和程序执行" class="headerlink" title="编译和程序执行"></a>编译和程序执行</h3><p>使用 javac 进行编译:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">javac</span> <span class="hljs-regexp">*.java</span><br></code></pre></td></tr></table></figure>
<p>编译成功后会生成<code>.class</code>文件，其为可执行文件，称为”类文件”.</p>
<h4 id="使用-java-命令执行程序"><a href="#使用-java-命令执行程序" class="headerlink" title="使用 java 命令执行程序"></a>使用 java 命令执行程序</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">java <span class="hljs-tag">&lt;<span class="hljs-name">类名</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h3><h4 id="大小写错误"><a href="#大小写错误" class="headerlink" title="大小写错误"></a>大小写错误</h4><p>Java 区分大小写。</p>
<h4 id="使用全角空格"><a href="#使用全角空格" class="headerlink" title="使用全角空格"></a>使用全角空格</h4><p>源代码中不能使用全角空格。</p>
<h4 id="源文件的文件名和类名不一致"><a href="#源文件的文件名和类名不一致" class="headerlink" title="源文件的文件名和类名不一致"></a>源文件的文件名和类名不一致</h4><p>文件名必须和源代码第1行的类名一致。</p>
<h4 id="命令名和文件名错误"><a href="#命令名和文件名错误" class="headerlink" title="命令名和文件名错误"></a>命令名和文件名错误</h4><h2 id="9-3-通过-Java-联结-PostgreSQL"><a href="#9-3-通过-Java-联结-PostgreSQL" class="headerlink" title="9-3 通过 Java 联结 PostgreSQL"></a>9-3 通过 Java 联结 PostgreSQL</h2><h3 id="执行-SQL-语句的-Java-程序"><a href="#执行-SQL-语句的-Java-程序" class="headerlink" title="执行 SQL 语句的 Java 程序"></a>执行 SQL 语句的 Java 程序</h3><h3 id="Java-是如何从数据库中获取数据的"><a href="#Java-是如何从数据库中获取数据的" class="headerlink" title="Java 是如何从数据库中获取数据的"></a>Java 是如何从数据库中获取数据的</h3>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/SQL/" class="category-chain-item">SQL</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>SQL基础教程 Notes</div>
      <div>http://example.com/2022/08/10/SQL基础教程-Notes/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年8月10日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/08/14/Ubuntu-22-04-%E6%97%A0%E6%B3%95%E8%B0%83%E8%8A%82%E4%BA%AE%E5%BA%A6/" title="Ubuntu 22.04 无法调节亮度">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Ubuntu 22.04 无法调节亮度</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/08/07/%E5%9B%BE%E7%81%B5%E6%9C%BA/" title="图灵机">
                        <span class="hidden-mobile">图灵机</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
