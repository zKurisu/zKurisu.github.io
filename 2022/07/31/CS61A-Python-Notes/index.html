

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="http:&#x2F;&#x2F;composingprograms.com&#x2F;pages&#x2F;13-defining-new-functions.html Chapter 1: Building Abstractions with Functions1.1 Getting Started1.1.4 First ExampleStatement describe actions. statement are not eva">
<meta property="og:type" content="article">
<meta property="og:title" content="CS61A Python Notes">
<meta property="og:url" content="http://example.com/2022/07/31/CS61A-Python-Notes/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="http:&#x2F;&#x2F;composingprograms.com&#x2F;pages&#x2F;13-defining-new-functions.html Chapter 1: Building Abstractions with Functions1.1 Getting Started1.1.4 First ExampleStatement describe actions. statement are not eva">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-07-31T01:35:17.000Z">
<meta property="article:modified_time" content="2022-09-04T09:19:36.029Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>CS61A Python Notes - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Jie</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/SteinsGate_all.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="CS61A Python Notes"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-07-31 09:35" pubdate>
          2022年7月31日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          28k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          232 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">CS61A Python Notes</h1>
            
            
              <div class="markdown-body">
                
                <p><a href="textbook">http://composingprograms.com/pages/13-defining-new-functions.html</a></p>
<h1 id="Chapter-1-Building-Abstractions-with-Functions"><a href="#Chapter-1-Building-Abstractions-with-Functions" class="headerlink" title="Chapter 1: Building Abstractions with Functions"></a>Chapter 1: Building Abstractions with Functions</h1><h2 id="1-1-Getting-Started"><a href="#1-1-Getting-Started" class="headerlink" title="1.1 Getting Started"></a>1.1 Getting Started</h2><h3 id="1-1-4-First-Example"><a href="#1-1-4-First-Example" class="headerlink" title="1.1.4 First Example"></a>1.1.4 First Example</h3><p><mark>Statement</mark> describe actions. statement are not evaluated but executed.</p>
<p><mark>Expression</mark> describe computations.<br>All expressions can use function call notation.</p>
<h2 id="1-2-Elements-of-Programming"><a href="#1-2-Elements-of-Programming" class="headerlink" title="1.2 Elements of Programming"></a>1.2 Elements of Programming</h2><p>Data is stuff that we want to manipulate, and functions describe the rules for manipulating the data.</p>
<h3 id="1-2-3-Importing-Library-Functions"><a href="#1-2-3-Importing-Library-Functions" class="headerlink" title="1.2.3 Importing Library Functions"></a>1.2.3 Importing Library Functions</h3><p>Import from the <code>math</code> module:</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> sqrt </span><br></code></pre></td></tr></table></figure>
<p>The interpreter must maintain some sort of memory that keeps track of the names, values, and bindings. This memory called a <mark>environment</mark>.</p>
<p>We can use assignment statements to give new names to existing functions.</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">f</span> <span class="hljs-operator">=</span> max<br></code></pre></td></tr></table></figure>
<p>Assining multiple values to multiple names in a single statement:</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-built_in">area</span>, circumference = <span class="hljs-literal">pi</span> * radius * radius, <span class="hljs-number">2</span> * <span class="hljs-literal">pi</span> * radius<br></code></pre></td></tr></table></figure>
<h3 id="1-2-5-Evaluating-Nested-Expressions"><a href="#1-2-5-Evaluating-Nested-Expressions" class="headerlink" title="1.2.5 Evaluating Nested Expressions"></a>1.2.5 Evaluating Nested Expressions</h3><p>To evaluate a call expression, Python will do the following:<br>    1. Evaluate the operator and operand subexpressions, then<br>    2. Apply the function that is the value of the operator subexpression to the arguments that are the values of the operand subexpressions.</p>
<h3 id="1-2-6-The-Non-Pure-Print-Function"><a href="#1-2-6-The-Non-Pure-Print-Function" class="headerlink" title="1.2.6 The Non-Pure Print Function"></a>1.2.6 The Non-Pure Print Function</h3><p>Distinguish between two types of functions:</p>
<p><mark>Pure functions</mark>: Functions have some input(their arguments) and reutrn some output(the result of applying them).</p>
<p><mark>Non-pure functions</mark>: make some change to the state of the interpreter or computer, a common side effect is to generate additional output beyond the return value.</p>
<p><code>None</code> is a special Python value that represents nothing.</p>
<p>Be careful with <code>print</code>. The fact that it returns <code>None</code> means that it should not be the expression in an assignment statement.</p>
<h2 id="1-3-Defining-New-Functions"><a href="#1-3-Defining-New-Functions" class="headerlink" title="1.3 Defining New Functions"></a>1.3 Defining New Functions</h2><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">&gt;&gt;&gt; def square(<span class="hljs-keyword">x</span>):<br>        return <span class="hljs-keyword">mul</span>(<span class="hljs-keyword">x</span><span class="hljs-punctuation">,</span><span class="hljs-keyword">x</span>)<br></code></pre></td></tr></table></figure>
<p>The <code>x</code> in this definitions is called a “formal parameter”</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">def &lt;name&gt;(&lt;formal parameters&gt;):<br>    <span class="hljs-keyword">return</span> &lt;<span class="hljs-keyword">return</span> expression&gt;<br></code></pre></td></tr></table></figure>
<h3 id="1-3-1-Environments"><a href="#1-3-1-Environments" class="headerlink" title="1.3.1 Environments"></a>1.3.1 Environments</h3><p>An <mark>environments</mark> in which an expression is evaluated consists of a sequence of frames.</p>
<p>Each <mark>frame</mark> contains bindings, each of which associates a name with its corresponding value.<br>There is a global environment.</p>
<p>The name appearing in the function is called the <code>intrinsic name</code>.<br>The name in a frame is a <code>bound name</code>.<br>Different names may refer to the same function, but that function itself has only one intrinsic name.</p>
<p>A description of the formal parameters of a function is called the <mark>function’s signature</mark>.</p>
<h3 id="1-3-2-Calling-User-Defined-Functions"><a href="#1-3-2-Calling-User-Defined-Functions" class="headerlink" title="1.3.2 Calling User-Defined Functions"></a>1.3.2 Calling User-Defined Functions</h3><p>Applying a user-defined function introduces a second <mark>local frame</mark>, which is only accessible to that function.</p>
<p><mark>Name Evaluation</mark>. A name evaluates to the value bound to that name in the earliest frame of the current environment in which that name is found.</p>
<p>Names are bound to values, which are distributed across many independent local frames, along with a single global frame that contains shared names. A new local frame is introduced every time a function is called.</p>
<h3 id="1-3-4-Local-Names"><a href="#1-3-4-Local-Names" class="headerlink" title="1.3.4 Local Names"></a>1.3.4 Local Names</h3><h3 id="1-3-5-Choosing-Names"><a href="#1-3-5-Choosing-Names" class="headerlink" title="1.3.5 Choosing Names"></a>1.3.5 Choosing Names</h3><h3 id="1-3-6-Functions-as-Abstractions"><a href="#1-3-6-Functions-as-Abstractions" class="headerlink" title="1.3.6 Functions as Abstractions"></a>1.3.6 Functions as Abstractions</h3><p>The three core attributes of a function: The <mark>domain</mark> of a function is the set of arguments it can take. The <mark>range</mark> of a function is the set of value it can return. The <mark>indent</mark> of a function is the relationship it computes between inputs and output.</p>
<h3 id="1-3-7-Operators"><a href="#1-3-7-Operators" class="headerlink" title="1.3.7 Operators"></a>1.3.7 Operators</h3><p>The <code>//</code> operator, rounds the result down to an integer.</p>
<p>The operator can be seen as shorthand for function, like: <code>+</code> is the shorthand of <code>add()</code>.</p>
<h2 id="1-4-Designing-Function"><a href="#1-4-Designing-Function" class="headerlink" title="1.4 Designing Function"></a>1.4 Designing Function</h2><p>The qualities of good functions all reinforce the idea that functions are abstractions.<br>    - Each function should have exactly one job<br>    - Don’t repeat yourself is a central tenet of software engineering<br>    - Functions should be defined generally</p>
<h3 id="1-4-1-Documentation"><a href="#1-4-1-Documentation" class="headerlink" title="1.4.1 Documentation"></a>1.4.1 Documentation</h3><p>Dostring, using triple quoted. The first line describes the job of the function in one line. The following lines can describe arguments and clarify the behavior of the function. 这是制作<code>help</code>页，when you call <code>help</code> with the name of a function as an argument, you see its docstring.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">pressure</span>(<span class="hljs-params">v, t, n</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;Compute the pressure in pascals of an ideal gas.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Applies the ideal gas law: http://en.wikipedia.org/wiki/Ideal_gas_law</span><br><span class="hljs-string"></span><br><span class="hljs-string">        v -- volume of gas, in cubic meters</span><br><span class="hljs-string">        t -- absolute temperature in degrees kelvin</span><br><span class="hljs-string">        n -- particles of gas</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        k = <span class="hljs-number">1.38e-23</span>  <span class="hljs-comment"># Boltzmann&#x27;s constant</span><br>        <span class="hljs-keyword">return</span> n * k * t / v<br></code></pre></td></tr></table></figure>
<p><mark>Comments</mark> use <code>#</code>.</p>
<h3 id="1-4-2-Default-Argument-Values"><a href="#1-4-2-Default-Argument-Values" class="headerlink" title="1.4.2 Default Argument Values"></a>1.4.2 Default Argument Values</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">def</span> pressure(v, t, n=<span class="hljs-number">6</span>.<span class="hljs-number">022</span>e23)<br></code></pre></td></tr></table></figure>
<h2 id="1-5-Control"><a href="#1-5-Control" class="headerlink" title="1.5 Control"></a>1.5 Control</h2><p>Python code is a sequence of statements.</p>
<p><mark>Practical Guidance</mark><br>When indenting a suite, all lines must be indented the same amount and in the same way(use spaces, not tabs). Any variation in indentation will cause an error.</p>
<h3 id="1-5-3-Defining-Functions-II-Local-Assignment"><a href="#1-5-3-Defining-Functions-II-Local-Assignment" class="headerlink" title="1.5.3 Defining Functions II: Local Assignment"></a>1.5.3 Defining Functions II: Local Assignment</h3><p>The process of function application terminates whenever the first <code>return</code> statement is excuted.</p>
<h3 id="1-5-4-Conditional-Statements"><a href="#1-5-4-Conditional-Statements" class="headerlink" title="1.5.4 Conditional Statements"></a>1.5.4 Conditional Statements</h3><p><mark>Conditional statements</mark></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">if</span> <span class="hljs-symbol">&lt;expression&gt;</span>:<br>     <span class="hljs-symbol">&lt;suite&gt;</span><br>elif <span class="hljs-symbol">&lt;expression&gt;</span>:<br>     <span class="hljs-symbol">&lt;suite&gt;</span><br><span class="hljs-keyword">else</span>:<br>     <span class="hljs-symbol">&lt;suite&gt;</span>]<br></code></pre></td></tr></table></figure>
<p>Python includes several false value, including 0, None, and the boolean value false.</p>
<p>The built-in comparison operations: &lt;, &gt;, &gt;&#x3D;, &lt;&#x3D;, &#x3D;&#x3D;, !&#x3D;.</p>
<p>Three basic logical operators are also built into Python: and, or, not.</p>
<p>Functions that perform comparisons and return boolean values typically begin with <code>is</code>.</p>
<h3 id="1-5-5-Iteration"><a href="#1-5-5-Iteration" class="headerlink" title="1.5.5 Iteration"></a>1.5.5 Iteration</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">while</span> <span class="hljs-symbol">&lt;expression&gt;</span>:<br>  <span class="hljs-symbol">&lt;suite&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="1-5-6-Testing"><a href="#1-5-6-Testing" class="headerlink" title="1.5.6 Testing"></a>1.5.6 Testing</h3><p><mark>Assertions</mark>. Programmers use <code>assert</code> statements to verify expectations, such as the output of a function being tested.</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">assert</span> fib(<span class="hljs-number">8</span>) == <span class="hljs-number">13</span>, &#x27;The <span class="hljs-number">8</span>th Fibonacci number should be <span class="hljs-number">13</span>&#x27;<br></code></pre></td></tr></table></figure>
<p>如果为 false 则打印后面的 expression.</p>
<p><code>doctest</code> module. 利用 docstring 来测试.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sum_naturals</span>(<span class="hljs-params">n</span>):<br>      <span class="hljs-string">&quot;&quot;&quot;Return the sum of the first n natural numbers.</span><br><span class="hljs-string"></span><br><span class="hljs-string">      &gt;&gt;&gt; sum_naturals(10)</span><br><span class="hljs-string">      55</span><br><span class="hljs-string">      &gt;&gt;&gt; sum_naturals(100)</span><br><span class="hljs-string">      5050</span><br><span class="hljs-string">      &quot;&quot;&quot;</span><br>      total, k = <span class="hljs-number">0</span>, <span class="hljs-number">1</span><br>      <span class="hljs-keyword">while</span> k &lt;= n:<br>          total, k = total + k, k + <span class="hljs-number">1</span><br>      <span class="hljs-keyword">return</span> total<br></code></pre></td></tr></table></figure>
<p>Starting Python with the doctest command line option:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python3</span> -<span class="hljs-keyword">m</span> doctest <span class="hljs-symbol">&lt;python_source_file&gt;</span><br></code></pre></td></tr></table></figure>
<h2 id="1-6-Higher-Order-Functions"><a href="#1-6-Higher-Order-Functions" class="headerlink" title="1.6 Higher-Order Functions"></a>1.6 Higher-Order Functions</h2><p>Functions that manipulate functions are called higher-order functions.</p>
<p>Frames which are no longer needed are removed to save space.</p>
<p>在函数被调用时才会创建 local frame.</p>
<h3 id="1-6-1-Functions-as-Arguments"><a href="#1-6-1-Functions-as-Arguments" class="headerlink" title="1.6.1 Functions as Arguments"></a>1.6.1 Functions as Arguments</h3><h3 id="1-6-2-Functions-as-General-Methods"><a href="#1-6-2-Functions-as-General-Methods" class="headerlink" title="1.6.2 Functions as General Methods"></a>1.6.2 Functions as General Methods</h3><h3 id="1-6-3-Defining-Functions-III-Nested-Definitions"><a href="#1-6-3-Defining-Functions-III-Nested-Definitions" class="headerlink" title="1.6.3 Defining Functions III: Nested Definitions"></a>1.6.3 Defining Functions III: Nested Definitions</h3><p>To place function definitions inside the body of other definitions:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sqrt</span>(<span class="hljs-params">a</span>):<br>       <span class="hljs-keyword">def</span> <span class="hljs-title function_">sqrt_update</span>(<span class="hljs-params">x</span>):<br>           <span class="hljs-keyword">return</span> average(x, a/x)<br>       <span class="hljs-keyword">def</span> <span class="hljs-title function_">sqrt_close</span>(<span class="hljs-params">x</span>):<br>           <span class="hljs-keyword">return</span> approx_eq(x * x, a)<br>       <span class="hljs-keyword">return</span> improve(sqrt_update, sqrt_close)<br></code></pre></td></tr></table></figure>
<p><mark>Lexical scope</mark><br>A discipline of sharing names among nested definitions. The inner functions have access to the names in the environment where they are defined.</p>
<p>Two extensions to the environment model:<br>    - Each user-defined function has a parent environment: the environment in which it was defined<br>    - When a user-defined function is called, its local frame extends its parent environment.</p>
<h3 id="1-6-4-Functions-as-Returned-Values"><a href="#1-6-4-Functions-as-Returned-Values" class="headerlink" title="1.6.4 Functions as Returned Values"></a>1.6.4 Functions as Returned Values</h3><h3 id="1-6-5-Example-Newton’s-Method"><a href="#1-6-5-Example-Newton’s-Method" class="headerlink" title="1.6.5 Example: Newton’s Method"></a>1.6.5 Example: Newton’s Method</h3><h3 id="1-6-6-Currying"><a href="#1-6-6-Currying" class="headerlink" title="1.6.6 Currying"></a>1.6.6 Currying</h3><p>We can use higher-order function to convert a function that takes multiple arguments into a chain of functions that each take a single argument.</p>
<p>Currying is a transformation, like:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">curried_pow</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">h</span>(<span class="hljs-params">y</span>):<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">pow</span>(x, y)<br>        <span class="hljs-keyword">return</span> h<br><br><span class="hljs-meta">&gt;&gt;&gt; </span>curried_pow(<span class="hljs-number">2</span>)(<span class="hljs-number">3</span>)<br><span class="hljs-number">8</span><br><br></code></pre></td></tr></table></figure>
<p><mark>Extended Environments</mark><br>An environment can consist of an arbitrarily long chain of frames, which always concludes with the global frame.</p>
<h3 id="1-6-7-Lambda-Expressions"><a href="#1-6-7-Lambda-Expressions" class="headerlink" title="1.6.7 Lambda Expressions"></a>1.6.7 Lambda Expressions</h3><p>匿名函数. 为了更简洁。</p>
<p>A lambda expression evaluates to a function that has a single return expression as its body. Assignment and control statements are not allowed.</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">lambda</span>            <span class="hljs-variable">x</span>            :          <span class="hljs-function"><span class="hljs-title">f</span>(<span class="hljs-title">g</span>(<span class="hljs-variable">x</span>))</span><br><span class="hljs-string">&quot;A function that    takes x    and returns     f(g(x))&quot;</span><br></code></pre></td></tr></table></figure>
<h3 id="1-6-8-Abstractions-and-First-Class-Functions"><a href="#1-6-8-Abstractions-and-First-Class-Functions" class="headerlink" title="1.6.8 Abstractions and First-Class Functions"></a>1.6.8 Abstractions and First-Class Functions</h3><h3 id="1-6-9-Function-Decorators"><a href="#1-6-9-Function-Decorators" class="headerlink" title="1.6.9 Function Decorators"></a>1.6.9 Function Decorators</h3><p>The decorator symbol <code>@</code>.</p>
<p><code>@</code> 后面跟一个 expression, this expression is evaluated first, the <code>def</code> statement second, and finally the result of evaluating the decorator expression is applied to the newly defined function, and the result if bound to the name in the <code>def</code> statement.</p>
<p>作用:</p>
<ol>
<li>使函数的功能得到补充，而同时不用修改函数本身的代码</li>
<li>增加函数执行前、后的行为，而不需对调用函数的代码做任何改变。</li>
</ol>
<p>感觉就是在当前函数的基础上添加功能。减少重复。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">trace</span>(<span class="hljs-params">fn</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">x</span>):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;-&gt; &#x27;</span>, fn, <span class="hljs-string">&#x27;(&#x27;</span>, x, <span class="hljs-string">&#x27;)&#x27;</span>)<br>            <span class="hljs-keyword">return</span> fn(x)<br>        <span class="hljs-keyword">return</span> wrapped<br><br><span class="hljs-meta">&gt;&gt;&gt; </span>@trace<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">triple</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">3</span> * x<br></code></pre></td></tr></table></figure>
<p>在调用<code>triple</code>时就会同时执行<code>trace</code>和<code>triple</code>中的内容。</p>
<h2 id="1-7-Recursive-Functions"><a href="#1-7-Recursive-Functions" class="headerlink" title="1.7 Recursive Functions"></a>1.7 Recursive Functions</h2><p>The operators <code>%</code> and <code>//</code> can be used to separate a number into two parts: its last digit and all but its last digit.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">18117</span> % <span class="hljs-number">10</span></span><br>7<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">18117</span> // <span class="hljs-number">10</span></span><br>1811<br></code></pre></td></tr></table></figure>
<p>The process of excuting the body of a recursive function may in turn require applying that function again.</p>
<h3 id="1-7-1-The-Anatomy-of-Recursive-Functions"><a href="#1-7-1-The-Anatomy-of-Recursive-Functions" class="headerlink" title="1.7.1 The Anatomy of Recursive Functions"></a>1.7.1 The Anatomy of Recursive Functions</h3><p>A common pattern: the body begins with a base case, a conditional statement that define the behavior of the function for the inputs that are simplest to process.</p>
<h3 id="1-7-2-Mutual-Recursion"><a href="#1-7-2-Mutual-Recursion" class="headerlink" title="1.7.2 Mutual Recursion"></a>1.7.2 Mutual Recursion</h3><p>A recursive procedure is divided among two functions that call each other.</p>
<h3 id="1-7-3-Printing-in-Recursive-Functions"><a href="#1-7-3-Printing-in-Recursive-Functions" class="headerlink" title="1.7.3 Printing in Recursive Functions"></a>1.7.3 Printing in Recursive Functions</h3><h3 id="1-7-4-Tree-Recursion"><a href="#1-7-4-Tree-Recursion" class="headerlink" title="1.7.4 Tree Recursion"></a>1.7.4 Tree Recursion</h3><p>A function with multiple recursive calls is said to be <mark>tree recursive</mark> because each call branches into multiple smaller calls, each of which branches into yes smaller calls, just as the branches of a tree become smaller but more numerous as they extend from the trunk.</p>
<h3 id="1-7-5-Example-Partitions"><a href="#1-7-5-Example-Partitions" class="headerlink" title="1.7.5 Example: Partitions"></a>1.7.5 Example: Partitions</h3><h2 id="Project-1-The-Game-of-Hog"><a href="#Project-1-The-Game-of-Hog" class="headerlink" title="Project 1: The Game of Hog"></a>Project 1: The Game of Hog</h2><h1 id="Champter-2-Building-Abstractions-with-Data"><a href="#Champter-2-Building-Abstractions-with-Data" class="headerlink" title="Champter 2: Building Abstractions with Data"></a>Champter 2: Building Abstractions with Data</h1><h2 id="2-1-Introduction"><a href="#2-1-Introduction" class="headerlink" title="2.1 Introduction"></a>2.1 Introduction</h2><h3 id="2-1-1-Native-Data-Types"><a href="#2-1-1-Native-Data-Types" class="headerlink" title="2.1.1 Native Data Types"></a>2.1.1 Native Data Types</h3><p>The built-in <code>type</code> function allows us inspect the class of any value.</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell">&gt;&gt;&gt; <span class="hljs-class"><span class="hljs-keyword">type</span>(2)</span><br>&lt;<span class="hljs-keyword">class</span> &#x27;int&#x27;&gt;<br></code></pre></td></tr></table></figure>
<p>Native data types have the following properties:</p>
<ol>
<li>There are expressions that evaluate to value of native types, called <code>literals</code></li>
<li>There are built-in functions and operators to manipulate values of native types.</li>
</ol>
<p>Python has three native numeric types: integers(int), real numbers(float), and complex numbers(complex).</p>
<p><code>int</code> objects represent integers exactly, without any approximation or limits on their size.</p>
<p><code>float</code> objects have minimum and maximum values.</p>
<h2 id="2-2-Data-Abstraction"><a href="#2-2-Data-Abstraction" class="headerlink" title="2.2 Data Abstraction"></a>2.2 Data Abstraction</h2><p>Data abstraction isolates how a compound data value is used from the details of how it is constructed.</p>
<h3 id="2-2-1-Example-Rational-Numbers"><a href="#2-2-1-Example-Rational-Numbers" class="headerlink" title="2.2.1 Example: Rational Numbers"></a>2.2.1 Example: Rational Numbers</h3><p>Dividing integers produces a <code>float</code> approximation, losing the exact precision of integers.</p>
<p>A powerful strategy for designing programs: wishful thinking.</p>
<h3 id="2-2-2-Pairs"><a href="#2-2-2-Pairs" class="headerlink" title="2.2.2 Pairs"></a>2.2.2 Pairs</h3><p>Python provides a compound structure called a <code>list</code>.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">&gt;&gt;&gt; <span class="hljs-selector-attr">[10, 20]</span><br><span class="hljs-selector-attr">[10, 20]</span><br></code></pre></td></tr></table></figure>
<p>Two ways to 使用 the elements in <code>list</code>:</p>
<ol>
<li>assignment, 赋值</li>
<li>element selection operator, 使用 index</li>
</ol>
<p>The equivalent function for element selection operator is called <code>getitem</code>.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">from</span> operator <span class="hljs-keyword">import</span> getitem</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">getitem(pair, <span class="hljs-number">0</span>)</span><br>10<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">getitem(pair, <span class="hljs-number">1</span>)</span><br>20<br></code></pre></td></tr></table></figure>
<h3 id="2-2-3-Abstraction-Barriers"><a href="#2-2-3-Abstraction-Barriers" class="headerlink" title="2.2.3 Abstraction Barriers"></a>2.2.3 Abstraction Barriers</h3><p>These functions are called by a higher level and implemented using a lower level of abstraction.</p>
<p>The fewer functions that depend on a particular representation, the fewer changes are required when one wants to change that representation. 也就是用函数去构建另一个函数.</p>
<h3 id="2-2-4-The-Properties-of-Data"><a href="#2-2-4-The-Properties-of-Data" class="headerlink" title="2.2.4 The Properties of Data"></a>2.2.4 The Properties of Data</h3><h2 id="2-3-Sequences"><a href="#2-3-Sequences" class="headerlink" title="2.3 Sequences"></a>2.3 Sequences</h2><p>Sequences is a collection of behavious that are shared among several different types of data.</p>
<ul>
<li>Length</li>
<li>Element selection</li>
</ul>
<h3 id="2-3-1-Lists"><a href="#2-3-1-Lists" class="headerlink" title="2.3.1 Lists"></a>2.3.1 Lists</h3><p>A list value is a sequence that can have arbitrary length.</p>
<p>The built-in <code>len</code> function returns the length of a sequence.</p>
<p>Lists can be added together and multiplied by integer:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">&gt;&gt;&gt; <span class="hljs-selector-attr">[2, 7]</span> + digits * <span class="hljs-number">2</span><br><span class="hljs-selector-attr">[2, 7, 1, 8, 2, 8, 1, 8, 2, 8]</span><br></code></pre></td></tr></table></figure>
<h3 id="2-3-2-Sequence-Iteration"><a href="#2-3-2-Sequence-Iteration" class="headerlink" title="2.3.2 Sequence Iteration"></a>2.3.2 Sequence Iteration</h3><p>The <code>for</code> statement:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">count</span>(<span class="hljs-params">s, value</span>):<br>      <span class="hljs-string">&quot;&quot;&quot;Count the number of occurrences of value in sequence s.&quot;&quot;&quot;</span><br>      total = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">for</span> elem <span class="hljs-keyword">in</span> s:<br>          <span class="hljs-keyword">if</span> elem == value:<br>              total = total + <span class="hljs-number">1</span><br>      <span class="hljs-keyword">return</span> total<br><br></code></pre></td></tr></table></figure>
<p>The <name> will be bound to the last element of the sequence after the <code>for</code> statement is executed.</p>
<p>The pattern of binding multiple names to multiple values in a fixed-length sequence is called <code>sequence unpacking</code>:</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm">&gt;&gt;&gt; for <span class="hljs-keyword">x</span><span class="hljs-punctuation">,</span> y in pairs:<br>      if <span class="hljs-keyword">x</span> <span class="hljs-operator">=</span><span class="hljs-operator">=</span> y:<br>          same_count <span class="hljs-operator">=</span> same_count + <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<p>A <mark>range</mark> is another built-in type of sequence in Python, which represents a range of integers.</p>
<p>Ranges are created with <code>range</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment"># Includes 1, but not 10</span><br><span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure>
<p>Calling the <code>list</code> constructor on a range evaluates to a list:</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>, <span class="hljs-number">8</span>))</span><br>[5, 6, 7]<br></code></pre></td></tr></table></figure>
<p>A common convention is to use a single underscore character for the name in the <code>for</code> header if the name is unused in the suite:</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">&gt;&gt;&gt; for _ in range(<span class="hljs-number">3</span>):<br>        print(<span class="hljs-string">&#x27;Go Bears!&#x27;</span>)<br><br>Go Bears!<br>Go Bears!<br>Go Bears!<br></code></pre></td></tr></table></figure>
<h3 id="2-3-3-Sequence-Processing"><a href="#2-3-3-Sequence-Processing" class="headerlink" title="2.3.3 Sequence Processing"></a>2.3.3 Sequence Processing</h3><p>List Comprehensions:</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">odds = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>]</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">[x+<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> odds]</span><br>[2, 4, 6, 8, 10]<br></code></pre></td></tr></table></figure>
<p>The general form is:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">[<span class="hljs-tag">&lt;<span class="hljs-name">map</span> <span class="hljs-attr">expression</span>&gt;</span> for <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span> in <span class="hljs-tag">&lt;<span class="hljs-name">sequence</span> <span class="hljs-attr">expression</span>&gt;</span> if <span class="hljs-tag">&lt;<span class="hljs-name">filter</span> <span class="hljs-attr">expression</span>&gt;</span>]<br></code></pre></td></tr></table></figure>
<p><mark>Aggregation</mark>, to aggregate all value in a sequence into a single value.<br><mark>Higher-Order Functions</mark><br><mark>Conventional Names</mark><br>In Python programs, it is more common to use list comprehension directly rather than higher-order functions, but both approaches to sequence processing are widely used.</p>
<h3 id="2-3-4-Sequence-Abstraction"><a href="#2-3-4-Sequence-Abstraction" class="headerlink" title="2.3.4 Sequence Abstraction"></a>2.3.4 Sequence Abstraction</h3><p><mark>Membership</mark>, A value can be tested for membership in a sequence. 就是看一个元素是否在 list 中. </p>
<p>Python has two operators <code>in</code> and <code>not in</code>:</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">digits</span><br>[1, 8, 2, 8]<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">2</span> <span class="hljs-keyword">in</span> digits</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">1828</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> digits</span><br>True<br></code></pre></td></tr></table></figure>
<p><mark>Slicing</mark>, sequences contain smaller sequences within them. 就是把 list 拆分.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">&gt;&gt;&gt; digits<span class="hljs-selector-attr">[0:2]</span><br><span class="hljs-selector-attr">[1, 8]</span><br>&gt;&gt;&gt; digits<span class="hljs-selector-attr">[1:]</span><br><span class="hljs-selector-attr">[8, 2, 8]</span><br></code></pre></td></tr></table></figure>
<h3 id="2-3-5-Strings"><a href="#2-3-5-Strings" class="headerlink" title="2.3.5 Strings"></a>2.3.5 Strings</h3><p>The constructor <code>str</code>.</p>
<p>String literals are surrounded by either single or double quotation marks.</p>
<p>Strings have a length and they support element selection.</p>
<p>Like lists, strings can also be combined via addtion and multiplication:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"> &gt;&gt;&gt; <span class="hljs-string">&#x27;Berkeley&#x27;</span> + <span class="hljs-string">&#x27;, CA&#x27;</span><br><span class="hljs-string">&#x27;Berkeley, CA&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;Shabu &#x27;</span> * <span class="hljs-number">2</span><br><span class="hljs-string">&#x27;Shabu Shabu &#x27;</span><br></code></pre></td></tr></table></figure>
<p><mark>Membership</mark>, it matches substrings rather than elements:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;here&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;Where&#x27;s Waldo?&quot;</span><br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure>
<p><mark>Multiple Literals</mark>, use triple quoting.<br><mark>String Coerction</mark>, a string can be created from any object in Python by calling the <code>str</code> constructor function.</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">str</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">&#x27; is an element of &#x27;</span> + <span class="hljs-title">str</span>(<span class="hljs-variable">digits</span>)</span><br><span class="hljs-string">&#x27;2 is an element of [1, 8, 2, 8]&#x27;</span><br></code></pre></td></tr></table></figure>
<h3 id="2-3-6-Trees"><a href="#2-3-6-Trees" class="headerlink" title="2.3.6 Trees"></a>2.3.6 Trees</h3><p>The data abstraction for a <code>tree</code> consists of the constructor <code>tree</code> and theselectors <code>label</code> and <code>branches</code>.</p>
<p>A tree is well-formed only if it has a root label and all branches are also trees.</p>
<p>The <code>type</code> function:</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">if</span> <span class="hljs-keyword">type</span>(tree) != list or len(tree) &lt; 1:<br>          return <span class="hljs-type">False</span><br></code></pre></td></tr></table></figure>
<p><code>tree</code> 是 nested list, 第一个元素为 root&#x2F;label, 后面的为 branches.<br><mark>Patition trees</mark>, </p>
<h3 id="2-3-7-Linked-Lists"><a href="#2-3-7-Linked-Lists" class="headerlink" title="2.3.7 Linked Lists"></a>2.3.7 Linked Lists</h3><p>A linked list is a pair containing the first element of the sequence and the rest of the sequence. The second element is also a linked list.</p>
<p>Linked list have recursive structure: the rest of a linked list is a linked list or ‘empty’. 这个 ‘empty’ 是字符串 ‘empty’.</p>
<h2 id="2-4-Mutable-Data"><a href="#2-4-Mutable-Data" class="headerlink" title="2.4 Mutable Data"></a>2.4 Mutable Data</h2><p>One powerful technique for creating modular programs is to incorporate data that may change state over time.</p>
<p>Adding state to data is a central ingredient of a paradigm called object-oriented programming.</p>
<h3 id="2-4-1-The-Object-Metaphor"><a href="#2-4-1-The-Object-Metaphor" class="headerlink" title="2.4.1 The Object Metaphor"></a>2.4.1 The Object Metaphor</h3><p>The distinguish between functions and data: functions performed operations and data were operated upon.</p>
<p>Objects combine data values with behavior.</p>
<p>A class represents a kind of value. Individual dates are called instances of that class.</p>
<p>Objects have <mark>attributes</mark>, which are named values that are part of the object. We use dot notation to designated an attribute of an object.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">expression</span>&gt;</span>.<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>Objects also have <mark>methods</mark>, which are function-valued attributes.</p>
<p>In fact, all values in Python are objects. That is, all values have behavior and attributes. They act like the values they represent.</p>
<h3 id="2-4-2-Sequence-Objects"><a href="#2-4-2-Sequence-Objects" class="headerlink" title="2.4.2 Sequence Objects"></a>2.4.2 Sequence Objects</h3><p>Instances of primitive built-in values such as numbers are immutable. The values themsleves cannot change over the course of program execution.</p>
<p>Mutable objects are used to represent values that change over time.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;&gt; suits.pop()             <span class="hljs-comment"># Remove and return the final element</span></span><br>&#x27;myriad&#x27;<br><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;&gt; suits.remove(<span class="hljs-string">&#x27;string&#x27;</span>)  <span class="hljs-comment"># Remove the first element that equals the argument</span></span><br><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;&gt; suits.append(<span class="hljs-string">&#x27;cup&#x27;</span>)              <span class="hljs-comment"># Add an element to the end</span></span><br><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;&gt; suits.extend([<span class="hljs-string">&#x27;sword&#x27;</span>, <span class="hljs-string">&#x27;club&#x27;</span>])  <span class="hljs-comment"># Add all elements of a sequence to the end</span></span><br></code></pre></td></tr></table></figure>
<p>当<code>suits = chinese</code> 这里 <code>suits</code> 相当于 <code>chinese</code> 这个列表的引用, 修改 <code>suits</code> 会引起 <code>chinese</code> 的值改变.</p>
<p>但:</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">suits</span> <span class="hljs-operator">=</span> list(chinese)<br></code></pre></td></tr></table></figure>
<p>就不会将二者联系在一起.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">suits.insert(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;Joker&#x27;</span>)  <span class="hljs-comment"># Insert an element at index 2, shifting the rest</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">nest[<span class="hljs-number">0</span>].pop(<span class="hljs-number">2</span>)</span><br>&#x27;Joker&#x27;<br></code></pre></td></tr></table></figure>
<p>To test whether two objects are the same, Python includes two comparison operator, called <mark>is</mark> and <mark>is not</mark>, that test whether two expressions in fact evaluate to the identical object.</p>
<p>Two onjects are identical if they are equal in their current value, and any change to one will always be reflected in the other.</p>
<p>区分 <code>==</code> 和 <code>is</code>.</p>
<p><mark>Tuples</mark><br>An instance of the built-in <code>tuple</code> type, is an immutable sequence. 使用 parentheses.</p>
<p>tuple也是 finite length and support element selection:</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">code = (<span class="hljs-string">&quot;up&quot;</span>, <span class="hljs-string">&quot;up&quot;</span>, <span class="hljs-string">&quot;down&quot;</span>, <span class="hljs-string">&quot;down&quot;</span>) + (<span class="hljs-string">&quot;left&quot;</span>, <span class="hljs-string">&quot;right&quot;</span>) * <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">len</span>(code)</span><br>8<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">code[<span class="hljs-number">3</span>]</span><br>&#x27;down&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">code.count(<span class="hljs-string">&quot;down&quot;</span>)</span><br>2<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">code.index(<span class="hljs-string">&quot;left&quot;</span>)</span><br>4<br></code></pre></td></tr></table></figure>
<p>While it is not possible to change which elements are in a tuple, it is possible to change the value of a mutable element contained within a tuple.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">nest = (<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-selector-attr">[30, 40]</span>)<br><span class="hljs-number">2</span>	nest<span class="hljs-selector-attr">[2]</span><span class="hljs-selector-class">.pop</span>()<br></code></pre></td></tr></table></figure>
<h3 id="2-4-3-Dictionaries"><a href="#2-4-3-Dictionaries" class="headerlink" title="2.4.3 Dictionaries"></a>2.4.3 Dictionaries</h3><p>A dictionary contains key-value pairs, where both keys and values are objects.</p>
<p>The purpose of a dictionary is  to provide an abstraction for storing and retrieving values that are indexed not by consecutive integers, but by descriptive keys.</p>
<p>Adding new key-value pairs and changing the existing value for a key can both be achieved with assignment statements:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>numerals[<span class="hljs-string">&#x27;I&#x27;</span>] = <span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>numerals[<span class="hljs-string">&#x27;L&#x27;</span>] = <span class="hljs-number">50</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>numerals<br>&#123;<span class="hljs-string">&#x27;I&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;X&#x27;</span>: <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;L&#x27;</span>: <span class="hljs-number">50</span>, <span class="hljs-string">&#x27;V&#x27;</span>: <span class="hljs-number">5</span>&#125;<br></code></pre></td></tr></table></figure>
<p>Dictionaries are unordered collections of key-value pairs.</p>
<p>The methods <code>keys</code>, <code>values</code>, and <code>items</code> all return iterable values.</p>
<p>A list of key-value pairs can be converted into a dictionary by calling the <code>dict</code> constructor function:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&gt;&gt;&gt; <span class="hljs-title function_">dict</span>(<span class="hljs-params">[(<span class="hljs-number">3</span>, <span class="hljs-number">9</span>), (<span class="hljs-number">4</span>, <span class="hljs-number">16</span>), (<span class="hljs-number">5</span>, <span class="hljs-number">25</span>)]</span>)<br>&#123;<span class="hljs-number">3</span>: <span class="hljs-number">9</span>, <span class="hljs-number">4</span>: <span class="hljs-number">16</span>, <span class="hljs-number">5</span>: <span class="hljs-number">25</span>&#125;<br></code></pre></td></tr></table></figure>
<p>Restrictions:</p>
<ul>
<li>A key of a dictionary cannot be or contain a mutable value.</li>
<li>There can be at most one value for a given key.</li>
</ul>
<p>A  useful method implemented by dictionaries is get, which returns either the value for a key, if the key is present, or a default value. The arguments to get are the key and the default value.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">numerals.get(<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-number">0</span>)</span><br>0<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">numerals.get(<span class="hljs-string">&#x27;V&#x27;</span>, <span class="hljs-number">0</span>)</span><br>5<br></code></pre></td></tr></table></figure>
<p>Dictionaries also have a comprehension syntax analogous to those of lists. A key expression and a value expression are separated by a colon. Evaluating a dictionary comprehension creates a new dictionary object.</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">&gt;&gt;&gt; &#123;<span class="hljs-keyword">x</span>: <span class="hljs-keyword">x</span>*<span class="hljs-keyword">x</span> for <span class="hljs-keyword">x</span> in range(<span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">6</span>)&#125;<br>&#123;<span class="hljs-number">3</span>: <span class="hljs-number">9</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span>: <span class="hljs-number">16</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span>: <span class="hljs-number">25</span>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="2-4-4-Local-State"><a href="#2-4-4-Local-State" class="headerlink" title="2.4.4 Local State"></a>2.4.4 Local State</h3><p>Lists and dictionaries have local state: they are changing values that have some particular contents at any point in the execution of a program.</p>
<p>The <code>nonlocal</code> statement indicates that the name appears somewhere in the environment other than the first(local) frame or the last(global) frame. 也就是说, 假如有个<code>test</code>变量在这个函数之外已经被定义了, 然而要在这个函数里面修改这个<code>test</code>的值, 如果<code>nonlocal test</code>, 那么这个<code>test</code>就不是函数里面的局部变量,而是外面那个.</p>
<p><code>nonlocal</code>用于声明外部函数的局部变量.</p>
<p>high-order function, 就是把需要多个参数的一个函数拆分为, 每次只需要一个参数的迭代函数.</p>
<p>Assignment has a dual role: they either created new bindings or re-bound existing names.</p>
<p>Python has an unusual restriction regarding the lookup of names: within the body of a function, all instances of a name must refer to the same frame.</p>
<p>Adding a <code>nonlocal</code> statement can correct the <code>UnboundLocalError: local variable &#39;balance&#39; referenced before assignment</code> error.</p>
<h3 id="2-4-5-The-Benefits-of-Non-Local-Assignment"><a href="#2-4-5-The-Benefits-of-Non-Local-Assignment" class="headerlink" title="2.4.5 The Benefits of Non-Local Assignment"></a>2.4.5 The Benefits of Non-Local Assignment</h3><h3 id="2-4-6-The-Cost-of-Non-Local-Assignment"><a href="#2-4-6-The-Cost-of-Non-Local-Assignment" class="headerlink" title="2.4.6 The Cost of Non-Local Assignment"></a>2.4.6 The Cost of Non-Local Assignment</h3><p>Our values did not change, only our names and bindings changed.</p>
<p>We must be very careful to understand the effect of a change on other names that might refer to thos  values.</p>
<p><mark>Only function calls</mark> can introduce new frames.</p>
<h3 id="2-4-7-Implementing-Lists-and-Dictionaries"><a href="#2-4-7-Implementing-Lists-and-Dictionaries" class="headerlink" title="2.4.7 Implementing Lists and Dictionaries"></a>2.4.7 Implementing Lists and Dictionaries</h3><p>Two empty lists are not identical values.</p>
<p>A general pattern in programming: the function is a dispatch function and its arguments are first a message, followed by additional arguments to parameterize that method.</p>
<p><mark>Linked list</mark>, 是链表.</p>
<h3 id="2-4-9-Propagating-Constraints"><a href="#2-4-9-Propagating-Constraints" class="headerlink" title="2.4.9 Propagating Constraints"></a>2.4.9 Propagating Constraints</h3><p>Mutable data allows us to simulate systems with change, but also allows us to build new kinds of abstractions.</p>
<p>A <mark>connector</mark> is an object that “holds” a value and may participate in one or more constraints. </p>
<h2 id="2-5-Object-Oriented-Programming"><a href="#2-5-Object-Oriented-Programming" class="headerlink" title="2.5 Object-Oriented Programming"></a>2.5 Object-Oriented Programming</h2><p>Objects have local state that is not directly accessible from the global environment.</p>
<p>Each objects bundles together local state and behavior in a way that abstracts the complexity of both.</p>
<p>Every object also has a type, called its <code>class</code>.</p>
<h3 id="2-5-1-Objects-and-Classes"><a href="#2-5-1-Objects-and-Classes" class="headerlink" title="2.5.1 Objects and Classes"></a>2.5.1 Objects and Classes</h3><p>A class serves as a template for all objects whose type is that class.</p>
<p>Every object is an instance of some particular class.</p>
<p>The syntax in Python for instantiating a class is identical to the syntax of calling a function:</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-variable">a</span> = <span class="hljs-function"><span class="hljs-title">Account</span>(<span class="hljs-string">&#x27;Kirk&#x27;</span>)</span><br></code></pre></td></tr></table></figure>
<p>The attributes specific tot a particular object, as opposed to all objects of a class, are called <mark>instance attributes</mark>. Instance attributes may also be called field, properties, or instance variable.</p>
<p>Functions that operate on the object or perform object-specific computations are called <mark>methods</mark>. Methods are invoked on a particular object.</p>
<h3 id="2-5-2-Defining-Classes"><a href="#2-5-2-Defining-Classes" class="headerlink" title="2.5.2 Defining Classes"></a>2.5.2 Defining Classes</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> &lt;<span class="hljs-symbol">name</span>&gt;:<br>    &lt;<span class="hljs-symbol">suite</span>&gt;<br></code></pre></td></tr></table></figure>
<p>The method that initializes objects has a special name in Python, <code>_init_</code>, and is called the <em>constructor</em> for the class.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ruby">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span>:<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, account_holder</span>):<br>          <span class="hljs-variable language_">self</span>.balance = <span class="hljs-number">0</span><br>          <span class="hljs-variable language_">self</span>.holder = account_holder<br></code></pre></td></tr></table></figure>
<p>第一个<code>self</code>参数是 bound to the newly created object. 使用<code>self</code>是一个 convention.</p>
<p>第二个参数是我们传入的.</p>
<p>Object identity is compared using the <code>is</code> and <code>is not</code> operators.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a <span class="hljs-keyword">is</span> a<br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> b<br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure>
<p>Binding an object to a new name using assignment does not create a new object:</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">c = a</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">c <span class="hljs-keyword">is</span> a</span><br>True<br></code></pre></td></tr></table></figure>
<p>Methods’definition:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span>:<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, account_holder</span>):<br>          self.balance = <span class="hljs-number">0</span><br>          self.holder = account_holder<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">deposit</span>(<span class="hljs-params">self, amount</span>):<br>          self.balance = self.balance + amount<br>          <span class="hljs-keyword">return</span> self.balance<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">withdraw</span>(<span class="hljs-params">self, amount</span>):<br>          <span class="hljs-keyword">if</span> amount &gt; self.balance:<br>              <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Insufficient funds&#x27;</span><br>          self.balance = self.balance - amount<br>          <span class="hljs-keyword">return</span> self.balance<br></code></pre></td></tr></table></figure>
<p>注意都有<code>self</code> 参数.</p>
<h3 id="2-5-3-Message-Passing-and-Dot-Expressions"><a href="#2-5-3-Message-Passing-and-Dot-Expressions" class="headerlink" title="2.5.3 Message Passing and Dot Expressions"></a>2.5.3 Message Passing and Dot Expressions</h3><p>Dot notation is a syntactic feature of Python that formalizes the message passing metaphor.</p>
<p><em>Dot expression</em>, consists of an expression, a dot, and a name.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">expression</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>The built-in function <code>getattr</code> will return an attribute for an object by name:</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">getattr</span>(spock_account, <span class="hljs-string">&#x27;balance&#x27;</span>)</span><br>10<br></code></pre></td></tr></table></figure>
<p>To test whether an object has a named attribute with <code>hasattr</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">hasattr</span>(spock_account, <span class="hljs-string">&#x27;deposit&#x27;</span>)<br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure>
<p><em>Methods and function</em>. WWhen a method is invoked on an object, that object is implicitly passed as the first argument to the method. As a result, the object is bound to the parameter <code>self</code>.</p>
<p>We can call <code>deposit</code>(example in the text) in two ways: as a function and as a bound method.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">Account.deposit(spock_account, <span class="hljs-number">1001</span>)  <span class="hljs-comment"># The deposit function takes 2 arguments</span></span><br>1011<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">spock_account.deposit(<span class="hljs-number">1000</span>)           <span class="hljs-comment"># The deposit method takes 1 argument</span></span><br>2011<br></code></pre></td></tr></table></figure>
<p>也就是说, 使用 dot operator 是自动传入<code>self</code>参数.</p>
<p><em>Naming Conventions</em>, 首字母大写.</p>
<p>Python’s convention dictates that if an attribute name starts with an underscore, it should only be accessed within methods of the class itself, rather than by users of the class.</p>
<h3 id="2-5-4-Class-Attributes"><a href="#2-5-4-Class-Attributes" class="headerlink" title="2.5.4 Class Attributes"></a>2.5.4 Class Attributes</h3><p>Some attribute values are shared across all objects of a given class. Such attributes are associated with the class itself, rather than any individual instance of the class. 也就是说这个 attribute 是和整个 class 关联在一起的. 使用class改变. <mark>class attributes</mark> may also be called class variables or static variables.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">Account.interest = <span class="hljs-number">0.05</span>  <span class="hljs-comment"># changing the class attribute</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">spock_account.interest     <span class="hljs-comment"># changes instances without like-named instance attributes</span></span><br>0.05<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">kirk_account.interest     <span class="hljs-comment"># but the existing instance attribute is unaffected</span></span><br>0.08<br></code></pre></td></tr></table></figure>

<p>分有 class attribute 和 instance attribute.</p>
<p>Instance attributes are found before class attributes, just as local names have priority over global in an environment.</p>
<h3 id="2-5-5-Inheritance"><a href="#2-5-5-Inheritance" class="headerlink" title="2.5.5 Inheritance"></a>2.5.5 Inheritance</h3><p>Two classes may have similar attributes, but one represents a special case of the othor.</p>
<p>The terms <mark>parent class</mark> and superclass are also used for the base class, while <mark>child class</mark> is also used for the subclass.</p>
<h3 id="2-5-6-Using-Inheritance"><a href="#2-5-6-Using-Inheritance" class="headerlink" title="2.5.6 Using Inheritance"></a>2.5.6 Using Inheritance</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-symbol">CheckingAccount</span>(<span class="hljs-symbol">Account</span>):<br></code></pre></td></tr></table></figure>
<p>Placing an expression that evaluates to the base class in parentheses after the class name. subclass 可以覆盖 superclass 的 attributes.</p>
<p>To look up a name in a class:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-number">1.</span> If <span class="hljs-keyword">it</span> names <span class="hljs-keyword">an</span> attribute <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> class, <span class="hljs-literal">return</span> <span class="hljs-keyword">the</span> attribute <span class="hljs-built_in">value</span>.<br><span class="hljs-number">2.</span> Otherwise, look up <span class="hljs-keyword">the</span> name <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> base class, <span class="hljs-keyword">if</span> there is <span class="hljs-literal">one</span>.<br></code></pre></td></tr></table></figure>
<p>An <mark>object interface</mark> is a collection of attributes and conditions on those attributes.</p>
<h3 id="2-5-7-Multiple-Inheritance"><a href="#2-5-7-Multiple-Inheritance" class="headerlink" title="2.5.7 Multiple Inheritance"></a>2.5.7 Multiple Inheritance</h3><p>Python supports the concept of a subclass inheriting attributes from multiple base classes, a language feature called <mark>multiple inheritance</mark>. 也就是说从多个 class 中继承.</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-symbol">AsSeenOnTVAccount</span>(<span class="hljs-symbol">CheckingAccount, <span class="hljs-symbol">SavingsAccount</span></span>):<br></code></pre></td></tr></table></figure>
<p>在继承图中, Python resolves names from left to right, then upwards.</p>
<p>Python resolves this name using a recursive algorithm called the C3 Method Resolution Ordering.</p>
<h3 id="2-5-8-The-Role-of-Objects"><a href="#2-5-8-The-Role-of-Objects" class="headerlink" title="2.5.8 The Role of Objects"></a>2.5.8 The Role of Objects</h3><p>The Python object system is designed to make data abstraction and message passing both convenient and flexible.</p>
<h2 id="2-6-Implementing-Classes-and-Objects"><a href="#2-6-Implementing-Classes-and-Objects" class="headerlink" title="2.6 Implementing Classes and Objects"></a>2.6 Implementing Classes and Objects</h2><p>Programs can be object-oriented, even in programming languages that do not have a built-in object system.</p>
<h3 id="2-6-1-Instances"><a href="#2-6-1-Instances" class="headerlink" title="2.6.1 Instances"></a>2.6.1 Instances</h3><p>An instance has named attributes, such as the balance of an account, which can be set and retrieved.</p>
<h3 id="2-6-2-Classes"><a href="#2-6-2-Classes" class="headerlink" title="2.6.2 Classes"></a>2.6.2 Classes</h3><p>A class is also an object, both in Python’s object system and the system we are implementing here.</p>
<p>In Python, classes do have classes, almost all classes share the same class, called <code>type</code>.</p>
<h2 id="2-7-Object-Abstraction"><a href="#2-7-Object-Abstraction" class="headerlink" title="2.7 Object Abstraction"></a>2.7 Object Abstraction</h2><p>A central concept in object abstraction is a <mark>generic function</mark>, which is a function that can accept values of multiple different types.</p>
<p>Three different techniques for implementing generic functions:</p>
<ul>
<li>shared interfaces</li>
<li>type dispatching</li>
<li>type coercion</li>
</ul>
<h3 id="2-7-1-String-Conversion"><a href="#2-7-1-String-Conversion" class="headerlink" title="2.7.1 String Conversion"></a>2.7.1 String Conversion</h3><p>Python simulates that all objects should produce two different string representations:</p>
<ul>
<li>humen-interpretable text</li>
<li>Python-interpretable expression<br>The constructor <code>str</code> returns a human-readable string. The <code>repr</code> function returns a Python expression that evaluates to an equal object.<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">tues = date(<span class="hljs-number">2011</span>, <span class="hljs-number">9</span>, <span class="hljs-number">12</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">repr</span>(tues)</span><br>&#x27;datetime.date(2011, 9, 12)&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">str</span>(tues)</span><br>&#x27;2011-09-12&#x27;<br></code></pre></td></tr></table></figure>
The <code>repr</code> function always invokes a method called <code>_repr_</code> on its argument:<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&gt;&gt;&gt; tues.__repr__()<br>&#x27;datetime.date(<span class="hljs-number">2011</span>, 9, 12)&#x27;<br></code></pre></td></tr></table></figure>
The <code>str</code> function always invokes a method called <code>_str_</code> on its argument:<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&gt;&gt;&gt; tues.__str__()<br>&#x27;<span class="hljs-number">2011-09-12</span>&#x27;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-7-2-Special-Methods"><a href="#2-7-2-Special-Methods" class="headerlink" title="2.7.2 Special Methods"></a>2.7.2 Special Methods</h3><p>In Python, certain special names are invoked by the Python interpreter in special circumstances. For example, the <code>_init_</code> method of a class is automatically invoked whenever an object is constructed.</p>
<p>定义<code>_bool_</code>来判断一个object的 true or false.</p>
<p>The <code>len</code> function invokes the <code>_len_</code> method of its argument to determine its length.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-string">&#x27;Go Bears!&#x27;</span>._len_()</span><br>9<br></code></pre></td></tr></table></figure>
<p>Python uses a sequence’s length to determine its truth value, if it does not provide a <code>_bool_</code> method. Empty sequences are false, while non-empty sequences are true:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">bool</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><span class="hljs-literal">False</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">bool</span>([])<br><span class="hljs-literal">False</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">bool</span>(<span class="hljs-string">&#x27;Go Bears!&#x27;</span>)<br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure>
<p>The <code>_getitem_</code> method is invoked by the element selection operator, but it can also be invoked directly:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;Go Bears!&#x27;</span>[<span class="hljs-number">3</span>]<br><span class="hljs-string">&#x27;B&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;Go Bears!&#x27;</span>.__getitem__(<span class="hljs-number">3</span>)<br><span class="hljs-string">&#x27;B&#x27;</span><br></code></pre></td></tr></table></figure>
<p>Using <code>_call_</code> method we can define a class that behaves like functions:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ruby">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">Adder</span>(object):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, n</span>):<br>            <span class="hljs-variable language_">self</span>.n = n<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, k</span>):<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.n + k<br><br>&gt;&gt;&gt; add_three_obj = Adder(<span class="hljs-number">3</span>)<br>&gt;&gt;&gt; add_three_obj(<span class="hljs-number">4</span>)<br><span class="hljs-number">7</span><br></code></pre></td></tr></table></figure>
<h3 id="2-7-3-Multiple-Representations"><a href="#2-7-3-Multiple-Representations" class="headerlink" title="2.7.3 Multiple Representations"></a>2.7.3 Multiple Representations</h3><p>How numbers can be added or multiplied is abstracted by the method names add and mul:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ruby">&gt;&gt;&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">Number</span>:<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, other</span>):<br>          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.add(other)<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">__mul__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, other</span>):<br>          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.mul(other)<br></code></pre></td></tr></table></figure>
<p><mark>Special method names</mark><br>和行为挂钩, 比如:<code>_add_</code> 和 <code>+</code> 相关, 做<code>+</code>运算时会自动调用<code>_add_</code>.</p>
<p>An <mark>interface</mark> is a set of shared attribute names, along with a specification of their behavior.</p>
<p>The <code>@property</code> decorator allows functions to be called without call expression syntax. 也就是调用 method 时后面不用加括号.</p>
<p>Multiple representations of data, 也就是一种数据用多种表示方法.</p>
<h3 id="2-7-4-Generic-Functions"><a href="#2-7-4-Generic-Functions" class="headerlink" title="2.7.4 Generic Functions"></a>2.7.4 Generic Functions</h3><p>Generic functions are methods or functions that apply to arguments of different types.</p>
<p>The built-in function <code>isinstance</code> takes an object and a class. It returns true if the object has a class that either is or inherits from the given class.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">c = ComplexRI(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">isinstance</span>(c, ComplexRI)</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">isinstance</span>(c, Complex)</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">isinstance</span>(c, ComplexMA)</span><br>False<br></code></pre></td></tr></table></figure>
<p>使用 <code>type_tag</code> attribute.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">Rational.type_tag = <span class="hljs-string">&#x27;rat&#x27;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">Complex.type_tag = <span class="hljs-string">&#x27;com&#x27;</span></span><br></code></pre></td></tr></table></figure>
<h4 id="Coercion"><a href="#Coercion" class="headerlink" title="Coercion"></a>Coercion</h4><p>Often the different data types are not completely independent, and there may be ways by which objects of one type may be viewed as being of another type. This process is called <mark>coercion</mark>.</p>
<p>Here is a typical coercion function, which transforms a rational number to a complex number with zero imaginary part:</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">&gt;&gt;&gt; def rational<span class="hljs-constructor">_to_complex(<span class="hljs-params">r</span>)</span>:<br>        return <span class="hljs-constructor">ComplexRI(<span class="hljs-params">r</span>.<span class="hljs-params">numer</span><span class="hljs-operator">/</span><span class="hljs-params">r</span>.<span class="hljs-params">denom</span>, 0)</span><br></code></pre></td></tr></table></figure>

<p>It is not generally possible to coerce an arbitrary data object of each type into all other types.</p>
<p>This coercion scheme has some advantages over the method of defining explicit cross-type operations.</p>
<p>Although we still need to write coercion functions to relate the types, we need to write only one function for each pair of types rather than a different function for each set of types and each generic operation.</p>
<p>Some more sophisticeted coercion schemes do nut just try to coerce one type into another, but instead may try to coerce two different types each into a third common type.</p>
<h2 id="2-8-Efficiency"><a href="#2-8-Efficiency" class="headerlink" title="2.8 Efficiency"></a>2.8 Efficiency</h2><h3 id="2-8-1-Measuring-Efficiency"><a href="#2-8-1-Measuring-Efficiency" class="headerlink" title="2.8.1 Measuring Efficiency"></a>2.8.1 Measuring Efficiency</h3><p>Inspecting how many times <code>fib</code> is called:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">count</span>(<span class="hljs-params">f</span>):<br>      <span class="hljs-keyword">def</span> <span class="hljs-title function_">counted</span>(<span class="hljs-params">*args</span>):<br>          counted.call_count += <span class="hljs-number">1</span><br>          <span class="hljs-keyword">return</span> f(*args)<br>      counted.call_count = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">return</span> counted<br>      &gt;&gt;&gt; fib = count(fib)<br><span class="hljs-meta">&gt;&gt;&gt; </span>fib(<span class="hljs-number">19</span>)<br><span class="hljs-number">4181</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>fib.call_count<br><span class="hljs-number">13529</span><br></code></pre></td></tr></table></figure>
<h4 id="Space"><a href="#Space" class="headerlink" title="Space"></a>Space</h4><p>The interpreter preserves all active environment and all values and frames referenced by those environments.</p>
<p>An environment is active if it provides the evaluation context for some expression being evaluated. An environment becomes inactive whenever the function call for which its first frame was ceated finally returns.</p>
<h3 id="2-8-2-Memoization"><a href="#2-8-2-Memoization" class="headerlink" title="2.8.2 Memoization"></a>2.8.2 Memoization</h3><p>Tree-recursive computational processes can often be made more efficient through memoization.</p>
<p>A memoized function will store the return value for any arguments it has previously received. 就是以前计算过的值在 recursive computation 中不会被计算第二次.</p>
<h3 id="2-8-3-Orders-of-Growth"><a href="#2-8-3-Orders-of-Growth" class="headerlink" title="2.8.3 Orders of Growth"></a>2.8.3 Orders of Growth</h3><h2 id="2-9-Recursive-Objects"><a href="#2-9-Recursive-Objects" class="headerlink" title="2.9 Recursive Objects"></a>2.9 Recursive Objects</h2><p>Objects can have other objects as attribute values. When an object of some class has an attribute value of that same class, it is a recursive object.</p>
<h3 id="2-9-1-Linked-List-Class"><a href="#2-9-1-Linked-List-Class" class="headerlink" title="2.9.1 Linked List Class"></a>2.9.1 Linked List Class</h3><p>The empty list is a special case of a linked list that has no first element or rest.</p>
<p>A linked list is a sequence: it has a finite length and supports element selection by index.</p>
<p>These bulit-in functions invoke special method names of a class: length is computed by <code>_len_</code> and element selection is computed by <code>_getitem_</code>.</p>
<h3 id="2-9-3-Sets"><a href="#2-9-3-Sets" class="headerlink" title="2.9.3 Sets"></a>2.9.3 Sets</h3><p>Sets are unordered collections, and so the printed ordering may differ from the element ordering in the set literal.</p>
<p>Python sets support a vatiety of operations, including membership tests, length computation, and the standard set operations of union and intersection.</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">3</span> <span class="hljs-keyword">in</span> s</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">len</span>(s)</span><br>4<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">s.union(&#123;<span class="hljs-number">1</span>, <span class="hljs-number">5</span>&#125;)</span><br>&#123;1, 2, 3, 4, 5&#125;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">s.intersection(&#123;<span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>&#125;)</span><br>&#123;3, 4&#125;<br><br></code></pre></td></tr></table></figure>
<p>Sets comparison:</p>
<ul>
<li>isdisjoint</li>
<li>issubset</li>
<li>issuperset<br>Mutable, change one element at a time:</li>
<li>add</li>
<li>remove</li>
<li>discard</li>
<li>pop<br>Multi-element mutations:</li>
<li>clear</li>
<li>update</li>
</ul>
<h1 id="Chapter-3-Interpreting-Computer-Programs"><a href="#Chapter-3-Interpreting-Computer-Programs" class="headerlink" title="Chapter 3: Interpreting Computer Programs"></a>Chapter 3: Interpreting Computer Programs</h1><h2 id="3-1-Introduction"><a href="#3-1-Introduction" class="headerlink" title="3.1 Introduction"></a>3.1 Introduction</h2><h3 id="3-1-1-Programming-Language"><a href="#3-1-1-Programming-Language" class="headerlink" title="3.1.1 Programming Language"></a>3.1.1 Programming Language</h3><h2 id="3-2-Functional-Programming"><a href="#3-2-Functional-Programming" class="headerlink" title="3.2 Functional Programming"></a>3.2 Functional Programming</h2>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Python/" class="category-chain-item">Python</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>CS61A Python Notes</div>
      <div>http://example.com/2022/07/31/CS61A-Python-Notes/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年7月31日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/08/01/Engineering-a-compiler-Notes/" title="Engineering a compiler Notes">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Engineering a compiler Notes</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/07/30/CS143-Notes/" title="CS143 Notes">
                        <span class="hidden-mobile">CS143 Notes</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
